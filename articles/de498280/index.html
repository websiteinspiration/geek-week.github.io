<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐘 💄 🙌🏽 Die Geschichte des Dodo-Vogels aus der Gattung Phoenix. Der große Fall von Dodo IS 🛤️ 🎈 ⌚️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jedes Jahr am 21. April erinnern wir uns an die Geschichte des großen Falls von Dodo IS im Jahr 2018. Die Vergangenheit ist ein grausamer, aber fairer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Die Geschichte des Dodo-Vogels aus der Gattung Phoenix. Der große Fall von Dodo IS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/498280/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jedes Jahr am 21. April erinnern wir uns an die Geschichte des großen Falls von Dodo IS im Jahr 2018. </font><font style="vertical-align: inherit;">Die Vergangenheit ist ein grausamer, aber fairer Lehrer. </font><font style="vertical-align: inherit;">Es lohnt sich, sich daran zu erinnern, die Lektionen zu wiederholen, das gesammelte Wissen an neue Generationen weiterzugeben und dankbar auf das zu verweisen, was wir geworden sind. </font><font style="vertical-align: inherit;">Unter dem Schnitt möchten wir Ihnen eine Geschichte darüber erzählen und Schlussfolgerungen teilen. </font><font style="vertical-align: inherit;">Sie können dem Feind nicht einmal eine solche Situation wünschen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sy/r0/jj/syr0jjrgnwuubuusucjvag6ot-o.png"><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Große Herbstgeschichte</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tag 1. Der Unfall, der uns Millionen Rubel gekostet hat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Samstag, den 21. April 2018, fiel das Dodo IS-System aus. Fiel sehr schlecht. Mehrere Stunden lang konnten unsere Kunden weder über die Website noch über die mobile Anwendung eine Bestellung aufgeben. Die Anzahl der Anrufe beim Call Center ist so hoch geworden, dass die automatische Stimme des Anrufbeantworters sagt: "Wir rufen in 4 Stunden zurück." </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ek/ha/ac/ekhaac2m8owflsjdblpfmnksux8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Tag erlebten wir einen der schwersten Stürze von Dodo IS. Das Schlimmste war, dass wir am Tag zuvor die erste TV-Werbekampagne des Bundes mit einem Budget von 100 Millionen Rubel gestartet haben. Es war eine großartige Veranstaltung für Dodo Pizza. Das IT-Team war auch gut auf die Kampagne vorbereitet. Wir haben die Bereitstellung automatisiert und vereinfacht - jetzt können wir mit Hilfe einer einzigen Schaltfläche in TeamCity einen Monolithen in 12 Ländern bereitstellen. Wir haben nicht alles Mögliche getan und es deshalb vermasselt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Werbekampagne war unglaublich. Wir haben 100-150 Bestellungen pro Minute erhalten. Das waren gute Nachrichten. Die schlechte Nachricht: Dodo IS konnte einer solchen Belastung nicht standhalten und starb. Wir haben die Grenze der vertikalen Skalierung erreicht und konnten keine Bestellungen mehr bearbeiten. Das System war etwa drei Stunden lang instabil und erholte sich regelmäßig, fiel jedoch sofort wieder ab. Jede Minute Ausfallzeit kostete uns Zehntausende Rubel, ohne den Respektverlust verärgerter Kunden zu berücksichtigen. Das Entwicklungsteam hat alle im Stich gelassen: Kunden, Partner, Leute in Pizzerien und ein Callcenter. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/te/kw/nutekwrugivxr0ns__zlnzxo74a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir hatten keine andere Wahl, als die Ärmel hochzukrempeln und uns hinzusetzen, um die Situation zu korrigieren. Seit Sonntag (22. April) haben wir im harten Modus gearbeitet, wir hatten nicht das Recht, einen Fehler zu machen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Folgende ist unsere Zusammenfassung der Erfahrungen, wie wir uns in einer solchen Situation befinden und wie wir später daraus herauskommen können. </font><font style="vertical-align: inherit;">Freunde, macht keine Fehler.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Fehler, die den Domino-Effekt ausgelöst haben</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es lohnt sich, damit zu beginnen, wie alles begann und wo wir es vermasselt haben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/yy/_hqhyy80kusheiqap3xwfchwjvk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Samstag, den 21.04.2008, gegen 17:00 Uhr, stellten wir fest, dass die Anzahl der Sperren in der Datenbank zu steigen begann - ein Vorbote von Problemen. </font><font style="vertical-align: inherit;">Wir hatten ein Runbook bereit zu lösen, da wir verstanden hatten, woher diese Schlösser kamen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles lief schief, nachdem das Runbook zweimal fehlgeschlagen war. </font><font style="vertical-align: inherit;">Für ein paar Minuten normalisierte sich die Basis wieder und begann dann wieder, an Schlössern zu ersticken. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leider hatte die Master-Datenbank rollback_on_timeout 600 Sekunden, weshalb sich alle Sperren angesammelt haben. </font><font style="vertical-align: inherit;">Dies ist die erste wichtige Datei in dieser Geschichte. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein einfaches Setup könnte alles speichern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann gab es Versuche, das System auf viele Arten wieder zum Leben zu erwecken, von denen keine erfolgreich war. </font><font style="vertical-align: inherit;">Bis wir feststellten, dass es einen Unterschied im Schema des Auftragseingangs in der mobilen Anwendung und auf der neuen Website gibt. </font><font style="vertical-align: inherit;">Nachdem wir sie der Reihe nach gekürzt hatten, konnten wir verstehen, wo sich die Löcher im alten Bestellschema befinden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Auftragsannahme-System wurde vor langer Zeit geschrieben. </font><font style="vertical-align: inherit;">Zu diesem Zeitpunkt wurde es bereits verarbeitet und auf der neuen Website dodopizza.ru eingeführt. </font><font style="vertical-align: inherit;">Es wurde nicht in der mobilen Anwendung verwendet. </font><font style="vertical-align: inherit;">Anfänglich waren die Gründe für die Schaffung eines neuen Bestellschemas rein geschäftliche Regeln, Leistungsprobleme standen nicht einmal auf der Tagesordnung. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist die zweite wichtige Datei - wir kannten die Grenzen unseres Systems nicht.</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tag 2. Unfallbeseitigung </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Reaktion des Teams war sehr aufschlussreich. Unsere Tankstelle schrieb einen Beitrag über Slack, und alle kamen am nächsten Tag - am 22. April begannen die Arbeiten um 8:30 Uhr morgens. Niemand musste überredet oder gebeten werden, an seinem freien Tag zu kommen. Jeder hat alles verstanden: Was unterstützt werden muss, hilft mit seinen Händen, mit seinem Kopf beim Testen, bei der Abfrageoptimierung und bei der Infrastruktur. Einige kamen sogar mit der ganzen Familie! Die Leute aus benachbarten Teams, die nichts mit IT zu tun hatten, kamen mit Essen ins Büro, und das Callcenter brachte für alle Fälle zusätzliche Kräfte mit. Alle Teams vereint in einem einzigen Ziel - aufzusteigen! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4u/sv/nt/4usvntb_mitqlbh7sya9rltxoqq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein neuer Empfang des Ordens war das Hauptziel am Sonntag, den 22. April. Wir haben verstanden, dass der Höchststand der Bestellungen mit dem Samstag vergleichbar wäre. Wir hatten die strengste Frist - um 17 Uhr wird eine neue Flut von Bestellungen fallen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Tag handelten wir gemäß dem Plan „um sicherzustellen, dass er nicht fällt“, den wir am Vorabend des 21. Tages am späten Abend ausgearbeitet hatten, als wir das System bereits angehoben und verstanden hatten, was passiert war. </font><font style="vertical-align: inherit;">Der Plan wurde bedingt in zwei Teile geteilt:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung des Schemas mit einer neuen Reihenfolge in der mobilen Anwendung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimierung des Auftragserstellungsprozesses.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch die Implementierung dieser Dinge können wir sicher sein, dass Dodo IS nicht fallen wird. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir bestimmen die Front von Arbeit und Arbeit</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Implementierung des Schemas mit einer neuen Bestellung in einer mobilen Anwendung hatte höchste Priorität. Wir hatten keine genauen Zahlen für das gesamte Schema, aber in einigen Teilen, der Anzahl und Qualität der Abfragen an die Datenbank, haben wir fachmännisch verstanden, dass dies zu einer Steigerung der Produktivität führen würde. Ein Team von 15 Personen arbeitete Tag für Tag an der Aufgabe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl in der Tat die Einführung eines neuen Bestellschemas, haben wir vor dem Herbst vom 04.21 begonnen., Aber den Deal nicht abgeschlossen. Es gab immer noch aktive Fehler und die Aufgabe hing in einem halbaktiven Zustand. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Team teilte die Regression in Teile auf: Regression von zwei mobilen Plattformen plus Pizzeria-Management. Wir haben viel Zeit manuell damit verbracht, Test-Pizzerien vorzubereiten, aber eine klare Trennung half dabei, die manuelle Regression zu parallelisieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald eine Änderung eingeführt wurde, wurde sie sofort in der Vorproduktionsumgebung bereitgestellt und sofort getestet. Das Team war immer in Kontakt miteinander, sie saßen wirklich nur in einem großen Raum mit Treffpunkten. Die Jungs von Nischni Nowgorod und Syktyvkar waren auch immer in Kontakt. Wenn es einen Stecker gab, entschied er sich sofort. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalerweise bringen wir schrittweise neue Funktionen heraus: 1 Pizzeria, 5 Pizzerien, 10 Pizzerien, 20 Pizzerien usw. schrittweise im gesamten Netzwerk. Dieses Mal mussten wir entschlossener handeln. Wir hatten keine Zeit - um 17 Uhr begann ein neuer Höhepunkt. Wir konnten es einfach nicht verfehlen, es zu fangen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gegen 15:00 Uhr wurde das Update auf die Hälfte des Netzwerks übertragen (dies sind ungefähr 200 Pizzerien). Um 15:30 Uhr stellten wir sicher, dass alles gut funktionierte und schalteten das gesamte Netzwerk ein. Funktionenumschaltungen, schnelle Bereitstellungen, in Teile zerlegte Regression und eine feste API halfen dabei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Rest des Teams befasste sich beim Erstellen eines Auftrags mit verschiedenen Optimierungsoptionen. Das neue Schema war nicht ganz neu, es verwendete immer noch den alten Teil. Adressen speichern, Aktionscodes anwenden, Bestellnummern generieren - diese Teile waren und sind üblich. Ihre Optimierung wurde entweder darauf reduziert, die SQL-Abfragen selbst neu zu schreiben oder sie im Code zu entfernen oder ihre Aufrufe zu optimieren. Etwas ging in den asynchronen Modus, etwas, wie sich herausstellte, wurde mehrmals anstelle von einem aufgerufen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Infrastruktur-Team hat sich verpflichtet, einen Teil der Komponenten getrennten Instanzen zuzuweisen, um die Last nicht zu überschreiten. </font><font style="vertical-align: inherit;">Unsere Hauptproblemkomponente war die Legacy-Fassade, die zur Legacy-Basis führte. </font><font style="vertical-align: inherit;">Alle Arbeiten waren ihm gewidmet, einschließlich der Aufteilung der Instanzen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisieren Sie den Prozess</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Morgen hatten wir die einzige Synchronisation des Tages, brachen in Teams auf und gingen zur Arbeit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst haben wir das gesamte Protokoll der Änderungen und Aufgaben direkt in Slack geführt, da es zunächst nicht so viele Aufgaben gab. Aber ihre Zahl wuchs, und so zogen wir schnell nach Trello. Die konfigurierte Integration zwischen Slack und Trello hat jede Statusänderung im Puzzle gemeldet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus war es uns wichtig, das gesamte Produktionsänderungsprotokoll zu sehen. Die elektronische Version befand sich in Trello, die Backup-Version befand sich in Form von Karten auf der Infrastrukturplatine. Für den Fall, dass etwas schief gehen sollte, mussten wir schnell herausfinden, welche Änderungen rückgängig gemacht werden müssen. Die vollständige Regression galt nur für das Schema mit einer neuen Reihenfolge, der Rest der Änderungen wurde loyaler getestet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufgaben flogen mit hoher Geschwindigkeit zur Produktion. Insgesamt haben wir das System an diesem Tag 15 Mal aktualisiert. Den Jungs wurden Teststände eingesetzt, einer pro Team. Entwicklung, schnelle Überprüfung, Bereitstellung in der Produktion. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neben dem Haupt-CTO-Prozess traf Sasha Andronov ständig auf Teams mit der Frage „Wie kann man helfen?“. Dies half, die Bemühungen neu zu verteilen und keine Zeit zu verlieren, weil jemand nicht daran dachte, um Hilfe zu bitten. Semi-manuelles Entwicklungsmanagement, ein Minimum an Ablenkungen und Arbeit bis an die Grenzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach diesem Tag war es notwendig, mit dem Gefühl auszugehen, dass wir alles getan haben, was wir konnten. Und noch mehr. Und wir haben es geschafft! Um 15:30 Uhr wurde ein neues Schema für den Empfang einer Bestellung für eine mobile Anwendung im gesamten Netzwerk eingeführt. Hackathon-Modus, unter 20 Bereitstellungen pro Produktion und Tag!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Abend des 22. April war ruhig und klar. </font><font style="vertical-align: inherit;">Weder Stürze noch ein einziger Hinweis ist, dass das System möglicherweise schlecht ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gegen 22 Uhr versammelten wir uns wieder und skizzierten einen wöchentlichen Aktionsplan. </font><font style="vertical-align: inherit;">Einschränkung, Leistungstests, asynchrone Reihenfolge und vieles mehr. </font><font style="vertical-align: inherit;">Es war ein langer Tag und es standen lange Wochen bevor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiedergeburt</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Woche vom 23. April war höllisch. </font><font style="vertical-align: inherit;">Danach sagten wir uns, dass wir unser Bestes zu 200% gegeben und alles getan hatten, was wir konnten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir mussten Dodo IS retten und beschlossen, eine medizinische Analogie anzuwenden. </font><font style="vertical-align: inherit;">Im Allgemeinen ist dies der erste reale Fall der Verwendung einer Metapher (wie in der ursprünglichen XP), die wirklich dazu beigetragen hat, zu verstehen, was geschah:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiederbelebung - wenn Sie einen sterbenden Patienten retten müssen. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Behandlung - wenn Symptome vorliegen, der Patient aber noch lebt.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/1a/jm/_r/1ajm_re5g-xgtcik_ykvtdlewmu.jpeg"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reanimation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Stufe der Wiederbelebung ist das Standard-Runbook zur Wiederherstellung des Systems im Falle eines Ausfalls gemäß einigen Parametern. </font><font style="vertical-align: inherit;">Eine Sache ist gefallen - wir tun es, diese ist gefallen - wir tun es und so weiter. </font><font style="vertical-align: inherit;">Im Falle eines Absturzes finden wir schnell das gewünschte Runbook, alle liegen auf GitHub und sind nach Problemen strukturiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Stufe der Wiederbelebung ist die Beschränkung von Bestellungen. </font><font style="vertical-align: inherit;">Wir haben diese Praxis aus unseren eigenen Pizzerien übernommen. </font><font style="vertical-align: inherit;">Wenn viele Bestellungen in der Pizzeria abgeladen werden und sie verstehen, dass sie sie nicht schnell kochen können, stehen sie 5 Minuten lang im Stopp. Nur um die Bestellposition zu löschen. </font><font style="vertical-align: inherit;">Wir haben ein ähnliches Schema für Dodo IS erstellt. </font><font style="vertical-align: inherit;">Wir haben beschlossen, dass wir, wenn es wirklich schlimm wird, das allgemeine Limit aktivieren und den Kunden sagen, Jungs, Jungs, 5 Minuten, und wir werden Ihre Bestellung entgegennehmen. </font><font style="vertical-align: inherit;">Wir haben diese Maßnahme für alle Fälle entwickelt, sie jedoch nie angewendet. </font><font style="vertical-align: inherit;">Nicht nützlich. </font><font style="vertical-align: inherit;">Und nett.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Behandlung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um mit der Behandlung beginnen zu können, muss eine Diagnose gestellt werden. Daher haben wir uns auf Leistungstests konzentriert. Ein Teil des Teams sammelte mit GoReplay ein echtes Lastprofil aus der Produktion. Ein Teil des Teams konzentrierte sich auf synthetische Tests auf der Bühne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Synthesetests spiegelten nicht das tatsächliche Lastprofil wider, gaben jedoch Anlass zu Verbesserungen und zeigten einige Schwachstellen im System. Kurz zuvor haben wir beispielsweise den MySQL-Connector von Oracle </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf einen neuen verschoben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In der Version des Connectors gab es einen Fehler bei Pooling-Sitzungen, der dazu führte, dass die Server einfach an die Decke der CPU gingen und keine Anfragen mehr bedienten. Wir haben dies mit Bühnentests reproduziert, konzipiert und sind leise in Produktion gegangen. Es gab ein Dutzend solcher Fälle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn sie die Ursachen der Probleme diagnostizieren und identifizieren, werden sie punktuell korrigiert. </font><font style="vertical-align: inherit;">Wir haben ferner verstanden, dass unser idealer Weg der asynchrone Empfang einer Bestellung ist. </font><font style="vertical-align: inherit;">Wir haben begonnen, es in einer mobilen Anwendung einzuführen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Höllenwochen: Prozessorganisation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Team von 40 Mitarbeitern arbeitete an einem einzigen großen Ziel - der Stabilisierung des Systems. Alle Teams haben zusammengearbeitet. Sie wissen nicht, was Sie tun sollen? Helfen Sie anderen Teams. Die Konzentration auf bestimmte Ziele half dabei, nicht besprüht zu werden und keinen Unsinn zu machen, der für uns unnötig war. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/3e/ik/zu3eikvdviql0uyvqabv3w18axi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dreimal am Tag gab es eine Synchronisation, ein übliches Stand-up wie bei einem klassischen Scrum. Für 40 Personen. Nur zweimal in drei Wochen (für fast 90 Synchronisierungen) trafen wir uns nicht 30 Minuten. Die längste Synchronisierung dauerte 57 Minuten. Obwohl sie normalerweise 20-30 Minuten dauerten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ziel der Synchronisierungen: zu verstehen, wo Hilfe benötigt wird und wann wir diese oder jene Aufgaben in die Produktion bringen werden. Die Jungs schlossen sich in Projektteams zusammen, wenn sie die Hilfe der Infrastruktur brauchten, kam eine Person genau dort, alle Probleme wurden schnell gelöst, weniger Diskussion war mehr eine Frage.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abends bereitete unser Forschungs- und Entwicklungslabor Essen für die Entwickler für den Abend vor, um die Jungs zu unterstützen. Verrückte Pizzarezepte, Hühnerflügel, Kartoffeln! Das war unwirklich cool! Diese Unterstützung hat die Jungs so sehr wie möglich motiviert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/pz/3f/mspz3f9matohgpx7z9sk9bf8pzu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einem solchen Non-Stop-Modus zu arbeiten war verdammt schwierig. Am Mittwoch, dem 25. April, gegen 17 Uhr, wandte sich Oleg Blokhin, einer unserer Entwickler, an CTO, der am Samstag ohne Unterbrechung gerechnet hat. In seinen Augen lag unmenschliche Müdigkeit: "Ich bin nach Hause gegangen, ich kann es nicht mehr ertragen." Er schlief gut und am nächsten Tag war herzhaft. So kann man den Allgemeinzustand vieler Leute beschreiben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der nächste Samstag, der 28. April (es war ein Arbeitssamstag für alle in Russland) war ruhiger. </font><font style="vertical-align: inherit;">Wir konnten nichts ändern, wir haben das System beobachtet, die Jungs haben sich ein wenig vom Tempo ausgeruht. </font><font style="vertical-align: inherit;">Alles verlief leise. </font><font style="vertical-align: inherit;">Die Ladung war nicht so groß, aber es war. </font><font style="vertical-align: inherit;">Sie überlebten ohne Probleme, und dies gab Vertrauen, dass wir den richtigen Weg gingen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite und dritte Woche nach dem Sturz waren bereits ruhiger, das höllische Tempo bis zum späten Abend war vorbei, aber der allgemeine Prozess des Kriegsrechts blieb bestehen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nächster Tag X: Krafttest</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am nächsten Tag war X am 9. Mai! </font><font style="vertical-align: inherit;">Jemand saß zu Hause und überwachte den Status des Systems. </font><font style="vertical-align: inherit;">Diejenigen von uns, die spazieren gingen, nahmen Laptops mit, um voll bewaffnet zu sein, wenn etwas schief ging. </font><font style="vertical-align: inherit;">Sasha Andronov, unsere Tankstelle, ging näher an den Abendgipfel einer der Pizzerien heran, um bei Problemen alles persönlich zu sehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Tag erhielten wir 91500 Bestellungen in Russland (zu dieser Zeit das zweite Ergebnis in der Geschichte des Dodo). </font><font style="vertical-align: inherit;">Es gab nicht den geringsten Hinweis auf ein Problem. </font><font style="vertical-align: inherit;">Der 9. Mai hat bestätigt, dass wir auf dem richtigen Weg sind! </font><font style="vertical-align: inherit;">Fokus auf Stabilität, Leistung, Qualität. </font><font style="vertical-align: inherit;">Die Prozessumstrukturierung hat uns weiter erwartet, aber das ist eine ganz andere Geschichte.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retro Great Fall und 6 Praktiken</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In kritischen Situationen werden bewährte Verfahren entwickelt, die auf eine ruhige Zeit übertragen werden können und sollten. Fokussierung, teamübergreifende Hilfe, schnelle Bereitstellung in der Produktion, ohne auf eine vollständige Regression zu warten. Wir haben mit Retro begonnen und dann das Prozess-Framework entwickelt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/md/ty/wpmdtygdhvy93ufctatnfmxypms.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die ersten beiden Tage vergingen in einer Diskussion über Praktiken. Wir haben uns nicht das Ziel gesetzt, "um 2 Uhr eine Retrospektive zu machen". Nach einer solchen Situation waren wir bereit, uns die Zeit zu nehmen, um unsere Ideen und unseren neuen Prozess im Detail zu erarbeiten. Alle haben teilgenommen. Jeder, der auf die eine oder andere Weise an den Restaurierungsarbeiten beteiligt war. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qf/52/qu/qf52qu_y6lojoqjjcxw3lrronny.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen gab es 6 wichtige Praktiken, über die ich ausführlicher sprechen möchte.</font></font><br>
<br>
<ol>
<li><b>Top N .</b>   ,  .      Product Owners ,  ,     ,         .    .      ,   .        ,  ,  ,   .   ,         .   N         –  Lead Time    . </li>
<li><b> .</b>    .     -,      ,        .         ,        ,  ,     .   . </li>
<li><b> .</b>    ,   «    »    . ,        . ,     ,     .  ,         -   .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">       Dodo IS.</a>         .</li>
<li><b> Pull Request.</b>      ,     Pull Request,      -   .    .   ,   ,   ,   ,  -   .            , . ,  .  15          .</li>
<li><b>Performance- —  .</b>  performance-     .   ,   . Performance-    .   baseline   ,    PR   .       ,   . </li>
<li><b>Performance     .</b>     —      .  , , -,  , ,       .         .        ,    . </li>
</ol><br>
<br>
<h2></h2><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">1.    </b>
                        <div class="spoiler_text"><h4><b>21.04.2018 –    Dodo IS.     ? </b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> (Site Reliability Engineering)</b></u>:      .  ,    . <br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> (Site Reliability Engineering, Product Owner   Dodo IS)</b></u>:      . ,    ,   . <br>
<br>
     auth’,       .         .      ,        . <br>
<br>
   ,    ()   :<br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/yy/_hqhyy80kusheiqap3xwfchwjvk.jpeg"><br>
<br>
        .     ,    . <br>
<br>
      .       ,      .       .     -.  ,         ,      . -  ,  ,    .     ,        -,    ,    . <br>
<br>
         .           redis,      .    .      - ,   .       .<br>
<br>
     Dodo IS   .        .      ,     . ,        , , ,   .     ,      —     . <br>
<br>
     .                « ».  «  ,   »    . <br>
<br>
<h4><b> -   ?</b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
   –    .       .         . ,             .      .   .<br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
     .     ,       .   (  ), -       .   .<br>
<br>
       .  :<br>
<br>
<ol>
<li>      .</li>
<li>     .</li>
<li>       ,     . </li>
</ol><br>
<h4><b>      ?</b></h4><br>
<br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
,        ,  ,      .<br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
 ,            ,    .     ,     .<br>
<br>
<h4><b>    ?               ?</b></h4><br>
<br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:  ,      –  . <br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
<ol>
<li> —     . -     -   . <br>
<br>
          ,       .  2018       ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PerformanceLab</a>,      .</li>
<li>     ,          .      Less-. </li>
<li>         .   2018         -,     .      ,    .    - 2018   .</li>
<li>  async  . ,   21.04.2018     .    ,     .     async. </li>
<li> . ,    SaveOrder  async-await.   ,     .      :          ,       LF,         20   .       ,       .  ,         .    !<br>
<br>
    ,   ,           ,     . <br>
<br>
         ,    ,  .          — -.       . </li>
<li>     .         ,   (, ).      ,        .  «»    .   nginx   ,    -  ,       . <br>
<br>
    : innodb_lock_wait_timeout = 5; innodb_rollback_on_timeout = ON.         .   ,     ,       ,    ,       . </li>
</ol><br>
<h4><b>   ,       ?</b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
<ol>
<li>   ,   ,     ,   .   ,     .</li>
<li>    ,     .</li>
<li>      ,   ,    ,    .         –    .</li>
</ol><br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="60"> <u><b> </b></u>:<br>
<br>
<ol>
<li>   .</li>
<li>    .        , ,    -.          .</li>
<li>    .   ,   -    ,    .</li>
</ol><br>
<h4><b>   ,       ?</b></h4><br>
<img src="https://habrastorage.org/webt/4l/3r/6-/4l3r6-lc2cgut1u8ec3gdawjdma.png" align="left" width="60"> <u><b> </b></u>:<br>
<br>
  «»   ,   «». ,      ,     .    . <br>
<br>
<img src="https://habrastorage.org/webt/lj/ov/je/ljovjerpqe5mx5j5w9nsxer5xxq.png" align="right" width="80"> <u><b> </b></u>:<br>
<br>
  ,      .   , ,     .     .<br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">2. ,        (Dodo IS Architect)</b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/ge/pg/qm/gepgqmcioq9qqndtdk9dbz8njjo.png" align="left" width="60">              — ,     .       ,      —             . <br>
<br>
        ,        ,           . ,         (, ,    )        .<br>
<br>
        IT-.       Dodo IS,         .              …<br>
<br>
 X ,  .      . Dodo IS  ,         ,   ,        .      ,  , ,    .    .     146%,     .     ,    Dodo IS  ?<br>
<br>
    ,  .    ,    ,         .                  ,       .       ,      !<br>
<br>
     ,   .   « »: 11-  ,  ,  2 .  «»       .  3-4     ,          .          ,     .   .<br>
<br>
  , ,            .         . Dodo IS     ,   « ».     ! (    ). <br>
<br>
     ,     Dodo IS      ,      .   Dodo IS .       « », ,    .             (   ),         loadtest,   ,   .<br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de498268/index.html">Kostenlose Mosbirge-API in Microsoft Excel-Formeln</a></li>
<li><a href="../de498270/index.html">Welche IT-Fachkräfte werden während der Wirtschaftskrise und der Pandemie eingestellt?</a></li>
<li><a href="../de498272/index.html">Sparen Sie Zeit und Mühe bei der Implementierung sicherer Entwicklungsstandards mit OWASP SAMM</a></li>
<li><a href="../de498276/index.html">RuCode Online Sportprogrammiermeisterschaft</a></li>
<li><a href="../de498278/index.html">Herausgeber Peter. Frühlingsverkauf</a></li>
<li><a href="../de498282/index.html">[Anweisung] Erstellen eines Kontos und einer Website auf der Google Site-Plattform</a></li>
<li><a href="../de498284/index.html">So optimieren Sie das Englischlernen</a></li>
<li><a href="../de498288/index.html">Ihre Stadt braucht einen U-Bahn-Bus</a></li>
<li><a href="../de498290/index.html">Prozedurale Hydrologie: Dynamische Simulation von Flüssen und Seen</a></li>
<li><a href="../de498292/index.html">Sparen Sie viel Geld bei großen Mengen in PostgreSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>