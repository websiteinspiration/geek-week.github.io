<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî≤ üë©üèæ‚Äçüöí üéõÔ∏è M√©todos para lidar com c√≥digo legado usando o GitLab como exemplo üêµ üë®üèæ üõåüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voc√™ pode enganar sem parar se o GitLab √© um bom produto. √â melhor observar os n√∫meros: de acordo com os resultados da rodada de investimentos, a aval...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>M√©todos para lidar com c√≥digo legado usando o GitLab como exemplo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/493000/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode enganar sem parar se o GitLab √© um bom produto. √â melhor observar os n√∫meros: de acordo com os resultados da rodada de investimentos, a avalia√ß√£o do GitLab foi de US $ 2,7 bilh√µes, enquanto a avalia√ß√£o anterior foi de US $ 1,1 bilh√£o. Isso significa crescimento r√°pido e a empresa contratar√° cada vez mais desenvolvedores front-end. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© a hist√≥ria da apar√™ncia do frontend no GitLab. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/uq/uh/cyuquhlxnzithh35ujtiswr5upy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um gr√°fico do n√∫mero de fornecedores front-end no GitLab, come√ßando em 2016, quando eles n√£o estavam l√° e terminando em 2019, quando j√° havia algumas dezenas deles. Mas o GitLab em si existe h√° 7 anos. Portanto, at√© 2017, o c√≥digo principal do front-end foi escrito pelos desenvolvedores de back-end, pior, os desenvolvedores de back-end no Ruby on Rails (em nenhum caso, queremos ofender algu√©m e explicar abaixo do que estamos falando).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por 7 anos, qualquer projeto, goste ou n√£o, est√° se tornando obsoleto. </font><font style="vertical-align: inherit;">Em algum momento, a refatora√ß√£o se torna imposs√≠vel de adiar. </font><font style="vertical-align: inherit;">E a jornada come√ßa, cheia de aventura, cujo ponto final nunca chega. </font><font style="vertical-align: inherit;">Sobre como isso acontece no GitLab, disse Ilya Klimov.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3tdfBMRq34o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre o orador: Ilya Klimov (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xanf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) engenheiro front-end s√™nior do GitLab. </font><font style="vertical-align: inherit;">Antes disso, ele trabalhou em startups e terceiriza√ß√£o, liderou uma pequena empresa de terceiriza√ß√£o. </font><font style="vertical-align: inherit;">Ent√£o percebi que ainda n√£o tinha tido tempo de elaborar o produto e vim para o GitLab. </font></font></em><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O artigo √© baseado em um relat√≥rio de Ilya no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FrontendConf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , portanto, n√£o estrutura tanto as informa√ß√µes como reflete a experi√™ncia do palestrante. </font><font style="vertical-align: inherit;">Pode parecer excessivamente conversacional, mas n√£o menos interessante do ponto de vista de trabalhar com legado. </font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No GitLab, como em muitos outros projetos, eles est√£o migrando gradualmente das tecnologias antigas para algo mais relevante:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoffeeScript em JavaScript. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os desenvolvedores do Ruby on Rails, quando come√ßaram o projeto, n√£o podiam deixar de prestar aten√ß√£o no CoffeeScript, que √© muito semelhante ao Ruby.</font></font></li>
<li><strong>JQuery  Vue. </strong>  ,        JQuery.   GitLab  SPA.  server-side rendering  progressive enhancement,        Vue-.  ,    :     Vue-,    .</li>
<li><strong>Karma  Jest. </strong>Jest  -     . Karma     , , .</li>
<li><strong>REST  GraphQL</strong> ,   , <strong>Vuex  Apollo</strong>.      Vuex,    Redux   Vue,  Apollo local state  ,     .    GraphQL    ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, as substitui√ß√µes ocorrem em v√°rias dire√ß√µes ao mesmo tempo; no projeto, h√° simultaneamente um c√≥digo legado em diferentes est√°gios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora imagine que voc√™ est√° chegando a um projeto que est√° no meio de todas essas migra√ß√µes. O ponto padr√£o e de refer√™ncia para mim foi a situa√ß√£o em que voc√™ abre a edi√ß√£o de um projeto, pressiona o bot√£o Salvar - e o que voc√™ acha que est√° por vir? Se voc√™ pensou que somos t√£o velhos que o HTML vem, ent√£o n√£o. O JavaScript aparece e voc√™ precisa "evoluir" para exibir uma janela pop-up. Este √© o ponto mais baixo da minha imagem herdada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais adiante: aulas auto-escritas em jQuery, componentes Vue e, como ponto mais alto, novos recursos modernos escritos com Vuex, Apollo, Jest, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que fica meu gr√°fico de contribui√ß√µes no GitLab.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ew/ml/io/ewmliousc_qzjvrr0pfshtqlrj0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nele - e isso √© muito importante para entender a ess√™ncia da hist√≥ria e todas as minhas dores - v√°rios segmentos podem ser distinguidos:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onboarding</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na √°rea de abril. </font><font style="vertical-align: inherit;">‚ÄúLua de mel‚Äù quando comecei a trabalhar no GitLab. </font><font style="vertical-align: inherit;">Neste momento, os iniciantes recebem tarefas mais f√°ceis.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desde o final de abril at√© meados de maio, h√° apenas alguns commits - um per√≠odo de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nega√ß√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : "N√£o, n√£o pode ser que tudo seja feito dessa maneira!" </font><font style="vertical-align: inherit;">Tentei entender onde n√£o entendo algo, ent√£o h√° t√£o poucos commits.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A segunda quinzena de maio √© de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raiva</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : "N√£o dou a m√≠nima para tudo - preciso mudar a produ√ß√£o, compartilhar recursos, tentar fazer algo a respeito".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O in√≠cio de junho (zero commit) √© uma </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">depress√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">N√£o era f√©rias, vi e entendi que minhas m√£os estavam caindo, n√£o sei o que fazer com isso.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depois disso, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concordei comigo mesmo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , decidi que fui contratado como profissional e posso melhorar o GitLab. </font><font style="vertical-align: inherit;">Em junho e julho, ofereci um grande n√∫mero de melhorias. </font><font style="vertical-align: inherit;">Nem todos eles ressoaram por raz√µes sobre as quais falaremos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora estou no est√°gio de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ado√ß√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e entendo claramente: como, onde, por que e o que fazer com tudo isso.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou contar com mais detalhes o que fiz de agosto a outubro. </font><font style="vertical-align: inherit;">Honestamente, em uma pequena empresa de terceiriza√ß√£o ou em uma startup, eu teria sido demitido cinco vezes com tanta produtividade nesses tr√™s meses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, em tr√™s meses eu fiz:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle segmentado - tr√™s bot√µes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A cadeia de pesquisa que armazena o hist√≥rico local √© um componente um pouco mais complexo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spinner. </font><font style="vertical-align: inherit;">E esse componente ainda n√£o est√° congelado.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/p6/fw/uw/p6fwuwfxi5dxzpyuewu9vn7_zc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, passo a passo, analisaremos por que isso aconteceu e como viver com isso. Se parece que estou exagerando, aqui est√° uma captura de tela de algumas das tarefas que dependem de mim no GitLab (voc√™ pode olhar diretamente no GitLab, ele est√° aberto). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/em/ax/o9/emaxo9j3iwkxpdefee2ghsokjpi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja: perdeu 12.1, perdeu 12.2, perdeu 12.3. O sprint dura um m√™s e o controle segmentado - 3 sprints. Spinner ainda se foi, ele ser√° nosso personagem principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema da refatora√ß√£o e a filosofia da refatora√ß√£o est√£o enfrentando a humanidade h√° muito tempo - h√° mil√™nios. Agora vou provar:</font></font><br>
<blockquote><em>¬´        ;      ,   ,   ;        ;    ,  .<br>
<br>
 ,   ,    ,  :  ¬ª.<br>
<br>
 </em></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A B√≠blia nos diz como combinar funcionalidades antigas e novas. </font><font style="vertical-align: inherit;">A segunda parte da cita√ß√£o √© valiosa do ponto de vista da ger√™ncia: n√£o importa como voc√™ saia com as iniciativas, voc√™ encontrar√° uma grande resist√™ncia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na fase de depress√£o, assisti a muitos relat√≥rios sobre refatora√ß√£o de grandes projetos, mas cerca de 70% deles me lembraram uma piada. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javist talk: </font></font></em><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Como aceleramos nosso aplicativo Java? </font></font></em><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Ah, ent√£o eu tinha um relat√≥rio sobre isso! </font><font style="vertical-align: inherit;">Voc√™ quer contar? </font></font></em><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Para contar e eu posso, eu aceleraria! </font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ ainda decide seguir o caminho perigoso e inst√°vel da refatora√ß√£o, tenho algumas receitas simples que desenvolvi para mim e que funcionam em condi√ß√µes pr√≥ximas da realidade.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Isola√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para acelerar as coisas, melhorar, refatorar, voc√™ precisa cortar o elefante em bifes, ou seja, dividir a tarefa em partes. O GitLab √© muito grande, temos um canal do Slack "Isso √© conhecido", onde as pessoas fazem perguntas como "Isso √© um bug ou um recurso, quem pode explicar?" - e a resposta nem sempre √© encontrada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo simples: capturas de tela do mesmo local no GitLab, tiradas com a diferen√ßa de um dia. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_i/e7/t3/_ie7t3qfxsof8p9kwrdzy2wsymi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fiquei muito chateado, porque estava trabalhando neste bot√£o, e isso √© tudo de uma maneira ou de outra com o bot√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que aconteceu? √â simples: desenvolvemos um sistema de design e, como parte de uma ferramenta de livro de hist√≥rias separada para testar um sistema de design, desabilitamos o CSS GitLab global para verificar como os componentes CSS s√£o isolados do CSS global. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resumindo: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS n√£o √© mais salvo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pelo menos no GitLab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trabalho com JavaScript h√° 14 anos e nunca vi um projeto com pelo menos um ou dois anos de dura√ß√£o preservando CSS totalmente gerenciado. A prop√≥sito, o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML tamb√©m</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o </font><strong><font style="vertical-align: inherit;">pode</font></strong><font style="vertical-align: inherit;"> ser salvo (no GitLab, com certeza). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitLab foi desenvolvido por um longo tempo e back-end. Eles tomaram uma decis√£o controversa de usar o Bootstrap porque o Bootstrap oferecia um sistema de layout amig√°vel ao back-end. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o que √© o Bootstrap em termos de filosofia de isolamento de componentes? S√£o cerca de 600-700 classes globais (de fato, cada classe CSS √© global) que permeiam todo o aplicativo. Em termos de gerenciabilidade, nada de bom resultar√° disso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pr√≥xima a√ß√£o (n√£o vamos cham√°-lo de erro) - o GitLab aceitou o Vue.js. A escolha foi razo√°vel, por causa das tr√™s estruturas, √© o Vue que permite reescrever algo com mais facilidade. Voc√™ n√£o precisa jogar e cortar imediatamente um Aplicativo de P√°gina √önica grande, mas pode reescrever n√≥s pequenos individuais. Agora, isso pode ser feito no Angular, mas h√° 3-4 anos atr√°s, quando o Angular 2 apareceu, ele n√£o p√¥de coexistir em uma p√°gina em mais de uma inst√¢ncia. A rea√ß√£o tamb√©m √© poss√≠vel agora, mas toda essa m√°gica com a falta de uma etapa de constru√ß√£o e assim por diante inclinou a balan√ßa em dire√ß√£o a Vue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, um mal foi combinado com o segundo. Isso √© ruim, porque os estilos do Bootstrap n√£o sabem nada sobre o sistema de componentes e os componentes do Vue foram escritos no in√≠cio, de qualquer maneira. Portanto, uma forte decis√£o foi tomada para criar seu pr√≥prio sistema de design. N√≥s chamamos</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pijama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas ningu√©m poderia me explicar o porqu√™. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejo que agora existem cada vez mais nossos pr√≥prios sistemas de design, e isso √© bom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema de design envolve isolamento, mas desde que o GitLab j√° foi escrito no Bootstrap, aproximadamente 50-60% do nosso sistema de design √© um inv√≥lucro sobre os componentes do Bootstrap / Vue com uma diminui√ß√£o em sua funcionalidade. Isso √© necess√°rio para que o sistema de design n√£o permita o uso incorreto do componente. Se falamos de uma biblioteca abstrata, a flexibilidade √© importante por exemplo, a capacidade de criar qualquer bot√£o que voc√™ desejar. Se os spinners do GitLab podem ter quatro tamanhos aprovados pelos designers, voc√™ n√£o deve deixar fisicamente que outros o fa√ßam.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algum dia, o bom vencer√° e teremos uma ferramenta importante com a qual, √© claro, se voc√™ obteve suporte no IE e Edge, poder√° refatorar efetivamente os projetos de front-end - este √© o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shadow DOM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O Shadow DOM resolve o problema dos estilos globais que entram nos componentes. Por favor, n√£o tome Polymer, que at√© o Google j√° enterrou. Use lit-element e lit-HTML, e voc√™ pode criar estilos isolados usando sua estrutura favorita.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode dizer que o React possui m√≥dulos CSS, o Vue tem estilos de escopo que fazem o mesmo. Tenha muito cuidado com eles: os m√≥dulos CSS n√£o fornecem 100% de isolamento porque eles funcionam apenas com classes. E com os estilos com escopo definido no Vue, um cen√°rio muito interessante pode ser realizado quando os estilos do componente superior se enquadram no elemento raiz do pai e os atributos de dados s√£o usados ‚Äã‚Äãl√° que diminuem a velocidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de ter repreendido a Angular por tr√™s anos, agora tenho que admitir que no momento ela √© implementada da melhor maneira poss√≠vel. No Angular, para garantir um bom isolamento de estilo, basta mudar o modo de isolamento e, se necess√°rio, usar o Shadow DOM, caso contr√°rio a emula√ß√£o normal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voltar ao bot√£o rotativo. </font><font style="vertical-align: inherit;">Dos tr√™s meses em que lutei com ele, durante algum tempo estive envolvido em um neg√≥cio emocionante: limpeza. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/zv/u0/s8zvu0h5yauznhgfqthij_96rkc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma classe </font></font><code>loading-container</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© um detalhe de implementa√ß√£o de um girador, ou seja, √© uma classe dentro de uma implementa√ß√£o de girador. </font><font style="vertical-align: inherit;">Decidimos, j√° que o CSS n√£o deve ser salvo, no Pyjamas, para criar CSS separado com base no Atomic CSS. </font><font style="vertical-align: inherit;">Eu pessoalmente n√£o gosto muito do conceito Atomic CSS, mas temos o que temos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, eu estava envolvido na limpeza de estilos no c√≥digo do produto principal pendurado em elementos que s√£o detalhes de implementa√ß√£o. </font><font style="vertical-align: inherit;">Tudo parece muito simples - porque, √© claro, existem testes no GitLab.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Testes</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os testes no GitLab cobrem todo o c√≥digo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , fornecem confiabilidade. </font><font style="vertical-align: inherit;">E assim o pipeline √© conclu√≠do em 98 minutos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/uz/bb/fluzbboaa7on25ueq9z6pkvcdb4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O GitLab coleta 40% do tempo dos corredores p√∫blicos no GitLab.com porque o GitLab coleta pipelines para cada solicita√ß√£o de mesclagem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fiquei muito inspirado: finalmente entrei em um projeto onde tudo √© coberto em testes! </font><font style="vertical-align: inherit;">A cobertura do c√≥digo de back-end √© pr√≥xima de 100%, e o c√≥digo de front-end no momento da minha chegada era coberto por </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">89,3%. </font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, a maior parte dessa cobertura √© lixo porque:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quebra quando s√£o feitas altera√ß√µes que n√£o est√£o relacionadas aos componentes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o quebra quando s√£o feitas altera√ß√µes.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou explicar com exemplos. </font><font style="vertical-align: inherit;">Pegamos Jest porque pensamos que ele nos permitiria, em certas situa√ß√µes, n√£o escrever afirma√ß√µes, mas usar instant√¢neos. </font><font style="vertical-align: inherit;">O problema √© que, se voc√™ n√£o configurou o Jest e adicionou o serializador correto, o Vue Test Utils simplesmente gera adere√ßos em HTML. </font><font style="vertical-align: inherit;">Ent√£o, por exemplo, resultam adere√ßos com o nome user, que tinha adere√ßos nos par√¢metros com os dados do nome, para os quais o objeto objeto foi passado. </font><font style="vertical-align: inherit;">Quaisquer altera√ß√µes no formato dos dados transmitidos n√£o levam √† falha do instant√¢neo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os desenvolvedores Ruby est√£o acostumados a fazer testes, grosso modo, abrangendo todos os m√©todos.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando fazemos testes para os componentes Vue ou React, precisamos testar como a API p√∫blica se comporta.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim, tivemos grandes testes de propriedades calculadas que n√£o foram usadas em alguns cen√°rios, mas em outros era fisicamente imposs√≠vel atingir o estado em que esse c√°lculo seria chamado. </font><font style="vertical-align: inherit;">Agradecimentos especiais ao Vue, em que os modelos s√£o cadeias de caracteres, para que voc√™ n√£o possa calcular a cobertura de teste do modelo. </font><font style="vertical-align: inherit;">No Vue 3, os Mapas de Origem aparecer√£o e a capacidade de corrigi-lo, mas n√£o ser√° em breve. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, existe uma habilidade simples que permitir√° refatorar efetivamente o legado. </font><font style="vertical-align: inherit;">Essa √© a capacidade de escrever o que √© chamado de teste de fixa√ß√£o no mundo dos grandes testes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste de fixa√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um teste que tenta capturar o comportamento que voc√™ est√° refatorando. Observe que o teste de fixa√ß√£o provavelmente n√£o acabar√° sendo confirmado no reposit√≥rio. Ou seja, voc√™, atrav√©s de todos os tipos de refinamentos, por exemplo, usando o ambiente de temporariedade, escreve para si mesmo um teste que descreve como seu componente √© renderizado. Ap√≥s a refatora√ß√£o, o teste de fixa√ß√£o deve gerar o mesmo HTML, e isso provavelmente √© um bom sinal, ou voc√™ deve entender quais altera√ß√µes ocorreram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou dar um exemplo da vida. Alguns meses atr√°s, conduzi uma revis√£o de solicita√ß√£o de mesclagem com a refatora√ß√£o de uma lista suspensa. O contexto legado √© o seguinte: anteriormente, para separar os ramos de um amigo um do outro por um tra√ßo na lista suspensa, a cadeia de texto "divisor" era simplesmente passada. Portanto, se seu ramo foi chamado de divisor, voc√™ estar√° sem sorte. No processo de refatora√ß√£o, uma pessoa trocou duas classes em um n√≥ HTML, isso entrou em produ√ß√£o e o arruinou. Na justi√ßa, √© claro, n√£o exatamente na produ√ß√£o, mas na encena√ß√£o, mas mesmo assim.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, quando come√ßamos a escrever esses testes, descobrimos que, apesar do indicador de cobertura legal, os testes foram gravados incorretamente. Porque, primeiro, fizemos testes para o Karma, ou seja, antigos. Em segundo lugar, quase todos os testes fizeram suposi√ß√µes sobre as partes internas do componente. Ou seja, eles fingiram ser testes de unidade e funcionaram essencialmente como de ponta a ponta, verificando se uma tag espec√≠fica com uma classe espec√≠fica estava sendo renderizada, em vez de verificar se um componente espec√≠fico estava sendo renderizado com acess√≥rios espec√≠ficos. Entenda a diferen√ßa: classes s√£o componentes? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, minhas 18 solicita√ß√µes de mesclagem com testes de refatora√ß√£o para um total de 8 a 9 mil linhas, o changelog total acabou por ser de cerca de 20 mil, porque 11 mil foram cortados.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ay/q_/qs/ayq_qsjbluc3lyjaiwft9oxkefo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, formalmente, refiz todos esses testes por uma coisa: remover afirma√ß√µes sobre as classes de spinners e, em vez disso, verificar se o spinner com os adere√ßos corretos √© processado l√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä primeira vista, este √© um trabalho ingrato. </font><font style="vertical-align: inherit;">Mas reescrever testes para a arquitetura certa era muito f√°cil de vender para os neg√≥cios. </font><font style="vertical-align: inherit;">O GitLab √© um produto comercialmente lucrativo. </font><font style="vertical-align: inherit;">Obviamente, se voc√™ informar ao gerente do produto que precisa de tr√™s itera√ß√µes para reescrever 20 testes, adivinhe para onde ser√° enviado. </font><font style="vertical-align: inherit;">Outra coisa: ‚ÄúPreciso de tr√™s itera√ß√µes para reescrever o teste. </font><font style="vertical-align: inherit;">Isso nos permitir√° introduzir spinners com mais efici√™ncia e acelerar a implementa√ß√£o futura de novos elementos do sistema de design. ‚Äù </font><font style="vertical-align: inherit;">E aqui chegamos ao importante.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Resist√™ncia</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° outra funcionalidade que muitos dos meus spinners aguardam no sistema de design GitLab - esses s√£o √≠cones SVG comuns.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yu/to/cc/yutoccm3twkiswgiyqe2flvse_w.png" width="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos √≠cones desenhados pelo designer que s√£o usados ‚Äã‚Äãno projeto principal, mas eles n√£o est√£o no sistema de design, porque o GitLab tem uma inf√¢ncia dif√≠cil. </font><font style="vertical-align: inherit;">Por exemplo, em 2019, o CSS √© coletado n√£o pelo Webpack, mas por uma pe√ßa chamada Sprockets - esse √© o pipeline do Ruby, porque precisamos reutilizar o mesmo CSS no backend e no frontend. </font><font style="vertical-align: inherit;">Por esse motivo, os √≠cones devem estar conectados a diferentes projetos de maneiras diferentes. </font><font style="vertical-align: inherit;">Portanto, algu√©m refatorou a base de c√≥digo principal por tr√™s meses para que voc√™ pudesse conectar os √≠cones do sistema de design a projetos relacionados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° um ponto importante aqui que voc√™ encontrar√° inevitavelmente. </font><font style="vertical-align: inherit;">A refatora√ß√£o √© um processo de melhoria cont√≠nua. </font><font style="vertical-align: inherit;">Mas mais cedo ou mais tarde voc√™ tem que parar.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â absolutamente normal parar, n√£o concluindo a refatora√ß√£o, mas obtendo melhorias mensur√°veis ‚Äã‚Äãconcretas.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas se voc√™ estiver trabalhando em um projeto herdado, inevitavelmente encontrar√° pessoas que fazem isso. </font></font><br>
<img src="https://habrastorage.org/webt/to/bx/ix/tobxixkebgoqq2lvl-2fijjeqme.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso significa que eles escrevem da maneira antiga, porque est√£o muito acostumados. Por exemplo, nossos defensores dizem: "Eu n√£o quero ensinar esse seu gracejo. Escrevi testes para o Karma por tr√™s anos, preciso adicionar novas funcionalidades e, como eles n√£o ser√£o aceitos sem testes, aqui est√° um teste para o Karma. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sua tarefa √© resistir a isso o m√°ximo poss√≠vel. Isso √© relativamente f√°cil de combater, mas h√° um pecado ainda maior do que isso. √Äs vezes, no processo de refatora√ß√£o, voc√™ se depara com um problema e geralmente h√° um desejo de ir para o lado.</font></font><br>
<img src="https://habrastorage.org/webt/pz/va/st/pzvast70b3gpomnqsaic1iignns.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, substituir uma nova muleta simplesmente porque, por certas raz√µes, n√£o √© poss√≠vel levar a refatora√ß√£o at√© o fim. </font><font style="vertical-align: inherit;">Por exemplo, se tivermos problemas para integrar √≠cones na base de c√≥digo principal, podemos deixar uma classe de utilit√°rio que ser√° extra√≠da do CSS global do aplicativo. </font><font style="vertical-align: inherit;">Formalmente, a tarefa comercial ser√° resolvida, mas na pr√°tica, como na hist√≥ria da hidra de Lernean: restavam 8 bugs, 4 corrigidos e 13 restantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Refatorar, como reparar uma casa - √© imposs√≠vel terminar, voc√™ s√≥ pode par√°-lo.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os primeiros 80% da refatora√ß√£o levam 20% do tempo, os 80% restantes da refatora√ß√£o (exatamente assim) levam outros 80% do tempo.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â importante n√£o introduzir novos hacks durante o processo de refatora√ß√£o. </font><font style="vertical-align: inherit;">Acredite, durante o processo de desenvolvimento, eles pr√≥prios aparecer√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Ferramentas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, mesmo antes de eu chegar, o GitLab embarcou no caminho correto da introdu√ß√£o de boas ferramentas: Prettier, Vue Test Utils, Jest. Embora Prettier tenha implementado torto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou explicar o que est√° em jogo. Enquanto eu descobri o que e por que t√£o historicamente, 80% das minhas pesquisas se depararam com um commit de 37 mil linhas de c√≥digo de prettifica√ß√£o. Era quase imposs√≠vel usar o hist√≥rico, e eu tive que configurar o plug-in para o VS Code, de modo a excluir esse commit ao procurar o hist√≥rico de altera√ß√µes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Claro, as ferramentas s√£o importantes, mas voc√™ precisa escolh√™-las com cuidado. Por exemplo, temos o Vue, e o Vue tem uma boa ferramenta de teste - o Vue Test Utils. Mas se o Vue 2 foi lan√ßado h√° 2-3 anos, o Vue Test Utils ainda n√£o saiu da vers√£o beta. Al√©m disso, de acordo com informa√ß√µes privilegiadas, no momento o √∫nico desenvolvedor do Vue Test Utils n√£o escreve no Vue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No processo de escolha das ferramentas, voc√™ joga o sorteio e realmente tenta vencer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O GitLab sofreu uma les√£o na inf√¢ncia com o CoffeeScript. √â por isso que √© imposs√≠vel empurrar at√© a id√©ia te√≥rica de escrever no TypeScript no GitLab. Tudo se divide em um argumento simples: n√£o ser√° o mesmo que no CoffeeScript quando a linguagem que compila o JavaScript tiver morrido.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao escolher ferramentas, tente para que a ferramenta possa ser substitu√≠da ou, em casos extremos, mantida de forma independente.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≥s do GitLab usamos uma coisa legal chamada Danger. </font></font><br>
<img src="https://habrastorage.org/webt/lv/ol/oh/lvolohfoqnrzwiqzur-ziqhaaxw.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© uma captura de tela real do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em 2019. </font><font style="vertical-align: inherit;">Mas, colegas disseram que, em 2019, o site pode parecer qualquer coisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Danger √© um bot que ocupa um estado intermedi√°rio entre o linter no seu IC e as diretrizes escritas. </font><font style="vertical-align: inherit;">Este bot pode ser expandido e vir√° para puxar solicita√ß√£o ou, como s√£o chamados corretamente conosco, mesclar solicita√ß√£o e deixar coment√°rios como:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"H√° um coment√°rio de desativa√ß√£o do ESlint neste arquivo, corrija-o."</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúEsse arquivo costumava ser governado por essa pessoa. </font><font style="vertical-align: inherit;">Talvez voc√™ precise fazer uma revis√£o.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na minha opini√£o, essa √© uma estrutura muito boa, importante e extens√≠vel para monitorar o estado da base de c√≥digo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Abstra√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou come√ßar com um exemplo. </font><font style="vertical-align: inherit;">Alguns meses atr√°s, vi a not√≠cia: ‚ÄúO GitHub se livrou do jQuery. </font><font style="vertical-align: inherit;">Percorremos um longo caminho dif√≠cil e n√£o usamos mais o jQuery. ‚Äù </font><font style="vertical-align: inherit;">Naturalmente, pensei que tamb√©m precisamos nos livrar do jQuery no GitLab. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e3/3d/4z/e33d4zkjkbo05u2iz2ehkjp9oh8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma pesquisa r√°pida mostrou que o jQuery √© usado em 300 arquivos. </font><font style="vertical-align: inherit;">Parece assustador, mas nada - os olhos est√£o com medo, as m√£os est√£o fazendo. </font><font style="vertical-align: inherit;">Mas n√£o! </font><font style="vertical-align: inherit;">O jQuery √© uma cola integral na base de c√≥digo do GitLab, porque temos o Bootstrap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Bootstrap foi originalmente escrito em jQuery. </font><font style="vertical-align: inherit;">Isso significa que, se voc√™ precisar, por exemplo, capturar o evento de abertura suspensa no Bootstrap, esse √© um evento jQuery. </font><font style="vertical-align: inherit;">Voc√™ n√£o pode intercept√°-lo nativamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa √© a primeira coisa que voc√™ deve abstrair ao trabalhar com c√≥digo legado. </font><font style="vertical-align: inherit;">Se voc√™ tiver o jQuery que n√£o pode ser descartado, escreva seu pr√≥prio Emissor de Eventos, que ficar√° oculto dentro do trabalho com os eventos do jQuery. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando um futuro brilhante chegar, podemos remover o jQuery, mas, por enquanto, desculpe, voc√™ precisa concentrar o govnokod. </font><font style="vertical-align: inherit;">Em um projeto legado regular, ele √© distribu√≠do igualmente por todo o c√≥digo. </font><font style="vertical-align: inherit;">Colete-o em gargalos marcados com as bandeiras ‚ÄúN√£o entre sem traje de prote√ß√£o qu√≠mica‚Äù.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. M√©tricas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ n√£o pode fazer algo cujo resultado n√£o possa ser medido. No GitLab, medimos tudo o que fazemos para saber objetivamente que o c√≥digo est√° funcionando melhor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/0g/qb/me0gqbigji1jssyvv6be_ve_bjq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, temos uma programa√ß√£o de migra√ß√£o dos testes de Karma (azul) para Jest (verde): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ v√™ que h√° um progresso gradual. E n√≥s temos muitos desses hor√°rios. Mas √© importante entender que nem sempre tudo termina bem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou dar mais um exemplo (a demonstra√ß√£o no relat√≥rio come√ßa a partir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> momento). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6s/az/t7/6sazt7jddhpg2kshoo0sodo-hbu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° a interface de solicita√ß√£o de mesclagem usual na produ√ß√£o do GitLab. Obviamente, podemos recolher arquivos, clicar no cabe√ßalho e o arquivo come√ßar√° a recolher.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que voc√™ acha, quanto tempo leva para recolher um arquivo de 50 linhas, enquanto a m√°quina com a oitava gera√ß√£o Core i7 √© torcida para obter o m√°ximo desempenho? </font><font style="vertical-align: inherit;">Quanto tempo leva a implanta√ß√£o? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tempo necess√°rio para o recolhimento do arquivo varia de 7 a 15 segundos. </font><font style="vertical-align: inherit;">A implanta√ß√£o ocorre instantaneamente. </font><font style="vertical-align: inherit;">Antes da refatora√ß√£o, ambos trabalhavam igualmente r√°pido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â por isso que √© muito importante ter m√©tricas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou lhe contar o que est√° acontecendo aqui. </font><font style="vertical-align: inherit;">Este √© o Vue, seu sistema de reatividade controla o valor: se ele mudar, todas as depend√™ncias que dependem desse valor ser√£o chamadas. </font><font style="vertical-align: inherit;">Cada linha √© um componente do Vue que consiste em v√°rias coisas, porque voc√™ pode colocar coment√°rios em uma linha, os coment√°rios podem ser carregados dinamicamente no servidor etc. </font><font style="vertical-align: inherit;">Tudo isso √© assinado na loja Vue, que tamb√©m √© um componente do Vue.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ fecha a solicita√ß√£o de mesclagem, todas as, digamos, 20 mil assinaturas de loja precisam ser atualizadas quando a loja √© atualizada. Se a linha for exclu√≠da, ela dever√° ser removida das depend√™ncias. E depois a matem√°tica simples: voc√™ precisa examinar uma matriz de 20 mil elementos para encontrar aqueles que precisam ser removidos. Digamos que existem 500 dessas linhas, e cada linha possui v√°rios componentes. O resultado √© uma opera√ß√£o matem√°tica O (N), ou seja, O (20.000) * 500. O JavaScript est√° sendo executado todo esse tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A implanta√ß√£o acontece instantaneamente, porque adicionar uma depend√™ncia √© apenas um empurr√£o para a matriz, ou seja, opera√ß√£o matem√°tica O (1). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Äs vezes, melhorar a qualidade do c√≥digo prejudica o desempenho e outras m√©tricas. √â muito importante medi-los. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em resumo: isole o c√≥digo incorreto e acompanhe as m√©tricas.</font></font></strong><br>
<br>
<blockquote>  legacy ‚Äî  .   ,      ‚Äì     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TechLead Conf</a> ‚Äî ,    .   ‚Äì    ,  legacy        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Python</a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> PHP</a>.<br>
<br>
            ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">++</a>,        ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FrontendConf</a>.          .</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt492980/index.html">9 ferramentas de TI para aumentar o capital humano em uma empresa</a></li>
<li><a href="../pt492990/index.html">Organiza√ß√£o da educa√ß√£o de estudantes on-line</a></li>
<li><a href="../pt492994/index.html">O que h√° de novo no TestMace Parte 1. Sincroniza√ß√£o em nuvem, interface atualizada e muito mais</a></li>
<li><a href="../pt492996/index.html">Organiza√ß√£o de formatos de data personalizados e desserializa√ß√£o de marca√ß√µes no Go</a></li>
<li><a href="../pt492998/index.html">Como ficamos confusos com o freelancer para um data center e o que aconteceu</a></li>
<li><a href="../pt493002/index.html">350 pessoas remotamente: como foi</a></li>
<li><a href="../pt493008/index.html">Sobre o cluster do servidor 1C</a></li>
<li><a href="../pt493010/index.html">Como o Quarkus combina programa√ß√£o imperativa e reativa</a></li>
<li><a href="../pt493012/index.html">Ar, rel√©s, cabos pela janela: como n√£o encontrar um fornecedor monopolista em um centro de neg√≥cios</a></li>
<li><a href="../pt493014/index.html">Entrevista com Vyacheslav Utochkin, diretor de programas de treinamento para desenvolvedores de jogos na Escola Superior de Economia, Escola Superior de Economia, Escola Superior de Economia Escola Superior de Economia: 20 perguntas sobre Game Dev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>