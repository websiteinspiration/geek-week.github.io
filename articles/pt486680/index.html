<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òòÔ∏è üëçüèº ‚úâÔ∏è ML, VR e rob√¥s (e um pouco de nuvem) üÜô üèüÔ∏è üéóÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° a todos! 
 
 Quero falar sobre um projeto muito chato, onde rob√≥tica, Machine Learning (e juntos √© Robot Learning), realidade virtual e um pouco d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ML, VR e rob√¥s (e um pouco de nuvem)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/recognitor/blog/486680/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° a todos! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero falar sobre um projeto muito chato, onde rob√≥tica, Machine Learning (e juntos √© Robot Learning), realidade virtual e um pouco de tecnologia em nuvem se cruzam. </font><font style="vertical-align: inherit;">E tudo isso realmente faz sentido. </font><font style="vertical-align: inherit;">Afinal, √© realmente conveniente mudar para um rob√¥, mostrar o que fazer e treinar pesos no servidor ML usando os dados armazenados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo do corte, contaremos como ele funciona agora e alguns detalhes sobre cada um dos aspectos que precisavam ser desenvolvidos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t0/kx/wi/t0kxwiicqakswvomnrwz-iycc2o.jpeg"><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo que</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para come√ßar, vale a pena revelar um pouco. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que rob√¥s armados com o Deep Learning est√£o prestes a expulsar pessoas de seus empregos em todos os lugares. </font><font style="vertical-align: inherit;">De fato, nem tudo √© t√£o bom. </font><font style="vertical-align: inherit;">Onde as a√ß√µes s√£o estritamente repetidas, os processos j√° est√£o muito bem automatizados. </font><font style="vertical-align: inherit;">Se estamos falando de "rob√¥s inteligentes", isto √©, aplicativos onde a vis√£o e os algoritmos de computador j√° s√£o suficientes. </font><font style="vertical-align: inherit;">Mas tamb√©m existem muitas hist√≥rias extremamente complicadas. </font><font style="vertical-align: inherit;">Os rob√¥s dificilmente conseguem lidar com a variedade de objetos com os quais precisam lidar e a diversidade do ambiente.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pontos chave</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem tr√™s aspectos principais em termos de implementa√ß√£o que ainda n√£o foram encontrados em todos os lugares: </font></font><br>
<br>
<ul>
<li>       (data-driven learning). ..   ,    ,     ,    . ,     .</li>
<li>   ()    </li>
<li>  -  (Human-machine collaboration) </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo tamb√©m √© importante, porque agora observaremos uma mudan√ßa nas abordagens de aprendizado, algoritmos, por tr√°s deles e ferramentas de computa√ß√£o. </font><font style="vertical-align: inherit;">Os algoritmos de percep√ß√£o e controle se tornar√£o mais flex√≠veis. </font><font style="vertical-align: inherit;">Uma atualiza√ß√£o de rob√¥ custa dinheiro. </font><font style="vertical-align: inherit;">E a calculadora pode ser usada com mais efici√™ncia se atender a v√°rios rob√¥s ao mesmo tempo. </font><font style="vertical-align: inherit;">Esse conceito √© chamado de "rob√≥tica em nuvem". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com o √∫ltimo, tudo √© simples - a IA n√£o est√° suficientemente desenvolvida no momento para fornecer 100% de confiabilidade e precis√£o em todas as situa√ß√µes exigidas pelos neg√≥cios. </font><font style="vertical-align: inherit;">Portanto, o operador supervisor, que √†s vezes pode ajudar os rob√¥s de prote√ß√£o, n√£o far√° mal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para come√ßar, sobre uma plataforma de software / rede que fornece todas as funcionalidades descritas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/6y/fi/fd6yfi2svby-3l7hkn9lxxt3neo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Componentes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O rob√¥ envia um fluxo de v√≠deo 3D para o servidor e recebe controle em resposta. </font></font></li>
<li>    :  - ,      (, , , )</li>
<li>  ML  ( ),        ,   ,  .      ‚Äî  3D   ,     . </li>
<li> -  ,  3D       ,   UI   .   ‚Äî . </li>
</ol><br>
<h4> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem 2 modos de funcionamento do rob√¥: autom√°tico e manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No modo manual, o rob√¥ funciona se o servi√ßo ML ainda n√£o estiver treinado. </font><font style="vertical-align: inherit;">Em seguida, o rob√¥ passa de autom√°tico para manual ou a pedido do operador (vi comportamentos estranhos enquanto assistia o rob√¥) ou quando os pr√≥prios servi√ßos de ML detectam uma anomalia. </font><font style="vertical-align: inherit;">Sobre a detec√ß√£o de anomalias ser√° mais tarde - esta √© uma parte muito importante, sem a qual √© imposs√≠vel aplicar a abordagem proposta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A evolu√ß√£o do controle √© a seguinte:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A tarefa do rob√¥ √© formada em termos leg√≠veis por humanos e os indicadores de desempenho s√£o descritos.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O operador se conecta ao rob√¥ em VR e executa a tarefa no fluxo de trabalho existente por algum tempo</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A parte ML √© treinada nos dados recebidos</font></font><br>
</li>
<li>      ,     ML             <br>
</li>
<li>              <br>
</li>
</ol><br>
<h4>       3D</h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitas vezes, os rob√¥s usam o ambiente ROS (sistema operacional do rob√¥), que na verdade √© uma estrutura para gerenciar "n√≥s" (n√≥s), cada um dos quais fornece parte da funcionalidade do rob√¥. Em geral, essa √© uma maneira relativamente conveniente de programar rob√¥s, que de certa forma se assemelha √† arquitetura de microsservi√ßo de aplicativos da Web em sua ess√™ncia. A principal vantagem do ROS √© o padr√£o do setor e j√° existe um grande n√∫mero de m√≥dulos necess√°rios para criar um rob√¥. At√© os bra√ßos rob√≥ticos industriais podem ter um m√≥dulo de interface ROS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mais simples √© criar um modelo de ponte entre a parte do servidor e o ROS. Por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Agora, nosso projeto usa uma vers√£o mais desenvolvida do ‚Äún√≥‚Äù do ROS, que efetua login e pesquisa o microsservi√ßo do registro ao qual servidor de retransmiss√£o um rob√¥ espec√≠fico pode se conectar. O c√≥digo fonte √© fornecido apenas como um exemplo de instru√ß√µes para a instala√ß√£o do m√≥dulo ROS. No in√≠cio, quando voc√™ domina essa estrutura (ROS), tudo parece bastante hostil, mas a documenta√ß√£o √© muito boa e, ap√≥s algumas semanas, os desenvolvedores come√ßam a usar sua funcionalidade com bastante confian√ßa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De interessante - o problema de compress√£o do fluxo de dados 3D, que deve ser produzido diretamente no rob√¥.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o √© t√£o f√°cil compactar o mapa de profundidade. </font><font style="vertical-align: inherit;">Mesmo com um pequeno grau de compacta√ß√£o do fluxo RGB, √© permitida uma distor√ß√£o local muito s√©ria do brilho em pixels nas bordas ou quando objetos em movimento s√£o permitidos. </font><font style="vertical-align: inherit;">O olho quase n√£o percebe isso, mas assim que as mesmas distor√ß√µes s√£o permitidas no mapa de profundidade, ao renderizar em 3D tudo fica muito ruim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kv/1l/6-/kv1l6-qgxaqxhsf1a-zl67hymtk.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses defeitos nas bordas estragam bastante a cena 3D, porque </font><font style="vertical-align: inherit;">h√° muito lixo no ar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßamos a usar a compacta√ß√£o quadro a quadro - JPEG para RGB e PNG para um mapa de profundidade com pequenos hacks. </font><font style="vertical-align: inherit;">Esse m√©todo compacta o fluxo de 30FPS para uma resolu√ß√£o de scanner 3D de 640x480 a 25 Mbps. </font><font style="vertical-align: inherit;">Uma melhor compacta√ß√£o tamb√©m pode ser fornecida se o tr√°fego for cr√≠tico para o aplicativo. </font><font style="vertical-align: inherit;">Existem codecs de fluxo 3D comerciais que tamb√©m podem ser usados ‚Äã‚Äãpara compactar esse fluxo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de realidade virtual</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de calibrarmos o quadro de refer√™ncia da c√¢mera e do rob√¥ (e j√° escrevemos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um artigo sobre calibra√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), o bra√ßo do rob√¥ pode ser controlado em realidade virtual. </font><font style="vertical-align: inherit;">O controlador define a posi√ß√£o no 3D XYZ e a orienta√ß√£o. </font><font style="vertical-align: inherit;">Para alguns roboruk, apenas 3 coordenadas ser√£o suficientes, mas com um grande n√∫mero de graus de liberdade, a orienta√ß√£o da ferramenta especificada pelo controlador tamb√©m deve ser transmitida. </font><font style="vertical-align: inherit;">Al√©m disso, h√° controles suficientes nos controladores para executar comandos do rob√¥, como ligar / desligar a bomba, controlar a garra e outros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, foi decidido usar a estrutura JavaScript para o quadro A de realidade virtual, com base no mecanismo WebVR. </font><font style="vertical-align: inherit;">E os primeiros resultados (demonstra√ß√£o em v√≠deo no final do artigo para o bra√ßo de 4 coordenadas) foram obtidos no quadro A.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, descobriu-se que o WebVR (ou quadro A) era uma solu√ß√£o malsucedida por v√°rios motivos:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compatibilidade principalmente com o FireFox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , enquanto era no FireFox que a estrutura A-frame n√£o liberava recursos de textura (o resto dos navegadores lidavam) at√© que o consumo de mem√≥ria chegasse a 16 GB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intera√ß√£o limitada com controladores e capacete VR. </font><font style="vertical-align: inherit;">Portanto, por exemplo, n√£o foi poss√≠vel adicionar marcas adicionais com as quais voc√™ pode definir a posi√ß√£o, por exemplo, dos cotovelos do operador.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O aplicativo exigia multithreading ou v√°rios processos. </font><font style="vertical-align: inherit;">Em um thread / processo, foi necess√°rio descompactar os quadros de v√≠deo, em outro - empate. </font><font style="vertical-align: inherit;">Como resultado, tudo foi organizado pelos trabalhadores, mas o tempo de desempacotamento chegou a 30 ms e a renderiza√ß√£o em VR deve ser feita a uma frequ√™ncia de 90FPS.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas essas defici√™ncias resultaram no fato de que a renderiza√ß√£o do quadro n√£o teve tempo nos 10ms atribu√≠dos e houve contra√ß√µes muito desagrad√°veis ‚Äã‚Äãna VR. Provavelmente, tudo poderia ser superado, mas a identidade de cada navegador era um pouco irritante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora decidimos partir para as portas C #, OpenTK e C # da biblioteca OpenVR. Ainda existe uma alternativa - Unidade. Eles escrevem que a Unity √© para iniciantes ... mas dif√≠cil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A coisa mais importante que precisava ser encontrada e conhecida para obter liberdade:</font></font><br>
<br>
<pre><code class="cs hljs">VRTextureBounds_t bounds = <span class="hljs-keyword">new</span> VRTextureBounds_t() { uMin = <span class="hljs-number">0</span>, vMin = <span class="hljs-number">0</span>, uMax = <span class="hljs-number">1f</span>, vMax = <span class="hljs-number">1f</span> }; <font></font>
OpenVR.Compositor.Submit(EVREye.Eye_Left, <span class="hljs-keyword">ref</span> leftTexture, <span class="hljs-keyword">ref</span> bounds, EVRSubmitFlags.Submit_Default);<font></font>
OpenVR.Compositor.Submit(EVREye.Eye_Right, <span class="hljs-keyword">ref</span> rightTexture, <span class="hljs-keyword">ref</span> bounds, EVRSubmitFlags.Submit_Default);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(este √© o c√≥digo para enviar duas texturas para os olhos esquerdo e direito do capacete), </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou seja, </font><font style="vertical-align: inherit;">desenhe o OpenGL na textura que olhos diferentes v√™em e envie para os √≥culos. </font><font style="vertical-align: inherit;">Joy n√£o tinha limites quando se tratava de encher o olho esquerdo de vermelho e o direito de azul. </font><font style="vertical-align: inherit;">Apenas alguns dias e agora a profundidade e o mapa RGB vindo via webSocket foram transferidos para o modelo poligonal em 10ms em vez de 30 em JS. </font><font style="vertical-align: inherit;">E, em seguida, basta interrogar as coordenadas e os bot√µes dos controladores, inserir o sistema de eventos para os bot√µes, processar cliques do usu√°rio, inserir a M√°quina de estado para a interface do usu√°rio e agora voc√™ pode pegar um copo do caf√© expresso:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/EuBNaGZctf8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora a qualidade do Realsense D435 √© um pouco deprimente, mas passar√° assim que instalarmos pelo menos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um scanner 3D t√£o interessante da Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cuja nuvem de pontos √© muito mais precisa.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lado do servidor</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor de retransmiss√£o</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O principal elemento funcional √© a retransmiss√£o do servidor (servidor no meio), que recebe um fluxo de v√≠deo do rob√¥ com imagens 3D e leituras de sensores e o estado do rob√¥ e o distribui entre os consumidores. Insira quadros compactados com dados e leituras de sensores provenientes de TCP / IP. A distribui√ß√£o aos consumidores √© realizada por soquetes da Web (um mecanismo muito conveniente para transmitir para v√°rios consumidores, incluindo um navegador). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o servidor de armazenamento tempor√°rio armazena o fluxo de dados no armazenamento em nuvem S3, para que possa ser usado posteriormente para treinamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada servidor de retransmiss√£o suporta a API http, que permite descobrir seu estado atual, o que √© conveniente para monitorar as conex√µes atuais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tarefa de retransmiss√£o √© bastante dif√≠cil, tanto do ponto de vista da computa√ß√£o quanto do ponto de vista do tr√°fego. Portanto, seguimos a l√≥gica de que os servidores de retransmiss√£o s√£o implantados em uma variedade de servidores em nuvem. E isso significa que voc√™ precisa acompanhar quem est√° se conectando aonde (especialmente se houver rob√¥s e operadores em regi√µes diferentes) </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registre-se</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O mais confi√°vel agora ser√° dif√≠cil de definir para cada rob√¥ em que servidores ele pode se conectar (a redund√¢ncia n√£o ser√° prejudicial). O servi√ßo de gerenciamento de ML est√° associado ao rob√¥; ele pesquisa o servidor de retransmiss√£o para determinar a quem o rob√¥ est√° conectado e se conecta ao correspondente, se, √© claro, ele possui direitos suficientes para isso. O aplicativo do operador funciona de maneira semelhante.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mais agrad√°vel! Devido ao fato de o treinamento de rob√¥s ser um servi√ßo, o servi√ßo √© vis√≠vel apenas para n√≥s dentro. Portanto, seu front-end pode ser o mais conveniente poss√≠vel para n√≥s! Essa. √© um console no navegador (h√° uma biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terminalJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que </font><font style="vertical-align: inherit;">√© bonita em sua simplicidade </font><font style="vertical-align: inherit;">, que √© muito f√°cil de modificar, se voc√™ deseja fun√ß√µes adicionais, como a conclus√£o autom√°tica do TAB ou o hist√≥rico de chamadas em execu√ß√£o) e tem a seguinte apar√™ncia: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/vl/yo/wlvlyojuytiepjvhzexlxr-ixcq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este, √© claro, √© um t√≥pico separado para discuss√£o, por que a linha de comando t√£o confort√°vel. A prop√≥sito, √© especialmente conveniente fazer testes de unidade desse front-end.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m da API http, este servi√ßo implementa um mecanismo para registrar usu√°rios com tokens tempor√°rios, operadores de logon / logout, administradores e rob√¥s, suporte de sess√£o, chaves de criptografia de sess√£o para tr√°fego entre o servidor de retransmiss√£o e o rob√¥. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo isso √© feito em Python com Flask - uma pilha muito pr√≥xima para desenvolvedores de ML (ou seja, n√≥s). </font><font style="vertical-align: inherit;">Sim, al√©m disso, a infraestrutura existente de CI / CD para microsservi√ßos √© amig√°vel com o Flask.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atraso no problema</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se queremos controlar os manipuladores em tempo real, o atraso m√≠nimo √© extremamente √∫til. </font><font style="vertical-align: inherit;">Se o atraso se tornar muito grande (mais de 300 ms), ser√° muito dif√≠cil controlar os manipuladores com base na imagem no capacete virtual. </font><font style="vertical-align: inherit;">Em nossa solu√ß√£o, devido √† compacta√ß√£o quadro a quadro (ou seja, n√£o h√° armazenamento em buffer) e ao n√£o uso de ferramentas padr√£o como o GStreamer, o atraso, mesmo considerando o servidor intermedi√°rio, √© de cerca de 150-200 ms. </font><font style="vertical-align: inherit;">O tempo de transmiss√£o pela rede deles √© de cerca de 80ms. </font><font style="vertical-align: inherit;">O restante do atraso √© causado pela c√¢mera Realsense D435 e pela frequ√™ncia de captura limitada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, esse √© um problema de altura m√°xima que surge no modo de "rastreamento", quando o manipulador em sua realidade segue constantemente o controlador do operador em realidade virtual. </font><font style="vertical-align: inherit;">No modo de mudar para um determinado ponto XYZ, o atraso n√£o causa problemas ao operador.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte ML</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem 2 tipos de servi√ßos: gerenciamento e treinamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servi√ßo de treinamento coleta os dados armazenados no armazenamento S3 e inicia o novo treinamento dos pesos do modelo. </font><font style="vertical-align: inherit;">No final do treinamento, os pesos s√£o enviados ao servi√ßo de gerenciamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servi√ßo de gerenciamento n√£o √© diferente em termos de dados de entrada e sa√≠da do aplicativo do operador. </font><font style="vertical-align: inherit;">Da mesma forma, o fluxo de entrada RGBD (RGB + Depth), as leituras do sensor e o status do rob√¥, os comandos de controle de sa√≠da. </font><font style="vertical-align: inherit;">Devido a essa identidade, parece poss√≠vel treinar na estrutura do conceito de ‚Äútreinamento orientado a dados‚Äù.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O estado do rob√¥ (e as leituras dos sensores) √© uma hist√≥ria fundamental para o ML. Ele define o contexto. Por exemplo, um rob√¥ ter√° uma m√°quina de estado caracter√≠stica de sua opera√ß√£o, que determina em grande parte que tipo de controle √© necess√°rio. Esses 2 valores s√£o transmitidos junto com cada quadro: o modo de opera√ß√£o e o vetor de estado do rob√¥. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E um pouco sobre treinamento:</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
na demonstra√ß√£o no final do artigo, havia a tarefa de encontrar um objeto (um cubo infantil) em uma cena 3D. Essa √© uma tarefa b√°sica para os aplicativos pick &amp; place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O treinamento foi baseado em um par de quadros "antes e depois" e designa√ß√£o de alvo obtidos com controle manual: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/v2/s3/n6v2s3v59u7eumxhdh3gxucngxq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
devido √† presen√ßa de dois mapas de profundidade, foi f√°cil calcular a m√°scara do objeto movido no quadro: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6a/vm/k-/6avmk-ue2jfndgwzy08zdb0qtqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, xyz s√£o projetados no plano da c√¢mera e voc√™ pode selecionar a vizinhan√ßa do objeto capturado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/_s/o-/ha_so-yh4xmxwsp4dkoo42tct9i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, com este bairro e vai funcionar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, obtemos o XY treinando a Unet em uma rede convolucional para segmenta√ß√£o de cubos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, precisamos determinar a profundidade e entender se a imagem est√° anormal √† nossa frente. </font><font style="vertical-align: inherit;">Isso √© feito usando um codificador autom√°tico em RGB e um codificador autom√°tico condicional em profundidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arquitetura de modelo para o treinamento do codificador autom√°tico: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/q4/ex/xfq4exzon5b63cucrz6aqi8kflm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, a l√≥gica do trabalho:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">procure um m√°ximo no "mapa de calor" (determine as coordenadas angulares u = x / zv = y / z do objeto) que excede o limite</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o codificador autom√°tico reconstr√≥i a vizinhan√ßa do ponto encontrado para todas as hip√≥teses em profundidade (com um passo dado de min_depth a max_depth) e seleciona a profundidade em que a discrep√¢ncia entre reconstru√ß√£o e entrada √© m√≠nima</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tendo as coordenadas angulares u, ve profundidade, √© poss√≠vel obter as coordenadas x, y, z</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo de reconstru√ß√£o do codificador autom√°tico de um mapa de profundidades de cubo com uma profundidade definida corretamente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/av/1t/bu/av1tbu5dyvflda-_-lpbdw0t0qs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em parte, a id√©ia de um m√©todo de pesquisa de profundidade √© baseada em um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo sobre conjuntos de codificadores autom√°ticos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa abordagem funciona bem para objetos de v√°rias formas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, em geral, existem muitas abordagens diferentes para encontrar um objeto XYZ a partir de uma imagem RGBD. Obviamente, √© necess√°rio, na pr√°tica e com uma grande quantidade de dados, escolher o m√©todo mais preciso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Havia tamb√©m a tarefa de detectar anomalias, para isso precisamos de uma rede convolucional de segmenta√ß√£o para aprender com as m√°scaras dispon√≠veis. Ent√£o, de acordo com esta m√°scara, voc√™ pode avaliar a precis√£o da reconstru√ß√£o do codificador autom√°tico no mapa de profundidade e RGB. Devido a essa discrep√¢ncia, pode-se decidir a presen√ßa de uma anomalia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devido a esse m√©todo, √© poss√≠vel detectar a apar√™ncia de objetos n√£o vistos anteriormente no quadro, que s√£o detectados pelo algoritmo de pesquisa principal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demonstra√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A verifica√ß√£o e a depura√ß√£o de toda a plataforma de software criada foram realizadas no estande:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√¢mera 3D Realsense D435</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 coordenadas Dobot Magician</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacete VR HTC Vive</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidores na nuvem Yandex (reduz a lat√™ncia em compara√ß√£o com a nuvem da AWS)</font></font></li>
</ul><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/G5rBhaxHL_E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No v√≠deo, ensinamos como encontrar um cubo em uma cena 3D, executando uma tarefa em pick &amp; place VR. </font><font style="vertical-align: inherit;">Cerca de 50 exemplos foram suficientes para o treinamento em um cubo. </font><font style="vertical-align: inherit;">Em seguida, o objeto muda e s√£o exibidos mais 30 exemplos. </font><font style="vertical-align: inherit;">Ap√≥s a reciclagem, o rob√¥ pode encontrar um novo objeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo o processo levou cerca de 15 minutos, dos quais cerca de metade do peso do modelo de treinamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E neste v√≠deo, YuMi controla em VR. </font><font style="vertical-align: inherit;">Para aprender a manipular objetos, voc√™ precisa avaliar a orienta√ß√£o e a localiza√ß√£o da ferramenta. </font><font style="vertical-align: inherit;">A matem√°tica se baseia em um princ√≠pio semelhante, mas agora est√° no est√°gio de teste e desenvolvimento.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Q0yTey1srBM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Big Data e Deep Learning n√£o s√£o tudo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos mudando a abordagem do aprendizado, seguindo em dire√ß√£o a como as pessoas aprendem coisas novas - repetindo o que v√™em. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O aparato matem√°tico ‚Äúunder the hood‚Äù, que desenvolveremos em aplica√ß√µes reais, visa o problema da interpreta√ß√£o e controle sens√≠veis ao contexto. </font><font style="vertical-align: inherit;">O contexto aqui √© informa√ß√µes naturais dispon√≠veis a partir de sensores de rob√¥ ou informa√ß√µes externas sobre o processo atual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, quanto mais processos tecnol√≥gicos dominamos, mais a estrutura do "c√©rebro nas nuvens" ser√° desenvolvida e suas partes individuais ser√£o treinadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pontos fortes desta abordagem:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a possibilidade de aprender a manipular objetos vari√°veis </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aprendizagem em um ambiente em mudan√ßa (por exemplo, rob√¥s m√≥veis)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tarefas mal estruturadas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curto espa√ßo de mercado; </font><font style="vertical-align: inherit;">Voc√™ pode executar o alvo mesmo no modo manual usando os operadores</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Limita√ß√£o:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">necessidade de internet confi√°vel e boa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√£o necess√°rios m√©todos adicionais para obter alta precis√£o, por exemplo, c√¢meras no pr√≥prio manipulador</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualmente, estamos trabalhando para aplicar nossa abordagem √† tarefa padr√£o de escolher e colocar v√°rios objetos. </font><font style="vertical-align: inherit;">Mas parece-nos (naturalmente!) Que ele √© capaz de mais. </font><font style="vertical-align: inherit;">Alguma id√©ia onde mais tentar sua m√£o? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado pela aten√ß√£o!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt486680/">https://habr.com/ru/post/pt486680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt486670/index.html">Passaporte eletr√¥nico da Federa√ß√£o Russa, parte 2020 do bal√© Marleson</a></li>
<li><a href="../pt486672/index.html">OpenVINO Hackathon: Reconhecendo a voz e a emo√ß√£o no Raspberry Pi</a></li>
<li><a href="../pt486674/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n¬∫ 400 (27 de janeiro a 2 de fevereiro de 2020)</a></li>
<li><a href="../pt486676/index.html">Inevitabilidade da penetra√ß√£o do FPGA nos data centers</a></li>
<li><a href="../pt486678/index.html">Quartzo no n√∫cleo do ASP.NET</a></li>
<li><a href="../pt486682/index.html">Docker Compose: Simplifique usando Makefile</a></li>
<li><a href="../pt486684/index.html">Minha resposta para aqueles que acreditam que o valor do TDD √© exagerado</a></li>
<li><a href="../pt486686/index.html">Sobre a implementa√ß√£o de uma biblioteca de aprendizado profundo em Python</a></li>
<li><a href="../pt486688/index.html">Node.js, Tor, Puppeteer e Cheerio: raspagem an√¥nima da web</a></li>
<li><a href="../pt486690/index.html">5 dicas para escrever fun√ß√µes de seta com qualidade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>