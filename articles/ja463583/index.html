<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💫 👏 🎖️ 素晴らしいプラグイン、vol。1.理論 🕞 🎁 👩🏾‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="マルチモジュールプロジェクトのある生活はそれほど単純ではありません。新しいモジュールを作成するルーチンを回避するために、Android Studio用の独自のプラグインを作成しました。実装の過程で、実用的なドキュメントの不足に直面し、いくつかのアプローチを試み、多くの落とし穴を掘り起こしました。「理...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>素晴らしいプラグイン、vol。1.理論</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/463583/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マルチモジュールプロジェクトのある生活はそれほど単純ではありません。</font><font style="vertical-align: inherit;">新しいモジュールを作成するルーチンを回避するために、Android Studio用の独自のプラグインを作成しました。</font><font style="vertical-align: inherit;">実装の過程で、実用的なドキュメントの不足に直面し、いくつかのアプローチを試み、多くの落とし穴を掘り起こしました。</font><font style="vertical-align: inherit;">「理論」と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「実践」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という2つの記事が判明しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">会いましょう！</font></font></p><br>
<p><img src="https://habrastorage.org/webt/an/fg/dp/anfgdpffwxapeeei7coineoxdvk.png" alt="画像"></p><a name="habracut"></a><br>
<h1 id="o-chem-budu-govorit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何について話しますか？</font></font></h1><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜプラグインなのか？</font><font style="vertical-align: inherit;">なぜプラグインなのか？</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェックリストを作成する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェックリスト自動化オプション</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラグイン開発の基本</font></font><br>
<ul>
<li>Actions</li>
<li> UI  </li>
<li></li>
</ul></li>
<li> IDEA: , PSI<br>
<ul>
<li>  IDEA</li>
<li>PSI</li>
<li></li>
</ul></li>
</ul><br>
<h1 id="zachem-plagin-pochemu-plagin"> ?  ?</h1><br>
<p>    Android-,  ,    –     .    ,    Gradle,  ,  ,   -   application- –       .    ,      - ,    ,    .</p><br>
<p>1. -,       File -&gt; New -&gt; New module -&gt; Android library.</p><br>
<p><img src="https://habrastorage.org/webt/eo/nt/tk/eonttksy33ofpojuctkl8aoghuo.png" alt="画像"></p><br>
<p>2.       settings.gradle,         – core-  feature-,     . </p><br>
<div class="spoiler"><b class="spoiler_title">   </b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// settings.gradle</span><font></font>
<font></font>
include <span class="hljs-string">':analytics
project('</span>:analytics<span class="hljs-string">').projectDir = new File(settingsDir, '</span>core/framework-metrics/analytics)<font></font>
<font></font>
...<font></font>
<font></font>
include <span class="hljs-string">':feature-worknear'</span>
project(<span class="hljs-string">':feature-worknear'</span>).projectDir = <span class="hljs-keyword">new</span> File(settingsDir, <span class="hljs-string">'feature/feature-worknear'</span>)</code></pre></div></div><br>
<p>3.   <em>compileSdk</em>, <em>minSdk</em>, <em>targetSdk</em>   <em>build.gradle</em>:    ,     <em>build.gradle</em>.</p><br>
<div class="spoiler"><b class="spoiler_title">   build.gradle  </b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Feature module build.gradle</span><font></font>
…<font></font>
android {<font></font>
    compileSdkVersion rootProject.ext.targetSdkVersion<font></font>
<font></font>
    defaultConfig {<font></font>
        minSdkVersion rootProject.ext.minSdkVersion<font></font>
        targetSdkVersion rootProject.ext.targetSdkVersion<font></font>
        ...<font></font>
    }<font></font>
}</code></pre></div></div><br>
<p>:         Gradle-,          <em>build.gradle</em> .</p><br>
<p>4.       Kotlin,    : <em>kotlin-android</em>  <em>kotlin-kapt</em>.   -    UI,    <em>kotlin-android-extensions</em>.</p><br>
<div class="spoiler"><b class="spoiler_title">  Kotlin-</b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Feature module build.gradle</span><font></font>
<font></font>
apply plugin: <span class="hljs-string">'com.android.library'</span>
apply plugin: <span class="hljs-string">'kotlin-android'</span>
apply plugin: <span class="hljs-string">'kotlin-android-extensions'</span>
apply plugin: <span class="hljs-string">'kotlin-kapt'</span>
</code></pre></div></div><br>
<p>5.     core-. Core- – , , logger, , -  ,   – RxJava, Moxy   .</p><br>
<div class="spoiler"><b class="spoiler_title">    </b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Feature module build.gradle</span><font></font>
<font></font>
dependencies {<font></font>
    def libraries = rootProject.ext.<span class="hljs-function">deps

    compileOnly <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':logger'</span>)</span>
    compileOnly <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':analytics'</span>)</span>
… 
    <span class="hljs-comment">// Kotlin</span>
    compileOnly libraries.kotlin

    <span class="hljs-comment">// DI</span>
    compileOnly libraries.toothpick
    kapt libraries.toothpickCompiler
}
</span></code></pre></div></div><br>
<p>6.  kapt  Toothpick-. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Toothpick</a> –    DI-.    :       ,  ,    annotation processor,   ,      :</p><br>
<div class="spoiler"><b class="spoiler_title"> annotation processor  Toothpick</b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Feature module build.gradle</span><font></font>
<font></font>
defaultConfig {<font></font>
    ...<font></font>
<font></font>
    javaCompileOptions {<font></font>
        annotationProcessorOptions {<font></font>
            arguments = [ <font></font>
                toothpick_registry_package_name: <span class="hljs-string">"ru.hh.feature_worknear"</span><font></font>
            ]<font></font>
        }<font></font>
    }<font></font>
<font></font>
    ...</code></pre></div></div><br>
<p>:  hh.ru     Toothpick,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>.</p><br>
<p>7.  kapt  Moxy   . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Moxy</a> –      MVP  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>,       .  ,       kapt-:</p><br>
<div class="spoiler"><b class="spoiler_title"> kapt  Moxy</b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Feature module build.gradle</span><font></font>
<font></font>
android {<font></font>
    ...<font></font>
<font></font>
    kapt {<font></font>
        arguments {<font></font>
            arg(<span class="hljs-string">"moxyReflectorPackage"</span>, <span class="hljs-string">"ru.hh.feature_worknear"</span>)<font></font>
        }<font></font>
    }<font></font>
<font></font>
    ...<font></font>
</code></pre></div></div><br>
<p>:     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Moxy</a>,       .</p><br>
<p>8.    .     ,    (AndroidManifest.xml, build.gradle, .gitignore),     : , , DI-, , .    ,         ,    – .</p><br>
<p><img src="https://habrastorage.org/webt/j2/f5/sz/j2f5szalxm1nmgg4yj9kivxpdfs.png" alt="画像"></p><br>
<p>9.      application-.        Toothpick  build.gradle  application-.           annotation processor- – <em>toothpick_registry_children_package_names</em>.</p><br>
<div class="spoiler"><b class="spoiler_title"> Toothpick</b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// App module build.gradle</span><font></font>
<font></font>
defaultConfig {<font></font>
    …<font></font>
<font></font>
    javaCompileOptions {<font></font>
        annotationProcessorOptions {<font></font>
            arguments = [ <font></font>
                toothpick_registry_package_name: <span class="hljs-string">"ru.hh.android"</span>,<font></font>
                toothpick_registry_children_package_names: [<font></font>
                    <span class="hljs-string">"ru.hh.analytics"</span>,
                    <span class="hljs-string">"ru.hh.feature_worknear"</span>,<font></font>
                    ...<font></font>
                ].join(<span class="hljs-string">","</span>)<font></font>
            ]<font></font>
        }<font></font>
    }<font></font>
    …<font></font>
</code></pre></div></div><br>
<p>   Moxy  application-.    ,    <strong>@RegisterMoxyReflectorPackages</strong> –       :</p><br>
<div class="spoiler"><b class="spoiler_title"> MoxyReflectorStub</b><div class="spoiler_text"><pre><code class="kotlin hljs"><span class="hljs-comment">// App module file</span><font></font>
<font></font>
<span class="hljs-meta">@RegisterMoxyReflectorPackages(
        <span class="hljs-meta-string">"ru.hh.feature_force_update"</span>,
        <span class="hljs-meta-string">"ru.hh.feature_profile"</span>,
        <span class="hljs-meta-string">"ru.hh.feature_worknear"</span>
        ...
)</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoxyReflectorStub</span></span></code></pre></div></div><br>
<p>,   ,        <em>dependences</em> application-:</p><br>
<div class="spoiler"><b class="spoiler_title"> dependencies</b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Application module build.gradle</span><font></font>
<font></font>
dependencies {<font></font>
    def libraries = rootProject.ext.<span class="hljs-function">deps

    implementation <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':logger'</span>)</span>
    implementation <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':dependency-handler'</span>)</span>
    implementation <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':common'</span>)</span>
    implementation <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':analytics'</span>)</span>

    implementation <span class="hljs-title">project</span><span class="hljs-params">(<span class="hljs-string">':feature_worknear'</span>)</span>
    ...</span></code></pre></div></div><br>
<p>   -   .</p><br>
<p>  ,   - .     ,        . </p><br>
<p> ,       - . </p><br>
<h2 id="varianty-avtomatizacii-chek-lista">  -</h2><br>
<p>  -       . </p><br>
<p>     <strong>“Ctrl+C, Ctrl+V”</strong>.       Android Library,    “ ”.    Android Studio ( MacOs: <em>/Applications/Android\ Studio.app/Contents/plugins/android/lib/templates/gradle-projects/</em>)        ,       File -&gt; New -&gt; New Module.     NewAndroidModule,  id   <em>template.xml.ftl</em>.    IDE,    , … Android Studio ,    ,        ,  ,  -   .     ,    - , Android Studio  .</p><br>
<p><img src="https://habrastorage.org/webt/ym/ww/sw/ymwwsw1rzibvaxwrhkqkwd5fqyk.png" alt="画像"></p><br>
<p>   -   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  FreeMarker</a>.                FreeMarker- .</p><br>
<p>  FreeMarker     –  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   RedMadRobot</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  MosDroid   </a>.    –           Map- java-.     , ,  FreeMarker    .</p><br>
<p>     -:</p><br>
<p><img src="https://habrastorage.org/webt/nf/hl/81/nfhl811qacot1f4j_pt2fhsmm8k.png" alt="画像"></p><br>
<p> ,   ,        :</p><br>
<ul>
<li>    (1, 3, 4, 5, 6, 7, 8) </li>
<li>    (2, 7, 8, 9)</li>
</ul><br>
<p>       FreeMarker   ,      .    :     FreeMarker  Android Studio      settings.gradle ,      'include', <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.    ,      FreeMarker. </p><br>
<p>   FreeMarker-         -.  Intellij IDEA    ,     ?    ,  :</p><br>
<p><img src="https://habrastorage.org/webt/t0/2h/ki/t02hki4jlkvs_7eaqisfbuqnyb0.png" alt="画像"></p><br>
<p>          ,      ,        . </p><br>
<p>         ,     Intellij IDEA.    ?    , ,     ,     . </p><br>
<p>      ,    ?</p><br>
<p><img src="https://habrastorage.org/webt/rf/fr/dm/rffrdmuui00uxtruelogjpor_le.png" alt="画像"></p><br>
<div class="spoiler"><b class="spoiler_title"> -?..</b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/0m/uw/ua/0muwuamgty0p8kri2ywhq3dsbaw.png" alt="画像"></p></div></div><br>
<p>     .     Kotlin,     Kotlin-.      Gradle,    Gradle-.         – Git, SVN   -, –         VCS.</p><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a> JetBrains,  ,       4000!     ,      ,  :     IDEA -      ,      IDEA. </p><br>
<p>,     .</p><br>
<h1 id="osnovy-razrabotki-plaginov">  </h1><br>
<p>    .       :</p><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">IntelliJ IDEA</a>,  Community Edition (    Ultimate-,      ,   );</li>
<li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Plugin DevKit</a> –   ,      ;</li>
<li>  JVM- ,      .    Kotlin, Java, Groovy –  .</li>
</ol><br>
<p>    .  <strong>New project</strong>,  <strong>Gradle</strong>,   <strong>IntelliJ Platform Plugin</strong>   . </p><br>
<p><img src="https://habrastorage.org/webt/je/rf/wd/jerfwdeqfmpzdef-_cypw4wahw8.png" alt="画像"></p><br>
<p>:      IntelliJ Platform Plugin –  ,      Plugin DevKit. </p><br>
<p>        . </p><br>
<p><img src="https://habrastorage.org/webt/i2/sy/59/i2sy59dpr0pi8nlmhfyhson20h8.png" alt="画像"></p><br>
<p>    .   :</p><br>
<ul>
<li>,        ; (<em>main/java</em>, <em>main/kotlin</em>, etc);</li>
<li><em>build.gradle</em> ,          - ,      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>gradle-intellij-plugin</em></a>. </li>
</ul><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>gradle-intellij-plugin</em></a> – Gradle- ,    Gradle     .  ,     Android-   Gradle     .  , gradle-intellij-plugin      gradle-,  :</p><br>
<ul>
<li>runIde –      IDEA  ,   ,     ;</li>
<li>buildPlugin –  zip-  ,       ,     IDEA;</li>
<li>verifyPlugin –         ,        Android Studio   - IDEA. </li>
</ul><br>
<p>    <em>gradle-intellij-plugin</em>?          ,       ,     ,  <em>gradle-intellij-plugin</em> –  ,  . </p><br>
<p>   .      – <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>plugin.xml</em></a>.</p><br>
<div class="spoiler"><b class="spoiler_title">plugin.xml</b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">idea-plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>com.experiment.simple.plugin<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Hello, world<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vendor</span> 
        <span class="hljs-attr">email</span>=<span class="hljs-string">"myemail@yourcompany.com"</span> 
        <span class="hljs-attr">url</span>=<span class="hljs-string">"http://www.mycompany.com"</span>&gt;</span><font></font>
            My company<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">vendor</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>&lt;![CDATA[<font></font>
    My first ever plugin - try to open Hello world dialog&lt;br&gt;<font></font>
    ]]&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>com.intellij.modules.lang<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>org.jetbrains.kotlin<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>org.intellij.groovy<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">idea-version</span> <span class="hljs-attr">since-build</span>=<span class="hljs-string">"163"</span>/&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">actions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">group</span> <span class="hljs-attr">description</span>=<span class="hljs-string">"My actions"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"MyActionGroup"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"My actions"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">separator</span>/&gt;</span><font></font>
<font></font>
            <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"com.experiment.actions.OpenHelloWorldAction"</span>
                    <span class="hljs-attr">class</span>=<span class="hljs-string">"com.experiment.actions.OpenHelloWorldAction"</span>
                    <span class="hljs-attr">text</span>=<span class="hljs-string">"Show Hello world"</span> <span class="hljs-attr">description</span>=<span class="hljs-string">"Open dialog"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">add-to-group</span> <span class="hljs-attr">group-id</span>=<span class="hljs-string">"NewGroup"</span> <span class="hljs-attr">anchor</span>=<span class="hljs-string">"last"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">action</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">group</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">actions</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">idea-plugin</span>&gt;</span></code></pre></div></div><br>
<p> ,    :</p><br>
<ul>
<li>  : , , ,   , change log</li>
<li>    ;</li>
<li>     IDEA,       </li>
<li>   <em>Actions</em>. </li>
</ul><br>
<h3 id="actions">Actions</h3><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Actions</a>? ,       .   ,       - :</p><br>
<p><img src="https://habrastorage.org/webt/al/8y/kg/al8ykgojltbksqkuqu5l8cww4fw.png" alt="画像"></p><br>
<p>Actions –        .  ,      ,     ,        ,  .<br>
  Actions?    Action,       "Hello, World". </p><br>
<div class="spoiler"><b class="spoiler_title">OpenHelloWorldAction</b><div class="spoiler_text"><pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OpenHelloWorldAction</span> : <span class="hljs-type">AnAction</span></span>() {<font></font>
<font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">actionPerformed</span><span class="hljs-params">(actionEvent: <span class="hljs-type">AnActionEvent</span>)</span></span> {
        <span class="hljs-keyword">val</span> project = actionEvent.project<font></font>
<font></font>
        Messages.showMessageDialog(<font></font>
            project, <font></font>
            <span class="hljs-string">"Hello world!"</span>, 
            <span class="hljs-string">"Greeting"</span>, <font></font>
            Messages.getInformationIcon()<font></font>
        )<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">update</span><span class="hljs-params">(e: <span class="hljs-type">AnActionEvent</span>)</span></span> {
        <span class="hljs-keyword">super</span>.update(e)
        <span class="hljs-comment">// TODO - Here we can update our action (for example, disable it)</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">beforeActionPerformedUpdate</span><span class="hljs-params">(e: <span class="hljs-type">AnActionEvent</span>)</span></span> {
        <span class="hljs-keyword">super</span>.beforeActionPerformedUpdate(e)
        <span class="hljs-comment">// TODO - This method calls right before 'actionPerformed'</span><font></font>
    }<font></font>
<font></font>
}</code></pre></div></div><br>
<p>  Action- , -,  ,     <em>AnAction</em>. -,     actionPerformed,      <em>AnActionEvent</em>.           Action-.    ,    , ,        ,        ,       .</p><br>
<p>  "Hello, world"-,     (    <em>AnActionEvent</em>),      <em>Messages</em>    . </p><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>  Action-   ?     : <em>update</em>  <em>beforeActionPerformedUpdate</em>. </p><br>
<p> <em>update</em>   ,      Action-.     : ,    ,     .    Action,      Kotlin- ,     Groovy-.    update     action .</p><br>
<p> <em>beforeActionPerformedUpdate</em>    update,     <em>actionPerformed</em>.       Action.         “”,   ,   . </p><br>
<p> Actions       IDEA         –      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.</p><br>
<h3 id="razrabotka-ui-v-plaginah"> UI  </h3><br>
<p>      ,  .    UI,       ,        ,     enum-  . </p><br>
<p>Plugin DevKit   UI   action-,   <em>GUI form</em>  <em>Dialog</em>.     ,  –    : <em>Ok</em>  <em>Cancel</em>. </p><br>
<p><img src="https://habrastorage.org/webt/wd/bx/3r/wdbx3rhggovpfv-fey53fucs2aw.png" alt="画像"></p><br>
<p>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>,  …  .      Layout designer  Android Studio    .  UI    ,  Java Swing.      XML-.      -     (:              ,  ),         – IDEA   .</p><br>
<p>      :    <em>.form</em>,      XML-,  –    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>Bound class</em></a>,     Java, Kotlin,    .      . ,    Java   ,    .  , ,   Kotlin-    .        Java-      ,       ,   .     Kotlin    –    ,  -    ,    .</p><br>
<h3 id="rezyumiruem-osnovy"> </h3><br>
<ul>
<li>   : IDEA Community Edition,    Plugin DevKit  Java. </li>
<li>gradle-intellij-plugin –  ,     ,   .</li>
<li>   UI,   .  IDEA    ,        UI.    -  –  .</li>
<li>      Action-.           IDEA.</li>
</ul><br>
<h1 id="vnutrennosti-idea-komponenty-psi"> IDEA: , PSI</h1><br>
<p>   IDEA,  ,    .   ,        ,      ,    ,   . </p><br>
<p>  IDEA?       ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>Application</em></a>.    IDEA.    IDEA     Application. ,     AppCode, Intellij IDEA, Android Studio,        Application.       -.</p><br>
<div class="spoiler"><b class="spoiler_title"> Application  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/rw/_y/vm/rw_yvmpfn1hyekftipxwuq-qxn8.png" alt="画像"></p></div></div><br>
<p>  –  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>Project</em></a>.      ,   ,     IDEA.  Project       IDEA:  ,    .</p><br>
<div class="spoiler"><b class="spoiler_title"> Project  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/xv/ku/z6/xvkuz6ezzzd5w5_c9suloyafcza.png" alt="画像"></p></div></div><br>
<p>   –  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>Module</em></a>.   ,  –   ,    .       Maven-, Gradle-.   , -,     , - –      .</p><br>
<div class="spoiler"><b class="spoiler_title"> Module  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/zr/vs/ah/zrvsahicec7gak2sfqhox2ldts0.png" alt="画像"></p></div></div><br>
<p>   –  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>VirtualFile</em></a>.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>,      .        <em>VirtualFile</em>,      .  ,    ,  <em>VirtualFile</em>   ,    .</p><br>
<div class="spoiler"><b class="spoiler_title"> VirtualFile  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/z8/4y/hq/z84yhqyl6tzv-1uwc_ersyhmqv0.png" alt="画像"></p></div></div><br>
<p>  <em>VirtualFile</em>   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>Document</em></a>.        . <em>Document</em> ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>:   ,  ,  ..,  ..</p><br>
<div class="spoiler"><b class="spoiler_title"> Document  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/nc/qg/frncqgrdpc3xgtnn_txrhlvdcv0.png" alt="画像"></p></div></div><br>
<p>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>Editor</em></a> –   .       <em>Editor</em>.  ,     ,    :   ,   ,   .</p><br>
<div class="spoiler"><b class="spoiler_title"> Editor  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fk/kj/l-/fkkjl-c-t5nyehcwt6j-ywdhwf0.png" alt="画像"></p></div></div><br>
<p> ,      –  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>PsiFile</em></a>.      ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>. PSI   Program Structure Interface –   . </p><br>
<div class="spoiler"><b class="spoiler_title"> PsiFile  </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ho/kn/l0/hoknl08rk2giwbxure86b3pqcva.png" alt="画像"></p></div></div><br>
<p>     ?   Java-.</p><br>
<div class="spoiler"><b class="spoiler_title"> Java-</b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">package</span> com.experiment; <font></font>
<font></font>
<span class="hljs-keyword">import</span> javax.inject.Inject;<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomeClass</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Inject</span> <font></font>
    String injectedString;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">someMethod</span><span class="hljs-params">()</span> </span>{<font></font>
        System.out.println(injectedString);<font></font>
    }<font></font>
} </code></pre></div></div><br>
<p>    , , , , , ,  ,  , , ,   ,   .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><em>PsiElement-</em></a>.        <em>PsiElement-</em>. </p><br>
<p><img src="https://habrastorage.org/webt/ps/oa/2t/psoa2timve59g__naf1rrskzfdm.png" alt="画像"></p><br>
<p>  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PsiFile</a>    ,          .</p><br>
<p><img src="https://habrastorage.org/webt/mi/4j/f2/mi4jf2mdcqjc1huurmu2ca0hsfi.png" alt="画像"></p><br>
<p> ,  PSI   <strong>  </strong>.    –          ,   <strong></strong>  -  . PSI , , <strong></strong>    .     Java-,      PsiElement-.    Groovy- —  PsiElement-  Groovy,   .   ,         PSI-  -  ,      ,   , –    . </p><br>
<p>     PSI –   PSI-   IDEA.            ,    ,        ,   .         .</p><br>
<h3 id="rezyumiruem-chast-pro-vnutrennosti-idea">    IDEA</h3><br>
<ul>
<li>PSI      IDEA;</li>
<li>PSI-   IDEA,            ;</li>
<li>        PsiElement-.</li>
</ul><br>
<p>     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.            .</p><br>
<h2 id="dopolnitelnye-materialy-po-plaginostroeniyu">   </h2><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間追跡用のプラグインの作成について</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   ,    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Tool window</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      IntelliJ IDEA</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       IDEA</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      IntelliJ IDEA</a></li>
<li>  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>     .    ,     .</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Droidcon Italy 2017</a>,  ,   , ,        FreeMarker- .        ,      .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   KotlinConf</a>,     Square       SQLDelight,        Java,   Kotlin. </li>
</ul></div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463573/index.html">Zen 2アーキテクチャに基づくデータセンター向けの最初のチップ</a></li>
<li><a href="../ja463575/index.html">Cisco 200-125 CCNA v3.0のトレーニング。22日目。3​​番目のCCNA：RIPの調査を続ける</a></li>
<li><a href="../ja463577/index.html">可塑性と強度：転位を強調せずに金属間化合物を硬化</a></li>
<li><a href="../ja463579/index.html">Windows：誰がどこにログインしているかを調べる</a></li>
<li><a href="../ja463581/index.html">Cisco 200-125 CCNA v3.0のトレーニング。23日目：高度なルーティング技術</a></li>
<li><a href="../ja463585/index.html">Cisco 200-125 CCNA v3.0のトレーニング。24日目。IPv6</a></li>
<li><a href="../ja463587/index.html">ConfigureAwait、誰が責任を負うべきか、何をすべきか？</a></li>
<li><a href="../ja463591/index.html">BlueKeep-2-すべての新しいバージョンのWindowsが脆弱になりました</a></li>
<li><a href="../ja463595/index.html">WebカメラのフォーカスまたはピンチC＃とSTM32を制御します</a></li>
<li><a href="../ja463597/index.html">ReactでContext APIを使用してレスポンシブアプリケーションデザインを作成する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>