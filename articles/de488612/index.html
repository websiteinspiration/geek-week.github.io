<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèª ü¶ê üßïüèº Java-Serialisierung: maximale Geschwindigkeit ohne starre Datenstruktur üßõ üö¥üèº ‚å®Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unser Team bei Sberbank entwickelt einen Sitzungsdatendienst, der den Austausch eines einzelnen Java-Sitzungskontexts zwischen verteilten Anwendungen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Java-Serialisierung: maximale Geschwindigkeit ohne starre Datenstruktur</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/488612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unser Team bei Sberbank entwickelt einen Sitzungsdatendienst, der den Austausch eines einzelnen Java-Sitzungskontexts zwischen verteilten Anwendungen organisiert. Unser Service erfordert dringend eine sehr schnelle Serialisierung von Java-Objekten, da dies Teil unserer gesch√§ftskritischen Aufgabe ist. Anfangs kamen sie uns in den Sinn: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google-Protokollpuffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Thrift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Avro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und andere. Die ersten drei dieser Bibliotheken erfordern die Serialisierung von Objekten, um das Schema ihrer Daten zu beschreiben. </font><font style="vertical-align: inherit;">CBOR ist so niedrig, dass nur Skalarwerte und ihre Mengen serialisiert werden k√∂nnen. </font><font style="vertical-align: inherit;">Was wir brauchten, war eine Java-Serialisierungsbibliothek, die "nicht zu viele Fragen stellte" und keine manuelle Sortierung von serialisierbaren Objekten "in Atome" erzwang. </font><font style="vertical-align: inherit;">Wir wollten beliebige Java-Objekte serialisieren, ohne praktisch etwas dar√ºber zu wissen, und wir wollten dies so schnell wie m√∂glich tun. </font><font style="vertical-align: inherit;">Aus diesem Grund haben wir einen Wettbewerb f√ºr die verf√ºgbaren Open Source-L√∂sungen f√ºr das Java-Serialisierungsproblem organisiert.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/52/0t/82/520t82yicq9kayb7s3bovbktf04.png" alt="KDPV"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wettbewerber</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr den Wettbewerb haben wir uns f√ºr </font><font style="vertical-align: inherit;">die beliebtesten Java Serialisierung Bibliotheken, vor allem das Bin√§rformat sowie Bibliotheken , </font><font style="vertical-align: inherit;">die auch in gearbeitet haben </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">andere</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Java Serialisierung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bewertungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java-Standard</font></font></i></td>
<td> Java- ¬´ ¬ª,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>2</td>
<td><i>Jackson JSON</i></td>
<td> &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FasterXML/jackson-databind</a>,  Java-   JSON-.<br>
</td>
</tr>
<tr>
<td>3</td>
<td><i>Jackson JSON (with types)</i></td>
<td>  ,   ,    ,      full qualified  Java-.        JSON- (,  )  .<br>
<div class="spoiler"><b class="spoiler_title">,    JSON...</b><div class="spoiler_text"><pre><code class="javascript hljs">[
  <span class="hljs-string">"ru.sbrf.ufs.dto.PersonDto"</span>,<font></font>
  {<font></font>
    <span class="hljs-string">"firstName"</span>:<span class="hljs-string">"Ivan"</span>,
    <span class="hljs-string">"lastName"</span>:<span class="hljs-string">"Ivanov"</span><font></font>
  }<font></font>
]<font></font>
</code></pre></div></div><div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper();<font></font>
}<font></font>
</code></pre>:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper()<font></font>
            .enable(<font></font>
                    ACCEPT_SINGLE_VALUE_AS_ARRAY,<font></font>
                    ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,<font></font>
                    ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT,<font></font>
                    READ_UNKNOWN_ENUM_VALUES_AS_NULL,<font></font>
                    UNWRAP_SINGLE_VALUE_ARRAYS<font></font>
            )<font></font>
            .disable(<font></font>
                    FAIL_ON_INVALID_SUBTYPE,<font></font>
                    FAIL_ON_NULL_FOR_PRIMITIVES,<font></font>
                    FAIL_ON_IGNORED_PROPERTIES,<font></font>
                    FAIL_ON_UNKNOWN_PROPERTIES,<font></font>
                    FAIL_ON_NUMBERS_FOR_ENUMS,<font></font>
                    FAIL_ON_UNRESOLVED_OBJECT_IDS,<font></font>
                    WRAP_EXCEPTIONS<font></font>
            )<font></font>
            .enable(ALLOW_SINGLE_QUOTES)<font></font>
            .disable(FAIL_ON_EMPTY_BEANS)<font></font>
            .enable(MapperFeature.PROPAGATE_TRANSIENT_MARKER)<font></font>
            .setVisibility(FIELD, ANY)<font></font>
            .setVisibility(ALL, NONE)<font></font>
            .enableDefaultTyping(NON_FINAL);  <span class="hljs-comment">// !</span><font></font>
}<font></font>
</code></pre></div></div></td>
</tr>
<tr>
<td>4</td>
<td><i>Jackson Smile</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FasterXML/jackson-dataformats-binary/smile</a>,   Jackson-,  Java-    JSON- ‚Äì Smile.<br>
</td>
</tr>
<tr>
<td>5</td>
<td><i>Jackson Smile (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>6</td>
<td><i>Bson4Jackson</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">michel-kraemer/bson4jackson</a>,   Jackson-,  Java-    JSON- ‚Äì BSON.<br>
</td>
</tr>
<tr>
<td>7</td>
<td><i>Bson4Jackson (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>8</td>
<td><i>BSON MongoDb</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mongodb/mongo-java-driver/bson</a>,&nbsp;&nbsp; Java-  BSON-.<br>
</td>
</tr>
<tr>
<td>9</td>
<td><i>Kryo</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">EsotericSoftware/kryo</a>,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>10</td>
<td><i>Kryo (unsafe)</i></td>
<td>  ,   ,      sun.misc.Unsafe   /.<br>
<div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text"> :<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.Input<font></font>
com.esotericsoftware.kryo.io.Output<font></font>
</code></pre>:<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.UnsafeInput<font></font>
com.esotericsoftware.kryo.io.UnsafeOutput</code></pre></div></div></td>
</tr>
<tr>
<td>11</td>
<td><i>FST</i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuedigerMoeller / Fast-Serialization-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek&nbsp; </font><font style="vertical-align: inherit;">, die Java-Objekte in ihr eigenes Bin√§rformat konvertiert.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (unsicher)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieselbe Bibliothek wie oben, jedoch so konfiguriert, dass die Klasse sun.misc.Unsafe verwendet wird, um die Serialisierung / Deserialisierung zu beschleunigen.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionen der Bibliothekseinstellungen ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs">FSTConfiguration fst = FSTConfiguration.createDefaultConfiguration();
</code></pre>:<pre><code class="plaintext hljs">FSTConfiguration fst = FSTConfiguration.createUnsafeBinaryConfiguration();</code></pre></div></div></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dreizehn</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein nio</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">odnoklassniki / one-nio-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek&nbsp; </font><font style="vertical-align: inherit;">, die Java-Objekte in ihr eigenes Bin√§rformat konvertiert.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Nio (f√ºr bestehen)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieselbe Bibliothek wie oben, jedoch so konfiguriert, dass detaillierte Metainformationen √ºber die Klasse des serialisierbaren Java-Objekts in das Serialisierungsergebnis aufgenommen werden. </font><font style="vertical-align: inherit;">Dies kann w√§hrend der Langzeitspeicherung </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(z. B. in der Datenbank) vor der Deserialisierung </font><font style="vertical-align: inherit;">erforderlich sein </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das hei√üt, das verfolgte Ziel ist das gleiche wie das von Jackson JSON (mit Typen).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionen der Bibliothekseinstellungen ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithoutSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
SerializeStream out = <span class="hljs-keyword">new</span> SerializeStream( bufWithoutSerializers );<font></font>
out.writeObject(object);<font></font>
<span class="hljs-comment">// bufWithoutSerializers is the result</span>
</code></pre>:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
PersistStream out = <span class="hljs-keyword">new</span> PersistStream( bufWithSerializers );<font></font>
out.writeObject(object);<font></font>
bufWithSerializers = out.toByteArray();<font></font>
<span class="hljs-comment">// bufWithSerializers is the result</span>
</code></pre><br>
   <code>object</code>-  <code>result</code>&nbsp;  -:<br>
1) full qualified    <code>object</code>,<br>
2)     ,<br>
3) full qualified     ,<br>
4)        .<br>
  -  ,  One Nio   ,        .</div></div></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf geht's!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rennen</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geschwindigkeit ist das Hauptkriterium f√ºr die Bewertung von Java-Serialisierungsbibliotheken, die an unserem spontanen Wettbewerb teilnehmen. </font><font style="vertical-align: inherit;">Um objektiv zu bewerten, welche der Serialisierungsbibliotheken schneller ist, haben wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reale Daten aus den Protokollen unseres Systems entnommen und daraus synthetische Sitzungsdaten unterschiedlicher L√§nge zusammengestellt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : von 0 bis 1 MB. </font><font style="vertical-align: inherit;">Das Format der Daten war Zeichenfolgen und Byte-Arrays.</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mit Blick auf die Zukunft sollte gesagt werden, dass Gewinner und Verlierer bereits bei Gr√∂√üen von serialisierbaren Objekten von 0 bis 10 KB aufgetreten sind. </font><font style="vertical-align: inherit;">Eine weitere Vergr√∂√üerung der Objekte auf 1 MB hat das Ergebnis des Wettbewerbs nicht ver√§ndert. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Hinsicht sind zur besseren √úbersichtlichkeit die folgenden Diagramme der Leistung von Java-Serialisierern durch die Gr√∂√üe von Objekten von 10 KB begrenzt.</font></font></blockquote><i> ,    :</i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td>Intel<sup>R</sup>&nbsp;Core<sup>TM</sup> i7-6700 CPU, 3.4GHz, 8 cores</td>
</tr>
<tr>
<td></td>
<td>16 GB</td>
</tr>
<tr>
<td> </td>
<td>Microsoft Windows&nbsp;10&nbsp;(64-bit)</td>
</tr>
<tr>
<td>JRE</td>
<td>IBM J9 VM 1.7.0</td>
</tr>
</tbody></table></div><blockquote><strong>:</strong>   ,  IBM JRE    One Nio (   13  14).     <code>sun.reflect.MagicAccessorImpl</code>    <code>private</code>  <code>final</code> ( )  ,    . , IBM JRE      &nbsp;<code>sun.reflect.MagicAccessorImpl</code>,   ,     runtime .<br>
<br>
           (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Serialization-FAQ</a>,  One Nio   ),    fork  ,    &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  .   &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  fork-   <code>sun.misc.Unsafe</code>     .<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus wurde in unserem Fork die Serialisierung von Strings optimiert - Strings wurden bei der Arbeit an IBM JRE 30-40% schneller serialisiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Hinsicht wurden in dieser Ver√∂ffentlichung alle Ergebnisse f√ºr die One Nio-Bibliothek auf unserer eigenen Gabel und nicht auf der Originalbibliothek erhalten.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die direkte Messung der Serialisierungs- / Deserialisierungsgeschwindigkeit wurde mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Microbenchmark Harness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (JMH) durchgef√ºhrt - einem Tool von OpenJDK zum Erstellen und Ausf√ºhren von Benchmarks. </font><font style="vertical-align: inherit;">F√ºr jede Messung (ein Punkt in der Grafik) wurden 5 Sekunden verwendet, um die JVM aufzuw√§rmen, und weitere 5 Sekunden f√ºr die Zeitmessungen selbst, gefolgt von einer Mittelung. </font></font><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JMH-Benchmark-Code ohne einige Details</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializationPerformanceBenchmark</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@State( Scope.Benchmark )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parameters</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Param( {
            "Java standard",
            "Jackson default",
            "Jackson system",
            "JacksonSmile default",
            "JacksonSmile system",
            "Bson4Jackson default",
            "Bson4Jackson system",
            "Bson MongoDb",
            "Kryo default",
            "Kryo unsafe",
            "FST default",
            "FST unsafe",
            "One-Nio default",
            "One-Nio for persist"
        } )</span>
        <span class="hljs-keyword">public</span> String serializer;
        <span class="hljs-keyword">public</span> Serializer serializerInstance;<font></font>
<font></font>
        <span class="hljs-meta">@Param( { "0", "100", "200", "300", /*... */ "1000000" } )</span>  <span class="hljs-comment">// Toward 1 MB</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> sizeOfDto;
        <span class="hljs-keyword">public</span> Object dtoInstance;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serializedDto;<font></font>
<font></font>
        <span class="hljs-meta">@Setup( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            serializerInstance = Serializers.getMap().get( serializer );<font></font>
            dtoInstance = DtoFactory.createWorkflowDto( sizeOfDto );<font></font>
            serializedDto = serializerInstance.serialize( dtoInstance );<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@TearDown( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
            serializerInstance = <span class="hljs-keyword">null</span>;<font></font>
            dtoInstance = <span class="hljs-keyword">null</span>;<font></font>
            serializedDto = <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serialization( Parameters parameters ) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> parameters.serializerInstance.serialize(<font></font>
                parameters.dtoInstance );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">unserialization</span><span class="hljs-params">( Parameters parameters )</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
        <span class="hljs-keyword">return</span> parameters.serializerInstance.deserialize(<font></font>
                parameters.serializedDto,<font></font>
                parameters.dtoInstance.getClass() );<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes ist passiert: </font><font style="vertical-align: inherit;">
Zun√§chst stellen wir fest, dass Bibliotheksoptionen, die dem Serialisierungsergebnis zus√§tzliche Metadaten hinzuf√ºgen, langsamer sind als die Standardkonfigurationen derselben Bibliotheken (siehe die Konfigurationen ‚Äûmit Typen‚Äú und ‚Äûf√ºr die Beibehaltung‚Äú). </font><font style="vertical-align: inherit;">
Unabh√§ngig von der Konfiguration werden </font><i><font style="vertical-align: inherit;">Jackson JSON und Bson4Jackson, die nicht im Rennen sind,</font></i><font style="vertical-align: inherit;"> nach den Ergebnissen der Serialisierung zu Au√üenseitern </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Dar√ºber hinaus </font><i><font style="vertical-align: inherit;">f√§llt Java Standard aus dem Rennen</font></i><font style="vertical-align: inherit;"> basierend auf Deserialisierung Ergebnisse </font><font style="vertical-align: inherit;">, wie Bei jeder Gr√∂√üe serialisierbarer Daten ist die Deserialisierung viel langsamer als bei Wettbewerbern. </font><font style="vertical-align: inherit;">
Schauen Sie sich die verbleibenden Teilnehmer genauer an: </font><font style="vertical-align: inherit;">
Nach den Ergebnissen der Serialisierung ist die </font><i><font style="vertical-align: inherit;">FST-</font></i><font style="vertical-align: inherit;"> Bibliothek zuversichtlich</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/un/cl/x7/unclx7kgnmniixupznbhmuigcwi.png" alt="Rennen - alle Teilnehmer"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/ct/fm/cg/ctfmcgtlh9wo66vctatdvwujhzy.png" alt="Rennen - au√üer f√ºr Au√üenstehende"></a><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und mit zunehmender Gr√∂√üe von Objekten ‚Äûtritt </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ihr auf die Fersen‚Äú </font><font style="vertical-align: inherit;">. Beachten Sie, dass f√ºr </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Option "for persist" viel langsamer ist als die Standardkonfiguration f√ºr die Serialisierungsgeschwindigkeit. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich die Deserialisierung ansehen, sehen wir, dass </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit zunehmender Datengr√∂√üe √ºberholen konnte </font><font style="vertical-align: inherit;">. Im letzteren Fall f√ºhrt die nicht standardm√§√üige Konfiguration "unsicher" die Deserialisierung viel schneller durch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um alle Punkte √ºber AND zu setzen, schauen wir uns das Gesamtergebnis der Serialisierung und Deserialisierung an: </font><font style="vertical-align: inherit;">
Es wurde deutlich, dass es </font><u><font style="vertical-align: inherit;">zwei eindeutige F√ºhrungskr√§fte gibt: </font></u><u><i><font style="vertical-align: inherit;">FST (unsicher)</font></i></u><u><font style="vertical-align: inherit;"> und </font></u><u><i><font style="vertical-align: inherit;">One Nio</font></i></u><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Wenn auf kleinen Objekten </font><i><font style="vertical-align: inherit;">FST (unsicher)</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/zp/qq/mw/zpqqmwuxdlsb_gvl3orjyd1pyda.png" alt="Rennen - au√üer f√ºr Au√üenstehende (Gesamtwertung)"></a><br>
<br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></u><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;Selbstbewusst f√ºhrt er dann mit der Vergr√∂√üerung serialisierbarer Objekte, dass er </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zugibt und letztendlich unterlegen ist </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die dritte Position mit der Vergr√∂√üerung serialisierbarer Objekte wird von </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zuversichtlich eingenommen </font><font style="vertical-align: inherit;">, obwohl sie den F√ºhrenden fast zweimal </font><u><i><font style="vertical-align: inherit;">voraus ist</font></i></u><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiegen</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Gr√∂√üe des Serialisierungsergebnisses ist das zweitwichtigste Kriterium f√ºr die Bewertung von Java-Serialisierungsbibliotheken. In gewisser Weise h√§ngt die Geschwindigkeit der Serialisierung / Deserialisierung von der Gr√∂√üe des Ergebnisses ab: Es ist schneller, ein kompaktes Ergebnis zu erstellen und zu verarbeiten als ein Volumenergebnis. Um die Ergebnisse der Serialisierung zu "gewichten", wurden dieselben Java-Objekte verwendet, die aus realen Daten aus den Systemprotokollen (Zeichenfolgen und Bytearrays) gebildet wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus ist eine wichtige Eigenschaft des Ergebnisses der Serialisierung auch, wie stark es gut komprimiert wird (z. B. um es in der Datenbank oder in anderen Speichern zu speichern). In unserem Wettbewerb haben wir den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deflate-</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Komprimierungsalgorithmus </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;">verwendet</font></i></a><font style="vertical-align: inherit;"> , der die Grundlage f√ºr ZIP und gzip bildet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Ergebnisse des "Wiegens" waren wie folgt:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/pb/ek/h-/pbekh-hfdtstyzpd2ttgtkfhb88.png" alt="Wiegen"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird erwartet, dass die kompaktesten Ergebnisse die Serialisierung von einem der F√ºhrer des Rennens waren: </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Platz in </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sachen</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kompaktheit ging an </font><u><i><font style="vertical-align: inherit;">BSON MongoDb</font></i></u><font style="vertical-align: inherit;"> &nbsp;(das im Rennen den dritten Platz belegte). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem dritten Platz in Bezug auf die Kompaktheit ‚Äûentkam‚Äú die </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo-</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek </font><font style="vertical-align: inherit;">, die sich zuvor im Rennen nicht bew√§hrt hatte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Serialisierungsergebnisse dieser 3 Leiter des "Wiegens" sind ebenfalls perfekt komprimiert (fast zwei). </font><font style="vertical-align: inherit;">Es stellte sich als das unkomprimierbarste heraus: Das bin√§re √Ñquivalent von JSON ist Smile und JSON selbst. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine merkw√ºrdige Tatsache: Alle Gewinner des "Wiegens" w√§hrend der Serialisierung f√ºgen kleinen und gro√üen serialisierbaren Objekten die gleiche Menge an Servicedaten hinzu.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flexibilit√§t</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir eine verantwortungsvolle Entscheidung √ºber die Auswahl eines Gewinners treffen, haben wir uns entschlossen, die Flexibilit√§t jedes Serialisierers und seine Verwendbarkeit gr√ºndlich zu pr√ºfen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dazu haben wir 20 Kriterien f√ºr die Bewertung unserer am Wettbewerb teilnehmenden Serializer zusammengestellt, damit ‚Äûkeine einzige Maus √ºber unsere Augen gleitet‚Äú.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/zd/t4/it/zdt4itoudhnnpfo7e2l9jdscwdo.png" alt="Flexibilit√§t"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fu√ünoten mit Erl√§uterungen</font></font></b><div class="spoiler_text"><sup>1</sup>&nbsp; &nbsp; <i> <code>LinkedHashMap</code>.</i><br>
<sup>2</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>3</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>4</sup>&nbsp; &nbsp;<i>  <code>sun.reflect.MagicAccessorImpl</code> ‚Äî : boxing/unboxing,   <code>BigInteger/BigDecimal/String</code>.   <code>MagicAccessorImpl</code>&nbsp;(  ' fork One Nio) ‚Äî .</i><br>
<sup>5</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>.</i><br>
<sup>6</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>  <code>HashSet</code>      .</i><br>
<sup>7</sup>&nbsp; &nbsp;<i> <code>HashMap</code>.</i><br>
<sup>8</sup>&nbsp; &nbsp;<i>        ‚Äî ,     ,   /Map-,   (   <code>HashMap</code>).</i><br>
<sup>9</sup>&nbsp; &nbsp;<i>   -.</i><br>
<sup>10</sup>&nbsp;<i>   One Nio ‚Äî ,    ' fork- ‚Äî .</i><br>
<sup>11</sup> <i>     .</i><br>
</div></div><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nach dem 13. Kriterium erhielt One Nio (f√ºr persist) einen weiteren Punkt (19.).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Diese sorgf√§ltige ‚ÄûPr√ºfung der Bewerber‚Äú war vielleicht die zeitaufw√§ndigste Phase unseres ‚ÄûCastings‚Äú. Diese Vergleichsergebnisse er√∂ffnen jedoch die M√∂glichkeit, Serialisierungsbibliotheken zu verwenden. Infolgedessen k√∂nnen Sie diese Ergebnisse als Referenz verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war eine Schande zu realisieren, aber unsere F√ºhrer nach den Ergebnissen von Rennen und Wiegen -</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FST (unsicher)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- stellte sich in Bezug auf Flexibilit√§t als Au√üenseiter heraus ... Wir waren jedoch an einer merkw√ºrdigen Tatsache interessiert: Ein Nio in der Konfiguration "f√ºr best√§ndig" (nicht der schnellste und nicht der kompakteste) erzielte die meisten Punkte in Bezug auf Flexibilit√§t - 19/20. Die M√∂glichkeit, die standardm√§√üige (schnelle und kompakte) One Nio-Konfiguration so flexibel wie m√∂glich zu gestalten, sah ebenfalls sehr attraktiv aus - und es gab einen Weg. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ganz am Anfang, als wir die Teilnehmer in den Wettbewerb einf√ºhrten, wurde gesagt, dass </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (f√ºr persist)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Ergebnis der Serialisierung detaillierte </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metainformationen √ºber die Klasse des serialisierbaren Java-Objekts enth√§lt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(*). </font><font style="vertical-align: inherit;">Mithilfe dieser Metainformationen zur Deserialisierung wei√ü die One Nio-Bibliothek genau, wie die Klasse des serialisierbaren Objekts zum Zeitpunkt der Serialisierung aussah. </font><font style="vertical-align: inherit;">Auf der Grundlage dieses Wissens ist der One Nio-Deserialisierungsalgorithmus so flexibel, dass er die maximale Kompatibilit√§t bietet, die sich aus der Serialisierung ergibt </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich heraus, dass Metainformationen (*) f√ºr die angegebene Klasse separat abgerufen, serialisiert&nbsp; </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;und an die Seite gesendet werden k√∂nnen, auf der die Java-Objekte dieser Klasse deserialisiert werden:</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Code in Schritten ...</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">//  ‚Ññ1:  -   SomeDto</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = Repository.get( SomeDto.class );<font></font>
<span class="hljs-keyword">byte</span>[] dtoMeta = serializeByDefaultOneNioAlgorithm( dtoSerializerWithMeta );<font></font>
//  ‚Ññ<span class="hljs-number">1</span>:  dtoMeta  ‚Ññ<span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:  -    SomeDto      One Nio</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = deserializeByOneNio( dtoMeta );<font></font>
Repository.provideSerializer( dtoSerializerWithMeta );<font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ1:    SomeDto</span>
<span class="hljs-keyword">byte</span>[] bytes1 = serializeByDefaultOneNioAlgorithm( object1 );
<span class="hljs-keyword">byte</span>[] bytes2 = serializeByDefaultOneNioAlgorithm( object2 );<font></font>
...<font></font>
<span class="hljs-comment">//  ‚Ññ1:    ‚Ññ2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:      SomeDto</span><font></font>
SomeDto object1 = deserializeByOneNio( bytes1 );<font></font>
SomeDto object2 = deserializeByOneNio( bytes2 );<font></font>
...<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie dieses explizite Verfahren zum Austausch von Metainformationen √ºber Klassen zwischen verteilten Diensten ausf√ºhren, k√∂nnen diese Dienste serialisierte Java-Objekte unter Verwendung der standardm√§√üigen (schnellen und kompakten) One Nio-Konfiguration aneinander senden. W√§hrend die Dienste ausgef√ºhrt werden, bleiben die Versionen der Klassen auf ihren Seiten unver√§ndert, was bedeutet, dass es keinen Grund gibt, die konstanten Metainformationen in jedem Serialisierungsergebnis w√§hrend jeder Interaktion hin und her zu ziehen. Nachdem Sie am Anfang etwas mehr Action ausgef√ºhrt haben, k√∂nnen Sie die Geschwindigkeit und Kompaktheit von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gleichzeitig mit der Flexibilit√§t von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio nutzen (um zu bestehen)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Genau das, was ben√∂tigt wird! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen f√ºr die √úbertragung von Java-Objekten zwischen verteilten Diensten in serialisierter Form (daf√ºr haben wir diesen Wettbewerb organisiert)&nbsp;</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Nio war der Gewinner in Sachen Flexibilit√§t</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(19/20). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter den Java-Serialisierern, die sich fr√ºher im Rennsport und beim Wiegen auszeichneten, wurde keine schlechte Flexibilit√§t nachgewiesen:</font></font><br>
<br>
<ul>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(14,5 / 20),</font></font></li>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (13/20).</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sockel</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erinnern Sie sich an die Ergebnisse fr√ºherer Java-Serialisierungswettbewerbe:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei Rennen wurden die ersten beiden Zeilen der Wertung durch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (unsicher)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio geteilt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> belegte den dritten Platz </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> besiegte das Wiegen </font><font style="vertical-align: inherit;">, gefolgt von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Bezug auf die Flexibilit√§t stand </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nur f√ºr unsere Aufgabe, den Sitzungskontext zwischen verteilten Anwendungen auszutauschen, erneut an erster Stelle&nbsp; </font><font style="vertical-align: inherit;">, und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo waren </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">herausragend</font></i><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Bezug auf die Gesamtheit der erzielten Ergebnisse ist der Sockel, den wir erhalten haben, wie folgt:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Nio</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Im Hauptwettbewerb - Rennen - teilte sich </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den ersten Platz </font><i><font style="vertical-align: inherit;">(unsicher)</font></i><font style="vertical-align: inherit;"> , wog aber den Konkurrenten beim Wiegen und Testen der Flexibilit√§t erheblich.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (unsicher)</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Auch eine sehr schnelle Java-Serialisierungsbibliothek, der jedoch die direkte und Abw√§rtskompatibilit√§t der aus der Serialisierung resultierenden Byte-Arrays fehlt.</font></font></li>
<li><strong>BSON MongoDB&nbsp;+&nbsp;Kryo</strong><br>
 2   3-      Java-,     .       2-   ,          .        <code>Collection</code>  <code>Map</code>,   <i>BSON MongoDB</i>     custom-  / (<code>Externalizable</code>  ..).</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Sberbank haben wir in unserem Sitzungsdatendienst die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek verwendet </font><font style="vertical-align: inherit;">, die den ersten Platz in unserem Wettbewerb gewonnen hat. Mit dieser Bibliothek wurden Java-Sitzungskontextdaten serialisiert und zwischen Anwendungen √ºbertragen. Dank dieser √úberarbeitung hat sich die Geschwindigkeit des Sitzungstransports um ein Vielfaches beschleunigt. Lasttests haben gezeigt, dass in Szenarien, die dem tats√§chlichen Verhalten der Benutzer in Sberbank Online nahe kommen, eine Beschleunigung von bis zu 40% nur aufgrund dieser Verbesserung erzielt wurde. Ein solches Ergebnis bedeutet eine Verk√ºrzung der Reaktionszeit des Systems auf Benutzeraktionen, was die Zufriedenheit unserer Kunden erh√∂ht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im n√§chsten Artikel werde ich versuchen, die zus√§tzliche Beschleunigung von </font><i><font style="vertical-align: inherit;">One Nio</font></i><font style="vertical-align: inherit;"> in Aktion zu demonstrieren</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abgeleitet von der Verwendung der Klasse </font></font><code>sun.reflect.MagicAccessorImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Leider unterst√ºtzt die IBM JRE nicht die wichtigsten Eigenschaften dieser Klasse, was bedeutet, dass das volle Potenzial von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr diese Version der JRE noch nicht offengelegt wurde. </font><font style="vertical-align: inherit;">Fortsetzung folgt.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488602/index.html">iOS MEETUP # 2 von FUNCORP und Wie man einen Entwickler auf dem Laufenden h√§lt</a></li>
<li><a href="../de488604/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 402 (10. - 16. Februar 2020)</a></li>
<li><a href="../de488606/index.html">Die wahre Essenz der Eidechsen</a></li>
<li><a href="../de488608/index.html">"Ruhm ZHPSS!" oder erinnere dich an GPSS World</a></li>
<li><a href="../de488610/index.html">Die Geschichte einer Person, die empfindlich auf elektromagnetische Strahlung reagiert oder wie wir den Rand einer Klippe f√ºhlen ... UPD: + FAQ</a></li>
<li><a href="../de488614/index.html">Bobbin 3.0.0 - √úberpr√ºfung der Verbesserungen</a></li>
<li><a href="../de488616/index.html">Nullproblem in Data Science und Machine Learning</a></li>
<li><a href="../de488618/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 333 (10. - 16. Februar)</a></li>
<li><a href="../de488622/index.html">Ersetzen Cheeklisten Vorschriften?</a></li>
<li><a href="../de488624/index.html">Gegenseitige Wirtschaft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>