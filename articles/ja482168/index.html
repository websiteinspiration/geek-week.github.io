<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌎 👨🏽‍🍳 💲 「時計が12を打つとき。」またはブラウザのガーランド ⛪️ 🦖 🤷🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="複数のモニターがあるとします。そして、これらのモニターをガーランドとして使用したかったのです。たとえば、同時に点滅させる。または、ある種のスマートアルゴリズムに従って同期的に色を変更することもできます。そして、ブラウザーでそれを行うとどうなるでしょうか。スマートフォンとタブレットの両方をこれに接続で...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>「時計が12を打つとき。」またはブラウザのガーランド</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482168/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数のモニターがあるとします。そして、これらのモニターをガーランドとして使用したかったのです。たとえば、同時に点滅させる。または、ある種のスマートアルゴリズムに従って同期的に色を変更することもできます。そして、ブラウザーでそれを行うとどうなるでしょうか。スマートフォンとタブレットの両方をこれに接続できるからです。これですべてです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/1c/a8/yo1ca85ahnnxg_5crc1hh84n9ng.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ブラウザを使用しているため、サウンドデザインを追加することもできます。結局のところ、デバイスを時間的に同期させるのに十分正確であれば、まるで1つのマルチチャネルシステムのように、それぞれでサウンドを再生できます。</font></font><br>
<br>
<hr><i>      Web Audio     javascript-;    «»   javasctipt (!)     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>  node.js –  .</i><a name="habracut"></a><hr><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件付きオンラインガーランドでは、正確なクロック同期が必要です。結局のところ、ネットワークの遅延は（断続的にも）無視できます。タイムスタンプ付きの制御コマンドを提供し、これらのコマンドを少し「未来へ」生成するだけで十分です。クライアントでは、それらはバッファリングされ、同期して時間通りに実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、さらに先に進むこともできます。古き良き決定論的ランダムアルゴリズムを採用し、すべてのデバイスで1つの共通シード（サーバーによって1回発行されると、接続時に発行）を使用します。そんな種を</font><i><font style="vertical-align: inherit;">一緒に</font></i><font style="vertical-align: inherit;">使ったら</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正確な時間-すべてのデバイスでのアルゴリズムの動作を完全に事前に決定できます。</font><font style="vertical-align: inherit;">想像してみてください。実際には、一意に同期して状態を変更するためにネットワークやサーバーは必要ありません。</font><font style="vertical-align: inherit;">シードには、アクションの（条件付きで無限の）「ビデオ」全体が事前に含まれています。</font><font style="vertical-align: inherit;">重要なのは正確な時間です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kd/tx/tt/kdtxttvwqoqkb69jvoov077o8vs.gif"><br>
<hr><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各方法には適用範囲の制限があります。</font><font style="vertical-align: inherit;">もちろん、ユーザーの即時入力があれば、何もする必要はありません。「そのまま」送信し​​ます。</font><font style="vertical-align: inherit;">ただし、計算できるのは計算することだけです。</font><font style="vertical-align: inherit;">私の実装では、状況に応じて3つすべてのアプローチを使用します。</font></font></i><hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主観的「同時に」</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理想的には、すべてが「同時に」聞こえる必要があります。組み合わされたデバイス間の最悪のペアでは、±10 ms以下の差異が必要です。</font><font style="vertical-align: inherit;">システム時刻からそのような正確さを当てにすることはできません。また、NTPプロトコルを使用して時刻を同期する標準的な方法は、ブラウザーでは使用できません。</font><font style="vertical-align: inherit;">したがって、同期サーバーを駆動します。</font><font style="vertical-align: inherit;">原則は単純です。ヘルメットの「ping」とサーバーのタイムスタンプを含む「ポン」を受け入れます。</font><font style="vertical-align: inherit;">これを続けて何度も実行すると、統計的にエラーを相殺し、平均遅延時間を取得できます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード：クライアントのサーバー時間を計算する</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">let</span> pingClientTime = <span class="hljs-number">1</span>; <span class="hljs-comment">// performace.now() time when ping started</span>
<span class="hljs-keyword">let</span> pongClientTime = <span class="hljs-number">3</span>; <span class="hljs-comment">// performace.now() time when pong received</span>
<span class="hljs-keyword">let</span> pongServerTime = <span class="hljs-number">20</span>; <span class="hljs-comment">// server timstamp in pong answer</span><font></font>
<font></font>
<span class="hljs-keyword">let</span> clientServerRawOffset = pongServerTime - pongClientTime;
<span class="hljs-keyword">let</span> pingPongOffset = pongClientTime - pingClientTime; <span class="hljs-comment">// roundtrip</span>
<span class="hljs-keyword">let</span> estimatedPingOffset = pingPongOffset / <span class="hljs-number">2</span>; <span class="hljs-comment">// one-way</span>
<span class="hljs-keyword">let</span> offset = clientServerRawOffset + estimatedPingOffset;<font></font>
<font></font>
<span class="hljs-built_in">console</span>.log(estimatedPingOffset) <span class="hljs-comment">// 1</span>
<span class="hljs-built_in">console</span>.log(offset); <span class="hljs-comment">// 18</span><font></font>
<font></font>
<span class="hljs-keyword">let</span> sharedServerTime = performace.now() + offset;</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webソケットとそれに基づくソリューションは、TCP接続を作成する時間を必要とせず、双方向で「通信」できるため、最も適しています。</font><font style="vertical-align: inherit;">もちろん、UDPやICMPではありませんが、HTTP APIを使用した通常のコールド接続よりもはるかに高速です。</font><font style="vertical-align: inherit;">したがって、socket.io。</font><font style="vertical-align: inherit;">すべてが非常に簡単です。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード：socket.ioの実装</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// server</span>
socket.on(<span class="hljs-string">'ping'</span>, (pongCallback) =&gt; {
  <span class="hljs-keyword">let</span> pongServerTime = performace.now();<font></font>
  pongCallback(pongServerTime);<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//client</span>
<span class="hljs-keyword">const</span> binSize = <span class="hljs-number">100</span>;
<span class="hljs-keyword">let</span> clientServerCalculatedOffset;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ping</span>(<span class="hljs-params"></span>) </span>{<font></font>
  socket.emit(<span class="hljs-string">'ping'</span>, pongCallback);
  <span class="hljs-keyword">const</span> pingClientTime = performace.now();
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pongCallback</span>(<span class="hljs-params">pongServerTime</span>) </span>{
    <span class="hljs-keyword">const</span> pongClientTime = performace.now();
    <span class="hljs-keyword">const</span> clientServerRawOffset = pongServerTime - pongClientTime;
    <span class="hljs-keyword">const</span> pingPongOffset = pongClientTime - pingClientTime; <span class="hljs-comment">// roundtrip</span>
    <span class="hljs-keyword">const</span> estimatedPingOffset = pingPongOffset / <span class="hljs-number">2</span>; <span class="hljs-comment">// one-way</span>
    <span class="hljs-keyword">const</span> offset = clientServerRawOffset + estimatedPingOffset;<font></font>
    offsets.unshift(offset);<font></font>
    offsets.splice(binSize);<font></font>
    <span class="hljs-keyword">let</span> offsetSum = <span class="hljs-number">0</span>;<font></font>
    offsets.forEach(<span class="hljs-function">(<span class="hljs-params">offset</span>) =&gt;</span> {<font></font>
      offsetSum += offset;<font></font>
    });<font></font>
    clientServerCalculatedOffset = offsetSum / offset.length();<font></font>
  }<font></font>
}</code></pre><br>
<i> ,   ,   –      .      .          .       .</i><br>
</div></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance.now（）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクト</font></font><code>performance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が高解像度タイマーへのアクセスを提供するAPIである</font><font style="vertical-align: inherit;">ことを思い出させてください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">比較：</font></font><br>
<br>
<ul>
<li><b><code>Date.now()</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1970年1月1日からのミリ秒数を返し、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形式で</font><font style="vertical-align: inherit;">返します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">つまり、丸めによる誤差のみが平均0.5 msです。</font><font style="vertical-align: inherit;">たとえば、1つの減算操作で、</font></font><code>a-b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大2ミリ秒まで失敗する可能性が</font><font style="vertical-align: inherit;">あり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">さらに、歴史的および概念的に、タイムメーター自体は高い精度を保証するものではなく、より大きなタイムスケールでの作業用にシャープ化されています。</font></font></li>
<li><b><code>performance.now()</code></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webページが開いてから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のミリ秒数を返します</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは比較的最近のAPIで、特に時間間隔を正確に測定するために「シャープ化」されています。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浮動小数点値を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返します</font><font style="vertical-align: inherit;">。理論的には、OS自体の機能に近い精度レベルを提供します。</font></font><br>
</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この情報は、ほとんどすべてのJavaScript開発者に知られていると思います。</font><font style="vertical-align: inherit;">しかし、誰もがそれを知っているわけではありません...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">妖怪</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2018年のスペクターのセンセーショナルなタイミング攻撃により、脆弱性の問題に対する他の解決策がない場合、高解像度タイマーが人工的に粗くされるという点にすべてが行きます。</font><font style="vertical-align: inherit;">Firefoxはバージョン60以降、このタイマーの値をミリ秒に、さらにEdgeをさらに悪い値に丸めます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">MDNの発言</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
は</font><font style="vertical-align: inherit;">次の</font><font style="vertical-align: inherit;">とおり</font><font style="vertical-align: inherit;">です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスタンプは実際には高解像度ではありません。</font><font style="vertical-align: inherit;">Spectreなどのセキュリティの脅威を軽減するために、ブラウザは現在、結果をさまざまな程度に丸めています。</font><font style="vertical-align: inherit;">（Firefoxは、Firefox 60で1ミリ秒に丸め始めました。）ブラウザによっては、タイムスタンプを少しランダム化する場合もあります。</font><font style="vertical-align: inherit;">精度は、将来のリリースで再び向上する可能性があります。</font><font style="vertical-align: inherit;">ブラウザー開発者は、これらのタイミング攻撃と、それらを軽減するための最善の方法を調査しています。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストを実行して、グラフを見てみましょう。</font><font style="vertical-align: inherit;">これは、10ミリ秒の間隔でのテストの結果です。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストコード：サイクル内の時間測定</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measureTimesLoop</span>(<span class="hljs-params">length</span>) </span>{
  <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {<font></font>
    d[i] = <span class="hljs-built_in">Date</span>.now();<font></font>
    p[i] = performance.now();<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> { d, p }<font></font>
}</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/lt/rr/xo/ltrrxo5m-cfdsf7kpwy_vm0d4nu.png" align="left"><code>Date.now()</code><br>
<img src="https://habrastorage.org/webt/hp/h-/w3/hph-w3yafyxorpopqiksdnd6j5g.png" align="left"><code>performance.now()</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></h3><br>
<img src="https://habrastorage.org/webt/g2/t2/bs/g2t2bssr-dhq8cbyb95-pwjxclw.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計</font></font></b><div class="spoiler_text"> : 44.17763.771.0<br>
<br>
<h3>Date.now()</h3> : 1.0538336052202284 <br>
   , RMS: 0.7547819181245603 <br>
 : 1 <br>
<br>
<h3>performance.now()</h3> : 1.567100970873786 <br>
   , RMS: 0.6748006785171455 <br>
 : 1.5015000000003056 <br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></h3><br>
<img src="https://habrastorage.org/webt/7y/6b/a_/7y6ba_0b_lgehjq2yko_60ip4am.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計</font></font></b><div class="spoiler_text"> : 71.0<br>
<br>
<h3>Date.now()</h3> : 1.0168350168350169 <br>
   , RMS: 0.21645930182417966 <br>
 : 1 <br>
<br>
<h3>performance.now()</h3> : 1.0134453781512605 <br>
   , RMS: 0.1734108492762375 <br>
 : 1 <br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></h3><br>
<img src="https://habrastorage.org/webt/zv/_y/pp/zv_yppcegrbidigvmp6npdcwzf0.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計</font></font></b><div class="spoiler_text"> : 79.0.3945.88<br>
<br>
<h3>Date.now()</h3> : 1.02442996742671 <br>
   , RMS: 0.49858684744384 <br>
 : 1 <br>
<br>
<h3>performance.now()</h3> : 0.005555847229948915 <br>
   , RMS: 0.027497846727194235 <br>
 : 0.0050000089686363935 <br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OK、Chrome、1ミリ秒にズームします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2o/9m/ik/2o9mikwf_owbi8mn1saodrmd_e8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、Chromeはまだ保持され</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ており</font><font style="vertical-align: inherit;">、その実装</font><font style="vertical-align: inherit;">はまだ絞められておらず、ステップは0.005 msと美しいです。</font><font style="vertical-align: inherit;">エッジの下では、タイマーがある</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よりも粗く</font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font><font style="vertical-align: inherit;">Firefoxでは、両方のタイマーの精度が同じミリ秒です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この段階で、すでにいくつかの結論を導き出すことができます。</font><font style="vertical-align: inherit;">しかし、JavaScriptには別のタイマーがあります（それがないと、私たちはそれなしでは実行できません）。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebAudio APIタイマー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは少し違う獣です。</font><font style="vertical-align: inherit;">遅延オーディオキューに使用されます。</font><font style="vertical-align: inherit;">：実際には、オーディオイベント（エフェクトを管理し、ノートを演奏する）は、標準の非同期JavaScriptのツールに頼ることができないということです</font></font><code>setInterval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、</font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ため、その大きすぎるエラーの- 。</font><font style="vertical-align: inherit;">そして、これは</font><font style="vertical-align: inherit;">タイマー</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー</font><font style="vertical-align: inherit;">（先に扱ったもの）だけではなく、イベントマシンがイベントを実行する際のエラーでもあります。</font><font style="vertical-align: inherit;">そして、温室条件でも、それはすでに約5-25msです。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スポイラーの下の非同期ケースのグラフ</font></font></b><div class="spoiler_text">     100 :<br>
<br>
<div class="spoiler"><b class="spoiler_title"> :     </b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pause</span>(<span class="hljs-params">duration</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {<font></font>
      setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
        resolve();<font></font>
      }, duration);<font></font>
  });<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measureTimesInAsyncLoop</span>(<span class="hljs-params">length</span>) </span>{
  <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {<font></font>
    d[i] = <span class="hljs-built_in">Date</span>.now();<font></font>
    p[i] = performance.now();<font></font>
    <span class="hljs-keyword">await</span> pause(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> { d, p }<font></font>
}</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/lt/rr/xo/ltrrxo5m-cfdsf7kpwy_vm0d4nu.png" align="left"><code>Date.now()</code><br>
<img src="https://habrastorage.org/webt/hp/h-/w3/hph-w3yafyxorpopqiksdnd6j5g.png" align="left"><code>performance.now()</code><br>
<br>
<h3>Edge</h3><br>
<img src="https://habrastorage.org/webt/_z/im/h2/_zimh2thj4w5t2o_ounushbk94m.png"><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"> : 44.17763.771.0<br>
<br>
<h3>Date.now()</h3> : 25.595959595959595 <br>
   , RMS: 10.12639235162126 <br>
 : 28 <br>
<br>
<h3>performance.now()</h3> : 25.862596938775525 <br>
   , RMS: 10.123711255512573 <br>
 : 27.027099999999336 <br>
</div></div><br>
<br>
<h3>Firefox</h3><br>
<img src="https://habrastorage.org/webt/bm/pn/bs/bmpnbsvv3esgusduj0djwdvazg4.png"><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"> : 71.0<br>
<br>
<h3>Date.now()</h3> : 1.6914893617021276 <br>
   , RMS: 0.6018870280772611 <br>
 : 2 <br>
<br>
<h3>performance.now()</h3> : 1.7865168539325842 <br>
   , RMS: 0.6442818510935484 <br>
 : 2 <br>
</div></div><br>
<br>
<h3>Chrome</h3><br>
<img src="https://habrastorage.org/webt/ig/my/wf/igmywf_jvwphlqdqm9qac2evy64.png"><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"> : 79.0.3945.88<br>
<br>
<h3>Date.now()</h3> : 4.787878787878788, <br>
   , RMS: 0.7557553886872682 <br>
 : 5 <br>
<br>
<h3>performance.now()</h3> : 4.783989898979516 <br>
   , RMS: 0.6483716900974945 <br>
 : 4.750000000058208 <br>
</div></div><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多分誰かが最初の実験的なHTMLオーディオアプリケーションを覚えているでしょう。</font><font style="vertical-align: inherit;">本格的なWebAudioがブラウザに登場する前、それらはすべて少し酔って、ずさんなように聞こえました。</font><font style="vertical-align: inherit;">彼らがそれ</font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をシーケンサーとして</font><font style="vertical-align: inherit;">使用したからといっ</font><font style="vertical-align: inherit;">て。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
対照的に、最新のWebAudio APIは、最大0.02 msの保証された解像度を提供します（サンプリング周波数44100Hzに基づく推測）。</font><font style="vertical-align: inherit;">これは、遅延音の再生に次のメカニズムとは異なるメカニズムが使用されているためです</font></font><code>setTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs">source.start(when);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、オーディオサンプルの再生はすべて「遅延」します。</font><font style="vertical-align: inherit;">「延期されない」ことを失うだけで、「今まで」延期する必要があります。</font></font><br>
<br>
<pre><code class="javascript hljs">source.start(audioCtx.currentTime);</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアルタイムのソフトウェア生成音楽について</font></font></b><div class="spoiler_text">  -    –          . ,          ,    .<br>
<br>
 ,        «»    ,  - .<br>
</div></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらすべてを支配する1つのタイマー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とても安定していて正確なので、それを相対時間の主な情報源として使うべきでしょうか？</font><font style="vertical-align: inherit;">もう一度テストを実行してみましょう。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストコード：同期時間測定をサイクルで測定</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measureTimesInLoop</span>(<span class="hljs-params">length</span>) </span>{
  <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {<font></font>
    d[i] = <span class="hljs-built_in">Date</span>.now();<font></font>
    p[i] = performance.now();<font></font>
    a[i] = audioCtx.currentTime * <span class="hljs-number">1000</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> { d, p, a }<font></font>
}</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/lt/rr/xo/ltrrxo5m-cfdsf7kpwy_vm0d4nu.png" align="left"><code>Date.now()</code><br>
<img src="https://habrastorage.org/webt/hp/h-/w3/hph-w3yafyxorpopqiksdnd6j5g.png" align="left"><code>performance.now()</code><br>
<img src="https://habrastorage.org/webt/xo/or/r9/xoorr9ldh_oivoxxvbxj8yozwqc.png" align="left"><code>audioCtx.currentTime</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></h3><br>
<img src="https://habrastorage.org/webt/rt/xx/u0/rtxxu0ckburybooxuw93uiya7-s.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計</font></font></b><div class="spoiler_text"> : 44.17763.771.0<br>
<br>
<h3>Date.now()</h3> : 1.037037037037037 <br>
   , RMS: 0.6166609846299806 <br>
 : 1 <br>
<br>
<h3>performance.now()</h3> : 1.5447103117505993 <br>
   , RMS: 0.4390514285320851 <br>
 : 1.5015000000000782 <br>
<br>
<h3>audioCtx.currentTime</h3> : 2.955751134714949 <br>
   , RMS: 0.6193645611529503 <br>
 : 2.902507781982422 <br>
<br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></h3><br>
<img src="https://habrastorage.org/webt/rr/v6/ws/rrv6wsi1tmnpdb8yf7y6wmfvyo8.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計</font></font></b><div class="spoiler_text"> : 71.0<br>
<br>
<h3>Date.now()</h3> : 1.005128205128205 <br>
   , RMS: 0.12392867665225249 <br>
 : 1 <br>
<br>
<h3>performance.now()</h3> : 1.00513698630137 <br>
   , RMS: 0.07148844433269844 <br>
 : 1 <br>
<br>
<h3>audioCtx.currentTime</h3>   Firefox    <br>
<br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></h3><br>
<img src="https://habrastorage.org/webt/yx/wx/rk/yxwxrkmxhv3yzxzpzckvfhouz6y.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計</font></font></b><div class="spoiler_text"> : 79.0.3945.88<br>
<br>
<h3>Date.now()</h3> : 1.0207612456747406 <br>
   , RMS: 0.49870223457982504 <br>
 : 1 <br>
<br>
<h3>performance.now()</h3> : 0.005414502034674972 <br>
   , RMS: 0.027441293974958335 <br>
 : 0.004999999873689376 <br>
<br>
<h3>audioCtx.currentTime</h3> : 3.0877599266656963 <br>
   , RMS: 1.1445555956407658 <br>
 : 2.9024943310650997 <br>
<br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スポイラーの下の非同期ケースのグラフ</font></font></b><div class="spoiler_text"> <div class="spoiler"><b class="spoiler_title"> :     </b><div class="spoiler_text">      100 :<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pause</span>(<span class="hljs-params">duration</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {<font></font>
        setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
          resolve();<font></font>
        }, duration);<font></font>
    });<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measureTimesInAsyncLoop</span>(<span class="hljs-params">length</span>) </span>{
    <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
    <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
    <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {<font></font>
      d[i] = <span class="hljs-built_in">Date</span>.now();<font></font>
      p[i] = performance.now();<font></font>
      <span class="hljs-keyword">await</span> pause(<span class="hljs-number">1</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> { d, p }<font></font>
  }</code></pre><br>
 </div></div><br>
<br>
<img src="https://habrastorage.org/webt/lt/rr/xo/ltrrxo5m-cfdsf7kpwy_vm0d4nu.png" align="left"><code>Date.now()</code><br>
<img src="https://habrastorage.org/webt/hp/h-/w3/hph-w3yafyxorpopqiksdnd6j5g.png" align="left"><code>performance.now()</code><br>
<img src="https://habrastorage.org/webt/xo/or/r9/xoorr9ldh_oivoxxvbxj8yozwqc.png" align="left"><code>audioCtx.currentTime</code><br>
<br>
<h3>Edge</h3><br>
 <img src="https://habrastorage.org/webt/3o/sz/az/3oszazaq71kxfdaftgn6v3z23xe.png"><br>
 <div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">  : 44.17763.771.0<br>
<br>
<h3>Date.now():</h3> : 24.505050505050505 <br>
    : 11.513166584195204 <br>
  : 26 <br>
<br>
<h3>performance.now():</h3> : 24.50935757575754 <br>
    : 11.679091435527388 <br>
  : 25.525499999999738 <br>
<br>
<h3>audioCtx.currentTime:</h3> : 24.76005164944396 <br>
    : 11.311571546205316 <br>
  : 26.121139526367187 <br>
<br>
</div></div><br>
 <h3>Firefox</h3><br>
 <img src="https://habrastorage.org/webt/wf/4n/jn/wf4njn3z7u9uoxluprufhlbctai.png"><br>
 <div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">  : 71.0<br>
<br>
<h3>Date.now():</h3> : 1.6875 <br>
    : 0.6663410663216448 <br>
  : 2 <br>
<br>
<h3>performance.now():</h3> : 1.7234042553191489 <br>
    : 0.6588877688171075 <br>
  : 2 <br>
<br>
<h3>audioCtx.currentTime:</h3> : 10.158730158730123 <br>
    : 1.4512471655330046 <br>
  : 8.707482993195299 <br>
<br>
</div></div><br>
 <h3>Chrome</h3><br>
 <img src="https://habrastorage.org/webt/_s/hd/uh/_shduhzpetwube_gn6kxmwyobiu.png"><br>
 <div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">  : 79.0.3945.88<br>
<br>
<h3>Date.now():</h3> : 4.585858585858586 <br>
    : 0.9102125516015199 <br>
  : 5 <br>
<br>
<h3>performance.now():</h3> : 4.59242424242095 <br>
    : 0.719936993603155 <br>
  : 4.605000001902226 <br>
<br>
<h3>audioCtx.currentTime:</h3> : 10.12648022171832 <br>
    : 1.4508887886499262 <br>
  : 8.707482993197118 <br>
<br>
</div></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、それはうまくいきません。</font><font style="vertical-align: inherit;">「外」では、このタイマーは最も不正確です。</font><font style="vertical-align: inherit;">Firefoxはループ内のタイマー値を更新しません。</font><font style="vertical-align: inherit;">しかし、一般的には、分解能は3 ms以下であり、顕著なジッターがあります。</font><font style="vertical-align: inherit;">おそらく、この値</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、オーディオカードのドライバーのリングバッファー内の位置を反映しています。</font><font style="vertical-align: inherit;">つまり、安全に再生を遅らせることが可能な最小時間を示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして何をすべきか？</font><font style="vertical-align: inherit;">結局のところ、サーバーと同期して画面上でJavaScriptイベントを起動するための正確なタイマーと、サウンドイベントのためのオーディオタイマーの両方が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのタイマーを互いに同期させる必要があることがわかります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアント</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントに</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クライアント上。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そしてクライアント</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 同期、同期</font></font></h2><br>
<img src="https://habrastorage.org/webt/f1/ph/o9/f1pho9gss4d40786nszfeicwrog.png" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的に、これを考えると、これはかなりおかしいです。時間AとBの2つの適切なソースがあり、それぞれが出力で非常に粗く、ノイズが多い（A '= A + err </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; B' = B + err </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）ので、それ自体では使用できません。</font><font style="vertical-align: inherit;">しかし、元のノイズのないソース間の差dは非常に正確に復元できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理想的なクロック間の真の時間距離は一定であり、n回の測定を行うため、測定誤差errをそれぞれn回低減します。</font><font style="vertical-align: inherit;">もちろん、クロックが同じ速度で実行されない限り。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい、同期していません</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
悪いニュースは、いいえ、彼らは同じ速度で移動しないということです。そして、私はサーバーとクライアントのクロックの不一致について話しているのではありません-これは理解可能で期待されています。さらに予期しないことは、</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次第にから分岐し</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。クライアントの中にあります。気付かないかもしれませんが、負荷がかかると、オーディオシステムが小さなデータを飲み込まず、（リングバッファの性質とは異なり）オーディオ時間がシステム時間と相対的にシフトすることがあります。これはめったに発生しませんが、多くの人が関係することはありません。たとえば、2つのYouTube動画を異なるコンピューターで同時に起動した場合、彼らが同時に再生を停止するのは事実ではありません。もちろん、要点は広告ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、安定した同期動作のために。我々はする必要があり</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、定期的に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照として、サーバー時間を使用して、すべての時計を互いに調整します。</font><font style="vertical-align: inherit;">そして、平均化に使用する測定値の数にトレードオフが現れます</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">数値が高いほど、正確になりますが、急激なジャンプが値をフィルタリングする時間枠に当たる可能性が高くなります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、たとえば、分ウィンドウを使用すると、経過時間はすべての分になります。</font><font style="vertical-align: inherit;">フィルターの選択は幅広く</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指数関数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中央値</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カルマンフィルター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などです。</font><font style="vertical-align: inherit;">しかし、このトレードオフはいずれにしてもです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間枠</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同期の場合</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そうUIと干渉しないように、非同期サイクルで、我々は、100ミリ秒で、言う、一回の測定を取ることができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
測定誤差err = errA + errB = 1 + 3 = 4 ms </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とすると、1秒で0.4 msに、10秒で0.04 msに削減できます。結果をさらに改善しても意味がなく、フィルタリングに適したウィンドウは1〜10秒です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワーク同期の場合、遅延とエラーはすでにはるかに重要ですが、遅延の場合のように、時間の急激なジャンプはありません</font></font><code>audioCtx.currentTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そして、あなたは自分自身に本当に素晴らしい統計を蓄積させることができます。結局のところ、pingのエラーは最大500ミリ秒です。そして、私たちができる測定自体はそれほど頻繁ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この時点で、停止することを提案します。</font><font style="vertical-align: inherit;">誰かが興味を持っていたら、私は「フクロウの残りの部分を描く」方法をあなたに喜んで教えます </font><font style="vertical-align: inherit;">しかし、タイマーについての話の一部として、私の話は終わったと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私に起こったことを共有したいと思います。</font><font style="vertical-align: inherit;">すべて同じ、新年。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どうした</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
免責事項：技術的には、これはHabréのPRサイトですが、これは完全に非営利のオープンソースペットプロジェクトであり、広告を掲載したり、他の方法でお金を稼ぐことは絶対に約束しません。</font><font style="vertical-align: inherit;">それどころか、私は今、起こりうるhabraeffectを生き残るために、私のお金からより多くのインスタンスを調達しました。</font><font style="vertical-align: inherit;">ですから、親切な人たちよ、私を壊したり、私に連絡したりしないでください。</font><font style="vertical-align: inherit;">これはすべて純粋に楽しいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明けましておめでとうございます、Habr！</font></font><br>
<br>
<hr><br>
<h3><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">snowtime.fun</font></font></a></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノブをひねって、視覚化、音楽、オーディオ効果を制御できます。</font><font style="vertical-align: inherit;">通常のビデオカードを使用している場合は、設定に移動し、パーティクルの数を100％に設定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WebAudioとWebGLが必要です。</font></font><br>
<br>
<hr><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> macOS MojaveのSafariでは機能しません。</font><font style="vertical-align: inherit;">残念ながら、このSafari自体が存在しないため、問題の内容をすぐに理解することはできません。</font><font style="vertical-align: inherit;">iOSが動作しているようです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD2：</font></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">snowtime.fun</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.snowtime.funが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">応答しない</font><font style="vertical-align: inherit;">場合</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">、新しい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .snowtime.fun</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブドメインを試してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">サーバーを別のデータセンターに変換し、古いIPをDNSにキャッシュします</font></font><code>expire=1w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">:( </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リポジトリ：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bitbucket。Macvector </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">/ Freepikの</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
イラストが記事の執筆時に使用されました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja482154/index.html">なぜfinalで継承を制限するのですか？</a></li>
<li><a href="../ja482156/index.html">ウィル・カートとの彼の新しい本、ベイジアン統計-それは素晴らしいことについてのインタビュー</a></li>
<li><a href="../ja482158/index.html">エンバーオクタンに会う</a></li>
<li><a href="../ja482162/index.html">数学者はパターンを見つけ、その外観を回避する方法を理解しています</a></li>
<li><a href="../ja482166/index.html">空港での犬の訓練サービス：あなたはすでににおいを嗅いでいます</a></li>
<li><a href="../ja482170/index.html">プロセッサ戦争。青いウサギと赤いカメの話</a></li>
<li><a href="../ja482176/index.html">@Kubernetesカンファレンスの11月29日の様子：ビデオと結果</a></li>
<li><a href="../ja482178/index.html">キューモニタリングシステムで大臣賞を受賞した韓国人学生の話</a></li>
<li><a href="../ja482182/index.html">ITでジェンダーバランスのために戦った場合、どのような問題が発生しますか？</a></li>
<li><a href="../ja482186/index.html">人生とIT、または最後の仕事を辞めた年</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>