<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìì üíÉüèæ üíÉüèº Stellen Sie Hyperledger Fabric 1.4 unter AWS bereit ü•í üç• üßëüèø‚Äçü§ù‚Äçüßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hyperledger Fabric ist eine Open Source-Blockchain-Plattform der Linux Foundation. Mit ihm k√∂nnen Sie Blockchain-Anwendungen erstellen und den Zugriff...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Stellen Sie Hyperledger Fabric 1.4 unter AWS bereit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nix/blog/499214/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyperledger Fabric ist eine Open Source-Blockchain-Plattform der Linux Foundation. Mit ihm k√∂nnen Sie Blockchain-Anwendungen erstellen und den Zugriff und die Berechtigungen f√ºr Daten in der Blockchain steuern. Hyperledger Fabric sollte verwendet werden, wenn Sie ein privates Blockchain-Netzwerk erstellen oder Einschr√§nkungen f√ºr die Transaktionen festlegen m√∂chten, die jede Seite sehen kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Dokumentation von Hyperledger Fabric ist die Erstellung eines Blockchain-Netzwerks auf einem Computer mit Docker gut geplant, wobei jedes Netzwerkmitglied ein separater Container ist. Der Vorgang zum Einrichten eines Netzwerks auf mehreren physischen oder virtuellen Maschinen wird jedoch nicht beschrieben. Dies wird in diesem Artikel erl√§utert.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Blockchain-Anwendung ist ein Dienst zum Speichern einiger medizinischer Daten von Schul- und Vorschulkindern. </font><font style="vertical-align: inherit;">Die Daten m√ºssen unver√§ndert bleiben. </font><font style="vertical-align: inherit;">Sie werden in Form von Informationen √ºber die Impfung und die Vereinbarung des Patienten mit einem bestimmten Arzt pr√§sentiert. </font><font style="vertical-align: inherit;">Das Netzwerk wird Mitglieder der Eltern (eine Organisation, die die Interessen der Eltern vertritt), des Krankenhauses (ein Krankenhaus, mit dem Kinder√§rzte Eltern eine Vereinbarung zur Betreuung ihres Kindes / ihrer Kinder abschlie√üen k√∂nnen) und des Kindergartens (ein Kindergarten, f√ºr den Gesundheitsberichte und Impfungen angefordert werden k√∂nnen) umfassen oder ein anderes Kind im Krankenhaus).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon verwaltete Blockchain</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AWS verf√ºgt √ºber einen Amazon Managed Blockchain-Dienst. </font><font style="vertical-align: inherit;">Sie k√∂nnen Blockchain-Netzwerke √ºber die Benutzeroberfl√§chen der AWS-Konsole bereitstellen. </font><font style="vertical-align: inherit;">Nachdem wir jedoch einige Erfahrungen mit Amazon Managed Blockchain gesammelt hatten, mussten wir die Idee aufgeben, den Service in kommerziellen Projekten zu verwenden. </font><font style="vertical-align: inherit;">Daf√ºr gab es mehrere Gr√ºnde. </font><font style="vertical-align: inherit;">Die wichtigsten sind:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der von Amazon verwalteten Blockchain war nur die Version von Hyperledger Fabric 1.2 verf√ºgbar. Zum Zeitpunkt dieses Schreibens wird Version 1.4 zum Erstellen von Blockchain-Netzwerken f√ºr Unternehmen verwendet. </font><font style="vertical-align: inherit;">Es erlaubt auch nicht die Verwendung moderner Versionen der Node.js SDK-Tools.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon Managed Blockchain unterst√ºtzt die CouchDB-Datenbank nicht, sodass es schwierig ist, Anwendungen zu erstellen, die gespeicherte Daten indizieren.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sind daher der Meinung, dass es besser ist, virtuelle oder physische Server zum Erstellen von Netzwerken mit dem Hyperledger Fabric-Framework zu verwenden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úber App-Kan√§le</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hyperledger Fabric hat das Konzept des "Kanals". </font><font style="vertical-align: inherit;">Ein Kanal ist ein Subnetz zur Durchf√ºhrung sensibler Transaktionen. </font><font style="vertical-align: inherit;">Unsere Anwendung enth√§lt zwei Kan√§le.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Elternkrankenhaus". </font><font style="vertical-align: inherit;">Es ist f√ºr Transaktionen zwischen Mitgliedern von Eltern- und Krankenhausorganisationen vorgesehen: Erstellen und √Ñndern von Krankenakten, Erstellen einer Vereinbarung mit einem Kinderarzt und Unterzeichnen einer Kinderarztvereinbarung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Elternhospitalkindergarten." </font><font style="vertical-align: inherit;">Innerhalb dieses Kanals werden Mitglieder von Eltern und Krankenhaus mit Mitgliedern des Kindergartens interagieren. </font><font style="vertical-align: inherit;">Au√üerdem werden Berichte auf der Grundlage von Daten aus medizinischen Unterlagen erstellt.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeitsumgebung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden unser Blockchain-Netzwerk mit Docker Swarm bereitstellen - dies ist das native Docker-System zum Bereitstellen eines Host-Clusters. Wenn Sie noch nie mit Docker (und insbesondere mit Docker Swarm) gearbeitet haben, lesen Sie zuerst dieses Produkt und erfahren Sie, wie Sie Container mit Docker Swarm orchestrieren. In der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werden die Grundlagen der Arbeit mit diesen Tools gut beschrieben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser gesamtes Netzwerk befindet sich auf AWS EC2-Servern. </font><font style="vertical-align: inherit;">Informationen innerhalb des Blockchain-Netzwerks werden in CouchDB gespeichert. </font><font style="vertical-align: inherit;">Hyperledger Fabric unterst√ºtzt auch die LevelDB-Datenbank, aber CouchDB erm√∂glicht im Gegensatz zu letzterer die Suche nach beliebigen Kriterien in einer Dokumentensammlung. </font><font style="vertical-align: inherit;">Wir werden auch Fabric Certificate Authority verwenden - dies ist eine modulare Komponente zum Verwalten von Netzwerkkennungen aller Organisationen und ihrer Benutzer. </font><font style="vertical-align: inherit;">Es erm√∂glicht die Registrierung von Netzwerkteilnehmern und die Ausstellung von Zertifikaten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden vier EC2-Server haben:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Besteller, MySQL DB (zum Speichern von Anwendungsinformationen, die nicht f√ºr Krankenakten gelten)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elternorganisation (Peer0, Peer1), CouchDB, Fabric-CA, CLI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krankenhausorganisation (Peer0, Peer1), CouchDB, Fabric-CA</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kindergartenorganisation (Peer0, Peer1), CouchDB, Fabric-CA</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen von EC2-Servern unter AWS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir brauchen t2.medium-Dienste, um zu funktionieren. </font><font style="vertical-align: inherit;">Dieser EC2-Servertyp verf√ºgt √ºber ausreichende Rechenleistung, um die gesamte erforderliche Software zu installieren und mit dem Hyperledger Fabric-Tool zu arbeiten. </font><font style="vertical-align: inherit;">Legen Sie in der Sicherheitsgruppe Konfigurieren den gesamten Datenverkehr und die Quelle auf 0.0.0.0/0, :: / 0 fest. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/kx/iu/bbkxiua1teuzbc0jbmajtl-o5i0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 1. </font><font style="vertical-align: inherit;">Konfigurieren Sie die Sicherheitsgruppe im AWS-Bereich. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben vier EC2-Server:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-18-232-164-119.compute-1.amazonaws.com</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-54-145-203-186.compute-1.amazonaws.com</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-54-80-241-117.compute-1.amazonaws.com</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-52-87-193-235.compute-1.amazonaws.com</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben nat√ºrlich Ihre eigenen Pfade zu EC2-Servern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/ab/as/azabas37iihj5xmuaqzrty6-mcc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 2. </font><font style="vertical-align: inherit;">Vorbereitet f√ºr den Betrieb von EC2-Servern.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren der erforderlichen Software auf EC2-Servern</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen wir auf jedem EC2-Server Docker und Git installieren. </font><font style="vertical-align: inherit;">√ñffnen Sie der Einfachheit halber vier Registerkarten im Terminal. </font><font style="vertical-align: inherit;">Gehen wir zu jedem EC2-Dienst √ºber SSH: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 1:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST1=ec2-18-232-164-119.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST1 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 2:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST2=ec2-54-145-203-186.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST2 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 3:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST3=ec2-54-80-241-117.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST3 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 4:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST4=ec2-52-87-193-235.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST4 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie in jedem Terminal die folgenden Befehle aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum update -y<font></font>
sudo yum install -y docker<font></font>
sudo service docker start<font></font>
sudo docker info<font></font>
sudo yum install git<font></font>
sudo usermod -a -G docker ec2-user<font></font>
newgrp docker<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir Docker und Git installiert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerk</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen Elemente unseres Netzwerks aus dem Repository klonen. </font><font style="vertical-align: inherit;">F√ºhren Sie dazu den Befehl in jedem Terminal aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">git clone https://github.com/nixsolutions/blockchain-poc-network.git network
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen auch intelligente Vertr√§ge aus dem Repository klonen, die die Beziehungen zwischen Netzwerkteilnehmern regeln. </font><font style="vertical-align: inherit;">Intelligente Vertr√§ge werden in der Sprache Golang geschrieben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir f√ºhren diese Schritte auf jedem der vier Server aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd network &amp;&amp; mkdir chaincode &amp;&amp; cd chaincode<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-medical-contract.git medical-contract<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-kindergarten-contract.git kindergarten-contract<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im ersten Terminal m√ºssen Kanalkonfigurationsdateien und Zertifikate generiert werden, um Organisationen mit dem Netzwerk zu verbinden:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd network/poc-network<font></font>
./1_generate_connection_files.sh<font></font>
./2_generating_channel_configuration.sh<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie nun die Ordner f√ºr Kanalartefakte und Kryptokonfigurationen auf die anderen drei Hosts im Ordner poc-network des √ºbergeordneten Netzwerkverzeichnisses. </font><font style="vertical-align: inherit;">Hinweis: Wenn Sie Organisationen auf den EC2-Server kopieren, m√ºssen Sie Zertifikate von Drittanbietern aus dem Ordner crypto-config / peerOrganizations entfernen, die sich auf die Arbeit anderer Organisationen beziehen. </font><font style="vertical-align: inherit;">Wenn Sie beispielsweise auf den Eltern-Host kopieren, m√ºssen Sie den Ordner parent.poc-network.com in diesem Ordner belassen, aber hospital.poc-network.com und kindergarten.poc-network.com l√∂schen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines Docker-Schwarmstapels</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit Container, die zu verschiedenen Organisationen geh√∂ren und sich auf verschiedenen EC2-Servern befinden, aufeinander zugreifen k√∂nnen, m√ºssen sie zu einem Stapel zusammengefasst werden. </font><font style="vertical-align: inherit;">Schauen wir uns unser Dateinetzwerk / poc-network / docker-compose-general.yaml an. </font><font style="vertical-align: inherit;">Es enth√§lt die Konfiguration von Diensten, gibt an, auf welchen Hosts ein bestimmter Dienst (Schl√ºssel </font></font><code>node.hostname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">bereitgestellt wird </font><font style="vertical-align: inherit;">, Aliase (Schl√ºssel </font></font><code>aliases</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">werden angezeigt </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen den Schwarm im ersten Terminal initialisieren:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker swarm init<font></font>
docker swarm join-token manager<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Token wird angezeigt, um einen anderen EC2-Server an den Stapel anzuschlie√üen. </font><font style="vertical-align: inherit;">So etwas wie : </font></font><code>docker swarm join --token SWMTKN-1-42ml0ohnnbidg8kflgp8xp9dkkus6mn1lslqc15hrxj4tk9e3q-5h4vbzbfk8p90n83oe08gbltf 172.31.46.214:2377</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen wir in den verbleibenden Terminals ausf√ºhren:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker swarm join --token SWMTKN-1-2xzco7t7txohnzd09318eczpbgmm8woex80byxptpt1jl5i2ar-bsg37h40xze1gaabg80i96gw2 172.31.38.245:2377
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Konsole wird eine Meldung angezeigt:</font></font><br>
<br>
<pre><code class="plaintext hljs">This node joined a swarm as a manager.
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem alle drei Hosts mit Swarm verbunden sind, k√∂nnen wir sie im Terminal des ersten Hosts anzeigen, indem wir den folgenden Befehl ausf√ºhren:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker node ls
</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16d/687/898/16d687898e5eb8b4ed00883d4eef2de7.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 3. </font><font style="vertical-align: inherit;">Liste der Server in Docker Swarm. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Ordner network / poc-network befindet sich eine .env.template-Datei, in der Sie f√ºr jeden Host einen Hostnamen angeben m√ºssen: </font></font><br>
<br>
<code>ORDERER=ip-172-31-38-245</code><br>
<code>PARENTS=ip-172-31-43-64</code><br>
<code>HOSPITAL=ip-172-31-38-130</code><br>
<code>KINDERGARTEN=ip-172-31-40-157</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine .env-Datei zu generieren, m√ºssen Sie die Datei ./3_env_gen.sh ausf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie nun ein Netzwerk mit einem Treiber </font></font><code>overlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker network create --driver overlay --attachable stage_byfn
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie Swarm aus, um einen Stapel basierend auf der Datei docker-compose-general.yaml zu erstellen:</font></font><br>
<br>
<pre><code class="plaintext hljs">env $(cat .env | grep ^[A-Z] | xargs) docker stack deploy -c docker-compose-general.yaml stage 2&gt;&amp;1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesem Befehl legen wir auch Umgebungsvariablen fest, die in der ENV-Datei beschrieben sind und f√ºr die ordnungsgem√§√üe Funktion des Netzwerks erforderlich sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen den Befehl </font></font><code>docker service ls</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im ersten Terminal </font><font style="vertical-align: inherit;">ausf√ºhren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie sehen eine Liste aller Dienste, die auf allen unseren EC2-Instanzen ausgef√ºhrt werden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc6/d4d/e6c/dc6d4de6c534c2b97430a1cf2e45512c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 4. </font><font style="vertical-align: inherit;">Liste aller Dienste, die auf allen EC2-Servern ausgef√ºhrt wurden. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie in Ihrem Terminal dasselbe sehen wie im Screenshot, ist alles in Ordnung. </font><font style="vertical-align: inherit;">F√ºhren Sie jetzt unser Netzwerk. </font><font style="vertical-align: inherit;">Im zweiten Terminal m√ºssen Sie den CLI-Container eingeben (schlie√ülich wird dieser Container auf dem zweiten Host bereitgestellt):</font></font><br>
<br>
<pre><code class="plaintext hljs">docker exec -ti stage_cli.1.owni217t53m53efjtikb5oa2f /bin/bash
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Containername kann durch Ausf√ºhren des Befehls im Terminal angezeigt werden </font></font><code>docker ps</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Container f√ºhren wir alle unsere Befehle aus der Datei 4_create_channels.sh aus und kopieren sie einzeln auf das Terminal. </font><font style="vertical-align: inherit;">Im Ordner bin haben wir die Bin√§rdateien zum Erstellen des Netzwerks:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peer-Kanal erstellen - Kan√§le erstellen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peer-Channel-Join - Verbinden eines Peers mit einem Kanal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peer-Channel-Update - Update-Konfigurationen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peer Chaincode installieren - Installieren Sie den Codecode.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peer-Kettencode instanziieren - Stellen Sie den angegebenen Kettencode im Netzwerk bereit.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie den Container verlassen, indem Sie den Befehl ausf√ºhren </font></font><code>exit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eltern zur√ºck Antrag</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie die Anwendung auf dem zweiten Host:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-backend.git back<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen auch NodeJS und gcc-c ++ (Compiler) installieren:</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -<font></font>
sudo yum install nodejs<font></font>
cd back<font></font>
sudo yum install gcc-c++ -y<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen unsere Datenbank auch √ºber den Administrator mit den folgenden Berechtigungsdaten eingeben: </font></font><br>
<br>
<code>&lt;HOST_1&gt;:3306</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Wo </font></font><code>&lt;HOST_1&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die Adresse des ersten EC2-Servers, auf dem die Datenbank gespeichert ist?) </font></font><br>
<code>dev</code><br>
<code>devpass</code><br>
<code>poc_database</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist auch erforderlich, unsere API-Anwendung mit der Datenbank zu verbinden:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/config/config.json
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weisen Sie dem Schl√ºssel den richtigen Wert zu </font></font><code>host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Unsere R√ºckanwendung hat Migrationen und Samen vorbereitet. </font><font style="vertical-align: inherit;">Sie m√ºssen sie ausf√ºhren:</font></font><br>
<br>
<pre><code class="plaintext hljs">npx sequelize-cli db:migrate<font></font>
npx sequelize-cli db:seed:all<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tabellen sollten in der Datenbank angezeigt werden. </font><font style="vertical-align: inherit;">Und in der Organisationstabelle sehen wir drei Reihen mit unseren Organisationen - Eltern, Krankenhaus, Kindergarten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Generieren von Zertifikaten zu Beginn haben wir Dateien f√ºr die Verbindung zum Netzwerk f√ºr jede Organisation auf dem ersten Host erhalten. </font><font style="vertical-align: inherit;">Kopieren Sie die Datei connection-parent.json vom ersten Host auf den zweiten. </font><font style="vertical-align: inherit;">√ñffnen Sie dazu ein anderes Terminal aus dem Ordner, in dem sich unser Terminal </font></font><code>key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">befindet, und f√ºhren Sie die folgenden Befehle aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST1=ec2-18-232-164-119.compute-1.amazonaws.com<font></font>
HOST2=ec2-54-145-203-186.compute-1.amazonaws.com<font></font>
scp -i ./key-poc.pem -r ec2-user@$HOST1:~/network/poc-network/connection-parents.json ~<font></font>
scp -i ./key-poc.pem ~/connection-parents.json ec2-user@$HOST2:~/network/poc-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fix </font></font><code>exports.hostName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in constants.js (Wert f√ºr den aktuellen Host):</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/constants.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie unsere Anwendung im zweiten Terminal aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weisen Sie in der Datei userGenerator.sh </font></font><code>HOST_2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der </font><font style="vertical-align: inherit;">Variablen den </font><font style="vertical-align: inherit;">richtigen Wert zu:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/generators/userGenerator.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als N√§chstes m√ºssen Sie ein Skript ausf√ºhren, mit dem Benutzer der Elternorganisation erstellt werden:</font></font><br>
<br>
<pre><code class="plaintext hljs">./back/generators/userGenerator.sh parents
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie das Skript aus, um medizinische Aufzeichnungen zu generieren:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/setCards.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Blockchain werden zwei Karten erstellt, die auch in die SQL-Datenbank in der Kartentabelle geschrieben werden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krankenhaus R√ºckenanwendung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Analogie zur vorherigen Back-Anwendung m√ºssen wir die Datei platzieren, um eine Verbindung zum Netzwerk auf dem dritten Host herzustellen. </font><font style="vertical-align: inherit;">F√ºhren Sie dazu im f√ºnften Terminal Folgendes aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">scp -i ./key-poc.pem -r ec2-user@$HOST1:~/network/poc-network/connection-hospital.json ~<font></font>
scp -i ./key-poc.pem ~/connection-hospital.json ec2-user@$HOST3:~/network/poc-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden unsere Anwendung auf den dritten Host klonen:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-backend.git back<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie NodeJS und gcc-c ++ (Compiler):</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -<font></font>
sudo yum install nodejs<font></font>
cd back<font></font>
sudo yum install gcc-c++ -y<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fix </font></font><code>exports.hostName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in constants.js (Wert f√ºr den aktuellen Host):</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/constants.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie unsere Anwendung im dritten Terminal aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weisen Sie in der Datei userGenerator.sh </font></font><code>HOST_3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der </font><font style="vertical-align: inherit;">Variablen den </font><font style="vertical-align: inherit;">richtigen Wert zu:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/generators/userGenerator.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als N√§chstes m√ºssen wir ein Skript ausf√ºhren, mit dem Benutzer der Krankenhausorganisation erstellt werden:</font></font><br>
<br>
<pre><code class="plaintext hljs">./back/generators/userGenerator.sh hospital
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben jetzt einen zweiten Benutzer in der Benutzertabelle in der Datenbank.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kindergarten R√ºckenanwendung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Analogie zur vorherigen Back-Anwendung m√ºssen wir die Datei platzieren, um eine Verbindung zum Netzwerk auf dem dritten Host herzustellen. </font><font style="vertical-align: inherit;">F√ºhren Sie dazu im f√ºnften Terminal Folgendes aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">scp -i ./key-poc.pem -r ec2-user@$HOST1:~/network/poc-network/connection-kindergarten.json ~<font></font>
scp -i ./key-poc.pem ~/connection-kindergarten.json ec2-user@$HOST4:~/network/poc-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden unsere Anwendung auf den dritten Host klonen:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-backend.git back<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie NodeJS und Gcc-c ++ (Compiler):</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -<font></font>
sudo yum install nodejs<font></font>
cd back<font></font>
sudo yum install gcc-c++ -y<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fix </font></font><code>exports.hostName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in constants.js (Wert f√ºr den aktuellen Host):</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/constants.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie unsere Anwendung im dritten Terminal aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weisen Sie in der Datei userGenerator.sh </font></font><code>HOST_4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der </font><font style="vertical-align: inherit;">Variablen den </font><font style="vertical-align: inherit;">richtigen Wert zu:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/generators/userGenerator.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als N√§chstes m√ºssen wir ein Skript ausf√ºhren, mit dem Benutzer der Krankenhausorganisation erstellt werden:</font></font><br>
<br>
<pre><code class="plaintext hljs">./back/generators/userGenerator.sh kindergarten
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben jetzt einen dritten Benutzer in der Benutzertabelle in der Datenbank.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren Sie wkhtmltopdf auf dem zweiten, dritten und vierten EC2-Server</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die R√ºckanwendung verwendet die Bibliothek wkhtmltopdf, um einen PDF-Bericht √ºber den Gesundheitszustand des Kindes zu erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen libpng installieren - die offizielle Bibliothek f√ºr die Arbeit mit Rastergrafiken im PNG-Format. </font><font style="vertical-align: inherit;">Die Bibliothek ist plattformunabh√§ngig und besteht aus Funktionen, die in C-Sprache geschrieben sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Team wird wkhtmltox installieren - die Open-Source-LGPLv3-Bibliothek zum Rendern von HTML in PDF und verschiedenen Bildformaten mithilfe der QtWebKit-Rendering-Engine:</font></font><br>
<br>
<pre><code class="plaintext hljs">wget https://downloads.wkhtmltopdf.org/0.12/0.12.5/wkhtmltox-0.12.5-1.centos7.x86_64.rpm<font></font>
sudo yum install -y wkhtmltox-0.12.5-1.centos7.x86_64.rpm<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Befehlsblock l√§dt die libpng15-Bibliothek herunter und stellt sie bereit:</font></font><br>
<br>
<pre><code class="plaintext hljs">wget https://sourceforge.net/projects/libpng/files/libpng15/older-releases/1.5.15/libpng-1.5.15.tar.gz/download -O libpng-1.5.15.tar.gz<font></font>
tar -zxvf libpng-1.5.15.tar.gz<font></font>
cd libpng-1.5.15<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte Befehlsblock wird ben√∂tigt, um den Compiler zu installieren:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum groupinstall -y "Development Tools"<font></font>
./configure --prefix=/usr<font></font>
sudo make install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√ºssen LibTIFF noch installieren:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum install -y libtiff
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen testen:</font></font><br>
<br>
<pre><code class="plaintext hljs">wkhtmltopdf https://majestic.cloud majestic.pdf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie PDF-Dokumente erstellen und anzeigen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein bisschen √ºber Node SDK</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NodeJS-Tools f√ºr die Arbeit mit dem Hyperledger Fabric-Netzwerk werden in Form der Pakete "Fabric-Ca-Client -v 1.4.0" und "Fabric-Netzwerk" v 1.4.0 "dargestellt. </font><font style="vertical-align: inherit;">Alle Dienste der Backend-Anwendung, die √ºber das Node SDK mit dem Netzwerk interagieren, befinden sich im Ordner Dienste im Stammverzeichnis des Projekts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Informationen zu diesen Tools und ihren Methoden finden Sie in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offiziellen Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsgesch√§ftsprozesse</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden wir dar√ºber sprechen, wie Netzwerkmitglieder in dieser Anwendung miteinander interagieren. </font><font style="vertical-align: inherit;">Alle Prozesse werden in einem UML-Diagramm beschrieben. </font><font style="vertical-align: inherit;">Lassen Sie uns jeden von ihnen genauer betrachten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31f/484/89d/31f48489d84e6f301b105a4cff8b45c7.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb.5. Eine grafische Beschreibung der Gesch√§ftsprozesse in der Anwendung.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es gibt also mehrere Organisationen im Netzwerk: Eltern, Krankenhaus und Kindergarten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Mitglied der Eltern erstellt f√ºr zwei ihrer Kinder elektronische Gesundheitsakten. Diese Daten werden im Blockchain-Netzwerk gespeichert (und erg√§nzt). Als n√§chstes sendet der Elternteil eine Anfrage f√ºr eine Vereinbarung mit dem Kinderarzt, der seine Kinder bis zum Erreichen des Erwachsenenalters beobachtet (im Diagramm - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antrag auf Vereinbarung mit einem Arzt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Mitglied der Krankenhausorganisation unterzeichnet eine Vereinbarung (im Diagramm - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arzt unterzeichnet eine Vereinbarung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes sendet der Elternteil eine Anfrage an den Kindergarten mit der Bitte, sein Kind einzuschreiben (in der Abbildung - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anfrage an den Kindergarten, ein Kind aufzunehmen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/da3/cee/cf9da3ceedba087e53abef137fbe353b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 6. </font><font style="vertical-align: inherit;">Eine Seite mit einer Liste der verf√ºgbaren Bildungseinrichtungen im Konto der Eltern. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kindergarten sieht die Anfrage in der Liste der neuen Anfragen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7cd/d01/a8b/7cdd01a8bf99c9cf9d916eef519ff66b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 7. </font><font style="vertical-align: inherit;">Eine Seite mit einer Liste der Antr√§ge auf Zulassung zum pers√∂nlichen Konto der Bildungseinrichtung. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Kindergarten muss vor der Entscheidung √ºber die Aufnahme des Kindes sicherstellen, dass sein Gesundheitszustand zufriedenstellend ist. </font><font style="vertical-align: inherit;">Zu diesem Zweck sendet der Kindergarten eine Anfrage an die Klinik, in der dieses Kind beobachtet wird (im Diagramm - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anfrage zum Kindergesundheitsbericht</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Die Anfrage an den Kinderarzt wird automatisch ausgef√ºhrt, nachdem die Anfrage f√ºr die Zulassung zum Garten auf die Registerkarte "Akzeptiert" verschoben wurde.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff1/5af/d29/ff15afd292455ccf1a0e9cdc69315f4c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 8. </font><font style="vertical-align: inherit;">Eine Seite mit einer Liste der genehmigten Antr√§ge auf Zulassung zum pers√∂nlichen Konto der Bildungseinrichtung. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Kinderarzt sieht die Anfrage und generiert einen Bericht, der Daten zur Gesundheit des Kindes enth√§lt (im Diagramm - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kindergesundheitsbericht erstellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8be/1e6/1f2/8be1e61f2dbbd9e146259a5b3a11ffa2.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 9. </font><font style="vertical-align: inherit;">Eine Seite mit einer Liste von Antr√§gen zur Erstellung eines Berichts √ºber den Gesundheitszustand des Kindes im pers√∂nlichen Konto des Krankenhauses. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Elternteil sieht, dass der Kinderarzt einen Bericht erstellt hat:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06d/fe9/c40/06dfe9c403dfe790632d631c7a54e7b0.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 10. </font><font style="vertical-align: inherit;">Eine Seite im pers√∂nlichen Konto des Elternteils, auf der der Status von Berichten √ºber den Gesundheitszustand des Kindes angezeigt wird. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... und entscheidet √ºber die Gew√§hrung des Zugangs zur Vorschulerziehungseinrichtung zum Anzeigen und Herunterladen des Berichts (im Diagramm - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erlaubnis zum Anzeigen des Berichts erteilen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/35f/ed9/c86/35fed9c8680c84dda737f7acb6029afc.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 11. </font><font style="vertical-align: inherit;">Ein Popup-Fenster zur Auswahl einer Bildungseinrichtung, in der der generierte medizinische Bericht angezeigt werden kann. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úbergeordnete Klicks auf "Best√§tigen":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cf/00d/cb5/3cf00dcb54572c2b93b3f2af509d8245.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 12. </font><font style="vertical-align: inherit;">Benachrichtigung, dass die ausgew√§hlte Bildungseinrichtung die Erlaubnis erhalten hat, den medizinischen Bericht einzusehen. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Liste der Berichte in der Anwendung der Bildungseinrichtung werden Informationen angezeigt, dass der Bericht erstellt wurde und im PDF-Format angezeigt und heruntergeladen werden kann.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b6/a1a/ac2/2b6a1aac247da598bf28f434d0614616.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 13. </font><font style="vertical-align: inherit;">Link zum Herunterladen des Berichts im PDF-Format in der Zeile mit dem genehmigten Antrag. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist ein Bericht, den Sie in einem neuen Tab auf Ihrem Computer sehen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbb/94a/1e1/fbb94a1e19e8e0db4354d2cc60b6927e.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 14. </font><font style="vertical-align: inherit;">Ein von einem Krankenhausmitarbeiter erstellter Gesundheitsbericht.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen von Krankenakten und Vereinbarungen mit einem Kinderarzt, Unterzeichnen einer Vereinbarung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da die Anwendung eher dazu gedacht ist, die Bereitstellung des Netzwerks auf separaten EC2-Servern zu demonstrieren, werden wir einige Befehle aus den vorbereiteten Skripten ausf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erster EC2-Server:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/setCards.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben uns zuvor mit der Datenbank verbunden. </font><font style="vertical-align: inherit;">Nach dem Ausf√ºhren des Befehls werden zwei Eintr√§ge in der Kartentabelle angezeigt. </font><font style="vertical-align: inherit;">Au√üerdem wurden Informationen √ºber die medizinischen Daten dieser beiden Kinder in der Blockchain aufgezeichnet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von diesem EC2-Server aus m√ºssen wir eine Vereinbarung mit einem Kinderarzt treffen, der die Kinder beobachtet:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/createAgreement.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Vereinbarung muss nun von dem Benutzer unterzeichnet werden, den wir f√ºr die Organisation Hospital erstellt haben. </font><font style="vertical-align: inherit;">Wir f√ºhren den Befehl vom zweiten Host aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/signAgreement.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Vereinbarung wird vom Arzt unterzeichnet und wir k√∂nnen weiter an unserer Bewerbung arbeiten. </font><font style="vertical-align: inherit;">Als n√§chstes m√ºssen wir die Frontend-Anwendung auf dem zweiten, dritten und vierten EC2-Server installieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Sie finden alle Befehle zum Generieren von Benutzern, Karten, Vereinbarungen und Signieren von Vereinbarungen im Ordner ~ / back / generators.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eltern-Frontend-Anwendung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie auf dem zweiten Host aus (auf dem sich die Elternorganisation befindet):</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-frontend.git front<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen die .env-Datei und geben den Hostnamen an, auf dem sich unsere Frontend-Anwendung befindet:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~ /front/.env:
</code></pre><br>
<br>
<pre><code class="plaintext hljs">VUE_APP_API_BASE_URL='http://ec2-107-22-75-46.compute-1.amazonaws.com:3006/'
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist notwendig, die Abh√§ngigkeiten festzustellen:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd front<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√ºssen die Anwendung auch erstellen und auf Port 8080 ausf√ºhren:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker build . -t my-app<font></font>
docker run -d -p 8080:80 my-app<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Anwendung ist verf√ºgbar unter: </font></font><code>http://&lt;HOST_2&gt;:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo </font></font><code>&lt;HOST_2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die Adresse des zweiten EC2-Servers, auf dem sich unsere Anwendung befindet? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Login: </font></font><code>parents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passwort : </font></font><code>password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So wird das Frontend aussehen. </font><font style="vertical-align: inherit;">Hier sehen Sie Informationen zu den medizinischen Karten, die wir vom Terminal erstellt haben:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/409/71a/2dd/40971a2dde54cabe268936b96d0a3618.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 15. </font><font style="vertical-align: inherit;">Informationen zu den Krankenakten von Kindern im pers√∂nlichen Konto des Elternteils.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krankenhaus-Frontend-Anwendung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie den zweiten Host aus (auf dem sich die Krankenhausorganisation befindet):</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-frontend.git front<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen die .env-Datei und geben den Hostnamen an, auf dem sich unsere Frontend-Anwendung befindet:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~ /front/.env:
</code></pre><br>
<br>
<pre><code class="plaintext hljs">VUE_APP_API_BASE_URL='http://ec2-3-91-238-161.compute-1.amazonaws.com:3006/'
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist notwendig, die Abh√§ngigkeiten festzustellen:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd front<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√ºssen die Anwendung auch erstellen und auf Port 8080 ausf√ºhren:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker build . -t my-app<font></font>
docker run -d -p 8080:80 my-app<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Anwendung ist verf√ºgbar unter: </font></font><code>http://&lt;HOST_3&gt;:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo </font></font><code>&lt;HOST_3&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die Adresse des dritten EC2-Servers? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Login: </font></font><code>hospital</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passwort : </font></font><code>password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kindergarten-Frontend-Anwendung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laufen Sie auf dem zweiten Host (wo sich die Kindergartenorganisation befindet):</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-frontend.git front<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen die .env-Datei und geben den Hostnamen an, auf dem sich unsere Frontend-Anwendung befindet:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~ /front/.env:
</code></pre><br>
<br>
<pre><code class="plaintext hljs">VUE_APP_API_BASE_URL='http://ec2-107-22-12-137.compute-1.amazonaws.com:3006/'
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist notwendig, die Abh√§ngigkeiten festzustellen:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd front<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√ºssen die Anwendung auch erstellen und auf Port 8080 ausf√ºhren:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker build . -t my-app<font></font>
docker run -d -p 8080:80 my-app<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Anwendung ist verf√ºgbar unter: </font></font><code>http://&lt;HOST_4&gt;:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo </font></font><code>&lt;HOST_4&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die Adresse des vierten EC2-Servers? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Login: </font></font><code>kindergarten</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passwort : </font></font><code>password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben untersucht, wie ein Netzwerk von Blockchain-Anwendungen auf mehreren virtuellen oder physischen Servern bereitgestellt wird. </font><font style="vertical-align: inherit;">Der Artikel soll sicherstellen, dass Sie mit den Grundlagen der Blockchain-Technologie vertraut sind, wissen, was intelligente Vertr√§ge sind, und zumindest oberfl√§chlich mit dem Hyperledger Fabric-Framework und seiner Standardanwendung f√ºr Fabric-Beispiele vertraut sind.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de499202/index.html">Opium.Fill - Standardisierung des Farbschemas mit den Augen des Programmierers</a></li>
<li><a href="../de499206/index.html">Virtuelle Assistenten. Chatbots ohne Programmierung erstellen</a></li>
<li><a href="../de499208/index.html">Digitale Veranstaltungen in Moskau vom 27. April bis 3. Mai</a></li>
<li><a href="../de499210/index.html">Digitale Veranstaltungen in St. Petersburg vom 27. April bis 3. Mai</a></li>
<li><a href="../de499212/index.html">IBM w√∂chentliche Seminare - April 2020</a></li>
<li><a href="../de499216/index.html">Design auf Systemebene. Teil 2. Detaillierte Architektur</a></li>
<li><a href="../de499220/index.html">Das √úbertragen von Entwicklern auf einen Remote-Standort aufgrund von Coronavirus erh√∂hte die Produktivit√§t in Google und Microsoft</a></li>
<li><a href="../de499224/index.html">Es ist Zeit, richtig zu lernen</a></li>
<li><a href="../de499226/index.html">Keine Pandemie: Wie man einen Film √ºber Kryptow√§hrung f√ºr 1000 US-Dollar macht und in die Top-US-Filmdistribution einsteigt</a></li>
<li><a href="../de499230/index.html">So z√ºchten Sie einen gesunden, zufriedenen Wurm: Analysieren des Handbuchs von 1910</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>