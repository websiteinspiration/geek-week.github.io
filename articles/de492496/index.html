<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🔬 😫 👆🏻 Beispiel für ein Simple Notes SPA unter Mithril.js 🤘 🔸 📚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mithril.js ist ein unbeliebtes Tool zum Erstellen von Client-Webanwendungen. Zu diesem Thema gibt es praktisch keine Veröffentlichungen zu Habré. In d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Beispiel für ein Simple Notes SPA unter Mithril.js</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492496/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mithril.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein unbeliebtes Tool zum </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Erstellen von</font></a><font style="vertical-align: inherit;"> Client-Webanwendungen. </font><font style="vertical-align: inherit;">Zu diesem Thema gibt es praktisch keine Veröffentlichungen zu Habré. </font><font style="vertical-align: inherit;">In diesem Beitrag möchte ich zeigen, wie Sie eine kleine Anwendung auf Mithril erstellen können. </font><font style="vertical-align: inherit;">Der Antrag basiert auf dieser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Veröffentlichung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übersetzung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist Mihtril?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mithril ist ein reaktives Framework zur Erstellung von SPA (Single-Page-Webanwendungen). Alles in allem ist es nur Javascript und 13 Signaturen von API-Funktionen. Darüber hinaus gibt es eine Mithril-Stream-Bibliothek, die nicht in Mithril enthalten ist und separat verwendet wird. Der Kern von Mithril umfasst das Weiterleiten der Anwendung und das Arbeiten mit XHR-Anforderungen. Das zentrale Konzept ist die Abstraktion - ein virtueller Knoten (vnode). Ein virtueller Knoten ist nur ein js-Objekt mit einigen Attributen. Virtuelle Knoten werden mit der Sonderfunktion m () erstellt. Der aktuelle Status der Schnittstelle wird in einer Liste virtueller Knoten (virtuelles DOM) gespeichert. Beim ersten Rendern der Anwendungsseite wird das virtuelle DOM in das DOM übersetzt. Wenn der DOM-API-Ereignishandler gestartet wird, wenn das Versprechen m.request () erfüllt ist und wenn sich die URL ändert (Navigation entlang der Anwendungsrouten), wird ein neues virtuelles DOM-Array generiert.vergleicht mit dem alten, und die geänderten Knoten ändern das Browser-DOM. Zusätzlich zu DOM-Ereignissen und dem Abschluss der Anforderung m.request () kann das Neuzeichnen mit der Funktion m.redraw () manuell aufgerufen werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt keine HTML-ähnlichen Vorlagen in Mithril, es gibt keine JSX-Unterstützung, obwohl Sie all dies mit verschiedenen Plugins verwenden können, um sie zu erstellen, wenn Sie dies wünschen. Ich werde diese Möglichkeiten hier nicht nutzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das erste Argument für m () eine Zeichenfolge ist (z. B. 'div'), gibt die Funktion einen einfachen virtuellen Knoten zurück und als Ergebnis wird ein HTML-Tag im DOM angezeigt</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das erste Argument für m () das Objekt oder die Funktion ist, die das Objekt zurückgibt, muss ein solches Objekt eine view () -Methode haben, und ein solches Objekt wird als Komponente bezeichnet. Die view () -Methode der Komponente sollte wiederum immer die Funktion m () (oder ein Array vom Typ [m (),]) zurückgeben. Auf diese Weise können wir eine Hierarchie von Komponentenobjekten erstellen. Und es ist klar, dass letztendlich alle Komponenten einfache vnode-Knoten zurückgeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sowohl virtuelle Knoten als auch Komponenten verfügen über Lebenszyklusmethoden und werden als oninit (), oncreate (), onbeforeupdate () usw. bezeichnet. Jede dieser Methoden wird zu einem bestimmten Zeitpunkt beim Rendern der Seite aufgerufen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können Parameter als Objekt an den virtuellen Knoten oder die virtuelle Komponente übergeben. Dies sollte das zweite Argument für die Funktion m () sein. Sie können einen Link zu diesem Objekt innerhalb des Knotens mit der Notation vnode.attrs erhalten. Das dritte Argument für die Funktion m () sind die Nachkommen dieses Knotens und können über den Link vnode.children aufgerufen werden. Zusätzlich zur Funktion m () werden einfache Knoten von der Funktion m.trust () zurückgegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Autor von Mithril bietet keine speziellen Muster für das Anwendungsdesign an, empfiehlt jedoch, einige erfolglose Lösungen zu vermeiden, z. B. „zu dicke“ Komponenten oder die Manipulation der Nachkommen des Komponentenbaums. Der Autor bietet auch keine speziellen Möglichkeiten oder Methoden an, um den Status der Anwendung als Ganzes oder der Komponenten zu steuern. Obwohl in der Dokumentation angegeben ist, dass Sie den Status des Knotens selbst nicht verwenden sollten, bearbeiten Sie ihn.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle diese Funktionen von Mithril scheinen sehr unpraktisch zu sein, und das Framework scheint noch nicht fertig zu sein. Es gibt keine speziellen Empfehlungen, es gibt keinen Status / Speicher, es gibt keinen Reduzierer / Ereignis-Dispatcher, keine Vorlagen. </font><font style="vertical-align: inherit;">Tun Sie im Allgemeinen, was Sie können.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was Sie für ein Beispiel brauchen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden verwenden:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mithril.js Version 2.0.4</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS-Bibliothek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pure.css</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Version 1.0.1</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fontawesome v5.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für Symbole</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rollup.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Version 1.32 zum </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Erstellen</font></a><font style="vertical-align: inherit;"> der Anwendung</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgREST</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Version 5.2.0 als Backend-REST-Server</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgresql Version 9.6 oder höher als Datenbank.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Frontend-Server ist hier nicht wichtig, er muss lediglich den Client index.html sowie Skript- und Stildateien angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden mithril nicht in node_modules installieren und den Anwendungscode und das Framework in einer Datei binden. </font><font style="vertical-align: inherit;">Der Anwendungscode und Mithril werden separat auf die Seite hochgeladen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde den Installationsvorgang für die Tools nicht beschreiben, obwohl ich über postgREST sagen kann. Laden Sie einfach die Binärdatei herunter, legen Sie sie in einem separaten Ordner ab und erstellen Sie eine Konfigurationsdatei test.conf wie folgt:</font></font><br>
<br>
<pre><code class="plaintext hljs">db-uri = "postgres://postgres:user1@localhost:5432/testbase"<font></font>
server-port= 5000<font></font>
# The name of which database schema to expose to REST clients<font></font>
db-schema= "public"<font></font>
# The database role to use when no client authentication is provided.<font></font>
# Can (and probably should) differ from user in db-uri<font></font>
db-anon-role = "postgres" </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig sollte Ihr postgesql-Cluster eine Testbasis und user1 haben. </font><font style="vertical-align: inherit;">Erstellen Sie in dieser Testbasis eine Tabelle:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">-- Postgrest sql notes table </span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> notes (
<span class="hljs-keyword">id</span> <span class="hljs-built_in">serial</span> primary <span class="hljs-keyword">key</span>,<font></font>
title <span class="hljs-built_in">varchar</span>(<span class="hljs-number">127</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
<span class="hljs-keyword">content</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,<font></font>
created <span class="hljs-built_in">timestamp</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CURRENT_TIMESTAMP</span>,<font></font>
completed <span class="hljs-built_in">timestamp</span> <span class="hljs-keyword">with</span> <span class="hljs-built_in">time</span> zone,<font></font>
ddel <span class="hljs-built_in">smallint</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Starten des postgREST-Servers erfolgt mit dem folgenden Befehl:</font></font><br>
<br>
<pre><code class="bash hljs">postgrest test.conf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Starten des Servers werden Informationsmeldungen zum Herstellen einer Verbindung zur Datenbank und zum Port, an dem die Clients abgehört werden, angezeigt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Projekt planen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie also genau wissen, wie Mitril funktioniert, müssen Sie herausfinden, wie die Anwendung erstellt wird. </font><font style="vertical-align: inherit;">Hier ist der Plan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir werden Anwendungsdaten in einem lokalen Objekt speichern, nennen wir sein Modell</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API-Anwendungen werden in einer separaten Datei gespeichert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir werden Anwendungsrouten in einer separaten Datei speichern</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Pfaddatei ist der Einstiegspunkt für die Erstellung der Anwendung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede einzelne Komponente (und ich werde das Komponenten-Rendering-Schema verwenden) und die damit verbundenen Funktionen werden in einer separaten Datei gespeichert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede Komponente, die Modelldaten rendert, hat Zugriff auf das Modell.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponenten-DOM-Ereignishandler sind in der Komponente lokalisiert</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher benötigen wir keine benutzerdefinierten Ereignisse, sondern native DOM-Ereignisse. Rückrufe für diese Ereignisse sind in den Komponenten lokalisiert. </font><font style="vertical-align: inherit;">Ich werde Zwei-Wege-Bindung verwenden. </font><font style="vertical-align: inherit;">Vielleicht mag nicht jeder diesen Ansatz, aber nicht jeder mag Redux oder Vuex. </font><font style="vertical-align: inherit;">Darüber hinaus kann die Einwegbindungstechnik auch in Mitril unter Verwendung von Mithril-Sream elegant implementiert werden. </font><font style="vertical-align: inherit;">In diesem Fall ist dies jedoch eine redundante Lösung.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Struktur des Anwendungsordners</font></font></h3><br>
<img src="https://habrastorage.org/webt/yp/uy/fa/ypuyfap4tlxl_ccqo86wbtb9h98.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der öffentliche Ordner wird vom Frontserver bereitgestellt, es gibt eine index.html-Datei und Verzeichnisse mit Stilen und Skripten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Ordner src enthält das Stammverzeichnis des Routers und die API-Definition sowie zwei Verzeichnisse für das Modell und die Ansichten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Stammverzeichnis des Projekts befindet sich eine Konfigurationsdatei rollup.config, und das Projekt wird mit dem folgenden Befehl erstellt:</font></font><br>
<br>
<pre><code class="bash hljs">rollup –c</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Leser nicht mit den langen Codestücken zu langweilen, die auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verfügbar sind </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">, werde</font></a><font style="vertical-align: inherit;"> ich nur die wichtigsten Implementierungselemente kommentieren, um einen idiomatischen Ansatz für Mitral zu demonstrieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API und Router</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
API-Code:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// used by backend server</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> restApi= {
  <span class="hljs-attr">notes</span>: { <span class="hljs-attr">url</span>: <span class="hljs-string">'notes'</span>, <span class="hljs-attr">editable</span>: [<span class="hljs-string">'add'</span>, <span class="hljs-string">'edit'</span>, <span class="hljs-string">'del'</span>] }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// used by routers</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> appApi = {
  <span class="hljs-attr">root</span>: <span class="hljs-string">"/"</span>,<font></font>
}<font></font>
<span class="hljs-comment">// used by navBar</span>
<span class="hljs-comment">// here array of arrays though it may be hash eg</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> appMenu = [<font></font>
  [<span class="hljs-string">`<span class="hljs-subst">${appApi.root}</span>`</span>, <span class="hljs-string">'Home'</span>],<font></font>
  [<span class="hljs-string">`<span class="hljs-subst">${appApi.root}</span>`</span>, <span class="hljs-string">'About'</span>],<font></font>
  [<span class="hljs-string">`<span class="hljs-subst">${appApi.root}</span>`</span>, <span class="hljs-string">'Contacts'</span>],<font></font>
]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe eine API für den REST-Server und für den Router definiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Router:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { restApi, appApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./appApi'</span>;
<span class="hljs-keyword">import</span> { moModel } <span class="hljs-keyword">from</span> <span class="hljs-string">'./model/moModel'</span>;
<span class="hljs-keyword">import</span> { vuView, vuApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'./view/vuApp'</span>;
<span class="hljs-keyword">import</span> { vuNavBar } <span class="hljs-keyword">from</span> <span class="hljs-string">'./view/vuNavBar'</span>;<font></font>
<font></font>
<span class="hljs-comment">// application router</span>
<span class="hljs-keyword">const</span> appRouter = { [appApi.root]: {<font></font>
  render() {<font></font>
    <span class="hljs-keyword">const</span> view = m(vuApp, {
      <span class="hljs-attr">model</span>: moModel.getModel( restApi.notes ),<font></font>
    });<font></font>
    <span class="hljs-keyword">return</span> vuView( {<span class="hljs-attr">menu</span>: vuNavBar}, view);<font></font>
  }<font></font>
}};<font></font>
<font></font>
<span class="hljs-comment">// once per app</span>
m.route(<span class="hljs-built_in">document</span>.body, <span class="hljs-string">"/"</span>, appRouter);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der Router am Dokumentkörper montiert. </font><font style="vertical-align: inherit;">Der Router selbst ist ein Objekt, das die Routen und Komponenten beschreibt, die auf dieser Route verwendet werden. Die Funktion render () sollte vnode zurückgeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das appApi-Objekt definiert alle gültigen Anwendungsrouten und das appMenu-Objekt definiert alle möglichen Navigationselemente für die Anwendung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Renderfunktion generiert beim Aufruf ein Anwendungsmodell und übergibt es an den Stammknoten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsmodell</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Struktur, in der relevante Daten gespeichert sind, habe ich als Modell bezeichnet. </font><font style="vertical-align: inherit;">Der Quellcode der Funktion, die das Modell zurückgibt:</font></font><br>
<br>
<pre><code class="javascript hljs">getModel(<font></font>
    {url=<span class="hljs-literal">null</span>, method=<span class="hljs-string">"GET"</span>, order_by=<span class="hljs-string">'id'</span>, editable=<span class="hljs-literal">null</span>} = {}<font></font>
  ) {<font></font>
<span class="hljs-comment">/**
  * url - string of model's REST API url
  * method - string of model's REST method
  * order_by - string "order by" with initially SELECT 
  * editable - array defines is model could changed
*/</span>
    <span class="hljs-keyword">const</span> model = {
      <span class="hljs-attr">url</span>: url,
      <span class="hljs-attr">method</span>: method,
      <span class="hljs-attr">order_by</span>: order_by,
      <span class="hljs-attr">editable</span>: editable,
      <span class="hljs-attr">key</span>: order_by, <span class="hljs-comment">// here single primary key only</span>
      <span class="hljs-attr">list</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// main data list </span>
      <span class="hljs-attr">item</span>: {}, <span class="hljs-comment">// note item</span>
      <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Promise error</span>
      <span class="hljs-attr">save</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// save status</span>
      <span class="hljs-attr">editMode</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// view switch flag</span>
      <span class="hljs-attr">word</span>: <span class="hljs-string">''</span> <span class="hljs-comment">// dialog header word</span><font></font>
    };  <font></font>
    model.getItem= <span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> {<font></font>
      model.item= {};<font></font>
      <span class="hljs-keyword">if</span> ( !id ) {<font></font>
        model.editMode= <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">const</span> key= model.key;
      <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> it <span class="hljs-keyword">of</span> model.list ) {
        <span class="hljs-keyword">if</span> (it[key] == id) {<font></font>
          model.item= <span class="hljs-built_in">Object</span>.assign({}, it);
          <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    };<font></font>
    <span class="hljs-keyword">return</span> model;<font></font>
  },</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Hier wird es initialisiert und das Modellobjekt zurückgegeben. </font><font style="vertical-align: inherit;">Die Verknüpfungen innerhalb des Objekts können sich ändern, die Verknüpfung zum Objekt selbst bleibt jedoch konstant. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zur Funktion getModel verfügt das globale moModel-Objekt über Wrapper-Funktionen für die Mitry-Funktion m.request (). Dies sind getList (Modell) und formSubmit (Ereignis, Modell, Methode). </font><font style="vertical-align: inherit;">Der Modellparameter ist tatsächlich eine Referenz auf das Modellobjekt. Ereignis ist das Ereignisobjekt, das beim Senden des Formulars generiert wird. Methode ist die HTTP-Methode, mit der die Notiz gespeichert werden soll (POST ist eine neue Notiz, PATCH, DELETE ist alt).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Darstellung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Ansichtsordner enthält Funktionen, die für das Rendern einzelner Seitenelemente verantwortlich sind. </font><font style="vertical-align: inherit;">Ich habe sie in 4 Teile geteilt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuApp - die Stammkomponente der Anwendung, </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuNavBar - Navigationsleiste,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuNotes - eine Liste von Notizen,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuNoteForm - Notizbearbeitungsformular,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuDialog - HTML-Dialogelement </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Router bestimmt, dass vuView (Menü, Ansicht) auf einer einzelnen Route zurückgegeben wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Definition dieser Funktion:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> vuView= <span class="hljs-function">(<span class="hljs-params">appMenu, view</span>)=&gt;</span> m(vuMain, appMenu, view);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist nur ein Wrapper, der die vuMain-Komponente zurückgibt. Wenn das appMenu-Objekt komplex genug ist, um verschachtelte Objekte in einer Struktur ähnlich einem externen Objekt zu haben, ist ein solcher Wrapper eine geeignete Möglichkeit, eine Komponente mit verschiedenen Navigationselementen und untergeordneten Komponenten zurückzugeben (Sie müssen nur weniger Code schreiben). . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VuMain-Komponente:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> vuMain= <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ivnode</span>) </span>{
  <span class="hljs-comment">// We use ivnode as argument as it is initial vnode</span>
  <span class="hljs-keyword">const</span> { menu }= ivnode.attrs;
  <span class="hljs-keyword">return</span> { view(vnode) {
    <span class="hljs-comment">// IMPORTANT !</span>
    <span class="hljs-comment">// If we use vnode inside the view function we MUST provide it for view</span>
    <span class="hljs-keyword">return</span> [<font></font>
      m(menu),<font></font>
      m(<span class="hljs-string">'#layout'</span>, vnode.children)<font></font>
    ];<font></font>
  }};<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies gibt einfach die vnodes der Navigation und den tatsächlichen Inhalt der Seite zurück. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Folgenden, wo es möglich ist, eine Komponente zu definieren, werde ich Verschlüsse verwenden. </font><font style="vertical-align: inherit;">Closures werden beim ersten Rendern der Seite einmal aufgerufen und speichern lokal alle übergebenen Links zu Objekten und Definitionen ihrer eigenen Funktionen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Schließen als Definition sollte immer eine Komponente zurückgeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und eigentlich die Anwendungsinhaltskomponente:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> vuApp= <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ivnode</span>) </span>{
  <span class="hljs-keyword">const</span> { model }= ivnode.attrs;
  <span class="hljs-comment">//initially get notes</span><font></font>
  moModel.getList( model );<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> { view() { 
    <span class="hljs-keyword">return</span> [<font></font>
      m(vuNotes, { model }),<font></font>
      m(vuNoteForm, { model }),<font></font>
      vuModalDialog(model)<font></font>
    ];<font></font>
  }};<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir bereits ein Modell haben, möchte ich beim Aufrufen eines Abschlusses die gesamte Liste der Notizen aus der Datenbank abrufen. </font><font style="vertical-align: inherit;">Die Seite enthält drei Komponenten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuNotes - eine Liste von Notizen mit der Schaltfläche Hinzufügen,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuNoteForm - Notizbearbeitungsformular,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vuModalDialog - ein Dialogelement, das wir modal anzeigen und bei Bedarf zuschlagen. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da jede dieser Komponenten wissen muss, wie man sich selbst zeichnet, übergeben wir jeweils eine Verknüpfung zum Modellobjekt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komponentennotizliste:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//Notes List</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> vuNotes= <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ivnode</span>) </span>{
  <span class="hljs-keyword">const</span> { model }= ivnode.attrs;
  <span class="hljs-keyword">const</span> _display= <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> model.editMode ? <span class="hljs-string">'display:none'</span>: <span class="hljs-string">'display:block'</span>;
  <span class="hljs-keyword">const</span> vuNote= noteItem(model); <span class="hljs-comment">// returns note function</span><font></font>
  <font></font>
  <span class="hljs-keyword">return</span> { view() {
    <span class="hljs-keyword">return</span> model.error ? m(<span class="hljs-string">'h2'</span>, {<span class="hljs-attr">style</span>: <span class="hljs-string">'color:red'</span>}, model.error) :<font></font>
    !model.list ? m(<span class="hljs-string">'h1'</span>, <span class="hljs-string">'...LOADING'</span> ) :<font></font>
    m(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">style</span>: _display() }, [<font></font>
      m(addButton , { model } ),<font></font>
      m(<span class="hljs-string">'.pure-g'</span>, m(<span class="hljs-string">'.pure-u-1-2.pure-u-md-1-1'</span>,<font></font>
        m(<span class="hljs-string">'.notes'</span>, model.list.map( vuNote ) )<font></font>
      ))<font></font>
    ]);<font></font>
  }};<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das bool editMode-Flag wird im Modellobjekt gespeichert. Wenn der Flag-Wert true ist, wird das Bearbeitungsformular angezeigt, andernfalls eine Liste mit Notizen. </font><font style="vertical-align: inherit;">Sie können die Prüfung um eine Stufe höher erhöhen, aber dann würde sich die Anzahl der virtuellen Knoten und der DOM-Knoten selbst jedes Mal ändern, wenn das Flag gewechselt wird, und dies ist unnötige Arbeit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind wir idiomatisch für Mitril. Wir generieren eine Seite und überprüfen das Vorhandensein oder Fehlen von Attributen im Modell mithilfe ternärer Operatoren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der Abschluss, der die Notenanzeigefunktion zurückgibt:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> noteItem= <span class="hljs-function"><span class="hljs-params">model</span>=&gt;</span> {
  <span class="hljs-comment">// click event handler</span>
  <span class="hljs-keyword">const</span> event= <span class="hljs-function">(<span class="hljs-params"> msg, word=<span class="hljs-string">''</span>, time=<span class="hljs-literal">null</span></span>)=&gt;</span> <span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span> {<font></font>
    model.getItem(e.target.getAttribute(<span class="hljs-string">'data'</span>));
    <span class="hljs-keyword">if</span> ( !!msg ) {<font></font>
      model.save= { <span class="hljs-attr">err</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">msg</span>: msg };<font></font>
      model.word= word;<font></font>
      <span class="hljs-keyword">if</span> ( !!time )<font></font>
        model.item.completed= time;<font></font>
      vuDialog.open();<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      model.editMode= <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
  };<font></font>
  <span class="hljs-comment">// trash icon's click handler</span>
  <span class="hljs-keyword">const</span> _trash= event(<span class="hljs-string">'trash'</span>, <span class="hljs-string">'Dlelete'</span>);<font></font>
  <font></font>
  <span class="hljs-comment">// check icon's click handler</span>
  <span class="hljs-keyword">const</span> _check= event(<span class="hljs-string">'check'</span>, <span class="hljs-string">'Complete'</span>,
    <span class="hljs-comment">// postgre timestamp string</span>
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString().split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>].replace(<span class="hljs-string">'T'</span>, <span class="hljs-string">' '</span>));<font></font>
  <font></font>
  <span class="hljs-comment">// edit this note</span>
  <span class="hljs-keyword">const</span> _edit= event(<span class="hljs-string">''</span>);<font></font>
  <font></font>
  <span class="hljs-keyword">const</span> _time= <span class="hljs-function"><span class="hljs-params">ts</span>=&gt;</span> ts.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>];<font></font>
  <font></font>
  <span class="hljs-comment">// Single Note </span>
  <span class="hljs-keyword">const</span> _note= <span class="hljs-function"><span class="hljs-params">note</span>=&gt;</span> m(<span class="hljs-string">'section.note'</span>, {<span class="hljs-attr">key</span>: note.id}, [<font></font>
    m(<span class="hljs-string">'header.note-header'</span>, [ m(<span class="hljs-string">'p.note-meta'</span>, [
      <span class="hljs-comment">// note metadata</span>
      m(<span class="hljs-string">'span'</span>, { <span class="hljs-attr">style</span>: <span class="hljs-string">'padding: right: 3em'</span> }, <span class="hljs-string">`Created: <span class="hljs-subst">${_time( note.created )}</span>`</span>),<font></font>
      note.completed ? m(<span class="hljs-string">'span'</span>, <span class="hljs-string">`  Completed: <span class="hljs-subst">${_time( note.completed )}</span>`</span>) : <span class="hljs-string">''</span>, 
      <span class="hljs-comment">// note right panel </span>
      m(<span class="hljs-string">'a.note-pan'</span>, m(<span class="hljs-string">'i.fas.fa-trash'</span>, { <span class="hljs-attr">data</span>: note.id, <span class="hljs-attr">onclick</span>: _trash } )),<font></font>
      note.completed ? <span class="hljs-string">''</span> : [<font></font>
        m(<span class="hljs-string">'a.note-pan'</span>, m(<span class="hljs-string">'i.fas.fa-pen'</span>, {<span class="hljs-attr">data</span>: note.id, <span class="hljs-attr">onclick</span>: _edit } )),<font></font>
        m(<span class="hljs-string">'a.note-pan'</span>, m(<span class="hljs-string">'i.fas.fa-check'</span>, { <span class="hljs-attr">data</span>: note.id, <span class="hljs-attr">onclick</span>: _check} ))<font></font>
      ]<font></font>
    ]),<font></font>
      m(<span class="hljs-string">'h2.note-title'</span>, { <span class="hljs-attr">style</span>: note.completed ? <span class="hljs-string">'text-decoration: line-through'</span>: <span class="hljs-string">''</span>}, note.title)<font></font>
    ]),<font></font>
    m(<span class="hljs-string">'.note-content'</span>, m(<span class="hljs-string">'p'</span>, note.content))<font></font>
  ]);<font></font>
  <span class="hljs-keyword">return</span> _note;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Klick-Handler werden lokal definiert. Das Modell weiß nicht, wie das Notizobjekt aufgebaut ist. Ich habe nur die Schlüsseleigenschaft definiert, mit der wir das gewünschte Element aus dem Array model.list auswählen können. Die Komponente muss jedoch genau wissen, wie das von ihr gezeichnete Objekt strukturiert ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde nicht den vollständigen Text des Codes für das Formular zum Bearbeiten der Notiz angeben. Wir betrachten den Formularübermittlungs-Handler nur separat:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// form submit handler</span>
  <span class="hljs-keyword">const</span> _submit= <span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    model.item.title= clean(model.item.title);<font></font>
    model.item.content= clean(model.item.content);<font></font>
    <span class="hljs-keyword">const</span> check= check_note(model.item);
    <span class="hljs-keyword">if</span> ( !!check ) {<font></font>
      model.save= { <span class="hljs-attr">err</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">msg</span>: check }; <font></font>
      model.word= <span class="hljs-string">'Edit'</span>;<font></font>
      vuDialog.open();<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    } <font></font>
    <span class="hljs-keyword">return</span> moModel.formSubmit(e, model, _method() ).then(
      <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> { model.editMode=<span class="hljs-literal">false</span>; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;}).catch(
      <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> { vuDialog.open(); <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; } );<font></font>
  };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Da die Definition im Abschluss erfolgt, haben wir einen Link zum Modell und geben ein Versprechen mit der anschließenden Verarbeitung des Ergebnisses zurück: das Verbot, das Formular anzuzeigen, wenn die Anforderung normal abgeschlossen ist, oder im Fehlerfall - Öffnen eines Dialogs mit dem Fehlertext. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei jedem Zugriff auf den Backend-Server wird die Liste der Notizen erneut gelesen. </font><font style="vertical-align: inherit;">In diesem Beispiel muss die Liste im Speicher nicht angepasst werden, obwohl dies möglich ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Dialogkomponente kann im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> angezeigt </font><font style="vertical-align: inherit;">werden. Das einzige, was hervorgehoben werden muss, ist, dass ich in diesem Fall ein Objektliteral zum Definieren der Komponente verwendet habe, da die Funktionen zum Öffnen und Schließen von Fenstern für andere Komponenten verfügbar sein sollen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben eine kleine SPA-Anwendung in Javascript und mithril.js geschrieben und versucht, uns an die Redewendungen dieses Frameworks zu halten. </font><font style="vertical-align: inherit;">Ich möchte noch einmal darauf achten, dass dies nur Javascript-Code ist. </font><font style="vertical-align: inherit;">Vielleicht nicht ganz sauber. </font><font style="vertical-align: inherit;">Mit diesem Ansatz können Sie kleine Codeteile kapseln, die Mechanik einer Komponente isolieren und für alle Komponenten einen gemeinsamen Status verwenden.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492482/index.html">Digitale Veranstaltungen in Moskau vom 16. bis 22. März</a></li>
<li><a href="../de492484/index.html">Digitale Veranstaltungen in St. Petersburg vom 16. bis 22. März</a></li>
<li><a href="../de492486/index.html">Zum Beispiel Nuxt + Django + GraphQL</a></li>
<li><a href="../de492488/index.html">OpenID Connect: Autorisierung interner Anwendungen von generisch zu standard</a></li>
<li><a href="../de492492/index.html">NikiRobot - eine Weiterentwicklung der pädagogischen Robotik</a></li>
<li><a href="../de492500/index.html">Wissenschaftsgarage auf Russisch. Erleben Sie die Übersetzung einer amerikanischen Show</a></li>
<li><a href="../de492502/index.html">MIP * = RE: epochale Beweise aus dem Bereich der Informatik, die den Dominoeffekt in Physik und Mathematik verursacht haben</a></li>
<li><a href="../de492504/index.html">Was passiert, wenn ein JS-Modul zweimal importiert wird?</a></li>
<li><a href="../de492506/index.html">3 Möglichkeiten, große Listen in Angular zu rendern</a></li>
<li><a href="../de492508/index.html">Buchen Sie Kubernetes für DevOps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>