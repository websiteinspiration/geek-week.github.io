<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙅 🈶 🌜 Docker Compose: Mit Makefile vereinfachen 💭 🧗🏼 🤱🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alle paar Jahre findet in der Softwareentwicklungsbranche ein Paradigmenwechsel statt. Eines dieser Phänomene ist das wachsende Interesse am Konzept d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Docker Compose: Mit Makefile vereinfachen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/486682/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle paar Jahre findet in der Softwareentwicklungsbranche ein Paradigmenwechsel statt. </font><font style="vertical-align: inherit;">Eines dieser Phänomene ist das wachsende Interesse am Konzept der Mikrodienste. </font><font style="vertical-align: inherit;">Obwohl Microservices nicht die neueste Technologie sind, ist ihre Popularität erst in letzter Zeit buchstäblich in die Höhe geschossen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Große monolithische Dienste werden heutzutage durch unabhängige autonome Mikrodienste ersetzt. </font><font style="vertical-align: inherit;">Ein Microservice kann als eine Anwendung betrachtet werden, die einem einzigen und sehr spezifischen Zweck dient. </font><font style="vertical-align: inherit;">Beispielsweise kann es sich um ein relationales DBMS, eine Express-Anwendung oder einen Solr-Dienst handeln. </font><font style="vertical-align: inherit;">
Heutzutage ist die Entwicklung eines neuen Softwaresystems ohne den Einsatz von Microservices kaum vorstellbar. </font><font style="vertical-align: inherit;">Und diese Situation führt uns wiederum zur Docker-Plattform.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/xj/7x/qr/xj7xqrze4d6ijidic1zuonqbr1c.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plattform </font><font style="vertical-align: inherit;">für die Entwicklung und Bereitstellung von Microservices ist fast zum Industriestandard geworden. </font><font style="vertical-align: inherit;">Auf der Projektwebsite finden Sie heraus, dass Docker die einzige unabhängige Containerisierungsplattform ist, mit der Unternehmen mühelos Anwendungen erstellen sowie in jeder Umgebung verteilen und ausführen können - von Hybrid-Clouds bis hin zu Grenzsystemen.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker komponieren</font></font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Docker Compose-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Technologie dient </font><font style="vertical-align: inherit;">zur Konfiguration von Anwendungen mit mehreren Containern. </font><font style="vertical-align: inherit;">Ein Docker Compose-Projekt kann so viele Docker-Container enthalten, wie der Ersteller dieses Projekts benötigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Arbeit mit Docker Compose wird eine YAML-Datei verwendet, um Anwendungsdienste zu konfigurieren und deren Interaktion miteinander zu organisieren. </font><font style="vertical-align: inherit;">Docker Compose ist somit ein Tool zum Beschreiben und Ausführen von Docker-Anwendungen mit mehreren Containern.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/49c/b5a/9bf/49cb5a9bf3288a6cd933c6210f8a56bf.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Container, die auf dem Hostsystem ausgeführt werden</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GNU machen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Programm </font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist im Wesentlichen ein Werkzeug zur Automatisierung der Zusammenstellung von Programmen und Bibliotheken aus dem Quellcode. Im Allgemeinen können wir sagen, dass es </font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf jeden Prozess anwendbar ist, der die Ausführung beliebiger Befehle zum Konvertieren bestimmter Quellmaterialien in eine bestimmte resultierende Form, in ein bestimmtes Ziel umfasst. In unserem Fall werden die Teams </font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in abstrakte Ziele ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falsche Ziele</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) umgewandelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dem Programm mitzuteilen, </font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">was wir von ihm wollen, benötigen wir eine Datei </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enthalten die üblichen Befehle </font></font><code>docker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und</font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das sollen viele Probleme lösen. </font><font style="vertical-align: inherit;">Wir sprechen nämlich über das Zusammenstellen eines Containers, über das Starten, Stoppen, Neustarten, das Organisieren der Anmeldung eines Benutzers am Container, das Arbeiten mit Containerprotokollen und das Lösen anderer ähnlicher Probleme.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typische Verwendungen für Docker Compose</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich eine normale Webanwendung vor, die die folgenden Komponenten enthält:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimescaleDB-Datenbank (Postgres).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Express.js Anwendung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ping (nur ein Container, der nichts Besonderes macht).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Anwendung benötigt 3 Docker-Container und eine Datei </font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit Anweisungen zum Verwalten dieser Container. </font><font style="vertical-align: inherit;">Jeder der Container hat unterschiedliche Interaktionspunkte. </font></font><code>timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie können </font><font style="vertical-align: inherit;">beispielsweise mit einem Container </font><font style="vertical-align: inherit;">genauso arbeiten wie mit Datenbanken. </font><font style="vertical-align: inherit;">Sie können nämlich die folgenden Aktionen ausführen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melden Sie sich bei der Postgres-Shell an.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabellen importieren und exportieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie eine </font></font><code>pg_dump</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabelle oder Datenbank.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Container einer Express.js-Anwendung </font></font><code>expressjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann die folgenden Funktionen aufweisen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ausgabe frischer Daten aus dem Systemprotokoll.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie die Shell ein, um bestimmte Befehle auszuführen.</font></font></li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container-Interaktion</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir die Verbindung zwischen Containern mit Docker Compose konfiguriert haben, ist es Zeit, eine Interaktion mit diesen Containern herzustellen. </font><font style="vertical-align: inherit;">Als Teil des Docker Compose-Systems gibt es einen Befehl </font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der eine Option unterstützt </font></font><code>-f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mit der Sie eine Datei auf das System übertragen können </font></font><code>docker-compose.yml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit den Funktionen dieser Option können Sie die Interaktion mit dem System nur auf die in der Datei genannten Container beschränken </font></font><code>docker-compose.yml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sehen Sie sich an, wie Containerinteraktionen bei der Verwendung von Befehlen aussehen </font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn wir uns vorstellen, dass wir die Shell betreten müssen </font></font><code>psql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sehen die entsprechenden Befehle möglicherweise folgendermaßen aus:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker-compose -f docker-compose.yml exec timescale psql -Upostgres</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der gleiche Befehl, für den nicht </font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber verwendet wird </font></font><code>docker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kann folgendermaßen aussehen:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker exec -it&nbsp; edp_timescale_1 psql -Upostgres</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass es in solchen Fällen immer vorzuziehen ist, nicht einen Befehl </font></font><code>docker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern einen Befehl zu verwenden </font></font><code>docker-compose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da dies die Notwendigkeit beseitigt, sich die Namen der Container zu merken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beide oben genannten Befehle sind nicht so kompliziert. </font><font style="vertical-align: inherit;">Wenn wir jedoch den „Wrapper“ in einer Form verwenden </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">würden, die uns eine Schnittstelle in Form einfacher Befehle bietet und selbst so lange Befehle aufruft, könnten die gleichen Ergebnisse wie folgt erzielt werden:</font></font><br>
<br>
<pre><code class="plaintext hljs">make db-shell</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist offensichtlich, dass die Verwendung </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Arbeit mit Containern erheblich vereinfacht!</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeitsbeispiel</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie anhand des obigen Projektdiagramms die folgende Datei </font></font><code>docker-compose.yml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">version: '3.3'<font></font>
services:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;api:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;build: .<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image: mywebimage:0.0.1<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ports:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- 8080:8080<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volumes:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- /app/node_modules/<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depends_on:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- timescale<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;command: npm run dev<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networks:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- webappnetwork<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;timescale:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image: timescale/timescaledb-postgis:latest-pg11<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;environment:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- POSTGRES_USER=postgres<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- POSTGRES_PASSWORD=postgres<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;command: ["postgres", "-c", "log_statement=all", "-c", "log_destination=stderr"]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volumes:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- ./create_schema.sql:/docker-entrypoint-initdb.d/create_schema.sql<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networks:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- webappnetwork<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;ping:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image: willfarrell/ping<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;environment:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HOSTNAME: "localhost"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TIMEOUT: 300<font></font>
networks:<font></font>
&nbsp;&nbsp;&nbsp;webappnetwork:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driver: bridge</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie die folgende Datei, um die Docker Compose-Konfiguration zu verwalten und mit den darin beschriebenen Containern zu interagieren </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">THIS_FILE := $(lastword $(MAKEFILE_LIST))<font></font>
.PHONY: help build up start down destroy stop restart logs logs-api ps login-timescale login-api db-shell<font></font>
help:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make -pRrq&nbsp; -f $(THIS_FILE) : 2&gt;/dev/null | awk -v RS= -F: '/^# File/,/^# Finished Make data base/ {if ($$1 !~ "^[#.]") {print $$1}}' | sort | egrep -v -e '^[^[:alnum:]]' -e '^$@$$'<font></font>
build:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml build $(c)<font></font>
up:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml up -d $(c)<font></font>
start:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml start $(c)<font></font>
down:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml down $(c)<font></font>
destroy:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml down -v $(c)<font></font>
stop:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml stop $(c)<font></font>
restart:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml stop $(c)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml up -d $(c)<font></font>
logs:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml logs --tail=100 -f $(c)<font></font>
logs-api:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml logs --tail=100 -f api<font></font>
ps:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml ps<font></font>
login-timescale:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml exec timescale /bin/bash<font></font>
login-api:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml exec api /bin/bash<font></font>
db-shell:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;docker-compose -f docker-compose.yml exec timescale psql -Upostgres</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die meisten der hier beschriebenen Befehle gelten für alle Container. Mit der Option </font></font><code>c=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können Sie jedoch den Umfang des Befehls auf einen Container beschränken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald Sie </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fertig sind, können Sie es folgendermaßen verwenden:</font></font><br>
<br>
<ul>
<li><code>make help</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Ausgabe einer Liste aller für </font></font><code>make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c92/808/916/c92808916bcd3d861c25a47c22cc1694.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hilfe zu verfügbaren Befehlen</font></font></font></i><br>
 <br>
<ul>
<li><code>make build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Montage des Bildes aus </font></font><code>Dockerfile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In unserem Beispiel haben wir vorhandene Bilder </font></font><code>timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und verwendet </font></font><code>ping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Aber </font></font><code>api</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir wollen das </font><font style="vertical-align: inherit;">Bild </font><font style="vertical-align: inherit;">lokal sammeln. </font><font style="vertical-align: inherit;">Dies ist genau das, was nach Ausführung dieses Befehls getan wird.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a5/23f/8fc/8a523f8fca803a9b2c21411d7e3ad037.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker-Container-Baugruppe</font></font></font></i><br>
 <br>
<ul>
<li><code>make start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Start aller Container. </font><font style="vertical-align: inherit;">Um nur einen Container zu starten, können Sie den Befehl des Formulars verwenden </font></font><code>make start c=timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/087/f72/559/087f725597d994d7929e50da56dd2d4d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeitskalencontainer starten</font></font></font></i><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ee/a13/4e3/1eea134e39cf2c8d58dac881c143c135.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starten Sie den Ping-Container</font></font></font></i><br>
<br>
<ul>
<li><code>make login-timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Eintritt in die Bash-Sitzung des Containers </font></font><code>timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b87/63a/66c/b8763a66cdb78760244cb41ea6c26c6e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bash im Zeitskalencontainer ausführen</font></font></font></i><br>
<br>
<ul>
<li><code>make db-shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Melden Sie </font></font><code>psql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sich beim Container </font></font><code>timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an, um SQL-Abfragen an die Datenbank auszuführen.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac6/669/3e8/ac66693e81e9adefdbf14b2541ba176d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausführen von psql im timescaledb-Container</font></font></font></i><br>
<br>
<ul>
<li><code>make stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Behälter stoppen.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf9/0f8/cb0/bf90f8cb006ba2ec136a4bdf6b956de3.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stoppen des Zeitskalencontainers</font></font></font></i><br>
<br>
<ul>
<li><code>make down</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Behälter anhalten und entfernen. </font><font style="vertical-align: inherit;">Um einen bestimmten Container zu löschen, können Sie diesen Befehl mit dem angegebenen Container verwenden. </font><font style="vertical-align: inherit;">Zum Beispiel - </font></font><code>make down c=timescale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code>make down c=api</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/779/ede/fd8/779edefd85df7dcedec4ead9b0bae09f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stoppen und löschen Sie alle Container</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz der Tatsache, dass das Docker Compose-System eine umfangreiche Reihe von Befehlen zum Verwalten von Containern bereitstellt, werden diese Befehle manchmal lang und können daher schwer zu merken sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendungsmethode </font></font><code>Makefile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hat uns geholfen, eine schnelle und einfache Interaktion mit Containern aus der Datei herzustellen </font></font><code>docker-compose.yml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir sprechen nämlich über Folgendes:</font></font><br>
<br>
<ul>
<li>     ,   <code>docker-compose.yml</code>,      .</li>
<li>  ,    ,    <code>make help</code>      .</li>
<li>         ,         . ,   <code>docker-compose -f docker-compose.yml exec timescale psql -Upostgres</code>   <code>make db-shell</code>.</li>
<li> <code>Makefile</code> ,    ,    . ,                 .</li>
<li>         <code>Makefile</code>,        .</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Auf unserem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marktplatz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt es ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Image </font><font style="vertical-align: inherit;">, das mit einem Klick installiert wird. </font><font style="vertical-align: inherit;">Sie können den Betrieb von Containern auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> überprüfen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alle Neukunden erhalten 3 Tage kostenlos zum Testen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie automatisieren Sie die Arbeit mit Docker Compose?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486672/index.html">OpenVINO Hackathon: Erkennen von Stimme und Emotion auf dem Raspberry Pi</a></li>
<li><a href="../de486674/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 400 (27. Januar - 2. Februar 2020)</a></li>
<li><a href="../de486676/index.html">Unvermeidlichkeit der FPGA-Penetration in Rechenzentren</a></li>
<li><a href="../de486678/index.html">Quarz in ASP.NET Core</a></li>
<li><a href="../de486680/index.html">ML, VR & Robots (und ein bisschen Cloud)</a></li>
<li><a href="../de486684/index.html">Meine Antwort an diejenigen, die glauben, dass der Wert von TDD übertrieben ist</a></li>
<li><a href="../de486686/index.html">Informationen zum Implementieren einer Deep-Learning-Bibliothek in Python</a></li>
<li><a href="../de486688/index.html">Node.js, Tor, Puppenspieler und Cheerio: anonymes Web-Scraping</a></li>
<li><a href="../de486690/index.html">5 Tipps zum Schreiben von Qualitätspfeilfunktionen</a></li>
<li><a href="../de486692/index.html">Chrome-Konsolenfunktionen, die Sie möglicherweise noch nie verwendet haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>