<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â™ï¸ â›¹ğŸ½ ğŸŒ² Kubernetes RBACã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æ‰¿èª ğŸ˜® ğŸ¦Œ ğŸ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨æ„ãƒšãƒ¬ãƒ•ã€‚ï¼šç¶™ç¶šçš„ãªKubernetesã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å…¨èˆ¬ã€ãŠã‚ˆã³æœ€è¿‘è§¦ã‚ŒãŸ RBACã€ç‰¹ã«ã€Adaltas Big Dataå›½éš›ä¼æ¥­ã®ãƒ•ãƒ©ãƒ³ã‚¹äººã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã«ã‚ˆã‚‹ã“ã®è³‡æ–™ã®ç¿»è¨³ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚è‘—è€…ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨©åˆ©ã‚’ä¸ãˆã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç¶™ç¶šã™ã‚‹æ–¹æ³•ã‚’è©³ã—ãç¤ºã—ã¦ã„ã¾ã™ã€‚
 
 K...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes RBACã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æ‰¿èª</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/470503/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„ãƒšãƒ¬ãƒ•ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šç¶™ç¶šçš„ãª</font><font style="vertical-align: inherit;">Kubernetesã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å…¨èˆ¬ã€ãŠã‚ˆã³</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€è¿‘è§¦ã‚ŒãŸ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RBACã€ç‰¹ã«ã€Adaltas Big Dataå›½éš›ä¼æ¥­ã®ãƒ•ãƒ©ãƒ³ã‚¹äººã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã«ã‚ˆã‚‹ã“ã®è³‡æ–™ã®ç¿»è¨³ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚è‘—è€…ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨©åˆ©ã‚’ä¸ãˆã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç¶™ç¶šã™ã‚‹æ–¹æ³•ã‚’è©³ã—ãç¤ºã—ã¦ã„ã¾ã™ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨é–‹å§‹ã¯ã»ã‚“ã®å§‹ã¾ã‚Šã«ã™ãã¾ã›ã‚“ã€‚ã“ã‚Œã‚‚æ´»ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¿è­·ã™ã‚‹ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³‡æ ¼æƒ…å ±ã‚’è¨­å®šã—ã€èªè¨¼ã¨æ‰¿èªã®è¨­å®šã‚’æ­£ã—ãç®¡ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/m5/y9/az/m5y9azz-gbidcxue2_eesz-gvxo.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNCFãƒ–ãƒ­ã‚°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ã‚‰</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">æŠœç²‹</font></a><font style="vertical-align: inherit;">ã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãŸå›³</font></a><font style="vertical-align: inherit;"> -ç´„Translã€‚ï¼‰</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã“ã®è¨˜äº‹ã§ã¯</font><font style="vertical-align: inherit;">ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X.509</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹</font><font style="vertical-align: inherit;">æ–¹æ³•ã¨</font><font style="vertical-align: inherit;">ã€Kubernetesã§</font><font style="vertical-align: inherit;">åŸºæœ¬çš„ãª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBAC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> APIã‚’ä½¿ç”¨ã—ã¦æ‰¿èªã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç®¡ç†ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã„ãã¤ã‹ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦è©±ã—ã¾ã™ï¼šrakkessã€kubectl-who-canã€rbac-lookupã€ãŠã‚ˆã³RBACãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€‚</font></font><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰ææ¡ä»¶ã¨ä»®å®š</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšæœ€åˆã«ã€ã„ãã¤ã‹ã®ä»®å®šã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°‘ãªãã¨ã‚‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Kubernetesã®å‹•ä½œã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ³åƒã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesã¾ãŸã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minikubeã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ãªãŸã¯æŒã£ã¦ã„ã‚‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl CLIãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹</font><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ—¢è£½ã®Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãŒãªã„å ´åˆã¯ã€åŒåƒšã®è¨˜äº‹ï¼ˆArthur BUSSERï¼‰ã‚’å‚ç…§ã—ã¦ã€</font><font style="vertical-align: inherit;">Vagrantã‚’ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¦CentOS 7ã«Kubernetesã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ–¹æ³•</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’èª¬æ˜ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«ã¯4ã¤ã®ãƒãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚1ã¤ã¯ãƒã‚¹ã‚¿ãƒ¼ã€3ã¤ã¯ãƒ¯ãƒ¼ã‚«ãƒ¼ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¨å¯¾è©±ã™ã‚‹ã‚¨ãƒƒã‚¸ãƒãƒ¼ãƒ‰ã¨ã—ã¦ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBAC API</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½¹å‰²ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRBACï¼‰ã¯ã€ä¼æ¥­å†…ã®å€‹ã€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å½¹å‰²ã«åŸºã¥ã„ã¦ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãŠã‚ˆã³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡ã™ã‚‹æ–¹æ³•ã§ã™ã€‚</font><font style="vertical-align: inherit;">RBACã¯ã€CRUDï¼ˆä½œæˆã€èª­ã¿å–ã‚Šã€æ›´æ–°ã€å‰Šé™¤ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã™ã¹ã¦ã®Kubernetesãƒªã‚½ãƒ¼ã‚¹ã§ä½¿ç”¨ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã®ã‚ˆã†ãªãƒªã‚½ãƒ¼ã‚¹ã®ä¾‹ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åå‰ç©ºé–“</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ãƒãƒƒãƒ‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é…ç½®</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ°¸ç¶šãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆPersistentVolumesï¼‰;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ConfigMaps</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ã“ã‚Œã‚‰ã¯ãã‚Œã‚‰ã§å¯èƒ½ãªæ“ä½œã®ä¾‹ã§ã™ï¼š</font></font><br>
<br>
<ul>
<li> <code>create</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆä½œæˆï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>get</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆé ˜åæ›¸ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>delete</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå‰Šé™¤ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>list</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>update</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆæ›´æ–°ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesã§RBACã‚’ç®¡ç†ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã‚’å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li> <b><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>ClusterRole</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã¯ã€å˜ã«ä¸€é€£ã®æ¨©é™ã‚’è¡¨ã™ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã§ã™ã€‚</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åå‰ç©ºé–“å†…ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹ãŸã‚ã«ã®ã¿ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨åŒã˜æ¨©é™ã‚’æä¾›</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ãã¾ã™ã€‚ã¾ãŸã€ã‚¯ãƒ©ã‚¹ã‚¿å…¨ä½“ã§ä½¿ç”¨å¯èƒ½ãªãƒªã‚½ãƒ¼ã‚¹ã€ãŠã‚ˆã³ã„ã‚ã‚†ã‚‹éãƒªã‚½ãƒ¼ã‚¹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font></font><code>/healthz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ç´„translã€‚ãªã©ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li> <b><code>Subjects</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã‚µãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§æ“ä½œã‚’å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¼ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚µãƒ¼ãƒ“ã‚¹ã€ã¾ãŸã¯ã‚°ãƒ«ãƒ¼ãƒ—ã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚</font></font></li>
<li> <b><code>RoleBinding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>ClusterRoleBinding</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åå‰ãŒç¤ºã™ã‚ˆã†ã«ã€ã“ã‚Œã¯ãƒ­ãƒ¼ãƒ«ã¾ãŸã¯ClusterRoleã¸ã®ã‚µãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§ã™ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesã«ã¯æ¬¡ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li> <code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šèª­ã¿å–ã‚Šå°‚ç”¨ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’é™¤ãã€‚</font></font></li>
<li> <code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šä¸Šè¨˜ã®ãƒªã‚¹ãƒˆ+ã»ã¨ã‚“ã©ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ç·¨é›†ã™ã‚‹æ©Ÿèƒ½ã€ãƒ­ãƒ¼ãƒ«ã¨ãƒ­ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’é™¤ãã€‚</font></font></li>
<li> <code>admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šä¸Šè¨˜+åå‰ç©ºé–“ãƒ¬ãƒ™ãƒ«ã§ãƒ­ãƒ¼ãƒ«ã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã€‚</font></font></li>
<li> <code>cluster-admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šå¯èƒ½ãªã™ã¹ã¦ã®ç‰¹æ¨©ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚‚ã¡ã‚ã‚“ã€ç‹¬è‡ªã®</font></font><code>Roles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™</font></font><code>ClusterRoles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒã€çŠ¶æ³ãŒè¨±ã™é™ã‚Šã€ã§ãã‚‹ã ã‘ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å½¹å‰²ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã†ã—ãªã„ã¨ã€ã“ã®ã™ã¹ã¦ã«ã™ãã«æ··ä¹±ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ä¾‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ã€…ã¯2ã¤ã®åå‰ç©ºé–“ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><code>my-project-dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ -ã ã‘ã§ãªãã€äºŒäººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼š</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã“ã‚Œã‚‰ã®åå‰ç©ºé–“ã§ç•°ãªã‚‹å½¹å‰²ã‚’æŒã¡ã¾ã™ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my-project-devï¼š</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚¸ãƒ¼ãƒ³ã‚ºï¼šç·¨é›†</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my-project-prodï¼š</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¸ãƒ¼ãƒ³ã‚ºï¼šãƒ“ãƒ¥ãƒ¼</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ©ï¼šç·¨é›†</font></font></li>
</ul></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X.509ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆãŠã‚ˆã³èªè¨¼ã™ã‚‹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«</font><font style="vertical-align: inherit;">ã¯ã€Kubernetesã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®</font><font style="vertical-align: inherit;">2ç¨®é¡ãŒ</font><font style="vertical-align: inherit;">ã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">å¾Œè€…ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã®èª¬æ˜ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¤–éƒ¨ã®ç‹¬ç«‹ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å½¹å‰²ã¯ã€ç§˜å¯†éµã‚’é…å¸ƒã™ã‚‹ç®¡ç†è€…ã€Keystoneã‚„Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆãªã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªãƒã‚¸ãƒˆãƒªã€ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆãŒå«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã•ãˆæœãŸã™ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ç‚¹ã§ã€Kubernetesã«ã¯ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€APIå‘¼ã³å‡ºã—ã‚’ä»‹ã—ã¦ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºæœ¬</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èªè¨¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ¬¡ã®ï¼ˆã¾ãŸã¯é¡ä¼¼ã®ï¼‰å†…å®¹ã§æ§‹æˆã‚’APIã‚µãƒ¼ãƒãƒ¼ã«è»¢é€ã™ã‚‹ï¼šãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€uidã€ã‚°ãƒ«ãƒ¼ãƒ—ã€‚</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> X.509ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸ï¼š</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç§˜å¯†éµã¨è¨¼æ˜æ›¸ç½²åãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ä½œæˆã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨¼æ˜æ›¸ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®è¨¼æ˜æ©Ÿé–¢ï¼ˆKubernetes CAï¼‰ã§ã®è¨¼æ˜æ›¸ã€‚</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ãƒ™ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆJSON Web Tokensã€JWTï¼‰ï¼š</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenID Connect</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OAuth 2.0ä¸Šã®èªè¨¼ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webãƒ•ãƒƒã‚¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆwebhooksï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€X.509è¨¼æ˜æ›¸ã¨OpenSSLè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãã‚Œã‚‰ã¯å˜ç´”ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã¯ã€ã„ãã¤ã‹ã®æ®µéšã§è¡Œã‚ã‚Œã¾ã™-ã™ã¹ã¦ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ“ä½œã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ç®¡ç†è€…æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆcluster-adminï¼‰ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã™ã¹ã¦ã®æ‰‹é †ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ï¼ˆä¾‹ï¼šï¼‰</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã€ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦æ®‹ã‚Šã®æ‰‹é †ã‚’å®Œäº†ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">useradd jean &amp;&amp; <span class="hljs-built_in">cd</span> /home/jean</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç§˜å¯†éµã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">openssl genrsa -out jean.key 2048</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¨¼æ˜æ›¸ç½²åè¦æ±‚ï¼ˆCSRï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><code>CN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€</font></font><code>O</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã‚°ãƒ«ãƒ¼ãƒ—ã€‚</font><font style="vertical-align: inherit;">ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«æ¨©é™ã‚’è¨­å®šã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã‚ˆã‚Šã€ãŸã¨ãˆã°ã€åŒã˜æ¨©é™ã‚’æŒã¤å¤šãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã‚‹å ´åˆã€ä½œæ¥­ãŒç°¡å˜ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#  </span><font></font>
openssl req -new -key jean.key \<font></font>
-out jean.csr \<font></font>
-subj <span class="hljs-string">"/CN=jean"</span><font></font>
<font></font>
<span class="hljs-comment">#     $group</span><font></font>
openssl req -new -key jean.key \<font></font>
-out jean.csr \<font></font>
-subj <span class="hljs-string">"/CN=jean/O=<span class="hljs-variable">$group</span>"</span><font></font>
<font></font>
<span class="hljs-comment">#      </span><font></font>
openssl req -new -key jean.key \<font></font>
-out jean.csr \<font></font>
-subj <span class="hljs-string">"/CN=jean/O=<span class="hljs-variable">$group1</span>/O=<span class="hljs-variable">$group2</span>/O=<span class="hljs-variable">$group3</span>"</span></code></pre></li>
<li>  CSR  Kubernetes CA.     CA  ,     <code>/etc/kubernetes/pki</code>.      500 :<br>
<br>
<pre><code class="bash hljs">openssl x509 -req -<span class="hljs-keyword">in</span> jean.csr \<font></font>
-CA /etc/kubernetes/pki/ca.crt \<font></font>
-CAkey /etc/kubernetes/pki/ca.key \<font></font>
-CAcreateserial \<font></font>
-out jean.crt -days 500</code></pre></li>
<li>   <code>.certs</code>.          :<br>
<br>
<pre><code class="bash hljs">mkdir .certs &amp;&amp; mv jean.crt jean.key .certs</code></pre></li>
<li>    Kubernetes:<br>
<br>
<pre><code class="bash hljs">kubectl config <span class="hljs-built_in">set</span>-credentials jean \<font></font>
--client-certificate=/home/jean/.certs/jean.crt \<font></font>
--client-key=/home/jean/.certs/jean.key</code></pre></li>
<li>    :<br>
<br>
<pre><code class="bash hljs">kubectl config <span class="hljs-built_in">set</span>-context jean-context \<font></font>
--cluster=kubernetes --user=jean</code></pre></li>
<li>    .    ,     .     ,     <code>/etc/kubernetes</code>:  <code>certificate-authority-data</code>  <code>server</code>    ,    :<br>
<br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
clusters:<font></font>
- cluster:<font></font>
 certificate-authority-data: {  }<font></font>
 server: {  }<font></font>
name: kubernetes<font></font>
contexts:<font></font>
- context:<font></font>
 cluster: kubernetes<font></font>
 user: jean<font></font>
name: jean-context<font></font>
current-context: jean-context<font></font>
kind: Config<font></font>
preferences: {}<font></font>
users:<font></font>
- name: jean<font></font>
user:<font></font>
 client-certificate: /home/jean/.certs/jean.cert<font></font>
 client-key: /home/jean/.certs/jean.key</code></pre><br>
        <code>.kube</code>:<br>
<br>
<pre><code class="bash hljs">mkdir .kube &amp;&amp; vi .kube/config</code></pre></li>
<li>         :<br>
<br>
<pre><code class="bash hljs">chown -R jean: /home/jean/</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œæˆã•ã‚Œã¾ã—ãŸã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚‚åŒã˜ã‚ˆã†ã«ã—ã¾ã™</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã‹ãªã‚Šã®æ•°ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã‚Šã€å¤šæ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹ã«ã¯é•·ã„æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ç§ã¯ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–ã™ã‚‹Bashã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãã‚Œã‚‰ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„ãƒšãƒ¬ãƒ•ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€è¿‘ã®è¨˜äº‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">æ›¸ã„ãŸã‚ˆã†ã«</font><font style="vertical-align: inherit;">ã€ã“ã®æ‰‹é †ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€kubeadmã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°æ©Ÿèƒ½ã«ã‚ˆã‚Š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã€</font></a><font style="vertical-align: inherit;"> Kubernetesã«å¯¾ã—ã¦ã‚ˆã‚Šã€Œãƒã‚¤ãƒ†ã‚£ãƒ–ã€ãªæ–¹æ³•ã§ç°¡ç•¥åŒ–ã§ã</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚ãŸã ã—ã€ã“ã®ç¿»è¨³ã®å…¬é–‹æ™‚ã«ã¯ã€ã‚¢ãƒ«ãƒ•ã‚¡ç‰ˆã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®ä¾‹ã¯</font></font><code>kubeadm alpha kubeconfig user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã“ã‚Œã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã§ãã¾ã—ãŸã€‚æ¬¡ã®2ã¤ã®åå‰ç©ºé–“ã®ä½œæˆã«ç§»ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl create namespace my-project-dev<font></font>
kubectl create namespace my-project-prod</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰¿èªã¯ã¾ã æ±ºå®šã—ã¦ã„ãªã„ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">User: Jean<font></font>
<font></font>
kubectl get nodes<font></font>
Error from server (Forbidden): nodes is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"nodes"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> at the cluster scope<font></font>
<font></font>
kubectl get pods -n default<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"default"</span><font></font>
<font></font>
kubectl get pods -n my-project-prod<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-prod"</span><font></font>
<font></font>
kubectl get pods -n my-project-dev<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span></code></pre><br>
<pre><code class="bash hljs">User: Sarah<font></font>
<font></font>
kubectl get nodes<font></font>
Error from server (Forbidden): nodes is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"nodes"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> at the cluster scope<font></font>
<font></font>
kubectl get pods -n default<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"default"</span><font></font>
<font></font>
kubectl get pods -n my-project-prod<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-prod"</span><font></font>
<font></font>
kubectl get pods -n my-project-dev<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roleã¨ClusterRoleã®ä½œæˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯ã€ä½¿ç”¨ã™ã‚‹</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€åˆ©ç”¨ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ç‹¬è‡ªã®</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³</font><font style="vertical-align: inherit;">ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚‚ç¤ºã—ã¾ã™</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æœ¬è³ªçš„ã«ã€</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã“ã‚Œã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚»ãƒƒãƒˆã ã‘ã§ã‚ã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆã¨å‘¼ã°ã‚Œã‚‹</font></font><code>verbs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ã€Œå‹•è©ã€ã¯æ–‡å­—é€šã‚Šã€ã‚ã‚‹ã€ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ãŠã‚ˆã³åå‰ç©ºé–“ã®ãŸã‚ã«è¨±å¯ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: rbac.authorization.k8s.io/v1beta1<font></font>
kind: Role<font></font>
metadata:<font></font>
  name: list-deployments<font></font>
  namespace: my-project-dev<font></font>
rules:<font></font>
  - apiGroups: [ apps ]<font></font>
    resources: [ deployments ]<font></font>
    verbs: [ get, list ]<font></font>
---------------------------------<font></font>
apiVersion: rbac.authorization.k8s.io/v1beta1<font></font>
kind: ClusterRole<font></font>
metadata:<font></font>
  name: list-deployments<font></font>
rules:<font></font>
  - apiGroups: [ apps ]<font></font>
    resources: [ deployments ]<font></font>
    verbs: [ get, list ]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã‚‰ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl create -f /path/to/your/yaml/file</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®Roleã¾ãŸã¯ClusterRoleã®ãƒã‚¤ãƒ³ãƒ‰</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šã‚¿ã‚¤</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ï¼ˆ</font></font><code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æ¬¡ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çš†æ§˜ã¸ï¼‰ï¼š</font></font><br>
<br>
<ul>
<li><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><ul>
<li> <code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-åå‰ç©ºé–“å†…</font></font><code>my-project-dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li> <code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-åå‰ç©ºé–“å†…</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
</ul></li>
<li><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><ul>
<li> <code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-åå‰ç©ºé–“å†…</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RoleBindingsã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã¯ãªããƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€æ‰¿èªã®</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã‚ã«2ã¤ã®RoleBindingsã‚’ä½œæˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã®RoleBindingsã‚’å®šç¾©ã™ã‚‹YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: rbac.authorization.k8s.io/v1<font></font>
kind: RoleBinding<font></font>
metadata:<font></font>
  name: jean<font></font>
  namespace: my-project-dev<font></font>
subjects:<font></font>
- kind: User<font></font>
  name: jean<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
roleRef:<font></font>
  kind: ClusterRole<font></font>
  name: edit<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
---------------------------------<font></font>
apiVersion: rbac.authorization.k8s.io/v1<font></font>
kind: RoleBinding<font></font>
metadata:<font></font>
  name: jean<font></font>
  namespace: my-project-prod<font></font>
subjects:<font></font>
- kind: User<font></font>
  name: jean<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
roleRef:<font></font>
  kind: ClusterRole<font></font>
  name: view<font></font>
  apiGroup: rbac.authorization.k8s.io</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ã€…ãŒè¨±ã™</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é–²è¦§ï¼ˆ</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ç·¨é›†ï¼ˆ</font></font><code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><code>my-project-dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åŒã˜ã“ã¨ã‚’ã®æ‰¿èªã§ã‚‚è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl apply -f /path/to/your/yaml/file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®å ´åˆã€</font></font><code>kubectl apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»£ã‚ã‚Š</font><font style="vertical-align: inherit;">ã«ãŒä½¿ç”¨ã•ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã—ãŸ</font></font><code>kubectl create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã®é•ã„</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãã‚Œä»¥å¤–ã«ã¯ä½•ã‚‚ã—ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚</font></font><code>apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå­˜åœ¨ã—ãªã„å ´åˆï¼‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã ã‘ã§ãªãã€å¿…è¦ã«å¿œã˜ã¦æ›´æ–°ã‚‚è¡Œã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿…è¦ãªæ¨©é™ã‚’å—ã‘å–ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<ul>
<li> : <code>sarah</code> (<code>edit</code>  <code>my-project-prod</code>)<ul>
<li> <code>my-project-prod</code><ul>
<li>    pod' (1);</li>
<li>   deployment' (2).</li>
</ul></li>
<li> <code>my-project-dev</code><ul>
<li>     pod' (4);</li>
<li>    deployment' (5).</li>
</ul></li>
</ul></li>
</ul><br>
<pre><code class="bash hljs">(1) kubectl get pods -n my-project-prod <font></font>
No resources found. <font></font>
<font></font>
(2) kubectl run nginx --image=nginx --replicas=1 -n my-project-prod <font></font>
deployment.apps/nginx created <font></font>
<font></font>
(3) kubectl get pods -n my-project-prod <font></font>
NAME                    READY  STATUS   RESTARTS  AGE <font></font>
nginx-7db9fccd9b-t14qw  1/1    Running  0         4s <font></font>
<font></font>
(4) kubectl get pods -n my-project-dev<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span><font></font>
<font></font>
(5) kubectl run nginx --image=nginx --replicas=1 -n my-project-dev <font></font>
Error from server (Forbidden): deployments.apps is forbidden: User <span class="hljs-string">"sarah"</span> cannot create resource <span class="hljs-string">"deployments"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">"apps"</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span></code></pre><br>
<ul>
<li>: <code>jean</code> (<code>view</code>  <code>my-project-prod</code>  <code>edit</code>  <code>my-project-dev</code>)<ul>
<li> <code>my-project-prod</code><ul>
<li>    pod' (1);</li>
<li>    deployment' (2);</li>
<li>    deployment' (3).</li>
</ul></li>
<li> my-project-dev:<ul>
<li>    pod' (4);</li>
<li>   deployment' (5);</li>
<li>    deployment' (6);</li>
<li>   deployment' (7).</li>
</ul></li>
</ul></li>
</ul><br>
<pre><code class="bash hljs">(1) kubectl get pods -n my-project-prod <font></font>
NAME                    READY  STATUS   RESTARTS  AGE <font></font>
nginx-7db9fccd9b-t14qw  1/1    Running  0         101s <font></font>
<font></font>
(2) kubectl get deploy -n my-project-prod <font></font>
NAME   READY  UP-TO-DATE  AVAILABLE  AGE <font></font>
nginx  1/1    1           1          110s <font></font>
<font></font>
(3) kubectl delete deploy/nginx -n my-project-prod <font></font>
Error from server (Forbidden): deployments.extensions <span class="hljs-string">"nginx"</span> is forbidden: User <span class="hljs-string">"jean"</span> cannot delete resource <span class="hljs-string">"deployments"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">"extensions"</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-prod"</span> <font></font>
<font></font>
(4) kubectl get pods -n my-project-dev<font></font>
No resources found. <font></font>
<font></font>
(5) kubectl run nginx --image=nginx --replicas=1 -n my-project-dev <font></font>
deployment.apps/nginx created <font></font>
<font></font>
(6) kubectl get deploy -n my-project-dev <font></font>
NAME   READY  UP-TO-DATE  AVAILABLE  AGE <font></font>
nginx  0/1    1           0          13s <font></font>
<font></font>
(7) kubectl delete deploy/nginx -n my-project-dev <font></font>
deployment.extensions <span class="hljs-string">"nginx"</span> deleted <font></font>
<font></font>
(8) kubectl get deploy -n my-project-dev <font></font>
No resources found.</code></pre><br>
<h2>    </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã§ã€ã•ã¾ã–ã¾ãªå½¹å‰²ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚’æ­£å¸¸ã«è¨­å®šã§ãã¾ã—ãŸã€‚ç–‘å•ãŒç”Ÿã˜ã¾ã™ï¼šã“ã‚Œã‚’ã™ã¹ã¦ç®¡ç†ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã™ã‹ï¼Ÿç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹æ¨©é™ã‚’æŒã¤äººç‰©ã‚’ã©ã®ã‚ˆã†ã«ã—ã¦çŸ¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã®å…¨ä½“åƒã‚’å–å¾—ã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã™ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã™ã‚‹ã«ã¯ã€ã“ã‚Œã‚‰ã™ã¹ã¦ã®è³ªå•ã«å¯¾ã™ã‚‹ç­”ãˆãŒå¿…è¦ã§ã™ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’</font></font><code>kubectl auth can-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># kubectl auth can-i $action $resource --as $subject</span><font></font>
<font></font>
(1) kubectl auth can-i list pods <font></font>
(2) kubectl auth can-i list pods --as jean</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆ1ï¼‰ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">2ç•ªç›®ï¼ˆ2ï¼‰-ç®¡ç†è€…ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚Šã™ã¾ã—ã¦ã€ç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã€Œç”Ÿã¾ã‚Œå¤‰ã‚ã‚Šã€ã¯ã€ã‚¯ãƒ©ã‚¹ã‚¿ç®¡ç†è€…æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã€çµ„ã¿è¾¼ã¿ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦å®Ÿè¡Œã§ãã‚‹äº‹å®Ÿä¸Šã™ã¹ã¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã®ãŸã‚ã€kubectl auth can-iãƒãƒ¼ãƒ ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹ã„ãã¤ã‹ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã‚’ç´¹ä»‹ã™ã‚‹å‰ã«ã€ä¾å­˜é–¢ä¿‚ã‚’ç¢ºç«‹ã—ã¾ã—ã‚‡ã†ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krew</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«è¡Œã</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ã§ä¿¡é ¼æ€§ãŒé«˜ãåŠ¹ç‡çš„ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ä½œæˆã§ãã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Robert Griesemer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rob Pike</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ken Thompson</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®ç‹¬è‡ªã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«åŸºã¥ã„ã¦ã€CãŠã‚ˆã³Pascalã®ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸‹ã«GoogleãŒé–‹ç™ºã—ã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">wget https://dl.google.com/go/go1.12.5.linux-amd64.tar.gz<font></font>
sudo tar -C /usr/<span class="hljs-built_in">local</span> -xzf go1.12.5.linux-amd64.tar.gz
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/<span class="hljs-built_in">local</span>/go/bin</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ«ãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Krewã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectlãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã‚’ç°¡ç•¥åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">Krewã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ¤œç´¢ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãŠã‚ˆã³ç®¡ç†ã‚’æ”¯æ´ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ©Ÿèƒ½ã«é–¢ã—ã¦ã¯ã€aptã€dnfã€brewãªã©ã®ãƒ„ãƒ¼ãƒ«ã«ä¼¼ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">Krewã¯kubectlãƒãƒ¼ã‚¸ãƒ§ãƒ³1.12ä»¥é™ã¨ã®ã¿äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">set</span> -x; <span class="hljs-built_in">cd</span> <span class="hljs-string">"<span class="hljs-subst">$(mktemp -d)</span>"</span> &amp;&amp;<font></font>
curl -fsSLO <span class="hljs-string">"https://storage.googleapis.com/krew/v0.2.1/krew.{tar.gz,yaml}"</span> &amp;&amp;<font></font>
tar zxvf krew.tar.gz &amp;&amp;<font></font>
./krew-<span class="hljs-string">"<span class="hljs-subst">$(uname | tr '[:upper:]' '[:lower:]')</span>_amd64"</span> install \<font></font>
    --manifest=krew.yaml --archive=krew.tar.gz<font></font>
<font></font>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"<span class="hljs-variable">${KREW_ROOT:-<span class="hljs-variable">$HOME</span>/.krew}</span>/bin:<span class="hljs-variable">$PATH</span>"</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ãƒƒã‚±ã‚¹</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»˜ä¸ã•ã‚ŒãŸã™ã¹ã¦ã®æ¨©é™ã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ä½•ãŒã§ãã‚‹ã‹ã¨ã„ã†è³ªå•ã«ç­”ãˆã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã¾ãšã€ãã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">kubectl krew install access-matrix</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚ŒãŒå½¼ã®ä½œå“ã®ä¾‹ã§ã™ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">kubectl access-matrix -n my-project-dev --as jean</code></pre><br>
<img src="https://habrastorage.org/webt/0g/sq/b6/0gsqb6cw-paqkn6yxbuozzccgpq.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubect-who-can</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã‚ˆã‚Šã€ç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">å½¼ã¯ã€Œã ã‚ŒãŒã“ã‚Œã‚’ã§ãã‚‹ã®ã‹ã€ã¨ã„ã†è³ªå•ã«ç­”ãˆã‚‹ã®ã‚’åŠ©ã‘ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">go get -v github.com/aquasecurity/kubectl-who-can</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä½œæ¥­ä¾‹ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">kubectl-who-can list pods -n default<font></font>
No subjects found with permissions to list pods assigned through RoleBindings<font></font>
<font></font>
CLUSTERROLEBINDING                                    SUBJECT                             TYPE            SA-NAMESPACE<font></font>
cluster-admin                                         system:masters                      Group           <font></font>
rbac-manager                                          rbac-manager                        ServiceAccount  rbac-manager<font></font>
system:controller:attachdetach-controller             attachdetach-controller             ServiceAccount  kube-system<font></font>
system:controller:clusterrole-aggregation-controller  clusterrole-aggregation-controller  ServiceAccount  kube-system<font></font>
system:controller:cronjob-controller                  cronjob-controller                  ServiceAccount  kube-system<font></font>
system:controller:daemon-set-controller               daemon-set-controller               ServiceAccount  kube-system<font></font>
system:controller:deployment-controller               deployment-controller               ServiceAccount  kube-system<font></font>
system:controller:endpoint-controller                 endpoint-controller                 ServiceAccount  kube-system<font></font>
system:controller:generic-garbage-collector           generic-garbage-collector           ServiceAccount  kube-system<font></font>
system:controller:horizontal-pod-autoscaler           horizontal-pod-autoscaler           ServiceAccount  kube-system<font></font>
system:controller:job-controller                      job-controller                      ServiceAccount  kube-system<font></font>
system:controller:namespace-controller                namespace-controller                ServiceAccount  kube-system<font></font>
system:controller:node-controller                     node-controller                     ServiceAccount  kube-system<font></font>
system:controller:persistent-volume-binder            persistent-volume-binder            ServiceAccount  kube-system<font></font>
system:controller:pod-garbage-collector               pod-garbage-collector               ServiceAccount  kube-system<font></font>
system:controller:pvc-protection-controller           pvc-protection-controller           ServiceAccount  kube-system<font></font>
system:controller:replicaset-controller               replicaset-controller               ServiceAccount  kube-system<font></font>
system:controller:replication-controller              replication-controller              ServiceAccount  kube-system<font></font>
system:controller:resourcequota-controller            resourcequota-controller            ServiceAccount  kube-system<font></font>
system:controller:statefulset-controller              statefulset-controller              ServiceAccount  kube-system<font></font>
system:coredns                                        coredns                             ServiceAccount  kube-system<font></font>
system:kube-controller-manager                        system:kube-controller-manager      User<font></font>
system:kube-scheduler                                 system:kube-scheduler               User</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rbac-lookup</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€RBACãƒ«ãƒ¼ãƒ«ã®æ¦‚è¦ã‚’æä¾›ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã€Œä½•å½¹å‰²ï¼šãã‚Œã¯è³ªå•ã«ç­”ãˆã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font><font style="vertical-align: inherit;">ã«å±ã—</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Ÿã€ã€ã€Œã©ã®ã‚ˆã†ãªå½¹å‰²ã‚’ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã«å±ã—ã¦ã„ã¾ã™ã‹ï¼Ÿã€ã€ã€Œã«å±ã—ã€ã‚°ãƒ«ãƒ¼ãƒ—å…¨ä½“ã‚’ã—ã¦ã©ã®ã‚ˆã†ãªå½¹å‰²ï¼Ÿã€ã€‚</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl krew install rbac-lookup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚ŒãŒä½œæ¥­ã®ä¾‹ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl-rbac_lookup jean<font></font>
SUBJECT   SCOPE       ROLE<font></font>
jean      my-project-dev    ClusterRole/edit<font></font>
jean      my-project-prod   ClusterRole/view<font></font>
<font></font>
kubectl-rbac_lookup sarah<font></font>
SUBJECT   SCOPE       ROLE<font></font>
sarah     my-project-prod   ClusterRole/edit<font></font>
<font></font>
kubectl-rbac_lookup --kind user<font></font>
SUBJECT                           SCOPE          ROLE<font></font>
jean                              my-project-dev       ClusterRole/edit<font></font>
jean                              my-project-prod      ClusterRole/view<font></font>
sarah                             my-project-prod      ClusterRole/edit<font></font>
system:anonymous                  kube-public    Role/kubeadm:bootstrap-signer-clusterinfo<font></font>
system:kube-controller-manager    kube-system    Role/extension-apiserver-authentication-reader<font></font>
system:kube-controller-manager    kube-system    Role/system::leader-locking-kube-controller-manager<font></font>
system:kube-controller-manager    cluster-wide   ClusterRole/system:kube-controller-manager<font></font>
system:kube-proxy                 cluster-wide   ClusterRole/system:node-proxier<font></font>
system:kube-scheduler             kube-system    Role/extension-apiserver-authentication-reader<font></font>
system:kube-scheduler             kube-system    Role/system::leader-locking-kube-scheduler<font></font>
system:kube-scheduler             cluster-wide   ClusterRole/system:kube-scheduler<font></font>
system:kube-scheduler             cluster-wide   ClusterRole/system:volume-scheduler<font></font>
<font></font>
kubectl-rbac_lookup --kind group<font></font>
SUBJECT                                            SCOPE          ROLE<font></font>
system:authenticated                               cluster-wide   ClusterRole/system:basic-user<font></font>
system:authenticated                               cluster-wide   ClusterRole/system:discovery<font></font>
system:authenticated                               cluster-wide   ClusterRole/system:public-info-viewer<font></font>
system:bootstrappers:kubeadm:default-node-token    cluster-wide   ClusterRole/system:node-bootstrapper<font></font>
system:bootstrappers:kubeadm:default-node-token    cluster-wide   ClusterRole/system:certificates.k8s.io:certificatesigningrequests:nodeclient<font></font>
system:bootstrappers:kubeadm:default-node-token    kube-system    Role/kube-proxy<font></font>
system:bootstrappers:kubeadm:default-node-token    kube-system    Role/kubeadm:kubelet-config-1.14<font></font>
system:bootstrappers:kubeadm:default-node-token    kube-system    Role/kubeadm:nodes-kubeadm-config<font></font>
system:masters                                     cluster-wide   ClusterRole/cluster-admin<font></font>
system:nodes                                       kube-system    Role/kubeadm:kubelet-config-1.14<font></font>
system:nodes                                       kube-system    Role/kubeadm:nodes-kubeadm-config<font></font>
system:nodes                                       cluster-wide   ClusterRole/system:certificates.k8s.io:certificatesigningrequests:selfnodeclient<font></font>
system:unauthenticated                             cluster-wide   ClusterRole/system:public-info-viewer</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBACãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã®åå‰ãŒâ€‹â€‹æ˜ã‚‰ã‹ã«æ„å‘³ã™ã‚‹ã‚ˆã†ã«</font><font style="vertical-align: inherit;">ã€å½¼ã¯RBACã®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã¯å¤šãã®å¿…è¦ãªæ“ä½œã‚’ç°¡ç´ åŒ–ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŠãã‚‰ãæœ€ã‚‚é‡è¦ãªã®ã¯ã€RoleBindingsã®ä½œæˆã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ç•°ãªã‚‹ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ã¨ãã¯ã€ç•°ãªã‚‹RoleBindingsã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã‚’ä»¥å‰ã«è¦‹ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">RBACãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä¸€åº¦ã«ã™ã¹ã¦ã®æ¨©é™ã‚’æŒã¤RoleBindingã‚’1ã¤ã ã‘å®Ÿè¡Œã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl apply -f /path/to/rbac/manager/yaml/file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä½œæ¥­ä¾‹ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: rbacmanager.reactiveops.io/v1beta1<font></font>
kind: RBACDefinition<font></font>
metadata:<font></font>
  name: jose<font></font>
rbacBindings:<font></font>
  - name: jose<font></font>
    subjects:<font></font>
      - kind: User<font></font>
        name: jose<font></font>
    roleBindings:<font></font>
      - namespace: my-project-prod<font></font>
        clusterRole: edit<font></font>
      - namespace: my-project-dev<font></font>
        clusterRole: edit</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenSSLã§X.509ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸ã‚’ä½¿ç”¨ã—ã¦Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã€ç‰¹æ¨©ã‚’ä»˜ä¸ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã‚’ç°¡å˜ã«ã™ã‚‹ãŸã‚ã«ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubã®ãƒªãƒã‚¸ãƒˆãƒªã«</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆã¾ãŸã¯å®Ÿé¨“çš„ãª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubeadmã‚³ãƒãƒ³ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -ç´„Translã€‚ï¼‰ã‚’ä½¿ç”¨ã§ã</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç®¡ç†ã«ã¤ã„ã¦ã¯ã€è¨˜äº‹ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl auth can-i</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãªã‚“ã‚‰ã‹ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rakkess</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿè¡Œã§ãã‚‹ã™ã¹ã¦ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã¾ã™ã€‚</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">kubectl-who-can</a>: ,      ;</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">rbac-lookup</a>:    RBAC;</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">RBAC Manager</a>:  ,    ,    RBAC,       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç‰¹ã«ä¸€åº¦ã«å¤šæ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¨­å®šã™ã‚‹ï¼ˆã¾ãŸã¯é »ç¹ã«ä½œæˆã™ã‚‹ï¼‰å¿…è¦ãŒã‚ã‚‹å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã¯éå¸¸ã«æ™‚é–“ã®ã‹ã‹ã‚‹ã‚¿ã‚¹ã‚¯ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">çŠ¶æ³ã‚’ç·©å’Œã™ã‚‹ãŸã‚ã«ã€ä¼æ¥­LDAPã‚’Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«æ¥ç¶šã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸€éƒ¨ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kismatic </font></font></a> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ”¾æ£„ã•ã‚ŒãŸã‚ˆã†ã«è¦‹ãˆã‚‹-ç´„Translã€‚]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectifLibre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã¯ã€LDAPã‚’ä»‹ã—ãŸç›´æ¥èªè¨¼ã‚’å¯èƒ½ã«ã™ã‚‹Kubernetes Webhookã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åˆ¥ã®å¯èƒ½ãªè§£æ±ºç­–ã¯ã€ä¼æ¥­ã®LDAPã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦OpenIDã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹æˆã™ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¿»è¨³è€…ã‹ã‚‰ã®PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã®ãƒ–ãƒ­ã‚°ã‚‚èª­ã‚“ã§ãã ã•ã„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ABCï¼šèªè¨¼ã€æ‰¿èªã€ç›£æŸ»</font></a><font style="vertical-align: inherit;">ã€;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesã®RBACã‚’ç†è§£ã™ã‚‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€;</font></font></li>
<li> Â«<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">33+    Kubernetes</a>Â»;</li>
<li> Â«<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">9       Kubernetes</a>Â».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja470489/index.html">Security Week 41ï¼šSIMã‚«ãƒ¼ãƒ‰ã®è„†å¼±æ€§ã€PDFå¾©å·</a></li>
<li><a href="../ja470491/index.html">ã¨ã’ã‹ã‚‰å¤¢ã®ã‚²ãƒ¼ãƒ ã¸-ç”Ÿãç‰©ã®é€²æ­©ã¨é€²åŒ–</a></li>
<li><a href="../ja470497/index.html">systemd-nspawnã‚’ä½¿ç”¨ã—ã¦Linuxã‚·ã‚¹ãƒ†ãƒ ã‚’å¾©å…ƒã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja470499/index.html">Unity Animatorã§å‰²ã‚Šè¾¼ã¿ã‚’æœ€å¤§é™ã«ä½¿ç”¨ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja470501/index.html">éåŒæœŸçµŒç”±ã®ãƒ¢ãƒŠãƒ‰ã€Œãƒªãƒ¼ãƒ€ãƒ¼ã€/ Cã§å¾…æ©Ÿï¼ƒ</a></li>
<li><a href="../ja470511/index.html">ã‚¢ãƒ«ãƒ¡ãƒ‹ã‚¢ã®ITï¼šå›½ã®æˆ¦ç•¥çš„ã‚»ã‚¯ã‚¿ãƒ¼ã¨æŠ€è¡“åˆ†é‡</a></li>
<li><a href="../ja470513/index.html">ãƒœãƒƒãƒˆãƒãƒƒãƒˆã«æ”¯é…ã•ã‚ŒãŸã‚¹ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ ã‚’è¦‹ã¤ã‘ãŸæ–¹æ³•</a></li>
<li><a href="../ja470515/index.html">ãƒ†ã‚¹ã‚¿ãƒ¼ã«â€‹â€‹ã¨ã£ã¦ã®å°ã•ãªä¸€æ­©ï¼šãƒã‚¤ã‚¼ãƒ³ãƒã‚°2019 Piterã®ä¸Šä½10ä»¶ã®ãƒ¬ãƒãƒ¼ãƒˆ</a></li>
<li><a href="../ja470517/index.html">æœ€å°ã®ãƒ­ã‚·ã‚¢EP</a></li>
<li><a href="../ja470519/index.html">ã‚·ãƒ³ã‚°ãƒ«ãƒœãƒ¼ãƒ‰æ›´æ–°ç”¨ã®Linuxã‚¢ã‚»ãƒ³ãƒ–ãƒªã®æ§‹ç¯‰çµŒé¨“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>