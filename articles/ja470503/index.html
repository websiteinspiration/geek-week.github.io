<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♎️ ⛹🏽 🌲 Kubernetes RBACのユーザーと承認 😮 🦌 🎎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意ペレフ。：継続的なKubernetesセキュリティ全般、および最近触れた RBAC、特に、Adaltas Big Data国際企業のフランス人コンサルタントによるこの資料の翻訳を公開しています。著者は、ユーザーを作成し、ユーザーに権利を与え、サービスを継続する方法を詳しく示しています。
 
 K...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes RBACのユーザーと承認</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/470503/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意ペレフ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：継続的な</font><font style="vertical-align: inherit;">Kubernetesセキュリティ全般、および</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近触れた</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RBAC、特に、Adaltas Big Data国際企業のフランス人コンサルタントによるこの資料の翻訳を公開しています。著者は、ユーザーを作成し、ユーザーに権利を与え、サービスを継続する方法を詳しく示しています。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kubernetesクラスターのセットアップと開始はほんの始まりにすぎません。これも活用する必要があります。クラスターへのアクセスを保護するには、ユーザーの資格情報を設定し、認証と承認の設定を正しく管理する必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/m5/y9/az/m5y9azz-gbidcxue2_eesz-gvxo.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNCFブログ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">抜粋</font></a><font style="vertical-align: inherit;">し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">た図</font></a><font style="vertical-align: inherit;"> -約Transl。）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この記事では</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X.509</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアント証明書を使用してユーザーを作成する</font><font style="vertical-align: inherit;">方法と</font><font style="vertical-align: inherit;">、Kubernetesで</font><font style="vertical-align: inherit;">基本的な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBAC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> APIを使用して承認を管理する方法について説明します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、クラスター管理を簡素化するいくつかのオープンソースプロジェクトについて話します：rakkess、kubectl-who-can、rbac-lookup、およびRBACマネージャー。</font></font><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前提条件と仮定</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず最初に、いくつかの仮定を行う必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">少なくとも</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Kubernetesの動作を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">想像できます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesまたは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minikubeクラスターが機能している</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたは持っている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl CLIユーティリティがインストールさ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージがインストールされている</font><font style="vertical-align: inherit;">。</font></font></li>
</ul><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既製のKubernetesクラスターがない場合は、同僚の記事（Arthur BUSSER）を参照して、</font><font style="vertical-align: inherit;">Vagrantを使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してCentOS 7にKubernetesをインストールする方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を説明することをお勧めします</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスターには4つのノードがあります。1つはマスター、3つはワーカーです。</font><font style="vertical-align: inherit;">ウィザードは、クラスターと対話するエッジノードとしても使用されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBAC API</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
役割ベースのアクセス制御（RBAC）は、企業内の個々のユーザーの役割に基づいて、コンピューターおよびネットワークリソースへのアクセスを制御する方法です。</font><font style="vertical-align: inherit;">RBACは、CRUD（作成、読み取り、更新、削除）をサポートするすべてのKubernetesリソースで使用できます。</font><font style="vertical-align: inherit;">そのようなリソースの例：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 名前空間</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ポッド</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 配置</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 永続ボリューム（PersistentVolumes）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ConfigMaps</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これらはそれらで可能な操作の例です：</font></font><br>
<br>
<ul>
<li> <code>create</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（作成）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>get</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（領収書）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>delete</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（削除）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>list</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（リストを表示）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <code>update</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（更新）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KubernetesでRBACを管理するには、以下を宣言する必要があります。</font></font><br>
<br>
<ul>
<li> <b><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>ClusterRole</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらは、単に一連の権限を表すルールセットです。</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前空間内のリソースへのアクセスを提供するためにのみ使用できます。</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同じ権限を提供</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できます。また、クラスタ全体で使用可能なリソース、およびいわゆる非リソースエンドポイント</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code>/healthz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-約transl。など）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">へのアクセスを提供できます</font><font style="vertical-align: inherit;">。</font></font></li>
<li> <b><code>Subjects</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">サブジェクトは、クラスターで操作を実行するエンティティーです。</font><font style="vertical-align: inherit;">ユーザー、サービス、またはグループの場合もあります。</font></font></li>
<li> <b><code>RoleBinding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>ClusterRoleBinding</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">名前が示すように、これはロールまたはClusterRoleへのサブジェクトのバインディングです。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesには次のデフォルトの役割があります。</font></font><br>
<br>
<ul>
<li> <code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：読み取り専用アクセス、シークレットを除く。</font></font></li>
<li> <code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：上記のリスト+ほとんどのリソースを編集する機能、ロールとロールバインディングを除く。</font></font></li>
<li> <code>admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：上記+名前空間レベルでロールとロールマッピングを管理する機能。</font></font></li>
<li> <code>cluster-admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：可能なすべての特権。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、独自の</font></font><code>Roles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">を作成することもできます</font></font><code>ClusterRoles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、状況が許す限り、できるだけデフォルトの役割を使用することをお勧めします。</font><font style="vertical-align: inherit;">そうしないと、このすべてにすぐに混乱する可能性があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用例</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々は2つの名前空間を作成します。</font></font><code>my-project-dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 -だけでなく、二人のユーザー：</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これらの名前空間で異なる役割を持ちます：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my-project-dev：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ジーンズ：編集</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my-project-prod：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジーンズ：ビュー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サラ：編集</font></font></li>
</ul></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X.509クライアント証明書を使用してユーザーを作成および認証する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、ユーザーに</font><font style="vertical-align: inherit;">は、Kubernetesによって管理される</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスアカウント</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と通常のユーザーの</font><font style="vertical-align: inherit;">2種類が</font><font style="vertical-align: inherit;">あります。</font><font style="vertical-align: inherit;">後者に焦点を当てます。</font><font style="vertical-align: inherit;">公式ドキュメントでの説明は次のとおりです。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常のユーザーは外部の独立したサービスによって管理されていることを前提としています。</font><font style="vertical-align: inherit;">この役割は、秘密鍵を配布する管理者、KeystoneやGoogleアカウントなどのユーザーリポジトリ、またはユーザー名とパスワードのリストが含まれるファイルでさえ果たすことができます。</font><font style="vertical-align: inherit;">この点で、Kubernetesには一般ユーザーを表すオブジェクトはありません。</font><font style="vertical-align: inherit;">通常のユーザーは、API呼び出しを介してクラスターに追加することはできません。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のユーザーを管理する方法はいくつかあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">認証</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 次の（または類似の）内容で構成をAPIサーバーに転送する：パスワード、ユーザー名、uid、グループ。</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> X.509クライアント証明書：</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ユーザーの秘密鍵と証明書署名リクエストの作成。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ユーザー証明書を取得するための証明機関（Kubernetes CA）での証明書。</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ベアラートークン（JSON Web Tokens、JWT）：</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenID Connect</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OAuth 2.0上の認証レイヤー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webフック</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（webhooks）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、X.509証明書とOpenSSL証明書を使用します。それらは単純であるためです。</font><font style="vertical-align: inherit;">ユーザーの作成は、いくつかの段階で行われます-すべての手順を実行します。</font><font style="vertical-align: inherit;">操作は、クラスターの管理者権限を持つユーザーアカウント（cluster-admin）で実行する必要があります。</font><font style="vertical-align: inherit;">ユーザーを作成するためのすべての手順は次のとおりです（例：）</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ウィザードでユーザーを作成し、ホームディレクトリに移動して残りの手順を完了します。</font></font><br>
<br>
<pre><code class="bash hljs">useradd jean &amp;&amp; <span class="hljs-built_in">cd</span> /home/jean</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 秘密鍵を作成します。</font></font><br>
<br>
<pre><code class="bash hljs">openssl genrsa -out jean.key 2048</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">証明書署名要求（CSR）を作成します。</font></font><code>CN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ユーザー名、</font></font><code>O</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-グループ。</font><font style="vertical-align: inherit;">グループごとに権限を設定できます。</font><font style="vertical-align: inherit;">これにより、たとえば、同じ権限を持つ多くのユーザーがいる場合、作業が簡単になります。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#  </span><font></font>
openssl req -new -key jean.key \<font></font>
-out jean.csr \<font></font>
-subj <span class="hljs-string">"/CN=jean"</span><font></font>
<font></font>
<span class="hljs-comment">#     $group</span><font></font>
openssl req -new -key jean.key \<font></font>
-out jean.csr \<font></font>
-subj <span class="hljs-string">"/CN=jean/O=<span class="hljs-variable">$group</span>"</span><font></font>
<font></font>
<span class="hljs-comment">#      </span><font></font>
openssl req -new -key jean.key \<font></font>
-out jean.csr \<font></font>
-subj <span class="hljs-string">"/CN=jean/O=<span class="hljs-variable">$group1</span>/O=<span class="hljs-variable">$group2</span>/O=<span class="hljs-variable">$group3</span>"</span></code></pre></li>
<li>  CSR  Kubernetes CA.     CA  ,     <code>/etc/kubernetes/pki</code>.      500 :<br>
<br>
<pre><code class="bash hljs">openssl x509 -req -<span class="hljs-keyword">in</span> jean.csr \<font></font>
-CA /etc/kubernetes/pki/ca.crt \<font></font>
-CAkey /etc/kubernetes/pki/ca.key \<font></font>
-CAcreateserial \<font></font>
-out jean.crt -days 500</code></pre></li>
<li>   <code>.certs</code>.          :<br>
<br>
<pre><code class="bash hljs">mkdir .certs &amp;&amp; mv jean.crt jean.key .certs</code></pre></li>
<li>    Kubernetes:<br>
<br>
<pre><code class="bash hljs">kubectl config <span class="hljs-built_in">set</span>-credentials jean \<font></font>
--client-certificate=/home/jean/.certs/jean.crt \<font></font>
--client-key=/home/jean/.certs/jean.key</code></pre></li>
<li>    :<br>
<br>
<pre><code class="bash hljs">kubectl config <span class="hljs-built_in">set</span>-context jean-context \<font></font>
--cluster=kubernetes --user=jean</code></pre></li>
<li>    .    ,     .     ,     <code>/etc/kubernetes</code>:  <code>certificate-authority-data</code>  <code>server</code>    ,    :<br>
<br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
clusters:<font></font>
- cluster:<font></font>
 certificate-authority-data: {  }<font></font>
 server: {  }<font></font>
name: kubernetes<font></font>
contexts:<font></font>
- context:<font></font>
 cluster: kubernetes<font></font>
 user: jean<font></font>
name: jean-context<font></font>
current-context: jean-context<font></font>
kind: Config<font></font>
preferences: {}<font></font>
users:<font></font>
- name: jean<font></font>
user:<font></font>
 client-certificate: /home/jean/.certs/jean.cert<font></font>
 client-key: /home/jean/.certs/jean.key</code></pre><br>
        <code>.kube</code>:<br>
<br>
<pre><code class="bash hljs">mkdir .kube &amp;&amp; vi .kube/config</code></pre></li>
<li>         :<br>
<br>
<pre><code class="bash hljs">chown -R jean: /home/jean/</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーが</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成されました。ユーザーに対しても同じようにします</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。かなりの数のステップがあり、多数のユーザーを作成するには長い時間がかかる場合があります。そのため、私はプロセスを自動化するBashスクリプトを作成しました。それらは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">リポジトリにあります</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意ペレフ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近の記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">書いたように</font><font style="vertical-align: inherit;">、この手順は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、kubeadmコンソールユーティリティの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新機能により</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;"> Kubernetesに対してより「ネイティブ」な方法で簡略化でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。ただし、この翻訳の公開時には、アルファ版で提供されていることに注意してください。ユーザーを作成するコマンドの例は</font></font><code>kubeadm alpha kubeconfig user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これでユーザーができました。次の2つの名前空間の作成に移ります。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl create namespace my-project-dev<font></font>
kubectl create namespace my-project-prod</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーの承認はまだ決定していないため、ユーザーはクラスターリソースにアクセスできません。</font></font><br>
<br>
<pre><code class="bash hljs">User: Jean<font></font>
<font></font>
kubectl get nodes<font></font>
Error from server (Forbidden): nodes is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"nodes"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> at the cluster scope<font></font>
<font></font>
kubectl get pods -n default<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"default"</span><font></font>
<font></font>
kubectl get pods -n my-project-prod<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-prod"</span><font></font>
<font></font>
kubectl get pods -n my-project-dev<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"jean"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span></code></pre><br>
<pre><code class="bash hljs">User: Sarah<font></font>
<font></font>
kubectl get nodes<font></font>
Error from server (Forbidden): nodes is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"nodes"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> at the cluster scope<font></font>
<font></font>
kubectl get pods -n default<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"default"</span><font></font>
<font></font>
kubectl get pods -n my-project-prod<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-prod"</span><font></font>
<font></font>
kubectl get pods -n my-project-dev<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RoleとClusterRoleの作成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、使用する</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトでは、利用できます。</font><font style="vertical-align: inherit;">ただし、独自の</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font><font style="vertical-align: inherit;">を作成する方法も示します</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本質的に、</font></font><code>Role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これはアクションのセットだけである</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（と呼ばれる</font></font><code>verbs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 「動詞」は文字通り、ある、）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のリソースおよび名前空間のために許可されています。</font><font style="vertical-align: inherit;">次にYAMLファイルの例を示します。</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: rbac.authorization.k8s.io/v1beta1<font></font>
kind: Role<font></font>
metadata:<font></font>
  name: list-deployments<font></font>
  namespace: my-project-dev<font></font>
rules:<font></font>
  - apiGroups: [ apps ]<font></font>
    resources: [ deployments ]<font></font>
    verbs: [ get, list ]<font></font>
---------------------------------<font></font>
apiVersion: rbac.authorization.k8s.io/v1beta1<font></font>
kind: ClusterRole<font></font>
metadata:<font></font>
  name: list-deployments<font></font>
rules:<font></font>
  - apiGroups: [ apps ]<font></font>
    resources: [ deployments ]<font></font>
    verbs: [ get, list ]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらを作成するには、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl create -f /path/to/your/yaml/file</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーへのRoleまたはClusterRoleのバインド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今タイ</font></font><code>ClusterRole</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトの（</font></font><code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次のようにユーザーの皆様へ）：</font></font><br>
<br>
<ul>
<li><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><ul>
<li> <code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-名前空間内</font></font><code>my-project-dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li> <code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-名前空間内</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
</ul></li>
<li><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><ul>
<li> <code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-名前空間内</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RoleBindingsは、ユーザーではなくネームスペースで指定する必要があります。</font><font style="vertical-align: inherit;">つまり、承認の</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために2つのRoleBindingsを作成します。</font><font style="vertical-align: inherit;">のRoleBindingsを定義するYAMLファイルの例</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: rbac.authorization.k8s.io/v1<font></font>
kind: RoleBinding<font></font>
metadata:<font></font>
  name: jean<font></font>
  namespace: my-project-dev<font></font>
subjects:<font></font>
- kind: User<font></font>
  name: jean<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
roleRef:<font></font>
  kind: ClusterRole<font></font>
  name: edit<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
---------------------------------<font></font>
apiVersion: rbac.authorization.k8s.io/v1<font></font>
kind: RoleBinding<font></font>
metadata:<font></font>
  name: jean<font></font>
  namespace: my-project-prod<font></font>
subjects:<font></font>
- kind: User<font></font>
  name: jean<font></font>
  apiGroup: rbac.authorization.k8s.io<font></font>
roleRef:<font></font>
  kind: ClusterRole<font></font>
  name: view<font></font>
  apiGroup: rbac.authorization.k8s.io</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々が許す</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">閲覧（</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><code>my-project-prod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と編集（</font></font><code>edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><code>my-project-dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同じことをの承認でも行う必要があります</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらをアクティブにするには、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl apply -f /path/to/your/yaml/file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、</font></font><code>kubectl apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わり</font><font style="vertical-align: inherit;">にが使用され</font><font style="vertical-align: inherit;">ました</font></font><code>kubectl create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらの違い</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、オブジェクトを作成し、それ以外には何もしないということです。</font></font><code>apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（存在しない場合）オブジェクトを作成するだけでなく、必要に応じて更新も行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーが必要な権限を受け取っているかどうかを確認しましょう。</font></font><br>
<br>
<ul>
<li> : <code>sarah</code> (<code>edit</code>  <code>my-project-prod</code>)<ul>
<li> <code>my-project-prod</code><ul>
<li>    pod' (1);</li>
<li>   deployment' (2).</li>
</ul></li>
<li> <code>my-project-dev</code><ul>
<li>     pod' (4);</li>
<li>    deployment' (5).</li>
</ul></li>
</ul></li>
</ul><br>
<pre><code class="bash hljs">(1) kubectl get pods -n my-project-prod <font></font>
No resources found. <font></font>
<font></font>
(2) kubectl run nginx --image=nginx --replicas=1 -n my-project-prod <font></font>
deployment.apps/nginx created <font></font>
<font></font>
(3) kubectl get pods -n my-project-prod <font></font>
NAME                    READY  STATUS   RESTARTS  AGE <font></font>
nginx-7db9fccd9b-t14qw  1/1    Running  0         4s <font></font>
<font></font>
(4) kubectl get pods -n my-project-dev<font></font>
Error from server (Forbidden): pods is forbidden: User <span class="hljs-string">"sarah"</span> cannot list resource <span class="hljs-string">"pods"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">""</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span><font></font>
<font></font>
(5) kubectl run nginx --image=nginx --replicas=1 -n my-project-dev <font></font>
Error from server (Forbidden): deployments.apps is forbidden: User <span class="hljs-string">"sarah"</span> cannot create resource <span class="hljs-string">"deployments"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">"apps"</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-dev"</span></code></pre><br>
<ul>
<li>: <code>jean</code> (<code>view</code>  <code>my-project-prod</code>  <code>edit</code>  <code>my-project-dev</code>)<ul>
<li> <code>my-project-prod</code><ul>
<li>    pod' (1);</li>
<li>    deployment' (2);</li>
<li>    deployment' (3).</li>
</ul></li>
<li> my-project-dev:<ul>
<li>    pod' (4);</li>
<li>   deployment' (5);</li>
<li>    deployment' (6);</li>
<li>   deployment' (7).</li>
</ul></li>
</ul></li>
</ul><br>
<pre><code class="bash hljs">(1) kubectl get pods -n my-project-prod <font></font>
NAME                    READY  STATUS   RESTARTS  AGE <font></font>
nginx-7db9fccd9b-t14qw  1/1    Running  0         101s <font></font>
<font></font>
(2) kubectl get deploy -n my-project-prod <font></font>
NAME   READY  UP-TO-DATE  AVAILABLE  AGE <font></font>
nginx  1/1    1           1          110s <font></font>
<font></font>
(3) kubectl delete deploy/nginx -n my-project-prod <font></font>
Error from server (Forbidden): deployments.extensions <span class="hljs-string">"nginx"</span> is forbidden: User <span class="hljs-string">"jean"</span> cannot delete resource <span class="hljs-string">"deployments"</span> <span class="hljs-keyword">in</span> API group <span class="hljs-string">"extensions"</span> <span class="hljs-keyword">in</span> the namespace <span class="hljs-string">"my-project-prod"</span> <font></font>
<font></font>
(4) kubectl get pods -n my-project-dev<font></font>
No resources found. <font></font>
<font></font>
(5) kubectl run nginx --image=nginx --replicas=1 -n my-project-dev <font></font>
deployment.apps/nginx created <font></font>
<font></font>
(6) kubectl get deploy -n my-project-dev <font></font>
NAME   READY  UP-TO-DATE  AVAILABLE  AGE <font></font>
nginx  0/1    1           0          13s <font></font>
<font></font>
(7) kubectl delete deploy/nginx -n my-project-dev <font></font>
deployment.extensions <span class="hljs-string">"nginx"</span> deleted <font></font>
<font></font>
(8) kubectl get deploy -n my-project-dev <font></font>
No resources found.</code></pre><br>
<h2>    </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、さまざまな役割とユーザー認証を正常に設定できました。疑問が生じます：これをすべて管理する方法は？特定のユーザーのアクセス許可が正しく設定されているかどうかを確認するにはどうすればよいですか？特定のアクションを実行する権限を持つ人物をどのようにして知っていますか？ユーザー権限の全体像を取得するにはどうすればよいですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスタのセキュリティを確保するには、これらすべての質問に対する答えが必要です。このコマンドを</font></font><code>kubectl auth can-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用すると、ユーザーが特定のアクションを実行できるかどうかを確認できます。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># kubectl auth can-i $action $resource --as $subject</span><font></font>
<font></font>
(1) kubectl auth can-i list pods <font></font>
(2) kubectl auth can-i list pods --as jean</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のコマンド（1）により、ユーザーはアクションを実行できるかどうかを確認できます。</font><font style="vertical-align: inherit;">2番目（2）-管理者がユーザーになりすまして、特定のアクションを実行できるかどうかを確認できます。</font><font style="vertical-align: inherit;">この「生まれ変わり」は、クラスタ管理者権限を持つユーザーにのみ許可されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、組み込みのツールを使用して実行できる事実上すべてです。</font><font style="vertical-align: inherit;">そのため、kubectl auth can-iチームが提供する機能を拡張するいくつかのオープンソースプロジェクトを紹介します。</font><font style="vertical-align: inherit;">それらを紹介する前に、依存関係を確立しましょう：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Krew</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールに行く</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goは、シンプルで信頼性が高く効率的なソフトウェアを作成できるオープンソースのプログラミング言語です。</font><font style="vertical-align: inherit;">これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Robert Griesemer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rob Pike</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ken Thompson</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の独自のコンセプトに基づいて、CおよびPascalのインスピレーションの下にGoogleが開発しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">wget https://dl.google.com/go/go1.12.5.linux-amd64.tar.gz<font></font>
sudo tar -C /usr/<span class="hljs-built_in">local</span> -xzf go1.12.5.linux-amd64.tar.gz
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/<span class="hljs-built_in">local</span>/go/bin</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クルーのインストール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Krewは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectlプラグインの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用を簡略化するツールです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Krewは、プラグインの検索、インストール、および管理を支援します。</font><font style="vertical-align: inherit;">機能に関しては、apt、dnf、brewなどのツールに似ています。</font><font style="vertical-align: inherit;">Krewはkubectlバージョン1.12以降とのみ互換性があります。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">set</span> -x; <span class="hljs-built_in">cd</span> <span class="hljs-string">"<span class="hljs-subst">$(mktemp -d)</span>"</span> &amp;&amp;<font></font>
curl -fsSLO <span class="hljs-string">"https://storage.googleapis.com/krew/v0.2.1/krew.{tar.gz,yaml}"</span> &amp;&amp;<font></font>
tar zxvf krew.tar.gz &amp;&amp;<font></font>
./krew-<span class="hljs-string">"<span class="hljs-subst">$(uname | tr '[:upper:]' '[:lower:]')</span>_amd64"</span> install \<font></font>
    --manifest=krew.yaml --archive=krew.tar.gz<font></font>
<font></font>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"<span class="hljs-variable">${KREW_ROOT:-<span class="hljs-variable">$HOME</span>/.krew}</span>/bin:<span class="hljs-variable">$PATH</span>"</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラッケス</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このプロジェクトで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ユーザーに付与されたすべての権限を表示できます。</font><font style="vertical-align: inherit;">たとえば、何ができるかという質問に答えるのに役立ちます</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">まず、それをインストールしましょう：</font></font><br>
<br>
<pre><code class="bash hljs">kubectl krew install access-matrix</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトのドキュメントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">リポジトリにあります</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これが彼の作品の例です：</font></font><br>
<br>
<pre><code class="bash hljs">kubectl access-matrix -n my-project-dev --as jean</code></pre><br>
<img src="https://habrastorage.org/webt/0g/sq/b6/0gsqb6cw-paqkn6yxbuozzccgpq.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubect-who-can</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このプロジェクト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">により、特定のアクションを実行できるユーザーを見つけることができます。</font><font style="vertical-align: inherit;">彼は「だれがこれをできるのか」という質問に答えるのを助けます。</font><font style="vertical-align: inherit;">インストール：</font></font><br>
<br>
<pre><code class="bash hljs">go get -v github.com/aquasecurity/kubectl-who-can</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubリポジトリにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">作業例：</font></font><br>
<br>
<pre><code class="bash hljs">kubectl-who-can list pods -n default<font></font>
No subjects found with permissions to list pods assigned through RoleBindings<font></font>
<font></font>
CLUSTERROLEBINDING                                    SUBJECT                             TYPE            SA-NAMESPACE<font></font>
cluster-admin                                         system:masters                      Group           <font></font>
rbac-manager                                          rbac-manager                        ServiceAccount  rbac-manager<font></font>
system:controller:attachdetach-controller             attachdetach-controller             ServiceAccount  kube-system<font></font>
system:controller:clusterrole-aggregation-controller  clusterrole-aggregation-controller  ServiceAccount  kube-system<font></font>
system:controller:cronjob-controller                  cronjob-controller                  ServiceAccount  kube-system<font></font>
system:controller:daemon-set-controller               daemon-set-controller               ServiceAccount  kube-system<font></font>
system:controller:deployment-controller               deployment-controller               ServiceAccount  kube-system<font></font>
system:controller:endpoint-controller                 endpoint-controller                 ServiceAccount  kube-system<font></font>
system:controller:generic-garbage-collector           generic-garbage-collector           ServiceAccount  kube-system<font></font>
system:controller:horizontal-pod-autoscaler           horizontal-pod-autoscaler           ServiceAccount  kube-system<font></font>
system:controller:job-controller                      job-controller                      ServiceAccount  kube-system<font></font>
system:controller:namespace-controller                namespace-controller                ServiceAccount  kube-system<font></font>
system:controller:node-controller                     node-controller                     ServiceAccount  kube-system<font></font>
system:controller:persistent-volume-binder            persistent-volume-binder            ServiceAccount  kube-system<font></font>
system:controller:pod-garbage-collector               pod-garbage-collector               ServiceAccount  kube-system<font></font>
system:controller:pvc-protection-controller           pvc-protection-controller           ServiceAccount  kube-system<font></font>
system:controller:replicaset-controller               replicaset-controller               ServiceAccount  kube-system<font></font>
system:controller:replication-controller              replication-controller              ServiceAccount  kube-system<font></font>
system:controller:resourcequota-controller            resourcequota-controller            ServiceAccount  kube-system<font></font>
system:controller:statefulset-controller              statefulset-controller              ServiceAccount  kube-system<font></font>
system:coredns                                        coredns                             ServiceAccount  kube-system<font></font>
system:kube-controller-manager                        system:kube-controller-manager      User<font></font>
system:kube-scheduler                                 system:kube-scheduler               User</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rbac-lookup</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このプロジェクト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、RBACルールの概要を提供します。</font><font style="vertical-align: inherit;">「何役割：それは質問に答えるのに役立ちます</font></font><code>jean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">に属し</font></font><code>sarah</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？」、「どのような役割をすべてのユーザーはに属していますか？」、「に属し、グループ全体をしてどのような役割？」。</font><font style="vertical-align: inherit;">インストールするには、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl krew install rbac-lookup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubリポジトリにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これが作業の例です。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl-rbac_lookup jean<font></font>
SUBJECT   SCOPE       ROLE<font></font>
jean      my-project-dev    ClusterRole/edit<font></font>
jean      my-project-prod   ClusterRole/view<font></font>
<font></font>
kubectl-rbac_lookup sarah<font></font>
SUBJECT   SCOPE       ROLE<font></font>
sarah     my-project-prod   ClusterRole/edit<font></font>
<font></font>
kubectl-rbac_lookup --kind user<font></font>
SUBJECT                           SCOPE          ROLE<font></font>
jean                              my-project-dev       ClusterRole/edit<font></font>
jean                              my-project-prod      ClusterRole/view<font></font>
sarah                             my-project-prod      ClusterRole/edit<font></font>
system:anonymous                  kube-public    Role/kubeadm:bootstrap-signer-clusterinfo<font></font>
system:kube-controller-manager    kube-system    Role/extension-apiserver-authentication-reader<font></font>
system:kube-controller-manager    kube-system    Role/system::leader-locking-kube-controller-manager<font></font>
system:kube-controller-manager    cluster-wide   ClusterRole/system:kube-controller-manager<font></font>
system:kube-proxy                 cluster-wide   ClusterRole/system:node-proxier<font></font>
system:kube-scheduler             kube-system    Role/extension-apiserver-authentication-reader<font></font>
system:kube-scheduler             kube-system    Role/system::leader-locking-kube-scheduler<font></font>
system:kube-scheduler             cluster-wide   ClusterRole/system:kube-scheduler<font></font>
system:kube-scheduler             cluster-wide   ClusterRole/system:volume-scheduler<font></font>
<font></font>
kubectl-rbac_lookup --kind group<font></font>
SUBJECT                                            SCOPE          ROLE<font></font>
system:authenticated                               cluster-wide   ClusterRole/system:basic-user<font></font>
system:authenticated                               cluster-wide   ClusterRole/system:discovery<font></font>
system:authenticated                               cluster-wide   ClusterRole/system:public-info-viewer<font></font>
system:bootstrappers:kubeadm:default-node-token    cluster-wide   ClusterRole/system:node-bootstrapper<font></font>
system:bootstrappers:kubeadm:default-node-token    cluster-wide   ClusterRole/system:certificates.k8s.io:certificatesigningrequests:nodeclient<font></font>
system:bootstrappers:kubeadm:default-node-token    kube-system    Role/kube-proxy<font></font>
system:bootstrappers:kubeadm:default-node-token    kube-system    Role/kubeadm:kubelet-config-1.14<font></font>
system:bootstrappers:kubeadm:default-node-token    kube-system    Role/kubeadm:nodes-kubeadm-config<font></font>
system:masters                                     cluster-wide   ClusterRole/cluster-admin<font></font>
system:nodes                                       kube-system    Role/kubeadm:kubelet-config-1.14<font></font>
system:nodes                                       kube-system    Role/kubeadm:nodes-kubeadm-config<font></font>
system:nodes                                       cluster-wide   ClusterRole/system:certificates.k8s.io:certificatesigningrequests:selfnodeclient<font></font>
system:unauthenticated                             cluster-wide   ClusterRole/system:public-info-viewer</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBACマネージャー</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このプロジェクト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の名前が​​明らかに意味するように</font><font style="vertical-align: inherit;">、彼はRBACのマネージャーです。</font><font style="vertical-align: inherit;">それは多くの必要な操作を簡素化します。</font><font style="vertical-align: inherit;">おそらく最も重要なのは、RoleBindingsの作成です。</font><font style="vertical-align: inherit;">ユーザーに対して異なるロールを作成するときは、異なるRoleBindingsを作成する必要があることを以前に見ました。</font><font style="vertical-align: inherit;">RBACマネージャーを使用すると、一度にすべての権限を持つRoleBindingを1つだけ実行できます。</font><font style="vertical-align: inherit;">インストールするには、GitHubのリポジトリからYAMLファイルをダウンロードする必要があります。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl apply -f /path/to/rbac/manager/yaml/file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公式ドキュメントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubリポジトリにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">作業例：</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: rbacmanager.reactiveops.io/v1beta1<font></font>
kind: RBACDefinition<font></font>
metadata:<font></font>
  name: jose<font></font>
rbacBindings:<font></font>
  - name: jose<font></font>
    subjects:<font></font>
      - kind: User<font></font>
        name: jose<font></font>
    roleBindings:<font></font>
      - namespace: my-project-prod<font></font>
        clusterRole: edit<font></font>
      - namespace: my-project-dev<font></font>
        clusterRole: edit</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenSSLでX.509クライアント証明書を使用してKubernetesクラスターにユーザーを作成し、特権を付与しました。</font><font style="vertical-align: inherit;">ユーザーの作成を簡単にするために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubのリポジトリに</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あるスクリプト</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（または実験的な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubeadmコマンド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -約Transl。）を使用でき</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">クラスター管理については、記事に記載されているオープンソースプロジェクトを使用できます。</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl auth can-i</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ユーザーがなんらかのアクションを実行できるかどうかを確認します。</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rakkess</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ユーザーが実行できるすべてのアクションを見つけます。</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">kubectl-who-can</a>: ,      ;</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">rbac-lookup</a>:    RBAC;</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">RBAC Manager</a>:  ,    ,    RBAC,       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に一度に多数のユーザーを設定する（または頻繁に作成する）必要がある場合、ユーザーの作成は非常に時間のかかるタスクになる可能性があります。</font><font style="vertical-align: inherit;">状況を緩和するために、企業LDAPをKubernetesクラスターに接続できます。</font><font style="vertical-align: inherit;">一部のオープンソースプロジェクト（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kismatic </font></font></a> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[プロジェクトは放棄されたように見える-約Transl。]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectifLibre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は、LDAPを介した直接認証を可能にするKubernetes Webhookを提供しています。</font><font style="vertical-align: inherit;">別の可能な解決策は、企業のLDAPをバックエンドとしてOpenIDサーバーを構成することです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者からのPS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesのセキュリティ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ABC：認証、承認、監査</font></a><font style="vertical-align: inherit;">」;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KubernetesのRBACを理解する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">33+    Kubernetes</a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">9       Kubernetes</a>».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja470489/index.html">Security Week 41：SIMカードの脆弱性、PDF復号</a></li>
<li><a href="../ja470491/index.html">とげから夢のゲームへ-生き物の進歩と進化</a></li>
<li><a href="../ja470497/index.html">systemd-nspawnを使用してLinuxシステムを復元する方法</a></li>
<li><a href="../ja470499/index.html">Unity Animatorで割り込みを最大限に使用する方法</a></li>
<li><a href="../ja470501/index.html">非同期経由のモナド「リーダー」/ Cで待機＃</a></li>
<li><a href="../ja470511/index.html">アルメニアのIT：国の戦略的セクターと技術分野</a></li>
<li><a href="../ja470513/index.html">ボットネットに支配されたスマートホームを見つけた方法</a></li>
<li><a href="../ja470515/index.html">テスターに​​とっての小さな一歩：ハイゼンバグ2019 Piterの上位10件のレポート</a></li>
<li><a href="../ja470517/index.html">最小のロシアEP</a></li>
<li><a href="../ja470519/index.html">シングルボード更新用のLinuxアセンブリの構築経験</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>