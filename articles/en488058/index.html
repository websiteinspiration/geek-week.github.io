<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëø ‚ôíÔ∏è üë©üèø‚Äçü§ù‚Äçüë©üèª Graphing Dummies: A Step-by-Step Guide ‚òùüèø üóìÔ∏è üîà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier, we published a post where, with the help of graphs, we analyzed communities at boiling points from different cities of Russia. Now we want to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Graphing Dummies: A Step-by-Step Guide</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/leader-id/blog/488058/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Earlier, we published a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> where, with the help of graphs, we analyzed communities at boiling points from different cities of Russia. </font><font style="vertical-align: inherit;">Now we want to tell how to build such graphs and analyze them. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/869/610/1f5/8696101f5ba632d96402742bc9a0e363.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Under the cut - a step-by-step instruction for those who have long wanted to deal with the visualization of graphs and were waiting for the right occasion.</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Choice of hypothesis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you try to visualize at least something, mindlessly loading data into a graphing program, the result will not please you. Therefore, first formulate for yourself what you want to know with the help of graphs, and come up with a viable hypothesis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To do this, figure out what data you already have, what of them can be represented by "objects", and what is the "connections" between them. Usually there are much fewer objects than links - you can check yourself in this way. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We prepared our test case together with the boiling point team from Tomsk. Accordingly, we will have all the data for analysis on events and their participants from there. We wondered if a community had been formed from the participants in these events and how it looked from the point of view of the participants belonging to business, universities and government.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We suggested that people who attended the same event are connected to each other. </font><font style="vertical-align: inherit;">Moreover, the more often they attended the events together, the stronger the connection. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the second case, we decided to find out how the membership of the participants in one of the ‚Äúnos‚Äù (our key areas) relates to the cross-cutting technologies of interest to them. </font><font style="vertical-align: inherit;">Is the distribution even? Are there any hot topics? </font><font style="vertical-align: inherit;">For this analysis, we took data on event participants from 200 Tomsk technology companies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In principle, even such initial formulations of hypotheses are enough to proceed to the second step.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Data preparation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now that you have decided what you want to find out, take the entire array of data, see what information about the "objects" is stored, throw out all the excess and add the missing. If the data is distributed across several sources, first collect everything in one heap, removing duplicates. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will explain with an example. We had data on the participants of 650 events. This, relatively speaking, is 650 Excel tables with ~ 23000 entries in them containing the fields ‚ÄúLeader ID‚Äù, ‚ÄúPosition‚Äù, ‚ÄúOrganization‚Äù. To build a graph, one unique identifier is enough (fortunately, there is one here - this is a Leader ID) and a sign that ties each participant to one of the three areas under consideration: government, business or universities. And we do not have this information yet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get it, you can go ahead: in each of the 650 files, remove the extra columns and add a new field, fill it with values ‚Äã‚Äãfor each row, for example: ‚Äú1‚Äù for power, ‚Äú2‚Äù for business and ‚Äú3‚Äù for education and science. And you can first combine all 650 files into one large list, remove duplicates, and only then add new values. In the first case, such work will take 1-2 months. In the second - 1-2 weeks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, when adding new attributes, try to group the data first. For example, you can sort the participants by company / organization and set the attribute in bulk. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are preparing the data further. To load them into most visualization programs, you will need to create two files: one with a list of vertices, and the second with a list of edges.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1ae/268/7d4/1ae2687d4d92a171c00e02e32df5c5d1.png"> <img src="https://habrastorage.org/getpro/habr/post_images/47b/ba1/4ac/47bba14ace28af782c2277b2e896bfe4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The vertex file in our case contained two columns: Id ‚Äî vertex number and Label ‚Äî type. The edges file also contained two columns: Source - id of the initial vertex, Target - id of the final vertex. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to turn data that participants 1, 2, 5 and 23 attended one event into ribs? It is necessary to create six lines and mark the connection of each participant with each: 1 and 2, 1 and 5, 1 and 23, 2 and 5, 2 and 23, 5 and 23. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our second example, the tables looked like this: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/197/6b6/9e8/1976b69e8ce22c1d317ae005ba05a63e.png"> <img src="https://habrastorage.org/getpro/habr/post_images/35c/02d/6ed/35c02d6ed518ab0f26adcb2806af2978.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The vertices are listed as markets and end-to-end technologies. If, say, a representative of a company belonging to the Technet market (ID = 4) attended an event on the topic ‚ÄúBig Data and AI‚Äù (ID = 17), we put in the edge table an edge (line) connecting these vertices (Source = 4, Target = 17).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The data preparation phase is the most time-consuming part of the process, but be patient.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Graph visualization</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, the data tables are prepared, you can look for a means to represent them in the form of a graph. For visualization, we used the Gephi program - a powerful open source tool that can process graphs with hundreds of thousands of vertices and links. You can download it from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">official site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will take screenshots from the second project, in which there were a small number of vertices and links, so that everything was as clear as possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, we need to load tables with vertices and edges. To do this, select the "Import from CSV" item from the menu of the "Data Lab" section. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/13c/3a5/f0d/13c3a5f0da6d09a173896de39fbb5efc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, load the file with the vertices. On the first screen of the form, indicate that we are importing the vertices, and check that the program correctly determines the encoding of signatures.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f3e/d72/619/f3ed726194757b51ccdd810dc9f5250c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the third form, ‚ÄúImport Report‚Äù, it is important to indicate the type of graph. We are not oriented. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fc3/687/d3f/fc3687d3f7056469928be55cd7001e8e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similarly, load the ribs. In the first window, indicate that this is a file with edges, and also check the encoding. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/47f/e39/b05/47fe39b056003406b56ea5eba9bb0691.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An important moment awaits us in the third window ‚ÄúImport Report‚Äù. Here it is important to indicate not only that the graph is not oriented, but also load the edges into the same workspace as the vertices. Therefore, select the item "Append to existing workplace". </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/267/045/c36/267045c36972c3020faf726bb18d36b1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, we will see the graph in approximately this form (the ‚ÄúProcessing‚Äù tab): </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/3ec/a2b/d16/3eca2bd16f6eb61a82847e2e6f342c29.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, the edges have different thicknesses depending on the number of connections between the vertices. You can see how much weight each edge has become on the Data Lab tab in the properties of the edges in the Weight column.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is bad here: all the vertices are of the same size and are located absolutely randomly. On the tab ‚ÄúProcessing‚Äù we will fix it. First, select Nodes in the upper left window and click on the icon with circles (‚ÄúSize‚Äù). Next, select the Ranking item - it allows you to set the size of the vertex, depending on some parameter. We have the opportunity to choose only one parameter - Degree (degree), which shows how many edges come out of the vertex. Choose the minimum and maximum size of the circle and click the "Apply" button. Here, if you select other icons, you can adjust the color of the vertex marker and the color of the edges. Now the graph is already more visual. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/925/43c/54e/92543c54e6433b40c8b97946dab67c65.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next thing to do is unravel the graph. This can be done manually, moving the vertices, or you can use the styling algorithms that are implemented in Gephi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What do we achieve with proper styling? Maximum visibility. The less vertices and edges on the graph of overlays, the less the intersections of edges, the better. It would also be nice if adjacent peaks were located closer to each other, and non-adjacent ones are farther apart. Well, everything was distributed over the visible region, and not compressed into one heap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to do it in Gephi? The lower left window ‚ÄúStacking‚Äù contains the most popular stacking algorithms built on power analogies. Imagine that the vertices are charged balls that repel each other, but some are held together by something similar to springs. If you set the appropriate forces and "release" the graph, the vertices will scatter to the maximum distances allowed by the springs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most uniform picture is provided by the Fruchterman and Reingold algorithm. Select Fruchterman Reingold from the drop-down menu and set the size of the plot area. Click the Execute button. It will turn out something like this: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/76f/3b9/c01/76f3b9c01238395ef97863e4efc7d57d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can help the algorithm and, without stopping it, drag some vertices, trying to unravel the graph. But remember that there is no ‚ÄúCancel‚Äù button, it will not be possible to return to the previous location of the vertices. Therefore, keep new versions of the project before each risky change.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another useful algorithm is Force Atlas 2. It presents a graph in the form of metal rings connected by springs. The deformed springs set the system in motion, it oscillates and finally takes a stable position. This algorithm is good for visualizations that emphasize the structure of a group and highlight subsets with a high degree of interaction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This algorithm has a large number of settings. Consider the most important. "Overlap Prohibition" prevents peaks from overlapping each other. Sparseness increases the distance between the vertices, making the graph more readable. The graph is also made more airy by reducing the influence of the weights of the ribs on the relative positions of the vertices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After playing with the settings, we get the following graph:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cf8/b6e/813/cf8b6e81304bb1b286430bab45ca8ef9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After receiving the graph in the form that suits you, proceed to the final processing. This is the "View" tab. Here we can specify, for example, drawing a graph with curved edges, which minimizes the overlapping of vertices on other edges. We can enable vertex labels by setting the font size and color. Finally, change the background of the substrate. For example, like this: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/876/6b9/295/8766b9295b4eb92664bf4c7ca56a9310.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to save the resulting image, click on the inscription ‚ÄúExport SVG / PDF / PNG in the lower left corner of the window. Also, do not forget to save the project itself through the top menu ‚ÄúFile‚Äù - ‚ÄúSave Project‚Äù.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our case, it was important to highlight the relationship between end-to-end technologies and the NTI markets, for which we manually built all the markets in one line in the center and placed everything else above and below. The result is such a graph. Still, to solve specific problems without manual alignment of vertices could not be done. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c24/948/288/c24948288b6956e81c39caab37a9b9f9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You probably think how we managed to color the peaks in different colors? There is one trick. You can go to the ‚ÄúData Lab‚Äù tab, create a new column at the vertices there, naming it ‚ÄúMarket‚Äù. And fill in for each vertex with the values: 1 if it is the STI market, 0 if it is an end-to-end technology. Then just go to the "Processing", select the icon in the form of a palette, Nodes - Partition, and as a separator - our new attribute Market.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/600/bd7/d00/600bd7d004f57d43e2d9213bbecfefd6.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For more complex constructions, when it is required to select clusters and paint them with different colors, Gephi uses a rich arsenal of statistical calculations, the results of which can be used for separate coloring. </font><font style="vertical-align: inherit;">These calculations are located in the right column of the Processing tab. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cde/e26/9ea/cdee269eacb799f56bb2c6c8fe13a66f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, by clicking the ‚ÄúRun‚Äù button next to the ‚ÄúModularity‚Äù calculation, you will find out an estimate of the level of clustering of your graph. </font><font style="vertical-align: inherit;">If after that you set the color of the vertices depending on the Modularity Class, a nice picture will appear like this: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d05/bd0/9c9/d05bd09c981d39f6656fe6e5b1eca47b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to learn more about the capabilities of Gephi, you should read the manual on working with the program from Martin Grangin </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.martingrandjean.ch/gephi- introduction /</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Analysis of the result</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, you got the final visualization of the graph. What does she give you? Firstly, it‚Äôs beautiful, it can be inserted into a presentation, shown to your friends or made a screensaver on your desktop. Secondly, from it you can understand how complex and multicluster the structure of the subject area you are considering is. Thirdly, pay attention to the largest peaks and the fattest connections. These are special elements on which everything rests.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, having built a graph of the expert community attending events at the Boiling Point, we immediately found participants who are most likely to act as superconnectors. </font><font style="vertical-align: inherit;">They were ‚Äúpeaks‚Äù through which clusters were united into a single whole. </font><font style="vertical-align: inherit;">And in the second case, we saw how the concentration of specialists from Tomsk companies looks from the point of view of their belonging to the market and the end-to-end digital technology on which they rely. </font><font style="vertical-align: inherit;">This indirectly indicates the level of technological competencies and expertise of the region. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The help of graphs in understanding the surrounding reality is really great, so do not be lazy and try to create your own data visualization. </font><font style="vertical-align: inherit;">It is not at all difficult, but sometimes labor-intensive.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en488048/index.html">To illuminate with a searchlight. How to get maximum impact on "social" hackathons?</a></li>
<li><a href="../en488050/index.html">Amazon Neptune First Impressions</a></li>
<li><a href="../en488052/index.html">How to manipulate financial reporting - the example of Uber</a></li>
<li><a href="../en488054/index.html">Relationships between Database Tables</a></li>
<li><a href="../en488056/index.html">Analysis of the new CAO regarding BVS flights</a></li>
<li><a href="../en488060/index.html">Backblaze - 2019 hard drive statistics</a></li>
<li><a href="../en488062/index.html">Dynamics 365 & Power Platform Meetup at Lamoda - Report</a></li>
<li><a href="../en488064/index.html">Seven Reasons Why Linux</a></li>
<li><a href="../en488072/index.html">Is Koin Dependency Injection or Service Locator?</a></li>
<li><a href="../en488078/index.html">My bot for Russian AI Cup 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>