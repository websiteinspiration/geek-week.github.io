<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚖️ 🖖 👰🏻 アクションでダップ。TodoMVCを作成しています。パート1 🤰 👩‍💻 🕝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="明らかに、dapに関する最初の記事は私の執筆の成功にはなりませんでした。それに対するコメントの大部分は「niasilil」と「niasilil」でしたが、私は非難しました。そして、唯一の建設的なトップレベルの解説に対する賞は、Oldvitus、アドバイスとして、例としてTodoMVCを使用してDAP...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>アクションでダップ。TodoMVCを作成しています。パート1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480912/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明らかに、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">dap</font></a><font style="vertical-align: inherit;">に関する</font><font style="vertical-align: inherit;">最初の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は私の執筆の成功にはなりませんでした。それに対するコメントの大部分は「niasilil」と「niasilil」でしたが、私は非難しました。</font><font style="vertical-align: inherit;">そして、</font><font style="vertical-align: inherit;">唯一の建設的なトップレベルの解説</font><font style="vertical-align: inherit;">に対する賞は</font><s><font style="vertical-align: inherit;">、</font></s></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><s><font style="vertical-align: inherit;"></font></s><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oldvitus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アドバイスとして、例としてTodoMVCを使用してDAPをデモンストレーションするため、比較するものがあります。この記事では何をしますか。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TodoMVC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">誰も知らない</font></a><font style="vertical-align: inherit;">場合、これはそのような標準のUI呼び出しの世界であり、異なるフレームワークを使用して、同じ問題（条件付きの「To-Doリスト」）に対するソリューションを比較できます。このタスクは、その単純さ（</font><font style="vertical-align: inherit;">「1つの画面で」の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダップ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブレイク</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">に対するソリューション</font></a><font style="vertical-align: inherit;">）を備えているため</font><font style="vertical-align: inherit;">、非常</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">にわかりやすくなってい</font></a><font style="vertical-align: inherit;">ます。したがって、彼女の例を使用して、Webフロントエンドに典型的なタスクがDAPを使用してどのように実装されるかを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題の正式な説明を検索して調査することはしませんでしたが、例の1つを単に逆にすることにしました。この記事のフレームワークのバックエンドは興味深いものではないため、私たちは自分で書きませんが</font><font style="vertical-align: inherit;">、サイト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">www.todobackend.com</font></a><font style="vertical-align: inherit;">から</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用意されているもの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そこから</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.todobackend.com/client/index.html%3F" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、サンプルクライアント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と標準</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSファイルの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方を取り上げ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dapを使用するには、何もダウンロードしてインストールする必要はありません。</font><font style="vertical-align: inherit;">これはありません</font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特定のディレクトリ構造、マニフェスト、およびITの成功に関するその他の属性を持つプロジェクトを作成する必要はありません。</font><font style="vertical-align: inherit;">十分なテキストエディタとブラウザ。</font><font style="vertical-align: inherit;">XHRリクエストをデバッグするには、Webサーバーも必要になる場合があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font><font style="vertical-align: inherit;">、Chrome用の</font><font style="vertical-align: inherit;">この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張機能の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように、単純なもの</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">フロントエンド全体は、単一の.htmlファイルで構成されます（もちろん、dap-engineスクリプトと標準のTodoMVC CSSファイルを参照しています）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. .htmlファイルを作成する</font></font></h2><br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Todo -- dap sample<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.todobackend.com/client/css/vendor/todomvc-common.css"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://dap.js.org/0.4.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">//   dap</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイト</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.todobackend.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">dap</font></a><font style="vertical-align: inherit;"> -engineから</font><font style="vertical-align: inherit;">提供されたCSSファイルを含めた通常のhtml準備。これは、サイト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">dap.js.org</font></a><font style="vertical-align: inherit;">から提供されたものです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.元の例のDOM構造をコピーします</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更を加えずに標準のCSSファイルを使用するには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.todobackend.com/client/index.html%3F" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同じDOM構造に従います</font><font style="vertical-align: inherit;">。それをChromeブラウザで開き、Ctr + Shift + Iを押し、[要素]タブを選択して、アプリケーション自体が要素内にあることを確認します。</font></font><code>section id="todo-app"&gt;</code><br>
<br>
<img src="https://habrastorage.org/webt/3d/ks/mq/3dksmqoxzyif_tgnxfc3v-wf_us.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサブツリーを連続して開く</font><font style="vertical-align: inherit;">ことにより</font><font style="vertical-align: inherit;">、.htmlファイルの構造を書き換えます。今では、コードを書くのではなく、簡単な方法で簡単にスケッチしているので、要素のシグネチャを「単一引用符」とその子の括弧で記述します。子がない場合は、空のブラケットを描画します。インデックスと括弧のバランスを監視します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   dap</span><font></font>
<font></font>
<span class="hljs-string">'#todoapp'</span>(
  <span class="hljs-string">'#header'</span>(
    <span class="hljs-string">'H1'</span>()
    <span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span>()<font></font>
  )<font></font>
  <span class="hljs-string">'#main'</span>(
    <span class="hljs-string">'#toggle-all type=checkbox'</span>()
    <span class="hljs-string">'UL#todo-list'</span>(
      <span class="hljs-string">'LI'</span>(
        <span class="hljs-string">'INPUT.toggle type=checkbox'</span>()
        <span class="hljs-string">'LABEL'</span>()
        <span class="hljs-string">'BUTTON.destroy'</span>()<font></font>
      )<font></font>
    )<font></font>
  )<font></font>
  <span class="hljs-string">'#footer'</span>(
    <span class="hljs-string">'#todo-count'</span>()
    <span class="hljs-string">'UL#filters'</span>(
      <span class="hljs-string">'LI'</span>()<font></font>
    )<font></font>
    <span class="hljs-string">'#clear-completed'</span>()<font></font>
  )<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：繰り返し要素（たとえば、ここでは要素</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">は、元の要素に</font><font style="vertical-align: inherit;">複数ある場合でも、構造体に1回書き込みます。</font><font style="vertical-align: inherit;">明らかに、これらは同じパターンの配列です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
署名のフォーマットは、HTMLとCSSを手で書いた人なら誰でも理解できると思うので、ここでは詳しく説明しません。</font><font style="vertical-align: inherit;">タグは大文字で書かれているとしか言えず、タグがないことはDIVタグがあることと同じです。</font><font style="vertical-align: inherit;">ここに＃-elements（with id）が豊富にあるのは、主にid-selectorsを使用する、含まれているCSSファイルの詳細によるものです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. dapプログラムはJavascriptであることを忘れないでください</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード内の不要な大括弧から私たちを救うために、dapエンジンは</font></font><code>String.prototype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつかのメソッドに</font><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">実装します（標準オブジェクトにメソッドを実装することはayahayであることは知っていますが、私たちは合格しました）。これにより、署名文字列がdap-templateに変換されます。そのような方法の1つは</font></font><code>.d(rule, ...children)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。それが取る最初の引数は生成ルール（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d-rule</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）であり、残りの引数は任意の数の子です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この新しい知識に基づいて、各開始ブラケットの代わりにシーケンス</font></font><code>.d(""</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり、最初の単一引用符の前に、最初の引用符を除いてコンマがある</font><font style="vertical-align: inherit;">ようにコードを追加</font><font style="vertical-align: inherit;">します。ライフハック：自動置換を使用できます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'#todoapp'</span>.d(<span class="hljs-string">""</span>
  ,<span class="hljs-string">'#header'</span>.d(<span class="hljs-string">""</span>
    ,<span class="hljs-string">'H1'</span>.d(<span class="hljs-string">""</span>)<font></font>
    ,<span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span>.d(<span class="hljs-string">""</span>)<font></font>
  )<font></font>
  ,<span class="hljs-string">'#main'</span>.d(<span class="hljs-string">""</span>
    ,<span class="hljs-string">'#toggle-all type=checkbox'</span>.d(<span class="hljs-string">""</span>)<font></font>
    ,<span class="hljs-string">'UL#todo-list'</span>.d(<span class="hljs-string">""</span>
      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">""</span>
        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>.d(<span class="hljs-string">""</span>)<font></font>
        ,<span class="hljs-string">'LABEL'</span>.d(<span class="hljs-string">""</span>)<font></font>
        ,<span class="hljs-string">'BUTTON.destroy'</span>.d(<span class="hljs-string">""</span>)<font></font>
      )<font></font>
    )<font></font>
  )<font></font>
  ,<span class="hljs-string">'#footer'</span>.d(<span class="hljs-string">""</span>
    ,<span class="hljs-string">'#todo-count'</span>.d(<span class="hljs-string">""</span>)<font></font>
    ,<span class="hljs-string">'UL#filters'</span>.d(<span class="hljs-string">""</span>
      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">""</span>)<font></font>
    )<font></font>
    ,<span class="hljs-string">'#clear-completed'</span>.d(<span class="hljs-string">""</span>)<font></font>
  )<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出来上がり！</font><font style="vertical-align: inherit;">メソッド呼び出しのツリーを取得しました</font></font><code>.d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これはDAPテンプレートに変換する準備ができています。</font><font style="vertical-align: inherit;">空の行</font></font><code>""</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は将来のDルールのシードであり、子はカンマ区切りの引数です。</font><font style="vertical-align: inherit;">正式には、これは有効なDAPプログラムですが、まだ完全には必要ありません。</font><font style="vertical-align: inherit;">しかし、それはすでに起動することができます！</font><font style="vertical-align: inherit;">これを行うには、ルートブラケットを閉じた後、メソッドを追加し</font></font><code>.RENDER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このメソッドは、その名前が示すように、結果のテンプレートをレンダリングします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、この段階では、次の内容の.htmlファイルがあります。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;!DOCTYPE html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Todo -- dap sample<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.todobackend.com/client/css/vendor/todomvc-common.css"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://dap.js.org/0.4.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">

<span class="hljs-string">'#todoapp'</span>.d(<span class="hljs-string">""</span>
  ,<span class="hljs-string">'#header'</span>.d(<span class="hljs-string">""</span>
    ,<span class="hljs-string">'H1'</span>.d(<span class="hljs-string">""</span>)
    ,<span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span>.d(<span class="hljs-string">""</span>)
  )
  ,<span class="hljs-string">'#main'</span>.d(<span class="hljs-string">""</span>
    ,<span class="hljs-string">'#toggle-all type=checkbox'</span>.d(<span class="hljs-string">""</span>)
    ,<span class="hljs-string">'UL#todo-list'</span>.d(<span class="hljs-string">""</span>
      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">""</span>
        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>.d(<span class="hljs-string">""</span>)
        ,<span class="hljs-string">'LABEL'</span>.d(<span class="hljs-string">""</span>)
        ,<span class="hljs-string">'BUTTON.destroy'</span>.d(<span class="hljs-string">""</span>)
      )
    )
  )
  ,<span class="hljs-string">'#footer'</span>.d(<span class="hljs-string">""</span>
    ,<span class="hljs-string">'#todo-count'</span>.d(<span class="hljs-string">""</span>)
    ,<span class="hljs-string">'UL#filters'</span>.d(<span class="hljs-string">""</span>
      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">""</span>)
    )
    ,<span class="hljs-string">'#clear-completed'</span>.d(<span class="hljs-string">""</span>)
  )
)

.RENDER() <span class="hljs-comment">//   dap  </span>

    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたはできる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザで開く</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことがデータでこのテンプレートを埋めるためにだけ残って、CSSスタイルが適用され、DOM要素が生成されていることを確認します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.データを受信する</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.todobackend.com/client/index.html%3F" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元のページに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
移動し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.todobackend.com/client/index.html%3F" rel="nofollow"><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;">ツールの[ネットワーク]タブを開き、XHRフィルターをオンにして、データの取得元と形式を確認します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vf/ff/4l/vfff4lreh7nhj6jpgb8re83wb-s.png"><br>
<br>
<img src="https://habrastorage.org/webt/qi/lh/ga/qilhganpuhmmtevpnyuytm1uadu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よし、よし。</font><font style="vertical-align: inherit;">to-doリストは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todo-backend-express.herokuapp.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">オブジェクトのjson配列として</font><font style="vertical-align: inherit;">直接</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">取得さ</font></a><font style="vertical-align: inherit;">れます。</font><font style="vertical-align: inherit;">すごい。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データを受信するために、dapには</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、URLを非同期で「変換」して、受信したデータに変換</font><font style="vertical-align: inherit;">する組み込みのコンバーター</font><font style="vertical-align: inherit;">があります。</font><font style="vertical-align: inherit;">ルールにURL自体を直接書き込むことはしませんが、定数として指定し</font></font><code>todos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">データマイニングの全体的なデザインは次のようになります。</font></font><br>
<br>
<pre><code class="javascript hljs">todos:query
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして定数</font></font><code>todos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自体を辞書に登録します-セクションの</font></font><code>.DICT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すぐ前</font></font><code>.RENDER()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'#todoapp'</span>.d(<span class="hljs-string">""</span><font></font>
  ...<font></font>
)<font></font>
.DICT({<font></font>
  <span class="hljs-attr">todos</span>  : <span class="hljs-string">"https://todo-backend-express.herokuapp.com/"</span><font></font>
})<font></font>
.RENDER()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列を受け取っ</font></font><code>todos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たら、そこからTo Doリストを作成します。それぞれの場合に、フィールドから名前を取得</font></font><code>.title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してelementに書き込み</font></font><code>LABEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、フィールドから</font></font><code>.completed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「完全性」の記号を取得して</font></font><code>checked</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、checkbox要素の</font><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">書き込み</font><font style="vertical-align: inherit;">ます</font></font><code>INPUT.toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは次のように行われます：</font></font><br>
<br>
<pre><code class="javascript hljs">    ,<span class="hljs-string">'UL#todo-list'</span>.d(<span class="hljs-string">"*@ todos:query"</span> <span class="hljs-comment">//  *      </span>
      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">""</span>
        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>.d(<span class="hljs-string">"#.checked=.completed"</span>) <span class="hljs-comment">// #  " "</span>
        ,<span class="hljs-string">'LABEL'</span>.d(<span class="hljs-string">"! .title"</span>) <span class="hljs-comment">//  !     </span>
        ,<span class="hljs-string">'BUTTON.destroy'</span>.d(<span class="hljs-string">""</span>)<font></font>
      )<font></font>
    )<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザでこのページを更新します。ファイルシステムから起動すると、何も起こりません。</font><font style="vertical-align: inherit;">問題は、最新のブラウザーがローカルドキュメントからのクロスドメインXHRリクエストを許可しないことです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/fy/bi/tmfybiqw7s2geblqodepfg7k7lk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローカルWebサーバーを使用して、http経由でページを監視する時が来ました。</font><font style="vertical-align: inherit;">-あなたはあなた自身の手でDAP書き込みする準備ができていない場合はまあ、または、私のリンクを使用して（Chromeで、これはCtrlキー+ Uを使用して行われ、ソースを見てすることを忘れないでください）ページの逐次バージョンを参照してください</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ので、私たちは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//：HTTPで私たちのページに移動</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してご覧くださいデータが来ていること、リストが作成されていること。</font><font style="vertical-align: inherit;">いいね！</font><font style="vertical-align: inherit;">あなたはすでにオペレーター</font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンバーターを</font><font style="vertical-align: inherit;">習得しています</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、定数、および配列の現在の要素のフィールドへのアクセス。</font><font style="vertical-align: inherit;">結果のコードをもう一度見てください。</font><font style="vertical-align: inherit;">まだ読めないようですが？</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.州を追加</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多分あなたはすでにやることリストのチェックマークをクリックしてみました。</font><font style="vertical-align: inherit;">チェックボックス自体の色は変わりますが、元の要素とは異なり、親要素の</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタイルは変わりません（「完了したジョブ」は灰色になり、取り消し線が引かれますが、これは起こりません）- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は変わりません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、これらの要素にはまだ状態がないため、変更することはできません。</font><font style="vertical-align: inherit;">それを修正します。</font><font style="vertical-align: inherit;">「完全」状態の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを行うには、dルールで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態変数</font></font></i> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を定義します</font></font><code>$completed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>INPUT.toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この状態を変更できる</font><font style="vertical-align: inherit;">要素</font><font style="vertical-align: inherit;">を対応するリアクションルール（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ui-rule</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">割り当てます。これ</font></font><code>$completed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">により、独自の特性に従って</font><font style="vertical-align: inherit;">変数が設定されます</font></font><code>checked</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（「Dawを含む」）。</font><font style="vertical-align: inherit;">状態に応じて、</font></font><code>$completed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はCSSクラスの「完了」を有効または無効にします。</font></font><br>
<br>
<pre><code class="javascript hljs">    ,<span class="hljs-string">'UL#todo-list'</span>.d(<span class="hljs-string">"*@ todos:query"</span>
      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"$completed=.completed"</span><span class="hljs-comment">//  ,    .completed</span>
        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>
          .d(<span class="hljs-string">"#.checked=.completed"</span>) <span class="hljs-comment">//      </span>
          .ui(<span class="hljs-string">"$completed=#.checked"</span>) <span class="hljs-comment">//    $completed</span>
        ,<span class="hljs-string">'LABEL'</span>.d(<span class="hljs-string">"! .title"</span>)<font></font>
        ,<span class="hljs-string">'BUTTON.destroy'</span>.d(<span class="hljs-string">""</span>)<font></font>
      )<font></font>
      .a(<span class="hljs-string">"!? $completed"</span>) <span class="hljs-comment">//     $completed,    css- completed</span><font></font>
    )<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CSSクラスを持つこのような操作はかなり一般的なものなので、DAPに彼らのために特別な演算子があります。</font></font><code>!?</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ノート、私たちがこれを行ってください</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A-ルール</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ワード蓄積から）。</font><font style="vertical-align: inherit;">なぜdルールではないのですか？</font><font style="vertical-align: inherit;">これらの2つのタイプのルールの違いは、更新時に、dルールが要素のコンテンツを完全に再構築し、古いものと新しいものをもう一度削除する一方で、aルールは要素の既存のコンテンツに影響を与えず、結果を既存の要素に「追加」することです。</font><font style="vertical-align: inherit;">要素の単一の属性を変更する</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合、残りのコンテンツを再構成する必要がないため、aルールでこれを行う方が合理的です。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">結果</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を見る</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">チェックボックスをクリックすると、対応するTo Doアイテムの状態が変化し、この状態に応じて、要素の表示スタイルも変化します。</font><font style="vertical-align: inherit;">しかし、まだ問題があります。完了したタスクのリストが最初から存在していた場合、要素が生成されたときにデフォルトでaルールが実行されないため、灰色ではありません。</font><font style="vertical-align: inherit;">生成中でも実行するために、</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演算子</font><font style="vertical-align: inherit;">を追加し</font><font style="vertical-align: inherit;">ます</font></font><code>a!</code><br>
<br>
<pre><code class="javascript hljs">      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"$completed=.completed; a!"</span> <span class="hljs-comment">//      $completed    a-</span>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">はい </font><font style="vertical-align: inherit;">状態を</font></font><code>$completed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">把握しました。</font><font style="vertical-align: inherit;">完了したケースは、初期起動時とその後の手動切り替え時の両方で正しくスタイル設定されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.ケース名の編集</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.todobackend.com/client/index.html%3F" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オリジナルに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
戻る</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ケースの名前をダブルクリックすると、編集モードがアクティブになり、この名前を変更できます。</font><font style="vertical-align: inherit;">そこでは、「ビュー」ビューモードテンプレート（DAW、名前、削除ボタン付き）が完全に非表示になり、要素が表示されるように実装されています</font></font><code>INPUT class="edit"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>LABEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の2つの要素は編集に干渉しないため、</font><font style="vertical-align: inherit;">要素のみを非表示に</font><font style="vertical-align: inherit;">します。</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素に</font><font style="vertical-align: inherit;">クラスを追加するだけ</font><font style="vertical-align: inherit;">です。</font></font><code>LABEL</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「編集中」の状態では、要素に</font></font><code>LI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">を定義し</font><font style="vertical-align: inherit;">ます</font></font><code>$editing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最初は、それ（状態）はリセットさ</font></font><code>dblclick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れ、要素</font></font><code>LABEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でオンになり、要素がフォーカスから外れるとオフになります</font></font><code>INPUT.edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">だから私たちは書きます：</font></font><br>
<br>
<pre><code class="javascript hljs">      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"$completed=.completed $editing=; a!"</span> <span class="hljs-comment">//      </span><font></font>
      <font></font>
        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>
          .d(<span class="hljs-string">"#.checked=.completed"</span>)<font></font>
          .ui(<span class="hljs-string">"$completed=#.checked"</span>)<font></font>
	  <font></font>
        ,<span class="hljs-string">'LABEL.view'</span>
          .d(<span class="hljs-string">"? $editing:!; ! .title"</span>) <span class="hljs-comment">//  $editing ,    </span>
          .e(<span class="hljs-string">"dblclick"</span>,<span class="hljs-string">"$editing=`yes"</span>) <span class="hljs-comment">//  dblclick  $editing</span><font></font>
	  <font></font>
        ,<span class="hljs-string">'INPUT.edit'</span>
          .d(<span class="hljs-string">"? $editing; !! .title@value"</span>) <span class="hljs-comment">//  $editing </span>
          .ui(<span class="hljs-string">".title=#.value"</span>) <span class="hljs-comment">//  .title   change (ui     INPUT)</span>
          .e(<span class="hljs-string">"blur"</span>,<span class="hljs-string">"$editing="</span>) <span class="hljs-comment">//  $editing   blur</span><font></font>
	  <font></font>
        ,<span class="hljs-string">'BUTTON.destroy'</span>.d(<span class="hljs-string">""</span>)<font></font>
      <font></font>
      ).a(<span class="hljs-string">"!? $completed $editing"</span>) <span class="hljs-comment">//   $completed  $editing  css-  'LI'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これ</font><font style="vertical-align: inherit;">で、ケースの名前を編集</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でき</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.サーバーへのデータの送信</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わかりました。ブラウザで既に編集できますが、これらの変更もサーバーに転送する必要があります。オリジナルがそれをどのように行うかを見てみましょう：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/r5/bw/jdr5bwsa8yi7wu4sbwxqr3bwcdi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
加えられた変更は、特定の種類のURL </font></font><code>http://todo-backend-express.herokuapp.com/28185</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">PATCHメソッドを使用してサーバーに送信されます</font><font style="vertical-align: inherit;">。このURLは</font></font><code>.url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リスト内の各ケース</font><font style="vertical-align: inherit;">のフィールドのサーバーによって示されます</font><font style="vertical-align: inherit;">。つまり、サーバーでケースを更新するために必要なのは、フィールド</font></font><code>.url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">指定されたアドレスにPATCHリクエストを送信</font><font style="vertical-align: inherit;">し、変更されたデータをJSON形式で送信することだけです。</font></font><br>
<br>
<pre><code class="javascript hljs">        ,<span class="hljs-string">'INPUT.edit'</span>
          .d(<span class="hljs-string">"? $editing; !! .title@value"</span>)<font></font>
          .ui(<span class="hljs-string">".title=#.value; (@method`PATCH .url (@Content-type`application/json)@headers (.title):json.encode@body):query"</span>)<font></font>
          .e(<span class="hljs-string">"blur"</span>,<span class="hljs-string">"$editing="</span>) 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは同じコンバーターを使用して</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いますが、より詳細なバージョンです。場合は</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、単純な文字列に適用され、その文字列はURLとして扱われ、GETリクエストが実行されます。場合</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、この場合のように、複雑なオブジェクトを受信し、それがフィールドを含む、クエリの詳細な説明として扱い</font></font><code>.method</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>.url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>.headers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>.body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それらに応じてクエリを実行します。ここでは、更新直後に、</font></font><code>.title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーに更新されたPATCHリクエスト</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">送信します</font></font><code>.title</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が、微妙な違いがあります。</font></font><code>.url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーから取得する</font><font style="vertical-align: inherit;">フィールド</font><font style="vertical-align: inherit;">は、次のようになります。</font></font><code>http://todo-backend-express.herokuapp.com/28185</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つまり、http：//プロトコルが厳密に登録されています。クライアントがhttp：//でも開いている場合は、すべて正常です。</font><font style="vertical-align: inherit;">しかし、クライアントがhttps：//を介して開いている場合、問題が発生します。セキュリティ上の理由から、ブラウザはhttpsソースからのhttpトラフィックをブロックします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは簡単に解決されます。</font></font><code>.url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコル</font><font style="vertical-align: inherit;">から削除すると</font><font style="vertical-align: inherit;">、リクエストはページのプロトコルを通過します。</font><font style="vertical-align: inherit;">それでは</font></font><code>dehttp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">やって</font><font style="vertical-align: inherit;">みましょう</font><font style="vertical-align: inherit;">：適切なコンバーターを記述します- </font><font style="vertical-align: inherit;">そして、それを通過</font></font><code>.url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">させます。</font><font style="vertical-align: inherit;">独自のコンバーター（およびその他の機能）は、セクションで指定されています</font></font><code>.FUNC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs">          .ui(<span class="hljs-string">".title=#.value; (@method`PATCH .url:dehttp (@Content-type`application/json)@headers (.title):json.encode@body):query"</span>)<font></font>
...<font></font>
.FUNC({<font></font>
  <span class="hljs-attr">convert</span>:{ <span class="hljs-comment">//  -        </span>
    <span class="hljs-attr">dehhtp</span>: <span class="hljs-function"><span class="hljs-params">url</span>=&gt;</span>url.replace(<span class="hljs-regexp">/^https?\:/</span>,<span class="hljs-string">''</span>)<span class="hljs-comment">//    URL</span><font></font>
  }<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のクエリで使用できるように、headersオブジェクトをディクショナリに配置することも意味があります。</font></font><br>
<br>
<pre><code class="javascript hljs">          .ui(<span class="hljs-string">".title=#.value; (@method`PATCH .url:dehttp headers (.title):json.encode@body):query"</span>)<font></font>
...<font></font>
.DICT({<font></font>
  <span class="hljs-attr">todos</span>  : <span class="hljs-string">"//todo-backend-express.herokuapp.com/"</span>,
  <span class="hljs-attr">headers</span>: {<span class="hljs-string">"Content-type"</span>:<span class="hljs-string">"application/json"</span>}<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、完全な風水のために、コンバーターの別の便利なプロパティを使用します</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ヘッダーに従ってjsonでリクエストボディを自動エンコードし</font></font><code>Content-type:application/json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">その結果、ルールは次のようになります。</font></font><br>
<br>
<pre><code class="javascript hljs">          .ui(<span class="hljs-string">".title=#.value; (@method`PATCH .url:dehttp headers (.title)):query"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見てください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">さて、今度はケース名がブラウザだけでなくサーバーでも変更されます。</font><font style="vertical-align: inherit;">だが！</font><font style="vertical-align: inherit;">ケースの名前だけでなく、完了の状態も変わる可能性があり</font></font><code>completed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">そのため、サーバーにも送信する必要があります。</font><font style="vertical-align: inherit;">同様のPATCHリクエストを</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素</font></font><code>INPUT.toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に追加</font><font style="vertical-align: inherit;">でき</font></font><code>(.title)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">代わりに</font><font style="vertical-align: inherit;">送信し</font><font style="vertical-align: inherit;">て</font></font><code>(.completed)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください：</font></font><br>
<br>
<pre><code class="javascript hljs">        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>
          .d(<span class="hljs-string">"#.checked=.completed"</span>)<font></font>
          .ui(<span class="hljs-string">"$completed=#.checked; (@method`PATCH .url:dehttp headers (.completed:?)):query"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、このPATCHリクエストを「ブラケット外」で行うことができます。 </font></font><br>
<br>
<pre><code class="javascript hljs">      ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"$completed=.completed $editing= $patch=; a!"</span> <span class="hljs-comment">// $patch - ""  </span><font></font>
      <font></font>
        ,<span class="hljs-string">'INPUT.toggle type=checkbox'</span>
          .d(<span class="hljs-string">"#.checked=.completed"</span>)<font></font>
          .ui(<span class="hljs-string">"$patch=($completed=#.checked)"</span>) <span class="hljs-comment">//   $patch  completed</span><font></font>
	  <font></font>
        ,<span class="hljs-string">'LABEL.view'</span>
          .d(<span class="hljs-string">"? $editing:!; ! .title"</span>)<font></font>
          .e(<span class="hljs-string">"dblclick"</span>,<span class="hljs-string">"$editing=`yes"</span>)<font></font>
	  <font></font>
        ,<span class="hljs-string">'INPUT.edit'</span>
          .d(<span class="hljs-string">"? $editing; !! .title@value"</span>)<font></font>
          .ui(<span class="hljs-string">"$patch=(.title=#.value)"</span>) <span class="hljs-comment">//   $patch  title</span>
          .e(<span class="hljs-string">"blur"</span>,<span class="hljs-string">"$editing="</span>)<font></font>
	  <font></font>
        ,<span class="hljs-string">'BUTTON.destroy'</span>.d(<span class="hljs-string">""</span>)<font></font>
	<font></font>
      )<font></font>
      .a(<span class="hljs-string">"!? $completed $editing"</span>)<font></font>
      <font></font>
      <span class="hljs-comment">//  $patch  ,   ,  </span>
      .u(<span class="hljs-string">"? $patch; (@method`PATCH .url:dehttp headers $patch@):query $patch="</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまりね。反応ルールは「アップルール」グループに属し、「下から上」-子孫から親、ルートまで実行されます（このシーケンスは必要に応じて中断できます）。これは、DOMのポップアップイベントに似ています。したがって、いくつかの子孫に共通する反応の一部は、共通の祖先に割り当てることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
具体的には、私たちの場合、そのような委任による利益は特に顕著ではありませんが、編集可能なフィールドがさらにある場合は、この大きな（もちろん標準による）リクエストを1つの一般的なルールに入れると、コードがシンプルで読みやすくなるのに非常に役立ちます。だから私はそれをお勧めします。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見てみましょう</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：名前の変更とステータスの変更の両方がサーバーに送信されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事では、興味がある場合は、ケースの追加、削除、フィルタリングを検討してください。</font><font style="vertical-align: inherit;">それまでの間、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">dap.js.org / docs</font></a><font style="vertical-align: inherit;">で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最終的な結果</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とその他の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">DAP</font></a><font style="vertical-align: inherit;">コードの例を</font><font style="vertical-align: inherit;">確認できます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja480898/index.html">Python.orgの推奨事項：プログラマーでない人のためのプログラミング</a></li>
<li><a href="../ja480900/index.html">私の赤ちゃんを持ってきて！（N.-F.ストーリー）</a></li>
<li><a href="../ja480902/index.html">PostgreSQLを監視するためのpostgres_exporterの新機能</a></li>
<li><a href="../ja480906/index.html">単純なpythonゲームの作成</a></li>
<li><a href="../ja480910/index.html">Seleniumテストの基本的なテストクラスを作成し、JUnit RuleChainで初期化する方法</a></li>
<li><a href="../ja480914/index.html">初心者向けのマイクロサービス</a></li>
<li><a href="../ja480920/index.html">長距離PoEを使用したTP-Linkスイッチのテスト。そして、古いモデルのアップグレードについて少し</a></li>
<li><a href="../ja480922/index.html">Evgeny Usvitsky：「世界中の誰もが地理データを自由に取得できる場所を知っています-OSMでのみ」</a></li>
<li><a href="../ja480924/index.html">MediEvilのリメイクの作成者がゲームのカルトボスを再設計した方法と理由</a></li>
<li><a href="../ja480926/index.html">物理的に正確なレンダリングの確率理論</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>