<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👬 👩🏼‍🏫 🖐🏼 Clave de cifrado de hardware de $ 3: ¿es esto posible? 🌅 🚄 👩🏽‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El resultado final es una clave del tamaño de una unidad flash USB.
 
 El cifrado generalizado y, como resultado, una gran cantidad de claves te hace ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Clave de cifrado de hardware de $ 3: ¿es esto posible?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487748/"><img src="https://habrastorage.org/webt/-q/n7/jn/-qn7jnfoyjqizxzkhujdkdwcwhk.jpeg"><br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El resultado final es una clave del tamaño de una unidad flash USB.</font></font></sup></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El cifrado generalizado y, como resultado, una gran cantidad de claves te hace pensar en su almacenamiento confiable. </font><font style="vertical-align: inherit;">Almacenar claves en dispositivos externos, desde donde no se pueden copiar, se ha considerado una buena práctica. </font><font style="vertical-align: inherit;">Hablaré sobre cómo hacer un dispositivo de este tipo por $ 3 y 2 horas.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué significa la imagen?</font></font></b><div class="spoiler_text">   .    .   : « —  ,       …        ,     ...».  ,     ,       ) <br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente sobre los principios del trabajo.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La criptografía nos da la oportunidad de ocultar lo que queremos enviar, para asegurarnos de comunicarnos con la persona con quien pensamos y muchas otras cosas interesantes. </font><font style="vertical-align: inherit;">Por lo general, para que todo esto funcione bien, solo nos piden una cosa: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mantener en secreto nuestras claves de cifrado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Suena fácil, ¿no? </font><font style="vertical-align: inherit;">Bueno, veamos cómo podemos ocultar nuestras llaves:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardar en un archivo en su escritorio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una forma antigua y comprobada de grabar algo a lo largo de los años. </font><font style="vertical-align: inherit;">El problema es que, además del usuario mismo, muchos otros programas tienen acceso a los archivos en su escritorio. </font><font style="vertical-align: inherit;">Y si está absolutamente seguro de que todos hacen lo que están destinados, no recopile ningún dato sobre usted y simplemente no los combine en la red; este artículo no es para usted.</font></font></li>
<li><b> </b> — -     ,           .  ,        ,       ,     - -  </li>
<li><b>  </b> — ,       .      ,  .  ,           . ,     (  ssh-)    .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>  </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, el problema principal es que las claves se almacenan directamente en su computadora o se ingresan allí usando un teclado, una unidad flash, etc. </font><font style="vertical-align: inherit;">Pero, objeta, ¿cómo cifrará mi computadora los datos si no conoce la clave? </font><font style="vertical-align: inherit;">La respuesta correcta es de ninguna manera. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La solución</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ha sido inventada por mucho tiempo. </font><font style="vertical-align: inherit;">La idea principal es conectar un dispositivo especial a la computadora, que encriptará los datos. </font><font style="vertical-align: inherit;">Y la computadora solo enviará datos y recibirá el resultado. </font><font style="vertical-align: inherit;">Entonces, por ejemplo, muchas tarjetas inteligentes funcionan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/br/dm/kwbrdm5ra5c6cbzc0thcwnk-cly.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Componentes requeridos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces empecemos. </font><font style="vertical-align: inherit;">Montaremos nuestro dispositivo en un microcontrolador económico y bastante popular de la serie STM32. </font><font style="vertical-align: inherit;">Por supuesto, puede hacer usted mismo una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placa de circuito impreso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">pero ¿queremos gestionarla en 2 horas? </font><font style="vertical-align: inherit;">Así que tomemos una solución lista: el programador ST-Link v2. </font><font style="vertical-align: inherit;">Este dispositivo se ve así. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zs/yk/hg/zsykhgda844yz_1xyr1xxtccwjg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por extraño que parezca, el programador para microcontroladores STM32 está montado en el microcontrolador STM32. </font><font style="vertical-align: inherit;">Este dispositivo se parece mucho a una unidad flash, que es justo lo que podemos hacer. </font><font style="vertical-align: inherit;">Además, su cuerpo está hecho de aluminio, por lo que no puede preocuparse de que se dañe. </font><font style="vertical-align: inherit;">Cuesta un milagro para aliexpress 1.5-3 dólares. </font><font style="vertical-align: inherit;">Necesitaremos dos de estas cosas. </font><font style="vertical-align: inherit;">Rehaceremos uno de ellos llave en mano y usaremos el segundo para cargar el firmware al primero. </font><font style="vertical-align: inherit;">Si ya tiene un programador STM32, puede hacer una cosa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total, necesitamos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programador ST-Link v2 - 2 piezas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soldador</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pocos cables: por regla general, los cables adecuados ya se incluyen con ST-Link</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux, para compilar y cargar firmware</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compila el firmware</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, comencemos con la parte del software: ensamblar el firmware para nuestra clave. </font><font style="vertical-align: inherit;">Los códigos fuente del firmware se pueden encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en este repositorio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sugeriría descargar la última versión estable (puede encontrarla en la pestaña de etiquetas). </font><font style="vertical-align: inherit;">Puede clonar el repositorio o descargarlo como un archivo zip. </font><font style="vertical-align: inherit;">Amasar los dedos, inicie la terminal y vaya a la carpeta del proyecto. </font><font style="vertical-align: inherit;">Ir a la carpeta src</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">cd</span> src</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para compilar y descargar el firmware, necesitamos instalar varios paquetes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arm-none-eabi-gcc</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arm-none-eabi-newlib</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openocd</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uso el administrador de paquetes pacman, en mi caso se ve así</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ sudo pacman -S arm-none-eabi-gcc<font></font>
$ sudo pacman -S arm-none-eabi-newlib<font></font>
$ sudo pacman -S openocd<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si está sentado en Ubuntu, use apt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permíteme recordarte que estamos en la carpeta src del proyecto. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ejecute el script de configuración</font></font><br>
<pre><code class="bash hljs"><font></font>
$ ./configure --vidpid=234b:0000<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejecutamos la utilidad make y observamos cómo se compila nuestro firmware.</font></font><br>
<br>
<pre><code class="bash hljs">$ make</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de la compilación, aparece la carpeta de compilación, y en ella el archivo gnuk.elf, lo necesitamos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar firmware al dispositivo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que tenemos el archivo terminado con el firmware, solo necesitamos descargarlo al dispositivo. Para esto, tenemos que trabajar un poco con un soldador. No se preocupe, no necesita ninguna habilidad especial, solo suelde 4 cables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tomamos uno de los programadores y sacamos el caso de él. El programador seleccionado será nuestro donante. Esto es lo que encontramos adentro. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/va/-p/zz/va-pzzkpf43ql4ecp0gnc2xp2xm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presta atención a los 4 pines en el tablero. Tendremos que soldarlos. Recomiendo usar los cables que vienen con ST-Link para esto. Limpiamos los cables de un extremo y los soldamos a los contactos. Si tenemos suerte, en el tablero habrá signos de estos contactos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/9v/7v/gx9v7vndydnn_2lh5rhmibp0pei.jpeg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, conectamos el segundo extremo de los cables al programador completo restante. </font><font style="vertical-align: inherit;">Si tiene suerte, solo conecte los cables de acuerdo con las inscripciones: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GND a GND </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.3V a 3.3V </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SWDIO a SWDIO </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SWCLK a SWCLK </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no hay etiquetas en el tablero, tendrá que </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tocar al azar para</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usar el probador. </font><font style="vertical-align: inherit;">Al usarlo, puede encontrar fácilmente GND (está conectado a GND en los terminales del programador donante), similar a 3.3V. </font><font style="vertical-align: inherit;">Los dos cables restantes deberán conectarse al azar. </font><font style="vertical-align: inherit;">Afortunadamente, solo hay 2 opciones. Como resultado, obtenemos algo similar a esto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yz/9r/8e/yz9r8ekaabsxl15xkdmnxq6yyoy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta foto, el dispositivo azul es el programador, que usamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solo como programador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">No se confunda por el hecho de que en la foto al comienzo del artículo, el dispositivo final tiene un color de cuerpo azul. </font><font style="vertical-align: inherit;">No es el. </font><font style="vertical-align: inherit;">El futuro dispositivo está a la derecha.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar firmware</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos a un paso del éxito, solo queda descargar el firmware. </font><font style="vertical-align: inherit;">Abra la terminal, vaya a la carpeta con nuestro firmware (gnuk.elf). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejecute el comando:</font></font><br>
<br>
<pre><code class="bash hljs">$ openocd -f interface/stlink-v2.cfg -f target/stm32f1x.cfg -c <span class="hljs-string">'program build/gnuk.elf verify reset exit'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ahora hemos subido el firmware a nuestro dispositivo. </font><font style="vertical-align: inherit;">Quedaba un paso: prohibir la lectura de la memoria del microcontrolador. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡ATENCIÓN! </font><font style="vertical-align: inherit;">Esta es una etapa muy importante, que no permitirá que la persona que robó su clave extraiga información secreta. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, ejecute el comando:</font></font><br>
<br>
<pre><code class="bash hljs">openocd -f interface/stlink-v2.cfg -f target/stm32f1x.cfg -c init -c <span class="hljs-string">"reset halt"</span> -c <span class="hljs-string">"stm32f1x lock 0"</span> -c reset -c <span class="hljs-built_in">exit</span>   </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora todo está listo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Poniendo todo de vuelta</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que todos los pasos están atrasados, queda por cuidar la apariencia de nuestro dispositivo. </font><font style="vertical-align: inherit;">Soldamos los cables. </font><font style="vertical-align: inherit;">Tampoco necesitamos la barra de contacto original, por lo que puede soldarla de forma segura. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/wq/et/pwwqetghhzfjmsp95of6thl7700.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rompa el soporte y suelde los contactos uno por uno. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qj/bd/zz/qjbdzzru_bsnvafujtwduu8j2ks.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora volvemos a colocar la caja y sellamos la pared posterior con una pieza de plástico adecuada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como puedo usar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que hemos ensamblado es un emulador de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tarjeta inteligente OpenPGP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tal tarjeta puede almacenar GPG, claves SSH. </font><font style="vertical-align: inherit;">El alcance es bastante grande, por ejemplo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmando git commits: ya se ha planteado un problema de seguridad </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento de claves SSH</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cifrado y firma de correo electrónico </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S / MIME</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : no se verificó, pero escribieron que funciona</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingreso al sistema operativo sin contraseña: una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buena guía ya está en el concentrador</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, puede hacer muchas cosas interesantes y útiles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de uso para ssh</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y al final, veamos cómo puede usar esta clave para almacenar claves ssh y conectarse a un servidor remoto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay dos formas: generar una nueva clave o importar una clave existente en un token. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos ambas opciones. </font><font style="vertical-align: inherit;">Inserte el token en USB. </font><font style="vertical-align: inherit;">En dmesg puede ver información sobre el dispositivo conectado.</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ dmesg<font></font>
[11073.599862] usb 1-3: USB disconnect, device number 11<font></font>
[11311.647551] usb 1-3: new full-speed USB device number 12 using xhci_hcd<font></font>
[11311.796881] usb 1-3: New USB device found, idVendor=234b, idProduct=0000, bcdDevice= 2.00<font></font>
[11311.796884] usb 1-3: New USB device strings: Mfr=1, Product=2, SerialNumber=3<font></font>
[11311.796885] usb 1-3: Product: Gnuk Token<font></font>
[11311.796887] usb 1-3: Manufacturer: Free Software Initiative of Japan<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nueva generación de claves ssh</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es importante comprender que la clave se genera </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el dispositivo en sí</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y no en su computadora. </font><font style="vertical-align: inherit;">Por lo tanto, dicha clave nunca abandona el dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ir a gpg:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ gpg --card-edit<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se abre el modo interactivo gpg, habilite el modo administrador con el comando admin:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
gpg/card&gt; admin<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, ejecute el nuevo comando de generación de claves:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
gpg/card&gt; generate<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente es el procedimiento estándar de generación de claves gpg. </font><font style="vertical-align: inherit;">Durante el cual se le pedirá que guarde la clave de respaldo en el disco. </font><font style="vertical-align: inherit;">Los desarrolladores recomiendan hacer copias de seguridad, pero tú decides. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo único es que se admite la generación de hardware de claves RSA de hasta 2048 bits. </font><font style="vertical-align: inherit;">Si necesita 4096, tendrá que generar la clave en la computadora y luego importarla al dispositivo mismo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, necesitará códigos PIN. </font><font style="vertical-align: inherit;">De manera predeterminada, los siguientes códigos PIN están protegidos en el firmware: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PIN DE TARJETA - 123456 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PIN DE ADMINISTRACIÓN - 12345678 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el futuro, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deben</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cambiarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La clave se puede generar un poco más de tiempo que si se generara directamente en la computadora, por lo que tenemos un poco de paciencia.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar una clave existente</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora veamos qué hacer si ya tiene una clave ssh que le gustaría usar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, importe la clave en gpg:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ pem2openpgp temporary_id &lt; id_rsa  | gpg --import<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora necesitamos encontrar la identificación de la clave. </font><font style="vertical-align: inherit;">Para hacer esto, enumere todos los disponibles en gpg:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ gpg -K<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y encontramos la clave importada:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
sec&gt;  rsa2048 2020-02-05 [C]<font></font>
      DFEFF02E226560B7F5A5F2CAB19534F88F8FE4EC<font></font>
      Card serial no. = FFFE 87144751<font></font>
uid           [ unknown] temporary_id<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi caso, la identificación de la clave es DFEFF02E226560B7F5A5F2CAB19534F88F8FE4EC </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vaya al modo interactivo para editar la clave gpg:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ gpg --edit-key DFEFF02E226560B7F5A5F2CAB19534F88F8FE4EC<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y le damos el comando de copiar la clave a la tarjeta inteligente:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
gpg&gt; keytocard<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo, la clave está grabada.</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exportar clave pública en formato ssh</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenemos la clave pública deseada del token para ponerla en el servidor:</font></font><br>
<br>
<pre><code class="bash hljs">$ pkcs15-tool --list-keys</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi caso, la salida se ve así:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
Using reader with a card: Free Software Initiative of Japan Gnuk (FSIJ-1.2.15-87144751) 00 00<font></font>
Private RSA Key [Signature key]<font></font>
	Object Flags   : [0x03], private, modifiable<font></font>
	Usage          : [0x20C], sign, signRecover, nonRepudiation<font></font>
	Access Flags   : [0x1D], sensitive, alwaysSensitive, neverExtract, <span class="hljs-built_in">local</span><font></font>
	ModLength      : 2048<font></font>
	Key ref        : 0 (0x00)<font></font>
	Native         : yes<font></font>
	Auth ID        : 01<font></font>
	ID             : 01<font></font>
	MD:guid        : f3de5f55-d100-4973-d572-40d67e20f033<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí estamos interesados ​​en la clave de ID de la clave, en mi caso 01. Ahora exportamos la clave pública:</font></font><br>
<br>
<pre><code class="bash hljs">
$ pkcs15-tool --<span class="hljs-built_in">read</span>-public-key 01
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie la clave pública en el archivo pub.key:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
-----BEGIN PUBLIC KEY-----<font></font>
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyzHQIWEApliWYaf0T8jb<font></font>
Vh2nc5+LklKXeuJFTN3BW2VqdrTw1rpKXiANWpi+qbtZhZ2nP3CJX6qoGobXyCOd<font></font>
/iAiygFlyW4BwTQpnAm81IE9lPzfasOK7SBuKJ+ZbB4WpuYJRozgtt/gpWzmnWnW<font></font>
84/CU9Lqbhz95v/C/DImSf6LiwVdmiEj4CUNInl5pY4trguDsSfkw1u8gGqSPEsD<font></font>
ZXtlVRx8iBGi0JR02g9KTL4dDGocUtcTK8W0eY+BDbQSXfTGCy93v8sEyhdQjHs8<font></font>
oDiwkvFQ86gYqwL5DJ7U/rFSO3A5X6zmkFFV8nJZjxB2qfE5aommtXxow4iPml3x<font></font>
YwIDAQAB<font></font>
-----END PUBLIC KEY-----<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y conviértalo a formato ssh-rsa:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ ssh-keygen -f pub.key -i -mPKCS8 <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta la clave pública en el formato deseado:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDLMdAhYQCmWJZhp/RPyNtWHadzn4uSUpd64kVM3cFbZWp2tPDWukpeIA1amL6pu1mFnac/cIlfqqgahtfII53+ICLKAWXJbgHBNCmcCbzUgT2U/N9qw4rtIG4on5lsHham5glGjOC23+ClbOadadbzj8JT0upuHP3m/8L8MiZJ/ouLBV2aISPgJQ0ieXmlji2uC4OxJ+TDW7yAapI8SwNle2VVHHyIEaLQlHTaD0pMvh0MahxS1xMrxbR5j4ENtBJd9MYLL3e/ywTKF1CMezygOLCS8VDzqBirAvkMntT+sVI7cDlfrOaQUVXyclmPEHap8Tlqiaa1fGjDiI+aXfFj<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente es el procedimiento estándar para configurar ssh para iniciar sesión con una clave determinada: debe agregar la clave al archivo ~ / .ssh / Authorised_keys en el servidor remoto. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración ssh</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, para ingresar al servidor utilizando nuestro token, debe llamar a ssh con el interruptor -I y pasar la ruta al controlador del token. </font><font style="vertical-align: inherit;">Nuestro token es compatible con uno de los controladores estándar, por lo que lo utilizaremos</font></font><br>
<pre><code class="bash hljs"><font></font>
$ ssh -I /usr/lib/opensc-pkcs11.so martin@remotehost<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, será más conveniente usar el archivo de configuración (~ / .ssh / config). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue las siguientes líneas.</font></font><br>
<pre><code class="bash hljs"><font></font>
Host digitalOceanServer<font></font>
        HostName 192.168.0.1<font></font>
        User root<font></font>
        PKCS11Provider /usr/lib/opensc-pkcs11.so<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La llamada ssh ahora es aún más fácil:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ ssh digitalOceanServer<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cómo cambiar los códigos PIN estándar</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un paso igualmente importante será instalar sus propios códigos PIN. </font><font style="vertical-align: inherit;">Primero debe comprender que se utilizan dos códigos PIN diferentes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código PIN: este código se utiliza para operaciones de rutina con una tarjeta inteligente, para cifrar algo, firmar, etc.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código PIN de administrador: este código es necesario para cambiar / eliminar claves y hacer todo tipo de cosas de "administrador"</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restablecer código: un código que le permitirá desbloquear el token después de tres intentos incorrectos de ingresar el código PIN. </font><font style="vertical-align: inherit;">Su uso es opcional, por lo que depende de usted</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo tiene 3 intentos para cada uno de los códigos. </font><font style="vertical-align: inherit;">Después de lo cual se bloquea el token. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora comencemos. </font><font style="vertical-align: inherit;">Para hacer esto, volvemos al modo GPG interactivo:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
$ gpg --card-edit<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ingrese el comando passwd:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
gpg/card&gt; passwd<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se abrirá una ventana donde puede cambiar el código PIN del token. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora necesita cambiar el PIN del administrador. </font><font style="vertical-align: inherit;">Para hacer esto, vaya al modo administrador:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
gpg/card&gt; admin<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ingrese el comando passwd nuevamente:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
gpg/card&gt; passwd<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, ahora funciona en modo avanzado y se nos ofrecerán varias opciones:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
1 - change PIN<font></font>
2 - unblock PIN<font></font>
3 - change Admin PIN<font></font>
4 - <span class="hljs-built_in">set</span> the Reset Code<font></font>
Q - quit<font></font>
<font></font>
Your selection?<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionamos cambiar PIN de administrador y establecemos la contraseña de administrador de acuerdo con el esquema estándar. </font><font style="vertical-align: inherit;">Permítame recordarle que el PIN de administrador predeterminado es 12345678.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre la seguridad del dispositivo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, por $ 3 no puede lograr un nivel de seguridad clave por más de 200 dólares. </font><font style="vertical-align: inherit;">Sin embargo, el dispositivo ensamblado se puede considerar como una clave de nivel de entrada. </font><font style="vertical-align: inherit;">Hasta donde yo sé, las claves de fábrica de Nitrokey Start usan el mismo firmware. </font><font style="vertical-align: inherit;">En cualquier caso, el uso de dicho dispositivo aumentará la seguridad en al menos un nivel más alto. </font><font style="vertical-align: inherit;">Así que esta es una excelente manera de comenzar a usar llaves de hardware. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora hablemos un poco sobre lo que sucederá si pierde esta clave. </font><font style="vertical-align: inherit;">La clave en sí está protegida por un código pin. </font><font style="vertical-align: inherit;">Después de varios intentos fallidos, la clave está bloqueada. </font><font style="vertical-align: inherit;">La memoria del dispositivo en sí está protegida contra la lectura, por lo que no funcionará directamente para leer las claves escritas en él.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay algunos tipos de ataques en el chip en sí (por ejemplo, la preparación y conexión de microelectrodos, que le permitirán medir el voltaje en cualquier parte del chip, incluida la memoria), pero son bastante caros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, repito nuevamente, esta es una excelente opción de nivel de entrada, e incluso con ella, la seguridad alcanzará un nivel completamente nuevo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlaces a materiales útiles.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el proceso de uso del dispositivo, sin duda habrá una necesidad de información adicional. </font><font style="vertical-align: inherit;">Puse una lista de buenas fuentes.</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Página del</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sitio web de Debian</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentación de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> token</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para el token de inicio Nitrokey: utiliza el mismo firmware, por lo que los consejos nos convienen</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dispositivo que hemos ensamblado está siendo desarrollado por el proyecto GNUK de código abierto (en realidad, se llama un token), por lo que se puede encontrar más información en Google a pedido de "GNUK". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upd.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Los comentarios sugirieron que hay firmware que le permite usar el dispositivo para la autenticación de dos factores. El código del firmware se puede encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí </font></font></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upd. 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 15/02/2020 Los comentarios sugirieron que para este chip en particular existe una vulnerabilidad que podría drenar el contenido de la memoria. Según tengo entendido, aún no se ha publicado, pero se ha anunciado. Entonces, por ahora, no todo está claro. También sugirieron una buena solución: vierta </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">epoxi</font></a><font style="vertical-align: inherit;"> en el cuerpo del dispositivo</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mezclado con polvo de aluminio. Este método fue descrito en el libro de Kevin Mitnick, "El arte del engaño". Por lo tanto, para obtener acceso al chip, será necesario romper el pegamento que, si se maneja descuidadamente, puede dañar permanentemente el chip. Por supuesto, este método se puede eludir, esto aumenta el costo de piratear aún más. Por supuesto, si es necesario, el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mossad hará sus cosas en el Mossad</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y esto no lo detendrá, sino que solo lo retrasará. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upd. 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muchos mensajes llegaron al PM que la gente no puede obtener el firmware ST-Link. </font><font style="vertical-align: inherit;">Después de descubrirlo, descubrimos que ahora los fabricantes chinos comenzaron a ahorrar activamente en componentes y usar chips con 64Kb de memoria a bordo. </font><font style="vertical-align: inherit;">Y esto no es suficiente para el firmware, busque un chip de 128 Kb a bordo. </font><font style="vertical-align: inherit;">Por lo tanto, recomiendo que al comprar compruebe qué chip está instalado (si es posible) o consulte con el vendedor / en las revisiones. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upd. </font><font style="vertical-align: inherit;">4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resulta que todavía puede usar programadores chinos con un chip de 64 KB (aunque tendrá que usar la última versión de firmware); un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artículo interesante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre esto </font><font style="vertical-align: inherit;">apareció en el concentrador </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es487738/index.html">Esquema de animación en SCADA</a></li>
<li><a href="../es487740/index.html">Ensamblar un magnetómetro portátil</a></li>
<li><a href="../es487742/index.html">Comercio de Arbitraje (Algoritmo Bellman-Ford)</a></li>
<li><a href="../es487744/index.html">FARO presenta el escáner láser 3D FOCUS S 70</a></li>
<li><a href="../es487746/index.html">Eterno</a></li>
<li><a href="../es487750/index.html">Algunas sutilezas de las colecciones de inyección en primavera</a></li>
<li><a href="../es487752/index.html">Optimice el almacenamiento: un caso de unificación y menor costo de propiedad</a></li>
<li><a href="../es487754/index.html">Organización de la intranet (automatización de la producción de TI). Parte 1 - Usuarios y correo</a></li>
<li><a href="../es487756/index.html">RIT, Maxim Lapshin (Erlyvideo): cómo un programador para hacer crecer una empresa</a></li>
<li><a href="../es487764/index.html">Tengo 14 años y combino la escuela con el trabajo en TI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>