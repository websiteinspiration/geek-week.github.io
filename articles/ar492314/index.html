<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โผ๏ธ ๐จ ๐ณ ุงูููุฒู ุงูุฐูู: ุจูุงุก ูุฎุทุทุงุช ุงูููุงู ูุงูููุฑุจุงุก ูู ูุณุงุนุฏ ุงูููุฒู ๐ ๐๏ธ ๐น</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ูู ูุฑุฉ ุฃุชููู ูููุง ูุงุชูุฑุฉ ููููุฑุจุงุก ูุงูููุงู ุ ุฃุชุณุงุกู - ูู ุชุณุชููู ุนุงุฆูุชู ุญููุง ุงููุซูุฑุ ุญุณููุง ุ ูุนู ุ ูุญุชูู ุงูุญูุงู ุนูู ุฃุฑุถูุฉ ูุฏูุฃุฉ ูุบูุงูุฉ ุ ูููููุง ูุง ูุซ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุงูููุฒู ุงูุฐูู: ุจูุงุก ูุฎุทุทุงุช ุงูููุงู ูุงูููุฑุจุงุก ูู ูุณุงุนุฏ ุงูููุฒู</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492314/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/wj/lf/i3/wjlfi38qar57vvhqgpwuzdalerw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูู ูุฑุฉ ุฃุชููู ูููุง ูุงุชูุฑุฉ ููููุฑุจุงุก ูุงูููุงู ุ ุฃุชุณุงุกู - ูู ุชุณุชููู ุนุงุฆูุชู ุญููุง ุงููุซูุฑุ ุญุณููุง ุ ูุนู ุ ูุญุชูู ุงูุญูุงู ุนูู ุฃุฑุถูุฉ ูุฏูุฃุฉ ูุบูุงูุฉ ุ ูููููุง ูุง ูุซุฑุงู ุจุงุณุชูุฑุงุฑ. ูุจุฏู ุฃูุถูุง ุฃููุง ูููุฑ ุงูููุงู (ุนูู ุงูุฑุบู ูู ุฃููุง ูุญุจ ุฃูุถูุง ุงูุฑุด ูู ุงูุญูุงู). ููุจู ุจุถุน ุณููุงุชุ ูุฃูุง ุจุงููุนู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุชุจุทุฉ ุงูููุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฑุจุงุก </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ูุชุฑ</font></a><font style="vertical-align: inherit;"> ุฅูู ุงูููุฒู ุงูุฐููุ ูููู ูุฐุง ูุงู ุนุงููุง ูู ูุฐุง ุงูุดุฃู. ูุตูุช ุงูุฃูุฏู ุฅูู ุชุญููู ุงูุงุณุชููุงู ุงูุขู ููุท ุ ูุงูุฐู ุชุฏูุฑ ุญููู ูุฐู ุงูููุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุชุญููุช ูุคุฎุฑูุง ุฅูู Home Assistant ููุธุงู ููุฒูู ุฐูู. ูุงู ุฃุญุฏ ุงูุฃุณุจุงุจ ูุฌุฑุฏ ูุฑุตุฉ ูุชูุธูู ุฌูุน ูููุฉ ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ูุน ุฅููุงููุฉ ุฅูุดุงุก ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฑุณูู ุงูุจูุงููุฉ ุจุดูู ููุงุฆู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุนูููุงุช ุงูููุตููุฉ ูู ูุฐู ุงูููุงูุฉ ููุณุช ุฌุฏูุฏุฉ ุ ูู ูุฐู ุงูุฃุดูุงุก ูุน ุตูุตุงุช ูุฎุชููุฉ ุณุจู ูุตููุง ุนูู ุงูุฅูุชุฑูุช. </font><font style="vertical-align: inherit;">ููู ูู ููุงู ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ูุตู ููุฌูุง ุฃู ุฌุงูุจูุง ูุงุญุฏูุง ููุท. </font><font style="vertical-align: inherit;">ูุงู ุนูู ููุงุฑูุฉ ูู ูุฐู ุงูุฃุณุงููุจ ูุงุฎุชูุงุฑ ุฃูุณุจูุง ุจููุณู. </font><font style="vertical-align: inherit;">ูุง ุชุฒุงู ุงูููุงูุฉ ูุง ุชููุฑ ูุนูููุงุช ุดุงููุฉ ุนู ุฌูุน ุงูุจูุงูุงุช ุ ูููููุง ููุน ูู ููุฎุต ููู ูุนูุช. </font><font style="vertical-align: inherit;">ูุฐุง ูุฑุญุจ ุจุงูููุฏ ุงูุจูุงุก ูุงูุงูุชุฑุงุญุงุช ููุชุญุณูู.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตูุงุบุฉ ุงููุดููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูุฅู ุงููุฏู ูู ุงูุชูุฑูู ุงูููู ูู ุงูุญุตูู ุนูู ุฑุณูู ุจูุงููุฉ ุฌูููุฉ ูุงุณุชููุงู ุงูููุงู ูุงูููุฑุจุงุก:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณุงุนุฉ ููุฏุฉ ููููู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ููุฏุฉ ุฃุณุจูุนูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงุฎุชูุงุฑู) ุฃุณุจูุนู ูุดูุฑู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชูุชุธุฑูุง ุจุนุถ ุงูุตุนูุจุงุช:</font></font><br>
<br>
<ul>
<li>  ,  ,  .         . <br>
<br>
  ,     ,     .  home assistant,  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">mini-graph-card</a>,     :<br>
<br>
<ul>
<li>        (     ,         )</li>
<li>       (   ,      )</li>
</ul></li>
<li> ,  home assistant        SQLite <s>( , ,    MySQL  Postgres)</s>,        . , ,               json   <br>
<br>
<pre><code class="json hljs">{<span class="hljs-attr">"entity_id"</span>: <span class="hljs-string">"sensor.water_cold_hourly"</span>, <span class="hljs-attr">"old_state"</span>: {<span class="hljs-attr">"entity_id"</span>: <span class="hljs-string">"sensor.water_cold_hourly"</span>, <span class="hljs-attr">"state"</span>: <span class="hljs-string">"3"</span>, <span class="hljs-attr">"attributes"</span>: {<span class="hljs-attr">"source"</span>: <span class="hljs-string">"sensor.water_meter_cold"</span>, <span class="hljs-attr">"status"</span>: <span class="hljs-string">"collecting"</span>, <span class="hljs-attr">"last_period"</span>: <span class="hljs-string">"29"</span>, <span class="hljs-attr">"last_reset"</span>: <span class="hljs-string">"2020-02-23T21:00:00.022246+02:00"</span>, <span class="hljs-attr">"meter_period"</span>: <span class="hljs-string">"hourly"</span>, <span class="hljs-attr">"unit_of_measurement"</span>: <span class="hljs-string">"l"</span>, <span class="hljs-attr">"friendly_name"</span>: <span class="hljs-string">"water_cold_hourly"</span>, <span class="hljs-attr">"icon"</span>: <span class="hljs-string">"mdi:counter"</span>}, <span class="hljs-attr">"last_changed"</span>: <span class="hljs-string">"2020-02-23T19:05:06.897604+00:00"</span>, <span class="hljs-attr">"last_updated"</span>: <span class="hljs-string">"2020-02-23T19:05:06.897604+00:00"</span>, <span class="hljs-attr">"context"</span>: {<span class="hljs-attr">"id"</span>: <span class="hljs-string">"aafc8ca305ba4e49ad4c97f0eddd8893"</span>, <span class="hljs-attr">"parent_id"</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">"user_id"</span>: <span class="hljs-literal">null</span>}}, <span class="hljs-attr">"new_state"</span>: {<span class="hljs-attr">"entity_id"</span>: <span class="hljs-string">"sensor.water_cold_hourly"</span>, <span class="hljs-attr">"state"</span>: <span class="hljs-string">"4"</span>, <span class="hljs-attr">"attributes"</span>: {<span class="hljs-attr">"source"</span>: <span class="hljs-string">"sensor.water_meter_cold"</span>, <span class="hljs-attr">"status"</span>: <span class="hljs-string">"collecting"</span>, <span class="hljs-attr">"last_period"</span>: <span class="hljs-string">"29"</span>, <span class="hljs-attr">"last_reset"</span>: <span class="hljs-string">"2020-02-23T21:00:00.022246+02:00"</span>, <span class="hljs-attr">"meter_period"</span>: <span class="hljs-string">"hourly"</span>, <span class="hljs-attr">"unit_of_measurement"</span>: <span class="hljs-string">"l"</span>, <span class="hljs-attr">"friendly_name"</span>: <span class="hljs-string">"water_cold_hourly"</span>, <span class="hljs-attr">"icon"</span>: <span class="hljs-string">"mdi:counter"</span>}, <span class="hljs-attr">"last_changed"</span>: <span class="hljs-string">"2020-02-23T19:11:11.251545+00:00"</span>, <span class="hljs-attr">"last_updated"</span>: <span class="hljs-string">"2020-02-23T19:11:11.251545+00:00"</span>, <span class="hljs-attr">"context"</span>: {<span class="hljs-attr">"id"</span>: <span class="hljs-string">"0de64b8af6f14bb9a419dcf3b200ef56"</span>, <span class="hljs-attr">"parent_id"</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">"user_id"</span>: <span class="hljs-literal">null</span>}}}</code></pre><br>
     (    ,    ),         .      SDM220      10-15 ,         8.      ,      . ..         100-200  .      ,      (    home assistant  raspberry PI),            .</li>
<li>  ,      .           <s> </s>   .           (RS232/RS485/Modbus/Zigbee)   .<br>
<br>
         (    ),      X -  .            .         ,        . , ,        home assistant,          ,             (  home assistant).</li>
</ul><br>
<h2> 1</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุฏุนูุง ูุฑู ูุง ูุชู ุชูููุฑู ูุณุงุนุฏ ุงูููุฒู ูู ุฎุงุฑุฌ ููุทูุฉ ุงูุฌุฒุงุก. ูุนุฏ ููุงุณ ุงูุงุณุชููุงู ุนูู ูุฏู ูุชุฑุฉ ูู ุงููุธุงุฆู ุงููุทููุจุฉ ุจุดุฏุฉ. ุจุงูุทุจุน ุ ุชู ุฅุฏุฑุงูู ููุฐ ูุชุฑุฉ ุทูููุฉ ูู ุดูู ูููู ูุชุฎุตุต - ูุงุฆุฏุฉ_ูููุงุณ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฌููุฑ ุงููููู ูู ุฃูู ุจุฏุงุฎูู ูุจุฏุฃ ุงููุชุบูุฑ ุงูุญุงูู_ ุงููุชุฑุงูู_ุงููููุฉ ุ ููุนูุฏ ุชุนูููู ุจุนุฏ ูุชุฑุฉ ูุญุฏุฏุฉ (ุณุงุนุฉ / ุฃุณุจูุน / ุดูุฑ). ูุฑุงูุจ ุงููููู ููุณู ุงููุชุบูุฑ ุงููุงุฑุฏ (ูููุฉ ููุน ูู ุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ) ุ ููุดุชุฑู ูู ุงูุชุบููุฑุงุช ูู ุงููููุฉ ููุณูุง - ุชุญุตู ููุท ุนูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ. ูุชู ูุตู ูุฐุง ุงูุดูุก ูู ุฃุณุทุฑ ููููุฉ ููุท ูู ููู ุงูุชูููู.</font></font><br>
<br>
<pre><code class="python hljs">utility_meter:<font></font>
  water_cold_hour_um:<font></font>
    source: sensor.water_meter_cold<font></font>
    cycle: hourly<font></font>
  water_cold_day_um:<font></font>
    source: sensor.water_meter_cold<font></font>
    cycle: daily<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sensor.water_meter_cold ูู ุงููููุฉ ุงูุญุงููุฉ ููุนุฏุงุฏ ุจุงููุชุฑ ุ ูุงูุชู ุฃุญุตู ุนูููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงุดุฑุฉ ูู ูุทุนุฉ ุงูุญุฏูุฏ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุงุณุทุฉ mqtt. ูุฎูู ุงูุชุตููู ูุณุชุดุนุฑูู ุฌุฏูุฏูู water_cold_hour_um ู water_cold_day_um ุ ุงููุฐุงู ูุชุฑุงููุงู ุนูู ุงููุฑุงุกุงุช ุจุงูุณุงุนุฉ ูุงูููู ุ ููุนูุฏ ุถุจุทููุง ุจุนุฏ ูุชุฑุฉ. ููุง ูุฎุทุท ุงูุจุทุงุฑูุฉ ููุฏุฉ ูุตู ุณุงุนุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/le/u3/fk/leu3fkbgddojjis_lmcawt6gcv4.png" alt="ุตูุฑุฉ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฑูุฒ ุงูุฑุณู ุงูุจูุงูู ููู ุณุงุนุฉ ููู ููู ูู lovelace-UI ููุง ููู:</font></font><br>
<br>
<pre><code class="python hljs">      - type: history-graph<font></font>
        title: <span class="hljs-string">'Hourly water consumption using vars'</span>
        hours_to_show: <span class="hljs-number">48</span><font></font>
        entities:<font></font>
          - sensor.water_hour<font></font>
<font></font>
      - type: history-graph<font></font>
        title: <span class="hljs-string">'Daily water consumption using vars'</span>
        hours_to_show: <span class="hljs-number">360</span><font></font>
        entities:<font></font>
          - sensor.water_day<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ุชููู ูุดููุฉ ูุฐุง ุงูููุฌ ูู ูุฐู ุงูุฎูุงุฑุฒููุฉ. ููุง ุฐูุฑุช ุ ููู ูููุฉ ุฅุฏุฎุงู (ูุฑุงุกุฉ ุงูุนุฏุงุฏ ุงูุญุงููุฉ ููู ูุชุฑ ูุงุญู) ุ ูุชู ุฅูุดุงุก 1 ูููู ุจุงูุช ูู ุงูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ููุง ูููุฏ ูู ุนุฏุงุฏ ูุงุฆุฏุฉ ูููุฉ ุฌุฏูุฏุฉ ุ ูุงูุชู ุชุถูู ุฃูุถูุง ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ุฅุฐุง ููุช ุฃุฑุบุจ ูู ุฌูุน ูุฑุงุกุงุช ูู ุณุงุนุฉ / ููููุฉ / ุฃุณุจูุนูุฉ / ุดูุฑูุฉ ุ ููุนุฏุฉ ุฒูุงุฏุงุช ููููุงู ุ ูุญุชู ุฅุถุงูุฉ ูุฌููุนุฉ ูู ุงูุนุฏุงุฏุงุช ุงูููุฑุจุงุฆูุฉ - ุณูููู ูุฐุง ูุซูุฑูุง ูู ุงูุจูุงูุงุช. ุญุณููุง ุ ุนูู ูุญู ุฃุฏู ุ ููุณ ููุงู ุงููุซูุฑ ูู ุงูุจูุงูุงุช ุ ูููู ุจูุง ุฃู ุงููุณุงุนุฏ ุงูููุฒูู ููุชุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฌููุนุฉ ูู ุงููุนูููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ุ ูุฅู ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณูููู ุจุณุฑุนุฉ ูุงุฆูุฉ. ุฃุฎุดู ุญุชู ุฃู ุฃูุฏุฑ ุญุฌู ุงููุงุนุฏุฉ ููุฑุณู ุงูุจูุงูู ุงูุฃุณุจูุนู ูุงูุดูุฑู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูุญู ุนุฏุงุฏ ุงููุฑุงูู ูุญุฏู ุงููููุฉ. </font><font style="vertical-align: inherit;">ุฅู ุงูุฑุณู ุงูุจูุงูู ููููู ุงูุชู ูุนุทููุง ูููุงุณ ุงููููุนุฉ ูู ุฏุงูุฉ ูุชุฒุงูุฏุฉ ุจุดูู ุฑุชูุจ ุชุชู ุฅุนุงุฏุฉ ุชุนููููุง ุฅูู 0 ูู ุณุงุนุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ูุฎุทุท ุงุณุชููุงู ุณูู ุงูุงุณุชุฎุฏุงู ุ ูู ูุชุฑูุง ุชู ุชูุงููู ุฎูุงู ูุฐู ุงููุชุฑุฉ. </font><font style="vertical-align: inherit;">ูุง ูุนุฑู ุงููููู ุงูููุงุณู ููุฑุณู ุงูุจูุงูู ุงูุชุงุฑูุฎู ููููุฉ ุงูููุงู ุจุฐูู ุ ูููู ุงููููู ุงูุฎุงุฑุฌู ูุจุทุงูุฉ ุงูุฑุณู ุงูุจูุงูู ุงููุตุบุฑ ูููู ุฃู ูุณุงุนุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุฑูุฒ ุงูุจุทุงูุฉ ูู lovelace-UI:</font></font><br>
<br>
<pre><code class="python hljs">      - aggregate_func: max<font></font>
        entities:<font></font>
          - color: var(--primary-color)<font></font>
            entity: sensor.water_cold_hour_um<font></font>
        group_by: hour<font></font>
        hours_to_show: <span class="hljs-number">48</span>
        name: <span class="hljs-string">"Hourly water consumption aggregated by utility meter"</span>
        points_per_hour: <span class="hljs-number">1</span><font></font>
        show:<font></font>
          graph: bar<font></font>
        type: <span class="hljs-string">'custom:mini-graph-card'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฅุนุฏุงุฏุงุช ุงูููุงุณูุฉ ูุซู ุงุณู ุงููุณุชุดุนุฑ ูููุน ุงูุฑุณู ุงูุจูุงูู ูุงูููู (ูู ูุนุฌุจูู ุงูุจุฑุชูุงูู ุงูููุงุณู) ุ ูู ุงูููู ููุงุญุธุฉ 3 ุฅุนุฏุงุฏุงุช:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">group_by: hour - ุณูุชู ุฅูุดุงุก ุงููุฎุทุท ูุน ูุญุงุฐุงุฉ ุงูุฃุนูุฏุฉ ูู ุจุฏุงูุฉ ุงูุณุงุนุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Points_per_hour: 1 - ุจุงุฑ ูุงุญุฏ ููู ุณุงุนุฉ</font></font></li>
<li>  , aggregate_func: max โ       .         </li>
</ul><br>
<img src="https://habrastorage.org/webt/yj/du/c7/yjduc7nhxnq18qvcityd_ul91y0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชูุชุจู ุฅูู ุนุฏุฏ ูู ุงูุฃุนูุฏุฉ ุงูููุฌูุฏุฉ ุนูู ุงููุณุงุฑ - ูุฐุง ูู ุงูุณููู ุงูููุงุณู ูููููู ุฅุฐุง ูู ุชูู ููุงู ุจูุงูุงุช. ููู ุชูู ููุงู ุจูุงูุงุช - ููุฏ ููุช ููุท ุจุชุดุบูู ุฌูุน ุจูุงูุงุช ุนุฏุงุฏ ุงููุฑุงูู ูุจู ุณุงุนุชูู ููุท ูู ุฃุฌู ูุฐู ุงูููุงูุฉ (ุณุฃุฎุจุฑู ุจููุฌู ุงูุญุงูู ุจุนุฏ ุฐูู ุจูููู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูุตูุฑุฉ ุ ุฃุฑุฏุช ุฃู ุฃุธูุฑ ุฃูู ูู ุจุนุถ ุงูุฃุญูุงู ูุนูู ุนุฑุถ ุงูุจูุงูุงุช ุ ูุชุนูุณ ุงูุฃุดุฑุทุฉ ุงูููู ุงูุตุญูุญุฉ ุญููุง. ููู ูุฐุง ููุณ ูู ุดูุก. ูุนุฑุถ ุงูุนููุฏ ุงููุญุฏุฏ ูููุงุตู ุงูุฒููู ูู 11 ุฅูู 12 ุตุจุงุญูุง ูุณุจุจ ูุง 19 ูุชุฑูุง ุ ุนูู ุงูุฑุบู ูู ุฃูู ุนูู ูุฎุทุท ุงูุฃุณูุงู ุฃุนูู ููููุงู ูููุณ ุงููุชุฑุฉ ูุฑู ุงุณุชููุงู 62 ูุชุฑูุง ูู ููุณ ุงููุณุชุดุนุฑ. ุฅูุง ุฎูู ุฃู ุงููุฏูู ููุชููุฉ. ููููู ูุง ุฃููู ุณุจุจ ุงููุทุงุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงููููู - ูุงู ุงูุงุณุชููุงู ุทุจูุนููุง ุ ููู ุฃูุถูุง ูุฑุฆู ูู ุฌุฏูู ุงูุฃุณูุงู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ูู ุฃุชููู ูู ุชุญููู ูุตุฏุงููุฉ ูุฐุง ุงูููุฌ - ูุธูุฑ ุงูุฑุณู ุงูุจูุงูู ุฏุงุฆููุง ููุนูุง ูู ุงูุจุฏุนุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณ ุฑูุฒ ุฌูุงุฒ ุงุณุชุดุนุงุฑ ุงูููู.</font></font><br>
<br>
<pre><code class="python hljs">      - aggregate_func: max<font></font>
        entities:<font></font>
          - color: var(--primary-color)<font></font>
            entity: sensor.water_cold_day_um<font></font>
        group_by: interval<font></font>
        hours_to_show: <span class="hljs-number">360</span>
        name: <span class="hljs-string">"Daily water consumption aggregated by utility meter"</span>
        points_per_hour: <span class="hljs-number">0.0416666666</span><font></font>
        show:<font></font>
          graph: bar<font></font>
        type: <span class="hljs-string">'custom:mini-graph-card'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุญุธ ุฃูู ุชู ุชุนููู ูุนููุฉ group_by ุนูู ุงููุงุตู ุงูุฒููู ุ ูุฃู ูุนููุฉ Points_per_hour ุชุญูู ูู ุดูุก. </font><font style="vertical-align: inherit;">ููุฐู ูุดููุฉ ุฃุฎุฑู ููุฐุง ุงููููู - ูุนูู point_per_hour ุจุดูู ุฌูุฏ ุนูู ุงูุฑุณูู ุงูุจูุงููุฉ ูู ุณุงุนุฉ ุฃู ุฃูู ุ ููููู ูุซูุฑ ููุงุดูุฆุฒุงุฒ ุนูู ูุชุฑุงุช ูุจูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ููุญุตูู ุนูู ุนููุฏ ูุงุญุฏ ูู ููู ูุงุญุฏ ุ ูุงู ุนูู ุฅุฏุฎุงู ุงููููุฉ 1/24 = 0.04166666. </font><font style="vertical-align: inherit;">ุฃูุง ูุง ุฃุชุญุฏุซ ุนู ุงูุฑุณูู ุงูุจูุงููุฉ ุงูุฃุณุจูุนูุฉ ูุงูุดูุฑูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฌ 2</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุงูุชุดูุช ููุชู ูุณุงุนุฏ ุงูููุฒู ุ ููุฏ ุตุงุฏูุช ูุฐุง ุงูููุฏูู ููุง:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-0HrYFCRH0M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌูุน ุตุฏูู ุจูุงูุงุช ุงูุงุณุชููุงู ูู ุนุฏุฉ ุฃููุงุน ูู ููุงูุฐ Xiaomi. ูููุชู ุฃุณูู ููููุงู - ูุง ุนููู ุณูู ุนุฑุถ ูููุฉ ุงูุงุณุชููุงู ููููู ูุงูุฃูุณ ูุงูุดูุฑ. ูุง ุฌุฏุงูู ูุทููุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุชุฑู ุฌุงูุจุง ุงูููุงูุดุฉ ุญูู ุงูุชูุงูู ุงููุฏูู ูููู ุงูุทุงูุฉ ุงูุขููุฉ - ููุฏ ูุชุจุช ุจุงููุนู ุนู "ุฏูุฉ" ูุฐุง ุงูููุฌ. ููุณ ูู ุงููุงุถุญ ููุงุฐุง ูู ูุณุชุฎุฏู ููู ุงูุงุณุชููุงู ุงููุชุฑุงููุฉ ุ ูุงูุชู ุชู ุฌูุนูุง ุจุงููุนู ูู ููุณ ุงููููุฐ. ูู ุฑุฃูู ุ ุงูุงูุฏูุงุฌ ุฏุงุฎู ูุทุนุฉ ุงูุญุฏูุฏ ุณูุนูู ุจุดูู ุฃูุถู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุฏูู ุ ูุฃุฎุฐ ููุฑุฉ ุญุณุงุจ ุงูุงุณุชููุงู ูุฏูููุง ูููุชุฑุฉ. ูุญุณุจ ุงูููุงุญ ููุท ููู ุงูููู ูุงูุฃูุณ ุ ููููุง ุณูุฐูุจ ุฃุจุนุฏ ูู ุฐูู ููุญุงูู ุฑุณู ุฑุณู ุจูุงูู. ุฌููุฑ ุงูุทุฑููุฉ ุงูููุชุฑุญุฉ ูู ุญุงูุชู ูู ุนูู ุงููุญู ุงูุชุงูู.</font></font><br>
<br>
<ul>
<li>  ___,      </li>
<li>     (   )          .         โ    ,         . </li>
<li>  โโ  ___     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ูููู ุงูููุงู ุจู ูู </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงู</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุงุฆู ูุณุงุนุฏุฉ ุงูููุฒู ููุณู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุนููู ูุชุงุจุฉ ุจุนุถ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฃูุซุฑ ูู ุงูููุฌ ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ููุจุฏุก ุ ุฏุนูุง ูุญุตู ุนูู ูุฐู "ุงููุชุบูุฑุงุช". </font><font style="vertical-align: inherit;">ุฎุงุฑุฌ ุงูุตูุฏูู ุ ููุณ ูุฏููุง ููุงู "ูุชุบูุฑ" ุ ูููู ููููู ุงุณุชุฎุฏุงู ุฎุฏูุงุช ูุณูุท mqtt. </font><font style="vertical-align: inherit;">ุณูุฑุณู ุงูููู ูุน ุงูุงุญุชูุงุธ ุจุงูุนูู ุงูุญูููู ููุงู - ุณูููุฑ ูุฐุง ุงููููุฉ ุฏุงุฎู ูุณูุท ุ ูููููู ุณุญุจูุง ูู ุฃู ููุช ุ ุญุชู ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ูุณุงุนุฏ ุงูููุฒู. </font><font style="vertical-align: inherit;">ุฃูุง ุฌุนูุช ุนุฏุงุฏุงุช ุณุงุนุฉ ูููุงุฑ ุนูู ุงูููุฑ.</font></font><br>
<br>
<pre><code class="python hljs">- platform: mqtt<font></font>
  state_topic: <span class="hljs-string">"test/water/hour"</span><font></font>
  name: water_hour<font></font>
  unit_of_measurement: l<font></font>
<font></font>
- platform: mqtt<font></font>
  state_topic: <span class="hljs-string">"test/water/hour_begin"</span><font></font>
  name: water_hour_begin<font></font>
  unit_of_measurement: l<font></font>
<font></font>
- platform: mqtt<font></font>
  state_topic: <span class="hljs-string">"test/water/day"</span><font></font>
  name: water_day<font></font>
  unit_of_measurement: l<font></font>
<font></font>
- platform: mqtt<font></font>
  state_topic: <span class="hljs-string">"test/water/day_begin"</span><font></font>
  name: water_day_begin<font></font>
  unit_of_measurement: l</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุฏุซ ูู ุงูุณุญุฑ ูู ุงูุฃุชูุชุฉ ุ ุงูุชู ุชุนูู ูู ุณุงุนุฉ ููู ูููุฉ ุนูู ุงูุชูุงูู.</font></font><br>
<br>
<pre><code class="python hljs">- id: water_new_hour<font></font>
  alias: water_new_hour<font></font>
  initial_state: true<font></font>
  trigger:<font></font>
    - platform: time_pattern<font></font>
      minutes: <span class="hljs-number">0</span><font></font>
  action:<font></font>
    - service: mqtt.publish<font></font>
      data:<font></font>
        topic: <span class="hljs-string">"test/water/hour"</span><font></font>
        payload_template: &gt;<font></font>
          {{ (states.sensor.water_meter_cold.state|int) - (states.sensor.water_hour_begin.state|int) }}<font></font>
        retain: true<font></font>
    - service: mqtt.publish<font></font>
      data:<font></font>
        topic: <span class="hljs-string">"test/water/hour_begin"</span><font></font>
        payload_template: &gt;<font></font>
          {{ states.sensor.water_meter_cold.state }}<font></font>
        retain: true<font></font>
<font></font>
- id: water_new_day<font></font>
  alias: water_new_day<font></font>
  initial_state: true<font></font>
  trigger:<font></font>
    - platform: time<font></font>
      at: <span class="hljs-string">"00:00:00"</span><font></font>
  action:<font></font>
    - service: mqtt.publish<font></font>
      data:<font></font>
        topic: <span class="hljs-string">"test/water/day"</span><font></font>
        payload_template: &gt;<font></font>
          {{ (states.sensor.water_meter_cold.state|int) - (states.sensor.water_day_begin.state|int) }}<font></font>
        retain: true<font></font>
    - service: mqtt.publish<font></font>
      data:<font></font>
        topic: <span class="hljs-string">"test/water/day_begin"</span><font></font>
        payload_template: &gt;<font></font>
          {{ states.sensor.water_meter_cold.state }}<font></font>
        retain: true</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ููุง ุงูุฃุชูุชุฉ ุจุฅุฌุฑุงุกูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุญุณุงุจ ูููุฉ ุงููุงุตู ุงูุฒููู ุนูู ุฃูู ุงููุฑู ุจูู ูููุฉ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุซ ุงููููุฉ ุงูุฃุณุงุณูุฉ ูููุงุตู ุงูุฒููู ุงูุชุงูู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุญู ุงูุฑุณูู ุงูุจูุงููุฉ ูู ูุฐู ุงูุญุงูุฉ ูู ุฎูุงู ุงูุฑุณู ุงูุจูุงูู ุงููุนุชุงุฏ ููุชุงุฑูุฎ:</font></font><br>
<br>
<pre><code class="python hljs">      - type: history-graph<font></font>
        title: <span class="hljs-string">'Hourly water consumption using vars'</span>
        hours_to_show: <span class="hljs-number">48</span><font></font>
        entities:<font></font>
          - sensor.water_hour<font></font>
<font></font>
      - type: history-graph<font></font>
        title: <span class="hljs-string">'Daily water consumption using vars'</span>
        hours_to_show: <span class="hljs-number">360</span><font></font>
        entities:<font></font>
          - sensor.water_day</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ูุฐุง: ูู </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rp/nn/ah/rpnnahsspezbcydtjmhlu6kb53w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญูุซ ุงููุจุฏุฃ ุ ูุฐุง ุจุงููุนู ูุง ุชุญุชุงุฌู. </font><font style="vertical-align: inherit;">ููุฒุฉ ูุฐู ุงูุทุฑููุฉ ูู ุฃู ุงูุจูุงูุงุช ูุชู ุฅูุดุงุคูุง ูุฑุฉ ูุงุญุฏุฉ ููู ูุงุตู ุฒููู. </font><font style="vertical-align: inherit;">ุฃููุฆู. </font><font style="vertical-align: inherit;">ููุท 24 ุฅุฏุฎุงููุง ูููููุง ููุฑุณู ุงูุจูุงูู ููู ุณุงุนุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุง ูุฒุงู ูุฐุง ูุง ูุญู ุงููุดููุฉ ุงูุนุงูุฉ ููุงุนุฏุฉ ูุชูุงููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุฃุฑุบุจ ูู ุฌุฏูู ุงุณุชููุงู ุดูุฑู ุ ูุณูุชุนูู ุนูู ุชุฎุฒูู ุงูุจูุงูุงุช ููุฏุฉ ุนุงู ุนูู ุงูุฃูู. </font><font style="vertical-align: inherit;">ููุธุฑูุง ูุฃู ุงููุณุงุนุฏ ุงูููุฒูู ูููุฑ ุฅุนุฏุงุฏูุง ูุงุญุฏูุง ููุท ููุฏุฉ ุงูุชุฎุฒูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ุจุฃููููุง ุ ูุฅู ูุฐุง ูุนูู ุฃูู ูุฌุจ ุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ูู ุงููุธุงู ููุฏุฉ ุนุงู ูุงูู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููุฏุฉ ุนุงู ุฃุณุชููู 200 ูุชุฑ ููุนุจ ูู ุงููุงุก ุ ููุง ูุนูู ุฃูู ูุญุชูู ุนูู 200000 ุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ูุฅุฐุง ุฃุฎุฐุช ูู ุงูุงุนุชุจุงุฑ ุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ ุฃุฎุฑู ุ ูุตุจุญ ุงูุฑูู ุบูุฑ ูุงุฆู ุนูู ุงูุฅุทูุงู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฌ 3</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณู ุงูุญุธ ุ ูุงู ุงูุฃุดุฎุงุต ุงูุฃุฐููุงุก ุจุงููุนู ุจุญู ูุฐู ุงููุดููุฉ ุนู ุทุฑูู ูุชุงุจุฉ ูุงุนุฏุฉ ุจูุงูุงุช InfluxDB. ุชู ุชุญุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฐู ุฎุตูุตูุง ูุชุฎุฒูู ุงูุจูุงูุงุช ุงููุงุฆูุฉ ุนูู ุงูููุช ููู ูุซุงููุฉ ูุชุฎุฒูู ููู ุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ ุงููุฎุชููุฉ. ูููุฑ ุงููุธุงู ุฃูุถูุง ูุบุฉ ุงุณุชุนูุงู ุดุจููุฉ ุจู SQL ุชุณูุญ ูู ุจุงุฎุชูุงุฑ ุงูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุซู ุชุฌููุนูุง ุจุทุฑู ูุฎุชููุฉ. ุฃุฎูุฑูุง ุ ูููู ุชุฎุฒูู ุจูุงูุงุช ูุฎุชููุฉ ูู ุฃููุงุช ูุฎุชููุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุชุฎุฒูู ุงููุฑุงุกุงุช ุงููุชุบูุฑุฉ ุจุงุณุชูุฑุงุฑ ูุซู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฃู ุงูุฑุทูุจุฉ ูุจุถุนุฉ ุฃุณุงุจูุน ููุท ุ ุจูููุง ูููู ุชุฎุฒูู ุงููุฑุงุกุงุช ุงูููููุฉ ูุงุณุชููุงู ุงูููุงู ููุฏุฉ ุนุงู ูุงูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู InfluxDB ุ ุงุฎุชุฑุน ุงูุฃุดุฎุงุต ุงูุฃุฐููุงุก ุฃูุถูุง Grafana ุ ููู ูุธุงู ุฑุณู ุจูุงูู ูุนุชูุฏ ุนูู ุจูุงูุงุช ูู InfluxDB. </font><font style="vertical-align: inherit;">ูููู ูู Grafana ุฑุณู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฑุณูู ุงูุจูุงููุฉ ุ ูุชุฎุตูุตูุง ุจุงูุชูุตูู ุ ูุงูุฃูู ูู ุฐูู ุ ูููู ุฃู ุชููู ูุฐู ุงูุฑุณูู ุงูุจูุงููุฉ "ุนุงููุฉ" ุนูู ูุณุงุนุฏ ุงูููุฒู lovelace-UI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุญุตูู ุนูู ูุณุชูุญุงุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชุตู ุงูููุงูุงุช ุจุงูุชูุตูู ุนูููุฉ ุชุซุจูุช ูุชูุตูู InfluxDB ู Grafana ุจูุณุงุนุฏ ุงูููุฒู. </font><font style="vertical-align: inherit;">ุณุฃุฑูุฒ ุนูู ุญู ูุดููุชู ุงููุญุฏุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฏุนููุง ูุจุฏุฃ ูู ุฅุถุงูุฉ ูููุฉ ุงูุนุฏุงุฏ ูู ุชุฏูู. </font><font style="vertical-align: inherit;">ุฌุฒุก ูู ุชูููู ุงููุณุงุนุฏ ุงูููุฒูู (ูู ูุฐุง ุงููุซุงู ุ ุณุฃุณุชูุชุน ููุณ ููุท ุจุงูุจุฑุฏ ุ ูููู ุฃูุถูุง ุจุงููุงุก ุงูุณุงุฎู):</font></font><br>
<br>
<pre><code class="python hljs">influxdb:<font></font>
  host: localhost<font></font>
  max_retries: <span class="hljs-number">3</span><font></font>
  default_measurement: state<font></font>
  database: homeassistant<font></font>
  include:<font></font>
    entities:<font></font>
      - sensor.water_meter_hot<font></font>
      - sensor.water_meter_cold</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููู ุญูุธ ููุณ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฏุงุฎููุฉ ููุณุงุนุฏ ุงูููุฒู ุญุชู ูุง ุชุถุฎููุง ูุฑุฉ ุฃุฎุฑู:</font></font><br>
<br>
<pre><code class="python hljs">recorder:<font></font>
  purge_keep_days: <span class="hljs-number">10</span>
  purge_interval: <span class="hljs-number">1</span><font></font>
  exclude:<font></font>
    entities:<font></font>
      - sensor.water_meter_hot<font></font>
      - sensor.water_meter_cold</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชูู ุงูุขู ุฅูู ูุญุฏุฉ ุชุญูู InfluxDB ูุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุง. ุนูู ูุฌู ุงูุฎุตูุต ุ ุชุญุชุงุฌ ุฅูู ุชูููู ูุฏุฉ ุชุฎุฒูู ูุฐู ุงูุจูุงูุงุช ุฃู ุชูู. ููุธู ูุฐุง ูุง ูุณูู ุจ ุณูุงุณุฉ ุงูุงุณุชุจูุงุก - ูุฐู ูุดุงุจูุฉ ูููุงุนุฏ ุงูุจูุงูุงุช ุฏุงุฎู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ุ ูุน ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฏุงุฎููุฉ ููุง ุฅุนุฏุงุฏุงุชูุง ุงูุฎุงุตุฉ. ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ูู ุณูุงุณุฉ ุงุณุชุจูุงุก ุชุณูู autogen ุ ุณูุชู ุชุฎุฒูู ูุฐู ุงูุจูุงูุงุช ููุฏุฉ ุฃุณุจูุน. ุฃุฑุบุจ ูู ุชุฎุฒูู ุจูุงูุงุช ุงูุณุงุนุฉ ููุฏุฉ ุดูุฑ ุ ูุงูุฃุณุจูุนู ููุฏุฉ ุนุงู ุ ููุฌุจ ุนุฏู ุญุฐู ุงูุจูุงูุงุช ุงูุดูุฑูุฉ ุนูู ุงูุฅุทูุงู. ุฅูุดุงุก ุณูุงุณุฉ ุงุญุชูุงุธ ููุงุณุจุฉ</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">RETENTION</span> <span class="hljs-keyword">POLICY</span> <span class="hljs-string">"month"</span> <span class="hljs-keyword">ON</span> <span class="hljs-string">"homeassistant"</span> <span class="hljs-keyword">DURATION</span> <span class="hljs-number">30</span>d <span class="hljs-keyword">REPLICATION</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">RETENTION</span> <span class="hljs-keyword">POLICY</span> <span class="hljs-string">"year"</span> <span class="hljs-keyword">ON</span> <span class="hljs-string">"homeassistant"</span> <span class="hljs-keyword">DURATION</span> <span class="hljs-number">52</span>w <span class="hljs-keyword">REPLICATION</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">RETENTION</span> <span class="hljs-keyword">POLICY</span> <span class="hljs-string">"infinite"</span> <span class="hljs-keyword">ON</span> <span class="hljs-string">"homeassistant"</span> <span class="hljs-keyword">DURATION</span> INF <span class="hljs-keyword">REPLICATION</span> <span class="hljs-number">1</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุ ูู ุงูุญูููุฉ ุ ุงูุฎุฏุนุฉ ุงูุฑุฆูุณูุฉ ูู ุชุฌููุน ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ุงูุงุณุชุนูุงู ุงููุณุชูุฑ. </font><font style="vertical-align: inherit;">ูุฐู ุขููุฉ ุชุจุฏุฃ ุงุณุชุนูุงููุง ุชููุงุฆููุง ูู ููุงุตู ุฒูููุฉ ูุญุฏุฏุฉ ุ ูุชุฌููุน ุงูุจูุงูุงุช ููุฐุง ุงูุงุณุชุนูุงู ุ ูุชุถูู ุงููุชูุฌุฉ ุฅูู ูููุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู (ุฃูุชุจ ูู ุนููุฏ ูู ุฃุฌู ุณูููุฉ ุงููุฑุงุกุฉ ุ ูููู ูู ุงููุงูุน ูุงู ุนูู ุฅุฏุฎุงู ูุฐุง ุงูุฃูุฑ ูู ุณุทุฑ ูุงุญุฏ)</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> CONTINUOUS <span class="hljs-keyword">QUERY</span> cq_water_hourly <span class="hljs-keyword">ON</span> homeassistant 
<span class="hljs-keyword">BEGIN</span> 
  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">value</span> 
  <span class="hljs-keyword">INTO</span> homeassistant.month.water_meter_hour 
  <span class="hljs-keyword">FROM</span> homeassistant.autogen.l 
  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>(<span class="hljs-number">1</span>h), entity_id fill(previous) 
<span class="hljs-keyword">END</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงูุฃูุฑ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุงุณุชุนูุงู ูุณุชูุฑ ุจุงุณู cq_water_cold_hourly ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงููุณุงุนุฏุฉ ุงูููุฒููุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชูููุฐ ุงูุทูุจ ูู ุณุงุนุฉ (ุงูููุช (1 ุณุงุนุฉ))</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูููู ุงูุทูุจ ุจุงุณุชุฑุฌุงุน ุฌููุน ุงูุจูุงูุงุช ูู Meas'a homeassistant.autogen.l (ูุชุฑ) ุ ุจูุง ูู ุฐูู ูุฑุงุกุงุช ุงููุงุก ุงูุจุงุฑุฏ ูุงูุณุงุฎู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชุฌููุน ุงูุจูุงูุงุช ุงููุฌูุนุฉ ุญุณุจ ููุงู_ุงูุฏ ุ ููุง ุณูุคุฏู ุฅูู ุฅูุดุงุก ููู ูููุตูุฉ ููููุงู ุงูุจุงุฑุฏุฉ ูุงูุณุงุฎูุฉ.</font></font></li>
<li>               ,      max(value) </li>
<li>     homeassistant.month.water_meter_hour,  month   retention policy     .               entity_id     value</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููู ุฃู ุนูุฏูุง ูุง ูููู ููุงู ุฃุญุฏ ูู ุงูููุฒู ุ ูุง ููุฌุฏ ุงุณุชููุงู ููููุงู ุ ูุจุงูุชุงูู ูุง ุชูุฌุฏ ุฅุฏุฎุงูุงุช ุฌุฏูุฏุฉ ูู homeassistant.autogen.l ุฃูุถูุง. ูุชุฌูุจ ุงูููู ุงูููููุฏุฉ ูู ุงูุงุณุชุนูุงูุงุช ุงูุนุงุฏูุฉ ุ ููููู ุงุณุชุฎุฏุงู ุงูุชุนุจุฆุฉ (ุงูุณุงุจูุฉ). ุณูุคุฏู ุฐูู ุฅูู ุฅุฌุจุงุฑ InfluxDB ุนูู ุงุณุชุฎุฏุงู ูููุฉ ุงูุณุงุนุฉ ุงููุงุถูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุฅู ุงูุงุณุชุนูุงู ุงููุณุชูุฑ ูู ุฎุตูุตูุฉ: ูุง ุชุนูู ุฎุฏุนุฉ ุงูุชุนุจุฆุฉ (ุงูุณุงุจูุฉ) ููุง ูุชู ุฅูุดุงุก ุงูุณุฌูุงุช ุจุจุณุงุทุฉ. ุนูุงูุฉ ุนูู ุฐูู ุ ูุฐู ูุดููุฉ ูุง ูููู ุงูุชุบูุจ ุนูููุง ูุงูุชู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุดุช ููุฐ ุฃูุซุฑ ูู ุนุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุณูุชุนุงูู ูุน ูุฐู ุงููุดููุฉ ูุงุญููุง ุ ููุชุฑู ููุก (ุงูุณุงุจู) ูู ุทูุจ ุจุญุซ ูุณุชูุฑ - ููู ูุง ูุชุฏุงุฎู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุชุญูู ููุง ุญุฏุซ (ุจุงูุทุจุน ุ ุชุญุชุงุฌ ุฅูู ุงูุงูุชุธุงุฑ ุจุถุน ุณุงุนุงุช):</font></font><br>
<br>
<pre><code class="python hljs">&gt; select * <span class="hljs-keyword">from</span> homeassistant.month.water_meter_hour group by entity_id<font></font>
...<font></font>
name: water_meter_hour<font></font>
tags: entity_id=water_meter_cold<font></font>
time                 value<font></font>
----                 -----<font></font>
...<font></font>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T01:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370511</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T02:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370513</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T05:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370527</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T06:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370605</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T07:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370635</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T08:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370699</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T09:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370761</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T10:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370767</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T11:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370810</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T12:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370818</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T13:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370827</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T14:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370849</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T15:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">370921</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฌู ููุงุญุธุฉ ุฃู ุงูููู ุงูููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชู ุชุฎุฒูููุง ุจุงูุชูููุช ุงูุนุงููู ุงูููุณู (UTC) ุ ูุจุงูุชุงูู ููู ุชุฎุชูู ูู ูุฐู ุงููุงุฆูุฉ ุจููุฏุงุฑ 3 ุณุงุนุงุช - ุชุชูุงูู ููู 7 ุตุจุงุญูุง ูู ุฅุฎุฑุงุฌ InfluxDB ูุน ุงูููู ุงูุฎุงุตุฉ ุจู 10 ุตุจุงุญูุง ูู ุงูุฑุณูู ุงูุจูุงููุฉ ุฃุนูุงู. </font><font style="vertical-align: inherit;">ูุงุญุธ ุฃูุถูุง ุฃูู ูู ุงููุชุฑุฉ ูุง ุจูู 2 ู 5 ุตุจุงุญูุง ูุง ุชูุฌุฏ ุณุฌูุงุช ุจุจุณุงุทุฉ - ูุฐู ูู ููุณ ููุฒุฉ ุงูุงุณุชุนูุงู ุงููุณุชูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑู ุ ูุฅู ุงููููุฉ ุงููุฌูุนุฉ ูู ุฃูุถูุง ุชุณูุณู ูุชุฒุงูุฏ ุจุดูู ุฑูุชููู ุ ููุท ุงูุณุฌูุงุช ุฃูู ุชูุฑุงุฑูุง - ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุณุงุนุฉ. </font><font style="vertical-align: inherit;">ููู ูุฐู ููุณุช ูุดููุฉ - ูููููุง ูุชุงุจุฉ ุงุณุชุนูุงู ุขุฎุฑ ููุชุฌ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ ูููุฎุทุท.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">difference</span>(<span class="hljs-keyword">max</span>(<span class="hljs-keyword">value</span>)) 
<span class="hljs-keyword">FROM</span> homeassistant.month.water_meter_hour 
<span class="hljs-keyword">WHERE</span> entity_id=<span class="hljs-string">'water_meter_cold'</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">time</span> &gt;= <span class="hljs-keyword">now</span>() <span class="hljs-number">-24</span>h 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>(<span class="hljs-number">1</span>h), entity_id <font></font>
fill(previous)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฃููู ุจูู ุชุดููุฑ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุงุนุฏุฉ ุจูุงูุงุช homeassistant.month.water_meter_hour ุ ูููู ุจุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุงูููุงู_id = 'water_meter_cold' ููููู ุงูุฃุฎูุฑ (time&gt; = now () -24h). </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุฐูุฑุช ูู ุงูุชุณูุณู homeassistant.month.water_meter_hour ูุฏ ุชููู ุจุนุถ ุงูุฅุฏุฎุงูุงุช ููููุฏุฉ. </font><font style="vertical-align: inherit;">ุณูููู ุจุฅุนุงุฏุฉ ุฅูุดุงุก ูุฐู ุงูุจูุงูุงุช ุนู ุทุฑูู ุชุดุบูู ุงุณุชุนูุงู ุจุงุณุชุฎุฏุงู GROUP BY time (1h). </font><font style="vertical-align: inherit;">ุณุชุนูู ุชุนุจุฆุฉ ุงูููุช ูุฐู (ุงูุณุงุจูุฉ) ุญุณุจ ุงูุญุงุฌุฉ ุ ููุง ูุคุฏู ุฅูู ุฅูุดุงุก ุงูุจูุงูุงุช ุงูููููุฏุฉ (ุณุชุฃุฎุฐ ุงููุธููุฉ ุงููููุฉ ุงูุณุงุจูุฉ)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ุดูุก ูู ูุฐุง ุงูุทูุจ ูู ุฏุงูุฉ ุงููุฑู ุ ูุงูุชู ุณุชุญุณุจ ุงููุฑู ุจูู ุนูุงูุงุช ุงูุณุงุนุฉ. </font><font style="vertical-align: inherit;">ูู ุญุฏ ุฐุงุชู ุ ูุง ูุนูู ููุชุทูุจ ูุธููุฉ ูุฌูุนุฉ. </font><font style="vertical-align: inherit;">ููููู ุงูุญุฏ ุงูุฃูุตู () ุงููุณุชุฎุฏู ูู ูุจู.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุฌุฉ ุงูุฅุนุฏุงู ุชุจุฏู ููุฐุง</font></font><br>
<br>
<pre><code class="python hljs">name: water_meter_hour<font></font>
tags: entity_id=water_meter_cold<font></font>
time                 difference<font></font>
----                 ----------<font></font>
...<font></font>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T02:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">2</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T03:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">0</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T04:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">0</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T05:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">14</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T06:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">78</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T07:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">30</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T08:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">64</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T09:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">62</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T10:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">6</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T11:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">43</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T12:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">8</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T13:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">9</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T14:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">22</span>
<span class="hljs-number">2020</span><span class="hljs-number">-03</span><span class="hljs-number">-08</span>T15:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>Z <span class="hljs-number">72</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู 2 ุฅูู 5 ุตุจุงุญุง (UTC) ูู ููู ููุงู ุงุณุชููุงู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุณูููู ุงูุงุณุชุนูุงู ุจุฅุฑุฌุงุน ููุณ ูููุฉ ุงูุงุณุชููุงู ุจุณุจุจ ุงูุชุนุจุฆุฉ (ุงูุณุงุจู) ุ ูุณุชููู ุฏุงูุฉ ุงููุฑู ุจุทุฑุญ ูุฐู ุงููููุฉ ูู ููุณูุง ูุงูุญุตูู ุนูู 0 ุนูุฏ ุงูุฅุฎุฑุงุฌ ุ ููู ุฃูุฑ ูุทููุจ ุจุงููุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุดูุก ุงููุญูุฏ ุงููุชุจูู ูู ุจูุงุก ุฌุฏูู ุฒููู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุงูุชุญ Grafana ุ ุงูุชุญ ุจุนุถ ููุญุฉ ุงููุนูููุงุช ุงูููุฌูุฏุฉ (ุฃู ุฃูุดุฆ ููุญุฉ ุชุญูู ุฌุฏูุฏุฉ) ุ ุฃูุดุฆ ููุญุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ุณุชููู ุฅุนุฏุงุฏุงุช ุงูุฑุณู ุงูุจูุงูู ูุซู ูุฐุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/q0/c8/uxq0c834j1eq4h7ey4qazk4cc7q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฃุนุฑุถ ุจูุงูุงุช ุนู ุงููุงุก ุงูุจุงุฑุฏ ูุงูุณุงุฎู ุนูู ูุฎุทุท ูุงุญุฏ. </font><font style="vertical-align: inherit;">ุงูุทูุจ ูุทุงุจู ุชูุงููุง ููุง ูุตูุชู ุฃุนูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุนููู ูุนููุงุช ุงูุนุฑุถ ุนูู ุงููุญู ุงูุชุงูู. </font><font style="vertical-align: inherit;">ุณูููู ูุฏู ุฑุณู ุจูุงูู ุจุฎุทูุท ุ ููุฑ ุนุจุฑ ุงูุฏุฑุฌ. </font><font style="vertical-align: inherit;">ุณุฃุดุฑุญ ูุนููุฉ ุงูููุฏุณ ุฃุฏูุงู. </font><font style="vertical-align: inherit;">ููุงู ุฎูุงุฑุงู ุขุฎุฑุงู ููุนุฑุถ ุฃุฏูุงู ุ ูููููุง ููุณุง ูุซูุฑูู ููุงูุชูุงู.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bi/rd/5x/bird5xpaysckqtigczjerbp5mti.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุถุงูุฉ ุงูุฌุฏูู ุงูุฒููู ุงููุณุชูู ุฅูู ูุณุงุนุฏ ุงูููุฒู ุ ุชุญุชุงุฌ ุฅูู:</font></font><br>
<br>
<ul>
<li>    . -         </li>
<li>     ,    share</li>
<li>      embed</li>
<li>  current time range โ       URL </li>
<li>  .     light</li>
<li>  URL    lovelace-UI</li>
</ul><br>
<pre><code class="python hljs">      - type: iframe<font></font>
        id: graf_water_hourly<font></font>
        url: <span class="hljs-string">"http://192.168.10.200:3000/d-solo/rZARemQWk/water?orgId=1&amp;panelId=2&amp;from=now-2d&amp;to=now&amp;theme=light"</span>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฌู ููุงุญุธุฉ ุฃูู ุชู ุชุนููู ุงููุทุงู ุงูุฒููู (ุขุฎุฑ ููููู) ููุง ุ ูููุณ ูู ุฅุนุฏุงุฏุงุช ููุญุฉ ุงูุชุญูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฑุณู ุงูุจูุงูู ูุจุฏู ููุฐุง. ูู ุฃุณุชุฎุฏู ุงููุงุก ุงูุณุงุฎู ูู ุงูููููู ุงููุงุถููู ุ ูุฐูู ูุชู ุฑุณู ุฑุณู ุจูุงูู ููููุงู ุงูุจุงุฑุฏุฉ ููุท. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/e7/hk/mse7hkckiwjjm_b5ppli9dakd2c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃูุฑุฑ ุจููุณู ุฃู ุฌุฏูู ุฃุญุจู ุฃูุถู ุ ุฃู ุฎุท ุฎุทูุฉ ุ ุฃู ุฃุดุฑุทุฉ ุญููููุฉ. ูุฐูู ุ ุณุฃุนุทู ุจุจุณุงุทุฉ ูุซุงููุง ุนูู ูุฎุทุท ุงูุงุณุชููุงู ุงููููู ุ ููุท ูุฐู ุงููุฑุฉ ูู ุงูุฃุนูุฏุฉ. ูุชู ุฅูุดุงุก ุงูุทูุจุงุช ุจููุณ ุงูุทุฑููุฉ ุงูููุถุญุฉ ุฃุนูุงู. ูุนููุงุช ุงูุนุฑุถ ูู ููุง ููู: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ns/se/jt/nssejtoburugxcldedjuj0cvywm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ูุฐุง ุงูุฑุณู ุงูุจูุงูู ููุง ููู: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zd/yl/hj/zdylhjfnrdonlnkezr3n4dlwdwm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐู ุญูู ูุนููุฉ ุงูููุฏุณ. ูู ูุฐุง ุงูุฑุณู ุงูุจูุงูู ุ ูุชู ุฑุณู ุนููุฏ ูู ุงููุงุก ุงูุจุงุฑุฏ ููู ุนููุฏ ูู ุงููุงุก ุงูุณุงุฎู. ูุชูุงูู ุงูุงุฑุชูุงุน ุงูููู ูุน ุฅุฌูุงูู ุงุณุชููุงู ุงูููุงู ุงูุจุงุฑุฏุฉ ูุงูุณุงุฎูุฉ ุฎูุงู ูุฐู ุงููุชุฑุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฌููุน ุงูุฑุณูู ุงูุจูุงููุฉ ุงููุนุฑูุถุฉ ุฏููุงููููุฉ. ููููู ุชุญุฑูู ูุคุดุฑ ุงููุงูุณ ููู ููุทุฉ ุงูุชูุงู ูุงูุงุทูุงุน ุนูู ุงูุชูุงุตูู ูุงููููุฉ ุนูุฏ ููุทุฉ ูุนููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูู ุชุชููู ููุงุนู ูู ุงููุทุฑุงู ูู ุงูููุงู ุจุฐูู. ุนูู ุงูุฑุณู ุงูุจูุงูู ุงูุดุฑูุทู (ุนูู ุงููููุถ ูู ุงูุฑุณู ุงูุจูุงูู ุจุฎุทูุท ุงูุฎุทูุฉ) ุ ูุง ูููู ููุชุตู ุงูุดุฑูุท ูู ููุชุตู ุงูููู ุ ูููู ูู 00:00. ุฃููุฆู. ูุชู ุฑุณู ุงููุตู ุงูุฃูุณุฑ ูู ุงูุนููุฏ ุจุฏูุงู ูู ุงูููู ุงูุณุงุจู. ูุฐุง ูุฅู ุงูุฑุณูู ุงูุจูุงููุฉ ููููู ุงูุณุจุช ูุงูุฃุญุฏ ูุฑุณููุฉ ููููุงู ุฅูู ุงููุณุงุฑ ูู ุงูููุทูุฉ ุงูุฒุฑูุงุก. ุญุชู ุนุฑูุช ููู ุฃููุฒ ุจูุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดููุฉ ุฃุฎุฑู ูู ุนุฏู ุงููุฏุฑุฉ ุนูู ุงูุนูู ุจุดูู ุตุญูุญ ุนูู ูุชุฑุงุช ุดูุฑูุฉ. </font><font style="vertical-align: inherit;">ูุงูุญูููุฉ ูู ุฃู ุทูู ุงูุณุงุนุฉ / ุงูููู / ุงูุฃุณุจูุน ุซุงุจุช ุ ูููู ุทูู ุงูุดูุฑ ูุฎุชูู ูู ูู ูุฑุฉ. </font><font style="vertical-align: inherit;">ูููู ุฃู ูุนูู InfluxDB ููุท ุนูู ูุชุฑุงุช ููุชุธูุฉ. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูุงู ุฏูุงุบู ูุงููุงู ูุชุญุฏูุฏ ูุชุฑุฉ ุฒูููุฉ ุซุงุจุชุฉ ุชุจูุบ 30 ููููุง. </font><font style="vertical-align: inherit;">ูุนู ุ ุณูู ูุทูู ุงูุฑุณู ุงูุจูุงูู ููููุงู ุฎูุงู ุงูุนุงู ููู ุชุชูุงูู ุงูุฃุนูุฏุฉ ุชูุงููุง ูุน ุงูุฃุดูุฑ. </font><font style="vertical-align: inherit;">ูููู ุจูุง ุฃู ูุฐุง ุงูุดูุก ูุซูุฑ ููุงูุชูุงู ุจุงููุณุจุฉ ูู ุจุจุณุงุทุฉ ูุฌูุงุฒ ุนุฑุถ ุ ูุฃูุง ููุงูู ุนูู ุฐูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฑู ุญููู ุนูู ุงูุฃูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุฌู ูู ุงูุฌุฏุงูู ุงูุดูุฑูุฉ ูููุชุตุฑ ุนูู ุงูุฃุณุจูุนูุฉ. </font><font style="vertical-align: inherit;">52 ุจุงุฑ ุฃุณุจูุนููุง ููุฐุง ุงูุนุงู ุชุจุฏู ุฌูุฏุฉ</font></font></li>
<li>     โ2,       .     .          โ    .</li>
</ul><br>
<br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุฃุฏุฑู ููุงุฐุง ุ ููููู ุฃุชูุงุนุจ ุจูุซู ูุฐุง ุงูููุน ูู ุงูุฑุณูู ุงูุจูุงููุฉ. ูุธูุฑูู ุฃู ุงูุญูุงุฉ ุนูู ูุฏู ูุณุงู ููู ุดูุก ูุชุบูุฑ. ุฃูุณ ูุงู ูุซูุฑูุง ุ ุงูููู ููุณ ูุงูููุง ุ ูุบุฏูุง ุณูููู ุดูุก ุขุฎุฑ. ูุจูู ุงูุนูู ูุน ุงูุฃุณุฑ ุญูู ููุถูุน ุงูุงุณุชููุงู. ูููู ุญุชู ูุน ุงูุดููุฉ ุงูุญุงููุฉ ุ ูุฅู ูุฌุฑุฏ ุฑูู ูุจูุฑ ูุบูุฑ ููููู ูู ุงูุฏูุน ูุชุญูู ุจุงููุนู ุฅูู ุตูุฑุฉ ูุงุถุญุฉ ุฅูู ุญุฏ ูุง ููุงุณุชููุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ูููุฉ ุงูู 20 ุนุงููุง ุชูุฑูุจูุง ููุจุฑูุฌ ุ ุฅูุง ุฃููู ูู ุฃุชูุงุทุน ุนููููุง ูุน ููุงุนุฏ ุงูุจูุงูุงุช. ูุฐูู ุ ุจุฏุง ุชุซุจูุช ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุฑุฌูุฉ ุดูุฆูุง ุบุฑูุจูุง ูุบูุฑ ููููู. ุชู ุชุบููุฑ ูู ุดูุก ุจุงูููุงูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฐููุฑุฉ ุฃุนูุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงุชุถุญ ุฃู ุดุฏ ุฃุฏุงุฉ ููุงุณุจุฉ ูุชู ูู ุจุถุน ููุฑุงุช ุ ููุน ุฃุฏุงุฉ ูุชุฎุตุตุฉ ุชุตุจุญ ูููุฉ ุงูุฑุณู ุงูุจูุงูู ุฃุณูู ููููุงู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุนููุงู ุ ุฐูุฑุช ุงุณุชููุงู ุงูููุฑุจุงุก. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุง ูููููู ูู ุงูููุช ุงูุญุงูู ุชูุฏูู ูุฎุทุท ูุงุญุฏ. </font><font style="vertical-align: inherit;">ุฃุญุฏ ุนุฏุงุฏุงุช SDM120 ููุช ุ ูุงูุขุฎุฑ ูู ุนุฑุจุงุช ุงูุชู ุชุฌุฑูุง ุงูุฏูุงุจ ุนูุฏ ุงููุตูู ุนุจุฑ Modbus. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ูุคุซุฑ ูุฐุง ุนูู ููุถูุน ูุฐู ุงูููุงูุฉ - ุณูุชู ุฅูุดุงุก ุงูุฑุณููุงุช ุจููุณ ุงูุทุฑููุฉ ุงูุชู ูุชู ุจูุง ุงููุงุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูููุงูุฉ ุ ุงุณุชุดูุฏุช ุจุงูููุฌ ุงูุชู ุฌุฑุจุชูุง ุจููุณู. </font><font style="vertical-align: inherit;">ุจุงูุชุฃููุฏ ููุงู ุจุนุถ ุงูุทุฑู ุงูุฃุฎุฑู ูุชูุธูู ุฌูุน ูุชุตูุฑ ุงูุจูุงูุงุช ุงูุชู ูุง ุฃุนุฑู ุนููุง. </font><font style="vertical-align: inherit;">ุฃุฎุจุฑูู ุนู ุฐูู ูู ุงูุชุนูููุงุช ุ ุณูููู ุงูุฃูุฑ ูุซูุฑูุง ููุงูุชูุงู ุจุงููุณุจุฉ ูู. </font><font style="vertical-align: inherit;">ุณุฃููู ุณุนูุฏูุง ุจุงูููุฏ ุงูุจูุงุก ูุงูุฃููุงุฑ ุงูุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ุขูู ุฃู ุชุณุงุนุฏ ุงูููุงุฏ ุงูููุฏูุฉ ุฃูุถูุง ุดุฎุตูุง ูุง.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar492298/index.html">ุงููุถูุนุงุช ุนุงูู ุขุฎุฑ: IBM PC</a></li>
<li><a href="../ar492302/index.html">ุญุงูู ุฐูู ุจููุงุชู ุฐููุฉ ูููุฎุชุจุฑูู - ูุดุฑูุน ุจุฏุก ูู ูุนุฌู ุฌุงูุนุฉ ITMO</a></li>
<li><a href="../ar492306/index.html">Lidars ูู CES</a></li>
<li><a href="../ar492308/index.html">ุงูุฎูุงูุง ุงูุนุตุจูุฉ ูููุฐุฌุชูุง</a></li>
<li><a href="../ar492312/index.html">ุชุณูุณู ุฃูุฑู ูู ูุงููุง</a></li>
<li><a href="../ar492318/index.html">ููู ูุคุซุฑ ุงูููุฑูุณ ุงูุชุงุฌู ุนูู ุตูุงุนุฉ ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar492320/index.html">Covid-19 ุ ูุฌุชูุนู ูุฃูุช ูู ุญูุซ ุนูู ุงูุจูุงูุงุช</a></li>
<li><a href="../ar492322/index.html">Raspberry Pi + Fedora (aarch64) = ููุทุฉ ุงุชุตุงู Wi-Fi (ุฃู ุฌูุงุฒ ุชูุฌูู ุงูุชูุช ูู ูุจุนุฉ ุฒุฑูุงุก)</a></li>
<li><a href="../ar492324/index.html">ููุงูุด ูุงููู EARN IT - ูุดุฑูุน ูุงููู ุฃูุฑููู ุฌุฏูุฏ ูุฏ ูุคุฏู ุฅูู ุญุธุฑ ุชุดููุฑ E2E</a></li>
<li><a href="../ar492326/index.html">ุชุญููู ุดุนุจูุฉ ููุงุทุน ููุฏูู ููุชููุจ ูููุดุงุฑููู ูู ููุฑูููุฌู 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>