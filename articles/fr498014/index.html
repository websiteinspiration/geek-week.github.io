<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî• üï¢ üë∞üèΩ PyDERASN: comme j'ai ajout√© le support du big data ‚òùÔ∏è üí≥ üßí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je continue le dernier article sur PyDERASN - le codec gratuit ASN.1 DER / CER / BER en Python. Au cours de la derni√®re ann√©e, depuis le moment de sa ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PyDERASN: comme j'ai ajout√© le support du big data</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498014/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je continue le dernier article sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyDERASN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - le codec gratuit ASN.1 DER / CER / BER en Python. </font><font style="vertical-align: inherit;">Au cours de la derni√®re ann√©e, depuis le moment de sa r√©daction, en plus de toutes les petites choses, de petites corrections et une v√©rification des donn√©es encore plus rigoureuse (bien qu'avant c'√©tait d√©j√† le plus strict des codecs gratuits que je connaisse), une fonctionnalit√© pour travailler avec de grands volumes de donn√©es est apparue dans cette biblioth√®que - pas rampant dans la RAM. </font><font style="vertical-align: inherit;">Je veux en parler dans cet article.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/241/bae/4fc/241bae4fcfb5d7f0c3a605bf5f3211cb.png" alt="Navigateur ASN.1"></div><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®mes / t√¢ches</font></font></h2><br>
<ul>
<li><strong> CRL</strong>:<br>
,      (CA)         X.509 .    ,    CRL (certificate revocation list). CRL  CACert.org,  8.72 MiB,   PyDERASN-  Python 3.6      (    <em>asn1crypto</em>  <em>pyasn1</em>   ).      416 .  .    ,           .  .<br>
</li>
<li><strong> CMS</strong>:<br>
CMS (Cryptographic Message Syntax)    <br>
// . ,<br>
<em>SignedData</em>     ,   ,<br>
  ,   - <em>EnvelopedData</em> <br>
 .<br>
<br>
                 CMS. , CMS   detached data,     - ,         .  10 GiB    20 GiB   :       10 GiB      . .<br>
</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels objets ASN.1 dans la pratique peuvent √™tre gourmands en ressources, prendre beaucoup d'espace m√©moire? Seule </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contenant de nombreux objets (des centaines de milliers dans le cas de CACert.org), et toutes sortes de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (comme dans le deuxi√®me cas probl√©matique). √âtant donn√© que l'une des vertus d'un programmeur est la paresse (selon Larry Wall), nous allons essayer de surmonter les probl√®mes de consommation des ressources avec un changement minimal dans le code de la biblioth√®que. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Les</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objets </font><em><font style="vertical-align: inherit;">STRING</font></em><font style="vertical-align: inherit;"> , du point de vue du codec, ne diff√®rent presque pas les uns des autres et sont impl√©ment√©s dans la biblioth√®que par une classe commune. Qu'est-ce que l'encodage dans </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OCTET STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans DER?</font></font><br>
<br>
<pre><code class="plaintext hljs">return tag + len_encode(len(value)) + value
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âvidemment, la </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'a pas besoin d'√™tre en RAM tout ce temps. </font><font style="vertical-align: inherit;">Il doit s'agir d'un objet de type octets dont vous pouvez conna√Ætre la longueur. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remplit ces conditions. </font><font style="vertical-align: inherit;">Et pourtant, la </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visualisation de la m√©moire</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √™tre effectu√©e par </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur n'importe quel fichier temporaire qui est d√©j√† r√©duit de 20 Go en 10 Go pour les copies de la base de donn√©es CMS: il suffit de sp√©cifier comme valeur des </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STRING OCTET</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou tout autre </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) similaire √† </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour le cr√©er, PyDERASN a une fonction d'assistance:</font></font><br>
<br>
<pre><code class="plaintext hljs">from pyderasn import file_mmaped<font></font>
with open("dump.sql.zst", "rb") as fd:<font></font>
    ... = OctetString(file_mmaped(fd))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous voulons d√©coder une √©norme quantit√© de donn√©es, alors </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut </font><em><font style="vertical-align: inherit;">√©galement</font></em><font style="vertical-align: inherit;"> √™tre utilis√© pour d√©coder:</font></font><br>
<br>
<pre><code class="plaintext hljs">from pyderasn import file_mmaped<font></font>
with open("dump.sql.zst", "rb") as fd:<font></font>
    obj = Schema.decode(file_mmaped(fd))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous consid√©rons que le probl√®me avec </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est partiellement r√©solu. </font><font style="vertical-align: inherit;">Retour √† la cr√©ation d'une √©norme CRL. </font><font style="vertical-align: inherit;">Quelle est sa structure?</font></font><br>
<br>
<pre><code class="plaintext hljs">CertificateList SEQUENCE<font></font>
. tbsCertList: TBSCertList SEQUENCE<font></font>
. . version: Version INTEGER v2 (01) OPTIONAL<font></font>
. . signature: AlgorithmIdentifier SEQUENCE<font></font>
. . issuer: Name CHOICE rdnSequence<font></font>
. . thisUpdate: Time CHOICE utcTime<font></font>
. . nextUpdate: Time CHOICE utcTime OPTIONAL<font></font>
. . revokedCertificates: RevokedCertificates SEQUENCE OF OPTIONAL<font></font>
. . . 0: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 17 (11)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2003-04-01T14:25:08<font></font>
. . . 1: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 20 (14)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2002-10-01T02:18:01<font></font>
<font></font>
                                 [...]<font></font>
<font></font>
. . . 415753: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 1341859 (14:79:A3)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2020-02-08T06:51:56<font></font>
. . . 415754: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 1341860 (14:79:A4)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2020-02-08T06:53:01<font></font>
. . . 415755: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 1341861 (14:79:A5)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2020-02-08T07:25:06<font></font>
. signatureAlgorithm: AlgorithmIdentifier SEQUENCE<font></font>
. signatureValue: BIT STRING 4096 bits<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une longue liste de petites </font><font style="vertical-align: inherit;">structures </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans ce cas, ne contenant que le num√©ro de s√©rie du certificat et l'heure de sa r√©vocation. </font><font style="vertical-align: inherit;">Quel est son codage DER?</font></font><br>
<br>
<pre><code class="plaintext hljs">value = b"".join(revCert.encode() for revCert in revCerts)<font></font>
return tag + len_encode(len(value)) + value<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juste concat√©nation des repr√©sentations DER de chaque √©l√©ment individuel de cette liste. </font><font style="vertical-align: inherit;">Avons-nous besoin d'avoir √† l'avance toutes ces centaines de milliers d'objets au cours de leur simple s√©rialisation en 15 octets de repr√©sentation DER? </font><font style="vertical-align: inherit;">√âvidemment pas. </font><font style="vertical-align: inherit;">Par cons√©quent, nous rempla√ßons la liste des objets par un it√©rateur / g√©n√©rateur. </font><font style="vertical-align: inherit;">Tr√®s probablement, la cr√©ation de la CRL sera bas√©e sur les donn√©es du SGBD:</font></font><br>
<br>
<pre><code class="plaintext hljs">def revCertsGenerator(...):<font></font>
    for row in db.cursor:<font></font>
        yield RevokedCertificate((<font></font>
            ("userCertificate", CertificateSerialNumber(row.serial)),<font></font>
            ("revocationDate", Time(("utcTime", UTCTime(row.revdate)))),<font></font>
        ))<font></font>
<font></font>
crl["tbsCertList"]["revokedCertificates"] = revCertsGenerator()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous ne consommons presque pas de m√©moire lors de la cr√©ation d'une telle CRL - nous avons seulement besoin d'un endroit pour travailler avec sa repr√©sentation DER: dans ce cas, nous parlons de quelques dizaines de m√©gaoctets (par opposition √† une liste d'un demi-gigaoctet d'objets RevokedCertificate). </font><font style="vertical-align: inherit;">Mais il y a une diff√©rence de comportement: le contr√¥le de taille </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne se produit qu'apr√®s √©puisement de l'it√©rateur, et non au moment d'affecter une valeur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codage de streaming DER</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est impossible. Apr√®s tout, c'est DER - les longueurs de tous les √©l√©ments TLV (tag + longueur + valeur) doivent √™tre connues √† l'avance! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais j'aimerais tellement! Apr√®s tout, nous avons encore besoin de 10 Gio de m√©moire pour stocker la repr√©sentation DER de la copie de la base de donn√©es: </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raw = cms.encode ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Id√©alement, je veux transmettre un certain </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crivain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o√π la repr√©sentation s√©rialis√©e serait √©crite. Peut-√™tre transf√©rer le descripteur de fichier, laisser des espaces r√©serv√©s dans le fichier √† la place des longueurs, puis les remplir en faisant rechercher? Malheureusement, la longueur (respectivement, et l'espace r√©serv√©) n'est pas connue √† l'avance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyDERASN a re√ßu la possibilit√© d'un codage DER en deux passes. Lors de la premi√®re passe, la connaissance des longueurs des objets est collect√©e, cr√©ant un √©tat temporaire. Le second est en </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streaming</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encodage DER dans un certain </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crivain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d√©j√† possible gr√¢ce √† la connaissance des longueurs. L'impl√©mentation de ceci est apparue simple, ajoutant simplement un peu de m√©thodes √† deux passes √† chacun des types de base ASN.1. Puisque la travers√©e des objets est strictement d√©termin√©e (D - distingu√©e!), Alors, pour stocker les longueurs n√©cessaires, une liste simple est maintenue, √† laquelle, pendant que l'arborescence enti√®re des objets est parcourue, des valeurs de longueur sont ajout√©es. Pour certains types, la longueur est fixe. Pour certains, il n'est n√©cessaire que pour signaler √† un conteneur en amont ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXPLICIT TAG</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Par exemple, l'√©tat de longueur d'une liste de deux certificats r√©voqu√©s ressemble √† ceci:</font></font><br>
<br>
<pre><code class="plaintext hljs">revCert = RevokedCertificate((<font></font>
    ("userCertificate", CertificateSerialNumber(123)),<font></font>
    ("revocationDate", Time(("utcTime", UTCTime(datetime.utcnow())))),<font></font>
))<font></font>
revs = RevokedCertificates([revCert, revCert])<font></font>
<font></font>
(42, [40, 18, 18])<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, nous devons conna√Ætre la longueur de la valeur uniquement pour chacun des </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificats r√©voqu√©s</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et la liste enti√®re dans son ensemble. La longueur des entiers et du temps cod√© (dans DER c'est une longueur fixe) dans l'√©tat n'est pas stock√©e comme inutile. En cons√©quence, pour notre CRL CACert.org, une telle liste prend un peu plus de 3,5 Mio, et pour le CMS g√©ant, dans lequel presque tout le poids tombe sur un seul champ avec une copie de la base de donn√©es, cela prend environ 0,5 Kio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le codage en deux passes est effectu√© par deux appels:</font></font><br>
<br>
<pre><code class="plaintext hljs">fulllen, state = obj.encode1st()<font></font>
with open("result", "wb") as fd:<font></font>
    obj.encode2nd(fd.write, iter(state))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re passe indique √©galement la longueur totale des donn√©es, qui peuvent √™tre utilis√©es pour v√©rifier l'espace libre ou l'allouer par un </font><font style="vertical-align: inherit;">appel </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">posix_fallocate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant la fonction d'assistance </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encode2pass (obj),</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez effectuer un codage √† deux passes en m√©moire. Pourquoi? Il peut √™tre beaucoup plus √©conomique en termes de consommation de m√©moire, car il ne stockera pas, dans le cas de CACert.org CRL, 416k + petites lignes binaires jointes par un </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b "".</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Appel </font><em><font style="vertical-align: inherit;">Join ()</font></em><font style="vertical-align: inherit;"> . Cependant, cela n√©cessite plus de temps processeur, car tous les objets devront √™tre parcourus deux fois.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous pouvons encoder un CMS arbitrairement grand dans DER, pratiquement sans consommer de m√©moire. </font><font style="vertical-align: inherit;">Mais dans le cas de CRL, nous avons utilis√© le g√©n√©rateur de r√©vocation de certificats, qui s'√©puisera apr√®s la fin de la premi√®re passe. </font><font style="vertical-align: inherit;">Que faire? </font><font style="vertical-align: inherit;">R√©initialisez-le √† nouveau!</font></font><br>
<br>
<pre><code class="plaintext hljs">_, state = crl.encode1st()<font></font>
crl["tbsCertList"]["revokedCertificates"] = revCertsGenerator()<font></font>
crl.encode2nd(writer, iter(state))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, nous </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sommes oblig√©s de nous</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> assurer que le r√©sultat de l'it√©rateur sera exactement le m√™me, sinon nous obtiendrons un DER cass√©. </font><font style="vertical-align: inherit;">Si les donn√©es sont extraites du curseur SGBD, n'oubliez pas le </font><font style="vertical-align: inherit;">niveau d'isolement des transactions </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REPEATABLE READ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le tri.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encodage en flux r√©el: CER</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous le savez, DER (r√®gles de codage distinctes) est un sous-ensemble de BER (r√®gles de codage de base) qui r√©gule strictement les r√®gles de codage d'une et d'une seule fa√ßon. Cela lui permet d'√™tre utilis√© dans des t√¢ches cryptographiques. Mais il existe un autre sous-ensemble remarquable de BER: CER (r√®gles de codage canoniques). Comme DER, il n'a qu'une seule repr√©sentation possible des donn√©es. CER diff√®re de DER √† plusieurs √©gards, mais ils vous permettent d'effectuer un encodage des donn√©es en streaming r√©el. Malheureusement, CER n'est pas devenu aussi populaire que DER. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En omettant des diff√©rences moins visibles (telles que les balises de tri dans SET), CER a deux diff√©rences fondamentales avec DER:</font></font><br>
<br>
<ul>
<li>    (constructed,  )  indefinite  (<em>LENINDEF</em>   PyDERASN).  ,  <em>SEQUENCE</em>/<em>SET</em>, <em>SEQUENCE OF</em>/<em>SET OF</em>, <em>EXPLICIT TAG</em>-  :<br>
<br>
<pre><code class="plaintext hljs">TAG_CONSTRUCTED || LEN(VALUE) || VALUE
</code></pre><br>
 <em>LENINDEF</em> (0x80)  EOC ( ,  )   :<br>
<br>
<pre><code class="plaintext hljs">TAG_CONSTRUCTED || 80 || VALUE || 00 00
</code></pre><br>
</li>
<li><em>*STRING</em>-,    1000-,  chunk-  1000-. ,      ,   DER. , 512          DER:<br>
<br>
<pre><code class="plaintext hljs">TAG_PRIMITIVE || LEN(512) || 512B
</code></pre><br>
 2048  :<br>
<br>
<pre><code class="plaintext hljs">TAG_CONSTRUCTED || 80 ||<font></font>
    TAG_PRIMITIVE || LEN(1000) || 1000B ||<font></font>
    TAG_PRIMITIVE || LEN(1000) || 1000B ||<font></font>
    TAG_PRIMITIVE || LEN(48) || 48B || 00 00<font></font>
</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela (plus quelques petites choses) permet au streaming (avec 1000 octets de tampon pour les cha√Ænes) de coder tous les objets. De m√™me, vous pouvez utiliser </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les it√©rateurs. L'encodage CER se fait simplement en appelant la </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©thode .encode_cer (writer)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Malheureusement, PyDERASN n'est pas encore en mesure de v√©rifier la validit√© du CER pendant le d√©codage, nous sommes donc oblig√©s de d√©coder les donn√©es en tant que BER. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La norme CMS, en passant, n√©cessite un codage en BER (les deux DER et CER, automatique, sont BER). Par cons√©quent, nous pouvons coder notre √©norme copie de la base de donn√©es dans CER CMS sans DER √† deux passes. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cependant</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SignedData</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> doit avoir un </font><font style="vertical-align: inherit;">√©l√©ment </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SignedAttributes</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cod√© en DER, tout comme le </font><em><font style="vertical-align: inherit;">certificat</font></em><font style="vertical-align: inherit;"> X.509.</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificats. </font><font style="vertical-align: inherit;">PyDERASN vous permet de forcer l'utilisation de DER dans des structures donn√©es en ajoutant simplement l' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attribut der_forced = True</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©codage de flux: mode evgen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons appris √† coder, mais seul </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aidera au d√©codage </font><font style="vertical-align: inherit;">. Un "vrai" d√©codeur de flux, qui a des boutons de contr√¥le sous la forme de "donnez-moi plus de donn√©es", "vous √™tes ici", une sorte d'√©tat - n√©cessiterait une modification radicale de PyDERASN. Et, personnellement, je ne vois pas que ce serait plus pratique que la solution actuelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la solution actuelle est extr√™mement simple. Dans le processus de d√©codage, nous avons entre nos mains divers objets primitifs d√©cod√©s entre nos mains, √† partir desquels sont assembl√©s des composants sup√©rieurs (construits), dont d'autres composants, etc. ... Nous accumulons des objets pour les rendre composites et, atteignant le sommet donnez-nous un grand objet. Pourquoi ne pas ¬´distribuer¬ª imm√©diatement toutes sortes de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©codages</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objets, d√®s qu'ils apparaissent sur nos mains? </font><font style="vertical-align: inherit;">Autrement dit, pour renvoyer non pas un objet final, mais un g√©n√©rateur qui g√©n√®re de nombreux objets d√©cod√©s. </font><font style="vertical-align: inherit;">En fait, dans PyDERASN maintenant toutes les m√©thodes de d√©codage sont devenues des g√©n√©rateurs de tels "√©v√©nements" (g√©n√©ration d'√©v√©nements, evgen). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous activons le mode de d√©codage evgen de notre √©norme CRL CACert.org, nous verrons l'image suivante:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ python -m pyderasn --schema tests.test_crl:CertificateList --evgen revoke.crl<font></font>
[][T,L,  V len]<font></font>
     10   [1,1,      1]   . . version: Version INTEGER v2 (01) OPTIONAL<font></font>
     15   [1,1,      9]   . . . algorithm: OBJECT IDENTIFIER 1.2.840.113549.1.1.13<font></font>
     26   [0,0,      2]   . . . parameters: [UNIV 5] ANY OPTIONAL<font></font>
     13   [1,1,     13]   . . signature: AlgorithmIdentifier SEQUENCE<font></font>
     34   [1,1,      3]   . . . . . . type: AttributeType OBJECT IDENTIFIER 2.5.4.10<font></font>
     39   [0,0,      9]   . . . . . . value: [UNIV 19] AttributeValue ANY<font></font>
     32   [1,1,     14]   . . . . . 0: AttributeTypeAndValue SEQUENCE<font></font>
     30   [1,1,     16]   . . . . 0: RelativeDistinguishedName SET OF<font></font>
<font></font>
                                 [...]<font></font>
<font></font>
    188   [1,1,      1]   . . . . userCertificate: CertificateSerialNumber INTEGER 17 (11)<font></font>
    191   [1,1,     13]   . . . . . utcTime: UTCTime UTCTime 2003-04-01T14:25:08<font></font>
    191   [0,0,     15]   . . . . revocationDate: Time CHOICE utcTime<font></font>
    191   [1,1,     13]   . . . . . utcTime: UTCTime UTCTime 2003-04-01T14:25:08<font></font>
    186   [1,1,     18]   . . . 0: RevokedCertificate SEQUENCE<font></font>
    208   [1,1,      1]   . . . . userCertificate: CertificateSerialNumber INTEGER 20 (14)<font></font>
    211   [1,1,     13]   . . . . . utcTime: UTCTime UTCTime 2002-10-01T02:18:01<font></font>
    211   [0,0,     15]   . . . . revocationDate: Time CHOICE utcTime<font></font>
    206   [1,1,     18]   . . . 1: RevokedCertificate SEQUENCE<font></font>
<font></font>
                                 [...]<font></font>
<font></font>
9144992   [0,0,     15]   . . . . revocationDate: Time CHOICE utcTime<font></font>
9144985   [1,1,     20]   . . . 415755: RevokedCertificate SEQUENCE<font></font>
    181   [1,4,9144821]   . . revokedCertificates: RevokedCertificates SEQUENCE OF OPTIONAL<font></font>
      5   [1,4,9144997]   . tbsCertList: TBSCertList SEQUENCE<font></font>
9145009   [1,1,      9]   . . algorithm: OBJECT IDENTIFIER 1.2.840.113549.1.1.13<font></font>
9145020   [0,0,      2]   . . parameters: [UNIV 5] ANY OPTIONAL<font></font>
9145007   [1,1,     13]   . signatureAlgorithm: AlgorithmIdentifier SEQUENCE<font></font>
9145022   [1,3,    513]   . signatureValue: BIT STRING 4096 bits<font></font>
      0   [1,4,9145534]  CertificateList SEQUENCE<font></font>
</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au d√©but du d√©codage, nous avons vu la </font><font style="vertical-align: inherit;">balise </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateList </font></font></em> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la longueur des donn√©es, mais l'objet n'est pas encore connu pour savoir s'il peut √™tre d√©cod√© jusqu'√† la fin. </font><font style="vertical-align: inherit;">Jusqu'√† pr√©sent, nous ne sommes en train d'y travailler.</font></font></li>
<li>    <em>SEQUENCE</em>:  <em>version</em>,     <em>INTEGER</em>.   .   ,      . ( <strong>10</strong>)</li>
<li>   <em>signature</em>,  <em>SEQUENCE</em>-   : <em>algorithm</em>  <em>parameters</em>.   <em>OBJECT IDENTIFIER</em>  <em>ANY</em>     . ( <strong>15</strong>, <strong>26</strong>)</li>
<li>   ,  ,   <em>signature</em> <em>SEQUENCE</em>    ,    ,    :  . ( <strong>13</strong>)</li>
<li>,   <em>RevokedCertificate</em>        . ( <strong>186</strong>, <strong>206</strong>,  ..)</li>
<li> <em>tbsCertList</em>       . ( <strong>5</strong>)</li>
<li> <em>CertificateList</em>,   <em>SEQUENCE</em>,  ,        ,         . ( <strong>0</strong>)</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, tous les </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les listes ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) n'ont pas de v√©ritable sens. </font><font style="vertical-align: inherit;">Dans le cas de DER, connaissant </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.offset</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.vlen,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez lire la valeur d'une ligne d'un fichier (un morceau de m√©moire?). </font><font style="vertical-align: inherit;">Les objets de s√©quence peuvent √™tre collect√©s et agr√©g√©s selon vos besoins, tout en recevant tous les √©v√©nements.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chemin d√©cod√© et evgen_mode_upto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment comprendre quel type d'objet, quel </font><font style="vertical-align: inherit;">type de nombre </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entier</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons sous la main? </font><font style="vertical-align: inherit;">Chaque objet a son propre chemin dit de d√©codage, qui identifie de mani√®re unique un objet sp√©cifique dans la structure. </font><font style="vertical-align: inherit;">Par exemple, pour les √©v√©nements de chemin de d√©codage CRL CACert.org:</font></font><br>
<br>
<pre><code class="plaintext hljs">tbsCertList:version<font></font>
tbsCertList:signature:algorithm<font></font>
tbsCertList:signature:parameters<font></font>
tbsCertList:signature<font></font>
tbsCertList:issuer:rdnSequence:0:0:type<font></font>
                                 [...]<font></font>
tbsCertList:issuer:rdnSequence<font></font>
tbsCertList:issuer<font></font>
                                 [...]<font></font>
tbsCertList:revokedCertificates:0:userCertificate<font></font>
tbsCertList:revokedCertificates:0:revocationDate:utcTime<font></font>
tbsCertList:revokedCertificates:0:revocationDate<font></font>
tbsCertList:revokedCertificates:0<font></font>
tbsCertList:revokedCertificates:1:userCertificate<font></font>
tbsCertList:revokedCertificates:1:revocationDate:utcTime<font></font>
tbsCertList:revokedCertificates:1:revocationDate<font></font>
tbsCertList:revokedCertificates:1<font></font>
                                 [...]<font></font>
tbsCertList:revokedCertificates:415755:userCertificate<font></font>
tbsCertList:revokedCertificates:415755:revocationDate:utcTime<font></font>
tbsCertList:revokedCertificates:415755:revocationDate<font></font>
tbsCertList:revokedCertificates:415755<font></font>
tbsCertList:revokedCertificates<font></font>
tbsCertList<font></font>
signatureAlgorithm:algorithm<font></font>
signatureAlgorithm:parameters<font></font>
signatureAlgorithm<font></font>
signatureValue<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici comment imprimer la liste des num√©ros de s√©rie de r√©vocation de certificats √† partir de cette liste de r√©vocation de certificats:</font></font><br>
<br>
<pre><code class="plaintext hljs">raw = file_mmaped(open("....crl", "rb"))<font></font>
for decode_path, obj, tail in CertificateList().decode_evgen(raw):<font></font>
    if (len(decode_path) == 5) and (decode_path[-1] == "userCertificate"):<font></font>
        print(int(obj))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La structure </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut contenir de nombreuses informations, y compris diverses extensions. </font><font style="vertical-align: inherit;">De mani√®re purement technique, nous obtenons toutes les donn√©es sur le certificat r√©voqu√© en mode evgen, mais l'agr√©gation des √©v√©nements li√©s √† un √©l√©ment </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revokedCertificates n'est</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pas tr√®s pratique. </font><font style="vertical-align: inherit;">√âtant donn√© que chaque </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificat r√©voqu√©</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> final </font><font style="vertical-align: inherit;">, dans la pratique, ne prendra pas beaucoup de place, ce serait bien de l'avoir tout de m√™me, tous les objets ne sont pas si soigneusement ¬´tri√©s¬ª en √©v√©nements. </font><font style="vertical-align: inherit;">PyDERASN permet √† la liste de sp√©cifier les chemins de d√©codage auxquels le mode evgen est d√©sactiv√©. </font><font style="vertical-align: inherit;">Nous pouvons donc d√©finir le chemin de d√©codage (n'importe quel √©l√©ment de la liste </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">("tbsCertList", "revokedCertificates")</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) sur lequel nous voulons obtenir l' </font><font style="vertical-align: inherit;">objet </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> complet </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">for decode_path, obj, _ in CertificateList().decode_evgen(raw, ctx={<font></font>
    "evgen_mode_upto": (<font></font>
        (("tbsCertList", "revokedCertificates", any), True),<font></font>
    ),<font></font>
}):<font></font>
    if (len(decode_path) == 3) and (decode_path[1] == "revokedCertificates"):<font></font>
        print(int(obj["userCertificate"]))<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cha√Ænes agr√©g√©es: agg_octet_string</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous n'avons aucun probl√®me √† d√©coder des objets de toute taille. Il n'y a pas de probl√®me non plus √† d√©coder un CMS encod√© en DER avec une copie de la base de donn√©es: nous attendons un √©v√©nement avec un chemin de d√©codage pointant vers les donn√©es sign√©es / crypt√©es dans le CMS et traitant les donn√©es du fichier en utilisant offset + vlen. Mais que faire si le CMS √©tait au format CER? Ensuite, offset + vlen n'aidera pas, car tous nos 10 Gio sont divis√©s en morceaux de 1000 octets, entre lesquels par l'en-t√™te DER. Mais que se passe-t-il si nous avons un BER dans lequel l'imbrication de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √™tre n'importe quoi?</font></font><br>
<br>
<pre><code class="plaintext hljs">SOME STRING[CONSTRUCTED]<font></font>
    OCTET STRING[CONSTRUCTED]<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
    OCTET STRING[PRIMITIVE]<font></font>
        DATA CHUNK<font></font>
    OCTET STRING[CONSTRUCTED]<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
    OCTET STRING[CONSTRUCTED]<font></font>
        OCTET STRING[CONSTRUCTED]<font></font>
            OCTET STRING[PRIMITIVE]<font></font>
                DATA CHUNK<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du d√©codage en mode evgen, pour chaque pi√®ce, nous obtenons l'√©v√©nement correspondant et il nous suffit de collecter uniquement des </font><font style="vertical-align: inherit;">√©v√©nements </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> primitifs (non construits) </font><font style="vertical-align: inherit;">, o√π offset + vlen contiennent de vraies donn√©es. PyDERASN a une </font><font style="vertical-align: inherit;">fonction d' </font><font style="vertical-align: inherit;">aide pratique </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agg_octet_string</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui effectue cela. Il lui suffit de passer un g√©n√©rateur d'√©v√©nements, le chemin de d√©codage ¬´en dessous¬ª dont il faut agr√©ger une cha√Æne, des donn√©es binaires (ou </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et un </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crivain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - une fonction qui est appel√©e avec chaque donn√©e re√ßue. Nous voulons calculer le hachage SHA512 et sauvegarder en m√™me temps le contenu du </font><font style="vertical-align: inherit;">CMS </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encapContentInfo.eContent</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Trouver l'emplacement du </font><font style="vertical-align: inherit;">champ de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contenu</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dans lequel </font><em><font style="vertical-align: inherit;">SignedData</font></em><font style="vertical-align: inherit;"> sera situ√©</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), puis d√©coder son contenu CER, en √©crivant simultan√©ment au FS et en hachant:</font></font><br>
<br>
<pre><code class="plaintext hljs">fdIn = open("data.p7m", "rb")<font></font>
raw = file_mmaped(fdIn)<font></font>
for decode_path, obj, _ in ContentInfo().decode_evgen(raw, ctx={"bered": True}):<font></font>
    if decode_path == ("content",):<font></font>
        content = obj<font></font>
        break<font></font>
hasher_state = sha512()<font></font>
fdOut = open("dump.sql.zst", "wb")<font></font>
def hash_n_save(data):<font></font>
    write_full(fdOut, data)<font></font>
    hasher_state.update(data)<font></font>
    return len(data)<font></font>
evgens = SignedData().decode_evgen(<font></font>
    raw[content.offset:],<font></font>
    offset=content.offset,<font></font>
    ctx={"bered": True},<font></font>
)<font></font>
agg_octet_string(evgens, ("encapContentInfo", "eContent"), raw, hash_n_save)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, un autre utilitaire </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">write_full</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><em><font style="vertical-align: inherit;">utilis√©</font></em><font style="vertical-align: inherit;"> , qui appelle l' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crivain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jusqu'√† ce que toutes les donn√©es soient √©crites, car, en g√©n√©ral, lors de l'√©criture dans un fichier, le syst√®me d'exploitation n'est pas requis pour traiter toutes les donn√©es transf√©r√©es et vous devez continuer le processus jusqu'√† ce qu'il soit compl√®tement √©crit.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un couple affectueux √† propos de SET OF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'un point de vue purement technique, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne peut pas √™tre cod√© √† la vol√©e dans les codages DER et CER, car les repr√©sentations cod√©es de tous les √©l√©ments doivent √™tre tri√©es. </font><font style="vertical-align: inherit;">Ni le CER ni un DER √† deux passes n'aidera ici. </font><font style="vertical-align: inherit;">La norme ASN.1 moderne ne recommande donc pas l'utilisation √† la fois de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (n√©cessitant un tri similaire dans DER) et de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et quelle est cette image au d√©but de l'article?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est dans PyDERASN qu'un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navigateur ASN.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interactif et sans pr√©tention </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">est apparu</font></a><font style="vertical-align: inherit;"> , ce qui m'a personnellement aid√© plusieurs fois √† √©crire des gestionnaires pour des structures complexes. </font><font style="vertical-align: inherit;">Vous permet de parcourir toute la structure d√©cod√©e, en montrant tous les d√©tails sur chaque objet, son emplacement dans les donn√©es binaires, le chemin de d√©codage. </font><font style="vertical-align: inherit;">De plus, tout √©l√©ment peut √™tre enregistr√© dans un fichier s√©par√©, comme les certificats ou les listes de r√©vocation de certificats inclus dans le CMS. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergey Matveev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cipherpunk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d√©veloppeur Python / Go, sp√©cialiste en chef du FSUE ¬´Centre scientifique et technique¬´ Atlas ¬ª.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498000/index.html">Ce que j'aimerais savoir avant de d√©velopper mon propre jeu</a></li>
<li><a href="../fr498002/index.html">Guide de poche du Z3</a></li>
<li><a href="../fr498004/index.html">Station de travail dans un conteneur Docker</a></li>
<li><a href="../fr498006/index.html">Choisir un conseil en brevets</a></li>
<li><a href="../fr498012/index.html">Mikrotik RouterOS dans Docker avec Qemu</a></li>
<li><a href="../fr498018/index.html">Analyses en ligne dans l'architecture de microservices: aidez et sugg√©rez Postgres FDW Post –∏ Post Post Ã∂–øÃ∂—ÄÃ∂–æÃ∂—ÅÃ∂—ÇÃ∂–∏Ã∂—Ç –∏—åÃ∂</a></li>
<li><a href="../fr498020/index.html">Environ un indicateur applicable pour l'√©valuation visuelle des fonctions √† croissance rapide</a></li>
<li><a href="../fr498022/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 341 (du 13 au 19 avril)</a></li>
<li><a href="../fr498024/index.html">Construire des villes en un clic de souris avec Houdini et Python</a></li>
<li><a href="../fr498026/index.html">FOSS News n ¬∞ 12 - revue des nouvelles gratuites et open source du 13 au 19 avril 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>