<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➗ 👨🏼‍🎤 🧑🏼 Oracle中的Web服务 😱 🧛🏿 🧓🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="网页服务广泛用于一个系统的组件之间或不同系统之间的集成。 Web服务之所以流行，是因为它们的多功能性以及易于实施和调试的优点。多功能性与使用Internet和HTTP协议进行的数据传输相关。 Web服务使在运行于不同操作系统和平台上以不同语言编写的组件之间的集成相对容易。 Web服务实现的简单性是通...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Oracle中的Web服务</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/502030/"><img src="https://habrastorage.org/webt/bn/fa/9y/bnfa9ydnf9mlh7nubs0t86xfdm4.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网页服务</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">广泛用于一个系统的组件之间或不同系统之间的集成。 Web服务之所以流行，是因为它们的多功能性以及易于实施和调试的优点。多功能性与使用Internet和HTTP协议进行的数据传输相关。 Web服务使在运行于不同操作系统和平台上以不同语言编写的组件之间的集成相对容易。 Web服务实现的简单性是通过许多IDE中的内置工具和组件实现的，这些工具和组件使您可以快速开发Web服务（提供方）和必要的代码以在客户端（客户端）调用该服务。通过使用人类可读的数据交换格式-XML和JSON简化了调试服务。除了，有许多实用程序可用于调试和测试服务，包括负载。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文中，我们将考虑几种直接从Oracle DBMS创建Web服务的方法，即不使用第三方工具的方法。</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Native Oracle XML DB Web Services</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> Oracle XML DB HTTP server</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   HTTP</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   -</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> Access List (ACL)</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> -    </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Oracle REST Data Service</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> 1:   POST-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">    WS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  HTTP-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CGI-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> 2:     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java Servlet</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Database Access Descriptor (PL/SQL Servlet)</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a></div>
                    </div><br>
<a name="Introduction"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
给定：大型分销网络（约一千家零售商店）的信息业务系统，由许多组件和子系统组成。</font><font style="vertical-align: inherit;">在每个商店内都有一个主服务器-具有主要业务逻辑的Oracle数据库。</font><font style="vertical-align: inherit;">现金节点由其本地数据库中的单独软件管理。</font><font style="vertical-align: inherit;">该软件定期（通过WS SOAP）从主服务器收集数据，并返回销售结果（文件交换）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
进步并没有停滞不前，新设备出现在商店中。来自该设备的数据应定期发送到商店的主服务器（周期-每隔几分钟），集成必须通过Web服务进行，消息必须具有某种格式，不需要身份验证。我们查看了数据交换合同，发现使用的Web服务技术将不允许与此类设备进行建筑物集成。于是寻找解决方案开始了...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，考虑了几种实现所需Web服务的选项，直到编写一个单独的组件才能为HTTP数据库打开Oracle数据库的窗口：一方面，它将提供Web服务，另一方面，它将通过JDBC与数据库交互。</font><font style="vertical-align: inherit;">困难在于，新组件首先必须在数千家商店中安装，其次，将出现另一个必须随附的链接。</font><font style="vertical-align: inherit;">因此，使用Oracle内置工具实施Web服务仍然是优先选择。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过搜索，我们发现了本文将要考虑的四种方法：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本机Oracle XML DB Web服务</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle REST数据服务</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库访问描述符（PL / SQL servlet）</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前两个选项将被更详细地考虑。</font><font style="vertical-align: inherit;">最初，在我们的系统中使用了本机Oracle XML DB Web服务，也就是说，它是继承的。</font><font style="vertical-align: inherit;">ORDS替代了这种过时的技术（尽管我仍然必须努力工作，并在数千家商店中安装ORDS）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在寻找本机Oracle WS的替代方案时，我们与ORDS一起考虑了另外两种方法（Java Servlet和PL / SQL Servlet），但我们并未在项目中使用它。</font><font style="vertical-align: inherit;">因此，我们将不对这些方法进行详细的考虑，而只限于简要参考。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文将提供一些实施Web服务的实际示例，并附有有助于创建有效服务的说明。</font></font><br>
<br>
<a name="NativeOracle"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本机Oracle XML DB Web服务</font></font></h2><br>
<a name="NativeOracleFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能力</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
允许您使用WS SOAP（版本1.1）通过HTTP组织对Oracle数据库的访问：</font></font><br>
<br>
<ul>
<li> SQL-  XQuery-  SOAP.</li>
<li>     (   ).</li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  -     :      ,   HTTP-.</li>
<li> -    (WSDL),          ,  -.</li>
<li>     -.  ,    —    ,      —        .</li>
<li>   XML-.   ,  ,        XML,            - —   Oracle  .   ,      WS-    Oracle    —    ,    - . </li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  WSDL   ,      ,    - .        —       WSDL,      WSDL ,    .</li>
<li>       ( 50 ).          ,   —  ,     . ,     - —   ,  ,   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值得注意的是，对Web服务的所有请求都需要进行身份验证（来自</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：基本身份验证：Oracle XML DB支持基本身份验证，在此，客户端在授权标头中以明文形式发送用户名和密码）。</font><font style="vertical-align: inherit;">在Oracle中，您可以使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle XML DB Protocol Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置来配置通过HTTP对服务器资源的匿名访问</font><font style="vertical-align: inherit;">，但是实际上，它仅适用于GET请求，而POST请求则需要身份验证。</font><font style="vertical-align: inherit;">由于本机Oracle WS仅通过POST请求工作，因此无法为该技术配置匿名访问。</font></font><br>
<br>
<a name="NativeOracleSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客制化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要使用本机Oracle WS，您需要： </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Oracle中配置内置的HTTP服务器。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Oracle数据库内部配置访问权限（打开HTTP端口）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个servlet。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置ACL（访问列表）。</font></font></li>
</ol><br>
<a name="NativeOracleSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置Oracle XML DB HTTP服务器</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，HTTP服务器应该已经可以运行，但是在某些情况下，可能需要其他侦听器配置-将以下块添加到DESCRIPTION_LIST：</font></font><br>
<br>
<pre><code class="sql hljs">(DESCRIPTION=<font></font>
  (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=8080))(Presentation=HTTP)(Session=RAW)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，您需要重新启动监听器。</font></font><br>
<br>
<a name="NativeOracleSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置HTTP访问</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查当前端口的HTTP。</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> dbms_xdb.gethttpport() <span class="hljs-keyword">AS</span> http_port <span class="hljs-keyword">FROM</span> dual;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值“ 0”表示禁用HTTP访问。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端口设置。</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--    web-services</span>
    dbms_xdb.setHttpPort(<span class="hljs-number">8080</span>);
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></li>
</ol><br>
<a name="NativeOracleSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为Web服务创建Servlet</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了使Web服务正常工作，数据库配置中需要servlet注册。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建servlet的脚本</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_servlet_name      <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'orawsv'</span>;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--   orawsv   Native Web Services</span><font></font>
    DBMS_XDB.deleteServletMapping(l_servlet_name);<font></font>
    DBMS_XDB.deleteServlet(l_servlet_name);<font></font>
 <font></font>
    DBMS_XDB.addServlet( NAME     =&gt; l_servlet_name<font></font>
                       , LANGUAGE =&gt; 'C'<font></font>
                       , DISPNAME =&gt; 'Oracle Query Web Service'<font></font>
                       , DESCRIPT =&gt; 'Servlet for issuing queries as a Web Service'<font></font>
                       , SCHEMA   =&gt; 'XDB');<font></font>
 <font></font>
    DBMS_XDB.addServletSecRole( SERVNAME =&gt; l_servlet_name<font></font>
                              , ROLENAME =&gt; 'XDB_WEBSERVICES'<font></font>
                              , ROLELINK =&gt; 'XDB_WEBSERVICES');<font></font>
 <font></font>
    DBMS_XDB.addServletMapping( PATTERN =&gt; '/orawsv<span class="hljs-comment">/*'
                              , NAME    =&gt; l_servlet_name);
    COMMIT;
END;
/</span></code></pre></div>
                    </div><br>
<a name="NativeOracleSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置访问列表</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要通过HTTP访问Oracle，您需要在DBMS配置中添加规则。</font><font style="vertical-align: inherit;">这是使用内置的DBMS实用程序完成的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要配置ACL，您需要：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本编辑数据库配置（如下）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成配置的数据库模式。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
即，必须已经为其配置了ACL的数据库模式已创建。</font><font style="vertical-align: inherit;">在下面的示例中，将在需要创建新数据库模式的那些地方引用此部分，对于它们，您将需要配置ACL。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在SYS方案中，我们执行ACL配置脚本：</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_ws_user       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'WS_SOAP_TEST'</span>; <span class="hljs-comment">--    ,        WS</span><font></font>
    l_acl           VARCHAR2(250) := 'acl_allow_all.xml';<font></font>
    l_tmp           VARCHAR2(250);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_OVER_HTTP TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_WITH_PUBLIC TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--       PL/SQL </span>
    <span class="hljs-keyword">BEGIN</span>
        dbms_network_acl_admin.drop_acl(acl =&gt; <span class="hljs-string">'/sys/acls/'</span>||l_acl);<font></font>
    EXCEPTION<font></font>
        WHEN dbms_network_acl_admin.acl_not_found THEN<font></font>
            NULL;<font></font>
    <span class="hljs-keyword">END</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--  ACL</span><font></font>
    dbms_network_acl_admin.create_acl( acl         =&gt; l_acl<font></font>
                                     , description =&gt; 'Allow all connections'<font></font>
                                     , is_grant    =&gt; TRUE<font></font>
                                     , start_date  =&gt; SYSTIMESTAMP<font></font>
                                     , end_date    =&gt; NULL<font></font>
                                     , principal   =&gt; 'SYS'<font></font>
                                     , privilege   =&gt; 'connect');<font></font>
 <font></font>
    dbms_network_acl_admin.assign_acl( acl        =&gt; l_acl<font></font>
                                     , host       =&gt; '*'<font></font>
                                     , lower_port =&gt; NULL<font></font>
                                     , upper_port =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-comment">--    (resolve) </span><font></font>
    dbms_network_acl_admin.add_privilege( acl        =&gt; l_acl<font></font>
                                        , principal  =&gt; l_ws_user<font></font>
                                        , is_grant   =&gt; TRUE<font></font>
                                        , privilege  =&gt; 'resolve'<font></font>
                                        , POSITION   =&gt; NULL<font></font>
                                        , start_date =&gt; SYSTIMESTAMP<font></font>
                                        , end_date   =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
应当立即指出，不仅使用本机Oracle WS，而且使用本文讨论的所有其他创建Web服务的方法时，都需要ACL配置。</font></font><br>
<br>
<a name="NativeOracleExample"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用批处理过程的Web服务示例</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们会需要：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库模式，用于处理Web服务请求的对象将位于该数据库模式中。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记录表。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含过程/功能的软件包。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何允许您发送Web请求的工具。</font><font style="vertical-align: inherit;">在这种情况下，使用了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SOAP UI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序</font><font style="vertical-align: inherit;">，但是您可以选择其他任何工具，直到命令行为止。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特征： </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过程参数必须具有简单或对象类型。</font><font style="vertical-align: inherit;">否则，该过程将不会被视为Web服务方法，也不会包含在服务方法列表中。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要实现输入或输出数据的复杂结构，您需要使用对象类型（不能使用批处理类型）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们创建必要的数据库对象：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方案</font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_SOAP_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_soap_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_soap_test;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
立即向ACL添加新方案。</font><font style="vertical-align: inherit;">上一节中的脚本。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在新方案中，创建用于记录的表</font></font><code>T_WS_REQ_LOG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG<font></font>
(<font></font>
  id_log      <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message     <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  proc        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">128</span>),<font></font>
  dtm_request <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">' HTTP-'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.proc <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.dtm_request <span class="hljs-keyword">IS</span> <span class="hljs-string">'/ '</span>;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打包过程很简单：</font></font><br>
<br>
<pre><code class="sql hljs">
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    );<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    )<font></font>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_req_log (message, proc)
    <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'ID='</span>||a_id||<span class="hljs-string">'; DATA='</span>||a_data, <span class="hljs-string">'proc_simple'</span>)
    <span class="hljs-keyword">RETURNING</span> id_log <span class="hljs-keyword">INTO</span> o_result;
<span class="hljs-keyword">END</span> proc_simple;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最简单的Web服务已创建并可以使用。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要访问该服务，您需要使用以下格式的URL：</font></font><br>
<br>
<pre><code class="sql hljs">http://[server]:[port]/[servlet_name]/[DB_SCHEMA]/[WS_OBJ]?wsdl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其中：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[服务器]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Oracle数据库服务器的域名或IP地址</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[端口]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -在“配置通过HTTP的访问”部分中指定的用于通过HTTP访问的端口</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[servlet_name]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -在“为Web创建Servlet的部分”中指定的servlet的名称服务” </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[DB_SCHEMA]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -数据库模式的名称（大写）</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[WS_OBJ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -服务的名称（大写），与数据库对象的名称相等，在我们的情况下-包的名称</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，URL很重要！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
链接示例：</font></font><br>
<br>
<pre><code class="sql hljs">http://my.server:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST?wsdl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果在浏览器中单击此链接，将基于WSDL包自动创建： </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WSDL</font></font></b>
                        <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">definitions</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/"</span>
    <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span>
    <span class="hljs-attr">xmlns:soap</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/soap/"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">types</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xsd:schema</span> <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
     <span class="hljs-attr">elementFormDefault</span>=<span class="hljs-string">"qualified"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_DATA-VARCHAR2-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_ID-NUMBER-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:integer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span><font></font>
 <font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"O_RESULT"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:schema</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">types</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEInput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">portType</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEInputMessage"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutputMessage"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">portType</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">binding</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTBinding"</span>
           <span class="hljs-attr">type</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">soap:binding</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"document"</span> <span class="hljs-attr">transport</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/soap/http"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">soap:operation</span>
 <span class="hljs-attr">soapAction</span>=<span class="hljs-string">"PROC_SIMPLE"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">binding</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTService"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>Oracle Web Service<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPort"</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTBinding"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">soap:address</span> 
             <span class="hljs-attr">location</span>=<span class="hljs-string">"http://******:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span><font></font>
 <font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">definitions</span>&gt;</span></code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要测试服务，请在SOAP UI中创建一个新的SOAP项目。</font><font style="vertical-align: inherit;">作为URL，从上面的示例中指定地址。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
打开后，</font></font><code>Request 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们看到请求模板已经由指定的WSDL自动生成。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
立即为请求添加基本授权-登录名和密码与连接到数据库时的登录名​​和密码相同。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/e_/re/qie_rezy1hizdhgrcy-y--2ghae.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请求和响应示例。</font><font style="vertical-align: inherit;">请注意，一行已添加到自动生成的请求中</font></font><code>&lt;pk:O_RESULT-VARCHAR2-OUT/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">事实是，Oracle 12c中存在一个错误：OUT变量未添加到用于本机Oracle WS的WSDL中。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j6/ch/em/j6chemtum0xqyl4tz6kmandwjdc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
调用结果在日志表中可见。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/5t/sy/be5tsyoz24pbltgramyceh86xf8.png"><br>
<br>
<a name="NativeOracleSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果此Web服务上没有繁重的负载（几秒钟内一个请求），则可以将本机Oracle XML DB Web服务技术用作工业解决方案。</font><font style="vertical-align: inherit;">当消费者对Web服务没有严格的要求（其属性，数据结构，处理逻辑）并且没有严格的预定合同时，此选项适用。</font><font style="vertical-align: inherit;">如果您需要根据预定义的WSDL（如在我们的新设备中）创建Web服务，则本机Oracle WS技术将不适合。</font></font><br>
<br>
<a name="OracleREST"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle REST数据服务</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从版本11.1开始，Oracle以称为Oracle REST数据服务（ORDS）的单独模块的形式引入了完整的RESTful支持。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS是一个Java应用程序，允许您使用SQL和PL / SQL为Oracle数据库创建RESTful API。它是使用Oracle HTTP Server和mod_plsql的替代方法。本质上，ORDS是外部世界和Oracle数据库之间的HTTP接口。该接口允许您关闭对任何数据库对象（表或PL / SQL过程）的传入HTTP请求。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有需要做的就是为所需的数据库安装，配置和运行ORDS。创建REST服务的进一步过程归结为用PL / SQL编写代码（或者，如果代码太懒而无法编写，甚至可以通过单击IDE）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
安装ORDS不需要其他许可证。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要求：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java JDK 8或更高版本；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle 11.1或更高版本（也支持Oracle 11 XE发行版2）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
支持几种ORDS部署选项：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独立模式；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序服务器（Oracle WebLogic Server，Apache Tomcat）上。</font></font></li>
</ul><br>
<a name="OracleRESTFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能力</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS允许您： </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以RESTful风格组织对资源的访问。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以“远程过程调用”样式构建交互（RPC样式交互）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
简而言之，借助ORDS，您可以通过HTTP打开对某些数据库对象（表，过程，函数，包）的访问。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在第一种情况下，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们以RESTful架构风格来理解资源。每个资源均由唯一的URI定义，对资源的操作（CRUD-创建，读取，修改，删除）由HTTP请求中的操作（PUT，POST，GET，DELETE）决定。例如，如果资源是employee表中的一个条目，那么此条目将通过以下形式的URI可用：</font></font><br>
<br>
<pre><code class="sql hljs">GET https://server:port/ords/workspace/hr/employees/7369</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此，URI中指示数据库模式名称，表名称和表中的记录ID。因此，此HTTP请求实际上从指定的表执行SELECT操作。与其他操作（添加，更改，删除）一样，通信原理是相同的：资源的路径在URI中指示，其他参数在请求正文中指示，例如用于将记录插入表中的字段值。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在第二种情况下，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不访问资源</font><b><font style="vertical-align: inherit;">，</font></b><font style="vertical-align: inherit;">而是直接使用过程调用，该过程调用可以执行与第一种情况（CRUD）相同的所有操作，并执行实现必要业务流程的任何其他逻辑。可以使用以下格式的HTTP请求从包进行过程调用：</font></font><br>
<br>
<pre><code class="sql hljs">http://localhost:8080/ords/my_schema/my_pkg/MY_PROC</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 该过程的参数以JSON格式结构的形式在请求主体中传输</font></font><code>{"param" : "value"}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如上所述，在使用本机Oracle WS时使用相同的方法，但是在REST服务的情况下，SOAP协议没有任何限制。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优点</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一种灵活的机制，可让您实施任何复杂的Web服务。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现的简便性：要将PL / SQL过程转换为Web服务，只需执行一些典型命令。</font><font style="vertical-align: inherit;">使用SQL Developer，创建REST API只需单击最少的代码，就可以单击鼠标。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无需身份验证即可实现Web服务的能力。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减去</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS不包含在标准Oracle软件包中-必须为每台服务器分别安装ORDS（如上所述，不需要其他许可证）。</font><font style="vertical-align: inherit;">如果您有数千个数据库服务器，这可能是一个问题。</font></font></li>
</ul><br>
<a name="OracleRESTSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客制化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以以两种模式启动ORDS：通过应用程序服务器或独立模式。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文仅讨论在独立模式下运行的选项。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了使ORDS正常工作，您需要：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在安装之前配置设置。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成ODRS安装。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动ORDS。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置ACL（用于所需的数据库架构）。</font></font></li>
</ol><br>
<a name="OracleRESTSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设定值</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS发行版中的文件默认带有如下所示的参数：</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=<font></font>
db.port=<font></font>
db.servicename=<font></font>
db.sid=<font></font>
db.username=APEX_PUBLIC_USER<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8080<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有关参数的描述，请参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
“独立模式的参数”：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></b></td>
</tr>
<tr>
<td><code>db.hostname</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle数据库服务器的名称或IP地址 </font></font></td>
</tr>
<tr>
<td><code>db.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB端口（例如1521）</font></font></td>
</tr>
<tr>
<td><code>db.servicename</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务名称数据库</font></font></td>
</tr>
<tr>
<td><code>db.username</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL / SQL网关的用户名。</font><font style="vertical-align: inherit;">默认值= APEX_PUBLIC_USER，但是该示例不打算使用APEX，因此可以将此参数保留为空白</font></font></td>
</tr>
<tr>
<td><code>db.password</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户密码（也不要填写） </font></font></td>
</tr>
<tr>
<td><code>migrate.apex.rest</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful APEX服务过渡到ORDS。</font><font style="vertical-align: inherit;">如果不使用APEX，则设置为false。</font></font></td>
</tr>
<tr>
<td><code>rest.services.apex.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置ORDS以在APEX中使用</font></font></td>
</tr>
<tr>
<td><code>rest.services.ords.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置ORDS的数据库架构（ORDS_PUBLIC_USER和ORDS_METADATA）。</font><font style="vertical-align: inherit;">值必须为真</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS_METADATA架构的默认表空间</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS_METADATA架构的临时表空间</font></font></td>
</tr>
<tr>
<td><code>standalone.http.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS将在其上运行的端口。</font><font style="vertical-align: inherit;">此端口将在URI中用于访问WS。</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS_PUBLIC_USER架构的默认表空间</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS_PUBLIC_USER架构的临时表空间</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果，文件的内容应如下所示：</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=your_server_host_name<font></font>
db.port=1521<font></font>
db.servicename=your_db_servicename<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=false<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8888<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要的设置已完成，您可以继续进行安装。</font></font><br>
<br>
<a name="OracleRESTSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们在OS中执行命令：</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，配置文件来自</font></font><code>params</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旁边</font><font style="vertical-align: inherit;">的目录</font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以使用参数明确指定此文件的路径</font></font><code>--parameterFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="xml hljs">java -jar ords.war --parameterFile /path/to/params/myown_params.properties</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在安装对话框中，执行以下操作： </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们指出了用于保存配置的目录的路径（在示例中，这表明</font></font><code>conf </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-结果是，在文件所在的同一目录中</font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将创建一个目录</font></font><code>conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font><font style="vertical-align: inherit;">将创建</font><font style="vertical-align: inherit;">具有ORDS配置的文件）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在出现输入用于ORDS_PUBLIC_USER的数据库密码命令之后，我们输入该方案的密码</font></font><code>ORDS_PUBLIC_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在该用户下，ORDS将连接到数据库。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在出现提示输入1（如果您想使用PL / SQL Gateway）或2（跳过此步骤）之后，我们回答“ 2”，因为我们将不使用APEX，也不需要从迁移</font></font><code>mod_plsql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在输入1（如果希望以独立模式启动）或输入2（退出）[1]的指示后，我们回答“ 1”。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在出现输入1（如果使用HTTP）或2（如果使用HTTPS [1]）指令之后，我们回答1。</font></font></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装对话框</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war install<br>
This Oracle REST Data Services instance has not yet been configured.<br>
Please complete the following prompts<br>
 <br>
 <br>
Enter the location to store configuration data: conf<br>
Enter the database password for ORDS_PUBLIC_USER:<br>
Confirm password:<br>
 03, 2019 2:47:49 PM oracle.dbtools.rt.config.setup.SchemaSetup getInstallOrUpgrade<br>
WARNING: Failed to connect to user ORDS_PUBLIC_USER jdbc:oracle:thin:@//***YOUR_HOST_NAME.DOMAIN***:1521/***YOUR_SERVICE_NAME.DOMAIN***<br>
 <br>
Enter 1 if you want to use PL/SQL Gateway or 2 to skip this step.<br>
If using Oracle Application Express or migrating from mod_plsql then you must enter 1 [1]:2<br>
 03, 2019 2:48:32 PM<br>
INFO: reloaded pools: []<br>
Enter 1 if you wish to start in standalone mode or 2 to exit [1]:<br>
Enter 1 if using HTTP or 2 if using HTTPS [1]:<br>
2019-09-03 14:48:49.754:INFO::main: Logging initialized @4276887ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 2:48:49 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 2:48:50 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
Exception in thread "main" java.lang.reflect.InvocationTargetException<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)<br>
 at oracle.dbtools.jarcl.Entrypoint.main(Entrypoint.java:89)<br>
Caused by: java.lang.OutOfMemoryError: Java heap space<br>
 at java.util.Arrays.copyOf(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.util.AbstractMap.toString(Unknown Source)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.zip.ZipIndex.toString(ZipIndex.java:166)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.JarClassLoader.toString(JarClassLoader.java:51)<br>
 at org.eclipse.jetty.server.ClassLoaderDump.dump(ClassLoaderDump.java:67)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:225)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.server.handler.ContextHandler.dump(ContextHandler.java:259)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:162)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:701)<br>
 at org.eclipse.jetty.util.component.Dumpable.dump(Dumpable.java:62)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:684)<br>
 at oracle.dbtools.standalone.StandaloneConfiguration.start(StandaloneConfiguration.java:241)<br>
 at oracle.dbtools.standalone.Standalone.execute(Standalone.java:508)<br>
 at oracle.dbtools.cmdline.DefaultCommand.execute(DefaultCommand.java:137)<br>
 at oracle.dbtools.cmdline.Commands.execute(Commands.java:207)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:163)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:368)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，将创建具有ORDS配置的目录，并且针对ORDS的实用程序方案将出现在数据库中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
看到 </font><font style="vertical-align: inherit;">还：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在5分钟内安装Oracle REST Data Services3.0.X</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a name="OracleRESTSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发射</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过以下命令以独立模式启动：</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war standalone</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动对话框</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war standalone<br>
2019-09-03 15:52:45.825:INFO::main: Logging initialized @2079ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 3:52:45 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 3:52:45 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
2019-09-03 15:52:47.124:INFO:oejs.Server:main: jetty-9.4.z-SNAPSHOT; built: 2019-05-02T09:46:34.874Z; git: 14f32d50076f2b706f41a33066eb364d8492e199; jvm 1.8.0_221-b11<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: No SessionScavenger set, using defaults<br>
2019-09-03 15:52:47.180:INFO:oejs.session:main: node0 Scavenging every 660000ms<br>
 03, 2019 3:52:48 PM<br>
INFO: Configuration properties for: |apex|pu|<br>
db.hostname=***YOUR_HOST_NAME.DOMAIN***<br>
db.password=******<br>
db.port=1521<br>
db.servicename=***YOUR_SERVICE_NAME.DOMAIN***<br>
db.username=ORDS_PUBLIC_USER<br>
resource.templates.enabled=true<br>
 <br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.MaxLimit in configuration |apex|pu| is using a value of 10, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.InitialLimit in configuration |apex|pu| is using a value of 3, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:50 PM<br>
INFO: Oracle REST Data Services initialized<br>
Oracle REST Data Services version : 19.2.0.r1991647<br>
Oracle REST Data Services server info: jetty/9.4.z-SNAPSHOT<br>
 <br>
2019-09-03 15:52:50.484:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@d56d67{/ords,null,AVAILABLE}<br>
2019-09-03 15:52:50.658:INFO:oejs.AbstractConnector:main: Started ServerConnector@12325ad{HTTP/1.1,[http/1.1, h2c]}{0.0.<br>
0.0:8082}<br>
2019-09-03 15:52:50.659:INFO:oejs.Server:main: Started @6914ms</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，ORDS已启动并正在运行。</font><font style="vertical-align: inherit;">Web服务地址为http：// &lt;主机名&gt;：/ ords / ...，其中&lt;主机名&gt;是运行ORDS的计算机的名称（它不必与数据库服务器的名称匹配，即ORDS可以在另一台主机上运行），&lt;port&gt;-ORDS配置中指定的端口。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果需要，您可以创建一个脚本以在操作系统启动时自动运行ORDS。</font></font><br>
<br>
<a name="OracleRESTSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存取设定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后一步是配置ACL。</font><font style="vertical-align: inherit;">这些步骤</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用本机Oracle WS </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">相同</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建数据库模式后，必须完成此步骤，因此以下示例将分别指示何时需要执行此配置。</font><font style="vertical-align: inherit;">到目前为止，我们可以假定所有初步步骤均已完成，并继续进行示例。</font></font><br>
<br>
<a name="OracleRESTExample1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例1：POST请求的处理程序</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，考虑RPC样式的交互实现选项，即，我们将创建一个Web服务方法，该方法的处理程序将是一个批处理过程。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实际上，正是在此版本中，在我们的分销网络项目中实施了与ORDS的合作，结果达到了预期。</font><font style="vertical-align: inherit;">事实证明，这是一种快速通用的方法，可以为不同的业务流程创建新的Web服务方法-从使用设备到站点的API。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如上所述，ORDS支持也包含在SQL Developer（Oracle开发的数据库IDE）中。</font><font style="vertical-align: inherit;">在SQL Developer中，可以直接从菜单项或上下文菜单中创建Web服务。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文中，使用SQL Developer（版本18）制作了示例，但是还包括由于IDE中的操作而在数据库中执行的PL / SQL代码。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实验所依据的数据库版本：</font></font><br>
<br>
<pre><code class="sql hljs">SQL&gt; <span class="hljs-keyword">SELECT</span> v.BANNER <span class="hljs-keyword">FROM</span> v$<span class="hljs-keyword">version</span> v;<font></font>
 <font></font>
BANNER<font></font>
<span class="hljs-comment">--------------------------------------------------------------------------------</span>
Oracle DATABASE 12c Enterprise Edition <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - <span class="hljs-number">64</span><span class="hljs-built_in">bit</span> Production<font></font>
PL/<span class="hljs-keyword">SQL</span> <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
CORE	<span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span>	Production<font></font>
TNS <span class="hljs-keyword">FOR</span> Linux: <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
NLSRTL <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production</code></pre><br>
<a name="OracleRESTExample1-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为WS创建测试用户</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，我们再次需要一个新的方案-创建它：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_test;</code></pre><br>
<a name="OracleRESTExample1-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置数据库架构</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建图之后，有必要使其可以通过ORDS访问。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了这：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在SQL Developer中，为创建连接</font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在连接列表中，调用新连接的上下文菜单。</font><font style="vertical-align: inherit;">选择</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST服务→启用REST服务...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/qy/yv/jqqyyveitff-wlvruwzfefp8bae.png"><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在对话框中，选中“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用模式</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”旁边的框</font><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">如果您希望</font><font style="vertical-align: inherit;">在URI中显示其他文本</font><font style="vertical-align: inherit;">而不是模式名称</font><font style="vertical-align: inherit;">，也可以在</font><font style="vertical-align: inherit;">此处更改“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schema alias</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”参数</font></font><code>ws_test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/0d/f-/jc0df-k8qea-djnenwxg4spe2xw.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“下一步”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将看到最终将在数据库中执行的PL / SQL代码（您可以在不使用IDE的情况下编写自己的代码）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wg/pd/pb/wgpdpbaxjzxzqv7ju6vf4yzp2i0.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
清单：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.ENABLE_SCHEMA( p_enabled             =&gt; <span class="hljs-literal">TRUE</span>
                      , p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>
                      , p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>
                      , p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>
                      , p_auto_rest_auth      =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
<a name="OracleRESTExample1-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建模块和模板</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，您需要为资源创建一个模块和模板。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个结构单元，可让您对几个逻辑相关的资源模板进行分组。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种特定的Web服务，为资源提供一组特定的方法。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源模块：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个用于组相关的资源的模板的组织单元。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源模板：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一种单独的RESTful服务，能够为某些URI（通用资源标识符）集的请求提供服务。 URI的集合由资源模板的URI模式定义。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
例如，对于在线商店，可以调用一个模块</font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-在此模块中，将合并所有商店的API。</font><font style="vertical-align: inherit;">模板可以是特定的资源，例如订单（模板</font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），产品目录（模板</font></font><code>item</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），付款（模板</font></font><code>payment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）等。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要创建模块和模板，需要执行以下步骤：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在对象树中，打开“ REST数据服务”部分，在“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分中调用上下文菜单</font><font style="vertical-align: inherit;">，选择“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新建模块...”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ar/uv/ry/aruvrywejhtzq-3oigkirmjy0qy.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在模块创建对话框中，指定模块名称（</font></font><code>shop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），前缀URI（还指示</font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-在下面的示例中，我们将立即看到Web服务地址模板是什么），在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publish</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面放置一个daw </font><font style="vertical-align: inherit;">，单击</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ Next&gt;”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/ak/mf/dbakmfibj3ir0cxttme-zjuz4qu.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下一个对话框中，指定模板的名称，例如</font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后再次单击</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ Next&gt;”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在最后一个对话框中，我们看到所有输入的模块和模板参数。</font><font style="vertical-align: inherit;">在“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡上，</font><font style="vertical-align: inherit;">您可以单击“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来查看将在数据库中执行的PL / SQL代码</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/al/g0/yjalg0-ud3fp5x37qtx5nyemwxq.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要创建模块</font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以添加更多的模式-也在对象树，上下文菜单中，然后选择</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“添加模板...”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码清单以创建模块和模板</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.DEFINE_MODULE( p_module_name    =&gt; <span class="hljs-string">'shop'</span>
                      , p_base_path      =&gt; <span class="hljs-string">'shop'</span>
                      , p_items_per_page =&gt;  <span class="hljs-number">25</span>
                      , p_status         =&gt; <span class="hljs-string">'PUBLISHED'</span>
                      , p_comments       =&gt; <span class="hljs-literal">NULL</span>);<font></font>
 <font></font>
    ORDS.DEFINE_TEMPLATE( p_module_name    =&gt; 'shop'<font></font>
                        , p_pattern        =&gt; 'order'<font></font>
                        , p_priority       =&gt; 0<font></font>
                        , p_etag_type      =&gt; 'HASH'<font></font>
                        , p_etag_query     =&gt; NULL<font></font>
                        , p_comments       =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br>
<a name="OracleRESTExample1-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个HTTP请求处理程序</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，我们需要为我们的服务创建一个HTTP请求处理程序。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们需要创建将包含请求处理逻辑的数据库对象。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们需要一个用于记录日志的表和一个其中将包含处理程序代码的包。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用脚本创建表：</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG<font></font>
(<font></font>
  id_log          <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message         <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_header  <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_body    <span class="hljs-keyword">CLOB</span>,<font></font>
  response_header <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  response_body   <span class="hljs-keyword">CLOB</span>,<font></font>
  dtz_log         <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">WITH</span> <span class="hljs-built_in">TIME</span> ZONE <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">'  HTTP- (ORDS)'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.dtz_log <span class="hljs-keyword">IS</span> <span class="hljs-string">'/  '</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_WS_LOG PRIMARY <span class="hljs-keyword">KEY</span> (ID_LOG) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个包：</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    );<font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/<font></font>
 <font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>
<span class="hljs-keyword">AS</span>
    l_clob      <span class="hljs-keyword">CLOB</span>;<font></font>
    l_amount    NUMBER := 2000;<font></font>
    l_offset    NUMBER := 1;<font></font>
    l_buffer    VARCHAR2(32767);<font></font>
    l_length    PLS_INTEGER := dbms_lob.getlength(a_blob);<font></font>
<span class="hljs-keyword">BEGIN</span>
    dbms_lob.createtemporary(l_clob, <span class="hljs-literal">TRUE</span>);<font></font>
    dbms_lob.OPEN(l_clob, dbms_lob.lob_readwrite);<font></font>
    WHILE l_offset &lt;= l_length LOOP<font></font>
        l_buffer := UTL_RAW.cast_to_varchar2(UTL_RAW.convert( r            =&gt; dbms_lob.substr(a_blob, l_amount, l_offset)<font></font>
                                                            , from_charset =&gt; a_from_charset<font></font>
                                                            , to_charset   =&gt; a_to_charset));<font></font>
        IF LENGTH(l_buffer) &gt; 0 THEN<font></font>
            dbms_lob.writeappend(l_clob, LENGTH(l_buffer), l_buffer);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_offset := l_offset + l_amount;<font></font>
        EXIT WHEN l_offset &gt; l_length;<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
    RETURN l_clob;<font></font>
<span class="hljs-keyword">END</span> blob2clob;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp<font></font>
        );<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，对于创建的模板，您需要添加一个处理程序。</font><font style="vertical-align: inherit;">为HTTP方法添加一个处理程序</font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，请执行以下步骤：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们调用模板的上下文菜单，选择</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加处理程序</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后选择HTTP方法：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gh/hs/2l/ghhs2llhlojihuhzkko_pcfm6bo.png"></li>
<li>     .   <b>SQL Worksheet</b>  PL/SQL-,         HTTP-   <code>POST</code>.     ,   <code>process_request</code>    .  ,     bind- <code>:body</code> —    ORDS,          (    BLOB).       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"></a>.      <code>:body_text</code>,        CLOB.        ,   ,   ,       ORDS  .     <code>:body_text</code>   ,        «» .       <code>:body</code>,      CLOB    . ,     :<br>
<br>
<img src="https://habrastorage.org/webt/z7/jw/md/z7jwmdky6orqwntld4kwoy_lw7i.png"><br>
</li>
<li>  Save REST Handler —      .<br>
<br>
   POST-:<br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如有必要，您可以获取PL / SQL代码来创建处理程序。</font><font style="vertical-align: inherit;">为此，在ORDS模块的上下文菜单中，选择“ REST定义”，然后指定将模块创建脚本输出到例如剪贴板的位置：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/r4/ww/6ir4wwzdqbzg2zen2mmshbmmroq.png"></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的代码创建模块</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">-- Generated by Oracle SQL Developer REST Data Services 18.1.0.095.1630</span>
<span class="hljs-comment">-- Exported REST Definitions from ORDS Schema Version 18.4.0.r3541002</span>
<span class="hljs-comment">-- Schema: WS_TEST   Date: Wed Oct 23 20:19:54 MSK 2019</span>
<span class="hljs-comment">--</span>
<span class="hljs-keyword">BEGIN</span><font></font>
  ORDS.ENABLE_SCHEMA(<font></font>
      p_enabled             =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
      p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
      p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>,<font></font>
      p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>,<font></font>
      p_auto_rest_auth      =&gt; <span class="hljs-literal">TRUE</span>);    <font></font>
 <font></font>
  ORDS.DEFINE_MODULE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_base_path      =&gt; '/shop/',<font></font>
      p_items_per_page =&gt;  25,<font></font>
      p_status         =&gt; 'PUBLISHED',<font></font>
      p_comments       =&gt; NULL);      <font></font>
  ORDS.DEFINE_TEMPLATE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_priority       =&gt; 0,<font></font>
      p_etag_type      =&gt; 'HASH',<font></font>
      p_etag_query     =&gt; NULL,<font></font>
      p_comments       =&gt; NULL);<font></font>
  ORDS.DEFINE_HANDLER(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_method         =&gt; 'POST',<font></font>
      p_source_type    =&gt; 'plsql/block',<font></font>
      p_items_per_page =&gt;  0,<font></font>
      p_mimes_allowed  =&gt; '',<font></font>
      p_comments       =&gt; NULL,<font></font>
      p_source         =&gt; <font></font>
'<span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; ''application/json'');<font></font>
        htp.p(''{ "result" : "error", "message" : "''||SQLERRM||''" }'');<font></font>
<span class="hljs-keyword">END</span>;'<font></font>
      );<font></font>
 <font></font>
 <font></font>
  <span class="hljs-keyword">COMMIT</span>; 
<span class="hljs-keyword">END</span>;</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：如果</font></font><code>ORDS.DEFINE_MODULE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次</font><font style="vertical-align: inherit;">执行模块创建过程</font><font style="vertical-align: inherit;">，则该模块的所有模板将被自动删除，并且不会对此发出警告！</font></font><br>
<br>
<a name="OracleRESTExample1-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通话范例</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是我们的Web服务准备就绪的地方。</font><font style="vertical-align: inherit;">它仍然需要检查其工作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要检查，我们执行以下请求：</font></font><br>
<br>
<pre><code class="xml hljs">POST http://****:8888/ords/ws_test/shop/order HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json<font></font>
Content-Length: 22<font></font>
Host: ****:8888<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{ "message" : "test" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为回应，我们得到：</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Wed, 23 Oct 2019 16:54:53 GMT<font></font>
Content-Type: application/json<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{ "result" : "success" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
方法执行的结果是一条记录，在日志表中包含请求和响应的主体：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/89/tp/cj89tpjfzxvmdot-nsdr15nn49c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如您所见，发送的HTTP请求已被包中的过程成功处理。</font></font><br>
<br>
<a name="OracleRESTExample1-Step6"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求中的参数</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上面，我们已经看到了简单的Web服务的结果。</font><font style="vertical-align: inherit;">现在，通过向请求中添加其他参数，使任务复杂一些。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有两种方法来传递参数：</font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过URL。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数以标准形式在URL中设置：</font></font><br>
<br>
<pre><code class="sql hljs">http://...URI...?p1=val1&amp;p2=val2</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过HEADER。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数在请求标头中设置为</font></font><code>p1: val1</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在请求处理程序的ORDS中，参数定义为绑定变量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们在前面的示例中添加了两个参数：</font></font><code>prm1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-URI中的</font></font><code>prm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">-请求标头中的参数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了处理这些参数，</font></font><code>PK_ORDS_API.process_request:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们添加了</font><font style="vertical-align: inherit;">过程，</font><font style="vertical-align: inherit;">添加了参数</font></font><code>a_prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>a_prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，来自请求的参数值将到达这些参数。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有新参数的请求处理程序过程</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    , a_prm_uri     VARCHAR2 := NULL<font></font>
    , a_prm_hdr     VARCHAR2 := NULL<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
    lh_hdr('a_prm_uri')             := a_prm_uri;<font></font>
    lh_hdr('a_prm_hdr')             := a_prm_hdr;<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp);<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在过程内部，我们只需在日志中记录新参数的值即可。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将新参数添加到POST请求处理程序中-以绑定变量</font></font><code>:prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">的形式</font></font><code>:prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
带有新参数的POST请求请求的处理程序：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob), a_prm_uri =&gt; :prm_uri, a_prm_hdr =&gt; :prm_hdr);<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在处理程序中的`` </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数''</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡上，</font><font style="vertical-align: inherit;">声明变量：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mc/cx/mh/mccxmhpqkgnbkll850xmlojvy6e.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种形式下，第一个字段（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）包含请求中期望的参数名称，第二个字段（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bind Parameter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-将在此请求的处理程序中指定的绑定变量的名称。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们使用新参数执行请求：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/rj/e5/k1rje5cdkd9prfi8r-canaolczs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果-请求中的参数保存在日志中：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/vy/c6/4yvyc6zvhi_xkhod215lxywbdee.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，也可以从CGI变量中检索URI中的参数</font></font><code>QUERY_STRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即，获取参数不需要启动绑定变量-您可以在处理程序过程本身中解析它们请求。</font></font><br>
<br>
<a name="OracleRESTExample1-Step7"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CGI变量</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在Oracle中使用HTTP时，可以获取反映HTTP请求上下文的环境变量的值。</font><font style="vertical-align: inherit;">您可以使用该过程获取变量的值</font></font><code>OWA_UTIL.get_cgi_env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL / SQL中可用的CGI变量列表</font></font></b>
                        <div class="spoiler_text"><code>APEX_LISTENER_VERSION<br>
GATEWAY_INTERFACE<br>
GATEWAY_IVERSION<br>
HTTP_ACCEPT_ENCODING<br>
HTTP_HOST<br>
HTTP_PORT<br>
HTTP_USER_AGENT<br>
PATH_ALIAS<br>
PATH_INFO<br>
PLSQL_GATEWAY<br>
QUERY_STRING<br>
REMOTE_ADDR<br>
REMOTE_USER<br>
REQUEST_CHARSET<br>
REQUEST_IANA_CHARSET<br>
REQUEST_METHOD<br>
REQUEST_PROTOCOL<br>
REQUEST_SCHEME<br>
SCRIPT_NAME<br>
SERVER_NAME<br>
SERVER_PORT<br>
SERVER_PROTOCOL<br>
SERVER_SOFTWARE<br>
WEB_AUTHENT_PREFIX<br>
host<br>
user-agent<br>
CONTENT-LENGTH<br>
CONTENT-TYPE</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另请参阅：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP标头（OWA_UTIL）和ORDS特定的绑定变量</font></font></a><br>
<br>
<a name="OracleRESTExample2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例2：通过ORDS访问表</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此示例中，我们考虑通过ORDS访问数据库对象（对表）的组织方式。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与前面的示例一样，我们未经授权即可进行访问。</font><font style="vertical-align: inherit;">请参阅</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的如何使对资源的安全访问</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要使数据库对象可通过ORDS访问，只需执行一个步骤-命令</font></font><code>ORDS.ENABLE_OBJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">之后，可以通过以下形式的URI访问对象：</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<a name="OracleRESTExample2-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建测试图案</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，我们将创建表“ Orders”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表创建脚本：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_ORDER<font></font>
(<font></font>
  id_order   <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-keyword">NUM</span>        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>),<font></font>
  buyer_name <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">256</span>),<font></font>
  dt_order   <span class="hljs-built_in">DATE</span>,<font></font>
  memo       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>)<font></font>
);<font></font>
 <font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.id_order <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.num <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.buyer_name <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.dt_order <span class="hljs-keyword">IS</span> <span class="hljs-string">'  '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.memo <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_ORDER PRIMARY <span class="hljs-keyword">KEY</span> (ID_ORDER) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre><br>
<a name="OracleRESTExample2-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过ORDS打开表访问</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在SQL Developer调用所需表的上下文菜单中，选择</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“启用REST服务...”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/pe/iw/jmpeiwllpn8ailltyqp-zmyfxji.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在访问设置窗口中，选中“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用对象”复选框</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，取消选中“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要授权”复选框</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，单击</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“完成”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或</font><font style="vertical-align: inherit;">单击</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“下一步”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以查看收到的PL / SQL代码）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9q/fj/9e/9qfj9eql816su08ignjwhfbjp24.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行完这些步骤之后，该表</font></font><code>T_ORDER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可通过HTTP（访问资源的基本URI）变得可用：</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表包含清单：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
  <span class="hljs-keyword">PRAGMA</span> AUTONOMOUS_TRANSACTION;
<span class="hljs-keyword">BEGIN</span><font></font>
 <font></font>
    ORDS.ENABLE_OBJECT(p_enabled =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
                       p_schema =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
                       p_object =&gt; <span class="hljs-string">'T_ORDER'</span>,<font></font>
                       p_object_type =&gt; <span class="hljs-string">'TABLE'</span>,<font></font>
                       p_object_alias =&gt; <span class="hljs-string">'t_order'</span>,<font></font>
                       p_auto_rest_auth =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">commit</span>;<font></font>
 <font></font>
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
</li>
</ol><br>
<a name="OracleRESTExample2-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建或编辑记录</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
已打开对表的访问-我们检查如何通过ORDS创建和编辑表中的记录。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要创建记录，我们执行request </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在ORDS文档中，方法描述中</font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定</font><font style="vertical-align: inherit;">了以下描述</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
即，</font></font><code>KeyValues</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使要创建新记录，也必须填写</font><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">（记录键）。</font><font style="vertical-align: inherit;">查询本身应列出表中的所有字段（但可以省略键字段）。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 157<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1"<font></font>
}</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为响应，我们获得了刚创建的记录的所有字段：</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><font></font>
HTTP/1.1 200 OK<font></font>
Content-Type: application/json<font></font>
Content-Location: http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "  1",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们查看表的内容-出现了新记录：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/sb/ud/oysbudug0wwzgn8u7rz5jacs4ng.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要更改记录，我们调用相同的PUT方法。</font><font style="vertical-align: inherit;">更改我们订单中的注释：</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 178<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1.  "<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在响应中，我们获得了与修改后的记录的参数相同的JSON。</font><font style="vertical-align: inherit;">在表中，我们看到该注释已更新：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/ba/ax/gbbaax7cmuudt8bd9osl3ugr6to.png"><br>
<br>
<a name="OracleRESTExample2-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从表中检索记录</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从表中查询数据的方式有以下三种：</font></font><br>
 <br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面请求：</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?offset=&lt;Offset&gt;&amp;limit=&lt;Limit&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要求条件：</font></font><br>
<br>
<pre><code class="sql hljs"> GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?q=&lt;FilterClause&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主键请求：</font></font><br>
 <br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要获取所有记录，可以在不指定任何参数的情况下运行查询：</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:39:58 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "items": [   {<font></font>
      "id_order": 25,<font></font>
      "num": "ords-3472634",<font></font>
      "buyer_name": "Buyer Name",<font></font>
      "dt_order": "2019-10-25T12:00:00Z",<font></font>
      "memo": "ўµЃ‚ѕІ‹№ ·°є°· 1.  ·јµЅ‚Њ їЂјµ‡°Ѕµ",<font></font>
      "links": [      {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      }]<font></font>
   }],<font></font>
   "hasMore": false,<font></font>
   "limit": 25,<font></font>
   "offset": 0,<font></font>
   "count": 1,<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "first",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何使Oracle向Content-Type标头添加编码是一个悬而未决的问题。</font></font></i><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:44:35 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "ўµЃ‚ѕІ‹№ ·°є°· 1.  ·јµЅ‚Њ їЂјµ‡°Ѕµ",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<a name="OracleRESTExample2-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除记录</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要删除，请使用HTTP方法</font></font><code>DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
查询：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q={<span class="hljs-string">"id_order"</span>:<span class="hljs-number">25</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原始形式的请求：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q=%<span class="hljs-number">7</span>B%<span class="hljs-number">22</span>id_order%<span class="hljs-number">22</span>%<span class="hljs-number">3</span>A25%<span class="hljs-number">7</span>D</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回答：</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date=Fri, 25 Oct 2019 16:23:39 GMT<font></font>
Content-Type=application/json<font></font>
Transfer-Encoding=chunked<font></font>
 <font></font>
{"rowsDeleted":1}</code></pre><br>
<a name="OracleRESTSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS是用于Web服务的一种相当灵活且通用的机制，它使您可以实现成熟的REST。在性能方面，它具有强大的内部XML解析能力，远远优于Native Oracle WS。要实现高负载的系统，此方法不适合：在这种情况下，需要使用不同的技术堆栈-单独的应用程序服务器，代理请求，使用集群数据库等。但是，对于实施HTTP请求数量相对较少（每秒高达10-20个）的系统而言，ORDS是性能和灵活性方面的最佳方法。 ORDS仅在生成Web服务规范方面劣于本机Oracle WS：后者提供了完整的规范（WSDL），可以按原样将其提供给服务的使用者。 ORDS也有</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能力</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成描述，但是对于本文考虑的具有完全通用服务的方法（当所有服务都有通用的处理过程时），无法自动生成规范。</font><font style="vertical-align: inherit;">Oracle仅会生成一个顶层规范，而零件（数据模型）则必须手动进行描述。</font></font><br>
<br>
<a name="Alternatives"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替代方法</font></font></h2><br>
<a name="JavaServlet"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用配置方法创建Web服务的此选项类似于本机Oracle WS：它还需要使用Oracle的内置HTTP服务器以及ACL设置（实际上，是所有其他方法）。但是，与本机Oracle WS不同，此选项可用于纯HTTP。在这种情况下，请求处理程序是用Java编写，并仅在HTTP请求类型看（</font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，等等，但它可以做到和所有类型的一个处理器），以及处理逻辑完全保留在开发人员的自由裁量权。您可以将请求主体“按原样”传输到数据库逻辑，然后对其进行分解和处理，可以将逻辑的一部分留在Java处理程序一侧，然后根据请求中的数据从数据库中调用所需的过程。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种实现Web服务的方法非常普遍，并且不需要安装任何其他组件。</font><font style="vertical-align: inherit;">我们仅由于对服务的严格要求而无法应用它：我们需要一个不需要身份验证的Web服务。</font><font style="vertical-align: inherit;">在实施此方法时，需要进行身份验证，并且不能回避此要求。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有关此方法的更多详细信息，请参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a name="DatabaseAccessDescriptor"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库访问描述符（PL / SQL Servlet）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此选项与上一个选项完全相似，只有PL / SQL存储过程充当请求处理程序。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
URL示例-包名称，过程名称，参数（GET请求）如下所示：</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/servlet_plsql/pi_test.test_serv?p_path=ppp </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于POST请求，必须通过“ =”符号直接在请求正文中输入参数名称，这很不方便，因为在这种情况下，请求内容的类型（ContentType）只能是文本。</font><font style="vertical-align: inherit;">您只能以这种形式传输xml或json结构：</font></font><br>
<br>
<pre><code class="sql hljs">p_proc_param_name=&lt;xml_data&gt;…&lt;/xml_data&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此版本的Web服务仅在我们处理非常简单的请求（具有简单数据类型的过程调用）的情况下适用。</font><font style="vertical-align: inherit;">在此选项中传输任何复杂的多层结构将不起作用。</font><font style="vertical-align: inherit;">在ORACLE-BASE网站上</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
详细</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">这种方法</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a name="Conclusion"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结论</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在Oracle中创建Web服务是一项相当简单的任务，不需要编写任何类型的超复杂代码。同时，Oracle开发人员将相当强大的机制引入他们的工具库，该机制使您可以通过HTTP集成异构系统或部分系统。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文中，我们研究了创建Web服务的四种方法。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本机Oracle WS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种过时的技术，但是它仍然具有优势：自动生成WSDL，自动解析XML，无需安装其他软件。主要缺点是性能低下以及受支持的数据类型的限制。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">订单</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-在我看来，创建Web服务的首选方式。足够灵活和通用。在此方法的不便之处，我们只能区分它没有包含在标准Oracle软件包中，也就是说，它需要单独安装。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种完全通用的方法，不需要安装其他软件。但是，所有操作都需要完全手动完成，因为不可能自动生成服务。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL / SQL Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最不成功的方法。这些优点之间的区别是，在此选项下，我们可以通过HTTP调用存储过程，而无需安装其他软件，也无需编写其他语言的代码：所有代码仅以PL / SQL编写。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
谢谢大家的关注！</font><font style="vertical-align: inherit;">我希望本文对那些以某种方式与Oracle产品相关联并且对系统内和系统间集成的问题感到困惑的人有用。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加材料</font></font></b>
                        <div class="spoiler_text"><b>Native Oracle XML DB Web Services </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Using Native Oracle XML DB Web Services</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Native Oracle XML DB Web Services in Oracle 11g Release 1</a><br>
<br>
<b>ORDS</b><br>
<br>
: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Installation, Configuration, and Development Guide</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Install Oracle REST Data Services 3.0.X in under 5 minutes</a><br>
<br>
CGI-: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-">HTTP Headers (OWA_UTIL) and ORDS-Specific Bind Variables</a><br>
<br>
  ORDS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Authentication</a><br>
<br>
ORDS  Open API (Swagger): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Open API 2.0 (Swagger) Support</a><br>
<br>
ORDS,  BLOB: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ORDS web services returning BLOBs</a> <br>
<br>
<b>Java Servlet </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Writing Oracle XML DB HTTP Servlets in Java</a><br>
<br>
<b>Database Access Descriptor (PL/SQL Servlet)</b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DBMS_EPG — The Embedded PL/SQL Gateway in Oracle 10g Database Release 2</a> <br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN502004/index.html">看板方法：将您的过程理解为集体知识的构建过程-第1部分（食谱）</a></li>
<li><a href="../zh-CN502008/index.html">面向大众编程</a></li>
<li><a href="../zh-CN502012/index.html">面向所有人的Azure：入门课程</a></li>
<li><a href="../zh-CN502018/index.html">播客关于移动设备的安全性及其保护解决方案的开发</a></li>
<li><a href="../zh-CN502028/index.html">Vanya去找祖母或动态JavaScript自适应</a></li>
<li><a href="../zh-CN502034/index.html">React中的受控组件和非受控组件不必太复杂</a></li>
<li><a href="../zh-CN502038/index.html">提升原子，方法2.0.1</a></li>
<li><a href="../zh-CN502040/index.html">关于短语动词5（上/下）</a></li>
<li><a href="../zh-CN502042/index.html">分析师访谈-AppMetrica产品经理Alexander Sibrikov</a></li>
<li><a href="../zh-CN502046/index.html">五年锈病</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>