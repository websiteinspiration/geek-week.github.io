<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☔️ 👩🏿‍🤝‍👨🏻 🤚🏾 OVirt in 2 Stunden. Teil 2. Installieren des Managers und der Hosts 🛳️ 🚗 👉🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist der nächste in einer Reihe über oVirt, der hier beginnt .
 
 Artikel
 

1. Einführung
2. Installation des Managers (Ovirt-Engine) u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>OVirt in 2 Stunden. Teil 2. Installieren des Managers und der Hosts</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501182/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Artikel ist der nächste in einer Reihe über oVirt, der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beginnt </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einführung</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation des Managers (Ovirt-Engine) und der Hypervisoren (Hosts) - Wir sind hier</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusätzliche Einstellungen</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grundoperationen</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher werden wir die Probleme der Erstinstallation der Komponenten ovirt-engine und ovirt-host berücksichtigen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können die Installationsprozesse immer detaillierter in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation sehen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inhalt</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ovirt-Motor einbauen</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren Sie ovirt-host</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinzufügen eines Knotens zu oVirtN</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerkschnittstellen-Setup</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FC-Setup</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie FCoE</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISO-Bildspeicher</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erste VM</font></font></a></li>
</ol><br>
<a name="setup-engine"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ovirt-Motor einbauen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für den Motor sind die Mindestanforderungen 2 Kerne / 4 GiB RAM / 25 GiB Speicher. Empfohlen - ab 4 Kernen / 16 GiB RAM / 50 GiB Speicher. Wir verwenden die Option Standalone Manager, wenn die Engine auf einer dedizierten physischen oder virtuellen Maschine außerhalb eines verwalteten Clusters ausgeführt wird. Nehmen wir für unsere Installation eine virtuelle Maschine, zum Beispiel auf einem separaten ESXi </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es ist praktisch, Tools zur Bereitstellungsautomatisierung zu verwenden oder aus einer zuvor vorbereiteten Vorlage zu klonen oder Kickstart zu installieren. </font></font><br>
<br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hinweis: Für ein Produktionssystem ist dies eine schlechte Idee, da Der Manager arbeitet ohne Vorbehalt und wird zum Engpass. In diesem Fall ist es besser, die Option Self-Hosted Engine in Betracht zu ziehen.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Falls erforderlich, wird das Verfahren zum Konvertieren von Standalone in Self Hosted in der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Dokumentation</font></a><font style="vertical-align: inherit;"> ausführlich beschrieben</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Insbesondere muss der Host den Befehl zum erneuten Installieren mit Unterstützung für die Hosted Engine erhalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie CentOS 7 in der minimalen Konfiguration auf der VM, aktualisieren Sie das System und starten Sie es neu:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum update -y &amp;&amp; sudo reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für eine virtuelle Maschine ist es hilfreich, einen Gastagenten zu installieren:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install open-vm-tools</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
für VMware ESXi-Hosts oder für oVirt:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install ovirt-guest-agent</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verbinden das Repository und installieren den Manager:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm<font></font>
$ sudo yum install ovirt-engine<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grundeinstellung:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-setup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den meisten Fällen sind die ausgewählten Standardeinstellungen ausreichend. Für ihre automatische Verwendung können Sie die Konfiguration mit der Taste starten:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-setup --accept-defaults</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können wir uns unter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ovirt.lab.example.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit unserer neuen Engine </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">verbinden</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Hier ist es noch leer, also fahren wir mit der Installation von Hypervisoren fort.</font></font><br>
<a name="setup-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren Sie ovirt-host</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie CentOS 7 in der minimalen Konfiguration auf dem physischen Host, verbinden Sie das Repository, aktualisieren Sie das System und starten Sie es neu:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm<font></font>
$ sudo yum update -y &amp;&amp; sudo reboot<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis: Es ist praktisch, Tools zur Bereitstellungsautomatisierung oder eine Kickstart-Installation für die Installation zu verwenden.</font></font></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel für eine Kickstart-Datei</font></font></b>
                        <div class="spoiler_text">! <b>   !</b>  !<br>
<br>
<pre><code class="plaintext hljs"># System authorization information<font></font>
auth --enableshadow --passalgo=sha512<font></font>
# Use CDROM installation media<font></font>
cdrom<font></font>
# Use graphical install<font></font>
graphical<font></font>
# Run the Setup Agent on first boot<font></font>
firstboot --enable<font></font>
ignoredisk --only-use=sda<font></font>
# Keyboard layouts<font></font>
keyboard --vckeymap=us --xlayouts='us','ru' --switch='grp:alt_shift_toggle'<font></font>
# System language<font></font>
lang ru_RU.UTF-8<font></font>
<font></font>
# Network information<font></font>
network  --bootproto=dhcp --device=ens192 --ipv6=auto --activate<font></font>
network  --hostname=kvm01.lab.example.com<font></font>
<font></font>
# Root password 'monteV1DE0'<font></font>
rootpw --iscrypted $6$6oPcf0GW9VdmJe5w$6WBucrUPRdCAP.aBVnUfvaEu9ozkXq9M1TXiwOm41Y58DEerG8b3Ulme2YtxAgNHr6DGIJ02eFgVuEmYsOo7./<font></font>
# User password 'metroP0!is'<font></font>
user --name=mgmt --groups=wheel --iscrypted --password=$6$883g2lyXdkDLbKYR$B3yWx1aQZmYYi.aO10W2Bvw0Jpkl1upzgjhZr6lmITTrGaPupa5iC3kZAOvwDonZ/6ogNJe/59GN5U8Okp.qx.<font></font>
# System services<font></font>
services --enabled="chronyd"<font></font>
# System timezone<font></font>
timezone Europe/Moscow --isUtc<font></font>
# System bootloader configuration<font></font>
bootloader --append=" crashkernel=auto" --location=mbr --boot-drive=sda<font></font>
# Partition clearing information<font></font>
clearpart --all<font></font>
# Disk partitioning information<font></font>
part /boot --fstype xfs --size=1024 --ondisk=sda  --label=boot<font></font>
part pv.01 --size=45056 --grow<font></font>
volgroup HostVG pv.01 --reserved-percent=20<font></font>
logvol swap --vgname=HostVG --name=lv_swap --fstype=swap --recommended<font></font>
logvol none --vgname=HostVG --name=HostPool --thinpool --size=40960 --grow<font></font>
logvol / --vgname=HostVG --name=lv_root --thin --fstype=ext4 --label="root" --poolname=HostPool --fsoptions="defaults,discard" --size=6144 --grow<font></font>
logvol /var --vgname=HostVG --name=lv_var --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=16536<font></font>
logvol /var/crash --vgname=HostVG --name=lv_var_crash --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=10240<font></font>
logvol /var/log --vgname=HostVG --name=lv_var_log --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=8192<font></font>
logvol /var/log/audit --vgname=HostVG --name=lv_var_audit --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=2048<font></font>
logvol /home --vgname=HostVG --name=lv_home --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=1024<font></font>
logvol /tmp --vgname=HostVG --name=lv_tmp --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=1024<font></font>
<font></font>
%packages<font></font>
@^minimal<font></font>
@core<font></font>
chrony<font></font>
kexec-tools<font></font>
<font></font>
%end<font></font>
<font></font>
%addon com_redhat_kdump --enable --reserve-mb='auto'<font></font>
<font></font>
%end<font></font>
<font></font>
%anaconda<font></font>
pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty<font></font>
pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok<font></font>
pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty<font></font>
%end<font></font>
# Reboot when the install is finished.<font></font>
reboot --eject<font></font>
</code></pre><br>
  , .,  <a href="" rel="nofollow">ftp.example.com/pub/labkvm.cfg</a>.           'Install CentOS 7',     ( Tab)    ( ,  )  <br>
<br>
<pre><code class="plaintext hljs">' inst.ks=ftp://ftp.example.com/pub/labkvm.cfg'</code></pre>.<br>
      /dev/sda,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"> </a> (      lsblk).     kvm01.lab.example.com (     hostnamectl set-hostname kvm03.lab.example.com),  IP  — ,   — ,    .<br>
<br>
  root: monteV1DE0,   mgmt: metroP0!is.<br>
<b>!    !  !</b><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wiederholen (oder parallel ausführen) auf allen Hosts. </font><font style="vertical-align: inherit;">Vom Einschalten des "leeren" Servers bis zum fertigen Zustand unter Berücksichtigung von 2 langen Downloads dauert es ungefähr 20 Minuten.</font></font><br>
<a name="add-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinzufügen eines Knotens zu oVirt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist sehr einfach: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berechnen → Hosts → Neu → ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Assistenten sind die Felder Name (Anzeigename, z. B. kvm03), Hostname (FQDN, z. B. kvm03.lab.example.com) und der Abschnitt Authentifizierung erforderlich - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Root-Benutzer (ausnahmslos)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Passwort oder öffentlicher SSH-Schlüssel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie auf die Schaltfläche </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OK</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geklickt haben, </font><font style="vertical-align: inherit;">wird die Meldung </font><font style="vertical-align: inherit;">angezeigt, dass </font><font style="vertical-align: inherit;">Sie die Energieverwaltung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für diesen Host nicht konfiguriert haben. Sind Sie sicher, dass Sie fortfahren wollen? "</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies ist normal - wir werden die Energieverwaltung später nach einer erfolgreichen Hostverbindung in Betracht ziehen. Wenn die Computer, auf denen die Hosts installiert sind, die Verwaltung nicht unterstützen (IPMI, iLO, DRAC usw.), empfehle ich, sie zu deaktivieren: Berechnen → Cluster → Standard → Bearbeiten → Fencing Ploicy → Fencing aktivieren, deaktivieren Sie sie.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das oVirt-Repository nicht auf dem Host verbunden war, schlägt die Installation fehl, aber es ist in Ordnung - Sie müssen es hinzufügen und dann auf Installieren -&gt; Neu installieren klicken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hostverbindung dauert nicht länger als 5-10 Minuten.</font></font><br>
<a name="host-nic"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerkschnittstellen-Setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir ein fehlertolerantes System, die Netzwerkverbindung sollte auch bietet eine redundante Verbindung aufbauen, die auf dem Registerkarte Berechnen → Hosts → erfolgt </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HOST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> → Netzwerk - </font><font style="vertical-align: inherit;">Schnittstellen - Setup - </font><font style="vertical-align: inherit;">Host - </font><font style="vertical-align: inherit;">Networks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abhängig von den Fähigkeiten Ihrer Netzwerkgeräte und Architekturansätzen sind Optionen möglich. Es ist am besten, eine Verbindung zum Stapel der Top-of-Rack-Switches herzustellen, damit bei einem Ausfall die Netzwerkverfügbarkeit nicht unterbrochen wird. Betrachten Sie das Beispiel eines aggregierten LACP-Kanals. Um den aggregierten Kanal zu konfigurieren, nehmen Sie den zweiten nicht verwendeten Adapter mit der Maus und bringen Sie ihn zum ersten. Das Fenster </font><b><font style="vertical-align: inherit;">Neue Bindung erstellen</font></b><font style="vertical-align: inherit;"> wird geöffnet.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dabei ist standardmäßig LACP (Modus 4, Dynamic Link Aggregation, 802.3ad) ausgewählt. </font><font style="vertical-align: inherit;">Auf der Switch-Seite wird die normale LACP-Gruppenkonfiguration durchgeführt. </font><font style="vertical-align: inherit;">Wenn es nicht möglich ist, einen Switch-Stack zu erstellen, können Sie den Active-Backup-Modus (Modus 1) verwenden. </font><font style="vertical-align: inherit;">Wir werden die VLAN-Einstellungen im nächsten Artikel und die Empfehlungen zu den Netzwerkeinstellungen im Dokument </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planungs- und Voraussetzungshandbuch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> näher erläutern </font><font style="vertical-align: inherit;">.</font></font><br>
<a name="host-fc"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FC-Setup</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fibre Channel (FC) wird sofort unterstützt, seine Verwendung ist unkompliziert. </font><font style="vertical-align: inherit;">Wir werden das Speichernetzwerk nicht konfigurieren, einschließlich der Konfiguration von Speichersystemen und der Zonierung von Fabric-Switches als Teil der oVirt-Konfiguration.</font></font><br>
<a name="ovirt-fcoe"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie FCoE</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FCoE wurde meiner Meinung nach in Speichernetzwerken nicht häufig verwendet, wird jedoch häufig auf Servern als "letzte Meile" verwendet, beispielsweise in HPE Virtual Connect.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Konfigurieren von FCoE erfordert zusätzliche einfache Schritte.</font></font></b>
                        <div class="spoiler_text"><h4>Setup FCoE Engine</h4><br>
   Red Hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">B.3. How to Set Up Red Hat Virtualization Manager to Use FCoE<br>
On the Manager</a>,         :<br>
<br>
<pre><code class="bash hljs">
$ sudo engine-config -s UserDefinedNetworkCustomProperties=<span class="hljs-string">'fcoe=^((enable|dcb|auto_vlan)=(yes|no),?)*$'</span><font></font>
$ sudo systemctl restart ovirt-engine.service<font></font>
</code></pre><br>
<h4>Setup Node FCoE</h4><br>
 oVirt-Host'   <br>
<br>
<pre><code class="bash hljs">$ sudo yum install vdsm-hook-fcoe</code></pre><br>
   FCoE,   Red Hat: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">25.5. Configuring a Fibre Channel over Ethernet Interface</a>.<br>
<br>
 Broadcom CNA   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">User Guide FCoE Configuration for Broadcom-Based Adapters</a>.<br>
<br>
,    (   minimal):<br>
<br>
<pre><code class="bash hljs">$ sudo yum install fcoe-utils lldpad</code></pre><br>
   ( ens3f2  ens3f3   CNA,    ):<br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-ens3f2<font></font>
$ sudo cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-ens3f3<font></font>
$ sudo vim /etc/fcoe/cfg-ens3f2<font></font>
$ sudo vim /etc/fcoe/cfg-ens3f3<font></font>
</code></pre><br>
<b></b>:      DCB/DCBX,  DCB_REQUIRED     no.<br>
<br>
DCB_REQUIRED=«yes» → <b>#</b>DCB_REQUIRED=«yes»<br>
<br>
  ,  adminStatus    ,  ..   FCoE:<br>
<br>
<pre><code class="bash hljs">$ sudo lldptool <span class="hljs-built_in">set</span>-lldp -i ens3f0 adminStatus=disabled<font></font>
...<font></font>
$ sudo lldptool <span class="hljs-built_in">set</span>-lldp -i ens3f3 adminStatus=disabled
</code></pre><br>
    ,   LLDP:<br>
<br>
<pre><code class="bash hljs">$ sudo systemctl start lldpad<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> lldpad
</code></pre><br>
  ,    DCB/DCBX,  DCB_REQUIRED     <b>no</b>      .<br>
<br>
<pre><code class="bash hljs">$ sudo dcbtool sc ens3f2 dcb on<font></font>
$ sudo dcbtool sc ens3f3 dcb on<font></font>
$ sudo dcbtool sc ens3f2 app:fcoe e:1<font></font>
$ sudo dcbtool sc ens3f3 app:fcoe e:1<font></font>
$ sudo ip link <span class="hljs-built_in">set</span> dev ens3f2 up<font></font>
$ sudo ip link <span class="hljs-built_in">set</span> dev ens3f3 up<font></font>
$ sudo systemctl start fcoe<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> fcoe
</code></pre><br>
      :<br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/sysconfig/network-scripts/ifcfg-ens3f2<font></font>
$ sudo vim /etc/sysconfig/network-scripts/ifcfg-ens3f3<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">ONBOOT=yes</code></pre><br>
  FCoE ,      .<br>
<br>
<pre><code class="bash hljs">$ sudo fcoeadm -i</code></pre><br>
  FCoE     FC.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Folgende ist die Konfiguration von Speichersystemen und Netzwerken - Zoning, SAN-Hosts, Erstellen und Präsentieren von Volumes / LUNs, wonach der Speicher mit Ovirt-Hosts verbunden werden kann: Speicher → Domänen → Neue Domäne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Domänenfunktion Wir hinterlassen Daten, Speichertyp - Fibre Channel, Host - any, Name - z. B. storNN-volMM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sicherlich erlaubt Ihr Speichersystem, dass die Verbindung nicht nur eine Reservierung von Pfaden ist, sondern auch ein Ausgleich. </font><font style="vertical-align: inherit;">Viele moderne Systeme sind in der Lage, Daten auf allen Pfaden gleichermaßen optimal zu übertragen (ALUA aktiv / aktiv). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um alle Pfade in einem aktiven Zustand zu aktivieren, müssen Sie Multipassing konfigurieren. Weitere Informationen hierzu finden Sie in den folgenden Artikeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Konfiguration von NFS und iSCSI erfolgt auf ähnliche Weise.</font></font><br>
<a name="host-iso"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISO-Bildspeicher</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Installation des Betriebssystems benötigen Sie die Installationsdateien, die meist in Form von ISO-Images verfügbar sind. </font><font style="vertical-align: inherit;">Sie können den integrierten Pfad verwenden, aber für die Arbeit mit Bildern in oVirt wird ein spezieller Speichertyp entwickelt - ISO, der auf einen NFS-Server ausgerichtet werden kann. </font><font style="vertical-align: inherit;">Fügen Sie es hinzu: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speicher → Domänen → Neue Domäne, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Domänenfunktion → ISO, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exportpfad - z. B. mynfs01.example.com:/exports/ovirt-iso (zum Zeitpunkt der Verbindung sollte der Ordner leer sein, der Manager sollte in der Lage sein, darauf zu schreiben), </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Name - z. B. mynfs01-iso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Bilder zu speichern, erstellt der Manager die Struktur </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ exportiert / ovirt-iso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ &lt;einige UUID&gt; / images / 11111111-1111-1111-1111-1111111111 /</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie bereits ISO-Images auf unserem NFS-Server haben, können Sie diese bequem mit diesem Ordner verknüpfen, anstatt Dateien zu kopieren, um Speicherplatz zu sparen.</font></font><br>
<a name="1stVM"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erste VM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu diesem Zeitpunkt können Sie bereits die erste virtuelle Maschine erstellen und das Betriebssystem und die Anwendungssoftware darauf installieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berechnen → Virtuelle Maschinen → Neu </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie für die neue Maschine einen Namen (Name) an, erstellen Sie eine Festplatte (Instanzabbilder → Erstellen) und verbinden Sie die Netzwerkschnittstelle (Instanziieren Sie VM-Netzwerkschnittstellen, indem Sie ein vNIC-Profil auswählen → Wählen Sie das einzige Ovirtmgmt aus der Liste aus). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Clientseite benötigen Sie einen modernen Browser und einen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPICE-Client,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> um mit der Konsole zu interagieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Maschine wurde erfolgreich gestartet. </font><font style="vertical-align: inherit;">Für einen vollständigeren Betrieb des Systems sind jedoch einige zusätzliche Einstellungen erforderlich, die wir in den folgenden Artikeln fortsetzen werden.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501166/index.html">OVirt in 2 Stunden. Teil 1. Öffnen Sie die Failover-Virtualisierungsplattform</a></li>
<li><a href="../de501168/index.html">Pfleger retten sich - retten, retten, brennen sie aus?</a></li>
<li><a href="../de501172/index.html">Mein Mikrosh-Computer: Setzen Sie die Woche der Nostalgie fort</a></li>
<li><a href="../de501178/index.html">Wie sich das Anschauen von Pornos auf die Produktivität von Arbeit und Studium auswirkt</a></li>
<li><a href="../de501180/index.html">[Post-Question] Benötigen Sie eine IT-Bewegung für FACTS zu Coronavirus und „Nebenwirkungen“?</a></li>
<li><a href="../de501184/index.html">So konfigurieren Sie Apollo für die Arbeit mit GraphQL in Android</a></li>
<li><a href="../de501188/index.html">So verarbeiten Sie Satellitenbilder mit Sen2Cor</a></li>
<li><a href="../de501190/index.html">So starten Sie ein Startup, betreten den chinesischen Markt und erhalten 15 Millionen Investitionen</a></li>
<li><a href="../de501192/index.html">Top 5 Tipps zur Verbesserung der Soft Skills in Englisch</a></li>
<li><a href="../de501194/index.html">Im Gefolge der heißen Partikel. Wilsons Kammer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>