<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧖🏾 🚉 🌮 三角法を避ける 🎷 👨‍👩‍👧 💐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前書き
 コンピュータグラフィックスで使用する三角法を減らす必要があるように思えます。射影、反射、およびベクトル演算（ベクトルのスカラー（ドット）およびベクトル（クロス）積の真の意味でのように）をよく理解すると、通常、三角法を使用するときに不安感が高まります。より正確には、三角法はアルゴリズムにデー...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>三角法を避ける</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462539/"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピュータグラフィックスで使用する三角法を減らす必要があるように思えます。射影、反射、およびベクトル演算（ベクトルのスカラー（ドット）およびベクトル（クロス）積の真の意味でのように）をよく理解すると、通常、三角法を使用するときに不安感が高まります。より正確には、三角法はアルゴリズムにデータを入力するのに適していると思います（角度の概念では、これは方向を測定する直観的な方法です）、一部の3Dレンダリングアルゴリズムの奥にある三角法を見ると、何かがおかしいと感じます。実際、三角法がそこに忍び寄ると、子猫はどこかで死ぬと思います。スピードや正確さについてはそれほど心配していませんが、概念的な優雅さを備えていると思います...次に説明します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の場所では、ベクトルのスカラー積とベクトル積に、回転に必要なすべての情報が含まれていることをすでに説明しました。これらの2つの「長方形」操作-正弦と正弦の余弦です。この情報は、ベクトルの積を使用して三角法と角度を取り除くことができると思われる非常に多くの場所での正弦および余弦に相当します。実際には、三角法をまったく使用せずに、通常のユークリッドベクトルにとどまることでこれを行うことができます。これは、「私たちは何か特別なことをしていませんか？」やっているようです。しかし、残念ながら、経験豊富な専門家でさえ三角法を乱用する傾向があり、物事は非常に複雑で扱いにくく、最も簡潔ではありません。そして、おそらく「間違っている」。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事をより抽象的なものにするのはやめましょう。</font><font style="vertical-align: inherit;">三角関数の式をベクトル積で置き換える場合の1つを想像して、先ほど話した内容を見てみましょう。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スペースまたはオブジェクトを回転するための間違ったオプション</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正規化されたベクトルの周りのベクトルの回転行列を計算する関数を考えましょう </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>v</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.175ex" height="2.134ex" viewBox="0 -809.3 506.1 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-76" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="505" y="9"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>v</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-1">\vec{v}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 角に </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.509ex" viewBox="0 -540.2 529.5 649.8" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">a</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">3Dエンジンまたはリアルタイムの数学ライブラリには、そのような関数が1つあり、他のエンジン、Wikipedia、またはOpenGLチュートリアルから盲目的にコピーされている可能性があります...このため）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数は次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">mat3x3 <span class="hljs-title">rotationAxisAngle</span><span class="hljs-params">( <span class="hljs-keyword">const</span> vec3 &amp; v, <span class="hljs-keyword">float</span> a )</span>
</span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> si = sinf( a );
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> co = cosf( a );
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> ic = <span class="hljs-number">1.0f</span> - co;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> mat3x3( v.x*v.x*ic + co,     v.y*v.x*ic - si*v.z,  v.z*v.x*ic + si*v.y,<font></font>
                   v.x*v.y*ic + si*v.z, v.y*v.y*ic + co,      v.z*v.y*ic - si*v.x,<font></font>
                   v.x*v.z*ic - si*v.y, v.y*v.z*ic + si*v.x,  v.z*v.z*ic + co );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デモやゲームの内部を掘り下げて、ある種のアニメーションモジュールを完成させ、オブジェクトを特定の方向に回転させる必要があるとします。</font><font style="vertical-align: inherit;">軸の1つ、たとえば軸になるように回転させたい</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>z</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.228ex" height="2.134ex" viewBox="0 -809.3 528.6 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="1" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="528" y="8"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>z</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-3">\vec{z}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のベクトルと一致した </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>d</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.547ex" height="2.759ex" viewBox="0 -1078.4 666.2 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="665" y="260"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>d</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-4">\vec{d}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、例えば、アニメーションパスに接する。</font><font style="vertical-align: inherit;">もちろん、を使用して変換を含むマトリックスを作成することを決定します</font></font><code>rotationAxisAngle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">したがって、最初に軸間の角度を測定する必要があります</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.088ex" height="1.509ex" viewBox="0 -540.2 468.5 649.8" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">z</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトと目的の方向ベクトル。</font><font style="vertical-align: inherit;">あなたはグラフィックプログラマーであるため、これはスカラープロダクトで実行でき、次にで角度を抽出できることがわかっています</font></font><code>acos()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>a</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo>&amp;#x22C5;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>b</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo>=</mo><msub><mi>a</mi><mi>x</mi></msub><msub><mi>b</mi><mi>x</mi></msub><mo>+</mo><msub><mi>a</mi><mi>y</mi></msub><msub><mi>b</mi><mi>y</mi></msub><mo>=</mo><mi>a</mi><mi>b</mi><mi>cos</mi><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x2220;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>a</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>b</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.053ex" height="3.384ex" viewBox="0 -1078.4 13800.5 1457.1" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="499" y="7"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-22C5" x="751" y="0"></use><g transform="translate(1252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="20" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="470" y="260"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-3D" x="2001" y="0"></use><g transform="translate(3057,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-78" x="748" y="-213"></use></g><g transform="translate(4091,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-78" x="607" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-2B" x="5248" y="0"></use><g transform="translate(6249,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-79" x="748" y="-213"></use></g><g transform="translate(7230,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-79" x="607" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-3D" x="8389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="9445" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="9975" y="0"></use><g transform="translate(10571,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-63"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-6F" x="444" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-73" x="945" y="0"></use></g><g transform="translate(12077,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-2220" x="0" y="0"></use><g transform="translate(722,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="499" y="7"></use></g><g transform="translate(1252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="20" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="470" y="260"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mover><mi>a</mi><mo stretchy="false">→</mo></mover></mrow><mo>⋅</mo><mrow class="MJX-TeXAtom-ORD"><mover><mi>b</mi><mo stretchy="false">→</mo></mover></mrow><mo>=</mo><msub><mi>a</mi><mi>x</mi></msub><msub><mi>b</mi><mi>x</mi></msub><mo>+</mo><msub><mi>a</mi><mi>y</mi></msub><msub><mi>b</mi><mi>y</mi></msub><mo>=</mo><mi>a</mi><mi>b</mi><mi>cos</mi><mo>⁡</mo><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">∠</mi><mrow class="MJX-TeXAtom-ORD"><mover><mi>a</mi><mo stretchy="false">→</mo></mover></mrow><mrow class="MJX-TeXAtom-ORD"><mover><mi>b</mi><mo stretchy="false">→</mo></mover></mrow></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-6">\vec{a} \cdot \vec{b} = a_xb_x + a_yb_y = ab \cos{\angle \vec{a} \vec{b} }</script></p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、</font></font><code>acosf()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スカラー積が範囲[-1;の外にある場合、奇妙な値を返す</font><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">があります。</font><font style="vertical-align: inherit;">1]そして、あなたはそれがこの範囲に収まるようにその値を変更することを決定します（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およそ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クランプするため）。</font><font style="vertical-align: inherit;">この時点で、1匹の子猫が死亡しました。</font><font style="vertical-align: inherit;">しかし、それについて知るまでは、コードを書き続けます。</font><font style="vertical-align: inherit;">次に、回転軸を計算すると、これがベクトルのベクトル積であることがわかります。</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>z</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.228ex" height="2.134ex" viewBox="0 -809.3 528.6 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="1" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="528" y="8"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>z</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-7">\vec{z}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> オブジェクトと選択した方向 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>d</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.547ex" height="2.759ex" viewBox="0 -1078.4 666.2 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="665" y="260"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>d</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-8">\vec{d}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、オブジェクトのすべてのポイントは、念のために、これらの2つのベクトルによって定義された平面に平行な平面で回転します...（子猫が復活し、再び殺されました）。</font><font style="vertical-align: inherit;">その結果、コードは次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> vec3   axi = normalize( cross( z, d ) );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  ang = acosf( clamp( dot( z, d ), <span class="hljs-number">-1.0f</span>, <span class="hljs-number">1.0f</span> ) );
<span class="hljs-keyword">const</span> mat3x3 rot = rotationAxisAngle( axi, ang );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが機能する理由を理解するために、それでも誤って、すべてのコードを開い</font></font><code>rotationAxisAngle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て実際に何が起こるかを確認します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> vec3   axi = normalize( cross( z, d ) );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  ang = acosf( clamp( dot( z, d ), <span class="hljs-number">-1.0f</span>, <span class="hljs-number">1.0f</span> ) );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  co = cosf( ang );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  si = sinf( ang );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  ic = <span class="hljs-number">1.0f</span> - co;
<span class="hljs-keyword">const</span> mat3x3 rot = mat3x3(<font></font>
    axi.x*axi.x*ic + co,       axi.y*axi.x*ic - si*axi.z, axi.z*axi.x*ic + si*axi.y,<font></font>
    axi.x*axi.y*ic + si*axi.z, axi.y*axi.y*ic + co,       axi.z*axi.y*ic - si*axi.x,<font></font>
    axi.x*axi.z*ic - si*axi.y, axi.y*axi.z*ic + si*axi.x, axi.z*axi.z*ic + co);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
お気づきかもしれませんが、私たちは戻り値の余弦を計算することにより、それをすぐにキャンセルするために、かなり不正確で高価なacos呼び出しを行っています。</font><font style="vertical-align: inherit;">そして、最初の質問が表示されます。「コールチェーンをスキップして</font></font><code>acos()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---&gt; </font></font><code>cos()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセッサー時間を節約してみませんか？」</font><font style="vertical-align: inherit;">さらに、これは私たちが何か間違っていて非常に複雑なことをしているのではなく、この式の単純化を通じて現れる単純な数学的原理が私たちにやって来ることを教えてくれませんか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サインを計算するために角度が必要になるため、単純化はできないと主張できます。</font><font style="vertical-align: inherit;">ただし、そうではありません。</font><font style="vertical-align: inherit;">ベクトルのベクトル積に精通している場合は、スカラー積にコサインが含まれているように、ベクトルにはサインが含まれていることがわかります。</font><font style="vertical-align: inherit;">ほとんどのグラフィックプログラマは、ベクトルのスカラー積が必要な理由を理解していますが、ベクトル積が必要な理由を誰もが理解しているわけではありません（法線と回転軸を読み取るためだけに使用しています）。</font><font style="vertical-align: inherit;">基本的に、cos / acosペアを取り除くのに役立つ数学的原理は、スカラー積がある場所に、欠けている情報（垂直部分、正弦）を報告するベクトル積がある可能性があることも示しています。</font></font><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>a</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo>&amp;#x00D7;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>b</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mo>=</mo><mi>a</mi><mi>b</mi><mi>sin</mi><mo>&amp;#x2061;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x2220;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>a</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>b</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.709ex" height="3.259ex" viewBox="0 -1078.4 8916.3 1403.3" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-7C" x="278" y="0"></use><g transform="translate(557,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="499" y="7"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-D7" x="1308" y="0"></use><g transform="translate(2309,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="20" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="470" y="260"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-7C" x="2780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-7C" x="3058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-3D" x="3615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="5201" y="0"></use><g transform="translate(5797,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-6E" x="673" y="0"></use></g><g transform="translate(7193,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-2220" x="0" y="0"></use><g transform="translate(722,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="499" y="7"></use></g><g transform="translate(1252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-62" x="20" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="470" y="260"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mover><mi>a</mi><mo stretchy="false">→</mo></mover></mrow><mo>×</mo><mrow class="MJX-TeXAtom-ORD"><mover><mi>b</mi><mo stretchy="false">→</mo></mover></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mo>=</mo><mi>a</mi><mi>b</mi><mi>sin</mi><mo>⁡</mo><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="normal">∠</mi><mrow class="MJX-TeXAtom-ORD"><mover><mi>a</mi><mo stretchy="false">→</mo></mover></mrow><mrow class="MJX-TeXAtom-ORD"><mover><mi>b</mi><mo stretchy="false">→</mo></mover></mrow></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-9">||\vec{a}\times\vec{b}|| = ab\sin{\angle\vec{a}\vec{b}}</script></p><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スペースまたはオブジェクトを回転させる正しい方法</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、角度のサインを抽出できます </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>z</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.228ex" height="2.134ex" viewBox="0 -809.3 528.6 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="1" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="528" y="8"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>z</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-10">\vec{z}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>d</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.547ex" height="2.759ex" viewBox="0 -1078.4 666.2 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="665" y="260"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>d</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-11">\vec{d}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ベクトル積の長さを見るだけで...-覚えておいてください </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>z</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.228ex" height="2.134ex" viewBox="0 -809.3 528.6 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="1" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="528" y="8"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>z</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-12">\vec{z}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>d</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.547ex" height="2.759ex" viewBox="0 -1078.4 666.2 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="665" y="260"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>d</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-13">\vec{d}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正規化されました！</font><font style="vertical-align: inherit;">これは、次のように関数を書き換えることができることを意味します（!!）</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> vec3   axi = cross( z, d );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  si  = length( axi );
<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>  co  = dot( z, d );
<span class="hljs-keyword">const</span> mat3x3 rot = rotationAxisCosSin( axi/si, co, si );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、回転行列を構築するための新しい関数が、</font></font><code>rotationAxisCosSin()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どこにも正弦と余弦を計算せず、それらを引数として取るようにします。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">mat3x3 <span class="hljs-title">rotationAxisCosSin</span><span class="hljs-params">( <span class="hljs-keyword">const</span> vec3 &amp; v, <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> co, <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> si )</span>
</span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> ic = <span class="hljs-number">1.0f</span> - co;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> mat3x3( v.x*v.x*ic + co,       v.y*v.x*ic - si*v.z,    v.z*v.x*ic + si*v.y,<font></font>
                   v.x*v.y*ic + si*v.z,   v.y*v.y*ic + co,        v.z*v.y*ic - si*v.x,<font></font>
                   v.x*v.z*ic - si*v.y,   v.y*v.z*ic + si*v.x,    v.z*v.z*ic + co );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正規化と平方根を取り除くためにできることがもう1つあります。すべてのロジックを1つの新しい関数にカプセル化し、それ</font></font><code>1/si</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を行列に</font><font style="vertical-align: inherit;">渡します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">mat3x3 <span class="hljs-title">rotationAlign</span><span class="hljs-params">( <span class="hljs-keyword">const</span> vec3 &amp; d, <span class="hljs-keyword">const</span> vec3 &amp; z )</span>
</span>{
    <span class="hljs-keyword">const</span> vec3  v = cross( z, d );
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> c = dot( z, d );
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> k = (<span class="hljs-number">1.0f</span>-c)/(<span class="hljs-number">1.0f</span>-c*c);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> mat3x3( v.x*v.x*k + c,     v.y*v.x*k - v.z,    v.z*v.x*k + v.y,<font></font>
                   v.x*v.y*k + v.z,   v.y*v.y*k + c,      v.z*v.y*k - v.x,<font></font>
                   v.x*v.z*K - v.y,   v.y*v.z*k + v.x,    v.z*v.z*k + c    );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、ゾルタン・ブラナは、それがあることに気づいた</font></font><code>k</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように簡略化することができ</font></font><code>k = 1/(1+c)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それは、より数学的にエレガントに見えますが、また、（、したがって、全体の機能をk個とするために2つの機能を動かすだけでなく、</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>d</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.547ex" height="2.759ex" viewBox="0 -1078.4 666.2 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="665" y="260"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>d</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-14">\vec{d}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>z</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.228ex" height="2.134ex" viewBox="0 -809.3 528.6 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="1" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="528" y="8"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>z</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-15">\vec{z}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> パラレル）が1つになります（ときに </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>d</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.547ex" height="2.759ex" viewBox="0 -1078.4 666.2 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="665" y="260"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>d</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-16">\vec{d}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>z</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.228ex" height="2.134ex" viewBox="0 -809.3 528.6 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMATHI-7A" x="1" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462539/&amp;usg=ALkJrhgi1CWAKVbfQHkalZWz0BDAkvzNYA#MJMAIN-20D7" x="528" y="8"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>z</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-17">\vec{z}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この場合は一致しますが、明確な回転はありません）。</font><font style="vertical-align: inherit;">最終的なコードは次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">mat3x3 <span class="hljs-title">rotationAlign</span><span class="hljs-params">( <span class="hljs-keyword">const</span> vec3 &amp; d, <span class="hljs-keyword">const</span> vec3 &amp; z )</span>
</span>{
    <span class="hljs-keyword">const</span> vec3  v = cross( z, d );
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> c = dot( z, d );
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> k = <span class="hljs-number">1.0f</span>/(<span class="hljs-number">1.0f</span>+c);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> mat3x3( v.x*v.x*k + c,     v.y*v.x*k - v.z,    v.z*v.x*k + v.y,<font></font>
                   v.x*v.y*k + v.z,   v.y*v.y*k + c,      v.z*v.y*k - v.x,<font></font>
                   v.x*v.z*K - v.y,   v.y*v.z*k + v.x,    v.z*v.z*k + c    );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つの三角関数と醜いクランプ（および正規化！）だけでなく、概念的に3D数学も簡略化しました。</font><font style="vertical-align: inherit;">超越関数はなく、ここではベクトルのみが使用されます。</font><font style="vertical-align: inherit;">ベクトルは、他のベクトルを変更する行列を作成します。</font><font style="vertical-align: inherit;">そして、これは重要です。なぜなら、3Dエンジンの三角法が少ないほど、それがより速く、より明確になるだけでなく、まず第一に、数学的によりエレガントになります（より正確です！）。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja462525/index.html">3CXは、エンドツーエンドの音声暗号化を備えたiOSおよびAndroid用の新しいSIPソフトフォンを発売</a></li>
<li><a href="../ja462527/index.html">SincNetニューラルネットワークがバックプロパゲーションを介してサウンドに重要な周波数を割り当てる方法</a></li>
<li><a href="../ja462529/index.html">NASAのルナステーションのアイデアは良くない</a></li>
<li><a href="../ja462533/index.html">IntelliJ IDEA 2019.2：Java 13プレビューのサポート、プロファイリングツール、新しいサービスウィンドウなど</a></li>
<li><a href="../ja462537/index.html">クラウド移行</a></li>
<li><a href="../ja462541/index.html">SpringでのConditionalの使用</a></li>
<li><a href="../ja462543/index.html">RaiffeisenbankでのJavaミートアップ</a></li>
<li><a href="../ja462545/index.html">テレグラムブロッキング、ヘッツナーサブネット/ 16、ILVの経験</a></li>
<li><a href="../ja462547/index.html">SGX Malvar：悪意のある人が、それが考えられた目的のためにインテルの新しいテクノロジーをどのように利用するか</a></li>
<li><a href="../ja462549/index.html">クォーラムブロックチェーン：Javaコードへの統合</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>