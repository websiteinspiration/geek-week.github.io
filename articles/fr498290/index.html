<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ë üéÑ ü§≥üèΩ Hydrologie proc√©durale: simulation dynamique des rivi√®res et des lacs üë®üèª‚Äçüç≥ üëàüèæ üë©üèΩ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Remarque: le code source complet du projet est publi√© sur Github [ ici ]. Le r√©f√©rentiel contient √©galement des informations d√©taill√©es sur la fa√ßon d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hydrologie proc√©durale: simulation dynamique des rivi√®res et des lacs</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498290/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93d/664/fbe/93d664fbe19ce63dfa6b60d9621d07ae.png"></div><blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque: le</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> code source complet du projet est publi√© sur Github [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]. </font><font style="vertical-align: inherit;">Le r√©f√©rentiel contient √©galement des informations d√©taill√©es sur la fa√ßon de lire et d'utiliser le code.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir mis en ≈ìuvre la simulation de l'√©rosion hydraulique bas√©e sur les particules, j'ai d√©cid√© qu'il serait possible d'√©tendre ce concept pour simuler d'autres aspects de l'hydrologie de surface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai recherch√© les m√©thodes existantes de g√©n√©ration proc√©durale de rivi√®res et de lacs, mais les r√©sultats trouv√©s ne me convenaient pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'objectif principal de nombreuses m√©thodes est de cr√©er des syst√®mes fluviaux (tr√®s beaux) en utilisant divers algorithmes (parfois bas√©s sur une carte d'√©l√©vation pr√©c√©demment cr√©√©e ou un probl√®me inverse), mais ils manquent d'une relation r√©aliste forte entre la topographie et l'hydrologie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, le traitement du mod√®le de l'eau sur le relief dans son ensemble est envisag√© sur certaines ressources et une simulation de fluides tr√®s complexes est utilis√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, je vais d√©montrer ma tentative de surmonter ces probl√®mes avec une technique qui √©tend la capacit√© de simuler l'√©rosion hydraulique √† base de particules. </font><font style="vertical-align: inherit;">J'expliquerai √©galement comment, en g√©n√©ral, je r√©sous le probl√®me de ¬´l'eau sur le relief¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ma m√©thode, je m'efforce √† la fois de simplicit√© et de r√©alisme au prix d'une l√©g√®re augmentation de la complexit√© du syst√®me d'√©rosion sous-jacent. </font><font style="vertical-align: inherit;">Je recommande de lire mon pr√©c√©dent article sur ce syst√®me [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traduction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur Habr√©], car le nouveau mod√®le est bas√© sur lui.</font></font><br>
<a name="habracut"></a><br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology6.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce syst√®me est capable de g√©n√©rer rapidement un terrain d'aspect tr√®s r√©aliste avec l'hydrologie. </font><font style="vertical-align: inherit;">Cette vid√©o a √©t√© rendue en temps r√©el. </font><font style="vertical-align: inherit;">Le syst√®me est capable de g√©n√©rer un nombre infini de tels paysages.</font></font></i><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Explication:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> je ne suis pas g√©ologue, j'ai donc cr√©√© le syst√®me en fonction de mes connaissances.</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concept d'hydrologie</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je souhaite cr√©er un syst√®me g√©n√©ratif capable de simuler de nombreux ph√©nom√®nes g√©ographiques, notamment:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migration fluviale et fluviale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cascades naturelles</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formation de Canyon</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gonflement du sol et de la plaine inondable</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, les syst√®mes d'hydrologie et de topographie doivent √™tre dynamiques et √©troitement li√©s. </font><font style="vertical-align: inherit;">Le syst√®me d'√©rosion hydraulique √† base de particules a d√©j√† les aspects de base n√©cessaires pour cela:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le relief affecte le mouvement de l'eau</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'√©rosion et la s√©dimentation affectent le terrain</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, ce syst√®me simule l'√©rosion caus√©e par la pluie, mais n'est pas en mesure de transmettre de nombreuses autres influences:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans un </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cours d'</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eau en </font><font style="vertical-align: inherit;">mouvement </font><strong><font style="vertical-align: inherit;">, l'</font></strong><font style="vertical-align: inherit;"> eau se comporte diff√©remment.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans une </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">piscine</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> debout </font><strong><font style="vertical-align: inherit;">, l'</font></strong><font style="vertical-align: inherit;"> eau se comporte diff√©remment</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> je mentionnerai souvent les </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flux</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pools</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">L'hypoth√®se est faite dans le mod√®le qu'il s'agit de ph√©nom√®nes bidimensionnels √† grande √©chelle. </font><font style="vertical-align: inherit;">Ils r√©duisent consid√©rablement la complexit√© du mod√®le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart des ph√©nom√®nes g√©ographiques ci-dessus peuvent √™tre transmis √† l'aide du mod√®le des √©coulements et des bassins. </font><font style="vertical-align: inherit;">Id√©alement, ils devraient emprunter et am√©liorer le r√©alisme d'un syst√®me √† base de particules.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mod√®le hydrologique simplifi√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le stockage d'informations sur les flux et les pools dans une ou plusieurs structures de donn√©es (graphiques, objets, etc.) est trop compliqu√© et limite nos capacit√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, notre mod√®le hydrologique se compose de deux cartes: les </font><strong><font style="vertical-align: inherit;">cartes de </font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©bit</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cartes de bassin</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'oubliez pas qu'ils sont mod√©lis√©s comme des syst√®mes 2D.</font></font></blockquote><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartes de flux et de piscine</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carte des flux d√©crit l'eau qui coule √† la surface (ruisseaux et rivi√®res). </font><font style="vertical-align: inherit;">Il stocke la position moyenne des particules dans le temps sur la carte. </font><font style="vertical-align: inherit;">Les anciennes informations sont lentement supprim√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carte du bassin d√©crit l'eau plate √† la surface (flaques d'eau, √©tangs, lacs, oc√©ans). </font><font style="vertical-align: inherit;">Il stocke la profondeur de l'eau dans la position correspondante de la carte.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque: les</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cartes de flux et de pool sont des tableaux de la m√™me taille que la carte de hauteur.</font></font></blockquote><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/869/209/77f/86920977ff555d0cf5a2e0a923d79207.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relief √† impact hydrologique. </font><font style="vertical-align: inherit;">La couche d'eau dans le rendu est tir√©e de cartes hydrologiques.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0f1/2a1/1c2/0f12a11c2164cc93995a9f5599b1a7a9.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartes hydrologiques combin√©es. </font><font style="vertical-align: inherit;">Le bleu clair est une carte du cours d'eau; le bleu fonc√© est une carte de la piscine. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces cartes sont g√©n√©r√©es et reli√©es par des particules d√©pla√ßant l'eau le long du terrain. </font><font style="vertical-align: inherit;">L'ajout de ces cartes hydrologiques nous donne √©galement des informations ind√©pendantes du temps qui permettent l'interaction des particules avec leur simulation s√©par√©ment. </font><font style="vertical-align: inherit;">Les particules peuvent interagir gr√¢ce √† l'utilisation de ces cartes pour obtenir des param√®tres qui affectent leur mouvement. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la carte du flux s'affiche apr√®s avoir travers√© la fonction de facilit√© d'entr√©e et de sortie et est rendue sur le terrain en fonction de cela. </font><font style="vertical-align: inherit;">Pour obtenir des d√©bits plus fins / plus nets (ou pour ignorer des valeurs plus faibles sur de grandes surfaces planes), cet affichage peut √™tre modifi√© ou d√©finir des valeurs de seuil pour lui.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'eau en tant que particule</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'eau se pr√©sente sous la forme d'une masse discr√®te (¬´particules¬ª) ayant un volume et se d√©pla√ßant le long de la surface du relief. </font><font style="vertical-align: inherit;">Il a plusieurs param√®tres qui affectent son mouvement (frottement, vitesse d'√©vaporation, vitesse de d√©p√¥t, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit de la structure de donn√©es de base utilis√©e pour simuler l'hydrologie. </font><font style="vertical-align: inherit;">Les particules </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont </font><strong><font style="vertical-align: inherit;">pas stock√©es</font></strong><font style="vertical-align: inherit;"> , mais sont utilis√©es uniquement pour l'interaction entre les cartes des hauteurs, des flux et des piscines. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note: le</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> concept d'une particule est expliqu√©e plus en </font><font style="vertical-align: inherit;">d√©tail dans un pr√©c√©dent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traduction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur Habr√©] (et un nombre infini d'autres ressources).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cycle hydrologique et interaction cartographique</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les cartes interagissent les unes avec les autres √† travers un cycle hydrologique. </font><font style="vertical-align: inherit;">Le cycle hydrologique comprend les √©tapes suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'une particule sur le terrain</font></font></li>
<li><strong></strong>        (.. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">     </a>).</li>
<li>        ,                  <strong></strong>.</li>
<li>  ,           <strong></strong>.</li>
<li> ,     (    )      .</li>
<li>     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans tout le syst√®me, il n'y a que deux algorithmes: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descend (descente)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flood (inondation)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les particules descendantes changent la carte des √©coulements et les particules inondantes changent la carte des bassins. </font><font style="vertical-align: inherit;">Ces algorithmes sont d√©crits en d√©tail ci-dessous.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/989/a81/2cb/989a812cb5d769edbb76fd5a284d18b1.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagramme unidimensionnel du mod√®le hydrologique. </font><font style="vertical-align: inherit;">Les particules sont cr√©√©es sur le terrain et trait√©es cycliquement par deux algorithmes: Descend et Flood. </font><font style="vertical-align: inherit;">Au cours du processus, les cartes des bassins et des flux changent, affectant √† leur tour le mouvement des particules.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la mise en oeuvre</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-dessous, je vais expliquer la mise en ≈ìuvre compl√®te du syst√®me utilis√© pour g√©n√©rer les r√©sultats et pr√©senter des exemples de code. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> je n'afficherai que les √©l√©ments de code pertinents. </font><font style="vertical-align: inherit;">Plus d'informations peuvent √™tre trouv√©es dans le r√©f√©rentiel sur Github. </font><font style="vertical-align: inherit;">Toutes les parties pertinentes du code se trouvent dans le fichier ¬´water.h¬ª.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classe de particules</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La structure de la particule Drop est identique √† la structure du syst√®me pr√©c√©dent. </font><font style="vertical-align: inherit;">Descend et flood sont d√©sormais membres de la structure car ils n'agissent que sur une seule particule √† la fois.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Drop</span>{</span><font></font>
  <font></font>
  <span class="hljs-comment">//... constructors</span><font></font>
<font></font>
  <span class="hljs-keyword">int</span> index;                         <span class="hljs-comment">//Flat Array Index</span>
  glm::vec2 pos;                     <span class="hljs-comment">//2D Position</span>
  glm::vec2 speed = glm::vec2(<span class="hljs-number">0.0</span>);
  <span class="hljs-keyword">double</span> volume = <span class="hljs-number">1.0</span>;
  <span class="hljs-keyword">double</span> sediment = <span class="hljs-number">0.0</span>;<font></font>
<font></font>
  <span class="hljs-comment">//... parameters</span>
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> volumeFactor = <span class="hljs-number">100.0</span>; <span class="hljs-comment">//"Water Deposition Rate"</span><font></font>
<font></font>
  <span class="hljs-comment">//Hydrological Cycle Functions</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">descend</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* h, <span class="hljs-keyword">double</span>* stream, <span class="hljs-keyword">double</span>* pool, <span class="hljs-keyword">bool</span>* track, glm::ivec2 dim, <span class="hljs-keyword">double</span> scale)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">flood</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* h, <span class="hljs-keyword">double</span>* pool, glm::ivec2 dim)</span></span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un param√®tre suppl√©mentaire est le facteur de volume, qui d√©termine comment les inondations transf√®rent le volume au niveau de l'eau.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithme de descente</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme de descente est presque le m√™me que l'algorithme d'√©rosion des particules simple. </font><font style="vertical-align: inherit;">Il re√ßoit une ¬´piste¬ª d'entr√©e suppl√©mentaire - un tableau dans lequel il √©crit toutes les positions visit√©es par lui. </font><font style="vertical-align: inherit;">Un tableau est n√©cessaire pour cr√©er des cartes de flux plus tard.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Drop::descend</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* h, <span class="hljs-keyword">double</span>* stream, <span class="hljs-keyword">double</span>* pool, <span class="hljs-keyword">bool</span>* track, glm::ivec2 dim, <span class="hljs-keyword">double</span> scale)</span></span>{<font></font>
<font></font>
  glm::ivec2 ipos; <font></font>
<font></font>
  <span class="hljs-keyword">while</span>(volume &gt; minVol){<font></font>
<font></font>
    ipos = pos; <span class="hljs-comment">//Initial Position</span>
    <span class="hljs-keyword">int</span> ind = ipos.x*dim.y+ipos.y; <span class="hljs-comment">//Flat Array Index</span><font></font>
<font></font>
    <span class="hljs-comment">//Register Position</span>
    track[ind] = <span class="hljs-literal">true</span>;<font></font>
<font></font>
    <span class="hljs-comment">//...</span><font></font>
  }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble des param√®tres est modifi√© par les cartes de flux et de pool:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//...</span>
  <span class="hljs-comment">//Effective Parameter Set</span>
  <span class="hljs-keyword">double</span> effD = depositionRate;
  <span class="hljs-keyword">double</span> effF = friction*(<span class="hljs-number">1.0</span><span class="hljs-number">-0.5</span>*stream[ind]);
  <span class="hljs-keyword">double</span> effR = evapRate*(<span class="hljs-number">1.0</span><span class="hljs-number">-0.2</span>*stream[ind]);
<span class="hljs-comment">//...</span></code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j'ai d√©couvert qu'un tel changement de param√®tre fonctionne bien.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le syst√®me pr√©c√©dent, les particules pouvaient sortir de ce cycle et √™tre d√©truites uniquement avec une √©vaporation compl√®te ou d√©passant les limites du relief. </font><font style="vertical-align: inherit;">Maintenant, deux conditions de sortie suppl√©mentaires ont √©t√© ajout√©es ici:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//... nind is the next position after moving the particle</span><font></font>
  <font></font>
  <span class="hljs-comment">//Out-Of-Bounds</span>
  <span class="hljs-keyword">if</span>(!glm::all(glm::greaterThanEqual(pos, glm::vec2(<span class="hljs-number">0</span>))) ||<font></font>
     !glm::all(glm::lessThan((glm::ivec2)pos, dim))){<font></font>
       volume = <span class="hljs-number">0.0</span>;
       <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//Slow-Down</span>
  <span class="hljs-keyword">if</span>(stream[nind] &gt; <span class="hljs-number">0.5</span> &amp;&amp; length(acc) &lt; <span class="hljs-number">0.01</span>)
    <span class="hljs-keyword">break</span>;<font></font>
<font></font>
  <span class="hljs-comment">//Enter Pool</span>
  <span class="hljs-keyword">if</span>(pool[nind] &gt; <span class="hljs-number">0.0</span>)
    <span class="hljs-keyword">break</span>;<font></font>
<font></font>
<span class="hljs-comment">//...</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la particule n'a pas une acc√©l√©ration suffisante et est entour√©e par d'autres particules, ou p√©n√®tre directement dans la piscine, alors elle termine pr√©matur√©ment la descente avec tout son volume restant et proc√®de √† l'algorithme d'inondation.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque: la</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> condition de d√©bordement r√©initialise √©galement le volume afin que les particules ne passent pas √† l'algorithme d'inondation.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithme d'inondation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une particule avec le volume restant peut d√©border de sa position actuelle. Cela se produit s'il cesse de descendre (il n'y a pas d'acc√©l√©ration) ou entre dans un pool existant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme d'inondation transf√®re le volume de la particule √† l'augmentation du niveau de l'eau, changeant la carte du bassin. La technique consiste √† augmenter progressivement le niveau d'eau d'une fraction du volume des particules en utilisant le ¬´plan d'essai¬ª. √Ä mesure que le niveau de l'eau augmente, le volume des particules diminue.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c28/908/ebc/c28908ebc4f1efee43232578962beed2.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation d'algorithme d'inondation. Le plan d'essai et le niveau d'eau augmentent progressivement, r√©duisant le volume des particules. Si une fuite est d√©tect√©e, le volume restant se d√©place vers le point de fuite pour effectuer la descente.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√Ä chaque √©tape, nous effectuons un remplissage √† partir de la position de la particule (c'est-√†-dire, v√©rifions r√©cursivement les positions des voisins), en ajoutant toutes les positions situ√©es au-dessus du plan d'origine (niveau actuel de l'eau) et en dessous du plan de test au "set d'inondation". C'est la zone de relief qui fait partie de la piscine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant le remplissage, nous v√©rifions les fuites. Ce sont des points de l'ensemble des inondations qui sont en dessous du plan de test ET du plan d'origine. Si nous trouvons plusieurs points de fuite, nous s√©lectionnons le plus bas.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Drop::flood</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* height, <span class="hljs-keyword">double</span>* pool, glm::ivec2 dim)</span></span>{<font></font>
<font></font>
  index = (<span class="hljs-keyword">int</span>)pos.x*dim.y + (<span class="hljs-keyword">int</span>)pos.y;
  <span class="hljs-keyword">double</span> plane = height[index] + pool[index];  <span class="hljs-comment">//Testing Plane</span>
  <span class="hljs-keyword">double</span> initialplane = plane;                 <span class="hljs-comment">//Water Level</span><font></font>
<font></font>
  <span class="hljs-comment">//Flood Set</span>
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-built_in">set</span>;
  <span class="hljs-keyword">int</span> fail = <span class="hljs-number">10</span>; <span class="hljs-comment">//Just in case...</span><font></font>
<font></font>
  <span class="hljs-comment">//Iterate while particle still has volume</span>
  <span class="hljs-keyword">while</span>(volume &gt; minVol &amp;&amp; fail){<font></font>
<font></font>
    <span class="hljs-built_in">set</span>.clear();
    <span class="hljs-keyword">bool</span> tried[dim.x*dim.y] = {<span class="hljs-literal">false</span>};<font></font>
<font></font>
    <span class="hljs-comment">//Lowest Drain</span>
    <span class="hljs-keyword">int</span> drain;
    <span class="hljs-keyword">bool</span> drainfound = <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-comment">//Recursive Flood-Fill Function</span>
    <span class="hljs-built_in">std</span>::function&lt;<span class="hljs-keyword">void</span>(<span class="hljs-keyword">int</span>)&gt; fill = [&amp;](<span class="hljs-keyword">int</span> i){<font></font>
<font></font>
      <span class="hljs-comment">//Out of Bounds</span>
      <span class="hljs-keyword">if</span>(i/dim.y &gt;= dim.x || i/dim.y &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">if</span>(i%dim.y &gt;= dim.y || i%dim.y &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Position has been tried</span>
      <span class="hljs-keyword">if</span>(tried[i]) <span class="hljs-keyword">return</span>;<font></font>
      tried[i] = <span class="hljs-literal">true</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Wall / Boundary of the Pool</span>
      <span class="hljs-keyword">if</span>(plane &lt; height[i] + pool[i]) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Drainage Point</span>
      <span class="hljs-keyword">if</span>(initialplane &gt; height[i] + pool[i]){<font></font>
<font></font>
        <span class="hljs-comment">//No Drain yet</span>
        <span class="hljs-keyword">if</span>(!drainfound)<font></font>
          drain = i;<font></font>
<font></font>
        <span class="hljs-comment">//Lower Drain</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( pool[drain] + height[drain] &lt; pool[i] + height[i] )<font></font>
          drain = i;<font></font>
<font></font>
        drainfound = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">//No need to flood from here</span><font></font>
      }<font></font>
<font></font>
      <span class="hljs-comment">//Part of the Pool</span>
      <span class="hljs-built_in">set</span>.push_back(i);<font></font>
      fill(i+dim.y);    <span class="hljs-comment">//Fill Neighbors</span><font></font>
      fill(i-dim.y);<font></font>
      fill(i+<span class="hljs-number">1</span>);<font></font>
      fill(i<span class="hljs-number">-1</span>);<font></font>
      fill(i+dim.y+<span class="hljs-number">1</span>);  <span class="hljs-comment">//Diagonals (Improves Drainage)</span>
      fill(i-dim.y<span class="hljs-number">-1</span>);<font></font>
      fill(i+dim.y<span class="hljs-number">-1</span>);<font></font>
      fill(i-dim.y+<span class="hljs-number">1</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">//Perform Flood</span><font></font>
    fill(index);<font></font>
<font></font>
    <span class="hljs-comment">//...</span></code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour plus de simplicit√©, un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algorithme de remplissage √†</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> huit </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">voies</font></a><font style="vertical-align: inherit;"> est utilis√© ici </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">√Ä l'avenir, il sera possible de le mettre en ≈ìuvre plus efficacement.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir identifi√© les nombreux points d'inondation et de fuite, nous modifions le niveau d'eau et la carte de la piscine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si un point de fuite est trouv√©, nous d√©pla√ßons la particule (et son volume de ¬´d√©bordement¬ª) au point de fuite afin qu'elle puisse recommencer √† descendre. </font><font style="vertical-align: inherit;">Ensuite, le niveau d'eau descend jusqu'√† la hauteur du point de fuite.</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-comment">//...</span><font></font>
<font></font>
    <span class="hljs-comment">//Drainage Point</span>
    <span class="hljs-keyword">if</span>(drainfound){<font></font>
<font></font>
      <span class="hljs-comment">//Set the Particle Position</span><font></font>
      pos = glm::vec2(drain/dim.y, drain%dim.y);<font></font>
<font></font>
      <span class="hljs-comment">//Set the New Waterlevel (Slowly)</span>
      <span class="hljs-keyword">double</span> drainage = <span class="hljs-number">0.001</span>;<font></font>
      plane = (<span class="hljs-number">1.0</span>-drainage)*initialplane + drainage*(height[drain] + pool[drain]);<font></font>
<font></font>
      <span class="hljs-comment">//Compute the New Height</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; s: <span class="hljs-built_in">set</span>) <span class="hljs-comment">//Iterate over Set</span>
        pool[s] = (plane &gt; height[s])?(plane-height[s]):<span class="hljs-number">0.0</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Remove some sediment</span>
      sediment *= <span class="hljs-number">0.1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//...</span></code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lorsque le niveau d'eau diminue en raison d'une fuite, j'ai d√©couvert que cela fonctionne mieux avec un faible taux de fuite. </font><font style="vertical-align: inherit;">De plus, l'√©limination d'une partie des roches s√©dimentaires facilite la mise en ≈ìuvre.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cette raison, les nouvelles particules entrant dans la piscine remplie d√©placent instantan√©ment leur volume vers le point de fuite, car l'ajout de volume √† la piscine en d√©place le m√™me volume. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le point de fuite n'est pas trouv√©, nous calculons le volume sous le plan de test et le comparons avec le volume de la particule. </font><font style="vertical-align: inherit;">Si elle est inf√©rieure, nous retirons le volume de la particule et ajustons le niveau d'eau. </font><font style="vertical-align: inherit;">Puis l'avion d'essai monte. </font><font style="vertical-align: inherit;">S'il est plus grand, le plan de test est abaiss√©. </font><font style="vertical-align: inherit;">Le processus est r√©p√©t√© jusqu'√† ce que la particule manque d'espace ou qu'un point de fuite soit trouv√©.</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-comment">//...</span><font></font>
<font></font>
    <span class="hljs-comment">//Get Volume under Plane</span>
    <span class="hljs-keyword">double</span> tVol = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; s: <span class="hljs-built_in">set</span>)<font></font>
      tVol += volumeFactor*(plane - (height[s]+pool[s]));<font></font>
<font></font>
    <span class="hljs-comment">//We can partially fill this volume</span>
    <span class="hljs-keyword">if</span>(tVol &lt;= volume &amp;&amp; initialplane &lt; plane){<font></font>
<font></font>
      <span class="hljs-comment">//Raise water level to plane height</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; s: <span class="hljs-built_in">set</span>)<font></font>
        pool[s] = plane - height[s];<font></font>
<font></font>
      <span class="hljs-comment">//Adjust Drop Volume</span><font></font>
      volume -= tVol;<font></font>
      tVol = <span class="hljs-number">0.0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//Plane was too high and we couldn't fill it</span>
    <span class="hljs-keyword">else</span> fail--;<font></font>
<font></font>
    <span class="hljs-comment">//Adjust Planes</span>
    <span class="hljs-keyword">float</span> approach = <span class="hljs-number">0.5</span>;<font></font>
    initialplane = (plane &gt; initialplane)?plane:initialplane;<font></font>
    plane += approach*(volume-tVol)/(<span class="hljs-keyword">double</span>)<span class="hljs-built_in">set</span>.size()/volumeFactor;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//Couldn't place the volume (for some reason)- so ignore this drop.</span>
  <span class="hljs-keyword">if</span>(fail == <span class="hljs-number">0</span>)<font></font>
    volume = <span class="hljs-number">0.0</span>;<font></font>
<font></font>
} <span class="hljs-comment">//End of Flood Algorithm</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La hauteur de l'avion est ajust√©e proportionnellement √† la diff√©rence de volumes mise √† l'√©chelle par la surface de la piscine (c'est-√†-dire par la taille de l'ensemble). </font><font style="vertical-align: inherit;">En utilisant le coefficient de proximit√©, vous pouvez augmenter la stabilit√© de la fa√ßon dont l'avion atteint le niveau d'eau correct.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enveloppe d'√©rosion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La classe mondiale contient les trois cartes sous la forme de tableaux ordinaires:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">World</span> {</span><font></font>
<font></font>
<span class="hljs-keyword">public</span>:
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">generate</span><span class="hljs-params">()</span></span>;            <span class="hljs-comment">//Initialize</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">erode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> cycles)</span></span>;     <span class="hljs-comment">//Erode with N Particles</span><font></font>
<font></font>
  <span class="hljs-comment">//...</span><font></font>
<font></font>
  <span class="hljs-keyword">double</span> heightmap[<span class="hljs-number">256</span>*<span class="hljs-number">256</span>] = {<span class="hljs-number">0.0</span>};
  <span class="hljs-keyword">double</span> waterstream[<span class="hljs-number">256</span>*<span class="hljs-number">256</span>] = {<span class="hljs-number">0.0</span>};
  <span class="hljs-keyword">double</span> waterpool[<span class="hljs-number">256</span>*<span class="hljs-number">256</span>] = {<span class="hljs-number">0.0</span>};<font></font>
<font></font>
};</code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la carte de hauteur est initialis√©e √† l'aide du bruit Perlin.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque √©tape hydrologique pour une particule individuelle comprend les √©l√©ments suivants:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//...</span><font></font>
<font></font>
<span class="hljs-comment">//Spawn Particle</span>
glm::vec2 newpos = glm::vec2(rand()%(<span class="hljs-keyword">int</span>)dim.x, rand()%(<span class="hljs-keyword">int</span>)dim.y);
<span class="hljs-function">Drop <span class="hljs-title">drop</span><span class="hljs-params">(newpos)</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">int</span> spill = <span class="hljs-number">5</span>;
<span class="hljs-keyword">while</span>(drop.volume &gt; drop.minVol &amp;&amp; spill != <span class="hljs-number">0</span>){<font></font>
<font></font>
  drop.descend(heightmap, waterstream, waterpool, track, dim, scale);<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(drop.volume &gt; drop.minVol)<font></font>
    drop.flood(heightmap, waterpool, dim);<font></font>
<font></font>
  spill--;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//...</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le param√®tre de d√©versement d√©termine combien de fois une particule peut entrer dans la piscine et la quitter √† nouveau avant d'√™tre simplement d√©truite. </font><font style="vertical-align: inherit;">Sinon, les particules meurent lorsque leur volume est √©puis√©.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque: les</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> particules p√©n√®trent rarement dans les piscines et les quittent plus d'une ou deux fois avant de s'√©vaporer compl√®tement pendant les √©tapes de descente, mais j'ai ajout√© cela juste au cas o√π.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonction d'√©rosion enveloppe ce code et effectue des √©tapes hydrologiques pour les particules de N, changeant directement la carte d'√©coulement:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">World::erode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> N)</span></span>{<font></font>
<font></font>
  <span class="hljs-comment">//Track the Movement of all Particles</span>
  <span class="hljs-keyword">bool</span> track[dim.x*dim.y] = {<span class="hljs-literal">false</span>};<font></font>
<font></font>
  <span class="hljs-comment">//Simulate N Particles</span>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++){<font></font>
   <font></font>
    <span class="hljs-comment">//... simulate individual particle</span><font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//Update Path</span>
  <span class="hljs-keyword">double</span> lrate = <span class="hljs-number">0.01</span>;  <span class="hljs-comment">//Adaptation Rate</span>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dim.x*dim.y; i++)<font></font>
    waterstream[i] = (<span class="hljs-number">1.0</span>-lrate)*waterstream[i] + lrate*((track[i])?<span class="hljs-number">1.0</span>:<span class="hljs-number">0.0</span>);<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, le r√©seau de pistes est transmis √† la fonction de descente. </font><font style="vertical-align: inherit;">J'ai trouv√© que le suivi simultan√© du mouvement de plusieurs particules et des changements correspondants fournit de meilleurs r√©sultats pour la carte de flux. </font><font style="vertical-align: inherit;">Le taux d'adaptation d√©termine la rapidit√© avec laquelle les anciennes informations sont supprim√©es.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des arbres</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juste pour le plaisir, j'ai ajout√© des arbres pour voir si la simulation d'√©rosion pourrait √™tre encore am√©lior√©e. </font><font style="vertical-align: inherit;">Ils sont stock√©s dans la classe mondiale comme vecteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les arbres sont cr√©√©s au hasard sur la carte dans des endroits o√π il n'y a pas de mares et de forts courants, et le terrain n'est pas tr√®s raide. </font><font style="vertical-align: inherit;">Ils ont √©galement la possibilit√© de cr√©er des arbres suppl√©mentaires autour d'eux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En train de cr√©er des arbres, ils √©crivent sur la carte de densit√© de la v√©g√©tation dans un certain rayon autour d'eux. </font><font style="vertical-align: inherit;">Une densit√© de v√©g√©tation √©lev√©e r√©duit le transfert de masse entre les particules descendantes et la topographie. </font><font style="vertical-align: inherit;">Il s'agit de simuler la fa√ßon dont les racines maintiennent le sol en place.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//... descend function</span>
<span class="hljs-keyword">double</span> effD = depositionRate*max(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>-treedensity[ind]);
<span class="hljs-comment">//...</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les arbres meurent s'ils sont dans la piscine ou si le ruisseau en dessous est trop puissant. </font><font style="vertical-align: inherit;">De plus, ils ont une probabilit√© de d√©c√®s al√©atoire.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/trees.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr√¢ce √† l'ombrage et aux cartes normales, m√™me des sprites d'arbres tr√®s simples rendent le relief plus beau.</font></font></i><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le mod√®le d'arbre se trouve dans le fichier "v√©g√©tation.h" et dans la fonction "World :: grow ()".</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autres d√©tails</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©sultats sont visualis√©s √† l'aide d'un wrapper OpenGL fait maison, qui est pr√©sent√© [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ].</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les particules peuvent √™tre cr√©√©es sur la carte en fonction de la distribution dont vous avez besoin. </font><font style="vertical-align: inherit;">Dans mes d√©mos, je les ai cr√©√©es avec une distribution uniforme sur 256 √ó 256 cartes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme on peut le voir ci-dessous, la simulation r√©sultante d√©pend fortement du choix du relief d'origine. </font><font style="vertical-align: inherit;">Le syst√®me est capable de simuler un grand nombre de ph√©nom√®nes naturels. </font><font style="vertical-align: inherit;">Je ne pouvais pas obtenir correctement que des canyons. </font><font style="vertical-align: inherit;">Ils peuvent avoir besoin d'une simulation tr√®s longue et lente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'autres ph√©nom√®nes peuvent √™tre observ√©s dans le syst√®me, tels que les cascades, la tortuosit√© et les deltas des rivi√®res, les lacs, le gonflement des sols, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me est √©galement tr√®s bon pour distribuer les d√©bits et les piscines dans les endroits o√π beaucoup de pluie s'accumule, et non dans des endroits al√©atoires. </font><font style="vertical-align: inherit;">Par cons√©quent, l'hydrologie g√©n√©r√©e est √©troitement li√©e au terrain.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/rivererosion.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulation hydrologique en temps r√©el sur une grille 256 √ó 256. </font><font style="vertical-align: inherit;">Le relief d'origine est relativement lisse, ce qui permet aux flux d'appara√Ætre rapidement. </font><font style="vertical-align: inherit;">Au tout d√©but, on peut observer la cr√©ation la plus simple de piscines et de fuites, apr√®s quoi des flux importants apparaissent et subsistent.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparaison des effets de r√©tr√©cissement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour comparer la diff√©rence cr√©√©e en reliant une carte √† un syst√®me d'√©rosion, vous pouvez simuler l'hydrologie sur la m√™me carte, en incluant et en d√©sactivant diff√©rents effets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai simul√© le m√™me terrain trois fois:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ârosion √† base de particules (√©rosion de base) qui re√ßoit des cartes de d√©bit et de pool. </font><font style="vertical-align: inherit;">Les pools affectent toujours la g√©n√©ration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'√©rosion de base avec des param√®tres modifi√©s par des cartes hydrologiques (en combinaison avec l'√©rosion)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ârosion combin√©e avec des param√®tres modifi√©s par les cartes hydrologiques et affectant l'√©rosion par les arbres</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> il s'agit d'un syst√®me plut√¥t chaotique, et le type d'hydrologie qui appara√Æt d√©pend fortement du terrain. </font><font style="vertical-align: inherit;">Il est difficile de trouver un exemple de relief "tr√®s r√©v√©lateur".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39e/e81/65c/39ee8165c1b4a8ca4f8a987e12464de4.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendu en relief du syst√®me de base</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/969/6b2/fc0/9696b2fc03defb56681b7bfff7fa6740.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendu d'√©l√©vation du syst√®me combin√©</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/868/d7f/8bc/868d7f8bcd087c968833ba0a4c99619c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendu de la topographie d'un syst√®me arbor√©</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Une observation int√©ressante: la combinaison de cartes hydrologiques avec des param√®tres de particules r√©tr√©cit en fait les lits des rivi√®res. </font><font style="vertical-align: inherit;">En particulier dans les r√©gions planes, les particules sont moins distribu√©es et fusionnent en une petite quantit√© de flux plus forts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une friction et une √©vaporation r√©duites r√©sistent avec succ√®s au fait que les particules commencent √† pr√©f√©rer les canaux d√©j√† existants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'autres effets sont plus visibles avec l'observation directe du relief.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/acd/d6b/9a5acdd6b7130655c66c716d0b713ec2.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carte hydrologique du syst√®me de base</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5df/f5a/575/5dff5a575ae295091062b6e2153694ff.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carte hydrologique du syst√®me combin√©</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d0/acb/8fa/9d0acb8fa508aa24afab3a5dddacf7a5.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carte hydrologique du syst√®me avec des arbres </font></font></i><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ces r√©sultats ont √©t√© g√©n√©r√©s en exactement 60 secondes du temps de simulation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les arbres affectent √©galement le r√©tr√©cissement. </font><font style="vertical-align: inherit;">Ils am√©liorent le processus de d√©coupe de chemins d√©gag√©s dans les zones escarp√©es. </font><font style="vertical-align: inherit;">Ils forcent les ruisseaux √† rester dans les canaux d√©j√† pos√©s, et r√©duisent donc la tortuosit√©. </font><font style="vertical-align: inherit;">Ainsi, l'emplacement des arbres affecte le mouvement de l'eau.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Example_Hydrology2.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un exemple d'enregistrement de la fa√ßon dont l'emplacement des arbres peut aider √† maintenir l'emplacement des cours d'eau. </font><font style="vertical-align: inherit;">C'est le m√™me soulagement qu'auparavant, avec tous les effets activ√©s.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impact de la piscine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me de cr√©ation de piscines fonctionne bien et permet √† plusieurs plans d'eau de hauteurs diff√©rentes d'exister sur le m√™me relief. </font><font style="vertical-align: inherit;">Ils peuvent √©galement se renverser et se vider.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Pooling-1.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un exemple d'une vid√©o de la formation de piscines sur un relief de base plus rugueux avec une grande diff√©rence d'altitude. </font><font style="vertical-align: inherit;">Le lac sup√©rieur est physiquement situ√© au-dessus du lac inf√©rieur et rejette l'eau r√©sultante directement dans le lac inf√©rieur.</font></font></i><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j'ai obtenu plusieurs graines, dans lesquelles trois lacs se sont coul√©s les uns dans les autres de mani√®re s√©quentielle, mais je n'ai pas voulu passer beaucoup de temps √† trouver la bonne pour cet article. </font><font style="vertical-align: inherit;">J'ai d√©j√† g√©n√©r√© trop de photos et de vid√©os.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De temps en temps, le niveau de la piscine saute. </font><font style="vertical-align: inherit;">Je pense que cela se produit lorsque le niveau d'eau est proche du niveau de fuite et que beaucoup d'eau est ajout√©e. </font><font style="vertical-align: inherit;">Cet effet peut √™tre r√©duit en r√©duisant le taux de fuite dans la fonction d'inondation.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/475/469/f09/475469f09d224928863b2b2eaf48cfb8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s une autre minute de g√©n√©ration, plusieurs nouveaux pools sont apparus d'eux-m√™mes.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78a/36c/76e/78a36c76ed90db36cae64c47376fc585.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä un angle plus prononc√©, la diff√©rence de hauteur de bassin est plus visible.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac8/bd1/897/ac8bd18976e9cb06bd8d6d1fffd23667.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La carte hydrologique montre clairement que le bassin central se confond avec le bassin inf√©rieur. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ex√©cution de l'algorithme d'inondation conduit au fait que les piscines voient un "mur" √† la fronti√®re de la carte. </font><font style="vertical-align: inherit;">Cela est visible dans les images ci-dessus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre am√©lioration possible pourrait √™tre l'ajout du niveau de la mer au monde afin que les piscines observent les fuites aux bords de la carte au niveau de la mer, sinon elles d√©bordent simplement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vitesse de simulation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le temps de chaque √©tape de descente et d'inondation varie d'une particule √† l'autre, mais il reste environ un ordre de grandeur (environ 1 microseconde). Avec des flux stables, les particules se d√©placent plus rapidement sur la carte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le temps d'inondation varie proportionnellement √† la taille de la piscine, car l'op√©ration de coul√©e est l'√©tape la plus co√ªteuse. Plus les piscines sont grandes, plus la zone pour laquelle vous devez augmenter le niveau de l'eau est grande. Les grandes piscines sont d√©finitivement le goulot d'√©tranglement du syst√®me. Si vous avez des id√©es pour augmenter la vitesse, faites-le moi savoir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le temps de descente varie proportionnellement √† la taille de la carte et √† de nombreux autres param√®tres, dont le frottement et le taux d'√©vaporation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les vid√©os de cet article sont enregistr√©es en temps r√©el, c'est-√†-dire qu'en g√©n√©ral la simulation est rapide.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peu de temps apr√®s la publication de cet article, j'ai fait un petit changement dans la m√©thode de calcul des normales de surface, ce qui a augment√© la vitesse de simulation. </font><font style="vertical-align: inherit;">L'effet de ceci est tr√®s perceptible pendant la simulation, mais il est difficile de le comparer en raison de grandes variations dans le temps de lancement et d'inondation. </font><font style="vertical-align: inherit;">Selon mes estimations, la vitesse de simulation a doubl√©.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus de belles vid√©os</font></font></h3><br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology1.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simulation d'hydrologie sur terrain vertical irr√©gulier.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology5.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un petit soulagement plus doux. </font><font style="vertical-align: inherit;">Certains lacs se r√©v√®lent un peu fluctuants.</font></font></i><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology3.mp4" type="video/mp4"></video></div></div></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulation d'hydrologie sur un terrain plat et lisse. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les vid√©os suivantes ont √©t√© enregistr√©es apr√®s l'am√©lioration de la vitesse.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology10.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terrain encore plus plat et plus lisse.</font></font></i><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology7.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vid√©o avec une rivi√®re form√©e de plusieurs ruisseaux connect√©s. </font><font style="vertical-align: inherit;">Le fleuve principal a deux points auxquels il incorpore des d√©bits plus petits, et nous voyons comment il grandit.</font></font></i><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre navigateur ne prend pas en charge la vid√©o HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology9.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un relief plus in√©gal avec la formation de rivi√®res. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je peux continuer ind√©finiment.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion et travaux pour l'avenir</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette technique simple est toujours bas√©e sur des particules, mais elle r√©ussit √† transmettre de nombreux effets suppl√©mentaires. Il fournit un moyen facile de simuler le mouvement de l'eau √† grande √©chelle sans simuler compl√®tement la dynamique des fluides. De plus, elle travaille avec un mod√®le d'eau intuitif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les simulations, nous pouvons observer l'√©mergence de rivi√®res sinueuses, de cascades, de lacs et de transfusions de lacs, de rivi√®res qui se divisent en zones plates en deltas, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il serait int√©ressant d'ajouter diff√©rents types de sols sous la forme d'une carte des sols √† partir de laquelle les param√®tres d'√©rosion pourraient √™tre tir√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement facilement changer le syst√®me d'arbres pour cr√©er diff√©rents types d'arbres qui maintiennent le sol en place.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est difficile de transmettre la vari√©t√© des r√©sultats g√©n√©r√©s dans plusieurs photos et vid√©os, vous devriez donc essayer de le faire vous-m√™me, cela s'av√®re tr√®s int√©ressant. </font><font style="vertical-align: inherit;">Je recommande d'exp√©rimenter avec les param√®tres de la carte d'origine, y compris le bruit d'octave et l'√©chelle de la carte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez des questions ou des commentaires, vous pouvez me contacter. </font><font style="vertical-align: inherit;">J'ai travaill√© assez dur sur ce projet, donc mon cerveau frittait et je suis s√ªr que j'ai rat√© certains aspects int√©ressants.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498278/index.html">Editeur Peter. Soldes de printemps</a></li>
<li><a href="../fr498280/index.html">L'histoire de l'oiseau Dodo du genre Phoenix. La grande chute de Dodo EST</a></li>
<li><a href="../fr498282/index.html">[instruction] Cr√©ation d'un compte et d'un site sur la plateforme Google Site</a></li>
<li><a href="../fr498284/index.html">Comment optimiser l'apprentissage de l'anglais</a></li>
<li><a href="../fr498288/index.html">Votre ville a besoin d'un bus de m√©tro</a></li>
<li><a href="../fr498292/index.html">√âconomisez beaucoup d'argent sur de gros volumes dans PostgreSQL</a></li>
<li><a href="../fr498294/index.html">D√©tection d'objets Reconnaissez et r√©gnez. Partie 1</a></li>
<li><a href="../fr498296/index.html">Conception au niveau du syst√®me. Partie 1. De l'id√©e au syst√®me</a></li>
<li><a href="../fr498298/index.html">Les entreprises utilisent des primes de bogue pour acheter le silence des pirates</a></li>
<li><a href="../fr498300/index.html">Blitz.Engine: Asset System</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>