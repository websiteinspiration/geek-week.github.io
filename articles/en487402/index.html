<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üâë üëÑ üññüèø Gas flow regulator 5 times cheaper than commercial solutions üåΩ üöâ üôèüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gas flow controllers (RRG) are designed to maintain a user-defined flow rate. RWGs are used in industry and research laboratories to organize the supp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gas flow regulator 5 times cheaper than commercial solutions</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487402/"><img src="https://habrastorage.org/webt/-h/ul/-l/-hul-lbhy5ca5cfsciofuph5xte.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gas flow controllers (RRG) are designed to maintain a user-defined flow rate. RWGs are used in industry and research laboratories to organize the supply of gas from cylinders and highways. The devices of Eltochpribor, MKS, Bronkhorst, etc. are represented on the market. The cost of such devices is 1000-2500 USD. The aim of this work is to create a gas flow regulator from more accessible components. The idea is to organize a feedback system that includes a proportional valve and a flow meter. Below is a brief description of the hardware and software of the system, which allows reproducing it to everyone who uses the RRG in their activities. All source codes are available on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We used SMC products, PVQ series valves and PFM5 series flow meters without indication. </font><font style="vertical-align: inherit;">Two RWGs were assembled with adjustable flow ranges of 0.2-5 L / min (PVQ13 + PFM510) and 1-50 L / min (PVQ31 + PFM550), shown in the figure. </font><font style="vertical-align: inherit;">The cost of one flow regulator can be estimated from above as 100 USD (PVQ31 valve) + 80 USD (PFM5 meter) + 20 USD (Arduino Nano microcontroller, power supply and radio components) = 200 USD. </font><font style="vertical-align: inherit;">Everything described below applies to the RWG 1-50 l / min. </font><font style="vertical-align: inherit;">Creating a regulator 0.2-5 l / min, as well as any other regulators from similar components follows the same scheme, but may differ in minor details.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware</font></font></h4><br>
<img src="https://habrastorage.org/webt/ij/he/sy/ijhesyjtgz47jzjpquizlets53e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The hardware is shown in the figure and consists of:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proportional Valve PVQ31 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PFM550 flow meter </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filter </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power supply unit (24V, 1A) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Current control circuits </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Nano microcontroller and its power schemes </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/7t/3n/hc/7t3nhc2fexnzhtff08igsq7gw9q.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The electrical connection diagram of the components is shown in the figure. </font><font style="vertical-align: inherit;">To power the circuit, a 24 V, 1 A DC source is used, which is more than enough, given the valve consumption of less than 200 mA and a meter of less than 35 mA. </font><font style="vertical-align: inherit;">The PVQ Series Proportional Valves are current controlled. </font><font style="vertical-align: inherit;">In accordance with the documentation, it is not recommended to control them by voltage control. </font><font style="vertical-align: inherit;">Current control can be implemented using the circuit discussed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and in more detail </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The current control circuit is highlighted on the general electrical circuit (Fig. 3) by a dashed rectangle. </font><font style="vertical-align: inherit;">PVQ series valves are connected by two power wires: red - DC +, black - DC-.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The current strength is regulated using the PWM signal produced by the analog pin of the microcontroller. By default, ATmega328-based controllers (Arduino UNO / Nano / Pro Mini) generate an 8-bit (0-255) PWM signal at a frequency of 488 or 976 Hz, depending on the pin. Low PWM signal width reduces the accuracy of valve control. Low frequency leads to its buzz. These values ‚Äã‚Äãcan be increased programmatically to 10 bits (0-1023) and 15.6 kHz, respectively. We used a frequency of 7.8 kHz. A description of the commands that need to be inserted into the </font></font><code>setup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino firmware </font><font style="vertical-align: inherit;">function is </font><font style="vertical-align: inherit;">given </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PFM5 series flow meters have 2 signal wires (black - analog output, white - response time setting (not used)) and two power wires (brown - DC +, blue - DC-). Powered by a 24 V DC source. The flow meter gives an analog signal in the range of 1-5 V. A value of 1 V corresponds to a zero gas flow rate, 5 V - the maximum for this meter. According to the documentation, the relationship between flow and voltage is linear. Meanwhile, it seems worthwhile to regularly calibrate the flowmeter. The analog signal from the flow meter (black wire) is received by a 10 bit (0-1023) Arduino analog pin for processing and display. The white wire is designed to set the response time, we do not use it. In this case, the response time is 50 ms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Arduino board should be powered through a 5V pin, the supply voltage should not exceed 5.5 V. Such power can be provided from the valve PSU and flow meter through the L7805 stabilizer, as shown in the diagram (Fig. 3). Most likely you will need a radiator on the stabilizer. Power from the USB port of the computer used during testing (Fig. 2) is not desirable since in this case the reference voltage is unstable when using the ADC. For more information about board power, see </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software part</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The software part consists of the firmware of the Arduino Nano microcontroller and a graphical user interface that runs on a PC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The program downloaded to the microcontroller cyclically performs the following actions:</font></font><br>
<br>
<ol>
<li>       ,   </li>
<li> ,        </li>
<li>   ,               - </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The system can operate in manual and automatic mode. During manual operation, the value of the desired valve opening, expressed by a variable </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023), </font><font style="vertical-align: inherit;">should be sent to the serial port </font><font style="vertical-align: inherit;">. The value of this variable determines the occupancy of the PWM signal, which is sent through the analog output of the microcontroller to the current control circuit and the proportional valve command </font></font><code>analogWrite(valvepin, valve)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. After opening, the valve remains in the set position until a new command is received via the serial port. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To switch to automatic operation, a negative number must be sent to the serial port </font></font><code>-targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Variable value</font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lies in the range 0-1023 and determines the gas flow rate that should be maintained. The actual gas flow rate is determined by the flow meter readings, which are read from the analog input of the microcontroller with a command </font></font><code>realflow = analogRead(fmpin)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023). In automatic mode, the system strives to maintain equality between </font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and by </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlling the proportional valve. The valve opening value is calculated using the proportional-integral-differentiating (PID) controller. You can read about the PID controller </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">GyverPID</font></a><font style="vertical-align: inherit;"> library is used to implement the controller </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with some changes and additions. Since the library has been modified, use the library attached to this code, and not downloaded from the link above. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To use the PID controller, it is necessary to select the coefficients of the proportional </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, integral, </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and differential </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">components, as well as the iteration time </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The value of the variable </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">must be selected depending on the inertia of the system. The more inert the system, the more it should be </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Based on the ratings and test results for the device in question, we chose values </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 100-330 ms. The coefficients </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">are selected at a fixed value</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and significantly depend on the system. </font><font style="vertical-align: inherit;">Recommendations on the selection of coefficients can be found </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, the algorithm cyclically executed by the microcontroller is as follows:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(    )<font></font>
	   <span class="hljs-function">inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &gt;= <span class="hljs-number">0</span> &amp;&amp; inp &lt; <span class="hljs-number">1023</span>)</span>
		  
		    inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &lt;= <span class="hljs-number">0</span> &amp;&amp; inp &gt;= <span class="hljs-number">-1023</span>)</span>
		  
		     -inp 
<span class="hljs-title">if</span><span class="hljs-params">(  &amp;&amp;      dtpid )</span>
	      -
	    
<span class="hljs-title">if</span><span class="hljs-params">(     dt )</span>
	   
	   
	   
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The graphical user interface is written in Python using the PyQt graphical framework. </font><font style="vertical-align: inherit;">The design was created in the Qt Designer program, after which the code of the .ui file was converted into a Python file. </font><font style="vertical-align: inherit;">For an introduction to GUI development and the use of PyQt, see </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The graphical interface interacts with the Arduino firmware via the serial port using the library </font></font><code>pyserial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The Python program does the following:</font></font><br>
<br>
<ol>
<li>      </li>
<li>          ,        ,     </li>
<li>     0-1023,   ,    </li>
<li>  .3     </li>
<li>    ,     ( 0-1023) </li>
<li>  .5            </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The code for connecting to the serial port is borrowed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The module is intended for transferring from user units to the range 0-1023 </font></font><code>units.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This module makes it easy to add new units. </font><font style="vertical-align: inherit;">The user is required to indicate the name of the units and the conversion formula from 0-1023 to the new units. </font><font style="vertical-align: inherit;">The module is provided with detailed comments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data received from the flow meter and output by the microcontroller firmware to the serial port are read from the port by the Python program and, after the units have been converted, are displayed in text and graphical form. </font><font style="vertical-align: inherit;">A library is used to draw a graph of current consumption </font></font><code>pyqtgraph</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">results</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To start working with RRG, you need to: flash the microcontroller, connect the power, run the Python program, establish a connection to the serial port. After that, the user can select the operating mode (manual or automatic) and set the required valve opening value in manual operation mode or the supported flow value in automatic mode. The current gas flow rate is displayed in the corresponding field and displayed on the graph. The graph is updated cyclically, after reaching the specified number of points, the graph is cleared and drawing starts again. The user can select the units used.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/kd/jf/1skdjfks-dwbv2_4bxv5lko9rso.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The figure shows the appearance of the graphical user interface and a graph of the gas flow rate obtained in the automatic mode and showing the switching of the RGG between different values ‚Äã‚Äãof the supported flow rate. </font><font style="vertical-align: inherit;">The results are given in units of 0-1023. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To demonstrate the possibilities of maintaining a constant gas flow rate, we considered the case when the flow rate when the proportional valve is opened by a constant value ‚Äúfloats‚Äù, as shown on the left side of the graph (x &lt;950) in the figure below. </font><font style="vertical-align: inherit;">The result of the operation of the automatic maintenance of the set flow rate can be seen on the right side of the graph (x&gt; 1000). </font><font style="vertical-align: inherit;">Tests showed that the deviation from the set flow rate in the automatic hold mode is no more than 2%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/ni/5w/cgni5wyzma05n_8uxijteltnacu.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarks</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using the Arduino Nano microcontroller is unnecessary since only a small part of its pins is involved. </font><font style="vertical-align: inherit;">On the other hand, it would be better to use microcontrollers with a larger bit capacity of analog inputs / outputs to increase the accuracy of measurement and adjustment. </font><font style="vertical-align: inherit;">When changing the type of microcontroller, it may be necessary to implement your own PID controller; this should not cause difficulties since the algorithm is simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the development stage, the electrical circuit was assembled on a breadboard (see Figure 2). </font><font style="vertical-align: inherit;">For further use, it is necessary to solder the circuit and place it in the housing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The authors of the article are neither electronic engineers nor programmers, therefore, constructive tips for improvement are welcome.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional materials</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The source codes for the Arduino firmware and Python programs, as well as the documentation for the flow meters and proportional valves used, are available on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acknowledgments</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are grateful to our colleagues for the idea of ‚Äã‚Äãthe system implemented in this work. </font><font style="vertical-align: inherit;">AlexGyver and other users generously sharing their experiences for the information we used in our work.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using a feedback system consisting of a proportional valve, a flow meter, and a microcontroller allows you to make RRG to maintain a given gas flow. </font><font style="vertical-align: inherit;">Tests showed a deviation from the required flow rate within less than 2%. </font><font style="vertical-align: inherit;">The cost of the system was less than 200 USD. </font><font style="vertical-align: inherit;">The assembled prototype showed operability in a wide range of conditions. </font><font style="vertical-align: inherit;">Further use may require refinement, including wiring the circuits, manufacturing the case, etc.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en487388/index.html">Natural development: how to move from e-learning to knowledge management</a></li>
<li><a href="../en487390/index.html">Web components without Shadow DOM</a></li>
<li><a href="../en487392/index.html">What does Magnet want to know about its customers?</a></li>
<li><a href="../en487394/index.html">Translation of Andrew Un's book, Passion for Machine Learning, Chapters 34 and 35</a></li>
<li><a href="../en487400/index.html">Master SCADA 4D. Is there life on ARM?</a></li>
<li><a href="../en487404/index.html">GoLang and OpenCV (OpenVino && Cuda)</a></li>
<li><a href="../en487406/index.html">Reverse engineering a home router using binwalk. Do you trust the software of your router?</a></li>
<li><a href="../en487408/index.html">Creation of fault-tolerant IT infrastructure. Part 3. Organization of routing on VyOS routers</a></li>
<li><a href="../en487412/index.html">Friend ORDER BY with indices</a></li>
<li><a href="../en487414/index.html">Computer quests as an awesome tool for learning English words</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>