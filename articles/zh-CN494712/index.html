<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¼ğŸ¿ ğŸ‘¦ğŸ¿ ğŸ« åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨Reacté’©å­çš„5ä¸ªæœ€ä½³å®è·µ ğŸ‘¨ğŸ¾â€ğŸ« ğŸ‘¨ğŸ¿â€ğŸ’» ğŸ•¯ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™ç¯‡æ–‡ç« çš„ä½œè€…ï¼ˆæˆ‘ä»¬ä»Šå¤©è¦ç¿»è¯‘çš„è¯‘æœ¬ï¼‰è¯´ï¼Œcommercetoolsåœ¨2019å¹´åˆ-å½“å®ƒä»¬å‡ºç°åœ¨React 16.8.0ä¸­æ—¶å°±é‡‡ç”¨äº†Reacté’©å­ã€‚ä»é‚£æ—¶èµ·ï¼Œè¯¥å…¬å¸çš„ç¨‹åºå‘˜ä¸€ç›´åœ¨ä¸æ–­å¤„ç†ä»–ä»¬çš„ä»£ç ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºé’©å­ã€‚ReactæŒ‚é’©å…è®¸æ‚¨ä½¿ç”¨ç»„ä»¶çŠ¶æ€å’Œä½¿ç”¨å…¶ä»–ReactåŠŸèƒ½ï¼Œè€Œæ— éœ€ä½¿ç”¨ç±»ã€‚ä½¿ç”¨æŒ‚é’©ï¼Œæ‚¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨Reacté’©å­çš„5ä¸ªæœ€ä½³å®è·µ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/494712/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ç¯‡æ–‡ç« çš„ä½œè€…ï¼ˆæˆ‘ä»¬ä»Šå¤©è¦ç¿»è¯‘çš„è¯‘æœ¬ï¼‰è¯´ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commercetools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨2019å¹´åˆ-å½“å®ƒä»¬å‡ºç°åœ¨React 16.8.0ä¸­æ—¶å°±</font><font style="vertical-align: inherit;">é‡‡ç”¨äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reacté’©å­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä»é‚£æ—¶èµ·ï¼Œè¯¥å…¬å¸çš„ç¨‹åºå‘˜ä¸€ç›´åœ¨ä¸æ–­å¤„ç†ä»–ä»¬çš„ä»£ç ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºé’©å­ã€‚</font><font style="vertical-align: inherit;">ReactæŒ‚é’©å…è®¸æ‚¨ä½¿ç”¨ç»„ä»¶çŠ¶æ€å’Œä½¿ç”¨å…¶ä»–ReactåŠŸèƒ½ï¼Œè€Œæ— éœ€ä½¿ç”¨ç±»ã€‚</font><font style="vertical-align: inherit;">ä½¿ç”¨æŒ‚é’©ï¼Œæ‚¨å¯ä»¥åœ¨ä½¿ç”¨åŠŸèƒ½ç»„ä»¶æ—¶â€œè¿æ¥â€åˆ°ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶å¹¶å“åº”å…¶çŠ¶æ€çš„å˜åŒ–ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/dp/fq/jr/dpfqjrae_1gxg8w2fhzc6izgffa.jpeg"></a><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç®€è¦ä»‹ç»å®ç°é’©å­çš„ç»“æœ</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœè¦è®¨è®ºè¿™äº›é’©å­ç»™æˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆï¼Œé‚£ä¹ˆäº‹å®è¯æ˜ï¼Œå®ƒä»¬é€šè¿‡ä»ç»„ä»¶ä¸­æå–é€»è¾‘å¹¶ä¿ƒè¿›ä¸åŒåŠŸèƒ½çš„ç»„åˆæ¥å¸®åŠ©ç®€åŒ–äº†ä»£ç åº“ã€‚</font><font style="vertical-align: inherit;">è€Œä¸”ï¼Œä½¿ç”¨é’©å­å·²ç»ä½¿æˆ‘ä»¬å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå¦‚ä½•é€šè¿‡ä¸æ–­æ”¹è¿›ç°æœ‰åŠŸèƒ½æ¥æ›´å¥½åœ°æ„å»ºä»£ç ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ç¡®ä¿¡ï¼Œåœ¨ç»§ç»­ä½¿ç”¨Reacté’©å­çš„åŒæ—¶ï¼Œæˆ‘ä»¬å°†å­¦åˆ°æ›´å¤šæœ‰è¶£çš„ä¸œè¥¿ã€‚</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‚é’©å®ç°çš„ä¼˜åŠ¿</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯é’©å­çš„ä»‹ç»ç»™æˆ‘ä»¬çš„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</font><font style="vertical-align: inherit;">ç”±äºä½¿ç”¨äº†æ¯”ä»¥å‰æ›´å°çš„ç»„ä»¶æ ‘ï¼Œå› æ­¤è¿™æ˜¯å¯èƒ½çš„ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¸Œæœ›æ”¾å¼ƒæ¸²æŸ“å±æ€§å’Œæ›´é«˜é˜¶çš„ç»„ä»¶ï¼Œä»è€Œä¿ƒè¿›äº†æ­¤ç±»ç»„ä»¶æ ‘çš„åˆ›å»ºã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¹è¿›ä»£ç è°ƒè¯•åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Reactå¼€å‘äººå‘˜å·¥å…·æä¾›çš„æ”¹è¿›çš„å¯è§†åŒ–ä»£ç è¡¨ç¤ºå½¢å¼å’Œå…¶ä»–è°ƒè¯•ä¿¡æ¯ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¹å–„é¡¹ç›®çš„æ¨¡å—åŒ–ã€‚</font><font style="vertical-align: inherit;">ç”±äºæŒ‚é’©çš„åŠŸèƒ½ç‰¹æ€§ï¼Œç®€åŒ–äº†åˆ›å»ºå’Œåº”ç”¨é€‚åˆé‡å¤ä½¿ç”¨çš„é€»è¾‘çš„è¿‡ç¨‹ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èŒè´£åˆ†ç¦»ã€‚</font><font style="vertical-align: inherit;">Reactç»„ä»¶è´Ÿè´£æ¥å£å…ƒç´ çš„å¤–è§‚ï¼Œå¹¶ä¸”é’©å­æä¾›å¯¹å°è£…ç¨‹åºé€»è¾‘çš„è®¿é—®ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬è¦åˆ†äº«æœ‰å…³åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨é’©å­çš„å»ºè®®ã€‚</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.åŠæ—¶ä»ç»„ä»¶ä¸­æ£€ç´¢é’©å­å¹¶åˆ›å»ºè‡ªå®šä¹‰é’©å­</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼€å§‹åœ¨åŠŸèƒ½ç»„ä»¶ä¸­ä½¿ç”¨æŒ‚é’©éå¸¸å®¹æ˜“ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¿…é€Ÿåœ¨æŸå¤„</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŸå¤„åº”ç”¨- </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ç»§ç»­åšæˆ‘ä»¬çš„å·¥ä½œã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä¸èƒ½å……åˆ†åˆ©ç”¨é’©å­èƒ½å¤Ÿæä¾›çš„æ‰€æœ‰æœºä¼šã€‚</font><font style="vertical-align: inherit;">å‘ˆç°</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ä¸€ä¸ªå°çš„å½¢å¼</font></font><code>use&lt;StateName&gt;State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå’Œ</font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-çš„å½¢å¼</font></font><code>use&lt;EffectName&gt;Effect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»„ä»¶æ¯”å¸¸è§„é’©å­å°ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‚é’©å¯ä»¥åœ¨å„ç§ç»„ä»¶ä¸­é‡å¤ä½¿ç”¨ã€‚</font></font></li>
<li>,         React,  ,    . ,   <code>State&lt;StateName&gt;</code>   <code>State</code>.        <code>React.useState</code>,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ£€ç´¢æŒ‚é’©è¿˜æœ‰åŠ©äºåœ¨åº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ä¸­æ›´å®¹æ˜“çœ‹åˆ°å¯é‡ç”¨å’Œå…±äº«çš„é€»è¾‘ã€‚å¦‚æœä»…ä½¿ç”¨ç»„ä»¶ä»£ç ä¸­å†…ç½®çš„æŒ‚é’©ï¼Œåˆ™å¾ˆéš¾æ³¨æ„åˆ°ç±»ä¼¼æˆ–é‡å¤çš„é€»è¾‘ã€‚äº§ç”Ÿçš„é’©å­å¯èƒ½å¾ˆå°ï¼Œå¹¶ä¸”åŒ…å«å¾ˆå°‘çš„ç±»ä¼¼ä»£ç çš„ä»£ç </font></font><code>useToggleState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦ä¸€æ–¹é¢ï¼Œæ›´å¤§çš„é’©å­ï¼ˆå¦‚</font></font><code>useProductFetcher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ç°åœ¨å¯ä»¥åŒ…å«æ›´å¤šåŠŸèƒ½ã€‚è¿™äº›éƒ½é€šè¿‡å‡å°Reactç»„ä»¶çš„å¤§å°å¸®åŠ©æˆ‘ä»¬ç®€åŒ–äº†ä»£ç åº“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸‹é¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªå°çš„Reacté’©å­ï¼Œç”¨äºæ§åˆ¶å…ƒç´ çš„é€‰æ‹©ã€‚</font><font style="vertical-align: inherit;">åœ¨æ„è¯†åˆ°åº”ç”¨ç¨‹åºä¸­ç»å¸¸ä½¿ç”¨è¿™ç§é€»è¾‘åï¼Œç«‹å³å°è£…è¿™ç§åŠŸèƒ½çš„å¥½å¤„å°±æ˜¾è€Œæ˜“è§äº†ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ç»„è®¢å•ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-keyword">const</span> useSelection = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> [selected, select]<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, select] = useSelection()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.å…³äºReact.useDebugValueçš„å¥½å¤„</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ‡å‡†çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React.useDebugValue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é’©å­</font><font style="vertical-align: inherit;">å¼•ç”¨é²œä¸ºäººçŸ¥çš„ReactåŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">è¿™ä¸ªé’©å­å¯ä»¥åœ¨ä»£ç è°ƒè¯•æœŸé—´ä¸ºå¼€å‘äººå‘˜æä¾›å¸®åŠ©ï¼›åœ¨è®¾è®¡ç”¨äºå…±äº«çš„é’©å­ä¸­ä½¿ç”¨å®ƒæ—¶å¾ˆæœ‰ç”¨ã€‚</font><font style="vertical-align: inherit;">è¿™äº›æ˜¯åœ¨åº”ç”¨ç¨‹åºçš„è®¸å¤šç»„ä»¶ä¸­ä½¿ç”¨çš„ç”¨æˆ·æŒ‚é’©ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œ</font></font><code>useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸å»ºè®®åœ¨æ‰€æœ‰ç”¨æˆ·æŒ‚é’©ä¸­éƒ½ä½¿ç”¨å®ƒï¼Œå› ä¸ºå†…ç½®æŒ‚é’©å·²ç»è®°å½•äº†æ ‡å‡†è°ƒè¯•å€¼ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æƒ³è±¡ä¸€ä¸‹åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é’©å­ï¼Œè¯¥é’©å­æ—¨åœ¨å†³å®šæ˜¯å¦éœ€è¦å¯ç”¨åº”ç”¨ç¨‹åºçš„æŸäº›åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">å†³ç­–æ‰€åŸºäºçš„åº”ç”¨ç¨‹åºçŠ¶æ€æ•°æ®å¯ä»¥æ¥è‡ªä¸åŒçš„æ¥æºã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬å¯ä»¥å­˜å‚¨åœ¨Reactä¸Šä¸‹æ–‡å¯¹è±¡ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¿é—®è¯¥å¯¹è±¡</font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†å¸®åŠ©å¼€å‘äººå‘˜è¿›è¡Œè°ƒè¯•ï¼ŒåŒæ—¶ä½¿ç”¨Reactå¼€å‘äººå‘˜å·¥å…·ï¼Œäº†è§£æ‰€åˆ†æçš„æ ‡å¿—åï¼ˆ</font></font><code>flagName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰å’Œæ ‡å¿—å€¼çš„å˜ä½“</font><font style="vertical-align: inherit;">ï¼ˆ</font><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">å¯èƒ½ä¼šå¾ˆæœ‰ç”¨</font></font><code>flagVariation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨å°é’©å­å¯ä»¥å¸®åŠ©æˆ‘ä»¬</font></font><code>React.useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useFeatureToggle</span>(<span class="hljs-params">flagName, flagVariation = true</span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> flags = React.useContext(FlagsContext)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> isFeatureEnabled = getIsFeatureEnabled(flagName, flagVariation)(flags)<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;React.useDebugValue({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagName,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagVariation,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isEnabled</span>: isFeatureEnabled<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> isFeatureEnabled<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œä½¿ç”¨Reactå¼€å‘äººå‘˜çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å…³æ ‡å¿—å€¼é€‰é¡¹ï¼Œæ ‡å¿—åç§°ä»¥åŠæ˜¯å¦æ‰“å¼€äº†æˆ‘ä»¬æ„Ÿå…´è¶£çš„åŠŸèƒ½çš„ä¿¡æ¯ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a37/b3d/78c/a37b3d78c562b28184abd5d5a8fe1c93.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨åº”ç”¨React.useDebugValueé’©å­ä¹‹åä½¿ç”¨Reactå¼€å‘äººå‘˜å·¥å…·</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¯·æ³¨æ„ï¼Œåœ¨ç”¨æˆ·é’©å­ä½¿ç”¨æ ‡å‡†é’©å­ï¼ˆä¾‹å¦‚</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–ï¼‰çš„æƒ…å†µä¸‹</font></font><code>React.useRef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæ­¤ç±»é’©å­å·²ç»è®°å½•äº†ç›¸åº”çš„çŠ¶æ€æˆ–å¼•ç”¨å¯¹è±¡æ•°æ®ã€‚</font><font style="vertical-align: inherit;">ç»“æœï¼Œæ­¤å¤„ä½¿ç”¨è§†å›¾æ„é€ </font></font><code>React.useDebugValue({ state })</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨ã€‚</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.æŒ‚é’©çš„ç»„åˆå’Œç»„æˆ</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“æˆ‘ä»¬å¼€å§‹åœ¨å·¥ä½œä¸­å®ç°é’©å­å¹¶å¼€å§‹åœ¨ç»„ä»¶ä¸­ä½¿ç”¨è¶Šæ¥è¶Šå¤šçš„é’©å­æ—¶ï¼Œå¾ˆå¿«å°±å‘ç°åŒä¸€ç»„ä»¶ä¸­å¯èƒ½æœ‰5-10ä¸ªé’©å­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨äº†å„ç§ç±»å‹çš„é’©å­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨2-3ä¸ªé’©å­</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªé’©å­</font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆä¾‹å¦‚ï¼Œä»¥è·å–æœ‰å…³æ´»åŠ¨ç”¨æˆ·çš„ä¿¡æ¯ï¼‰ï¼Œä¸€ä¸ªé’©å­</font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä»¥åŠå…¶ä»–åº“ä¸­çš„é’©å­ï¼Œä¾‹å¦‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-router</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-intl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœä¸€æ¬¡åˆä¸€æ¬¡åœ°é‡å¤ï¼Œç»“æœï¼Œå³ä½¿å¾ˆå°çš„éƒ¨ä»¶ä¹Ÿä¸æ˜¯é‚£ä¹ˆç´§å‡‘ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¼€å§‹å°†è¿™äº›å•ç‹¬çš„æŒ‚é’©æå–åˆ°ç”¨æˆ·æŒ‚é’©ä¸­ï¼Œç”¨æˆ·æŒ‚é’©çš„è®¾å¤‡å–å†³äºç»„ä»¶æˆ–æŸäº›åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æƒ³è±¡ä¸€ä¸‹æ—¨åœ¨åˆ›å»ºè®¢å•çš„åº”ç”¨ç¨‹åºæœºåˆ¶ã€‚</font><font style="vertical-align: inherit;">åœ¨å¼€å‘æ­¤æœºåˆ¶æ—¶ï¼Œä½¿ç”¨äº†è®¸å¤šç»„ä»¶ä»¥åŠå„ç§ç±»å‹çš„é’©å­ã€‚</font><font style="vertical-align: inherit;">è¿™äº›æŒ‚é’©å¯ä»¥ç»„åˆä¸ºè‡ªå®šä¹‰æŒ‚é’©ï¼Œä»è€Œæé«˜äº†ç»„ä»¶çš„å¯ç”¨æ€§ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯åœ¨ä¸€ä¸ªæŒ‚é’©ä¸­ç»„åˆä¸€ç»„å°æŒ‚é’©çš„ç¤ºä¾‹ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OrderCreate</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderCreater,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderFetcher,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applicationContext,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goToNextStep,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pendingOrder,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updatePendingChanges,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;revertPendingChanges<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} = useOrderCreate()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (<span class="hljs-comment">/** ...children */</span>)<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. React.useReducerå’ŒReact.useStateçš„æ¯”è¾ƒ</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ç»å¸¸å°†å…¶</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œä¸ºå¤„ç†ç»„ä»¶çŠ¶æ€çš„æ ‡å‡†æŒ‚é’©ã€‚ä½†æ˜¯ï¼Œéšç€æ—¶é—´çš„æµé€ï¼Œç»„ä»¶çš„çŠ¶æ€å¯èƒ½éœ€è¦å˜å¾—å¤æ‚ï¼Œè¿™å–å†³äºç»„ä»¶çš„æ–°è¦æ±‚ï¼Œä¾‹å¦‚çŠ¶æ€ä¸­æ˜¯å¦å­˜åœ¨å¤šä¸ªå€¼ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨</font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥å¸®åŠ©é¿å…ä½¿ç”¨å¤šä¸ªå€¼çš„éœ€è¦å¹¶ç®€åŒ–æ›´æ–°çŠ¶æ€çš„é€»è¾‘ã€‚æƒ³è±¡ä¸€ä¸‹è¿›è¡ŒHTTPè¯·æ±‚å’Œæ¥æ”¶å“åº”æ—¶çš„çŠ¶æ€ç®¡ç†ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨</font></font><code>isLoading</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font><font style="vertical-align: inherit;">ç­‰å€¼</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨åŒ–ç®€å™¨æ¥æ§åˆ¶çŠ¶æ€ï¼Œè¯¥åŒ–ç®€å™¨å¯ä»¥ä½¿ç”¨å„ç§åŠ¨ä½œæ¥ç®¡ç†çŠ¶æ€æ›´æ”¹ã€‚</font><font style="vertical-align: inherit;">ç†æƒ³æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•é¼“åŠ±å¼€å‘äººå‘˜ä»¥çŠ¶æ€æœºçš„å½¢å¼æ„ŸçŸ¥æ¥å£çš„çŠ¶æ€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¼ è¾“</font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å‡é€Ÿå™¨ä¸</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨çš„å‡é€Ÿå™¨ç±»ä¼¼ï¼Œåœ¨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">Reduxä¸­</font></a><font style="vertical-align: inherit;">ï¼Œç³»ç»Ÿæ¥æ”¶åŠ¨ä½œçš„å½“å‰çŠ¶æ€ï¼Œå¹¶åº”è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</font><font style="vertical-align: inherit;">è¯¥åŠ¨ä½œåŒ…å«æœ‰å…³å…¶ç±»å‹çš„ä¿¡æ¯ï¼Œä»¥åŠæ ¹æ®å…¶å½¢æˆä¸‹ä¸€ä¸ªçŠ¶æ€çš„æ•°æ®ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ªè®¾è®¡ç”¨äºæ§åˆ¶ç‰¹å®šè®¡æ•°å™¨çš„ç®€å•reducerçš„ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> reducer = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">switch</span> (action) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>: <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>: <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'reset'</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unexpected action'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥å‡é€Ÿå™¨å¯ä»¥å•ç‹¬è¿›è¡Œæµ‹è¯•ï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹ç»„ä»¶åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('increment')}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('decrement')}&gt;-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('reset')}&gt;reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åº”ç”¨å‰é¢ä¸‰éƒ¨åˆ†ä¸­è®¨è®ºçš„å†…å®¹ï¼Œå³å¯ä»¥å°†æ‰€æœ‰å†…å®¹æå–åˆ°ä¸­</font></font><code>useCounterReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">é€šè¿‡ä»æè¿°ç•Œé¢å…ƒç´ å¤–è§‚çš„ç»„ä»¶ä¸­éšè—åŠ¨ä½œç±»å‹ä¿¡æ¯ï¼Œè¿™å°†æ”¹è¿›ä»£ç ã€‚</font><font style="vertical-align: inherit;">ç»“æœï¼Œè¿™å°†æœ‰åŠ©äºé˜²æ­¢å®ç°ç»†èŠ‚æ³„æ¼åˆ°ç»„ä»¶ä¸­ï¼Œä¹Ÿå°†ä¸ºæˆ‘ä»¬æä¾›æ›´å¤šè°ƒè¯•ä»£ç çš„æœºä¼šã€‚</font><font style="vertical-align: inherit;">ç”Ÿæˆçš„è‡ªå®šä¹‰é’©å­å’Œä½¿ç”¨å®ƒçš„ç»„ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> CounterActionTypes = {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Increment</span>: <span class="hljs-string">'increment'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Decrement</span>: <span class="hljs-string">'decrement'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Reset</span>: <span class="hljs-string">'reset'</span>,<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> useCounterReducer = <span class="hljs-function">(<span class="hljs-params">initialState</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> increment = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Increment));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> decrement = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Decrement));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> reset = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Reset));<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decrement<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {count, increment} = useCounterReducer(<span class="hljs-number">0</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.é€æ­¥å®ç°é’©å­</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹ä¸€çœ‹ï¼Œé€æ¸å¼•å…¥é’©å­çš„æƒ³æ³•ä¼¼ä¹å¹¶ä¸å®Œå…¨åˆä¹é€»è¾‘ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘å»ºè®®é‚£äº›è®¤ä¸ºå¦‚æ­¤çš„äººåªæ˜¯éµå¾ªæˆ‘çš„æ¨ç†ã€‚éšç€æ—¶é—´çš„æµé€ï¼Œå„ç§æ¨¡å¼éƒ½ä¼šåœ¨ä»£ç åº“ä¸­æ‰¾åˆ°åº”ç”¨ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™äº›æ¨¡å¼åŒ…æ‹¬é«˜é˜¶ç»„ä»¶ï¼Œæ¸²æŸ“å±æ€§ä»¥åŠé’©å­ã€‚åœ¨å°†é¡¹ç›®è½¬æ¢ä¸ºæ–°æ¨¡å¼æ—¶ï¼Œå¼€å‘äººå‘˜ä¸ä¼šå¯»æ±‚ç«‹å³é‡å†™æ‰€æœ‰ä»£ç ï¼Œé€šå¸¸è¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦åˆ¶å®šä¸€ä¸ªè®¡åˆ’ä»¥å°†é¡¹ç›®è½¬ç§»åˆ°ReactæŒ‚é’©ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬å¯¹ä»£ç çš„é‡å¤§æ›´æ”¹ã€‚ç”±äºæ›´æ”¹ä»£ç é€šå¸¸ä¼šå¯¼è‡´å…¶å¤§å°å’Œå¤æ‚æ€§å¢åŠ ï¼Œå› æ­¤æ­¤ä»»åŠ¡å¯èƒ½éå¸¸å›°éš¾ã€‚é€šè¿‡å¼•å…¥é’©å­ï¼Œæˆ‘ä»¬åŠªåŠ›é¿å…è¿™ç§æƒ…å†µã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬çš„ä»£ç åº“ä½¿ç”¨åŸºäºç±»çš„ç»„ä»¶å’ŒåŠŸèƒ½ç»„ä»¶ã€‚æ— è®ºåœ¨ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨å“ªä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬éƒ½è¯•å›¾é€šè¿‡Reacté’©å­å…±äº«é€»è¾‘ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æŒ‚é’©ä¸­å®ç°é€»è¾‘ï¼ˆæˆ–é‡å¤å…¶ä¸­çš„æŸäº›æœºåˆ¶çš„ç°æœ‰å®ç°ï¼‰ï¼Œç„¶ååˆ›å»ºæ›´é«˜çº§åˆ«çš„å°ç»„ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨è¿™äº›æŒ‚é’©ã€‚ä¹‹åï¼Œè¿™äº›é«˜é˜¶ç»„ä»¶å°†ç”¨äºåˆ›å»ºåŸºäºç±»çš„ç»„ä»¶ã€‚ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å°†é€»è¾‘æ”¾ç½®åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¯ä»¥åœ¨å„ç§ç»„ä»¶ä¸­ä½¿ç”¨ã€‚è¿™æ˜¯é€šè¿‡é«˜é˜¶ç»„ä»¶åœ¨ç»„ä»¶ä¸­å®ç°æŒ‚é’©åŠŸèƒ½çš„ç¤ºä¾‹ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> injectTracking = <span class="hljs-function">(<span class="hljs-params">propName = <span class="hljs-string">'tracking'</span></span>) =&gt;</span> <span class="hljs-function"><span class="hljs-params">WrappedComponent</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> WithTracking = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> tracking = useTracking();<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> trackingProp = {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[propName]: tracking,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} {<span class="hljs-attr">...trackingProp</span>} /&gt;</span></span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;WithTracking.displayName = wrapDisplayName(WrappedComponent, <span class="hljs-string">'withTracking'</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> WithTracking;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> injectTracking;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¾ç¤ºäº†æŒ‚é’©åŠŸèƒ½</font></font><code>useTracking</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ç»„ä»¶ä¸­çš„å®ç°</font></font><code>WrappedComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™é™¤å…¶ä»–äº‹é¡¹å¤–ï¼Œä½¿æˆ‘ä»¬å¾—ä»¥å°†å®ç°æŒ‚é’©å’Œé‡å†™æµ‹è¯•çš„ä»»åŠ¡åˆ†ç¦»åˆ°ç³»ç»Ÿçš„æ—§éƒ¨åˆ†ä¸­ã€‚</font><font style="vertical-align: inherit;">é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨åœ¨ä»£ç åº“çš„æ‰€æœ‰éƒ¨åˆ†ä¸­ä½¿ç”¨é’©å­çš„æœºåˆ¶ã€‚</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜è¦</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ReactæŒ‚é’©å¦‚ä½•æ”¹è¿›æˆ‘ä»¬çš„ä»£ç åº“çš„ç¤ºä¾‹ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¸Œæœ›é’©å­ä¹Ÿèƒ½ä½¿æ‚¨çš„é¡¹ç›®å—ç›Šã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº²çˆ±çš„è¯»è€…ä»¬ï¼</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨æ˜¯å¦ä½¿ç”¨Reacté’©å­ï¼Ÿ</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN494692/index.html">4Dé’ˆæ— ç—›æ³¨å°„</a></li>
<li><a href="../zh-CN494700/index.html">åŸºäºä¿„ç½—æ–¯å„åœ°äººå‘˜æµåŠ¨æ•°æ®é›†çš„ç‰¹å®šåŸå¸‚ä¸­çš„æ„ŸæŸ“åœºæ™¯</a></li>
<li><a href="../zh-CN494702/index.html">ä¸Šå‘¨ç¬¬408æœŸï¼ˆ2020å¹´3æœˆ23æ—¥è‡³29æ—¥ï¼‰æ¥è‡ªå‰ç«¯ä¸–ç•Œçš„æ–°é²œææ–™æ‘˜è¦</a></li>
<li><a href="../zh-CN494704/index.html">CMI5ï¼Œæˆ–SCORMä¹‹åçš„ç”Ÿæ´»</a></li>
<li><a href="../zh-CN494710/index.html">åœ¨Webé¡¹ç›®ä¸­ä½¿ç”¨ç°ä»£å›¾å½¢æ ¼å¼</a></li>
<li><a href="../zh-CN494714/index.html">å…³äºå¯å˜å­—ä½“å¯¹Webé¡¹ç›®æ€§èƒ½çš„ç§¯æå½±å“</a></li>
<li><a href="../zh-CN494716/index.html">æœ‰å…³CSSä¸­çš„autoå…³é”®å­—çš„æ‰€æœ‰ä¿¡æ¯</a></li>
<li><a href="../zh-CN494718/index.html">æ¥è‡ªOpenStreetMap 504ä¸–ç•Œçš„æ–°é—»ï¼ˆ10.03.2020-16.03.2020ï¼‰</a></li>
<li><a href="../zh-CN494720/index.html">æˆ‘çš„ç†ŠçŒ«å¤‡å¿˜å•</a></li>
<li><a href="../zh-CN494722/index.html">é€‚ç”¨äºWindowsï¼ŒLinuxå’ŒmacOSçš„Microsoft PowerShell 7.1çš„ç¬¬ä¸€ä¸ªé¢„è§ˆç‰ˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>