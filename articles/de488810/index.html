<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰 👩🏼‍✈️ ➖ Wir beleben den Hexapod wieder. Teil eins 🤵🏿 🖕🏼 🌑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem früheren Artikel haben wir unsere Erfahrungen bei der Erstellung eines Hexapods mithilfe der 3D-Drucktechnologie geteilt. Jetzt werden wir üb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wir beleben den Hexapod wieder. Teil eins</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488810/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In einem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">früheren Artikel haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir unsere Erfahrungen bei der Erstellung eines Hexapods mithilfe der 3D-Drucktechnologie geteilt. </font><font style="vertical-align: inherit;">Jetzt werden wir über die Softwarekomponente sprechen, die es ihm ermöglichte, wiederzubeleben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war ursprünglich geplant, alle Informationen in einem Artikel zu präsentieren, aber beim Schreiben wurde klar, dass eine solche Präsentation oberflächlich und nicht informativ sein würde. </font><font style="vertical-align: inherit;">Aus diesem Grund wurde beschlossen, mehrere Artikel mit einer detaillierteren Darstellung des Themas zu verfassen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hexapod-Gerät</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit wird die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNO R3-Karte mit Wi-Fi ESP8266</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als </font><b><font style="vertical-align: inherit;">Hauptcontroller</font></b><font style="vertical-align: inherit;"> verwendet </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Tatsächlich ist diese Karte mit zwei Controllern an Bord, die über eine UART-Schnittstelle miteinander interagieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/re/hf/pmrehf4t07edzjictwpv_8bpoqs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz der Tatsache, dass </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uno nur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über eine begrenzte Menge an Rechenressourcen verfügt, reicht es aus, dem Roboter das Ausführen grundlegender Befehle beizubringen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerade Bewegung mit einer bestimmten Geschwindigkeit und Dauer</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kreisbewegung nach links oder rechts (an Ort und Stelle drehen)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nehmen Sie voreingestellte Gliedmaßenpositionen ein</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der ESP8266</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist für die Organisation des drahtlosen Kommunikationskanals verantwortlich und dient als Gateway, über das Uno Steuerbefehle empfängt.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Roboter kann über das lokale Netzwerk innerhalb der damit eingerichteten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telnet-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sitzung oder über eine Kabelverbindung zur Steuerung (für Firmware oder Debugging) gesteuert werden. Der Einfachheit halber haben wir auch eine einfache Android-Anwendung geschrieben, die nur minimale interaktive Funktionen zur Steuerung des Roboters implementiert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/cd/g3/8bcdg3tm1kougoxojse5my7siyc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgende Abbildung zeigt schematisch die Hexapod-Struktur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/gf/2d/etgf2dsnktnwcb7y7pv-eixy34u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Servos sind mit der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multiservo Shield-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Erweiterungskarte verbunden </font><font style="vertical-align: inherit;">, mit der Sie 18 Servos steuern können. Ihre Kommunikation mit Arduino erfolgt über den I²C-Bus. Daher bleiben auch bei gleichzeitiger Lenkung von 18 Servos fast alle Arduino-Stifte frei.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass die Erweiterungskarte über einen Anschluss zur Stromversorgung der angeschlossenen Servos verfügt. </font><font style="vertical-align: inherit;">Der maximal zulässige Strom, für den die Karte ausgelegt ist, beträgt jedoch etwa 10 A, was nicht ausreicht, um die MG996R-Servoantriebe mit Strom zu versorgen, deren maximaler Gesamtstromverbrauch den angegebenen Wert überschreiten kann. </font><font style="vertical-align: inherit;">Daher wurde in unserer Version jedes Servo unter Umgehung der Erweiterungskarte an eine separate Stromleitung angeschlossen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hexapod-Management</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hexapod-Gliedmaßensteuerlogik wird im Programm unter Verwendung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GeksaFoot-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><i><font style="vertical-align: inherit;">implementiert</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse GeksaFoot</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GeksaFoot</span> {</span>
<span class="hljs-keyword">private</span>:
<span class="hljs-comment">//         </span><font></font>
  Vector3D m_p0;<font></font>
<span class="hljs-comment">//          </span><font></font>
  Vector3D m_r0;<font></font>
<span class="hljs-comment">//  Multiservo,    </span>
  Multiservo m_coxaServo;   <span class="hljs-comment">//  </span>
  Multiservo m_femoraServo; <span class="hljs-comment">//  </span>
  Multiservo m_tibiaServo;  <span class="hljs-comment">//  </span>
<span class="hljs-keyword">public</span>:<font></font>
  GeksaFoot(Vector3D p0,Vector3D r0);<font></font>
<span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">begin</span><span class="hljs-params">(<span class="hljs-keyword">int</span> coxaPin, <span class="hljs-keyword">int</span> femoraPin, <span class="hljs-keyword">int</span> tibiaPin)</span></span>;
<span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">end</span><span class="hljs-params">()</span></span>;   <font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">coxaAngle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span></span>;      <span class="hljs-comment">//      (-90 .. 90 )</span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">coxaAngle</span><span class="hljs-params">()</span></span>;          <span class="hljs-comment">//     </span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">femoraAngle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span></span>;    <span class="hljs-comment">//       (-90 .. 90 )</span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">femoraAngle</span><span class="hljs-params">()</span></span>;        <span class="hljs-comment">//     </span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">tibiaAngle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span></span>;     <span class="hljs-comment">//       (-90 .. 90 )</span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">tibiaAngle</span><span class="hljs-params">()</span></span>;         <span class="hljs-comment">//     </span><font></font>
<font></font>
<span class="hljs-comment">//         </span><font></font>
<font></font>
  <span class="hljs-comment">//         </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getAngles</span><span class="hljs-params">(Vector3D p, <span class="hljs-keyword">int</span>&amp; coxaAngle, <span class="hljs-keyword">int</span>&amp; femoraAngle, <span class="hljs-keyword">int</span>&amp; tibiaAngle)</span></span>;
  <span class="hljs-comment">//       </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPoint</span><span class="hljs-params">(<span class="hljs-keyword">int</span> coxaAngle, <span class="hljs-keyword">int</span> femoraAngle, <span class="hljs-keyword">int</span> tibiaAngle, Vector3D&amp; p)</span></span>;<font></font>
};<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit den Methoden </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coxaAngle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">femoraAngle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tibiaAngle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können Sie den Drehwinkel eines einzelnen </font><i><font style="vertical-align: inherit;">Beingelenks</font></i><font style="vertical-align: inherit;"> einstellen oder herausfinden. Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hilfsmethoden getAngles</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPoint</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implementieren die Logik der Berechnung der direkten und inversen Kinematik, mit der Sie den Wert der Beinwinkel für einen bestimmten Punkt im Raum ihrer Extremität berechnen können. Oder umgekehrt, ein Raumpunkt für die aktuellen Winkelwerte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die durchschnittliche Position jedes Gelenks entspricht einem Nullwert des Winkels, und der Drehbereich des Gelenks liegt im Bereich von -90 bis 90 Grad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die oberste Klasse ist die </font><i><font style="vertical-align: inherit;">Geksapod-</font></i><font style="vertical-align: inherit;"> Klasse</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es implementiert die Logik des gesamten Roboters. </font><font style="vertical-align: inherit;">Jedes Hexapod-Bein ist in dieser Klasse als separate Instanz der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GeksaFoot-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse enthalten </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse Geksapod</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Geksapod</span>:</span> <span class="hljs-keyword">public</span> AJobManager {
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MotionJob</span>;</span>
  <span class="hljs-keyword">friend</span> CommandProcessorJob;
  <span class="hljs-comment">//  </span><font></font>
  GeksaFoot m_LeftFrontFoot;<font></font>
  GeksaFoot m_LeftMidleFoot;<font></font>
  GeksaFoot m_LeftBackFoot;<font></font>
  GeksaFoot m_RigthFrontFoot;<font></font>
  GeksaFoot m_RigthMidleFoot;<font></font>
  GeksaFoot m_RigthBackFoot;<font></font>
  <span class="hljs-comment">// ,    </span><font></font>
  MotionJob m_MotionJob;<font></font>
<span class="hljs-keyword">private</span>:
  <span class="hljs-comment">//       </span>
  <span class="hljs-comment">//       </span>
  <span class="hljs-comment">//     </span>
  <span class="hljs-keyword">int</span> _setPose(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span> ca, <span class="hljs-keyword">int</span> fa, <span class="hljs-keyword">int</span> ta);
  <span class="hljs-keyword">int</span> _setPose(<span class="hljs-keyword">int</span>[FOOTS_COUNT][<span class="hljs-number">3</span>]);  
  <span class="hljs-keyword">int</span> _setPose(Vector3D points[FOOTS_COUNT]); 
<span class="hljs-keyword">protected</span>:
  <span class="hljs-comment">//          </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span> ca, <span class="hljs-keyword">int</span> fa, <span class="hljs-keyword">int</span> ta, <span class="hljs-keyword">int</span> actionTime)</span></span>; 
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>], <span class="hljs-keyword">int</span> actionTime)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, Vector3D p, <span class="hljs-keyword">int</span> actionTime)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(Vector3D points[FOOTS_COUNT], <span class="hljs-keyword">int</span> actionTime = <span class="hljs-number">0</span>)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ca, <span class="hljs-keyword">int</span> fa, <span class="hljs-keyword">int</span> ta, <span class="hljs-keyword">int</span> actionTime)</span></span>;
  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span>&amp; ca, <span class="hljs-keyword">int</span>&amp; fa, <span class="hljs-keyword">int</span>&amp; ta)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, Vector3D&amp; p)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(Vector3D points[FOOTS_COUNT])</span></span>;
  <span class="hljs-comment">//    </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">execute</span><span class="hljs-params">(Motion* pMotion)</span></span>;
<span class="hljs-keyword">public</span>:<font></font>
  Geksapod();<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span>;
  <span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">move</span><span class="hljs-params">(<span class="hljs-keyword">int</span> speed, <span class="hljs-keyword">int</span> time)</span></span>;    <span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rotate</span><span class="hljs-params">(<span class="hljs-keyword">int</span> speed, <span class="hljs-keyword">int</span> time)</span></span>;  <span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span>;                      <span class="hljs-comment">//  </span>
  <span class="hljs-comment">//         </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getAngles</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, Vector3D p, <span class="hljs-keyword">int</span>&amp; ca, <span class="hljs-keyword">int</span>&amp; fa, <span class="hljs-keyword">int</span>&amp; ta)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPoint</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span> coxaAngle, <span class="hljs-keyword">int</span> femoraAngle, <span class="hljs-keyword">int</span> tibiaAngle, Vector3D&amp; p)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getAngles</span><span class="hljs-params">(Vector3D points[FOOTS_COUNT], <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPoints</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>], Vector3D points[FOOTS_COUNT])</span></span>;<font></font>
};<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die überladenen </font><i><font style="vertical-align: inherit;">Methoden </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPose</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setPose</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sind für den internen Gebrauch vorgesehen und ermöglichen es Ihnen, die aktuelle Position der Gliedmaßen des Roboters </font><i><font style="vertical-align: inherit;">abzurufen</font></i><font style="vertical-align: inherit;"> oder eine neue </font><i><font style="vertical-align: inherit;">festzulegen</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In diesem Fall wird die Position der Beine in Form eines Satzes von Werten der Drehwinkel jedes Gelenks oder als Satz von Koordinaten der Endpunkte der Gliedmaßen des Roboters relativ zu seiner Mitte eingestellt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für eine reibungslose Bewegung der Gliedmaßen beim Aufrufen der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setPose-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methoden können </font><i><font style="vertical-align: inherit;">Sie</font></i><font style="vertical-align: inherit;"> die Zeit ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actionTime-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parameter </font><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">angeben, </font><font style="vertical-align: inherit;">nach der die Beine die angegebene Position erreichen sollen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Roboter wird durch die öffentlichen Methoden zum </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bewegen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drehen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stoppen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gesteuert </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multitask-Emulation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">erbt die Implementierung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">und enthält eine Instanz der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">, die wiederum von der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse erbt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mit diesen Klassen können Sie das sogenannte nicht-präemptive Multitasking implementieren, um von der Linearität von Programmen zu abstrahieren und mehrere Aufgaben gleichzeitig auszuführen.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse ajob</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJob</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJobManager</span>;</span>
<span class="hljs-keyword">private</span>:<font></font>
  AJobManager* m_pAJobManager;   <font></font>
  AJob* mJobNext;                      <font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_counter;         <span class="hljs-comment">//    onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_previousMillis; <span class="hljs-comment">//     onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_currentMillis;  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_delayMillis;    <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span>:<font></font>
  AJob(AJobManager*, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> delay = <span class="hljs-number">0L</span>);<font></font>
  ~AJob();<font></font>
                  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">counter</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    onRun    </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">setDelay</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span>)</span></span>; <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">previousMillis</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//      onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">currentMillis</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    </span><font></font>
                              <font></font>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInit</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRun</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDone</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//        finish</span>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">ist die Basisklasse für alle Aufgaben, die gleichzeitig ausgeführt werden müssen. </font><font style="vertical-align: inherit;">Seine Erben sollten die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode überschreiben </font><font style="vertical-align: inherit;">, die die Logik der ausgeführten Aufgabe implementiert. </font><font style="vertical-align: inherit;">Angesichts der Besonderheiten des präventiven Multitasking sollte das Aufrufen dieser Methode nicht zu zeitaufwändig sein. </font><font style="vertical-align: inherit;">Es wird empfohlen, die Aufgabenlogik in mehrere leichtere Unteraufgaben zu unterteilen, von denen jede für einen separaten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aufruf ausgeführt wird </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse AJobManager</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJobManager</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJob</span>;</span>
  AJob* mJobFirst;  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">attach</span><span class="hljs-params">(AJob*)</span></span>;   <span class="hljs-comment">//    </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dettach</span><span class="hljs-params">(AJob*)</span></span>; <span class="hljs-comment">//    </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dettachAll</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//   </span>
<span class="hljs-keyword">public</span>:  <font></font>
  AJobManager();<font></font>
  ~AJobManager();<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span></span>;<font></font>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">hat eine bescheidenere Deklaration und enthält nur zwei öffentliche Methoden: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setup</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loop</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setup-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">muss vor dem Starten der Hauptprogrammschleife einmal aufgerufen werden. Darin erfolgt eine einzelne Initialisierung aller Aufgaben, indem die entsprechende </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onInit-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">für jede Aufgabe aus der Liste </font><i><font style="vertical-align: inherit;">aufgerufen</font></i><font style="vertical-align: inherit;"> wird </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Aufgabe wird automatisch zur Liste hinzugefügt, wenn ihr Konstruktor aufgerufen wird, und kann durch Aufrufen der öffentlichen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abschlussmethode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der Aufgabe selbst </font><font style="vertical-align: inherit;">gelöscht werden </font><font style="vertical-align: inherit;">. </font><i><font style="vertical-align: inherit;">Loop</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 
Verfahren</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird im Hauptprogrammzyklus wiederholt aufgerufen und ist dafür verantwortlich, die Logik jeder Aufgabe in festgelegten Intervallen (falls installiert) nacheinander aus der Liste auszuführen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somit wird </font><font style="vertical-align: inherit;">, wenn eine Instanz der Erstellung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">von der geerbten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">, die </font><font style="vertical-align: inherit;">wir zur Verfügung eines bequemes Multitasking - </font><font style="vertical-align: inherit;">Tool erhalten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bewegungsimplementierung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Bewegung des Körpers kann durch eine Funktion beschrieben werden, die seine Position zu einem bestimmten Zeitpunkt bestimmt. </font><font style="vertical-align: inherit;">Eine solche Funktion kann zusammengesetzt sein, dh es kann sich um eine Reihe von Funktionen handeln, von denen jede nur für einen bestimmten Zeitraum anwendbar ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die verschiedenen Bewegungsarten der Gliedmaßen des Hexapods sind definiert und können mithilfe von Klassen erweitert werden, die von der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motion-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse geerbt wurden </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse Motion</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Motion</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MotionJob</span>;</span>
<span class="hljs-keyword">protected</span>:
  <span class="hljs-keyword">long</span> m_MaxTime;     <span class="hljs-comment">//      </span>
  <span class="hljs-keyword">long</span> m_TotalTime;   <span class="hljs-comment">//      </span>
  <span class="hljs-keyword">bool</span> m_IsLooped;    <span class="hljs-comment">//   </span>
  Motion* m_pNext;    <span class="hljs-comment">//     </span>
<span class="hljs-keyword">public</span>:  <font></font>
  Motion(<span class="hljs-keyword">long</span> maxTime, <span class="hljs-keyword">bool</span> isLooped, <span class="hljs-keyword">long</span> totalTime = <span class="hljs-number">-1</span>, Motion* pNext = <span class="hljs-literal">NULL</span>);<font></font>
  ~Motion();<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">long</span> <span class="hljs-title">maxTime</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_MaxTime; }
  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">long</span> <span class="hljs-title">totalTime</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_TotalTime; }
  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">isLooped</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_IsLooped; }<font></font>
<font></font>
  <span class="hljs-comment">//          </span><font></font>
<font></font>
  <span class="hljs-comment">//       0 &lt;= time &lt;= m_MaxTime </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span> </span>{ <span class="hljs-keyword">return</span> E_NOT_IMPL; };  
  <span class="hljs-comment">//        0 &lt;= time &lt;= m_MaxTime</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span> </span>{ <span class="hljs-keyword">return</span> E_NOT_IMPL; };       <font></font>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Bewegung zu </font><font style="vertical-align: inherit;">implementieren, die überschriebene </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPose</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verfahren </font><font style="vertical-align: inherit;">muss die Position der Glieder des Roboters für eine bestimmte Zeitdauer zurück </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Bereich von 0 bis </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mMaxTime</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (in Millisekunden). </font><font style="vertical-align: inherit;">In dem Fall, in dem die Bewegung geloopt wird ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_IsLooped == true)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kann die Bewegungszeit durch Einstellen der Dauer in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_TotalTime begrenzt werden</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Und schließlich können Sie eine Abfolge von Bewegungen organisieren, indem Sie sie zu einer Liste kombinieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somit haben wir die Möglichkeit, die Bewegungen des Roboters zu beschreiben. </font><font style="vertical-align: inherit;">Die Beschreibung selbst (in unserem Fall eine von Motion geerbte Instanz der Klasse) bewegt den Roboter jedoch nicht. </font><font style="vertical-align: inherit;">Wir brauchen einen Mechanismus, der die Beine des Hexapods neu anordnet und sich an der Beschreibung orientiert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dieser Mechanismus ist eine Instanz der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">, die in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><i><font style="vertical-align: inherit;">deklariert ist</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse MotionJob</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MotionJob</span>:</span> <span class="hljs-keyword">public</span> AJob {
  <span class="hljs-keyword">enum</span> STATUS { <font></font>
    NONE, RUNING, STOPING <font></font>
   } m_Status;<font></font>
  <font></font>
  Geksapod* m_pGeksapod;<font></font>
  Motion* m_pMotion;<font></font>
  <span class="hljs-keyword">long</span> m_MotionTime;
  <span class="hljs-keyword">long</span> m_TotalTime;
<span class="hljs-keyword">public</span>:  <font></font>
  MotionJob(Geksapod* pGeksapod);<font></font>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">execute</span><span class="hljs-params">(Motion* pMotion)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onRun</span><span class="hljs-params">()</span></span>;<font></font>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine </font><font style="vertical-align: inherit;">Instanz der </font><i><font style="vertical-align: inherit;">MotionJob</font></i><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">von ererbten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajob,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine Aufgabe , </font><font style="vertical-align: inherit;">bei der die </font><i><font style="vertical-align: inherit;">OnRun</font></i><font style="vertical-align: inherit;"> Verfahren genannt wird bei </font><i><font style="vertical-align: inherit;">regelmäßigen Intervallen</font></i><font style="vertical-align: inherit;"> . Es implementiert auch einen Mechanismus, der unseren Roboter zwingt, Bewegungen auszuführen. Wir müssen ihm nur sagen, wie er sich bewegen soll, und beim Aufrufen der Ausführungsmethode eine Beschreibung der Bewegung angeben. </font><font style="vertical-align: inherit;">
Das ist alles für jetzt. Es gibt noch viele unbeleuchtete Probleme, über die ich im nächsten Artikel schreiben werde. Ich hoffe, ich habe die Leser nicht mit zu viel Code müde gemacht. Bereit, alle Ihre Fragen zu beantworten. </font><font style="vertical-align: inherit;">
Fortsetzung </font><i><font style="vertical-align: inherit;">folgt</font></i><font style="vertical-align: inherit;"> ... </font><font style="vertical-align: inherit;">
PS </font><i><font style="vertical-align: inherit;">Während</font></i><font style="vertical-align: inherit;"> 
der Vorbereitung des nächsten Artikels habe ich die Struktur der Sichtbarkeit von Methoden in der </font><i><font style="vertical-align: inherit;">AJob-</font></i><font style="vertical-align: inherit;"> Klasse geringfügig geändert </font><font style="vertical-align: inherit;">. </font><i><font style="vertical-align: inherit;">OnInit-</font></i><font style="vertical-align: inherit;"> Methoden</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDone</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> benötigen keinen öffentlichen Zugriff, da ihr Anruf von der freundlichen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse stammt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In Anbetracht der Tatsache, dass sich diese Methoden bei den Erben überschneiden sollten, reicht es aus, sie im </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geschützten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bereich zu platzieren </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse ajob</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJob</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJobManager</span>;</span>
<span class="hljs-keyword">private</span>:<font></font>
  AJobManager* m_pAJobManager;   <font></font>
  AJob* mJobNext;                      <font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_counter;         <span class="hljs-comment">//    onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_previousMillis; <span class="hljs-comment">//     onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_currentMillis;  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_delayMillis;    <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">protected</span>:
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInit</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRun</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDone</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//        finish</span>
<span class="hljs-keyword">public</span>:<font></font>
  AJob(AJobManager*, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> delay = <span class="hljs-number">0L</span>);<font></font>
  ~AJob();<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">counter</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    onRun    </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">setDelay</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span>)</span></span>; <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">previousMillis</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//      onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">currentMillis</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    </span>
};</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488794/index.html">Golang + Phaser3 = MMORPG - Client und Server</a></li>
<li><a href="../de488796/index.html">Lernen, Microservices bereitzustellen. Teil 2. Kubernetes</a></li>
<li><a href="../de488800/index.html">Agil: 9 schlechte Tipps</a></li>
<li><a href="../de488806/index.html">Ist das nicht konstruktiv oder dienen Sie dem König die Petition?</a></li>
<li><a href="../de488808/index.html">Programmierer, lassen Sie uns die Quellen klassischer Programme untersuchen</a></li>
<li><a href="../de488812/index.html">Mehr SoC, gut und anders. Intel öffnet AIB für Entwickler und Hersteller</a></li>
<li><a href="../de488814/index.html">Forge of Empires von AS3 bis Haxe. Post mortem</a></li>
<li><a href="../de488816/index.html">Wie wir Mir verloren haben: ein Feuer auf einer Raumstation, eine Kollision mit einem Progress-Truck, Druckentlastung</a></li>
<li><a href="../de488818/index.html">Durchbrüche #DeepPavlov im Jahr 2019: Rückblick und Ergebnisse des Jahres</a></li>
<li><a href="../de488820/index.html">Wie man bei der Arbeit nicht ausbrennt und was zu tun ist, wenn man immer noch ausbrennt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>