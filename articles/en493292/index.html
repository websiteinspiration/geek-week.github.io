<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèê üçæ ‚ö∞Ô∏è Responsive or responsive? Parsing React Component Structure üï∫üèΩ üî§ üé£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will understand the complexity of writing adaptive components, talk about code splitting, consider several ways to organize the co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Responsive or responsive? Parsing React Component Structure</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/youla/blog/493292/"><img src="https://habrastorage.org/webt/86/uj/wu/86ujwufflu-omcpppq0p9s0nnng.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, we will understand the complexity of writing adaptive components, talk about code splitting, consider several ways to organize the code structure, evaluate their advantages and disadvantages, and try to choose the best one (but this is not accurate).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, let's deal with the terminology. We often hear the terms </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptive</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">responsive</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . What do they mean? What is the difference? How does this relate to our components? </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptive</font></font></strong></a><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (adaptive)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a complex of visual interfaces created for specific screen sizes. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Responsive</font></font></strong></a><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Responsive)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a single interface that adapts to any screen size. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moreover, when the interface is decomposed into small fragments, the difference between adaptive and responsive becomes more and more blurred, until it disappears completely. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When developing layouts, our designers, as well as developers, most often do not share these concepts and combine adaptive and responsive logic.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further, I will call components that contain adaptive and responsive logic as </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simply adaptive</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Firstly, because I like this word more than ‚Äúresponsive‚Äù or, forgive me, ‚Äúresponsive‚Äù. And secondly, I find it more common. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will focus on two areas of display interfaces - mobile and desktop. By mobile display we mean width, for example, ‚â§ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">991 pixels</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(the number itself is not important, it's just a constant, which depends on your design system and your application), and under the desktop display - the width is greater than the selected threshold. </font><font style="vertical-align: inherit;">I will intentionally miss displays for tablets and widescreen monitors, because, firstly, not everyone needs them, and secondly, it will be easier to put it this way. </font><font style="vertical-align: inherit;">But the patterns we are going to talk about expand equally for any number of "mappings." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, I will almost not talk about </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mainly we will talk about component logic.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frontend @youla </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôll briefly talk about our stack in Yulia so that it is clear in what conditions we create our components. We use </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React / Redux</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we work in monorep, we use </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typescript</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and we write </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">styled-components</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . As an example, let's look at our three packages (packages in the concept of monoreps are NPM packages that are interconnected, which can be separate applications, libraries, utilities or components - you choose the degree of decomposition yourself). We will look at two applications and one UI library. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ youla / ui</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- library of components. They are used not only by us, but also by other teams that need "Yulian" interfaces. The library has a lot of things, starting with buttons and input fields, and ending, for example, with a header or an authorization form (more precisely, its UI part). We consider this library an external dependency of our application. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ youla-web / app-classified</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the application responsible for the sections of the catalog / product / authorization. According to business requirements, all interfaces here should be </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptive</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ youla-web / app-b2b</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the application responsible for the sections of your personal account for professional users. The interfaces of this application are exclusively </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desktop</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further we will consider writing adaptive components using the example of these packages. </font><font style="vertical-align: inherit;">But first you need to deal with </font></font><code>isMobile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mobility Definition isMobile &amp;&amp; &lt;Component /&gt;</font></font></h2><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> App = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
     {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">HeaderMobile</span> /&gt;</span>}
     <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before you start writing adaptive components, you need to learn how to define ‚Äúmobility‚Äù. </font><font style="vertical-align: inherit;">There are many ways to implement the definition of mobility. </font><font style="vertical-align: inherit;">I want to dwell on some key points.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Determining mobility by screen width and user-agent </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Most of you know well how to implement both options, but let's briefly go over the main points again. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When working with the width of the screen, it is customary to set boundary points, after which the application should behave as a mobile or desktop one. </font><font style="vertical-align: inherit;">The procedure is as follows:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create constants with boundary points and save them in the subject (if your CSS solution allows). </font><font style="vertical-align: inherit;">The values ‚Äã‚Äãthemselves may be what your designers find most appropriate for your </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI system</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We save the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> current screen size in a </font><strong><font style="vertical-align: inherit;">redux / mobx / context / any</font></strong><font style="vertical-align: inherit;"> data source. </font><font style="vertical-align: inherit;">Anywhere, if only the components and, preferably, the application logic had access to this data.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We subscribe to the resize event and update the value of the screen width to the one that will trigger the chain of updates of the component tree.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We create simple helper functions that, using screen widths and constants, calculate the current state ( </font></font><code>isMobile</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></strong><code>isDesktop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the pseudo code that implements this model of work:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> breakpoints = {
 <span class="hljs-attr">mobile</span>: <span class="hljs-number">991</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> state = {
 <span class="hljs-attr">ui</span>: {
   <span class="hljs-attr">width</span>: <span class="hljs-literal">null</span><font></font>
 }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> handleSubscribe = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
 state.ui.width = <span class="hljs-built_in">window</span>.innerWidth<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> onSubscribe = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
 <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, handleSubscribe)<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> offSubscribe = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span>
 <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">'resize'</span>, handleSubscribe)<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getIsMobile = <span class="hljs-function">(<span class="hljs-params">state: any</span>) =&gt;</span> {
 <span class="hljs-keyword">if</span> (state.ui.width &lt;= breakpoints.mobile) {
   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><font></font>
 }<font></font>
<font></font>
 <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getIsDesktop = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> !getIsMobile(state)<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
 React.useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
   onSubscribe()<font></font>
<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> offSubscribe()<font></font>
 }, [])<font></font>
<font></font>
 <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponentMounted</span> /&gt;</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> MyComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> isMobile ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MobileComponent</span> /&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DesktopComponent</span> /&gt;</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> MyComponentMounted = anyHocToConnectComponentWithState(
 <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({
   <span class="hljs-attr">isMobile</span>: getIsMobile(state)<font></font>
 })<font></font>
)(MyComponent)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When the screen changes, the values ‚Äã‚Äãin </font></font><code>props</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for the component will be updated, and it will be correctly redrawn. There are many libraries that implement this functionality. It will be more convenient for someone to use a ready-made solution, for example, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-media</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-responsive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc., and for someone it is easier to write your </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">own</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unlike the screen size, </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it cannot dynamically change while the application is running (strictly speaking, maybe through the developer‚Äôs tools, but this is not a user scenario). In this case, we don‚Äôt need to use complex logic with storing the value and recounting, just parse the string once </font></font><code>window.navigator.userAgent,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to save the value, and </font><font style="vertical-align: inherit;">you're </font><font style="vertical-align: inherit;">done. There are a bunch of libraries to help you with this, for example, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mobile-detect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-device-detect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The approach is </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simpler, but just using it is not enough. Anyone who has seriously developed adaptive interfaces knows about the ‚Äúmagic twist‚Äù of iPads and similar devices, which in the vertical position fall under the definition of mobile, and in horizontal - desktop, but at the same time have a </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mobile device. It is also worth noting that in a fully adaptive / responsive application, </font></font><code>user-agent </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it is impossible to determine mobility </font><font style="vertical-align: inherit;">based on information about only </font><font style="vertical-align: inherit;">if the user uses, for example, a desktop browser, but squeezes the window to the ‚Äúmobile‚Äù size. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, do not neglect information about </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Very often in the code you can find such constants as </font></font><code>isSafari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font><code>isIE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etc. that handle the ‚Äúfeatures‚Äù of these devices and browsers. It is best to combine both approaches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our code base, we use a constant </font></font><code>isCheesySafari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that, as the name implies, defines membership </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the Safari browser family. But besides this, we have a constant </font></font><code>isSuperCheesySafari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which implies a mobile Safari corresponding to iOS version 11, which has become famous for many bugs like this: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://hackernoon.com/how-to-fix-the-ios-11-input-element -in-fixed-modals-bug-aaf66c7ba3f8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> isMobileUA = <span class="hljs-function">(<span class="hljs-params">(</span>) =&gt;</span> magicParser(<span class="hljs-built_in">window</span>.navigator.userAgent))()<font></font>
<font></font>
<span class="hljs-keyword">import</span> isMobileUA <span class="hljs-keyword">from</span> <span class="hljs-string">'./isMobileUA'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> MyComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (isMobile || isMobileUA) ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MobileComponent</span> /&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DesktopComponent</span> /&gt;</span></span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What about media queries? </font><font style="vertical-align: inherit;">Yes, indeed, CSS has built-in tools for working with adaptability: media queries and their analogue, method </font></font><code>window.matchMedia</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">They can be used, but the logic of ‚Äúupdating‚Äù components when resizing will still have to be implemented. </font><font style="vertical-align: inherit;">Although for me personally, using the syntax of media queries instead of the usual comparison operations in JS for application logic and components is a dubious advantage.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organization of component structure</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We‚Äôve figured out the definition of mobility, now let's reflect on the use of the data we have obtained and the organization of the component code structure. In our code, as a rule, two kinds of components prevail. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first type</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the components, sharpened either under the cell phone, or under the desktop. In such components, the names often contain the words Mobile / Desktop, which clearly indicate that the component belongs to one of the types. As an example of such a component can be considered </font></font><code>&lt;MobileList /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><code>@youla/ui</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { Panel, Cell, Content, afterBorder } <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled'</span>
<span class="hljs-keyword">import</span> Group <span class="hljs-keyword">from</span> <span class="hljs-string">'./Group'</span>
<span class="hljs-keyword">import</span> Button, { IMobileListButtonProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button'</span>
<span class="hljs-keyword">import</span> ContentOrButton, { IMobileListContentOrButton } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ContentOrButton'</span>
<span class="hljs-keyword">import</span> Action, { IMobileListActionProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Action'</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { Panel, Group, Cell, Content, Button, ContentOrButton, Action }
<span class="hljs-keyword">export</span> {<font></font>
 afterBorder,<font></font>
 IMobileListButtonProps,<font></font>
 IMobileListContentOrButton,<font></font>
 IMobileListActionProps<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This component, in addition to very verbose export, is a list with data, separators, groupings by blocks, etc. Our designers are very fond of this component and everywhere use it in the Ula interfaces. For example, in the description on the product page or in our new tariff functionality: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e5/m_/p-/e5m_p-fw1vefwo2330gmeh21kbw.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And in N places around the site. We also have a similar component </font></font><code>&lt;DesktopList /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that implements this list functionality for desktop resolution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The components of the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">second type</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contain the logic of both desktop and mobile. Let's look at a simplified version of the rendering of our component </font></font><code>&lt;HeaderBoard /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which lives in @ youla / app-classified.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have found for myself is very convenient to make all styled-component-s for a component in a single file and import it under the namespaces S, to separate the code from the other components: </font></font><code>import * as S from ‚Äò./styled‚Äô</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Accordingly, ‚ÄúS‚Äù is an object whose keys are the names of styled components, and the values ‚Äã‚Äãare the components themselves.</font></font><br>
<br>
<pre><code class="javascript hljs"> <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HeaderWrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> /&gt;</span>
     {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">S.Arrow</span> /&gt;</span>}
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Wraper</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{bgVideo}</span> /&gt;</span>
       {!isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Header</span>&gt;</span>{headerContent}<span class="hljs-tag">&lt;/<span class="hljs-name">Header</span>&gt;</span>}
       <span class="hljs-tag">&lt;<span class="hljs-name">S.WaveWrapper</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wraper</span>&gt;</span>
     {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">S.MobileHeader</span>&gt;</span>{headerContent}<span class="hljs-tag">&lt;/<span class="hljs-name">S.MobileHeader</span>&gt;</span>}
     <span class="hljs-tag">&lt;<span class="hljs-name">Info</span> <span class="hljs-attr">link</span>=<span class="hljs-string">{link}</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">PaintingInfo</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span> /&gt;</span>
     {isMobile ? <span class="hljs-tag">&lt;<span class="hljs-name">CardsMobile</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">CardsDesktop</span> /&gt;</span>}
     {isMobile ? <span class="hljs-tag">&lt;<span class="hljs-name">UserNavigation</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">UserInfoModal</span> /&gt;</span>}
   <span class="hljs-tag">&lt;/<span class="hljs-name">HeaderWrapper</span>&gt;</span></span><font></font>
 )<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here </font></font><code>isMobile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, it is the component‚Äôs dependency, on the basis of which the component itself will decide which interface to render. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For more convenient scaling, we often use the control inversion pattern in the reused parts of our code, but be careful not to overload the top-level abstractions with unnecessary logic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let‚Äôs now abstract ourselves a bit from the ‚ÄúYulian‚Äù components and take a closer look at these two components:</font></font><br>
<br>
<ul>
<li><code>&lt;ComponentA /&gt;</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with a strict separation of desktop and mobile logic.</font></font></li>
<li><code>&lt;ComponentB /&gt;</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> combined.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;ComponentA /&gt; vs &lt;ComponentB /&gt;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folder structure and root </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.ts</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">./ComponentA<font></font>
- ComponentA.tsx<font></font>
- ComponentADesktop.tsx<font></font>
- ComponentAMobile.tsx<font></font>
- index.ts<font></font>
- styled.desktop.ts<font></font>
- styled.mobile.ts<font></font>
</code></pre><br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span> ComponentA  <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentA'</span>
<span class="hljs-keyword">import</span> ComponentAMobile  <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentAMobile'</span>
<span class="hljs-keyword">import</span> ComponentADesktop  <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentADesktop'</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">ComponentACombined</span>: ComponentA,<font></font>
 ComponentAMobile,<font></font>
 ComponentADesktop<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks to the new technology tree-shaking webpack (or using any other collector), you can discard unused modules ( </font></font><code>ComponentADesktop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>ComponentACombined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), even with this re-export through the root file:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> ComponentA <span class="hljs-keyword">from</span> ‚Äò@youla/ui‚Äô<font></font>
&lt;ComponentA.ComponentAMobile /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Only the ./ComponentAMobile file code gets into the final bundle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The component </font></font><code>&lt;ComponentA /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains asynchronous imports using a </font></font><code>React.Lazy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">specific version of the component </font></font><code>&lt;ComponentAMobile /&gt; || &lt;ComponentADesktop /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for a specific situation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We at Yule try to adhere to the pattern of a single entry point into the component through the index file. This makes finding and refactoring components easier. If the contents of the component are not re-exported through the root file, then we can safely edit it, since we know that it is not used outside the context of this component. Well, Typescript will hedge in a pinch. The folder with the component has its own ‚Äúinterface‚Äù: exports at the module level in the root file, and its implementation details are not disclosed. As a result, when refactoring, you can not be afraid of saving the interface.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentADesktopLazy = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ComponentADesktop'</span>))
<span class="hljs-keyword">const</span> ComponentAMobileLazy = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ComponentAMobile'</span>))<font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentA = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
<span class="hljs-comment">//    </span><font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{props.fallback}</span>&gt;</span>
     {isMobile ? (
       <span class="hljs-tag">&lt;<span class="hljs-name">ComponentAMobileLazy</span> {<span class="hljs-attr">...props</span>} /&gt;</span>
     ) : (
       <span class="hljs-tag">&lt;<span class="hljs-name">ComponentADesktopLazy</span> {<span class="hljs-attr">...props</span>} /&gt;</span>
     )}
   <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentA
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further, the component </font></font><code>&lt;ComponentADesktop /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains the import of desktop components:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> { DesktopList, UserAuthDesktop, UserInfo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@youla/ui'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> Banner <span class="hljs-keyword">from</span> <span class="hljs-string">'../Banner'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> S <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled.desktop'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentADesktop = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { user, items } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Banner</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">DesktopList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.SideBar</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthDesktop</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.SideBar</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentADesktop
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A component </font></font><code>&lt;ComponentAMobile /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains the import of mobile components:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> { MobileList, MobileTabs, UserAuthMobile } <span class="hljs-keyword">from</span> <span class="hljs-string">'@youla/ui'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> S <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled.mobile'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentAMobile = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { user, items, tabs } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthMobile</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">MobileList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">MobileTabs</span> <span class="hljs-attr">tabs</span>=<span class="hljs-string">{tabs}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentAMobile
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The component is </font></font><code>&lt;ComponentA /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptive: by the flag it </font></font><code>isMobile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can decide which version to draw, can only download the required files asynchronously, that is, the mobile and desktop versions can be used separately. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at the component now </font></font><code>&lt;ComponentB /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In it, we will not deeply decompose mobile and desktop logic, we will leave all the conditions within the framework of one function. </font><font style="vertical-align: inherit;">Similarly, we will not separate the components of styles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the folder structure. </font><font style="vertical-align: inherit;">The root index.ts file simply re-exports </font></font><code>./ComponentB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">./ComponentB<font></font>
- ComponentB.tsx<font></font>
- index.ts<font></font>
- styled.ts<font></font>
</code></pre><br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentB'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The ./ComponentB file with the component itself:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> {<font></font>
 DesktopList,<font></font>
 UserAuthDesktop,<font></font>
 UserInfo,<font></font>
 MobileList,<font></font>
 MobileTabs,<font></font>
 UserAuthMobile<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@youla/ui'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> S <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentB = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { user, items, tabs, isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">if</span> (isMobile) {
   <span class="hljs-keyword">return</span> (
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthMobile</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">MobileList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">MobileTabs</span> <span class="hljs-attr">tabs</span>=<span class="hljs-string">{tabs}</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
   )<font></font>
 }<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Banner</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">DesktopList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.SideBar</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthDesktop</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.SideBar</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentB
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's try to estimate the advantages and disadvantages of these components. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/l-/px/jil-pxa15xccew0cgnm6zeauch8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total three pros and cons arguments sucked out of the finger for each of them. </font><font style="vertical-align: inherit;">Yes, I noticed that some criteria are mentioned immediately in both advantages and disadvantages: this was done on purpose, everyone will delete them from the wrong group.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our experience with @youla</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We in our component library @ youla / ui try not to mix desktop and mobile components together, because this is an external dependency for many of our packages and others. The life cycle of these components is as long as possible, I want to keep them as slim and light as possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">two important points</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to note </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firstly, the smaller the assembled JS file, the faster it will be delivered to the user, this is obvious and everyone knows. But this characteristic is important only for the first download of the file, during </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repeated visits the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file will be delivered from the cache, and there will be no code delivery problem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we move on to reason number two, which may soon become, or has already become, the main problem of large web applications. Many have already guessed: yes, we are talking about the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">duration of parsing.</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Modern engines like V8 can cache and the result of parsing, but so far it does not work very efficiently. Eddie Osmani has an excellent article on this topic: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://v8.dev/blog/cost-of-javascript-2019 </font></font></a><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can also subscribe to the V8 blog: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://twitter.com/v8js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is the duration of parsing that we will significantly reduce, this is especially important for </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mobile devices with weak processors</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In application packages @ youla-web / app- * the development is more ‚Äúbusiness-oriented‚Äù. And for the sake of speed / simplicity / personal preferences, the decision is chosen that the developer himself considers the most correct in this situation. It often happens that when developing small MVP features, it is better to first write a simpler and faster option (&lt;ComponentB /&gt;), in such a component there are half the lines. And, as we know, the more code - the more errors. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After checking the relevance of the feature, it will be possible to replace the component with a more optimized and productive version &lt;ComponentA /&gt;, if necessary.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I also advise you to take a peek at the component. </font><font style="vertical-align: inherit;">If the UIs of the mobile and desktop versions are very different, then perhaps they should be separated, keeping some common logic in one place. </font><font style="vertical-align: inherit;">This will allow you to get rid of the pain when writing complex CSS, problems with errors in one of the displays when refactoring or changing another. </font><font style="vertical-align: inherit;">And vice versa, if the UI is as close as possible, then why do the extra work?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To summarize. </font><font style="vertical-align: inherit;">We understood the terminology of the adaptive / responsive interface, examined several ways to determine mobility and several options for organizing the code structure of the adaptive component, and identified the advantages and disadvantages of each. </font><font style="vertical-align: inherit;">Surely a lot of the above was already known to you, but repetition is the best way to consolidate. </font><font style="vertical-align: inherit;">I hope you learned something new for yourself. </font><font style="vertical-align: inherit;">Next time we want to publish a collection of recommendations for writing progressive web applications, with tips on organizing, reusing and maintaining code.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493274/index.html">30+ concise professional recommendations for Android developer</a></li>
<li><a href="../en493278/index.html">Do I need to smoke to protect against SARS-CoV-2</a></li>
<li><a href="../en493282/index.html">Understanding Network Policies with Calico</a></li>
<li><a href="../en493284/index.html">Kubernetes 1.18: Overview of Key Innovations</a></li>
<li><a href="../en493288/index.html">Five Famous Explained Programming Quotes</a></li>
<li><a href="../en493294/index.html">We look inside the Soviet integrated circuit with TTL</a></li>
<li><a href="../en493298/index.html">C ++, metaprogramming and microcontroller registers</a></li>
<li><a href="../en493300/index.html">Calculation of the center of mass for O (1) using integrated images</a></li>
<li><a href="../en493302/index.html">What technologies have already been called on to fight against coronavirus?</a></li>
<li><a href="../en493304/index.html">Developing a hexapod from scratch (part 8) - improved math movement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>