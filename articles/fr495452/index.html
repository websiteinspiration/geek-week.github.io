<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏾 🤰🏿 👍🏽 Comment préparer un site pour la croissance de la charge 🈳 🧙🏻 🚛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seuls les paresseux n'ont pas obtenu son expertise de l'étagère lointaine et n'ont pas prédit la vie "en ligne" - aussi forcée que le régime de l'auto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment préparer un site pour la croissance de la charge</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/495452/"><img src="https://habrastorage.org/webt/59/b1/yu/59b1yu2sysdvr-db4ct_uu7dhtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seuls les paresseux n'ont pas obtenu son expertise de l'étagère lointaine et n'ont pas prédit la vie "en ligne" - aussi forcée que le régime de l'auto-isolement. Mais le trafic, en effet, a déjà commencé à augmenter, et compte tenu des «vacances», les ressources offrant la livraison de marchandises, les services d'éducation en ligne, et surtout le divertissement en ligne, ne sont peut-être pas prêtes pour le flux de visiteurs dans la nouvelle réalité avant la fin avril. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la base de nos 12 années d'expérience dans le support technique de projets Web et l'administration de serveurs à distance, nous avons préparé une sorte de «manuel de formation»: ce qui vaut la peine d'être vérifié et ce dont vous devez vous occuper si vous voulez être sûr que votre site fera face à n'importe quelle charge. Enfin, presque n'importe qui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici donc 10 points essentiels à la vie active de votre projet web dans les prochains jours et semaines:</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Surveillez votre infrastructure</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tout d'abord, vous devez savoir ce qui se passe avec votre site. </font><font style="vertical-align: inherit;">Si vous savez comment manipuler Prometheus / Grafana, utilisez-les. </font><font style="vertical-align: inherit;">Mais s'il n'y a aucune expérience d'interaction avec eux, ce n'est pas un problème: vous pouvez utiliser n'importe quel service comme datadog - vous pouvez l'installer le plus rapidement possible. </font><font style="vertical-align: inherit;">Toujours compliqué? </font><font style="vertical-align: inherit;">- Faites attention à Pingdom ou Site24x7: ce ne sont pas des services de surveillance à part entière, mais ils conviennent au moins pour être sûr que votre site est accessible et pour savoir quand il est sur le point de tomber.</font></font><br>
 <br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N'oubliez pas: vous ne pouvez contrôler que ce que vous pouvez mesurer. </font><font style="vertical-align: inherit;">Après tout, si vous ne savez pas ce qui se passe à l'intérieur de votre système, et surtout où cela se produit, vous ne pourrez pas le réparer si quelque chose se casse là-bas.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe de nombreuses options pour ce qui pourrait mal tourner lorsque le trafic s'accumule:</font></font><br>
<br>
<ul>
<li>   .</li>
<li>    .</li>
<li>   \.</li>
<li>      \\.</li>
</ul> <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Préparez-vous à la mise à l'échelle</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Une fois que vous voyez que vous avez atteint 80% de la limite de ressources, vous devez commencer immédiatement la mise à l'échelle. Parce que si vous attendez à 100%, le site tombera. Et vous aurez besoin de temps pour restaurer le projet. Sans oublier que tout cela est assez nerveux ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous devez agir rapidement, sinon vous perdrez des visiteurs et vous ferez peut-être encore plus d’erreurs en mode «chef, tout est perdu, brûlez». Par conséquent, lorsque vous atteignez la barre des 80% de la limite de ressources, augmentez l'échelle pour passer à 40%. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Répétez si nécessaire (c) </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) N'oubliez pas de surveiller les performances du disque dur et la bande passante du canal</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est beaucoup plus difficile de comprendre ce qui se passe lorsque le système est «stupide» en raison d'une charge de disque élevée ou de limitations de bande passante. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Surveillez les performances de vos bases de données,</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
surtout si vous utilisez des bases de données cloud. RDS, Cloud SQL, MongoDB Atlas et d'autres services sont gérés à l'aide de technologies cloud, mais ils ont leurs propres limites et doivent être surveillés pour évoluer dans le temps. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Lorsque votre base de données crée une charge importante sur le CPU - vérifiez l'utilisation des index, cela aide vraiment</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'introduction de l'indexation réduit considérablement la charge du processeur. Supposons que le CPU de votre base de données soit utilisé à 90%. Vous voudrez probablement réduire de moitié pour gérer la double charge. Mais si la plupart de vos requêtes ne sont pas indexées, l'introduction de l'indexation peut réduire la charge CPU de 10 fois. L'analyse de l'utilisation des index en vaut la chandelle! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6) Gardez un œil sur les comptes des services des fournisseurs de cloud</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est facile de l'oublier lorsque vous avez des problèmes de temps. Par conséquent, définissez des alertes sur votre système de facturation afin de recevoir des notifications de dépassements de coûts possibles. La largeur du canal est ce qui est particulièrement coûteux. S'il n'est pas possible de transférer du contenu vers CDN ou vers des sociétés d'hébergement qui fournissent de gros volumes de trafic à moindre coût, comme like100tb.com ou leaseweb, préparez-vous à des coûts élevés. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7) Évitez l'état dans votre application</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgré le fait qu'il soit possible de faire évoluer les ressources du processeur ou de la RAM dans le cloud, il y a encore des limites qui ne peuvent pas être franchies. De ce point de vue, si vous souhaitez évoluer horizontalement, en ajoutant de nouvelles instances de la même application, elle doit être prête pour un tel développement d'événements. Et lorsque vous disposez de plusieurs instances de la même application, les demandes des utilisateurs seront réparties sur plusieurs serveurs et, par conséquent, vous ne pourrez pas stocker de données sur un disque local. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8) Envisagez de passer au cloud si le site est sur un hébergement dédié</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette situation, vous ne pouvez pas facilement évoluer: l'ajout de serveurs prendra un certain temps - il faudra de quelques heures à quelques jours pour obtenir de nouveaux serveurs disponibles. De plus, vous payez généralement sur une base mensuelle et non horaire. En général, vous ne voulez évidemment pas attendre des heures, voire des jours, si votre site "ment". Il est beaucoup plus facile d'évoluer dans le cloud. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9) "Resserrer" l'infrastructure</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il y a plusieurs choses de base qui sont désactivées par défaut, et elles doivent être optimisées - au niveau du système d'exploitation, du réseau, du gestionnaire d'application et de l'application elle-même. Et cela peut réduire considérablement la consommation de ressources. Recherchez la configuration de votre pile technologique sur Google et suivez les instructions de base. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10) Préparez-vous à lancer la version en cache</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgré tous vos efforts, avec un trafic multiplié par cent, vous vous «allongerez». </font><font style="vertical-align: inherit;">Il faut du temps pour évoluer. </font><font style="vertical-align: inherit;">Alors préparez-vous à utiliser la version en cache statique. </font><font style="vertical-align: inherit;">Pour cela, le cache Cloudfront / Cloudflare, votre cache CDN, le cache nginx ou tout autre est utile. </font><font style="vertical-align: inherit;">Assurez-vous simplement d'en avoir l'opportunité si vous en avez besoin.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495436/index.html">Nous ouvrons l'accès au cours pratique sur l'utilisation du système DLP</a></li>
<li><a href="../fr495438/index.html">Langue R pour les utilisateurs d'Excel (cours vidéo gratuit)</a></li>
<li><a href="../fr495446/index.html">L'antigravité n'est pas ce que vous pensiez</a></li>
<li><a href="../fr495448/index.html">Mitaps en ligne pour toute la semaine sur le dos, le devant, QA, PM, DevOps et un peu sur les robots, à partir du 3 avril</a></li>
<li><a href="../fr495450/index.html">Débogage des applications Golang lourdement chargées ou comment nous avons cherché un problème dans Kubernetes qui n'était pas là</a></li>
<li><a href="../fr495454/index.html">Brève introduction à BPF et eBPF</a></li>
<li><a href="../fr495456/index.html">Examen de 14 nouveaux plugins pour Figma qui aideront à augmenter la productivité pendant que nous tous</a></li>
<li><a href="../fr495458/index.html">Comment écrire du code lorsque les enfants courent autour de vous et demandent: «Pour quoi travaillerez-vous?»</a></li>
<li><a href="../fr495460/index.html">Une bulle de gaz de 22 000 fois la taille de la Terre a explosé sur Uranus</a></li>
<li><a href="../fr495462/index.html">.NET Core: intrinsèque x86_64 sur les machines virtuelles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>