<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ ๐๐ป ๐ ุงูุนุฏุฏ ุงูุฃูุตู ููููู ูู ุชุนุฏุงุฏ ุงูุฌุฒุก ุงูุซุงูู ๐ง๐ฝ ๐ฑ๏ธ ๐ฉ๐พโ๐ซ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฌุฒุก ุงูุฃูู ุงููุธุฑู ย|ยุงูุฌุฒุก ุงูุซุงูู ุนููู
 
 
 ููุงุตู ุงูุจุญุซ ุนู ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูููู ูู ุงูุชุนุฏุงุฏ. 
 ูุฐู ุงููุฑุฉ ุณูู ูุฑูุฒ ุนูู ุงูุฌุงูุจ ุงูุนููู ูููุถูุฉ ููุฑู ููู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุงูุนุฏุฏ ุงูุฃูุตู ููููู ูู ุชุนุฏุงุฏ ุงูุฌุฒุก ุงูุซุงูู</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501870/"><nobr><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃูู ุงููุธุฑู</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;|&nbsp;</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุซุงูู ุนููู</font></font></b></nobr><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุตู ุงูุจุญุซ ุนู ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูููู ูู ุงูุชุนุฏุงุฏ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงููุฑุฉ ุณูู ูุฑูุฒ ุนูู ุงูุฌุงูุจ ุงูุนููู ูููุถูุฉ ููุฑู ููู ุณุชุณุชุฌูุจ IDE ูุงููุฌูุน ู JVM ูุฅูุฌุงุฒุงุชูุง.</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชูู</font></font></h1><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏูุงุช </font></font></a><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javac </font></font></a><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุงูุงุณุชุฎุฑุงุฌ </font></font></a><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏููุงูููู ููู ุงูุทุจูุฉ ุงูุซูุงุจุช </font></font></a><br>
โโโโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตุนูุจุงุช ููุงุฌุฆุฉ </font></font></a><br>
โโโโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุจู ูุดุฑู </font></font></a><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบูุฑ ุขูู </font></font></a><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ </font></font></a><br>
โโโโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javac ูุงูุชุจุฏูู </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุฃุฏุงุก </font></a></font><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชูุชุงุฌ </font></font></a><br>
โโ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฑุฏ ุฅุถุงููุฉ</font></font></a><br>
<br>
<a name="Tools"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏูุงุช</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุชูู ุจูุง Javac: ููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุทุน ุงูุดุฎุตูุงุช ุงูุชู ูุง ุชุญุจูุง ูู ุงููุนุฑูุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุญุธุฑ ุงูููุฑูุซ ูููุง </font></font><code>java.lang.Enum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ุจุงููุณุจุฉ ููุชุฌุงุฑุจ ุ ูุญุชุงุฌ ุฅูู ุฃุฏูุงุช ุฃุฎุฑู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุฎุชุจุงุฑ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฑุถูุงุช ุจุงุณุชุฎุฏุงู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">asmtools</font></a><font style="vertical-align: inherit;"> - ุงููุฌูุน </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ูุงููู</font></a><font style="vertical-align: inherit;"> ูู JVM ุ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ูููุดุฆ</font></a><font style="vertical-align: inherit;"> ูููุงุช ูุฆุฉ ุนูู ูุทุงู ุตูุงุนู - ุจุงุณุชุฎุฏุงู ููุชุจุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌู ุจุณุงุทุฉ ุงูููู ุ ุณูุชู ุชูุฑุงุฑ ุฌููุฑ ูุง ูุญุฏุซ ูู ููุฏ ุฒุงุฆู ูุดุจู ุฌุงูุง.</font></font><br>
<br>
<a name="Javac"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุงูุงู</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุทุฉ ุงูุทูุงู ุ ูู ุงูููุทูู ุฃู ุชุฃุฎุฐ ุฃูุถู ูุชูุฌุฉ ุ ูููู ุชุญููููุง ุจุฏูู ุญูู ุ ุจูุณุงุนุฏุฉ ูุงุญุฏุฉ ููุท </font></font><code>javac</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุดูุก ุจุณูุท ููุง - ููุญู ุฅูุดุงุก ููู ูุตุฏุฑ ุงูุชุนุฏุงุฏ ูุฅุถุงูุฉ ุนูุงุตุฑ ุฅูู ุฃูู ุญุชู ูุฑูุถ javac ูุชุฌููุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ูุนูุฉ "ุฑูุฒ ูุจูุฑ ุฌุฏุง". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฐ ููุช ุทููู ุฌุฏูุง ุ ููุฐ Java 1.7 ุ ุชู ุงูุงุญุชูุงุธ ุจูุฐุง ุงูุฑูู ุนูุฏ ูุณุชูู 2_746 ุนูุตุฑูุง. </font><font style="vertical-align: inherit;">ูููู ูู ููุงู ูุง ุจุนุฏ Java 11 ุ ูุงูุช ููุงู ุชุบููุฑุงุช ูู ุงูุฎูุงุฑุฒููุฉ ูุชุฎุฒูู ุงูููู ูู ุงูุชุฌูุน ุงูุซุงุจุช ูุงูุฎูุถ ุงูุนุฏุฏ ุงูุฃูุตู ุฅูู 2_743. </font><font style="vertical-align: inherit;">ูุนู ุ ูุนู ุ ููุท ุจุณุจุจ ุชุบููุฑ ุชุฑุชูุจ ุงูุนูุงุตุฑ ูู ูุฌููุนุฉ ุงูุซูุงุจุช! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุฑูุฒ ุนูู ุฃูุถู ุงูููู.</font></font><br>
<br>
<a name="ExtractMethod"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุงูุงุณุชุฎุฑุงุฌ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุฃุญุฏ ุงูุนูุงูู ุงููููุฏุฉ ูุฑุชุจุท ุจุญุฌู ุงูุฑูุฒ ุงูุซุงููู ูู ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ ุ ูุณูุญุงูู ุฌุนู ุงูุฃุฎูุฑ ุฃุณูู ูุง ูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฐูุฑ ููู ุชุจุฏู ุนูู ูุซุงู ุงูุนุฏ </font></font><code>FizzBuzz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฌุฒุก ุงูุฃูู. </font><font style="vertical-align: inherit;">ุชููุฑ ุงูุชุนูููุงุช ุชุนูููุงุช ุงูุชุฌููุน ุงูููุงุณุจุฉ.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงุจุชุฉ {}</font></font></b>
                        <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">static</span>  {<font></font>
    Fizz = <span class="hljs-keyword">new</span> FizzBuzz(<span class="hljs-string">"Fizz"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-comment">//  0: new           #2                  // class FizzBuzz</span>
    <span class="hljs-comment">//  3: dup</span>
    <span class="hljs-comment">//  4: ldc           #22                 // String Fizz</span>
    <span class="hljs-comment">//  6: iconst_0</span>
    <span class="hljs-comment">//  7: invokespecial #24                 // Method "&lt;init&gt;":(Ljava/lang/String;I)V</span>
    <span class="hljs-comment">// 10: putstatic     #25                 // Field Fizz:LFizzBuzz;</span>
    Buzz = <span class="hljs-keyword">new</span> FizzBuzz(<span class="hljs-string">"Buzz"</span>, <span class="hljs-number">1</span>);
    <span class="hljs-comment">// 13: new           #2                  // class FizzBuzz</span>
    <span class="hljs-comment">// 16: dup</span>
    <span class="hljs-comment">// 17: ldc           #28                 // String Buzz</span>
    <span class="hljs-comment">// 19: iconst_1</span>
    <span class="hljs-comment">// 20: invokespecial #24                 // Method "&lt;init&gt;":(Ljava/lang/String;I)V</span>
    <span class="hljs-comment">// 23: putstatic     #30                 // Field Buzz:LFizzBuzz;</span>
    FizzBuzz = <span class="hljs-keyword">new</span> FizzBuzz(<span class="hljs-string">"FizzBuzz"</span>, <span class="hljs-number">2</span>);
    <span class="hljs-comment">// 26: new           #2                  // class FizzBuzz</span>
    <span class="hljs-comment">// 29: dup</span>
    <span class="hljs-comment">// 30: ldc           #32                 // String FizzBuzz</span>
    <span class="hljs-comment">// 32: iconst_2</span>
    <span class="hljs-comment">// 33: invokespecial #24                 // Method "&lt;init&gt;":(Ljava/lang/String;I)V</span>
    <span class="hljs-comment">// 36: putstatic     #33                 // Field FizzBuzz:LFizzBuzz;</span><font></font>
<font></font>
    $VALUES = <span class="hljs-keyword">new</span> FizzBuzz[] {
    <span class="hljs-comment">// 39: iconst_3</span>
    <span class="hljs-comment">// 40: anewarray     #2                  // class FizzBuzz</span><font></font>
        Fizz, <font></font>
    <span class="hljs-comment">// 43: dup</span>
    <span class="hljs-comment">// 44: iconst_0</span>
    <span class="hljs-comment">// 45: getstatic     #25                 // Field Fizz:LFizzBuzz;</span>
    <span class="hljs-comment">// 48: aastore</span><font></font>
        Buzz, <font></font>
    <span class="hljs-comment">// 49: dup</span>
    <span class="hljs-comment">// 50: iconst_1</span>
    <span class="hljs-comment">// 51: getstatic     #30                 // Field Buzz:LFizzBuzz;</span>
    <span class="hljs-comment">// 54: aastore</span><font></font>
        FizzBuzz<font></font>
    <span class="hljs-comment">// 55: dup</span>
    <span class="hljs-comment">// 56: iconst_2</span>
    <span class="hljs-comment">// 57: getstatic     #33                 // Field FizzBuzz:LFizzBuzz;</span>
    <span class="hljs-comment">// 60: aastore</span><font></font>
    };<font></font>
    <span class="hljs-comment">// 61: putstatic     #1                  // Field $VALUES:[LFizzBuzz;</span>
    <span class="hljs-comment">// 64: return</span><font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ูุถุน ุฅูุดุงุก ุงููุตูููุฉ ูููุฆูุง </font></font><code>$VALUES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุทุฑููุฉ ูููุตูุฉ.</font></font><br>
<br>
<pre><code class="java hljs">$VALUES = createValues();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุชุทููุฑ ูุฐู ุงูููุฑุฉ ุ ูููู ููู ุฅูุดุงุก ูุซููุงุช ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุฅูู ููุณ ุงูุทุฑููุฉ:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">static</span>  {<font></font>
    FizzBuzz[] localValues = createValues();<font></font>
<font></font>
    <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;<font></font>
    Fizz = localValues[index++];<font></font>
    Buzz = localValues[index++];<font></font>
    FizzBuzz = localValues[index++];<font></font>
<font></font>
    $VALUES = localValues;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> FizzBuzz[] createValues() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FizzBuzz[] {
        <span class="hljs-keyword">new</span> FizzBuzz(<span class="hljs-string">"Fizz"</span>, <span class="hljs-number">0</span>), 
        <span class="hljs-keyword">new</span> FizzBuzz(<span class="hljs-string">"Buzz"</span>, <span class="hljs-number">1</span>), 
        <span class="hljs-keyword">new</span> FizzBuzz(<span class="hljs-string">"FizzBuzz"</span>, <span class="hljs-number">2</span>)<font></font>
    };<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุถู ุจุงููุนู ุ ูููู ูู ุงูุชูุงุท ูุนูุตุฑ ูุตูููุฉ ูุฒูุงุฏุฉ ุงูููุฑุณ ุงููุงุญูุฉ ูููู 6 ุจุงูุช ุ ููู ุฃูุฑ ูููู ููุบุงูุฉ ุจุงููุณุจุฉ ููุง. </font><font style="vertical-align: inherit;">ุถุนูู ูู ุทุฑููุฉ ูููุตูุฉ.</font></font><br>
<br>
<pre><code class="java hljs">
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> valueIndex;<font></font>
<font></font>
<span class="hljs-keyword">static</span>  {<font></font>
    $VALUES = createValues();<font></font>
<font></font>
    valueIndex = <span class="hljs-number">0</span>;<font></font>
    Fizz = nextValue();<font></font>
    Buzz = nextValue();<font></font>
    FizzBuzz = nextValue();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> FizzBuzz <span class="hljs-title">nextValue</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> $VALUES[valueIndex++];<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุบุฑู </font><font style="vertical-align: inherit;">
ุชููุฆุฉ </font><font style="vertical-align: inherit;">11 ุจุงูุช </font></font><code>$VALUES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>valueIndex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุนูุฏุฉ ูู ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ </font><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูุชุจูู 65_524 ุจุงูุช ุฅุถุงููุฉ ูุชููุฆุฉ ุงูุญููู. </font><font style="vertical-align: inherit;">ุชุชุทูุจ ุชููุฆุฉ ูู ุญูู 6 ุจุงูุช ุ ููุง ูููููุง ูู ุฅูุดุงุก ุชุนุฏุงุฏ ูุนูุงุตุฑ 10_920. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ููุฑุจ ูู ุฃุฑุจุนุฉ ุฃุถุนุงู ุงูููู ููุงุฑูุฉ ูุน javac ูุฌุจ ุจุงูุชุฃููุฏ ุงูุงุญุชูุงู ุจู ูู ุฎูุงู ุฅูุดุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑูุฒ ูุตุฏุฑ ุงููููุฏ: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExtractMethodHugeEnumGenerator.java</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุซุงู ูููุฆุฉ ุงูุชู ุชู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ุฅูุดุงุคูุง</font></a><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExtractMethodHugeEnum.class</font></font></a><br>
<a name="ConDy"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซูุงุจุช ุฏููุงููููุฉ ููู ุงูุทุจูุฉ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุงู ุงูููุช ูุชุฐูุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 309 </font></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซูุงุจุชู ุงูุฏููุงููููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุบุงูุถุฉ </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฌููุฑ ุงูุงุจุชูุงุฑ ุจุงุฎุชุตุงุฑ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุถุงูุช ุงูุฃููุงุน ุงูููุฌูุฏุฉ ุจุงููุนู ุงููุฏุนููุฉ ุจูุฌููุนุฉ ูู ุงูุซูุงุจุช ููุนูุง ุขุฎุฑ </font></font><code>CONSTANT_Dynamic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุนูุฏ ุชุญููู ูุฆุฉ ุ ููุนุฑู ููุน ูุฐุง ุงูุซุงุจุช ุ ูููู ูููุชู ุบูุฑ ูุนุฑููุฉ. ูุคุฏู ุงูุชุญููู ุงูุฃูู ููุซุงุจุช ุฅูู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงูุชูููุฏ ุงููุญุฏุฏุฉ ูู ุฅุนูุงููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุตุจุญ ูุชูุฌุฉ ูุฐู ุงูุทุฑููุฉ ูููุฉ ุซุงุจุชุฉ. ูุง ุชูุฌุฏ ุทุฑู ูุชุบููุฑ ุงููููุฉ ุงููุฑุชุจุทุฉ ุจุซุงุจุช ุชูุช ุชููุฆุชู ุจุงููุนู. ููู ุฃูุฑ ููุทูู ุชูุงููุง ููุซุงุจุช.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุฑุช ุฃูุถูุง ูู Singleton ุ ูุนููู ูุณูุงููุง ุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุชุคูุฏ ุงูููุงุตูุงุช ุจุดูู ูููุตู ุฃูู ูุง ููุฌุฏ ุถูุงู ูุณูุงูุฉ ุงูุฎูุท ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงูุชููุฆุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท ุฃูุซุฑ ูู ูุฑุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุถููู ููุท ุฃูู ูู ุญุงูุฉ ุงูุนุฏูุฏ ูู ุงูููุงููุงุช ุฅูู ุทุฑููุฉ ุงูุชูููุฏ ูููุณ ุงูุซุงุจุช ุ ูุฅู JVM ุณูู ูุฑูู ุนููุฉ ูุนุฏููุฉ ููุญุฏุฏ ุฅุญุฏู ุงูููู ุงููุญุณูุจุฉ ูุฏูุฑ ุงููููุฉ ุงูุซุงุจุชุฉ ุ ูุณูุชู ุงูุชุถุญูุฉ ุจุงูููู ุงูุฃุฎุฑู ุฅูู ุฌุงูุน ุงูููุงูุฉ.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุณูููู ุ ูุชู ุญู ุซุงุจุช CONSTANT_Dinamic ุนู ุทุฑูู ุชูููุฐ ุฃุณููุจ ุงูุชุดุบูู ุงูุฎุงุต ุจู ุนูู ุงููุนููุงุช ุงูุชุงููุฉ: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู ุจุญุซ ูุญูู ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุณูุฉ ุงูุชู ุชูุซู ูููู ุงุณู ุงูุซุงุจุช ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฆุฉ ุงูุชู ุชูุซู ุงูููุน ุงูุซุงุจุช ุงููุชููุน ุ ู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ูุณูุทุงุช ุงูุชูููุฏ ุงููุชุจููุฉ.</font></font></li>
</ol><br>
As with invokedynamic, multiple threads can race to resolve, but a unique winner will be chosen and any other contending answers discarded.<br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุญููู ุงูููู ูู ูุฌููุนุฉ ุงูุซูุงุจุช ูู ุงูุฑูุฒ ุงูุซุงููู ุ ูุชู ุชูููุฑ ุงูุฃูุงูุฑ </font></font><code>ldc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>ldc_w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>ldc2_w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ููููุง ูู ุฃูููู - </font></font><code>ldc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูู ุ ุนูู ุนูุณ ุงูุขุฎุฑูู ุ ูุงุฏุฑ ุนูู ุชุญููู ุงูููู ููุท ูู ุฃูู 255 ูุชุญุฉ ูู ุงูุชุฌูุน ุงูุซุงุจุช ุ ููููู ูุฃุฎุฐ 1 ุจุงูุช ุฃูู ูู ุงูุจุงูุช ููุฏ. ูู ูุฐุง ูุนุทููุง ุชูููุฑ ูุตู ุฅูู 255 ุจุงูุช </font></font><code>255 + ((65_524 - (255 * 5)) / 6) = 10_963</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุตุฑ ูู ุงูุชุนุฏุงุฏ. ูุฐู ุงููุฑุฉ ููุณ ุงูููู ูุซูุฑูุง ููุฅุนุฌุงุจ ุ ููููู ูุง ูุฒุงู ููุฌูุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุญูู ุจูุฐู ุงููุนุฑูุฉ ุ ููุจุฏุฃ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ ุ ุจุฏูุงู ูู ุงุณุชุฏุนุงุกุงุช ุงูุทุฑููุฉ ุ </font></font><code>nextValue()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุงูุขู ุจุชุญููู ูููุฉ ุงูุซุงุจุช ุงูุฏููุงูููู. </font></font><code>ordinal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชูุฑูุฑ </font><font style="vertical-align: inherit;">ูููุฉ </font><font style="vertical-align: inherit;">ุงููุคุดุฑ ุงูุชุฑุชูุจู ูุนูุตุฑ ุงูุชุนุฏุงุฏ ุจุดูู ุตุฑูุญ ุ ูุจุงูุชุงูู ุงูุชุฎูุต ูู ุงูุญูู </font></font><code>valueIndex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุทุฑููุฉ ุงููุตูุน</font></font><code>nextValue()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุดููู ุญูู ุณูุงูุฉ ููุถูุน ุงูุชูููุฐ ูุฏููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุทุฑููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฏ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุณูุณุชุฎุฏู ููุนูุง ูุฑุนููุง ุฎุงุตูุง ูู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">MethodHandle</font></a><font style="vertical-align: inherit;"> ูุญุงูู ุณููู ุนุงูู </font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู Java. </font><font style="vertical-align: inherit;">ุชููุฑ ุงูููุชุจุฉ ุงูููุงุณูุฉ ุทุฑููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MethodHandles.Lookup :: findConstructor ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุญุตูู ุนูู ูุซู ูุฐู ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุ ูููู ูู ุญุงูุชูุง ุ ุณุชูุชู JVM ุจุจูุงุก ููุจุถ ุงูุทุฑููุฉ ุงูุถุฑูุฑู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุณุชุฎุฏุงู ูููุดุฆ ุชุนุฏุงุฏูุง ูุทุฑููุฉ ุชูููุฏ ุ ูุฌุจ ุชุนุฏููู ููููุงู ุนู ุทุฑูู ุชุบููุฑ ุงูุชูููุน. </font><font style="vertical-align: inherit;">ุณุชุชู ุฅุถุงูุฉ ุงููุนููุงุช ุงููุทููุจุฉ ูุทุฑููุฉ ุงูุชูููุฏ ุฅูู ุงููููุดุฆ ุงูุชูููุฏู ูุนูุตุฑ ุชุนุฏุงุฏ ุงูุงุณู ูุงูุฑูู ุงูุชุณูุณูู:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">FizzBuzz</span><span class="hljs-params">(MethodHandles.Lookup lookup, String name, Class&lt;?&gt; enumClass, <span class="hljs-keyword">int</span> ordinal)</span> </span>{
    <span class="hljs-keyword">super</span>(name, ordinal);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูู ููุฏ ุฒุงุฆู ุ ุณุชุจุฏู ุงูุชููุฆุฉ ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">static</span>  {<font></font>
    Fizz = JVM_ldc(FizzBuzz::<span class="hljs-keyword">new</span>, <span class="hljs-string">"Fizz"</span>, <span class="hljs-number">0</span>);<font></font>
    Buzz = JVM_ldc(FizzBuzz::<span class="hljs-keyword">new</span>, <span class="hljs-string">"Buzz"</span>, <span class="hljs-number">1</span>);<font></font>
    FizzBuzz = JVM_ldc(FizzBuzz::<span class="hljs-keyword">new</span>, <span class="hljs-string">"FizzBuzz"</span>, <span class="hljs-number">2</span>);<font></font>
<font></font>
    $VALUES = createValues();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุซุงู ุฃุนูุงู ุ ุชู </font></font><code>ldc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู </font><font style="vertical-align: inherit;">ุงูุชุนูููุงุช </font><font style="vertical-align: inherit;">ูููุงููุงุช ุทุฑู </font></font><code>JVM_ldc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูู ุงูุฑูุฒ ุงูุซุงููู ูู ููุงููุง ุณุชููู ุชุนูููุงุช JVM ุงูููุงุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ูุฏููุง ุงูุขู ุซุงุจุชูุง ูููุตูุงู ููู ุนูุตุฑ ูู ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุ </font></font><code>$VALUES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃูุถูุง ุชูููุฐ </font><font style="vertical-align: inherit;">ุฅูุดุงุก ุงูุตููู ูููุฆู ูู </font><font style="vertical-align: inherit;">ุฎูุงู ุซุงุจุช ุฏููุงูููู. </font><font style="vertical-align: inherit;">ุทุฑููุฉ ุงูุชูููุฏ ุจุณูุทุฉ ููุบุงูุฉ:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> FizzBuzz[] createValues(MethodHandles.Lookup lookup, String name, Class&lt;?&gt; clazz, FizzBuzz... elements) {
    <span class="hljs-keyword">return</span> elements;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุญููุฉ ูู ูุงุฆูุฉ ุงููุนููุงุช ุงูุซุงุจุชุฉ ููุฐุง ุงูุซุงุจุช ุงูุฏููุงูููู ุ ุณูููู ุจุฅุฏุฑุงุฌ ุฌููุน ุงูุนูุงุตุฑ ุงูุชู ูุฑูุฏ ูุถุนูุง ูู </font></font><code>$VALUES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<blockquote><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุงูุชูููุฏ:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ...</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  1: # 54 REF_invokeStatic FizzBuzz.createValues: (Ljava / lang / invoke / MethodHandles $ Lookupุ Ljava / lang / Stringุ Ljava / lang / Classุ [LFizzBuzzุ) [LFizzBuzzุ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ุงูุญุฌุฌ ุงูุฃุณููุจ:</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      # 1 # 0: ุงูููุฑุงู: LFizzBuzz ุ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      # 2 # 0: ุงูุทููู: LFizzBuzz ุ</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      # 3 # 0: FizzBuzz: LFizzBuzz ุ</font></font><font></font>
</pre><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุฏ JVM ุงููุตูููุฉ ูู ูุฐู ุงููุนููุงุช ุงูุซุงุจุชุฉ ูููุฑุฑูุง ุฅูู ุทุฑููุฉ ุงูุชูููุฏ ุงูุฎุงุตุฉ ุจูุง ููุนููุฉ vararg </font></font><code>elements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงููุนููุงุช ุงูุซุงุจุชุฉ ูู 65_535 ุงูุชูููุฏู ุ ูุฐูู ููู ุงููุถููู ุฃู ูููู ูุงููุงู ูุฌููุน ุนูุงุตุฑ ุงูุนุฏ ุ ุจุบุถ ุงููุธุฑ ุนู ุนุฏุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ููุชุญูููุงุช ุงูุชู ุชุญุชูู ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูุนูุงุตุฑ ุ ุณูููู ูุฐุง ุงูุชุบููุฑ ูู ุญุฌู ููู ุงููุฆุฉ ุงููุงุชุฌ ุ ููู ุญุงูุฉ ุฃูู ุ ุจุณุจุจ ุงูุนุฏุฏ ุงููุจูุฑ ูู ุงูุนูุงุตุฑ ุ </font></font><code>createValues()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงู ูุฌุจ ุชูุณูู </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุฅูู ุนุฏุฉ ุฃุฌุฒุงุก ุ ููุง ุฃููุง ุชุญูุธ ุงููุชุญุงุช ูู ุงูุชุฌูุน ุงูุซุงุจุช. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูููุงูุฉ ุ ุฅููุง ุฌูููุฉ.</font></font><br>
<br>
<a name="Surprise"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตุนูุจุงุช ููุงุฌุฆุฉ</font></font></h1><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุง ูุชุบูุจ ุนููู ุจุดูู ุจุทููู ูู ุฎูุงู ุฅูุดุงุก ุตููู ูุฏูููุง. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููุฑ ุงูููุชุจุงุช ุนุงููุฉ ุงููุณุชูู ูุงุฌูุฉ ููุงุณุจุฉ ููุงุจู ุจุนุถ ุงููููุฏ ุนูู ุญุฑูุฉ ุงูุนูู. </font><font style="vertical-align: inherit;">ููุชุจุฉ ASM ุงูุชู ูุณุชุฎุฏููุง ูุฅูุดุงุก ูููุงุช ุงููุฆุฉ ููุณุช ุงุณุชุซูุงุกู. </font><font style="vertical-align: inherit;">ูุง ูููุฑ ุขููุงุช ููุชุญูู ุงููุจุงุดุฑ ูู ูุญุชููุงุช ูุฌููุนุฉ ุงูุซูุงุจุช. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ูุง ูููู ูุฐุง ููููุง ุฌุฏูุง ุ ูููู ููุณ ูู ุญุงูุชูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุชุฐูุฑ ุ ูุญุชุงุฌ ุฅูู ุฃูู 255 ุนูุตุฑูุง ูู ุงูุชุฌูุน ุงูุซุงุจุช ูุญูุธ ูุญุฏุงุช ุงูุจุงูุช ุงูุซูููุฉ ูู ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุฅุถุงูุฉ ุซูุงุจุช ุฏููุงููููุฉ ุจุทุฑููุฉ ููุงุณูุฉ ุ ุณูุชู ูุถุนูุง ูู ูุคุดุฑุงุช ุนุดูุงุฆูุฉ ููุฎุชูุทุฉ ูุน ุนูุงุตุฑ ุฃุฎุฑู ููุณุช ุญุงุณูุฉ ุจุงููุณุจุฉ ููุง. </font><font style="vertical-align: inherit;">ูุฐุง ุณูููุนูุง ูู ุงููุตูู ุฅูู ุงูุญุฏ ุงูุฃูุตู.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฒุก ูู ูุฌููุนุฉ ูู ุงูุซูุงุจุช ุชุชุดูู ุจุงูุทุฑููุฉ ุงูุชูููุฏูุฉ</font></font></b>
                        <div class="spoiler_text"><blockquote><pre>Constant pool:<font></font>
   #1 = Utf8               FizzBuzz<font></font>
   #2 = Class              #1             // FizzBuzz<font></font>
   #3 = Utf8               java/lang/Enum<font></font>
   #4 = Class              #3             // java/lang/Enum<font></font>
   #5 = Utf8               $VALUES<font></font>
   #6 = Utf8               [LFizzBuzz;<font></font>
   #7 = Utf8               valueIndex<font></font>
   #8 = Utf8               I<font></font>
   #9 = Utf8               Fizz<font></font>
  #10 = Utf8               LFizzBuzz;<font></font>
  #11 = Utf8               Buzz<font></font>
  #12 = Utf8               FizzBuzz<font></font>
  #13 = Utf8               values<font></font>
  #14 = Utf8               ()[LFizzBuzz;<font></font>
  #15 = NameAndType        #5:#6          // $VALUES:[LFizzBuzz;<font></font>
  #16 = Fieldref           #2.#15         // FizzBuzz.$VALUES:[LFizzBuzz;<font></font>
  #17 = Class              #6             // "[LFizzBuzz;"<font></font>
  #18 = Utf8               clone<font></font>
  #19 = Utf8               ()Ljava/lang/Object;<font></font>
  #20 = NameAndType        #18:#19        // clone:()Ljava/lang/Object;<font></font>
  #21 = Methodref          #17.#20        // "[LFizzBuzz;".clone:()Ljava/lang/Object;<font></font>
  ...<font></font>
  #40 = NameAndType        #9:#10         // Fizz:LFizzBuzz;<font></font>
  #41 = Dynamic            #0:#40         // #0:Fizz:LFizzBuzz;<font></font>
  #42 = Fieldref           #2.#40         // FizzBuzz.Fizz:LFizzBuzz;<font></font>
  #43 = NameAndType        #11:#10        // Buzz:LFizzBuzz;<font></font>
  #44 = Dynamic            #0:#43         // #0:Buzz:LFizzBuzz;<font></font>
  #45 = Fieldref           #2.#43         // FizzBuzz.Buzz:LFizzBuzz;<font></font>
  #46 = NameAndType        #12:#10        // FizzBuzz:LFizzBuzz;<font></font>
  #47 = Dynamic            #0:#46         // #0:FizzBuzz:LFizzBuzz;<font></font>
  #48 = Fieldref           #2.#46         // FizzBuzz.FizzBuzz:LFizzBuzz;<font></font>
</pre><br>
</blockquote><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณู ุงูุญุธ ุ ููุฌุฏ ุญู ุจุฏูู - ุนูุฏ ุฅูุดุงุก ูุฆุฉ ุ ููููู ุชุญุฏูุฏ ูุฆุฉ ูุฆุฉ ูุชู ูู ุฎูุงููุง ูุณุฎ ูุฌููุนุฉ ูู ุงูุซูุงุจุช ูุณูุฉ ูุน ูุตู ูุทุฑู ุงูุชูููุฏ. </font><font style="vertical-align: inherit;">ุงูุขู ููุท ุนูููุง ุฅูุดุงุคูุง ูุฏูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ููุณ ุงูุฃูุฑ ุตุนุจูุง ููุง ูุฏ ูุจุฏู ูููููุฉ ุงูุฃููู. </font><font style="vertical-align: inherit;">ุชูุณูู ููู ุงููุตู ุจุณูุท ููุบุงูุฉ ุ ููุง ุฃู ุชููููู ุงููุฏูู ุนูููุฉ ุดุงูุฉ ุฅูู ุญุฏ ูุง ุ ูููููุง ููุณุช ูุนูุฏุฉ ุนูู ุงูุฅุทูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ุดูุก ููุง ูู ุฎุทุฉ ูุงุถุญุฉ. </font><font style="vertical-align: inherit;">ูุชุนุฏุงุฏ ูู </font></font><code>COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงุตุฑ ุงูุชู ูุญุชุงุฌูุง:</font></font><br>
<br>
<ul>
<li><code>COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจ ุงูุณุฌูุงุช </font></font><code>CONSTANT_Dynamic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุซูุงุจุชูุง ุงูุฏููุงููููุฉ</font></font></li>
<li><code>COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฌูุงุช ุงููุชุงุจุฉ </font></font><code>CONSTANT_NameAndType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุฃุฒูุงุฌ ูู ุงูุฑูุงุจุท ุฅูู ุงุณู ุนูุตุฑ ุงูุชุนุฏุงุฏ ูููุนู. </font><font style="vertical-align: inherit;">ุณูููู ุงูููุน ูู ููุณู ุจุงููุณุจุฉ ููุฌููุน ุ ููุฐุง ูู ููุน ุงููุตู ูู ุชุนุฏุงุฏูุง.</font></font></li>
<li><code>COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจ ุงูุณุฌูุงุช </font></font><code>CONSTANT_Utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุฃุณูุงุก ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ูุจุงุดุฑุฉ</font></font></li>
<li><code>COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฌูุงุช ุงูููุน </font></font><code>CONSTANT_Integer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุงูุฃุฑูุงู ุงูุชุณูุณููุฉ ูุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู ุงููููุดุฆ ููููุฉ ูุนููุฉ</font></font><code>ordinal</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูุงุก ุงููุฆุงุช ุงูุญุงููุฉ ูุงูุฃุณุงุณูุฉ ุ ูุงูุณูุงุช ุ ูุชูููุนุงุช ุงูุทุฑููุฉ ูุชูุงุตูู ุงูุชูููุฐ ุงููููุฉ ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูููู ููููุชููู ุงููุธุฑ ูู ุดูุฑุฉ ุงููุตุฏุฑ ูููููุฏ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุงููุซูุฑ ูู ุงูุนูุงุตุฑ ุงูููููุฉ ูู ูุฌููุนุฉ ุงูุซูุงุจุช ุงูุชู ุชุดูุฑ ุฅูู ุนูุงุตุฑ ุฃุฎุฑู ูู ุงูุชุฌูุน ุญุณุจ ุงูููุฑุณ ุ ูุฐูู ูุฌุจ ุญุณุงุจ ุฌููุน ุงููุคุดุฑุงุช ุงูุชู ูุญุชุงุฌูุง ูุณุจููุง ุ </font></font><code>elementNames</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุงุฆูุฉ ุจุฃุณูุงุก ุนูุงุตุฑ ุชุนุฏุงุฏูุง:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">int</span> elementCount = elementNames.size();<font></font>
<font></font>
<span class="hljs-keyword">int</span> baseConDy = <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> baseNameAndType = baseConDy + elementCount;
<span class="hljs-keyword">int</span> baseUtf8 = baseNameAndType + elementCount;
<span class="hljs-keyword">int</span> baseInteger = baseUtf8 + elementCount;
<span class="hljs-keyword">int</span> indexThisClass = baseInteger + elementCount;
<span class="hljs-keyword">int</span> indexThisClassUtf8 = indexThisClass + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexSuperClass = indexThisClassUtf8 + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexSuperClassUtf8 = indexSuperClass + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexBootstrapMethodsUtf8 = indexSuperClassUtf8 + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexConDyDescriptorUtf8 = indexBootstrapMethodsUtf8 + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexBootstrapMethodHandle = indexConDyDescriptorUtf8 + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexBootstrapMethodRef = indexBootstrapMethodHandle + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexBootstrapMethodNameAndType = indexBootstrapMethodRef + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexBootstrapMethodName = indexBootstrapMethodNameAndType + <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> indexBootstrapMethodDescriptor = indexBootstrapMethodName + <span class="hljs-number">1</span>;<font></font>
<font></font>
<span class="hljs-keyword">int</span> constantPoolSize = indexBootstrapMethodDescriptor + <span class="hljs-number">1</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุจุฏุฃ ูู ุงููุชุงุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุจุฏุงูุฉ - ุชูููุน ููู ุงููุฆุฉ ุ ุงูุจุงูุชุงุช ุงูุฃุฑุจุนุฉ ุงููุนุฑููุฉ ููุฌููุน </font></font><nobr><code>0xCA 0xFE 0xBA 0xBE</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุตุฏุงุฑ ุชูุณูู ุงูููู:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// Class file header</span><font></font>
u4(CLASS_FILE_SIGNATURE);<font></font>
u4(version);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู - ูุฌููุนุฉ ูู ุงูุซูุงุจุช:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌูุน ุงูุซูุงุจุช</font></font></b>
                        <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">// Constant pool</span><font></font>
u2(constantPoolSize);<font></font>
<font></font>
<span class="hljs-comment">// N * CONSTANT_Dynamic</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; elementCount; i++) {<font></font>
    u1u2u2(CONSTANT_Dynamic, i, baseNameAndType + i);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// N * CONSTANT_NameAndType</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; elementCount; i++) {<font></font>
    u1u2u2(CONSTANT_NameAndType, baseUtf8 + i, indexConDyDescriptorUtf8);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// N * CONSTANT_Utf8</span>
<span class="hljs-comment">//noinspection ForLoopReplaceableByForEach</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; elementCount; i++) {<font></font>
    u1(CONSTANT_Utf8);<font></font>
    utf8(elementNames.get(i));<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// N * CONSTANT_Integer</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; elementCount; i++) {<font></font>
    u1(CONSTANT_Integer);<font></font>
    u4(i);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// ThisClass</span><font></font>
u1(CONSTANT_Class);<font></font>
u2(indexThisClassUtf8);<font></font>
<font></font>
<span class="hljs-comment">// ThisClassUtf8</span><font></font>
u1(CONSTANT_Utf8);<font></font>
utf8(enumClassName);<font></font>
<font></font>
<span class="hljs-comment">// SuperClass</span><font></font>
u1(CONSTANT_Class);<font></font>
u2(indexSuperClassUtf8);<font></font>
<font></font>
<span class="hljs-comment">// SuperClassUtf8</span><font></font>
u1(CONSTANT_Utf8);<font></font>
utf8(JAVA_LANG_ENUM);<font></font>
<font></font>
<span class="hljs-comment">// BootstrapMethodsUtf8</span><font></font>
u1(CONSTANT_Utf8);<font></font>
utf8(ATTRIBUTE_NAME_BOOTSTRAP_METHODS);<font></font>
<font></font>
<span class="hljs-comment">// ConDyDescriptorUtf8</span><font></font>
u1(CONSTANT_Utf8);<font></font>
utf8(binaryEnumClassName);<font></font>
<font></font>
<span class="hljs-comment">// BootstrapMethodHandle</span><font></font>
u1(CONSTANT_MethodHandle);<font></font>
u1(REF_newInvokeSpecial);<font></font>
u2(indexBootstrapMethodRef);<font></font>
<font></font>
<span class="hljs-comment">// BootstrapMethodRef</span><font></font>
u1u2u2(CONSTANT_Methodref, indexThisClass, indexBootstrapMethodNameAndType);<font></font>
<font></font>
<span class="hljs-comment">// BootstrapMethodNameAndType</span><font></font>
u1u2u2(CONSTANT_NameAndType, indexBootstrapMethodName, indexBootstrapMethodDescriptor);<font></font>
<font></font>
<span class="hljs-comment">// BootstrapMethodName</span><font></font>
u1(CONSTANT_Utf8);<font></font>
utf8(BOOTSTRAP_METHOD_NAME);<font></font>
<font></font>
<span class="hljs-comment">// BootstrapMethodDescriptor</span><font></font>
u1(CONSTANT_Utf8);<font></font>
utf8(BOOTSTRAP_METHOD_DESCRIPTOR);<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุซุงุจุช ุจุฑูุฉ ูุชุญุฏุซ ุนู ูุนุฏูุงุช ุงููุตูู ูุงูุฃุนูุงู ( </font></font><code>public</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>final</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>enun</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ุฌุฑุง)ุ ุงุณู ุงููุฆุฉ ูุณูููุง:</font></font><br>
<br>
<pre><code class="java hljs">u2(access);<font></font>
u2(indexThisClass);<font></font>
u2(indexSuperClass);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูููู ูููุฆุฉ ุงูููููุฉ ุงูุชู ุฃูุดุฃูุงูุง ูุงุฌูุงุช ุ ููุง ุญููู ุ ููุง ุทุฑู ุ ูููู ุณุชููู ููุงู ุณูุฉ ูุงุญุฏุฉ ูุน ูุตู ุทุฑู ุงูุชูููุฏ:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// Interfaces count</span>
u2(<span class="hljs-number">0</span>);
<span class="hljs-comment">// Fields count</span>
u2(<span class="hljs-number">0</span>);
<span class="hljs-comment">// Methods count</span>
u2(<span class="hljs-number">0</span>);
<span class="hljs-comment">// Attributes count</span>
u2(<span class="hljs-number">1</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ุฌุณู ุงูุณูุฉ ููุณูุง:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// BootstrapMethods attribute</span><font></font>
u2(indexBootstrapMethodsUtf8);<font></font>
<span class="hljs-comment">// BootstrapMethods attribute size</span>
u4(<span class="hljs-number">2</span> <span class="hljs-comment">/* num_bootstrap_methods */</span> + <span class="hljs-number">6</span> * elementCount);
<span class="hljs-comment">// Bootstrap method count</span><font></font>
u2(elementCount);<font></font>
<font></font>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; elementCount; i++) {
    <span class="hljs-comment">// bootstrap_method_ref</span><font></font>
    u2(indexBootstrapMethodHandle);<font></font>
    <span class="hljs-comment">// num_bootstrap_arguments</span>
    u2(<span class="hljs-number">1</span>);
    <span class="hljs-comment">// bootstrap_arguments[1]</span><font></font>
    u2(baseInteger + i);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดูุก ุ ุชุชููู ุงูุทุจูุฉ. </font><font style="vertical-align: inherit;">ูุฃุฎุฐ ูุฐู ุงูุจุงูุชุงุช ูููุดุฆ ูููุง </font></font><code>ClassReader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> ClassReader <span class="hljs-title">getBootstrapClassReader</span><span class="hljs-params">(<span class="hljs-keyword">int</span> version, <span class="hljs-keyword">int</span> access, String enumClassName, List&lt;String&gt; elementNames)</span> </span>{
    <span class="hljs-keyword">byte</span>[] bootstrapClassBytes = <span class="hljs-keyword">new</span> ConDyBootstrapClassGenerator(<font></font>
        version,<font></font>
        access,<font></font>
        enumClassName,<font></font>
        elementNames<font></font>
    )<font></font>
    .generate();<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (bootstrapClassBytes == <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ClassReader(bootstrapClassBytes);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ููู ุงูุฃูุฑ ุตุนุจูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑูุฒ ูุตุฏุฑ ุงููููุฏ: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConDyBootstrapClassGenerator.java</font></font></a><br>
<a name="Future"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุจู ูุดุฑู</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูุชุทุฑู ููุชุฑุฉ ูุฌูุฒุฉ ูู ููุงุฆููุง:</font></font><br>
<br>
<pre><code class="java hljs">
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiscoverConstantValueAttribute</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String STRING = <span class="hljs-string">"Habrahabr, world!"</span>;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object OBJECT = <span class="hljs-keyword">new</span> Object();<font></font>
<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ ููุฐู ุงููุฆุฉ ุ ุณุชุญุฏุซ ูุฌุฃุฉ ุนูููุฉ ูุชุงุจุฉ ูุงุญุฏุฉ ููุท ุ ูู ุงูุญูู </font></font><code>OBJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="java hljs">
<span class="hljs-keyword">static</span> {<font></font>
    OBJECT = <span class="hljs-keyword">new</span> Object();
    <span class="hljs-comment">//  0: new           #2                  // class java/lang/Object</span>
    <span class="hljs-comment">//  3: dup</span>
    <span class="hljs-comment">//  4: invokespecial #1                  // Method java/lang/Object."&lt;init&gt;":()V</span>
    <span class="hljs-comment">//  7: putstatic     #7                  // Field OBJECT:Ljava/lang/Object;</span>
    <span class="hljs-comment">// 10: return</span><font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุงุฐุง ุนู </font></font><code>STRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุณุงุนุฏ ุงููุฑูู ูู ุชุณููุท ุงูุถูุก ุนูู ูุฐุง ุงููุบุฒ </font></font><nobr><code>javap -c -s -p -v DiscoverConstantValueAttribute.class</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููุง ุงูุฌุฒุก ุงูุฐู ููููุง:</font></font><br>
<br>
<pre><code class="java hljs">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> java.lang.String STRING;<font></font>
  descriptor: Ljava/lang/String;<font></font>
  flags: (<span class="hljs-number">0x0019</span>) ACC_PUBLIC, ACC_STATIC, ACC_FINAL<font></font>
  ConstantValue: String Habrahabr, world!<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ููู ูููุฉ ุงูุญูู ุงูููุงุฆู ุงูุซุงุจุช ูู ูุชูุฉ ุงูุชููุฆุฉ ุฅูู ุณูุฉ ูููุตูุฉ </font></font><code>ConstantValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅููู ูุง ููุชุจูู ุนู ูุฐู ุงูุณูุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JVMS11 ยง4.7.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุซู ุณูุฉ ConstantValue ูููุฉ ุชุนุจูุฑ ุซุงุจุช (JLS ยง15.28) ุ ูุชุณุชุฎุฏู ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชุนููู ุนูุงูุฉ ACC_STATIC ูู ุนูุตุฑ access_flags ูุจููุฉ field_info ุ ูุณูุชู ุชุนููู ุงูุญูู ุงูุฐู ููุซูู ูููู field_info ุงููููุฉ ุงูุชู ุชูุซููุง ุณูุฉ ConstantValue ูุฌุฒุก ูู ุชููุฆุฉ ุงููุฆุฉ ุฃู ุงููุงุฌูุฉ ุงูุชู ุชุนูู ุนู ุงูุญูู (ุงูููุฑุฉ 5.5). </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุจู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุชููุฆุฉ ุงูุทุจูุฉ ุฃู ุงููุงุฌูุฉ ูุชูู ุงููุฆุฉ ุฃู ุงููุงุฌูุฉ (ุงูููุฑุฉ 2.9.2).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุฌุจ ุฃู ูุชุฌุงูู Java Virtual Machine ุงูุณูุฉ ุจุตูุช.</font></font></li>
</ul><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุชู ุงูุนุซูุฑ ุนูู ูุฐู ุงูุณูุฉ ูู ููุช ูุงุญุฏ </font></font><code>static</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>final</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุฃุฎูุฑ ูู ูุชู ุฐูุฑู ุตุฑุงุญุฉู ููุง) ุ ูุณูุชู ุชููุฆุฉ ูุฐุง ุงูุญูู ุจุงููููุฉ ูู ูุฐู ุงูุณูุฉ. </font><font style="vertical-align: inherit;">ููุญุฏุซ ูุฐุง ุญุชู ูุจู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ูู ุงููุบุฑู ุงุณุชุฎุฏุงู ูุฐู ุงูุณูุฉ ูุชููุฆุฉ ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุ ูู ูุตููุง ูุจู ุงูุฃุฎูุฑ ูุงู ููุงู ุซูุงุจุช ููุท ุ ูุฅู ูุงูุช ุฏููุงููููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณูุง ุฃูู ูู ูููุฑ ูู ูุฐุง ุงูุงุชุฌุงู ุ ููุงู ุฐูุฑ ูู JEP 309 </font></font><code>ConstantValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุฐุง ุฐูุฑ ูู ูุตู ุนูู ุงููุณุชูุจู:</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูู</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงููุณุชูุจูู ุชุดูู ุงูุชูุฏูุฏุงุช ุงููุณุชูุจููุฉ ุงููุญุชููุฉ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑูุงู ุงูุซูุงุจุช ุงูุฏููุงููููุฉ ุจุณูุฉ ConstantValue ููุญููู ุงูุซุงุจุชุฉ</font></font></li>
</ul><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูุฃุซูุงุก ุ ูููููุง ููุท ุฃู ูุญูู ุจุงูุฃููุงุช ุงูุชู ุณุชูุชูู ูููุง ูุฐู ุงูููุฒุฉ ูู ุงูุญุงูุฉ "ูู ุงูุฌูุฏ ูุนููุง" ุฅูู "ุฌุงูุฒุฉ". </font><font style="vertical-align: inherit;">ุซู ุณุชููุฏ ุงููููุฏ ุงูููุฑูุถุฉ ุนูู ุญุฌู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ูุชูุฉ ุงูุชููุฆุฉ ุชุฃุซูุฑูุง ูุณูุญุฏุฏ ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุชุนุฏุงุฏ ุญุฏูุฏ ุงูุชุฌูุน ุงูุซุงุจุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุง ูุชูุฏูุฑุงุช ุชูุฑูุจูุฉ ุ ูู ูุฐู ุงูุญุงูุฉ ูููููุง ุฃู ูุฃูู ูู </font></font><code>65&nbsp;489 / 4 = 16_372</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุตุฑ. </font><font style="vertical-align: inherit;">ูุฐุง </font></font><code>65_489</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุนุฏุฏ ุงููุชุญุงุช ุบูุฑ ุงููุดุบููุฉ ูููุฌูุน ุงูุซุงุจุช ุ 46 ูููุง ูู 65_535 ุงูููููุฉ ูุธุฑููุง ุฐูุจุช ุฅูู ุงูุฃุนูู. </font></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุนุฏุฏ ุงูููุงุตู ุงูุฒูููุฉ ุงููุทููุจุฉ ููุฅุนูุงู ุนู ุญูู ูุงุญุฏ ูุงูุซุงุจุช ุงูุฏููุงูู ุงูููุงุจู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุทุจุน ุ ูุง ูููู ุงูุนุซูุฑ ุนูู ุงูุฑูู ุงูุฏููู ุฅูุง ุจุนุฏ ุฅุตุฏุงุฑ ูุณุฎุฉ JDK ูุน ุฏุนู ูุฐู ุงูููุฒุฉ.</font></font><br>
<br>
<a name="Unsafe"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบูุฑ ุขูู</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุฏููุง ูู ุงูููู ุงูุฎุทู ููุชูุฉ ุงูุชููุฆุฉ ูุน ุฒูุงุฏุฉ ูู ุนุฏุฏ ุนูุงุตุฑ ุงูุชุนุฏุงุฏ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุฌุฏูุง ุทุฑููุฉ ููุญุฏ ูู ุงูุชููุฆุฉ ูู ุญููุฉ ุ ูุจุงูุชุงูู ุฅุฒุงูุฉ ุงูุนูุงูุฉ ุจูู ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุนุฏ ูุญุฌู ูุชูุฉ ุงูุชููุฆุฉ ุ ูุฅููุง ุณูุญูู ุงุฎุชุฑุงูุง ุขุฎุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุง ุชุณูุญ ุฃู ูู ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุนุงูุฉ ุงูููุงุณูุฉ ุจุงููุชุงุจุฉ ุฅูู </font></font><code>static final</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญููู ุญุชู ุฏุงุฎู ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ูู ูุณุงุนุฏ ุงูุชุฃูู ููุง VarHandles ููุง. </font><font style="vertical-align: inherit;">ุฃูููุง ุงููุญูุฏ ุนุธูู ูุฑููุจ </font></font><code>sun.misc.Unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏ ูุจุฏู ุงูุชูููุฐ ุบูุฑ ุงูุขูู ูู FizzBuzz ูุงูุชุงูู:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FizzBuzz ุบูุฑ ุขููุฉ</font></font></b>
                        <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">import</span> java.lang.reflect.Field;
<span class="hljs-keyword">import</span> sun.misc.Unsafe;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> FizzBuzz {<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> FizzBuzz[] $VALUES;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> FizzBuzz Fizz;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> FizzBuzz Buzz;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> FizzBuzz FizzBuzz;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> FizzBuzz[] values() {
        <span class="hljs-keyword">return</span> (FizzBuzz[]) $VALUES.clone();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> FizzBuzz <span class="hljs-title">valueOf</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">return</span> (FizzBuzz) Enum.valueOf(FizzBuzz.class, name);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">FizzBuzz</span><span class="hljs-params">(String name, <span class="hljs-keyword">int</span> ordinal)</span> </span>{
        <span class="hljs-keyword">super</span>(name, ordinal);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> FizzBuzz[] createValues() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FizzBuzz[] {<font></font>
            Fizz,<font></font>
            Buzz,<font></font>
            FizzBuzz<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">static</span>  {<font></font>
        Field unsafeField = Unsafe.class.getDeclaredField("theUnsafe");<font></font>
        unsafeField.setAccessible(<span class="hljs-keyword">true</span>);<font></font>
        Unsafe unsafe = (Unsafe) unsafeField.get(<span class="hljs-keyword">null</span>);<font></font>
<font></font>
        String[] fieldNames = "Fizz,Buzz,FizzBuzz".split(",");<font></font>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; fieldNames.length; i++) {<font></font>
            String fieldName = fieldNames[i];<font></font>
            Field field = FizzBuzz.class.getDeclaredField(fieldName);<font></font>
            <span class="hljs-keyword">long</span> fieldOffset = unsafe.staticFieldOffset(field);<font></font>
            unsafe.putObject(FizzBuzz.class, fieldOffset, <span class="hljs-keyword">new</span> FizzBuzz(fieldName, i));<font></font>
        }<font></font>
<font></font>
        $VALUES = createValues();<font></font>
    }<font></font>
<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุญ ููุง ูุฐุง ุงูููุฌ ุจุฅูุดุงุก ุชุนุฏุงุฏ ูุญุชูู ุนูู ูุง ููุฑุจ ูู 21 ุฃูู ุนูุตุฑ ุ ููุฃูุซุฑ ูู ุฐูู ุ ูุฅู ุณุนุฉ ูุฌููุนุฉ ุงูุซูุงุจุช ููุณุช ูุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุทูุจ ุงูุชูุซูู ุงูููุฌูุฏ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enum :: ordinal ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุชุชุทุงุจู ูููุชู ูุน ุงูุฑูู ุงููุชุณูุณู ููุนูุตุฑ ุงูููุงุจู ูู ุฅุนูุงู ุงูุชุนุฏุงุฏ ุ ูุฐุง ูุฌุจ ุนููู ุชุฎุฒูู ูุงุฆูุฉ ุฃุณูุงุก ุงูุญููู ุจุดูู ุตุฑูุญ ุจุงูุชุฑุชูุจ ุงูุตุญูุญ ุ ูุจุงูุชุงูู ูุถุงุนูุฉ ุญุฌู ููู ุงููุฆุฉ ุชูุฑูุจูุง.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฑููู ุงูููุงุฆู ุงูุนุงู () </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูุฏ ุชุฑุชูุจู ุซุงุจุช ุงูุชุนุฏุงุฏ ูุฐุง (ููุถุนู ูู ุฅุนูุงู ุงูุชุนุฏุงุฏ ุ ุญูุซ ูุชู ุชุนููู ุงูุซุงุจุช ุงูุฃููู ุชุฑุชูุจุงู ูู ุงูุตูุฑ).</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูููู ุฃู ุชุณุงุนุฏ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุนุงูุฉ ููุญุชููุงุช ูุฌููุนุฉ ุงูุซูุงุจุช ุ ููุญู ูุนุฑู ุจุงููุนู ููููุฉ ููุฆูุง ุจุงูุชุฑุชูุจ ุงูุฐู ูุญุชุงุฌ ุฅููู ุ ูููู ูุง ุชูุฌุฏ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุซู ูุฐู ููู ุบูุฑ ุงููุญุชูู ุฃู ุชููู ููุฌูุฏุฉ ุนูู ุงูุฅุทูุงู. ุชู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุตุฑูุญ ุนู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุณููุจ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Class :: getConstantPool ()</font></a><font style="vertical-align: inherit;"> ุงููุชููุฑ ูู OpenJDK </font><font style="vertical-align: inherit;">ูุญุฒูุฉ ุฎุงุตุฉ ูุณูููู ูู ุงูุตุนุจ ุงูุงุนุชูุงุฏ ุนูููุง ูู ููุฏ ุงููุณุชุฎุฏู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุตุจุญุช ูุชูุฉ ุงูุชููุฆุฉ ุงูุขู ูุถุบูุทุฉ ุชูุงููุง ูุชูุฑูุจุงู ูุณุชููุฉ ุนู ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุชุนุฏุงุฏ ุ ูุฐุง ููููู </font></font><code>createValues()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุถูุง ุนู ุทุฑูู ุชุถููู ุฌุณููุง ูู ุงูุญููุฉ:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">static</span>  {<font></font>
    Field unsafeField = Unsafe.class.getDeclaredField("theUnsafe");<font></font>
    unsafeField.setAccessible(<span class="hljs-keyword">true</span>);<font></font>
    Unsafe unsafe = (Unsafe) unsafeField.get(<span class="hljs-keyword">null</span>);<font></font>
<font></font>
    String[] fieldNames = "Fizz,Buzz,FizzBuzz".split(",");<font></font>
    FizzBuzz[] localValues = <span class="hljs-keyword">new</span> FizzBuzz[fieldNames.length];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; fieldNames.length; i++) {<font></font>
        String fieldName = fieldNames[i];<font></font>
        Field field = FizzBuzz.class.getDeclaredField(fieldName);<font></font>
        <span class="hljs-keyword">long</span> fieldOffset = unsafe.staticFieldOffset(field);<font></font>
        unsafe.putObject(<font></font>
            FizzBuzz.class,<font></font>
            fieldOffset,<font></font>
            (localValues[i] = <span class="hljs-keyword">new</span> FizzBuzz(fieldName, i))<font></font>
        );<font></font>
    }<font></font>
<font></font>
    $VALUES = localValues;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุญุฏุซ ุนูููุฉ ุดุจููุฉ ุจุงูุงูููุงุฑ ุงูุฌููุฏู: ุฅูู ุฌุงูุจ ุงูุทุฑููุฉ </font></font><code>createValues()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุชุฎุชูู ุชุนูููุงุช ูุฑุงุกุฉ ุญููู ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุ ูุชุตุจุญ ุณุฌูุงุช ุงูููุน </font></font><code>Fieldref</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐู ุงูุญููู </font><font style="vertical-align: inherit;">ุบูุฑ ุถุฑูุฑูุฉ </font><font style="vertical-align: inherit;">ุ ูุจุงูุชุงูู ุงูุชุจ </font></font><code>NameAndType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุฌูุงุช ูููุน ุงูุณุฌูุงุช </font></font><code>Fieldref</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ุงูุชุฌูุน ุงูุซุงุจุช ุ </font></font><code>2 * &lt;   &gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู </font><font style="vertical-align: inherit;">ุชุญุฑูุฑ </font><font style="vertical-align: inherit;">ุงููุชุญุงุช ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุฅุนูุงู ุนูุงุตุฑ ุชุนุฏุงุฏ ุฅุถุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ููุณุช ูู ุดูุก ูุฑุฏูุฉ ููุบุงูุฉ ุ ุชูุธูุฑ ุงูุงุฎุชุจุงุฑุงุช ุงูุฎูุงุถูุง ูุจูุฑูุง ูู ุงูุฃุฏุงุก: ุฅู ุชููุฆุฉ ูุฆุฉ ุงูุชุนุฏุงุฏ ุงูุชู ุชุญุชูู ุนูู 65 ุฃูู ุนูุตุฑ ุชุณุชุบุฑู ุฏูููุฉ ูุงุญุฏุฉ ููุตู ูุง ูููู ุชุตูุฑู. ููุง ุงุชุถุญ ุจุณุฑุนุฉ ูุจูุฑุฉ ุ "ุงูุงูุนูุงุณ ูุจุทุฆ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุทุจูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Class :: getDeclaredField ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">OpenJDK</font></a><font style="vertical-align: inherit;"> ูู ุณููู ููุงุฑุจ ูุนุฏุฏ ูู ุงูุญููู ูู ุงููุตู ุ ููุชูุฉ ุงูุชููุฆุฉ ูุฏููุง ุชุฑุจูุนูุฉ ุจุณุจุจ ูุฐุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุคุฏู ุฅุถุงูุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฅูู ุชุญุณูู ุงูุญุงูุฉ ุฅูู ุญุฏ ูุง ุ ุนูู ุงูุฑุบู ูู ุฃููุง ูุง ุชุญููุง ุจุงููุงูู:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">static</span>  {<font></font>
    Field unsafeField = Unsafe.class.getDeclaredField("theUnsafe");<font></font>
    unsafeField.setAccessible(<span class="hljs-keyword">true</span>);<font></font>
    Unsafe unsafe = (Unsafe) unsafeField.get(<span class="hljs-keyword">null</span>);<font></font>
<font></font>
    String[] fieldNames = "Fizz,Buzz,FizzBuzz".split(",");<font></font>
    Field[] fields = FizzBuzz.class.getDeclaredFields();<font></font>
    HashMap&lt;String, Field&gt; cache = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(fields.length);<font></font>
<font></font>
    <span class="hljs-keyword">for</span>(Field field : fields) {<font></font>
        cache.put(field.getName(), field);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; fieldNames.length; i++) {<font></font>
        String fieldName = fieldNames[i];<font></font>
        Field field = cache.get(fieldName);<font></font>
        <span class="hljs-keyword">long</span> fieldOffset = unsafe.staticFieldOffset(field);<font></font>
        unsafe.putObject(<font></font>
            FizzBuzz.class,<font></font>
            fieldOffset,<font></font>
            (localValues[i] = <span class="hljs-keyword">new</span> FizzBuzz(fieldName, i))<font></font>
        );<font></font>
    }    <font></font>
<font></font>
    $VALUES = localValues;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุญ ูู ุงูููุฌ ุบูุฑ ุงูุขูู ุงูููุถุญ ูู ูุฐุง ุงููุตู ุฅูุดุงุก ุนูููุงุช ููู ุจุงุณุชุฎุฏุงู ุนุฏุฏ ูู ุงูุนูุงุตุฑ ูุตู ุฅูู 65_410 ุ ููู ูุง ููุฑุจ ูู 24 ูุฑุฉ ุฃูุซุฑ ูู ุงููุชูุฌุฉ ุงูุชู ูููู ุชุญููููุง ุจุงุณุชุฎุฏุงู javac ููู ูุฑูุจ ุฌุฏูุง ูู ุงูุญุฏ ุงููุธุฑู ุงูุจุงูุบ 65_505 ุนูุงุตุฑ ูุญุณูุจุฉ ูู ูุจููุง ูู ุงูููุดูุฑ ุงูุณุงุจู ููุฏูุฑุฉ.</font></font><br>
<br>
<a name="Testing"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญูู ูู ุงูุฃุฏุงุก</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ููุงุฎุชุจุงุฑุงุช ุ ูุฃุฎุฐ ุฃูุจุฑ ุชุนุฏุงุฏ ุ ููุดุฆู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ </font></font><nobr><code>java -jar HugeEnumGen.jar -a Unsafe UnsafeHugeEnum</code></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ููู ูุฆุฉ ุจุญุฌู 2 ููุบุงุจุงูุช ู 65_410 ุนูุตุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุฅูุดุงุก ูุดุฑูุน Java ุฌุฏูุฏ ูู IDEA ูุฃุถู ุงููุฆุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูููุชุจุฉ ุฎุงุฑุฌูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูููุฑ ุชูุฑูุจูุง ุ ุฃุตุจุญ ูู ุงูููุงุญุธ ุฃู IDEA ููุณุช ุฌุงูุฒุฉ ููุซู ูุฐุง ุงูุงุฎุชุจุงุฑ ุงูุฅุฌูุงุฏ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m4/su/-6/m4su-6bvdkkqmf3pypqrmpzntnw.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุบุฑู ุงูุฅููุงู ุงูุชููุงุฆู ูุนูุตุฑ ุชุนุฏุงุฏ ุนุดุฑุงุช ุงูุซูุงูู ุนูู ูู ูู i5 ุงููุญููู ุงููุฏูู ูุนูู i7 8700K ุงูุฃูุซุฑ ุญุฏุงุซุฉ. ูุฅุฐุง ุญุงููุช ุงุณุชุฎุฏุงู ุงูุฅุตูุงุญ ุงูุณุฑูุน ูุฅุถุงูุฉ ุงูุนูุงุตุฑ ุงูููููุฏุฉ ุฅูู ุงููุญูู ุ ูุณุชุชููู IDEA ุนู ุฅุนุงุฏุฉ ุฑุณู ุงูููุงูุฐ. ุฃุดู ูู ุฐูู ูุคูุชูุง ุ ูููู ูุดู ูู ุงูุชุธุงุฑ ุงูุชูุงูู. ููุง ุฃู ุงูุงุณุชุฌุงุจุฉ ุฃุซูุงุก ุงูุชุตุญูุญ ุชุชุฑู ุงููุซูุฑ ููุง ูู ูุฑุบูุจ ููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุจุฏุฃ ุจุนุฏุฏ ุตุบูุฑ ูู ุงูุนูุงุตุฑ ูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestFew</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String... args)</span> </span>{
        <span class="hljs-keyword">for</span>(String arg : args) {<font></font>
            System.out.print(arg + <span class="hljs-string">" : "</span>);<font></font>
<font></font>
            <span class="hljs-keyword">try</span> {<font></font>
                UnsafeHugeEnum value = UnsafeHugeEnum.valueOf(arg);<font></font>
<font></font>
                doSwitch(value);<font></font>
            } <span class="hljs-keyword">catch</span>(Throwable e) {<font></font>
                e.printStackTrace(System.out);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doSwitch</span><span class="hljs-params">(UnsafeHugeEnum value)</span> </span>{
        <span class="hljs-keyword">switch</span>(value) {
            <span class="hljs-keyword">case</span> VALUE_00001:<font></font>
                System.out.println(<span class="hljs-string">"First"</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> VALUE_31415:<font></font>
                System.out.println(<span class="hljs-string">"(int) (10_000 * Math.PI)"</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> VALUE_65410:<font></font>
                System.out.println(<span class="hljs-string">"Last"</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:<font></font>
                System.out.println(<span class="hljs-string">"Unexpected value: "</span> + value);
                <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชูุฌุฏ ููุงุฌุขุช ููุง ุ ููุชู ุชุฌููุนูุง ูุฅุทูุงููุง ุจุดูู ููุชุธู:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ java TestFew VALUE_00001 VALUE_00400 VALUE_31415 VALUE_65410<font></font>
VALUE_00001 : First<font></font>
VALUE_00400 : Unexpected value: VALUE_00400<font></font>
VALUE_31415 : (int) (10_000 * Math.PI)<font></font>
VALUE_65410 : Last<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ุนู ุงููุฒูุฏ ูู ุงูุนูุงุตุฑ ูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูู ูููููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนุงูุฌุฉ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน </font><font style="vertical-align: inherit;">ุนูุงุตุฑูุง </font><font style="vertical-align: inherit;">ุงูุจุงูุบ ุนุฏุฏูุง 65 ุฃูู ุนูุตุฑ </font><font style="vertical-align: inherit;">ูู </font><font style="vertical-align: inherit;">ููุช ูุงุญุฏุ</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">switch</span>(value) {
    <span class="hljs-keyword">case</span> VALUE_00001:
    <span class="hljs-keyword">case</span> VALUE_00002:<font></font>
        ...<font></font>
    <span class="hljs-keyword">case</span> VALUE_65410:<font></font>
        System.out.println(<span class="hljs-string">"One of known values: "</span> + value);
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:<font></font>
        System.out.println(<span class="hljs-string">"Unexpected value: "</span> + value);
        <span class="hljs-keyword">break</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฃุณู ูุง. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุงูู ุงูุชุฑุฌูุฉ ุ ูุญุตู ุนูู ูุฌููุนุฉ ูุงููุฉ ูู ุฑุณุงุฆู ุงูุฎุทุฃ:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ javac -fullversion<font></font>
javac full version "14.0.1+7"<font></font>
<font></font>
$ javac TestAll.java<font></font>
TestAll.java:18: error: code too large for try statement<font></font>
        switch(value) {<font></font>
        ^<font></font>
TestAll.java:65433: error: too many constants<font></font>
                break;<font></font>
                ^<font></font>
TestAll.java:17: error: code too large<font></font>
    private static void doSwitch(UnsafeHugeEnum value) {<font></font>
                        ^<font></font>
TestAll.java:1: error: too many constants<font></font>
public class TestAll {<font></font>
       ^<font></font>
4 errors<font></font>
</code></pre><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testfew.java</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestAll.java</font></font></a></li>
</ul><br>
<a name="JavacSwitchTranslation"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุงูุงู ูุงูุชุจุฏูู</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุง ูุญุฏุซ ุ ุนูููุง ุฃู ููุชุดู ููู ุชุญุฏุซ ุชุฑุฌูุฉ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงุตุฑ ุงูุชุนุฏุงุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุชูู ููุงุตูุงุช JVM ุนูู ูุตู ูููุตู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JVMS11 ยง3.10 ุชุฌููุน ุงูููุงุชูุญ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุชู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ุชุชูุฎุต</font></a><font style="vertical-align: inherit;"> ุชูุตูุงุชูุง </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุงุญุฏ ูู ุงุซููู ูู ุงูุชุนูููุงุช </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ุงูุจุฑูุฌูุฉ ุงูุซุงูููุฉ</font></a><font style="vertical-align: inherit;"> ุ </font></font><code>tableswitch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>lookupswitch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฌุฏ </font><font style="vertical-align: inherit;">ุฃู ุฅุดุงุฑุงุช </font><font style="vertical-align: inherit;">ุฅูู ุงูุณูุงุณู ุฃู ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ูู ูุฐุง ุงููุตู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุถู ุงููุซุงุฆู ูู ุงูููุฏ ุ ูุฐูู ุญุงู ุงูููุช ููุชุนูู ูู ุงููุตุฏุฑ </font></font><code>javac</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุงุฎุชูุงุฑ ุจูู </font></font><code>tableswitch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>lookupswitch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุซ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gen :: visitSwitch ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุนุชูุฏ ุนูู ุนุฏุฏ ุงูุฎูุงุฑุงุช ูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ูุนุธู ุงูุญุงูุงุช ุ ูููุฒ </font></font><code>tableswitch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// Determine whether to issue a tableswitch or a lookupswitch</span>
<span class="hljs-comment">// instruction.</span>
<span class="hljs-keyword">long</span> table_space_cost = <span class="hljs-number">4</span> + ((<span class="hljs-keyword">long</span>) hi - lo + <span class="hljs-number">1</span>); <span class="hljs-comment">// words</span>
<span class="hljs-keyword">long</span> table_time_cost = <span class="hljs-number">3</span>; <span class="hljs-comment">// comparisons</span>
<span class="hljs-keyword">long</span> lookup_space_cost = <span class="hljs-number">3</span> + <span class="hljs-number">2</span> * (<span class="hljs-keyword">long</span>) nlabels;
<span class="hljs-keyword">long</span> lookup_time_cost = nlabels;
<span class="hljs-keyword">int</span> opcode =<font></font>
    nlabels &gt; <span class="hljs-number">0</span> &amp;&amp;<font></font>
    table_space_cost + <span class="hljs-number">3</span> * table_time_cost &lt;=<font></font>
    lookup_space_cost + <span class="hljs-number">3</span> * lookup_time_cost<font></font>
    ?<font></font>
    tableswitch : lookupswitch;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจูุบ ุญุฌู ุงูุฑุฃุณ </font></font><code>tableswitch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16 ุจุงูุช ุชูุฑูุจูุง ุจุงูุฅุถุงูุฉ ุฅูู 4 ุจุงูุช ููู ูููุฉ. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุฃู ูููู ููุงู ุงููุฒูุฏ ูู </font></font><code>( 65_535 - 16 ) / 4 = 16_379</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงุตุฑ </font><font style="vertical-align: inherit;">ุชุญุช ุฃู ุธุฑู ูู ุงูุธุฑูู </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ุจุนุฏ ุชูููู ุนุฏุฏ ุงููุฑูุน </font></font><code>case</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฌุณู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู 16 ุฃูููุง ุ ูุจูู ุฎุทุฃ ุชุฌููุน ูุงุญุฏ ููุท ุ ุงูุฃูุซุฑ ุบููุถุงู:</font></font><br>
<br>
<pre><code class="plaintext hljs">TestAll.java:18: error: code too large for try statement<font></font>
        switch(value) {<font></font>
        ^<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุญุซูุง ุนู ูุตุฏุฑ ุงูุฎุทุฃ ุ ุณูุนูุฏ ูุจูุฑูุง ููููุงู ุ ุฅูู ูุฑุญูุฉ ุงูุชุฎูุต ูู ุงูุณูุฑ ุงููุญูู. </font><font style="vertical-align: inherit;">ู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุณุงููุจ ูู ุงููุณุคููุฉ ุนู </font><font style="vertical-align: inherit;">ุงูุชุฑุฌูุฉ </font></font><code>visitEnumSwitch()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>mapForEnum()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุทุจูุฉ </font></font><code>EnumMapping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lower.java</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุฏ ุฃูุถูุง ุชุนููููุง ูุซุงุฆูููุง ุตุบูุฑูุง:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EnumMapping JavaDoc</font></font></b>
                        <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">/** This map gives a translation table to be used for enum
 *  switches.
 *
 *  &lt;p&gt;For each enum that appears as the type of a switch
 *  expression, we maintain an EnumMapping to assist in the
 *  translation, as exemplified by the following example:
 *
 *  &lt;p&gt;we translate
 *  &lt;pre&gt;
 *          switch(colorExpression) {
 *          case red: stmt1;
 *          case green: stmt2;
 *          }
 *  &lt;/pre&gt;
 *  into
 *  &lt;pre&gt;
 *          switch(Outer$0.$EnumMap$Color[colorExpression.ordinal()]) {
 *          case 1: stmt1;
 *          case 2: stmt2
 *          }
 *  &lt;/pre&gt;
 *  with the auxiliary table initialized as follows:
 *  &lt;pre&gt;
 *          class Outer$0 {
 *              synthetic final int[] $EnumMap$Color = new int[Color.values().length];
 *              static {
 *                  try { $EnumMap$Color[red.ordinal()] = 1; } catch (NoSuchFieldError ex) {}
 *                  try { $EnumMap$Color[green.ordinal()] = 2; } catch (NoSuchFieldError ex) {}
 *              }
 *          }
 *  &lt;/pre&gt;
 *  class EnumMapping provides mapping data and support methods for this translation.
 */</span>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"></font><code>try</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญูู </font><font style="vertical-align: inherit;">
ุงูุบููุถ </font><font style="vertical-align: inherit;">ุฅูู ุฌุฒุก ูู ูุฆุฉ ุงููุณุงุนุฏุฉ ุงูุชู ูุชู ุฅูุดุงุคูุง ุชููุงุฆููุง </font></font><code>TestAll$0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฏุงุฎู - ุฅุนูุงู ุตููู ุซุงุจุช ูุฑูุฒ ูุชููุฆุชู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนูู ุงููุตูููุฉ ุนูู ุฅุตูุงุญ ุงูุชูุงูู ุจูู ุฃุณูุงุก ุนูุงุตุฑ ุงูุชุนุฏุงุฏ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูููู ุงูุนุฏุฏูุฉ </font><font style="vertical-align: inherit;">ุงููุฎุตุตุฉ ููุง ุฃุซูุงุก ุงูุชุฌููุน </font><font style="vertical-align: inherit;">ุ ูุจุงูุชุงูู ุญูุงูุฉ ุงูุดูุฑุฉ ุงููุชุฑุฌูุฉ ูู ุงูุชุฃุซูุฑุงุช ุงูุถุงุฑุฉ ูุฅุนุงุฏุฉ ุงูุจูุงุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ ุฃู ุฅุถุงูุฉ ุนูุงุตุฑ ุฌุฏูุฏุฉ ุฃู ุญุฐู ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุงูููุฌูุฏุฉ ุ ูุฏ ูุบูุฑ ุจุนุถูุง ุงููููุฉ </font></font><code>ordinal()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐุง ูุง ูุญููู ูุณุชูู ุฅุถุงูู ูู ุงูุชุจุงุนุฏ.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">try</span> {<font></font>
    $SwitchMap$UnsafeHugeEnum[UnsafeHugeEnum.VALUE_00001.ordinal()] = <span class="hljs-number">1</span>;
    <span class="hljs-comment">//  9: getstatic     #2                  // Field $SwitchMap$UnsafeHugeEnum:[I</span>
    <span class="hljs-comment">// 12: getstatic     #3                  // Field UnsafeHugeEnum.VALUE_00001:LUnsafeHugeEnum;</span>
    <span class="hljs-comment">// 15: invokevirtual #4                  // Method UnsafeHugeEnum.ordinal:()I</span>
    <span class="hljs-comment">// 18: iconst_1</span>
    <span class="hljs-comment">// 19: iastore</span><font></font>
}<font></font>
<span class="hljs-comment">// 20: goto          24</span>
<span class="hljs-keyword">catch</span>(NoSuchFieldError e) { }
<span class="hljs-comment">// 23: astore_0</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑูุฒ ุงูุชููุฆุฉ ุจุณูุท ููุณุชููู ูู 15 ุฅูู 17 ุจุงูุช ููู ุนูุตุฑ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุชุณุชูุนุจ ูุชูุฉ ุงูุชููุฆุฉ ุงูุซุงุจุชุฉ ุชููุฆุฉ ูุง ูุง ูุฒูุฏ ุนู 3_862 ูู ุงูุนูุงุตุฑ. </font><font style="vertical-align: inherit;">ูุชุถุญ ุฃู ูุฐุง ุงูุฑูู ูู ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ุงูุชู ูููููุง ุงุณุชุฎุฏุงููุง ูู ุนูุตุฑ ูุงุญุฏ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูุชูููุฐ ุงูุญุงูู </font></font><code>javac</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="Conclusion"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุฑุฃููุง ุฃู ุงุณุชุฎุฏุงู ูุซู ูุฐู ุงูุชูููุฉ ุงูุจุณูุทุฉ ูุซู ุชุฎุตูุต ุฅูุดุงุก ุนูุงุตุฑ ุงูุชุนุฏุงุฏ ูุชููุฆุฉ ุตููู </font></font><code>$VALUES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุทุฑููุฉ ูููุตูุฉ ูุณูุญ ูู ุจุฒูุงุฏุฉ ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุชุนุฏุงุฏ ูู 2_746 ุฅูู 10_920. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชุจุฏู ุงููุชุงุฆุฌ ุงูุฏููุงููููุฉ ุงููุณุชูุฑุฉ ุนูู ุฎูููุฉ ุงูุฅูุฌุงุฒุงุช ุงูุณุงุจูุฉ ูุซูุฑุฉ ููุฅุนุฌุงุจ ููุบุงูุฉ ูุชุณูุญ ูู ุจุงูุญุตูู ุนูู 43 ุนูุตุฑูุง ุฅุถุงูููุง ููุท ุ ูููู ูุน ูุฐุง ุงูููุฌ ุ ูููู ูู ุงูุฃูุซุฑ ุฃูุงูุฉ ุฅุถุงูุฉ ุฎุตุงุฆุต ุฌุฏูุฏุฉ ุฅูู ุงูุชุนุฏุงุฏ - ููุท ูู ุจุชุนุฏูู ุงูููุดุฆ ูุชูุฑูุฑู ุงูููู ุงูุถุฑูุฑูุฉ ูู ุฎูุงู ุงููุนููุงุช ุงูุซุงุจุชุฉ ููุซุงุจุช ุงูุฏููุงูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุชู ูู ููุช ูุง ุชุนููู ุงูุณูุฉ ุงููุณุชูุจููุฉ </font></font><code>ConstantValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุซูุงุจุช ุงูุฏููุงููููุฉ ุ ูููู ุฃู ูุฑุชูุน ูุฐุง ุงูุฑูู ุฅูู 10 ุขูุงู ุฅูู 16. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุงุณุชุฎุฏุงู</font></font><code>sun.misc.Unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุนูู ููุฒุฉ ุนููุงูุฉ ูุฒูุงุฏุฉ ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุนูุงุตุฑ ุฅูู 65_410. ูููู ูุง ุชูุณ ุฃู </font></font><code>Unsafe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุฎุงุตุฉ ูุฏ ุชุฎุชูู ุจูุฑูุฑ ุงูููุช ูุฃู ุงุณุชุฎุฏุงููุง ููุซู ุฎุทุฑูุง ูุจูุฑูุง ุ ููุง ูุญุฐุฑ javac ูุจุงุดุฑุฉ:</font></font><br>
<br>
<pre><code class="plaintext hljs">Test.java:3: warning: Unsafe is internal proprietary API and may be removed in a future release<font></font>
import sun.misc.Unsafe;<font></font>
               ^<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุ ููุง ุงุชุถุญ ุ ูุง ูููู ูุฅูุดุงุก ุชุนุฏุงุฏ ุนููุงู ุ ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุงุณุชุฎุฏุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุฌุฏ ุญุงูููุง ูุดููุงุช ูู ุฏุนู ูุซู ูุฐู ุงูุชุนุฏุงุฏุงุช ูู IDE ูุนูู ูุณุชูู ูุชุฑุฌู Java. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฃู ูููู ุนุฏุฏ ูุจูุฑ ูู ุงูุญููู ูู ุงููุตู ูู ุงุณุชุฌุงุจุฉ IDE ุฃุซูุงุก ุงูุชุญุฑูุฑ ูุฃุซูุงุก ุชุตุญูุญ ุงูุฃุฎุทุงุก. </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ุชุตู ุฅูู ุชุนููู ูุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููููุฏ ุงูุชู ููุฑุถูุง ุชูุณูู ููู ุงููุฆุฉ ูุชูุงุตูู ุชูููุฐ javac ุชุฌุนู ูู ุงููุณุชุญูู ุงุณุชุฎุฏุงู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุซุฑ ูู 3_862 ุนูุตุฑ </font><font style="vertical-align: inherit;">ูู ุงูููุฏ </font><font style="vertical-align: inherit;">ูู ููุณ ุงูููุช. </font><font style="vertical-align: inherit;">ูู ุงูุฌูุงูุจ ุงูุฅูุฌุงุจูุฉ ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐู ูููู ุฃู ุชููู ุนูุงุตุฑ ุชุนุณููุฉ 3_862. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูููู ุฒูุงุฏุฉ ุชุญุณูู ุงููุชุงุฆุฌ ุฅูุง ูู ุฎูุงู ุชุญุณูู ูุชุฑุฌู Java ุ ููู ูุฐู ูุตุฉ ูุฎุชููุฉ ุชูุงููุง.</font></font><br>
<br>
<a name="Appendix"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฏ ุฅุถุงููุฉ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ูุตุฏุฑ GitHub: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Maccimo/HugeEnumGeneratorArticle</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ููู JAR ุงูุฐู ุชู ุฌูุนู: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Maccimo/HugeEnumGeneratorArticle/releases/tag/v1.0</font></font></a><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนูููุงุช ุจุฏุก ุงูุชุดุบูู ุงููุนุชูุฏุฉ</font></font></b>
                        <div class="spoiler_text"><pre><font></font>
Huge enumeration generator<font></font>
<font></font>
    https://github.com/Maccimo/HugeEnumGeneratorArticle<font></font>
<font></font>
Additional information (in Russian):<font></font>
<font></font>
    https://habr.com/ru/post/483392/<font></font>
    https://habr.com/ru/post/501870/<font></font>
<font></font>
Usage:<font></font>
    java -jar HugeEnumGen.jar [ &lt;options&gt; ] &lt;enum name&gt;<font></font>
<font></font>
    &lt;enum name&gt;<font></font>
        An enumeration class name.<font></font>
        Should be a valid Java identifier. May contain package name.<font></font>
<font></font>
Options:<font></font>
<font></font>
    -d &lt;directory&gt;<font></font>
        Output directory path.<font></font>
        Current working directory by default.<font></font>
<font></font>
    -e &lt;item list file&gt;<font></font>
        Path to UTF8-encoded text file with list of enumeration item names.<font></font>
        Item names will be autogenerated if absent.<font></font>
        Mutually exclusive with the -c option.<font></font>
<font></font>
    -c &lt;count&gt;<font></font>
        Count of autogenerated enumeration item names.<font></font>
        Mutually exclusive with the -e option.<font></font>
        Default value: Algorithm-depended<font></font>
<font></font>
    -a &lt;algorithm&gt;<font></font>
        Enumeration generation algorithm.<font></font>
        Supported algorithms:<font></font>
          ConDy          - Employ Constant Dynamic (JEP 309) for enum elements initialization<font></font>
          ExtractMethod  - Extract enum elements initialization code to separate method<font></font>
          Unsafe         - Employ sun.misc.Unsafe for enum elements initialization<font></font>
<font></font>
        Default algorithm: ExtractMethod<font></font>
<font></font>
    -h / -?<font></font>
        Show this help page.<font></font>
<font></font>
Example:<font></font>
<font></font>
    java -jar HugeEnumGen.jar -d ./bin -c 2020 com.habr.maccimo.HugeEnum2020<font></font>
<font></font>
</pre><br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar501860/index.html">15 ูุงูู ูุฏ ูุถูู ูู RU-Center ุฎุฏูุฉ ูุฏููุนุฉ ุจุฏูู ูุดุงุฑูุชู</a></li>
<li><a href="../ar501862/index.html">ุฑูุฑูุฉ ุชุญุช ุบุทุงุก ุงููุญุฑู</a></li>
<li><a href="../ar501864/index.html">ูุณุงุนุฏ ุฃู ููุชุด: ููู ูุชุตู ุงูุฑูุจูุชุ</a></li>
<li><a href="../ar501866/index.html">ูู ุนุฏุฏ ุงููุธุงุฆู ุงูุฑูุจูุชุงุช ุณูู ุชุฏูุฑ</a></li>
<li><a href="../ar501868/index.html">ููู ูุง ุชุฏุน ุงููุญุงุณุจ ูุฑูู ููุณู ุฃู ูููู 1C ุฅูู ุงูุณุญุงุจุฉ. ุชุนูููุงุช ุฎุทูุฉ ุจุฎุทูุฉ</a></li>
<li><a href="../ar501872/index.html">ููุงู ุงูุฏุฑุงุณุฉ ูู ุฃูุธูุฉ ุนูู ุงูุชุญูู ุงูุขูู</a></li>
<li><a href="../ar501874/index.html">ุฃุจููุฉ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงูุญุฏูุซุฉ (ุงูุฌุฒุก 2)</a></li>
<li><a href="../ar501880/index.html">ุญูู ุชุฑุฌูุฉ "ุงูุจุฏุงูุงุช" ู "ุงูุจุฏุงูุงุช" ุจุฏูู ุงูุจุฏุงูุฉ ุ ุงูุจุฏุงูุฉ ูุงูุฃููู</a></li>
<li><a href="../ar501882/index.html">ููู ูุณุชุฎุฏู ุฎูุงุฑุฒููุงุช ุฑุคูุฉ ุงูููุจููุชุฑ: ูุนุงูุฌุฉ ุงูููุฏูู ูู ูุชุตูุญ ูุญููู ุจุงุณุชุฎุฏุงู OpenCV.js</a></li>
<li><a href="../ar501884/index.html">ููู ุณุชุณุงุนุฏ ูุญููุธุงุช ุงููุนูููุงุช ุงูุทุจูุฉ ุงูุฅููุชุฑูููุฉ ูู ุชุดุฎูุต ุงูุฃูุฑุงุถ ุจุดูู ุฃูุซุฑ ูุนุงููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>