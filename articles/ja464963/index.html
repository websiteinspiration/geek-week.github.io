<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌟 🗳️ 🤸🏿 Quest FoglightでMicrosoft SQL Serverのパフォーマンスの問題をすばやくローカライズ 🚼 🔬 👩🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foglight for Databasesモニタリングツールに関する以前の記事では、SQL Server、Oracle、PostgreSQL、MySQL、SAP ASE、DB2、Cassandra、MongoDBの単一のインターフェースからのモニタリング機能について説明しました。今日は、Micro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Quest FoglightでMicrosoft SQL Serverのパフォーマンスの問題をすばやくローカライズ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/galssoftware/blog/464963/"><img src="https://habrastorage.org/webt/3n/t3/ou/3nt3ouckicz65xztkx1lntnvdxo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foglight for Databasesモニタリングツールに関する以前の記事では、</font><font style="vertical-align: inherit;">SQL Server、Oracle、PostgreSQL、MySQL、SAP ASE、DB2、Cassandra、MongoDBの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単一のインターフェースからのモニタリング機能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について説明</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">しました</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">今日は、Microsoft SQL Serverの異常な動作の原因をすばやく特定するためのアプローチを分析します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロックソースを検索します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスメトリックを参照して、データベースの設定を「なりました」と比較します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスの低下によるデータベース構造の変更を検索します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カットの下の詳細。</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foglight for Databases</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、一般的なデータベースのパフォーマンスと変更を監視するためのツールです。</font><font style="vertical-align: inherit;">この製品に慣れていない場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前の記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を読むことをお勧めします</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして以下では、インターフェースのスクリーンショットを示し、Foglightの機能とデータベースでの問題の発見のしやすさを示します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソース検索をロック</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Management Studioでロックの理由を検索できます。ただし、このユーティリティを備えたワークステーションは手元にない場合があり、コンソールを開くことは必ずしも便利ではありません。 Quest Foglightでは、数回のクリックでブロックの理由を見つけることができます。以下のスクリーンショットでは、メインのデータベース監視コンソールが表示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/05f/5a5/0df/05f5a50dfd3b80b8584ba5d103ebbaa8.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通知を既に受け取ったアテンダント管理者は、SQL PI（Performance Investigator）ビューに移動します。 [ワークロード]列には、ロック待機パラメータのゼロ以外の値を示す目立つ赤いフィールドがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/680/4da/9e8/6804da9e89d4470476c2edf2ba3150ca.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワークロードグラフをクリックすると、データベースロードソースの詳細ビューが開き、メニューの左側の列に多変量パフォーマンス分析が表示されます。ここでは、上記のスクリーンショットのように、ブロックによりリソースが大量に使用されていることがわかります。左側のメニューには、ロックされたオブジェクトの特別なビューがあり、ロックされたオブジェクトが検出されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/703/cea/2d4/703cea2d4f6e07f4bee7e402e40f0c34.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロックされたオブジェクトは、ロックされたオブジェクトを格納します。画面の右側にあるロックの理由：継続時間、どのサーバー（またはワークステーション）、どのプログラム、どのユーザーおよび実行可能オブジェクトからブロックに至ったか。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ab8/18f/1d9/ab818f1d982f046b9d2b50476010449b.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行可能オブジェクトに切り替えると、このオブジェクトのコンテンツを表示する機能を備えた新しいビューが開きます。 [バッチテキストの表示]をクリックすると、実行されたコードが開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c5a/2ce/783/c5a2ce783d3ca687838ff4370560fb0f.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
診断時間を短縮することは、ITチームの成功の鍵です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB設定の比較</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者またはデータベース管理者によって行われた変更も、劇的な速度低下につながる可能性があります。</font><font style="vertical-align: inherit;">しかし、問題が発生したときには、誰がこれをしたかは問題ではありません。何が起こったかが重要です。</font><font style="vertical-align: inherit;">これを理解しようとします。</font><font style="vertical-align: inherit;">問題のあるデータベースインスタンスのコンテキストメニューを開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/753/709/c87/753709c8713b6ba86ee8ad0f40fa5d70.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表示されるメニューで、SQL PI（Performance Investigator）に移動して、多変量解析のビューを開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7d0/22e/770/7d022e77022981f6cb01eb26572f13d3.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベースラインビューに移動して、通常の値と比較したメトリックの動作を評価します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/107/f6a/b01/107f6ab01025f5bc0c502baa84419e94.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフは、13：40以降、リソース消費の異常な増加が始まったことを示しています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cb4/4c5/708/cb44c57083073ef36d32cef247323306.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューでは、比較対象を構成します。ここで、（ベースラインに沿った）それ自体とのメトリックの比較を検討します。上記で明らかになった異常な偏差。一般に、パフォーマンスを別のデータベースインスタンスと比較することもできます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b43/aba/f3c/b43abaf3cdb4c56479fe922af34d7805.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比較するオブジェクトを選択すると、大切な比較ボタンが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/82a/2ad/1c2/82a2ad1c2892e4efdf171dd7b735ba1b.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
平均ビューは、異常な値がメトリックによって観察されたことを示しています：アクティブ時間、実行、およびログイン率。変更を識別するために、新しい比較を始めましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad1/deb/cbf/ad1debcbf8bed4cafcf86abc7b9bc21f.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
指標を自分たちと比較しますが、1日前です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b7f/2df/d77/b7f2dfd77074740927818754e762f66c.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定を選択すると、[比較]ボタンが表示されます。このボタンをクリックする必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e1f/e17/ba0/e1fe17ba0c435d2e9995ea6b54f38595.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比較のための測定値があるビューが表示されます。</font><font style="vertical-align: inherit;">デモでは、プログラムメニュー項目を選択します。</font><font style="vertical-align: inherit;">統計セクションでは、実行指標の値が2倍に増加しています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/16c/f85/158/16cf851585a23c48f0c76c4130b35e6d.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（プログラム）メニューセクションのスケールの左側と右側に、メトリック値が表示されます。</font><font style="vertical-align: inherit;">ここでは、アクティブ時間と実行がほぼ2倍になったことがわかります。これは、状況を詳細に分析する機会です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/28a/de8/7a7/28ade87a7f6dd7b65442800c2cf12147.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に、他のメトリックを使用して比較分析を実行でき、プレゼンテーションをPDFレポートにアップロードできます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース構造の変更を検索します</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インデックス、実行プラン、およびその他のオブジェクトへの変更は、文書化されていない場合があります。データベースの開発者または管理者は、一見マイナーな変更を行いますが、しばらくすると忘れてしまうかもしれません。 Foglight for Databasesインターフェースでは、構成の変更はパフォーマンスの変更に結び付けられています。変更を識別するには、メインのデータベース監視画面から[ワークロード]ビューに移動します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/083/e39/ff0/083e39ff08e06d407481bca49ec12b7c.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースに大きな負荷がかかっているクライアントマシンがあるとわかっているとします。左側のビューでクライアントマシンを開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8aa/e87/293/8aae87293feb66c7174efc6250b881d8.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バッチは、データベースの負荷に従ってソートされます。リストの最初のオブジェクトに移動して、オブジェクトの変更（変更追跡）を見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e00/f44/6fb/e00f446fbd8cc4d8ed44432e8af849a9.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフでは、右側の凡例に従って、選択した期間に対応する変更がマークされています。ここでの最初の変更はインデックスの削除で、2番目の変更は新しい実行プランの追加です。ご覧のように、インデックスが削除された後、その他の待機負荷が急激に上昇しています-紫のゾーン（バッチジョブの実行でも参照されます）。 4番目の変更は、並列処理のレベルの増加です。これにより、リクエスト数が増加する可能性があります（IO待機-ブルーゾーン）。新しい実行プランを追加することの影響を考慮してください。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ec9/24b/ac9/ec924bac9168c6b676fad8a2326b6b6f.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移行後、新しい実行プランの詳細が開きました。次に、発生した変更を比較します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d44/0fb/362/d440fb3629400dba3ade2f8676d1e1c6.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移行後、新しい実行プランの詳細が開きました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/687/134/6c1/6871346c1ee748f9d48e430c1005103d.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じ実行プランを、Quest Foglightインターフェイスから直接Management Studioで開くことができます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c8c/a6b/77c/c8ca6b77c6567cb7552e8c34a692142f.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、それはManagement Studioコンソールで表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/064/407/95c/06440795cd09a85818735760ad68c2b7.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
履歴ビューに切り替えると、時間の経過に伴うメトリックの変化を確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a0e/565/d61/a0e565d619e0e20d3cbcd257e73002ae.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
履歴ビューは、特定のメトリックに対する変更の影響を評価するために使用できます。次に、その他ビューに移動します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/49e/b0e/d12/49eb0ed1232c3d863ed8f83ec937548e.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューには、データベースの負荷に影響を与えたバッチが表示されます。それらはすでに降順でソートされています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/089/6f4/aa9/0896f4aa95bc99af4a2e3986bc44ee37.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foglightユーザーは、変更を自動的に追跡するだけでなく、手動で変更を追加できます。パフォーマンスが低下した場合、当直の管理者はサービスの低下の原因を探す必要がなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foglight for Databasesが気に入ってデータベースで試してみたい場合- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">フィードバックフォームに</font></a><font style="vertical-align: inherit;">配布とトライアルキーのリクエストを残してください</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのウェブサイトで。</font><font style="vertical-align: inherit;">安定したデータベース操作と異常作業の迅速なローカライズ！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja464949/index.html">もう一度、GCD、ユークリッドアルゴリズム、および一般的なアルゴリズムの歴史について少し説明します。もちろんSwiftの例では</a></li>
<li><a href="../ja464951/index.html">タスクが単純であるほど、私は誤解されることが多い</a></li>
<li><a href="../ja464955/index.html">Iron Mike TysonとブロックチェーンプロジェクトFight to Fame</a></li>
<li><a href="../ja464959/index.html">ロシア語の文を解析する</a></li>
<li><a href="../ja464961/index.html">Unity UIでビジュアルコンポーネントを作成します。パーティクルシステム</a></li>
<li><a href="../ja464967/index.html">先週のフロントエンドの世界からの新鮮な食材のダイジェストNo. 377（2019年8月19日〜25日）</a></li>
<li><a href="../ja464969/index.html">CRISPRは人を苦痛から救う機会を提供します</a></li>
<li><a href="../ja464971/index.html">PHPダイジェストNo. 163（2019年8月12〜26日）</a></li>
<li><a href="../ja464973/index.html">10分で曲を書く（textgenrnn Python3モジュール）</a></li>
<li><a href="../ja464975/index.html">ITIL 4 Foundation試験の準備と合格方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>