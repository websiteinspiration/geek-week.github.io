<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😵 🚛 👓 ADSM3。IPAM / DCIMシステム 🕹️ 🕛 🧕🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="以前のADSMシリーズでは、自動化フレームワークを開発し、仮想化が登場した理由とその仕組みを理解しました。では最後の部分、我々は（、自律システムの番号をルーティング、アドレッシング）、LLDを決めた機器、メーカーの役割を選択し、ネットワーク設計を正当化。
 
 これで、この大量の情報を保存し、将来的...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ADSM3。IPAM / DCIMシステム</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486000/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前のADSMシリーズでは、自動化フレームワークを開発し、仮想化が登場した理由とその仕組みを理解しました。では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後の部分、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々は（、自律システムの番号をルーティング、アドレッシング）、LLDを決めた機器、メーカーの役割を選択し、ネットワーク設計を正当化。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、この大量の情報を保存し、将来的に便利に取得する方法について考える準備ができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいえ、もちろん、今日、Excelスプレッドシートで割り当てられたIPアドレスを追跡している企業があります。しかし、これは私たちのやり方ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかのブランチで最小のオフィスであっても、IPスペース管理システムを一元化しても問題はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在庫システムの必要性は一言もなく明らかです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b44/a21/5cc/b44a215cc7c93ecf6eeca48c41d721d9.svg" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ADSMのすべての問題：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0. ADSM。</font><font style="vertical-align: inherit;">パートゼロ。</font><font style="vertical-align: inherit;">計画</font></font></a><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. ADSM。</font><font style="vertical-align: inherit;">パート1（ゼロの後）。</font><font style="vertical-align: inherit;">ネットワーク仮想化</font></font></a><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ADSM。</font><font style="vertical-align: inherit;">二部。</font><font style="vertical-align: inherit;">ネットワーク設計</font></font></a><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ADSM。</font><font style="vertical-align: inherit;">パート3。</font><font style="vertical-align: inherit;">IPAM / DCIM-system</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この問題は、アドレス空間管理システムと在庫システムという、ネットワーク自動化の統合システムに捧げます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを選択してインストールし、アーキテクチャ、データベーススキーマ、インタラクションインターフェースを処理して入力します。</font><font style="vertical-align: inherit;">次のパートでは、新しいラックの追加などの反復的な操作を自動化する簡単なスクリプトの作成を開始します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関する別の記事を既に公開してい</font><font style="vertical-align: inherit;">ます。その原則と作業について簡単にレビューしましたが、必要になります。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></h1><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムアーキテクチャー</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxデータスキーマ</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxのインストールに関するいくつかのニュアンス</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLについて</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日、市場はこのタスクを実装する約12のツールを提供しています。有料とオープンソースの両方です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この一連の記事のタスクでは、次の理由からNetBoxを選択しました。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それは無料です</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インベントリとIPスペース管理の両方の必要なパーツが含まれています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTful APIを備えています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、Digital Oceanによって（より具体的には、すべてのJeremy Stretchに愛されて）彼ら自身のために、つまりデータセンターのために開発されました。</font><font style="vertical-align: inherit;">したがって、必要なものはほぼすべてあり、それ以上のものはほとんどありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">積極的にサポートされ（Slack、Github、Googleニュースレター）、更新されています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはオープンソースです</font></font></li>
</ol><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADSMのニーズのために、私たちのサーバー上virtualochkaに（アントンKlochkovとのおかげNetBoxを展開</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミランを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://netbox.linkmeup.ru:45127</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 また、私たちは将来的に必要なほぼすべてのデータを記入しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 したがって、インストールを展開するまで、ほとんどすべての例を試し、データスキームを読み取りモードで調べることができます。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 始める前に少し役立つ：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub上のNetBox自体</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテナのバージョン</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全なインストール手順とすべての製品ドキュメント</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBox Python SDK</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIドキュメント</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メーリングリスト</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetworkToCode Slackチャネル</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTとは何ですか？</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADSMニーズのためのNetBoxインストール</font></font></a></li>
</ul><br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムアーキテクチャー</font></font></h1><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxはPython3で書かれています。</font><font style="vertical-align: inherit;">他の多くのソリューションはphpで記述されており、必要に応じてそれらを変更することはそれほど単純ではないため、これは良いことです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイト自体のフレームワークはDjangoです。</font></font></li>
<li>    PostgreSQL.</li>
<li>WEB-frontend (HTTP-) — NGINX —     Gunicron.</li>
<li>WSGI — Gunicorn —   Nginx   .</li>
<li>    API — Swagger.</li>
<li>  NetBox — Systemd.</li>
</ul><br>
<blockquote> NetBox —     . ,  2.7   supervisord     Python 2.7   systemd.        ,  Webhooks.<br>
<br>
            .<br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、すべてのコンポーネントが成熟し、テストされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者によると、NetBoxはネットワークの実際の状態ではなく、ターゲットを反映しています。</font><font style="vertical-align: inherit;">したがって、ネットワークからNetBoxには何も読み込まれません。このネットワークは、NetBoxのコンテンツと一致するように構成されています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、NetBoxは唯一の真の情報源として機能します（単一の情報源を持つトレーシングペーパー）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ネットワーク上の変更は、NetBoxの変更によって引き起こされる必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてそれは、このシリーズの記事で私が公言するイデオロギーに非常によく適合します。ネットワークに変更を加えたい場合は、まずシステムに変更を加えます。</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxデータスキーマ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxが解決する2つの主なタスクは、アドレス空間管理とインベントリです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxが企業内で唯一の在庫システムになる可能性は低く、むしろ、メインボックスからデータを取得してネットワークを在庫管理するための特定の追加システムになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、私たちのケースでは、ADSM目的のNetBoxのみが存在します。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この時点で、NetBoxの初期データのほとんどはすでに入力されています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 このデータについて、APIを使用したさまざまな例を示します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 登って見るだけです：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netbox.linkmeup.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：45127 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 そして、自動化に移るとき、同じデータが将来必要になります。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 一般的に、データスキーマはPostgresのデータベーススキーマから見ることができます。</font></font><br>
<br>
<pre><code class="bash hljs">                      List of relations<font></font>
 Schema |                Name                | Type  | Owner<font></font>
--------+------------------------------------+-------+--------<font></font>
 public | auth_group                         | table | netbox<font></font>
 public | auth_group_permissions             | table | netbox<font></font>
 public | auth_permission                    | table | netbox<font></font>
 public | auth_user                          | table | netbox<font></font>
 public | auth_user_groups                   | table | netbox<font></font>
 public | auth_user_user_permissions         | table | netbox<font></font>
 public | circuits_circuit                   | table | netbox<font></font>
 public | circuits_circuittermination        | table | netbox<font></font>
 public | circuits_circuittype               | table | netbox<font></font>
 public | circuits_provider                  | table | netbox<font></font>
 public | dcim_cable                         | table | netbox<font></font>
 public | dcim_consoleport                   | table | netbox<font></font>
 public | dcim_consoleporttemplate           | table | netbox<font></font>
 public | dcim_consoleserverport             | table | netbox<font></font>
 public | dcim_consoleserverporttemplate     | table | netbox<font></font>
 public | dcim_device                        | table | netbox<font></font>
 public | dcim_devicebay                     | table | netbox<font></font>
 public | dcim_devicebaytemplate             | table | netbox<font></font>
 public | dcim_devicerole                    | table | netbox<font></font>
 public | dcim_devicetype                    | table | netbox<font></font>
 public | dcim_frontport                     | table | netbox<font></font>
 public | dcim_frontporttemplate             | table | netbox<font></font>
 public | dcim_interface                     | table | netbox<font></font>
 public | dcim_interface_tagged_vlans        | table | netbox<font></font>
 public | dcim_interfacetemplate             | table | netbox<font></font>
 public | dcim_inventoryitem                 | table | netbox<font></font>
 public | dcim_manufacturer                  | table | netbox<font></font>
 public | dcim_platform                      | table | netbox<font></font>
 public | dcim_powerfeed                     | table | netbox<font></font>
 public | dcim_poweroutlet                   | table | netbox<font></font>
 public | dcim_poweroutlettemplate           | table | netbox<font></font>
 public | dcim_powerpanel                    | table | netbox<font></font>
 public | dcim_powerport                     | table | netbox<font></font>
 public | dcim_powerporttemplate             | table | netbox<font></font>
 public | dcim_rack                          | table | netbox<font></font>
 public | dcim_rackgroup                     | table | netbox<font></font>
 public | dcim_rackreservation               | table | netbox<font></font>
 public | dcim_rackrole                      | table | netbox<font></font>
 public | dcim_rearport                      | table | netbox<font></font>
 public | dcim_rearporttemplate              | table | netbox<font></font>
 public | dcim_region                        | table | netbox<font></font>
 public | dcim_site                          | table | netbox<font></font>
 public | dcim_virtualchassis                | table | netbox<font></font>
 public | django_admin_log                   | table | netbox<font></font>
 public | django_content_type                | table | netbox<font></font>
 public | django_migrations                  | table | netbox<font></font>
 public | django_session                     | table | netbox<font></font>
 public | extras_configcontext               | table | netbox<font></font>
 public | extras_configcontext_platforms     | table | netbox<font></font>
 public | extras_configcontext_regions       | table | netbox<font></font>
 public | extras_configcontext_roles         | table | netbox<font></font>
 public | extras_configcontext_sites         | table | netbox<font></font>
 public | extras_configcontext_tags          | table | netbox<font></font>
 public | extras_configcontext_tenant_groups | table | netbox<font></font>
 public | extras_configcontext_tenants       | table | netbox<font></font>
 public | extras_customfield                 | table | netbox<font></font>
 public | extras_customfield_obj_type        | table | netbox<font></font>
 public | extras_customfieldchoice           | table | netbox<font></font>
 public | extras_customfieldvalue            | table | netbox<font></font>
 public | extras_customlink                  | table | netbox<font></font>
 public | extras_exporttemplate              | table | netbox<font></font>
 public | extras_graph                       | table | netbox<font></font>
 public | extras_imageattachment             | table | netbox<font></font>
 public | extras_objectchange                | table | netbox<font></font>
 public | extras_reportresult                | table | netbox<font></font>
 public | extras_tag                         | table | netbox<font></font>
 public | extras_taggeditem                  | table | netbox<font></font>
 public | extras_webhook                     | table | netbox<font></font>
 public | extras_webhook_obj_type            | table | netbox<font></font>
 public | ipam_aggregate                     | table | netbox<font></font>
 public | ipam_ipaddress                     | table | netbox<font></font>
 public | ipam_prefix                        | table | netbox<font></font>
 public | ipam_rir                           | table | netbox<font></font>
 public | ipam_role                          | table | netbox<font></font>
 public | ipam_service                       | table | netbox<font></font>
 public | ipam_service_ipaddresses           | table | netbox<font></font>
 public | ipam_vlan                          | table | netbox<font></font>
 public | ipam_vlangroup                     | table | netbox<font></font>
 public | ipam_vrf                           | table | netbox<font></font>
 public | secrets_secret                     | table | netbox<font></font>
 public | secrets_secretrole                 | table | netbox<font></font>
 public | secrets_secretrole_groups          | table | netbox<font></font>
 public | secrets_secretrole_users           | table | netbox<font></font>
 public | secrets_sessionkey                 | table | netbox<font></font>
 public | secrets_userkey                    | table | netbox<font></font>
 public | taggit_tag                         | table | netbox<font></font>
 public | taggit_taggeditem                  | table | netbox<font></font>
 public | tenancy_tenant                     | table | netbox<font></font>
 public | tenancy_tenantgroup                | table | netbox<font></font>
 public | users_token                        | table | netbox<font></font>
 public | virtualization_cluster             | table | netbox<font></font>
 public | virtualization_clustergroup        | table | netbox<font></font>
 public | virtualization_clustertype         | table | netbox<font></font>
 public | virtualization_virtualmachine      | table | netbox<font></font>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxの機能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPアドレス管理（IPAM）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -IPプレフィックス、アドレス、VRFおよびVLAN</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機器ラック</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -サイト、グループ、役割ごとに整理された</font><b><font style="vertical-align: inherit;">機器</font></b><font style="vertical-align: inherit;">ラック</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -デバイス、そのモデル、役割、コンポーネント、および展開</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -デバイス間のネットワーク、コンソール、および電源接続</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮想化</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -仮想マシンとコンピューティングクラスター</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ回線</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -プロバイダー接続</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シークレット</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -暗号化されたユーザー資格情報ストレージ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、DCIM-データセンターインフラストラクチャ管理、IPAM-IPアドレス管理、仮想化、その他の優れた点について説明します。</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず最初に。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DCIM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要な部分は間違いなく私たちが持っている機器とそれがどのように相互に接続されているかです。</font><font style="vertical-align: inherit;">しかし、それはすべて</font><font style="vertical-align: inherit;">それが立っている</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ところ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">始まり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地域とサイト（地域/サイト）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxパラダイムでは、デバイスはサイトにインストールされ、サイトはリージョンに属し、リージョンはネストできます。</font><font style="vertical-align: inherit;">ただし、単に地域に設置することはできません。</font><font style="vertical-align: inherit;">そのような必要がある場合は、別のサイトを確立する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、これは次のようになる可能性があります。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロシア</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モスクワ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カザン</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スペイン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バルセロナ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マラガ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中国</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上海</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">西安</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/703/ab7/358/703ab73587ab4d1fe9079aa548ba93d1.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークをどこでどのように計画したかを思い出します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ADSM2。</font><font style="vertical-align: inherit;">ネットワーク設計</font></font></a><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1df/012/888/1df0128888e0708959f6108e176a0de9.png" width="700"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d5d/b34/709/d5db34709814c8e1fe07f74b8c9f96fd.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
APIで何ができるか見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、すべてのリージョンをリストする方法です。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/regions/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.regions.all()</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下では、結果を出力せずにcurlとpynetboxの例を示します。</font><font style="vertical-align: inherit;">URLの最後のスラッシュを</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">忘れないでください。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スラッシュがないと機能しません。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">RESTful API</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 に関する記事でpynetboxの使用方法について話しました</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> サイトのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/sites/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.sites.all()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定の地域のサイトのリスト：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/sites/?region=ru"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.sites.filter(region=<span class="hljs-string">"ru"</span>)
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索はフルネームではなく、いわゆる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スラッグ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって行われることに注意してください</font><font style="vertical-align: inherit;">。</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slug</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は安全な文字のみを含む識別子で、[0-9A-Za-z-_]で、URLで使用できます。</font><font style="vertical-align: inherit;">たとえば、「バルセロナ」ではなく「bcn」などのオブジェクトを作成するときに設定されます。</font></font><br>
 <img src="https://habrastorage.org/getpro/habr/post_images/3db/6cc/f89/3db6ccf89097c571900457aebbc922fe.png" width="400"><br>
</blockquote><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイス自体には</font><font style="vertical-align: inherit;">、リーフ、スパイン、エッジ、ボーダーなどの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役割</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、それ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダーの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある種の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">モデルです</font></a><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arista</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ベンダーが最初に作成され、次にモデル内に作成されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、名前、サービスインターフェイスのセット、リモートコントロールインターフェイス、コンソールポート、および電源モジュールのセットで特徴付けられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イーサネットインターフェイスを備えたスイッチ、ルーター、ホストに加えて、コンソールサーバーを作成できます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/826/9a4/f9f/8269a4f9ffb7f7e66096eff89dc19013.png" width="800"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c81/cce/0f9/c81cce0f9d543eedd4f7c1e1ede5f43f.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.devices.all()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のサイトのすべてのデバイス：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?site=mlg"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.devices.filter(site=<span class="hljs-string">"mlg"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のモデルのすべてのデバイス</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?model=veos"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.devices.filter(device_type_id=<span class="hljs-number">2</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定の役割を持つすべてのデバイス：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?role=leaf"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.devices.filter(role=<span class="hljs-string">"leaf"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスのステータスは、アクティブ、オフライン、計画済みなどさまざまです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのアクティブなデバイス：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?status=active"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.devices.filter(status=<span class="hljs-string">"active"</span>)
</code></pre><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxは多くのタイプの物理</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とLAG </font><font style="vertical-align: inherit;">をサポートし</font><font style="vertical-align: inherit;">ますが、Vlan / IRBやループバックなどのすべての仮想</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">インターフェース</font></a><font style="vertical-align: inherit;">は1つのタイプ（仮想）に結合されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各インターフェイスはデバイスに関連付けられています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスインターフェースは相互に接続できます。</font><font style="vertical-align: inherit;">これは、インターフェースとAPI応答（属性connected_endpoint）の両方に表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/aea/c56/b47/aeac56b47e58145211f5726c8e48cb91.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターフェイスは、タグ付きまたはアクセスのさまざまなモードにすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、VLANの有無にかかわらず、このサイトまたはグローバルでタグに起動できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスインターフェイスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/interfaces/?device=mlg-leaf-0"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.interfaces.filter(device=<span class="hljs-string">"mlg-leaf-0"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のインターフェイスのVLANのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/interfaces/?device=mlg-leaf-0&amp;name=Ethernet7"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.interfaces.get(device=<span class="hljs-string">"mlg-leaf-0"</span>, name=<span class="hljs-string">"Ethernet7"</span>).untagged_vlan.vid
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">filter</font></b><font style="vertical-align: inherit;">ではなく</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドをすでに使用していることに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結果が単一のオブジェクトであっても、Filterはリストを返します。</font><font style="vertical-align: inherit;">Get-単一のオブジェクトを返すか、クエリ結果がオブジェクトのリストの場合はクラッシュします。</font><font style="vertical-align: inherit;">
したがって、結果が1つのコピーになることが確実である場合にのみ、getを使用してください。</font><font style="vertical-align: inherit;">
ここでは、リクエストの直後に、オブジェクトの属性に注目します。</font><font style="vertical-align: inherit;">厳密に言うと、これは誤りです。リクエストで何も見つからなかった場合、pynetboxはNoneを返し、属性「untagged_vlan」がありません。</font><font style="vertical-align: inherit;">
また、すべての場所でpynetboxがスラッグ、どこか、名前を期待しているわけではないことにも注意してください。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
 <br><font style="vertical-align: inherit;"></font><br>
 <br><font style="vertical-align: inherit;"></font><br>
 <br><font style="vertical-align: inherit;"></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 特定のインターフェイスがどのデバイスのどのインターフェイスに接続されているかを調べます。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/interfaces/?device=mlg-leaf-0&amp;name=Ethernet1"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">iface = nb.dcim.interfaces.get(device=<span class="hljs-string">"mlg-leaf-0"</span>, name=<span class="hljs-string">"Ethernet1"</span>)<font></font>
iface.connected_endpoint.device<font></font>
iface.connected_endpoint.name<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
管理インターフェースの名前を確認します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/interfaces/?device=mlg-leaf-0&amp;mgmt_only=true"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">nb.dcim.interfaces.get(device=<span class="hljs-string">"mlg-leaf-0"</span>, mgmt_only=<span class="hljs-literal">True</span>)
</code></pre><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンソールポート</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンソールポートはインターフェイスではないため、個別のエンドポイントとしてレンダリングされます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスポートは、コンソールサーバーポートに関連付けることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のデバイスが接続されているコンソールサーバーのポートを確認します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/console-ports/?device=mlg-leaf-0"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.console_ports.get(device=<span class="hljs-string">"mlg-leaf-0"</span>).serialize()
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pynetbox </font><font style="vertical-align: inherit;">の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serialize</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">を使用すると、クラスのインスタンスの属性を辞書に変換できます。</font></font><br>
</blockquote><hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イパム</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLANおよびVRF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらは場所に関連付けることができます-VLANに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VRFを作成するときに、アドレススペースが他のVRFと交差できるかどうかを指定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのVLANのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/vlans/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">nb.ipam.vlans.all()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのVRFのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/vrfs/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">nb.ipam.vrfs.all()
</code></pre><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPプレフィックス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらは階層構造を持っています。</font><font style="vertical-align: inherit;">それは任意のVRFに属している可能性があります（属していない場合はグローバル）。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/94b/ea6/8c4/94bea68c425c9a8bd601c9a0da74193e.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxには、無料の接頭辞の非常に便利な視覚的表現</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1be/90e/14d/1be90e14da8f4c3bedc4bcb892cb5156.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
があります。緑の線をクリックするだけで選択できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場所に取り付けることができます。</font><font style="vertical-align: inherit;">APIを使用して、必要なサイズの次の空きサブプレフィックスまたは次の空きIPアドレスを選択できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックマーク/パラメーター「Is a pool」は、自動選択中にこのプレフィックスから0番目のアドレスが強調表示されるか、それとも1番目から始まるかを決定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Underlayロールと長さ19のマラガサイトのIPプレフィックスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/prefixes/?site=mlg&amp;role=underlay&amp;mask_length=19"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">prefix = nb.ipam.prefixes.get(site=<span class="hljs-string">"mlg"</span>, role=<span class="hljs-string">"underlay"</span>, mask_length=<span class="hljs-string">"19"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Underlayロールを持つロシア地域の無料プレフィックスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/prefixes/40/available-prefixes/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="bash hljs">prefix.available_prefixes.list()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の無料の24プレフィックスを強調表示します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X POST <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/prefixes/40/available-prefixes/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span> \<font></font>
-d <span class="hljs-string">"{\"prefix_length\": 24}"</span></code></pre><br>
<pre><code class="bash hljs">prefix.available_prefixes.create({<span class="hljs-string">"prefix_length"</span>:24})</code></pre><br>
<blockquote>        - ,   POST    ID   —    — <b>40</b>.       .<br>
   pynetbox   (  )     <b>prefix</b>,       <b>available_prefixes</b>   <b>create</b>.<br>
     <b> </b>,       .<br>
</blockquote><hr><br>
<h3>IP-</h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアドレスを含むプレフィックスがある場合、それらはその一部になります。</font><font style="vertical-align: inherit;">彼らは一人でいることができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
任意のVRFに属しているか、グローバルに属している可能性があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらはインターフェースに取り付けることができますが、空中にぶら下がることがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プレフィックスで次の空きIPアドレスを選択できます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4a1/c4d/442/4a1c4d4428f703d9a90766ffa9351fe8.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、緑の線をクリックします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のインターフェースのIPアドレスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/ip-addresses/?interface_id=8"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">nb.ipam.ip_addresses.filter(interface_id=<span class="hljs-number">8</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/ip-addresses/?device=mlg-leaf-0&amp;interface=Ethernet1"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.ipam.ip_addresses.filter(device=<span class="hljs-string">"mlg-leaf-0"</span>, interface=<span class="hljs-string">"Ethernet1"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスIPアドレスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/ip-addresses/?device=mlg-leaf-0"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.ipam.ip_addresses.filter(device=<span class="hljs-string">"mlg-leaf-0"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用可能なプレフィックスIPアドレスのリストを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/prefixes/28/available-ips/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">prefix = nb.ipam.prefixes.get(site=<span class="hljs-string">"mlg"</span>, role=<span class="hljs-string">"leaf-loopbacks"</span>)<font></font>
prefix.available_ips.list()<font></font>
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ここでも、アドレスを選択するURLのプレフィックスのIDを指定する必要があります。今回は28です。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレフィックスで次のフリーIPアドレスを強調表示します。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X POST <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/ipam/prefixes/28/available-ips/"</span> \<font></font>
-H <span class="hljs-string">"accept: application/json"</span> \<font></font>
-H <span class="hljs-string">"Content-Type: application/json"</span> \<font></font>
-H <span class="hljs-string">"Authorization: TOKEN a9aae70d65c928a554f9a038b9d4703a1583594f"</span></code></pre><br>
<pre><code class="bash hljs">prefix.available_ips.create()</code></pre><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮想化</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現代のDCの称号をめぐってまだ戦い続けています。</font><font style="vertical-align: inherit;">仮想化がない場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxは、仮想マシンに関する情報を格納する場所ではありません（物理マシンを格納する必要性について推測することもできます）。</font><font style="vertical-align: inherit;">ただし、これは、たとえばルートリフレクター、NTP、Syslog、S-Flowサーバー、制御マシンなどのサービスマシンに関する情報を入力できるため、便利な場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VMには独自のインターフェースのリストがあります。これらは物理デバイスのインターフェースとは異なり、独自のエンドポイントを持っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、すべての仮想マシンを一覧表示できます。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/virtualization/virtual-machines/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">nb.virtualization.virtual_machines.all()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、すべてのVMのすべてのインターフェースについて：</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/virtualization/interfaces/"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span> </code></pre><br>
<pre><code class="python hljs">nb.virtualization.interfaces.all()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VMの場合、それが実行されている特定のハイパーバイザー/物理マシンを指定することはできませんが、クラスターを指定することはできます。</font><font style="vertical-align: inherit;">すべてがそれほど絶望的ではありませんが。</font><font style="vertical-align: inherit;">読む。</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">余分なもの</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxの基本機能は、多くのユーザーのタスクのほとんどをカバーしていますが、すべてをカバーしているわけではありません。</font><font style="vertical-align: inherit;">それでも、この製品はもともと特定の会社の問題を解決するために書かれたものです。</font><font style="vertical-align: inherit;">しかし、それは活発に開発中であり、新しいリリースがかなり</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頻繁に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出てき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これにより、新しい機能が登場します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、たとえば、数年前のNetBoxの最初のインストールから、タグが表示され、構成コンテキスト、ウェブフック、キャッシング、監視対象がsystemd、外部ファイルストレージに変更されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
気を付けて。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムフィールド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
任意のデータを入力できるエンティティにフィールドを追加したい場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、スイッチの購入に使用した供給契約の番号や、VMが実行されている物理マシンの名前を示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでカスタムフィールドが役に立ちます。NetBoxのほとんどすべてのエンティティに追加できるテキスト値を持つフィールドだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カスタムフィールドは管理パネルで作成されます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1cf/10e/568/1cf10e56808f227ce7f7270581b84a31.png" width="600"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、カスタムフィールドが作成されたデバイスを編集するときの外観です：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d3a/c2b/c78/d3ac2bc78d80acccc3895463f7ed7295.png" width="450"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
値によってデバイスのリストをリクエストしますcustom_field</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?cf_contract_number=0123456789"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<pre><code class="python hljs">nb.dcim.devices.filter(cf_contract_number=<span class="hljs-string">"0123456789"</span>)
</code></pre><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成コンテキスト</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時には、非構造化テキスト以上のものを求めます。次に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成コンテキスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">役に立ち</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、JSON形式の一連の構造化データを紹介する機会であり、他に置く場所はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、たとえば、BGPコミュニティのセットやSyslogサーバーのリストなどです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成コンテキストは、ローカル（特定のオブジェクト用に構成）またはグローバル（一度構成した場合）で、特定の条件を満たすすべてのオブジェクトに適用されます（たとえば、同じサイトにある、または同じプラットフォームで実行されている）。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/97a/406/224/97a406224499ed35e9c471c3709a8d98.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クエリ結果に構成コンテキストが自動的に追加されます。同時に、ローカルコンテキストとグローバルコンテキストが1つに統合されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ローカルコンテキストがある単純なロシアの女の子だけのデバイスの場合、出力にはキー「config_context」が含まれます。</font></font><br>
<br>
<pre><code class="bash hljs">curl -X GET <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices/?q=russian"</span> -H <span class="hljs-string">"Accept: application/json; indent=4"</span></code></pre><br>
<img src="https://habrastorage.org/getpro/habr/post_images/031/608/4bd/0316084bd52d028434631298a22ba33e.png" width="204"><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タグについて何か新しいことを言うのは難しいです。</font><font style="vertical-align: inherit;">彼らです。</font><font style="vertical-align: inherit;">機能を追加するのに便利です。</font><font style="vertical-align: inherit;">たとえば、メモリに障害が発生したバッチのスイッチに「byada」というタグを付けることができます。</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webhook</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NetBoxの変更について学習するために他のサービスが必要な場合のかけがえのないこと。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、新しいスイッチを開始すると、フックが自動化システムに送信され、デバイスをセットアップして動作させるプロセスが開始されます。</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、NetBoxのすべての機能を検討することは目的としていないため、他のすべてのことはあなたに提供します。</font><font style="vertical-align: inherit;">理解してみてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、自動化システムの構築の一環として、本当に必要な部分のみに触れます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、上記では、NetBoxとは何か、データがどのように格納されるかについて簡単に説明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、必要なデータのほとんどすべてをすでに入力していることを繰り返します</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースダンプを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自分でドラッグできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが自動化の次の段階の準備ができています。デバイスを初期化して構成を管理するためのシステム（あはは、スクリプトのみ）を記述します。</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、記事を終える前に、NetBoxコンポーネントのインストールと操作について少し説明します。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxのインストールに関するいくつかのニュアンス</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールプロセスについては詳しく説明しません</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で有名に説明されている以上のもの</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dima Figol（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1回</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2回</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emil Garipov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のビデオで、NetBox Dockerイメージを起動してGUIで作業するプロセスを確認できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、インストール/起動の手順に厳密に従うと、すべてがうまくいきます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これらは誤って忘れることができるニュアンスです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration.pyファイルで、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALLOWED_HOSTS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">入力</font></a><font style="vertical-align: inherit;">する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="bash hljs">ALLOWED_HOSTS = [<span class="hljs-string">'netbox.linkmeup.ru'</span>, <span class="hljs-string">'localhost'</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、アクセスするすべての可能なNetBox名を指定する必要があります。たとえば、外部IPアドレス、127.0.0.1、またはDNSエイリアスが存在する場合があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行わないと、NetBox Webサイトが開かず、400と表示されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じファイルで、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SECRET_KEYを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定する必要があります</font><font style="vertical-align: inherit;">。これは、自分で作成したり、スクリプトを生成したりできます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLデータベースの設定に問題がある場合、メインページに502 Bad Gatewayが表示されます。ホスト（別のマシンにインストールされている場合）、ポート、データベース名、ユーザー名、パスワードを確認してください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しばらく</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の間、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NetBoxはデフォルトでは許可なしに読み取り権限を付与しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはすべて同じconfiguration.pyで変更されます。</font></font><br>
<br>
<pre><code class="bash hljs">EXEMPT_VIEW_PERMISSIONS = [<span class="hljs-string">'*'</span>]</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、APIリクエストに200が返され、API URLにスラッシュがない場合は機能しません。</font></font><br>
<pre><code class="bash hljs">curl -X GET -H <span class="hljs-string">"Accept: application/json; indent=4"</span> <span class="hljs-string">"http://netbox.linkmeup.ru:45127/api/dcim/devices"</span></code></pre><br>
</li>
</ul><br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLについて</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーに接続するには： </font></font><br>
<br>
<pre><code class="bash hljs">psql -U &lt;i&gt;username&lt;/i&gt; -h &lt;i&gt;hostname&lt;/i&gt; &lt;i&gt;db_name&lt;/i&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例えば： </font></font><br>
<br>
<pre><code class="bash hljs">psql -U netbox -h localhost netbox</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのテーブルを表示するには： </font></font><br>
<br>
<pre><code class="bash hljs">/dt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出る： </font></font><br>
<br>
<pre><code class="bash hljs">/q</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースダンプの場合： </font></font><br>
<br>
<pre><code class="bash hljs">pg_dump -U &lt;i&gt;username&lt;/i&gt; -h &lt;i&gt;hostname&lt;/i&gt; &lt;i&gt;db_name&lt;/i&gt; &gt; netbox.sql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
毎回パスワードを入力したくない場合：</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">echo</span> *:*:*:&lt;i&gt;username&lt;/i&gt;:&lt;i&gt;password&lt;/i&gt; &gt; ~/.pgpass<font></font>
chmod 600 ~/.pgpass</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独自のインストールがあり、すべてを手作業で作成したくない場合は、現在のNetBoxデータベースのダンプを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取得するだけで作成でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">psql -U &lt;i&gt;username&lt;/i&gt; -h &lt;i&gt;hostname&lt;/i&gt; &lt;i&gt;db_name&lt;/i&gt; &lt; netbox_initial_db.sql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初にすべてのテーブルを削除する必要がある場合（そしてこれを行う必要がある場合）、事前にファイルを準備できます。</font></font><br>
<br>
<pre><code class="bash hljs">psql -U &lt;i&gt;username&lt;/i&gt; -h &lt;i&gt;hostname&lt;/i&gt; &lt;i&gt;db_name&lt;/i&gt;<font></font>
\o drop_all_tables.sql<font></font>
select <span class="hljs-string">'drop table '</span> || tablename || <span class="hljs-string">' cascade;'</span> from pg_tables;<font></font>
\q<font></font>
psql -U &lt;i&gt;username&lt;/i&gt; -h &lt;i&gt;hostname&lt;/i&gt; &lt;i&gt;db_name&lt;/i&gt; -f drop_all_tables.sql</code></pre><br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guthub上のNetBox自体</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテナのバージョン</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全なインストール手順とすべての製品ドキュメント</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBoxでのネットワークインフラストラクチャの文書化、Ansible over REST APIとの統合</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPAM NetBoxとそのAPI、Docker、Postman</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPAM NetBoxとそのAPI、Pythonを使用した構成テンプレート</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetBox Python SDK</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIドキュメント</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メーリングリスト</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NetworkToCode Slackチャネル</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTとは何ですか？</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADSMニーズのためのNetBoxインストール</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja485988/index.html">【ロコマイザケース】ヒートマップの計算を2年半で2万倍高速化する方法</a></li>
<li><a href="../ja485990/index.html">自動化は殺すのか？</a></li>
<li><a href="../ja485994/index.html">ImportExportDataSql-無料のMSSQLデータコンバーター</a></li>
<li><a href="../ja485996/index.html">アプリのElastic APM</a></li>
<li><a href="../ja485998/index.html">LyX：総論。パート2</a></li>
<li><a href="../ja486002/index.html">Azure Cosmos DBの利点と落とし穴</a></li>
<li><a href="../ja486006/index.html">スタックにチャットのステータスを保存する</a></li>
<li><a href="../ja486014/index.html">SLACツアー：スタンフォードの米国エネルギー省国立加速器研究所</a></li>
<li><a href="../ja486018/index.html">セッション調査結果</a></li>
<li><a href="../ja486024/index.html">科学とジャーナリズムのためのRの本当にシンプルなグラフィック</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>