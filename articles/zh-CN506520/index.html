<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😂 👴 👭 英国DEVOXX会议。选择一个框架：Docker Swarm，Kubernetes或Mesos。第1部分 👂🏾 🍧 ‼️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Docker Swarm，Kubernetes和Mesos是最受欢迎的容器编排框架。Arun Gupta在演讲中比较了Docker，Swarm和Kubernetes的以下方面：
 
 

- 地方发展。
- 部署功能
- 多容器应用程序。
- 服务发现服务发现。
- 缩放服务。
- 一次运行分配。
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>英国DEVOXX会议。选择一个框架：Docker Swarm，Kubernetes或Mesos。第1部分</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/506520/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Swarm，Kubernetes和Mesos是最受欢迎的容器编排框架。</font><font style="vertical-align: inherit;">Arun Gupta在演讲中比较了Docker，Swarm和Kubernetes的以下方面：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地方发展。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署功能</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多容器应用程序。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务发现服务发现。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩放服务。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一次运行分配。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与Maven集成。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“滚动”更新。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个Couchbase数据库集群。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，您将清楚地了解每种编排工具必须提供的功能，并学习如何有效使用这些平台。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arun Gupta是Amazon Web Services的首席开源产品技术专家，他在Sun，Oracle，Red Hat和Couchbase开发人员社区中开发了10多年。他在领导跨职能团队工作方面具有丰富的经验，这些团队参与了营销活动和计划的开发和实施。他领导Sun工程团队，是Java EE团队的创始人之一，也是Devoxx4Kids在美国的分支机构的创建者。 Arun Gupta是IT博客中超过2千个帖子的作者，并在40多个国家/地区进行了演讲。</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/uu/h0/ce/uuh0ceuils4gahmm6ajpuwvqhr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下午好，我知道这是晚餐前的最后一场表演，但是我希望您早餐后还能有更多的精力来听我讲话。我的名字叫Arun Gupta，我在AWS工作，现在将要讨论的是Docker和Kubernetes，因此您可以为自己选择最合适的框架。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我是Docker的队长，对此我感到非常自豪；全世界只有70人被Docker认可为这种身份。我们从0.3系统的最早版本开始，我写了一本关于Docker的书，所以我对这项技术有所了解。另外，我已经连续4年成为JavaOne的摇滚明星，所以我理解了这个话题。我总是向听众学习，并与她交流有用的技巧，因此，感谢您的参与。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们从最高层次开始考虑这个问题。这不是Docker 1.01，所以不要指望我教您基础知识。举手，今天谁在使用Docker？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/yu/pf/ggyupfn4lcwxr_apfsttjzi_afs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常好，几乎有90％的人在场。因此，在全球范围内，Docker工作流程由3个主要组件组成：客户端部分，Docker主机和Docker注册表。假设您要为特定图像运行容器。您告诉客户：“下载该映像并启动容器！”。为了与主机通信，客户端使用docker build，docker pull和docker run命令。他向主机发出命令，说：“是的，我没有这个映像！”，然后默认情况下，他访问hubdocker.com上的Docker Hub的注册表，下载所需的映像，将其保存并在容器中运行。从这个意义上讲，客户端在工作位置之外绝对没有任何状态，它只是通过有线方式发出CLI之类的命令，它作为REST API到达主机，并且主机了解API要求，从集线器或Amazon ECR Docker容器的自动注册表中下载映像，然后基于该映像启动容器。这是一个完全静态的状态，仅在主机上进行管理。在这种情况下，我们有一台主机，但是使用多主机解决方案很容易。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这恰恰是业务流程框架的目的-您不想在单个主机上创建分布式应用程序系统，因为这是最薄弱的环节，一旦出现故障，它将导致整个系统瘫痪。您希望跨多个主机分配任务，以避免全局故障。例如，您要运行一个使用应用程序服务器，数据库服务器，缓存，许多不同组件的Java应用程序。此外，由于典型的Java应用程序是使用多个主机上的容器的多容器应用程序，因此通常需要同时运行该应用程序的多个实例。因此，您需要一个业务流程框架，不仅用于计划容器化，而且还用于创建管理集群的功能，生命周期和其他必要的操作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本演示中，我将告诉您Docker和Kubernetes这两个主要的应用程序编排工具在功能，优缺点方面的区别。我将从开发人员的角度考虑这些问题，他们开始使用关键的基本概念来创建任何应用程序。这个概念包括集群，单个容器，许多容器，它们之间的交互，服务的发现（或允许他们彼此了解的服务分类），负载平衡，用于状态容器的持久性存储之类的组件。 ，以及如何进行本地开发的知识。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/zs/wd/zfzswdthfine382s9vbnihugv8a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从开发的角度来看，我们将转到系统的体系结构方面：如何倍增主节点，在多个主机上工作时调度程序算法应如何工作，我可以在特定主机上运行容器的规则和限制是什么，我该如何做？执行监视和滚动更新，以及如何使用云支持。今天我们将讨论所有这一切。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们从Docker Swarm开始-这是Docker Engine的功能之一，从标准集群工具1.2版开始。它将一组Docker主机转换为单个顺序的Swarm集群。如果您访问docker.com，则可以下载以下两个版本之一：Community Edition或Enterprise Edition（今天，这些版本称为Stable和Edge）。我使用的是第一个版本，它每3个月稳定并更新一次，与每月更新的最新Edge版本不同。我正在使用适用于Mac的Docker CE版本。因此，当我将Docker CE下载到我的计算机上时，在安装过程中我注意到其中包含的Swarm，然后我可以立即开始创建集群，编排和规划容器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，Docker Swarm模块需要与主机进行通信，因此，将网卡与多主机系统一起使用时，您需要使用docker swarm单元--listen-addr：2377命令来侦听特定的Docker主机地址。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
黄色图标默认表示单个主节点。该向导为我提供了一个工作人员令牌控制令牌，我将其用作附加新的工作节点（物理或虚拟机）并使用，这没有关系。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/ul/zh/2sulzhylgnuqbsym4avabufpyss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该令牌指示该节点应加入原始主节点。使用worker-token，我可以形成自己的Docker集群。因此，使用Docker，创建包含多个节点的集群非常容易。下一张幻灯片显示了一个主节点和5个工作节点的集群。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ul/pl/df/ulpldfpatcvyh1r_ielat4fsycg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，您可以创建具有多个主节点的群集-主主节点和辅助主节点，将它们链接到工作节点。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0t/nv/sx/0tnvsxqge_pm8lwagqikx2at8cg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在客户端，当您将请求发送到辅助主服务器时，它作为代理将其重定向到主要主服务器，并且该主服务器已经执行了该请求，从而在工作节点之间分配了负载。默认情况下，您的容器也可以在管理器节点中工作，但是在创建集群时，容器应仅放置在工作节点中，并且管理器将仅管理集群。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下基本概念（群集）表示在其中运行容器的几个主节点和几个工作节点的体系结构。这是一个严格一致的方案，基于Raft共识算法进行了复制，由于从RAM中读取数据，因此具有最高的速度。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/9m/7t/fe9m7tme58vndrflduiu7al5aba.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我强烈建议使用带有Raft协议的模板，因为如果您拆分了网络，则系统不必考虑现在谁在扮演向导的角色，因为使用Raft时，将自动进行选择。最底层是通过Gossip协议相互通信的Swarm工作节点。您会看到红色容器在3个节点上工作，绿色容器在两个节点上工作-这表明Swarm Worker允许您启动并执行几个不同的任务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Docker复制服务概念如何工作？由于我是Java开发人员，因此在这种情况下，我使用WildFly容器。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/pa/ve/shpave-t3ap10-irlpc0lclp1ss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，通过Docker命令行，我输入命令docker service create--副本3--名称web jboss / wildfly，指示我需要的副本数量，服务的名称是web，并添加一个wildfly映像。该映像将被上传到3个Docker主机并启动容器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个重要概念是“节点故障”节点的故障。怎么了？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cb/li/ez/cbliezm9xg3zuwwjdw0ps8-o6ok.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Docker看到系统的当前状态与所需的状态不匹配，一个节点掉出了集群，这意味着有必要将容器从该节点转移到另一台主机。</font><font style="vertical-align: inherit;">也就是说，如果您声明需要三个副本，那么Doc​​ker将确保这三个副本在任何条件下都存在。</font><font style="vertical-align: inherit;">当容器在工作节点中发生故障时，可能会发生这种情况。</font><font style="vertical-align: inherit;">与前一种情况类似，Docker会跟踪指定数量的容器，如果数量减少，则会激活一个调度程序，该调度程序会立即还原该容器，从而将集群的当前状态恢复为所需状态。</font><font style="vertical-align: inherit;">也就是说，如果您宣布了3个副本，则所有这些副本应在任何给定时间工作。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英国DEVOXX会议。</font><font style="vertical-align: inherit;">选择一个框架：Docker Swarm，Kubernetes或Mesos。</font><font style="vertical-align: inherit;">第2部分</font></font></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1dgUXNVQS5o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一点广告：）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
感谢您与我们在一起。你喜欢我们的文章吗？想看更多有趣的资料吗？通过下订单或向您的朋友推荐给</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发人员的基于云的VPS，</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">最低</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">价格为4.99美元</font></a><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是我们为您发明的入门级服务器</font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><b><font style="vertical-align: inherit;">独特类似物：</font></b></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于VPS（KVM）E5-2697 v3（6核）的全部真相10GB DDR4 480GB SSD 1Gbps从$ 19还是如何划分服务器？</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（RAID1和RAID10提供选件，最多24个内核和最大40GB DDR4）。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阿姆斯特丹的Equinix Tier IV数据中心的戴尔R730xd便宜2倍吗？</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅</font><b><font style="vertical-align: inherit;">在荷兰</font></b><font style="vertical-align: inherit;">有</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2台Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100电视</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">戴尔R420-2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB-$ 99起！</font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读有关</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何构建基础设施大厦的信息。</font><font style="vertical-align: inherit;">使用Dell R730xd E5-2650 v4服务器花费一欧元9000欧元的c类？</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN506498/index.html">学习英语（美国）金融或如何评估公司的资源</a></li>
<li><a href="../zh-CN506506/index.html">将JSON数据映射到C ++结构</a></li>
<li><a href="../zh-CN506508/index.html">吊床驱动的开发：“睡眠是程序员工作的重要组成部分”</a></li>
<li><a href="../zh-CN506510/index.html">职业倦怠[州雇员百分比] =因素（也许<market_economy>）</a></li>
<li><a href="../zh-CN506516/index.html">保存密码：Python中Shamir秘密共享方案的出色实现</a></li>
<li><a href="../zh-CN506524/index.html">HackTheBox。蒙特沃德演练。通过Azure管理员进行蛮力SMB和LPE</a></li>
<li><a href="../zh-CN506530/index.html">如何选择UPS</a></li>
<li><a href="../zh-CN506532/index.html">通过刺入星空：制造一种将激光笔指向任何天体的设备</a></li>
<li><a href="../zh-CN506538/index.html">维基百科如何透露您的个人数据及其实际使用方式</a></li>
<li><a href="../zh-CN506542/index.html">DIY视频录制到云端</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>