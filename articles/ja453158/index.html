<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🏫 🧑🏽 🔆 プロセッサの仕組みがわからなかったので、ソフトウェアシミュレータを作成しました 🌿 🤝 🧙🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="数か月前、私は突然、コンピュータハードウェアの原理について何も知らなかったのだという考えにショックを受けました。現代のコンピューターがどのように機能するかはまだわかりません。「でも彼はどうやって知るの？」
 
 という本を読んだ。簡単な8ビットコンピューターの詳細な説明付きのクラークスコット：論理ゲ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>プロセッサの仕組みがわからなかったので、ソフトウェアシミュレータを作成しました</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453158/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/805/dcf/f99/805dcff99a150856f08b3cb14a12cc4e.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数か月前、私は突然、コンピュータハードウェアの原理について何も知らなかったのだという考えにショックを受けました。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現代の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューター</font><font style="vertical-align: inherit;">がどのように機能するかはまだわかりません</font><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">「でも彼はどうやって知るの？」</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
という本を読んだ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な8ビットコンピューターの詳細な説明付きのクラークスコット：論理ゲート、RAM、プロセッサトランジスタで始まり、算術論理デバイスと入出力操作で終わります。そして、私はこれらすべてをコードで実装したかったのです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は</font><i><font style="vertical-align: inherit;">そうで</font></i><font style="vertical-align: inherit;">はありません</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私はマイクロ回路の物理学に興味がありますが、本は波に沿って滑るだけで、電気回路とビットがシステム内をどのように移動するかを美しく説明します。読者は電気工学の知識を必要としません。しかし、テキストによる説明だけでは十分ではありません。私は実際の状況を見て、避けられない間違いから学ぶ必要があります。そこで、コードで回路を実装し始めました。道は厄介でしたが、有益でした。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の仕事の結果は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シンプルなコンピューター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リポジトリ、つまり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">シンプル</font></a><font style="vertical-align: inherit;">な計算機にあります。シンプルで計算します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a52/981/08a/a5298108a34383e40dab633f35692384.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a01/36e/e40/a0136ee405bb5172cf8a048a03d2cb9f.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/361/245/937/361245937fcf63ef06c17d6380061b81.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプルプログラム</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プロセッサコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、オンとオフを切り替えるひどいロジックゲート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として実装され</font><font style="vertical-align: inherit;">ていますが、機能します。私</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はユニットテスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">実行しましたが、ユニットテスト</font></a><font style="vertical-align: inherit;">はプログラムが機能することの反駁できない証拠であることは誰もが知っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーボード入力</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">処理し、</font><i><font style="vertical-align: inherit;">Daniel Code Pro</font></i><font style="vertical-align: inherit;">と呼んだプロフェッショナルフォント用に細心の注意を払って作成されたグリフセットを使用して</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ディスプレイに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキストを表示します</font><font style="vertical-align: inherit;">。唯一のチート：キーボード入力を取得して結果を出力するには、チャネルを接続する必要がありました</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLFW</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですが、それ以外の場合は電気回路の完全なソフトウェアシミュレーションです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私も書いた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">失礼アセンブラ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控えめに言っても、多くのことに私の目を開きました。</font><font style="vertical-align: inherit;">彼は完璧ではありません。</font><font style="vertical-align: inherit;">実際、少しでも無頓着ですが、他の人々が何年も前にすでに解決していた問題を彼は私に示しました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、なぜこれを行うのですか？</font></font></h1><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「13歳の子供たちはMinecraftでプロセッサーを構築しています。</font><font style="vertical-align: inherit;">電信リレーから</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CPU </font><font style="vertical-align: inherit;">を作成できるときに電話をかけてください</font><font style="vertical-align: inherit;">。」</font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
CPUデバイスの私のメンタルモデルは、初心者向けのコンピューターサイエンスの教科書のレベルで行き詰まりました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2013年に書いたゲームボーイエミュレーター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のプロセッサは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;">実際には最近のCPUのようには見えません。エミュレータが単なるステートマシン（ステートマシン）であっても、論理ゲートのレベルでの状態は記述されません。ほぼすべては、オペレーターのみを使用して</font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、レジスターの状態を維持して</font><font style="vertical-align: inherit;">実装できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、L1 / L2キャッシュとパイプライン化が何であるかがわからないため、すべてがどのように機能するかをよりよく理解したいと思います。また、メルトダウンとスペクターの脆弱性に関する記事を理解しているのか、よくわかりません。</font><font style="vertical-align: inherit;">誰かがプロセッサキャッシュを使用するような方法でコードを最適化すると誰かが言ったが、私はそれをチェックする方法がわからない。</font><font style="vertical-align: inherit;">すべてのx86命令の意味がよくわかりません。</font><font style="vertical-align: inherit;">ユーザーがGPUまたはTPUにタスクを送信する方法がわかりません。</font><font style="vertical-align: inherit;">そして一般的に、TPUとは何ですか？</font><font style="vertical-align: inherit;">SIMD命令の使用方法がわかりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらはすべて、最初に学ぶ必要がある基礎の上に構築されています。</font><font style="vertical-align: inherit;">それは、基本に立ち返って簡単なことをすることを意味します。</font><font style="vertical-align: inherit;">クラークスコットの前述の本は、単純なコンピューターについて説明しています。</font><font style="vertical-align: inherit;">それが私がそれから始めた理由です。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スコットに栄光を！</font><font style="vertical-align: inherit;">彼は働く！</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スコットのコンピューターは、256バイトのRAMに接続された8ビットプロセッサーで、すべて8ビットのシステムバスを介して接続されています。 4つの汎用レジスターと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17の機械語命令があり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。誰かが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェブ用のビジュアルシミュレーターを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作った</font><font style="vertical-align: inherit;">：それは本当に素晴らしい。サーキットのすべての状態を追跡するのにどれくらいの時間がかかったのかを考えるのは恐ろしいです！</font><i><font color="gray"><font style="vertical-align: inherit;">スコットプロセッサのすべてのコンポーネントを備えた回路。 Copyright 2009-2016。ジークバートフィルビンガーとジョンクラークスコット</font></font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/t_/hm/rp/t_hmrpg_rrprxwh5uiiybl2jf6w.png"></a><br>
<i><font color="gray"><font style="vertical-align: inherit;"></font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この本には、控えめな論理ゲートからメモリとレジスタのビットまでのルートが示されています。その後、上の図のようなものが得られるまで、コンポーネントの階層化を続けます。</font><font style="vertical-align: inherit;">すでに概念に精通している場合でも、本を読むことを強くお勧めします。</font><font style="vertical-align: inherit;">Kindle版ではなく、チャートを拡大して画面上の「リーダー」を分解することが難しい場合があるためです。</font><font style="vertical-align: inherit;">私の意見では、これはKindleの長年の問題です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のコンピューターはスコットバージョンとは異なります。ただし、ASCIIテーブルのグリフのみを格納するとスコットの8ビットマシンのほとんどが占有され、有用なコード用のスペースがほとんど残らないため、使用可能なメモリの量を増やすために16ビットに更新しました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の開発プロセス</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、開発はこのスキームに従って行われました。テキストを読み、図を調べ、それを汎用プログラミング言語で実装しようとし、集積回路の設計に特別なツールを使用しないことです。 Goでシミュレータを書いたのは、この言語に少し精通しているからです。懐疑論者はこう言うかもしれません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VHDL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verilog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LogSim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など</font><font style="vertical-align: inherit;">を学ぶことができませんでした</font><font style="vertical-align: inherit;">。しかし、その時までに、私はすでにビット、バイト、論理ゲートを書き込んでおり、深く入りすぎていました。次回はこれらの言語を学び、どれだけの時間を無駄にしたかを理解するかもしれませんが、これらは私の問題です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大規模な回路では、ブール値の束がコンピューターで送信されるだけなので、ブール代数に適した言語であればどれでも適しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのブール値にスキームを適用すると、私たち（プログラマー）が意味を導き出すのに役立ちます。最も重要なのは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムが使用する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">バイトの順序を</font></a><font style="vertical-align: inherit;">決定</font><font style="vertical-align: inherit;">し、すべてのコンポーネントがバス上で正しい順序でデータを送信することを確認することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実装は非常に困難でした。バイアスのために、バイト順を逆にした表現を選択しましたが、ALUをテストするときに、なぜ間違った数値が出力されるのか理解できませんでした。私の猫は印刷できない表現をたくさん聞いたことがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発は速く進みませんでした。おそらく私の自由時間の約1〜2か月かかりました。しかし、プロセッサのみが操作を正常に完了したとき</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>5</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.426ex" height="2.134ex" viewBox="0 -755.5 4058.5 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/453158/&amp;usg=ALkJrhh19LTomXVMSM1dmYY2UcMn8T4Zvg#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/453158/&amp;usg=ALkJrhh19LTomXVMSM1dmYY2UcMn8T4Zvg#MJMAIN-2B" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/453158/&amp;usg=ALkJrhh19LTomXVMSM1dmYY2UcMn8T4Zvg#MJMAIN-32" x="1723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/453158/&amp;usg=ALkJrhh19LTomXVMSM1dmYY2UcMn8T4Zvg#MJMAIN-3D" x="2501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/453158/&amp;usg=ALkJrhh19LTomXVMSM1dmYY2UcMn8T4Zvg#MJMAIN-35" x="3558" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>+</mo><mn>2</mn><mo>=</mo><mn>5</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">2 + 2 = 5</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私は幸せで第七天国にいました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それがI / Oになるまですべてが続いた。</font><font style="vertical-align: inherit;">この本は、機械にデータを入力して結果を出力するためのシンプルなキーボードとディスプレイインターフェイスを備えたシステム設計を提案しました。</font><font style="vertical-align: inherit;">さて、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これまで</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><i><font style="vertical-align: inherit;">行ってきました</font></i><font style="vertical-align: inherit;">。途中で停止しても意味がありません。</font><font style="vertical-align: inherit;">キーボードでの入力とディスプレイへの文字の表示を実装するという目標を設定しました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周辺</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
周辺機器は、CPUと外界との間のハードウェアインターフェイスとして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アダプターテンプレート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">し</font></a><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このテンプレートはソフトウェア設計から借用されていると推測するのはおそらく簡単です。</font><i><font color="gray"><font style="vertical-align: inherit;">I / OアダプターがGLFWウィンドウに接続する方法</font></font></i><font style="vertical-align: inherit;"> 
この分離により、キーボードとディスプレイをGLFWを実行しているウィンドウに接続するのは非常に簡単であることがわかりました。</font><font style="vertical-align: inherit;">実際、ほとんどのコードを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">エミュレーター</font></a><font style="vertical-align: inherit;">からプル</font><font style="vertical-align: inherit;">して、GoチャネルがI / O信号として機能するように少し変更しました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/dc/ge/e_/dcgee_zl9m4i_wrzlkovzh8pnjc.png"></a><br>
<i><font color="gray"><font style="vertical-align: inherit;"></font></font></i> <br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピュータを起動します</font></font></h1><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f5/b5e/3a7/6f5b5e3a7542371fbea370296344369a.gif"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはおそらく最も難しい部分であり、少なくとも最も厄介な部分です。このような限られた命令セットを使用してアセンブラで書くのは難しく、私の大雑把なアセンブラでは、自分以外の誰かをだますことはできないため、さらに悪いことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最大の問題は、4つのレジスタを操作し、レジスタからデータをプルしてそれらを追跡し、一時的にメモリに格納することでした。その過程で、ゲームボーイプロセッサには、レジスタのロードとロードの便宜のためにスタックポインタレジスタがあることを思い出しました。残念ながら、このコンピューターにはそのような贅沢はありません。そのため、メモリとの間で常に手動でデータを転送する必要がありました。</font><font style="vertical-align: inherit;">関数を呼び出すための</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つの疑似命令</font></font><code>CALL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">時間を費やし</font><font style="vertical-align: inherit;">て、その時点に戻ることにしました。これがないと、通話は1レベルの深さでしか利用できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、マシンは割り込みをサポートしていないため、ひどいキーボード状態ポーリングコードを実装する必要がありました。この本では、割り込みを実装するために必要な手順について説明していますが、これは回路を非常に複雑にします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私はまだ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4つのプログラムを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書いて</font><font style="vertical-align: inherit;">おり、それらのほとんどは、フォントやキーボード入力などをレンダリングするためにある種の一般的なコードを使用しています。これはオペレーティングシステムではありませんが、単純なOSの機能を理解するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは簡単ではありませんでした。テキストライタープログラムの最も難しい部分は、新しい行にいつジャンプするか、またはEnterキーを押したときに何が起こるかを正しく理解することです。</font></font><br>
<br>
<pre><code class="go hljs">main-getInput:<font></font>
	CALL ROUTINE-io-pollKeyboard<font></font>
	CALL ROUTINE-io-drawFontCharacter<font></font>
	JMP main-getInput</code></pre><i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メインのテキストライタープログラムループで</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
、Backspaceキーと修飾キーを実装する必要はありませんでした。</font><font style="vertical-align: inherit;">しかし、テキストエディタの開発にどれだけの労力が必要で、どれほど面倒な作業であるかを理解しました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
楽しくてとても便利なプロジェクトでした。</font><font style="vertical-align: inherit;">アセンブリ言語プログラミングの最中に、以下の論理ゲートについてはほとんど忘れていました。</font><font style="vertical-align: inherit;">抽象化の上位レベルに行きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロセッサは非常にシンプルで、私のラップトップのCPUからはほど遠いですが、特に、このプロジェクトから多くのことを学んだようです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのコンポーネント間でビットがバスをどのように移動するか。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純な</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ALU </font><font style="vertical-align: inherit;">はどのように機能し</font><font style="vertical-align: inherit;">ますか？</font></font><br>
</li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純な</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fetch-Decode-Executeループ</font><font style="vertical-align: inherit;">は次のようになり</font><font style="vertical-align: inherit;">ます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタックポインターレジスターとスタックコンセプトのないマシンは、うんざりです。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">途切れることのないその車も吸います。</font></font><br>
</li>
<li>      .<br>
</li>
<li>      .<br>
</li>
<li>  <i></i>       .<br>
</li>
<li>   <i></i>  .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は何ですか？その本は、1952年以来誰もそのようなコンピュータを生産していないと述べています。つまり、この資料を過去67年間研究する必要がありました。しばらく時間がかかります。私はそれを見ることができる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のx86マニュアルは4800ページの長さ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は十分就寝前の快適な、読みやすいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たぶん、オペレーティングシステム、C言語に少し甘やかされて、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PiDP-11ビルドキット</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とはんだごてで</font><font style="vertical-align: inherit;">夜を殺し、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">それからこれをやめ</font></a><font style="vertical-align: inherit;">ます。よくわかりません。どうなるか見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
真剣に、私はRISCアーキテクチャ、おそらくRISC-Vを探索することを考えています。初期のRISCプロセッサからその起源を理解することから始めるのがおそらく最善です。現代のプロセッサには、キャッシュなど、はるかに多くの機能があります。それらについて理解したいと思います。学ぶことはたくさんあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この知識は私の主な仕事で役立ちますか？</font><font style="vertical-align: inherit;">おそらくありませんが、おそらく役に立ちます。</font><font style="vertical-align: inherit;">いずれにせよ、私はそれが好きなので、それは問題ではありません。</font><font style="vertical-align: inherit;">読んでくれてありがとう！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja453138/index.html">芸術と科学：VITAEプロジェクト-月の花にたくさんのヤシのプリント</a></li>
<li><a href="../ja453146/index.html">会議を最大限に活用する方法</a></li>
<li><a href="../ja453148/index.html">AirBnbはそのアカウントを無視します</a></li>
<li><a href="../ja453154/index.html">インターネットの歴史：双方向性の強化</a></li>
<li><a href="../ja453156/index.html">ゼネラルモーターズはそのすべての新しい車に魂を与えるでしょう（デジタルシェル）</a></li>
<li><a href="../ja453162/index.html">骨董品：ThinkPad 380E、Economy 90s、Windows 95</a></li>
<li><a href="../ja453164/index.html">暗号トークンPKCS＃11。「タイムスタンプに署名して追加する機能を備えた」グラフィックユーティリティ。パート1</a></li>
<li><a href="../ja453166/index.html">ViewPagerをiOSスタイルのアニメーションでフラグメントマネージャーに変える</a></li>
<li><a href="../ja453168/index.html">研究：ゲーム理論を使用したブロッキングプロキシサービスの作成</a></li>
<li><a href="../ja453170/index.html">ブレーンストーミング：タスクを別の角度から見る方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>