<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🚒 👢 📶 機能をより速く分割します。BadooでのAndroid開発経験 🏡 🦉 🛤️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！私の名前はアナトリーバリボンチクです。私は1年以上Badooで働いており、Android開発の合計経験は5年以上です。
 
 私の実践では、同僚と私は、アイデアをできるだけ迅速かつ簡単にテストする必要に直面することがよくあります。実験に失敗した場合はコードを破棄することがわかっ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>機能をより速く分割します。BadooでのAndroid開発経験</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/456106/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは！</font><font style="vertical-align: inherit;">私の名前はアナトリーバリボンチクです。</font><font style="vertical-align: inherit;">私は1年以上Badooで働いており、Android開発の合計経験は5年以上です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の実践では、同僚と私は、アイデアをできるだけ迅速かつ簡単にテストする必要に直面することがよくあります。</font><font style="vertical-align: inherit;">実験に失敗した場合はコードを破棄することがわかっているため、実装に多くの労力を費やしたくありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、そのような状況で私たちがどのように行動するか、そしてどの原則が問題の特定の解決策に有利な選択をするのに役立つのかを、実際の例で示します。</font><font style="vertical-align: inherit;">例の分析は、私たちの思考パターンを理解するのに役立つはずです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j4/05/-q/j405-qdbd1fun1e6uxwa4lpzm2e.jpeg"><br>
<a name="habracut"></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計画はこれです：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Badooにおける開発アプローチの原則。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ケーススタディ。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設計システム。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明した原則をいつ適用するか。</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、AppsConfに関する私のレポートのテキスト版</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ビデオは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ここ</font></a><font style="vertical-align: inherit;">で見ることができ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発アプローチの原則</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何億人もの人がBadooを使用しているため、ユーザーがそれを気に入って有用であると確信できない場合は、新しい機能をロールアウトできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの開発アプローチはいくつかの要因に影響されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A / Bテストの使用</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日、モバイルプラットフォームで数十のA / Bテストがアクティブになっていますが、数百が完了しています。</font><font style="vertical-align: inherit;">したがって、2つの異なるデバイスでBadooアプリケーションを使用する場合、高い確率でそれらの間にいくつかの違いがあり、一見するとごくわずかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜA / Bテストが必要なのですか？</font><font style="vertical-align: inherit;">理解することが重要です。製品マネージャーが必要と考えるもの、そして私たちにとって明白であると思われるものでさえ、実際には常に役立つとは限りません。</font><font style="vertical-align: inherit;">1か月か2か月前に作成したコードを削除する必要がある場合があります。</font><font style="vertical-align: inherit;">それが適切であるかどうかを理解するために、新しいファンクショナルのアイデアをテストすることが理にかなっている場合があります。</font><font style="vertical-align: inherit;">ユーザーが機能を気に入った場合、その開発に時間を費やすことができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発コストを削減</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、私たちはすべてが迅速に機能し、美しくありたいと思っています。</font><font style="vertical-align: inherit;">ただし、これを短時間で達成できるとは限りません。</font><font style="vertical-align: inherit;">時にはそれは多くの日をとります。</font><font style="vertical-align: inherit;">これらの問題を回避するために、タスクのコストを事前に評価し、私たちが行うのが難しいことと簡単なことを示すことにより、製品マネージャーを支援しようとしています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ほとんどのユーザールール</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスのすべてのシナリオで完全に機能する機能があるが、同時に期待どおりに機能しない中国のデバイスを使用しているユーザーのグループがあるとします。</font><font style="vertical-align: inherit;">この場合、おそらくより重要なタスクがあるため、問題をできるだけ早く修正する価値はないかもしれません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発をスピードアップする方法 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの原則がどのように機能するかを示すいくつかの例を見てみましょう。</font><font style="vertical-align: inherit;">ここでは、私たちの仕事で遭遇した実際の事例と、考えられる解決策の選択肢を紹介します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、この問題の解決方法を自分で考えてみることをお勧めします。</font><font style="vertical-align: inherit;">次に、それぞれのオプションを検討して、なぜ私たちのケースに適合する/適合しないのかを説明します。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例1.進捗累積ボタン</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはユーザーに、0から1までの角が丸いバッテリーの進行状況に応じてローンを蓄積するプロセスを示す必要があります。</font></font><br>
<br>
<img width="340" src="https://habrastorage.org/webt/wa/no/nd/wanondml_lpwipzf1pfkjn6omji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能な解決策は何ですか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/16/vt/_4/16vt_4nepdnd6ugkjocwqqtrvbw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA.このアイコンは必要ありません。機能をやり直すようにデザイナーに依頼する必要があります。単にテキストが表示されるようにします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB.ビットマップマスクを使用します。適切な組み合わせで、必要なものが正確に得られます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7e/wk/np/7ewknpgdavuhbbdmqueabnn4axm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションC：いくつかのアイコンを取り、クライアントでハードコードして、そのうちの1つを表示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/vb/6b/povb6b07roe0epnevfflyzhmsam.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回のケースでは、ソリューションBとCを使用しました。詳しく説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/f7/1r/rgf71rowbzy4ujjbqnrtdmte0ew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜ</font><b><font style="vertical-align: inherit;">オプションAで</font></b><font style="vertical-align: inherit;">はないのか</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？この特定の問題を解決できます。複雑ではありません。 iOSとモバイルウェブで同じデザインを使用しています。したがって、私たちがこれを拒否し、別のデザインを考え出す必要があると言う理由はありません。</font></font><br>
<br>
<img width="790" src="https://habrastorage.org/webt/xh/jr/lx/xhjrlxoqy_aq0mpkoehcxvrg9w4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビットマップマスク（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は、この問題の理想的な解決策です。丸みを帯びた長方形を簡単に描くことができます。必要な塗りつぶしの割合で、通常の長方形を簡単に描くことができます。それらを混合して正しい設定を行うことは残ります。その後、左側の両隅が消えます。</font></font><br>
 <br>
<img width="300" src="https://habrastorage.org/webt/zy/nd/ko/zyndkob2eh87j9sndzk4pr2wogk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードでは、次のようになります。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GoalInProgress</span></span>(<span class="hljs-keyword">val</span> progress: <span class="hljs-built_in">Float</span>)<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> unchargedPaint = Paint().apply {<font></font>
   xfermode = PorterDuffXfermode(PorterDuff.Mode.MULTIPLY)<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">mixChargedAndUncharged</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {<font></font>
   drawFullyCharged(canvas)<font></font>
   drawUnchargedPart(canvas)<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのコードを削除しました。ビットマップマスクの詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">//habr.com/ru/company/badoo/blog/310618/</font></a><font style="vertical-align: inherit;">の記事を参照して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。また、マスクをどのようにミックスするか、どのような効果を達成するか、パフォーマンスの点でどのように機能するかについても学びます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションは100％の要件を満たしています。つまり、0から1までの進行状況を表示できます</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。唯一の欠点は、これをこれまでに行ったことがない場合は、ビットマップマスクの計算に時間を費やす必要があることです。さらに、それらをいじって、エッジケースを見て、テストする必要があります。だいたい4時間くらいかかると思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションC.いくつかの固定タイプのアイコンを使用し、進行状況に応じてそれらの1つを表示します。</font><font style="vertical-align: inherit;">たとえば、ユーザーの進行状況が0.5未満の場合、空のアイコンが表示されます。</font><font style="vertical-align: inherit;">明らかに、このソリューションは100％要件を満たしていません。</font><font style="vertical-align: inherit;">しかし、その実装では、5行のコードを記述して、デザイナーから3つのアイコンを取得するだけで済みます。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getBackground</span><span class="hljs-params">(goal: <span class="hljs-type">GoalInProgress</span>)</span></span> =
   <span class="hljs-keyword">when</span> (goal.progress) {
       <span class="hljs-keyword">in</span> <span class="hljs-number">0.0</span>..<span class="hljs-number">0.5</span> -&gt; R.drawable.ic_not_filled
       <span class="hljs-keyword">in</span> <span class="hljs-number">0.5</span>..<span class="hljs-number">0.99</span> -&gt; R.drawable.ic_half_filled
       <span class="hljs-keyword">else</span> -&gt; R.drawable.ic_full_filled<font></font>
   }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、このソリューションは、（ライブストリーム機能をリリースしたときのように）時間が非常に短い状況で最適です。</font><font style="vertical-align: inherit;">それほど時間はかかりません。それを展開して、次のリリースで正しい美しいソリューションに置き換えるだけです。</font><font style="vertical-align: inherit;">実際、私たちの時代と同じように。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例2.電話番号入力行</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の例は、電話番号の入力です。</font><font style="vertical-align: inherit;">特徴的な機能：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">国の接頭辞は左側にあります。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接頭辞は削除できません。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデントがあります。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレフィックスはクリック不可です。</font></font><br>
</li>
</ul><br>
<br>
<img width="340" src="https://habrastorage.org/webt/l7/cf/pi/l7cfpix6yyq-ulezvhrl-mkh_na.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを実装する方法について考えてみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/rr/tp/nurrtpdw5b4wkifxs1xsgqjcib4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA：必要なロジックを実装するカスタムTextWatcherを記述します。</font><font style="vertical-align: inherit;">このプレフィックスを保持し、スペースを保持し、カーソル位置を制御します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB：このコンポーネントを2つの独立したフィールドに分割します。</font><font style="vertical-align: inherit;">UIの観点からは、同じコンポーネントになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションC：別のデザインを求めて、私たちにとって簡単にします。</font></font><br>
<br>
<img width="450" src="https://habrastorage.org/webt/jr/pq/dy/jrpqdyo3wdmo256pjj_zrtjtdn4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションBを実装することにしました。より詳細に検討します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/fx/_1/xqfx_1ha8yvjjho40yko80njaxg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のデザイン（オプションC）を求めることは、最初に試みました。</font><font style="vertical-align: inherit;">しかし、製品は最初のアイデアを主張しました。</font><font style="vertical-align: inherit;">そして、ビジネスが何らかの機能を主張している場合、私たちの仕事はそれを実装することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見しただけでカスタムTextWatcher（オプションA）は単純なソリューションのようですが、実際には処理する必要のある多くのエッジケースがあります。</font><font style="vertical-align: inherit;">たとえば、次のものが必要です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どういうわけか、プレフィックスをクリックして傍受し、カーソル位置を変更します。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらにインデント;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーがスペースまたは国の接頭辞を削除できないように、削除を禁止します。 &nbsp;</font></font><br>
</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、これをすべて行うことは可能ですが、かなり困難です。</font><font style="vertical-align: inherit;">より簡単なオプションがあるようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして彼は本当に見つかりました：</font></font><br>
<br>
<pre><code class="kotlin hljs">&lt;merge xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
   tools:parentTag=<span class="hljs-string">"android.widget.LinearLayout"</span>&gt;<font></font>
<font></font>
   &lt;TextView<font></font>
       android:id=<span class="hljs-string">"@+id/country_code"</span> /&gt;<font></font>
<font></font>
   &lt;EditText<font></font>
       android:id=<span class="hljs-string">"@+id/phone_number"</span> /&gt;<font></font>
<font></font>
&lt;/merge&gt;<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコンポーネントは、TextViewとEditTextの2つの部分に単純に分割しました。</font><font style="vertical-align: inherit;">プログラムによってTextViewで、製品が期待するデザインが正確に得られるように背景を設定します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
考慮すべき唯一のことは、Androidでは、デフォルトで、EditTextにフォーカスがあると、一番下の線の幅が広くなることです。</font><font style="vertical-align: inherit;">ただし、フォーカスの変更を簡単にサブスクライブし、プレフィックスで背景を変更します。</font><font style="vertical-align: inherit;">複雑なことは何もありません：</font></font><br>
<br>
<pre><code class="kotlin hljs">phoneNumber.setOnFocusChangeListener { _, hasFocus -&gt;<font></font>
    countryCode.setBackgroundResource(background(hasFocus))<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">background</span><span class="hljs-params">(hasFocus: <span class="hljs-type">Boolean</span>)</span></span> =
    <span class="hljs-keyword">when</span> (hasFocus) {
        <span class="hljs-literal">true</span> -&gt; R.drawable.phone_input_active
        <span class="hljs-literal">false</span> -&gt; R.drawable.phone_input_inactive<font></font>
    }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションにはいくつかの利点があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレフィックスのクリックを処理する必要はありません。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カーソル位置を操作する必要はありません。常に別のフィールドにあります。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このような実装では、エッジケースや問題がはるかに少なくなります。</font></font><br>
</li>
</ul><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例3.オートコンプリートに関する問題</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
左側のアニメーションでわかるように、オートコンプリートは希望どおりに機能しません。すべてを右のアニメーションのように見せたいです。</font></font><br>
<br>
<img width="270" src="https://habrastorage.org/webt/dd/r0/jy/ddr0jy5albxedofracf0ojmbdvy.gif"><img width="270" align="right" src="https://habrastorage.org/webt/t6/7v/jr/t67vjrxcqu-ud4cgzuc1ir_g764.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それについて何ができるか考えてみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xs/lb/m4/xslbm4wy8naisuohjx1_aqe-62i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA：これは、誰も修正しないまれなケースのようです。同じことをしてみませんか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB：カスタムTextWatcherははるかに優れており、すべての問題を解決します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションC：文字数の制限を削除します（アニメーションでわかるように、このコンポーネントには特定の数の文字があります）。プレフィックス付きの電話番号全体をサーバーに送信し、番号が有効かどうかをサーバーに決定させます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションD：末尾からN文字を取る。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションDで解決しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qw/oz/hy/qwozhyv6y6w7bqf2pr_fcedtegg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA.いくつかの大きなアプリケーションを調べました。だれもそれを直していないようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それにもかかわらず、将来的にはますます多くの分野がオートマニアで満たされるでしょう。この問題を早く解決すればするほど、ユーザーの忠実度が高まり、自分でアプリケーションを使用することがより快適になります。たとえば、画面全体を2回クリックするのはとてもうれしいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB。前の例ほどエッジスクリプトが少ないため、カスタムTextWatcherを実装する方が本当に簡単です。挿入したテキストを簡単に傍受できます。小さな問題が1つだけあります。一部の国ではローカルエイリアスがあります。たとえば、+ 44と0は同じことを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カスタムTextWatcherはここでは役立ちません。この場合、追加のロジックを記述し、この国のすべての可能なローカルエイリアスを返すようにサーバーに要求する必要があります。この問題を解決するには、サーバーとの通信プロトコルを変更してから、この機能をサーバーに実装する必要があります。これは、クライアントで何かを行うよりも時間がかかります。より簡単な解決策があるようです（そして、私たちはそれに取り掛かります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションC.文字数の制限を削除し、サーバーが検証します。これは素晴らしいオプションです。プレフィックスが2回表示されても問題ありません。ユーザーが次の手順に進み、電話番号が正しく決定されている場合、原則として問題はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それでも障害が1つあります。</font><font style="vertical-align: inherit;">ユーザーがオートコンプリートを使用せず、単に電話番号を入力するとします。</font><font style="vertical-align: inherit;">この場合、文字数に制限があると、誤って数字を複製することがはるかに困難になります。最後に、最後の数字が印刷されていないことがわかります。</font><font style="vertical-align: inherit;">したがって、この方法は使用しないことにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションD.末尾からN文字を使用することは、適切な解決策のように思われました。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DigitsTrimStartFilter</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> max: <span class="hljs-built_in">Int</span>) : InputFilter {
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">filter</span><span class="hljs-params">(...)</span></span>: CharSequence? {
       <span class="hljs-keyword">val</span> s = source.subSequence(start, end).filter { it.isDigit() }
       <span class="hljs-keyword">val</span> keep = max - (dest.length - (dend - dstart))
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {<font></font>
           keep &lt;= <span class="hljs-number">0</span> -&gt; <span class="hljs-string">""</span>
           keep &gt;= s.length -&gt; <span class="hljs-literal">null</span> <span class="hljs-comment">// keep original</span>
           <span class="hljs-keyword">else</span> -&gt; s.subSequence(s.length - keep, s.length)<font></font>
       }<font></font>
   }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
挿入できる電話番号の最大長があります。</font><font style="vertical-align: inherit;">単純なクラスを1つ記述します。これはカプセル化されており、他の場所で再利用できます。</font><font style="vertical-align: inherit;">さらに、他の開発者がコードを見ると、何が何であるかがすぐにわかります。</font><font style="vertical-align: inherit;">しかし、他に2つの問題があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、電話番号が異なる国があります。</font><font style="vertical-align: inherit;">このような場合、ソリューションではプレフィックスから追加の数字が表示されます。</font><font style="vertical-align: inherit;">次に、ユーザーが自動ファイルを使用して別の国の接頭辞を挿入すると、同じ状況が発生する可能性があります。</font><font style="vertical-align: inherit;">2番目のケースは、ユーザーがいる国に応じてサーバーが最初に電話番号を返すため、まれに思われます。</font><font style="vertical-align: inherit;">ただし、これが問題であることがわかった場合は、サーバー上のプロトコルを変更して、すべての数値のリストを一度に返すようにして、追加のロジックを記述する必要があります（今はこれは必要ないと考えています）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例4.日付入力コンポーネント</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デザイナーと製品は、次のように日付を入力するためのマスクを見たい</font></font><br>
<br>
<img width="340" src="https://habrastorage.org/webt/vl/yz/xf/vlyzxfaqihmcgev2rcvmp0owiis.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と思っています。これを実装する方法を考えてみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/fa/e6/difae608vbmz6jrgoxs-hddfu_i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA：やるだけ。タスクはシンプルに見え、解決は簡単で、問題は発生しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB：マスクライブラリを使用します。彼女はこの状況で私たちに適しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションC：カーソル位置の制御を無効にします。したがって、要件を少し単純化すると、この機能を実装するのが簡単になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションD：Androidにある標準の日付入力コンポーネントを使用します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションCに到達しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/es/ba/5g/esba5g6zv2lbx05rkoqmanidxf8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA.タスクは単純なようです。確かに、私たちはこの機能を実装する最初のものではありません。インターネット上で適切な解決策があるかどうか見てみませんか。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/dh/qt/u6dhqtp8ya0jvj0ydzr-c0wn_qg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションを採用し、コードに追加して実行します。</font><font style="vertical-align: inherit;">テストを開始します。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTextChanged</span><span class="hljs-params">(s: <span class="hljs-type">CharSequence</span>, start: <span class="hljs-type">Int</span>, before: <span class="hljs-type">Int</span>, count: <span class="hljs-type">Int</span>)</span></span> {
   <span class="hljs-keyword">if</span> (edited) {<font></font>
       edited = <span class="hljs-literal">false</span>
       <span class="hljs-keyword">return</span><font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">var</span> working = getEditText()<font></font>
<font></font>
   working = manageDateDivider(working, <span class="hljs-number">2</span>, start, before)<font></font>
   working = manageDateDivider(working, <span class="hljs-number">5</span>, start, before)<font></font>
<font></font>
   edited = <span class="hljs-literal">true</span><font></font>
   input.setText(working)<font></font>
   input.setSelection(input.text.length)<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見それは多かれ少なかれ私たちに合っているようです。</font><font style="vertical-align: inherit;">確かに、変更のたびにカーソル位置が最後にジャンプするという問題があります。</font><font style="vertical-align: inherit;">次に、より慎重にテストを開始し、すべてがそれほど良好ではなく、原因不明のシナリオがあることを理解します。</font></font><br>
<br>
<img width="270" src="https://habrastorage.org/webt/9o/ll/da/9olldaduvxfxwjy_db17-bjhahg.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは皆、これを改善する必要があります。</font><font style="vertical-align: inherit;">これはテスターの仕事なので、これを避けたいのですが、バグの修正などを行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デコロマスク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input-mask-androidに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既製のライブラリを使用しないのはなぜ</font><font style="vertical-align: inherit;">ですか。</font><font style="vertical-align: inherit;">彼らはすべてのシナリオをテストしました、すべてを再利用して人生を楽しむことができます。</font><font style="vertical-align: inherit;">プロジェクトにマスク用のライブラリがある場合、または追加する準備ができている場合、これは優れたソリューションです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図書館はありませんでした。また、他で使用されていない1つの小さなコンポーネントのために、それをプロジェクトにドラッグするのは不必要に思えました。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションD.標準の日付入力コンポーネントを使用します。</font></font><br>
<br>
<img width="270" src="https://habrastorage.org/webt/2s/yh/sc/2syhsccrbwmk8ehpzrjf9hjutb0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは最も賢い解決策のようです。 1つの小さな欠陥を除いて、すべてが彼にとっては問題ありません。このコンポーネントを開くと、すでにいくつかの事前定義された値といくつかの有効な日付があります。たとえば、1980年1月1日など、次のステップに進むための有効な日付を設定すると、その日に生まれた何百万ものユーザーを受け取ることになります。そうしないと、多くの同一のエラーが発生します。ユーザーが年を取りすぎているか、若すぎるため、ユーザーが登録できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このため、Badooの登録フォームに日付を入力するための標準のダイアログを一度に廃止しました。無効な日付に関するエラーの数が3分の1に減少しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/eq/so/djeqso1wn5je1ufk1eh2ry6yyse.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてもう一つの小さなマイナス。上級ユーザーだけが最初の状態から2番目の状態に移行できるようです。上級ユーザー</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sb/jn/fy/sbjnfyufnm6suhfdp0j4ta1obdw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だけがアプリケーションを使用しているのではない場合、希望の日付を求めて月</font><font style="vertical-align: inherit;">ごとに</font><font style="vertical-align: inherit;">並べ替えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、オプションAはそれほど悪くないと判断しました。あなたはそれを洗練して少しそれを単純化する必要があるだけです：</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DateEditText</span> : <span class="hljs-type">AppCompatEditText</span></span>(context, attrs, defStyleAttr) {
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> canChange: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> actualText: StringBuilder = StringBuilder()<font></font>
<font></font>
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSelectionChanged</span><span class="hljs-params">(selStart: <span class="hljs-type">Int</span>, selEnd: <span class="hljs-type">Int</span>)</span></span> {
       <span class="hljs-keyword">super</span>.onSelectionChanged(selStart, selEnd)
       <span class="hljs-keyword">if</span> (!canChange) <span class="hljs-keyword">return</span>
       canChange = <span class="hljs-literal">false</span><font></font>
       setSelection(actualText.length)<font></font>
       canChange = <span class="hljs-literal">true</span><font></font>
   }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがカーソル位置を変更すると、オプションAの欠点が現れ始めました。</font><font style="vertical-align: inherit;">そして、「なぜこのカーソルを移動する機会を与えるのか」と考えました。</font><font style="vertical-align: inherit;">そして単にこれを行うことを禁止されました。</font></font><br>
<br>
<img width="270" src="https://habrastorage.org/webt/dc/yr/u9/dcyru9gqgi_pfivmtezqngwpbji.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから私たちはすべての問題を解決しました。</font><font style="vertical-align: inherit;">製品はそれらに適した実装を得ました。</font><font style="vertical-align: inherit;">そして、もしあなたがまだ途中からキャラクターを削除する機会を与える必要があると彼らが決定した場合、私たちはそれを行います。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例5.ビデオストリーミング画面のツール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの製品は、ビデオストリーミングを開始するときに、機能の使用方法をユーザーに教えるためのツールチップを表示したいと考えていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
機能の実装時には、6種類のツールチップがありました。同時に、画面上に複数あるべきではありませんでした。ツールチップは、サーバーからランダムに動的に到着しました。いくつかは繰り返さなければなりませんでした。ツールチップは表示されたが、ユーザーがそれをクリックしなかった場合、N分後に再び表示されます。</font></font><br>
 <br>
<img width="270" src="https://habrastorage.org/webt/pn/gu/gb/pngugbgj9p1cumd6f2bph2oiibu.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてを実装するのはかなり難しいようです。製品にいくつか質問しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、ツールチップを優先して分類子を追加します。いずれの場合も、両方のツールチップが同時に表示され、どちらか一方を選択する必要がある場合があります。したがって、優先順位が必要です。次に、小さな簡略化を求めました。最も優先度の高いツールチップのタイマーのみを維持することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前は、ツールチップの繰り返しタイマーは独立していた：</font></font><br>
 <br>
<img width="450" src="https://habrastorage.org/webt/9k/cl/pc/9kclpch8wr2nse6tjimgtnazgzq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
優先度が最も高いツールチップのタイマーのみを維持するように求めた：</font></font><br>
<br>
<img width="450" src="https://habrastorage.org/webt/ql/j7/tk/qlj7tkhc7ksulwncmoihynm_acs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ツールチップ1のタイマーしかなかった。</font></font><br>
<br>
<img width="450" src="https://habrastorage.org/webt/wj/3r/sf/wj3rsfbqcigjaggx_xfaim2108k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、要件を簡素化しました。機能を実装することがはるかに簡単になり、テスターに​​とっては機能をテストすることが簡単になりました。その結果、この決定はすべての人に適していることがわかりました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例6.写真の並べ替え</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この設計</font></font><br>
<br>
<img width="270" src="https://habrastorage.org/webt/ua/ii/ab/uaiiabygcb6tb3c9o4f8fr4xasy.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を思いつきました</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">実装するのは非常に難しいという結論に達しました。開発に3日を費やす必要があり、「ユーザーが必要かどうかわからないのに、なぜこれを行う必要があるのですか？」</font><font style="vertical-align: inherit;">簡略化されたバージョンから始めて、この機能がどれだけ需要があるかを評価することをお勧めしました。</font></font><br>
<br>
<img width="270" src="https://habrastorage.org/webt/tr/jc/27/trjc27ksolmheeqjdcaft2fqfli.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがこの機能に興味を持っていることがわかりました。</font><font style="vertical-align: inherit;">その後、元のデザインにあった状態への再レンダリングを改善しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは、役に立たない可能性がある機能に多くの作業時間を費やすリスクから自分自身と会社を保護しました。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その結果、製品要件が完全に実装されました。</font></font><br>
</li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例7. PIN入力コンポーネント</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Badooアプリケーションだけでなく、完全に異なるデザインの他のアプリケーションも開発しています。</font><font style="vertical-align: inherit;">また、3つのアプリケーションすべてで、PINコードの入力に同じコンポーネントを使用しています。UX </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z8/iy/pp/z8iyppehiujviyzg0on1wtbpdkg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の観点から、コンポーネントは同じように動作するはずです。</font><font style="vertical-align: inherit;">それにもかかわらず、さまざまなアプリケーションでは、さまざまなフォント、インデント、さらにはさまざまな背景です。</font><font style="vertical-align: inherit;">これを各アプリケーションにコピーするのではなく、再利用したいと思います。</font><font style="vertical-align: inherit;">設計システムはこれに役立ちます。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設計システムは、特定のコンポーネントの動作に関するUXルールのセットです。</font><font style="vertical-align: inherit;">たとえば、各ボタンには特定の状態が必要であり、特定の方法で動作する必要があることを明示しました。</font></font></blockquote><br>
<br>
<img src="https://habrastorage.org/webt/oc/sv/le/ocsvleusm3bq6b-jaba9122-luo.jpeg"><img src="https://habrastorage.org/webt/dl/nt/t0/dlntt0sqtc19x_xktrqjjpolkbm.jpeg"><img src="https://habrastorage.org/webt/hg/qe/7q/hgqe7qwelpnwkvloy0gibt9nfve.jpeg"><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rudy Artyomの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
レポートから、設計システムについて詳しく知ることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それまでは、PIN入力コンポーネントに戻ります。</font><font style="vertical-align: inherit;">何がいい？</font></font><br>
<br>
<ul>
<li>  ;<br>
</li>
<li>   UI,       -;<br>
</li>
<li>      ,    EditText.<br>
</li>
</ul><br>
<br>
<img width="270" src="https://habrastorage.org/webt/zz/rw/r3/zzrwr3rjaioiy_jsslvhgtx3bb0.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのソリューションオプションは何でしたか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/ha/da/zlhada_7p7p65deqnejcrynfk1g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA：4つの個別のEditTextを使用します。各PIN要素は個別のEditTextになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションB：EditTextを1つ使用し、創造性を追加して、必要なものを取得します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションBを選択しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/xk/fd/hgxkfdhcqjsxyfopzuj1imxtcm4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションA. 4つの個別のEditTextに問題があります。 Androidはすべての側面に追加のパディングを追加します。これは正しく処理する必要があります。さらに、ユーザーがPINコード全体を削除できるように、ロングタップバックを実装する必要があります。手動でフォーカスを操作し、文字の削除を処理する必要があります。かなり複雑に見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、少しだまして、データソースとなるサイズ0 x 0の非表示のEditTextを作成することにしました。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createActualInput</span><span class="hljs-params">(lengthCount: <span class="hljs-type">Int</span>)</span></span> = EditText(context)<font></font>
   .apply {<font></font>
       inputType = InputType.TYPE_CLASS_NUMBER<font></font>
       isClickable = <span class="hljs-literal">false</span>
       maxHeight = <span class="hljs-number">0</span>
       maxWidth = <span class="hljs-number">0</span>
       alpha = <span class="hljs-number">0F</span><font></font>
       addOrUpdateFilter(InputFilter.LengthFilter(lengthCount))<font></font>
   }<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createPinItems</span><span class="hljs-params">(count: <span class="hljs-type">Int</span>)</span></span> {<font></font>
   actualText = createActualInput(count)<font></font>
   actualText.textChanges()<font></font>
       .subscribe {<font></font>
           updatePins(it.toString())<font></font>
           pinChangesRelay.accept(it)<font></font>
       }<font></font>
   overlay.clicks().subscribe { focus() }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PINコードの各桁はプログラムで追加されます。</font><font style="vertical-align: inherit;">これにより、あらゆる種類のUIを描画したり、インデントしたりできます。ユーザーがコンポーネントをクリックした後、フォーカスをEditTextに配置します。</font><font style="vertical-align: inherit;">したがって、キーボードは正しく機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、サブスクライブして、非表示のEditTextのテキストを変更し、UIに表示します。</font><font style="vertical-align: inherit;">その後、このコンポーネントからデータストリームを取り出すのは簡単です。</font><font style="vertical-align: inherit;">実際、標準のAndroid EditTextを再利用し、必要なロジックを少し追加しただけです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの原則は常に適用できるとは限りません。</font><font style="vertical-align: inherit;">それらがうまく機能するための条件を説明します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発者は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能に影響を与えることができます</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それ以外の場合は、タスクを完了する必要があります。</font></font><br>
</li>
<li>   <b> </b>,  <b>       </b>,   <b>     </b>.         ,          100% ,    ,   — .<br>
</li>
<li>   <b>  </b>.       ,   -     ,      ,     .<br>
</li>
<li><b></b>.        ,  ,         .<br>
</li>
</ul><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの原則の使い方は？残念ながら、コンテキスト外では、推奨を行うことは困難です。ただし、次の点に注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの例のように、UI / UXに問題があるか、ツールチップの例のようにビジネスロジックに問題がある可能性があります。タスクをいくつかの小さなサブタスクに分解してから、それらを評価する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、問題がどこにあるかを正確に見つけることができます。次に、それらを解決する方法を同僚と話し合います。多分何かを簡略化することができます。あるいは、同僚がすでに知っている簡単な解決策について知らないだけかもしれません。次の段階では、代替ソリューションとして製品を調整します。彼らが満足しているならば、あなたの申し出を実行してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はすべての人が時々間違いを犯すことを付け加えたいと思います。</font><font style="vertical-align: inherit;">おそらく、製品は実際の問題を解決しないタスクを設定しています。</font><font style="vertical-align: inherit;">おそらく、デザイナーがあなたにiOS用のデザインを送ってくれたのでしょう。</font><font style="vertical-align: inherit;">おそらく、サーバーとクライアント間の通信プロトコルはクライアントにとって絶対に不便です。</font><font style="vertical-align: inherit;">私たちはこれらすべてについて話し合う必要があり、それらについて話し合い、フィードバックを与える必要があります。</font><font style="vertical-align: inherit;">したがって、あなたは開発者としてのあなたの価値と会社にとってのあなたの有用性を増大させます。</font><font style="vertical-align: inherit;">つまり、双方にとってWin-Winです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私に連絡するためのリンク：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">//github.com/Nublo</font></a><font style="vertical-align: inherit;"> ;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テレグラム：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">//t.me/anatolv</font></a><font style="vertical-align: inherit;"> ;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロンドンへの移動に関するブログ（広告として:)）：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">//vk.com/london_relocate</font></a><font style="vertical-align: inherit;">。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS間違いなく、これらのタスクには他のソリューションがあります。</font><font style="vertical-align: inherit;">おそらくあなたは提案されたものよりも良いものを知っています。</font><font style="vertical-align: inherit;">この記事の目的は、私たちが実際の生活でどのように意思決定を行い、どのような論理に従うかを示すことです。</font><font style="vertical-align: inherit;">多分あなたはこれらのタスクのためのより良い解決策を知っていますか？</font><font style="vertical-align: inherit;">コメントで例を共有してください。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja456094/index.html">データシート2を読む：STM32上のSPI。STM8のPWMタイマーと割り込み</a></li>
<li><a href="../ja456096/index.html">雲の中をホバリングしているときの平均的なギークタイムリーダーの行動</a></li>
<li><a href="../ja456100/index.html">新しいパッケージになりました-M.2形式のKingston A400が市場に急ぎます</a></li>
<li><a href="../ja456102/index.html">C / C ++での簡単なレポート</a></li>
<li><a href="../ja456104/index.html">Ezblock Pi-プログラミングなしのプログラミング、今回はRaspberry Piファン向け</a></li>
<li><a href="../ja456108/index.html">Habr Weekly＃5 /暗い話題が随所に見られ、銀行の拠点が流れたロシア連邦の中国工場、Pixel 4、MLが大気を汚染</a></li>
<li><a href="../ja456110/index.html">あなたのテキストはどのように見えますか？</a></li>
<li><a href="../ja456112/index.html">ムーアの法則の克服：従来のプレーナートランジスタを置き換える方法</a></li>
<li><a href="../ja456114/index.html">Mamba開発の新機能</a></li>
<li><a href="../ja456116/index.html">yEdグラフエディターで美しいデータベーススキーマを構築する方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>