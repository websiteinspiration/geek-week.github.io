<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏻 🌞 🎿 Néomorphisme utilisant SwiftUI. Partie 2: Que peut-on faire avec l'accessibilité? 🛀🏽 🙅🏿 🧒🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous! En prévision du début du cours avancé «Développeur IOS», nous publions une traduction de la deuxième partie de l'article sur le néomor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Néomorphisme utilisant SwiftUI. Partie 2: Que peut-on faire avec l'accessibilité?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/503518/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour à tous! </font><font style="vertical-align: inherit;">En prévision du début du cours avancé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Développeur IOS»,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous publions une traduction de la deuxième partie de l'article sur le néomorphisme à l'aide de SwiftUI ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire la première partie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/he/yr/xx/heyrxxyvuyqlbcy3ky0-7wuosmu.png"><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thème sombre</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de commencer à comprendre comment nous pouvons améliorer la disponibilité du néomorphisme, voyons comment nous pouvons travailler avec l'effet pour créer d'autres styles intéressants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez d'abord deux autres couleurs à l'extension </font></font><code>Color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">afin d'avoir plusieurs valeurs constantes sous la main:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> darkStart = <span class="hljs-type">Color</span>(red: <span class="hljs-number">50</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">60</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">65</span> / <span class="hljs-number">255</span>)
<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> darkEnd = <span class="hljs-type">Color</span>(red: <span class="hljs-number">25</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">25</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">30</span> / <span class="hljs-number">255</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons les utiliser comme arrière-plan pour </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer celui existant </font></font><code>Color.white</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme indiqué ici:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
    <span class="hljs-type">ZStack</span> {
        <span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nôtre </font></font><code>SimpleButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semble désormais déplacée, car elle impose une stylisation lumineuse sur un fond sombre. Nous allons donc créer un nouveau style sombre qui fonctionne mieux ici, mais cette fois-ci, nous le diviserons en deux parties: une vue d'arrière-plan que nous pouvons utiliser n'importe où et un style de bouton qui l'enveloppe avec les modificateurs padding et contentShape. Cela nous donnera plus de flexibilité, comme vous le verrez plus tard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nouvelle vue d'arrière-plan que nous allons ajouter nous permettra de spécifier n'importe quelle forme pour notre effet visuel, donc nous ne sommes plus attachés aux cercles. Il gardera également une trace de la concavité de notre effet convexe (vers l'intérieur ou vers l'extérieur), selon la propriété </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que nous pouvons changer de l'extérieur.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commencerons par le plus simple, en utilisant une approche de retournement d'ombre modifiée pour obtenir un effet concave. </font><font style="vertical-align: inherit;">Ajoutez cette structure:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkBackground</span>&lt;<span class="hljs-title">S</span>: <span class="hljs-title">Shape</span>&gt;: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> isHighlighted: <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">var</span> shape: <span class="hljs-type">S</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-keyword">if</span> isHighlighted {<font></font>
                shape<font></font>
                    .fill(<span class="hljs-type">Color</span>.darkEnd)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                shape<font></font>
                    .fill(<span class="hljs-type">Color</span>.darkEnd)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La modification est que lorsque le bouton est enfoncé, la taille de l'ombre diminue - nous utilisons une distance de 5 points au lieu de 10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous pouvons l'envelopper à l'aide du </font></font><code>DarkButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplissage et de contentShape, comme indiqué ici:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkButtonStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {<font></font>
        configuration.label<font></font>
            .padding(<span class="hljs-number">30</span>)<font></font>
            .contentShape(<span class="hljs-type">Circle</span>())<font></font>
            .background(<font></font>
                <span class="hljs-type">DarkBackground</span>(isHighlighted: configuration.isPressed, shape: <span class="hljs-type">Circle</span>())<font></font>
            )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, nous pouvons appliquer cela à notre bouton en le </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifiant </font></font><code>ButtonStyle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">.buttonStyle(<span class="hljs-type">DarkButtonStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons ce qui s'est passé - bien que nous n'ayons pas beaucoup de code, je pense que le résultat semble assez bon.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/va/7o/jzva7ocai47mzhaj-cft8nn7e6g.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques expériences</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps d'expérimenter l'effet, car cela vous aidera à mieux comprendre de quoi SwiftUI est spécifiquement capable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous pourrions créer un bouton convexe lisse en lui ajoutant un dégradé linéaire et en le retournant lorsque vous appuyez dessus:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkEnd, <span class="hljs-type">Color</span>.darkStart))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
<font></font>
} <span class="hljs-keyword">else</span> {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous l'exécutez, vous verrez que le bouton s'anime en douceur de haut en bas lorsqu'il est enfoncé et relâché. </font><font style="vertical-align: inherit;">Je trouve l'animation un peu distrayante, je recommande donc de la désactiver en ajoutant ce modificateur à la méthode </font></font><code>makeBody()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>DarkButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, après le modificateur présent </font></font><code>background()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">.animation(<span class="hljs-literal">nil</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/g3/lo/n5/g3lon5maomyp_uldbmdvxiknxvs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet effet du bouton coussin est charmant, mais si vous prévoyez de l'utiliser, je vous conseille d'essayer les trois changements suivants pour faire ressortir un peu plus le bouton. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premièrement, malgré le fait que cela contredit le principe de faible contraste du design néomorphique, je remplacerais l'icône grise par une blanche pour la faire ressortir. </font><font style="vertical-align: inherit;">Donc, </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous auriez besoin des éléments suivants:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
    .foregroundColor(.white)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxièmement, si vous ajoutez une superposition pour le bouton à l'état pressé, cela ne fera pas seulement ressembler davantage à un vrai bouton physique appuyé, mais aidera également à distinguer son état pressé de celui non pressé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour mettre en </font><font style="vertical-align: inherit;">œuvre, vous devez insérer le modificateur </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">après </font></font><code>fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quand </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il est vrai, comme ici:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkEnd, <span class="hljs-type">Color</span>.darkStart))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/dz/3r/ek/dz3rekiskxg_akiehpl0xp6iv9u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour obtenir un aspect encore plus net, vous pouvez supprimer deux modificateurs </font></font><code>shadow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour l'état enfoncé qui se concentrent sur la superposition autrement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Troisièmement, vous pouvez également ajouter une superposition à l'état non pressé, juste pour marquer qu'il s'agit d'un bouton. </font><font style="vertical-align: inherit;">Mettez-le immédiatement après </font></font><code>fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme ceci:</font></font><br>
<br>
<pre><code class="swift hljs">} <span class="hljs-keyword">else</span> {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">Color</span>.darkEnd, lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/l7/5s/jf/l75sjfjt4ymqfaoeyshsdwto1ds.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout d'un style de commutateur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des avantages de séparer un style de bouton d'un style d'arrière-plan non morphique est que nous pouvons maintenant ajouter un style de commutateur en utilisant le même effet. </font><font style="vertical-align: inherit;">Cela signifie créer une nouvelle structure conforme au protocole </font></font><code>ToggleStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui est similaire à </font></font><code>ButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sauf que:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons lire </font></font><code>configuration.isOn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour déterminer si l'interrupteur est activé.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons fournir un bouton pour gérer l'acte de commutation, ou au moins quelque chose comme </font></font><code>onTapGesture()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font><font style="vertical-align: inherit;">quelque chose comme </font><font style="vertical-align: inherit;">ça.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez cette structure à votre projet:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkToggleStyle</span>: <span class="hljs-title">ToggleStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {<font></font>
            configuration.isOn.toggle()<font></font>
        }) {<font></font>
            configuration.label<font></font>
                .padding(<span class="hljs-number">30</span>)<font></font>
                .contentShape(<span class="hljs-type">Circle</span>())<font></font>
        }<font></font>
        .background(<font></font>
            <span class="hljs-type">DarkBackground</span>(isHighlighted: configuration.isOn, shape: <span class="hljs-type">Circle</span>())<font></font>
        )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voulons en mettre un </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour que vous puissiez le tester vous-même, alors commencez par ajouter cette propriété:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isToggled = <span class="hljs-literal">false</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enveloppez ensuite le bouton existant </font></font><code>VStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec un espacement égal à 40 et placez-le ci-dessous:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Toggle</span>(isOn: $isToggled) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.toggleStyle(<span class="hljs-type">DarkToggleStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Votre structure </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devrait ressembler à ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isToggled = <span class="hljs-literal">false</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd)<font></font>
<font></font>
            <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
                <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button tapped"</span>)<font></font>
                }) {<font></font>
                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
                        .foregroundColor(.white)<font></font>
                }<font></font>
                .buttonStyle(<span class="hljs-type">DarkButtonStyle</span>())<font></font>
<font></font>
                <span class="hljs-type">Toggle</span>(isOn: $isToggled) {
                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
                        .foregroundColor(.white)<font></font>
                }<font></font>
                .toggleStyle(<span class="hljs-type">DarkToggleStyle</span>())<font></font>
            }<font></font>
        }<font></font>
        .edgesIgnoringSafeArea(.all)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et c'est tout - nous avons appliqué notre conception néomorphique commune à deux endroits!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amélioration de l'accessibilité</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons eu assez de temps pour jouer avec différents styles néomorphes, mais maintenant je veux m'attarder sur les problèmes de cette conception: un manque de contraste extrême signifie que les boutons et autres commandes importantes ne suffisent pas à se démarquer de leur environnement, ce qui rend difficile l'utilisation de nos applications pour les personnes avec vision imparfaite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est le moment autour duquel j'observe un malentendu, donc je veux dire quelques choses à l'avance:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oui, je comprends que les boutons Apple standard ressemblent au texte bleu et ne ressemblent donc pas aux boutons familiers, du moins à première vue, mais ils ont un rapport de contraste élevé.</font></font></li>
<li>  «   ,      ,     » —  —   « »,  ,        ,     - .</li>
<li>    -     SwiftUI,  ,             VoiceOver     Apple.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous avez déjà vu comment nous avons changé l'icône grise en blanche pour obtenir une amélioration instantanée du contraste, mais les boutons et les commutateurs ont encore besoin de beaucoup plus de contraste si vous voulez les rendre plus accessibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons donc réfléchir aux changements que nous pourrions apporter pour que les éléments se démarquent vraiment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, je voudrais que vous ajoutiez deux nouvelles couleurs à notre extension:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> lightStart = <span class="hljs-type">Color</span>(red: <span class="hljs-number">60</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">160</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">240</span> / <span class="hljs-number">255</span>)
<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> lightEnd = <span class="hljs-type">Color</span>(red: <span class="hljs-number">30</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">80</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">120</span> / <span class="hljs-number">255</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxièmement, dupliquez l'existant </font></font><code>DarkBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et nommez la copie </font></font><code>ColorfulBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous y reviendrons dans un instant, mais encore une fois, nous devons d'abord nous préparer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Troisièmement, dupliquer le style sombre du bouton et commutateur, les renommer </font></font><code>ColorfulButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>ColorfulToggleStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puis faire les utiliser le nouveau </font></font><code>ColorfulBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme l'arrière - </font><font style="vertical-align: inherit;">plan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils devraient donc ressembler à ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ColorfulButtonStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {<font></font>
        configuration.label<font></font>
            .padding(<span class="hljs-number">30</span>)<font></font>
            .contentShape(<span class="hljs-type">Circle</span>())<font></font>
            .background(<font></font>
                <span class="hljs-type">ColorfulBackground</span>(isHighlighted: configuration.isPressed, shape: <span class="hljs-type">Circle</span>())<font></font>
            )<font></font>
            .animation(<span class="hljs-literal">nil</span>)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ColorfulToggleStyle</span>: <span class="hljs-title">ToggleStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {<font></font>
            configuration.isOn.toggle()<font></font>
        }) {<font></font>
            configuration.label<font></font>
                .padding(<span class="hljs-number">30</span>)<font></font>
                .contentShape(<span class="hljs-type">Circle</span>())<font></font>
        }<font></font>
        .background(<font></font>
            <span class="hljs-type">ColorfulBackground</span>(isHighlighted: configuration.isOn, shape: <span class="hljs-type">Circle</span>())<font></font>
        )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et enfin, modifiez le bouton et basculez </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour utiliser le nouveau style:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Button</span>(action: {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button tapped"</span>)<font></font>
}) {<font></font>
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.buttonStyle(<span class="hljs-type">ColorfulButtonStyle</span>())<font></font>
<font></font>
<span class="hljs-type">Toggle</span>(isOn: $isToggled) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.toggleStyle(<span class="hljs-type">ColorfulToggleStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez exécuter l'application si vous le souhaitez, mais cela n'a aucun sens - elle n'a pas réellement changé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour apporter notre version colorée de la vie, nous allons changer les modificateurs </font></font><code> fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les états pressés et non pressés. </font><font style="vertical-align: inherit;">Donc, quand c'est </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai, changez à la </font></font><code>darkStart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fois </font></font><code>darkEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>lightStart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>lightEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightEnd, <span class="hljs-type">Color</span>.lightStart))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous exécutez à nouveau l'application, vous verrez qu'elle s'est déjà considérablement améliorée: l'état enfoncé a maintenant une couleur bleu vif, il devient donc clair lorsque les boutons sont enfoncés et que les commutateurs sont actifs. </font><font style="vertical-align: inherit;">Mais nous pouvons faire autre chose - nous pouvons ajouter la même couleur autour du bouton lorsqu'il n'est pas enfoncé, ce qui permet d'attirer l'attention sur lui. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/gb/lo/pogblok8qjgbcoiourimhye6tx4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, changez l'état </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non stressé </font><font style="vertical-align: inherit;">existant </font><font style="vertical-align: inherit;">en ceci:</font></font><br>
<br>
<pre><code class="swift hljs">.overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, le style de bouton fini devrait ressembler à ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ZStack</span> {
    <span class="hljs-keyword">if</span> isHighlighted {<font></font>
        shape<font></font>
            .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightEnd, <span class="hljs-type">Color</span>.lightStart))<font></font>
            .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        shape<font></font>
            .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
            .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, exécutez à nouveau l'application, et vous verrez qu'un anneau bleu est apparu autour des boutons et des commutateurs, et lorsque vous cliquez dessus, il est rempli de bleu - il est beaucoup plus accessible.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2r/gl/x7/2rglx7dgbgwzdh8ch3mvzrddsra.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pratique, vous n'aurez pas plusieurs styles de boutons différents dans un même projet, du moins si vous n'aimez pas créer un casse-tête pour vos utilisateurs. Mais c'est un espace d'expérimentation intéressant, et j'espère que vous saisirez cette idée de mon article, car vous pouvez créer de très beaux effets sans vous déchirer le dos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai dit à plusieurs reprises que vous devriez toujours surveiller la disponibilité de votre application, et cela signifie plus que simplement vous assurer que VoiceOver fonctionne avec votre interface utilisateur. Assurez-vous que vos boutons sont interactifs, assurez-vous que vos étiquettes de texte et vos icônes ont un rapport de contraste suffisant avec l'arrière-plan (au moins 4,5: 1, mais ont tendance à 7: 1), et assurez-vous que vos zones cliquables sont confortables et grand (au moins 44x44 pixels).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pour l'amour du ciel, utilisez le design néomorphe pour expérimenter et élargir vos connaissances sur SwiftUI, mais n'oubliez jamais que si vous sacrifiez la convivialité à une nouvelle tendance de design de mode, vous ne gagnez rien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez obtenir le code source complet de ce projet sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lisez la première partie.</font></font></a><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur le cours.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503488/index.html">Meilleures pratiques Kubernetes. Correct Terminate Disable</a></li>
<li><a href="../fr503490/index.html">Comparaison de scènes de rap russe en utilisant les techniques de R et de Text Mining. Noize Mc, Oxxxymiron, oncle Zhenya. Épisode 2</a></li>
<li><a href="../fr503494/index.html">Assemblage d'une passerelle de bricolage pour les appareils Zigbee</a></li>
<li><a href="../fr503504/index.html">Le projet Data Science le plus réussi et le plus scandaleux: Cambridge Analytica</a></li>
<li><a href="../fr503508/index.html">Écoles, enseignants, étudiants, leurs notes et notes</a></li>
<li><a href="../fr503522/index.html">Monde après 2020 (essai)</a></li>
<li><a href="../fr503524/index.html">En tant que registraire de domaine, P01 Registrar remet ses clients</a></li>
<li><a href="../fr503526/index.html">Django ORM pour débutants | Nous optimisons les demandes</a></li>
<li><a href="../fr503530/index.html">Votre déclin professionnel arrivera (beaucoup) plus tôt que vous ne le pensez</a></li>
<li><a href="../fr503532/index.html">Comment les achats en ligne aux États-Unis ont changé en raison du coronavirus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>