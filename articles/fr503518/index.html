<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèª üåû üéø N√©omorphisme utilisant SwiftUI. Partie 2: Que peut-on faire avec l'accessibilit√©? üõÄüèΩ üôÖüèø üßíüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! En pr√©vision du d√©but du cours avanc√© ¬´D√©veloppeur IOS¬ª, nous publions une traduction de la deuxi√®me partie de l'article sur le n√©omor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>N√©omorphisme utilisant SwiftUI. Partie 2: Que peut-on faire avec l'accessibilit√©?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/503518/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour √† tous! </font><font style="vertical-align: inherit;">En pr√©vision du d√©but du cours avanc√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´D√©veloppeur IOS¬ª,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous publions une traduction de la deuxi√®me partie de l'article sur le n√©omorphisme √† l'aide de SwiftUI ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire la premi√®re partie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/he/yr/xx/heyrxxyvuyqlbcy3ky0-7wuosmu.png"><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Th√®me sombre</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de commencer √† comprendre comment nous pouvons am√©liorer la disponibilit√© du n√©omorphisme, voyons comment nous pouvons travailler avec l'effet pour cr√©er d'autres styles int√©ressants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez d'abord deux autres couleurs √† l'extension </font></font><code>Color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">afin d'avoir plusieurs valeurs constantes sous la main:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> darkStart = <span class="hljs-type">Color</span>(red: <span class="hljs-number">50</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">60</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">65</span> / <span class="hljs-number">255</span>)
<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> darkEnd = <span class="hljs-type">Color</span>(red: <span class="hljs-number">25</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">25</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">30</span> / <span class="hljs-number">255</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons les utiliser comme arri√®re-plan pour </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer celui existant </font></font><code>Color.white</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme indiqu√© ici:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
    <span class="hljs-type">ZStack</span> {
        <span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La n√¥tre </font></font><code>SimpleButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semble d√©sormais d√©plac√©e, car elle impose une stylisation lumineuse sur un fond sombre. Nous allons donc cr√©er un nouveau style sombre qui fonctionne mieux ici, mais cette fois-ci, nous le diviserons en deux parties: une vue d'arri√®re-plan que nous pouvons utiliser n'importe o√π et un style de bouton qui l'enveloppe avec les modificateurs padding et contentShape. Cela nous donnera plus de flexibilit√©, comme vous le verrez plus tard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nouvelle vue d'arri√®re-plan que nous allons ajouter nous permettra de sp√©cifier n'importe quelle forme pour notre effet visuel, donc nous ne sommes plus attach√©s aux cercles. Il gardera √©galement une trace de la concavit√© de notre effet convexe (vers l'int√©rieur ou vers l'ext√©rieur), selon la propri√©t√© </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que nous pouvons changer de l'ext√©rieur.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commencerons par le plus simple, en utilisant une approche de retournement d'ombre modifi√©e pour obtenir un effet concave. </font><font style="vertical-align: inherit;">Ajoutez cette structure:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkBackground</span>&lt;<span class="hljs-title">S</span>: <span class="hljs-title">Shape</span>&gt;: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> isHighlighted: <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">var</span> shape: <span class="hljs-type">S</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-keyword">if</span> isHighlighted {<font></font>
                shape<font></font>
                    .fill(<span class="hljs-type">Color</span>.darkEnd)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                shape<font></font>
                    .fill(<span class="hljs-type">Color</span>.darkEnd)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La modification est que lorsque le bouton est enfonc√©, la taille de l'ombre diminue - nous utilisons une distance de 5 points au lieu de 10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous pouvons l'envelopper √† l'aide du </font></font><code>DarkButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplissage et de contentShape, comme indiqu√© ici:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkButtonStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {<font></font>
        configuration.label<font></font>
            .padding(<span class="hljs-number">30</span>)<font></font>
            .contentShape(<span class="hljs-type">Circle</span>())<font></font>
            .background(<font></font>
                <span class="hljs-type">DarkBackground</span>(isHighlighted: configuration.isPressed, shape: <span class="hljs-type">Circle</span>())<font></font>
            )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, nous pouvons appliquer cela √† notre bouton en le </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modifiant </font></font><code>ButtonStyle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">.buttonStyle(<span class="hljs-type">DarkButtonStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons ce qui s'est pass√© - bien que nous n'ayons pas beaucoup de code, je pense que le r√©sultat semble assez bon.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/va/7o/jzva7ocai47mzhaj-cft8nn7e6g.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques exp√©riences</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps d'exp√©rimenter l'effet, car cela vous aidera √† mieux comprendre de quoi SwiftUI est sp√©cifiquement capable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous pourrions cr√©er un bouton convexe lisse en lui ajoutant un d√©grad√© lin√©aire et en le retournant lorsque vous appuyez dessus:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkEnd, <span class="hljs-type">Color</span>.darkStart))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
<font></font>
} <span class="hljs-keyword">else</span> {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous l'ex√©cutez, vous verrez que le bouton s'anime en douceur de haut en bas lorsqu'il est enfonc√© et rel√¢ch√©. </font><font style="vertical-align: inherit;">Je trouve l'animation un peu distrayante, je recommande donc de la d√©sactiver en ajoutant ce modificateur √† la m√©thode </font></font><code>makeBody()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>DarkButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, apr√®s le modificateur pr√©sent </font></font><code>background()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">.animation(<span class="hljs-literal">nil</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/g3/lo/n5/g3lon5maomyp_uldbmdvxiknxvs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet effet du bouton coussin est charmant, mais si vous pr√©voyez de l'utiliser, je vous conseille d'essayer les trois changements suivants pour faire ressortir un peu plus le bouton. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premi√®rement, malgr√© le fait que cela contredit le principe de faible contraste du design n√©omorphique, je remplacerais l'ic√¥ne grise par une blanche pour la faire ressortir. </font><font style="vertical-align: inherit;">Donc, </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous auriez besoin des √©l√©ments suivants:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
    .foregroundColor(.white)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxi√®mement, si vous ajoutez une superposition pour le bouton √† l'√©tat press√©, cela ne fera pas seulement ressembler davantage √† un vrai bouton physique appuy√©, mais aidera √©galement √† distinguer son √©tat press√© de celui non press√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour mettre en </font><font style="vertical-align: inherit;">≈ìuvre, vous devez ins√©rer le modificateur </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apr√®s </font></font><code>fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quand </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il est vrai, comme ici:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkEnd, <span class="hljs-type">Color</span>.darkStart))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/dz/3r/ek/dz3rekiskxg_akiehpl0xp6iv9u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour obtenir un aspect encore plus net, vous pouvez supprimer deux modificateurs </font></font><code>shadow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour l'√©tat enfonc√© qui se concentrent sur la superposition autrement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Troisi√®mement, vous pouvez √©galement ajouter une superposition √† l'√©tat non press√©, juste pour marquer qu'il s'agit d'un bouton. </font><font style="vertical-align: inherit;">Mettez-le imm√©diatement apr√®s </font></font><code>fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme ceci:</font></font><br>
<br>
<pre><code class="swift hljs">} <span class="hljs-keyword">else</span> {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">Color</span>.darkEnd, lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/l7/5s/jf/l75sjfjt4ymqfaoeyshsdwto1ds.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout d'un style de commutateur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des avantages de s√©parer un style de bouton d'un style d'arri√®re-plan non morphique est que nous pouvons maintenant ajouter un style de commutateur en utilisant le m√™me effet. </font><font style="vertical-align: inherit;">Cela signifie cr√©er une nouvelle structure conforme au protocole </font></font><code>ToggleStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui est similaire √† </font></font><code>ButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sauf que:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons lire </font></font><code>configuration.isOn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour d√©terminer si l'interrupteur est activ√©.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons fournir un bouton pour g√©rer l'acte de commutation, ou au moins quelque chose comme </font></font><code>onTapGesture()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font><font style="vertical-align: inherit;">quelque chose comme </font><font style="vertical-align: inherit;">√ßa.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez cette structure √† votre projet:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkToggleStyle</span>: <span class="hljs-title">ToggleStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {<font></font>
            configuration.isOn.toggle()<font></font>
        }) {<font></font>
            configuration.label<font></font>
                .padding(<span class="hljs-number">30</span>)<font></font>
                .contentShape(<span class="hljs-type">Circle</span>())<font></font>
        }<font></font>
        .background(<font></font>
            <span class="hljs-type">DarkBackground</span>(isHighlighted: configuration.isOn, shape: <span class="hljs-type">Circle</span>())<font></font>
        )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voulons en mettre un </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour que vous puissiez le tester vous-m√™me, alors commencez par ajouter cette propri√©t√©:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isToggled = <span class="hljs-literal">false</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enveloppez ensuite le bouton existant </font></font><code>VStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec un espacement √©gal √† 40 et placez-le ci-dessous:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Toggle</span>(isOn: $isToggled) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.toggleStyle(<span class="hljs-type">DarkToggleStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Votre structure </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devrait ressembler √† ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isToggled = <span class="hljs-literal">false</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd)<font></font>
<font></font>
            <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
                <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button tapped"</span>)<font></font>
                }) {<font></font>
                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
                        .foregroundColor(.white)<font></font>
                }<font></font>
                .buttonStyle(<span class="hljs-type">DarkButtonStyle</span>())<font></font>
<font></font>
                <span class="hljs-type">Toggle</span>(isOn: $isToggled) {
                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
                        .foregroundColor(.white)<font></font>
                }<font></font>
                .toggleStyle(<span class="hljs-type">DarkToggleStyle</span>())<font></font>
            }<font></font>
        }<font></font>
        .edgesIgnoringSafeArea(.all)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et c'est tout - nous avons appliqu√© notre conception n√©omorphique commune √† deux endroits!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Am√©lioration de l'accessibilit√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons eu assez de temps pour jouer avec diff√©rents styles n√©omorphes, mais maintenant je veux m'attarder sur les probl√®mes de cette conception: un manque de contraste extr√™me signifie que les boutons et autres commandes importantes ne suffisent pas √† se d√©marquer de leur environnement, ce qui rend difficile l'utilisation de nos applications pour les personnes avec vision imparfaite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est le moment autour duquel j'observe un malentendu, donc je veux dire quelques choses √† l'avance:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oui, je comprends que les boutons Apple standard ressemblent au texte bleu et ne ressemblent donc pas aux boutons familiers, du moins √† premi√®re vue, mais ils ont un rapport de contraste √©lev√©.</font></font></li>
<li>  ¬´   ,      ,     ¬ª ‚Äî  ‚Äî   ¬´ ¬ª,  ,        ,     - .</li>
<li>    -     SwiftUI,  ,             VoiceOver     Apple.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous avez d√©j√† vu comment nous avons chang√© l'ic√¥ne grise en blanche pour obtenir une am√©lioration instantan√©e du contraste, mais les boutons et les commutateurs ont encore besoin de beaucoup plus de contraste si vous voulez les rendre plus accessibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons donc r√©fl√©chir aux changements que nous pourrions apporter pour que les √©l√©ments se d√©marquent vraiment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, je voudrais que vous ajoutiez deux nouvelles couleurs √† notre extension:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> lightStart = <span class="hljs-type">Color</span>(red: <span class="hljs-number">60</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">160</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">240</span> / <span class="hljs-number">255</span>)
<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> lightEnd = <span class="hljs-type">Color</span>(red: <span class="hljs-number">30</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">80</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">120</span> / <span class="hljs-number">255</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxi√®mement, dupliquez l'existant </font></font><code>DarkBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et nommez la copie </font></font><code>ColorfulBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous y reviendrons dans un instant, mais encore une fois, nous devons d'abord nous pr√©parer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Troisi√®mement, dupliquer le style sombre du bouton et commutateur, les renommer </font></font><code>ColorfulButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>ColorfulToggleStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puis faire les utiliser le nouveau </font></font><code>ColorfulBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme l'arri√®re - </font><font style="vertical-align: inherit;">plan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils devraient donc ressembler √† ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ColorfulButtonStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {<font></font>
        configuration.label<font></font>
            .padding(<span class="hljs-number">30</span>)<font></font>
            .contentShape(<span class="hljs-type">Circle</span>())<font></font>
            .background(<font></font>
                <span class="hljs-type">ColorfulBackground</span>(isHighlighted: configuration.isPressed, shape: <span class="hljs-type">Circle</span>())<font></font>
            )<font></font>
            .animation(<span class="hljs-literal">nil</span>)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ColorfulToggleStyle</span>: <span class="hljs-title">ToggleStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {<font></font>
            configuration.isOn.toggle()<font></font>
        }) {<font></font>
            configuration.label<font></font>
                .padding(<span class="hljs-number">30</span>)<font></font>
                .contentShape(<span class="hljs-type">Circle</span>())<font></font>
        }<font></font>
        .background(<font></font>
            <span class="hljs-type">ColorfulBackground</span>(isHighlighted: configuration.isOn, shape: <span class="hljs-type">Circle</span>())<font></font>
        )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et enfin, modifiez le bouton et basculez </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour utiliser le nouveau style:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Button</span>(action: {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button tapped"</span>)<font></font>
}) {<font></font>
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.buttonStyle(<span class="hljs-type">ColorfulButtonStyle</span>())<font></font>
<font></font>
<span class="hljs-type">Toggle</span>(isOn: $isToggled) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.toggleStyle(<span class="hljs-type">ColorfulToggleStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez ex√©cuter l'application si vous le souhaitez, mais cela n'a aucun sens - elle n'a pas r√©ellement chang√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour apporter notre version color√©e de la vie, nous allons changer les modificateurs </font></font><code> fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les √©tats press√©s et non press√©s. </font><font style="vertical-align: inherit;">Donc, quand c'est </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai, changez √† la </font></font><code>darkStart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fois </font></font><code>darkEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>lightStart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>lightEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightEnd, <span class="hljs-type">Color</span>.lightStart))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous ex√©cutez √† nouveau l'application, vous verrez qu'elle s'est d√©j√† consid√©rablement am√©lior√©e: l'√©tat enfonc√© a maintenant une couleur bleu vif, il devient donc clair lorsque les boutons sont enfonc√©s et que les commutateurs sont actifs. </font><font style="vertical-align: inherit;">Mais nous pouvons faire autre chose - nous pouvons ajouter la m√™me couleur autour du bouton lorsqu'il n'est pas enfonc√©, ce qui permet d'attirer l'attention sur lui. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/gb/lo/pogblok8qjgbcoiourimhye6tx4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, changez l'√©tat </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non stress√© </font><font style="vertical-align: inherit;">existant </font><font style="vertical-align: inherit;">en ceci:</font></font><br>
<br>
<pre><code class="swift hljs">.overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, le style de bouton fini devrait ressembler √† ceci:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ZStack</span> {
    <span class="hljs-keyword">if</span> isHighlighted {<font></font>
        shape<font></font>
            .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightEnd, <span class="hljs-type">Color</span>.lightStart))<font></font>
            .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        shape<font></font>
            .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
            .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, ex√©cutez √† nouveau l'application, et vous verrez qu'un anneau bleu est apparu autour des boutons et des commutateurs, et lorsque vous cliquez dessus, il est rempli de bleu - il est beaucoup plus accessible.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2r/gl/x7/2rglx7dgbgwzdh8ch3mvzrddsra.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pratique, vous n'aurez pas plusieurs styles de boutons diff√©rents dans un m√™me projet, du moins si vous n'aimez pas cr√©er un casse-t√™te pour vos utilisateurs. Mais c'est un espace d'exp√©rimentation int√©ressant, et j'esp√®re que vous saisirez cette id√©e de mon article, car vous pouvez cr√©er de tr√®s beaux effets sans vous d√©chirer le dos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai dit √† plusieurs reprises que vous devriez toujours surveiller la disponibilit√© de votre application, et cela signifie plus que simplement vous assurer que VoiceOver fonctionne avec votre interface utilisateur. Assurez-vous que vos boutons sont interactifs, assurez-vous que vos √©tiquettes de texte et vos ic√¥nes ont un rapport de contraste suffisant avec l'arri√®re-plan (au moins 4,5: 1, mais ont tendance √† 7: 1), et assurez-vous que vos zones cliquables sont confortables et grand (au moins 44x44 pixels).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pour l'amour du ciel, utilisez le design n√©omorphe pour exp√©rimenter et √©largir vos connaissances sur SwiftUI, mais n'oubliez jamais que si vous sacrifiez la convivialit√© √† une nouvelle tendance de design de mode, vous ne gagnez rien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez obtenir le code source complet de ce projet sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lisez la premi√®re partie.</font></font></a><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur le cours.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503488/index.html">Meilleures pratiques Kubernetes. Correct Terminate Disable</a></li>
<li><a href="../fr503490/index.html">Comparaison de sc√®nes de rap russe en utilisant les techniques de R et de Text Mining. Noize Mc, Oxxxymiron, oncle Zhenya. √âpisode 2</a></li>
<li><a href="../fr503494/index.html">Assemblage d'une passerelle de bricolage pour les appareils Zigbee</a></li>
<li><a href="../fr503504/index.html">Le projet Data Science le plus r√©ussi et le plus scandaleux: Cambridge Analytica</a></li>
<li><a href="../fr503508/index.html">√âcoles, enseignants, √©tudiants, leurs notes et notes</a></li>
<li><a href="../fr503522/index.html">Monde apr√®s 2020 (essai)</a></li>
<li><a href="../fr503524/index.html">En tant que registraire de domaine, P01 Registrar remet ses clients</a></li>
<li><a href="../fr503526/index.html">Django ORM pour d√©butants | Nous optimisons les demandes</a></li>
<li><a href="../fr503530/index.html">Votre d√©clin professionnel arrivera (beaucoup) plus t√¥t que vous ne le pensez</a></li>
<li><a href="../fr503532/index.html">Comment les achats en ligne aux √âtats-Unis ont chang√© en raison du coronavirus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>