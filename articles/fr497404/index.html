<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏿 🚶🏾 🐩 T + Conf 2019: Tarantool chez Aeroflot, ou MDM à la volée 📄 🅰️ 🚴🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous publions une transcription du rapport de Nikolai Shevtsov et Rustam Kildiev avec T + Conf 2019 " Tarantool in Aeroflot, ou MDM (Mast...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>T + Conf 2019: Tarantool chez Aeroflot, ou MDM à la volée</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497404/"><img src="https://habrastorage.org/webt/tt/v8/vo/ttv8vohzeerxnvyinyfsi7wi1tw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, nous publions une transcription du rapport de Nikolai Shevtsov et Rustam Kildiev avec T + Conf 2019 " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool in Aeroflot, ou MDM (Master Data Management) à la volée</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". </font><font style="vertical-align: inherit;">Le rapport vous apprendra:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi le MDM est-il nécessaire?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi ai-je besoin en temps réel?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La science des données est plus qu'un simple bloc-notes Jupyter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de Tarantool.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi Lua est bon à vendre.</font></font></li>
</ul><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les technologies de l'information aident activement notre entreprise à attirer des clients. Aujourd'hui, nous introduisons activement un certain nombre de projets Big Data. Ce sont des projets marketing qui nous aident à segmenter les données et à fournir des informations aux clients, à la recherche sociale, à gérer les plaintes et les appels, et bien plus encore. De plus, plusieurs projets sont mis en œuvre qui contribuent à accroître la rentabilité et la rentabilité de l'entreprise. Par exemple, l'un des projets consiste à analyser les bagages disponibles à bord afin de vendre le surplus à temps ou de prévoir la défaillance de composants individuels et de pièces de rechange d'avions pour une maintenance en temps opportun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est dans la plateforme de gestion des appels que nous utilisons activement Tarantool, et un peu plus à ce sujet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La principale valeur du Big Data pour nous est la capacité d'analyser les données. Nous essayons de collecter toutes les nouvelles sources d'informations liées à Aeroflot dans un seul champ d'information pour un traitement ultérieur.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c2/53c/34a/0c253c34a90c2d118b770ca120e63ba2.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikolay Shevtsov, Aeroflot. Chef de projet au Département des systèmes d'information.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Comment les gens achètent-ils généralement un billet? Il y a une idée du voyage, une personne la partage avec des amis et des parents, sur les réseaux sociaux et les forums, puis achète un ticket sur le site. Il existe de nombreuses sources d'informations, et notre tâche est de les collecter toutes et de les analyser afin de comprendre l'attitude des passagers vis-à-vis du service et de la compagnie aérienne dans son ensemble. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un de nos projets s'appelle la plateforme d'appel. Nous collectons tous les avis, appels et plaintes de nombreuses sources. «Plateforme» est notre fenêtre de collecte unique sur le site ou dans l'application mobile à travers laquelle nous recevons des informations des utilisateurs. Nous collectons également des avis sur les réseaux sociaux liés à Aeroflot.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreuses divisions d'Aeroflot sont impliquées dans le traitement des réclamations et des appels: employés engagés dans les services à bord, dans la zone de départ, dans la zone d'arrivée, etc. La plupart des plaintes, environ 2,5 mille par jour, proviennent de passagers arrivant qui ont des problèmes. Chaque plainte doit être traitée, classée et redirigée vers le service approprié vers un employé spécifique qui peut résoudre le problème du passager. Les plaintes identiques peuvent être regroupées pour gagner du temps à analyser la situation et à prendre une décision.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'objectif du projet est d'optimiser le traitement des demandes et de réduire les délais de traitement. </font><font style="vertical-align: inherit;">Pour ce faire, il a fallu créer un système qui, lors d'une réclamation, détermine automatiquement son sujet et l'envoie au service approprié à l'employé responsable. </font><font style="vertical-align: inherit;">En cours de traitement d'une réclamation, le système doit retrouver toutes les informations disponibles sur le client, jusqu'à son profil, les futurs vols prévus, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au début du projet, nous avons envisagé plusieurs outils qui pourraient nous aider dans cette affaire et avons finalement choisi Tarantool. </font><font style="vertical-align: inherit;">La vie a montré que c'était le bon choix: il vous permet de vous conformer aux exigences du SLA tout en s'adaptant bien à l'augmentation de la charge.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la mise en oeuvre</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aeroflot a introduit une plateforme de traitement des plaintes. </font><font style="vertical-align: inherit;">Il s'agit d'un référentiel d'informations non structurées, sur la base duquel l'analyse et la synthèse de profils clients uniques sont effectuées.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b31/faa/6eb/b31faa6ebcbeb799116369a843ed6d96.jpg" width="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les informations reçues lors des demandes doivent être traitées et systématisées. </font><font style="vertical-align: inherit;">Les appels sont du texte qui ne peut pas être stocké sous une forme brute, donc tout le texte est vectorisé. </font><font style="vertical-align: inherit;">Une recherche est effectuée pour un ensemble de résultats, une carte de mots et de phrases uniques est compilée, sur la base de laquelle le vecteur initial est calculé pour convertir tous les résultats ultérieurs. </font><font style="vertical-align: inherit;">Au départ, nos spécialistes de l'analyse de données utilisaient des outils classiques - Python et Jupyter Notebook sur un cluster ou un ordinateur portable local. </font><font style="vertical-align: inherit;">Le vecteur a une taille dynamique, ce qui crée des difficultés.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement à de nombreux autres outils, Tarantool est un serveur d'applications complet. </font><font style="vertical-align: inherit;">Nous pouvons utiliser de nombreuses bibliothèques, telles que SciLua, écrire la logique dans un langage de programmation normal, etc. </font><font style="vertical-align: inherit;">Maintenant, nous vectorisons des données en utilisant la bibliothèque SicLua en temps réel directement dans Tarantool. </font><font style="vertical-align: inherit;">Ensuite, en utilisant la méthode de la distance cosinusoïdale, le système recherche un vecteur similaire pendant une période de trois mois. </font><font style="vertical-align: inherit;">En conséquence, nous recevons un double ou des appels similaires pour un traitement ultérieur. </font><font style="vertical-align: inherit;">Dans le processus de recherche, de nombreux calculs mathématiques sont effectués: en 3 mois, environ 100 000 appels sont traités à partir de toutes les sources disponibles. </font><font style="vertical-align: inherit;">Le temps de traitement moyen est de 120 ms.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9d/bac/534/e9dbac534af68444ed73e6c6b0c10aba.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rustam Kildiev, CTO chez Innodata.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre base de données Tarantool fonctionne sur quatre serveurs à seize cœurs avec une grande quantité de RAM. Grâce au module Vshard, il a été possible d'implémenter une recherche rapide avec force brute. Les données sont divisées en parties - compartiments, de sorte que le traitement des requêtes est parallélisé. Le système est facile à mettre à l'échelle, il suffit d'ajouter un serveur. Nous avons implémenté la réplication maître-maître, bien que la plupart des SGBD y arrivent maintenant. De plus, nous n'avons pas besoin d'ajouter de modules, il n'y a aucun problème d'administration.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre quantité de données, si nous comptons à partir de la RAM, est d'environ 1 To. </font><font style="vertical-align: inherit;">Au stade du démarrage, du débogage et de la correction des erreurs dans le projet, des problèmes sont survenus. </font><font style="vertical-align: inherit;">Presque toutes les tables contiennent 7 à 8 index, donc la base de données Tarantool pour 1 To nous a pris 20 à 40 minutes, ce qui est inacceptable. </font><font style="vertical-align: inherit;">Au démarrage, le système crée des index et si vous les supprimez, le chargement se fera beaucoup plus rapidement. </font><font style="vertical-align: inherit;">Dans cette situation, la fonction Hot-standby nous a aidés.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des plans </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le client et nous, les artistes, aimions Tarantool. Nous avons envisagé d'autres bases, mais finalement nous avons choisi Tarantool. Tout d'abord, nous avions besoin d'une base très rapide. Deuxièmement, il devra beaucoup travailler avec cela, écrire la logique, etc., donc Lua à part entière était un avantage pour nous. Troisièmement, Tarantool écrit immédiatement sur le disque et ne prend pas d'instantanés, ce qui est également bon pour nous, car bien qu'il y ait beaucoup d'appels de clients, nous ne pouvons pas nous permettre d'en perdre un seul. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool a prouvé son utilité en production, et nous y chargerons encore plus de données, en ajoutant une logique métier. Contrairement à d'autres bases de données, il n'a pas besoin d'être constamment réglé et quelque chose a changé. Soit dit en passant, la conversion et le chargement des données dans Tarantool à partir d'un autre système sont automatisés et sont effectués quotidiennement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'avenir, nous prévoyons de passer à Tarantool Enterprise, ce qui nous permettra d'administrer et de configurer facilement plusieurs instances de Tarantool. </font><font style="vertical-align: inherit;">Il y a encore peu de spécialistes dans cette base de données et leur besoin ne cesse de croître. </font><font style="vertical-align: inherit;">Nos qualifications ne sont parfois pas suffisantes. </font><font style="vertical-align: inherit;">Dans de tels cas, le chat interne des développeurs Tarantool aide, dans lequel vous pouvez demander de l'aide. </font><font style="vertical-align: inherit;">Ce n'est dans aucun autre système. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prévoyons également de mettre à niveau vers Tarantool2 et SQL. </font><font style="vertical-align: inherit;">Il existe de nombreux experts SQL sur le marché du travail, donc la transition ne sera pas très difficile.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résultats </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problème principal de ce projet était Lua. </font><font style="vertical-align: inherit;">Peu de développeurs le savent, mais ils l'aiment encore moins. </font><font style="vertical-align: inherit;">Au départ, nous écrivions dans une autre langue, mais en raison du grand nombre de demandes, le système fonctionnait lentement. </font><font style="vertical-align: inherit;">Par conséquent, nous avons copié tout avec Lua pendant une longue période de temps, mais en conséquence, le système fonctionne clairement et rapidement, avec un petit nombre de corrections et de versions. </font><font style="vertical-align: inherit;">Lua est très proche du code machine et est l'un des langages les plus rapides de la famille C. Bien qu'il s'agisse d'un petit langage de script, il possède toutes les bibliothèques nécessaires, et nous avons pu transférer des algorithmes de recherche, vectorisation, distance cosinus, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool est très tolérant aux pannes et fonctionne hors de la boîte. </font><font style="vertical-align: inherit;">Nous avons mené de nombreuses expériences: éteint Tarantool, levé, etc. </font><font style="vertical-align: inherit;">- tout fonctionne bien et les données intermédiaires sont écrites sur le disque, nous ne perdons donc pas de données.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497392/index.html">Comment évoluer d'un étudiant ingénieur logiciel?</a></li>
<li><a href="../fr497394/index.html">Dix ressources avec des cours d'informatique disponibles gratuitement en avril</a></li>
<li><a href="../fr497396/index.html">Collègues: ni ami ni ennemi, mais comment?</a></li>
<li><a href="../fr497398/index.html">Processeurs serveurs AMD EPYC Rome 7x32 - Enregistrer des performances monocœur</a></li>
<li><a href="../fr497402/index.html">Comment créer un langage de programmation Python?</a></li>
<li><a href="../fr497408/index.html">Comment les explorateurs polaires russes ont obtenu des communications cellulaires en Antarctique</a></li>
<li><a href="../fr497412/index.html">Data Scientist: souvenirs de vie en quarantaine et espoir pour l'avenir</a></li>
<li><a href="../fr497414/index.html">Traitement des données réseau à la volée</a></li>
<li><a href="../fr497416/index.html">Assistance tactile en JavaScript</a></li>
<li><a href="../fr497420/index.html">StegoPy - Outil de stéganographie LSB en Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>