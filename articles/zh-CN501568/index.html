<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“¸ ğŸ… ğŸ“ƒ æˆ‘å¦‚ä½•ä½¿ç”¨çº¯PowerShellåˆ›å»ºMinecraftä»˜æ¬¾æ¥å—ç³»ç»Ÿ ğŸ¤“ ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ¿ ğŸ‘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Powershellå°†æ— ç”¨çš„ç”œç”œåœˆæ‹§åˆ°Minecrafté¦™è‰æœåŠ¡å™¨ä¸Šã€‚è¯¥æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼ŒMinecraftåªæ˜¯ä½¿ç”¨æ§åˆ¶å°å‘½ä»¤å®æ–½è‡ªåŠ¨ä»˜æ¬¾çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚æˆ‘ä»¬åªæ˜¯å¬å–ä»˜æ¬¾ç³»ç»Ÿå‘æˆ‘ä»¬å‘é€çš„å†…å®¹ï¼Œç„¶åå°†å…¶æ‰“åŒ…æˆä¸€ä¸ªå›¢é˜Ÿã€‚æœ€é‡è¦çš„æ˜¯-æ²¡æœ‰æ’ä»¶ã€‚
 å¹¶ä¸”æˆ‘ä»¬å°†æ¥å—é€šè¿‡PayPalä»˜æ¬¾ã€‚æœ€é‡è¦...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æˆ‘å¦‚ä½•ä½¿ç”¨çº¯PowerShellåˆ›å»ºMinecraftä»˜æ¬¾æ¥å—ç³»ç»Ÿ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/501568/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pc/hh/se/pchhsenr29snjnzmnfro-xdfjug.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Powershellå°†æ— ç”¨çš„ç”œç”œåœˆæ‹§åˆ°Minecrafté¦™è‰æœåŠ¡å™¨ä¸Šã€‚è¯¥æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼ŒMinecraftåªæ˜¯ä½¿ç”¨æ§åˆ¶å°å‘½ä»¤å®æ–½è‡ªåŠ¨ä»˜æ¬¾çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚æˆ‘ä»¬åªæ˜¯å¬å–ä»˜æ¬¾ç³»ç»Ÿå‘æˆ‘ä»¬å‘é€çš„å†…å®¹ï¼Œç„¶åå°†å…¶æ‰“åŒ…æˆä¸€ä¸ªå›¢é˜Ÿã€‚æœ€é‡è¦çš„æ˜¯-æ²¡æœ‰æ’ä»¶ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶ä¸”æˆ‘ä»¬å°†æ¥å—é€šè¿‡PayPalä»˜æ¬¾ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œä¸ºäº†å¼€å§‹æ¥å—ä»˜æ¬¾ï¼Œæ‚¨ä¸éœ€è¦æ›´æ”¹ä»£ç ï¼ŒPayPalä¼šå‘æˆ‘ä»¬å‘é€æ‚¨æ‰€éœ€çš„ä¸€åˆ‡ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ç½‘ç«™ä¸Šçš„æŒ‰é’®ï¼Œä»¥ä¾¿ç½‘ç«™å¯ä»¥ä½¿ç”¨çº¯HTMLã€‚æˆ‘ä»¬ä»æ”¯ä»˜ç³»ç»Ÿæœ¬èº«çš„å¤æ‚æ€§ä¸­æŠ½è±¡å‡ºæ¥ï¼Œä»…å…³æ³¨ä»£ç ä¸­çš„è¦ç‚¹ã€‚</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨ä»”ç»†é˜…è¯»æ‰€æœ‰æ¨¡å—å¹¶åœ¨å…¶ä¸­æŒ‡å‡ºæˆ–çº æ­£å„¿ç«¥çš„é”™è¯¯ï¼Œä½œè€…å°†éå¸¸é«˜å…´ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¡¹ç›®</font><font style="vertical-align: inherit;">çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">é“¾æ¥</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºIPNçš„å‡ å¥è¯</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPN</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†é€šè¿‡æŒ‰é’®æ¥å—ä»˜æ¬¾ã€‚</font><font style="vertical-align: inherit;">æŒ‰é’®ä¸éœ€è¦æ‚¨çš„ä»»ä½•åç«¯ï¼Œå®ƒä»¬ä½¿ç”¨çº¯HTMLæ ¼å¼ï¼Œå¹¶ä¸”è¿˜å…·æœ‰è‡ªå·±çš„å­—æ®µã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŒ‰é’®è§¦å‘IPN-å³æ—¶ä»˜æ¬¾é€šçŸ¥ï¼Œå…¶ä¸­æ•°æ®è¢«å‘é€åˆ°æˆ‘ä»¬çš„WebListenerã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†åœ¨ä¸‹é¢è€ƒè™‘IPNç»“æ„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œæ‹¥æœ‰PayPalå¸æˆ·çš„ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºè‡ªå·±çš„æŒ‰é’®ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPNæ²¡æœ‰å®Œæ•´çš„PayPal REST APIï¼Œä½†æ˜¯å¯ä»¥åœ¨å…¶ä¸Šå®ç°åŸºæœ¬åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œæˆ‘ä»¬æ­£åœ¨è€ƒè™‘çš„IPNå¹¶ä¸æ˜¯å®Œå…¨æ„ä¹‰ä¸Šçš„REST APIï¼Œä»…ä»…æ˜¯å› ä¸ºPayPalæœ¬èº«ä¸å¸Œæœ›æˆ‘ä»¬å¾—åˆ°ä»»ä½•ä¸œè¥¿ï¼Œé™¤äº†ä»£ç 200ã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æå‡WebListener</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡ºäºå®‰å…¨åŸå› ï¼ŒPayPalä¸ä¼šé€šè¿‡HTTPå‘é€è¯·æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é¢å‘è¯ä¹¦æ‰èƒ½å¼€å§‹ä½¿ç”¨ã€‚&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œè€…ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WinAcme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥å°†è¯ä¹¦é¢å‘ç»™ä»»ä½•åŸŸï¼Œå¹¶ä¸”éœ€è¦å°†è¯ä¹¦æ”¾å…¥æœ¬åœ°è¯ä¹¦å­˜å‚¨ä¸­ã€‚</font><font style="vertical-align: inherit;">é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒWinAcmeä½äºæ˜ åƒä¸­ç£ç›˜çš„æ ¹ç›®å½•ä¸­ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-comment">#     </span>
<span class="hljs-built_in">Get-ChildItem</span> <span class="hljs-literal">-Path</span> Cert:\LocalMachine\My <font></font>
 <font></font>
<span class="hljs-comment">#      443 .</span>
netsh http add sslcert ipport=<span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">443</span> certhash=D106F5676534794B6767D1FB75B58D5E33906710 <span class="hljs-string">"appid={00112233-4455-6677-8899-AABBCCDDEEFF}"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Powershellå¯ä»¥ä½¿ç”¨.netä¸­çš„ç±»ï¼Œè¿™ä½¿å…¶å‡ ä¹ç­‰äº.netã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œä½¿ç”¨HttpListenerç±»æé«˜WebæœåŠ¡å™¨ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-comment">#   .net</span>
<span class="hljs-variable">$http</span> = [<span class="hljs-type">System.Net.HttpListener</span>]::new() <font></font>
 <font></font>
<span class="hljs-comment">#   </span>
<span class="hljs-variable">$http</span>.Prefixes.Add(<span class="hljs-string">"http://donate.to/"</span>)
<span class="hljs-variable">$http</span>.Prefixes.Add(<span class="hljs-string">"https://donate.to/"</span>)<font></font>
 <font></font>
<span class="hljs-comment"># </span>
<span class="hljs-variable">$http</span>.Start()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦éªŒè¯ä¸€åˆ‡æ­£å¸¸ï¼Œè¯·è¿è¡Œnetstatã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xs/k4/lc/xsk4lcebgvakhxtchlq38svsc1y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæˆ‘ä»¬çš„è„šæœ¬å¼€å§‹ä¾¦å¬åˆ—è¡¨ä¸­çš„ç«¯å£443ï¼Œåˆ™è¡¨æ˜æ‚¨æ­£ç¡®å®Œæˆäº†æ‰€æœ‰æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¥å—è¯·æ±‚å¤„ç†ã€‚</font><font style="vertical-align: inherit;">åªæ˜¯ä¸è¦å¿˜è®°é˜²ç«å¢™ã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥å—è¯·æ±‚</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPN Simulatorï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥å‘è‡ªå·±å‘é€ä¸€ä¸ªæµ‹è¯•POSTè¯·æ±‚ï¼Œä»¥æŸ¥çœ‹å®ƒæ˜¯ä»€ä¹ˆã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æ‚¨ä¸èƒ½åœ¨å…¶ä¸­åŒ…å«è‡ªå·±çš„å­—æ®µï¼Œå› æ­¤ä½œè€…å»ºè®®æ‚¨åˆ¶ä½œä¸€ä¸ªæŒ‰é’®å¹¶ç«‹å³ä»æ‚¨è‡ªå·±çš„æ‰‹ä¸­è´­ä¹°ä¸œè¥¿ã€‚</font><font style="vertical-align: inherit;">IPNå†å²è®°å½•å°†é€šè¿‡æ‚¨å°†ä½¿ç”¨çš„æŒ‰é’®æ˜¾ç¤ºä¸€ä¸ªæ­£å¸¸è¯·æ±‚ã€‚</font><font style="vertical-align: inherit;">ä½œè€…åªæ˜¯é€šè¿‡è´­ä¹°ä¸€å¢å¸ƒçš„ç…¤æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†æ¥å—ä½¿ç”¨Whileå¾ªç¯ã€‚</font><font style="vertical-align: inherit;">å½“WebæœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–ä¼ å…¥çš„æ•°æ®æµã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-keyword">while</span> (<span class="hljs-variable">$http</span>.IsListening) {<font></font>
 <font></font>
  <span class="hljs-variable">$context</span> = <span class="hljs-variable">$http</span>.GetContext()<font></font>
 <font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable">$context</span>.Request.HttpMethod <span class="hljs-operator">-eq</span> <span class="hljs-string">'POST'</span> <span class="hljs-operator">-and</span> <span class="hljs-variable">$context</span>.Request.RawUrl <span class="hljs-operator">-eq</span> <span class="hljs-string">'/'</span>) {<font></font>
 <font></font>
    <span class="hljs-comment">#  POST </span>
    <span class="hljs-variable">$Reader</span> = [<span class="hljs-type">System.IO.StreamReader</span>]::new(<span class="hljs-variable">$context</span>.Request.InputStream).ReadToEnd()<font></font>
    <font></font>
    <span class="hljs-comment">#  .</span>
    <span class="hljs-variable">$DecodedContent</span> = [<span class="hljs-type">System.Web.HttpUtility</span>]::UrlDecode(<span class="hljs-variable">$Reader</span>)<font></font>
 <font></font>
    <span class="hljs-comment">#   .</span>
    <span class="hljs-variable">$Payment</span> | <span class="hljs-built_in">Format-Table</span><font></font>
 <font></font>
    <span class="hljs-comment">#  200 OK   .</span>
    <span class="hljs-variable">$context</span>.Response.Headers.Add(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain"</span>)
    <span class="hljs-variable">$context</span>.Response.StatusCode = <span class="hljs-number">200</span>
    <span class="hljs-variable">$ResponseBuffer</span> = [<span class="hljs-type">System.Text.Encoding</span>]::UTF8.GetBytes(<span class="hljs-string">""</span>)
    <span class="hljs-variable">$context</span>.Response.ContentLength64 = <span class="hljs-variable">$ResponseBuffer</span>.Length
    <span class="hljs-variable">$context</span>.Response.OutputStream.Write(<span class="hljs-variable">$ResponseBuffer</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$ResponseBuffer</span>.Length)
    <span class="hljs-variable">$context</span>.Response.Close()<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨å¾—åˆ°è¿™æ ·çš„ç²‰ä¸ï¼Œè¯·ç”³è¯·ï¼š</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-variable">$Payment</span> = <span class="hljs-variable">$DecodedContent</span> <span class="hljs-operator">-split</span> <span class="hljs-string">"&amp;"</span> | <span class="hljs-built_in">ConvertFrom-StringData</span></code></pre><br>
<img src="https://habrastorage.org/webt/dj/sy/l4/djsyl4jvhe5qp9v9hyjb6jvmqzu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹‹åï¼Œæ‚¨æœ€ç»ˆå°†æ”¶åˆ°ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå…¶ä¸­æ‰€æœ‰Valueä¸ºStringã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨ä¸æƒ³æ·±å…¥ç ”ç©¶ä»£ç ï¼Œè€Œåªæƒ³æ¥å—æ¥è‡ªæŸäººAPIçš„è¯·æ±‚ï¼Œåˆ™</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/ws/xp/scwsxp7gvaglfdzqc5swthhd6do.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥åœ¨æ­¤å¤„é€€å‡ºé˜…è¯»</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯å¼€ç®±å³ç”¨ï¼Œå¤åˆ¶å’Œä½¿ç”¨çš„ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-comment"># </span>
<span class="hljs-variable">$http</span> = [<span class="hljs-type">System.Net.HttpListener</span>]::new() <font></font>
 <font></font>
<span class="hljs-comment"># ,   </span>
<span class="hljs-variable">$http</span>.Prefixes.Add(<span class="hljs-string">"http://localhost/"</span>)
<span class="hljs-variable">$http</span>.Prefixes.Add(<span class="hljs-string">"https://localhost/"</span>)<font></font>
 <font></font>
<span class="hljs-variable">$http</span>.Start()<font></font>
 <font></font>
<span class="hljs-keyword">while</span> (<span class="hljs-variable">$http</span>.IsListening) {<font></font>
 <font></font>
  <span class="hljs-variable">$context</span> = <span class="hljs-variable">$http</span>.GetContext()<font></font>
 <font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable">$context</span>.Request.HttpMethod <span class="hljs-operator">-eq</span> <span class="hljs-string">'POST'</span> <span class="hljs-operator">-and</span> <span class="hljs-variable">$context</span>.Request.RawUrl <span class="hljs-operator">-eq</span> <span class="hljs-string">'/'</span>) {<font></font>
 <font></font>
    <span class="hljs-comment">#  POST </span>
    <span class="hljs-variable">$Reader</span> = [<span class="hljs-type">System.IO.StreamReader</span>]::new(<span class="hljs-variable">$context</span>.Request.InputStream).ReadToEnd()<font></font>
    <font></font>
    <span class="hljs-comment">#  .</span>
    <span class="hljs-variable">$DecodedContent</span> = [<span class="hljs-type">System.Web.HttpUtility</span>]::UrlDecode(<span class="hljs-variable">$Reader</span>)<font></font>
          <font></font>
    <span class="hljs-comment">#  IPN   </span>
    <span class="hljs-variable">$Payment</span> = <span class="hljs-variable">$DecodedContent</span> <span class="hljs-operator">-split</span> <span class="hljs-string">"&amp;"</span> | <span class="hljs-built_in">ConvertFrom-StringData</span><font></font>
 <font></font>
    <span class="hljs-comment">#   .</span>
    <span class="hljs-variable">$Payment</span> | <span class="hljs-built_in">Format-Table</span><font></font>
 <font></font>
    <span class="hljs-comment">#  200 OK   .</span>
    <span class="hljs-variable">$context</span>.Response.Headers.Add(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain"</span>)
    <span class="hljs-variable">$context</span>.Response.StatusCode = <span class="hljs-number">200</span>
    <span class="hljs-variable">$ResponseBuffer</span> = [<span class="hljs-type">System.Text.Encoding</span>]::UTF8.GetBytes(<span class="hljs-string">""</span>)
    <span class="hljs-variable">$context</span>.Response.ContentLength64 = <span class="hljs-variable">$ResponseBuffer</span>.Length
    <span class="hljs-variable">$context</span>.Response.OutputStream.Write(<span class="hljs-variable">$ResponseBuffer</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$ResponseBuffer</span>.Length)
    <span class="hljs-variable">$context</span>.Response.Close()<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘çš„ä¸–ç•Œçš„ç»†å¾®å·®åˆ«</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæˆ‘ä»¬å¼„æ¸…æ¥šäº†å¦‚ä½•æ¥æ”¶æœ‰å…³ä»˜æ¬¾çš„è­¦æŠ¥ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°†å…¶è®°å…¥è´·æ–¹ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œä¹Ÿä¸æ˜¯é‚£ä¹ˆç®€å•ã€‚é—®é¢˜åœ¨äºæ¸¸æˆä¸ä¼šæä¾›ç‰©å“æˆ–æ›´æ”¹ä¸åœ¨æœåŠ¡å™¨ä¸Šçš„ç©å®¶çš„çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦ç­‰åˆ°ä¸€ä¸ªäººè¿›å…¥æœåŠ¡å™¨åå†ç»™ä»–ä»˜æ¬¾ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œè¯·æ³¨æ„å¸çƒŸè€…çš„ä¸€èˆ¬æ¦‚å¿µï¼Œä»¥è®°å¸ä»˜æ¬¾ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/tl/9d/sjtl9dgiovppbc6kreduniwz8o0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡ä¸Šé¢çš„ä¾¦å¬å™¨æ¥æ”¶ä»˜æ¬¾ï¼›ä»…å‘å…¶ä¸­æ·»åŠ äº†ä¸€è¡Œä»¥å°†è¯¥å¯¹è±¡å†™å…¥æ–‡ä»¶ã€‚ Complete-Paymentï¼ˆå¤„ç†å™¨ï¼‰æŸ¥çœ‹æ˜µç§°ï¼Œå¹¶å°†å…¶ä¸æ–‡ä»¶ååŒ¹é…ã€‚å¦‚æœæ‰¾åˆ°æ–‡ä»¶ï¼Œåˆ™ä¸ºrconç¼–è¯‘å‘½ä»¤å¹¶æ‰§è¡Œå®ƒã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ·å§‹çŸ¿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œè€…åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æ‰€å†™çš„å†…å®¹ç•¥æœ‰ä¿®æ”¹ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œä»–è†å¬ç»“è®ºï¼ŒæŸ¥çœ‹ç©å®¶çš„æ˜µç§°ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ”¯ä»˜å¤„ç†å™¨ã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿›è¡ŒçœŸå®çš„å›è°ƒ</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ä½¿ç”¨æ’ä»¶ï¼Œæˆ‘ä»¬å°†è¿›è¡ŒçœŸæ­£çš„å›è°ƒã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œå¯¹Start-Minecraftè¿›è¡Œäº†ä¿®æ”¹ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œä»–ä¸ä»…çŸ¥é“å¦‚ä½•å°†StdOutæ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œä¸”è¿˜æŒ‰ç…§å¸¸è§„æ—¶é—´è¡¨éå†æ¯ä¸€è¡Œã€‚</font><font style="vertical-align: inherit;">å¹¸è¿çš„æ˜¯ï¼Œå½“ç©å®¶è¿›å…¥æœåŠ¡å™¨æ—¶ï¼ŒMinecraftä¼šç•™ä¸‹éå¸¸å…·ä½“çš„æ¶ˆæ¯ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs">[<span class="hljs-number">04</span>:<span class="hljs-number">20</span>:<span class="hljs-number">00</span> <span class="hljs-type">INFO</span>]: UUID of player XXPROHUNTERXX is <span class="hljs-number">23</span>e93d2e<span class="hljs-literal">-r34d</span><span class="hljs-literal">-7h15</span> <span class="hljs-literal">-5h17</span><span class="hljs-literal">-a9192cd70b48</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»æ­¤è¡Œä¸­é€‰æ‹©æ˜µç§°éå¸¸å®¹æ˜“ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯æˆ‘ä»¬ä»Stdoutå­—ç¬¦ä¸²è·å–æ•°æ®æ‰€éœ€çš„æ‰€æœ‰ä»£ç ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-variable">$Regex</span> = [<span class="hljs-type">Regex</span>]::new(<span class="hljs-string">"of player ([^ ]+)"</span>)<font></font>
 <font></font>
powershell.exe <span class="hljs-operator">-file</span> <span class="hljs-string">".\Start-MinecraftHandler.ps1"</span> <span class="hljs-literal">-type</span> <span class="hljs-variable">$type</span> <span class="hljs-literal">-MinecraftPath</span> <span class="hljs-variable">$MinecraftPath</span> | <span class="hljs-built_in">Tee-Object</span> <span class="hljs-variable">$LogFile</span> <span class="hljs-literal">-Append</span> | <span class="hljs-built_in">ForEach-Object</span> {<font></font>
 <font></font>
     <span class="hljs-built_in">Write-host</span> <span class="hljs-variable">$_</span><font></font>
        <font></font>
    <span class="hljs-variable">$Player</span> = <span class="hljs-variable">$Regex</span>.Matches(<span class="hljs-variable">$_</span>).value <span class="hljs-operator">-replace</span> <span class="hljs-string">"of player "</span><font></font>
        <font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$true</span> <span class="hljs-operator">-eq</span> <span class="hljs-variable">$Regex</span>.Matches(<span class="hljs-variable">$_</span>).Success) {
        <span class="hljs-comment">#   </span><font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°†æ–°è¡Œè¾“å…¥åˆ°$ _ç®¡é“ä¸­ï¼Œæˆ‘ä»¬å°†å…¶å†™åœ¨æ§åˆ¶å°çª—å£ä¸­å¹¶å®šæœŸè¿›è¡Œæ£€æŸ¥ã€‚</font><font style="vertical-align: inherit;">å¸¸è§„æœ¬èº«ä¼šåœ¨å·¥ä½œæ—¶é€šçŸ¥æˆ‘ä»¬ï¼Œè¿™éå¸¸æ–¹ä¾¿ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»ä½•ä»£ç ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œä½¿ç”¨ç›¸åŒçš„RCONï¼Œæˆ‘ä»¬å¯ä»¥åœ¨PMä¸­å‘ç©å®¶æ‰“æ‹›å‘¼ï¼Œåœ¨ä¸å’Œè°ä¸­ä½¿ç”¨Boté€šçŸ¥æœ‰äººå·²ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œç¦æ­¢å°†æ­»ï¼Œç­‰ç­‰ã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»˜æ¬¾</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è‡ªä»æˆ‘ä»¬å¼€å§‹å¤„ç†ä»˜æ¬¾ä»¥æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›è‡³å°‘æ‹¥æœ‰å…³äºæ“ä½œå’Œæ‰§è¡Œçš„æ“ä½œå†å²çš„ç›¸å½“å®Œæ•´çš„æ•°æ®ï¼Œå› ä¸ºå¯ä»¥è¿™ä¹ˆè¯´ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨è°ˆè®ºå¸¦æœ‰ä¸¤ä¸ªé›¶çš„æ•°å­—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œè€…æƒ³è®©ä¸€åˆ‡éƒ½å˜å¾—éå¸¸ç®€å•ï¼Œè€Œä¸æ˜¯æ¨¡æ‹ŸåŸºç¡€ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹NoSQLæ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„ç±»ï¼Œè¯¥ç±»ä¼šå°†æ‰€æœ‰æ¥å—çš„ä»˜æ¬¾å¯¼å…¥Jsonæ–‡ä»¶ä¸­çš„/ payment /æ–‡ä»¶å¤¹ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs">    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Payment</span></span> {
        <span class="hljs-comment">#  .</span>
        [<span class="hljs-built_in">datetime</span>]<span class="hljs-variable">$Date</span> = [<span class="hljs-built_in">datetime</span>]::ParseExact(<span class="hljs-variable">$i</span>.payment_date, <span class="hljs-string">"HH:mm:ss MMM dd, yyyy PDT"</span>, [<span class="hljs-type">System.Globalization.CultureInfo</span>]::InvariantCulture)
        <span class="hljs-comment"># </span>
        [<span class="hljs-built_in">string</span>]<span class="hljs-variable">$Item</span> = <span class="hljs-variable">$i</span>.item_name
        <span class="hljs-comment"># </span>
        [<span class="hljs-type">UInt16</span>]<span class="hljs-variable">$Quantity</span> = <span class="hljs-variable">$i</span>.Quantity
        <span class="hljs-comment">#    </span>
        [<span class="hljs-type">UInt16</span>]<span class="hljs-variable">$AmountPaid</span> = <span class="hljs-variable">$AmountPaid</span> <span class="hljs-operator">-as</span> [<span class="hljs-type">UInt16</span>]
        <span class="hljs-comment">#     </span>
        [<span class="hljs-built_in">string</span>]<span class="hljs-variable">$Currency</span> = <span class="hljs-variable">$i</span>.mc_currency
        <span class="hljs-comment"># ,   </span>
        [<span class="hljs-built_in">string</span>]<span class="hljs-variable">$Player</span> = <span class="hljs-variable">$i</span>.option_selection1<font></font>
    <font></font>
        [<span class="hljs-built_in">bool</span>]<span class="hljs-variable">$Completed</span> = <span class="hljs-variable">$false</span>
        [<span class="hljs-type">UInt16</span>]<span class="hljs-variable">$ItemId</span> = <span class="hljs-variable">$i</span>.item_number<font></font>
    }<font></font>
/source&gt;<font></font>
<font></font>
    , , ,          .<font></font>
<font></font>
 ,    &lt;b&gt;option_selection1&lt;/b&gt; â€“   .      input,   ,     .<font></font>
     &lt;b&gt;option_selection1&lt;/b&gt;,&lt;b&gt;option_selection2&lt;/b&gt;   .<font></font>
<font></font>
      ,     ,      .<font></font>
<font></font>
&lt;source lang=<span class="hljs-string">"powershell"</span>&gt; <span class="hljs-comment">#     Payment,        .</span>
    <span class="hljs-variable">$Payment</span> = [<span class="hljs-type">Payment</span>]::new()
    <span class="hljs-variable">$Payment</span> | <span class="hljs-built_in">Format-Table</span>
    <span class="hljs-comment">#  ,   ----</span>
    <span class="hljs-variable">$FileName</span> = <span class="hljs-variable">$Payment</span>.Player + <span class="hljs-string">"-"</span> + <span class="hljs-variable">$Payment</span>.date.Hour + <span class="hljs-string">"-"</span> + <span class="hljs-variable">$Payment</span>.date.Minute + <span class="hljs-string">"-"</span> + <span class="hljs-variable">$Payment</span>.date.Day + <span class="hljs-string">"-"</span> + <span class="hljs-variable">$Payment</span>.date.Month + <span class="hljs-string">"-"</span> + <span class="hljs-variable">$Payment</span>.date.Year + <span class="hljs-string">".json"</span><font></font>
 <font></font>
<span class="hljs-comment"># ,      </span>
    <span class="hljs-variable">$JsonPath</span> = <span class="hljs-built_in">Join-Path</span> <span class="hljs-variable">$MinecraftPath</span> \payments\Pending <span class="hljs-variable">$FileName</span><font></font>
    <font></font>
    <span class="hljs-comment">#   </span>
    <span class="hljs-variable">$Payment</span> | <span class="hljs-built_in">ConvertTo-Json</span> | <span class="hljs-built_in">Out-File</span> <span class="hljs-variable">$JsonPath</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å°±æ˜¯æˆ‘ä»¬çš„å¬ä¼—æ‰€éœ€è¦çš„ã€‚</font><font style="vertical-align: inherit;">ä»PayPalæ¥æ”¶æ•°æ®å¹¶å†™å…¥æ–‡ä»¶ã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬è¿›è¡Œä»˜æ¬¾å¤„ç†</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥å¤„ç†ç¨‹åºå°†ç§°ä¸ºè¾ƒæ—©ç¼–å†™çš„å¸¸è§„å¤„ç†ç¨‹åºã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†ç©å®¶çš„æ˜µç§°è½¬ç§»åˆ°æ¨¡å—ä¸Šï¼Œå°±æ˜¯è¿™æ ·ã€‚</font><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°è„šæœ¬ï¼Œè¯¥è„šæœ¬æœç´¢æ–‡ä»¶ï¼Œå¦‚æœæœ‰æ–‡ä»¶ï¼Œå®ƒå°†ä¸ºæ’­æ”¾å™¨æä¾›å†™å…¥æ–‡ä»¶ä¸­çš„é¡¹ç›®ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs">powershell.exe <span class="hljs-operator">-file</span> <span class="hljs-string">"C:\mc.fern\Start-MinecraftHandler.ps1"</span> <span class="hljs-literal">-type</span> <span class="hljs-variable">$type</span> <span class="hljs-literal">-MinecraftPath</span> <span class="hljs-variable">$MinecraftPath</span> | <span class="hljs-built_in">Tee-Object</span> <span class="hljs-variable">$LogFile</span> <span class="hljs-literal">-Append</span> | <span class="hljs-built_in">ForEach-Object</span> {<font></font>
       <font></font>
        <span class="hljs-comment">#     ,      .</span>
        <span class="hljs-built_in">Write-host</span> <span class="hljs-variable">$_</span>   <font></font>
 <font></font>
        <span class="hljs-comment"># Regex     </span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$true</span> <span class="hljs-operator">-eq</span> <span class="hljs-variable">$Regex</span>.Matches(<span class="hljs-variable">$_</span>).Success) {<font></font>
            <font></font>
            <span class="hljs-comment">#       </span>
            <span class="hljs-variable">$Player</span> = <span class="hljs-variable">$Regex</span>.Matches(<span class="hljs-variable">$_</span>).value <span class="hljs-operator">-replace</span> <span class="hljs-string">"of player "</span><font></font>
            <font></font>
            <span class="hljs-comment">#  ,       </span>
            <span class="hljs-built_in">Complete-Payment</span> <span class="hljs-literal">-Player</span> <span class="hljs-variable">$Player</span><font></font>
        }<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è§¦å‘å¸¸è§„æ€§åï¼Œå°†å¯åŠ¨ä¸€ä¸ªæ¨¡å—æ¥å®Œæˆä»˜æ¬¾ï¼Œå³ï¼Œä¸ºç©å®¶æä¾›ä¸€ä¸ªç‰©å“ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œè¯¥è„šæœ¬åœ¨/ Payments / Pending /æ–‡ä»¶å¤¹ä¸­ï¼Œæœç´¢åŒ…å«è¿›å…¥æ¸¸æˆçš„ç©å®¶æ˜µç§°å¹¶è¯»å–å…¶å†…å®¹çš„æ–‡ä»¶ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæ‚¨éœ€è¦æ”¶é›†æœåŠ¡å™¨çš„å‘½ä»¤å¹¶å°†å…¶å‘é€åˆ°é‚£é‡Œã€‚</font><font style="vertical-align: inherit;">å®ƒå°†ä»æ–‡ä»¶ä¸­æ”¶é›†ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çŸ¥é“è®°å½•äº†ç©å®¶çš„æ˜µç§°ï¼Œç‰©å“çš„åç§°åŠå…¶IDï¼Œè¿˜è®°å½•äº†å¤šå°‘ä»¶ï¼Œå‰©ä¸‹çš„åªæ˜¯å‘æ¸¸æˆæœåŠ¡å™¨å‘é€å‘½ä»¤ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mcrcon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-comment">#    </span>
    <span class="hljs-variable">$JsonPath</span> = <span class="hljs-built_in">Join-Path</span> <span class="hljs-variable">$MinecraftPath</span>\payments\Pending <span class="hljs-literal">-ChildPath</span> <span class="hljs-variable">$Player</span>*
    <span class="hljs-variable">$i</span> = <span class="hljs-variable">$JsonPath</span> | <span class="hljs-built_in">Get-Item</span> | <span class="hljs-built_in">Where-Object</span> { !<span class="hljs-variable">$_</span>.PSIsContainer } | <span class="hljs-built_in">Get-Content</span> | <span class="hljs-built_in">ConvertFrom-Json</span> <span class="hljs-literal">-ErrorVariable</span> Errored<font></font>
 <font></font>
    <span class="hljs-comment">#      </span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$null</span> <span class="hljs-operator">-ne</span> <span class="hljs-variable">$i</span>) {<font></font>
 <font></font>
        <span class="hljs-comment">#  </span>
        <span class="hljs-variable">$Command</span> = <span class="hljs-string">'"'</span> + <span class="hljs-string">"give "</span> + <span class="hljs-variable">$i</span>.Player + <span class="hljs-string">" "</span> + <span class="hljs-variable">$i</span>.Item + <span class="hljs-string">" "</span> + <span class="hljs-variable">$i</span>.Quantity + <span class="hljs-string">'"'</span>
        <span class="hljs-built_in">Write-host</span> <span class="hljs-variable">$Command</span> <span class="hljs-literal">-ForegroundColor</span> Green<font></font>
    <font></font>
        <span class="hljs-comment">#   </span>
        <span class="hljs-built_in">Start-Process</span> <span class="hljs-literal">-FilePath</span> mcrcon.exe <span class="hljs-literal">-ArgumentList</span> <span class="hljs-string">"-H localhost -p 123 -w 5 <span class="hljs-variable">$Command</span>"</span><font></font>
    <font></font>
        <span class="hljs-comment"># ,      </span>
        <span class="hljs-variable">$JsonPath</span> = <span class="hljs-built_in">Join-Path</span> <span class="hljs-variable">$MinecraftPath</span>\payments\Pending <span class="hljs-literal">-ChildPath</span> <span class="hljs-variable">$FileName</span><font></font>
        <font></font>
        <span class="hljs-comment">#   </span>
        <span class="hljs-variable">$i</span> | <span class="hljs-built_in">ConvertTo-Json</span> | <span class="hljs-built_in">Out-File</span> <span class="hljs-variable">$JsonPath</span><font></font>
    <font></font>
        <span class="hljs-comment">#     </span>
        <span class="hljs-built_in">Move-Item</span>  <span class="hljs-literal">-Path</span> <span class="hljs-variable">$JsonPath</span> <span class="hljs-literal">-Destination</span> <span class="hljs-variable">$MinecraftPath</span>\payments\Completed<font></font>
    }<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åœ¨ä¸€ä¸ªæ–¹ä¾¿çš„æ¨¡å—ä¸­å®Œæˆæ‰€æœ‰ä»»åŠ¡</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Javaè¿›ç¨‹å’ŒWebListenerè¿›ç¨‹éœ€è¦ä¸åŒçš„çº¿ç¨‹ï¼Œä½†æ˜¯ä½œè€…å¯¹åˆ†åˆ«è¿è¡ŒWebListenerå’Œåˆ†åˆ«è¿è¡ŒæœåŠ¡å™¨çš„éœ€æ±‚ä¸æ»¡æ„ã€‚</font><font style="vertical-align: inherit;">ä½œè€…å¸Œæœ›ä¸€ä¸ªå›¢é˜Ÿä¸€æ¬¡å®Œæˆæ‰€æœ‰ä»»åŠ¡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä½¿ç”¨Powershell 7ï¼Œæˆ‘ä»¬å°†åŒæ—¶å¯åŠ¨è¯¥ç¨‹åºã€‚</font><font style="vertical-align: inherit;">å®ƒå°†å¸®åŠ©æˆ‘ä»¬ï¼š</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">ForEach-Object</span> <span class="hljs-literal">-Parallel</span> {}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥cmdletä¸inputObjectä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶è¾“å…¥ä¸€ä¸ªç®€å•çš„æ•°ç»„ï¼Œå¹¶ä½¿ç”¨å¼€å…³å…±äº«æµã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span> | <span class="hljs-built_in">ForEach-Object</span> <span class="hljs-literal">-Parallel</span> {<font></font>
 <font></font>
    <span class="hljs-built_in">Import-Module</span> <span class="hljs-string">".\Start-Minecraft.ps1"</span><font></font>
 <font></font>
    <span class="hljs-built_in">Import-Module</span> <span class="hljs-string">".\Start-WebListener.ps1"</span><font></font>
 <font></font>
    <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$_</span>) {
        <span class="hljs-string">"A"</span> {
            <span class="hljs-built_in">Start-WebListener</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">"C:\mc\"</span><font></font>
        }<font></font>
        <span class="hljs-string">"B"</span> {
            <span class="hljs-built_in">Start-Minecraft</span> <span class="hljs-literal">-Type</span> Vanilla <span class="hljs-literal">-LogFile</span> <span class="hljs-string">".\stdout.txt"</span> <span class="hljs-literal">-MinecraftPath</span> <span class="hljs-string">"C:\mc\"</span><font></font>
        }<font></font>
        <font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä»¥æ‹æ–çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªç»ˆç«¯å¯åŠ¨äº†ä¸¤ä¸ªä¸åŒçš„è¿‡ç¨‹ï¼Œç”šè‡³æ²¡æœ‰ä¸¢å¤±ä»»ä½•è¾“å…¥ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯è¿˜æœ‰å¦ä¸€ä¸ªé—®é¢˜ã€‚</font><font style="vertical-align: inherit;">WebListenerä¼šåœ¨å¸¸è§„æœåŠ¡å™¨å…³é—­åé”å®šæ§åˆ¶å°ï¼Œå¹¶ä¸”ä¸å¸Œæœ›ç§»è‡³ä»»ä½•ä½ç½®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ä¸æ¯æ¬¡éƒ½é‡æ–°å¯åŠ¨ç»ˆç«¯ï¼Œå‘Start-MinecraftHandler.ps1å’ŒStart-WebListener.ps1æ·»åŠ äº†ä¸€ä¸ªéšæœºå¯†é’¥ï¼Œè¿™å°†é€šè¿‡WebListenerä¸Šçš„POSTåœæ­¢æœåŠ¡å™¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Start-MinecraftHandler.ps1åœ¨è®°å½•æˆåŠŸå®Œæˆæ—¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Method</span> Post <span class="hljs-literal">-Uri</span> localhost <span class="hljs-literal">-Body</span> <span class="hljs-variable">$StopToken</span> | <span class="hljs-built_in">Out-Null</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
$ StopTokenåŒ…å«ä¸€ä¸ªéšæœºæ•°å­—å€¼ï¼Œå¯åŠ¨è„šæœ¬ä¼šå°†å…¶éšæœºä¼ é€’ç»™ä¾¦å¬å™¨å’Œå¤„ç†ç¨‹åºã€‚</font><font style="vertical-align: inherit;">ä¾¦å¬å™¨æŸ¥çœ‹å®ƒåœ¨è¯·æ±‚ä¸­æ”¶åˆ°çš„å†…å®¹ï¼Œå¦‚æœè¯·æ±‚æ­£æ–‡ä¸$ StopTokenç›¸åŒ¹é…ï¼Œåˆ™å°†å…¶å…³é—­ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-keyword">if</span> (<span class="hljs-variable">$DecodedContent</span> <span class="hljs-operator">-eq</span> <span class="hljs-variable">$StopToken</span>) {
        <span class="hljs-built_in">Write-Host</span> <span class="hljs-string">"Stopping WebListener"</span>
        <span class="hljs-variable">$context</span>.Response.Headers.Add(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain"</span>)
        <span class="hljs-variable">$context</span>.Response.StatusCode = <span class="hljs-number">200</span>
        <span class="hljs-variable">$ResponseBuffer</span> = [<span class="hljs-type">System.Text.Encoding</span>]::UTF8.GetBytes(<span class="hljs-string">""</span>)
        <span class="hljs-variable">$context</span>.Response.ContentLength64 = <span class="hljs-variable">$ResponseBuffer</span>.Length
        <span class="hljs-variable">$context</span>.Response.OutputStream.Write(<span class="hljs-variable">$ResponseBuffer</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$ResponseBuffer</span>.Length)
        <span class="hljs-variable">$context</span>.Response.Close()
        <span class="hljs-variable">$http</span>.Close()
        <span class="hljs-keyword">break</span><font></font>
      }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¶³å¤Ÿå®‰å…¨ï¼Œåªæœ‰RAMçŸ¥é“ä»¤ç‰Œï¼Œæ²¡æœ‰å…¶ä»–äººçŸ¥é“ã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰æ¨¡å—å‡ä»PowerShell 7ä¸‹å¯åŠ¨ï¼Œå¹¶ä¸”PowerShell 7çš„æ¨¡å—è·¯å¾„ä¸Windows Powershellä¸­çš„è·¯å¾„ä¸åŒã€‚</font><font style="vertical-align: inherit;">ä¸€åˆ‡éƒ½å †æ”¾åœ¨è¿™é‡Œã€‚</font><font style="vertical-align: inherit;">è‡ªå·±ç¼–å†™æ—¶è¯·è®°ä½ã€‚</font></font><br>
<br>
<pre><code class="powershell hljs">C:\Program Files\PowerShell\<span class="hljs-number">7</span>\Modules</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªé…ç½®æ–‡ä»¶</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ä½¿æ‰€æœ‰è¿™äº›è€»è¾±éƒ½å¯ä»¥ä½¿ç”¨è€Œä¸ä¼šæ„Ÿåˆ°å¤´ç–¼ï¼Œæ‚¨éœ€è¦åˆ¶ä½œä¸€ä¸ªæ­£å¸¸çš„é…ç½®æ–‡ä»¶ã€‚</font><font style="vertical-align: inherit;">è¯¥æ–‡ä»¶å°†åŒ…å«å˜é‡ï¼Œä»…æ­¤è€Œå·²ã€‚</font><font style="vertical-align: inherit;">è¯¥é…ç½®ä½¿ç”¨æ ‡å‡†ï¼š</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">Import-Module</span> <span class="hljs-variable">$MinecraftPath</span>\config.ps1 <span class="hljs-literal">-Force</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬éœ€è¦æŒ‡å‡ºæœ€é‡è¦çš„äº‹æƒ…ã€‚</font><font style="vertical-align: inherit;">è¢«çªƒå¬çš„åŸŸæ˜¯å¸¸è§„åŸŸï¼Œç”¨äºå¯»æ‰¾ç©å®¶çš„æ˜µç§°ï¼Œå› ä¸ºè¾“å‡ºçš„ç‰ˆæœ¬å¯èƒ½ä¸åŒï¼Œè€Œå¯†ç åˆ™æ¥è‡ªrconã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-comment">#,    </span>
<span class="hljs-variable">$DomainName</span> = <span class="hljs-string">"localhost"</span><font></font>
 <font></font>
<span class="hljs-comment"># ,      </span>
<span class="hljs-comment"># ,  </span>
<span class="hljs-variable">$RegExp</span> = <span class="hljs-string">"of player ([^ ]+)"</span>
<span class="hljs-comment">#    ,   ,  .</span>
<span class="hljs-variable">$RegExpCut</span> = <span class="hljs-string">"of player "</span><font></font>
 <font></font>
<span class="hljs-comment">#  rcon,     server.properties</span>
<span class="hljs-variable">$rconPassword</span> = <span class="hljs-string">"123"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¥½å°†é…ç½®æ”¾åœ¨æœåŠ¡å™¨æ–‡ä»¶å¤¹ä¸­ï¼Œå› ä¸ºè„šæœ¬æ­£åœ¨root-MinecraftPathä¸­å¯»æ‰¾å®ƒã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•ä½¿ç”¨æ‰€æœ‰è¿™äº›ï¼Ÿ</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œè¿™äº›è„šæœ¬å·²å®‰è£…å¹¶å¯ä»¥åœ¨Ruvds </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸‚åœºä¸­ä½¿ç”¨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¿˜æ²¡æœ‰å®¢æˆ·ç«¯æˆ–å°šæœªå°è¯•æ˜ åƒï¼Œåˆ™è¿™é‡Œæ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­˜å‚¨åº“ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰æ–‡ä»¶çš„é“¾æ¥</font><font style="vertical-align: inherit;">ï¼Œè¯·éšæ—¶æäº¤ã€‚&nbsp;</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å®‰è£…PowerShell 7</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½å¹¶è§£å‹ç¼©æ¨¡å—æ¡£æ¡ˆ</font></font><br>
</li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæ‰€æœ‰å¿…è¦çš„æ¨¡å—å’Œå‘½ä»¤å·²ç»å‡ºç°ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬åœ¨åšä»€ä¹ˆï¼Ÿ</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ·å§‹çŸ¿</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€‰é¡¹ï¼š</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-é”®å…¥</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Forgeæˆ–Vanillaã€‚</font><font style="vertical-align: inherit;">å®ƒå¯ä»¥ä»Server.Jaræˆ–Forgeä¸­å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶é€‰æ‹©æ–‡ä»¶å¤¹ä¸­çš„æœ€æ–°ç‰ˆæœ¬ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-MinecraftPath</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æŒ‡å‘å°†ä»ä¸­å¯åŠ¨æœåŠ¡å™¨çš„æ–‡ä»¶å¤¹ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-LogFile</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ”¶é›†æ—¥å¿—çš„å¦ä¸€ç§æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">è¡¨ç¤ºå°†å†™å…¥æ§åˆ¶å°ä¸­å‡ºç°çš„æ‰€æœ‰å†…å®¹çš„æ–‡ä»¶ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-StartPaymentListener</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸æœåŠ¡å™¨ä¸€èµ·å¯åŠ¨å¹¶æ¥å—ä»˜æ¬¾ã€‚</font><font style="vertical-align: inherit;">ä»˜æ¬¾æ¥å—æœ¬èº«å¯ä»¥ä½œä¸ºå•ç‹¬çš„æ¨¡å—ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æ›¿æ¢Start-Weblistener cmdlet</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯åŠ¨ç½‘ç«™ç›‘å¬å™¨</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯åŠ¨ä»˜æ¬¾æ¥å—æ¨¡å—ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-MinecraftPath</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æŒ‡å‘å¸¦æœ‰é…ç½®æ–‡ä»¶çš„æ–‡ä»¶å¤¹ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-StopToken</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æŒ‡å®š</font><b><font style="vertical-align: inherit;">-Body</font></b><font style="vertical-align: inherit;"> HTTP POSTè¯·æ±‚ä»¥åœæ­¢WebListener'aã€‚</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®ºï¼š</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¥½å§ï¼Œå¥‡è¿¹ç¡®å®å‘ç”Ÿäº†ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN501558/index.html">è®¡ç®—æœºå–è¯ä¹¦æ¶ï¼šæœ‰å…³æ•°å­—å–è¯ï¼Œäº‹ä»¶å“åº”å’Œæ¶æ„è½¯ä»¶åˆ†æçš„11æœ¬ä¹¦</a></li>
<li><a href="../zh-CN501560/index.html">â€œæˆ‘æ¯”åœ¨æ—·é‡ä½å£°ç»†è¯­â€æˆ–Ninjutsu-OSæ˜¯ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN501562/index.html">EMèšç±»ç®—æ³•</a></li>
<li><a href="../zh-CN501564/index.html">2020å¹´æµ‹è¯•è¶‹åŠ¿</a></li>
<li><a href="../zh-CN501566/index.html">èµ„é‡‘æˆæœ¬ï¼Œåˆ©æ¯ç±»å‹ï¼ŒæŠ˜æ‰£å’Œè¿œæœŸæ±‡ç‡ã€‚æå®¢æ•™è‚²è®¡åˆ’ï¼Œç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN501570/index.html">é”¯Meduza Webé—®å·ï¼šåˆå­¦è€…åˆ†æ­¥æŒ‡å—</a></li>
<li><a href="../zh-CN501572/index.html">æˆ˜äº‰68000ï¼Œç¬¬2éƒ¨åˆ†ï¼šæ°å…‹å½’æ¥</a></li>
<li><a href="../zh-CN501574/index.html">è¯„åˆ†ã€‚è®¡ç®—å¹¶æ»¡è¶³</a></li>
<li><a href="../zh-CN501576/index.html">å‡†å¤‡åŠ æ²¹</a></li>
<li><a href="../zh-CN501578/index.html">ä¿®è¾ä½œä¸ºä¸€ç§å®‰å…¨å·¥å…·ã€‚å£è¯­æ¼”è®²å’Œå¸å¼•æŠ€å·§</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>