<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ¤²ğŸ¼ ğŸ¤¸ "Comme la prunelle d'un Å“il ..." ou on fait un systÃ¨me de sÃ©curitÃ© simple basÃ© sur un microcontrÃ´leur (Canny ou Arduino) et Raspberry PI ğŸŒªï¸ ğŸŒŒ ğŸ‘¨ğŸ¿â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lors de la prÃ©paration de l'article sur la reconnaissance des microcontrÃ´leurs utilisant TensorFlow et OpenCV, Craftduino, Canny 3 tiny et Raspberry P...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"Comme la prunelle d'un Å“il ..." ou on fait un systÃ¨me de sÃ©curitÃ© simple basÃ© sur un microcontrÃ´leur (Canny ou Arduino) et Raspberry PI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497324/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de la prÃ©paration de l'article sur la reconnaissance des microcontrÃ´leurs utilisant TensorFlow et OpenCV, Craftduino, Canny 3 tiny et Raspberry PI ont attirÃ© mon attention en mÃªme temps, aprÃ¨s quoi j'ai dÃ©cidÃ© que ce serait gÃ©nial de les combiner Ã  nouveau dans un seul article. J'ai longtemps rÃ©flÃ©chi Ã  quoi Ã©crire, puis j'ai honte d'admettre, je me suis souvenu que j'Ã©tais un oncle en bonne santÃ©, et je n'avais encore rien connectÃ© via UART. Â«Tout doit Ãªtre essayÃ© dans la vieÂ», ai-je pensÃ©. Mais Ã©crire uniquement sur la connexion Ã  UART est ennuyeux, donc toutes sortes de Â«jouetsÂ» ont Ã©tÃ© immÃ©diatement commandÃ©s, parmi lesquels le tout nouveau Arduino et quelques capteurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, aujourd'hui, nous allons crÃ©er un systÃ¨me de sÃ©curitÃ© pour mon stylo prÃ©fÃ©rÃ©. ÃŠtes-vous surpris pourquoi un stylo? Le secret est simple, je suis trÃ¨s inexpÃ©rimentÃ© dans toutes sortes de sujets Ã©lectroniques, et donc, quand j'ai commandÃ© le capteur de pression, j'ai pensÃ© qu'il fonctionnerait sur toute la zone, mais il s'est avÃ©rÃ© qu'il ne fonctionne que pour une zone de contact spÃ©cifique. Curieusement, mais dans toute la maison, il n'y avait rien de suffisamment lourd, stable et de taille convenable, Ã  l'exception de ce stylo. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eh bien, sauf pour mon doigt, mais je n'Ã©tais pas prÃªt Ã  l'expÃ©rimenter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'article, je partagerai mon expÃ©rience de connexion d'un capteur de pression et d'un capteur de mouvement Doppler Ã  des microcontrÃ´leurs. Nous connecterons les contrÃ´leurs via l'interface UART filaire au GPIO Raspberry PI 3. Ensuite, nous Ã©crirons un programme simple en Python pour afficher l'Ã©tat du systÃ¨me de sÃ©curitÃ©, et Ã  la fin, nous connecterons le smartphone Ã  la framboise en utilisant VNC pour surveiller le systÃ¨me de sÃ©curitÃ© Ã  distance de l'ordinateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous voulez laisser Indiana Jones sans travail? Alors vous Ãªtes les bienvenus sous chat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bi/nx/ru/binxrusi0n6mkswqbzmfsvt3lnq.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme toujours, au dÃ©but, je vais vous expliquer que je suis moi-mÃªme nouveau dans les problÃ¨mes d'Ã©lectronique de bricolage et que j'apprends lentement d'un article Ã  l'autre. </font><font style="vertical-align: inherit;">Par consÃ©quent, ne percevez pas ce que j'Ã©crirai comme la vÃ©ritÃ© ultime. </font><font style="vertical-align: inherit;">Certes, tout peut Ãªtre mieux fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici ce dont nous allons parler aujourd'hui: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie I: Introduction </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie II: Connexion du circuit et du programme pour Canny 3 tiny </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie III: Connexion du circuit et du programme pour Arduino Uno </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie IV: Raspberry PI et le programme de surveillance en Python </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie V: Conclusion</font></font></a><br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie I: Introduction</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un lecteur attentif peut demander: Â«Pourquoi avez-vous achetÃ© Arduino si vous avez mentionnÃ© CraftDuino auparavant?Â», Tout est trÃ¨s courant. </font><font style="vertical-align: inherit;">CraftDuino s'est encore cassÃ©. </font><font style="vertical-align: inherit;">Une fois que</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je l'ai rÃ©parÃ©, et maintenant c'est "l'auto-isolement", et je ne voulais pas dÃ©ranger une personne pour rien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous sommes donc approchÃ©s en douceur de la base matÃ©rielle. </font><font style="vertical-align: inherit;">Pour cet article, j'ai utilisÃ©:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RÃ©sistance de pression FSR402:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1n/1e/ac/1n1eacbwx7ut25yotoswobz9u9a.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Capteur de mouvement Doppler RCWL-0516:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ao/-a/cd/ao-acdxaqtajtd0ed1hlqrqetqk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le magasin oÃ¹ j'ai achetÃ© les deux capteurs dans la description sur le site, il Ã©tait Ã©crit qu'ils Ã©taient pour Arduino, mais en pratique, il s'est avÃ©rÃ© qu'aucune bibliothÃ¨que spÃ©ciale n'Ã©tait nÃ©cessaire et tout a commencÃ© sans problÃ¨me sur Canny.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MicrocontrÃ´leur Arduino Uno:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/va/om/wx/vaomwxb6dsmmidh9bgg9qtpprnu.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MicrocontrÃ´leur Canny 3 Tiny - version avec bornier et faisceau de cÃ¢bles:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/be/70/bzbe70wksqorza7989bkeidhhm8.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ordinateur Ã  carte unique Raspberry PI 3 modÃ¨le B:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xr/ig/xt/xrigxt2ft6fnwzmcg1bh5gu6drg.png"></div> </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Autre: planches d'expÃ©rimentation Breboard, fils et pinces crocodile, adaptateur secteur framboise </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons passer aux choses sÃ©rieuses.</font></font><br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie II: Connexion du circuit et du programme pour Canny 3 Tiny</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe de nombreux exemples sur Internet pour connecter Arduino via UART, il y a beaucoup moins d'exemples sur Canny, alors commenÃ§ons par cela. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de ne pas gonfler la longueur de l'article et de ne pas me rÃ©pÃ©ter, je vous rappelle que j'ai considÃ©rÃ© les problÃ¨mes les plus fondamentaux de la faÃ§on de travailler avec Canny et l'environnement de dÃ©veloppement CannyLab </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans cet article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et un exemple de connexion de capteurs Ã  un convertisseur analogique-numÃ©rique (ADC) et de transmission d'un message via Virtual COM port, j'ai fait </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans cet article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui ne lisent pas ceci, mais essaient immÃ©diatement de connecter les capteurs Ã  l'ADC, il y a un point important. Ne rÃ©pÃ©tez pas mon erreur, pour que les sorties des contrÃ´leurs n Â° 5 et n Â° 6 fonctionnent en mode ADC, des cavaliers doivent Ãªtre rÃ©glÃ©s, comme dans l'image ci-dessous. Ce n'est pas difficile, mÃªme moi je l'ai fait.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/o3/eu/68/o3eu68jhpsacuwweo5rmddzkfag.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et un autre point important aux sorties du contrÃ´leur sera la tension d'alimentation, c'est-Ã -dire que si vous vous connectez Ã  partir d'une source d'alimentation externe au lieu d'USB, assurez-vous que la tension de sortie ne dÃ©passe pas la tension autorisÃ©e pour les capteurs et l'UART. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cet article, un cavalier aurait Ã©tÃ© suffisant pour nous, mais si nous avions un fer Ã  souder, pourquoi devrions-nous perdre du temps sur de petites choses?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faites attention au bornier, le faisceau de cÃ¢bles natif est livrÃ© en standard pour cette version du contrÃ´leur, il est difficile et probablement pratique s'il est utilisÃ© Ã  l'intÃ©rieur de la voiture, mais pas pour des expÃ©riences Ã  table. J'ai trouvÃ© le savoir-faire, remplacÃ© le harnais natif par des harnais qui sont souvent fournis avec du matÃ©riel informatique, enfin, ou vendus dans des magasins vendant de l'Ã©lectronique de bricolage et cela s'est avÃ©rÃ© trÃ¨s pratique. Ils ne sont pas mal assis dans le bloc, doux et donnent en mÃªme temps un allongement supplÃ©mentaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons au schÃ©ma de connexion:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l-/w6/d_/l-w6d_fdkhl4hw2gqeuudmippqq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est assez simple et ne nÃ©cessite aucune compÃ©tence particuliÃ¨re, je pense que presque tout le monde peut y faire face. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons d'abord le pouvoir du conseil d'administration. Nous prendrons le Â«terrainÂ» de la sortie Â«-Â» du contrÃ´leur, mais avec le plus, tout n'est pas si clair. Ã€ premiÃ¨re vue, il semble logique de se connecter Ã  la borne Â«+Â», mais en pratique il s'agit apparemment d'une borne pour + 5V INPUT. Par consÃ©quent, au lieu de cela, nous configurerons l'une des sorties comme une sortie + 5V, en lui fournissant une unitÃ© logique et en la tirant vers le Â«plusÂ». J'ai dÃ©cidÃ© de prendre la sortie numÃ©ro 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le capteur de pression est connectÃ© trÃ¨s simplement. En fait, c'est une rÃ©sistance. Nous alimentons l'une de ses Â«jambesÂ» et, Ã  partir des deuxiÃ¨mes Â«jambesÂ», nous enroulons le fil Ã  l'entrÃ©e du contrÃ´leur connectÃ©e Ã  l'ADC (n Â° 5 ou n Â° 6). J'ai choisi le n Â° 6.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fait, j'ai perdu deux fois le capteur de pression. Ma deuxiÃ¨me erreur a Ã©tÃ© de connecter le capteur. Il ne rentre pas dans la planche Ã  pain, il s'avÃ¨re qu'il doit Ãªtre connectÃ© Ã  un bornier Ã  vis ou quelque chose de similaire. J'ai dÃ» sortir avec les "crocodiles". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le capteur de mouvement n'est pas connectÃ© beaucoup plus compliquÃ©, nous avons mis + 5V de la carte dans la prise Vin, le connectons Ã  la prise GND sur la planche Ã  pain, et connectons la prise OUT Ã  n'importe quelle entrÃ©e numÃ©rique du contrÃ´leur, je l'ai connectÃ© Ã  la sortie n Â° 5 (nous nous ne le passerons pas en mode ADC). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il reste Ã  connecter le contrÃ´leur au "Raspberry" via UART. Pour ce faire, la sortie de contrÃ´leur n Â° 2, qui dans notre mode UART devient la sortie TX, doit Ãªtre connectÃ©e Ã  l'entrÃ©e Raspberry GPIO RX, et la masse sur la carte et le Raspberry PI GPIO GND doivent Ã©galement Ãªtre connectÃ©s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de gens conseillent de coordonner le niveau de tension Ã  3,3 V, et j'ai mÃªme essayÃ© de connecter Canny via un diviseur de tension, mais cela fonctionne moins bien avec que sans lui (ou ne fonctionne pas du tout), alors dans ce cas, je me suis connectÃ© directement au Raspberry UART. </font><font style="vertical-align: inherit;">Il semble que rien ne se soit Ã©teint. </font><font style="vertical-align: inherit;">Tout fonctionne.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tn/9g/jd/tn9gjdkty542gzjkh5gjvg1l8_8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut-Ãªtre avez-vous pensÃ©: "Pourquoi est-il connectÃ©" avec des fils Ã  l'UART, si possible via Bluetooth? " </font><font style="vertical-align: inherit;">En effet, il existe de nombreux exemples de connexion d'Arduino via l'UART au module HC-06 du rÃ©seau. </font><font style="vertical-align: inherit;">Si vous croyez au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Canny s'y connecte Ã©galement sans problÃ¨me. </font><font style="vertical-align: inherit;">Mais je ne l'ai pas essayÃ© moi-mÃªme. </font><font style="vertical-align: inherit;">Je voulais me connecter Ã  l'aide de fils et j'ai dÃ©cidÃ© de reporter la connexion Bluetooth Ã  la prochaine fois. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici Ã  quoi ressemble le circuit:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ao/rn/tg/aorntgjqegbbdoydxfiwo1scijg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons au programme du contrÃ´leur (diagramme):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9g/fu/yt/9gfuytcpdiwhzqza7wpjbh_eyyo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parameter Setting"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous activons le mode ADC pour le canal (entrÃ©e) n Â° 6, transfÃ©rons le canal n Â° 3 en mode de sortie discrÃ¨te et alimentons une unitÃ© logique (+ 5V dans notre cas), presque tout a Ã©tÃ© analysÃ© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans cet article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seuls les paramÃ¨tres UART ne nous sont pas familiers. </font><font style="vertical-align: inherit;">Heureusement, tout est simple. </font><font style="vertical-align: inherit;">Canny 3 tiny n'a qu'une seule interface UART (par exemple, Canny 7 en a deux). </font><font style="vertical-align: inherit;">Lorsque le mode UART est activÃ©, la sortie n Â° 1 devient RX, la sortie n Â° 2 TX. </font><font style="vertical-align: inherit;">Nous choisirons le dÃ©bit habituel de 9600 bauds, mais le mode de transfert de donnÃ©es est limitÃ©. </font><font style="vertical-align: inherit;">Le nombre de bits de donnÃ©es disponibles n'est que de 8 octets et 1 bit d'arrÃªt (pour les modÃ¨les de contrÃ´leurs "plus anciens", il y a plus de choix). Pour activer UART, il est nÃ©cessaire d' </font><b><font style="vertical-align: inherit;">entrer le registre de configuration UART1</font></b><font style="vertical-align: inherit;"> dans le registre correspondant</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ã©crire une constante prÃ©dÃ©finie:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/qg/18/ccqg18wcifd7jnqqr6rqsgijl28.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, dans notre cas, il a Ã©tÃ© possible de choisir une constante qui n'incluait que le mode de transmission UART, car nous ne prÃ©voyons rien reprendre. Mais j'ai dÃ©cidÃ© de montrer un exemple plus gÃ©nÃ©ral. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez sÃ©lectionnÃ© le bon contrÃ´leur lors de la crÃ©ation du diagramme, CannyLab ne vous permettra pas de choisir la constante qui ne lui conviendrait pas. Par consÃ©quent, le choix d'un mode sciemment dangereux ne fonctionne pas. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La vÃ©ritÃ© est toujours l'occasion d'entrer une constante manuellement, mais il vaut mieux ne pas le faire.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nous enverrons 10 caractÃ¨res dans le message (y compris 2 problÃ¨mes), donc nous Ã©crirons une constante Ã©gale Ã  10 dans le registre des messages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne suis pas sÃ»r de 1 Ã©lÃ©vation TX Ã  un, mais juste au cas oÃ¹ j'allumerais cet Ã©lÃ©ment, si je comprends bien, j'en ai besoin Ne serrez pas avec une rÃ©sistance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En bloc</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«Envoi pÃ©riodique via UART et VCPÂ»</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nous utilisons le gÃ©nÃ©rateur PWM pour envoyer 1 fois en 2 secondes afin que le contrÃ´leur n'obstrue pas le canal pendant une seconde en envoyant constamment un message, nous utilisons le Â«Trailing Edge DetectorÂ». Qui ne fonctionnera qu'une seule fois au moment de passer de un Ã  zÃ©ro, si le contrÃ´leur est prÃªt Ã  ce moment Ã  envoyer un message via UART, alors deux unitÃ©s viendront respectivement Ã  l'entrÃ©e du bloc de multiplication logique, Ã©galement Â«1Â», qui demandera au contrÃ´leur d'envoyer un message via UART , et aussi juste au cas oÃ¹ un dÃ©bogage dans un port USB-COM (j'ai Ã©crit Ã  ce sujet en dÃ©tail </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans un article prÃ©cÃ©dent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Affichage"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tout est assez simple, si les valeurs du capteur de pression sont infÃ©rieures Ã  un certain seuil et que le capteur de mouvement a fonctionnÃ© (il donnera Â«1Â» Ã  la sortie), alors nous allumerons la LED verte du contrÃ´leur comme signal d'alarme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce serait cool si le systÃ¨me fonctionnait comme dans un film: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zv/uz/vn/zvuzvnxgsn-kbzb2vvbtjh8gxeu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais nous nous limiterons Ã  allumer la LED. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une dÃ©monstration visuelle:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2w/wa/nf/2wwanfi6z0fgo9pie5ay7kdo2_w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il reste le dernier bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Message Formation".</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nous recevons des donnÃ©es de l'ADC, la rÃ©solution de l'ADC est de 0 Ã  1023. Nous envoyons des caractÃ¨res Ã  l'UART, ce qui signifie que les lectures du capteur de pression doivent Ãªtre converties en une chaÃ®ne. Puisque le nombre maximum est 1023 (4 chiffres), nous avons donc besoin de 4 octets. Â«Number to String ConverterÂ» gÃ©nÃ¨re quelques caractÃ¨res aux sorties, nous aurons 2 paires de caractÃ¨res, chacun d'eux enverra des messages UART et VCP aux registres d'installation. Ensuite, nous devons Ã©crire un sÃ©parateur afin que les lectures ne fusionnent pas, puisque CannyLab utilise quelques caractÃ¨res, puis nous prenons deux caractÃ¨res Â«espaceÂ» comme sÃ©parateur. De mÃªme, nous convertissons les lectures du capteur de mouvement, il donne un 00 ou 01 discret, ce qui signifie que nous n'avons besoin que d'une seule paire de caractÃ¨res. Ã€ la toute fin du message, Ã©crivez le retour chariot et les caractÃ¨res de nouvelle ligne.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme je l'ai dÃ©jÃ  Ã©crit dans l'article sur la photorÃ©sistance, Canny n'a pas son propre moniteur de port COM, mais vous pouvez en utiliser un tiers, et puisque nous utiliserons l'IDE Arduino un peu plus tard, nous utiliserons le moniteur de port COM intÃ©grÃ©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, j'ai mis un doigt sur le capteur de pression et je me dÃ©place le long du chemin:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/te/h7/yw/teh7yw7biknpy6-wwyxp9adtjui.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme, comme tout le code ci-dessous, peut Ãªtre tÃ©lÃ©chargÃ© depuis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons maintenant Ã  l'Arduino.</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie III: SchÃ©ma de cÃ¢blage et programme pour Arduino Uno </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne parlerai pas d'Arduino avec autant de dÃ©tails, car tout est assez banal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SchÃ©ma de cÃ¢blage:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fs/db/7c/fsdb7cfmep12vakizj2mibjylaw.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remarque! Ã‰tant donnÃ© que la sortie Arduino RX / TX fonctionne Ã  5 V et que le Raspberry PI a 3,3 V, les gens conseillent de connecter l'Arduino au Raspberry UART Ã  l'aide de modules spÃ©ciaux ou au moins Ã  l'aide d'un diviseur de tension. Je n'ai pas de module spÃ©cial, mais le diviseur de tension est toujours le bienvenu. J'ai pris 3 rÃ©sistances avec une valeur nominale de 1000 ohms. Et il a fait un tap aprÃ¨s la deuxiÃ¨me rÃ©sistance, sur laquelle les 2/3 de la tension vont baisser. Si vous coupez l'alimentation via USB Ã  5 V, cela se rÃ©vÃ¨le </font></font><code> 5*0.66=3.3 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que j'ai Ã©galement connectÃ© Arduino directement Ã  l'UART Raspberry PI et tout semblait fonctionner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous connectons le capteur de pression Ã  Â«+Â» et Ã  l'entrÃ©e analogique Â«A1Â». Le capteur de mouvement pour l'alimentation et l'entrÃ©e numÃ©rique n Â° 5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici Ã  quoi ressemble le circuit lorsqu'il est assemblÃ©:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dh/0b/u4/dh0bu4cuhrr2kiw6svtg58dzqr8.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le code de croquis pour Ardino: </font><font style="vertical-align: inherit;">
Le code est simple, la seule chose qui mÃ©rite d'Ãªtre expliquÃ©e est la variable Â«ajustementÂ». </font><font style="vertical-align: inherit;">Le fait est que lorsqu'il est connectÃ© Ã  l'Arduino, le capteur de pression a parfois montrÃ© des valeurs non nulles mÃªme sans charge, et je n'ai rien pensÃ© de mieux que de soustraire la valeur moyenne du "bruit" pour unifier les lectures avec Canny. </font><font style="vertical-align: inherit;">
De plus, comme dans le cas prÃ©cÃ©dent, nous avons implÃ©mentÃ© l'affichage avec une LED intÃ©grÃ©e, au cas oÃ¹ les capteurs fonctionneraient:</font></font><br>
<br>
<code>byte photoPin = A0;<br>
<br>
void setup() {<br>
 Serial.begin(9600);<br>
 pinMode(photoPin, INPUT);<br>
 pinMode(5, INPUT); <br>
 pinMode(13, OUTPUT);<br>
}<br>
<br>
void loop() {<br>
 int adjustment = 250;<br>
 int pressure_sensor = analogRead(A1) - adjustment;<br>
 int motion_sensor = digitalRead(5);<br>
<br>
Serial.print(pressure_sensor);<br>
 Serial.print(" ");<br>
 Serial.println(motion_sensor);<br>
 if ((pressure_sensor&lt;380) &amp;&amp; (motion_sensor==1))<br>
 {<br>
 digitalWrite(LED_BUILTIN, HIGH); <br>
 }<br>
 else {<br>
 digitalWrite(LED_BUILTIN, LOW); <br>
 }<br>
 delay(1000);<br>
}<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/sa/ld/gwsalds7c3tdqys4dqiywwal-os.png"></div><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie IV: Raspberry PI et le programme de surveillance en Python</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord activer UART, ainsi que SSH et VNC, puis vous connecter Ã  Raspberry Ã  l'aide d'un smartphone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AccÃ©dez aux paramÃ¨tres Raspberry PI et activez SSH, VNC, UART, comme dans l'image:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qh/gj/xq/qhgjxq2lh6ovw0uvszrpiwdrqpe.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au cas oÃ¹, j'aurais dÃ©sactivÃ© Bluetooth. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons Ã©crire un simple programme Python, j'ai utilisÃ© l'IDE intÃ©grÃ© et n'ai installÃ© aucun module Python supplÃ©mentaire. </font><font style="vertical-align: inherit;">J'avais un Raspbian avec une image de bureau, de taille moyenne, qui prend environ 1,1 Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre programme de surveillance, nous utiliserons Ã  la fois la console et l'interface graphique pour afficher les informations. </font><font style="vertical-align: inherit;">Pour implÃ©menter l'interface graphique, j'ai dÃ©cidÃ© d'utiliser Tkinter. </font><font style="vertical-align: inherit;">Je l'utilise vraiment pour la deuxiÃ¨me fois de ma vie, mais j'avais juste besoin de quelques champs de texte et d'une boÃ®te de dialogue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le code du programme:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> serial
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> ttk
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox<font></font>
<font></font>
serialport = serial.Serial(<span class="hljs-string">"/dev/ttyS0"</span>, baudrate=<span class="hljs-number">9600</span>, timeout=<span class="hljs-number">1.0</span>) <font></font>
<font></font>
window = Tk()  <font></font>
window.title(<span class="hljs-string">"Security system for my pen"</span>)  <font></font>
window.geometry(<span class="hljs-string">'400x170'</span>)
<span class="hljs-comment">#Presure sensor label</span>
lbl_ps = ttk.Label(window, text=<span class="hljs-string">"Pressure sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)<font></font>
lbl_ps_status = ttk.Label(window, text=<span class="hljs-string">" "</span>,  font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)
<span class="hljs-comment">#Motion sensor label</span>
lbl_ms = ttk.Label(window, text=<span class="hljs-string">"Motion sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)<font></font>
lbl_ms_status = ttk.Label(window, text=<span class="hljs-string">" "</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)<font></font>
<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
   counter = <span class="hljs-number">0</span>
   rcv = serialport.readline().decode(<span class="hljs-string">'utf-8'</span>).replace(<span class="hljs-string">"\r\n"</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">'  '</span>)
   <span class="hljs-keyword">if</span> (len(rcv)==<span class="hljs-number">2</span>):<font></font>
       ps=rcv[<span class="hljs-number">0</span>]<font></font>
       ms=rcv[<span class="hljs-number">1</span>]
       <span class="hljs-keyword">print</span> (ps+ <span class="hljs-string">" "</span> +ms)
       <span class="hljs-keyword">if</span> (int(ps)&lt;<span class="hljs-number">380</span>):<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Warning!"</span>)<font></font>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Ok"</span>)<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (int(ms)&gt;<span class="hljs-number">0</span>):<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Warning!"</span>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Ok"</span>  <font></font>
       window.update_idletasks()  <font></font>
       window.update()<font></font>
       <span class="hljs-keyword">if</span> (counter == <span class="hljs-number">2</span>):<font></font>
            messagebox.showinfo(<span class="hljs-string">"Alarm!"</span>, <span class="hljs-string">"heck your pen!"</span>)     <font></font>
       time.sleep(<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais probablement ignorer l'importation de bibliothÃ¨ques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AprÃ¨s l'importation, nous avons dÃ©fini les paramÃ¨tres pour UART, le port lui-mÃªme, la vitesse et le dÃ©lai d'expiration.</font></font><br>
<br>
<pre><code class="python hljs">serialport = serial.Serial(<span class="hljs-string">"/dev/ttyS0"</span>, baudrate=<span class="hljs-number">9600</span>, timeout=<span class="hljs-number">1.0</span>) 
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous plaÃ§ons des champs de texte (Label) sur la disposition du tableau (sur la grille) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aurons 4 champs dont 2 sont inchangÃ©s, et l'Ã©tat du capteur sera affichÃ© dans les deux autres.</font></font><br>
<br>
<pre><code class="python hljs">window.title(<span class="hljs-string">"Security system for my pen"</span>)  <font></font>
window.geometry(<span class="hljs-string">'400x170'</span>)
<span class="hljs-comment">#Presure sensor label</span>
lbl_ps = ttk.Label(window, text=<span class="hljs-string">"Pressure sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)<font></font>
lbl_ps_status = ttk.Label(window, text=<span class="hljs-string">" "</span>,  font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)
<span class="hljs-comment">#Motion sensor label</span>
lbl_ms = ttk.Label(window, text=<span class="hljs-string">"Motion sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)<font></font>
lbl_ms_status = ttk.Label(window, text=<span class="hljs-string">" "</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, crÃ©ez une boucle sans fin. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au dÃ©but du cycle, nous rÃ©initialiserons l'Ã©tiquette d'alarme </font></font><code> counter </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez ensuite les donnÃ©es du port sÃ©rie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de ne pas regarder toutes les entrÃ©es comme Â«\ x00Â», nous rÃ©-encodons le message en UTF-8. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous supprimons le dÃ©but et la fin de la ligne afin qu'il ne reste que des chiffres. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous divisons la ligne, faisons attention au sÃ©parateur 2 espaces, pas 1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin que le programme ne se bloque pas lorsque le message est incorrect, le code supplÃ©mentaire liÃ© Ã  la rÃ©ception du message est entassÃ© dans une structure conditionnelle qui ne fonctionnera que si le message peut Ãªtre divisÃ© en 2 parties. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, affichez le capteur de pression et le capteur de mouvement dans la console.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
   counter = <span class="hljs-number">0</span>
   rcv = serialport.readline().decode(<span class="hljs-string">'utf-8'</span>).replace(<span class="hljs-string">"\r\n"</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">'  '</span>)
   <span class="hljs-keyword">if</span> (len(rcv)==<span class="hljs-number">2</span>):<font></font>
       ps=rcv[<span class="hljs-number">0</span>]<font></font>
       ms=rcv[<span class="hljs-number">1</span>]
       <span class="hljs-keyword">print</span> (ps+ <span class="hljs-string">" "</span> +ms)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VÃ©rifiez si les capteurs ont fonctionnÃ©, si tout va bien, le systÃ¨me Ã©crit Â«OKÂ», si l'un des capteurs fonctionne, le compteur augmente de 1 et un avertissement est Ã©mis.</font></font><br>
<br>
<pre><code class="python hljs">
       <span class="hljs-keyword">if</span> (int(ps)&lt;<span class="hljs-number">380</span>):<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Warning!"</span>)<font></font>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Ok"</span>)<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (int(ms)&gt;<span class="hljs-number">0</span>):<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Warning!"</span>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Ok"</span>  
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le dernier bloc, nous mettons Ã  jour les Ã©lÃ©ments du formulaire Tkinter, aprÃ¨s quoi nous vÃ©rifions le nombre de capteurs qui ont fonctionnÃ©. </font><font style="vertical-align: inherit;">Si les deux capteurs ont fonctionnÃ© au cours du cycle, une fenÃªtre modale apparaÃ®t avec un message d'alarme.</font></font><br>
<br>
<pre><code class="python hljs"><font></font>
       window.update_idletasks()  <font></font>
       window.update()<font></font>
       <span class="hljs-keyword">if</span> (counter == <span class="hljs-number">2</span>):<font></font>
            messagebox.showinfo(<span class="hljs-string">"Alarm!"</span>, <span class="hljs-string">"heck your pen!"</span>)     <font></font>
       time.sleep(<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de noter ici que le capteur de mouvement conserve la sortie Â«1Â» pendant deux secondes Ã  partir du moment oÃ¹ le mouvement est dÃ©tectÃ©. </font><font style="vertical-align: inherit;">Donc, en rÃ¨gle gÃ©nÃ©rale, le systÃ¨me parvient Ã  fonctionner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici des captures d'Ã©cran montrant le fonctionnement du programme: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les capteurs sont calmes:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ag/k4/5g/agk45gfxxjwlw0mnho5ev1azihs.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'une des deux choses a fonctionnÃ©:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/wv/pl/ccwvplgtz7cehxt6j49n4eilcr0.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux fonctionnaient, le systÃ¨me attend que l'opÃ©rateur reconnaisse:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/mb/ex/zombexigilxlkmribvot0spkq-g.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que tout Ã©tait comme prÃ©vu.</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusion, envisagez de vous connecter Ã  un Raspberry PI Ã  partir d'un smartphone. En principe, il n'y a rien de compliquÃ©, si vous pouvez vous connecter Ã  partir d'un ordinateur, vous pouvez le faire Ã  partir d'un tÃ©lÃ©phone. Tout ce que vous devez savoir, c'est l'IP Raspberry, le nom d'utilisateur et le mot de passe. J'ai installÃ© VNC Viewer sur mon smartphone Android, mais vous pouvez certainement avoir un autre client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas trÃ¨s pratique Ã  utiliser, mais Ã§a marche:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cr/wb/st/crwbstmutqolgb1vhz6iwdr0pz4.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permettez-moi de vous rappeler une fois de plus que tout le code peut Ãªtre tÃ©lÃ©chargÃ© depuis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque fois, je me promets de ne pas Ã©crire un long article, mais lÃ  encore le brouillon a dÃ©passÃ© 10 pages imprimÃ©es. </font><font style="vertical-align: inherit;">L'article montre un exemple facile Ã  mettre en Å“uvre d'un systÃ¨me de sÃ©curitÃ© fait maison, la marge d'imagination est Ã©norme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si je comprends que l'article vous a intÃ©ressÃ©, j'en dÃ©crirai plus tard un autre sur la connexion via un adaptateur Bluetooth. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que j'ai reÃ§u une petite sÃ©rie d'articles, donc pour votre commoditÃ©, je vais laisser des liens vers d'autres articles connexes:</font></font></i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Un, deux, trois - brÃ»lez le sapin de NoÃ«l!" </font><font style="vertical-align: inherit;">ou mon premier aperÃ§u du petit contrÃ´leur CANNY 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"La destination a beaucoup de formes ..." ou nous automatisons le contrÃ´le d'une lampe automatique Ã  l'aide de CANNY 3 Tiny et d'une photorÃ©sistance</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Quelles marinas?" </font><font style="vertical-align: inherit;">ou nous contrÃ´lons le contrÃ´leur via Bluetooth en utilisant une application mobile sur Xamarin (Android)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497314/index.html">Profondeur du Challenger Abyss: mesure de la profondeur</a></li>
<li><a href="../fr497316/index.html">Propre serveur ou cloud public?</a></li>
<li><a href="../fr497318/index.html">Tutoriel de simulateur de rÃ©seau ns-3. chapitre 3</a></li>
<li><a href="../fr497320/index.html">Tendances clÃ©s des tests de logiciels de SmartBear: types et tendances des tests</a></li>
<li><a href="../fr497322/index.html">Test de niveau de qualitÃ© objectif avec la carte du parcours client</a></li>
<li><a href="../fr497326/index.html">ConnectivitÃ© SSH plus sÃ©curisÃ©e avec DNSSEC</a></li>
<li><a href="../fr497328/index.html">Un moyen facile d'apprendre une langue (n'importe laquelle)</a></li>
<li><a href="../fr497330/index.html">Bureau Ã  distance Chrome. Assistance Ã  distance</a></li>
<li><a href="../fr497332/index.html">Houston nous avons un problÃ¨me. Ã‰chec de la conception du systÃ¨me</a></li>
<li><a href="../fr497334/index.html">Les bugs notoires et comment les Ã©viter sur l'exemple de ClickHouse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>