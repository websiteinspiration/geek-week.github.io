<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§œğŸ½ ğŸ‘¨ğŸ»â€ğŸ« ğŸ¤ğŸ½ IOT di mana Anda tidak menunggu (bagian 3). Membangun model simulasi ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ¾ ğŸ•´ğŸ½ ğŸ¤”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seperti yang sudah saya katakan di bagian terakhir , ketika mengembangkan proyek IoT, protokol untuk berinteraksi dengan perangkat agak tidak stabil, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>IOT di mana Anda tidak menunggu (bagian 3). Membangun model simulasi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/503064/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti yang sudah saya katakan di bagian </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terakhir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ketika mengembangkan proyek IoT, protokol untuk berinteraksi dengan perangkat agak tidak stabil, dan kemungkinan kehilangan kontak dengan perangkat uji setelah memperbarui firmware cukup besar. </font><font style="vertical-align: inherit;">Beberapa tim terlibat dalam pengembangan, dan ada persyaratan yang ketat - jangan sampai kehilangan kemampuan untuk menguji lapisan bisnis aplikasi, bahkan jika mem-flash perangkat merusak seluruh aliran kerja dengan sensor.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zv/z5/tv/zvz5tvvouwnwasl8uerdpzto6eq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar analis bisnis menguji hipotesis mereka pada data yang kurang lebih mirip dengan kenyataan, kami membuat model simulasi perangkat. </font><font style="vertical-align: inherit;">Jadi, jika perangkat rusak karena firmware baru, dan data perlu segera diterima, kami meluncurkan model simulasi alih-alih perangkat nyata di jaringan, yang, menurut format lama, menggerakkan data dan menghasilkan hasilnya.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, keuntungan dari model ini adalah bahwa bisnis tidak akan pernah membeli sejumlah besar perangkat hanya untuk menguji hipotesis. </font><font style="vertical-align: inherit;">Misalnya, tim analisis bisnis memutuskan bahwa memperkirakan waktu pengisian kontainer harus bekerja secara berbeda. </font><font style="vertical-align: inherit;">Dan untuk menguji hipotesis mereka, tidak ada yang akan lari untuk membeli 10.000 sensor.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembangan model simulasi</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Model simulasi itu sendiri adalah sebagai berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/bs/pf/edbspfx-ti5ypivxexehovva9ok.gif" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keadaan dan perilaku tempat sampah dijelaskan oleh mesin keadaan biasa. Pertama, kita menginisialisasi mesin negara dengan keadaan `KOSONG (level = 0)` dan kita dapat melakukan beberapa tindakan di atasnya, yaitu, membuang sampah ke dalam wadah. Sekarang Anda perlu memutuskan apakah wadah tersebut masih kosong `(level? MAX_LEVEL)` atau apakah sudah penuh` (level&gt; = MAX_LEVEL) `. Jika yang kedua, maka statusnya berubah menjadi `FULL`. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seseorang dapat membongkar sampah dari wadah penuh, atau petugas kebersihan datang untuk membersihkan kekacauannya, dan kita perlu memutuskan negara mana yang akan dituju. Status `PILIHAN` bertanggung jawab untuk memilih tindakan - dalam terminologi mesin keadaan, sesuatu yang mirip dengan blok if.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wadah lain mungkin terbakar, dan kemudian status mesin-negara berubah menjadi `FIRE`. </font><font style="vertical-align: inherit;">Juga, wadah mungkin jatuh, dan kondisinya menjadi `JATUH` (dalam laporan saya berbicara tentang apa yang menyebabkan penurunan kontainer yang tidak terduga). </font><font style="vertical-align: inherit;">Tetapi ada keadaan `HILANG` lain, yang valid dari negara lain - diatur ketika koneksi terputus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesin seperti itu menggambarkan hampir semua perilaku wadah dan sensor di dalamnya. </font><font style="vertical-align: inherit;">Tetapi ini tidak cukup untuk membuat model simulasi, karena kita tahu tentang kemungkinan keadaan dan transisi dari mereka, tetapi kita tidak tahu apa probabilitas dari kejadian ini dan kapan mereka akan terjadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan, ternyata probabilitas kejadian tergantung pada waktu hari, karena:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operator tidak bekerja di malam hari;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orang membuang lebih banyak sampah pada jam-jam tertentu (di pagi hari sebelum bekerja dan di malam hari).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, kami memungkinkan tim analisis bisnis untuk menyesuaikan perilaku simulasi. </font><font style="vertical-align: inherit;">Dimungkinkan untuk menetapkan probabilitas suatu peristiwa pada waktu tertentu dalam sehari.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tes stres yang sederhana dan intuitif </font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imitasi itu sendiri memiliki banyak keunggulan, dan salah satunya adalah pengujian beban murah. </font><font style="vertical-align: inherit;">Itu murah karena peniruan, pada kenyataannya, utas terpisah yang memulai mesin keadaan, menerapkan peristiwa padanya, dan peristiwa itu sendiri dikirim ke server nyata. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, simulasi untuk backend tidak berbeda dengan sensor sebenarnya. </font><font style="vertical-align: inherit;">Dan jika kita perlu menjalankan 1000 sensor, jalankan 1000 utas dan bekerja. </font><font style="vertical-align: inherit;">Selain itu, simulasi berskala sempurna.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/5c/w5/xq5cw5zezhxybxbmk_xuyo7sjxk.gif" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di satu sisi, agak kasar untuk menguji beban, tetapi di sisi lain, simulasi memungkinkan untuk mendorong banyak data mendekati kenyataan untuk seluruh proyek. Dan jangan lupa tentang pengembang Cina berbakat yang mengabaikan protokol standar seperti MQTT dan memotong protokol mereka di atas soket. Oleh karena itu, kami harus melakukan implementasi server kami sendiri yang menerima data pada soket di bawah protokol eksklusif ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server seperti itu harus multi-threaded, karena ada banyak sensor input. dan bagian ini juga perlu diuji secara terpisah menggunakan tes kinerja. Anda dapat mengambil JMeter (menulis skrip uji khas), JMH / JCStress (menguji bagian yang terisolasi dan membuat tolok ukur yang lebih tipis), atau yang lain dari milik Anda. Ketika Anda membuat keputusan dalam situasi yang sama, saya menyarankan Anda untuk mendengarkan para profesional, misalnya, Alexei Shipilev. Di JPoint 2017, ia dengan sangat dingin </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berbicara tentang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cara membandingkan berbagai hal dan apa yang perlu Anda pikirkan ketika melakukan pengujian kinerja.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/p2b4JHESEOc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memilih opsi untuk melakukan sesuatu sendiri, karena proyek memiliki pendekatan atipikal untuk QA - kami tidak memiliki tim penguji yang terpisah, dan tim backend sendiri menguji fungsionalitasnya. </font><font style="vertical-align: inherit;">Artinya, orang yang menulis server soket harus menutupi kode dengan unit biasa, tes integrasi dan kinerja. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki alat kecil yang memungkinkan kami untuk dengan cepat menggambarkan skenario pemuatan dan menjalankannya dalam jumlah paralel yang tepat:</font></font><br>
<br>
<pre><code class="java hljs">StressTestRunner.test()<font></font>
                .mode(ExecutionMode.EXECUTOR_MODE)<font></font>
                .threads(THREADS_COUNT)<font></font>
                .iterations(MESSAGES_COUNT)<font></font>
                .timeout(<span class="hljs-number">5</span>, TimeUnit.SECONDS)<font></font>
                .run(() -&gt; sensor.send(MESSAGE));<font></font>
<font></font>
Awaitility.await()<font></font>
          .atMost(<span class="hljs-number">5</span>, TimeUnit.SECONDS)<font></font>
          .untilAsserted(() -&gt;<font></font>
            verifyReceived(MESSAGES_COUNT)<font></font>
          );<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengatakan berapa banyak utas yang perlu Anda jalankan, berapa banyak pesan untuk dikirim, berapa lama waktu yang diperlukan, dan mengirim data ke soket di setiap utas. </font><font style="vertical-align: inherit;">Tinggal menunggu server kami untuk memproses semua data ini dengan benar. </font><font style="vertical-align: inherit;">Hanya beberapa baris kode yang telah dirilis yang dapat ditulis oleh pengembang backend.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persaingan masalah jaringan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan bantuan imitasi, kami dapat mensimulasikan kerja berkualitas buruk dan spesifik dengan soket. </font><font style="vertical-align: inherit;">Kartu SIM GSM di sensor tidak memiliki alamat IP "putih", dan kami dapat menerima data dari IP yang berbeda 50 kali sehari. </font><font style="vertical-align: inherit;">Dan sering terjadi koneksi dibuka, kami mulai mentransfer data, kemudian alamat IP berubah, dan server membuka koneksi baru tanpa menutup yang lama. </font><font style="vertical-align: inherit;">Jika kami tidak memperhitungkan ini, maka dalam beberapa hari kami akan kehabisan port gratis di server. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zo/7i/cp/zo7icpvaszptgcfrwhlisznm5aw.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada juga masalah dengan sensor kecepatan yang berbeda. </font><font style="vertical-align: inherit;">Perangkat yang lambat dapat membuka koneksi dan membeku untuk sementara waktu, sementara perangkat yang cepat akan mengirim sesuatu. </font><font style="vertical-align: inherit;">Dan semua ini perlu diproses dengan benar. </font><font style="vertical-align: inherit;">Dalam peniruan, simulasi situasi yang sama adalah mudah menggunakan jeda. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wh/q2/es/whq2esv39_sverob7195mc6yxtw.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini hanya bagian dari skenario yang dapat dimasukkan ke dalam model.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temuan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampak bagi saya bahwa justru kemungkinan simulasi yang sangat membedakan IOT dari proyek lain. Mensimulasikan perilaku perangkat lebih mudah daripada perilaku manusia. Pada input, kami mendapatkan nilai deterministik yang berkorelasi baik dengan model kami, dan bukan tindakan manusia yang acak. Karena perilaku perangkat secara logis lebih mudah dijelaskan daripada perilaku orang, dan pengujian sistem menjadi lebih mudah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami melihat beberapa aspek perkembangan di IoT. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/be/gl/dmbeglutox6rwbye8o2jkvgflm4.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda melewatkan dua bagian sebelumnya dari artikel ini, Anda dapat menemukannya di sini: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT di mana Anda tidak menunggu (Bagian 1) - Area subjek dan masalah </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT di mana Anda tidak menunggu (Bagian 2) - Arsitektur aplikasi dan pengujian IoT untuk hal-hal tertentu </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github dengan alat pengujian yang dimaksud.</font></font></a><br>
<br>
<blockquote> .  ,     Heisenbug    ,        IoT. ,   !        JPoint,        .          Heisenbug   JPoint    6   . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   !</a></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503042/index.html">5 Mitos tentang Red Teaming</a></li>
<li><a href="../id503052/index.html">Otomasi mikrofront, atau bagaimana perpustakaan komponen diuji di Tinkoff</a></li>
<li><a href="../id503054/index.html">Apa yang umum antara tetes dalam secangkir kopi dan mekanika kuantum?</a></li>
<li><a href="../id503056/index.html">23 Mei pub online: holivarim tentang cloud, JS dan ponsel</a></li>
<li><a href="../id503062/index.html">Biaya nyata hidup di Lembah Silikon untuk pengembang</a></li>
<li><a href="../id503068/index.html">Di persimpangan teknologi dan bisnis: Para pemimpin TI membuka universitas baru di Swiss</a></li>
<li><a href="../id503070/index.html">Mug listrik. Bangun skuter listrik / sepeda listrik yang gila</a></li>
<li><a href="../id503072/index.html">Hanya alat lain: mengenal konfigurasi layanan dengan Desired State ConfigurationÂ </a></li>
<li><a href="../id503074/index.html">Detail tentang paket Penyedia untuk Flutter</a></li>
<li><a href="../id503082/index.html">Telegram sebagai NAS / FTP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>