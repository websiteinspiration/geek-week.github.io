<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥝 ✋🏾 😎 代码分析演示Second Reality 🦉 🏳️‍🌈 🏆</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2013年7月23日，在第二现实演示（1993年）的源代码公布。像许多人一样，我很想看看这个演示的内部，这些年来给我们带来了很多启发。
 
 我本来希望从汇编程序中看到整体混乱，但令我惊讶的是，我发现了一个复杂的体系结构，该体系结构优雅地结合了多种语言。我以前从未见过这样的代码，可以完美地代表开发演...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>代码分析演示Second Reality</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501030/"><div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second_reality.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2013年7月23日，</font><font style="vertical-align: inherit;">在第二现实演示（1993年）的源代码</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公布</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">像许多人一样，我很想看看这个演示的内部，这些年来给我们带来了很多启发。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我本来希望从汇编程序中看到整体混乱，但令我惊讶的是，我发现了一个复杂的体系结构，该体系结构优雅地结合了多种语言。</font><font style="vertical-align: inherit;">我以前从未见过这样的代码，可以完美地代表开发演示的两个基本方面：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">团队合作。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混淆。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
像往常一样，我为自己的笔记写了一篇文章：我希望这可以节省一个人几个小时的时间，也许可以激发其他人阅读更多源代码并成为更有经验的工程师。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1部分：简介</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示版</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在开始编写代码之前，我将提供一个链接，以捕获高清视频中的传奇演示（Michael Hut）。</font><font style="vertical-align: inherit;">如今，这是在没有图形故障的情况下完全评估该演示的唯一方法（即使DOSBox也无法正确启动它）。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KTjnt_WSJu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首次接触代码</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
源代码发布在GitHub上。</font><font style="vertical-align: inherit;">只需输入一个命令</font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<blockquote><code> git clone git@github.com:mtuomi/SecondReality.git</code></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，内容令人困惑：32个文件夹和一个</font></font><code>U2.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未在DosBox中启动</font><font style="vertical-align: inherit;">的神秘文件夹</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/first_contact.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该演示的工作名称为“虚幻2”（第一个“虚幻”是上一个Future Crew演示，于1992年为第一届大会发布）。</font><font style="vertical-align: inherit;">而且仅在开发过程中，名称才更改为“第二现实”。</font><font style="vertical-align: inherit;">这说明了文件名“ U2.EXE”，但不是文件不起作用的原因... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果运行</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLOC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将获得有趣的指标：</font></font><br>
<br>
<pre>    -------------------------------------------------------------------------------<font></font>
                                                   <font></font>
    -------------------------------------------------------------------------------<font></font>
    Assembly                        99           3029           1947          33350<font></font>
    C++                            121           1977            915          24551<font></font>
    C/C++ Header                     8             86            240            654<font></font>
    make                            17            159             25            294<font></font>
    DOS Batch                       71              3              1            253<font></font>
    -------------------------------------------------------------------------------<font></font>
    SUM:                           316           5254           3128          59102<font></font>
    -------------------------------------------------------------------------------<font></font>
</pre><br>
<ul>
<li>   «»  50% .</li>
<li>      Doom.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它有十七个makefile。</font><font style="vertical-align: inherit;">为什么不只是一个？</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动演示</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
很难弄清楚，但是可以在DosBox中启动发布的演示：您需要重命名</font></font><code>U2.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并在正确的位置运行它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当我了解了代码的内部工作原理后，它开始显得非常合乎逻辑：</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        CD主</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        移动U2.EXE数据/ SECOND.EXE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        CD数据</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        第二个EXE</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
瞧！</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/demo.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建筑</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在90年代，演示程序大多分布在软盘上。</font><font style="vertical-align: inherit;">解压缩后，有必要安装两个大文件：</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    。</font><font style="vertical-align: inherit;">&lt;目录&gt; 08/08/2013 16:40</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    .. &lt;DIR&gt; 2013/08/01 16:40</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FCINFO10 TXT 48,462 04-10-1993 11:48</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FILE_ID DIZ 378 04-10-1993 11:30</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    README 1ST 4.222 1993年10月10日12:59</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    现实FC 992.188 07-10-1993 12:59 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    第二个EXE 1,451,093 1993-07-10 13:35</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        5个文件2.496,343字节。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        2 Dir（s）262,111,744字节免费。</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据我在游戏开发中的经验，我始终希望整个图片看起来像这样：</font></font><br>
<br>
<ul>
<li><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在可执行文件中具有所有效果的引擎。</font></font></li>
<li><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：la </font></font><code>WAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doom游戏</font><font style="vertical-align: inherit;">中专有/加密格式的资产（音乐，声音效果，图像）</font><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是看完之后，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>MAIN/PACK.C</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我发现自己弄错了：Second Reality引擎只是一个加载程序和一个中断服务器（称为DIS）。</font><font style="vertical-align: inherit;">每个场景（也称为“ PART”）演示都是功能齐全的DOS可执行文件。</font><font style="vertical-align: inherit;">每个部分均由Loader加载程序加载，然后一个接一个地启动。</font><font style="vertical-align: inherit;">零件最后以加密形式存储</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/architecture.png"></div><br>
<ul>
<li><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 包含两个在演示过程中播放的音乐作品（用于填充混淆，并在开始时添加了填充和标记）。</font></font></li>
<li><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 包含引导加载程序和演示中断服务器（DIS）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，演示的32个部分（PART）被添加为可执行的DOS文件（已加密）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这样的体系结构具有许多优点：</font></font><br>
<br>
<ul>
<li>     :         PART  ,       <code>_start</code>       (450 ).</li>
<li>  EXE   <code>SECOND.EXE</code>        -.</li>
<li> : Loader  DIS    20 . DOS    .</li>
<li>  :   PART     PART     . </li>
<li>   / :    ,  PART      (  ),   :   EXE     ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何语言都可以用于PART编程：在代码中，我们可以找到C，Assembly ...和Pascal。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推荐读物</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理解Second Reality源代码的三个支柱是VGA，汇编器和PC体系结构（PIC和PIT编程）。</font><font style="vertical-align: inherit;">这里有一些非常有用的链接：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VGA体系结构：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FreeVGA项目</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大会的艺术</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（尤其是</font><font style="vertical-align: inherit;">关于中断和ISR的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第17章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编程PIT 8254</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于源代码中充满了“ FAR”和“ NEAR”指针，因此阅读</font><font style="vertical-align: inherit;">英特尔的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本体系结构文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，尤其是有关指针数据类型的第4.3章，</font><font style="vertical-align: inherit;">将很有用</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">综合文章从迈克尔·亚伯拉什</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形编程黑皮书</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：（禅定时器和PIT），</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第24章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：VGA旅游，章节</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：（模式X）。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2部分：第二现实引擎</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如第1部分所述，“第二现实”的基础包括：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导加载程序作为DOS可执行文件。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存管理器（简单的堆栈池）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示中断服务器（DIS）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这一部分中，我将向想要阅读引擎和引导加载程序的程序员提供建议（在下一部分中将讨论DIS）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎代码</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
引擎代码是100％ASM，但是编写得非常好，文档也相当齐全：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>MAIN/U2.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （核心）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>MAIN/U2A.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （公用事业）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>MAIN/VMODE.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （VGA程序）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用伪代码可以这样写：</font></font><br>
<br>
<pre><code class="cpp hljs">    exemus  db <span class="hljs-string">'STARTMUS.EXE'</span>,<span class="hljs-number">0</span>
    exe0    db <span class="hljs-string">'START.EXE'</span>,<span class="hljs-number">0</span><font></font>
    ...<font></font>
    exe23   db <span class="hljs-string">'ENDSCRL.EXE'</span>,<span class="hljs-number">0</span><font></font>
<font></font>
    start:<font></font>
       cli                         ; Disable all interrupts<font></font>
       mov     ah,<span class="hljs-number">4</span>ah              ; Deallocate all memory<font></font>
       call checkall               ; Check <span class="hljs-keyword">for</span> <span class="hljs-number">570</span>,<span class="hljs-number">000</span> bytes of mem, <span class="hljs-number">386</span> CPU <span class="hljs-keyword">and</span> VGA<font></font>
       call file_getexepath        <font></font>
       call dis_setint             ; Install Demo Interrupt Server on Interrupt <span class="hljs-number">0f</span>ch<font></font>
       call file_initpacking       ; <span class="hljs-function">Check exe <span class="hljs-title">signature</span> <span class="hljs-params">(no tempering)</span> !
       call file_setint            </span>; <span class="hljs-function">Replace DOS <span class="hljs-title">routines</span> <span class="hljs-params">(only OPENFILE, SEEK <span class="hljs-keyword">and</span> READ)</span> on Interrupt 021h
       call flushkbd               </span>; Flush the keyboard buffer<font></font>
       <font></font>
       call  checkcmdline          ; check/process commandline<font></font>
<font></font>
       ;======== Here we go! ========<font></font>
       call vmode_init             ; <span class="hljs-function">Init <span class="hljs-title">VGA</span> <span class="hljs-params">(<span class="hljs-keyword">not</span> necessarly Mode13h <span class="hljs-keyword">or</span> ModeX)</span>, each PARTs had its own resolution

       mov si,OFFSET exe0
       call executehigh            </span>; loaded to high in memory. Used <span class="hljs-keyword">for</span> loading music loaders <span class="hljs-keyword">and</span> stuff.<font></font>
   <font></font>
       call  _zinit ; Start music<font></font>
       call  restartmus<font></font>
<font></font>
       mov   si,OFFSET exe1     ;Parameter <span class="hljs-keyword">for</span> partexecute: Offset to exec name<font></font>
       call  partexecute<font></font>
       ; Execute all parts until exe23<font></font>
<font></font>
       call fademusic<font></font>
       ;======== And Done! (<span class="hljs-keyword">or</span> fatal <span class="hljs-built_in">exit</span>) ========<font></font>
<font></font>
    fatalexit:<font></font>
       mov cs:notextmode,<span class="hljs-number">0</span>
       call vmode_deinit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有步骤都非常容易阅读：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将DIS中断服务器设置为interrupt </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在中断时替换DOS系统调用</font></font><code>021h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（有关更多详细信息，请参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“开发和生产模式”部分</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过EMS存储器将音乐下载到声卡。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行音乐。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行演示的每个部分。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">做完了！</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
详细程序</font></font><code>execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="cpp hljs"> execute:<font></font>
      cld<font></font>
      call  openfile ; Open the DOS executable <span class="hljs-keyword">for</span> <span class="hljs-keyword">this</span> PART<font></font>
      call  loadexe  ; loads the specified exe file to memory, does relocations <span class="hljs-keyword">and</span> creates psp<font></font>
      call  closefile<font></font>
      call  runexe   ;runs the exe file loaded previously with loadexe.<font></font>
                     ; returns after exe executed, <span class="hljs-keyword">and</span> frees the memory<font></font>
                     ; it uses.</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存管理器</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有很多传说说，Second Reality通过MMU使用复杂的内存管理器；引擎中没有任何痕迹。</font><font style="vertical-align: inherit;">内存管理实际上是转移到DOS：发动机启动后通过</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">释放所有的RAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后分发它</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的要求</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">唯一棘手的技巧是从堆末尾分配RAM的能力：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当请求太多RAM时，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用malloc DOS返回值完成此操作</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3部分：DIS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
演示中断服务器（DIS）为每个PART提供了广泛的服务：从不同PART之间的数据交换到与VGA同步。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIS服务</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在运行时，PART，DIS服务器为其提供服务。</font><font style="vertical-align: inherit;">可以在找到功能列表</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>DIS/DIS.H</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最重要的服务：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在不同的PART（</font></font><code>dis_msgarea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">之间交换</font><font style="vertical-align: inherit;">：DIS提供了三个</font><font style="vertical-align: inherit;">每个</font><font style="vertical-align: inherit;">64字节的缓冲区，以便PART可以从前一个PART的加载程序中接收参数。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emulation Copper（</font></font><code>dis_setcopper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：Amiga Copper模拟器，允许您执行通过VGA状态切换的操作。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dev / Prod（</font></font><code>dis_indemo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">模式</font><font style="vertical-align: inherit;">：允许PART知道它正在DEV模式下运行（这意味着它必须初始化视频）或以PROD模式从引导加载程序启动。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VGA帧数（</font></font><code>_dis_getmframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待VGA逆止器（</font></font><code>dis_waitb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示中断服务器代码</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIS的源代码也是100％ASM的，并且评论得相当好：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>DIS/DIS.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（将中断处理程序设置为int </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>DIS/DISINT.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （DIS程序本身）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于Second Reality也部分用C编写，因此代码具有C：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>DIS/DIS.H</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">的接口</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>DIS/DISC.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">怎么运行的</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIS设置为程序化int的中断处理程序</font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">很棒的是，它可以</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在演示运行时在</font><font style="vertical-align: inherit;">内部运行，也可以</font><font style="vertical-align: inherit;">在开发模式下</font><font style="vertical-align: inherit;">作为驻留程序（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TSR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）运行。</font><font style="vertical-align: inherit;">这种灵活性使您可以在开发过程中分别测试不同的PART演示：</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                          //让我们假装我们是FC开发人员，想直接启动STAR部分。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C：\&gt; CD DDSTARS            </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C：\ DDSTARS&gt; K</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  错误：未加载DIS。 </font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          //糟糕，PART在int 0fch处找不到DIS。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C：\ DDSTARS&gt; CD .. \ DIS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C：\ DIS&gt; DIS</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  演示服务器（DIS）V1.0版权所有（C）1993 The Future Crew</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  测试版-编译：93年7月26日03:15:53 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  已安装（int fc）。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  注意：此DIS服务器不支持铜线或音乐同步！</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          // DIS已安装，让我们再试一次。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C：\ DIS&gt; CD ../DDSTARS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C：\ DDSTARS&gt; K</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
瞧！</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/DDSTARTS.EXE.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">铜</font></font></h3> <br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/copper_emu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“铜”是Amiga演示开发人员喜欢的协处理器。</font><font style="vertical-align: inherit;">它是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原始芯片组的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部分，可</font><font style="vertical-align: inherit;">让您执行与视频设备同步的可编程命令流。</font><font style="vertical-align: inherit;">PC上没有这样的协处理器，因此Future Crew必须编写在DIS中运行的Copper模拟器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FC团队使用8254-PIT和8259-PIC PC硬件芯片组来模拟Copper。</font><font style="vertical-align: inherit;">她创建了一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与VGA频率同步</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的系统</font><font style="vertical-align: inherit;">，能够</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在垂直后向光束的三个位置</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动程序</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放置0：打开显示器后（大约在扫描线25上）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置1：反向光束扫描后立即发生（有可能避免）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置2：位于扫描光束的反向光束中</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以阅读此操作的方法</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>MAIN/COPPER.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（请参见下图）：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8254芯片的计时器配置为以所需频率触发IRQ0。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8h中断处理程序（在收到IRQ0之后由8259 PIC调用）</font><font style="vertical-align: inherit;">在此处</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替换为过程</font></font><code>intti8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：DIS帧计数服务实际上是由铜缆模拟器提供的。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4部分：开发和生产模式</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在阅读《第二​​现实》的源代码时，您最震惊的是团队对从DEV到PROD的无缝转换给予了多大的关注。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发模式</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sc_dev.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在开发模式下，演示的每个组件都是一个单独的可执行文件。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIS被加载到驻留的TSR中并通过中断进行访问</font></font><code>0cfh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导加载程序导致DOS中断</font></font><code>21h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开，读取，搜索和关闭文件。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该DEV配置具有以下优点：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个编码人员和美术人员都可以处理可执行文件并分别对其进行测试，而不会影响团队的其他成员。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随时可以使用一个较小的演示版</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（无需在末尾添加所有EXE）</font><font style="vertical-align: inherit;">来测试完整的演示版</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个PART的可执行文件都是使用DOS中断</font></font><code>021h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从单独的文件加载的。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生产（演示模式）</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sc_prod.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在生产模式下，小的</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（包含引导加载程序），DIS和作为独立EXE的演示部分被合并为一个厚文件</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过中断仍然可以访问DIS </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOS 21h中断API由其自己的Future Crew例程进行了修补，该例程从大文件的末尾打开文件</font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种PROD配置在加载时间和防止逆向工程方面具有优势……但是最重要的是，从编程或加载PART的角度来看，从DEV切换到PROD时，NOTHING会发生变化。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5部分：单独的部分</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个“第二现实”视觉效果都是一个功能齐全的DOS可执行文件。</font><font style="vertical-align: inherit;">它们被称为PART以及全部23。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分开的部分</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以在引擎源代码</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2.ASM中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到所有PART / EXE的列表</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是所有23个部分的简短说明（带有源代码的位置，尽管名称可能非常混乱）：</font></font><br>
<br>
<div class="scrollable-table"><table cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标题</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕截图</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源</font></font></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动文件</font></font></td>
<td></td>
<td></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主/ STARTMUS.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">威尔迪</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/02-START_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">START / MAIN.c</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐藏部分</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">威尔迪</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/03-DDSTARS_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS / STARS.ASM</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit i</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">威尔迪</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/04-ALKU_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阿尔库/ MAIN.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit II</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2A.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/05-U2A_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU / C / CPLAY.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit III</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卡车/野生</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/06-PAM_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM /</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEGLOGO.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/07-BEGLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEG / BEG.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格伦茨</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/08-GLENZ_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格伦茨/</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多图尼</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隧道文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拖把</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/09-TUNNELI_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TUNNELI / TUN10.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Techno</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技术文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/10-TECHNO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TECHNO / KOEA.ASM</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panicfake</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">潘宁</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/11-PANICEND_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">恐慌</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuori滚动</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MNTSCRL.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/12-MNTSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">森林/ READ2.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">沙漠之梦星</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拖把</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/13-DDSTARS_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">镜片</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/14-LNS&amp;ZOOM_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旋转唑</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LNS和ZOOM.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/14-LNS&amp;ZOOM-2_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">镜片 /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等离子体</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">威尔迪</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/15-PLZPART_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">血浆</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLZPART.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">威尔迪</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/15-PLZPART-2_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLZPART /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迷你矢量球</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MINVBALL.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/16-MINVBALL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点/</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">佩利帕洛斯克罗尔</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAYSCRL.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拖把</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/17-RAYSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水/DEMO.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3D窦场</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DSINFLD.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/18-3DSINFLD_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">科曼/ DOLOOP.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">果冻</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPLOGO.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/19-JPLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPLOGO / JP.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向量第二部分</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2E文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/20-U2E_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU / C / CPLAY.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字幕/致谢</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDLOGO.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/21-ENDLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">END / END.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">威尔迪</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/22-CRED_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">学分/ MAIN.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDSCRL.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/23-ENDSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDSCRL / MAIN.C</font></font></a></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
似乎每个开发人员都有自己的专长，可以分一部分共享。</font><font style="vertical-align: inherit;">这在滚动，飞船和爆炸的第一个场景中特别明显（Alkutekstit）。</font><font style="vertical-align: inherit;">尽管这看起来像是一种连续的效果，但实际上它是由三个不同的人编写的三个可执行文件：</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td colspan="3"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit（贷方）序列</font></font></b></td>
</tr>
<tr>
<td><img src="http://fabiensanglard.net/second_reality/parts/04-ALKU_seq.png"></td>
<td><img src="http://fabiensanglard.net/second_reality/parts/05-U2A_seq.png"></td>
<td><img src="http://fabiensanglard.net/second_reality/parts/06-PAM_seq.png"></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WILDFIRE的ALKU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI的U2A</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM by TRUG / WILDFIRE</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产</font></font></h3><br><font style="vertical-align: inherit;"></font><code>.LBM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">90年代极为流行的位图编辑器</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deluxe Paint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成</font><font style="vertical-align: inherit;">
图像资源（</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有趣的是，它们被转换为字节数组并在PART中进行编译。</font><font style="vertical-align: inherit;">因此，该exe文件还会下载所有资产。</font><font style="vertical-align: inherit;">另外，这使逆向工程复杂化。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最酷的资产包括</font><font style="vertical-align: inherit;">最新3D场景中</font><font style="vertical-align: inherit;">著名的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CITY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHIP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second%20reality%20city.png"></div><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second%20reality%20ship.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部单元PART</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于它们都被编译成DOS可执行文件，因此在PART中可以使用任何语言：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASM。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PASCAL：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黄铜指关节怪兽（MNTSCRL.EXE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虚线隧道（TUNNELI.EXE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">射线</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追踪剑（RAYSCRL.EXE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些部件甚至走得更远，并使用C生成ASM代码：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ / DOLOOP.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（可</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">下载的</font></a><font style="vertical-align: inherit;">多面体）和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水效果（3DSINFLD.EXE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
至于内存的使用，我在Wikipedia和其他网站上读到了很多有关MMU的信息……但是实际上，每个部分都可以使用任何东西，因为执行后它完全从内存中卸载了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用VGA时，每个部分都使用自己的技巧，并以其分辨率工作。</font><font style="vertical-align: inherit;">所有这些都不使用模式13h和ModeX，而是使用具有自己分辨率的修改模式13h模式。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCRIPT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">经常提到320x200和320x400。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不幸的是，在分析PART时，阅读源代码成为一项艰巨的任务：代码和注释的质量急剧下降。</font><font style="vertical-align: inherit;">可能是因为匆忙或因为每个PART都在自己的开发人员上工作（即，没有“真正的”需求注释或代码可理解性）而发生这种情况，但是结果却完全令人困惑：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">恐慌</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格伦茨</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
复杂的算法不仅难以理解的变量连名字（</font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>co[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...）。</font><font style="vertical-align: inherit;">如果开发人员在发行说明中给我们提示，则代码将更具可读性。</font><font style="vertical-align: inherit;">结果，我没有花太多时间研究每个部分。</font><font style="vertical-align: inherit;">例外是负责U2A.EXE和U2E.EXE的3D引擎。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3D引擎第二现实</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/3d_end.png"></div><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/3d_end2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无论如何，我决定详细研究3D引擎，该引擎分为两个部分使用：</font></font><code>U2A.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和和</font></font><code>U2E.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
源代码是带有汇编程序优化过程的C（尤其是Gouro填充和阴影）：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CITY.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（主代码）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（库</font></font><code>visu.lib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVID.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（优化的汇编器视频（清洁，屏幕复制等）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADRAW.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（绘制对象和截断）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACALC.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（矩阵和快速sin / cos计算）。</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sr_3d_engine.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些组件的体系结构非常出色：该库</font></font><code>VISU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行所有复杂的任务，例如，加载资产：3DS对象，材料和流（摄像机和船舶运动）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
引擎对需要绘制的对象进行分类，并使用艺术家的算法对其进行渲染。</font><font style="vertical-align: inherit;">这会导致大量重绘，但是由于VGA锁存器允许您同时记录4个像素，所以还不错。</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个有趣的事实：</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎以“老式”方式执行变换：它不使用常见的齐次4x4矩阵，而是使用3 * 3旋转矩阵和位移矢量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是伪代码的摘要：</font></font><br>
<br>
<pre><code class="cpp hljs">      main(){<font></font>
<font></font>
            scenem=readfile(tmpname);  <span class="hljs-comment">// Load materials</span>
            scene0=readfile(tmpname);  <span class="hljs-comment">// Load animation</span><font></font>
<font></font>
            <span class="hljs-keyword">for</span>(f=<span class="hljs-number">-1</span>,c=<span class="hljs-number">1</span>;c&lt;d;c++){  <span class="hljs-comment">//Load objects</span>
              <span class="hljs-built_in">sprintf</span>(tmpname,<span class="hljs-string">"%s.%03i"</span>,scene,e);<font></font>
              co[c].o=vis_loadobject(tmpname);<font></font>
            }<font></font>
<font></font>
            vid_init(<span class="hljs-number">1</span>);<font></font>
            vid_setpal(cp);<font></font>
<font></font>
            <span class="hljs-keyword">for</span>(;;){<font></font>
<font></font>
                vid_switch();<font></font>
                _asm mov bx,<span class="hljs-number">1</span>   _asm <span class="hljs-keyword">int</span> <span class="hljs-number">0f</span>ch <span class="hljs-comment">// waitb for retrace via copper simulator interrupt call </span><font></font>
                vid_clear();<font></font>
                <font></font>
                <span class="hljs-comment">// parse animation stream, update objects</span>
                <span class="hljs-keyword">for</span>(;;){}<font></font>
<font></font>
                vid_cameraangle(fov); <span class="hljs-comment">// Field of vision</span><font></font>
<font></font>
                <span class="hljs-comment">// Calc matrices and add to order list (only enabled objects)</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">1</span>;ac&lt;conum;a++) <span class="hljs-keyword">if</span>(co[a].on) <span class="hljs-comment">/* start at 1 to skip camera */</span><font></font>
                    calc_applyrmatrix(o-&gt;r,&amp;cam);<font></font>
<font></font>
                <span class="hljs-comment">// Zsort via Bubble Sort</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>;ac&lt;ordernum;a++)
                    <span class="hljs-keyword">for</span>(b=a<span class="hljs-number">-1</span>;b&gt;=<span class="hljs-number">0</span> &amp;&amp; dis&gt;co[order[b]].dist;b--)<font></font>
<font></font>
                <span class="hljs-comment">// Draw</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>;ac&lt;ordernum;a++)<font></font>
                    vis_drawobject(o);<font></font>
              }<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);<font></font>
     }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现代系统的端口</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文发布后，许多开发人员开始将Second Reality移植到现代系统中。</font><font style="vertical-align: inherit;">Claudio Matsuoka着手创建</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr-port</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是Linux和OpenGL ES 2.0的C端口，到目前为止看起来还不错。</font><font style="vertical-align: inherit;">Nick Kovacs在PART PLZ方面做得很好，将其移植到C（现在它是sr-port源代码的一部分）以及</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">javascript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/l9/jm/iwl9jmypg-njcygljgtgi3zaxdg.png"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN501016/index.html">关于处理器架构的发展趋势，或者为什么我相信华为在服务器市场上的成功</a></li>
<li><a href="../zh-CN501018/index.html">如何解决一些Google翻译限制</a></li>
<li><a href="../zh-CN501020/index.html">如何在引擎盖下测试包含setTimeout / setInterval的代码</a></li>
<li><a href="../zh-CN501022/index.html">“我在沙漠中”：为什么自我孤立对我们构成严重压力，这一切导致了什么</a></li>
<li><a href="../zh-CN501026/index.html">远程银行识别：从复杂到简单，或从银行开始，为什么需要生物识别？</a></li>
<li><a href="../zh-CN501032/index.html">来自中国零件的廉价服务器。第一部分，铁</a></li>
<li><a href="../zh-CN501034/index.html">IBM每周研讨会-2020年5月</a></li>
<li><a href="../zh-CN501040/index.html">应用程序中的典型错误会导致postgresql膨胀。安德烈·萨尔尼科夫（Andrey Salnikov）</a></li>
<li><a href="../zh-CN501042/index.html">Likbez关于合规性：我们了解监管机构在信息安全领域的要求</a></li>
<li><a href="../zh-CN501044/index.html">Не держите людей за идиотов или почему человек с инженерным образованием может сжечь вышку сотовой связи (видео)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>