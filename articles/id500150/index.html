<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↖️ 🌪️ 🤦🏼 ROS dan Robot Pengemis Kotak Saraf 🛅 🎮 📂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Biasanya, dua pertanyaan seperti itu muncul untuk kerajinan seperti: "bagaimana?" dan untuk apa?" Publikasi itu sendiri dikhususkan untuk pertanyaan p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROS dan Robot Pengemis Kotak Saraf</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500150/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Biasanya, dua pertanyaan seperti itu muncul untuk kerajinan seperti: "bagaimana?" dan untuk apa?" Publikasi itu sendiri dikhususkan untuk pertanyaan pertama, dan saya akan segera menjawab pertanyaan kedua: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memulai proyek ini untuk menguasai robot, dimulai dengan Raspberry Pi dan kamera. Seperti yang Anda ketahui, salah satu cara terbaik untuk mempelajari sesuatu adalah dengan membuat tugas teknis dan berusaha memenuhinya, sambil mendapatkan keterampilan yang diperlukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada waktu itu, saya masih belum memiliki ide cemerlang di bidang robotika, jadi saya memutuskan untuk membuat proyek yang sangat menyenangkan - robot pengemis. Hasilnya adalah robot mandiri pada Raspberry Pi dan ROS, menggunakan Movidius Neural Cumpute Stick untuk mendeteksi wajah. Dia berkeliaran di sekitar ruangan, mencari orang, dan mengocok kaleng di depan mereka. Seperti apa bentuk robot ini:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pt/wp/nt/ptwpntdd13lkskxbxjuhoyx1oom.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Robot bergerak secara acak di sekitar ruangan, dan jika memperhatikan seseorang, ia menggulungnya dan mengocok botol untuk hal-hal kecil. </font><font style="vertical-align: inherit;">Untuk bersenang-senang, saya menambahkan sedikit ekspresi wajah kepadanya - dia tahu bagaimana menggerakkan alisnya: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/lm/aw/2xlmaw5tm_hogsuqfuvqwjmeblk.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah upaya pertama, robot mencoba untuk menemukan wajahnya lagi dalam pandangan, menoleh ke orang itu dan mengguncang bank lagi. </font><font style="vertical-align: inherit;">Tetapi apa yang terjadi jika Anda pergi saat ini:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/8x/xz/ko8xxzvzo_owit62gkv8z3wn1ik.gif"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Robot</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mengambil ide robot pengemis dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">majalah Popular Mechanics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Penulisan prototipe dari Chris Eckert bernama Gimme terlihat sangat estetis.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/374/8d6/dbc/3748d6dbcb97d04751dacd866eb94e07.jpg" alt="gambar" width="300" height="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ingin lebih berkonsentrasi pada fungsionalitas, jadi case ini dirakit dari bahan improvisasi. </font><font style="vertical-align: inherit;">Secara khusus, sudut PVC terbukti menjadi bahan paling serbaguna yang dapat Anda gunakan untuk menghubungkan hampir dua bagian. </font><font style="vertical-align: inherit;">Tampaknya saat ini robot tersebut terdiri dari lima persen sudut PVC dan sekrup M3. </font><font style="vertical-align: inherit;">Kasing itu sendiri terdiri dari tiga platform laminasi di mana kepala dan semua elektronik dipasang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basis robot adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 2B</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan kode ini ditulis dalam C ++ dan terletak di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penglihatan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memahami kenyataan, robot menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kamera Paspberry Pi Camera Module v2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dapat dikontrol menggunakan perpustakaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaspiCam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk deteksi wajah, saya mencoba beberapa pendekatan berbeda. Kualitas detektor klasik dari OpenCV tidak memuaskan saya, jadi pada akhirnya saya sampai pada solusi yang agak tidak standar. Deteksi orang yang terlibat dalam jaringan saraf, berjalan pada perangkat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Movidius Neural Compute Stick (NCS) di</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bawah kerangka kendali </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVINO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NCS adalah perangkat keras untuk peluncuran jaringan saraf yang efektif, di dalamnya terdapat beberapa prosesor vektor yang dirancang khusus untuk ini. Perangkat terhubung melalui USB dan hanya mengkonsumsi daya 1 Watt. Dengan demikian, NCS bertindak sebagai co-prosesor untuk Raspberry Pi, yang tidak menarik jaringan saraf. Sementara NCS sedang memproses frame berikutnya, prosesor Paspberry gratis untuk operasi lain. Perlu dicatat bahwa untuk pengoperasian perangkat yang optimal, diperlukan antarmuka USB 3.0, yang tidak tersedia pada Raspberry versi lama; dengan USB 2.0 juga berfungsi, lebih lambat. Selain itu, agar tidak memblokir konektor USB Raspberry, saya menghubungkan NCS ke kabel USB pendek. Saya menulis secara terperinci tentang bekerja dengan Neural Compute Stick </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di artikel saya sebelumnya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Awalnya saya mencoba berlatih</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detektor wajah sendiri dengan arsitektur MobileNet + SSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada kumpulan data terbuka. Detektor benar-benar bekerja, tetapi tidak terlalu stabil: dengan kemunduran yang tidak terhindarkan dari kondisi pemotretan (paparan dan gambar buram), kualitas detektor sangat menurun. Namun, setelah beberapa waktu, detektor wajah siap pakai muncul di OpenVINO, dan saya beralih ke detektor dengan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lampu SqueezeNet + SSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> arsitektur </font><font style="vertical-align: inherit;">, yang tidak hanya bekerja lebih baik dalam berbagai kondisi pengambilan gambar, tetapi juga lebih cepat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum mengunggah gambar ke NCS untuk mendapatkan prediksi detektor, gambar harus diproses terlebih dahulu. Detektor pilihan saya berfungsi dengan gambar berwarna</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>300</mn><mo>&amp;#x00D7;</mo><mn>300</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.815ex" height="2.009ex" viewBox="0 -755.5 4225.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-D7" x="1723" y="0"></use><g transform="translate(2724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>300</mn><mo>×</mo><mn>300</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">300 \times 300</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jadi gambar perlu dikompres dulu. Untuk melakukan ini, saya menggunakan algoritma penskalaan paling ringan - metode tetangga terdekat (INTER_NEAREST di perpustakaan OpenCV). Ini bekerja sedikit lebih cepat daripada metode interpolasi, dan hampir tidak mempengaruhi hasilnya. Penting juga memperhatikan urutan saluran gambar: detektor mengharapkan urutan BGR, jadi Anda perlu mengatur yang sama untuk kamera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya juga mencoba memisahkan pemrosesan video menjadi dua aliran, yang satu menerima frame berikutnya dari kamera dan memprosesnya, dan yang lain pada waktu itu mengunggah frame sebelumnya ke NCS dan menunggu hasil detektor. Dengan skema ini, secara teknis, kecepatan pemrosesan meningkat, tetapi penundaan antara menerima frame dan menerima deteksi untuknya juga meningkat. Karena ketertinggalan di belakang kenyataan ini, pemantauan wajah menjadi lebih sulit, jadi pada akhirnya saya menolak skema ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain benar-benar mendeteksi wajah, mereka juga harus dilacak untuk menghindari kesalahan detektor. Untuk melakukan ini, saya menggunakan pelacak ringan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple Online Realtime Tracker (SORT)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pelacak sederhana ini terdiri dari dua bagian: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">algoritma Hungaria</font></a><font style="vertical-align: inherit;"> digunakan untuk mencocokkan objek pada bingkai yang berdekatan</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan untuk memprediksi lintasan objek, jika tiba-tiba menghilang - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filter Kalman</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ketika saya bermain dengan pelacakan wajah, saya menemukan bahwa lintasan yang diprediksi oleh filter Kalman bisa sangat tidak masuk akal dengan gerakan tiba-tiba, yang lagi-lagi hanya mempersulit proses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, saya mematikan filter Kalman, hanya menyisakan algoritma pencocokan wajah dan penghitung jumlah frame berurutan di mana wajah terdeteksi - dengan cara ini saya menghilangkan positif palsu dari detektor. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform atas, dari kiri ke kanan: kamera, servos untuk mengontrol kepala dan alis, sakelar, terminal daya, Tombol Merah Besar.</font></font></i><br>
<img src="https://habrastorage.org/webt/hb/ky/kk/hbkykkpwtkhtfl39aonaop5indg.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu lintas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk gerakan, robot memiliki lima servos: dua FS5103R rotasi servos terus menerus memutar roda; Ada dua FS5109Ms biasa, satu di antaranya memutar kepala, dan yang lain mengocok kaleng; akhirnya, SG90 kecil menggerakkan alisnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sejujurnya, mini-servos SG90 tampak seperti sampah bagi saya - salah satu servos saya memiliki lebar pulsa kontrol yang salah, dan hanya satu yang selamat di antara empat lainnya. Dalam keadilan, saya tidak sengaja mengambil salah satu pelayan dengan siku saya, tetapi dua yang lain tidak tahan beban (saya dulu menggunakannya untuk kepala dan kaleng). Bahkan servo terakhir, yang mendapat pekerjaan paling sederhana - menggerakkan alis, harus menyodok tongkat dari waktu ke waktu agar tidak mengganjal. Dengan servos lain, saya tidak melihat adanya masalah. Benar, servos rotasi kontinu kadang-kadang harus dikalibrasi agar tidak berputar dalam keadaan tidak aktif - untuk ini ada regulator kecil di atasnya yang dapat diputar dengan obeng jam-kepala. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengelola servos dengan Raspberry, ternyata, tidak begitu sederhana. Pertama, mereka dikendalikan oleh</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modulasi lebar-pulsa (PWM / PWM)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan pada Raspberry hanya ada dua pin yang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didukung PWM oleh perangkat keras</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kedua, tentu saja, Raspberry tidak akan dapat memberi daya pada servos, tidak akan tahan terhadap hal ini. Untungnya, masalah ini diselesaikan menggunakan pengontrol PWM eksternal. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adafruit PCA9685</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah pengontrol PWM 16-kanal yang dapat dikontrol melalui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antarmuka I2C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Juga sangat nyaman karena memiliki terminal untuk memasok daya untuk servos. Selain itu, [secara teoritis] dimungkinkan untuk menghubungkan hingga 62 pengontrol, sambil menerima hingga 992 pin kendali - untuk ini Anda perlu menetapkan alamat unik untuk setiap pengontrol menggunakan jumper khusus. Jadi jika Anda tiba-tiba membutuhkan pasukan servos - Anda tahu apa yang harus dilakukan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengontrol PCA9685, ada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perpustakaan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tingkat tinggi </font><font style="vertical-align: inherit;">yang bertindak sebagai ekstensi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WiringPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bekerja dengan hal ini cukup mudah - selama inisialisasi, itu menciptakan 16 pin virtual di mana Anda dapat menulis sinyal PWM, tetapi pertama-tama Anda harus menghitung jumlah kutu. </font><font style="vertical-align: inherit;">Untuk mengubah tuas servo ke sudut tertentu dalam rentang [0, 180], Anda harus terlebih dahulu menerjemahkan sudut ini ke dalam rentang panjang pulsa kontrol dalam milidetik [SERVO_MS_MIN, SERVO_MS_MAX]. </font><font style="vertical-align: inherit;">Untuk semua servos saya, nilai-nilai ini sekitar 0,6 ms dan 2,4 ms, masing-masing. </font><font style="vertical-align: inherit;">Secara umum, nilai-nilai ini dapat ditemukan dalam lembar data servo, tetapi praktik telah menunjukkan bahwa mereka dapat berbeda, sehingga mereka mungkin perlu dipilih. </font><font style="vertical-align: inherit;">Kemudian bagi nilai yang dihasilkan dengan 20 ms (nilai standar dari panjang siklus kontrol) dan kalikan dengan jumlah maksimum kutu PCA9685 (4096):</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">driveDegs</span><span class="hljs-params">(<span class="hljs-keyword">float</span> angle, <span class="hljs-keyword">int</span> pin)</span> </span>{
    <span class="hljs-keyword">int</span> ticks = (<span class="hljs-keyword">int</span>) (PCA_MAX_PWM * (angle/<span class="hljs-number">180.0f</span>*(SERVO_MS_MAX-SERVO_MS_MIN) + SERVO_MS_MIN) / <span class="hljs-number">20.0f</span>); <font></font>
    pwmWrite(pin, ticks);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demikian pula, ini dilakukan dengan rotasi servos terus menerus - alih-alih sudut, kami mengatur kecepatan dalam kisaran [-1,1].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya merakit sasis robot, dan juga bodi, dari cara improvisasi: Saya meletakkan roda furnitur pada drive servo rotasi terus menerus, dan penopang bola furnitur bertindak sebagai roda ketiga. Sebelumnya, bukannya itu, roda berdiri di atas dukungan berputar, tetapi dengan sasis seperti itu sulit untuk membuat tikungan yang tepat, jadi saya harus menggantinya. Ada juga roda kecil di bawah kaleng untuk memindahkan sebagian berat dari servo ke housing. Suatu hal sederhana yang tidak jelas bagi saya pada awalnya adalah bahwa tuas servo harus diperbaiki dengan sekrup, terutama untuk roda, sehingga mereka tidak jatuh sepanjang jalan. Karena kebodohan seperti itu, saya harus mengulang sasis sekali. Saya juga membuat robot bemper lebar yang terbuat dari sudut PVC sehingga tidak sering terjebak.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tentang apa yang dapat Anda lakukan. Pertama, Anda bisa mengguncang toples dan menggerakkan alis - untuk ini, Anda hanya perlu memutar tuas servo ke sudut yang telah dipilih sebelumnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua, Anda bisa memutar kepala Anda. Saya tidak ingin kepala berputar pada kecepatan maksimum servo, karena memiliki kamera di dalamnya. Oleh karena itu, saya memutuskan untuk mengurangi kecepatan secara terprogram: Saya perlu memutar tuas sedikit, kemudian menunggu beberapa milidetik - dan seterusnya hingga sudut yang diinginkan tercapai. Dalam hal ini, perlu untuk mengingat posisi absolut kepala saat ini dan setiap kali memeriksa apakah ia telah melampaui batas yang diizinkan (pada robot saya itu berada dalam kisaran [10, 90] derajat).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketiga, Anda dapat mengubah arah gerakan dengan mengubah kecepatan rotasi roda. </font><font style="vertical-align: inherit;">Dengan cara yang sama, Anda dapat memutar platform, misalnya, untuk mengikuti wajah. </font><font style="vertical-align: inherit;">Kecepatan sudut rotasi tergantung pada servos sendiri dan pada lokasi mereka pada sasis, sehingga lebih mudah untuk mengukurnya sekali dan kemudian memperhitungkannya saat menikung. </font><font style="vertical-align: inherit;">Untuk menemukan penundaan yang diperlukan antara menyalakan motor untuk rotasi dan mematikannya, Anda perlu membagi modul sudut dengan kecepatan sudut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terakhir, Anda dapat memutar kepala dan sasis secara bersamaan dan tidak sinkron agar tidak membuang waktu. </font><font style="vertical-align: inherit;">Saya melakukannya seperti ini:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">auto</span> waitRotation = <span class="hljs-built_in">std</span>::async(<span class="hljs-built_in">std</span>::launch::async, rotatePlatform, platformAngle);<font></font>
success = driveHead(headAngle);<font></font>
waitRotation.wait();<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform pusat, dari kiri ke kanan: PCA9685, power bus, Raspberry Pi, MCP3008 ADC</font></font></i><br>
<img src="https://habrastorage.org/webt/bq/q1/8_/bqq18_ilwmgadlcsz0ydepdk44u.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navigasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lalu saya tidak menyulitkan apa pun, jadi robot hanya menggunakan dua pencari jarak inframerah Sharp GP2Y0A02YK untuk navigasi. Ini juga tidak begitu sederhana, karena sensornya analog, tetapi Raspberry, tidak seperti Arduino, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">tidak</font></a><font style="vertical-align: inherit;"> memiliki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input analog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Masalah ini diselesaikan oleh konverter analog-ke-digital (ADC / ADC) - Saya menggunakan MCP3008 10-bit, 8-channel. Itu dijual sebagai microcircuit terpisah, sehingga harus disolder ke papan sirkuit tercetak dan pin juga disolder di sana untuk membuatnya lebih mudah untuk terhubung. Juga, atas saran bati saya, yang lebih banyak meraba-raba dalam sirkuit, saya menyolder dua kapasitor (keramik dan elektrolitik) antara kaki-kaki catu daya dan tanah untuk menyerap suara dari bagian digital dari seluruh rangkaian. Output sensor tidak lebih dari tiga volt pada output, sehingga 3.3v dengan Raspberry dapat dihubungkan sebagai tegangan ADC referensi (VREF) - sama seperti untuk catu daya MCP3008 (VDD). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCP3008 dapat dikontrol melalui antarmuka </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan untuk ini bahkan lebih mudah untuk menemukan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode yang sudah jadi di GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meskipun demikian, untuk pekerjaan yang mudah dengan ADC, Anda akan memerlukan beberapa tarian dengan rebana.</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> <span class="hljs-title">analogRead</span><span class="hljs-params">(mcp3008Spi &amp;adc, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> channel)</span>
</span>{
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> spi_data[<span class="hljs-number">3</span>];
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> val = <span class="hljs-number">0</span>;<font></font>
<font></font>
    spi_data[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;  <span class="hljs-comment">// start bit</span>
    spi_data[<span class="hljs-number">1</span>] = <span class="hljs-number">0b10000000</span> | ( channel &lt;&lt; <span class="hljs-number">4</span>); <span class="hljs-comment">// mode and channel</span>
    spi_data[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// anything</span>
    adc.spiWriteRead(spi_data, <span class="hljs-keyword">sizeof</span>(spi_data));<font></font>
  <font></font>
    <span class="hljs-comment">// read value, combine last two bits of second byte with whole third byte</span>
    val = (spi_data[<span class="hljs-number">1</span>]&lt;&lt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0b1100000000</span>; <font></font>
    val |= (spi_data[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xff</span>);
    <span class="hljs-keyword">return</span> val;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tiga byte harus dikirim ke MCP3008, di mana bit mulai ditulis dalam byte pertama, dan mode dan nomor saluran (0-7) di byte kedua. </font><font style="vertical-align: inherit;">Kita juga mendapatkan kembali tiga byte, setelah itu kita perlu merekatkan dua bit paling tidak signifikan dari byte kedua dengan semua bit yang ketiga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita bisa mendapatkan nilai dari sensor, kita perlu mengkalibrasi mereka, karena kedua sensor mungkin sedikit berbeda satu sama lain. </font><font style="vertical-align: inherit;">Secara umum, tampilan dari kejauhan karena kekuatan sinyal dari sensor ini adalah non-linear dan tidak terlalu sederhana ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk lebih jelasnya lihat lembar data, pdf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Oleh karena itu, cukup untuk mengambil dua koefisien, ketika dikalikan dengan mana sensor akan memberikan nilai 1,0 pada jarak yang berarti dan sama.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pembacaan sensor bisa sangat berisik, terutama pada hambatan yang sulit, jadi saya menggunakan EWMA untuk menghaluskan sinyal dari masing-masing sensor. </font><font style="vertical-align: inherit;">Saya memilih parameter penghalusan oleh mata, sehingga sinyal tidak membuat kebisingan dan tidak jauh tertinggal dari kenyataan. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tampak depan: bank, pengukur jarak dan bemper.</font></font></i><br>
<img src="https://habrastorage.org/webt/kb/vw/l-/kbvwl-usmln86iqj8aq236ifhpo.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nutrisi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, mari kita evaluasi apa yang dikonsumsi robot saat ini ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tentang konsumsi Raspberry dan peripheral saat ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 2B: tidak kurang dari 350 mA, tetapi lebih banyak di bawah beban (hingga 750-820 mA (?));</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kamera: sekitar 250 mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neural Compute Stick: menyatakan konsumsi daya 1 watt, pada tegangan 5 volt pada USB adalah 200 mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor IR: masing-masing 33 mA ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lembar data, pdf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li>MCP3008:  ,  0.5  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">, pdf</a>);</li>
<li>PCA9685:  , 6  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">, pdf</a>);</li>
<li>:  ~150-200   1500-2000     (stall current),          (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"> FS5109M, pdf</a>)</li>
<li>HDMI (   ): 50 ;</li>
<li> +  ( ): ~200 .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara total, dapat diperkirakan bahwa 1,5-2,5 ampere harus cukup, asalkan semua servos tidak bergerak secara bersamaan di bawah beban berat. Pada saat yang sama, Raspberry membutuhkan tegangan 5 volt bersyarat, dan untuk servos - 4,8-6 volt. Masih menemukan sumber daya yang memenuhi persyaratan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, saya memutuskan untuk menghidupkan robot dari baterai format </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18650.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jika Anda mengambil dua </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">baterai ROBITON 3.4 / Li18650</font></a><font style="vertical-align: inherit;"> (3,6 volt, 3400 mAh, arus keluaran maksimum 4875 mA) dan menghubungkannya secara seri, mereka dapat menghasilkan hingga 4,8 ampere pada tegangan 7,2 volt. Dengan arus konsumsi 1,5-2,5 ampere, mereka harus cukup untuk satu atau dua jam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baterai, bagaimanapun, memiliki daya tarik: terlepas dari faktor bentuk yang ditunjukkan 18650, ukurannya jauh dari</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>18</mn><mo>&amp;#x00D7;</mo><mn>650</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.653ex" height="2.009ex" viewBox="0 -755.5 3725.4 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-D7" x="1223" y="0"></use><g transform="translate(2223,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>18</mn><mo>×</mo><mn>650</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">18 \times 650</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mm - lebih panjang beberapa milimeter karena sirkuit kontrol pengisian daya bawaan. Karena itu, saya harus menusuk kompartemen baterai dengan pisau agar pas di sana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetap hanya untuk menurunkan tegangan hingga 5 volt. Untuk ini, saya menggunakan dua konverter DC-DC step-down terpisah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DFRobot Power Module</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sepotong besi ini memungkinkan Anda untuk menurunkan tegangan pada tegangan input 3,6-25 volt dan perbedaan tegangan setidaknya 0,6 volt. Untuk kenyamanan, ini memiliki saklar yang memungkinkan Anda untuk memilih tepat 5 volt pada output, atau Anda dapat mengkonfigurasi tegangan output sewenang-wenang menggunakan regulator khusus. Saya mengatur kedua konverter menjadi 5 volt; salah satunya memberi makan Raspberry melalui konektor Micro-USB, dan yang kedua memberi makan servos melalui terminal PCA9685. Ini diperlukan untuk memaksimalkan catu daya dari bagian logis dan daya robot sehingga mereka tidak saling mengganggu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada tahap debugging, saya menggunakan catu daya Cina 9 volt, 2 ampere sebagai ganti baterai, dan itu sudah cukup bagi robot untuk bekerja - saya menghubungkannya, seperti baterai, ke dua konverter DC-DC. Oleh karena itu, untuk kenyamanan, saya membuat terminal pada robot, di mana Anda dapat menghubungkan catu daya atau baterai untuk dipilih. Ini sangat membantu ketika saya benar-benar menulis ulang semua kode pada ROS, dan saya harus men-debug robot untuk waktu yang lama, termasuk servos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk kenyamanan, saya juga harus membuat "bus listrik" - pada kenyataannya, hanya sepotong papan dengan tiga baris pin yang terhubung untuk ground, masing-masing 3.3v dan 5v. Bus terhubung ke pin Raspberry yang sesuai. Hanya pengukur jarak IR yang diaktifkan dari bus 5v, dan MCP3008 dan PCA9685 dari bus 3.3v.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tentu saja, sesuai dengan tradisi lama yang baik, saya menempatkan Tombol Merah Besar pada robot - ketika ditekan, itu hanya mengganggu seluruh rangkaian daya. </font><font style="vertical-align: inherit;">Itu tidak perlu digunakan untuk berhenti darurat, tetapi menyalakan robot dengan bantuan tombol benar-benar lebih nyaman. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform bawah, dari kiri ke kanan: kompartemen baterai, NCS, konverter DC-DC, drive servo dengan roda, pengukur jarak.</font></font></i><br>
<img src="https://habrastorage.org/webt/od/tf/6b/odtf6b5gksijt0nhbflim7wrh1m.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrol robot</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada Wi-Fi di Raspberry Pi 2B, jadi saya harus terhubung melalui ssh melalui kabel Ethernet (omong-omong, ini bisa dilakukan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">langsung dari laptop, tanpa menggunakan router</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Ternyata skema ini: kita terhubung melalui ssh melalui kabel, mulai robot dan cabut kabel. Kemudian dapat dikembalikan ke tempatnya untuk mengakses Raspberry lagi. Ada solusi yang lebih elegan, tetapi saya memutuskan untuk tidak menyulitkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar robot dapat dengan mudah dihentikan tanpa mematikan, saya menambahkan saklar Soviet besar-besaran (dari kapal selam?) Untuk itu, ketika Anda mematikannya, program berakhir dan robot berhenti. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saklar terhubung ke tanah dan ke salah satu pin GPIO Raspberry, dan Anda bisa membacanya menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perpustakaan WiringPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">wiringPiSetup();<font></font>
pinMode(PIN_SWITCH, INPUT);<font></font>
pullUpDnControl(PIN_SWITCH, PUD_UP);<font></font>
<span class="hljs-keyword">bool</span> value = digitalRead(BB_PIN_SWITCH);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu dicatat bahwa dengan koneksi ini, tegangan pada pin harus ditarik hingga 3.3V, dan pada saat yang sama itu akan menghasilkan sinyal tinggi dalam keadaan terbuka, dan sinyal rendah dalam keadaan tertutup.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menyatukan semuanya</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utas</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sekarang semua hal di atas perlu digabungkan menjadi satu program yang mengendalikan robot. </font><font style="vertical-align: inherit;">Di versi pertama robot, saya melakukan ini menggunakan utas ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pthread</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Versi ini ada di cabang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utama</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi kode di sana cukup menyeramkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program ini bekerja dalam empat utas: satu utas mengambil bingkai dari kamera dan memulai detektor pada NCS; </font><font style="vertical-align: inherit;">aliran kedua membaca data dari pengukur jarak; </font><font style="vertical-align: inherit;">utas ketiga memonitor sakelar dan mengatur variabel global </font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menjadi</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika tidak aktif; Utas utama bertanggung jawab atas perilaku robot dan kontrol servo. Utas memiliki petunjuk yang sama dengan utas utama, yang dengannya mereka menulis hasil pekerjaan mereka. Saya membatasi vektor yang menyimpan informasi tentang wajah yang ditemukan oleh detektor ke mutex, dan menyatakan variabel umum lainnya yang lebih sederhana sebagai atom. Untuk mengoordinasikan aliran detektor wajah dengan utas utama, ada bendera </font></font><code>face_processed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang direset ketika hasil baru berasal dari detektor, dan naik ketika utas utama menggunakan hasil ini untuk memilih perilaku - ini diperlukan agar tidak memproses data lama yang mungkin tidak relevan setelah bergerak. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi ROS</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
dengan stream berfungsi dengan baik, tetapi saya memulai semua ini untuk mempelajari sesuatu, jadi mengapa tidak pada saat yang sama menguasai</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">Saya telah mendengar kerangka ini sejak lama, dan saya bahkan harus bekerja sedikit dengan hackathon, jadi pada akhirnya saya memutuskan untuk menulis ulang semua kode pada ROS. </font><font style="vertical-align: inherit;">Versi kode ini terletak di cabang default </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan terlihat jauh lebih baik. </font><font style="vertical-align: inherit;">Jelas bahwa implementasi pada ROS hampir pasti akan lebih lambat daripada implementasi pada arus karena overhead pengiriman pesan dan yang lainnya - satu-satunya pertanyaan adalah berapa banyak?</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsep ROS</font></font></b>
                        <div class="spoiler_text">ROS (Robot Operating System) —     ,             ,   ,        .<br>
<br>
    ,  ,  ,     (node), ,    ,       .<br>
<br>
      (topic)      (message)  ,         -    . <br>
<br>
    —   (service).         ,       ,     .      « »,    .<br>
<br>
         <code>.msg</code>  <code>.srv</code> .          .<br>
<br>
 ROS    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"> </a>.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk robot saya, saya tidak menggunakan paket yang sudah jadi dengan algoritma dari ROS, saya hanya merancang kode robot dalam paket terpisah yang terdiri dari lima node yang saling berkomunikasi menggunakan pesan dan layanan ROS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node paling sederhana </font></font><code>switch_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,, memonitor keadaan sakelar. Segera setelah sakelar dimatikan, node mulai mengirim spam ke pesan yang tidak informatif dari jenis </font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">topik </font></font><code>terminator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini adalah sinyal ke simpul utama bahwa sudah waktunya untuk menyelesaikan pekerjaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node kedua, </font></font><code>sensor_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secara berkala membaca bacaan kedua pengukur jarak IR dan mengirimkannya ke topik dalam </font></font><code>sensor_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu pesan. Juga, simpul ini bertanggung jawab untuk pemrosesan sinyal: penskalaan oleh faktor kalibrasi dan rata-rata bergerak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simpul ketiga</font></font><code>camera_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dia bertanggung jawab untuk segala sesuatu yang berkaitan dengan wajah: dia mengambil gambar dari kamera, memprosesnya, menerima hasil detektor, melewati mereka melalui pelacak, dan kemudian menemukan wajah yang paling dekat dengan pusat bingkai - robot toh tidak menggunakan sisanya, tetapi Anda ingin membuat pesan yang lebih kecil. Pesan yang dikirim node ke topik </font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berisi nomor bingkai, fakta memiliki wajah (karena Anda juga perlu tahu tentang tidak adanya wajah), koordinat relatif sudut kiri atas, lebar dan tinggi wajah. Ini adalah bagaimana deskripsi jenis pesan dalam file terlihat seperti </font></font><code>DetectionBox.msg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">int64 count<font></font>
bool present<font></font>
float32 x<font></font>
float32 y<font></font>
float32 width<font></font>
float32 height<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simpul keempat ,, </font></font><code>servo_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bertanggung jawab atas servos. Pertama, ia mendukung layanan </font></font><code>servo_action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang memungkinkan salah satu tindakan dilakukan oleh servos dengan nomornya: untuk menempatkan seluruh simpul dalam keadaan awal (alis, bank, kepala, hentikan sasis); pindahkan kepala ke kondisi awal; kocok botol; menggambarkan dengan satu alis satu dari tiga ekspresi (baik, netral, jahat). Kedua, menggunakan layanan ini, </font></font><code>servo_speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat mengatur kecepatan baru untuk kedua roda dengan mengirimkannya dalam permintaan. Kedua layanan tidak mengembalikan apa pun. Akhirnya, ada layanan </font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang memungkinkan Anda untuk memutar kepala dan / atau sasis sudut tertentu relatif terhadap posisi saat ini. Layanan ini kembali </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika dimungkinkan untuk memutar kepala setidaknya sebagian, dan</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika tidak, dalam kasus ketika kepala sudah berada di perbatasan sudut yang diizinkan, dan kami mencoba untuk mengubahnya lebih jauh. </font><font style="vertical-align: inherit;">Jika kedua sudut dalam permintaan adalah nol, layanan berputar secara tidak sinkron, seperti ditunjukkan di atas. </font><font style="vertical-align: inherit;">Dalam loop utama, simpul servo tidak melakukan apa pun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini, misalnya, adalah deskripsi layanan </font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">float32 head_delta<font></font>
float32 platform_delta<font></font>
---<font></font>
bool head_success<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap node yang terdaftar mendukung layanan </font></font><code>terminate_{switch, camera, sensor, servo}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan permintaan respons kosong, yang menghentikan operasi node. </font><font style="vertical-align: inherit;">Diimplementasikan dengan cara ini:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa kode</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">...
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">atomic_bool</span> is_running; <span class="hljs-comment">// global</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">terminate_node</span><span class="hljs-params">(std_srvs::Empty::Request &amp;req, std_srvs::Empty::Response &amp;ignored)</span> </span>{<font></font>
    is_running = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> **argv)</span> </span>{<font></font>
    is_running = <span class="hljs-literal">true</span>;<font></font>
    ...<font></font>
    <span class="hljs-keyword">while</span> (is_running &amp;&amp; ros::ok()) {
        <span class="hljs-comment">// do stuff</span><font></font>
    }<font></font>
    ...<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node memiliki variabel global </font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nilai yang menentukan siklus utama dari node. Layanan hanya me-reset variabel ini, dan loop utama terputus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada juga simpul utama </font></font><code>beggar_bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di mana logika dasar robot diimplementasikan. Sebelum dimulainya loop utama, ia berlangganan topik </font></font><code>sensor_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menyimpan konten pesan dalam variabel global dalam fungsi panggilan balik. Dia juga berlangganan ke topik </font></font><code>terminator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, panggilan balik yang me-reset bendera </font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mengganggu loop utama. Juga, sebelum siklus dimulai, node mengumumkan antarmuka untuk layanan dari node servo dan menunggu beberapa detik untuk memulai node lain. Setelah loop utama berakhir, simpul ini memanggil layanan</font></font><code>terminate_{switch, camera, sensor, servo}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dengan demikian mematikan semua node lain, dan kemudian mematikannya sendiri. Yaitu, ketika sakelar dimatikan, kelima simpul menyelesaikan operasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beralih ke ROS memaksa saya untuk mengubah struktur program cukup banyak. Sebagai contoh, sebelumnya dimungkinkan untuk mengubah kecepatan roda dengan frekuensi tinggi, dan ini bekerja dengan baik, tetapi layanan ROS bekerja dengan urutan besarnya lebih lambat, jadi saya harus menulis ulang kode sehingga layanan dipanggil hanya ketika kecepatannya benar-benar berubah (dalam "mode malas"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS juga memungkinkan Anda menjalankan semua simpul robot dengan cukup mudah. Untuk melakukan ini, Anda perlu menulis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file peluncuran .launch yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mencantumkan semua node dan atribut lain dari robot dalam format xml, dan kemudian jalankan perintah:</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch beggar_bot robot.launch</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROS vs pthread</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sekarang, akhirnya, Anda dapat membandingkan kecepatan versi ROS dan versi pthread. </font><font style="vertical-align: inherit;">Saya melakukannya dengan cara ini: utas / simpul yang bertanggung jawab untuk bekerja dengan kamera menganggap FPS-nya (sebagai elemen paling lambat), asalkan semua yang lain juga berfungsi. </font><font style="vertical-align: inherit;">Untuk versi pthread, saya secara konsisten mendapatkan FPS 9,99 atau lebih, untuk versi ROS ternyata sekitar 8,3. </font><font style="vertical-align: inherit;">Sebenarnya, ini cukup untuk mainan seperti itu, tetapi biaya overhead cukup terlihat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perilaku robot</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idenya cukup sederhana: jika robot melihat seseorang, dia harus menyetir ke arahnya dan mengocok kaleng. Mengocok botol cukup sederhana dan menyenangkan, tetapi pertama-tama Anda harus menghubungi orang tersebut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada fungsi </font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang, jika ada wajah di bingkai, memutar sasis dan kepala robot ke arahnya (hanya wajah yang paling dekat dengan pusat yang diperhitungkan). Ini diperlukan agar robot selalu mempertahankan arahnya pada seseorang, jika ia berada dalam bingkai, dan juga melihat langsung ke wajah ketika ia mengocok botol. </font><font style="vertical-align: inherit;">Variabel yang sama digunakan </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
untuk menyinkronkan fungsi ini dengan topik </font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><code>face_processed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, seperti dalam versi dengan stream. Idenya sama - kami hanya ingin memproses data sekali saja, karena robot terus bergerak. Fungsi pertama menunggu sampai panggilan balik topik dengan deteksi menurunkan bendera bahwa frame terakhir telah diproses. Sementara dia menunggu, dia terus-menerus menelepon </font></font><code>ros::spinOnce()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk menerima pesan baru (secara umum, ini harus dilakukan di mana pun program mengharapkan data baru). Jika ada wajah dalam bingkai, sudut dihitung, yang perlu memutar platform dan kepala - ini dapat dilakukan dengan mengetahui koordinat relatif dari pusat wajah dan bidang pandang kamera secara horizontal dan vertikal. Setelah itu, Anda dapat memanggil layanan </font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan memindahkan robot.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada satu titik halus: informasi tentang posisi wajah tertinggal di belakang gerakan wajah yang sebenarnya dan mungkin tertinggal di belakang gerakan robot itu sendiri. Oleh karena itu, robot dapat melebih-lebihkan sudut rotasi, karena itu kepala mulai bergerak bolak-balik dengan peningkatan amplitudo. Untuk mencegah ini, saya membuat penundaan setelah pindah (300 ms), dan juga melewatkan satu bingkai setelah pindah. Untuk tujuan yang sama, sudut rotasi sasis dan kepala dikalikan dengan faktor 0,8 (komponen-P dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengontrol PID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> masuk akal </font><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi</font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengembalikan status seseorang. </font><font style="vertical-align: inherit;">Seseorang dapat: absen, cukup dekat dengan pusat, terlalu jauh dari robot; </font><font style="vertical-align: inherit;">Pilihan lain - ketika kita menghidupkan robot dan tidak tahu apa yang terjadi pada wajah (dalam proses pencarian); </font><font style="vertical-align: inherit;">masih ada kasus langka ketika kepala berada di perbatasan, itulah sebabnya tidak mungkin untuk beralih ke wajah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suatu hal yang agak sederhana terjadi di loop utama:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telepon </font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sampai orang tersebut memiliki status tertentu (apa pun, kecuali untuk "dalam proses pencarian"). </font><font style="vertical-align: inherit;">Pada akhir langkah ini, robot akan melihat langsung ke wajah.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika wajah ditemukan dan dekat: </font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kocok kaleng;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temukan wajahnya lagi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika wajah sudah di tempat, buatlah ekspresi yang baik dengan alis dan kocok botol lagi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika wajah telah menghilang, buatlah ekspresi marah dengan alis;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berbaliklah, pergi ke awal siklus.</font></font></li>
</ol><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika tidak ada orang (atau jauh) - navigasi di sekitar ruangan:</font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ada jauh dari rintangan di kedua sisi, maju terus (jika wajah ditemukan, tetapi ternyata terlalu jauh, robot akan pergi ke orang tersebut);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika rintangan dekat di kedua sisi, lakukan putaran acak di kisaran </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy=&quot;false&quot;>]</mo><mo>&amp;#x222A;</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>180</mn><mo>,</mo><mo>&amp;#x2212;</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.479ex" height="2.634ex" viewBox="0 -809.3 9678.3 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5D" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-222A" x="3726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5B" x="4616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2212" x="4895" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2C" x="7175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2212" x="7620" y="0"></use><g transform="translate(8398,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5D" x="9399" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">[</mo><mo>−</mo><mn>180</mn><mo>,</mo><mo>−</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-3">[90, 180] \cup [-180, -90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika rintangan hanya ada di satu sisi, putar ke arah yang berlawanan dengan sudut acak </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.815ex" height="2.634ex" viewBox="0 -809.3 2503.7 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2C" x="779" y="0"></use><g transform="translate(1224,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5D" x="2225" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-4">[0, 90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika gerakan maju berlanjut terlalu lama (mungkin macet), tarik sedikit ke belakang dan belok secara acak di kisaran </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy=&quot;false&quot;>]</mo><mo>&amp;#x222A;</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>180</mn><mo>,</mo><mo>&amp;#x2212;</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.479ex" height="2.634ex" viewBox="0 -809.3 9678.3 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5D" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-222A" x="3726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5B" x="4616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2212" x="4895" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2C" x="7175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-2212" x="7620" y="0"></use><g transform="translate(8398,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjpEZ24IswBCGD8h3ZV3LBUBBPHcw#MJMAIN-5D" x="9399" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">[</mo><mo>−</mo><mn>180</mn><mo>,</mo><mo>−</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">[90, 180] \cup [-180, -90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font></li>
</ol><br>
 </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritma ini tidak mengklaim sebagai kecerdasan buatan yang kuat, namun, perilaku acak dan bemper lebar memungkinkan robot untuk keluar dari hampir semua posisi, cepat atau lambat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terlepas dari kesederhanaannya, proyek ini mencakup banyak topik non-sepele: bekerja dengan sensor analog, bekerja dengan PWM, visi komputer, koordinasi tugas-tugas yang tidak sinkron. </font><font style="vertical-align: inherit;">Ditambah lagi, ini sangat menyenangkan. </font><font style="vertical-align: inherit;">Mungkin, lebih lanjut saya akan melakukan sesuatu yang lebih bermakna, tetapi lebih dengan bias dalam pembelajaran yang mendalam. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai bonus - galeri:</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/el/cw/jd/elcwjdoa21liogjvhakstzg-yru.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/il/12/fp/il12fpucbbreblnwyb2ojwsfmwu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3w/kr/7m/3wkr7mfjqjo2b_f9kvekia82ztq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/z4/3q/wr/z43qwrmlfgwndbi3dw-jnvxzqew.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id500140/index.html">"Hingga 10 ribu": lebih dari 25 ulasan headphone</a></li>
<li><a href="../id500142/index.html">Kelola hak di tingkat fasilitas</a></li>
<li><a href="../id500144/index.html">David O'Brien (Xirus): Metrik! Metrik! Metrik! Bagian 1</a></li>
<li><a href="../id500146/index.html">Pencarian pekerjaan di Jerman sebagai manajer produk dan banyak lagi. Bagian 3/5. Apa yang perlu Anda lakukan sebelum mulai mengirim CV</a></li>
<li><a href="../id500148/index.html">Mikrotik firewall filter: skrip yang menghasilkan dasar untuk kebijakan penyaringan</a></li>
<li><a href="../id500152/index.html">Bagaimana saya mengintegrasikan terminal POS dan FR IKKM-Touch dalam 1C: enterprise</a></li>
<li><a href="../id500154/index.html">Pembelajaran Mesin Rahasia. Perpustakaan PySyft</a></li>
<li><a href="../id500158/index.html">Interaksi SwiftUI dengan Redux</a></li>
<li><a href="../id500160/index.html">Elemen visual</a></li>
<li><a href="../id500162/index.html">Tutorial pemrosesan data olahraga python yang bagus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>