<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õΩÔ∏è ü§ôüèæ üè§ Tinkov API. Investment. First steps üôéüèΩ ‚ò¶Ô∏è üçß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Almost from the first days I became a client of Tinkov. Investments. 
 
 And from that moment on, vague doubts torment me - does the personal account ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tinkov API. Investment. First steps</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496722/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almost from the first days I became a client of Tinkov. Investments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And from that moment on, vague doubts torment me - does the personal account reflect objective reality? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fact is that I buy securities denominated in dollars, but in LC the prices of all assets are displayed in dollars, and the total value of the portfolio in rubles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And I don‚Äôt understand if the dollar has grown or am I such a successful investor? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what about commissions, taxes and other dividends? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôd like to take all my transactions and write them in FIFO, as in stock accounting ... And put the dividends received on top, and then deduct taxes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then I‚Äôll see the result that I understand.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It turned out that Tinkov has an API that allows you to write trading robots (I‚Äôm not at all interested in this), as well as upload data on his portfolio and operations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This API has an official description, but not everything was clear to me, I had to understand it. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The results of these showdowns present to your attention. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Useful links: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">description Another description</font></font></a><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting a token and installing a library</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before you begin, you need to install the library and get a token. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Library Installation:</font></font><br>
<br>
<pre><code class="plaintext hljs">pip install -i https://test.pypi.org/simple/ --extra-index-url=https://pypi.org/simple/ tinkoff-invest-openapi-client</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I quote the official token receiving instruction:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Log in to your account at tinkoff.ru</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go to the investment section</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go to settings</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The function "Confirmation of transactions by code" must be disabled</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Issue the OpenApi token for the exchange and Sandbox. </font><font style="vertical-align: inherit;">Perhaps the system will ask you to log in again, do not worry, this is necessary to connect the robot to the trading platform.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy the token and save, the token is displayed only once, you won‚Äôt be able to view it later, however, you can issue an unlimited number of tokens.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the time of writing, the token was issued on the page </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.tinkoff.ru/invest/settings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a button at the bottom of the page. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/jv/ys/zzjvysg4cl23e17owhta6ydtemk.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I had errors with the token for the sandbox, so I started experimenting with the combat version. </font><font style="vertical-align: inherit;">What I wish you (Caution: do not buy, sell by accident something extra).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login</font></font></h2><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> openapi_client <span class="hljs-keyword">import</span> openapi<font></font>
<font></font>
token = <span class="hljs-string">'    '</span>  
client = openapi.api_client(token)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These two lines do everything we need. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next we work with the client variable.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's in our portfolio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Get the contents of </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">our</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> portfolio:</font></font><br>
<br>
<pre><code class="python hljs">pf = client.portfolio.portfolio_get()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see the basic data of the first element:</font></font><br>
<br>
<pre><code class="python hljs">print(<span class="hljs-string">'value:'</span>, pf.payload.positions[<span class="hljs-number">0</span>].average_position_price.value)<font></font>
print(<span class="hljs-string">'currency:'</span>, pf.payload.positions[<span class="hljs-number">0</span>].average_position_price.currency)<font></font>
print(<span class="hljs-string">'balance:'</span>, pf.payload.positions[<span class="hljs-number">0</span>].balance)<font></font>
print(<span class="hljs-string">'figi:'</span>, pf.payload.positions[<span class="hljs-number">0</span>].figi)<font></font>
print(<span class="hljs-string">'ticker:'</span>, pf.payload.positions[<span class="hljs-number">0</span>].ticker)<font></font>
print(<span class="hljs-string">'name:'</span>, pf.payload.positions[<span class="hljs-number">0</span>].name)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my case, this is:</font></font><br>
<br>
<pre><code class="python hljs">value: <span class="hljs-number">45.98</span><font></font>
currency: USD<font></font>
balance: <span class="hljs-number">21.0</span><font></font>
figi: BBG000BWPXQ8<font></font>
ticker: BTI<font></font>
name: British American Tobacco</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
value - Paper price </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
balance - The number of securities in the portfolio, value and currency - their monetary value. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
figi - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Financial Instrument of Global the Identifier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Global Financial Instrument Identifier) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ticker - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ticker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> asset. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From this data, we can find out the human-readable name of the asset. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For this request, we do not need this (see the name field), but in other cases it will come in handy.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get the name of the paper by FIGI and ticket</font></font></h2><br>
<pre><code class="python hljs"><span class="hljs-comment">#    FIGI</span>
instr = client.market.market_search_by_figi_get(<span class="hljs-string">'BBG000BWPXQ8'</span>) <font></font>
instr</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We get:</font></font><br>
<br>
<pre><code class="python hljs">{<span class="hljs-string">'payload'</span>: {<span class="hljs-string">'currency'</span>: <span class="hljs-string">'USD'</span>,
             <span class="hljs-string">'figi'</span>: <span class="hljs-string">'BBG000BWPXQ8'</span>,
             <span class="hljs-string">'isin'</span>: <span class="hljs-string">'US1104481072'</span>,
             <span class="hljs-string">'lot'</span>: <span class="hljs-number">1</span>,
             <span class="hljs-string">'min_price_increment'</span>: <span class="hljs-number">0.01</span>,
             <span class="hljs-string">'name'</span>: <span class="hljs-string">'British American Tobacco'</span>,
             <span class="hljs-string">'ticker'</span>: <span class="hljs-string">'BTI'</span>,
             <span class="hljs-string">'type'</span>: <span class="hljs-string">'Stock'</span>},
 <span class="hljs-string">'status'</span>: <span class="hljs-string">'Ok'</span>,
 <span class="hljs-string">'tracking_id'</span>: <span class="hljs-string">'a1979917d2141916'</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This API function works for me as it should. </font><font style="vertical-align: inherit;">We see that 'BBG000BWPXQ8' -&gt; 'British American Tobacco'. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the search for the asset name by ticker does not work for me: (((</font></font><br>
<br>
<pre><code class="python hljs">instr = client.market.market_search_by_ticker_get(<span class="hljs-string">'BTI'</span> ) <font></font>
print(instr)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The developers suggested updating the library, but even after that it didn‚Äôt take off.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download the securities directory</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, I resolved this issue radically. </font><font style="vertical-align: inherit;">I downloaded from Tinkov a complete directory of traded assets:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#   </span><font></font>
bonds = client.market.market_bonds_get() <font></font>
<font></font>
<span class="hljs-comment">#   ETF</span><font></font>
etfs = client.market.market_etfs_get() <font></font>
<font></font>
<span class="hljs-comment">#   </span><font></font>
stocks = client.market.market_stocks_get() <font></font>
<font></font>
instr_list = bonds.payload.instruments + etfs.payload.instruments + stocks.payload.instruments<font></font>
<font></font>
instr_list[:<span class="hljs-number">3</span>]</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">got </font></font><pre><code class="python hljs">[{<span class="hljs-string">'currency'</span>: <span class="hljs-string">'RUB'</span>,
  <span class="hljs-string">'figi'</span>: <span class="hljs-string">'BBG00844BD08'</span>,
  <span class="hljs-string">'isin'</span>: <span class="hljs-string">'RU000A0JU898'</span>,
  <span class="hljs-string">'lot'</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">'min_price_increment'</span>: <span class="hljs-number">0.1</span>,
  <span class="hljs-string">'name'</span>: <span class="hljs-string">'  9'</span>,
  <span class="hljs-string">'ticker'</span>: <span class="hljs-string">'RU000A0JU898'</span>}, {<span class="hljs-string">'currency'</span>: <span class="hljs-string">'RUB'</span>,
  <span class="hljs-string">'figi'</span>: <span class="hljs-string">'BBG00R05JT04'</span>,
  <span class="hljs-string">'isin'</span>: <span class="hljs-string">'RU000A1013Y3'</span>,
  <span class="hljs-string">'lot'</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">'min_price_increment'</span>: <span class="hljs-number">0.1</span>,
  <span class="hljs-string">'name'</span>: <span class="hljs-string">' \xa02'</span>,
  <span class="hljs-string">'ticker'</span>: <span class="hljs-string">'RU000A1013Y3'</span>}, {<span class="hljs-string">'currency'</span>: <span class="hljs-string">'RUB'</span>,
  <span class="hljs-string">'figi'</span>: <span class="hljs-string">'BBG00PNLY692'</span>,
  <span class="hljs-string">'isin'</span>: <span class="hljs-string">'RU000A100DC4'</span>,
  <span class="hljs-string">'lot'</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">'min_price_increment'</span>: <span class="hljs-number">0.1</span>,
  <span class="hljs-string">'name'</span>: <span class="hljs-string">'- 002P  2'</span>,
  <span class="hljs-string">'ticker'</span>: <span class="hljs-string">'RU000A100DC4'</span>}]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, figi and name are there. </font><font style="vertical-align: inherit;">For my purposes - more than enough.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get a list of operations</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the most interesting thing is to get a list of my operations. </font><font style="vertical-align: inherit;">The following actions fall into the operation (in my case):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PayIn - Brokerage account replenishment </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PayOut - Withdraw Money</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BuyCard - Buy from a card</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sell ‚Äã‚Äã- Sale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BrokerCommission - Broker Commission</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dividend - Dividend Payout</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tax - Taxes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TaxDividend- Dividend Taxes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServiceCommission - Service Fee</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Code for unloading a portfolio:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> pytz <span class="hljs-keyword">import</span> timezone<font></font>
<font></font>
<span class="hljs-comment">#     30  2016 (      )</span>
d1 = datetime(<span class="hljs-number">2016</span>, <span class="hljs-number">9</span>, <span class="hljs-number">30</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, tzinfo=timezone(<span class="hljs-string">'Europe/Moscow'</span>))  <span class="hljs-comment"># timezone  .  - </span>
d2 = datetime.now(tz=timezone(<span class="hljs-string">'Europe/Moscow'</span>))  <span class="hljs-comment">#   </span>
ops = client.operations.operations_get(_from=d1.isoformat(), to=d2.isoformat())</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's see what happened. </font><font style="vertical-align: inherit;">In my case, this element is of interest</font></font><pre><code class="python hljs">ops.payload.operations[<span class="hljs-number">217</span>]</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That's what he is </font></font><pre><code class="python hljs">{<span class="hljs-string">'commission'</span>: {<span class="hljs-string">'currency'</span>: <span class="hljs-string">'USD'</span>, <span class="hljs-string">'value'</span>: <span class="hljs-number">-0.42</span>},
 <span class="hljs-string">'currency'</span>: <span class="hljs-string">'USD'</span>,
 <span class="hljs-string">'date'</span>: datetime.datetime(<span class="hljs-number">2018</span>, <span class="hljs-number">11</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">55</span>, <span class="hljs-number">53</span>, <span class="hljs-number">648913</span>, tzinfo=tzoffset(<span class="hljs-literal">None</span>, <span class="hljs-number">10800</span>)),
 <span class="hljs-string">'figi'</span>: <span class="hljs-string">'BBG000PSKYX7'</span>,
 <span class="hljs-string">'id'</span>: <span class="hljs-string">'42281525510'</span>,
 <span class="hljs-string">'instrument_type'</span>: <span class="hljs-string">'Stock'</span>,
 <span class="hljs-string">'is_margin_call'</span>: <span class="hljs-literal">False</span>,
 <span class="hljs-string">'operation_type'</span>: <span class="hljs-string">'BuyCard'</span>,
 <span class="hljs-string">'payment'</span>: <span class="hljs-number">-141.05</span>,
 <span class="hljs-string">'price'</span>: <span class="hljs-number">141.05</span>,
 <span class="hljs-string">'quantity'</span>: <span class="hljs-number">4</span>,
 <span class="hljs-string">'status'</span>: <span class="hljs-string">'Done'</span>,
 <span class="hljs-string">'trades'</span>: [{<span class="hljs-string">'date'</span>: datetime.datetime(<span class="hljs-number">2018</span>, <span class="hljs-number">11</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>, <span class="hljs-number">55</span>, <span class="hljs-number">53</span>, <span class="hljs-number">648913</span>, tzinfo=tzoffset(<span class="hljs-literal">None</span>, <span class="hljs-number">10800</span>)),
             <span class="hljs-string">'price'</span>: <span class="hljs-number">141.05</span>,
             <span class="hljs-string">'quantity'</span>: <span class="hljs-number">1</span>,
             <span class="hljs-string">'trade_id'</span>: <span class="hljs-string">'42636800'</span>}]}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are interested in the fields:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">date - transaction date </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">figi - asset code </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operation_type - type of operation </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">payment - the amount of the transaction. </font><font style="vertical-align: inherit;">For taxes or commissions, it is she who is indicated. </font><font style="vertical-align: inherit;">price while None</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">price - price of one paper </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quantity - planned amount of securities </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trades - real exchange deals </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The question immediately arose - why do we need some trades if there is price and quantity?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything is not so simple (plan and fact)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I understand it, quantity indicates the number of papers I wanted to buy. </font><font style="vertical-align: inherit;">And what is actually bought lies in trades [i] .quantity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Those. </font><font style="vertical-align: inherit;">if you want to turn to actual transactions, you need to sort out what lies in the trades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In some cases, there is None - for example, for taxes or deposit / withdrawals of funds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get real numbers, you need to look at transactions and exchange transactions:</font></font><br>
 <br>
<pre><code class="python hljs"><span class="hljs-keyword">for</span> op <span class="hljs-keyword">in</span> ops.payload.operations: <span class="hljs-comment">#  </span>
    print(op.figi) <span class="hljs-comment"># figi    </span>
    print(op.operation_type)   <span class="hljs-comment">#    </span>
    <span class="hljs-keyword">if</span> op.trades == <span class="hljs-literal">None</span>:      <span class="hljs-comment">#    </span>
        print(<span class="hljs-string">'price:'</span>, op.price)       <span class="hljs-comment">#     </span>
        print(<span class="hljs-string">'payment:'</span>, op.payment)   <span class="hljs-comment">#  </span>
        print(<span class="hljs-string">'quantity:'</span>, op.quantity) <span class="hljs-comment">#   </span>
    <span class="hljs-keyword">else</span>:     
        <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> op.trades:                   <span class="hljs-comment">#     -   </span>
            print(<span class="hljs-string">'price:'</span>, t.price)          <span class="hljs-comment">#     </span>
            print(<span class="hljs-string">'quantity:'</span>, t.quantity)<font></font>
    print(<span class="hljs-string">'--------------'</span>)</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496710/index.html">Computer Information: Simple and Fast</a></li>
<li><a href="../en496712/index.html">Once at a pentest, or How to break everything with the help of a urologist and Roskomnadzor</a></li>
<li><a href="../en496714/index.html">Power Automate VS Logic Apps. general information</a></li>
<li><a href="../en496716/index.html">Power Automate VS Logic Apps. Power Automate Cases</a></li>
<li><a href="../en496720/index.html">LLHD Project - Universal Hardware Description Language</a></li>
<li><a href="../en496726/index.html">Gent to the bottom</a></li>
<li><a href="../en496728/index.html">Manual testers are not needed or it‚Äôs time for automation</a></li>
<li><a href="../en496734/index.html">Do you want to be more effective - ‚Äúbreak your arm‚Äù</a></li>
<li><a href="../en496736/index.html">HackTheBox. Walkthrough Traverxec. RCE in nostromo web server, GTFOBins technique</a></li>
<li><a href="../en496738/index.html">Microsoft invests $ 20 million to fight COVID-19 with AI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>