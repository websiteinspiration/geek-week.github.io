<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèº üÖøÔ∏è üèüÔ∏è Send commands to multiple devices at the same time using SecureCRT üç∏ üç¶ ü•©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Network engineers often have the task of performing a series of identical actions on a large number of equipment. The main way to do this quickly is t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Send commands to multiple devices at the same time using SecureCRT</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490978/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network engineers often have the task of performing a series of identical actions on a large number of equipment. </font><font style="vertical-align: inherit;">The main way to do this quickly is to write actions to notepad and copy / past to each device. </font><font style="vertical-align: inherit;">There is a way to speed up this already fast process using SecureCRT software and Command window functionality. </font><font style="vertical-align: inherit;">Which allows you to send commands to multiple devices at the same time. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is this article for? </font><font style="vertical-align: inherit;">This article is from the Fast Start cycle and aims to save time for network engineers when setting up equipment (one task) on multiple devices. </font><font style="vertical-align: inherit;">It uses SecureCRT software and built-in Command window functionality.</font></font><br>
<br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Content</font></font></b><div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Command window,   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Command window     </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Command window         .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> SecureCRT</a></li>
</ul><br>
</div></div><br>
<a name="introduction"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the process of setting up network equipment, often tasks arise of performing simple and identical actions on a large number of devices. </font><font style="vertical-align: inherit;">To perform these tasks, you can use the standard method: Notepad + Copy / Paste. </font><font style="vertical-align: inherit;">And you can use the built-in SecureCRT functionality - command window - a special window in which you can edit the command before sending it to the equipment. </font><font style="vertical-align: inherit;">And additional functionality: send a command not only to the current session, but also to several open sessions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using Command window:</font></font><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Call Command window, setting operating modes</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using Command window to configure multiple devices at the same time</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using the Command window to configure multiple devices in real time at the same time.</font></font></a></li>
</ul><br>
<a name="showcommandwindow"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Call Command window, setting operating modes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The command window is called up via the menu: SecureCRT Menu =&gt; View =&gt; Command window. </font><font style="vertical-align: inherit;">Or SecureCRT Menu =&gt; View =&gt; Chat window.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mn/xn/nq/mnxnnqg2cruptsmtfvxwrij6c2a.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/68/cl/wy/68clwy0lrwgrr4qy1six_f515ik.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modes of operation may be:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edit mode</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real-time ("Send Characters Immediately")</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Editing mode - allows you to edit the command before sending it to the device. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Real-time mode - any keypress is automatically sent to the device - whether it is a space or a keypress (alphabetic or Enter). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The command forwarding setting has the following operation modes:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forward to the active session (only the current one).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In all sessions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To the selected group (tab) or group.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Officially, the options are as follows:</font></font><br>
<blockquote>Active Session ‚Äî Send commands only to the active session. This is the default.<br>
All Sessions ‚Äî Send commands to all your open sessions at once.<br>
Selected Tab Group(s) ‚Äî Send commands to one or more tab groups. This setting is automatically selected when you right-click on a tab and enable Send Commands to This Group. When commands are being sent to selected tab groups, the tabs of the sessions that commands will be sent to contain an asterisk in front of the session name.<br>
Visible Sessions ‚Äî Send commands to all visible tabbed sessions. When there are multiple tab groups, commands will be sent to the currently active session in each tab group.<br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The real-time mode setting is enabled using the context-sensitive menu in the Command window. </font><font style="vertical-align: inherit;">(Right-click on the Command Window - a context-sensitive menu pops up and select the "Send Characters Immediately" menu item) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Command forwarding settings are also called up using the context-sensitive menu in the Command window. </font><font style="vertical-align: inherit;">(Right-click on the Command Window - a context-sensitive menu pops up, select "Send Commands To", select the menu sub-item {"All sessions" | "Selected tab" | "Active session")</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jw/au/8_/jwau8_7zzvfc6ol454grnta8pfe.png"></div><br>
<a name="usecommandwindow"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using Command window to configure multiple devices at the same time</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Very often, to work, you need to execute simple commands simultaneously on several devices. </font><font style="vertical-align: inherit;">To do this, it‚Äôs very convenient (because fast) to use the Command window to send data to multiple devices simultaneously. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To configure multiple devices:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are connected to all devices of the same type.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the SecureCRT menu, call Command window</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the context menu of the Command window, select All sessions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We enter commands as a single unit or one at a time. </font><font style="vertical-align: inherit;">(In a single swap, commands are entered through Control + Enter. - line feed without transferring to equipment.)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is usually a standard set of commands:</font></font><br>
<pre><code class="plaintext hljs">screen-len 0 tem<font></font>
dis cu<font></font>
save<font></font>
y<font></font>
q<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Example:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zg/vi/pn/zgvipnfq2nzcuvmqlrrmhjmdunk.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/am/ck/zo/amckzoc1hludsslix-47w9k9_j8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Real-world example: Configuring 15 switches at the same time. </font><font style="vertical-align: inherit;">It is necessary to configure snmp v3 on 15 new switches, ports 1 to 44 in Access + storm-control. </font><font style="vertical-align: inherit;">c 45 to 48 - for printers. </font><font style="vertical-align: inherit;">The easiest way (= fastest) seemed to use a bunch: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRT command window all sessions + interface range gi0 / 0/1 to gi0 / 0/46. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second real example: When working on equipment using RFC: ‚ÄúPoint 1. Create Backup Configurations‚Äù: quickly open the necessary sessions (in SecureCRT this is really done quickly) and execute a standard set of commands on a range of devices from one vendor.</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quick connect to multiple sessions</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Select the sessions that we want to connect to at the same time and press Enter.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/jo/t-/xijot-7krlkt_rgvsaadlm4mukk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We send commands to all devices simultaneously:</font></font><br>
<pre><code class="plaintext hljs">ter len 0<font></font>
show ip int br<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please do not be scared - the Tile image mode - for clarity, show that the commands were entered in all active sessions (working in this form is inconvenient, but clear):</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/h1/wy/ee/h1wyeee1xadqd6f6gd3ho33cjvo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to frighten, I switched the display mode as Tabs (standard operating mode)</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bd/no/bu/bdnobuj8d1n9ks4jbmjaxlgeeew.png"></div><br>
<a name="usecommandwindowreal"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using the Command window to configure multiple devices in real time at the same time.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What can real-time input be used and really used? </font><font style="vertical-align: inherit;">Answer: when identical parameters are configured, but with a slight difference. </font><font style="vertical-align: inherit;">Example hostname, ip address on the interface. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How it looks in reality: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Sessions are opened where it is necessary to enter almost the same parameters.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b4/xh/vk/b4xhvkizjv-2-bjfqkczr_zsndi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. The operating mode of the command window is configured: "Send Characters Immediately" + "Send commands to: All Sessions".</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wg/lq/yi/wglqyibfwo3xqlfj7xsozq80mco.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. The following data is entered into the command window:</font></font><br>
<pre><code class="plaintext hljs">interface gi0/0/0.10<font></font>
dot1q termination vid 10<font></font>
ip address 172.31.255.<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. The cursor is transferred using the mouse from the Command window to the session window and for each device in the session the necessary address is configured:</font></font><br>
<pre><code class="plaintext hljs">R1 ‚Äì 1<font></font>
R2 ‚Äì 2<font></font>
R3 ‚Äì 3<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. The cursor is transferred using the mouse to the Command window and the suffix is ‚Äã‚Äãadded:</font></font><br>
<pre><code class="plaintext hljs"> 255.255.255.0<font></font>
quit<font></font>
dis ip int br<font></font>
</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jh/0z/vi/jh0zvizkr4qrbgdzyxnr3a1-apc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Little trick. </font><font style="vertical-align: inherit;">To check the spelling - first I check the spelling in one session. </font><font style="vertical-align: inherit;">After verification, the command is sent to all sessions.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/6c/82/hp/6c82hppgpelcmny9vfvqgvxhf-s.png"></div><br>
<a name="finale"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You must always be careful. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In some cases, it‚Äôs faster to disconnect from all sessions. </font><font style="vertical-align: inherit;">Connect only to custom sessions. </font><font style="vertical-align: inherit;">Enter commands in Command windows. </font><font style="vertical-align: inherit;">After connecting to all other sessions. </font><font style="vertical-align: inherit;">Connecting to SecureCRT is very fast. </font><font style="vertical-align: inherit;">And reconnecting does not cause problems. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Very often, after entering group commands, the work in each session is checked (using the [ctrl + tab] combination, we switch over all windows and compare the result of the command in each window). </font><font style="vertical-align: inherit;">We check the correctness of the execution of all commands, errors that could occur in any one session. </font><font style="vertical-align: inherit;">Example: when connected to 3 Huawei routers, one of them by default connected to user mode. </font><font style="vertical-align: inherit;">To work in the general thread, I switched the configuration mode to privileged mode.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ox/92/38/ox92382rypfrpb6xtto8liby-tm.png"></div><br>
<a name="AboutSecureCRT"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About SecureCRT:</font></font></b><div class="spoiler_text"> :  99$ (     SecureCRT   ) <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> </a><br>
1     ,   ( ),        .<br>
 1:    Screen-shot  SecureCRT  6.1 ‚Äî  Windows     6.7  20  2011 .   6.1  Command window,   ¬´Chat window¬ª. <br>
    Mac OS X  Windows.<br>
  <br>
 Command Window ( )<br>
Serial/Telnet/SSH1/SSH2/Shell  <br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490966/index.html">[Forecast] Transport of the future: short-term horizon</a></li>
<li><a href="../en490968/index.html">Habr Converter: to make it easy</a></li>
<li><a href="../en490970/index.html">Strict mode in TypeScript: flag description, examples</a></li>
<li><a href="../en490974/index.html">The evolution of string theory to M-theory</a></li>
<li><a href="../en490976/index.html">Frontend section on DUMP2020: we‚Äôll vanguard that there will be a full house again. Top reports of last year and topics of this</a></li>
<li><a href="../en490982/index.html">Bad advice to the employer. How to "properly" interact with the developer</a></li>
<li><a href="../en490984/index.html">Materials from the Nizhny Novgorod Android mitap. MotionLayout, Kotlin Coroutines, CI / CD infrastructure and design systems</a></li>
<li><a href="../en490986/index.html">Testing AMD Ryzen processors to work with KOMPAS-3D</a></li>
<li><a href="../en490988/index.html">We study multicast RxJS operators</a></li>
<li><a href="../en490992/index.html">Price discount management: models for quantifying the effect of gas stations as an example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>