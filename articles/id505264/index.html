<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‰ ğŸ™ŒğŸ¼ ğŸ¤˜ğŸ¿ Seperti yang saya tulis parser html di php, dan apa yang terjadi. Bagian satu âœ´ï¸ ğŸ’™ ğŸ”Š</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hei. 
 
 Hari ini saya ingin memberi tahu cara menulis parser html, serta masalah apa yang saya temui saat mengembangkan parser serupa di php. Tetapi ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Seperti yang saya tulis parser html di php, dan apa yang terjadi. Bagian satu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505264/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hari ini saya ingin memberi tahu cara menulis parser html, serta masalah apa yang saya temui saat mengembangkan parser serupa di php. </font><font style="vertical-align: inherit;">Tetapi ada banyak masalah. </font><font style="vertical-align: inherit;">Dan pada bagian pertama saya akan berbicara tentang desain parser, dan tentang masalah yang muncul, karena parser html berbeda dari parser dari bahasa pemrograman yang akrab.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mencoba menulis teks artikel ini sejelas mungkin, sehingga siapa pun yang bahkan tidak terbiasa dengan perangkat parser umum dapat memahami cara kerja parser html. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya dalam artikel ini saya akan memanggil dokumen yang berisi html hanya </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dokumen"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pohon dom yang terletak di elemen akan disebut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Subarray"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang harus dilakukan parser?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama mari kita putuskan apa yang harus dilakukan parser untuk membangun ini di masa depan. </font><font style="vertical-align: inherit;">Yaitu, parser harus:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desain pohon dom berbasis dokumen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ada kesalahan dalam dokumen, maka ia harus menyelesaikannya.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temukan item di pohon dom </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temukan barang anak-anak </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temukan teks </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah daftar paling sederhana dari apa yang harus dilakukan oleh pengurai. </font><font style="vertical-align: inherit;">Dalam cara yang baik, itu masih harus mengirim informasi tentang kesalahan, jika ada yang ditemukan dalam dokumen asli. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, ini adalah hal sepele. </font><font style="vertical-align: inherit;">Fungsionalitas dasar sudah cukup untuk menghancurkan kepala Anda beberapa malam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi ada masalah yang langsung saya temui: Html bukan hanya bahasa, itu adalah bahasa hypertext. </font><font style="vertical-align: inherit;">Bahasa seperti itu memiliki sintaksnya sendiri, dan pengurai biasa tidak akan berfungsi.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membagi dan memerintah</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memulai, Anda perlu membagi pekerjaan parser menjadi dua tahap:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pisahkan Teks Biasa dari Tag</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Urutkan semua tag yang diterima di pohon dom</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berlaku langsung untuk mem-parsing dokumen. Saya akan berbicara tentang mencari elemen sedikit kemudian dalam bab ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menggambarkan tahap pertama, saya menggambar diagram yang dengan jelas menunjukkan bagaimana data diproses pada tahap pertama: </font></font><br>
<br>
<img src="https://hsto.org/webt/vi/da/ma/vidama0m4yfx28z5lpj9n9c7ado.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memutuskan untuk menghilangkan semua detail kecil. Misalnya, bagaimana membedakan bahwa setelah pembukaan "&lt;" muncul tag, bukan teks? Saya akan membicarakan hal ini di bagian berikut. Ini sudah cukup untuk saat ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini juga layak diklarifikasi. Adalah logis bahwa di dalam dokumen, selain tag, ada juga teks. Secara sederhana, jika parser menemukan tag pembuka dan jika ada teks di dalamnya, ia akan menulisnya setelah tag pembuka sebagai tag terpisah. Tag tersebut akan dianggap sebagai tunggal dan tidak akan berpartisipasi dalam pekerjaan parser selanjutnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, tahap kedua. </font><font style="vertical-align: inherit;">Yang paling sulit dari sudut pandang desain, dan paling sederhana pada pandangan pertama dari sudut pandang pemahaman: </font></font><br>
<br>
<img src="https://hsto.org/webt/cl/mw/wt/clmwwtchiuag_bey_qkr0c4dwjk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, level berarti tingkat rekursi. </font><font style="vertical-align: inherit;">Yaitu, jika parser telah menemukan tag pembuka, ia menyebut dirinya sendiri, "memasuki level yang lebih rendah", dan ini akan berlanjut sampai tag penutup ditemukan. </font><font style="vertical-align: inherit;">Dalam hal ini, rekursi menghasilkan hasil, "Naik Level." </font><font style="vertical-align: inherit;">Tapi bagaimana dengan tag tunggal? </font><font style="vertical-align: inherit;">Tag semacam itu dianggap rekursi bukan sebagai pembukaan maupun penutupan. </font><font style="vertical-align: inherit;">Mereka hanya pergi ke dom "Apa Adanya". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, kami mendapatkan sesuatu seperti ini:</font></font><br>
<br>
<pre><code class="php hljs">[<span class="hljs-number">0</span>] =&gt; <span class="hljs-keyword">Array</span><font></font>
(<font></font>
[is_closing] =&gt;<font></font>
[is_singleton] =&gt;<font></font>
[pointer] =&gt; <span class="hljs-number">215</span><font></font>
[tag] =&gt; div<font></font>
[<span class="hljs-number">0</span>] =&gt; <span class="hljs-keyword">Array</span> <span class="hljs-comment">// </span><font></font>
(<font></font>
[<span class="hljs-number">0</span>] =&gt; <span class="hljs-keyword">Array</span><font></font>
(<font></font>
[is_closing] =&gt;<font></font>
[is_singleton] =&gt;<font></font>
[pointer] =&gt; <span class="hljs-number">238</span><font></font>
[tag] =&gt; div<font></font>
[id] =&gt; <span class="hljs-keyword">Array</span><font></font>
(<font></font>
[<span class="hljs-number">0</span>] =&gt; tjojo<font></font>
)<font></font>
<font></font>
[<span class="hljs-number">0</span>] =&gt; <span class="hljs-keyword">Array</span> <span class="hljs-comment">// </span><font></font>
(<font></font>
[<span class="hljs-number">0</span>] =&gt; <span class="hljs-keyword">Array</span> <span class="hljs-comment">//     </span><font></font>
(<font></font>
[tag] =&gt; __TEXT<font></font>
[<span class="hljs-number">0</span>] =&gt; !<font></font>
<font></font>
)<font></font>
<font></font>
[<span class="hljs-number">1</span>] =&gt; <span class="hljs-keyword">Array</span><font></font>
(<font></font>
[is_closing] =&gt; <span class="hljs-number">1</span><font></font>
[is_singleton] =&gt;<font></font>
[pointer] =&gt; <span class="hljs-number">268</span><font></font>
[tag] =&gt; div<font></font>
)<font></font>
<font></font>
)<font></font>
)<font></font>
)<font></font>
)<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana dengan menemukan elemen?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita bicara tentang menemukan elemen. Tapi di sini, tidak semuanya sejelas yang Anda kira. Pertama, Anda perlu mencari tahu kriteria apa yang kami cari elemen. Semuanya sederhana di sini, kami mencari mereka sesuai dengan kriteria yang sama seperti Javascript: tag, kelas dan pengidentifikasi. Tapi di sini masalahnya. Faktanya adalah hanya ada satu tag, tetapi kelas dan pengidentifikasi satu elemen banyak, atau tidak sama sekali. Oleh karena itu, mencari item dengan tag akan berbeda dari pencarian berdasarkan kelas atau pengidentifikasi. Saya membuat skema pencarian untuk sebuah tag, tetapi jangan khawatir: pencarian berdasarkan kelas atau pengidentifikasi tidak jauh berbeda.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j4/qs/w2/j4qsw2kzjw9bzaxen6mozm6gc0i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sedikit klarifikasi. </font><font style="vertical-align: inherit;">Sebagai nilai asli, saya maksudkan nama tag, "div" misalnya. </font><font style="vertical-align: inherit;">Juga, jika suatu elemen tidak sama dengan nilai aslinya, tetapi memiliki subarray dengan elemen yang sesuai, hasilnya akan ditulis elemen yang tepat dengan subarraynya, jika ada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu juga dikatakan bahwa parser akan memiliki fungsi yang memungkinkan Anda untuk mencari elemen tertentu dalam dokumen. </font><font style="vertical-align: inherit;">Ini secara signifikan akan mempercepat kinerja parser, yang akan memungkinkannya untuk mengeksekusi lebih cepat. </font><font style="vertical-align: inherit;">Sebagai contoh, dimungkinkan untuk mengambil hanya elemen pertama yang ditemukan, atau elemen kelima, seperti yang Anda inginkan. </font><font style="vertical-align: inherit;">Anda harus mengakui bahwa dalam kasus seperti itu akan lebih mudah bagi parser untuk mencari elemen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cari barang anak-anak</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oke, bereskan pencarian elemen, tapi bagaimana dengan elemen anak? </font><font style="vertical-align: inherit;">Di sini juga, semuanya sederhana: parser kami akan mengambil semua sub-elemen bersarang elemen yang ditemukan sebelum ini, jika ada. </font><font style="vertical-align: inherit;">Jika tidak ada, parser akan menampilkan hasil kosong dan melanjutkan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y0/4a/wy/y04awyfodd4cs4c9n5pijqetnkm.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pencarian Teks</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada yang perlu dibicarakan. </font><font style="vertical-align: inherit;">Parser hanya akan mengambil semua teks yang diterima dari subarray dan mengeluarkannya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dokumen mungkin berisi kesalahan yang harus berhasil ditangani skrip kami, atau, jika kesalahannya kritis, tampilkan di layar. </font><font style="vertical-align: inherit;">Di sini Anda akan menemukan daftar semua kemungkinan kesalahan yang akan kami bicarakan di masa depan:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simbol "&gt;" tidak ditemukan.</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kesalahan seperti itu akan terjadi jika parser mencapai bagian akhir dokumen dan tidak menemukan simbol "&gt;" penutup.</font></font><br>
</li>
<li><b>  </b><br>
    ,            .<br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">tag</span> <span class="hljs-attr">some</span> =&gt;</span><span class="hljs-comment">&lt;!--   ?    ,   --&gt;</span></code></pre><br>
</li>
<li><b> html </b><br>
     :        "&lt;",    "="  ,      .<br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">tag</span> <span class="hljs-attr">some</span> = =<span class="hljs-string">'something'</span>&gt;</span><span class="hljs-comment">&lt;!-- ,    --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">tag</span> &lt;<span class="hljs-attr">some</span> =<span class="hljs-string">'something'</span>&gt;</span><span class="hljs-comment">&lt;!--  ?  ,    ? --&gt;</span></code></pre><br>
</li>
<li><b>   </b><br>
     ,     ,    ,  .<br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span> = =<span class="hljs-string">'wefwe'</span>&gt;</span><font></font>
!<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-comment">&lt;!--   &lt;/div&gt;?--&gt;</span>
</code></pre><br>
        .<br>
</li>
<li><b>   </b><br>
  ,    ,  .<br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span> = =<span class="hljs-string">'wefwe'</span>&gt;</span><font></font>
!<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--    ?--&gt;</span>
</code></pre><br>
     .<br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemen anak-anak tidak ditemukan,</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
dalam hal ini, pengurai hanya akan menampilkan array kosong.</font></font><br>
</li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script, gaya, dan komentar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di parser, tag skrip dan gaya akan segera dilewati, karena saya tidak melihat gunanya menulisnya. </font><font style="vertical-align: inherit;">Situasinya berbeda dengan komentar. </font><font style="vertical-align: inherit;">Jika Anda ingin menulis dari, maka Anda dapat mengaktifkan fungsi skrip terpisah, dan kemudian akan menulisnya. </font><font style="vertical-align: inherit;">Komentar akan direkam dengan cara yang sama seperti teks, yaitu sebagai tag terpisah.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebaliknya, artikel ini harus dianggap sebagai penyimpangan kecil ke dalam topik parser html. </font><font style="vertical-align: inherit;">Saya menulisnya untuk mereka yang berpikir untuk menulis parser mereka sendiri, atau untuk mereka yang hanya tertarik. </font><font style="vertical-align: inherit;">Percayalah, ini sangat menyenangkan! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini adalah bagian pengantar pertama. </font><font style="vertical-align: inherit;">Di bagian selanjutnya dari seri ini, kode akan langsung berpartisipasi, dan akan ada lebih sedikit gambar dengan algoritma (yang baik-baik saja, karena saya tidak tahu cara menggambarnya). </font><font style="vertical-align: inherit;">Tetap disini!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id505252/index.html">Proyek avokado</a></li>
<li><a href="../id505254/index.html">Gula ular atau tulis kisaran Anda dalam JavaScript</a></li>
<li><a href="../id505256/index.html">Peluncuran yang sukses. 39 dari awal tahun. 14 dari Amerika Serikat. Satelit Starlink SpaceX</a></li>
<li><a href="../id505258/index.html">Kedokteran gigi: harapan dan kenyataan</a></li>
<li><a href="../id505260/index.html">Mengukur penundaan dari keyboard ke foton menggunakan sensor optik</a></li>
<li><a href="../id505268/index.html">Pengalaman pribadi: dari pengembang frontend menjadi pemimpin</a></li>
<li><a href="../id505274/index.html">Dosa mematikan keamanan situs: apa yang kami pelajari dari statistik pemindai kerentanan untuk tahun ini</a></li>
<li><a href="../id505276/index.html">Bagaimana kami mengajar ABBYY FineReader PDF untuk mengedit seluruh paragraf</a></li>
<li><a href="../id505278/index.html">39 singkatan dalam bahasa Inggris untuk marketer pemula dan seoshnikov</a></li>
<li><a href="../id505280/index.html">Magento 2: CSS Kritis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>