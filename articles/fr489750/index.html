<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🔬 🔲 🖇️ Gestion d'un cluster Docker Swarm à l'aide de Swarmpit 🐻 👨🏿‍💼 😠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour,% username%. Il est temps de découvrir le blog après 6 ans d'inactivité et d'essayer à nouveau d'apporter quelque chose d'utile à la communaut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gestion d'un cluster Docker Swarm à l'aide de Swarmpit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489750/"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/e69/e6f/1fae69e6f5c70e49c561eeecc13a5e2d.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonjour,% username%. </font><font style="vertical-align: inherit;">Il est temps de découvrir le blog après 6 ans d'inactivité et d'essayer à nouveau d'apporter quelque chose d'utile à la communauté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis extrêmement surpris qu'il n'y ait toujours pas d'article sur Swarmpit sur le hub. </font><font style="vertical-align: inherit;">Bien sûr, je comprends que la plupart des gens qui étudient Docker s'arrêtent probablement dessus et essaient ensuite de gravir le mont Everest appelé Kubernetes. </font><font style="vertical-align: inherit;">Je ne connais pas les chiffres exacts, mais je pense que la plupart d'entre eux se perdent et se font tuer sur Docker ou l'utilisent simplement. </font><font style="vertical-align: inherit;">Mais en vain!</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Docker Swarm est un système presque parfait pour presque tout le monde. Je doute fort qu'un très grand nombre de personnes aient besoin de Kubernetes. Je l'ai tué pendant presque une journée et j'ai réalisé que j'en tuerais 30 de plus, afin de pouvoir l'utiliser calmement plus tard, MAIS je suis un simple programmeur et tout ce cool DevOps n'est pas du tout de la programmation. Et puis j'ai entendu parler de Docker Swarm et en 1 jour, il était absolument facile d'y pénétrer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qui a besoin de Docker Swarm? Vous êtes déjà imprégné des grandes fonctionnalités de l'écosystème Docker. Vos candidatures sont constituées de microservices. En même temps, vous avez plusieurs serveurs et j'aimerais avoir une tolérance aux pannes et gérer en quelque sorte la charge.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et dans cet article, je ne décrirai pas comment le configurer et ce que c'est. </font><font style="vertical-align: inherit;">J'irai encore plus loin et montrerai un outil incroyablement simple pour travailler avec un cluster déjà configuré. </font><font style="vertical-align: inherit;">Oui, le cluster doit être configuré, il ne s'agit en fait que de quelques commandes ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus de détails ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="plaintext hljs">docker swarm init<font></font>
docker swarm join<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, je pourrais simplement laisser un lien vers le site Web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swarmpit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et terminer, vous pouvez tous lire, mais il est installé en général par 1 équipe et vous n'avez même pas besoin d'y penser, vous vous détendez simplement et lancez vos conteneurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lien </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais encore, je vais décrire un peu et montrer des captures d'écran de ce merveilleux panneau d'administration.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Écran d'accueil</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les informations sur le cluster sont collectées ici. </font><font style="vertical-align: inherit;">Vous pouvez également épingler des services sélectionnés ici et surveiller leur état:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9e8/3c7/334/9e83c73348c1a7713f7124e331ddd073.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Connexion de registres tiers</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par défaut, Swarmpit recherchera des images dans hub.docker.com</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/859/a56/a22/859a56a22257a13f5a8420b914cea611.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Ajout d'un nouveau service</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est extrêmement simple et clair ici. </font><font style="vertical-align: inherit;">On retrouve d'abord l'image dans des registres ouverts ou fermés. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/554/8d7/0ad/5548d70ad4540fea19f0d60fe851d30d.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sélectionnons la version, le nom et le mode lui-même: global ou répliqué. </font><font style="vertical-align: inherit;">Vous pouvez également spécifier une commande à exécuter: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/34c/ff1/6cf/34cff16cfbea72a93e05df8738755144.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurez ensuite son réseau. </font><font style="vertical-align: inherit;">Peut ajouter du général, configurer des ports et donner un alias de nom d'hôte pour le service. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e40/560/1f8/e405601f8a931c464cc012eabb96bba3.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous définissons des variables d'environnement, connectons le stockage, ajoutons des configurations et des configurations secrètes. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdb/3dd/6ce/fdb3dd6ce794de2c4dbdf2701cf0a837.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous fixons des limites pour l'application: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/927/0f5/f3c/9270f5f3cc6ce05c002d4aff24fc341e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nous pouvons émettre des balises pour le service, activer la mise à jour automatique de l'image, émettre des nœuds pour le déploiement et généralement configurer la politique de redéploiement pour éviter les temps d'arrêt de l'application: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/04f/601/2c4/04f6012c4901ab0b1d97a54c7f44d5ea.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paramètres du </font><font style="vertical-align: inherit;">journal </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f04/b02/ec3/f04b02ec31f08dd54dd832457ca72129.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Bien sûr, vous pouvez ajouter des réseaux et les modifier</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/5dd/eab/cf6/5ddeabcf601de005584f2e67c4219a27.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Affichez les nœuds connectés au cluster</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez avoir plusieurs nœuds sur une machine (en savoir plus sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docker-machine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mais l'instance Swarmpit peut être connectée à un seul cluster et ne la surveillera que.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c24/527/5c0/c245275c0a8be1aff702c11bfd4d39dc.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Ajouter des référentiels contrôlés par des dockers</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad4/eb2/637/ad4eb26376e475c9078db98dbccfb7c8.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Eh bien, en soi, ajoutez des configurations</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/491/9ce/d80/4919ced803c3fa2d1b05fc1201fc5291.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Vous pouvez également ajouter des utilisateurs avec 2 types d'accès</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/03f/43f/0b4/03f43f0b45dcb8068b704ce098887a3c.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parce que cet essaim de docker à lui seul peut créer des piles et leur lancement n'est possible qu'avec l'aide du format de composition de docker: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/24a/291/816/24a291816b67f68bd4bbf7b8e672d7b3.png" alt="image"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
+ Je ne suis pas un maître de console de kung-fu, bien que j'y ai déployé certains de mes services et tué beaucoup de temps pour cela. Swarmpit permet de gagner beaucoup de temps, surtout lorsque vous commencez à jouer avec des configurations pour le même nginx par exemple. Et bientôt ils promettent de faire du versioning des configs avec la découverte automatique des services associés. Ceux. changé la ligne, enregistré et la config a volé automatiquement à tous les services où il était précédemment indiqué. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
+ De plus, je n'ai pas mentionné la présence de l'API, et ici il y a juste de magnifiques opportunités pour gérer le cluster avec ma logique. Vous pouvez surveiller l'état via l'API, ajouter des répliques à l'application pendant une surtension et les réduire lorsque vous les réduisez. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moins:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Le mot de passe principal ne peut être réinitialisé en aucune façon et vous devez réinstaller le cluster si vous l'avez perdu </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Développeurs comme 1-2, donc ils ajoutent des fonctionnalités depuis longtemps, mais pour le moment je n'ai trouvé </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aucun </font><font style="vertical-align: inherit;">bogue critique </font><font style="vertical-align: inherit;">-Tous les défauts mineurs, mais la plupart d'entre eux sont en cause et les développeurs promettent de ne remplir tous les 2.0 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Control que sur le cluster connecté, pas de support pour un cluster tiers ou de s'y connecter et il ne sera probablement plus </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
question de donner à nouveau un lien vers le site Web Swarmpit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyts</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Github page Swarmpit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le moment, j'ai fait 2 autres projets open source sur NodeJS, si je suis intéressé, je peux en parler aussi. </font><font style="vertical-align: inherit;">Le 1er est une redirection pour un télégramme sans publicité et ultra-petit (Docker Image pèse 27 Mo et est également écrit en NodeJS sans un seul paquet), le 2ème plus compliqué est le serveur cdn pour les images, qui peut modifier les images à la volée (redimensionnement, changement de format, qualité, etc.) et peut économiser 200 $ (peut-être moins, c'est le prix de Business CloudFlare qui vous permet de faire de même).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489736/index.html">[Français] Communiqué et déclaration du CIO sur les sports électroniques</a></li>
<li><a href="../fr489740/index.html">Simplifiez l'écriture des gestionnaires HTTP dans Golang</a></li>
<li><a href="../fr489742/index.html">Hackathon pour 200 personnes - ce dont vous avez besoin pour organiser</a></li>
<li><a href="../fr489744/index.html">Convertir la notation infixe en suffixe</a></li>
<li><a href="../fr489746/index.html">Dans la plupart des cas, la sérialisation dans Android n'est pas nécessaire</a></li>
<li><a href="../fr489754/index.html">20 systèmes de gestion de projet, aperçu de 100 puces</a></li>
<li><a href="../fr489756/index.html">Créer un effet crayon en SVG</a></li>
<li><a href="../fr489758/index.html">Angulaire: un exemple d'utilisation de NGRX</a></li>
<li><a href="../fr489760/index.html">Conscience et existence. Mécanique quantique sans paradoxes</a></li>
<li><a href="../fr489762/index.html">Un exemple simple d'analyse et d'analyse de données pour World of Tanks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>