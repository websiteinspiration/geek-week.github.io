<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🤝‍👩🏻 👲 🧡 Mempercepat Pengubahan MatTable dalam Beberapa Langkah 👩🏻‍🔬 👨‍🎓 👋🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sering terjadi bahwa sebagian besar aplikasi terdiri dari berbagai daftar dan tabel. Agar tidak menemukan kembali roda setiap saat, saya, seperti bany...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mempercepat Pengubahan MatTable dalam Beberapa Langkah</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503844/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sering terjadi bahwa sebagian besar aplikasi terdiri dari berbagai daftar dan tabel. </font><font style="vertical-align: inherit;">Agar tidak menemukan kembali roda setiap saat, saya, seperti banyak orang, sering menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tabel Material Sudut</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian, tabel ini tumbuh, baik data teks dan elemen bersarang ditempatkan di sel. </font><font style="vertical-align: inherit;">Semua ini tumbuh dan menjadi beban yang baik pada mesin pengguna. </font><font style="vertical-align: inherit;">Dan tentu saja, tidak ada yang suka ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proyek rumah terakhir saya, ada sebuah meja yang sel-selnya sebagian besar diisi dengan berbagai bidang (Anda bahkan bisa mengatakan bahwa itu adalah satu bentuk besar). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan rendering butuh sekitar 8 detik (tabel 40 x 40). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi bagaimana Anda bisa mengoptimalkan MatTable untuk daftar besar?</font></font><br>
<br>
<img src="https://mohamed-sabry.com/wp-content/uploads/2019/02/performance.jpg" alt="gambar"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasus cobaan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membantu orang lain mengatasi masalah ini, saya menulis aplikasi uji kecil. Semua tabel MatTable yang sama, dengan lima kolom (yang pertama adalah id elemen, sisanya adalah bidang teks MatFormField biasa). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fk/rc/4u/fkrc4uph55ayejqbdqbnitwb-nu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya itu adalah meja yang sederhana, tetapi bahkan mengubah alur dari tabel semacam itu tidak membutuhkan waktu tidak lebih atau kurang dari 2 detik (Oh, materi ini dan kinerja "top" -nya). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x2/dl/vm/x2dlvmlcvsotvdikpcoebafj4ia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proses rendering sendiri dalam hal ini hanya membutuhkan waktu (860 ms), namun, halaman membeku selama 2,2 detik dan pengguna merasa kesal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baiklah, mari kita coba membuat tabel dengan 300 baris. </font><font style="vertical-align: inherit;">Dan drum roll, kami menunggu sedikit dan kami melihat bahwa hampir 10 detik dihabiskan untuk scripting dan rendering total. </font><font style="vertical-align: inherit;">Artinya, dalam kasus ketika pengguna ingin menampilkan tabel seperti itu dalam 300 baris, halamannya akan membeku selama 10 detik. </font><font style="vertical-align: inherit;">Ini sangat menakutkan dan menakjubkan (sebenarnya tidak). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2b/y4/z7/2by4z7zeyqjjcl1vmst-x1rm_ge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan, saya masih mencoba untuk mengukur waktu yang diperlukan untuk menggambar 1000 elemen, tapi i7 saya yang menyedihkan tidak tahan dan halamannya terus jatuh. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan mencoba melakukan ini nanti dengan solusi yang sudah diterapkan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solusi untuk masalah tersebut</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, setiap orang dapat melakukan pengukuran menggunakan utilitas berbasis browser, tetapi tidak ada solusi untuk masalah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keputusan ini menuntun saya dengan memikirkan esensi masalah.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemahaman yang benar tentang masalah sudah setidaknya setengah dari solusinya.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya pikir semua orang mengerti bahwa ini terjadi karena data tabel pertama kali diproses oleh skrip dan kemudian dimuntahkan dalam keadaan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utuh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pada gilirannya, inilah tepatnya mengapa kita melihat suspensi yang khas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah ditemukan. </font><font style="vertical-align: inherit;">Sekarang tinggal mencari tahu bagaimana menyelesaikannya. </font><font style="vertical-align: inherit;">Solusi pertama yang terlintas dalam pikiran adalah yang paling sederhana. </font><font style="vertical-align: inherit;">Jika masalah memproses semua data sekaligus, maka Anda perlu membuat tabel memproses data dalam bagian-bagian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi bagaimana cara melakukannya? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita pikirkan apa yang kita miliki untuk ini di luar kotak. </font><font style="vertical-align: inherit;">Hal pertama yang terlintas dalam pikiran adalah fungsi Track By. </font><font style="vertical-align: inherit;">Saat mengubah sumber data, seluruh tabel tidak akan dirender ulang, tetapi hanya perubahannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita tambahkan fungsi ini ke tabel kita:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">mat-table</span> [<span class="hljs-attr">trackBy</span>]=<span class="hljs-string">"trackByFn"</span> [<span class="hljs-attr">dataSource</span>]=<span class="hljs-string">"commonDataSource"</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya, tapi kami tidak memiliki kondisi sedemikian rupa sehingga data tabelnya entah bagaimana berubah, dan ini bukanlah pembicaraan sekarang. </font><font style="vertical-align: inherit;">Tetapi bagaimana jika kita menulis Pipe, yang, ketika menginisialisasi sumber data, akan memecah data dan memberikannya ke tabel dalam batch. </font><font style="vertical-align: inherit;">Pada gilirannya, fungsi trackBy akan membantu menghindari penyaji penuh.</font></font><br>
<br>
<pre><code class="javascript hljs">@Pipe({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'splitSchedule'</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SplitPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{<font></font>
  public transform(value: any, <span class="hljs-attr">takeBy</span>: number = <span class="hljs-number">4</span>, <span class="hljs-attr">throttleTime</span>: number = <span class="hljs-number">40</span>): Observable&lt;<span class="hljs-built_in">Array</span>&lt;any&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(value)<font></font>
      ? <span class="hljs-keyword">this</span>.getSplittedThread(value, takeBy, throttleTime)<font></font>
      : <span class="hljs-keyword">of</span>(value);<font></font>
  }<font></font>
<font></font>
  private getSplittedThread(data: <span class="hljs-built_in">Array</span>&lt;any&gt;, takeBy: number, <span class="hljs-attr">throttleTime</span>: number): Observable&lt;<span class="hljs-built_in">Array</span>&lt;any&gt;&gt; {
    <span class="hljs-keyword">const</span> repeatNumber = <span class="hljs-built_in">Math</span>.ceil(data.length / takeBy);
    <span class="hljs-keyword">return</span> timer(<span class="hljs-number">0</span>, throttleTime).pipe(<font></font>
      map(<span class="hljs-function">(<span class="hljs-params">current</span>) =&gt;</span> data.slice(<span class="hljs-number">0</span>, takeBy * ++current)),<font></font>
      take(repeatNumber)<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini adalah sepotong kecil kode yang akan membantu perangkat keras Anda membuat tabel besar tersebut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terapkan pipa ini ke sumber data kami.</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">mat-table</span> [<span class="hljs-attr">trackBy</span>]=<span class="hljs-string">"trackByFn"</span>
           [<span class="hljs-attr">dataSource</span>]=<span class="hljs-string">"commonDataSource | splitSchedule | async"</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita coba melakukan pengukuran. </font><font style="vertical-align: inherit;">Jadikan 100, 300, dan 1000 elemen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k9/ge/dy/k9gedy95dj4dxjuwc1_oe6dr2fc.png"><br>
<br>
<img src="https://habrastorage.org/webt/-m/gw/sk/-mgwskq0o-c_hlgms6e0jzo0tjw.png"><br>
<br>
<img src="https://habrastorage.org/webt/ep/fh/id/epfhidruvwampy1yxgrusej__sc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan apa yang kita lihat? </font><font style="vertical-align: inherit;">Apa yang benar-benar sukses bukanlah yang kami harapkan:</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 300 elemen menjadikan 1 detik lebih cepat </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1000 diberikan dalam 11 detik dan tab tidak mati </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan 100 elemen umumnya menghasilkan 150 ms lebih lama </font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi jangan buru-buru menarik kesimpulan, mari kita lihat dulu perilaku halaman dalam kedua kasus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wi/l0/bv/wil0bvryq-7p4webmepcdnmg9cs.gif"><br>
 <br>
<img src="https://habrastorage.org/webt/4a/ho/pm/4ahopmeahip3lcxghuq7li6v4ju.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, dalam kasus biasa, halaman membeku selama beberapa detik dan pengguna tidak dapat melakukan apa-apa saat ini, saat menggunakan pipa kami dengan tautan ke trackBy memberi pengguna inisialisasi tabel hampir seketika dan tidak menyebabkan ketidaknyamanan saat menggunakan aplikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semoga artikel ini membantu seseorang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode sumber untuk aplikasi tes ada di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack Blitz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503830/index.html">Amazon telah membuka tempat perlindungan besar bagi para tunawisma</a></li>
<li><a href="../id503832/index.html">Resep PostgreSQL: mesin template mustach</a></li>
<li><a href="../id503836/index.html">Pro dan kontra teknologi moderasi komentar (+ Polling)</a></li>
<li><a href="../id503838/index.html">ACLcheck - Cisco Validation Utility Daftar Akses IOS</a></li>
<li><a href="../id503842/index.html">Prostesis otak: sinkronisasi jaringan saraf tiruan dan biologis</a></li>
<li><a href="../id503846/index.html">Flash, "Apakah dia mati lagi tidak diketahui, tetapi bunga-bunga menghilang ..."</a></li>
<li><a href="../id503848/index.html">Kami mengundang Anda untuk webinar gratis pada pencetakan SLS pada Sinterit 26.05 dan pemindai 3D Shining 28.05</a></li>
<li><a href="../id503854/index.html">Gunakan SIL secara maksimal</a></li>
<li><a href="../id503858/index.html">Buku "Terraform: infrastruktur di tingkat kode"</a></li>
<li><a href="../id503860/index.html">Menyiapkan lingkungan jaringan saraf Mask R-CNN</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>