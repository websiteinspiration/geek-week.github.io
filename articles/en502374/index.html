<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÇ üñ≤Ô∏è ü§üüèº FT8 Communication Protocol - How It Works ü§ó ‚ùî üíÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr. 
 
 Probably everyone who was at least a little interested in radio communications and amateur radio, heard about the FT8 digital communi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>FT8 Communication Protocol - How It Works</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502374/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, Habr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probably everyone who was at least a little interested in radio communications and amateur radio, heard about the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FT8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> digital communication protocol </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This type of connection appeared in 2017, and since then its popularity has only been growing. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kj/am/zs/kjamzs42-x1txltxh2qozvawrt4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Source: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.qsl.net/w1dyj/FT8%20for%20web.pdf</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
For those who are interested in how it works and why it is needed, continued under the cut.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Story</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For those who are far from amateur radio communications, a brief historical background. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first home-made, and later purchased, amateur radio stations appeared about 100 years ago. The only signal they could receive and transmit was a simple tone, and the transmission was using the Morse code. Of course, first you had to learn how to take CW by ear, by the way this skill was in demand for a long time not only among amateurs, but also among professionals, the profession of radio operator in the Navy was seemingly canceled only in the 60s. Of course, there was a certain romance in the reception of weak signals against the noise of the ether, that is how a simple village ham radio operator from the Kostroma region managed in 1928 to receive the SOS signal from the distressed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">airship</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> team </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Umberto Nobile</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next step was voice communication - voice transmission using a microphone in single-band modulation made radio communication more convenient. This method is still used. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, around the 90s, digital communications began to gain popularity among ham radio operators. In this case, the signal (usually RTTY or PSK) forms the computer, the operator communicates with the correspondent using a kind of text chat. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_-/hs/l0/_-hsl0v09vxuoypwejamieqkqba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It must be said that technically similar protocols are very simple, and characters typed by the user from the keyboard were sent to the broadcast almost without any complicated processing. And strangely enough, this had its advantages - the operator himself had to find the right frequency, evaluate the quality of the signal by ear, see the decoded symbols on the screen, type the answer, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the possibilities of digital processing grew, and finally, the hero of our review appeared - the communication standard FT8. </font><font style="vertical-align: inherit;">The name FT8 translates as Franke and Taylor, 8-FSK modulation. </font><font style="vertical-align: inherit;">Professor Steven Franke and astrophysicist and Nobel laureate Joseph Taylor, have created a truly interesting and efficient protocol for data transfer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Features of FT8:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The message length is 15 s, messages are transmitted in fixed time slots, which facilitates decoding.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The message length is 77 bits + 12-bit CRC.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Error correction FEC LDPC (174.87).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frequency modulation 8-FSK, the distance between tones 6.25Hz.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bandwidth 50Hz. </font><font style="vertical-align: inherit;">With such a narrow band, multiple stations can operate and decode simultaneously.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decoding threshold -20dB.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The optional ability to automatically work, automatically send responses, etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, the authors have done a good job of creating an almost completely automated communication protocol that can, on the one hand, transmit information more efficiently, and on the other, kill the ‚Äúspirit of amateur radio‚Äù in the bud. </font><font style="vertical-align: inherit;">There is no more romance of the noise and fading of the ether, receiving a weak correspondent signal from the other side of the ocean, there is just a PC screen, and the rest is done by algorithms and mathematics. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A screenshot of the WSJT-X program that supports FT8 looks something like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nb/5k/go/nb5kgooakljwasfor1stl5-_iou.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Source: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3fs.net.au/ft8-digital-amateur-radio</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Personally, I don‚Äôt really understand the pleasure of almost completely automatic radio communications, but since FT8 is popular, then this is someone necessary. </font><font style="vertical-align: inherit;">Let's see in more detail how this works.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bit coding</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider a practical example - the transmission of the phrase "CQ RA1ABC KO50". Here CQ is the generally accepted calling code (more details </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), RA1ABC is the amateur radio call sign, KO50 is the so-called </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grid-locator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which determines the region from which the amateur radio broadcasts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the first step, common abbreviations are replaced by short codes, for example, CQ receives a 2h code. Amateur radio callsigns have a strictly defined format of letters and numbers, which also allows you to record them in a more compact form.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> A0[] = <span class="hljs-string">" 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+-./?"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> A1[] = <span class="hljs-string">" 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> A2[] = <span class="hljs-string">"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> A3[] = <span class="hljs-string">"0123456789"</span>;<font></font>
<font></font>
<span class="hljs-comment">// Check for standard callsign</span>
<span class="hljs-keyword">int</span> i0, i1, i2, i3, i4, i5;
<span class="hljs-keyword">if</span> ((i0 = char_index(A1, c6[<span class="hljs-number">0</span>])) &gt;= <span class="hljs-number">0</span> &amp;&amp; (i1 = char_index(A2, c6[<span class="hljs-number">1</span>])) &gt;= <span class="hljs-number">0</span> &amp;&amp;<font></font>
    (i2 = char_index(A3, c6[<span class="hljs-number">2</span>])) &gt;= <span class="hljs-number">0</span> &amp;&amp; (i3 = char_index(A4, c6[<span class="hljs-number">3</span>])) &gt;= <span class="hljs-number">0</span> &amp;&amp;<font></font>
    (i4 = char_index(A4, c6[<span class="hljs-number">4</span>])) &gt;= <span class="hljs-number">0</span> &amp;&amp; (i5 = char_index(A4, c6[<span class="hljs-number">5</span>])) &gt;= <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// This is a standard callsign</span>
        <span class="hljs-keyword">int32_t</span> n28 = i0;<font></font>
        n28 = n28 * <span class="hljs-number">36</span> + i1;<font></font>
        n28 = n28 * <span class="hljs-number">10</span> + i2;<font></font>
        n28 = n28 * <span class="hljs-number">27</span> + i3;<font></font>
        n28 = n28 * <span class="hljs-number">27</span> + i4;<font></font>
        n28 = n28 * <span class="hljs-number">27</span> + i5;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Pack28: n28=%d (%04xh)\n"</span>, n28, n28);
        <span class="hljs-keyword">return</span> NTOKENS + MAX22 + n28;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The idea of ‚Äã‚Äãreplacing characters with indexes is important here, which is effective with a small dictionary size. As a result, the callsign ‚ÄúRA1ABC‚Äù will be written as 0BF1C2C1h - we spent 4 bytes instead of 6. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similarly, the ‚ÄúKO50‚Äù grid-locator is written as a 2-byte 4BFAh number. All this is necessary because the maximum message length is 77 bits; Of course, arbitrary text and even telemetry can be transmitted, but subject to these limitations. The message length of 77 bits was chosen as a compromise between the transmission time (about 13 seconds, which is not so fast) and the information capacity - the message could be made longer, but then it would be sent longer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, all of our ‚ÄúCQ RA1ABC KO50‚Äù message will be converted to data block 00 00 00 26 28 9F D4 92 FE 88. A 14-bit CRC is also added to it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next step is to convert the 91-bit message to the so-called LDPC (Low density parity-check) code with a length of 174 bits - it adds redundancy used to correct errors during reception. </font><font style="vertical-align: inherit;">In this step, the message is converted to 00 00 00 26 28 9F D4 92 FE 8A CA 0C F3 D1 34 33 88 D0 C2 9C 3D CC.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frequency coding</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything here is pretty simple. In this step, we will transform the message into a sequence of tones of different frequencies. As you know, we can have 8 tones (modulation type FSK-8), after the conversion we get a sequence of the form 31406520 00000001 15353274 61112745 36563140 65201575 76054515 70523040 61407642 3140652 where each digit is a tone number from 0 to 7. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The frequency spacing between tones is 6.25Hz, the duration of one tone is 0.16 s, having the sequence shown above, you can easily generate a WAV file or directly control the frequency synthesizer in the case of an autonomous beacon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The spectrum of the generated signal of our message looks like this:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/nb/lc/wznblcopg8tzz2wpyabnr33bfsg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, it‚Äôs better to hear once than to look at the spectrum, alas, Habr does not allow attaching a wav-file, and we could not find a normal video in youtube with a demonstration of FT8 sound. </font><font style="vertical-align: inherit;">Modern radio amateurs </font><font style="vertical-align: inherit;">no longer need </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to listen to the broadcast</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; the computer does it for them. </font><font style="vertical-align: inherit;">An example of the radio process can be found here:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/xJGeVc2Q0oc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, mathematically FT8 is quite an interesting protocol. The originals of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WSJT-X source code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are written in Fortran, and I still could not figure it out with them. A separate version of the encoder in C ++ can be viewed at </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/kgoba/ft8_lib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the above code snippets were taken from it. Those who wish can also simply download the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WSJT-X</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> version </font><font style="vertical-align: inherit;">, it is free, you can try it without a transmitter, just a sound card. You can even tune in to the FT8 frequencies using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://websdr.ewi.utwente.nl:8901</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and redirect the sound through a virtual audio cable, so you can watch the program in operation without a transceiver and without r / l call sign.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for the popularity of FT8 in amateur radio circles ... Well, personally, this is not entirely clear to me, in my opinion there is already no romance in such types of communication, it is closer to the industrial protocol than to hobby and creativity. </font><font style="vertical-align: inherit;">But most seem to have a different opinion, which is shown in the graph at the beginning of the article. </font><font style="vertical-align: inherit;">Millions of ham radio fans can't be wrong? </font><font style="vertical-align: inherit;">Well, FT8 itself, of course, is technically interesting, and here, perhaps, the process of studying the protocol is much more interesting than its use. </font><font style="vertical-align: inherit;">Although, trying the program at least once is certainly also interesting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All successful experiments.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502362/index.html">Learning Event Tracing for Windows: Theory and Practice</a></li>
<li><a href="../en502366/index.html">Compare the work of open source Python - libraries for the recognition of named entities</a></li>
<li><a href="../en502368/index.html">We pump the treadmill</a></li>
<li><a href="../en502370/index.html">Putting the game "Snake" on the breadboard. Part 1: state machines</a></li>
<li><a href="../en502372/index.html">Problems and principles of customization of the boxed version of Bitrix24</a></li>
<li><a href="../en502380/index.html">Celery + asyncio</a></li>
<li><a href="../en502382/index.html">Interface Bikes Toxic Grandfather. ‚ÄúLies, threats and blackmail.‚Äù (s1 e6)</a></li>
<li><a href="../en502384/index.html">Game Theory and its Application in Life</a></li>
<li><a href="../en502386/index.html">We wrap in a Promise modal confirmation window</a></li>
<li><a href="../en502392/index.html">News from the world of OpenStreetMap No. 511 (04.28.2020-04.05.2020)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>