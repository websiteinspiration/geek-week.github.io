<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéß üëµüèº üóëÔ∏è Divulga√ß√£o de n√∫mero de telefone e geolocaliza√ß√£o por vulnerabilidade no Telegram ‚ò£Ô∏è üïµüèº üïß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, o Telegram tem discutido cada vez mais o t√≥pico de romper pessoas e vazar dados pessoais. Fiquei imaginando o quanto o pr√≥prio ecossiste...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Divulga√ß√£o de n√∫mero de telefone e geolocaliza√ß√£o por vulnerabilidade no Telegram</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495990/"><img src="https://habrastorage.org/webt/ve/mw/s5/vemws5sils-r3vtvvr7rg162sdw.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recentemente, o Telegram tem discutido cada vez mais o t√≥pico de romper pessoas e vazar dados pessoais. </font><font style="vertical-align: inherit;">Fiquei imaginando o quanto o pr√≥prio ecossistema do Telegram √© resistente a esses vazamentos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sob o corte est√° a hist√≥ria de como encontrei um bug no Telegram. </font><font style="vertical-align: inherit;">O bug permite enganar o usu√°rio e pression√°-lo a compartilhar seus dados sem saber - geolocaliza√ß√£o e n√∫mero de telefone.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja como funciona:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/o8N0kjurgfo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A complexidade do sistema sempre foi um inimigo da seguran√ßa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O telegrama cresceu, deixou de ser apenas um mensageiro e tornou-se uma grande plataforma de m√≠dia com funcionalidade rica. A API do Telegram Bot se destaca como uma casa separada, permitindo criar aplicativos inteiros dentro do messenger - os chamados bots. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Provavelmente, todos que tentaram criar seu pr√≥prio bot j√° sabem que o usu√°rio pode receber uma solicita√ß√£o de seu n√∫mero de telefone usando um bot√£o especial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O texto neste bot√£o pode ser definido como qualquer um. Al√©m disso, o bot pode usar os mesmos bot√µes para outras intera√ß√µes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/c7/k8/trc7k8xz2pvmmzac1pfbwxdlxqi.jpeg" alt="imagem" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s clicar no bot√£o, o usu√°rio receber√° um aviso de que seu contato ser√° enviado ao bot:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/5t/rk/su5trkfoqcrvxad8wg82xegm3bg.png" alt="imagem" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta mensagem fala claramente sobre o risco de desanonimiza√ß√£o e alerta o usu√°rio atencioso sobre a√ß√µes perigosas para ele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passando pelas atualiza√ß√µes da API, lembrei que, em algum momento, o Telegram deu aos usu√°rios a oportunidade de fazer sua pr√≥pria localiza√ß√£o do messenger. Houve exemplos em que a localiza√ß√£o foi usada para altera√ß√µes em quadrinhos da interface. Nesse momento, ocorreu-me o mesmo pensamento que voc√™ poderia fazer agora: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas e se voc√™ tentar "traduzir comicamente" uma caixa de di√°logo avisando o usu√°rio sobre a transfer√™ncia do n√∫mero de telefone para o bot, substituindo o texto?</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/s_/gj/ed/s_gjeddr_shl8q4ghctcrur4g4s.png" alt="imagem" width="300"> <img src="https://habrastorage.org/webt/xt/cm/il/xtcmilq-vxhoyslwjpn8uolmhrs.png" alt="imagem" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, pensei que conseguir que um usu√°rio instalasse uma localiza√ß√£o de arquivo xml estranha no aplicativo seria muito mais dif√≠cil do que convencer a clicar em Compartilhar contato. De fato, assim, usando um arquivo xml, o Telegram se ofereceu para distribuir suas localiza√ß√µes entre interlocutores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o pensei: at√© me deparar com o </font><font style="vertical-align: inherit;">manipulador de links setlanguage no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo-fonte do aplicativo Android</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/nm/xv/qsnmxvjbble2rnvl-ufuadej46w.png" alt="imagem" width="600"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exatamente o que √© necess√°rio! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aconteceu que o Telegram havia muito tempo tornara uma plataforma de tradu√ß√£o, translation.telegram.org, acess√≠vel a todos os usu√°rios do Telegram, e agora n√£o h√° necessidade de transferir nenhum arquivo xml. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ws/rs/ov/wsrsovq81u4lsjh10u2dxoj3kjk.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basta clicar no link </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t.me/setlanguage/%lang%</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ap√≥s o qual o usu√°rio ver√° uma caixa de di√°logo solicitando a instala√ß√£o de um novo idioma. </font><font style="vertical-align: inherit;">E essa janela √© muito menos intimidadora do que uma mensagem sobre uma solicita√ß√£o de n√∫mero de telefone:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/yu/mp/uoyumprj8sk-0mil-xflt1lqjre.png" alt="imagem" width="300"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como funciona?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Registre-se em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tradu√ß√µes.telegram.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione seu idioma, traduza os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elementos de interface</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necess√°rios </font><font style="vertical-align: inherit;">e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais alguns outros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na localiza√ß√£o, voc√™ pode escrever o que quiser. Escreveremos um texto inofensivo em vez de um aviso terr√≠vel sobre o compartilhamento de geolocaliza√ß√£o e n√∫mero de telefone. Fazemos o mesmo para as outras plataformas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa linguagem venenosa est√° pronta. Resta desliz√°-lo para o usu√°rio. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-w/aq/38/-waq38nqpnrd9a07kthuuuybsmk.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda n√£o consegui encontrar uma maneira de descobrir se o usu√°rio instalou a localiza√ß√£o oferecida a ele. N√£o havia estat√≠sticas de idioma no tradu√ß√µes.telegram.org, nem altera√ß√µes no perfil do usu√°rio. A API do bot permite descobrir o idioma do usu√°rio atrav√©s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do par√¢metro language_code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas seu valor √© obtido das configura√ß√µes do sistema. </font><font style="vertical-align: inherit;">Alterar o idioma no aplicativo n√£o afeta o par√¢metro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, basta adicionar um pequeno atraso ap√≥s a mensagem com um link para o idioma. </font><font style="vertical-align: inherit;">Depois de escolher um idioma, sugerimos que o usu√°rio se familiarize com o menu bot. </font><font style="vertical-align: inherit;">Quando voc√™ clica em OK nesta caixa de di√°logo, o n√∫mero vaza para o bot com uma mensagem e o bot exclui essa mensagem imediatamente. </font><font style="vertical-align: inherit;">Se o bot usa o webhook para receber atualiza√ß√µes, a mensagem √© exclu√≠da mais rapidamente e o usu√°rio pode n√£o entender que acabou de enviar seu contato. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, da mesma forma que uma solicita√ß√£o de contato, um bot pode solicitar que um usu√°rio compartilhe sua localiza√ß√£o geogr√°fica. </font><font style="vertical-align: inherit;">Sim, e esta caixa de di√°logo tamb√©m pode ser "traduzida".</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como consertar</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, voc√™ n√£o deve permitir que os usu√°rios traduzam absolutamente toda a interface sem modera√ß√£o. A prop√≥sito, a modera√ß√£o da tradu√ß√£o est√° ativada para, por exemplo, esta caixa de di√°logo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translator.telegram.org/rutech/ios/unsorted/AuthCode.Alert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A necessidade de modera√ß√£o √© relatada a n√≥s pelo r√≥tulo Cr√≠tico. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ek/mq/1v/ekmq1vbreb7dxbm005uvbkx7rua.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acontece que uma omiss√£o t√£o pequena como a falta de um r√≥tulo Cr√≠tico para di√°logos sobre compartilhamento de n√∫meros e geolocaliza√ß√£o leva a um vazamento. Um vazamento de dados muito sens√≠veis, como um mensageiro construindo seu marketing em torno de privacidade / seguran√ßa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um mensageiro vinculado ao seu n√∫mero de telefone pessoal, por defini√ß√£o, n√£o pode ser particular. Isso s√≥ pode aumentar o custo de revelar sua identidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa vulnerabilidade caiu no programa de telegrama de recompensas por bugs e foi avaliada em 100 ‚Ç¨.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Venha para o Telegram chat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@secinfosec</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">L√°, compartilhamos nossa experi√™ncia e discutimos tudo relacionado √† seguran√ßa da informa√ß√£o: um bug de recompensa, protestos, seguran√ßa pr√°tica e em papel, novas amea√ßas e m√©todos para lidar com eles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt495978/index.html">Tr√™s n√≠veis de an√°lise de audi√™ncia: procurando insights</a></li>
<li><a href="../pt495980/index.html">Como desmontar o Tesla Model 3, modific√°-lo com um arquivo e criar um ventilador</a></li>
<li><a href="../pt495982/index.html">Estudamos o mecanismo VoIP do Mediastreamer2. Parte 4</a></li>
<li><a href="../pt495984/index.html">Reagir, desempenho e -500 milissegundos no lan√ßamento - o hist√≥rico de nossas otimiza√ß√µes em n√∫meros</a></li>
<li><a href="../pt495986/index.html">An√°lise de documentos internacionais sobre gerenciamento de riscos √† seguran√ßa da informa√ß√£o. Parte 2</a></li>
<li><a href="../pt495994/index.html">In√≠cio do trimestre acad√™mico ou como me tornei coordenador de ensino a dist√¢ncia</a></li>
<li><a href="../pt495996/index.html">Raspberry Pi, Python e regar plantas de interior</a></li>
<li><a href="../pt495998/index.html">Criando um tema escuro para estouro de pilha</a></li>
<li><a href="../pt496004/index.html">Novos modelos de pesquisa e an√°lise de dados. WSDM 2020 atrav√©s dos olhos da equipe Yandex.Tolki</a></li>
<li><a href="../pt496006/index.html">Supera√ß√£o do proxy reverso - tecnologia para prote√ß√£o remota e otimiza√ß√£o de sites sem alterar os registros A do DNS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>