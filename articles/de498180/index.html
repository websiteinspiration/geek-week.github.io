<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèº üî™ ü§∞üèº √úberpr√ºfen der Newton-Spieldynamik mit dem statischen Analysator PVS-Studio ‚Ñ¢Ô∏è ‚óºÔ∏è üòØ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="K√ºrzlich habe ich im Internet die Physik-Engine Newton Game Dynamics entdeckt. Da ich wusste, dass solche Projekte normalerweise eine gro√üe Menge an k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>√úberpr√ºfen der Newton-Spieldynamik mit dem statischen Analysator PVS-Studio</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/498180/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/uy/ni/sz/uynisz7isgxhs8jv2xqvrxxlyyg.png" alt="Bild 1"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
K√ºrzlich habe ich im Internet die Physik-Engine Newton Game Dynamics entdeckt. </font><font style="vertical-align: inherit;">Da ich wusste, dass solche Projekte normalerweise eine gro√üe Menge an komplexem Code enthalten, hielt ich es f√ºr interessant, ihn mit dem statischen Analysator PVS-Studio zu √ºberpr√ºfen. </font><font style="vertical-align: inherit;">Meine Begeisterung wurde durch die Tatsache weiter befl√ºgelt, dass mein Kollege Andrei Karpov dieses Projekt bereits 2014 getestet hat. Dies ist auch eine gute Gelegenheit, die Entwicklung unseres Analyseger√§ts in den letzten sechs Jahren zu demonstrieren. </font><font style="vertical-align: inherit;">Es ist auch erw√§hnenswert, dass zum Zeitpunkt des Schreibens die neueste Version von Newton Game Dynamics vom 27. Februar 2020 datiert ist, dh dieses Projekt wird auch in den letzten 6 Jahren aktiv weiterentwickelt. </font><font style="vertical-align: inherit;">Daher hoffe ich, dass dieser Artikel zus√§tzlich zu unserem Team f√ºr die Entwickler der Engine von Interesse sein wird, die in der Lage sein werden, einige Fehler zu beseitigen und ihren Code zu beheben.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analysatorausgabe</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Jahr 2014 ver√∂ffentlichte PVS-Studio:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48 Warnungen der ersten Ebene;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">79 zweite Ebene;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">261 dritte Ebene.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr 2020 jedoch:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">124 Warnungen der ersten Ebene;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">272 zweite Ebene;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">787 der dritten Ebene (unter denen es auch interessante gibt).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt viel interessantere Warnungen als in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andreys Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber wir werden </font><font style="vertical-align: inherit;">sie genauer untersuchen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung der Warnungen</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N1</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
V519 Der Variablen 'tmp [i] [2]' werden zweimal hintereinander Werte zugewiesen. </font><font style="vertical-align: inherit;">Vielleicht ist das ein Fehler. </font><font style="vertical-align: inherit;">√úberpr√ºfen Sie die Zeilen: 468, 469. dgCollisionConvexHull.cpp 469</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">dgCollisionConvexHull::Create</span> <span class="hljs-params">(dgInt32 count,....)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-function">dgStack&lt;dgVector&gt; <span class="hljs-title">tmp</span><span class="hljs-params">(<span class="hljs-number">3</span> * count)</span></span>;
  <span class="hljs-keyword">for</span> (dgInt32 i = <span class="hljs-number">0</span>; i &lt; count; i ++) <font></font>
  {<font></font>
    tmp[i][<span class="hljs-number">0</span>] = dgFloat32 (buffer[i*<span class="hljs-number">3</span> + <span class="hljs-number">0</span>]);<font></font>
    tmp[i][<span class="hljs-number">1</span>] = dgFloat32 (buffer[i*<span class="hljs-number">3</span> + <span class="hljs-number">1</span>]);<font></font>
    tmp[i][<span class="hljs-number">2</span>] = dgFloat32 (buffer[i*<span class="hljs-number">3</span> + <span class="hljs-number">2</span>]);<font></font>
    tmp[i][<span class="hljs-number">2</span>] = dgFloat32 (<span class="hljs-number">0.0f</span>);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Array-Element </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tmp [i] [2] wird</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zweimal hintereinander initialisiert. Meistens spricht ein solcher Code von Copy-Paste. Sie k√∂nnen dieses Problem beheben , </font><font style="vertical-align: inherit;">indem unn√∂tige Initialisierung zu </font><font style="vertical-align: inherit;">entfernen , </font><font style="vertical-align: inherit;">wenn sie nicht ben√∂tigt wird, oder durch den Array - </font><font style="vertical-align: inherit;">Index mit einem nachfolgenden ersetzt wird </font><font style="vertical-align: inherit;">- das bereits auf dem Wert der abh√§ngig </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zahl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variabel </font><font style="vertical-align: inherit;">. Als </font><font style="vertical-align: inherit;">n√§chstes w√ºrde Ich mag eine </font><font style="vertical-align: inherit;">weitere Warnung beschreiben , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V519</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die Andrei, nicht in dem Artikel haben , </font><font style="vertical-align: inherit;">aber hat unsere </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehler Datenbank</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V519 Die ‚Äöfeuchte‚Äò Objekt - </font><font style="vertical-align: inherit;">Werte zweimal nacheinander zugeordnet. Vielleicht ist das ein Fehler. Physik dgbody.cpp 404</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dgBody::AddBuoyancyForce</span> <span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  damp = (m_omega % m_omega) * dgFloat32 (<span class="hljs-number">10.0f</span>) *<font></font>
        fluidAngularViscousity; <font></font>
  damp = GetMax (GetMin ((m_omega % m_omega) * <font></font>
       dgFloat32 (<span class="hljs-number">1000.0f</span>) * <font></font>
       fluidAngularViscousity, dgFloat32(<span class="hljs-number">0.25f</span>)), <font></font>
       dgFloat32(<span class="hljs-number">2.0f</span>));<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich gebe zu, ich habe diesen Fehler nicht im Analysatorprotokoll gefunden. Auch ich habe nicht die finden </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddBuoyancyForce</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Funktion </font><font style="vertical-align: inherit;">in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dgbody.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies ist normal: Wenn neue Beispiele f√ºr Fehler, die mithilfe von Warnungen unseres Analyseger√§ts gefunden wurden, ein Indikator f√ºr die Entwicklung von PVS-Studio sind, ist das Fehlen von Fehlern, die zuvor im Projekt gefunden wurden, ein Indikator f√ºr die Entwicklung des Projekts. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein kleines offtopic</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich </font><b><font style="vertical-align: inherit;">nehme</font></b><font style="vertical-align: inherit;"> nicht an zu sagen, dass die folgenden Codefragmente Fehler enthalten oder nicht wie vom Programmierer erwartet funktionieren, aber sie verhalten sich ziemlich verd√§chtig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Analysator hat zwei Warnungen f√ºr dieses Codefragment ausgegeben: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V621 √úberpr√ºfen Sie den Operator 'for'. Es ist m√∂glich, dass die Schleife falsch oder gar nicht ausgef√ºhrt wird. MultiBodyCar.cpp 942</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V654 Die Bedingung 'i &lt;count' der Schleife ist immer falsch. </font><font style="vertical-align: inherit;">MultiBodyCar.cpp 942</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MultibodyBodyCar</span><span class="hljs-params">(DemoEntityManager* <span class="hljs-keyword">const</span> scene)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">int</span> count = <span class="hljs-number">10</span>;<font></font>
  count = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) <font></font>
  {<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; count; j++) <font></font>
    {<font></font>
      <span class="hljs-function">dMatrix <span class="hljs-title">offset</span><span class="hljs-params">(location)</span></span>;<font></font>
      offset.m_posit += dVector (j * <span class="hljs-number">5.0f</span> + <span class="hljs-number">4.0f</span>, <span class="hljs-number">0.0f</span>, i * <span class="hljs-number">5.0f</span>, <span class="hljs-number">0.0f</span>);
      <span class="hljs-comment">//manager-&gt;CreateSportCar(offset, viperModel.GetData());</span><font></font>
      manager-&gt;CreateOffRoadCar(offset, monsterTruck.GetData());<font></font>
    }<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht wird dieser Code zum Debuggen verwendet, dann scheint das Ausschalten der Schleife ein normaler Schritt zu sein. </font><font style="vertical-align: inherit;">Es wurden auch mehrere √§hnliche Punkte entdeckt: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V519 Der Variablen 'ret' werden zweimal nacheinander Werte zugewiesen. </font><font style="vertical-align: inherit;">Vielleicht ist dies ein Fehler. √úberpr√ºfen Sie die Zeilen: 325, 326. dString.cpp 326</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dString::LoadFile</span> <span class="hljs-params">(FILE* <span class="hljs-keyword">const</span> file)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">size_t</span> ret = fread(m_string, <span class="hljs-number">1</span>, size, file);<font></font>
  ret = <span class="hljs-number">0</span>;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V519 Der Variablen 'ret' werden zweimal hintereinander Werte zugewiesen. M√∂glicherweise ist dies ein Fehler. </font><font style="vertical-align: inherit;">√úberpr√ºfen Sie die Zeilen: 1222, 1223. DemoEntityManager.cpp 1223</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DemoEntityManager::DeserializeFile</span> <span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">size_t</span> ret = fread(buffer, size, <span class="hljs-number">1</span>, (FILE*) serializeHandle);<font></font>
  ret = <span class="hljs-number">0</span>;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V560 Ein Teil des bedingten Ausdrucks ist immer wahr: (Anzahl &lt;10). </font><font style="vertical-align: inherit;">dMathDefines.h 726</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">dCholeskyWithRegularizer</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span> (!pass &amp;&amp; (count &lt; <span class="hljs-number">10</span>))<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
} </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V654 Die Bedingung 'ptr! = Edge' der Schleife ist immer falsch. </font><font style="vertical-align: inherit;">dgPolyhedra.cpp 1571</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dgPolyhedra::Triangulate</span> <span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  ptr = edge;<font></font>
  ....<font></font>
  <span class="hljs-keyword">while</span> (ptr != edge);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V763 Der Parameter 'count' wird vor seiner Verwendung immer im Funktionsk√∂rper neu geschrieben. </font><font style="vertical-align: inherit;">ConvexCast.cpp 31</font></font><br>
<br>
<pre><code class="cpp hljs">StupidComplexOfConvexShapes (...., <span class="hljs-keyword">int</span> count)<font></font>
{<font></font>
  count = <span class="hljs-number">40</span>;
  <span class="hljs-comment">//count = 1;</span><font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V547 Der Ausdruck 'axisCount' ist immer falsch. </font><font style="vertical-align: inherit;">MultiBodyCar.cpp 650</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">UpdateDriverInput</span><span class="hljs-params">(dVehicle* <span class="hljs-keyword">const</span> vehicle, dFloat timestep)</span> 
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">int</span> axisCount = scene-&gt;GetJoystickAxis(axis);<font></font>
  axisCount = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span> (axisCount)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wahrscheinlich werden viele sagen, dass Sie bei einer solchen √Ñnderung des √∂ffentlich zug√§nglichen Codes mindestens einen Kommentar schreiben m√ºssen. </font><font style="vertical-align: inherit;">Nun, ich stimme zu. </font><font style="vertical-align: inherit;">Einige Dinge, die meiner Meinung nach in einem Haustierprojekt schmerzlos verwendet werden k√∂nnten, sind in dem Code, den eine gro√üe Anzahl von Menschen verwenden wird, nicht akzeptabel. </font><font style="vertical-align: inherit;">Die Wahl liegt jedoch bei den Autoren. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N2</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
V769 Der Zeiger 'result' im Ausdruck 'result + i' entspricht nullptr. </font><font style="vertical-align: inherit;">Der resultierende Wert ist sinnlos und sollte nicht verwendet werden. </font><font style="vertical-align: inherit;">win32_monitor.c 286</font></font><br>
<br>
<pre><code class="cpp hljs">GLFWvidmode* _glfwPlatformGetVideoModes(_GLFWmonitor* monitor, <span class="hljs-keyword">int</span>* count)<font></font>
{<font></font>
  GLFWvidmode* result = <span class="hljs-literal">NULL</span>;<font></font>
  ....<font></font>
  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>;  i &lt; *count;  i++)<font></font>
    {<font></font>
    <span class="hljs-keyword">if</span> (_glfwCompareVideoModes(result + i, &amp;mode) == <span class="hljs-number">0</span>)
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem ist, dass sich das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnis</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seit der Initialisierung nicht ge√§ndert hat. </font><font style="vertical-align: inherit;">Der resultierende Zeiger ist nicht sinnvoll und kann nicht verwendet werden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N3, N4, N5</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
V778 Es wurden zwei √§hnliche Codefragmente gefunden. </font><font style="vertical-align: inherit;">M√∂glicherweise ist dies ein Tippfehler und die Variable 'm_colorChannel' sollte anstelle von 'm_binormalChannel' verwendet werden. </font><font style="vertical-align: inherit;">dgMeshEffect1.cpp 1887</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dgMeshEffect::EndBuildFace</span> <span class="hljs-params">()</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (m_attrib.m_binormalChannel.m_count) &lt;=<font></font>
  {<font></font>
    attibutes.m_binormalChannel.<font></font>
      PushBack(m_attrib.m_binormalChannel[m_constructionIndex + i]);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (m_attrib.m_binormalChannel.m_count) &lt;= <font></font>
  {<font></font>
    attibutes.m_colorChannel.<font></font>
      PushBack(m_attrib.m_colorChannel[m_constructionIndex + i]);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass der Programmierer zwei Bedingungen kopiert hat. </font><font style="vertical-align: inherit;">Der zweite sollte so aussehen:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (m_attrib.m_colorChannel.m_count) &lt;= <font></font>
{<font></font>
  attibutes.m_colorChannel.<font></font>
  PushBack(m_attrib.m_colorChannel[m_constructionIndex + i]);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer sehr √§hnlicher Fehler wurde ebenfalls gefunden: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V524 Es ist seltsam, dass der Hauptteil der Funktion 'EnabledAxis1' dem Hauptteil der Funktion 'EnabledAxis0' vollst√§ndig entspricht. </font><font style="vertical-align: inherit;">dCustomDoubleHingeActuator.cpp 88</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dCustomDoubleHingeActuator::EnabledAxis0</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> state)</span>
</span>{<font></font>
  m_axis0Enable = state;  &lt;=<font></font>
}<font></font>
<span class="hljs-keyword">void</span> dCustomDoubleHingeActuator::EnabledAxis1(<span class="hljs-keyword">bool</span> state)<font></font>
{<font></font>
  m_axis0Enable = state;  &lt;=<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sollte der Code wie folgt festgelegt werden:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dCustomDoubleHingeActuator::EnabledAxis1</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> state)</span>
</span>{<font></font>
  m_axis1Enable = state;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Noch ein Copy-Paste: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V525 Der Code enth√§lt die Sammlung √§hnlicher Bl√∂cke. </font><font style="vertical-align: inherit;">√úberpr√ºfen Sie die Elemente 'm_x', 'm_y', 'm_y' in den Zeilen 73, 74, 75. dWoodFracture.cpp 73</font></font><br>
<br>
<pre><code class="cpp hljs">WoodVoronoidEffect(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; count; i ++) <font></font>
  {<font></font>
    dFloat x = dGaussianRandom(size.m_x * <span class="hljs-number">0.1f</span>);<font></font>
    dFloat y = dGaussianRandom(size.m_y * <span class="hljs-number">0.1f</span>);  &lt;=<font></font>
    dFloat z = dGaussianRandom(size.m_y * <span class="hljs-number">0.1f</span>);  &lt;=<font></font>
  ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√∂chstwahrscheinlich sollte die Initialisierung der Variablen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z folgenderma√üen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aussehen:</font></font><br>
<br>
<pre><code class="cpp hljs">dFloat z = dGaussianRandom(size.m_z * <span class="hljs-number">0.1f</span>); </code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnungen N6, N7</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In Newton Game Dynamics gab es wie in fast jedem gro√üen C- oder C ++ - Projekt einige Warnungen vor unsicherer Arbeit mit Zeigern. </font><font style="vertical-align: inherit;">Solche Fehler sind oft sehr schwer zu finden und zu debuggen, sie verursachen Programmabst√ºrze, im Allgemeinen sind sie sehr gef√§hrlich und unvorhersehbar. </font><font style="vertical-align: inherit;">Gl√ºcklicherweise kann unser Analysator viele dieser Fehler erkennen. </font><font style="vertical-align: inherit;">Es scheint offensichtlich, dass es besser ist, einen Scheck einmal zu schreiben und kein Dampfbad zu nehmen, als viel Zeit damit zu verbringen, das Problem zu reproduzieren, den Problemort im Code zu finden und ihn zu debuggen. </font><font style="vertical-align: inherit;">Hier sind einige der Warnungen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V522 M√∂glicherweise wird ein potenzielles Nullzeiger-Gesicht dereferenziert. </font><font style="vertical-align: inherit;">dgContactSolver.cpp 351</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">DG_INLINE dgMinkFace* <span class="hljs-title">dgContactSolver::AddFace</span><span class="hljs-params">(dgInt32 v0,dgInt32 v1,
                                               dgInt32 v2)</span>
</span>{<font></font>
  dgMinkFace* <span class="hljs-keyword">const</span> face = NewFace();<font></font>
  face-&gt;m_mark = <span class="hljs-number">0</span>; <font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Definition der NewFace-Funktion ist klein, daher werde ich sie vollst√§ndig wiedergeben:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">DG_INLINE dgMinkFace* <span class="hljs-title">dgContactSolver::NewFace</span><span class="hljs-params">()</span>
</span>{<font></font>
  dgMinkFace* face = (dgMinkFace*)m_freeFace;<font></font>
  <span class="hljs-keyword">if</span> (m_freeFace) <font></font>
  {<font></font>
    m_freeFace = m_freeFace-&gt;m_next;<font></font>
  } <span class="hljs-keyword">else</span> <font></font>
  {<font></font>
    face = &amp;m_facePool[m_faceIndex];<font></font>
    m_faceIndex++;<font></font>
    <span class="hljs-keyword">if</span> (m_faceIndex &gt;= DG_CONVEX_MINK_MAX_FACES) <font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
    }<font></font>
  }<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> _DEBUG</span>
    <span class="hljs-built_in">memset</span>(face, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span> (dgMinkFace));
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
  <span class="hljs-keyword">return</span> face;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der Funktionen der Exit-Punkte </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewFace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL zur√ºck</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wenn eine Nullzeiger-Dereferenzierung zur√ºckgegeben wird und das Programm undefiniert ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt auch eine √§hnliche Warnung wie bei einem gef√§hrlicheren Code: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V522 M√∂glicherweise wird ein potenzieller Nullzeiger-Perimeter dereferenziert. </font><font style="vertical-align: inherit;">dgPolyhedra.cpp 2541</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">dgPolyhedra::PolygonizeFace</span><span class="hljs-params">(....)</span>
</span>{<font></font>
  ....<font></font>
  dgEdge* <span class="hljs-keyword">const</span> perimeter = flatFace.AddHalfEdge<font></font>
                           (edge1-&gt;m_next-&gt;m_incidentVertex,<font></font>
                            edge1-&gt;m_incidentVertex);<font></font>
  perimeter-&gt;m_twin = edge1;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist die Definition von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddHalfEdge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">dgEdge* <span class="hljs-title">dgPolyhedra::AddHalfEdge</span> <span class="hljs-params">(dgInt32 v0, dgInt32 v1)</span>
</span>{
  <span class="hljs-keyword">if</span> (v0 != v1) <font></font>
  {<font></font>
    <span class="hljs-function">dgPairKey <span class="hljs-title">pairKey</span> <span class="hljs-params">(v0, v1)</span></span>;
    <span class="hljs-function">dgEdge <span class="hljs-title">tmpEdge</span> <span class="hljs-params">(v0, <span class="hljs-number">-1</span>)</span></span>;<font></font>
    dgTreeNode* node = Insert (tmpEdge, pairKey.GetVal()); <font></font>
    <span class="hljs-keyword">return</span> node ? &amp;node-&gt;GetInfo() : <span class="hljs-literal">NULL</span>;<font></font>
  } <span class="hljs-keyword">else</span> <font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der R√ºckgabewert an zwei Punkten der drei m√∂glichen Austrittspunkte der Funktion. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt habe ich 48 </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Warnungen erhalten </font><font style="vertical-align: inherit;">. Zum gr√∂√üten Teil sind sie vom gleichen Typ, daher sehe ich keinen Grund, sie im Rahmen dieses Artikels weiter zu beschreiben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N8</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
V668 Es macht keinen Sinn, den Zeiger 'pBits' gegen Null zu testen, da der Speicher mit dem Operator 'new' zugewiesen wurde. Die Ausnahme wird im Falle eines Speicherzuordnungsfehlers generiert. TargaToOpenGl.cpp 166</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">char</span>* <span class="hljs-keyword">const</span> pBits = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span> [width * height * <span class="hljs-number">4</span>];
<span class="hljs-keyword">if</span>(pBits == <span class="hljs-literal">NULL</span>) <font></font>
{<font></font>
  fclose(pFile);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Analysator hat eine Situation festgestellt, in der der Wert des vom </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neuen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Operator zur√ºckgegebenen Zeigers </font><font style="vertical-align: inherit;">mit Null verglichen wird. </font><font style="vertical-align: inherit;">In der Regel bedeutet dies, dass sich das Programm anders verh√§lt, als es der Programmierer erwartet, wenn es nicht m√∂glich ist, Speicher zuzuweisen. </font><font style="vertical-align: inherit;">Wenn der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neue</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Operator </font><font style="vertical-align: inherit;">keinen Speicher zuweisen konnte, wird gem√§√ü dem </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ -</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sprachstandard </font><font style="vertical-align: inherit;">eine Ausnahme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std :: bad_alloc () ausgel√∂st. </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Somit wird die Bedingung niemals erf√ºllt. </font><font style="vertical-align: inherit;">Dies ist eindeutig nicht das Verhalten, auf das sich der Programmierer verlassen hat. </font><font style="vertical-align: inherit;">Er plante, die Datei im Falle eines Speicherzuordnungsfehlers zu schlie√üen. </font><font style="vertical-align: inherit;">Dies wird nicht passieren und ein Ressourcenleck wird auftreten. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnungen N9, N10, N11</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V764 M√∂glicherweise falsche Reihenfolge der an die Funktion 'CreateWheel' √ºbergebenen Argumente: 'height' und 'radius'. </font><font style="vertical-align: inherit;">StandardJoints.cpp 791</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V764 M√∂glicherweise falsche Reihenfolge der an die Funktion 'CreateWheel' √ºbergebenen Argumente: 'height' und 'radius'. </font><font style="vertical-align: inherit;">StandardJoints.cpp 833</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V764 M√∂glicherweise falsche Reihenfolge der an die Funktion 'CreateWheel' √ºbergebenen Argumente: 'height' und 'radius'. </font><font style="vertical-align: inherit;">StandardJoints.cpp 884</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sehen die Funktionsaufrufe aus:</font></font><br>
<br>
<pre><code class="cpp hljs">NewtonBody* <span class="hljs-keyword">const</span> wheel = CreateWheel (scene, origin, height, radius);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht die Funktionsdeklaration aus:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> NewtonBody* <span class="hljs-title">CreateWheel</span> <span class="hljs-params">(DemoEntityManager* <span class="hljs-keyword">const</span> scene,
  <span class="hljs-keyword">const</span> dVector&amp; location, dFloat radius, dFloat height)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Diagnose legt nahe, dass beim Aufrufen von Funktionen m√∂glicherweise die Argumente verwechselt wurden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnungen N12, N13</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Analysator gab Warnungen f√ºr zwei √§hnliche Methoden mit unterschiedlichen Namen aus: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V621 √úberpr√ºfen Sie den 'for'-Operator. Es ist m√∂glich, dass die Schleife falsch oder gar nicht ausgef√ºhrt wird. dgCollisionUserMesh.cpp 161 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V621 √úberpr√ºfen Sie den Operator 'for'. Es ist m√∂glich, dass die Schleife falsch oder gar nicht ausgef√ºhrt wird. dgCollisionUserMesh.cpp 236</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dgCollisionUserMesh::GetCollidingFacesContinue</span>
    <span class="hljs-params">(dgPolygonMeshDesc* <span class="hljs-keyword">const</span> data)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
  ....<font></font>
  data-&gt;m_faceCount = <span class="hljs-number">0</span>; &lt;=<font></font>
  data-&gt;m_userData = m_userData;<font></font>
  data-&gt;m_separationDistance = dgFloat32(<span class="hljs-number">0.0f</span>);<font></font>
  m_collideCallback(&amp;data-&gt;m_p0, <span class="hljs-literal">NULL</span>);<font></font>
  dgInt32 faceCount0 = <span class="hljs-number">0</span>;<font></font>
  dgInt32 faceIndexCount0 = <span class="hljs-number">0</span>;<font></font>
  dgInt32 faceIndexCount1 = <span class="hljs-number">0</span>;<font></font>
  dgInt32 stride = data-&gt;m_vertexStrideInBytes / <span class="hljs-keyword">sizeof</span>(dgFloat32);<font></font>
  dgFloat32* <span class="hljs-keyword">const</span> vertex = data-&gt;m_vertex;<font></font>
  dgInt32* <span class="hljs-keyword">const</span> address = data-&gt;m_meshData.m_globalFaceIndexStart;<font></font>
  dgFloat32* <span class="hljs-keyword">const</span> hitDistance = data-&gt;m_meshData.m_globalHitDistance;
  <span class="hljs-keyword">const</span> dgInt32* <span class="hljs-keyword">const</span> srcIndices = data-&gt;m_faceVertexIndex;<font></font>
  dgInt32* <span class="hljs-keyword">const</span> dstIndices = data-&gt;m_globalFaceVertexIndex;<font></font>
  dgInt32* <span class="hljs-keyword">const</span> faceIndexCountArray = data-&gt;m_faceIndexCount;
  <span class="hljs-keyword">for</span> (dgInt32 i = <span class="hljs-number">0</span>; (i &lt; data-&gt;m_faceCount)&amp;&amp;<font></font>
       (faceIndexCount0 &lt; (DG_MAX_COLLIDING_INDICES - <span class="hljs-number">32</span>));<font></font>
       i++)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dgCollisionUserMesh::GetCollidingFacesDescrete</span>
    <span class="hljs-params">(dgPolygonMeshDesc* <span class="hljs-keyword">const</span> data)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
  ....<font></font>
  data-&gt;m_faceCount = <span class="hljs-number">0</span>; &lt;=  <font></font>
  data-&gt;m_userData = m_userData;<font></font>
  data-&gt;m_separationDistance = dgFloat32(<span class="hljs-number">0.0f</span>);<font></font>
  m_collideCallback(&amp;data-&gt;m_p0, <span class="hljs-literal">NULL</span>);<font></font>
  dgInt32 faceCount0 = <span class="hljs-number">0</span>;<font></font>
  dgInt32 faceIndexCount0 = <span class="hljs-number">0</span>;<font></font>
  dgInt32 faceIndexCount1 = <span class="hljs-number">0</span>;<font></font>
  dgInt32 stride = data-&gt;m_vertexStrideInBytes / <span class="hljs-keyword">sizeof</span>(dgFloat32);<font></font>
  dgFloat32* <span class="hljs-keyword">const</span> vertex = data-&gt;m_vertex;<font></font>
  dgInt32* <span class="hljs-keyword">const</span> address = data-&gt;m_meshData.m_globalFaceIndexStart;<font></font>
  dgFloat32* <span class="hljs-keyword">const</span> hitDistance = data-&gt;m_meshData.m_globalHitDistance;
  <span class="hljs-keyword">const</span> dgInt32* <span class="hljs-keyword">const</span> srcIndices = data-&gt;m_faceVertexIndex;<font></font>
  dgInt32* <span class="hljs-keyword">const</span> dstIndices = data-&gt;m_globalFaceVertexIndex;<font></font>
  dgInt32* <span class="hljs-keyword">const</span> faceIndexCountArray = data-&gt;m_faceIndexCount;
  <span class="hljs-keyword">for</span> (dgInt32 i = <span class="hljs-number">0</span>; (i &lt; data-&gt;m_faceCount)&amp;&amp;<font></font>
       (faceIndexCount0 &lt; (DG_MAX_COLLIDING_INDICES - <span class="hljs-number">32</span>));<font></font>
       i++)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem in diesem Teil der Bedingung ist: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i &lt;data-&gt; m_faceCount.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Da </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-&gt; m_faceCount</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0 zugewiesen ist, wird diese Schleife nicht einmal ausgef√ºhrt. Wahrscheinlich hat der Programmierer beim Schreiben dieses Codes vergessen, das Feld </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_faceCount</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> neu zu </font><i><font style="vertical-align: inherit;">initialisieren</font></i><font style="vertical-align: inherit;"> , und dann einfach den Methodenk√∂rper kopiert. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N14, N15</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Analysator gab nacheinander zwei Warnungen f√ºr √§hnliche Codezeilen aus: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V630 Mit der Funktion '_alloca' wird Speicher f√ºr ein Array von Objekten zugewiesen, bei denen es sich um Klassen handelt, die Konstruktoren enthalten. dgSkeletonContainer.cpp 1341 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V630 Mit der Funktion '_alloca' wird Speicher f√ºr ein Array von Objekten zugewiesen, bei denen es sich um Klassen handelt, die Konstruktoren enthalten. dgSkeletonContainer.cpp 1342</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> alloca _alloca</span><font></font>
....<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> dAlloca(type,size) (type*) alloca ((size) * sizeof (type))</span><font></font>
....<font></font>
dgSpatialMatrix::dgSpatialMatrix();<font></font>
dgSpatialMatrix::dgSpatialMatrix(dgFloat32 val);<font></font>
....<font></font>
dgSpatialMatrix* <span class="hljs-keyword">const</span> bodyMassArray = dgAlloca(dgSpatialMatrix,<font></font>
                                                m_nodeCount);<font></font>
dgSpatialMatrix* <span class="hljs-keyword">const</span> jointMassArray = dgAlloca(dgSpatialMatrix,<font></font>
                                                 m_nodeCount); </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem mit diesem Codefragment besteht darin, dass sie mit zugewiesenem Speicher als Array von Objekten arbeiten, die einen Konstruktor oder Destruktor haben. Bei dieser Speicherzuweisung f√ºr die Klasse wird der Konstruktor nicht aufgerufen. Beim Freigeben des Speichers wird der Destruktor nicht aufgerufen. Das ist √§u√üerst verd√§chtig. Ein solcher Code kann dazu f√ºhren, dass mit nicht initialisierten Variablen und anderen Fehlern gearbeitet wird. Im Vergleich zum Ansatz mit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">malloc / free</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein solcher Code au√üerdem </font><i><font style="vertical-align: inherit;">insofern</font></i><font style="vertical-align: inherit;"> schlecht, als Sie keine eindeutige Fehlermeldung erhalten, wenn Sie versuchen, mehr Speicher zuzuweisen, als der Computer bereitstellen kann. Stattdessen wird ein Segmentierungsfehler angezeigt, wenn Sie versuchen, auf diesen Speicher zuzugreifen. Hier sind einige weitere Analysatormeldungen:</font></font><br>
<ul>
<li>V630 The '_alloca' function is used to allocate memory for an array of objects which are classes containing constructors. dVehicleSolver.cpp 498</li>
<li>V630 The '_alloca' function is used to allocate memory for an array of objects which are classes containing constructors. dVehicleSolver.cpp 499</li>
<li>V630 The '_alloca' function is used to allocate memory for an array of objects which are classes containing constructors. dVehicleSolver.cpp 1144</li>
<li>   10  .</li>
</ul><br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen ist PVS-Studio erneut fehlgeschlagen. Bei der √úberpr√ºfung wurden neue interessante Fehler entdeckt. </font><font style="vertical-align: inherit;">Und das bedeutet, dass der Analysator seine Arbeit gut macht und es uns erm√∂glicht, die Welt um uns herum ein wenig perfekter zu gestalten. </font><font style="vertical-align: inherit;">Um den statischen Analysator PVS-Studio in Ihrem Projekt zu testen, k√∂nnen Sie auf den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klicken </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie diesen Artikel einem englischsprachigen Publikum zug√§nglich machen m√∂chten, verwenden Sie bitte den Link zur √úbersetzung: Vladislav Stolyarov. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine zweite √úberpr√ºfung der Newton-Spieldynamik mit PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de498164/index.html">Produktstrategien f√ºr √úbergangskosten</a></li>
<li><a href="../de498168/index.html">Neue neuronale Netzwerkarchitekturen</a></li>
<li><a href="../de498172/index.html">Java Digest f√ºr den 21. April</a></li>
<li><a href="../de498174/index.html">Wie Sie aufh√∂ren, sich Sorgen zu machen und an A / B-Tests glauben</a></li>
<li><a href="../de498178/index.html">Wir arbeiten von zu Hause aus: Fotostrecke</a></li>
<li><a href="../de498186/index.html">Dienste basierend auf neuronalen Netzen f√ºr Designer</a></li>
<li><a href="../de498192/index.html">Steroid Kosmetiktasche: XD Design Urban Bumbag Review</a></li>
<li><a href="../de498200/index.html">Datenplattform f√ºr die beh√∂rdliche Berichterstattung</a></li>
<li><a href="../de498202/index.html">Landing Digest. Spezialist f√ºr Informationssicherheit</a></li>
<li><a href="../de498206/index.html">Erstellen Sie ein Graphql-Backend auf Golang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>