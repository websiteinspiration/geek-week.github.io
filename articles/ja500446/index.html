<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏂🏿 📱 👨🏽‍🤝‍👨🏼 R2DBCとPostgreSQLについて一言 🍞 🕺🏿 🧑🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近、再び誇大広告がリアクティブプログラミング全般、特にデータベースでのリアクティブプログラミングに集中していることがわかります。これについて言いたいことがいくつかあります。
 
 
 
 前のシリーズで何が起こったかを思い出させてください。2017年の終わりに、Spring 5がリリースされ、リア...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>R2DBCとPostgreSQLについて一言</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500446/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近、再び誇大広告がリアクティブプログラミング全般、特にデータベースでのリアクティブプログラミングに集中していることがわかります。</font><font style="vertical-align: inherit;">これについて言いたいことがいくつかあります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/691/6cd/f08/6916cdf0853ff2457e7f18be72824260.png" alt="画像"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のシリーズで何が起こったかを思い出させてください。</font><font style="vertical-align: inherit;">2017年の終わりに、Spring 5がリリースされ、リアクティブプログラミングのサポートが登場しました。</font><font style="vertical-align: inherit;">特に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebFlux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について話してい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">誰もがこの技術（典型的な誇大宣伝曲線）を鋭く試してみ始め、それから業界は誰もが再活動を必要とするわけではないことに気づきました。</font><font style="vertical-align: inherit;">主な教訓：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアクティブプログラミングはデバッグが難しい</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアクティブシステムの開発は、従来のブロックシステムよりも困難です。</font><font style="vertical-align: inherit;">意図せずにスレッドをブロックすると、終了します。</font><font style="vertical-align: inherit;">それが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトが登場した</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理由です</font><font style="vertical-align: inherit;">（著者の一人-</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bsideup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアクティブプログラミング、特に弾力性は、主に高負荷のNetflixで必要になります。</font><font style="vertical-align: inherit;">100 RPSの場合は、おそらくブロッキングスタイルでコードを記述する必要があります-安価で簡単です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、誰もがもう1つ理解しました。</font><font style="vertical-align: inherit;">リアクティブプログラミングを実際に展開するには、データベースを含むシステム全体をリアクティブにする必要があります。</font><font style="vertical-align: inherit;">問題は、データベースに反応型、または少なくとも非同期のAPIがない可能性があることです。</font><font style="vertical-align: inherit;">まあ、またはそのようなAPIはそうかもしれませんが、それはあなたのドライバーでサポートされていないかもしれません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、古典的なリレーショナルデータベースが必要なとき、私の周りのほとんど全員がPostgreSQLシステムを開発しています。</font><font style="vertical-align: inherit;">そうは言っても、デフォルトの選択です。</font><font style="vertical-align: inherit;">古い（10年以上）JDBCドライバー</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-pgjdbc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してPostgreSQLを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">操作し</font></a><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このドライバーは誰にとっても良いものです。</font><font style="vertical-align: inherit;">バグはほとんどありません。</font><font style="vertical-align: inherit;">このドライバーは、パフォーマンスが大幅に向上しています（このおかげで、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウラジミシトニコフ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">しかし、pgjdbcには1つの致命的な欠陥</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">非同期API</font></a><font style="vertical-align: inherit;">は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">サポートされていません</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
近年、非同期APIの開発を含む、PostgreSQLの代替ドライバーの開発が大きな競争に巻き込まれました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracleでさえ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">試み</font></a><font style="vertical-align: inherit;">ましたが、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Loom</font></a><font style="vertical-align: inherit;">プロジェクト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">とそのファイバーを</font></a><font style="vertical-align: inherit;">支持し</font><font style="vertical-align: inherit;">てすでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">終了</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">しかしその後、オラクルはそれをよりよく考え</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、再び</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">始めました</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、3つのソリューションがあります。</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/jasync-sql/jasync-sql-PostgreSQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用の非同期ドライバー。Kotlinで記述され、Nettyがトランスポートです</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vert.xが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用するソリューション</font><font style="vertical-align: inherit;">は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/mauricio/postgresql-async</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">プロジェクトがアーカイブされ、以前のjasync-sqlドライバーがまったく同じように書き直されることは注目に値します（ただし、オリジナルはScalaで記述され、新しいソリューションはKotlinで記述されています）。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新 </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私はコメントで修正されました、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vert.x</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">クライアントは生きていて</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ベンチマークで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">気分が良い</font><font style="vertical-align: inherit;">です。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Springチームのドライバーは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/r2dbc/r2dbc-postgresql</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">このドライバーは即座にリアクティブAPI（非同期ではない）を提供し、Nettyはjasync-sqlのようにトランスポートに使用されます。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
概念的には、これらのドライバーは同様の原則に基づいて構築されています。</font><font style="vertical-align: inherit;">これらはすべて、既存のPostgreSQL機能のみを使用します。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.postgresql.org/docs/current/libpq-async.html</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.postgresql.org/docs/current/libpq-notify.html</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、ドライバが（ -オレグDokukはしたくないかのようにワイヤプロトコルのPostgresを変更することはできません</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.youtube.com/watch?v=n9tL2I_Big8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">つまり、PostgresはSELECTクエリのために別の接続を必要とします。</font><font style="vertical-align: inherit;">さらに、Postgresは各接続に対して新しいプロセスを作成してい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます-https://www.postgresql.org/docs/current/tutorial-arch.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、朗報があります。</font><font style="vertical-align: inherit;">変更リクエストは、結果を待つことなく（パイプラインを使用して）バッチで送信できます。</font><font style="vertical-align: inherit;">この場合、リクエストごとにConnectionは必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、要約します。リアクティブ（または非同期）PGドライバーは、アプリケーションの状況を改善します（現在は、クエリにスレッドを費やすのではなく、NettyベースのノンブロッキングIOを使用しています）。特にPostgreSQL側では、状況はあまり良くありません（ネットワークプロトコルとデータベースアーキテクチャの改善を期待しましょう） ）</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのドライバーをもっと注意深く見るべきですか？私のように、あなたの仕事でSpringを使用している場合、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r2dbc-postgresql</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">おそらく</font><font style="vertical-align: inherit;">良い選択です。フレームワークの最新バージョンでは、Pivo​​talの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">スタッフ</font></a><font style="vertical-align: inherit;">がドライバーを通常のものとかなりうまく統合していることが重要です。たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring Data R2DBC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（これはまだRCです）。</font><font style="vertical-align: inherit;">その結果、低レベルのドライバーAPIと接続プールを使用する必要がなくなり、このような複雑なプロジェクトでミスを犯す可能性が低くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Data R2DBCを使用した最低限の例（ドキュメントでよく調べました）は、おなじみのように見え</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。1.資格情報と接続プールを構成します。</font></font><br>
<br>
<pre><code class="java hljs">spring.r2dbc.username=postgres<font></font>
spring.r2dbc.password=P4$$W0RddD<font></font>
spring.r2dbc.url=r2dbc:postgresql:<span class="hljs-comment">//localhost:5432/r2dbc</span>
spring.r2dbc.pool.enabled=<span class="hljs-keyword">true</span>
spring.r2dbc.pool.initial-size=<span class="hljs-number">10</span>
spring.r2dbc.pool.max-idle-time=<span class="hljs-number">1</span>m<font></font>
spring.r2dbc.pool.max-size=<span class="hljs-number">30</span>
spring.data.r2dbc.repositories.enabled=<span class="hljs-keyword">true</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.エンティティを作成します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> </span>{
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> String firstName;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> String lastName;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Customer</span><span class="hljs-params">(String firstName, String lastName)</span> </span>{
        <span class="hljs-keyword">this</span>.firstName = firstName;
        <span class="hljs-keyword">this</span>.lastName = lastName;<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.通常のリポジトリを作成します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CustomerRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ReactiveCrudRepository</span>&lt;<span class="hljs-title">Customer</span>, <span class="hljs-title">Long</span>&gt; </span>{<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.リポジトリを使用します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/")</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomerController</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> CustomerRepository customerRepository;<font></font>
<font></font>
    <span class="hljs-meta">@PostMapping("/customer")</span>
    <span class="hljs-function">Mono&lt;Void&gt; <span class="hljs-title">create</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Publisher&lt;Customer&gt; customerFlux)</span> </span>{
        <span class="hljs-keyword">return</span> customerRepository.saveAll(customerFlux).then();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@GetMapping("/customer")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Flux&lt;Customer&gt; <span class="hljs-title">list</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> customerRepository.findAll();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@GetMapping("/customer/{id}")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Mono&lt;Customer&gt; <span class="hljs-title">findById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> </span>{
        <span class="hljs-keyword">return</span> customerRepository.findById(id);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完全な例は、このリポジトリ（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Hixon10/spring-boot-r2dbc-postgresql-example）にあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、重要なことについて話しましょう。アプリケーションでr2dbcを使用する必要がありますか？</font><font style="vertical-align: inherit;">私の意見では、それは早すぎます。</font><font style="vertical-align: inherit;">一連のテクノロジー（ドライバー、Spring DATA）がリリースされ、最初の恥ずかしがり屋を集めるのを待ちます。</font><font style="vertical-align: inherit;">2021年には、このドライバーをより詳細に検討することがすでに可能になると思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の状況-リアクティブシステム全体（Spring WebFlux + R2DBCデータベースドライバー）は非常にクールに見えます。</font><font style="vertical-align: inherit;">文字通り今日</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olegchir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンチマーク付きの記事へのリンクが</font><font style="vertical-align: inherit;">ある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダイジェスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">公開しました</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">-https </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">://technology.amis.nl/2020/04/10/spring-blocking-vs-non-blocking-r2dbc-vs-jdbc-and-webflux-vs- web-mvc /</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要するに-反応性が勝つ。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500428/index.html">パンダが大量のデータを処理するのを助ける方法は？</a></li>
<li><a href="../ja500430/index.html">検疫済みの仕事を探す方法</a></li>
<li><a href="../ja500436/index.html">ランダムニューロンと論理関数に基づくバイナリニューラルネットワークの到来</a></li>
<li><a href="../ja500438/index.html">SFTPおよびFTPS</a></li>
<li><a href="../ja500444/index.html">初心者と経験者を区別する9つのPythonプログラミングスキル</a></li>
<li><a href="../ja500448/index.html">Prometheus：BlackboxエクスポーターによるHTTPモニタリング</a></li>
<li><a href="../ja500450/index.html">古い子供用シンセサイザーからMIDIキーボードを作成する</a></li>
<li><a href="../ja500452/index.html">ディープラーニングに関する高い推論</a></li>
<li><a href="../ja500454/index.html">「どんなマリーナ？」または、Xamarin（Android）のモバイルアプリケーションを使用してBluetooth経由でコントローラーを制御します</a></li>
<li><a href="../ja500456/index.html">BpfTrace-最後に、Linux上のDtraceの完全な代替品</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>