<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌖 🕹️ 🔗 L'efficacité Brotli dans le monde réel 🤞🏻 👩‍👩‍👧‍👧 👨‍👩‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'une des règles les plus fondamentales pour développer des sites Web rapides est d'optimiser leurs ressources. Si nous parlons de ressources textuell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>L'efficacité Brotli dans le monde réel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499278/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'une des règles les plus fondamentales pour développer des sites Web rapides est d'optimiser leurs ressources. Si nous parlons de ressources textuelles - de code écrit en HTML, CSS et JavaScript, cela signifie que nous parlons de compression de données. </font><font style="vertical-align: inherit;">
La norme de facto pour la compression des ressources textuelles sur le Web est la méthode Gzip. À savoir, environ 80% des ressources compressées obtenues lors des téléchargements du site sont compressées à l'aide de Gzip. Pour compresser les 20% restants des ressources, un algorithme beaucoup plus récent est utilisé - Brotli.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/f1/0c/go/f10cgoennqxp98xrt8hxus_wkii.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, ces 100% des ressources compressées qui entrent dans les navigateurs lorsqu'ils reçoivent des réponses aux demandes des sites n'incluent absolument pas toutes les ressources. Il existe encore de nombreuses ressources qui pourraient être compressées ou qui pourraient être compressées. Mais ces ressources restent non compressées. Des mesures plus détaillées concernant la compression peuvent être trouvées dans la section </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compression</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la </font><font style="vertical-align: inherit;">ressource Web Almanac. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La méthode de compression gzip est incroyablement efficace. Tout le travail de Shakespeare en texte brut prend 5,3 Mo. Et après compression Gzip (niveau de compression 6), ils n'occupent que 1,9 Mo. Cela signifie que la taille du fichier dans lequel ces données sont stockées a diminué de 2,8 fois. Dans le même temps, les données ne sont pas perdues pendant la compression. Génial!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore mieux, le degré de compression Gzip est affecté par la présence de lignes en double dans les fichiers. Plus il y a de répétitions dans le texte, plus la compression est efficace. C'est très bon pour le web, car le code écrit en HTML, CSS et JS a une syntaxe uniforme et contient de nombreuses répétitions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, bien que Gzip soit une méthode de compression très efficace, il est également assez ancien. Il est apparu en 1992 (ce qui, bien sûr, aide à expliquer sa prévalence généralisée). Après 21 ans, en 2013, Google a publié Brotli, un nouvel algorithme qui promet des niveaux de compression encore plus élevés que ceux dont la méthode Gzip est capable. Les mêmes œuvres de Shakespeare de 5,2 Mo sont compressées en utilisant Brotli à une taille de 1,7 Mo (avec un niveau de compression de 6). Et cela signifie déjà une réduction de 3,1 fois la taille du fichier. C'est encore mieux que d'utiliser Gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour évaluer le niveau de compression des données à l'aide de Gzip et Brotli, vous découvrirez probablement que lors de la compression de certaines données, Brotli est beaucoup plus efficace que Gzip. </font><font style="vertical-align: inherit;">Par exemple, les données ReactDOM sont 27% plus petites lorsqu'elles sont compressées à l'aide de Brotli avec un niveau de compression maximum (11) que lors de l'utilisation de Gzip avec un niveau de compression maximum (9). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une comparaison de la compression Brotli avec la compression Gzip lors du traitement de ReactDOM.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveau de compression</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taille (en octets)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efficacité de la compression (par rapport aux données non compressées)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% D'amélioration par rapport à Gzip</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,73</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39898</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,97</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39416</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38488</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36323</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dix-neuf%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36048</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vingt%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35804</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,31</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vingt%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35709</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,32</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35659</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dix</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33590</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,53</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onze</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33036</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,59</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, à tous les niveaux de compression, Brotli contourne Gzip. Au niveau de compression maximal disponible avec Brotli, il est 27% plus efficace que Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et, sur la base d'une observation personnelle, je note que la transition d'un de mes clients de Gzip à Brotli a entraîné une réduction médiane de la taille des fichiers de 31%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, au cours des dernières années, avec d'autres experts en performance, j'ai encouragé les clients à passer de Gzip à Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais dire quelques mots sur la prise en charge du navigateur pour Gzip et Brotli. Gzip est si répandu que CanIUse n'affiche même pas un tableau avec des informations de support. Il le dit: "Cet en-tête HTTP est pris en charge dans presque tous les navigateurs (à commencer par IE6 +, Firefox 2+, Chrome 1+, etc.)." Et Brotli, tout en écrivant ce matériel, bénéficie d'un </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">soutien</font></a><font style="vertical-align: inherit;"> très agréable </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à 93,17%. Et c'est très, beaucoup! Ainsi, si votre site a au moins une taille importante, vous n'aimerez pas particulièrement le retour de ressources non compressées à plus de 6% de vos utilisateurs. Mais en utilisant Brotli, vous ne perdrez rien. Les clients utilisent un modèle progressif de prise en charge de nouveaux algorithmes, de sorte que les utilisateurs qui ne peuvent pas accepter les ressources Brotli utiliseront simplement l'option de secours sous la forme de Gzip. Nous en parlerons plus loin ci-dessous.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, surtout si vous utilisez CDN, activer Brotli est une question de secondes. </font><font style="vertical-align: inherit;">C'est du moins le cas avec Cloudflare, le service que j'utilise pour le site CSS Wizardry. </font><font style="vertical-align: inherit;">Cependant, beaucoup de mes clients, si nous parlons des deux dernières années, ne réussissent pas aussi bien. </font><font style="vertical-align: inherit;">Certains d'entre eux prennent en charge leur propre infrastructure, et la pratique montre que l'installation et le déploiement de Brotli n'est pas si simple. </font><font style="vertical-align: inherit;">Certains utilisent des services CDN qui ne diffèrent pas par des capacités facilement accessibles pour prendre en charge le nouvel algorithme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les cas où nous ne pouvions pas passer à Brotli, nous avions toujours une question sans réponse: "Et si ...". </font><font style="vertical-align: inherit;">En conséquence, j'ai finalement décidé de m'armer de chiffres et de répondre à la question de savoir ce qui donne au site la transition vers Brotli.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moins n'est pas nécessairement plus rapide.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habituellement, «moins» signifie cependant «plus vite». </font><font style="vertical-align: inherit;">En règle générale, si vous réduisez la taille du fichier, il sera transféré plus rapidement du serveur vers le client. </font><font style="vertical-align: inherit;">Mais si vous faites un fichier, disons, 20% plus petit, cela ne signifie pas qu'il arrivera 20% plus rapidement. </font><font style="vertical-align: inherit;">Le point ici est que la taille du fichier n'est qu'un aspect des performances Web. </font><font style="vertical-align: inherit;">Et quelle que soit la taille du fichier, la ressource livrée au navigateur est associée à de nombreux autres facteurs et à de nombreuses limitations du système - retards réseau, perte de paquets, etc. </font><font style="vertical-align: inherit;">En d'autres termes, économiser sur la taille du fichier aide à transférer les mêmes données qu'auparavant, en envoyant moins de paquets, mais le transfert de données entre le serveur et le client est limité par les retards du réseau, par conséquent, la vitesse à laquelle les paquets arrivant au client seront plus petits ne changera pas.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP, paquets, délai d'aller-retour</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il est très simpliste d'envisager de transférer des fichiers du serveur vers le client, nous devrons jeter un œil au protocole TCP. Lorsque nous recevons un fichier du serveur, il ne nous parvient pas en une seule fois. Le protocole TCP, au-dessus duquel HTTP fonctionne, divise les fichiers en segments appelés paquets. Ces paquets sont envoyés au client dans l'ordre, dans l'ordre. Le client confirme la réception de chaque paquet de la série avant de commencer le transfert de la série suivante. Cela se produit jusqu'à ce que le client collecte tous les packages nécessaires, jusqu'à ce qu'il n'y ait aucun package non envoyé sur le serveur et jusqu'à ce que le client puisse collecter les packages dans quelque chose qui peut être reconnu comme un fichier. Pour que la session de transfert de séquence de paquets se termine avec succès, le serveur doit les envoyer au client et le client doit accuser réception. Temps,La quantité de données nécessaires pour recevoir des données et recevoir une confirmation de réception est appelée Round Trip Time (RTT).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque nouvelle connexion TCP ne peut pas connaître la bande passante disponible et la fiabilité de la connexion (c'est-à-dire quel est le niveau de perte de paquets). Si le serveur essaie d'envoyer des mégaoctets de données sur une connexion qui prend en charge un taux de transfert de données d'un mégabit par seconde, un tel transfert submergera la connexion et entraînera une surcharge du canal de communication. Et vice versa - si le serveur essaie de transférer une petite quantité de données via une connexion très rapide, la connexion sera utilisée de manière inefficace, elle sera inactive.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour résoudre ce casse-tête, TCP utilise un mécanisme appelé démarrage lent. </font><font style="vertical-align: inherit;">Cela fait partie de la stratégie de gestion des fenêtres de surcharge. </font><font style="vertical-align: inherit;">Chaque nouvelle connexion TCP est limitée par la possibilité d'envoyer seulement 10 paquets de données dans la première séquence de paquets (10 paquets - la taille de la fenêtre de congestion initiale). </font><font style="vertical-align: inherit;">Dix segments TCP représentent environ 14 Ko de données. </font><font style="vertical-align: inherit;">Si ces paquets sont reçus avec succès par le client, la deuxième série contiendra déjà 20 paquets, puis il y en aura 40, 80, 160 et ainsi de suite. </font><font style="vertical-align: inherit;">La croissance exponentielle des paquets en séquences se poursuivra jusqu'à ce que l'un des événements suivants se produise:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le système fera face à une perte de paquets. </font><font style="vertical-align: inherit;">À ce stade, le serveur réduira le nombre de paquets dans l'ordre suivant, en divisant le nombre de paquets précédent par 2, et essaiera de transférer à nouveau les données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons atteint la limite de bande passante disponible et pouvons l'utiliser à pleine capacité.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette stratégie simple et élégante vous permet d'équilibrer au bord de la prudence et de l'optimisme. </font><font style="vertical-align: inherit;">Elle s'applique à chaque nouvelle connexion TCP établie par l'application Web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes simples, la taille initiale de la fenêtre d'encombrement de la nouvelle connexion TCP n'est que d'environ 14 Ko. </font><font style="vertical-align: inherit;">Soit environ 11,8% des données ReactDOM non compressées. </font><font style="vertical-align: inherit;">Soit 36,94% des données compressées à l'aide de Gzip, soit 42,38% des données compressées à l'aide de Brotli (au niveau de compression maximal). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis nous allons ralentir. </font><font style="vertical-align: inherit;">Le passage de 11,8% à 36,94% est déjà une amélioration très sensible! </font><font style="vertical-align: inherit;">Mais la transition de 36,94% à 42,38% - c'est loin d'être aussi impressionnant. </font><font style="vertical-align: inherit;">Que ce passe-t-il?</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Numéro de session de données</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La quantité de données transférées en une seule session, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quantité cumulée de données transférées, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La séquence dans laquelle les données ReactDOM sont transférées</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gzip (37,904 Ko), Brotli (33,036 Ko)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">98</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">210</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option non compressée (118,656 Ko)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">224</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">434</font></font></td>
<td></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'avère que les données compressées avec Gzip et les données compressées avec Brotli sont transmises dans la même série de paquets. </font><font style="vertical-align: inherit;">Le transfert d'un fichier prend deux séquences. </font><font style="vertical-align: inherit;">Si le RTT s'avère assez uniforme lors de la transmission de toutes les séquences, cela signifie qu'il faut le même temps pour transmettre des données compressées à l'aide de Gzip et Brotli. </font><font style="vertical-align: inherit;">En revanche, le transfert d'une version non compressée de données nécessite quatre séries de paquets, pas deux. </font><font style="vertical-align: inherit;">Et cela, en particulier sur les connexions avec des latences de réseau élevées, peut entraîner un temps assez important requis pour le transfert de données.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai tendance ici au fait que la vitesse de transfert de données ne dépend pas seulement de la taille des fichiers. Il est influencé par les caractéristiques du fonctionnement du protocole TCP. Nous n'avons pas seulement besoin de réduire la taille des fichiers. Nous devons les rendre beaucoup plus petits, en les portant à une taille qui leur permettra d'être transmis en moins de séquences de paquets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie, en théorie, que pour que l'algorithme de Brotli soit sensiblement plus efficace que Gzip, il doit être capable de compresser les données de manière beaucoup plus agressive. Ceci est nécessaire pour que les données puissent être transmises en moins de séquences de paquets que lors de l'utilisation de Gzip. Et je ne sais pas comment cet algorithme va se développer ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que le modèle ci-dessus est assez simplifié. Il y a de nombreux autres facteurs à considérer. Par exemple - s'agit-il d'une connexion TCP nouvelle ou déjà ouverte? La connexion est-elle utilisée pour autre chose? Les mécanismes de priorisation du trafic serveur arrêtent-ils et démarrent-ils le transfert de données? Les flux H / 2 ont-ils un accès exclusif à la bande passante? Cette section est une étude plus sérieuse. Cela devrait être considéré comme un bon point de départ pour vos propres recherches. Mais pensez à analyser en profondeur les données à l'aide de quelque chose comme Wireshark, et lisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> document, qui fournit une description plus approfondie des 14 premiers Ko «magiques».</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui précède s'applique uniquement aux nouvelles connexions TCP. </font><font style="vertical-align: inherit;">Les fichiers transférés via une connexion existante ne passeront pas par la procédure de démarrage lent. </font><font style="vertical-align: inherit;">Cela nous amène à deux conclusions importantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je ne pense pas que cela vaille la peine d'être répété, mais je le répète: les ressources statiques doivent être hébergées. </font><font style="vertical-align: inherit;">C'est un excellent moyen d'éviter les retards de démarrage lent, car en utilisant votre propre serveur, déjà «réchauffé», les paquets quittant ce serveur ont accès à une bande passante plus large. </font><font style="vertical-align: inherit;">Cette conclusion m'amène à la deuxième conclusion.</font></font></li>
<li> ,              ,    .       ,            .    .</li>
</ol><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong>   </strong></td>
<td><strong> ,    , </strong></td>
<td><strong>   , </strong></td>
</tr>
<tr>
<td>1</td>
<td>14</td>
<td>14</td>
</tr>
<tr>
<td>2</td>
<td>28</td>
<td>42</td>
</tr>
<tr>
<td>3</td>
<td>56</td>
<td>98</td>
</tr>
<tr>
<td>4</td>
<td>112</td>
<td>210</td>
</tr>
<tr>
<td>5</td>
<td>224</td>
<td>434</td>
</tr>
<tr>
<td>6</td>
<td>448</td>
<td>882</td>
</tr>
<tr>
<td>7</td>
<td>896</td>
<td>1778</td>
</tr>
<tr>
<td>8</td>
<td>1792</td>
<td>3570</td>
</tr>
<tr>
<td>9</td>
<td>3584</td>
<td>7154</td>
</tr>
<tr>
<td>10</td>
<td>7168</td>
<td>14322</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>20</td>
<td>7340032</td>
<td>14680050</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À la fin de la 10e session de transfert de données, la quantité de données transférées en une seule session est de 7168 Ko, alors qu'au total, 14322 Ko de données ont déjà été transférées. </font><font style="vertical-align: inherit;">C'est plus que suffisant pour un travail ordinaire sur Internet (c'est-à-dire pas pour visionner Game of Thrones). </font><font style="vertical-align: inherit;">En fait, il arrive généralement que nous chargions la page Web entière et toutes ses ressources sans même atteindre la limite de notre bande passante. </font><font style="vertical-align: inherit;">En d'autres termes, l'utilisation d'un canal de communication à fibre optique de 1 Gbit / s (c'est-à-dire 0,125 Go / s) ne rendra pas la navigation normale beaucoup plus rapide que l'utilisation d'une connexion plus lente, car la plupart de ce canal ne sera utilisé.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et à la 20e session de transfert de données, nous transférons théoriquement 7,34 Go de données dans une séquence de paquets.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et le monde réel?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'à présent, nous nous sommes engagés dans des considérations théoriques. </font><font style="vertical-align: inherit;">Et j'ai commencé à travailler sur ce matériel car j'aimerais connaître l'impact que Brotli peut avoir sur des sites réels. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'à présent, les chiffres donnés ici ont montré l'énorme différence entre le manque de compression et l'utilisation de Gzip, et le fait que le gain de l'utilisation de Brotli, par rapport à Gzip, est assez modeste. </font><font style="vertical-align: inherit;">Cela nous indique que la transition du manque de compression à l'utilisation de Gzip donnera une amélioration notable, tandis que la transition de Gzip à Brotli peut probablement sembler beaucoup moins impressionnante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai sélectionné, à titre d'exemples, plusieurs sites, guidés par les considérations suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le site doit être relativement connu (il vaut mieux utiliser des sites comparables à quelque chose).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le site doit être adapté au test. </font><font style="vertical-align: inherit;">C'est-à-dire qu'il devrait être d'une taille appropriée (il sera donc plus intéressant d'analyser ses matériaux pour la compression), et en même temps, il ne devrait pas contenir principalement des matériaux qui ne sont pas compressés en utilisant Gzip / Brotli - comme, par exemple, YouTube.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous les sites de la collection ne doivent pas appartenir à de grandes sociétés (cela vaut la peine d'analyser certains, disons, des sites «réguliers»).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de ces exigences, j'ai </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sélectionné les</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sites répertoriés ci-dessous et commencé les tests. </font><font style="vertical-align: inherit;">Voici les sites que j'ai sélectionnés:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m.facebook.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.linkedin.com</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.insider.com</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yandex.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.esedirect.co.uk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.story.one</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.cdm-bedrijfskleding.nl</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.everlane.com</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne voulais pas compliquer les tests, j'ai donc opté pour les indicateurs suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La quantité de données transférées.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premier temps de peinture contentieuse (FCP).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils ont été analysés dans les situations suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manque de compression.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de gzip.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de brotli.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La métrique FCP semble proche du monde réel et suffisamment universelle pour être appliquée à n'importe quel site, car elle vous permet d'évaluer ce dont les gens ont besoin de sites Web - c'est-à-dire le contenu de ces sites. </font><font style="vertical-align: inherit;">De plus, j'ai choisi cette métrique parce que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Calvano</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , une personne intelligente, a déclaré ceci: "L'expérience me dit que l'utilisation de Brotli conduit à une amélioration de FCP, en particulier lorsque les ressources CSS / JS critiques sont importantes" .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essai</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais vous dire un sale secret. De nombreuses études sur les performances Web (pas toutes, mais beaucoup) ne sont pas basées sur des recherches sur l'amélioration des performances, mais sur des conclusions contraires - de la dégradation des performances. Par exemple, la BBC est beaucoup plus facile à affirmer qu '«ils perdent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10% des utilisateurs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour chaque seconde supplémentaire dont ils ont besoin pour charger leur site» que pour comprendre ce qui se passe grâce à une amélioration d'une seconde. Il est beaucoup plus facile de ralentir le site plutôt que de l'accélérer, et vous avez le sentiment que c'est pourquoi de nombreuses personnes font si bien ce travail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de cela, je n'ai pas essayé de télécharger d'abord les sites qui utilisent Gzip, puis, hors ligne, de compresser leur contenu à l'aide de Brotli. </font><font style="vertical-align: inherit;">Au lieu de cela, j'ai trouvé des sites qui utilisent Brotli, puis j'ai désactivé la compression. </font><font style="vertical-align: inherit;">Je suis passé de Brotli à Gzip, puis de Gzip à la non-compression, mesurant comment cela fonctionne sur le site. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que je ne puisse pas, par exemple, me connecter au serveur Linkedin et déconnecter Brotli, je peux simplement accéder à ce site à partir d'un navigateur qui ne prend pas en charge Brotli. </font><font style="vertical-align: inherit;">Bien que je ne puisse pas désactiver la prise en charge de Brotli dans Chrome, je peux cacher au serveur le fait que mon navigateur prend en charge Brotli. </font><font style="vertical-align: inherit;">Les navigateurs indiquent aux serveurs les algorithmes de compression qu'ils prennent en charge à l'aide de l'en-tête de demande</font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En utilisant Webpagetest, je peux personnaliser les en-têtes moi-même. </font><font style="vertical-align: inherit;">Donc, tout est très simple!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3bb/295/390/3bb2953909f7cea0ac8970049f763638.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fonctionnalités avancées de WebPageTest nous permettent de définir des en-têtes de demande personnalisés.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Voici comment configurer le champ En-têtes personnalisés:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arrêt complet de la </font><font style="vertical-align: inherit;">compression: </font></font><code>accept-encoding: randomstring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactivation Brötli, mais gzip: </font></font><code>accept-encoding: gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour utiliser Brotli si cette méthode de compression est supportée par le site (et à condition qu'elle soit supportée par le navigateur): le champ reste vide.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez savoir si cela fonctionne comme prévu en vérifiant la présence (ou l'absence) de l'en-tête </font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans la réponse du serveur.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résultats</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme prévu, la transition du manque de compression vers Gzip signifiait une amélioration significative, mais la transition de Gzip à Brotli ne semble pas aussi impressionnante. </font><font style="vertical-align: inherit;">Les données brutes de mes expériences peuvent être trouvées </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Voici les constatations qui m'intéressent le plus:</font></font><br>
<br>
<ul>
<li>     Gzip     : 73%.</li>
<li>  FCP   Gzip     : 23.305%.</li>
<li>     Brotli    Gzip: 5.767%.</li>
<li>  FCP   Brotli    Gzip: 3.462%.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sont toutes des valeurs médianes. </font><font style="vertical-align: inherit;">En parlant de «tailles de matériaux», je veux dire uniquement HTML, CSS et JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grâce à l'utilisation de Gzip, la taille des fichiers a été réduite de 73% par rapport à leurs versions non compressées. </font><font style="vertical-align: inherit;">Et l'utilisation de Brotli n'a permis de réduire la taille des fichiers que de 5,7% supplémentaires. </font><font style="vertical-align: inherit;">Si nous parlons de FCP, grâce à Gzip, cet indicateur s'est amélioré de 23% par rapport au manque de compression, et Brotli n'y a ajouté que 3,5% supplémentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien qu'il semble que de tels résultats renforcent la théorie, il existe plusieurs façons d'améliorer ces résultats. </font><font style="vertical-align: inherit;">La première consiste à tester un nombre beaucoup plus grand de sites, j'aimerais en discuter deux de plus en détail.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Données sur les ressources propres et données provenant de sources externes</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de mes tests, j'ai désactivé Brotli partout, et pas seulement pour les serveurs qui stockent les données du site. </font><font style="vertical-align: inherit;">Cela signifie que j'ai mesuré non seulement les avantages que les sites retirent de l'utilisation de Brotli, mais, en termes de potentiel, les avantages que Brotli reçoit des sources externes utilisées par ces sites. </font><font style="vertical-align: inherit;">Cela n'entre dans le champ de nos intérêts que si des ressources tierces sont utilisées de la manière critique des sites sous enquête, mais cela mérite d'être rappelé.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveaux de compression</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En parlant de compression, nous discutons souvent des résultats obtenus avec le meilleur scénario d'application de compression. À savoir - lorsque vous utilisez Gzip, nous avons à l'esprit le 9e niveau de compression et lorsque vous utilisez Brotli - 11e niveau. Cependant, il est peu probable que le serveur étudié soit configuré de la manière la plus optimale. Par exemple, Apache utilise la compression gzip de niveau 6, tandis que NGINX utilise uniquement la première. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La désactivation de Brotli signifie que nous passons à l'option de secours, à Gzip, et compte tenu de la façon dont j'ai testé les sites, je ne pouvais pas changer une telle configuration de secours ou agir en quelque sorte. Je dis cela parce que les matériaux des deux sites du test ont augmenté de taille lorsque Brotli a été allumé. Cela m'indique que le niveau de compression Gzip était tel qu'il fournissait une compression plus forte que le niveau de compression Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le choix d'un niveau de compression est un compromis. </font><font style="vertical-align: inherit;">Tout le monde aimerait demander le niveau de compression le plus élevé et à ce propos, considérer le problème résolu. </font><font style="vertical-align: inherit;">Mais une telle approche n'est pas pratique. </font><font style="vertical-align: inherit;">Le fait est que le temps supplémentaire dont le serveur aura besoin pour effectuer dynamiquement cette compression est très susceptible d'annuler les avantages d'un niveau de compression plus élevé. </font><font style="vertical-align: inherit;">Pour faire face à ce problème, vous pouvez recourir aux éléments suivants:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez utiliser un niveau de compression pragmatique qui offre le bon équilibre entre vitesse et efficacité pendant la compression dynamique des données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez télécharger des ressources statiques précompressées sur le serveur, dont le niveau de compression est supérieur à celui utilisé pour la compression dynamique. </font><font style="vertical-align: inherit;">Dans ce cas, pour sélectionner le niveau de compression dynamique, vous pouvez utiliser l'idée décrite dans le premier paragraphe.</font></font></li>
</ol><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On a l'impression que, raisonnablement, on peut reconnaître l'insignifiance des avantages de Brotli sur Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si l'activation de la prise en charge de Brotli est une question de mouvements de souris dans le panneau de configuration de votre CDN, alors vous devriez prendre Brotli et l'activer maintenant. La prise en charge de cet algorithme de compression est suffisamment large, les navigateurs qui ne prennent pas en charge Brotli passent facilement à des mécanismes de rechange, et même une légère amélioration vaut mieux que rien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si possible, téléchargez des ressources statiques précompressées au niveau de compression maximal sur les serveurs. Et pour la compression dynamique, n'utilisez pas les niveaux de compression les plus élevés, mais pas les plus bas. Si vous utilisez NGINX, assurez-vous que vous n'utilisez pas le premier niveau de compression standard pour NGINX.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, si pour utiliser Brotli, vous pouvez avoir besoin de semaines de développement, de test et de déploiement, ne paniquez pas - assurez-vous simplement d'utiliser la compression Gzip pour tout ce qui peut être compressé (cela inclut, en plus des ressources textuelles, des fichiers .ico et .ttf - s'ils sont bien sûr utilisés dans votre projet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suppose que la version courte de cet article peut ressembler à ceci: si vous ne devez pas ou ne pouvez pas activer Brotli, vous ne perdez pas autant. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chers lecteurs! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envisagez-vous d'utiliser Brotli?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499254/index.html">Un membre du comité du programme PyConRu 2020 répond aux questions sur Python: un look à jour et un peu de fourchelang</a></li>
<li><a href="../fr499262/index.html">Dernier hackathon en ligne pour les indépendants SMZhack: des projets qui toucheront les gens</a></li>
<li><a href="../fr499268/index.html">Conscience spatiale: que peuvent faire les lunettes Hololens?</a></li>
<li><a href="../fr499272/index.html">Composants de soudure 0201. Nerveux, veuillez vous éloigner des écrans</a></li>
<li><a href="../fr499274/index.html">Nous avons démonté la nouvelle capsule. Nous savons combien de microphones et comment cela fonctionne</a></li>
<li><a href="../fr499280/index.html">Le prix des frameworks JavaScript</a></li>
<li><a href="../fr499286/index.html">Étude: le commerce d'accès aux réseaux d'entreprise se développe sur le marché noir</a></li>
<li><a href="../fr499288/index.html">Toutes les mesures pour soutenir les entreprises en lien avec le coronavirus. Partie 1</a></li>
<li><a href="../fr499290/index.html">Comment rédiger une norme technique pour la sécurité de l'information pour une grande entreprise</a></li>
<li><a href="../fr499296/index.html">Anglais pour démo (structure, phrases, Q&A, grammaire, conseils)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>