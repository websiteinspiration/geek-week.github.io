<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåñ üïπÔ∏è üîó L'efficacit√© Brotli dans le monde r√©el ü§ûüèª üë©‚Äçüë©‚Äçüëß‚Äçüëß üë®‚Äçüë©‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'une des r√®gles les plus fondamentales pour d√©velopper des sites Web rapides est d'optimiser leurs ressources. Si nous parlons de ressources textuell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>L'efficacit√© Brotli dans le monde r√©el</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499278/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'une des r√®gles les plus fondamentales pour d√©velopper des sites Web rapides est d'optimiser leurs ressources. Si nous parlons de ressources textuelles - de code √©crit en HTML, CSS et JavaScript, cela signifie que nous parlons de compression de donn√©es. </font><font style="vertical-align: inherit;">
La norme de facto pour la compression des ressources textuelles sur le Web est la m√©thode Gzip. √Ä savoir, environ 80% des ressources compress√©es obtenues lors des t√©l√©chargements du site sont compress√©es √† l'aide de Gzip. Pour compresser les 20% restants des ressources, un algorithme beaucoup plus r√©cent est utilis√© - Brotli.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/f1/0c/go/f10cgoennqxp98xrt8hxus_wkii.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, ces 100% des ressources compress√©es qui entrent dans les navigateurs lorsqu'ils re√ßoivent des r√©ponses aux demandes des sites n'incluent absolument pas toutes les ressources. Il existe encore de nombreuses ressources qui pourraient √™tre compress√©es ou qui pourraient √™tre compress√©es. Mais ces ressources restent non compress√©es. Des mesures plus d√©taill√©es concernant la compression peuvent √™tre trouv√©es dans la section </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compression</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la </font><font style="vertical-align: inherit;">ressource Web Almanac. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©thode de compression gzip est incroyablement efficace. Tout le travail de Shakespeare en texte brut prend 5,3 Mo. Et apr√®s compression Gzip (niveau de compression 6), ils n'occupent que 1,9 Mo. Cela signifie que la taille du fichier dans lequel ces donn√©es sont stock√©es a diminu√© de 2,8 fois. Dans le m√™me temps, les donn√©es ne sont pas perdues pendant la compression. G√©nial!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore mieux, le degr√© de compression Gzip est affect√© par la pr√©sence de lignes en double dans les fichiers. Plus il y a de r√©p√©titions dans le texte, plus la compression est efficace. C'est tr√®s bon pour le web, car le code √©crit en HTML, CSS et JS a une syntaxe uniforme et contient de nombreuses r√©p√©titions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, bien que Gzip soit une m√©thode de compression tr√®s efficace, il est √©galement assez ancien. Il est apparu en 1992 (ce qui, bien s√ªr, aide √† expliquer sa pr√©valence g√©n√©ralis√©e). Apr√®s 21 ans, en 2013, Google a publi√© Brotli, un nouvel algorithme qui promet des niveaux de compression encore plus √©lev√©s que ceux dont la m√©thode Gzip est capable. Les m√™mes ≈ìuvres de Shakespeare de 5,2 Mo sont compress√©es en utilisant Brotli √† une taille de 1,7 Mo (avec un niveau de compression de 6). Et cela signifie d√©j√† une r√©duction de 3,1 fois la taille du fichier. C'est encore mieux que d'utiliser Gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour √©valuer le niveau de compression des donn√©es √† l'aide de Gzip et Brotli, vous d√©couvrirez probablement que lors de la compression de certaines donn√©es, Brotli est beaucoup plus efficace que Gzip. </font><font style="vertical-align: inherit;">Par exemple, les donn√©es ReactDOM sont 27% plus petites lorsqu'elles sont compress√©es √† l'aide de Brotli avec un niveau de compression maximum (11) que lors de l'utilisation de Gzip avec un niveau de compression maximum (9). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une comparaison de la compression Brotli avec la compression Gzip lors du traitement de ReactDOM.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveau de compression</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taille (en octets)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efficacit√© de la compression (par rapport aux donn√©es non compress√©es)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% D'am√©lioration par rapport √† Gzip</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,73</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39898</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,97</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39416</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38488</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36323</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dix-neuf%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36048</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vingt%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35804</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,31</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vingt%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35709</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,32</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35659</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dix</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33590</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,53</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onze</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33036</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,59</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, √† tous les niveaux de compression, Brotli contourne Gzip. Au niveau de compression maximal disponible avec Brotli, il est 27% plus efficace que Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et, sur la base d'une observation personnelle, je note que la transition d'un de mes clients de Gzip √† Brotli a entra√Æn√© une r√©duction m√©diane de la taille des fichiers de 31%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, au cours des derni√®res ann√©es, avec d'autres experts en performance, j'ai encourag√© les clients √† passer de Gzip √† Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais dire quelques mots sur la prise en charge du navigateur pour Gzip et Brotli. Gzip est si r√©pandu que CanIUse n'affiche m√™me pas un tableau avec des informations de support. Il le dit: "Cet en-t√™te HTTP est pris en charge dans presque tous les navigateurs (√† commencer par IE6 +, Firefox 2+, Chrome 1+, etc.)." Et Brotli, tout en √©crivant ce mat√©riel, b√©n√©ficie d'un </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">soutien</font></a><font style="vertical-align: inherit;"> tr√®s agr√©able </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† 93,17%. Et c'est tr√®s, beaucoup! Ainsi, si votre site a au moins une taille importante, vous n'aimerez pas particuli√®rement le retour de ressources non compress√©es √† plus de 6% de vos utilisateurs. Mais en utilisant Brotli, vous ne perdrez rien. Les clients utilisent un mod√®le progressif de prise en charge de nouveaux algorithmes, de sorte que les utilisateurs qui ne peuvent pas accepter les ressources Brotli utiliseront simplement l'option de secours sous la forme de Gzip. Nous en parlerons plus loin ci-dessous.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, surtout si vous utilisez CDN, activer Brotli est une question de secondes. </font><font style="vertical-align: inherit;">C'est du moins le cas avec Cloudflare, le service que j'utilise pour le site CSS Wizardry. </font><font style="vertical-align: inherit;">Cependant, beaucoup de mes clients, si nous parlons des deux derni√®res ann√©es, ne r√©ussissent pas aussi bien. </font><font style="vertical-align: inherit;">Certains d'entre eux prennent en charge leur propre infrastructure, et la pratique montre que l'installation et le d√©ploiement de Brotli n'est pas si simple. </font><font style="vertical-align: inherit;">Certains utilisent des services CDN qui ne diff√®rent pas par des capacit√©s facilement accessibles pour prendre en charge le nouvel algorithme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les cas o√π nous ne pouvions pas passer √† Brotli, nous avions toujours une question sans r√©ponse: "Et si ...". </font><font style="vertical-align: inherit;">En cons√©quence, j'ai finalement d√©cid√© de m'armer de chiffres et de r√©pondre √† la question de savoir ce qui donne au site la transition vers Brotli.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moins n'est pas n√©cessairement plus rapide.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habituellement, ¬´moins¬ª signifie cependant ¬´plus vite¬ª. </font><font style="vertical-align: inherit;">En r√®gle g√©n√©rale, si vous r√©duisez la taille du fichier, il sera transf√©r√© plus rapidement du serveur vers le client. </font><font style="vertical-align: inherit;">Mais si vous faites un fichier, disons, 20% plus petit, cela ne signifie pas qu'il arrivera 20% plus rapidement. </font><font style="vertical-align: inherit;">Le point ici est que la taille du fichier n'est qu'un aspect des performances Web. </font><font style="vertical-align: inherit;">Et quelle que soit la taille du fichier, la ressource livr√©e au navigateur est associ√©e √† de nombreux autres facteurs et √† de nombreuses limitations du syst√®me - retards r√©seau, perte de paquets, etc. </font><font style="vertical-align: inherit;">En d'autres termes, √©conomiser sur la taille du fichier aide √† transf√©rer les m√™mes donn√©es qu'auparavant, en envoyant moins de paquets, mais le transfert de donn√©es entre le serveur et le client est limit√© par les retards du r√©seau, par cons√©quent, la vitesse √† laquelle les paquets arrivant au client seront plus petits ne changera pas.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP, paquets, d√©lai d'aller-retour</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il est tr√®s simpliste d'envisager de transf√©rer des fichiers du serveur vers le client, nous devrons jeter un ≈ìil au protocole TCP. Lorsque nous recevons un fichier du serveur, il ne nous parvient pas en une seule fois. Le protocole TCP, au-dessus duquel HTTP fonctionne, divise les fichiers en segments appel√©s paquets. Ces paquets sont envoy√©s au client dans l'ordre, dans l'ordre. Le client confirme la r√©ception de chaque paquet de la s√©rie avant de commencer le transfert de la s√©rie suivante. Cela se produit jusqu'√† ce que le client collecte tous les packages n√©cessaires, jusqu'√† ce qu'il n'y ait aucun package non envoy√© sur le serveur et jusqu'√† ce que le client puisse collecter les packages dans quelque chose qui peut √™tre reconnu comme un fichier. Pour que la session de transfert de s√©quence de paquets se termine avec succ√®s, le serveur doit les envoyer au client et le client doit accuser r√©ception. Temps,La quantit√© de donn√©es n√©cessaires pour recevoir des donn√©es et recevoir une confirmation de r√©ception est appel√©e Round Trip Time (RTT).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque nouvelle connexion TCP ne peut pas conna√Ætre la bande passante disponible et la fiabilit√© de la connexion (c'est-√†-dire quel est le niveau de perte de paquets). Si le serveur essaie d'envoyer des m√©gaoctets de donn√©es sur une connexion qui prend en charge un taux de transfert de donn√©es d'un m√©gabit par seconde, un tel transfert submergera la connexion et entra√Ænera une surcharge du canal de communication. Et vice versa - si le serveur essaie de transf√©rer une petite quantit√© de donn√©es via une connexion tr√®s rapide, la connexion sera utilis√©e de mani√®re inefficace, elle sera inactive.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour r√©soudre ce casse-t√™te, TCP utilise un m√©canisme appel√© d√©marrage lent. </font><font style="vertical-align: inherit;">Cela fait partie de la strat√©gie de gestion des fen√™tres de surcharge. </font><font style="vertical-align: inherit;">Chaque nouvelle connexion TCP est limit√©e par la possibilit√© d'envoyer seulement 10 paquets de donn√©es dans la premi√®re s√©quence de paquets (10 paquets - la taille de la fen√™tre de congestion initiale). </font><font style="vertical-align: inherit;">Dix segments TCP repr√©sentent environ 14 Ko de donn√©es. </font><font style="vertical-align: inherit;">Si ces paquets sont re√ßus avec succ√®s par le client, la deuxi√®me s√©rie contiendra d√©j√† 20 paquets, puis il y en aura 40, 80, 160 et ainsi de suite. </font><font style="vertical-align: inherit;">La croissance exponentielle des paquets en s√©quences se poursuivra jusqu'√† ce que l'un des √©v√©nements suivants se produise:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le syst√®me fera face √† une perte de paquets. </font><font style="vertical-align: inherit;">√Ä ce stade, le serveur r√©duira le nombre de paquets dans l'ordre suivant, en divisant le nombre de paquets pr√©c√©dent par 2, et essaiera de transf√©rer √† nouveau les donn√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons atteint la limite de bande passante disponible et pouvons l'utiliser √† pleine capacit√©.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette strat√©gie simple et √©l√©gante vous permet d'√©quilibrer au bord de la prudence et de l'optimisme. </font><font style="vertical-align: inherit;">Elle s'applique √† chaque nouvelle connexion TCP √©tablie par l'application Web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes simples, la taille initiale de la fen√™tre d'encombrement de la nouvelle connexion TCP n'est que d'environ 14 Ko. </font><font style="vertical-align: inherit;">Soit environ 11,8% des donn√©es ReactDOM non compress√©es. </font><font style="vertical-align: inherit;">Soit 36,94% des donn√©es compress√©es √† l'aide de Gzip, soit 42,38% des donn√©es compress√©es √† l'aide de Brotli (au niveau de compression maximal). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis nous allons ralentir. </font><font style="vertical-align: inherit;">Le passage de 11,8% √† 36,94% est d√©j√† une am√©lioration tr√®s sensible! </font><font style="vertical-align: inherit;">Mais la transition de 36,94% √† 42,38% - c'est loin d'√™tre aussi impressionnant. </font><font style="vertical-align: inherit;">Que ce passe-t-il?</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Num√©ro de session de donn√©es</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La quantit√© de donn√©es transf√©r√©es en une seule session, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quantit√© cumul√©e de donn√©es transf√©r√©es, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La s√©quence dans laquelle les donn√©es ReactDOM sont transf√©r√©es</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gzip (37,904 Ko), Brotli (33,036 Ko)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">98</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">210</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option non compress√©e (118,656 Ko)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">224</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">434</font></font></td>
<td></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'av√®re que les donn√©es compress√©es avec Gzip et les donn√©es compress√©es avec Brotli sont transmises dans la m√™me s√©rie de paquets. </font><font style="vertical-align: inherit;">Le transfert d'un fichier prend deux s√©quences. </font><font style="vertical-align: inherit;">Si le RTT s'av√®re assez uniforme lors de la transmission de toutes les s√©quences, cela signifie qu'il faut le m√™me temps pour transmettre des donn√©es compress√©es √† l'aide de Gzip et Brotli. </font><font style="vertical-align: inherit;">En revanche, le transfert d'une version non compress√©e de donn√©es n√©cessite quatre s√©ries de paquets, pas deux. </font><font style="vertical-align: inherit;">Et cela, en particulier sur les connexions avec des latences de r√©seau √©lev√©es, peut entra√Æner un temps assez important requis pour le transfert de donn√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai tendance ici au fait que la vitesse de transfert de donn√©es ne d√©pend pas seulement de la taille des fichiers. Il est influenc√© par les caract√©ristiques du fonctionnement du protocole TCP. Nous n'avons pas seulement besoin de r√©duire la taille des fichiers. Nous devons les rendre beaucoup plus petits, en les portant √† une taille qui leur permettra d'√™tre transmis en moins de s√©quences de paquets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie, en th√©orie, que pour que l'algorithme de Brotli soit sensiblement plus efficace que Gzip, il doit √™tre capable de compresser les donn√©es de mani√®re beaucoup plus agressive. Ceci est n√©cessaire pour que les donn√©es puissent √™tre transmises en moins de s√©quences de paquets que lors de l'utilisation de Gzip. Et je ne sais pas comment cet algorithme va se d√©velopper ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que le mod√®le ci-dessus est assez simplifi√©. Il y a de nombreux autres facteurs √† consid√©rer. Par exemple - s'agit-il d'une connexion TCP nouvelle ou d√©j√† ouverte? La connexion est-elle utilis√©e pour autre chose? Les m√©canismes de priorisation du trafic serveur arr√™tent-ils et d√©marrent-ils le transfert de donn√©es? Les flux H / 2 ont-ils un acc√®s exclusif √† la bande passante? Cette section est une √©tude plus s√©rieuse. Cela devrait √™tre consid√©r√© comme un bon point de d√©part pour vos propres recherches. Mais pensez √† analyser en profondeur les donn√©es √† l'aide de quelque chose comme Wireshark, et lisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> document, qui fournit une description plus approfondie des 14 premiers Ko ¬´magiques¬ª.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui pr√©c√®de s'applique uniquement aux nouvelles connexions TCP. </font><font style="vertical-align: inherit;">Les fichiers transf√©r√©s via une connexion existante ne passeront pas par la proc√©dure de d√©marrage lent. </font><font style="vertical-align: inherit;">Cela nous am√®ne √† deux conclusions importantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je ne pense pas que cela vaille la peine d'√™tre r√©p√©t√©, mais je le r√©p√®te: les ressources statiques doivent √™tre h√©berg√©es. </font><font style="vertical-align: inherit;">C'est un excellent moyen d'√©viter les retards de d√©marrage lent, car en utilisant votre propre serveur, d√©j√† ¬´r√©chauff√©¬ª, les paquets quittant ce serveur ont acc√®s √† une bande passante plus large. </font><font style="vertical-align: inherit;">Cette conclusion m'am√®ne √† la deuxi√®me conclusion.</font></font></li>
<li> ,              ,    .       ,            .    .</li>
</ol><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong>   </strong></td>
<td><strong> ,    , </strong></td>
<td><strong>   , </strong></td>
</tr>
<tr>
<td>1</td>
<td>14</td>
<td>14</td>
</tr>
<tr>
<td>2</td>
<td>28</td>
<td>42</td>
</tr>
<tr>
<td>3</td>
<td>56</td>
<td>98</td>
</tr>
<tr>
<td>4</td>
<td>112</td>
<td>210</td>
</tr>
<tr>
<td>5</td>
<td>224</td>
<td>434</td>
</tr>
<tr>
<td>6</td>
<td>448</td>
<td>882</td>
</tr>
<tr>
<td>7</td>
<td>896</td>
<td>1778</td>
</tr>
<tr>
<td>8</td>
<td>1792</td>
<td>3570</td>
</tr>
<tr>
<td>9</td>
<td>3584</td>
<td>7154</td>
</tr>
<tr>
<td>10</td>
<td>7168</td>
<td>14322</td>
</tr>
<tr>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
<tr>
<td>20</td>
<td>7340032</td>
<td>14680050</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la fin de la 10e session de transfert de donn√©es, la quantit√© de donn√©es transf√©r√©es en une seule session est de 7168 Ko, alors qu'au total, 14322 Ko de donn√©es ont d√©j√† √©t√© transf√©r√©es. </font><font style="vertical-align: inherit;">C'est plus que suffisant pour un travail ordinaire sur Internet (c'est-√†-dire pas pour visionner Game of Thrones). </font><font style="vertical-align: inherit;">En fait, il arrive g√©n√©ralement que nous chargions la page Web enti√®re et toutes ses ressources sans m√™me atteindre la limite de notre bande passante. </font><font style="vertical-align: inherit;">En d'autres termes, l'utilisation d'un canal de communication √† fibre optique de 1 Gbit / s (c'est-√†-dire 0,125 Go / s) ne rendra pas la navigation normale beaucoup plus rapide que l'utilisation d'une connexion plus lente, car la plupart de ce canal ne sera utilis√©.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et √† la 20e session de transfert de donn√©es, nous transf√©rons th√©oriquement 7,34 Go de donn√©es dans une s√©quence de paquets.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et le monde r√©el?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'√† pr√©sent, nous nous sommes engag√©s dans des consid√©rations th√©oriques. </font><font style="vertical-align: inherit;">Et j'ai commenc√© √† travailler sur ce mat√©riel car j'aimerais conna√Ætre l'impact que Brotli peut avoir sur des sites r√©els. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'√† pr√©sent, les chiffres donn√©s ici ont montr√© l'√©norme diff√©rence entre le manque de compression et l'utilisation de Gzip, et le fait que le gain de l'utilisation de Brotli, par rapport √† Gzip, est assez modeste. </font><font style="vertical-align: inherit;">Cela nous indique que la transition du manque de compression √† l'utilisation de Gzip donnera une am√©lioration notable, tandis que la transition de Gzip √† Brotli peut probablement sembler beaucoup moins impressionnante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai s√©lectionn√©, √† titre d'exemples, plusieurs sites, guid√©s par les consid√©rations suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le site doit √™tre relativement connu (il vaut mieux utiliser des sites comparables √† quelque chose).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le site doit √™tre adapt√© au test. </font><font style="vertical-align: inherit;">C'est-√†-dire qu'il devrait √™tre d'une taille appropri√©e (il sera donc plus int√©ressant d'analyser ses mat√©riaux pour la compression), et en m√™me temps, il ne devrait pas contenir principalement des mat√©riaux qui ne sont pas compress√©s en utilisant Gzip / Brotli - comme, par exemple, YouTube.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous les sites de la collection ne doivent pas appartenir √† de grandes soci√©t√©s (cela vaut la peine d'analyser certains, disons, des sites ¬´r√©guliers¬ª).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de ces exigences, j'ai </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√©lectionn√© les</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sites r√©pertori√©s ci-dessous et commenc√© les tests. </font><font style="vertical-align: inherit;">Voici les sites que j'ai s√©lectionn√©s:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m.facebook.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.linkedin.com</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.insider.com</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yandex.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.esedirect.co.uk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.story.one</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.cdm-bedrijfskleding.nl</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.everlane.com</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne voulais pas compliquer les tests, j'ai donc opt√© pour les indicateurs suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La quantit√© de donn√©es transf√©r√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premier temps de peinture contentieuse (FCP).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils ont √©t√© analys√©s dans les situations suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manque de compression.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de gzip.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de brotli.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©trique FCP semble proche du monde r√©el et suffisamment universelle pour √™tre appliqu√©e √† n'importe quel site, car elle vous permet d'√©valuer ce dont les gens ont besoin de sites Web - c'est-√†-dire le contenu de ces sites. </font><font style="vertical-align: inherit;">De plus, j'ai choisi cette m√©trique parce que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Calvano</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , une personne intelligente, a d√©clar√© ceci: "L'exp√©rience me dit que l'utilisation de Brotli conduit √† une am√©lioration de FCP, en particulier lorsque les ressources CSS / JS critiques sont importantes" .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essai</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais vous dire un sale secret. De nombreuses √©tudes sur les performances Web (pas toutes, mais beaucoup) ne sont pas bas√©es sur des recherches sur l'am√©lioration des performances, mais sur des conclusions contraires - de la d√©gradation des performances. Par exemple, la BBC est beaucoup plus facile √† affirmer qu '¬´ils perdent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10% des utilisateurs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour chaque seconde suppl√©mentaire dont ils ont besoin pour charger leur site¬ª que pour comprendre ce qui se passe gr√¢ce √† une am√©lioration d'une seconde. Il est beaucoup plus facile de ralentir le site plut√¥t que de l'acc√©l√©rer, et vous avez le sentiment que c'est pourquoi de nombreuses personnes font si bien ce travail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de cela, je n'ai pas essay√© de t√©l√©charger d'abord les sites qui utilisent Gzip, puis, hors ligne, de compresser leur contenu √† l'aide de Brotli. </font><font style="vertical-align: inherit;">Au lieu de cela, j'ai trouv√© des sites qui utilisent Brotli, puis j'ai d√©sactiv√© la compression. </font><font style="vertical-align: inherit;">Je suis pass√© de Brotli √† Gzip, puis de Gzip √† la non-compression, mesurant comment cela fonctionne sur le site. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que je ne puisse pas, par exemple, me connecter au serveur Linkedin et d√©connecter Brotli, je peux simplement acc√©der √† ce site √† partir d'un navigateur qui ne prend pas en charge Brotli. </font><font style="vertical-align: inherit;">Bien que je ne puisse pas d√©sactiver la prise en charge de Brotli dans Chrome, je peux cacher au serveur le fait que mon navigateur prend en charge Brotli. </font><font style="vertical-align: inherit;">Les navigateurs indiquent aux serveurs les algorithmes de compression qu'ils prennent en charge √† l'aide de l'en-t√™te de demande</font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En utilisant Webpagetest, je peux personnaliser les en-t√™tes moi-m√™me. </font><font style="vertical-align: inherit;">Donc, tout est tr√®s simple!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3bb/295/390/3bb2953909f7cea0ac8970049f763638.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fonctionnalit√©s avanc√©es de WebPageTest nous permettent de d√©finir des en-t√™tes de demande personnalis√©s.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Voici comment configurer le champ En-t√™tes personnalis√©s:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arr√™t complet de la </font><font style="vertical-align: inherit;">compression: </font></font><code>accept-encoding: randomstring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sactivation Br√∂tli, mais gzip: </font></font><code>accept-encoding: gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour utiliser Brotli si cette m√©thode de compression est support√©e par le site (et √† condition qu'elle soit support√©e par le navigateur): le champ reste vide.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez savoir si cela fonctionne comme pr√©vu en v√©rifiant la pr√©sence (ou l'absence) de l'en-t√™te </font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans la r√©ponse du serveur.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme pr√©vu, la transition du manque de compression vers Gzip signifiait une am√©lioration significative, mais la transition de Gzip √† Brotli ne semble pas aussi impressionnante. </font><font style="vertical-align: inherit;">Les donn√©es brutes de mes exp√©riences peuvent √™tre trouv√©es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Voici les constatations qui m'int√©ressent le plus:</font></font><br>
<br>
<ul>
<li>     Gzip     : 73%.</li>
<li>  FCP   Gzip     : 23.305%.</li>
<li>     Brotli    Gzip: 5.767%.</li>
<li>  FCP   Brotli    Gzip: 3.462%.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sont toutes des valeurs m√©dianes. </font><font style="vertical-align: inherit;">En parlant de ¬´tailles de mat√©riaux¬ª, je veux dire uniquement HTML, CSS et JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce √† l'utilisation de Gzip, la taille des fichiers a √©t√© r√©duite de 73% par rapport √† leurs versions non compress√©es. </font><font style="vertical-align: inherit;">Et l'utilisation de Brotli n'a permis de r√©duire la taille des fichiers que de 5,7% suppl√©mentaires. </font><font style="vertical-align: inherit;">Si nous parlons de FCP, gr√¢ce √† Gzip, cet indicateur s'est am√©lior√© de 23% par rapport au manque de compression, et Brotli n'y a ajout√© que 3,5% suppl√©mentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien qu'il semble que de tels r√©sultats renforcent la th√©orie, il existe plusieurs fa√ßons d'am√©liorer ces r√©sultats. </font><font style="vertical-align: inherit;">La premi√®re consiste √† tester un nombre beaucoup plus grand de sites, j'aimerais en discuter deux de plus en d√©tail.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Donn√©es sur les ressources propres et donn√©es provenant de sources externes</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de mes tests, j'ai d√©sactiv√© Brotli partout, et pas seulement pour les serveurs qui stockent les donn√©es du site. </font><font style="vertical-align: inherit;">Cela signifie que j'ai mesur√© non seulement les avantages que les sites retirent de l'utilisation de Brotli, mais, en termes de potentiel, les avantages que Brotli re√ßoit des sources externes utilis√©es par ces sites. </font><font style="vertical-align: inherit;">Cela n'entre dans le champ de nos int√©r√™ts que si des ressources tierces sont utilis√©es de la mani√®re critique des sites sous enqu√™te, mais cela m√©rite d'√™tre rappel√©.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveaux de compression</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En parlant de compression, nous discutons souvent des r√©sultats obtenus avec le meilleur sc√©nario d'application de compression. √Ä savoir - lorsque vous utilisez Gzip, nous avons √† l'esprit le 9e niveau de compression et lorsque vous utilisez Brotli - 11e niveau. Cependant, il est peu probable que le serveur √©tudi√© soit configur√© de la mani√®re la plus optimale. Par exemple, Apache utilise la compression gzip de niveau 6, tandis que NGINX utilise uniquement la premi√®re. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La d√©sactivation de Brotli signifie que nous passons √† l'option de secours, √† Gzip, et compte tenu de la fa√ßon dont j'ai test√© les sites, je ne pouvais pas changer une telle configuration de secours ou agir en quelque sorte. Je dis cela parce que les mat√©riaux des deux sites du test ont augment√© de taille lorsque Brotli a √©t√© allum√©. Cela m'indique que le niveau de compression Gzip √©tait tel qu'il fournissait une compression plus forte que le niveau de compression Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le choix d'un niveau de compression est un compromis. </font><font style="vertical-align: inherit;">Tout le monde aimerait demander le niveau de compression le plus √©lev√© et √† ce propos, consid√©rer le probl√®me r√©solu. </font><font style="vertical-align: inherit;">Mais une telle approche n'est pas pratique. </font><font style="vertical-align: inherit;">Le fait est que le temps suppl√©mentaire dont le serveur aura besoin pour effectuer dynamiquement cette compression est tr√®s susceptible d'annuler les avantages d'un niveau de compression plus √©lev√©. </font><font style="vertical-align: inherit;">Pour faire face √† ce probl√®me, vous pouvez recourir aux √©l√©ments suivants:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez utiliser un niveau de compression pragmatique qui offre le bon √©quilibre entre vitesse et efficacit√© pendant la compression dynamique des donn√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez t√©l√©charger des ressources statiques pr√©compress√©es sur le serveur, dont le niveau de compression est sup√©rieur √† celui utilis√© pour la compression dynamique. </font><font style="vertical-align: inherit;">Dans ce cas, pour s√©lectionner le niveau de compression dynamique, vous pouvez utiliser l'id√©e d√©crite dans le premier paragraphe.</font></font></li>
</ol><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On a l'impression que, raisonnablement, on peut reconna√Ætre l'insignifiance des avantages de Brotli sur Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si l'activation de la prise en charge de Brotli est une question de mouvements de souris dans le panneau de configuration de votre CDN, alors vous devriez prendre Brotli et l'activer maintenant. La prise en charge de cet algorithme de compression est suffisamment large, les navigateurs qui ne prennent pas en charge Brotli passent facilement √† des m√©canismes de rechange, et m√™me une l√©g√®re am√©lioration vaut mieux que rien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si possible, t√©l√©chargez des ressources statiques pr√©compress√©es au niveau de compression maximal sur les serveurs. Et pour la compression dynamique, n'utilisez pas les niveaux de compression les plus √©lev√©s, mais pas les plus bas. Si vous utilisez NGINX, assurez-vous que vous n'utilisez pas le premier niveau de compression standard pour NGINX.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, si pour utiliser Brotli, vous pouvez avoir besoin de semaines de d√©veloppement, de test et de d√©ploiement, ne paniquez pas - assurez-vous simplement d'utiliser la compression Gzip pour tout ce qui peut √™tre compress√© (cela inclut, en plus des ressources textuelles, des fichiers .ico et .ttf - s'ils sont bien s√ªr utilis√©s dans votre projet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suppose que la version courte de cet article peut ressembler √† ceci: si vous ne devez pas ou ne pouvez pas activer Brotli, vous ne perdez pas autant. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chers lecteurs! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envisagez-vous d'utiliser Brotli?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499254/index.html">Un membre du comit√© du programme PyConRu 2020 r√©pond aux questions sur Python: un look √† jour et un peu de fourchelang</a></li>
<li><a href="../fr499262/index.html">Dernier hackathon en ligne pour les ind√©pendants SMZhack: des projets qui toucheront les gens</a></li>
<li><a href="../fr499268/index.html">Conscience spatiale: que peuvent faire les lunettes Hololens?</a></li>
<li><a href="../fr499272/index.html">Composants de soudure 0201. Nerveux, veuillez vous √©loigner des √©crans</a></li>
<li><a href="../fr499274/index.html">Nous avons d√©mont√© la nouvelle capsule. Nous savons combien de microphones et comment cela fonctionne</a></li>
<li><a href="../fr499280/index.html">Le prix des frameworks JavaScript</a></li>
<li><a href="../fr499286/index.html">√âtude: le commerce d'acc√®s aux r√©seaux d'entreprise se d√©veloppe sur le march√© noir</a></li>
<li><a href="../fr499288/index.html">Toutes les mesures pour soutenir les entreprises en lien avec le coronavirus. Partie 1</a></li>
<li><a href="../fr499290/index.html">Comment r√©diger une norme technique pour la s√©curit√© de l'information pour une grande entreprise</a></li>
<li><a href="../fr499296/index.html">Anglais pour d√©mo (structure, phrases, Q&A, grammaire, conseils)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>