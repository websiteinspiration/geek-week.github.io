<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â˜ï¸ ğŸ§’ğŸ¼ ğŸ‘¨â€ğŸ‘§ Kami menganalisis karya-karya lukisan dengan bantuan ML klasik ğŸ™ğŸ¼ ğŸ˜­ â›²ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! Seorang teman saya belajar sebagai seniman dan secara teratur membicarakan karya ini atau itu, tentang teknik komposisi yang unik, tent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kami menganalisis karya-karya lukisan dengan bantuan ML klasik</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/504806/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo semuanya! </font><font style="vertical-align: inherit;">Seorang teman saya belajar sebagai seniman dan secara teratur membicarakan karya ini atau itu, tentang teknik komposisi yang unik, tentang persepsi warna, tentang evolusi seni lukis dan seniman yang brilian. </font><font style="vertical-align: inherit;">Terhadap latar belakang dampak konstan ini, saya memutuskan untuk memeriksa apakah pengetahuan dan keterampilan teknik saya cocok untuk menganalisis warisan budaya dunia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berbekal parser darurat di bawah penutup malam, saya masuk ke galeri online dan mengeluarkan hampir 50 ribu lukisan dari sana. </font><font style="vertical-align: inherit;">Mari kita lihat apa yang menarik untuk dilakukan dengan ini, hanya menggunakan alat ML klasik (hati-hati, lalu lintas).</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transformasi naif</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti banyak dari kita ingat dari pelajaran ilmu komputer, gambar direpresentasikan sebagai array byte yang bertanggung jawab atas warna setiap piksel individu. </font><font style="vertical-align: inherit;">Sebagai aturan, skema RGB digunakan, di mana warna dibagi menjadi tiga komponen (merah / hijau / biru), yang, ketika dijumlahkan dengan latar belakang hitam, memberikan warna asli yang dirasakan oleh seseorang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena sekarang bagi kami semua karya sementara hanya menjadi array angka pada disk, kami akan mencoba untuk mengkarakterisasi array ini dengan membangun histogram distribusi frekuensi intensitas untuk setiap saluran. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menggunakan numpy untuk perhitungan, dan memvisualisasikan menggunakan matplotlib.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber</font></font></b>
                        <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#      </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">load_image_by_index</span>(<span class="hljs-params">i</span>):</span><font></font>
    image_path = paintings_links.iloc[i].img_path<font></font>
    img = cv2.imdecode(np.fromfile(str(Path.cwd()/image_path), np.uint8), cv2.IMREAD_UNCHANGED)<font></font>
    <span class="hljs-keyword">return</span> img    
<span class="hljs-comment">#    </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_hist_data_by_index</span>(<span class="hljs-params">img_index</span>):</span>
    bin_div = <span class="hljs-number">5</span> <font></font>
    img = load_image_by_index(img_index)<font></font>
    b, bins=  np.histogram(img[:,:,<span class="hljs-number">0</span>], bins=<span class="hljs-number">255</span>//bin_div, range=(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), density=<span class="hljs-literal">True</span>)<font></font>
    g = np.histogram(img[:,:,<span class="hljs-number">1</span>], bins=<span class="hljs-number">255</span>//bin_div, range=(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), density=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]<font></font>
    r = np.histogram(img[:,:,<span class="hljs-number">2</span>], bins=<span class="hljs-number">255</span>//bin_div, range=(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), density=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">return</span> bins, r, g, b
<span class="hljs-comment">#       </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">plot_image_with_hist_by_index</span>(<span class="hljs-params">img_index, height=<span class="hljs-number">6</span></span>):</span><font></font>
    bins, r, g, b = get_hist_data_by_index(img_index)<font></font>
    img = load_image_by_index(img_index)<font></font>
    fig = plt.figure(constrained_layout=<span class="hljs-literal">True</span>)<font></font>
<font></font>
    <span class="hljs-keyword">if</span> img.shape[<span class="hljs-number">0</span>] &lt; img.shape[<span class="hljs-number">1</span>]:<font></font>
        width_ratios = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>]
    <span class="hljs-keyword">else</span>:<font></font>
        width_ratios = [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>]<font></font>
        <font></font>
    gs = GridSpec(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, figure=fig, <font></font>
                  width_ratios = [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>]<font></font>
                 )<font></font>
    ax_img = fig.add_subplot(gs[:,<span class="hljs-number">0</span>])<font></font>
<font></font>
    ax_r = fig.add_subplot(gs[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>])<font></font>
    ax_g = fig.add_subplot(gs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], sharey=ax_r)<font></font>
    ax_b = fig.add_subplot(gs[<span class="hljs-number">2</span>, <span class="hljs-number">1</span>], sharey=ax_r)<font></font>
<font></font>
    ax_img.imshow(cv2.cvtColor(img, cv2.COLOR_BGR2RGB),aspect = <span class="hljs-string">'equal'</span>)<font></font>
    ax_img.axis(<span class="hljs-string">'off'</span>)<font></font>
    <font></font>
    ax_r.bar(bins[:<span class="hljs-number">-1</span>], r, width = <span class="hljs-number">5</span>, color=<span class="hljs-string">'red'</span>,alpha=<span class="hljs-number">0.7</span>)<font></font>
    ax_g.bar(bins[:<span class="hljs-number">-1</span>], g, width = <span class="hljs-number">5</span>, color=<span class="hljs-string">'green'</span>,alpha=<span class="hljs-number">0.7</span>)<font></font>
    ax_b.bar(bins[:<span class="hljs-number">-1</span>], b, width = <span class="hljs-number">5</span>, color=<span class="hljs-string">'blue'</span>,alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
    ax_r.axes.get_xaxis().set_ticks([])<font></font>
    ax_r.axes.get_yaxis().set_ticks([])<font></font>
    ax_g.axes.get_xaxis().set_ticks([])<font></font>
    ax_g.axes.get_yaxis().set_ticks([])<font></font>
    ax_b.axes.get_xaxis().set_ticks([])<font></font>
    ax_b.axes.get_yaxis().set_ticks([])<font></font>
    fig.suptitle(<span class="hljs-string">"{} - {}"</span>.format(paintings_links.iloc[img_index].artist_name, <font></font>
                                 paintings_links.iloc[img_index].picture_name),ha= <span class="hljs-string">"left"</span>)<font></font>
    <font></font>
    fig.set_figheight(height)<font></font>
    plt.axis(<span class="hljs-string">'tight'</span>)
    <span class="hljs-keyword">if</span> img.shape[<span class="hljs-number">0</span>] &lt; img.shape[<span class="hljs-number">1</span>]:<font></font>
        fig.set_figwidth(img.shape[<span class="hljs-number">1</span>] *height / img.shape[<span class="hljs-number">0</span>] *<span class="hljs-number">1.25</span>)
    <span class="hljs-keyword">else</span>:<font></font>
        fig.set_figwidth(img.shape[<span class="hljs-number">1</span>] *height / img.shape[<span class="hljs-number">0</span>] *<span class="hljs-number">1.5</span>)<font></font>
    plt.show()<font></font>
</code></pre><br>
</div>
                    </div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh karya:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/yj/ac/bc/yjacbc51wte7lh07zahocnlozzi.png"><br>
<br>
<img src="https://habrastorage.org/webt/wp/yy/qp/wpyyqpcp92rc4bx1bpn-x5kmpyg.png"><br>
<br>
<img src="https://habrastorage.org/webt/a3/yi/ha/a3yihacuqjnukieinyqixfwjfbi.png"><br>
<br>
<img src="https://habrastorage.org/webt/pr/j2/xq/prj2xqxmdnulpfcsysnslhlrbyi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setelah melihat histogram berbagai gambar dengan cermat, kita dapat memperhatikan bahwa bentuknya sangat spesifik dan sangat bervariasi dari pekerjaan ke pekerjaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, kami membuat asumsi bahwa histogram adalah semacam pemeran gambar, yang memungkinkannya untuk dikarakterisasi sampai batas tertentu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model pertama</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengumpulkan semua histogram ke dalam satu dataset besar dan mencoba mencari beberapa â€œanomaliâ€ di dalamnya. </font><font style="vertical-align: inherit;">Cepat, nyaman, dan umumnya algoritma favorit saya untuk keperluan seperti itu adalah svm satu kelas. </font><font style="vertical-align: inherit;">Kami akan menggunakan implementasinya dari perpustakaan sklearn</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber</font></font></b>
                        <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#       ,       </span><font></font>
res = []<font></font>
error = []<font></font>
<span class="hljs-keyword">for</span> img_index <span class="hljs-keyword">in</span> tqdm(range(paintings_links.shape[<span class="hljs-number">0</span>])):
    <span class="hljs-keyword">try</span>:<font></font>
        bins, r, g, b = get_hist_data_by_index(img_index)<font></font>
        res.append(np.hstack([r,g,b]))<font></font>
    <span class="hljs-keyword">except</span>:<font></font>
        res.append(np.zeros(<span class="hljs-number">153</span>,))<font></font>
        error.append(img_index)<font></font>
        <font></font>
np_res = np.vstack(res)<font></font>
<span class="hljs-comment">#    </span>
pd.DataFrame(np_res).to_pickle(<span class="hljs-string">"histograms.pkl"</span>)<font></font>
histograms = pd.read_pickle(<span class="hljs-string">"histograms.pkl"</span>)
<span class="hljs-comment">#  .         .   10    </span>
one_class_svm = OneClassSVM(nu=<span class="hljs-number">10</span> / histograms.shape[<span class="hljs-number">0</span>], gamma=<span class="hljs-string">'auto'</span>)<font></font>
one_class_svm.fit(histograms[~histograms.index.isin(bad_images)])<font></font>
<span class="hljs-comment">#  </span><font></font>
svm_outliers = one_class_svm.predict(histograms)<font></font>
svm_outliers = np.array([<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> label == <span class="hljs-number">-1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> label <span class="hljs-keyword">in</span> svm_outliers])
<span class="hljs-comment">#   </span>
uncommon_images = paintings_links[(svm_outliers ==<span class="hljs-number">1</span>) &amp; (~histograms.index.isin(bad_images))].index.values
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> uncommon_images:<font></font>
    plot_image_with_hist_by_index(i,<span class="hljs-number">4</span>)
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat apa yang aneh yang kita temukan di tempat sampah galeri kita. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pekerjaan yang dilakukan dengan pensil: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/im/ep/qu/imepquuzdn8ke0ew51sn6hn2ivc.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bekerja dalam warna yang sangat gelap: </font></font></b><br>
<img src="https://habrastorage.org/webt/lo/7d/a8/lo7da8nynv4qhglimt4bzweldry.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wanita berbaju merah: </font></font></b><br>
<img src="https://habrastorage.org/webt/rh/8s/jf/rh8sjfwuwvy7drjkvy3fdqycwkw.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sesuatu yang samar: </font></font></b><br>
<img src="https://habrastorage.org/webt/ep/eg/rw/epegrw0xehln4thu0fpqiwamxiu.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Potret yang sangat gelap:</font></font></b><br>
<img src="https://habrastorage.org/webt/ny/-9/vj/ny-9vjxin4gszzsfb4paptnbjqm.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cari pekerjaan serupa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, model kami menemukan sesuatu yang tidak biasa, jauh dari segalanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi bisakah kita membuat alat yang akan membantu menemukan pekerjaan serupa dalam warna? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang setiap gambar ditandai oleh vektor dari 153 nilai (karena ketika membangun histogram, itu mencapai 5 unit intensitas per bin, total 255/5 = 51 frekuensi untuk setiap saluran).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita dapat menentukan â€œderajat kesamaanâ€ dengan menghitung jarak antara vektor yang menarik bagi kita. </font><font style="vertical-align: inherit;">Jarak Euclidean yang akrab dengan sekolah di sini akan memberi banyak perhatian pada panjang komponen vektor, dan kami ingin lebih memperhatikan set warna yang membentuk gambar. </font><font style="vertical-align: inherit;">Di sini kita akan menemukan ukuran kosinus jarak yang banyak digunakan, misalnya, dalam masalah analisis teks. </font><font style="vertical-align: inherit;">Mari kita coba terapkan untuk tugas ini. </font><font style="vertical-align: inherit;">Kami mengambil implementasinya dari perpustakaan yang cerdik.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber</font></font></b>
                        <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#  ,        </span>
<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> spatial
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find_closest</span>(<span class="hljs-params">target_id,n=<span class="hljs-number">5</span></span>):</span><font></font>
    distance_vector = np.apply_along_axis(spatial.distance.cosine,<font></font>
                        arr=histograms,<font></font>
                       axis=<span class="hljs-number">1</span>,<font></font>
                       v=histograms.values[target_id])<font></font>
    <span class="hljs-keyword">return</span> np.argsort(distance_vector)[:n]
</code></pre><br>
</div>
                    </div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita lihat apa yang tampak seperti "Gelombang Kesembilan" Aivazovsky. </font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asli: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/td/fu/ch/tdfuchnecvcct86pylvewtdjge4.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karya serupa: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/29/vx/qf/29vxqf1kta5ltjx6s5-hjrypjai.png"><br>
<img src="https://habrastorage.org/webt/sz/df/yq/szdfyqii6l1u5xcdt9euoa_ox5e.png"><br>
<img src="https://habrastorage.org/webt/-n/ep/i8/-nepi8un8if2kireirtuebrrcqo.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang tampak seperti â€œBunga Almondâ€ Van Gogh. </font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asli: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/az/uo/bt/azuobt-fygm4g4rebyllquelwei.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karya serupa: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/k-/ja/du/k-jaduimeo1mqfxizf2kjwrricy.png"><br>
<img src="https://habrastorage.org/webt/lr/oy/-g/lroy-g1ndcd2amrspvepvnpp1ui.png"><br>
<img src="https://habrastorage.org/webt/7k/eh/90/7keh90lya9xuhwjvksb1gaamzhw.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan apa yang tampak seperti wanita aneh yang sebelumnya berwarna merah? </font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asli: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/rh/8s/jf/rh8sjfwuwvy7drjkvy3fdqycwkw.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">karya serupa:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/o3/qd/qd/o3qdqddzr51pshyhebapl7qjk7w.png"><br>
<img src="https://habrastorage.org/webt/m2/5b/iq/m25biqtph5egli7uhnpreu8m8bk.png"><br>
<img src="https://habrastorage.org/webt/cc/rk/fl/ccrkfluoskwpjq-gs1mk9atx1w0.png"><br>
<img src="https://habrastorage.org/webt/we/nr/hz/wenrhzhwffmjh2qql4pmcpynvk4.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruang warna</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sampai saat itu, kami bekerja di ruang warna RGB. Sangat mudah untuk memahami, tetapi jauh dari ideal untuk tugas kita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lihat, misalnya, di tepi kubus warna RGB </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/q2/3s/orq23sn8jnhe9kkhnwnudwbeug0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan mata telanjang Anda dapat melihat bahwa ada area besar pada wajah di mana mata kita tidak melihat perubahan, dan area yang relatif kecil di mana persepsi warna kita berubah sangat tajam. Persepsi non-linear ini mencegah mesin mengevaluasi warna seperti yang dilakukan seseorang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, ada banyak ruang warna, mungkin beberapa akan sesuai dengan tugas kita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan memilih ruang warna favorit kami dengan membandingkan kegunaannya dalam memecahkan masalah manusia. Misalnya, mari kita hitung artis dengan isi kanvas!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambil semua ruang warna yang tersedia dari pustaka pembuka, latih xgboost di masing-masing, dan lihat metrik pada pilihan yang ditangguhkan.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber</font></font></b>
                        <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># ,        </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_hist_data_by_index_and_colorspace</span>(<span class="hljs-params">bgr_img, colorspace</span>):</span>
    bin_div = <span class="hljs-number">5</span><font></font>
    img_cvt = cv2.cvtColor(bgr_img, getattr(cv2, colorspace))<font></font>
    c1, bins =  np.histogram(img_cvt[:,:,<span class="hljs-number">0</span>], bins=<span class="hljs-number">255</span>//bin_div, range=(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), density=<span class="hljs-literal">True</span>)<font></font>
    c2 = np.histogram(img_cvt[:,:,<span class="hljs-number">1</span>], bins=<span class="hljs-number">255</span>//bin_div, range=(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), density=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]<font></font>
    c3 = np.histogram(img_cvt[:,:,<span class="hljs-number">2</span>], bins=<span class="hljs-number">255</span>//bin_div, range=(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), density=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">return</span> bins, c1, c2, c3
<span class="hljs-comment">#        </span><font></font>
all_res = {}<font></font>
all_errors = {}<font></font>
<span class="hljs-keyword">for</span> colorspace <span class="hljs-keyword">in</span> list_of_color_spaces:<font></font>
    all_res[colorspace] =[]<font></font>
    all_errors[colorspace] =[]<font></font>
<span class="hljs-keyword">for</span> img_index <span class="hljs-keyword">in</span> tqdm(range(paintings_links.shape[<span class="hljs-number">0</span>]) ):<font></font>
    <font></font>
    <span class="hljs-keyword">for</span> colorspace <span class="hljs-keyword">in</span> list_of_color_spaces:
        <span class="hljs-keyword">try</span>:<font></font>
            bgr_img = load_image_by_index(img_index)<font></font>
            bins, c1, c2, c3 = get_hist_data_by_index_and_colorspace(bgr_img, colorspace)<font></font>
            all_res[colorspace].append(np.hstack([c1, c2, c3]))<font></font>
        <span class="hljs-keyword">except</span>:<font></font>
            all_res[colorspace].append(np.zeros(<span class="hljs-number">153</span>,))<font></font>
            all_errors[colorspace].append(img_index)<font></font>
all_res_np = {}<font></font>
<span class="hljs-keyword">for</span> colorspace <span class="hljs-keyword">in</span> list_of_color_spaces:  <font></font>
    all_res_np[colorspace] = np.vstack(all_res[colorspace])<font></font>
res = []<font></font>
<span class="hljs-comment">#        </span>
<span class="hljs-keyword">for</span> colorspace <span class="hljs-keyword">in</span> tqdm(list_of_color_spaces):<font></font>
    temp_df = pd.DataFrame(all_res_np.get(colorspace))<font></font>
    temp_x_train =   temp_df[temp_df.index.isin(X_train.index.values)]<font></font>
    temp_x_test =   temp_df[temp_df.index.isin(X_test.index.values)]<font></font>
<font></font>
    xgb=XGBClassifier()<font></font>
    xgb.fit(temp_x_train, y_train)<font></font>
    current_res = classification_report(y_test, xgb.predict(temp_x_test), labels=<span class="hljs-literal">None</span>, target_names=<span class="hljs-literal">None</span>, output_dict=<span class="hljs-literal">True</span>).get(<span class="hljs-string">"macro avg"</span>)<font></font>
    current_res[<span class="hljs-string">"colorspace"</span>] = colorspace<font></font>
    res.append(current_res)<font></font>
pd.DataFrame(res).sort_values(by=<span class="hljs-string">"f1-score"</span>)
</code></pre><br>
</div>
                    </div><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presisi</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penarikan</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skor f1</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ruang warna</font></font></b></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,001329</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,003663</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,001059</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2YUV</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,003229</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,004689</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,001849</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2RGB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,003026</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,004131</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,001868</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2HSV</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,002909</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,004578</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,001934</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2XYZ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,003545</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,004434</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,001941</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2HLS</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,003922</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,004784</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,002098</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2LAB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,005118</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,004836</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,002434</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COLOR_BGR2LUV</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peningkatan nyata dalam kualitas diberikan oleh penggunaan ruang warna LUV. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pembuat skala ini mencoba membuat persepsi perubahan warna di sepanjang sumbu skala seseragam mungkin. </font><font style="vertical-align: inherit;">Berkat ini, perubahan warna yang dirasakan dan evaluasi matematisnya akan sedekat mungkin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah bagaimana sepotong ruang warna yang diberikan terlihat ketika memperbaiki salah satu sumbu:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/62/_a/xy/62_axyknj2mifko-ust0y7sppf0.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita lihat modelnya</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah langkah sebelumnya, kami masih memiliki model yang dapat memprediksi sesuatu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat karya siapa yang kita pelajari paling akurat.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presisi</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penarikan</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skor f1</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artis</font></font></b></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,042553</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,019417</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,026667</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ilya Efimovich Repin</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,055556</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,020000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,029412</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">William Merrit Chase</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,071429</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,022222</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,033898</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonnard pierre</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,035461</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,035211</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,035336</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jill elvgren</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,100000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,021739</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,035714</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jean Auguste Dominic Ingres</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,022814</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,224066</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,041411</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pierre Auguste Renoir</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,100000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,028571</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,044444</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Albert Bierstadt</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,250000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,032258</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,057143</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hans Zatska</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,030396</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,518797</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,057428</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Claude Oscar Monet</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,250000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,037037</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,064516</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Girotto walter</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metrik sendiri jauh dari ideal, tetapi Anda harus ingat bahwa skema warna adalah sebagian kecil dari informasi tentang pekerjaan. </font><font style="vertical-align: inherit;">Seniman menggunakan banyak cara ekspresif. </font><font style="vertical-align: inherit;">Fakta yang kami temukan dalam data ini "tulisan tangan" tertentu dari artis sudah merupakan kemenangan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan memilih salah satu artis untuk analisis lebih dalam. </font><font style="vertical-align: inherit;">Biarlah itu Claude Oscar Monet (saya akan membuat istri saya baik, dia suka impresionis). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita ambil karyanya, minta model untuk memberi tahu kami penulis dan menghitung frekuensi</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penulis yang diprediksi</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jumlah prediksi</font></font></b></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Claude Oscar Monet</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">186</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pierre Auguste Renoir</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">171</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vincent Van Gogh</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peter Paul Rubens</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sembilan belas</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gustave Dore</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak orang cenderung membingungkan Monet dan Manet, dan model kami lebih memilih untuk membingungkannya dengan Renoir dan Van Gogh. Mari kita lihat apa yang menurut model itu seperti Van Gogh. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u2/ft/la/u2ftlay3hv5v0quac6zbacyvgjc.png"><br>
<img src="https://habrastorage.org/webt/t-/fz/0h/t-fz0hh74hxcopgjzpbyvi69b3c.png"><br>
<img src="https://habrastorage.org/webt/sx/zq/y7/sxzqy7ofzv-gem6a2s2akx1d2j4.png"><br>
<img src="https://habrastorage.org/webt/gz/c3/p1/gzc3p1g2gycyqmnnqdo6uyjga2a.png"><br>
<img src="https://habrastorage.org/webt/wi/s8/ql/wis8ql7ko3batjx-n6e6jcfhvic.png"><br>
<img src="https://habrastorage.org/webt/k9/pw/dy/k9pwdynhkux1h0mma8jvu2iaxpg.png"><br>
<img src="https://habrastorage.org/webt/mm/qy/qk/mmqyqkpc-54ki_kqcg8gcvleqaw.png"><br>
<img src="https://habrastorage.org/webt/_w/yp/t9/_wypt9veh0hed6vnnbkpb4ltswg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sekarang kita akan menggunakan fungsi pencarian kita untuk karya-karya serupa dan menemukan lukisan Van Gogh mirip dengan karya-karya yang disebutkan di atas (kali ini kita akan mengukur jarak di ruang LUV). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asli: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/2_/mx/0q/2_mx0q2-ue0e7hetq9bdcgxdwl4.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pekerjaan serupa: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/hd/fj/yk/hdfjykmlx07stpuy48x_4rsr6mg.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asli: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/fm/4p/e3/fm4pe3g6bugjsa2neslxe4rrhye.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karya serupa: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/jl/j0/2u/jlj02uoglr1zhbe3dwhnpqmay2i.png"><br>
<img src="https://habrastorage.org/webt/v9/bo/vp/v9bovpvyl32t8cyl4zwszu59ali.png"><br>
<img src="https://habrastorage.org/webt/1w/km/dn/1wkmdn6vlpbbm30he8ogrmwgfn0.png"><br>
<img src="https://habrastorage.org/webt/ih/93/hu/ih93huxi9z6rg2l3hcla3npqucw.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asli: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/4g/ub/qy/4gubqydk1tjocx0zotewdjhfphq.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karya serupa:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/h9/bt/nr/h9btnr9g4lsrbfsn5xfgaf7ogxm.png"><br>
<img src="https://habrastorage.org/webt/zz/vc/mv/zzvcmv1cg8cnq3zzycuin33yo5m.png"><br>
<img src="https://habrastorage.org/webt/fe/o7/mh/feo7mhenbz3x-ws_s22r2diwaai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puas dengan diri saya sendiri, saya menunjukkan hasilnya kepada seorang teman dan menemukan bahwa pendekatan histogram sebenarnya cukup kasar, karena menganalisis distribusi bukan warna itu sendiri, tetapi komponen-komponennya secara terpisah. </font><font style="vertical-align: inherit;">Selain itu, frekuensi warna tidak begitu penting seperti komposisi mereka. </font><font style="vertical-align: inherit;">Ternyata seniman kontemporer telah membuktikan pendekatan untuk pemilihan skema warna. </font><font style="vertical-align: inherit;">Jadi saya mencari tahu tentang Johannes Itten dan roda warnanya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roda warna Itten</font></font></h2><br>
<img src="https://habrastorage.org/webt/na/pp/n0/nappn0jkkajcnv1aau52ore1j9y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Johannes Itten adalah seorang seniman, ahli teori seni dan guru, penulis buku terkenal tentang bentuk dan warna. </font><font style="vertical-align: inherit;">Roda warna adalah salah satu alat paling terkenal yang membantu memadukan warna agar menyenangkan mata. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggambarkan metode pemilihan warna yang paling populer:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y1/p8/dj/y1p8djuogkryt2cwcixurj5msni.png"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warna komplementer - terletak di bagian yang berlawanan dari lingkaran</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warna yang berdekatan - berdekatan dengan lingkaran</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Triad Klasik - Warna di Puncak Segitiga Sama Sisi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrast Triad - Warna di Puncak Segitiga Sama Kaki</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rectangle Rule - Warna pada simpul persegi panjang</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aturan kotak - warna di bagian atas kotak</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menganalisis sebagai seniman</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita coba praktikkan pengetahuan yang didapat. </font><font style="vertical-align: inherit;">Untuk memulai, kita mendapatkan serangkaian warna yang tergeletak di roda warna, mengenalinya dari gambar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r8/cj/t1/r8cjt1cwf_shz1x2mu7ygzulcba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita dapat membandingkan secara berpasangan setiap piksel dari lukisan kita dengan berbagai warna lingkaran Itten. </font><font style="vertical-align: inherit;">Kami mengganti piksel asli dengan piksel terdekat di roda warna dan menghitung frekuensi warna pada gambar yang dihasilkan</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber</font></font></b>
                        <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#          </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">plot_composition_analysis</span>(<span class="hljs-params">image_index</span>):</span><font></font>
    img = load_image_by_index(image_index)<font></font>
    luv_img = cv2.cvtColor(load_image_by_index(image_index), cv2.COLOR_BGR2LUV)<font></font>
    closest_colors = np.argmin(euclidean_distances(luv_img.reshape(<span class="hljs-number">-1</span>,<span class="hljs-number">3</span>),wheel_colors_luv),axis=<span class="hljs-number">1</span>)<font></font>
    wheel_colors2[closest_colors].reshape(luv_img.shape)<font></font>
    color_areas_img = wheel_colors2[closest_colors].reshape(img.shape)<font></font>
<font></font>
    v, c = get_image_colors(image_index)<font></font>
    <span class="hljs-comment">#         </span>
    c_int = (c*img.shape[<span class="hljs-number">1</span>]).astype(int)<font></font>
    c_int_delta = img.shape[<span class="hljs-number">1</span>] - sum(c_int)<font></font>
    c_int[np.argmax(c_int)] = c_int[np.argmax(c_int)] + c_int_delta<font></font>
<font></font>
    _ = []<font></font>
<font></font>
    <span class="hljs-keyword">for</span> i, vi <span class="hljs-keyword">in</span> enumerate(v):<font></font>
        bar_width = c_int[i]<font></font>
        _.append(np.tile(wheel_colors2[vi], (<span class="hljs-number">150</span>,bar_width,<span class="hljs-number">1</span>)))<font></font>
    color_bar_img = np.hstack(_)<font></font>
    final_image = np.hstack([<font></font>
                                np.vstack([img,<font></font>
                                           np.tile(np.array([<span class="hljs-number">254</span>,<span class="hljs-number">254</span>,<span class="hljs-number">254</span>]),(<span class="hljs-number">160</span>,img.shape[<span class="hljs-number">1</span>],<span class="hljs-number">1</span>))]),<font></font>
<font></font>
                                np.tile(np.array([<span class="hljs-number">254</span>,<span class="hljs-number">254</span>,<span class="hljs-number">254</span>]),(img.shape[<span class="hljs-number">0</span>]+<span class="hljs-number">160</span>,<span class="hljs-number">10</span>,<span class="hljs-number">1</span>)),<font></font>
                                np.vstack([color_areas_img,<font></font>
                                           np.tile(np.array([<span class="hljs-number">254</span>,<span class="hljs-number">254</span>,<span class="hljs-number">254</span>]),(<span class="hljs-number">10</span>,img.shape[<span class="hljs-number">1</span>],<span class="hljs-number">1</span>)),<font></font>
                                           color_bar_img])<font></font>
                            ])<font></font>
    h = <span class="hljs-number">12</span>
    w = h / final_image.shape[<span class="hljs-number">1</span>] * final_image.shape[<span class="hljs-number">0</span>]<font></font>
    fig = plt.figure(figsize=(h,w))<font></font>
    plt.imshow(cv2.cvtColor(final_image.astype(np.uint8), cv2.COLOR_BGR2RGB),interpolation=<span class="hljs-string">'nearest'</span>, aspect=<span class="hljs-string">'auto'</span>)<font></font>
    plt.title(<span class="hljs-string">"{} - {}"</span>.format(paintings_links.iloc[image_index].artist_name, <font></font>
                             paintings_links.iloc[image_index].picture_name),ha= <span class="hljs-string">"center"</span>)<font></font>
    plt.axis(<span class="hljs-string">'off'</span>);
</code></pre><br>
</div>
                    </div><br>
<img src="https://habrastorage.org/webt/fp/2p/ma/fp2pmaailir_ye0jt1clgagjtvm.png"><br>
<br>
<img src="https://habrastorage.org/webt/c1/4l/ar/c14lar4pb5c0kfksw_7lxvmnmpk.png"><br>
<br>
<img src="https://habrastorage.org/webt/e5/j1/hu/e5j1huw7dyq6pyoou9nqjzkoss4.png"><br>
<br>
<img src="https://habrastorage.org/webt/db/7f/v0/db7fv0-8gzyuipjaqvberc1mr0s.png"><br>
<br>
<img src="https://habrastorage.org/webt/jj/3q/ui/jj3quitp7yk5grj6xrktbb4ic7q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pernahkah Anda memperhatikan bagaimana "Arlesian Muda" telah berubah sedikit setelah transformasi kami? Mungkin ada baiknya mengukur tidak hanya frekuensi warna baru, tetapi juga statistik tentang kesalahan konversi - ini dapat membantu kami dalam analisis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ini tidak cukup untuk analisis saat ini. Mari kita mencari kombinasi harmonis dalam lingkaran? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua pasangan pelengkap: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/lo/9q/t4/lo9qt47hkn0-ghxlp1zqhqyzee4.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua triad klasik: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/h-/al/sb/h-alsbdg3ieqzjtbrhal_n8oun0.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan semua kotak:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/mv/xm/7v/mvxm7v3-gdy8yv-nqab2zgvhycm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kami akan mencari kombinasi ini dalam lukisan kami, menemukan yang paling signifikan (dalam frekuensi) dan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
melihat apa yang terjadi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk memulai pasangan: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/na/xj/hz/naxjhz31yyujq1zwbvkhzhoqfsk.png"><br>
<br>
<img src="https://habrastorage.org/webt/f4/-r/kg/f4-rkgkuzsvl_zgu9kmzb3ouccq.png"><br>
<br>
<img src="https://habrastorage.org/webt/fe/89/z3/fe89z35byjb4wrvemxqyfs9wdby.png"><br>
<br>
<img src="https://habrastorage.org/webt/ao/1h/te/ao1htez9nac4krnoxh0czm4xv_y.png"><br>
<br>
<img src="https://habrastorage.org/webt/cn/bp/-h/cnbp-h85tasbu2-_tpqmf2tbmle.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu triad: </font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/qb/ei/vj/qbeivjrfg4ychewj5m4a2ooazsc.png"><br>
<br>
<img src="https://habrastorage.org/webt/kn/mb/np/knmbnpnuqujjzo3xp-utw5b7n8w.png"><br>
<br>
<img src="https://habrastorage.org/webt/fw/ak/g9/fwakg96zbki7kyynnh0fcphxyug.png"><br>
<br>
<img src="https://habrastorage.org/webt/s6/ol/n7/s6oln7t05tlrf3ad3xm7m0zyw84.png"><br>
<br>
<img src="https://habrastorage.org/webt/i-/9n/or/i-9norvbf3gp8i4jyhqrkklks10.png"><br>
<br>
<img src="https://habrastorage.org/webt/q5/nt/8b/q5nt8by4_qtewnooas-lqfzarfc.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan, akhirnya, kuadrat:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/10/_y/0c/10_y0cwv4uw4-bua9bbsy3kmnfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/sz/rc/3q/szrc3qvqb8d4vaewweorjotm2ds.png"><br>
<br>
<img src="https://habrastorage.org/webt/0h/vh/0x/0hvh0xpslvtkkva_xk_1xwb9zqc.png"><br>
<br>
<img src="https://habrastorage.org/webt/uj/4l/_d/uj4l_d5fwzhgnrd_zjcqy4raxmu.png"><br>
<br>
<img src="https://habrastorage.org/webt/bv/q9/ls/bvq9lsyij7yfgg36aul1sg1srdc.png"><br>
<br>
<img src="https://habrastorage.org/webt/m2/rw/yq/m2rwyqruadciqfaf6su5jeji78i.png"><br>
<br>
<img src="https://habrastorage.org/webt/s_/pv/gk/s_pvgkbr9-jp2zp-egznee0ndpc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tidak buruk secara mata, tetapi apakah metrik baru akan membantu menentukan penulis karya?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan melatih model hanya menggunakan frekuensi warna Itten, karakteristik kesalahan, dan kombinasi harmonis yang ditemukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kali ini, daftar artis yang paling "dapat diprediksi" telah berubah sedikit, yang berarti bahwa pendekatan analisis yang berbeda memungkinkan kami untuk mengekstrak beberapa informasi lebih banyak dari isi gambar.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presisi</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penarikan</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skor f1</font></font></b></th>
<th><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artis</font></font></b></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,043478</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,012195</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,019048</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Martin, Henri-Jean-Guillaume</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,032680</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,029070</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,030769</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Camille Pissarro</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,166667</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,019608</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,035088</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jean-Leon Jerome</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,076923</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,027778</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,040816</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turner, Joseph Mallord William</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,133333</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,024390</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,041237</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Poortvliet, Rien</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,100000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,026316</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,041667</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Max Klinger</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,026725</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,228216</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,047847</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pierre Auguste Renoir</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,200000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,028571</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,050000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brasilier, Andre</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,028745</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,639098</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,055016</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Claude Oscar Monet</font></font></td>
</tr>
</tbody></table></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karya seni itu unik. </font><font style="vertical-align: inherit;">Seniman menggunakan banyak teknik komposisi yang membuat kita mengagumi karya mereka berulang kali. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skema warna adalah penting, tetapi jauh dari satu-satunya komponen dalam analisis karya seniman. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak kritikus seni sejati akan menertawakan kenaifan analisis, tetapi saya masih puas dengan pekerjaan yang dilakukan. </font><font style="vertical-align: inherit;">Ada beberapa ide lagi yang belum sampai ke tangan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terapkan algoritma pengelompokan untuk analisis skema warna seniman. </font><font style="vertical-align: inherit;">Tentunya kita bisa menyoroti kelompok-kelompok menarik di sana, membedakan berbagai tren dalam seni lukis</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menerapkan algoritma pengelompokan untuk masing-masing lukisan. </font><font style="vertical-align: inherit;">Cari "plot" yang dapat diidentifikasi dengan skema warna. </font><font style="vertical-align: inherit;">Misalnya, di berbagai kluster mendapatkan lanskap, potret, dan benda mati</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cari tidak hanya pasangan, tiga kali lipat dan kuadrat, tetapi juga kombinasi lain dari lingkaran Itten</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pindah dari analisis frekuensi ke analisis titik warna dengan mengelompokkan piksel berdasarkan lokasi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temukan karya yang kepengarangannya diragukan dan lihat siapa model yang akan memilih</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini awalnya merupakan proyek kelulusan untuk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kursus pembelajaran mesin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi beberapa orang merekomendasikan untuk mengubahnya menjadi materi untuk Habr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harap Anda tertarik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua kode yang digunakan dalam pekerjaan tersedia di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id504792/index.html">Rumah kos tugas. Bagaimana NSPK menyelamatkan ruang tugasnya dari coronavirus</a></li>
<li><a href="../id504796/index.html">Udalenka itu keren. Mungkin tinggal selamanya?</a></li>
<li><a href="../id504798/index.html">Keluhan Pengawasan Kecerdasan Buatan</a></li>
<li><a href="../id504800/index.html">dracut + systemd + LUKS + usbflash = buka kunci otomatis</a></li>
<li><a href="../id504804/index.html">Sesuatu yang mengintegrasikan kaki ayam dan iPhone 11</a></li>
<li><a href="../id504808/index.html">Hammock Driven Development - Rich Hickey (dengan terjemahan Rusia)</a></li>
<li><a href="../id504812/index.html">Harga Pengiriman Manusia Instacart</a></li>
<li><a href="../id504818/index.html">Saya merilis pengolah kata yang memformat hard drive setelah setiap penyimpanan 1024</a></li>
<li><a href="../id504822/index.html">Apa perbedaan antara "disetujui oleh FDA" dan "disetujui oleh FDA"</a></li>
<li><a href="../id504828/index.html">JUG Ru Group # 4 Online Stream Week</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>