<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üó°Ô∏è üö∫ üçÖ Choosing a database for analytics ü§ûüèΩ üñêüèæ ü§≤üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When analytics issues go beyond pre-built tools, it's probably time for you to choose a database for analytics. You should not write scripts of querie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Choosing a database for analytics</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487498/"><img src="https://habrastorage.org/webt/-a/ft/8e/-aft8elzesccnmt_qdbmsm9rq1a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When analytics issues go beyond pre-built tools, it's probably time for you to choose a database for analytics. You should not write scripts of queries to the working database, because you can change the order of the data and, most likely, slow down the application. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can also accidentally delete important information if analysts or engineers work there. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For analysis, you need a separate type of database. But which one is true? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this post we will consider offers and best practices for an average company that is just starting to work. Whichever setting you choose, you can find a compromise in the future to improve performance over what we are discussing here.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Working with a large number of clients, we found that the most important criteria that must be considered are:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type of data analyzed</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How much data do you have?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The focus of your engineering team</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How fast do you need information</font></font></li>
</ul><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What types of data do you analyze?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Think about the data you want to analyze. Do they fit well in rows and columns like a huge Excel spreadsheet? Or would it make more sense if you put them in a Word document? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you answered Excel, a relational database like Postgres, MySQL, Amazon Redshift or BigQuery will suit your needs. These structured relational databases are great when you know exactly what data you are going to receive and how they relate to each other - basically, how rows and columns are related. For most types of user analysis, relational databases work well. User attributes such as names, emails, and billing plans fit perfectly into the table, like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user events and their properties</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand, if your data fits better on a piece of paper, you should refer to a non-relational (NoSQL) database such as Hadoop or Mongo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non-relational databases are characterized by an extremely large number of private values ‚Äã‚Äã(millions) of semi-structured data. </font><font style="vertical-align: inherit;">Classical examples of semi-structured data are texts such as e-mail, books and social networks, audiovisual data, and geographic data. </font><font style="vertical-align: inherit;">If you are doing a lot of text mining, language processing, or image processing, you will most likely need to use non-relational data stores.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vw/og/6p/vwog6p_0bnjblntf-nptljztgku.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How much data are you dealing with?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next question to ask yourself is how much data are you dealing with. The more data you have, the more useful the non-relational database will be, because it will not impose restrictions on incoming data, which will allow you to write to the database faster. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ro/08/xo/ro08xohm2iloick2xgeum2l8src.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These are not strict restrictions, and each one can process more or less data depending on various factors, but we found that each of the databases works perfectly within these limits.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have less than 1 TB of data, then with Postgres you will get good performance. </font><font style="vertical-align: inherit;">But it slows down at about 6 TB. </font><font style="vertical-align: inherit;">If you like MySQL but need a slightly larger scale, Aurora (Amazon's own version) can reach 64 TB. </font><font style="vertical-align: inherit;">For a petabyte size, Amazon Redshift is usually a good choice as it is optimized for analytics up to 2PB. </font><font style="vertical-align: inherit;">For parallel processing or even MOAR data, it's probably time to take a look at Hadoop. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, AWS told us that they are running Amazon.com on Redshift, so if you have a first-class DBA team, you may be able to scale beyond the 2PB ‚Äúlimit‚Äù.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is your engineering team focused on?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is another important question to ask yourself when discussing the database. The smaller your overall team, the greater the likelihood that your engineers will focus primarily on product creation, rather than data processing and management. The number of people you can devote to these projects will greatly affect your options. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With some engineering resources, you have more choices - you can go to a relational or non-relational database. Relational databases take less time than NoSQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have several engineers who are working on the installation, but cannot bring anyone to the service, choose something like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postgres</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (optional MySQL hosting) or </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segment Warehouses</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Redshift hosting) is probably a better option than Redshift, Aurora or BigQuery, as they require periodic correction of data processing. If you have more time to service, choosing Redshift or BigQuery will provide faster, larger-scale queries. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relational databases have another advantage: you can use SQL to query them. SQL is well known to both analysts and engineers, and is easier to learn than most programming languages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand, analytics of semi-structured data usually require, at a minimum, experience in object-oriented programming, or, better, experience in writing code to work with big data. Even with the advent of analytics tools like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hunk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for Hadoop or </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slamdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for MongoDB, you will need an experienced analyst or data specialist to analyze these types of databases.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How fast do you need this data?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
While ‚Äúreal-time analytics‚Äù is very popular for cases such as fraud detection and system monitoring, most analyzes do not require real-time data or or immediate analysis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you answer questions, for example, what causes the outflow of users or how people switch from your application to your website, access to your data with a slight delay (hourly or daily intervals) is quite acceptable. </font><font style="vertical-align: inherit;">Your data does not change minute by minute.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, if you are mainly working on the actual analysis, you should refer to a database optimized for analytics, such as Redshift or BigQuery. Such databases are designed to accommodate a large amount of data and quickly read and combine data, making queries fast. They can also download data fast enough (hourly) while someone is doing the cleaning process, resizing and monitoring the cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you absolutely need real-time data, you should turn to an unstructured database such as Hadoop. You can design your Hadoop database so that data loads into it very quickly, although querying it may take longer depending on RAM usage, available disk space, and data structure.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postgres vs. </font><font style="vertical-align: inherit;">Amazon Redshift vs. </font><font style="vertical-align: inherit;">Google bigquery</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You probably already realized that a relational database would be the best choice for analyzing most types of user behavior. </font><font style="vertical-align: inherit;">Information about how your users interact with your site and applications can easily fit into a structured format.</font></font><br>
<br>
<pre><code class="plaintext hljs">analytics.track('Completed Order') ‚Äî select * from ios.completed_order</code></pre><br>
<img src="https://habrastorage.org/webt/ks/rt/-z/ksrt-ztrlqkt07c7rerbu9y2jv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So the question is which SQL database to use? </font><font style="vertical-align: inherit;">Four criteria must be considered.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Size vs. </font><font style="vertical-align: inherit;">speed</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you need speed, it's worth considering Postgres: for a database less than 1TB, Postgres is pretty fast for loading data and queries. </font><font style="vertical-align: inherit;">Plus, it is available. </font><font style="vertical-align: inherit;">As you approach 6TB (inherited from Amazon RDS), your queries will run slower. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, when you need a larger size, we usually recommend Redshift. </font><font style="vertical-align: inherit;">Our experience shows that Redshift has the best value for money.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL highlight</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redshift is built on a variation of Postgres, and both support the good old SQL. </font><font style="vertical-align: inherit;">Redshift does not support all the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data types</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">functions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that postgres supports, but it is much closer to the industry standard than BigQuery, which has its own SQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unlike many other SQL-based systems, BigQuery uses comma-separated syntax to indicate table joins, and not according </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to SQL documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This means that without caution, SQL queries can lead to errors or unexpected results. </font><font style="vertical-align: inherit;">Therefore, many of the teams we met cannot convince their analysts to learn BigQuery SQL.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Third-party ecosystem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rarely does your data warehouse live on its own. You need to put the data in a database, and in addition, you need to use some kind of software to analyze it. (Unless you run the SQL query from the command line). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, people often like that Redshift has a very large ecosystem of third-party tools. AWS has capabilities such as the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segment Data Warehouse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for loading data into Redshift from the analytics API, and they also work with almost all data visualization tools on the market. Fewer third-party services connect to Google, so moving the same data to BigQuery may take more time to develop, and you will not have so many options for BI software. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can see Amazon partners</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and google </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, if you already use Google Cloud Storage instead of Amazon S3, it may be beneficial for you to stay in the Google ecosystem. </font><font style="vertical-align: inherit;">Both services simplify data loading if they already exist in the corresponding cloud storage repository, so that, although they will not violate the terms of use, it will be much easier if you stop using one of these providers.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Training</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now that you have a clearer idea of ‚Äã‚Äãwhich database to use, the next step is to figure out how you will collect the data into the database. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many new database developers underestimate how difficult it is to build a scalable data pipeline. You must write your own extraction layer, data collection API, query and conversion layer. And everyone has to scale. In addition, you need to determine the correct layout based on the size and type of each column. MVP replicates your production database to a new instance, but this usually means using a database that is not optimized for analytics. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortunately, there are several options on the market that can help you get around some of these obstacles and automatically do an ETL for you.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But whether it's your own development or purchase, getting data in SQL is worth it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Based on the initial user data, only with the help of a flexible SQL format will you be able to answer in detail questions about what your customers are doing, accurately assess the distribution, understand the cross-platform behavior, create dashboards for a particular company, and much more.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/en487498/">https://habr.com/ru/post/en487498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en487462/index.html">Webix JavaScript library through the eyes of a beginner. Part 4. Work with data. CRUD</a></li>
<li><a href="../en487470/index.html">Calibry: 3D Breakthrough Price Breakthrough</a></li>
<li><a href="../en487486/index.html">Sega Dreamcast Anatomy: Console Second Life</a></li>
<li><a href="../en487488/index.html">Cases for applying network anomaly analysis tools: detecting the spread of malicious code</a></li>
<li><a href="../en487490/index.html">XSL transformation on MS SQL without CLR</a></li>
<li><a href="../en487502/index.html">Polling print devices using SNMP while the printer is printing</a></li>
<li><a href="../en487504/index.html">By the Day of Russian Science, the best achievements of domestic scientists of 2019 are named</a></li>
<li><a href="../en487508/index.html">Measuring distance to objects using RealSense D435</a></li>
<li><a href="../en487510/index.html">Radioactive products. Gamma spectrometer. Part 1</a></li>
<li><a href="../en487512/index.html">How to implement ignore blocked users in Telegram groups?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>