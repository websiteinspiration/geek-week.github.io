<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö© üîà üòû Test projects without pain. Yandex Report üç´ ‚ò†Ô∏è üêü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We in the Yandex.Maps team for iOS create test projects using a small plugin for CocoaPods and several utility classes. Creating a project is fast and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Test projects without pain. Yandex Report</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/503660/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We in the Yandex.Maps team for iOS create test projects using a small plugin for CocoaPods and several utility classes. </font><font style="vertical-align: inherit;">Creating a project is fast and reliable. </font><font style="vertical-align: inherit;">But maybe we are too bothering and assembling a project manually with the necessary settings and dependencies is not so difficult? </font><font style="vertical-align: inherit;">In the report, I went from the opposite: first I looked at the manual process, then ours.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8iwkFkkV9es" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- First, a little background. </font><font style="vertical-align: inherit;">Yandex.Maps are collected for more than a minute. </font><font style="vertical-align: inherit;">On my computer, building the application takes a little over three minutes. </font><font style="vertical-align: inherit;">We develop in test projects in order to spend less time on each assembly. </font><font style="vertical-align: inherit;">We have enough modularity, and for each module we are doing a test project. </font><font style="vertical-align: inherit;">In this test project, features are being developed.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creating one test project now takes from 15 minutes to an hour. This is due to the fact that the project must be configured. That is, you need to configure signing so that we can develop on the same devices as we are used to. It is necessary to configure the necessary libraries. In the process of developing the feature itself, we constantly come back and finish the test project so that it satisfies our needs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why do we need test projects? To save time on assembly. The smaller the project, the faster it is assembled, the more often we will be able to launch our application on the device and the more comfortable it will be for us to develop. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/d_/rt/zhd_rt3d8t6ojvedwzffktuan7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What should be in the test project? We should be able to launch, debug our application on the same devices on which we are used to launch and debug our main application.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project should be configured as similar as possible to the main project, so that in the process of transferring features from the test project to the main one, we will not get a surprise. </font><font style="vertical-align: inherit;">Or at least reduced the number of surprises received to a minimum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also need a minimal environment in the test project, so that we do not waste time creating UIWindows, setting up libraries, overturning the call to open the application in the library that deals with authorization, etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CocoaPods app_spec</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My whole story today will be built around CocoaPods feature called app_spec. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/eb/xf/pkebxfc7kvhzsszibluqrljlkai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
App_spec is like a regular subspec, only it does not generate a framework that can be connected, but an application that can be launched on the device. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kj/67/dskj67urgk0wocvvue0rsaexelq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And out of the box, CocoaPods allows us to shove Info.plist and xcconfig into app_spec. This already allows us to set up our project quite well. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if we are going to write huge dictionaries in each pods_spec, with values ‚Äã‚Äãfor Info.plist and xcconfig, then we will grow podspec ourselves and it will be inconvenient to modify them. If we need to change something, we have to go into each podspec file and edit something with pens. In any case, this is inconvenient.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/go/mf/t6gomf0wb3koti2mtcxnlsm36e8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get rid of this, we made a very simple local plugin for CocoaPods. It even fits entirely in one slide. And he does the one and only thing: gives us DSL resolution CocoaPods, which creates app_spec with already clogged values ‚Äã‚Äãin Info.plist and xcconfig. This already allows us to configure signing, configure those important things that we want to see configured in our test project. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/7h/7w/kk7h7w7bl013cgrbwntjge0jjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Question: how to transfer the path to entitlements, more precisely, where to store entitlements so that we can hardcode the path into plug-ins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are two ways. Or indicate the path for a file that simply lies in our repository, for example, to entitlements of the main project. Or store in the plugin a special entitlements file for test projects. And using the same plugin, copy it to our developmentpod.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/xo/jr/37xojrk1orzo5d_2nj1eu1tconi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We chose the first path, and here we had some difficulties. The fact is that in our repository developmentpods are in different subfolders. Therefore, we cannot indicate one relative path for them from the developmentpod to the entitlements file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to emphasize here that you must specify a relative path, because this path remains in pods_spec. This means that he will participate in the calculation of the check amount, which is stored in Podfile.lock. And if there is an absolute path, then this will affect the check amount. This means that the check amount will vary depending on which folder to call $ pod install from, where you have the repository, which machine you run $ pod install on. In general, this leads to conflict.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/ek/ng/loekngcf64nbbzuaaadwy3qmhl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I will show another small extension of the same plugin, which allows us to calculate the relative path to these entitlements. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We know the relative path from our plugin to the file with entitlements, if they are in the same repository. </font><font style="vertical-align: inherit;">And also during the launch of $ pod install, we know the path to our developmentpod. </font><font style="vertical-align: inherit;">All the magic that is in this code is a highlighted line where we simply count the relative path, knowing these two absolute paths. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/yg/1l/yayg1ll82qeeq2xg28xnfrm4i2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, what did we get when we already had app_spec configured in this way? </font><font style="vertical-align: inherit;">We can run our test project on the same devices right away. </font><font style="vertical-align: inherit;">We got a huge amount of settings, including entitlements, which we need.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environment</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next thing I want to talk about is the environment, the very minimum necessary environment that we need to start writing code right away. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/f-/t2/uif-t2fox7l9twbo2isjpzcx_py.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our case, we need MapKit, already configured, with the keys transferred, with call forwarding in the AccountManager. This is our authorization library. She also needs to throw system calls, she also needs to transfer keys, including to pass the opening of the application by reference. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also need a start screen with a map and navigation stack, so that we can use the same navigation stack as in Maps, and it is easier to transfer features from the test project to the main one. And the entry point so that we, without thinking, could immediately start writing useful code.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/l0/c_/jql0c_lfm6weosqqsvivxclmqro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In your case, this could be, for example, setting up the Facebook SDK, to which you also need to transfer keys; your libraries for login, which you will almost certainly need to skip the application opening link. Some kind of start-up Windows start-up Controller, and the same entry point to run the main script that you want to develop in your test project. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/6v/7o/7u6v7oxzg3dipiw2ztkcsub5ou8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How did we do this? By making a single AppDelegate template. There we initialize all the necessary environments, libraries. We forward all the necessary calls, transfer the necessary keys. Creating a test project, it remains for us to create a new AppDelegate for the test project and inherit from the template.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, we override the one and only method that is called after the template AppDelegate has done everything necessary. </font><font style="vertical-align: inherit;">And there we already have the starting ViewController and on top of it we can run our script, which we want to debug in the test project.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was / became</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How can I create a test project in the forehead, and how can I create it using the method that I described today? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creating a test project in the forehead: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- We go to Xcode, create a new project (File&gt; New Project). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Enter the name, preferably without errors, sign the Bundle ID. We are setting up this project. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Change the version of Swift, change the target version. We are trying to run it all on the device, edit signing, and so on. This is a rather dreary process. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Next, we create a podfile, connect dependencies there, install pods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- After that, we go and begin to very tediously and gently configure our AppDelegate, transferring through the pieces of initialization of the libraries that we need. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Create a start UIWindows with our ViewController</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And only after that we can start the useful code. </font><font style="vertical-align: inherit;">Fairly unpleasant procedure, agree. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How can we create a test project using the best practices that I described in today's report? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- We create sample_app_spec, using the extension, for CocoaPods, with which we started. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Create an AppDelegate, and inherit it from the template AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, we can start writing useful code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creating a test project in this way is much faster and more reliable. </font><font style="vertical-align: inherit;">We will definitely not make a mistake in signing settings, we will definitely not make a mistake in project settings. </font><font style="vertical-align: inherit;">All the environment necessary for starting work immediately approaches us.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Can it be easier?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can ask a question - can this be done easier? Of course. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/t_/ux/9et_uxcpepiyc5iavhfehkqen-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I have identified three difficulty levels. The first is what I talked about today, all at once, when we make a pumped-in plugin for CocoaPods, which can repair paths to entitlements, and a template AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second method is ideal in the ratio of efforts to profit. It contains only the plugin for CocoaPods, which was the first in today's story. That is, it simply substitutes the values ‚Äã‚Äãin Info.plist and xcconfig. It already makes life a lot easier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you do not need your entitlements file in your test applications, if your test applications are quite different from each other and do not need common components, this method is very suitable for you.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The third method is the easiest, does not require any preparation. Just start using app_spec. The project that is generated from app_spec is created in the same Workspace as your main project. Therefore, it already inherits, for example, Swift, target version and all the settings that you have in Workspace. It will be much easier for you to start working with him. That's all, thank you for your attention. Today I will tell you how to create test projects without pain, and how we create test projects in Yandex.Maps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- First, a little background. Yandex.Maps are collected for more than a minute. On my computer, building the application takes a little over three minutes. We develop in test projects in order to spend less time on each assembly. We have enough modularity, and for each module we are doing a test project. In this test project, features are being developed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creating one test project now takes from 15 minutes to an hour. This is due to the fact that the project must be configured. That is, you need to configure signing so that we can develop on the same devices as we are used to. It is necessary to configure the necessary libraries. In the process of developing the feature itself, we constantly come back and finish the test project so that it satisfies our needs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why do we need test projects? To save time on assembly. The smaller the project, the faster it is assembled, the more often we will be able to launch our application on the device and the more comfortable it will be for us to develop. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/d_/rt/zhd_rt3d8t6ojvedwzffktuan7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What should be in the test project? We should be able to launch, debug our application on the same devices on which we are used to launch and debug our main application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project should be configured as similar as possible to the main project, so that in the process of transferring features from the test project to the main one, we will not get a surprise. Or at least reduced the number of surprises received to a minimum.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also need a minimal environment in the test project, so that we do not waste time creating UIWindows, setting up libraries, overturning the call to open the application in the library that deals with authorization, etc. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CocoaPods app_spec</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My whole story today will be built around CocoaPods feature called app_spec. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/eb/xf/pkebxfc7kvhzsszibluqrljlkai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
App_spec is like a regular subspec, only it does not generate a framework that can be connected, but an application that can be launched on the device. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kj/67/dskj67urgk0wocvvue0rsaexelq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And out of the box, CocoaPods allows us to shove Info.plist and xcconfig into app_spec. This already allows us to set up our project quite well. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if we are going to write huge dictionaries in each pods_spec, with values ‚Äã‚Äãfor Info.plist and xcconfig, then we will grow podspec ourselves and it will be inconvenient to modify them. If we need to change something, we have to go into each podspec file and edit something with pens. Or not pens. In any case, this is inconvenient.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/go/mf/t6gomf0wb3koti2mtcxnlsm36e8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get rid of this, we made a very simple local plugin for CocoaPods. It even fits entirely in one slide. And he does the one and only thing: gives us DSL resolution CocoaPods, which creates app_spec with already clogged values ‚Äã‚Äãin Info.plist and xcconfig. This already allows us to configure signing, configure those important things that we want to see configured in our test project. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/7h/7w/kk7h7w7bl013cgrbwntjge0jjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Question: how to transfer the path to entitlements, more precisely, where to store entitlements so that we can hardcode the path into plug-ins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are two ways. Or indicate the path for a file that simply lies in our repository, for example, to entitlements of the main project. Or store in the plugin a special entitlements file for test projects. And using the same plugin, copy it to our developmentpod.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/xo/jr/37xojrk1orzo5d_2nj1eu1tconi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We chose the first path, and here we had some difficulties. The fact is that in our repository developmentpods are in different subfolders. Therefore, we cannot indicate one relative path for them from the developmentpod to the entitlements file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to emphasize here that you must specify a relative path, because this path remains in pods_spec. This means that he will participate in the calculation of the check amount, which is stored in Podfile.lock. And if there is an absolute path, then this will affect the check amount. This means that the check amount will vary depending on which folder to call $ pod install from, where you have the repository, which machine you run $ pod install on. In general, this leads to conflict.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/ek/ng/loekngcf64nbbzuaaadwy3qmhl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I will show another small extension of the same plugin, which allows us to calculate the relative path to these entitlements. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We know the relative path from our plugin to the file with entitlements, if they are in the same repository. </font><font style="vertical-align: inherit;">And also during the launch of $ pod install, we know the path to our developmentpod. </font><font style="vertical-align: inherit;">All the magic that is in this code is a highlighted line where we simply count the relative path, knowing these two absolute paths. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/yg/1l/yayg1ll82qeeq2xg28xnfrm4i2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, what did we get when we already had app_spec configured in this way? </font><font style="vertical-align: inherit;">We can run our test project on the same devices right away. </font><font style="vertical-align: inherit;">We got a huge amount of settings, including entitlements, which we need.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environment</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next thing I want to talk about is the environment, the very minimum necessary environment that we need to start writing code right away. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/f-/t2/uif-t2fox7l9twbo2isjpzcx_py.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our case, we need MapKit, already configured, with the keys transferred, with call forwarding in the AccountManager. This is our authorization library. She also needs to throw system calls, she also needs to transfer keys, including to pass the opening of the application by reference. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also need a start screen with a map and navigation stack, so that we can use the same navigation stack as in Maps, and it is easier to transfer features from the test project to the main one. And the entry point so that we, without thinking, could immediately start writing useful code.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/l0/c_/jql0c_lfm6weosqqsvivxclmqro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In your case, this could be, for example, setting up the Facebook SDK, to which you also need to transfer keys; your libraries for login, which you will almost certainly need to skip the application opening link. Some kind of start-up Windows start-up Controller, and the same entry point to run the main script that you want to develop in your test project. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/6v/7o/7u6v7oxzg3dipiw2ztkcsub5ou8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How did we do this? By making a single AppDelegate template. There we initialize all the necessary environments, libraries. We forward all the necessary calls, transfer the necessary keys. Creating a test project, it remains for us to create a new AppDelegate for the test project and inherit from the template.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, we override the one and only method that is called after the template AppDelegate has done everything necessary. </font><font style="vertical-align: inherit;">And there we already have the starting ViewController and on top of it we can run our script, which we want to debug in the test project.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was / became</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How can I create a test project in the forehead, and how can I create it using the method that I described today? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creating a test project in the forehead: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- We go to Xcode, create a new project (File&gt; New Project). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Enter the name, preferably without errors, sign the Bundle ID. We are setting up this project. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Change the version of Swift, change the target version. We are trying to run it all on the device, edit signing, and so on. This is a rather dreary process. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Next, we create a podfile, connect dependencies there, install pods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- After that, we go and begin to very tediously and gently configure our AppDelegate, transferring through the pieces of initialization of the libraries that we need. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Create a start UIWindows with our ViewController</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And only after that we can start the useful code. </font><font style="vertical-align: inherit;">Fairly unpleasant procedure, agree. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How can we create a test project using the best practices that I described in today's report? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- We create sample_app_spec, using the extension, for CocoaPods, with which we started. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Create an AppDelegate, and inherit it from the template AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, we can start writing useful code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creating a test project in this way is much faster and more reliable. </font><font style="vertical-align: inherit;">We will definitely not make a mistake in signing settings, we will definitely not make a mistake in project settings. </font><font style="vertical-align: inherit;">All the environment necessary for starting work immediately approaches us.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Can it be easier?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can ask a question - can this be done easier? Of course. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/t_/ux/9et_uxcpepiyc5iavhfehkqen-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I have identified three difficulty levels. The first is what I talked about today, all at once, when we make a pumped-in plugin for CocoaPods, which can repair paths to entitlements, and a template AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second method is ideal in the ratio of efforts to profit. It contains only the plugin for CocoaPods, which was the first in today's story. That is, it simply substitutes the values ‚Äã‚Äãin Info.plist and xcconfig. It already makes life a lot easier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you do not need your entitlements file in your test applications, if your test applications are quite different from each other and do not need common components, this method is very suitable for you.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The third method is the easiest, does not require any preparation. </font><font style="vertical-align: inherit;">Just start using app_spec. </font><font style="vertical-align: inherit;">The project that is generated from app_spec is created in the same Workspace as your main project. </font><font style="vertical-align: inherit;">Therefore, it already inherits the Swift version, target version and all the settings that you have in Workspace. </font><font style="vertical-align: inherit;">It will be much easier for you to start working with him. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for the attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503648/index.html">What does the output of "ss -s" mean</a></li>
<li><a href="../en503650/index.html">VKCup 2020 Stage I. A Long Way</a></li>
<li><a href="../en503652/index.html">Digital events in Moscow from May 25 to May 31</a></li>
<li><a href="../en503654/index.html">Web service that allows users to independently maintain a culture of communication online</a></li>
<li><a href="../en503656/index.html">The band suppression algorithm in the image as a tool for improving the quality of tomographic reconstruction</a></li>
<li><a href="../en503662/index.html">NEW - VoIP Phone Snom D335</a></li>
<li><a href="../en503666/index.html">Startup and Business Course Translation from Stanford University. Lecture number 1. How to start a startup</a></li>
<li><a href="../en503668/index.html">Circle Squared: Visual Evidence</a></li>
<li><a href="../en503670/index.html">Does Mac OS slow down? - Catalina checks any unsigned code over the Internet at startup</a></li>
<li><a href="../en503672/index.html">Which side are you on: Push and Pull in Desired State Configuration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>