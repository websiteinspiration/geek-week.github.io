<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👆🏻 👩🏻‍🤝‍👨🏼 📳 最小のオートメーション。二部。ネットワーク設計 👨🏽‍⚖️ 📆 🚣🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最初の2つの記事では、自動化の問題を取り上げ、そのフレームワークを概説しました。2番目の記事では、サービスの構成を自動化する最初のアプローチとして、ネットワーク仮想化について説明しました。
 次に、物理的なネットワーク図を作成します。
 
 データセンターネットワークのデバイスをすぐに利用できない場...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>最小のオートメーション。二部。ネットワーク設計</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475614/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の2つの記事では、自動化の問題を取り上げ、そのフレームワークを概説しました。2番目の記事では、サービスの構成を自動化する最初のアプローチとして、ネットワーク仮想化について説明しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、物理的なネットワーク図を作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データセンターネットワークのデバイスをすぐに利用できない場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらに関する記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から始めることを強くお勧め</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">します</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての問題：</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0. ADSM。</font><font style="vertical-align: inherit;">パートゼロ。</font><font style="vertical-align: inherit;">企画</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. ADSM。</font><font style="vertical-align: inherit;">パート1（ゼロの後）。</font><font style="vertical-align: inherit;">ネットワーク仮想化</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ADSM。</font><font style="vertical-align: inherit;">二部。</font><font style="vertical-align: inherit;">ネットワーク設計</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このシリーズで説明されているプラ​​クティスは、あらゆる種類のあらゆる規模のネットワークに適用でき、さまざまなベンダー（no）が必要です。</font><font style="vertical-align: inherit;">ただし、これらのアプローチの一般的な適用例は説明できません。</font><font style="vertical-align: inherit;">したがって、DCネットワークの最新のアーキテクチャである</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klose Factoryに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">焦点を当て</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIはMPLS L3VPNで行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ホストからのオーバーレイネットワークは、物理ネットワークの上で実行されます（OpenStack VXLANまたはTungsten Fabric、またはネットワークからの基本的なIP接続のみを必要とするその他のネットワーク）。</font><font style="vertical-align: inherit;">
この場合、同じように構成された多くの機器があるため、自動化のシナリオは比較的単純です。</font><font style="vertical-align: inherit;">
真空中の球状DCを選択します。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/e13/b5a/aa8/e13b5aaa8e2c2161e75084de878ed741.jpg" width="600"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デザインの1つのバージョンがいたるところにあります。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークの2つのプレーンを形成する2つのベンダー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのDCは、2滴の水に似ています。</font></font></li>
</ul><br>
<hr><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></h1><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理トポロジー</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーティング</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知財計画</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラバ</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、LAN_DCサービスプロバイダーに、スタックしたエレベーターでの生存に関するトレーニングビデオをホストしてもらいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メガシティではこれは非常に人気があるため、多くの物理マシンがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、私が見たいネットワークのおおよその説明をします。</font><font style="vertical-align: inherit;">そして、それをラボで簡略化します。</font></font><br>
<br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理トポロジー</font></font></h1><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場所</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LAN_DCには6つのDCがあります。 </font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロシア（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RU</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モスクワ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msk</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カザン（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kzn</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スペイン（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バルセロナ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bcn</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マラガ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mlg</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
</ul><br>
 </li>
<li> (<b>CN</b>):<br>
 <ul>
<li> (<b>sha</b>)</li>
<li> (<b>sia</b>)</li>
</ul><br>
 </li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/c79/5f3/6f3/c795f36f3eb1553eaf32f909d570ed16.png" width="800"><br>
<hr><br>
<br>
<h2>  (Intra-DC)</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのDCで、Kloseのトポロジに基づく内部接続の同一のネットワーク。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kloseとはどのようなネットワークで、なぜ別の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事にあるの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各DCには10台のラックがあり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように番号が付けられ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各ラックには30台の車があります。彼らは私たちに興味がないでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、各ラックには、すべてのマシンが接続されているスイッチがあります。これは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トップオブラックスイッチ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font><b><font style="vertical-align: inherit;">。ToR</font></b><font style="vertical-align: inherit;">または、クロースファクトリーでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リーフ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼びます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e3a/5da/d17/e3a5dad17c7aadf1cf95865deaa8e359.png" width="800"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工場の一般的なスキーム。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我々は彼らに名前が付けられます</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XXX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -leaf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XXXを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-3文字の略語DC、および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリアル番号。</font><font style="vertical-align: inherit;">たとえば、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kzn-leaf11</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事では、LeafとToRを同義語としてかなり軽薄に使用できるようにします。</font><font style="vertical-align: inherit;">しかし、これはそうではないことを覚えておく必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ToRは、マシンが接続するラックマウントスイッチです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 リーフは、クロスのトポロジーの観点から、物理ネットワークまたは第1レベルのスイッチにおけるデバイスの役割です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 つまり、Leaf！= ToRです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 たとえば、LeafはEndofRawスイッチにすることができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ただし、この記事の枠組みでは、それでも同義語と呼びます。</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各ToRスイッチは、4つのアップストリーム集約スイッチ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spine）に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続されています</font><font style="vertical-align: inherit;">。 Spine'yの下で、DCに1つのラックを割り当てました。コールは次のようになります：</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XXXは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -spine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yを</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じラックには、DC間の接続のためのネットワーク機器があり、MPLSが搭載された2つのルーターがあります。しかし、概して、これらは同じToRです。つまり、スパインスイッチの観点からは、接続されたマシンに通常のToRが存在するか、DCI用のルーターが存在するかは重要ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような特別なToRは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edge-leaf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。私たちは彼らの</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XXX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を参照し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんな感じになります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/62c/83f/d27/62c83fd278227f1740e5cf4e64eaed4e.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上の図では、エッジとリーフを同じレベルに配置しています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">古典的な3レベルのネットワーク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アップリンク（用語は実際にはここからのもの）をリンクアップと見なすことを教えてくれました。そして、ここで、DCIの「アップリンク」がダウンし、通常のロジックをいくらか壊していることがわかります。大規模なネットワークの場合、データセンターがさらに小さなユニット</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-POD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Point Of Delivery）に分割される</font><font style="vertical-align: inherit;">と、DCIと外部ネットワークへのアクセス用</font><font style="vertical-align: inherit;">に別々の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edge-POD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が割り当てられ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
便宜上、今後もEdge on Spineを描画しますが、通常のLeafとEdge-leafを使用する場合、Spineに関する違いや違いはないことを念頭に置いてください（ニュアンスはあるかもしれませんが、一般的にはこれは本当です）。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ca5/67d/9db/ca567d9db0c49c3baf63304443477102.png" width="600"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジのある工場レイアウト。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トリニティリーフ、スパイン、エッジは、アンダーレイネットワークまたはファクトリを形成します。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">前のリリース</font></a><font style="vertical-align: inherit;">で</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既に決定したように、ネットワークファクトリ（アンダーレイを読む）のタスク</font><font style="vertical-align: inherit;">は非常に簡単です。同じDC内およびマシン内のマシン間でIP接続を提供することです。</font><font style="vertical-align: inherit;">
これが、ネットワークがファクトリーと呼ばれる理由です。たとえば、モジュラーネットワークボックス内のスイッチングファクトリーと同様に、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">SDSM14で</font></a><font style="vertical-align: inherit;">詳細に説明されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般に、このようなトポロジは、変換中のファブリックがファブリックであるため、ファクトリと呼ばれます。</font><font style="vertical-align: inherit;">そして同意するのは難しいです：</font></font><br>
 <img src="https://habrastorage.org/getpro/habr/post_images/7e9/db7/2c3/7e9db72c353e6b5b050eb63de72bb111.png" width="300"><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
工場は完全にL3です。</font><font style="vertical-align: inherit;">VLANもブロードキャストもありません。これらはLAN_DCの優れたプログラマーであり、L3パラダイムに準拠したアプリケーションを作成でき、仮想マシンはIPアドレスを保存するライブマイグレーションを必要としません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして再び：なぜ工場とL3なのかという質問への回答-別の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<hr><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DCI-データセンター相互接続（DC間）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIはEdge-Leafを使用して編成されます。つまり、DCIは高速道路への出口です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単にするために、DCは直接リンクで接続されていると仮定します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
外部接続は考慮から除外されます。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネントを削除するたびに、ネットワークが大幅に簡略化されることを認識しています。</font><font style="vertical-align: inherit;">そして、私たちの抽象的なネットワークの自動化により、すべてがうまくいきますが、松葉杖は実際のものに現れます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 これは本当です。</font><font style="vertical-align: inherit;">それにもかかわらず、このシリーズの目標は、アプローチを考えて取り組むことであり、架空の問題を英雄的に解決することではありません。</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エッジリーフでは、アンダーレイはVPNに配置され、MPLSバックボーン（同じダイレクトリンク）経由で送信されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにそのようなトップレベルのスキームがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e4e/ad7/b78/e4ead7b7898490c29fa93f7375376aa8.png" width="800"><br>
<br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーティング</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DC内のルーティングには、BGPを使用します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OSPF + LDP MPLSトランク上</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIの場合、つまり、裏側の接続の編成はBGP L3VPN over MPLSです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a55/3b1/30b/a553b130b286a50fd1c97fe8bb2b5b5b.png" width="800"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的なルーティング方式</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
工場にはOSPFとISISがありません（ロシア連邦ではルーティングプロトコルは禁止されています）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これは、プロトコル、近隣、およびポリシーを設定する自動検出および最短経路計算がなく、手動（実際には自動-ここでは自動化について）のみが設定されることを意味します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/82b/426/251/82b4262513aeae7c12d6e1618182f272.png" width="600"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DC内のBGPルーティング方式BGPを</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選ぶ理由</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この件に関しては</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FacebookとAristaという名前の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">RFC全体</font></a><font style="vertical-align: inherit;">があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><b><font style="vertical-align: inherit;">非常に大規模な</font></b><font style="vertical-align: inherit;">ビルド方法を示しています</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BGPを使用するネットワークデータセンター。</font><font style="vertical-align: inherit;">まるで芸術のようで、だるい夜におすすめです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私の記事のセクション全体がこれに専念しています。</font><font style="vertical-align: inherit;">どこに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送りますか</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それでも要するに、何千ものネットワークデバイスが存在する大規模なデータセンターのネットワークに適したIGPはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、あらゆる場所でBGPを使用することで、いくつかの異なるプロトコルのサポートとそれらの間の同期をスプレーしないようにすることができます。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高い確率で急速に成長しない工場では、OSPFで十分です。</font><font style="vertical-align: inherit;">これらは実際にはメガスケーラーとクラウドタイタンの問題です。</font><font style="vertical-align: inherit;">しかし、私たちが必要とするいくつかの問題を想像してみてください。ピーターラプホフが遺したように、BGPを使用します。</font></font><br>
</blockquote><br>
<hr><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーティングポリシー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リーフスイッチでは、ネットワークとのアンダーレイインターフェイスからBGPプレフィックスにインポートします。</font><b><font style="vertical-align: inherit;">各</font></b><font style="vertical-align: inherit;">リーフとスパインのペア</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
間にBGPセッションがあり、</font><font style="vertical-align: inherit;">これらのアンダーレイプレフィックスが水たまりネットワークでアナウンスされます。</font><font style="vertical-align: inherit;">
1つのデータセンター内で、ToReにインポートされた詳細を配布します。エッジリーフでは、リモートDCでそれらを集約して通知し、ToRに下げます。つまり、各ToRは、同じDC内の別のToRに到達する方法と、別のDC内のToRに到達するためのエントリポイントがどこにあるかを正確に知っています。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/85a/4b0/38d/85a4b038dc57c9fc54f1fb1ad10a5172.png" width="800"><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIでは、ルートはVPNv4として送信されます。</font><font style="vertical-align: inherit;">これを行うには、エッジリーフ上で、ファクトリへのインターフェイスをVRFに配置し、UNDERLAYと呼びます。エッジリーフ上にスパインがある近隣は、VRF内で、VPNv4-family内のエッジリーフ間で立ち上がります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/231/d58/9d6/231d589d6ae0bcd63e4f60028771cd95.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、スパインから受け取ったルートを再度アナウンスすることも禁止します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/3f0/f41/dfa/3f0f41dfa8510d48849ef8743f5b757a.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リーフとスパインでは、ループバックをインポートしません。</font><font style="vertical-align: inherit;">ルーターIDを特定するためにのみ必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、エッジリーフではグローバルBGPにインポートします。</font><font style="vertical-align: inherit;">ループバックアドレス間で、エッジリーフは相互にIPv4 VPNファミリでBGPセッションを確立します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EDGEデバイス間で、トランクをOSPF + LDPに拡張します。</font><font style="vertical-align: inherit;">すべて1つのゾーンに。</font><font style="vertical-align: inherit;">非常にシンプルな構成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはルーティングの写真です。</font></font><br>
<hr><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BGP ASN</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジリーフASN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エッジリーフでは、すべてのDCに1つのASNがあります。</font><font style="vertical-align: inherit;">エッジリーフ間にiBGPがあり、eBGPのニュアンスに遭遇しないことが重要です。</font><font style="vertical-align: inherit;">65535にします。実際には、パブリックAS番号になる可能性があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脊椎ASN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spineでは、DCごとに1つのASNがあります。</font><font style="vertical-align: inherit;">ここから、プライベートAS範囲の最初の番号（64512、64513など）から始めましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCでASNを使用する理由 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この質問を2つに分解します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じDCのすべてのスパインに同じASNがあるのはなぜですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜDCが異なるのですか？</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じDCのすべてのスパインに同じASNがある理由</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
エッジリーフのアンダーレイルートのASパスは次のようになります</font><font style="vertical-align: inherit;">
。Spineにアナウンスしようとすると、AS（Spine_AS）が既にリストにあるため、ドロップされます。</font><font style="vertical-align: inherit;">
ただし、DC内では、エッジに登ったアンダーレイルートが下りることができないことに完全に満足しています。 DC内のホスト間のすべての通信は、スパインレベル内で発生する必要があります。</font><font style="vertical-align: inherit;">
同時に、他のDCの集約されたルートは、いずれの場合もToRに自由に到達します。ASパスには、ASエッジリーフの数であるASN 65535のみが存在します。</font><b><font style="vertical-align: inherit;">DCが異なる理由</font></b></font><br>
<code>[leafX_ASN, <b>spine_ASN</b>, edge_ASN]</code><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/0b3/cec/64c/0b3cec64c8666b0154f041bd64c9059b.png" width="800"><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、ループバックといくつかのサービス仮想マシンをDC間でドラッグする必要があるかもしれません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ホストでは、ルートリフレクターまたは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じVNGW</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（仮想ネットワークゲートウェイ）を実行します。これは、BGPを介してToRでロックされ、すべてのDCから利用できるループバックを通知します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AS-Pathは次のようになります</font><font style="vertical-align: inherit;">
。重複するASNはどこにもないはずです。</font><font style="vertical-align: inherit;">
つまり、Spine_DC1とSpine_DC2は、leafX_DC1とleafY_DC2のように異なる必要があります。</font></font><br>
<code>[VNF_ASN, leafX_DC1_ASN, <b>spine_DC1_ASN</b>, edge_ASN, <b>spine_DC2_ASN</b>, leafY_DC2_ASN]</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fee/b97/61f/feeb9761f4964eda7f7519464927f61e.png" width="800"><br>
<br><font style="vertical-align: inherit;"></font><br>
<blockquote>  , , ,  ,      ASN     (allowas-in  Cisco).        .       .        .<br>
<br>
         ,   .<br>
</blockquote><br>
<h3>Leaf ASN</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワーク全体の各リーフスイッチに個別のASNがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、上記の理由により行われます：ループのないAS-Path、ブックマークのないBGP構成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リーフ間のルートが妨げられずに通過するためには、AS-Pathは次のようになります。</font></font><br>
<code>[leafX_ASN, spine_ASN, leafY_ASN]</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、leafX_ASNとleafY_ASNは異なっているとよいでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、DC間のVNFループバックのアナウンスがある状況でも必要です</font><font style="vertical-align: inherit;">
。4バイトのASNを使用して、SpineのASNとリーフスイッチ番号に基づいて生成し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">つまり、</font><i><font style="vertical-align: inherit;">Spine_ASN.0000Xの</font></i><font style="vertical-align: inherit;">ように</font><i><font style="vertical-align: inherit;">なり</font></i><font style="vertical-align: inherit;">ます。</font></font><br>
<code>[VNF_ASN, <b>leafX_DC1_ASN</b>, spine_DC1_ASN, edge_ASN, spine_DC2_ASN, <b>leafY_DC2_ASN</b>]</code><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<hr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASNの画像は次のとおりです。</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/c4a/f3b/66c/c4af3b66cff4bb0589ee0c6ef98134cf.png" width="800"><br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知財計画</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に、次の接続にアドレスを割り当てる必要があります。</font></font><br>
<br>
<ol>
<li>  Underlay  ToR  .        ,        .   <b>10/8</b>.     /26  .    /19    /17  .<br>
 </li>
<li>   Leaf/Tor  Spine. <br>
<br>
    ,      ,   .<br>
 <br>
   … 169.254.0.0/16. <br>
   <b>169.254.00X.Y/31</b>,  <b>X</b> —  Spine, <b>Y</b> — P2P- /31.<br>
     128 ,   10 Spine  .    ( )     .</li>
<li>C Spine — Edge-Leaf    <b>169.254.10X.Y/31</b>,     <b>X</b> —  Spine, <b>Y</b> — P2P- /31.</li>
<li>   Edge-Leaf  MPLS-.     —       ,         —     .     <b>192.168.0.0/16</b>      .</li>
<li> Loopback.      <b>172.16.0.0/12</b>.<br>
 <ul>
<li>Leaf —  /25   —   128 .   /23  .</li>
<li>Spine —  /28   —  16 Spine.   /26  .</li>
<li>Edge-Leaf —  /29   —  8 .   /27  .</li>
</ul> </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DC内に選択範囲が十分にない場合（それらは存在せず、ハイパースケラーロストボのふりをします）、次のブロックを選択します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、IPアドレッシングを使用した画像です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/def/f08/e49/deff08e49e0fee39e0799dfac4fad2a4.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ループバック：</font></font><br>
<table border="2">
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接頭辞</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスの役割</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">領域</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DC</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.0/23</font></font></td>
<td rowspan="10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.0/27</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">る</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.0/29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msk</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.8/29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kzn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.32/27</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.32/29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bcn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.40/29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mlg</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.64/27</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cn</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.64/29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シャ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.0.72/29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sia</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.0/23</font></font></td>
<td rowspan="10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脊椎</font></font></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.0/26</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">る</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.0/28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msk</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.16/28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kzn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.64/26</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.64/28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bcn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.80/28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mlg</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.128/26</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cn</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.128/28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シャ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.2.144/28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sia</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.8.0/21</font></font></td>
<td rowspan="10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">葉</font></font></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.8.0/23</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">る</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.8.0/25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msk</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.8.128/25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kzn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.10.0/23</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.10.0/25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bcn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.10.128/25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mlg</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.12.0/23</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cn</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.12.0/25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シャ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172.16.12.128/25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sia</font></font></td>
</tr>
</tbody></table><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アンダーレイ：</font></font><br>
<table border="2">
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接頭辞</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">領域</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DC</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.0/17</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">る</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.0/19</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msk</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.32.0/19</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kzn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.128.0/17</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.128.0/19</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bcn</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.160.0/19</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mlg</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1.0.0/17</font></font></td>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cn</font></font></td>
<td>&nbsp;</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1.0.0/19</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シャ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1.32.0/19</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sia</font></font></td>
</tr>
</tbody></table><br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラバ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのベンダー。</font><font style="vertical-align: inherit;">1つのネットワーク。</font><font style="vertical-align: inherit;">ADSM。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジュニパー+アリスタ。</font><font style="vertical-align: inherit;">Ubuntu </font><font style="vertical-align: inherit;">古き良きイブ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Miranのvirtualochkaのリソースの量はまだ限られているため、実際には、このような簡略化されたネットワークを限界まで使用します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/477/a27/096/477a2709633866d53fec5972e9417421.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのデータセンター：カザンとバルセロナ。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それぞれに2つのスパイン：ジュニパーとアリスタ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それぞれに1つのトーラス（リーフ）-ジュニパーとアリスタ、1つのホストが接続されています（これには軽量のCisco IOLを使用します）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのエッジリーフノード（これまでのところジュニパーのみ）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらすべてを支配する1つのCiscoスイッチ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークボックスに加えて、管理仮想マシンがリリースされました。</font><font style="vertical-align: inherit;">Ubuntuを実行しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 すべてのデバイス、IPAM / DCIMシステム、多数のPythonスクリプト、Ansibleなど、私たちが必要とするあらゆるものにアクセスできます。</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動化を使用して再現しようとするすべてのネットワークデバイス</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の完全な構成</font></a><font style="vertical-align: inherit;">。</font></font><br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また受け入れられますか？各記事の下で短い結論を出すには？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、私たちは、</font><font style="vertical-align: inherit;">DC内の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3レベルの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロースネットワーク</font><font style="vertical-align: inherit;">を選択しまし</font><font style="vertical-align: inherit;">た。これは、多くの東西トラフィックが予想され、ECMPが必要であるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークを物理（アンダーレイ）と仮想（オーバーレイ）に分割しました。この場合、オーバーレイはホストから開始されるため、アンダーレイの要件が簡素化されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポリシーの拡張性と柔軟性のため、削除されていないネットワークのルーティングプロトコルとしてBGPを選択しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCI構成用の別のノード（エッジリーフ）を用意します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トランクにはOSPF + LDPがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIはMPLS L3VPNに基づいて実装されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
P2Pリンクの場合、デバイス名に基づいてアルゴリズムでIPアドレスを計算します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lupbackは、デバイスの役割とその場所によって順番に割り当てられます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アンダーレイプレフィックス-位置に基づいて順番にリーフスイッチ上でのみ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、機器を設置していないとします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、次のステップは、それらをシステム（IPAM、インベントリ）に取得し、アクセスを調整し、構成を生成して展開することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事では、DCのインベントリおよびIPスペース管理システムであるNetboxを扱います。</font></font><br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ありがとう</font></font></h1><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrey Glazkov別名@glazgoo校正と編集</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander Klimenko別名@ v00lk校正および編集用</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KDPVのArtyom Chernobay</font></font></li>
</ul><br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja475600/index.html">プロメテウスとのつながり方</a></li>
<li><a href="../ja475604/index.html">Zabbix 4.4での公式PostgreSQLテンプレートの設定</a></li>
<li><a href="../ja475608/index.html">Googleタグマネージャー：わかりにくい、便利なトリガー設定</a></li>
<li><a href="../ja475610/index.html">視覚を保持する安全なLEDテーブルランプ</a></li>
<li><a href="../ja475612/index.html">与えられたとき、主張と実装の信頼性</a></li>
<li><a href="../ja475618/index.html">OntologyネットワークでスマートPythonコントラクトを作成する方法。パート2：ストレージAPI</a></li>
<li><a href="../ja475622/index.html">Unreal Engine 4でUObjectを拡張する</a></li>
<li><a href="../ja475624/index.html">PHP-Watcher：長寿命のアプリケーションの開発を簡素化するツール</a></li>
<li><a href="../ja475626/index.html">脆弱性を探す人を自動テストで置き換えることができますか：Alexandra Svatikovaへのインタビュー</a></li>
<li><a href="../ja475630/index.html">Knative-サーバーレスサポートを備えたサービスとしてのk8sベースのプラットフォーム</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>