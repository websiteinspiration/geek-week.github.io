<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’¶ ğŸ¥˜ ğŸ™ğŸ¿ .NET Coreã®HttpClientã®ä¿¡é ¼æ€§ã€ã¾ãŸã¯3è¡Œã®ã‚³ãƒ¼ãƒ‰ã‚’4å›é–“é•ãˆã‚‹æ–¹æ³•ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚ â—½ï¸ ğŸ––ğŸ¾ ğŸ¤¸ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2æœˆ14æ—¥ã®æ•°é€±é–“å‰ã€Dodo ISã‚·ã‚¹ãƒ†ãƒ ã¯è² è·ãŒã‹ã‹ã£ã¦å°‘ã—ã°ã‹ã’ãŸã€‚ç†ç”±ã®1ã¤ã¯ã€HttpClientï¼ˆå†è©¦è¡Œã€ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹æ”¿æ²»å®¶ãŒã€ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚µã‚¤ãƒˆã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§æ­£ã—ãæ©Ÿèƒ½ã—ãªã‹ã£ãŸã“ã¨ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒãƒªã‚·ãƒ¼ãŒèª¤ç”¨ã•ã‚ŒãŸå ´...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>.NET Coreã®HttpClientã®ä¿¡é ¼æ€§ã€ã¾ãŸã¯3è¡Œã®ã‚³ãƒ¼ãƒ‰ã‚’4å›é–“é•ãˆã‚‹æ–¹æ³•ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/503376/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2æœˆ14æ—¥ã®æ•°é€±é–“å‰ã€Dodo ISã‚·ã‚¹ãƒ†ãƒ ã¯è² è·ãŒã‹ã‹ã£ã¦å°‘ã—ã°ã‹ã’ãŸã€‚</font><font style="vertical-align: inherit;">ç†ç”±ã®1ã¤ã¯ã€HttpClientï¼ˆå†è©¦è¡Œã€ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹æ”¿æ²»å®¶ãŒã€ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚µã‚¤ãƒˆã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§æ­£ã—ãæ©Ÿèƒ½ã—ãªã‹ã£ãŸã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒãƒªã‚·ãƒ¼ãŒèª¤ç”¨ã•ã‚ŒãŸå ´åˆã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹æ½œåœ¨çš„ãªå•é¡Œã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font></font></p><br>
<p><img src="https://habrastorage.org/webt/gz/u2/xb/gzu2xbvt_zcspnsod3ixsbwsaoc.png"></p><a name="habracut"></a><br>
<h2 id="politiki-httpclienta-i-nadyozhnost-zaprosov"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClientãƒãƒªã‚·ãƒ¼ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ä¿¡é ¼æ€§</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ãšã€ç°¡å˜ãªç´¹ä»‹ï¼šã©ã®ã‚ˆã†ãªç¨®é¡ã®ã€ŒHttpClient'aä¸Šã®ãƒãƒªã‚·ãƒ¼ã€ã«ã¤ã„ã¦è©±ã—ã¦ã„ã‚‹ã®ã‹ã€ãã—ã¦ãªãœãã‚Œã‚‰ãŒå¿…è¦ãªã®ã‹ï¼Ÿ</font></font></p><br>
<p>,  <em></em>  -    <em>B</em>   http-.  ,  â€”  ,      .    ,            <em>B</em>. </p><br>
<p>   <em>B</em>      <em>B</em>   ,          .  -    ,     . </p><br>
<ol>
<li><strong>Retry policy</strong> â€”  ,        ,    .  :  -   ,     ? </li>
<li> ,       <em>B</em>,    ,  <strong> </strong>. </li>
<li><strong>Circuit Breaker</strong> â€”    ,        - ,    ,    ( . ).</li>
</ol><br>
<p>       HttpClientâ€™.     ,       - .</p><br>
<h4 id="spasibo-polly-za-nashe-schastlivoe-detstvo"> Polly    </h4><br>
<p>  .NET      .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Polly</a>,     .   ,   ,   HttpClient,    . ,   ,    .</p><br>
<p>     ,         ,       ,     .  , ,     .</p><br>
<h2 id="kak-oshibitsya-v-3-strokah-koda-4-raza">   3   4 </h2><br>
<p>    ?  ,   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  HttpClient,   .   ,    HttpClient   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.i">IHttpClientBuilder</a>â€™      .</p><br>
<pre><code class="cs hljs">clientBuilder<font></font>
    .AddRetryPolicy(settings.RetrySettings)<font></font>
    .AddCircuitBreakerPolicy(settings.CircuitBreakerSettings)<font></font>
    .AddTimeoutPolicy(settings.TimeoutPerTry);</code></pre><br>
<p>       .   ,       ,     .  4 .</p><br>
<h2 id="retry-policy">Retry policy</h2><br>
<p>   .      :         ,   Â«Â» (         ),      .    Polly  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>     . </p><br>
<p>     ?   ,       ,      .   ,     .</p><br>
<h4 id="kakie-otvety-ot-servera-nuzhno-retrait">     </h4><br>
<p>   ,       . ,     best practices   ,  ,        (transient errors). </p><br>
<p> Polly         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/App-vNext/Polly/wiki/Polly-and-HttpClientFactory&amp;usg=ALkJrhhUi_R8Dfvu0T-njmV7v6P-RKyJnQ#using-addtransient">  </a>.   :</p><br>
<ul>
<li> 5xx  (server errors); </li>
<li> 408 (request timeout). </li>
</ul><br>
<p>    ,  5xx        (   !).     ,  -  ,   ,    . </p><br>
<p>      ,     :</p><br>
<p>â€“      500 (Internal Server Error)?<br>
â€“ , .</p><br>
<p>   500   .           500?    â€”      NullReferenceException (NRE)     .   ,     NRE.   -  ,   - N-      ?</p><br>
<p>,    NRE   ,   â€”  ,   .          500,     .</p><br>
<h4 id="kakie-intervaly-nuzhny-mezhdu-povtornymi-zaprosami">     </h4><br>
<p>,    .    ?         .    ,       .      .</p><br>
<p>   : </p><br>
<ol>
<li><p><strong>    </strong>, ,   20 ms.   â€”   ,       .  ,    ,           .  ,    ,       - 503? ,    ,    .      ,    ,     ,    .</p><br>
</li>
<li><p>     <strong>    </strong>. ,      :</p><br>
<pre><code class="cs hljs">initialValue * Math.Pow(<span class="hljs-number">2</span> * i)</code></pre><br>
<p> <code>initialValue</code> â€”   , , 20 ms,  <code>i</code> â€”  .<br>
    ,     . ,                ,     .          ,     . </p><br>
</li>
<li><p> -    ,      <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">jitter</a></strong>.   Â«Â»          ,     .  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  Polly. </p><br>
<blockquote><em>  ,   ,         <code>DecorrelatedJitterBackoffV2</code>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a> â€”      Dodo.</em></blockquote><br>
</li>
</ol><br>
<h4 id="gde-tut-mozhno-oshibitsya-sluchay-iz-zhizni">   ?   </h4><br>
<p>      .        .     :</p><br>
<pre><code class="cs hljs">â€¦
<span class="hljs-keyword">var</span> delay = Backoff.DecorrelatedJitterBackoffV2(<font></font>
    medianFirstRetryDelay: TimeSpan.FromSeconds(medianFirstRetryDelayInSeconds),<font></font>
    retryCount: count<font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">return</span> FailurePolicyBuilder.WaitAndRetryAsync(<font></font>
    delay,<font></font>
    onRetry: (exception, retryCount) =&gt; { â€¦ });</code></pre><br>
<p>  ,  <code>DecorrelatedJitterBackoffV2</code>   <code>IEnumerable&lt;TimeSpan&gt;</code>.           <code>WaitAndRetryAsync</code>. </p><br>
<p><code>DecorrelatedJitterBackoffV2</code>           .        <code>delay</code>.         ,           .      ,            .       ,  :</p><br>
<pre><code class="cs hljs">Func&lt;IEnumerable&lt;TimeSpan&gt;&gt; delay = () =&gt; Backoff.DecorrelatedJitterBackoffV2(<font></font>
    medianFirstRetryDelay: TimeSpan.FromSeconds(medianFirstRetryDelayInSeconds),<font></font>
    retryCount: count);</code></pre><br>
<h4 id="nashe-reshenie"> </h4><br>
<p>  ,        :</p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IHttpClientBuilder <span class="hljs-title">AddRetryPolicy</span>(<span class="hljs-params">
    <span class="hljs-keyword">this</span> IHttpClientBuilder clientBuilder,
    IRetrySettings settings</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> clientBuilder<font></font>
        .AddPolicyHandler(HttpPolicyExtensions<font></font>
            .HandleTransientHttpError()<font></font>
            .Or&lt;TimeoutRejectedException&gt;()<font></font>
            .WaitAndRetryAsync(<font></font>
                settings.RetryCount,<font></font>
                settings.SleepDurationProvider,<font></font>
                settings.OnRetry));<font></font>
}</code></pre><br>
<p>, <code>SleepDurationProvider</code> â€”    ,     <code>Backoff.DecorrelatedJitterBackoffV2</code>   .</p><br>
<p>,     :      ,      408 (request timeout),        <code>TimeoutRejectedException</code>?      ,     TimeoutPolicy.</p><br>
<h2 id="circuit-breaker-policy">Circuit Breaker policy</h2><br>
<p> Circuit Breakerâ€™ (CB)     .   :    -  ,     ,        Â« Â», ..         .       .       ,         ,       . </p><br>
<p>      ,        - .    . </p><br>
<p> CB â€”       .      -    , CB         .</p><br>
<p>    Polly     CircuitBreakerâ€™: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.     ,   CB,        .         CB.   ,         .</p><br>
<h4 id="gde-tut-mozhno-oshibitsya-sluchay-iz-zhizni-1">   ?   </h4><br>
<p>    ,     .    :</p><br>
<pre><code class="cs hljs">clientbuilder<font></font>
    .AddPolicyHandler(policySelector: (serviceProvider, _) =&gt; <font></font>
        FailurePolicyBuilder.AdvancedCircuitBreakerAsync( ... ));</code></pre><br>
<p> <code>AddPolicyHandler</code>    ,  selector,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,    CB. </p><br>
<p>   ,       , CB   ,   ,   .          ,     .   ,  ,   CB   . , ,   CB   .      :       <code>AddPolicyHandler</code>  .</p><br>
<h4 id="nashe-reshenie-1"> </h4><br>
<p>     ,    :</p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IHttpClientBuilder <span class="hljs-title">AddCircuitBreakerPolicy</span>(<span class="hljs-params">
    <span class="hljs-keyword">this</span> IHttpClientBuilder clientBuilder,
    ICircuitBreakerSettings settings</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> clientBuilder.AddPolicyHandler(BuildCircuitBreakerPolicy(settings));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> AsyncCircuitBreakerPolicy&lt;HttpResponseMessage&gt; <span class="hljs-title">BuildCircuitBreakerPolicy</span>(<span class="hljs-params">
    ICircuitBreakerSettings settings</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> HttpPolicyExtensions<font></font>
        .HandleTransientHttpError()<font></font>
        .Or&lt;TimeoutRejectedException&gt;()<font></font>
        .OrResult(r =&gt; r.StatusCode == (HttpStatusCode) <span class="hljs-number">429</span>) <span class="hljs-comment">// Too Many Requests</span><font></font>
        .AdvancedCircuitBreakerAsync(<font></font>
            settings.FailureThreshold,<font></font>
            settings.SamplingDuration,<font></font>
            settings.MinimumThroughput,<font></font>
            settings.DurationOfBreak,<font></font>
            settings.OnBreak,<font></font>
            settings.OnReset,<font></font>
            settings.OnHalfOpen);<font></font>
}</code></pre><br>
<p>   ,   ,    ,    <em>Too Many Requests</em> (429).     ,       ,              .</p><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">:        </b>
                        <div class="spoiler_text"><p>    ,         ,     . </p><br>
<p><img src="https://habrastorage.org/webt/x7/ts/sj/x7tssj9mvkaqtp9c1x8gb7piiky.png"><br>
<em>. 1.         </em></p><br>
<p>    :    country agnostic    (),       .       ().    country specific       (.  1). </p><br>
<p>  ,    -  -       ,  CB     .      CB  ,         .    ,    -     ,    ,   CB .   .    Polly  <code>PolicyRegistry</code>,     <code>ConcurrentDictionary</code>.     :</p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IHttpClientBuilder <span class="hljs-title">AddHostSpecificCircuitBreakerPolicy</span>(<span class="hljs-params">
    <span class="hljs-keyword">this</span> IHttpClientBuilder clientBuilder,
    ICircuitBreakerSettings settings</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> registry = <span class="hljs-keyword">new</span> PolicyRegistry();
    <span class="hljs-keyword">return</span> clientBuilder.AddPolicyHandler(message =&gt;<font></font>
    {<font></font>
         <span class="hljs-keyword">var</span> policyKey = message.RequestUri.Host;
         <span class="hljs-keyword">var</span> policy = registry.GetOrAdd(policyKey, BuildCircuitBreakerPolicy(settings));
         <span class="hljs-keyword">return</span> policy;<font></font>
     });<font></font>
}</code></pre><br>
<p><code>BuildCircuitBreakerPolicy</code>  ,    .   <code>AddPolicyHandler</code>    .       ,       <code>PolicyRegistry</code>      ,      .</p><br>
<p>       â€”       HttpClient.          .</p></div>
                    </div><br>
<h2 id="timeout-policy">Timeout policy</h2><br>
<p>  ,  ,  , . </p><br>
<ol>
<li><strong>   .</strong>   ,        .     â€”     . </li>
<li><strong>     .</strong> ,            30 .   ,     ,  CB  .   30     ,  ,   .    ,       . </li>
<li>  <strong>HttpClient    </strong>,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://docs.microsoft.com/en-us/dotnet/api/system.net.http.">100 </a>.</li>
</ol><br>
<p>Polly, , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>    .          ,    .    ,    <code>TimeoutRejectedException</code>.      ,          ,   CB. </p><br>
<p>HttpClient        â€” <code>TaskCancelledException</code>.   ,             ,      .</p><br>
<p>    ,    :    ,    .            ,        ,  .</p><br>
<h4 id="nashe-reshenie-2"> </h4><br>
<p>           +     HttpClientâ€™.     :</p><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IHttpClientBuilder <span class="hljs-title">AddTimeoutPolicy</span>(<span class="hljs-params">
    <span class="hljs-keyword">this</span> IHttpClientBuilder httpClientBuilder,
    TimeSpan timeout</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> httpClientBuilder.AddPolicyHandler(<font></font>
        Policy.TimeoutAsync&lt;HttpResponseMessage&gt;(timeout));<font></font>
}</code></pre><br>
<p>      : ,     .      408 (Request Timeout).     ,        .  408    ,           .      (transient) ,     .</p><br>
<h2 id="poryadok-imeet-znachenie">  </h2><br>
<p>,      ,   ,   .        ,     .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,   ,   ,    <em>A</em>,  <em>B</em>,  <em>C</em>,     : <em>C</em> -&gt; <em>B</em> -&gt; <em>A</em> (. . 2).  ,         .</p><br>
<p><img src="https://habrastorage.org/webt/ea/kx/sd/eakxsd9joazmudfhxe0ykfhlely.png"><br>
<em>. 2.      </em></p><br>
<p>,    CB    ,    (WaitAndRetry),   CB    ,     . ,    CB     ,       CB      ,     .</p><br>
<p>    ,        .  . 2      (Timeout Per Try)    (Overall Timeout),     .          ,   , ,   ,     .</p><br>
<h2 id="idempotentnost-i-podvodnye-kamni">   </h2><br>
<p>            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> . </p><br>
<blockquote><strong></strong> ,           ,       ,      .  ,         . </blockquote><p>    REST,     POST ,        ,      ,         . </p><br>
<p>       ?   ,     .  ,    , , ,     ,    ,       .    ,       . </p><br>
<p> ,       ,             ,         .  ,         .         ,    .     .</p><br>
<p>    â€”       .  ,        â€”   ,     .     ,  ,     ,     2 ,         - ,    ,        . </p><br>
<p>  Â« Â»   ,    -  ,    .     , , , ,       .</p><br>
<h2 id="nasha-open-source-biblioteka"> open-source </h2><br>
<p> ,    .      ,         .      ,    (,        ). ,          :</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> Dodo.HttpClient.ResiliencePolicies;<font></font>
â€¦<font></font>
<font></font>
<span class="hljs-comment">//    ,     :)</span><font></font>
clientBuilder<font></font>
    .AddDefaultPolicies();<font></font>
<font></font>
<span class="hljs-comment">//           </span>
<span class="hljs-keyword">var</span> settings = <span class="hljs-keyword">new</span> HttpClientSettings(â€¦);<font></font>
clientBuilder<font></font>
    .AddDefaultPolicies(settings);</code></pre><br>
<p>    Polly      .         .     -   (       Polly),        HttpClient  .</p><br>
<h3 id="proekt-dodo-open-source"> Dodo Open Source</h3><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>    ,     Open Source,        .        â€”     .           HttpClientâ€™.</p><br>
<p>  <strong>Dodo.HttpClient.ResiliencePolicies</strong>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/dodopizza/">GitHub</a>.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">NuGet-</a>.</p><br>
<p>   ,      . , ,        ,    Issues  PR . </p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>,    ?     HttpClientâ€™,     .  , 14    ,    369   .     ,           .  ,      ,    ,        Open Source.    ,       . ! </p><br>
<h2 id="poleznye-ssylki"> </h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Cloud Design Patterns</a> â€“      Microsoft,            .</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Polly</a>.</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/dodopizza/">Dodo.HttpClient.ResiliencePolicies</a>.</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503364/index.html">HandsAppMVPï¼šã‚¹ã‚¿ã‚¸ã‚ªé–‹ç™ºã‚¢ã‚¦ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã®ãŸã‚ã®iOSã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</a></li>
<li><a href="../ja503366/index.html">ãƒ€ãƒƒã‚·ãƒ¥ãŒå•é¡Œã«ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿã¾ãŸã¯SQLã§ã®ãƒ‡ãƒ¼ã‚¿ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«é–¢ã™ã‚‹å•é¡Œ</a></li>
<li><a href="../ja503368/index.html">ã‚®ã‚¬ãƒ³ãƒˆãƒãƒ‹ã‚¢ï¼šãªãœç¾ä»£ã®ã‚²ãƒ¼ãƒ ã¯ãã‚“ãªã«é‡ã„ã®ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja503370/index.html">ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã«ã¯ï¼ŸVeeamã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³</a></li>
<li><a href="../ja503372/index.html">ã‚¤ãƒ¼ã‚µãƒªã‚¢ãƒ 2.0ã¯ã€ã‚¨ãƒ©ãƒ¼ã€å•é¡Œã€ç«¶åˆä»–ç¤¾ãŒåŸå› ã§å†ã³é…å»¶ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</a></li>
<li><a href="../ja503380/index.html">Celeryã‚’ä½¿ç”¨ã—ãŸDjangoã®éåŒæœŸã‚¸ãƒ§ãƒ–</a></li>
<li><a href="../ja503382/index.html">ãã‚Œã„ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã®ãƒ¬ãƒ¼ã‚­ã‚¦ã‚©ãƒ¼ã‚­ãƒ³ã‚°ã€ã¾ãŸã¯è¿‘ãã®Wi-Fiãƒ‡ãƒã‚¤ã‚¹ã®MACã‚¢ãƒ‰ãƒ¬ã‚¹ã®åé›†æ–¹æ³•</a></li>
<li><a href="../ja503386/index.html">ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ã‚³ãƒ¼ãƒå¥åº·ãªäºº</a></li>
<li><a href="../ja503388/index.html">ãƒ‘ãƒ‹ãƒƒã‚¯ã®ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ï¼šãƒ¢ã‚¹ã‚¯ãƒ¯ã®DITã¨ãƒ¢ã‚¹ã‚¯ãƒ¯-5æœˆ23æ—¥ã®å††å“ä¼šè­°</a></li>
<li><a href="../ja503390/index.html">ãªãœã‚¤ãƒ³ãƒ†ãƒ«ã¯ã‚¸ãƒ ãƒ»ã‚±ãƒ©ãƒ¼ã®å¤©æ‰ã®ãŸã‚ã«ãƒãƒƒãƒ—é–‹ç™ºã«è³­ã‘ã¦ã„ã‚‹ã®ã§ã™ã‹ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>