<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüë©‚Äçüë¶‚Äçüë¶ üîó üèπ Brotli Performance en el mundo real üë©‚Äçüë©‚Äçüëß‚Äçüë¶ üë® üëéüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una de las reglas m√°s fundamentales para desarrollar sitios web r√°pidos es optimizar sus recursos. Si estamos hablando de recursos de texto, sobre c√≥d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Brotli Performance en el mundo real</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499278/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una de las reglas m√°s fundamentales para desarrollar sitios web r√°pidos es optimizar sus recursos. Si estamos hablando de recursos de texto, sobre c√≥digo escrito en HTML, CSS y JavaScript, esto significa que estamos hablando de compresi√≥n de datos. </font><font style="vertical-align: inherit;">
El est√°ndar de facto para comprimir recursos de texto en la web es el m√©todo Gzip. Es decir, aproximadamente el 80% de los recursos comprimidos obtenidos durante las descargas del sitio se comprimen usando Gzip. Para comprimir el 20% restante de los recursos, se utiliza un algoritmo mucho m√°s nuevo: Brotli.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/f1/0c/go/f10cgoennqxp98xrt8hxus_wkii.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, estos 100% de los recursos comprimidos que entran en los navegadores cuando reciben respuestas a las solicitudes a los sitios no incluyen absolutamente todos los recursos. Todav√≠a hay muchos recursos que podr√≠an comprimirse, o que podr√≠an comprimirse. Pero estos recursos permanecen sin comprimir. Se pueden encontrar m√©tricas m√°s detalladas con respecto a la compresi√≥n en la secci√≥n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compresi√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del </font><font style="vertical-align: inherit;">recurso Web Almanac. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo de compresi√≥n gzip es incre√≠blemente eficiente. Todo el trabajo de Shakespeare en texto plano ocupa 5.3 MB. Y despu√©s de la compresi√≥n Gzip (nivel de compresi√≥n 6) ocupan solo 1.9 MB. Esto significa que el tama√±o del archivo en el que se almacenan estos datos ha disminuido en 2,8 veces. Al mismo tiempo, los datos no se pierden durante la compresi√≥n. ¬°Excelente!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A√∫n mejor, el grado de compresi√≥n de Gzip se ve afectado por la presencia de l√≠neas duplicadas en los archivos. Cuantas m√°s repeticiones en el texto, m√°s eficiente ser√° la compresi√≥n. Esto es muy bueno para la web, ya que el c√≥digo escrito en HTML, CSS y JS tiene una sintaxis uniforme y contiene muchas repeticiones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, aunque Gzip es un m√©todo de compresi√≥n muy eficiente, tambi√©n es bastante antiguo. Apareci√≥ en 1992 (lo que, por supuesto, ayuda a explicar su prevalencia generalizada). Despu√©s de 21 a√±os, en 2013, Google lanz√≥ Brotli, un nuevo algoritmo que promete niveles de compresi√≥n a√∫n m√°s altos que los que el m√©todo Gzip es capaz de hacer. Los mismos trabajos de Shakespeare de 5.2 MB de tama√±o se comprimen usando Brotli a un tama√±o de 1.7 MB (con un nivel de compresi√≥n de 6). Y esto ya significa una reducci√≥n de 3,1 veces en el tama√±o del archivo. Esto es incluso mejor que usar Gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">herramienta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para estimar el nivel de compresi√≥n de datos usando Gzip y Brotli, es probable que descubras que al comprimir algunos datos, Brotli es mucho m√°s eficiente que Gzip. </font><font style="vertical-align: inherit;">Por ejemplo, los datos de ReactDOM son un 27% m√°s peque√±os cuando se comprimen usando Brotli con un nivel de compresi√≥n m√°ximo (11) que cuando se usa Gzip con un nivel de compresi√≥n m√°ximo (9). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay una comparaci√≥n de la compresi√≥n Brotli con la compresi√≥n Gzip al procesar ReactDOM.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nivel de compresi√≥n</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tama√±o (en bytes)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eficiencia de compresi√≥n (en comparaci√≥n con los datos sin comprimir)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% De mejora sobre Gzip</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,73</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39898</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.97</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">once%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39416</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quince%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38488</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quince%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36323</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diecinueve%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36048</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veinte%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7 7</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35804</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.31</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veinte%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35709</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.32</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 9</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35659</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33590</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,53</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">once</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33036</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,59</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, en todos los niveles de compresi√≥n, Brotli evita Gzip. Con el nivel de compresi√≥n m√°ximo disponible con Brotli, es un 27% m√°s eficiente que Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y, en base a la observaci√≥n personal, observo que la transici√≥n de uno de mis clientes de Gzip a Brotli condujo a una reducci√≥n media en el tama√±o de los archivos en un 31%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, en los √∫ltimos a√±os, junto con otros expertos en rendimiento, he estado alentando a los clientes a cambiar de Gzip a Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dir√© algunas palabras sobre la compatibilidad del navegador para Gzip y Brotli. Gzip est√° tan extendido que CanIUse ni siquiera muestra una tabla con informaci√≥n de soporte. Lo dice as√≠: "Este encabezado HTTP es compatible con casi todos los navegadores (comenzando con IE6 +, Firefox 2+, Chrome 1+, etc.)". Y Brotli, mientras escribe este material, disfruta de un nivel de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">apoyo</font></a><font style="vertical-align: inherit;"> muy agradable </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a 93.17%. ¬°Y esto es mucho, mucho! Por lo tanto, si su sitio tiene al menos un tama√±o significativo, es posible que no le guste particularmente el retorno de recursos sin comprimir a m√°s del 6% de sus usuarios. Pero usando Brotli, no perder√°s nada. Los clientes usan un modelo progresivo de soporte para nuevos algoritmos, por lo que los usuarios que no pueden aceptar los recursos de Brotli simplemente usar√°n la opci√≥n de respaldo en forma de Gzip. Hablaremos m√°s sobre esto a continuaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, especialmente si usa CDN, encender Brotli es cuesti√≥n de segundos. </font><font style="vertical-align: inherit;">Al menos este es el caso con Cloudflare, el servicio que uso para el sitio CSS Wizardry. </font><font style="vertical-align: inherit;">Sin embargo, muchos de mis clientes, si hablamos de los √∫ltimos a√±os, no tienen tanto √©xito. </font><font style="vertical-align: inherit;">Algunos de ellos soportan su propia infraestructura, y la pr√°ctica muestra que instalar e implementar Brotli no es tan simple. </font><font style="vertical-align: inherit;">Algunos usan servicios CDN que no difieren en capacidades f√°cilmente accesibles para admitir el nuevo algoritmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En aquellos casos en que no pod√≠amos cambiar a Brotli, siempre ten√≠amos una pregunta sin respuesta: "¬øQu√© pasar√≠a si ...?". </font><font style="vertical-align: inherit;">Como resultado, finalmente decid√≠ armarme con n√∫meros y dar una respuesta a la pregunta de qu√© le da al sitio la transici√≥n a Brotli.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menos no es necesariamente m√°s r√°pido.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, "menos", sin embargo, significa "m√°s r√°pido". </font><font style="vertical-align: inherit;">Como regla general, si reduce el tama√±o del archivo, se transferir√° m√°s r√°pido del servidor al cliente. </font><font style="vertical-align: inherit;">Pero si crea un archivo, digamos, un 20% m√°s peque√±o, esto no significa que llegar√° un 20% m√°s r√°pido. </font><font style="vertical-align: inherit;">El punto aqu√≠ es que el tama√±o del archivo es solo un aspecto del rendimiento web. </font><font style="vertical-align: inherit;">Y sea cual sea el tama√±o del archivo, el recurso entregado al navegador est√° asociado con muchos otros factores y con muchas limitaciones del sistema: retrasos en la red, p√©rdida de paquetes y similares. </font><font style="vertical-align: inherit;">En otras palabras, ahorrar en el tama√±o del archivo ayuda a transferir los mismos datos que antes, enviando menos paquetes, pero la transferencia de datos entre el servidor y el cliente est√° limitada por demoras en la red, como resultado, la velocidad con la que los paquetes que llegan al cliente ser√° menor no cambiar√°.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP, paquetes, retraso de ida y vuelta</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si es muy simplista considerar transferir archivos del servidor al cliente, tendremos que echar un vistazo al protocolo TCP. Cuando recibimos un archivo del servidor, no nos llega de una vez. El protocolo TCP, sobre el cual funciona HTTP, divide los archivos en segmentos llamados paquetes. Estos paquetes se env√≠an al cliente en orden, en secuencia. El cliente confirma la recepci√≥n de cada paquete de la serie antes de comenzar la transferencia de la siguiente serie. Esto sucede hasta que el cliente recolecta todos los paquetes necesarios, hasta que no haya paquetes no enviados en el servidor y hasta que el cliente pueda recolectar los paquetes en algo que pueda reconocerse como un archivo. Para que la sesi√≥n de transferencia de secuencia de paquetes se complete con √©xito, el servidor debe enviarlos al cliente, y el cliente debe acusar recibo. Hora,La cantidad de datos necesarios para recibir datos y recibir la confirmaci√≥n de recepci√≥n se denomina Tiempo de ida y vuelta (RTT).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada nueva conexi√≥n TCP no puede saber cu√°l es el ancho de banda disponible y qu√© tan confiable es la conexi√≥n (es decir, cu√°l es el nivel de p√©rdida de paquetes). Si el servidor intenta enviar megabytes de datos a trav√©s de una conexi√≥n que admite una velocidad de transferencia de datos de un megabit por segundo, dicha transferencia abrumar√° la conexi√≥n y provocar√° una sobrecarga del canal de comunicaci√≥n. Y viceversa: si el servidor intenta transferir una peque√±a cantidad de datos a trav√©s de una conexi√≥n muy r√°pida, la conexi√≥n se utilizar√° de manera ineficiente, estar√° inactiva.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver este rompecabezas, TCP utiliza un mecanismo llamado inicio lento. </font><font style="vertical-align: inherit;">Esto es parte de la estrategia de gesti√≥n de la ventana de sobrecarga. </font><font style="vertical-align: inherit;">Cada nueva conexi√≥n TCP est√° limitada por la capacidad de enviar solo 10 paquetes de datos en la primera secuencia de paquetes (10 paquetes, el tama√±o de la ventana de congesti√≥n inicial). </font><font style="vertical-align: inherit;">Diez segmentos TCP son aproximadamente 14 KB de datos. </font><font style="vertical-align: inherit;">Si el cliente recibe con √©xito estos paquetes, la segunda serie ya contendr√° 20 paquetes, entonces habr√° 40, 80, 160 y as√≠ sucesivamente. </font><font style="vertical-align: inherit;">El crecimiento exponencial de los paquetes en secuencias continuar√° hasta que ocurra uno de los siguientes eventos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sistema enfrentar√° la p√©rdida de paquetes. </font><font style="vertical-align: inherit;">En este punto, el servidor reducir√° el n√∫mero de paquetes en la siguiente secuencia, dividiendo el n√∫mero anterior de paquetes por 2, e intentar√° transferir los datos nuevamente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hemos alcanzado el l√≠mite del ancho de banda disponible y podemos usarlo a plena capacidad.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta estrategia simple y elegante le permite equilibrarse al borde de la precauci√≥n y el optimismo. </font><font style="vertical-align: inherit;">Se aplica a cada nueva conexi√≥n TCP establecida por la aplicaci√≥n web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En palabras simples, el tama√±o inicial de la ventana de congesti√≥n de la nueva conexi√≥n TCP es de solo 14 Kb. </font><font style="vertical-align: inherit;">O aproximadamente el 11.8% de los datos de ReactDOM sin comprimir. </font><font style="vertical-align: inherit;">O 36.94% de los datos comprimidos usando Gzip, o 42.38% de los datos comprimidos usando Brotli (en el nivel de compresi√≥n m√°ximo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego disminuiremos la velocidad. </font><font style="vertical-align: inherit;">¬°La transici√≥n del 11.8% al 36.94% ya es una mejora muy notable! </font><font style="vertical-align: inherit;">Pero la transici√≥n de 36.94% a 42.38%, esto est√° lejos de ser tan impresionante. </font><font style="vertical-align: inherit;">¬øQu√© esta pasando?</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero de sesi√≥n de datos</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La cantidad de datos transferidos en una sesi√≥n, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cantidad acumulada de datos transferidos, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La secuencia en la que se transfieren los datos de ReactDOM</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gzip (37.904 Kb), Brotli (33.036 Kb)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">98</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">210</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opci√≥n sin comprimir (118.656 Kb)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">224</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">434</font></font></td>
<td></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que tanto los datos comprimidos con Gzip como los datos comprimidos con Brotli se transmiten en la misma serie de paquetes. </font><font style="vertical-align: inherit;">La transferencia de un archivo requiere dos secuencias. </font><font style="vertical-align: inherit;">Si el RTT resulta ser bastante uniforme cuando se transmiten todas las secuencias, esto significa que lleva el mismo tiempo transmitir datos comprimidos usando Gzip y Brotli. </font><font style="vertical-align: inherit;">Por otro lado, la transferencia de una versi√≥n sin comprimir de datos requiere cuatro series de paquetes, no dos. </font><font style="vertical-align: inherit;">Y esto, especialmente en conexiones con altas latencias de red, puede resultar en un tiempo bastante notable requerido para la transferencia de datos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ tiendo al hecho de que la velocidad de transferencia de datos depende no solo del tama√±o de los archivos. Est√° influenciado por las caracter√≠sticas del funcionamiento del protocolo TCP. No solo necesitamos hacer los archivos m√°s peque√±os. Necesitamos hacerlos mucho m√°s peque√±os, llev√°ndolos a un tama√±o que les permita ser transmitidos en menos secuencias de paquetes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto significa, en teor√≠a, que para que el algoritmo de Brotli sea notablemente m√°s eficiente que Gzip, debe poder comprimir los datos de manera mucho m√°s agresiva. Esto es necesario para que los datos puedan transmitirse en menos secuencias de paquetes que cuando se usa Gzip. Y no s√© c√≥mo se desarrollar√° este algoritmo ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale la pena se√±alar que el modelo anterior est√° bastante simplificado. Hay muchos otros factores a considerar. Por ejemplo, ¬øes una conexi√≥n TCP nueva o ya abierta? ¬øSe est√° utilizando la conexi√≥n para otra cosa? ¬øEst√°n los mecanismos de priorizaci√≥n del tr√°fico del servidor deteniendo e iniciando la transferencia de datos? ¬øLas transmisiones H / 2 tienen acceso exclusivo al ancho de banda? Esta secci√≥n es un estudio m√°s serio. Debe considerarse como un buen punto de partida para su propia investigaci√≥n. Pero considere analizar a fondo los datos utilizando algo como Wireshark, y lea </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> material, que proporciona una descripci√≥n m√°s profunda de la "magia" de los primeros 14 Kb.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo anterior se aplica solo a las nuevas conexiones TCP. </font><font style="vertical-align: inherit;">Los archivos transferidos a trav√©s de una conexi√≥n existente no pasar√°n por el procedimiento de inicio lento. </font><font style="vertical-align: inherit;">Esto nos lleva a dos conclusiones importantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No creo que valga la pena repetirlo, pero lo repetir√©: los recursos est√°ticos deben ser alojados. </font><font style="vertical-align: inherit;">Esta es una excelente manera de evitar retrasos de inicio lento, ya que el uso de su propio servidor, ya "calentado", significa que los paquetes que salen de este servidor tienen acceso a un ancho de banda m√°s amplio. </font><font style="vertical-align: inherit;">Esta conclusi√≥n me lleva a la segunda conclusi√≥n.</font></font></li>
<li> ,              ,    .       ,            .    .</li>
</ol><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong>   </strong></td>
<td><strong> ,    , </strong></td>
<td><strong>   , </strong></td>
</tr>
<tr>
<td>1</td>
<td>14</td>
<td>14</td>
</tr>
<tr>
<td>2</td>
<td>28</td>
<td>42</td>
</tr>
<tr>
<td>3</td>
<td>56</td>
<td>98</td>
</tr>
<tr>
<td>4</td>
<td>112</td>
<td>210</td>
</tr>
<tr>
<td>5</td>
<td>224</td>
<td>434</td>
</tr>
<tr>
<td>6</td>
<td>448</td>
<td>882</td>
</tr>
<tr>
<td>7</td>
<td>896</td>
<td>1778</td>
</tr>
<tr>
<td>8</td>
<td>1792</td>
<td>3570</td>
</tr>
<tr>
<td>9</td>
<td>3584</td>
<td>7154</td>
</tr>
<tr>
<td>10</td>
<td>7168</td>
<td>14322</td>
</tr>
<tr>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
<tr>
<td>20</td>
<td>7340032</td>
<td>14680050</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final de la d√©cima sesi√≥n de transferencia de datos, la cantidad de datos transferidos en una sesi√≥n es de 7168 Kb, mientras que, en total, 14322 Kb de datos ya se han transferido. </font><font style="vertical-align: inherit;">Esto es m√°s que suficiente para el trabajo ordinario en Internet (es decir, no para ver Game of Thrones). </font><font style="vertical-align: inherit;">De hecho, generalmente sucede que cargamos toda la p√°gina web y todos sus recursos sin siquiera alcanzar el l√≠mite de nuestro ancho de banda. </font><font style="vertical-align: inherit;">En otras palabras, el uso de un canal de comunicaci√≥n de fibra √≥ptica de 1 Gbit / s (es decir, 0,125 GB / s) no har√° que la navegaci√≥n normal parezca mucho m√°s r√°pida que usar una conexi√≥n m√°s lenta, ya que la mayor√≠a de este canal ni siquiera se utilizar√°.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y para la vig√©sima sesi√≥n de transferencia de datos, te√≥ricamente transferimos 7.34 GB de datos en una secuencia de paquetes.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© hay del mundo real?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, nos hemos involucrado en consideraciones te√≥ricas. </font><font style="vertical-align: inherit;">Y comenc√© a trabajar en este material debido al hecho de que me gustar√≠a saber sobre el impacto que Brotli puede tener en sitios reales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, los n√∫meros dados aqu√≠ han se√±alado la gran diferencia entre la falta de compresi√≥n y el uso de Gzip, y el hecho de que la ganancia de usar Brotli, en comparaci√≥n con Gzip, es bastante modesta. </font><font style="vertical-align: inherit;">Esto nos dice que la transici√≥n de la falta de compresi√≥n al uso de Gzip dar√° una mejora notable, mientras que la transici√≥n de Gzip a Brotli probablemente parezca mucho menos impresionante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccion√©, como ejemplos, varios sitios, guiados por las siguientes consideraciones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sitio debe ser relativamente conocido (es mejor usar sitios que se puedan comparar con algo).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sitio debe ser adecuado para la prueba. </font><font style="vertical-align: inherit;">Es decir, debe ser de un tama√±o adecuado (por lo que ser√° m√°s interesante analizar sus materiales para la compresi√≥n) y, al mismo tiempo, no debe contener principalmente materiales que no est√©n comprimidos con Gzip / Brotli, como, por ejemplo, YouTube.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No todos los sitios de la colecci√≥n deber√≠an pertenecer a grandes corporaciones (vale la pena analizar algunos, digamos, sitios "regulares").</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teniendo en cuenta estos requisitos, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seleccion√© los</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sitios enumerados a continuaci√≥n y comenc√© a probar. </font><font style="vertical-align: inherit;">Aqu√≠ est√°n los sitios que seleccion√©:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m.facebook.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.linkedin.com</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.insider.com</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yandex.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.esedirect.co.uk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.story.one</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.cdm-bedrijfskleding.nl</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.everlane.com</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No quer√≠a complicar las pruebas, as√≠ que me decid√≠ por los siguientes indicadores:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La cantidad de datos transferidos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primer tiempo de pintura contenta (FCP).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se analizaron en las siguientes situaciones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falta de compresi√≥n.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando gzip.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando brotli.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©trica FCP se ve cercana al mundo real y lo suficientemente universal como para su aplicaci√≥n en cualquier sitio, ya que le permite evaluar lo que la gente necesita de los sitios web, es decir, el contenido de estos sitios. </font><font style="vertical-align: inherit;">Adem√°s, eleg√≠ esta m√©trica porque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Calvano</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , una persona inteligente, dijo esto: "La experiencia me dice que el uso de Brotli conduce a un FCP mejorado, especialmente cuando los recursos cr√≠ticos de CSS / JS son grandes" .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pruebas</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Te dir√© un secreto sucio. Muchos estudios de rendimiento web (no todos, pero muchos) no se basan en investigaciones sobre mejoras de rendimiento, sino en sacar conclusiones de lo contrario, de la degradaci√≥n del rendimiento. Por ejemplo, la BBC es mucho m√°s f√°cil afirmar que "pierden el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10% de los usuarios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por cada segundo adicional que necesitan para cargar su sitio" que averiguar qu√© sucede gracias a una mejora de un segundo. Es mucho m√°s f√°cil ralentizar el sitio en lugar de acelerarlo, y tiene la sensaci√≥n de que es por eso que muchas personas hacen este trabajo tan bien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado esto, no intent√© descargar primero sitios que usan Gzip, y luego, sin conexi√≥n, comprimir sus contenidos de alguna manera usando Brotli. </font><font style="vertical-align: inherit;">En cambio, encontr√© sitios que usan Brotli, y luego apagu√© la compresi√≥n. </font><font style="vertical-align: inherit;">Pas√© de Brotli a Gzip, y luego de Gzip a la no compresi√≥n, midiendo c√≥mo funciona esto en el sitio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque, por ejemplo, no puedo conectarme al servidor Linkedin y desconectar Brotli, simplemente puedo acceder a este sitio desde un navegador que no es compatible con Brotli. </font><font style="vertical-align: inherit;">Aunque no puedo desactivar el soporte de Brotli en Chrome, puedo ocultar del servidor el hecho de que mi navegador es compatible con Brotli. </font><font style="vertical-align: inherit;">Los navegadores le dicen a los servidores qu√© algoritmos de compresi√≥n admiten utilizando el encabezado de solicitud</font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Con Webpagetest, puedo personalizar los encabezados yo mismo. </font><font style="vertical-align: inherit;">¬°Entonces, todo es muy simple!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3bb/295/390/3bb2953909f7cea0ac8970049f763638.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las funciones avanzadas de WebPageTest nos permiten configurar encabezados de solicitud personalizados.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
As√≠ es como configuro el campo Encabezados personalizados:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apagado completo de la compresi√≥n: </font></font><code>accept-encoding: randomstring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desactivaci√≥n Brotli, pero el soporte Gzip: </font></font><code>accept-encoding: gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para usar Brotli si este m√©todo de compresi√≥n es compatible con el sitio (y siempre que sea compatible con el navegador): el campo permanece vac√≠o.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede averiguar si esto funciona seg√∫n lo previsto al verificar la presencia (o ausencia) del encabezado </font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la respuesta del servidor.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se esperaba, la transici√≥n de la falta de compresi√≥n a Gzip signific√≥ una mejora significativa, pero la transici√≥n de Gzip a Brotli no parece tan impresionante. </font><font style="vertical-align: inherit;">Los datos sin procesar de mis experimentos se pueden encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Los siguientes son los hallazgos que m√°s me interesan:</font></font><br>
<br>
<ul>
<li>     Gzip     : 73%.</li>
<li>  FCP   Gzip     : 23.305%.</li>
<li>     Brotli    Gzip: 5.767%.</li>
<li>  FCP   Brotli    Gzip: 3.462%.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos estos son valores medios. </font><font style="vertical-align: inherit;">Hablando de "tama√±os de material", me refiero solo a HTML, CSS y JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias al uso de Gzip, los tama√±os de archivo se redujeron en un 73% en comparaci√≥n con sus versiones sin comprimir. </font><font style="vertical-align: inherit;">Y el uso de Brotli permiti√≥ reducir el tama√±o de los archivos solo en un 5.7% adicional. </font><font style="vertical-align: inherit;">Si hablamos de FCP, gracias a Gzip, este indicador mejor√≥ en un 23% en comparaci√≥n con la falta de compresi√≥n, y Brotli agreg√≥ solo un 3.5% adicional a esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque parece que tales resultados refuerzan la teor√≠a, hay varias formas de mejorar estos resultados. </font><font style="vertical-align: inherit;">El primero es probar un n√∫mero mucho mayor de sitios, me gustar√≠a discutir dos m√°s con m√°s detalle.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datos de recursos propios y datos de fuentes externas.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mis pruebas, apagu√© Brotli en todas partes, y no solo para los servidores que almacenan datos del sitio. </font><font style="vertical-align: inherit;">Esto significa que med√≠ no solo los beneficios que obtienen los sitios al usar Brotli, sino que, en t√©rminos de potencial, los beneficios que Brotli obtiene de las fuentes externas que usan estos sitios. </font><font style="vertical-align: inherit;">Esto cae dentro del alcance de nuestros intereses solo si los recursos de terceros se utilizan en las formas cr√≠ticas de los sitios bajo investigaci√≥n, pero vale la pena recordarlo.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveles de compresi√≥n</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hablando de compresi√≥n, a menudo discutimos los resultados obtenidos con el mejor escenario de aplicaci√≥n de compresi√≥n. Es decir, cuando usamos Gzip tenemos en cuenta el noveno nivel de compresi√≥n, y cuando usamos Brotli - 11 ¬∞ nivel. Sin embargo, es poco probable que el servidor bajo investigaci√≥n se configure de la manera m√°s √≥ptima. Por ejemplo, Apache usa compresi√≥n gzip de nivel 6, mientras que NGINX usa solo la primera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshabilitar Brotli significa que estamos cambiando a la opci√≥n de reserva, a Gzip, y dada la forma en que prob√© los sitios, no pude cambiar dicha configuraci√≥n de reserva ni actuar de alguna manera. Digo esto porque los materiales de los dos sitios en la prueba en realidad aumentaron de tama√±o cuando se activ√≥ Brotli. Esto me indica que el nivel de compresi√≥n Gzip fue tal que proporcion√≥ una compresi√≥n m√°s fuerte que el nivel de compresi√≥n Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elegir un nivel de compresi√≥n es un compromiso. </font><font style="vertical-align: inherit;">A todos les gustar√≠a pedir el m√°s alto nivel de compresi√≥n y, en este sentido, considerar el problema resuelto. </font><font style="vertical-align: inherit;">Pero este enfoque no es pr√°ctico. </font><font style="vertical-align: inherit;">El hecho es que el tiempo extra que necesitar√° el servidor para realizar din√°micamente esta compresi√≥n es muy probable que niegue los beneficios de un mayor nivel de compresi√≥n. </font><font style="vertical-align: inherit;">Para hacer frente a este problema, puede recurrir a lo siguiente:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede usar un nivel pragm√°tico de compresi√≥n que proporcione el equilibrio correcto de velocidad y eficiencia durante la compresi√≥n din√°mica de datos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede cargar recursos est√°ticos precomprimidos en el servidor, cuyo nivel de compresi√≥n es mayor que el utilizado para la compresi√≥n din√°mica. </font><font style="vertical-align: inherit;">En este caso, para seleccionar el nivel de compresi√≥n din√°mica, puede usar la idea descrita en el primer p√°rrafo.</font></font></li>
</ol><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno tiene la impresi√≥n de que, razonando con sensatez, puede reconocer la insignificancia de las ventajas de Brotli sobre Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si habilitar el soporte de Brotli es cuesti√≥n de un par de movimientos del mouse en el panel de control de su CDN, entonces debe tomar Brotli y encenderlo ahora mismo. La compatibilidad con este algoritmo de compresi√≥n es lo suficientemente amplia, los navegadores que no son compatibles con Brotli cambian f√°cilmente a mecanismos de reserva, e incluso una ligera mejora es mejor que nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si es posible, cargue recursos est√°ticos precomprimidos en el nivel de compresi√≥n m√°ximo en los servidores. Y para la compresi√≥n din√°mica, no use los niveles de compresi√≥n m√°s altos, pero no los m√°s bajos. Si usa NGINX, aseg√∫rese de no estar usando el primer nivel de compresi√≥n est√°ndar para NGINX.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, si para usar Brotli, es posible que necesite semanas de desarrollo, prueba e implementaci√≥n, no se preocupe, solo aseg√∫rese de usar la compresi√≥n Gzip para todo lo que se puede comprimir (esto incluye, adem√°s de recursos de texto, archivos .ico y .ttf: si, por supuesto, se usan en su proyecto). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supongo que una versi√≥n corta de este art√≠culo podr√≠a verse as√≠: si no puede o no puede habilitar Brotli, no est√° perdiendo mucho. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPlaneas usar Brotli?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es499254/index.html">El miembro del comit√© del programa PyConRu 2020 responde preguntas sobre Python: una apariencia actualizada y un poco de an√°lisis</a></li>
<li><a href="../es499262/index.html">Hackathon final en l√≠nea para SMZhack aut√≥nomo: proyectos que afectar√°n a la gente</a></li>
<li><a href="../es499268/index.html">Conciencia espacial: ¬øqu√© pueden hacer las gafas Hololens?</a></li>
<li><a href="../es499272/index.html">Componentes de soldadura 0201. Nervioso, al√©jese de las pantallas</a></li>
<li><a href="../es499274/index.html">Desmontamos la nueva c√°psula. Sabemos cu√°ntos micr√≥fonos y c√≥mo funciona.</a></li>
<li><a href="../es499280/index.html">El precio de los marcos de JavaScript</a></li>
<li><a href="../es499286/index.html">Estudio: el comercio de acceso a la red corporativa est√° creciendo en el mercado negro</a></li>
<li><a href="../es499288/index.html">Todas las medidas para apoyar los negocios en relaci√≥n con el coronavirus. Parte 1</a></li>
<li><a href="../es499290/index.html">C√≥mo escribir un est√°ndar t√©cnico para la seguridad de la informaci√≥n para una gran empresa</a></li>
<li><a href="../es499296/index.html">Ingl√©s para demostraci√≥n (estructura, frases, preguntas y respuestas, gram√°tica, consejos)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>