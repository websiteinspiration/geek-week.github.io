<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>„Ä∞Ô∏è ‚ö´Ô∏è üßñ How much marketing is at ACID? üë¥üèº üë®üèΩ‚Äçüè´ üõåüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone. In touch Vladislav Rodin. Currently, I am the head of the High Load Architect course at OTUS, and I also teach courses on software arc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How much marketing is at ACID?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/494652/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello everyone. </font><font style="vertical-align: inherit;">In touch Vladislav Rodin. </font><font style="vertical-align: inherit;">Currently, I am the head of the High Load Architect course at OTUS, and I also teach courses on software architecture. </font></font></i><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to teaching, as you can see, I have been writing for a blog copyright material OTUS Habr√© and today's article I want to coincide with the start of the course </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Databases"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which now is open the set.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/iv/po/dw/ivpodwutiqb7mpd1iuwkdzyfg98.png"><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foreword</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transactions appeared in the 70s and were presented as a database tool to solve the problems of fault tolerance and data access in a competitive environment. Then a number of properties were formulated that a transaction must possess in order to fulfill the tasks assigned to it, and the capital letters of these properties, set in the right order, made up the beautiful acronym ACID.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The period of time during which these events took place was characterized by the absence of high loads, the Internet and performance problems, which could be solved only by vertical scaling methods. Subsequently, in the early 2000s, a trend appeared on NoSQL databases, the abbreviation BASE appeared, which was actually opposed to the classical ACID (ACID - acid, BASE - alkali). Now there is a reverse trend for ACID. Even NoSQL's MongoDB is now supporting ACID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at what this abbreviation means and how much marketing it has.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACID represents 4 properties: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A = atomicity </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C = consistency </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I = isolation </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D = durability </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's talk about each property separately.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A = atomicity</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atomicity is an overloaded term and in the context of transactions in a database can be formulated as the principle of "all or nothing." If your transaction contains 10 insert operations, then all 10 will be executed (commit transactions will be carried out), or none of them (rollback transactions will be carried out). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How is this property provided? The fact is that when a transaction containing the same 10 inserts comes to the database, the data does not begin to change. Before a transaction, the transaction is written directly to the data in a log, in which the changes made by it are recorded. This journal can also be used to replicate data, or it can be completely unrelated to it, as I talked about, for example, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Thanks to this journal, transactions can be committed directly to the data, or, in which case, rollback it. </font><font style="vertical-align: inherit;">The rule that a transaction should be closed as soon as possible follows directly from an understanding of the principles for implementing this property: databases are often forbidden to clean this log while a transaction is open, so it can become clogged, which, in turn, leads to very unpleasant consequences.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C = consistency (consistency or integrity)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In terms of ACID, consistency does not mean the same as in terms of the CAP theorem (in the theory of distributed systems, there are many degrees of this consistency). By consistency we mean the following: some predefined invariants of the system must be executed both before and after the commit transaction. Examples of system invariants can be represented: the debit converges with the loan, the total salary of employees does not exceed the budget, the number of employees in the company is equal to the number of previously opened vacancies, etc. In the database language, this means only the fulfillment of all constraints.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The question about the need for consistency at the database level is quite controversial, because the presence of constraints can indicate that part of the business logic has moved from the application to the database level, which is not universally recognized as good practice. </font><font style="vertical-align: inherit;">In the end, the application itself may decide not to commit invalid data. </font><font style="vertical-align: inherit;">There is an opinion that consistency was added only to make the abbreviation beautiful (marketing).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I = isolation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isolation is a database property that allows parallel transactions to be executed as sequential. After all, no one forbids the database to perform several transactions at the same time, it is necessary to make sure that they do not affect each other, so that anomalies of the race condition type do not occur. In fact, it is isolation that solves the problem of data access in a competitive environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The disclosure of the concept of isolation because of its volume deserves a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separate article.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, because it is precisely isolation that can be called the heart of ACID. </font><font style="vertical-align: inherit;">The price of transactionality often comes down to the price of ensuring isolation, which is why isolation has different levels, each of which provides its own level of protection against race conditions and carries one or another overhead. </font><font style="vertical-align: inherit;">Isolation is fully ensured only at the serializable level, which is very difficult to implement and which is rarely needed.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D = durability</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durability tells us that if a transaction has been applied, then by no means should it disappear. </font><font style="vertical-align: inherit;">In fact, this means the following: if the database responded that a transaction was committed, the transaction was committed to non-volatile memory. </font><font style="vertical-align: inherit;">This means that the fsync system call occurred, that is, the buffers were flushed to the hard drive, and it answered ok.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durability is also a marketing term, because it cannot be fully provided. Even if we discard the artificial scenarios of ‚Äúburning the Earth by aliens‚Äù, after which there will be no databases or transactions at all, more likely but extreme scenarios of physical destruction of a particular hard drive on which the transaction was recorded, we can recall that the fsync system call guarantees hitting a hard drive in the controller, which, in turn, still contains a volatile buffer. The time spent in it is short, but not equal to 0. As a result, if you turn off the electricity exactly at the ‚Äúright‚Äù moment, the transaction may still be lost!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although the problem with fsync has been solved in an expensive Oracle database, nothing can protect us from the problems associated with the physical destruction of the machine. </font><font style="vertical-align: inherit;">We can only increase guarantees using backups and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replication</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despite the fact that ACID provides quite interesting properties, such as atomicity and isolation, some of these properties are just marketing, and even known for its rigor compared to BASE, ACID does not fully ensure the absence of transaction loss opportunities, as well as the impact of results performing simultaneous transactions on each other (isolation must still be configured!).</font></font><br>
<hr><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We invite everyone to a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">free lesson</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on the topic: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"A model for working with data in PostgreSQL</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><i><font style="vertical-align: inherit;">"</font></i></b></font><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en494642/index.html">Karmic indicators</a></li>
<li><a href="../en494644/index.html">Automation of a journalist. Part 2. Working with speakers</a></li>
<li><a href="../en494646/index.html">The life of analytics lead or ‚ÄúI figured you would do it yourself‚Äù</a></li>
<li><a href="../en494648/index.html">We analyze the problems of GOST R 53894-2016 ‚ÄúKnowledge Management. Terms and Definitions"</a></li>
<li><a href="../en494650/index.html">Search for anagrams and sabanagrams in all words of the language</a></li>
<li><a href="../en494658/index.html">Using traits for polymorphic relationships in Laravel</a></li>
<li><a href="../en494660/index.html">CSS Houdini Tutorial</a></li>
<li><a href="../en494662/index.html">Our space - is it so bad?</a></li>
<li><a href="../en494664/index.html">How implementing security processes helps transition to remote work</a></li>
<li><a href="../en494666/index.html">Finds of an audio man: where to listen to the music of bygone eras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>