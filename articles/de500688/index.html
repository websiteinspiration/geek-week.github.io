<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèöÔ∏è üòÅ üêï Arbeiten mit einer Datenbank in Flask: von Juni bis Juni üñêüèΩ üë© ‚öæÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich wurde inspiriert, diesen Artikel zu schreiben, weil ich den gleichen Neulingen in Python im Allgemeinen helfen und mit Flask im Besonderen arbeite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Arbeiten mit einer Datenbank in Flask: von Juni bis Juni</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500688/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich wurde inspiriert, diesen Artikel zu schreiben, weil ich den gleichen Neulingen in Python im Allgemeinen helfen und mit Flask im Besonderen arbeiten wollte, wie ich selbst. </font><font style="vertical-align: inherit;">W√§hrend wir an der Aufgabe einer ganzheitlichen und verst√§ndlichen Erkl√§rung in dem Stil arbeiteten, den wir Neulinge nicht fanden, wie. </font><font style="vertical-align: inherit;">Ich musste St√ºck f√ºr St√ºck nach Informationen suchen. </font><font style="vertical-align: inherit;">Es werden keine Bilder angezeigt. </font><font style="vertical-align: inherit;">Ein rein technischer Artikel. </font><font style="vertical-align: inherit;">Erfahrene Personen sind f√ºr Kommentare und Tipps zur Verbesserung des Codes dankbar.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also lasst uns anfangen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe gleich nach Neujahr angefangen, Python zu lernen. Nach vier Monaten wurde mir klar, dass die Theorie, neben dem Training in fiktiven Aufgaben, die nicht in die Arbeit gehen, Sie nicht besonders lernen werden, ich mich entschied, nach "Kampf" -Aufgaben zu suchen. Dazu fragte ich meine Freunde, ob sie echte Aufgaben h√§tten, die programmiert werden m√ºssten. Ein "Freund meines Freundes" bat mich, einen Bot f√ºr Telegramm zu implementieren (ich vermisse die Essenz des Bots; es spielt keine Rolle - ich musste jede Aufgabe, die einen bestimmten Kunden hat, √ºbernehmen und nach Kundenwunsch implementieren). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Suche nach einer L√∂sung habe ich nat√ºrlich als erstes mit den bekannten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frameworks Python Telegram Bot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyTelegramBotAPI begonnen.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Als Anf√§nger schien es mir zun√§chst nur ein Fund zu sein - insbesondere ohne die Nuancen des Codes zu verstehen, war es m√∂glich, schnell mit dem ‚ÄûS√§gen‚Äú des echten Bots zu beginnen. Einige Tage lang bin ich auf die Tatsache gesto√üen, dass ich nicht die Funktionen erstellen kann, die ich ben√∂tige. Es scheint, dass er alles gem√§√ü der Dokumentation getan hat, aber es wurde nicht entschieden. Dann wurde mir klar, dass ich √ºberhaupt nicht verstand, wie das Framework ‚Äûunter der Haube‚Äú funktioniert und warum etwas, das funktionieren sollte, bei mir nicht funktioniert. wo und welche Befehle sollen mit welchen Methoden aufgerufen werden. Im Allgemeinen habe ich mich entschlossen, das Framework beiseite zu legen und zu versuchen, besser zu verstehen, wie die Telegramm-API selbst funktioniert und wie Sie direkt damit arbeiten k√∂nnen, wodurch ich mehr Kontrolle √ºber die Situation habe und die gesamte K√ºche der Arbeit mit der API genauer studieren kann. Es ist m√∂glich, dass ich nicht mehr auf die Frameworks Python Telegram Bot und pyTelegramBotAPI zur√ºckgreifen werde.Oder ich komme zur√ºck, um meine Arbeit an der Erstellung meines eigenen Fahrrads mit der Telegramm-API zu vereinfachen. Aber selbst wenn ich zur√ºckkomme, werde ich viel mehr √ºber die Arbeit dieser Frameworks verstehen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich hatte einen nicht √ºberpr√ºften kleinen Kurs √ºber Udemy, nur um einen Bot f√ºr Telegram zu erstellen. Zum Zeitpunkt dieses Schreibens war dies der einzige Udemy-Kurs, in dem eine Person ein Problem ohne den Python-Telegramm-Bot und pyTelegramBotAPI l√∂sen w√ºrde (ich gebe keinen Link an, damit dies keine Werbung ist). Um es zu l√∂sen, benutzte er Flask. Hier hatte ich √ºbrigens nach einem bestimmten ‚Äûmilit√§rischen Weg‚Äú die Gelegenheit, meinen Kurs zu diesem Thema aufzuschreiben, obwohl es nat√ºrlich zu fr√ºh ist - ich werde keinen besonderen Wert bringen. Wenn Sie als erfahrener Programmierer, der diesen Artikel liest, viel dar√ºber wissen, k√∂nnen Sie Ihren eigenen Kurs erstellen. Gerne kaufe ich ihn f√ºr 10,99 USD (ein typischer Rabattpreis f√ºr Udemy) bei Ihnen, um etwas Neues zu lernen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen wurde mir w√§hrend des Kurses klar, dass Flask es mir erm√∂glichen wird, die Bearbeitung von GET- und POST-Anfragen zu vereinfachen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da dieser Artikel speziell der Arbeit mit der Datenbank gewidmet ist, werde ich dar√ºber sprechen. Es ist jedoch immer wieder verlockend, andere Feinheiten zu beschreiben, z. B.: √úbertragen der Verbindungseinstellungen in eine "geheime" Datei, Empfangen und Verarbeiten von Daten, die von der Telegramm-API empfangen wurden, sowie Empfangen von Webhooks von Telegram auf einem lokalen Computer ohne SSL-Zertifikat. Wenn Sie Interesse haben, lassen Sie es mich wissen und ich werde einen separaten Artikel schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ungef√§hr drei bis vier Tage meiner Juni-Zeit brauchte ich, um zu verstehen, dass ich mich vom Framework entfernen musste, bevor ich sicher Daten aus dem Telegramm empfangen, den Text verarbeiten (analysieren) und abh√§ngig davon Was der Benutzer geschrieben hat, senden Sie ihm die erforderlichen Befehle sowie Schaltfl√§chen (einschlie√ülich √úberschreiben der Nachricht und √Ñndern der Schaltfl√§chen).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der n√§chste Schritt f√ºr mich war, die Datenbank zu verbinden, um Benutzer zu speichern, die mit dem Bot darin arbeiten, sowie Daten √ºber ihre Interaktion im Bot als Teil der Aufgabe, mit der er konfrontiert war. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste, was ich in Google gemacht habe, war ein Artikel von Habr√© mit einer √úbersetzung des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mega-Lehrbuchs Miguel Grinberg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Original seines Blogs ist hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das vierte Kapitel befasst sich mit der Verbindung zu einer Datenbank mithilfe von Flask und SQLAlchemy ORM. Dann dachte ich: "Wow, wie cool, jetzt ist das Problem gel√∂st." Seltsamerweise funktionierte die vom Autor vorgeschlagene Dateistruktur bei mir nicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich tat analog wie er:</font></font><br>
<br>
<pre><code class="plaintext hljs">microblog\<font></font>
  venv\<font></font>
  app\<font></font>
    __init__.py<font></font>
    models.py<font></font>
  main.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In main.py erledige ich die gesamte Hauptarbeit mit der Telegramm-API. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In app \ models.py erstelle ich Klassen f√ºr die Datenbank. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der App \ __ init__.py wurde alles so gemacht, wie Miguel Grinberg schrieb. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber aus irgendeinem Grund wollten sie mich in main.py nicht aus dem App-Import db, app ziehen. Verbrachte ungef√§hr eine Stunde damit, nach Problemen und L√∂sungen im Internet zu suchen. Infolgedessen stie√ü Oleg Molchanov auf einen YouTube-Kanal und sein Video ‚ÄûErstellen eines Blogs auf einer Flasche (Lektionen) - Erstellen von Posts (Modellen) und SQLAlchemy‚Äú. Dort habe ich beobachtet, wie er eine Verbindung zur Datenbank herstellt, und versucht, diesen Weg zu gehen (ohne die Datei models.py in das App-Verzeichnis zu stellen, ohne __init__.py zu erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen ist die Struktur meines Projekts jetzt einfach zu blamieren (und ein wenig h√§sslich, was mich vielleicht verwirrt In Zukunft werde ich verstehen, wie man die Struktur verbessert.</font></font><br>
<br>
<img src="http://dl4.joxi.net/drive/2020/05/04/0029/2062/1914894/94/247888a33f.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen k√∂nnen, habe ich app.py, models.py, main.py, app.sqlite (der Rest der Dateien bezieht sich nicht auf das aktuelle Thema). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In app.py habe ich diesen Code:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask
<span class="hljs-keyword">from</span> flask_sqlalchemy <span class="hljs-keyword">import</span> SQLAlchemy
<span class="hljs-keyword">from</span> flask_migrate <span class="hljs-keyword">import</span> Migrate
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> Config<font></font>
<font></font>
app = Flask(__name__)<font></font>
app.config.from_object(Config)<font></font>
db = SQLAlchemy(app)<font></font>
migrate = Migrate(app, db)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In models.py:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> app <span class="hljs-keyword">import</span> db</code></pre><br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Users</span>(<span class="hljs-params">db.Model</span>):</span>
    <span class="hljs-comment">#   </span>
    __tablename__ = <span class="hljs-string">'users'</span>
    id = db.Column(db.Integer, primary_key=<span class="hljs-literal">True</span>)<font></font>
    username = db.Column(db.String(<span class="hljs-number">120</span>), index=<span class="hljs-literal">True</span>, unique=<span class="hljs-literal">True</span>)<font></font>
    last_name = db.Column(db.String(<span class="hljs-number">128</span>))<font></font>
    first_name = db.Column(db.String(<span class="hljs-number">128</span>))<font></font>
    created = db.Column(db.DateTime, default=datetime.now())<font></font>
    tasks = db.relationship(<span class="hljs-string">'Tasks'</span>, backref=<span class="hljs-string">'tasks'</span>)<font></font>
<font></font>
    <span class="hljs-comment">#     </span>
    <span class="hljs-comment"># def __init__(self, *args, **kwargs):</span>
    <span class="hljs-comment">#     super(Users, self).__init__(*args, **kwargs)</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, username, last_name, first_name</span>):</span><font></font>
        self.username = username<font></font>
        self.last_name = last_name<font></font>
        self.first_name = first_name<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__repr__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;User {}&gt;'</span>.format(self.username)<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tasks</span>(<span class="hljs-params">db.Model</span>):</span>
    <span class="hljs-comment">#    </span>
    __tablename__ = <span class="hljs-string">'tasks'</span>
    id = db.Column(db.Integer, primary_key=<span class="hljs-literal">True</span>)<font></font>
    owner_id = db.Column(db.Integer(), db.ForeignKey(<span class="hljs-string">'users.id'</span>))<font></font>
    name = db.Column(db.String(<span class="hljs-number">120</span>), index=<span class="hljs-literal">True</span>)<font></font>
    start = db.Column(db.Boolean, default=<span class="hljs-literal">False</span>)<font></font>
    finish = db.Column(db.Boolean, default=<span class="hljs-literal">False</span>)<font></font>
    created_on = db.Column(db.DateTime, default=datetime.now())<font></font>
    updated_on = db.Column(db.DateTime(), default=datetime.utcnow, onupdate=datetime.utcnow)<font></font>
<font></font>
    <span class="hljs-comment">#     </span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span><font></font>
        super(Tasks, self).__init__(*args, **kwargs)<font></font>
<font></font>
    <span class="hljs-comment"># def __init__(self, name, last_name, first_name):</span>
    <span class="hljs-comment">#     self.name = name</span>
    <span class="hljs-comment">#     self.last_name = last_name</span>
    <span class="hljs-comment">#     self.first_name = first_name</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__repr__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;Tasks {}&gt;'</span>.format(self.name)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In config.py:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv<font></font>
load_dotenv()<font></font>
<font></font>
basedir = os.path.abspath(os.path.dirname(__file__))<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#    </span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>(<span class="hljs-params">object</span>):</span>
    DEBUG = <span class="hljs-literal">True</span>
    SECRET_KEY = os.environ.get(<span class="hljs-string">'SECRET_KEY'</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">'you-will-never-guess'</span>
    <span class="hljs-comment"># SQLALCHEMY_DATABASE_URI = 'postgresql+psycopg2://{user}:{pw}@{url}/{db}'.format(user=os.environ.get('POSTGRES_USER'),</span>
    <span class="hljs-comment">#                                                                                 pw=os.environ.get('POSTGRES_PW'),</span>
    <span class="hljs-comment">#                                                                                 url=os.environ.get('POSTGRES_URL'),</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#                                                                                 db=os.environ.get('POSTGRES_DB'))</span>
    SQLALCHEMY_DATABASE_URI = (os.environ.get(<span class="hljs-string">'DATABASE_URL'</span>) <span class="hljs-keyword">or</span>
                               <span class="hljs-string">'sqlite:///'</span> + os.path.join(basedir, <span class="hljs-string">'app.sqlite'</span>)) + <span class="hljs-string">'?check_same_thread=False'</span>
    SQLALCHEMY_TRACK_MODIFICATIONS = <span class="hljs-literal">False</span>  <span class="hljs-comment"># silence the deprecation warning</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie bereits verstanden haben, habe ich aus den Einstellungen die direkten Werte f√ºr die Verbindung entfernt und sie in .env gerendert, damit sie nicht auf dem Produkt oder in SVN leuchten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst wurde mir app.db (wo sich jetzt app.sqlite befindet) in SQLALCHEMY_DATABASE_URI als Datenbank geschrieben. </font><font style="vertical-align: inherit;">Ja, ja, und aufgeschrieben, wie in der Anleitung Miguel Grinberg angegeben. </font><font style="vertical-align: inherit;">Ich hoffe, Sie verstehen, dass Sie es durch .sqlite ersetzen m√ºssen. </font><font style="vertical-align: inherit;">Vorher dachte ich an eine Stunde nach schmerzhaften Versuchen, den Code auszuf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen Datenbanken und Tabellen in SQLite erstellen, indem Sie zur Debugging-Konsole gehen (z. B. in PyCharm habe ich Tools -&gt; Python oder Debug Console:</font></font><br>
<br>
<img src="http://dl3.joxi.net/drive/2020/05/04/0029/2062/1914894/94/06a8154fab.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier verbinden wir zuerst die Methode, die wir ben√∂tigen, in der gew√ºnschten Datei (ich habe sie von Models import db) und geben nach erfolgreicher Verbindung den Befehl db.create_all () an. Danach wird eine Datenbank mit allen notwendigen Tabellen erstellt. Es ist wichtig zu wissen, dass die Datenbankdatei erstellt wird, wenn ich aus der App db importiere und den Befehl db.create_all () ausf√ºhre, aber es ist eine Art Unsinn, nicht die Datenbank (ich habe nicht verstanden, warum). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich dieses Problem l√∂ste, dachte ich wieder, dass es jetzt keine Schwierigkeiten mehr gibt. Es bleibt nur eine Funktion f√ºr main.py zu schreiben, die unter bestimmten Umst√§nden Daten aus dem Telegramm in die Datenbank schreibt. Nun, ich habe von Models Import Users verbunden und an der richtigen Stelle die Funktion aufgerufen:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">try</span>:<font></font>
    find_user_in_db(username, first_name, last_name)<font></font>
<span class="hljs-keyword">except</span> NameError:<font></font>
    print(<span class="hljs-string">"user  "</span>)
<span class="hljs-keyword">except</span>:<font></font>
    print(<span class="hljs-string">"An exception occurred"</span>)</code></pre><br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_users_to_db</span>(<span class="hljs-params">username, last_name, first_name</span>):</span>
    <span class="hljs-string">"""
        
    :return:
    """</span><font></font>
    data = Users(username, last_name, first_name)<font></font>
    db.session.add(data)<font></font>
    db.session.commit()</code></pre><br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find_user_in_db</span>(<span class="hljs-params">username, first_name, last_name</span>):</span>
    <span class="hljs-string">"""
               
    :param username:
    :param first_name:
    :param last_name:
    :return:
    """</span>
    user = db.session.query(Users).filter(Users.username == <span class="hljs-string">f'<span class="hljs-subst">{username}</span>'</span>).all()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:<font></font>
        add_users_to_db(username, first_name, last_name)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der letzten Funktion stand first anstelle von user = db.session.query (Users) .filter (Users.username == f '{username}'). First_or_404 () stand Users.query.filter_by (username = '{username}'). first_or_404 (). Hier habe ich auch ungef√§hr eine halbe Stunde gebraucht, um zu verstehen, dass diese Abfrage in der Datenbank nicht funktioniert und keine Daten empf√§ngt, sodass die Abfrage an die Datenbank nicht gesendet wird. Google hat einen kleinen Artikel ver√∂ffentlicht, in dem die Leute sagten, es sei besser, db.session.query (Benutzer) zu verwenden. Warum so, ich xs, verschwendete keine Zeit mit der Analyse. Danach wurden die Daten in die Datenbank geschrieben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit ist dieser Artikel abgeschlossen, da ich beschrieben habe, was ich beschreiben wollte, und das Problem der Verbindung der Datenbank mit Flask gel√∂st habe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Artikel wurde nur aus dem Grund geschrieben, dass wir ‚ÄûJune‚Äú beim Lesen von Anweisungen lieben. </font><font style="vertical-align: inherit;">Ich selbst habe auch versucht, Anweisungen zum Verbinden der Datenbank mit Flask zu finden. </font><font style="vertical-align: inherit;">Ich fand keine vollst√§ndigen Anweisungen, also musste ich mich durch die Hindernisse bewegen. </font><font style="vertical-align: inherit;">Nun, ich habe beschlossen, meine Erfahrung als die n√§chste zu beschreiben, die nach vorgefertigten Anweisungen suchen wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Wer nach einer vorgefertigten L√∂sung sucht, dann frage ich das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository auf GitHub</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PSS. Ich bin froh, wenn jemand eine Code√ºberpr√ºfung durchf√ºhrt und seine Verbesserungsvorschl√§ge gibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihre Aufmerksamkeit.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500668/index.html">Drahtlose Motorsteuerung von Lego mit Steam Controller</a></li>
<li><a href="../de500670/index.html">Wie wir unser Produkt herstellen. Erster Teil, Forschung</a></li>
<li><a href="../de500672/index.html">Fortsetzung des Streams f√ºr Tester und nicht nur</a></li>
<li><a href="../de500676/index.html">Ank√ºndigung eines Online-Workshops zur Testautomatisierung</a></li>
<li><a href="../de500678/index.html">ClickHouse f√ºr fortgeschrittene Benutzer in Fragen und Antworten</a></li>
<li><a href="../de500692/index.html">3D-Spiel-Rendering: Einf√ºhrung</a></li>
<li><a href="../de500694/index.html">68 unaufgeforderte Tipps</a></li>
<li><a href="../de500696/index.html">Wie Laufschuhe versuchen, sich an den weiblichen Fu√ü anzupassen</a></li>
<li><a href="../de500698/index.html">Evgeny Katyshev: "OpenStreetMap ist f√ºr keine Informationen geeignet"</a></li>
<li><a href="../de500700/index.html">Unterst√ºtzung f√ºr TLS1.3 und Erweiterung Ihres pers√∂nlichen Kontos: Was wurde f√ºr das erste Quartal 2020 getan?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>