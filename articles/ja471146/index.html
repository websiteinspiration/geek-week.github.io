<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥅 🎺 ♍️ 孤立したサービス：（マイクロ）サービスアーキテクチャの裏側 👨🏽 🗣️ 👰🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="昨年の会議DevOpsDaysモスクワで、 Banki.ruポータルの運用責任者であるAndrei Nikolskyは、孤立サービスについて説明しました。インフラの孤立を特定する方法、不良サービスとは何か、それらに何をするか、何も役に立たない場合はどうすればよいかについてです。
 
 カットの下には...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>孤立したサービス：（マイクロ）サービスアーキテクチャの裏側</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/scienceman_events/blog/471146/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">昨年の会議</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevOpsDaysモスクワで、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Banki.ruポータルの運用責任者であるAndrei Nikolskyは</font><font style="vertical-align: inherit;">、孤立サービスについて説明しました。インフラの孤立を特定する方法、不良サービスとは何か、それらに何をするか、何</font><font style="vertical-align: inherit;">も役に立た</font><font style="vertical-align: inherit;">ない場合はどうすればよいかについてです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カットの下には、レポートのテキストバージョンがあります。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/j9I4oeEXBO8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんにちは！</font><font style="vertical-align: inherit;">私の名前はアンドレイです。私はBanki.ruで業務を率いています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは素晴らしいサービスを提供しています。これらはモノリシックサービスです。より古典的な意味でのサービスがあり、非常に小さなサービスがあります。</font><font style="vertical-align: inherit;">私の労働者と農民の用語では、サービスが単純で小さい場合はマイクロであり、非常に単純で小さくない場合は単なるサービスであると言います。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスプロ</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスの利点について簡単に説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/xj/_u/jixj_uxelvtokkt54xoul15fsnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つはスケーリングです。サービスで何かをすばやく実行して、本番環境で開始できます。トラフィックが到着し、サービスを複製しました。まだトラフィックがあり、クローンを作成してそれと共存しています。これは良いボーナスであり、原則として、私たちが始めたとき、私たちの中で最も重要であると考えられていました。なぜこれをすべて行うのですか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/oq/d3/lcoqd397ppryaemtruvd7awdoxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、分離された開発。複数の開発チームがあり、各チームに複数の異なる開発者がいて、各チームが何らかのサービスを切断している場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チームには微妙なニュアンスがあります。開発者は異なります。そして、例えば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人々の雪片があります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。私はこれをマキシム・ドロフェエフと初めて見ました。時々、人々は雪片を持っているチームもあれば、持っていないチームもあります。これにより、会社で使用されるさまざまなサービスが少し不均一になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/nk/ml/_knkmlyetdgucwl7bkuxuvtpahe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写真を見てください：彼は優れた開発者であり、彼は大きな手札を持っています、彼は多くのことができます。主な問題は、これらの手がどこから成長するかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-6/li/zn/-6liznhfxdjynboqueccoayiat8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスにより、さまざまなタスクにより適したさまざまなプログラミング言語を使用できるようになります。 Goの一部のサービス、Erlangの一部、Rubyの一部、PHPの一部、Pythonの一部。一般的に、あなたは非常に広く方向転換することができます。ここにもニュアンスがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7h/ob/ka/7hobkajsj1y7nsdqr1sfoqt7ljo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス指向アーキテクチャーは、主に開発についてです。つまり、自動化がない場合、展開プロセスはありません。手で構成する場合、構成はサービスインスタンスからインスタンスに変更される可能性があり、何かをするためにそこに移動する必要がある場合、地獄にいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、20のサービスがあり、手で展開する必要があり、20のコンソールがあり、同時に忍者のように「Enter」を押すとします。これは良くない。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テスト後にサービスがある場合（もちろんテストがある場合）、本番環境で機能するようにファイルで仕上げる必要がある場合も、悪いニュースがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Amazonの特定のサービスに依存し、同時にロシアで働いている場合、2か月前に「周りのすべてが燃えている、私は元気です、すべてがクール」でした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/z0/u6/vuz0u6eenpfaob592_jtdrnpp8e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
展開の自動化にはAnsibleを、収束にはPuppetを、展開の自動化にはBambooを、Confluenceを使用してすべてを何らかの形で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レポートについては、技術的な実装ではなく、相互作用の実践についての可能性が高いため、これについては詳しく説明しません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dg/c5/cz/dgc5cz_nevmer6hzgcxjj1tqe5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、サーバー上のPuppetがRuby 2で動作し、一部のアプリケーションがRuby 1.8で書かれていて、一緒に動作しないという問題がありました。ある種の側枠が発生します。また、同じマシンに複数のバージョンのRubyを保持する必要がある場合、通常は問題が発生します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、各開発者に、私たちが持っているほぼすべてのプラットフォーム、開発可能なすべてのサービスを提供し、分離された環境で、必要に応じてそれを分解して構築できるようにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで何かをサポートする、特別にコンパイルされたある種のパッケージが必要になることがあります。これで十分です。 dockerイメージの重量が45 GBであるという報告を聞いたことがあります。もちろん、Linuxのほうが単純で、すべてが小さくなっていますが、とにかく、十分な場所はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、あるバージョンのライブラリに依存するプロジェクトの一部と、別のバージョンのプロジェクトの別の部分があり、ライブラリがまったく統合されていない場合、競合する依存関係があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9m/dr/vn/9mdrvnnkajxl_8cxfmj79ukk8dk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP 5.6のサイトとサービスはありますが、恥ずかしいですが、どうすればよいですか。これは私たちの1つのサイトです。 PHP 7にはサイトとサービスがあり、さらに多くのサイトとサービスがあります。それらを恥じることはありません。そして、各開発者は自分の拠点を持っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
会社で1つの言語で書くと、開発者1人あたり3つの仮想マシンになります。これは正常に聞こえます。</font><font style="vertical-align: inherit;">異なるプログラミング言語を使用している場合、状況はさらに悪化します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/np/b0/mpnpb0q-gcmneomvazzs_1gd4-w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この上にサイトとサービスがあり、次に、Go用の別のプラットフォーム、Ruby用の1つのプラットフォーム、側面に別のRedisがあります。</font><font style="vertical-align: inherit;">結果として、これはすべてサポートのための大きなフィールドに変わり、常にこれの一部が壊れる可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cb/cq/u_/cbcqu_ynjcnffa0fepuvln_gib8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、PHPのフレームワークはまったく異なり、機能、コミュニティ、サポートが異なるため、プログラミング言語のまとまりを異なるフレームワークの使用に置き換えました。</font><font style="vertical-align: inherit;">そして、あなたはすでに何かの準備ができているようにサービスを書くことができます。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各サービスには独自のチームがあります。</font></font></b></h3><br>
<img src="https://habrastorage.org/webt/zp/nc/6m/zpnc6mlp098fx0xriegr8mwn1jm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数年にわたって結晶化した主なプラスは、各サービスに独自のチームがあることです。これは、大規模なプロジェクトに便利です。ドキュメント作成にかかる時間を節約でき、マネージャはプロジェクトをよく知っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サポートからのタスクは完全にスローできます。たとえば、保険サービスが故障した。そしてすぐに保険チームは修理に行きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのアトミックサービスがある場合、すぐに何かをねじ込むことができるため、新機能はすぐに作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、あなたがサービスを破ったとき、これが必然的に起こるとき、あなたは他の人々のサービスを傷つけなかったし、他のチームからのビットを持つ開発者はあなたに頼らず、「ああ、それをしないでください」とは言わない。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/34/hw/ro/34hwroxdvr056crrpgakpbk2f1g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつものように、ニュアンスがあります。</font><font style="vertical-align: inherit;">安定したチームがあり、マネージャーはチームに釘付けになります。</font><font style="vertical-align: inherit;">明確なドキュメントがあり、マネージャーはこれをすべて注意深く監視します。</font><font style="vertical-align: inherit;">マネージャーがいる各チームにはいくつかのサービスがあり、特定の能力がある。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チームがフローティングしている場合（これも時々使用されます）、スターマップと呼ばれる優れた方法があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lu/01/uq/lu01uqtz9m1qqsp-dndyetupouq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたはサービスと人々のリストを持っています。</font><font style="vertical-align: inherit;">アスタリスクは人がこのサービスの専門家であることを意味し、本は人がこのサービスを研究していることを意味します。</font><font style="vertical-align: inherit;">人の仕事は、小さな本をアスタリスクに変えることです。</font><font style="vertical-align: inherit;">そして、サービスの反対側に何も書かれていない場合、問題が始まります。それについては私が話し続けます。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">孤立したサービスはどのように表示されますか？</font></font></b></h3><br>
<img src="https://habrastorage.org/webt/eh/rx/97/ehrx971egg-nuycxtteb8q824wo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インフラストラクチャでサービスを孤立させる最初の問題は、人を解雇することです。彼らがタスクを評価する前にビジネスから締め切りが来たときに誰かが起こったことがありますか？場合によっては、締め切りが厳しく、ドキュメンテーションのための十分な時間がないことがあります。 「サービスを本番環境に引き渡さなければならないので、それを追加します。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チームが小さい場合、すべてを作成する開発者が1人いることになりますが、残りはすべての責任を負っています。</font><font style="vertical-align: inherit;">「私は基本的なアーキテクチャを書いた、あなたは私にインターフェースを与えてくれた。」</font><font style="vertical-align: inherit;">その後、ある時点で、例えば、マネージャーは去ります。</font><font style="vertical-align: inherit;">そして、この期間中、マネージャーが去り、新しいマネージャーがまだ任命されていないとき、開発者はサービスがどこに行くのか、そこで何が起こっているのかを自分で決めます。</font><font style="vertical-align: inherit;">私たちが知っているように（数枚のスライドに戻りましょう）、チームによっては、人々-雪片、時には雪片-ティムライドがあります。</font><font style="vertical-align: inherit;">それから彼は辞め、私達はサービス孤児を手に入れます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rh/ro/qw/rhroqwez4ltwh8a5petmhcvszi4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、サポートおよびビジネスからのタスクは消えず、バックログに落ち着きます。</font><font style="vertical-align: inherit;">サービスの開発中にアーキテクチャ上のエラーがあった場合、それらもバックログに解決されます。</font><font style="vertical-align: inherit;">サービスは徐々に低下しています。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">孤児を識別する方法は？</font></font></b> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このリストは状況をよく説明しています。誰がインフラストラクチャで何かを学びましたか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4r/gy/nv/4rgynviquavl_b6pmfr85mhzybo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文書化された回避策について：サービスがあり、一般的には機能します。2ページのマニュアルがあり、それを操作する方法がありますが、内部でどのように機能するかは誰にもわかりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、たとえば、ある種のリンク短縮機能があります。たとえば、さまざまなサービスのさまざまな目的で3つのリンク短縮サービスを使用しています。これらは単なる結果です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sm/ka/0f/smka0fa5trizu6rxhzit6e-6fj0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今私は証拠のキャプテンになります。何をする必要がありますか？まず、サービスを別のマネージャー、別のチームに転送する必要があります。チームリーダーがまだ終了していない場合、この別のチームで、サービスが孤児のように理解しているときに、少なくとも彼について何かを理解している人を含める必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主なもの：あなたは血で書かれた感染手順を持っていなければなりません。私たちの場合、これが機能するために必要なので、私は通常これに従います。管理者はこれを迅速に提供する必要があり、後で彼に何が起こるかは彼らにとってそれほど重要ではありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6b/wy/5p/6bwy5pd9qqzaki4jfyo0qimq8tk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
孤児を作成する次の方法は、「アウトソーシングをしましょう。それはより速くなり、それをチームに転送します」です。誰もがチーム、キューにいくつかの計画を持っていることは明らかです。多くの場合、企業顧客は、アウトソーサーが社内の技術部門と同じことをすると考えています。彼らの動機は異なりますが。アウトソーシングには、奇妙な技術的ソリューションと奇妙なアルゴリズム的ソリューションがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3o/iv/zg/3oivzgpkzi_5akenrhhsfl9r8h8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、Sphinxが予想外のさまざまな場所にあるサービスがありました。後で何をしなければならないかをお話します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アウトソーシング業者は自己作成のフレームワークを持っています。これは、前のプロジェクトからコピーして貼り付けた裸のPHPで、すべてを見つけることができます。いくつかの複雑なBashスクリプトを含むファイルのいくつかの行を変更する必要があるが、これらのデプロイスクリプトがいくつかの3番目のスクリプトによって呼び出される場合の、デプロイスクリプトの大きな松葉杖。その結果、展開システムを変更し、他のものを選択してホップすると、サービスが機能しなくなります。異なるフォルダ間にさらに8つのリンクを配置する必要があったためです。または、1,000件のレコードが機能し、10万件がなくなった場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャプテンを続けます。アウトソーシングからサービスを受けることは、必要な手続きです。サービスがアウトソーシングから来ているが、どこでも受け入れられていないのは誰ですか？もちろん、これはサービス孤児ほど一般的ではありませんが、依然として人気があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ak/8j/lh/ak8jlhfoevrsvkv4d-y1rfu8gri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスを確認し、サービスを確認し、パスワードを変更する必要があります。サービスが私たちをスローしたときに、管理パネル「if login == 'admin' &amp;&amp; password == 'admin' ...」がコードに直接書き込まれている場合がありました。私たちは座って考え、そして人々はこれを2018年に書きますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ストレージボリュームのテストも必須です。本番環境のどこかでこのサービスを開始する前でも、10万件のレコードで何が発生するかを確認する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mc/k2/qa/mck2qagxhsslsxcojjpekfludq4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
恥ずかしがらないようにサービスを修正のために送ってください。 「このサービスは受け付けません。20のタスクがあります。それらを実行してから受け付けます」というのは正常です。良心は、あなたがマネージャーを代理する、またはビジネスがお金を使うという事実から害を与えてはなりません。ビジネスはそれからもっと使います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アウトソーシングに関するパイロットプロジェクトを作成することを決定したときに、ケースがありました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/cm/be/focmbesdalmj5fa1ia9_lkpxss4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは時間通りに配達され、これが唯一の品質基準でした。そのため、彼らは別のパイロットプロジェクトを作成しました。これらのサービスは受け入れられた、と彼らは管理方法で言った、ここにあなたのコード、ここにチーム、ここにあなたのマネージャーがあります。サービスはすでに利益を上げ始めています。さらに、実際には、彼らは孤児のままであり、彼らがどのように働くかを誰も理解しておらず、マネージャーはあらゆる方法で彼らの仕事を否定しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z6/lo/mn/z6lomn7i2eknkjah0pquashtywu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の優れたコンセプトがあります-ゲリラ開発です。</font><font style="vertical-align: inherit;">通常、部門がマーケティング部門である場合、彼らは仮説をテストし、サービス全体を外部委託することを望んでいます。</font><font style="vertical-align: inherit;">トラフィックが彼に注ぎ始め、彼らは文書を閉じ、請負業者との行動に署名し、運用を開始し、次のように言います。</font><font style="vertical-align: inherit;">私たちは：「おっ、どうだ」</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/g-/vj/bwg-vjk4-tvz3574ib3mbjw18ue.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、孤立したサービスを取得する別の方法：チームが突然ロードされると、経営陣は「このチームのサービスを別のチームに転送すると、負荷が少なくなります」と言います。</font><font style="vertical-align: inherit;">その後、3番目のチームに転送し、マネージャーを変更します。</font><font style="vertical-align: inherit;">そして結局、再び孤児がいます。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">孤児の問題は何ですか？</font></font></b></h3><br>
<img src="https://habrastorage.org/webt/_o/-3/ux/_o-3uxqtu_lh_cmgfg8mf6pousc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わからないが、これはスウェーデンで育ったワサの船で、打ち上げから5分後に沈没したことで有名だった。</font><font style="vertical-align: inherit;">ちなみにスウェーデンの王は、これのために誰も処刑しませんでした。</font><font style="vertical-align: inherit;">それはそのような船を造ることができなかった2世代のエンジニアによって造られました。</font><font style="vertical-align: inherit;">自然な効果。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、船が沈む可能性があるのは、たとえば、王が嵐の中でどこかに乗ったときなどです。</font><font style="vertical-align: inherit;">だから、彼はすぐに溺死しました、とajailによれば、早く失敗するのは良いことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
早く失敗しても、通常は問題はありません。</font><font style="vertical-align: inherit;">たとえば、受け入れ中に、彼らは修正を求めました。</font><font style="vertical-align: inherit;">そして、私たちが生産に失敗した場合、お金が投資されると、問題が発生する可能性があります。</font><font style="vertical-align: inherit;">それらはビジネスで呼ばれている結果。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜ危険な孤児サービス：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスが突然停止する場合があります。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスが長期間修理されるか、まったく修理されない。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全上の問題。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改善と更新に関する問題。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要なサービスが故障すると、会社の評判は低下します。 </font></font></li>
</ul><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">孤立したサービスをどうするか？</font></font></b></h3><br>
<img src="https://habrastorage.org/webt/3k/ex/8v/3kex8vjbf7clzd9jbktsfzjclby.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度、何をすべきか。</font><font style="vertical-align: inherit;">まず、ドキュメントがあるはずです。</font><font style="vertical-align: inherit;">Banki.ruでの7年間、私はテスターが開発者に一言を言うべきではなく、操作がすべての人に一言を言うべきではないと教えられました。</font><font style="vertical-align: inherit;">確認する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/rc/ub/dxrcubcmw-ybkov8kdag3cz2rzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第2に、十分に受け取られていないサービスには、誰も話さなかった依存関係が含まれていることがあるので、相互作用スキームを記述する必要があります。</font><font style="vertical-align: inherit;">たとえば、開発者は一部のYandex.MapsまたはDadataのキーにサービスを配置します。</font><font style="vertical-align: inherit;">あなたは無料の制限を使い果たし、すべてが壊れており、何が起こったのかまったくわかりません。</font><font style="vertical-align: inherit;">そのようなすべてのレーキを説明する必要があります。サービスはDadata、Smsなどを使用します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hy/6o/ki/hy6okizhuhhwibejacdgchvoo68.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三に、技術的負債を処理します。松葉杖を作るか、サービスを受け入れて、何かをする必要があると言うとき、あなたは彼らがそれをすることを確認する必要があります。それは、小さな穴がそれほど小さくないことがわかって、そこに落ちるからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
建築作業では、Sphinxについての話がありました。サービスの1つでは、Sphinxを使用してリストを入力しました。単なるページ付けリストですが、毎晩インデックスが付け直されました。これは2つのインデックスからコンパイルされました。1つは毎晩大きなインデックスが付けられ、それに小さなインデックスが付けられていました。毎日、50％の確率で爆弾を投下するか、投下しないかのいずれかになりますが、計算中はインデックスが暴れ、ニュースはメインページで更新されなくなりました。最初はインデックスが再インデックスされるまで5分でしたが、その後インデックスが大きくなり、ある時点で40分にインデックスが再作成され始めました。カットすると、もう少し時間がかかり、インデックスがフルタイムで再インデックス化されることが明らかだったため、安堵のため息をつきました。ポータル用のファイルになります8時間ニュースはありません-それだけです、ビジネスは立ち上がった。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">孤児との作業計画</font></font></b></h3><br>
<img src="https://habrastorage.org/webt/ox/ny/wq/oxnywqk2gpyoczjewhrt_ngsiz0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、devopsはコミュニケーションに関するものであるため、実行するのは非常に困難です。</font><font style="vertical-align: inherit;">私は同僚と良好な関係を築きたいと思っています。同僚やマネージャーを頭の規制で倒すと、彼らはこれを行う人々に対して矛盾した感情を抱くかもしれません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてのポイントに加えて、もう1つの重要な点があります。特定のサービスごとに、展開手順の特定のセクションごとに、特定の担当者が責任を持つ必要があります。</font><font style="vertical-align: inherit;">人がいなくて、他の人を惹きつけなければならないとき、全部を勉強するのは難しくなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6o/-d/co/6o-dcolwznowrvatclrcvbvau0a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてが役に立たず、サービス孤児がまだ孤児であり、誰もそれを自分のものにしたくない場合、ドキュメントは作成されず、このサービスに呼び出されたチームは何かを拒否し、すべてをやり直す簡単な方法があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、奇妙な技術ソリューションなしで、サービス要件を新たに取り、より優れたプラットフォームでより良い新しいサービスを作成します。そして戦闘中にそれに移行します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/f2/wk/_jf2wkfeybtdq4xty4syofgx1ei.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yii 1でサービスを利用していて、Yii 1でうまく書ける開発者が不足しているため、それ以上開発できないことに気づいたとき、すべての開発者が3番目のSymfonyでうまく書けました。何をすべきか？時間をかけて、チームを割り当て、マネージャーを割り当て、プロジェクトを書き直し、トラフィックをスムーズに切り替えました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、古いサービスを削除できます。これは私のお気に入りの手順です。構成管理システムからサービスを取得してクリーンアップし、プロダクションのすべての車が返済されていることを確認して、開発者が残っている兆候がないことを確認する必要があります。 gitのリポジトリは残ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが私が話したかったことのすべてです、私は議論する準備ができています、トピックは全体論的で、多くはそれに浮かんでいます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライドでは、言語を統一したという事実についてです。一例は、写真のサイズ変更でした。しかし、本当に1つの言語にタフにする必要がありますか？ PHPで画像のサイズを変更するので、Golangで実際にそれを行うことができます。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、これはすべての慣行のように必要ではありません。たぶん、場合によっては、望ましくないことさえあります。しかし、技術部門に50人いる場合、45人がPHP開発者で、別の3人がPython、Ansible、Puppetなどを実行できる開発者であり、そのうちの1人だけがいくつかに書き込むことを理解する必要があります。写真のサイズを変更するサービスに行って、彼が去ると、試験は彼と一緒に去ります。同時に、特にこの言語がまれである場合は、この言語を知っている市場固有の開発者を探す必要があります。つまり、組織の観点からは、これには問題があります。 DevOpsの観点からは、サービスのデプロイに使用する既製のプレイブックのセットを複製するだけでなく、それらを再度記述する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、Node.jsでサービスを見ているところです。これは、それぞれの開発者が個別の言語を使用できる近くのプラットフォームにすぎません。しかし、ゲームはキャンドルの価値があると思って座っていました。つまり、ここでの問題は座って考えることです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスをどのように監視していますか？ログをどのように収集して追跡しますか？</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Elasticsearchでログを収集してKibanaに配置し、本番環境またはテスト環境に応じて、さまざまなコレクターがそこで使用されます。どこか木こり、どこか他の何か、私はもう覚えていません。また、特定のサービスでは、Telegrafと箇条書きを別の場所に配置する場所がまだいくつかあります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuppetとAnsibleを同じ環境で使用するにはどうすればよいですか？</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、2つの環境があります。1つはPuppet、もう1つはAnsibleです。それらのハイブリッド化に取り組んでいます。 Ansibleは初期セットアップに適した環境です。Puppetは、パッドを直接操作する手が必要なため、初期セットアップには適していません。Puppetは構成の収束を提供します。これは、サイト自体が最新の状態に保たれていることを意味します。Ansiblizedマシンを最新の状態に保つには、任意の頻度でプレイブックを追跡する必要があります。ここにそのような違いがあります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのようにして互換性を維持しますか？ AnsibleとPuppetの両方に設定がありますか？</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは私たちの大きな苦痛であり、私たちは自分の手との互換性を維持し、今、これらすべてからどこかに移動する方法を考えています。たとえば、Puppetはパッケージをロールし、そこにいくつかのリンクをサポートしますが、Ansibleは、たとえば、コードをロールし、そこに新しいアプリケーション構成を実行します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレゼンテーションはRubyのさまざまなバージョンに関するものでした。解決策は何ですか？</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
私たちはこれに1か所で直面しており、常にこのことを覚えておく必要があります。 Rubyで機能する部分は単にオフにして、アプリケーションとの互換性がないため、Rubyを分離しました。</font></font><br>
<br>
<blockquote>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">DevOpsDays Moscow</a>  7   «».  11      . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> ,    .<br>
<br>
   , ! <br>
</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471132/index.html">IT専門家の専門家のバーンアウト：精神科医マキシムマリヤビンの15の答え</a></li>
<li><a href="../ja471136/index.html">Scalaコミュニティのロシアで最初の大規模なチューブ会議-それがあったように</a></li>
<li><a href="../ja471138/index.html">Vinetiでのペアプログラミング</a></li>
<li><a href="../ja471140/index.html">Spring Professional認定の準備。春休み</a></li>
<li><a href="../ja471142/index.html">12の簡単な例で12のES10機能</a></li>
<li><a href="../ja471150/index.html">「知識人を管理する方法。私、オタクとオタク」（本の無料電子版）</a></li>
<li><a href="../ja471154/index.html">学校に戻る：自動テストに対処するためにハンドヘルドテスターをトレーニングする方法</a></li>
<li><a href="../ja471158/index.html">ID @ Xbox in Russia：ゲームの視野を広げる</a></li>
<li><a href="../ja471160/index.html">2019年末のRuby on Railsインストールの問題</a></li>
<li><a href="../ja471170/index.html">機能的なプラクティスとフロントエンド：モナドとファンクター</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>