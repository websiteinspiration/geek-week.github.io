<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📚 🍄 👩🏾 如何使机器人准确地运动？Studuino平台机器人概述和功能 👨🏿‍💻 🎤 🌉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我工作的组织被要求举办一个小型的机器人技术网络研讨会，以2020年莫斯科国际教育沙龙的形式进行。演讲的主题留给我开放，并进行了机器人技术方面的教育。因此，我熟悉了日本ArTeC公司的产品（这不是广告，我也不是ArTeC的雇员-这只是我与他们的产品进行交流的个人经验）。网络研讨会结束后，我决定写这篇文...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>如何使机器人准确地运动？Studuino平台机器人概述和功能</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503968/"><img src="https://habrastorage.org/webt/tv/1x/rr/tv1xrr8dyui1j9kgp12ampq04z4.jpeg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我工作的组织被要求举办一个小型的机器人技术网络研讨会，以2020年莫斯科国际教育沙龙的形式进行。演讲的主题留给我开放，并进行了机器人技术方面的教育。因此，我熟悉了日本</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ArTeC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公司的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">产品</font></a><font style="vertical-align: inherit;">（这不是广告，我也不是ArTeC的雇员-这只是我与他们的产品进行交流的个人经验）。网络研讨会结束后，我决定写这篇文章，因为在俄罗斯，乐高教育的工具包非常受欢迎，这是我第一次遇到这位日本设计师。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文章分为两个部分。</font><font style="vertical-align: inherit;">第一部分对选择教育机器人套件的​​人很有用。</font><font style="vertical-align: inherit;">在第二部分中，我研究了使用套件来解决生活中可能出现的应用问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，如果有人对它是什么类型的机器人套件感兴趣，以及可以用它做什么，我就请一只猫来。</font><font style="vertical-align: inherit;">所以走吧！</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为构建的基础，设计人员仅使用一些基本零件即可从中组装非常复杂的结构。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-f/wo/fc/-fwofcl47qvnsp3yktrthob23fk.jpeg" alt="ArTeC Designer基础块"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ArTeC Designer基础块</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/88/y5/x_/88y5x_wap5y9pfk89w0s2d_kclm.jpeg" alt="图片"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Designer零件的示例模型</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于零件的特殊性-连接的孔和尖峰的交错顺序，并非总是很快就能找到正确的零件组合来达到目的。与乐高玩具不同的是，优势在于：所有零件都足够大，损失难度更大。第二个优点是您不必长时间寻找必要的零件，因为基本零件只有5-6件（零件颜色的差异不计算在内）。负号是指-只要零件是全新的，它们之间的分离有时会变成折磨-因此它们彼此紧紧地粘在一起。为了帮助它们脱离，套件中提供了一种特殊工具。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了该套件中的基本块外，还有几种车轮和齿轮以及齿条。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在介绍一下该机器人套件电子部分中包含的内容。日本网站上有大量不同的传感器和模块。当然，我的数量要少得多，但是那些已经具有一定创造力的空间。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了填充主控制单元，日文制作了他们的Arduino开发板版本，并对其进行了最终化处理，并将其命名为Studuino。他们在其中添加了一个直流电动机控制驱动器，并引入了一条用于3针连接器的线（标准BLS-3，它们放置在伺服器上）。每个此类连接器上都有电源：正号和负号，以及Arduino板的引脚之一。所有连接器均已签名，因此连接时很难出错。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/ls/g5/tilsg5zc0fbgyoeusvabr0xeti0.png" alt="Studuino平台"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Studuino平台</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了与标准位置上的标准Arduino屏蔽板兼容，有一些类似于Arduino的连接器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与Arduino开发板的主要区别在于控制器的电压为3.3V。这可以通过以下事实解释：中央控制模块通过随附的3个AA电池（总计4.5 V）的电池仓供电。不幸的是，没有提供电池，它甚至不能在制造商的网站上购买。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
评估板位于一个塑料盒中，您可以在其上连接设计器的基础部件和其他元素。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4s/db/tv/4sdbtvlbdgyvbyrtjohswx8w4zq.jpeg" alt="ArTeC中央单位"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ArTeC中央单位</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为执行器，制造商提供了两个带齿轮箱的直流电机和多达8个自己设计的伺服驱动器（它们的数量可能会根据套件配置而有所不同）。电机通过板上的特殊连接器连接。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xr/ig/ti/xrigtithv8bt_ypcxqceow8mze0.jpeg" alt="带齿轮的直流电动机及其连接"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有齿轮箱的直流电动机及其连接</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
可以想到的</font><i><b><font style="vertical-align: inherit;">是，</font></b></i><font style="vertical-align: inherit;">可以非常轻松，快速地组装最简单的结构：具有两个电动机的机器人机器，通过控制它们，可以使电动机向正确的方向移动。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cw/k8/pb/cwk8pb5whc2yhdqudkn_igjmw04.jpeg" alt="具有两个直流电动机的简单机器人机器"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有两个直流电动机的简单机器人机器</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过设置发动机端子D2，D4，D3的逻辑状态来控制发动机，该端子连接到M1，而电动机端子D7，D8，D5则连接到Studuino板上的M2连接器。基于这些结论，Studuino板的开发人员并联了一个电机驱动器驱动器芯片。通过在此处连接电路来使用这些结论，并同时使用引擎，将会失败。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
考虑如何控制连接到M1连接器的引擎。通过将端子D2和D4设置为不同的逻辑状态，可以实现发动机沿期望方向的旋转。例如：对于D2-1和D4-0，引擎将顺时针旋转，如果D2--0和D4-1，则引擎将逆时针旋转。还需要通过在引脚D3上设置PWM值来设置电动机转速-可以在0到255之间。如果该值为0，则电动机将不会旋转，如果该值为255，我们将获得最大转速。引擎驱动器还允许即时改变引擎的旋转方向并支持引擎制动模式。为了使发动机减速，必须在端子D2和D4上设置等于1的相同逻辑状态。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一下，在Studuino板上有3个引脚（GND，VCC，SIG）的连接器中没有D3和D5引脚，但是它们在标准的Arduino连接器上，开发人员将其保留以保持平台兼容性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，电动机也受控制，该电动机连接到M2连接器。对于他来说，旋转方向是通过端子D7和D8的状态指定的，而旋转速度是通过端子D5确定的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我写的最简单的程序使机器人机器像这样移动：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/vQ3rZuYrAfM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Servos可以连接到板上红色突出显示的连接器：D2，D4，D7，D8，D9，D10，D11，D12。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0w/dj/ai/0wdjaiemegvopfxyopehiaw3kk4.jpeg" alt="伺服连接"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接伺服驱动器</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
AtMega168微控制器在这些引脚上具有PWM，这是控制伺服驱动器所必需的。如果连接了最大数量的伺服器，则可以得到一些有趣的设计。为了演示，我将一个步行机器人的简单模拟物放在一起，并尝试对其进行一些编程。结果可以在视频中看到：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7wUzKdMxz2o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
唯一要记住的是，如果您打算同时使用直流电动机和伺服系统，那么您将不能同时使用2个直流电动机和8个伺服系统，因为它们具有由微控制器控制的公共输出。您可以进行以下配置：2个直流电机+ 4个伺服器，1个直流电机+ 6个伺服器或仅使用8个伺服器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在任何机器人套件中，除了执行器外，还必须有传感器，它们是任何机器人的“眼睛”和“耳朵”。他们也在这里。在我的集合中，有以下传感器：光传感器，声音传感器，加速度传感器，两个红外传感器，触摸传感器以及LED（绿色，红色，蓝色，白色）和压电传感器。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/od/_9/37od_926t58t-bpda408gn8t3r0.jpeg" alt="一组传感器"><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一组传感器</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
传感器使用套件随附的电缆连接到中央单元。</font><font style="vertical-align: inherit;">为了将传感器固定在机器人模型中的外壳上，它们具有长钉，可以将它们固定到结构上。</font><font style="vertical-align: inherit;">我组装并编程了几个简单的设计，以了解传感器的操作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
触摸传感器的工作方式如下：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1xNKl1vxEEM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是光传感器的工作方式：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/IporhRPSjf4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果套件中没有足够的标准传感器，并且您想扩展其功能，则可以像使用标准Arduino板一样轻松地使用无焊面包板并在那里连接电路。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_b/c6/vg/_bc6vgpysz7ujiuqezh3v69hgfy.jpeg" alt="增强的招聘功能"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增强的拨号功能</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
对于任何机械</font><b><i><font style="vertical-align: inherit;">手套件而言</font></i></b><font style="vertical-align: inherit;">，下一个重要的点是便利的编程环境的可用性。在这里，制造商提供了三种不同的编程选项。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入门级-专为最小的用户而设计，他们仍然不真正懂得阅读，但是已经迈出了进入机器人成人世界的第一步。对于他们来说，提供了最简单的编程环境-象形图。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/pe/o-/mypeo-odgpb_o6ewezjvyd2haxy.jpeg" alt="图标编程"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图标编程</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，您可以将带有基本操作的象形图提取到程序中（前进，打开，打开LED等）并配置其基本参数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当掌握了该级别或其功能不足以解决任务时，您可以继续下一步，并开始为Studuino平台使用Scratch编程环境。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/cx/ze/mscxzeyahq9fake71sur4f9ncuq.jpeg" alt="Studuino的临时编程"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Studuino的Scratch编程</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
已经有了更多的编程选项：您可以使用变量和数组，逻辑和算术表达式，子例程，以及更灵活地配置各种执行块。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当这些功能还不够用时，您可以继续在Arduino IDE中进行编程，并完全控制Studuino平台的所有硬件功能。要在Arduino IDE中使用Studuino板，您必须根据制造商网站上的说明配置环境（以使环境在支持的板列表中看到Studuino平台）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
制造商提供了一套完整的编程软件，以指导您组装不同的模型并进行编程。该软件本身可在制造商的网站上免费获得。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，让我们尝试使用此集合解决一个小的实际问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
想象一下，我们有一个必须在仓库中前后移动的机器人，我们需要使其停在给定的位置。</font><font style="vertical-align: inherit;">如果未控制机器人，则会发生事故。</font><font style="vertical-align: inherit;">此处显示了此类事故的示例：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/a-q58XA4iKs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以使用直流电动机或伺服器来使机器人向前和向后移动。</font><font style="vertical-align: inherit;">伺服驱动器解决了如何将机器人停在正确的位置的问题（您可以准确设置伺服器的旋转角度）。</font><font style="vertical-align: inherit;">此解决方案有一个局限性（我们将使用固定有轮子的一组伺服器）-伺服器不能旋转超过180度的角度，因此我们的机器人的运动将被限制为伺服器上轮子旋转长度的一半，但通常您需要更多。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将使用一套带有减速器的直流电动机来向前和向后移动。这些电机没有反馈。启动引擎后，我们无法说清机器人走了多远。您可以检测到在发动机运行期间机器人行进所需距离的时间，并在程序中使用这些延迟将机器人停在正确的位置。这种方法有一个明显的缺点-发动机转速取决于提供给它的电压和所需的努力。由于机器人中使用的电池会在一段时间后稍微放电并且其电压会降低，因此与此同时机器人将开始行驶较短的距离，因此有必要再次选择时间。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以使用的最简单的选择是机器人，经过所需的点，触摸触摸传感器，这将是正确位置的停止信号。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我通过在机器人上添加触摸传感器并对设计进行了更改，并沿机器人路径放置了元素，以便机器人在移动时通过触摸传感器触摸它们。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HA3jLus8px8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
视频显示，机器人到达“仓库”的尽头并用传感器触摸“墙”，然后又回到仓库的另一“墙”，并且在那里也进行了触摸。之后，重复该过程。因此，机器人肯定会“知道”两点-这些是触发触摸传感器时的点。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/b1/t9/dab1t9huyd38v6ayifpulmebjnq.jpeg" alt="Studuino的Scratch触摸程序"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个带有Scratch语言的Studuino触摸传感器的程序</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
有时，这足以解决任务。但是我们想要更多！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我对机器人的设计和程序进行了更改，这就是我得到的：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VFrxd_LQzo0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们更详细地考虑我决定对机器人的需求。我认为两个断点对我来说还不够，我还想要更多。为此，我使用了套件中随附的红外传感器。我将其固定在移动的平台上，然后在下方布置了一条纸，该纸上带有由标记预先绘制的黑线，机器人必须在该纸上停下来。我还从机器人上卸下了一个触摸传感器（在右侧）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/kn/1x/alkn1xf57oqajjs1jfb_k7n3e3q.jpeg" alt="红外机器人"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器人具有IR传感器</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
结果，我有一个三维打印机或数控机床的轴中的一个的装置的一个典型图。打开打印机电源后，打印机将不知道它在哪里，并一直向一侧移动（直到被限位开关触摸），然后打印机将该点视为零，并开始从该点开始计数其位置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种设计中，倒计时发生在纸上的黑色条纹上。这些波段的数量是事先已知的，因此当您到达最后一个波段时，可以返回到零参考点。下面介绍了Studuino的Scratch程序。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b9/tv/so/b9tvsopxgjuhgvbiga4dj22_kck.jpeg" alt="Studuino的Scratch IR机器人程序"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Studuino的Scratch IR机器人程序</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果仔细看一下程序，会看到40和50的难以理解的值，它们与IR传感器的值进行了比较。要了解这些数字，您需要记住一些有关可以从不同传感器读取哪些信号的信息。有数字和模拟传感器。数字传感器具有固定数量的位置，并且可以从一个位置急剧移动到另一位置，并且没有中间值。最常用的传感器有两个位置。触摸传感器是数字传感器中最引人注目的示例：在按下传感器之前，其逻辑值为1，在按下时-逻辑值为0（在此构造函数中，对于这些传感器，这是一种方案，但是有些方案是相反的：按下-1，未按下-0）。模拟传感器描述了信号与输出电压或电流之间的某种不可分割的关系，并且没有固定值。红外传感器发出模拟光信号，该信号可能取决于各种因素，例如环境光，电池电压甚至环境温度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scratch for Studuino的模拟信号被线性转换为数字，范围是0到100。这样做是为了简化与最终用户之间的工作（此编程环境最初是为教孩子而开发的）。在Arduino IDE中，发布了一个从0到1023的``诚实''值范围，该范围对应于Atmega168控制器中存在的10位ADC转换器。如果您查看数字信号和模拟信号之间的图形差异，那么很清楚为什么模拟信号是一个数值范围。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/3x/et/ur3xety3bijaa_dks5k0_evptss.jpeg" alt="模拟（左）和数字（右）信号"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模拟（左）和数字（右）信号</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
红外传感器用于确定黑色标签线，其原理是捕获反射信号。在图中可以清楚地看到两个元素：IR LED和IR光电探测器。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/3c/6x/on3c6xotvu7c0kki7or2ldclw9k.png" alt="红外传感器"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">红外传感器</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
如果您将障碍物放在反射红外光线的传感器前面，则障碍物反射的光线越好（取决于与障碍物的距离或障碍物的类型），红外光电探测器会吸收的光线越多，传感器返回的光就越多在调查期间对用户有价值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数字40和50是根据经验选择的。在我的情况下，传感器显示在白色表面上方，值约为65-75。在黑色表面上方，传感器返回的值在18-25范围内。数字40是传感器开始从白色表面转变为黑色的时刻，数字50是从黑色表面转变为白色的时刻。这些数字的边距很小，以便阻止传感器测量中的误差。在开发实际设计时，有必要考虑传感器获取读数的条件（外部照明，传感器的位置等），因为所有这些因素都会影响传感器的读数。您可能必须开发一种算法，以根据外部条件不断调整这些值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我将总结一个小的结果。考虑了两种解决机器人在仓库中移动问题的方法。这两个选项都需要附加的外部“标签”，以引导机器人。没有他们，有什么办法吗？例如，为了使机器人知道电动机轴转动了多少角度，并根据角度值决定停止或继续前进。有一个简单的解决方案-使用带有编码器（角度传感器）的电动机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该设备具有带齿轮的直流电动机，但没有编码器。我想到了这个主意：也许我可以尝试从设计人员的各个部分制作一个简单的编码器，尤其是因为该套件中的齿轮具有相当大的模块（齿尺寸）？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/pw/m7/3fpwm7n1mk6bd9rcxqx4lbu3vly.jpeg" alt="编码器的主要要素"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码器的主要要素</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主要问题是选择位置并固定红外传感器，使其在旋转时与齿轮齿相交。结果，我得到了一个测试设计，如下图所示。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tq/xl/e-/tqxle-maffh26bftiaj1knmhuvc.jpeg" alt="编码器测试模型"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码器测试模型</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
如上图所示，红外传感器是固定的，因此齿轮在旋转过程中会用齿穿过其工作测量区域。在红外传感器的对面（位于齿轮的另一侧），我另外设置了一个障碍物来反射红外线，以从传感器获取更多正确的数据。当齿轮旋转并且IR传感器测量信号反射时，当传感器前面有一个齿时将有较大的值，而当齿轮齿之间有一个``孔''时将有较小的值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用于编码器的程序是在Arduino IDE中开发的。</font><font style="vertical-align: inherit;">为了测试我的想法的效率，我编写了一个简单的程序，启动引擎以恒定速度旋转并从IR传感器连续输出值到调试控制台。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序文字</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> M1_A        2       <span class="hljs-comment">//   1   1</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> M1_B        4       <span class="hljs-comment">//   2   1</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> M1_PWM      3       <span class="hljs-comment">//       1</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SENSOR_PIN  A4      <span class="hljs-comment">//     IR-sensor</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
  Serial.begin(<span class="hljs-number">9600</span>);       <span class="hljs-comment">//      </span>
  pinMode(M1_A, OUTPUT);    <span class="hljs-comment">//       " "</span><font></font>
  pinMode(M1_B, OUTPUT);    <font></font>
  analogWrite(M1_PWM, <span class="hljs-number">100</span>); <span class="hljs-comment">//    </span>
  digitalWrite(M1_A, HIGH); <span class="hljs-comment">//    </span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2000</span>; i++) {    <span class="hljs-comment">//   2000    -</span>
    Serial.println(analogRead(SENSOR_PIN));   <span class="hljs-comment">//      </span><font></font>
  }<font></font>
  digitalWrite(M1_A, LOW);  <span class="hljs-comment">//   </span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据程序在控制台上显示的数据，我得到了下图：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/kf/tc/atkftc0d8gxexmeimdiirwuyfbw.png" alt="齿轮旋转过程中红外传感器值的图表"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">齿轮旋转过程中红外传感器的值变化图</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该图的性质类似于齿轮齿的形状，这表明确实可以使用设计者提供的齿轮作为编码器盘，使用此类数据来控制发动机的旋转。为了消除``反弹''磁滞现象，其实现方式如下（图中的符号）：MIDDLE是IR传感器读数的最大值和最小值之间的平均值，WIDTH是从MIDDLE到较大或较小值的偏差以创建特定的``误差带'' »信号测量（该频带的总宽度为2 * WIDTH）。 MIDDLE和WIDTH将用于引擎旋转控制算法。发动机旋转过程中用于计算齿轮齿数的算法可以表示如下：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/cp/2a/rscp2atjd50elx___64gsjrvpra.png" alt="在发动机旋转过程中计算齿轮齿数的算法"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于计算发动机旋转过程中齿轮齿数</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
的算法，该算法使用以下符号：</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prev_state-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先前的档位状态；</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cur_state-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">齿轮的当前状态；</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">count-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">齿轮齿数；</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tmp-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">红外传感器读数。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此算法中，计算齿轮齿数的原理基于恒定的红外传感器读数读数，以及当信号电平超过“误差带”的上限或下限时cur_state变量的值变化。</font><font style="vertical-align: inherit;">如果该值超过上限，则变量cur_state等于1，这表示齿轮齿；当超出下边界时，变量cur_state等于0，这意味着齿轮齿之间的间隙。</font><font style="vertical-align: inherit;">仅当cur_state变量的状态更改时，才添加count变量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下面介绍了使用此算法的程序。</font><font style="vertical-align: inherit;">在其中，我描述了一个子例程，该例程等待直到引擎将齿轮旋转预定齿数，然后将控制权转移到主程序。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序文字</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> M1_A        2       <span class="hljs-comment">//   1   1</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> M1_B        4       <span class="hljs-comment">//   2   1</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> M1_PWM      3       <span class="hljs-comment">//       1</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SENSOR_PIN  A4      <span class="hljs-comment">//     IR-sensor</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MIDDLE      550     <span class="hljs-comment">//         </span></span>
                            <span class="hljs-comment">// ""</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WIDTH       50      <span class="hljs-comment">//      ,   </span></span>
      <span class="hljs-comment">//    -     </span>
      <span class="hljs-comment">// </span><font></font>
<font></font>
<span class="hljs-keyword">int</span> enc_tooth = <span class="hljs-number">0</span>;          <span class="hljs-comment">// ,    </span>
<span class="hljs-keyword">int</span> cur_state = <span class="hljs-number">0</span>;          <span class="hljs-comment">//   :  (1)  "" (0)</span>
<span class="hljs-keyword">int</span> prev_state = <span class="hljs-number">0</span>;         <span class="hljs-comment">//   </span>
<span class="hljs-keyword">int</span> tmp;                    <span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init_enc</span><span class="hljs-params">()</span> </span>{<font></font>
  enc_tooth = <span class="hljs-number">0</span>;<font></font>
  cur_state = <span class="hljs-number">0</span>;<font></font>
  prev_state = <span class="hljs-number">0</span>;<font></font>
<font></font>
  <span class="hljs-comment">//         cur_state</span>
  <span class="hljs-comment">//    ,   = 1,    ""      </span>
  <span class="hljs-comment">//   0      </span>
  <span class="hljs-keyword">if</span> (analogRead(SENSOR_PIN)&gt;MIDDLE) {<font></font>
    prev_state = <span class="hljs-number">1</span>;<font></font>
    cur_state = <span class="hljs-number">1</span>;<font></font>
    enc_tooth++;<font></font>
  }  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">wait_by_count</span><span class="hljs-params">(<span class="hljs-keyword">int</span> count)</span> </span>{
  <span class="hljs-comment">//       count,       IR </span>
  <span class="hljs-comment">//           ""</span>
  <span class="hljs-keyword">while</span> (enc_tooth &lt;= count) {
    <span class="hljs-comment">//    IR-    </span><font></font>
    tmp = analogRead(SENSOR_PIN);<font></font>
<font></font>
    <span class="hljs-comment">//       +  ,    </span>
    <span class="hljs-keyword">if</span> ((tmp + WIDTH) &gt; MIDDLE) {<font></font>
      cur_state = <span class="hljs-number">1</span>;<font></font>
    } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">//       -  ,    ""</span>
      <span class="hljs-keyword">if</span> ((tmp - WIDTH) &lt; MIDDLE) {<font></font>
        cur_state = <span class="hljs-number">0</span>;<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//       ,      </span>
    <span class="hljs-comment">// ,     ""   -  ""  </span>
    <span class="hljs-keyword">if</span> (cur_state != prev_state) {
    <span class="hljs-comment">//   ,   0  - ,     </span>
    <span class="hljs-comment">// </span><font></font>
      enc_tooth += cur_state;<font></font>
    <font></font>
    <span class="hljs-comment">//        </span><font></font>
      prev_state = cur_state;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">//        </span>
  Serial.begin(<span class="hljs-number">115200</span>);<font></font>
<font></font>
  <span class="hljs-comment">//        ""</span><font></font>
  pinMode(M1_A, OUTPUT);<font></font>
  pinMode(M1_B, OUTPUT);<font></font>
<font></font>
  <span class="hljs-comment">//   </span><font></font>
  init_enc();<font></font>
<font></font>
  <span class="hljs-comment">//    </span>
  analogWrite(M1_PWM, <span class="hljs-number">100</span>);<font></font>
 <font></font>
  <span class="hljs-comment">//    ,      1 (    </span>
  <span class="hljs-comment">//  0)</span>
  digitalWrite(M1_A, <span class="hljs-number">1</span>);<font></font>
<font></font>
  <span class="hljs-comment">// ,    30  </span>
  wait_by_count(<span class="hljs-number">30</span>);<font></font>
  <font></font>
  <span class="hljs-comment">//   </span>
  digitalWrite(M1_B, <span class="hljs-number">1</span>);<font></font>
<font></font>
  Serial.print(<span class="hljs-string">"  = "</span>);<font></font>
  Serial.println(enc_tooth);<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
程序启动发动机，等待直到齿轮旋转30齿-齿轮中的齿数达到一定数量，然后停止电动机。</font><font style="vertical-align: inherit;">以下是演示程序操作的视频：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/wS0eODG7zzc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在粘贴在齿轮上的白纸上，您可以跟踪其旋转360度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于这一点，我想结束本文。</font><font style="vertical-align: inherit;">总之，我可以说我不仅止于编码器模型。</font><font style="vertical-align: inherit;">一个成熟的机器人平台组装了两个电机和两个编码器（每个车轮一个），并编写了一个程序，根据编码器使车轮旋转同步，但这是另一篇文章的主题。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/zy/b3/stzyb3ery-ssclsmbwlzghisq24.jpeg" alt="具有基于红外传感器的编码器的机器人平台"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有基于红外传感器的编码器的机器人平台</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为机器人技术的教育设计师，这对于想要参加此类课程的儿童（成人，成年人）是一个不错的选择，尤其是因为制造商已尽一切努力使可以使用该产品的人的年龄范围最大化（存在不同的编程环境） ）</font><font style="vertical-align: inherit;">您可以从最简单，最基础的元素开始，获得基本知识后，再进入机器人技术和电子技术的另一个发展阶段。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN503958/index.html">开放式API游戏：Swagger Play</a></li>
<li><a href="../zh-CN503960/index.html">Linux如何对字符串排序</a></li>
<li><a href="../zh-CN503962/index.html">自动驾驶-汽车炒作，但需要数据中心网络服务</a></li>
<li><a href="../zh-CN503964/index.html">数据存储-CRUD（创建读取更新删除）</a></li>
<li><a href="../zh-CN503966/index.html">社交监控应用是由垃圾车跟踪器制作的</a></li>
<li><a href="../zh-CN503970/index.html">PuppetConf2016。面向系统管理员的Kubernetes。第1部分</a></li>
<li><a href="../zh-CN503972/index.html">在4个社交网络中进行流式测试并选择最佳选项</a></li>
<li><a href="../zh-CN503980/index.html">通过“即兴的”手段监控远程站点的温度</a></li>
<li><a href="../zh-CN503982/index.html">关于兽人和框架</a></li>
<li><a href="../zh-CN503988/index.html">“旋光”如何进入光网络</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>