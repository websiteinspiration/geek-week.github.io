<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéê ‚õπüèΩ üëåüèæ Gasflussregler 5-mal billiger als kommerzielle L√∂sungen üß§ üçà üç®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gasflussregler (RRG) sind so ausgelegt, dass sie eine benutzerdefinierte Durchflussrate aufrechterhalten. RWGs werden in Industrie- und Forschungslabo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gasflussregler 5-mal billiger als kommerzielle L√∂sungen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487402/"><img src="https://habrastorage.org/webt/-h/ul/-l/-hul-lbhy5ca5cfsciofuph5xte.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gasflussregler (RRG) sind so ausgelegt, dass sie eine benutzerdefinierte Durchflussrate aufrechterhalten. RWGs werden in Industrie- und Forschungslabors eingesetzt, um die Gasversorgung von Flaschen und Autobahnen zu organisieren. Die Ger√§te von Eltochpribor, MKS, Bronkhorst usw. sind auf dem Markt vertreten. Die Kosten f√ºr diese Ger√§te betragen 1000-2500 USD. Ziel dieser Arbeit ist es, einen Gasflussregler aus besser zug√§nglichen Komponenten zu schaffen. Die Idee ist, ein R√ºckkopplungssystem zu organisieren, das ein Proportionalventil und einen Durchflussmesser umfasst. Im Folgenden finden Sie eine kurze Beschreibung der Hardware und Software des Systems, mit der diese f√ºr alle Personen reproduziert werden k√∂nnen, die die RRG f√ºr ihre Aktivit√§ten verwenden. Alle Quellcodes sind auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verf√ºgbar </font><font style="vertical-align: inherit;">.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verwendeten SMC-Produkte, Ventile der PVQ-Serie und Durchflussmesser der PFM5-Serie ohne Angabe. </font><font style="vertical-align: inherit;">Zwei RWGs wurden mit einstellbaren Durchflussbereichen von 0,2 bis 5 l / min (PVQ13 + PFM510) und 1 bis 50 l / min (PVQ31 + PFM550) zusammengebaut (siehe Abbildung). </font><font style="vertical-align: inherit;">Die Kosten f√ºr einen Durchflussregler k√∂nnen von oben auf 100 USD (PVQ31-Ventil) + 80 USD (PFM5-Meter) + 20 USD (Arduino Nano-Mikrocontroller, Stromversorgung und Funkkomponenten) = 200 USD gesch√§tzt werden. </font><font style="vertical-align: inherit;">Alles, was unten beschrieben wird, gilt f√ºr die RWG 1-50 l / min. </font><font style="vertical-align: inherit;">Die Erstellung eines Reglers mit 0,2 bis 5 l / min sowie anderer Regler aus √§hnlichen Komponenten erfolgt nach demselben Schema, kann sich jedoch in geringf√ºgigen Details unterscheiden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware</font></font></h4><br>
<img src="https://habrastorage.org/webt/ij/he/sy/ijhesyjtgz47jzjpquizlets53e.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hardware ist in der Abbildung dargestellt und besteht aus:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proportionalventil PVQ31 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PFM550 Durchflussmesser </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filter </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzteil (24V, 1A) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stromregelkreise </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Nano Mikrocontroller und seine Leistungsschemata </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/7t/3n/hc/7t3nhc2fexnzhtff08igsq7gw9q.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Stromkreis zum Anschlie√üen von Bauteilen ist in der Abbildung dargestellt. </font><font style="vertical-align: inherit;">Zur Stromversorgung des Stromkreises wird eine 24-V-1-A-Gleichstromquelle verwendet, was bei einem Ventilverbrauch von weniger als 200 mA und einem Messger√§t von weniger als 35 mA mehr als ausreichend ist. </font><font style="vertical-align: inherit;">Die Proportionalventile der PVQ-Serie sind stromgesteuert. </font><font style="vertical-align: inherit;">Gem√§√ü der Dokumentation wird nicht empfohlen, sie durch Spannungsregelung zu steuern. </font><font style="vertical-align: inherit;">Die Stromregelung kann unter Verwendung der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ausf√ºhrlicher beschriebenen </font><font style="vertical-align: inherit;">Schaltung implementiert werden </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die Stromsteuerschaltung ist auf der allgemeinen elektrischen Schaltung (Fig. 3) durch ein gestricheltes Rechteck hervorgehoben. </font><font style="vertical-align: inherit;">Die Ventile der PVQ-Serie sind √ºber zwei Stromkabel verbunden: rot - DC +, schwarz - DC-.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Stromst√§rke wird √ºber das PWM-Signal geregelt, das vom analogen Pin des Mikrocontrollers erzeugt wird. Standardm√§√üig erzeugen ATmega328-basierte Controller (Arduino UNO / Nano / Pro Mini) ein 8-Bit-PWM-Signal (0-255-Wert) mit einer Frequenz von 488 oder 976 Hz, abh√§ngig vom Pin. Eine geringe PWM-Signalbreite verringert die Genauigkeit der Ventilsteuerung. Niedrige Frequenz f√ºhrt zu seinem Summen. Diese Werte k√∂nnen programmgesteuert auf 10 Bit (0-1023) bzw. 15,6 kHz erh√∂ht werden. Wir haben eine Frequenz von 7,8 kHz verwendet. Eine Beschreibung der Befehle, die in die </font></font><code>setup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino-Firmware- </font><font style="vertical-align: inherit;">Funktion eingef√ºgt werden m√ºssen, finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durchflussmesser der Serie PFM5 verf√ºgen √ºber 2 Signalkabel (schwarz - Analogausgang, Wei√ü - Reaktionszeiteinstellung (nicht verwendet)) und zwei Stromkabel (braun - DC +, blau - DC-). Wird von einer 24-V-Gleichstromquelle gespeist. Der Durchflussmesser liefert ein analoges Signal im Bereich von 1 bis 5 V. Ein Wert von 1 V entspricht einer Gasdurchflussrate von Null, 5 V - das Maximum f√ºr diesen Z√§hler. Der Dokumentation zufolge ist das Verh√§ltnis zwischen Durchfluss und Spannung linear. In der Zwischenzeit lohnt es sich, den Durchflussmesser regelm√§√üig zu kalibrieren. Das analoge Signal vom Durchflussmesser (schwarzes Kabel) wird von einem 10-Bit-Arduino-Analogstift (0-1023) zur Verarbeitung und Anzeige empfangen. Der wei√üe Draht dient zum Einstellen der Reaktionszeit, wir verwenden ihn nicht. In diesem Fall betr√§gt die Antwortzeit 50 ms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Arduino-Platine sollte √ºber einen 5-V-Pin mit Strom versorgt werden. Die Versorgungsspannung sollte 5,5 V nicht √ºberschreiten. Diese Leistung kann vom Ventil-Netzteil und vom Durchflussmesser √ºber den Stabilisator L7805 bereitgestellt werden (siehe Abbildung 3). H√∂chstwahrscheinlich ben√∂tigen Sie einen K√ºhler am Stabilisator. Die Stromversorgung √ºber den USB-Anschluss des w√§hrend des Tests verwendeten Computers (Abb. 2) ist nicht w√ºnschenswert, da in diesem Fall die Referenzspannung bei Verwendung des ADC instabil ist. Weitere Informationen zur Stromversorgung der Platine finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Softwareteil</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Softwareteil besteht aus der Firmware des Arduino Nano-Mikrocontrollers und einer grafischen Benutzeroberfl√§che, die auf einem PC ausgef√ºhrt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das auf den Mikrocontroller heruntergeladene Programm f√ºhrt zyklisch die folgenden Aktionen aus:</font></font><br>
<br>
<ol>
<li>       ,   </li>
<li> ,        </li>
<li>   ,               - </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das System kann im manuellen und automatischen Modus betrieben werden. W√§hrend des manuellen Betriebs sollte der Wert der gew√ºnschten Ventil√∂ffnung, ausgedr√ºckt durch eine Variable </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023), </font><font style="vertical-align: inherit;">an die serielle Schnittstelle gesendet werden </font><font style="vertical-align: inherit;">. Der Wert dieser Variablen bestimmt die Belegung des PWM-Signals, das √ºber den Analogausgang des Mikrocontrollers an den Stromregelkreis und den Proportionalventilbefehl gesendet wird </font></font><code>analogWrite(valvepin, valve)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nach dem √ñffnen bleibt das Ventil in der eingestellten Position, bis ein neuer Befehl √ºber die serielle Schnittstelle empfangen wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um in den automatischen Betrieb zu wechseln, muss eine negative Nummer an die serielle Schnittstelle gesendet werden </font></font><code>-targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Variabler Wert</font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liegt im Bereich von 0 bis 1023 und bestimmt den Gasdurchsatz, der eingehalten werden soll. Der tats√§chliche Gasdurchsatz wird durch die Durchflussmesserwerte bestimmt, die mit einem Befehl </font></font><code>realflow = analogRead(fmpin)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023) </font><font style="vertical-align: inherit;">vom Analogeingang des Mikrocontrollers abgelesen werden </font><font style="vertical-align: inherit;">. Im automatischen Modus ist das System bestrebt, die Gleichheit zwischen </font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und durch </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steuerung des Proportionalventils </font><font style="vertical-align: inherit;">aufrechtzuerhalten </font><font style="vertical-align: inherit;">. Der Ventil√∂ffnungswert wird mit dem Proportional-Integral-Differenzierungsregler (PID) berechnet. √úber den PID-Regler k√∂nnen Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">. Die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">GyverPID-</font></a><font style="vertical-align: inherit;"> Bibliothek wird zur Implementierung des Controllers verwendet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit einigen √Ñnderungen und Erg√§nzungen. Da die Bibliothek ge√§ndert wurde, verwenden Sie die an diesen Code angeh√§ngte Bibliothek, die nicht √ºber den obigen Link heruntergeladen wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den PID-Regler verwenden zu k√∂nnen, m√ºssen die Koeffizienten der Proportional- </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Integral- </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und Differentialkomponenten </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sowie die Iterationszeit ausgew√§hlt werden </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Der Wert der Variablen </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muss abh√§ngig von der Tr√§gheit des Systems ausgew√§hlt werden. Je tr√§ger das System, desto mehr sollte es sein </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Basierend auf den Bewertungen und Testergebnissen f√ºr das betreffende Ger√§t haben wir Werte </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 100-330 ms gew√§hlt. Die Koeffizienten </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sind , </font><font style="vertical-align: inherit;">auf einem festen Wert ausgew√§hlt</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und h√§ngen wesentlich vom System ab. </font><font style="vertical-align: inherit;">Empfehlungen zur Auswahl der Koeffizienten finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der vom Mikrocontroller zyklisch ausgef√ºhrte Algorithmus lautet also wie folgt:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(    )<font></font>
	   <span class="hljs-function">inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &gt;= <span class="hljs-number">0</span> &amp;&amp; inp &lt; <span class="hljs-number">1023</span>)</span>
		  
		    inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &lt;= <span class="hljs-number">0</span> &amp;&amp; inp &gt;= <span class="hljs-number">-1023</span>)</span>
		  
		     -inp 
<span class="hljs-title">if</span><span class="hljs-params">(  &amp;&amp;      dtpid )</span>
	      -
	    
<span class="hljs-title">if</span><span class="hljs-params">(     dt )</span>
	   
	   
	   
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die grafische Benutzeroberfl√§che wird in Python unter Verwendung des grafischen PyQt-Frameworks geschrieben. </font><font style="vertical-align: inherit;">Das Design wurde im Qt Designer-Programm erstellt. Anschlie√üend wurde der Code der .ui-Datei in eine Python-Datei konvertiert. </font><font style="vertical-align: inherit;">Eine Einf√ºhrung in die GUI-Entwicklung und die Verwendung von PyQt finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die grafische Oberfl√§che interagiert mit der Arduino-Firmware √ºber die serielle Schnittstelle unter Verwendung der Bibliothek </font></font><code>pyserial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das Python-Programm f√ºhrt Folgendes aus:</font></font><br>
<br>
<ol>
<li>      </li>
<li>          ,        ,     </li>
<li>     0-1023,   ,    </li>
<li>  .3     </li>
<li>    ,     ( 0-1023) </li>
<li>  .5            </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Code f√ºr die Verbindung mit der seriellen Schnittstelle wird </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier ausgeliehen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Modul ist f√ºr die √úbertragung von Benutzereinheiten in den Bereich 0-1023 vorgesehen </font></font><code>units.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dieses Modul erleichtert das Hinzuf√ºgen neuer Einheiten. </font><font style="vertical-align: inherit;">Der Benutzer muss den Namen der Einheiten und die Umrechnungsformel von 0-1023 in die neuen Einheiten angeben. </font><font style="vertical-align: inherit;">Das Modul enth√§lt detaillierte Kommentare. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die vom Durchflussmesser empfangenen und von der Mikrocontroller-Firmware an die serielle Schnittstelle ausgegebenen Daten werden vom Python-Programm vom Port gelesen und nach der Konvertierung der Einheiten in Text- und Grafikform angezeigt. </font><font style="vertical-align: inherit;">Eine Bibliothek wird verwendet, um ein Diagramm des Stromverbrauchs zu zeichnen </font></font><code>pyqtgraph</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um mit RRG arbeiten zu k√∂nnen, m√ºssen Sie: den Mikrocontroller flashen, die Stromversorgung anschlie√üen, das Python-Programm ausf√ºhren und eine Verbindung zur seriellen Schnittstelle herstellen. Danach kann der Benutzer den Betriebsmodus (manuell oder automatisch) ausw√§hlen und den erforderlichen Ventil√∂ffnungswert im manuellen Betriebsmodus oder den unterst√ºtzten Durchflusswert im automatischen Modus einstellen. Der aktuelle Gasdurchsatz wird im entsprechenden Feld angezeigt und in der Grafik angezeigt. Das Diagramm wird zyklisch aktualisiert, nachdem die angegebene Anzahl von Punkten erreicht wurde. Das Diagramm wird gel√∂scht und die Zeichnung beginnt erneut. Der Benutzer kann die verwendeten Einheiten ausw√§hlen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/kd/jf/1skdjfks-dwbv2_4bxv5lko9rso.png" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Abbildung zeigt das Erscheinungsbild der grafischen Benutzeroberfl√§che und eine grafische Darstellung der im Automatikmodus erhaltenen Gasdurchflussmenge sowie die Umschaltung des RGG zwischen verschiedenen Werten der unterst√ºtzten Durchflussmenge. </font><font style="vertical-align: inherit;">Die Ergebnisse sind in Einheiten von 0-1023 angegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die M√∂glichkeiten zur Aufrechterhaltung eines konstanten Gasdurchflusses zu demonstrieren, haben wir den Fall betrachtet, in dem der Durchfluss, wenn das Proportionalventil durch einen konstanten Wert ge√∂ffnet wird, ‚Äûschwimmt‚Äú, wie auf der linken Seite des Diagramms (x &lt;950) in der folgenden Abbildung gezeigt. </font><font style="vertical-align: inherit;">Das Ergebnis des Betriebs der automatischen Aufrechterhaltung der eingestellten Durchflussrate ist auf der rechten Seite des Diagramms zu sehen (x&gt; 1000). </font><font style="vertical-align: inherit;">Tests haben gezeigt, dass die Abweichung von der eingestellten Durchflussmenge im automatischen Haltemodus nicht mehr als 2% betr√§gt.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/ni/5w/cgni5wyzma05n_8uxijteltnacu.png" alt="Bild"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bemerkungen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung des Arduino Nano-Mikrocontrollers ist nicht erforderlich, da nur ein kleiner Teil seiner Pins beteiligt ist. </font><font style="vertical-align: inherit;">Andererseits w√§re es besser, Mikrocontroller mit einer gr√∂√üeren Bitkapazit√§t an analogen Ein- / Ausg√§ngen zu verwenden, um die Genauigkeit der Messung und Einstellung zu erh√∂hen. </font><font style="vertical-align: inherit;">Wenn Sie den Typ des Mikrocontrollers √§ndern, muss m√∂glicherweise ein eigener PID-Regler implementiert werden. Dies sollte keine Schwierigkeiten verursachen, da der Algorithmus einfach ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Entwicklungsphase wurde der Stromkreis auf einem Steckbrett montiert (siehe Abbildung 2). </font><font style="vertical-align: inherit;">F√ºr die weitere Verwendung muss der Stromkreis gel√∂tet und im Geh√§use platziert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Autoren des Artikels sind weder Elektronikingenieure noch Programmierer. Konstruktive Tipps zur Verbesserung sind daher willkommen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zus√§tzliche Materialien</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Quellcodes f√ºr die Arduino-Firmware- und Python-Programme sowie die Dokumentation f√ºr die verwendeten Durchflussmesser und Proportionalventile sind auf </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">GitHub</font></a><font style="vertical-align: inherit;"> verf√ºgbar</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danksagung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir danken unseren Kollegen f√ºr die Idee des in dieser Arbeit implementierten Systems. </font><font style="vertical-align: inherit;">AlexGyver und andere Benutzer teilen gro√üz√ºgig ihre Erfahrungen mit den Informationen, die wir in unserer Arbeit verwendet haben.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit einem R√ºckkopplungssystem, das aus einem Proportionalventil, einem Durchflussmesser und einem Mikrocontroller besteht, k√∂nnen Sie RRG erstellen, um einen bestimmten Gasfluss aufrechtzuerhalten. </font><font style="vertical-align: inherit;">Tests zeigten eine Abweichung von der erforderlichen Durchflussrate innerhalb von weniger als 2%. </font><font style="vertical-align: inherit;">Die Kosten des Systems betrugen weniger als 200 USD. </font><font style="vertical-align: inherit;">Der zusammengebaute Prototyp zeigte Funktionsf√§higkeit unter einer Vielzahl von Bedingungen. </font><font style="vertical-align: inherit;">Eine weitere Verwendung kann eine Verfeinerung erfordern, einschlie√ülich Verdrahtung der Schaltkreise, Herstellung des Geh√§uses usw.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487388/index.html">Nat√ºrliche Entwicklung: Wie man vom E-Learning zum Wissensmanagement √ºbergeht</a></li>
<li><a href="../de487390/index.html">Webkomponenten ohne Shadow DOM</a></li>
<li><a href="../de487392/index.html">Was m√∂chte Magnet √ºber seine Kunden wissen?</a></li>
<li><a href="../de487394/index.html">√úbersetzung von Andrew Un's Buch, Leidenschaft f√ºr maschinelles Lernen, Kapitel 34 und 35</a></li>
<li><a href="../de487400/index.html">Master SCADA 4D. Gibt es Leben auf ARM?</a></li>
<li><a href="../de487404/index.html">GoLang und OpenCV (OpenVino && Cuda)</a></li>
<li><a href="../de487406/index.html">Reverse Engineering eines Heimrouters mit binwalk. Vertrauen Sie der Software Ihres Routers?</a></li>
<li><a href="../de487408/index.html">Aufbau einer fehlertoleranten IT-Infrastruktur. Teil 3. Organisation des Routings auf VyOS-Routern</a></li>
<li><a href="../de487412/index.html">Freund BESTELLEN SIE MIT mit Indizes</a></li>
<li><a href="../de487414/index.html">Computerquests als gro√üartiges Werkzeug zum Erlernen englischer W√∂rter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>