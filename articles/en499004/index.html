<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🤝‍👨🏾 👨🏾‍🎤 🕵🏼 How to have fun in isolation, or transfer data using a sound card 📪 ↖️ 🦏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habr. 
 
 After a recent publication on OFDM transmission , it became interesting to check how it would be most efficient to transmit data over the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to have fun in isolation, or transfer data using a sound card</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499004/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hi Habr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After a recent publication on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OFDM transmission</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , it became interesting to check how it would be most efficient to transmit data over the air. We will try different types of modulation, and see which ones are better for transferring data from one end of the apartment or office to the other. For tests, a laptop, smartphone and MultiPSK program will be enough. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y7/f-/tt/y7f-ttteoka8sd8976clugimirc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For those who are interested in how this works, continued under the cut.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For tests, we will use the MultiPSK program, which is convenient in that it supports a huge number of different communication standards, both amateur (they are available for both reception and transmission) and professional (only reception is available). Of course, in order not to make the article gigantic, I will choose only the most popular types of modulation, and we will see what happens. MultiPSK was originally intended for </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">radio communications.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">why the sound card should be connected to the receiver or transmitter, but nothing prohibits reproducing the signal directly from the speakers. </font><font style="vertical-align: inherit;">The test will be quite simple - the plain text “1234567890” is encoded in different ways, the signal is played on a PC, and recorded by a smartphone at the other end of the apartment. </font><font style="vertical-align: inherit;">Of course, anyone can repeat the experiments described below, no special equipment is required for this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's get started.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frequency Modulation (FSK, Frequency Shift Keying)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As the name suggests, the essence of modulation is to change the frequency of the signal. The simplest method available in MultiPSK is RTTY. In this case, we transmit data by switching between two frequencies at a certain speed. On the spectrum, this can be seen very clearly. Let's see what happens to the signal when it is transmitted through the air. At the top, the original signal, received from below: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/we/zw/mk/wezwmk0ykmn63qx99ikuh5gdg68.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the obvious attenuation, there is a more non-obvious change in the amplitude - the signal has become "torn", the output has turned out to be something like beats. It is interesting that they appear at moments of frequency change, at times when the frequency does not change, the amplitude changes are minimal. With what it is connected, it is difficult to say. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speaking of the spectrum, it was distorted, although in principle, the waveform can be guessed:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ch/ln/wi/chlnwi9dxod5zdh3uxfbie6zey8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see if MultiPSK can decode the recorded sound. </font><font style="vertical-align: inherit;">Alas, no, the output is just "garbage." </font><font style="vertical-align: inherit;">Various attempts to normalize and filter did not lead to success either: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/c1/uj/xuc1ujloouaoe1_tkxocsn7fw4i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next signal that is interesting to try is MFSK, frequency modulation, in which the number of frequencies is more than 2x. </font><font style="vertical-align: inherit;">The picture “before” and “after” the transfer is approximately similar to the previous result. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y9/5m/gq/y95mgqusdxarodhjwx6iwr8fark.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also see amplitude beats, probably arising in the process of sound re-reflection. </font><font style="vertical-align: inherit;">But there is a noticeable plus - with more frequencies, the decoding of the signal is much more confident. </font><font style="vertical-align: inherit;">With the exception of “garbage” in the pause between signals, the data itself is received without error. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w8/gw/6x/w8gw6xjlnux8amgjecdvvuqnppk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps this is also due to the transmission rate or other decoding algorithm, but the result is quite interesting.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phase Modulation (PSK, Phase Shift Keying)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next type of modulation is phase, in which a sinusoidal signal is transmitted, and the information is encoded by changing the phase. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kx/-n/l1/kx-nl18gvufrtnnqgikva_uquow.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BPSK signal “before” and “after” the transmission: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/hz/a8/udhza8-ed9_1zc_1wkrrqihcwmk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recognition result: 20-40% of characters were detected, from the line 1234567890, as you can see, 3, 4, 7 and 9 can be distinguished. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f7/rn/la/f7rnlay8hqwg-ionpk0daxpgyly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The spectrum is not shown, because </font><font style="vertical-align: inherit;">for BPSK phase modulation, it is an almost straight line. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The general idea, I think, is understandable, and it makes no sense to consider more complex types of signals - it is clear that there will be no stable decoding. </font><font style="vertical-align: inherit;">However, purely for "sports interest", consider an analog signal.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSTV (Slow Scan Television)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This mode in its essence resembles a fax, and a change in frequency here encodes the brightness or color of the image over time. </font><font style="vertical-align: inherit;">It is interesting to see how distorted the image is after transmission, and whether it will remain readable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The “before” and “after” signal: A </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cn/xt/fk/cnxtfkbkcfa6mbwdfsabgm2zv38.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
picture with a cat, and an attempt to receive it: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/au/t6/u6/aut6u66slna9nz82qyfrjbd8iko.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With due imagination, the outline of the cat can probably be guessed. </font><font style="vertical-align: inherit;">Although if you transmit something simpler, such as a "black square", it will probably be easier to recognize the image. </font><font style="vertical-align: inherit;">By the way, this is one of the advantages of analog data transmission over digital - where the "digit" will no longer work, in the analogue, among the noises, the human eye or ear may well catch a useful signal.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Addition: frequency and time characteristics</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speaking of the analog signal, as suggested in the comments, it is possible to check the amplitude-frequency response of the “transmission channel” if white noise and a tone varying in height are reproduced. </font><font style="vertical-align: inherit;">Such a signal is easy to generate in any audio editor. </font><font style="vertical-align: inherit;">For the test, the file was played at one end of the apartment, and the record was made at the other. </font><font style="vertical-align: inherit;">The result is quite interesting, as it is interesting that high frequencies are not audible at all (in my case the border is somewhere around 14KHz), and data transmission to them is still possible in principle: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-d/ii/ui/-diiui6oxrkoc_a2hdbs4etrfdm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And finally, a no less interesting result is obtained if a short sound pulse is generated : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mo/n_/li/mon_lipxsovhuxlqvixgzy1huok.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When applying a pulse with a length of 0.01 s, the echo lasts almost 10 times longer. </font><font style="vertical-align: inherit;">Of course, this should also be taken into account when choosing a data rate.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, the transmission of sound through the air (as probably through water), is not so simple, due to reflections, attenuation and other effects. </font><font style="vertical-align: inherit;">Despite the apparent “frivolity” of the task, reliably transmitting data even 10 meters is not so simple due to signal distortion. </font><font style="vertical-align: inherit;">The MFSK frequency modulation method has proven to be the most stable. </font><font style="vertical-align: inherit;">And it seems that it was not only me who conducted similar experiments, an article on the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex.Station activation protocol</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> says that it uses the same method of data transfer. </font><font style="vertical-align: inherit;">But in general, the simpler the modulation and the lower the speed, the greater the chance that the data will be received without errors. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Those who wish can continue to experiment on their own, MultiPSK is easy to find on the Internet, the number of transmission standards supported by it is quite large.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All successful experiments.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en498984/index.html">Stealth School: 5 types of gadgets in stealth games</a></li>
<li><a href="../en498988/index.html">Overseas job search and immigration to Canada</a></li>
<li><a href="../en498990/index.html">Gamepad support for Omega Red emulator</a></li>
<li><a href="../en498996/index.html">Difference Between Web Sockets and Socket.IO</a></li>
<li><a href="../en498998/index.html">Rust 1.43.0 release: improved compiler and type inference for primitives, item in macros</a></li>
<li><a href="../en499008/index.html">Why developers are so slow: common problems and their solutions</a></li>
<li><a href="../en499010/index.html">We study the Mediastreamer2 VoIP engine. Part 11</a></li>
<li><a href="../en499014/index.html">23 difficult questions for JavaScript interviews</a></li>
<li><a href="../en499016/index.html">Integration with ESIA for .Net: easier than it sounds</a></li>
<li><a href="../en499018/index.html">6 home sports apps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>