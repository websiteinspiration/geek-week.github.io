<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèº üë®üèΩ üìø Sobre puertos y encriptaci√≥n en servidores de correo ‚ÜñÔ∏è üíó üë©üèΩ‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Al configurar el servidor de correo saliente en el cliente de correo, ver√° 3 opciones de cifrado, sin cifrado, SMTPS y STARTTLS, as√≠ como 3 puertos po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sobre puertos y encriptaci√≥n en servidores de correo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495256/"><img src="https://habrastorage.org/webt/pj/a_/os/pja_osqbo80fknqvjnkwxjfdqma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al configurar el servidor de correo saliente en el cliente de correo, ver√° 3 opciones de cifrado, sin cifrado, SMTPS y STARTTLS, as√≠ como 3 puertos posibles: 25, 465, 587. Qu√© elegir y para qu√©, comprendamos.</font></font><br>
 <a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√≠deo</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/GvyQvKyrEaI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anterior &lt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modos operativos del servidor de correo</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Siguiente&gt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registros DNS para servidores de correo</font></font></a><br>
<img src="https://habrastorage.org/webt/xd/iz/0b/xdiz0b5aiuipl9f9oylqxannogi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cuando env√≠a un mensaje a alguien, su cliente de correo usa ESMTP para enviar este mensaje, y luego su servidor de correo usa el mismo protocolo si necesita enviar este mensaje a otro servidor. </font><font style="vertical-align: inherit;">Y aunque todos hablan y escriben SMTP, generalmente se trata de ESMTP, el mismo SMTP, pero con un conjunto de extensiones, como autorizaci√≥n y cifrado. </font><font style="vertical-align: inherit;">S√≠, una vez que SMTP ni siquiera admit√≠a la autorizaci√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q8/zz/xc/q8zzxcz0tpk86ealobs3ghe6hd4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora un poco sobre SMTPS. </font><font style="vertical-align: inherit;">Una vez que Internet era tan simple que todo en √©l se transmit√≠a en texto claro. </font><font style="vertical-align: inherit;">Luego vinieron los protocolos de cifrado criptogr√°fico, el mismo SSL. </font><font style="vertical-align: inherit;">Y los servicios que anteriormente transmit√≠an informaci√≥n en forma abierta, comenzaron a encapsular el tr√°fico en SSL.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/ly/sg/vilysgbdveruivjlnd6bx00uk2o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no fue f√°cil hacer esto en los mismos puertos est√°ndar: el cliente y el servidor deben acordar un m√©todo de cifrado, y para que un servicio en un puerto funcione simult√°neamente para algunos con cifrado y para otros sin √©l, requerir√≠a cambios en los protocolos. Y para no complicarlo todo, comenzaron a esculpir puertos separados para conexiones cifradas; as√≠ es como aparecieron 443 para HTTPS y 465 para SMTPS. Pero nos dimos cuenta en este momento: hay pocos puertos dedicados, la cantidad de servicios est√° creciendo y si cada uno de ellos usar√° varios puertos con encriptaci√≥n y sin encriptaci√≥n para sus prop√≥sitos, problemas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/se/qs/ku/seqskuovnrhned_eis83hcbf9x0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y al final, decidieron modificar un poco los protocolos. En algunos casos, esto no funcion√≥ muy bien, por ejemplo, para HTTP, y en el caso de SMTP, result√≥ ser una opci√≥n perfectamente adecuada. Para esto, la extensi√≥n STARTTLS se agreg√≥ a SMTP. En general, la extensi√≥n STARTTLS no solo se usa para SMTP, en general es un comando para iniciar negociaciones de cifrado. A diferencia de SMTPS, que usa un puerto dedicado 465 e inmediatamente encripta la conexi√≥n, STARTTLS es solo una extensi√≥n para SMTP, lo que significa que la sesi√≥n se inicia como una sesi√≥n SMTP normal. Los servidores de correo se saludan y luego ofrecen comenzar a encriptar y seleccionar los protocolos criptogr√°ficos disponibles.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3-/md/bw/3-mdbw0y7amg4gvwt2vh6e_csdy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, con la llegada de STARTTLS de los est√°ndares, decidieron eliminar SMTPS en el puerto 465 como un servicio separado. Lo eliminaron de los est√°ndares, pero el servicio se mantuvo y todav√≠a est√° en uso. En cuanto al cifrado, a√∫n har√© un tema por separado, pero por ahora hablemos de STARTTLS.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bv/-v/pi/bv-vpiqh-9bsozbp7cu7ajr1vfq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dije anteriormente que con STARTTLS, los servidores de correo o el cliente / servidor abren una conexi√≥n sin cifrado y luego acuerdan el cifrado. Usan el mismo SSL / TLS para el cifrado. Pero, ¬øy si no pueden estar de acuerdo? ¬øResulta que se comunicar√°n sin cifrar? ¬øEn Internet? Mientras tanto, est√°n de acuerdo sin ning√∫n cifrado, enga√±ando f√°cilmente al servidor o al cliente por la falta de m√©todos de cifrado disponibles. Y en un momento atraparon a uno de los proveedores en tal ataque. Y luego necesitas tal cifrado, preguntas. No todo es tan desesperado. De hecho, el administrador puede desactivar la capacidad de enviar correo si no es posible acordar el cifrado, y los clientes de correo deben advertir que el servidor no es compatible con el cifrado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jk/jd/yr/jkjdyrfzt3wgtv8rq35xchtqa3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y as√≠, descubrimos que hay SMTP que funciona en el puerto 25, hay SMTPS que funciona en 465, pero hay otro puerto: 587, que tambi√©n es utilizado por el servidor de correo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qw/di/er/qwdiersbgizdugoml737dpbiihq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como not√≥, los clientes de correo electr√≥nico se conectan a los servidores a trav√©s de SMTP. Y los servidores de correo tambi√©n se conectan entre s√≠ a trav√©s de SMTP. Tambi√©n dije en la √∫ltima parte que existen tales servidores: hosts de retransmisi√≥n que reenv√≠an el correo. Por ciertos motivos, en su mayor√≠a humanos, existen hosts de retransmisi√≥n en Internet que permiten a usuarios no autorizados redirigir mensajes desde cualquier direcci√≥n. Y estos hosts aparecen cada vez que un administrador negligente levanta el servidor de correo, y esto sucede a menudo. Como resultado, los ciberdelincuentes generan servidores temporales o infectan las computadoras de los usuarios que env√≠an spam a trav√©s de estos hosts de retransmisi√≥n sin autorizaci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/im/ml/ftimml9dpl0jriux1qzfyk4vxkm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, algunos proveedores de Internet bloquean las conexiones de los usuarios al puerto 25.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f2/zd/w9/f2zdw98_ws_lxyyldagtxnhuaf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este puerto est√° abierto entre servidores en Internet, pero hicieron un servicio separado para los usuarios: MSA (agente de env√≠o de mensajes - agente de env√≠o), separando as√≠ las conexiones de los usuarios de los servidores de conexi√≥n que a√∫n se comunican a trav√©s de MTA. En general, MSA incluso funciona en el puerto 25, pero el puerto oficial es el 587. Entonces, ¬øqu√© impide que los spammers usen este puerto? El hecho de que el MSA, como regla, requiere la autorizaci√≥n del usuario. Esta no es la √∫nica raz√≥n de la existencia de MSA, ya que funciona con clientes de correo electr√≥nico, est√° mejor optimizada para el trabajo de los clientes, inmediatamente advierte de cualquier error en los mensajes, por ejemplo, la ausencia de la direcci√≥n de dominio del destinatario.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nk/in/xg/nkinxgm7k5y9--jpyllipbfbej4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y finalmente, sigamos el proceso de enviar un mensaje de correo electr√≥nico. </font><font style="vertical-align: inherit;">Para hacer esto, use wireshark, un cliente de correo electr√≥nico y una cuenta de gmail. </font><font style="vertical-align: inherit;">Todo comienza con el protocolo de enlace TCP est√°ndar, despu√©s del cual se inicia la sesi√≥n SMTP. </font><font style="vertical-align: inherit;">Durante la sesi√≥n, el cliente y el servidor de correo se saludan, despu√©s de lo cual el cliente de correo ofrece cifrar la sesi√≥n, el servidor acepta, despu√©s de lo cual se intercambian las claves y comienza la sesi√≥n TLSv1.3, despu√©s de lo cual el cliente inicia sesi√≥n cifrado y env√≠a un mensaje que no es visible para un interceptor de tr√°fico.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495242/index.html">5NO - NodeJS ORM para Postgres</a></li>
<li><a href="../es495246/index.html">Especialista en SAP: qui√©n es y c√≥mo convertirse en uno</a></li>
<li><a href="../es495248/index.html">El papel del autoaislamiento y el lavado de manos.</a></li>
<li><a href="../es495250/index.html">¬øLos gamepads tienen futuro?</a></li>
<li><a href="../es495254/index.html">Simulaci√≥n de ataques cibern√©ticos dirigidos, Red Team, Pentest, escaneo de vulnerabilidades. Pros y contras de varios m√©todos</a></li>
<li><a href="../es495258/index.html">C√≥mo Zoom se convirti√≥ en la compa√±√≠a m√°s importante en la era del coronavirus</a></li>
<li><a href="../es495262/index.html">Pr√°ctica de actualizaci√≥n de la versi√≥n PostgreSQL. Andrey Salnikov</a></li>
<li><a href="../es495266/index.html">Renacimiento e-learning. Por qu√© 2020 mostrar√° todas las ventajas del aprendizaje a distancia</a></li>
<li><a href="../es495268/index.html">Caso UI / UX: automatizaci√≥n del estacionamiento del aeropuerto</a></li>
<li><a href="../es495272/index.html">Emuladores SNES a pocos p√≠xeles de la perfecci√≥n absoluta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>