<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♂️ 🤕 👩🏼‍🔬 SwiftUIとReduxの相互作用 🎣 👲🏻 🕒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは。この記事では、Reduxと組み合わせたSwiftUIフレームワークについて説明します。このバンドルにより、アプリケーションをすばやく簡単に作成できます。 UIKitとは異なり、SwiftUIは宣言型のユーザーインターフェイスを作成するために使用されます。 Reduxは、アプリケ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SwiftUIとReduxの相互作用</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500158/"><img src="https://habrastorage.org/webt/0a/1b/6r/0a1b6rckxwuh5wqlxbsyqygrf94.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
みなさん、こんにちは。この記事では</font><font style="vertical-align: inherit;">、Reduxと組み合わせ</font><font style="vertical-align: inherit;">た</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームワークについて</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">説明</font></a><font style="vertical-align: inherit;">します。このバンドルにより、アプリケーションをすばやく簡単に作成できます。 UIKitとは異なり、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は宣言型のユーザーインターフェイスを作成するために使用されます</font><font style="vertical-align: inherit;">。 Reduxは、アプリケーションの状態を制御します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はSwiftUIとReduxの基本的な概念です。私たちの場合、これは流行語であるだけでなく、それらを結び付け、それらが非常にうまく連携できるようにするエンティティでもあります。この記事では、上記の論文が真実であることを示すようにしますので、始めましょう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを書く前に、Reduxとは何か、Reduxの構成を理解しましょう。</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アプリケーションの状態を管理するためのオープンソースライブラリです。</font><font style="vertical-align: inherit;">ほとんどの場合、クライアント側を開発するためにReactまたはAngularと組み合わせて使用​​されます。</font><font style="vertical-align: inherit;">コンテキストを介したストレージデータの転送を大幅に簡略化する多数のツールが含まれています。</font><font style="vertical-align: inherit;">作成者：Daniil AbramovおよびAndrew Clark。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私にとって、Reduxは単なるライブラリではなく、すでに何かより多くのものです。アプリケーションのベースとなっているアーキテクチャ上の決定が原因であると考えています。</font><font style="vertical-align: inherit;">主にその単方向データストリームが原因です。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多方向または単方向フロー</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データフローの意味を説明するために、次の例を示します。 VIPERを使用して作成されたアプリケーションは、モジュール間の多方向データストリームをサポートします</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/1h/3j/a61h3juugoawz8ij3xt_mot6brm.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。Reduxは単方向データストリームであり、構成要素に基づいて説明するのが最も簡単です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/yc/hl/hmychlrpj6tbe0loeykh5wax8hk.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各Reduxコンポーネントについて少し詳しく説明します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アプリケーションに必要なすべての情報を含む唯一の真の情報源です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、状態を変更する意図です。私たちの場合、これは、現在の状態に追加または変更する新しい情報を含む列挙型です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">減力剤</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクションと現在の状態をパラメーターとして取り、新しい状態を返す関数です。</font><font style="vertical-align: inherit;">これが作成する唯一の方法です。</font><font style="vertical-align: inherit;">また、この機能はクリーンである必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はStateを含むオブジェクトであり、それを更新するために必要なすべてのツールを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論は十分だと思いますので、実践に移りましょう。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxの実装</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツールを知るための最も簡単な方法の1つは、私のプログラミングの先生が言ったように、ツールを使い始めることです。プログラミング言語を学びたい場合は、その上にアプリケーションを作成します。小さなアプリケーションを作成してみましょう。シンプルなトレーニング日記にしましょう。4つのオプションしかありません。1つ目はワークアウトのリストを表示すること、2つ目は完了したワークアウトを追加すること、3つ目は削除すること、4つ目はワークアウトをソートすることです。かなり単純なアプリケーションですが、同時にReduxとSwiftUIに慣れることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Xcodeでクリーンなプロジェクトを作成し、WorkoutsDiaryという名前を付けます。ユーザーインターフェイスの作成にはSwiftUIを使用するため、最も重要なのはユーザーインターフェイスにSwiftUIを選択することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトを作成した後。</font><font style="vertical-align: inherit;">完了したワークアウトを担当するワークアウト構造を作成します。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Workout</span>: <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">UUID</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">distance</span>: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> date: <span class="hljs-type">Date</span>
    <span class="hljs-keyword">let</span> complexity: <span class="hljs-type">Complexity</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、この構造については何もおかしくありません。idフィールドは、識別可能なプロトコルに準拠するために必要であり、複雑さフィールドは、次の定義を持つ単なる列挙型です。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Complexity</span>: <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">case</span> low
    <span class="hljs-keyword">case</span> medium
    <span class="hljs-keyword">case</span> high<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reduxの実装を開始するために必要なものがすべて揃ったので、Stateの作成から始めましょう。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AppState</span> </span>{
    <span class="hljs-keyword">var</span> workouts: [<span class="hljs-type">Workout</span>]
    <span class="hljs-keyword">var</span> sortType: <span class="hljs-type">SortType?</span><font></font>
}<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワークアウト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortTypeの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つのフィールドを含む単純な構造です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">1つ目はワークアウトのリスト、2つ目はリストの並べ替え方法を決定するオプションのフィールドです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SortTypeは、次のように定義される列挙です。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">SortType</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">distance</span>
    <span class="hljs-keyword">case</span> complexity<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単にするために、距離と難易度の降順で並べ替えます。つまり、トレーニングが複雑であるほど、リストに表示されます。</font><font style="vertical-align: inherit;">sortTypeはオプションのタイプであり、nilにすることもできることに注意してください。つまり、現時点ではリストはソートされません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントの実装を継続します。</font><b><font style="vertical-align: inherit;">アクションを</font></b><font style="vertical-align: inherit;">作成しましょう</font></font><b><font style="vertical-align: inherit;"></font></b><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Action</span> </span>{
    <span class="hljs-keyword">case</span> addWorkout(<span class="hljs-number">_</span> workout: <span class="hljs-type">Workout</span>)
    <span class="hljs-keyword">case</span> removeWorkout(at: <span class="hljs-type">IndexSet</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">sort</span>(by: <span class="hljs-type">SortType</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のように、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は3つのケースを持つ列挙体であり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を操作する機能を提供します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addWorkout（_ workout：Workout）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、パラメーターとして渡されるワークアウトを追加するだけです。</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">removeWorkout（at：IndexSet）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、指定されたインデックスにあるアイテムを削除します。</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sort（by：SortType）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、指定されたソートタイプでトレーニングリストをソートします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も複雑なコンポーネントの1つを作成しましょう。これは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reducer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reducer</span><span class="hljs-params">(state: AppState, action: Action)</span></span> -&gt; <span class="hljs-type">AppState</span> {
    <span class="hljs-keyword">var</span> state = state<font></font>
    <font></font>
    <span class="hljs-keyword">switch</span> action {
    <span class="hljs-keyword">case</span> .addWorkout(<span class="hljs-keyword">let</span> workout):<font></font>
        state.workouts.append(workout)<font></font>
        <font></font>
    <span class="hljs-keyword">case</span> .removeWorkout(<span class="hljs-keyword">let</span> indexSet):<font></font>
        state.workouts.remove(atOffsets: indexSet)<font></font>
    <font></font>
    <span class="hljs-keyword">case</span> .<span class="hljs-built_in">sort</span>(<span class="hljs-keyword">let</span> type):
        <span class="hljs-keyword">switch</span> type {
        <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.<span class="hljs-built_in">distance</span> &gt; $<span class="hljs-number">1</span>.<span class="hljs-built_in">distance</span> }<font></font>
            state.sortType = .<span class="hljs-built_in">distance</span>
        <span class="hljs-keyword">case</span> .complexity:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.complexity.rawValue &gt; $<span class="hljs-number">1</span>.complexity.rawValue }<font></font>
            state.sortType = .complexity<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが書いた関数は非常にシンプルで、次のように機能します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">コピー</font><font style="vertical-align: inherit;">して操作します。</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">基づいて</font><font style="vertical-align: inherit;">、コピーした</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を更新します</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新された</font><b><font style="vertical-align: inherit;">状態を</font></b><font style="vertical-align: inherit;">返す</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の関数は純粋な関数であり、それを実現したかったのは注目に値します！</font><font style="vertical-align: inherit;">関数が「純粋」と見なされるためには、2つの条件を満たす必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数は、同じデータセットで呼び出されると、毎回同じ結果を返します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">副作用はありません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に欠落しているRedux要素は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なので、アプリケーションに実装しましょう。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Store</span>: <span class="hljs-title">ObservableObject</span> </span>{<font></font>
     @<span class="hljs-type">Published</span> <span class="hljs-keyword">private</span>(<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> state: <span class="hljs-type">AppState</span><font></font>
     <font></font>
     <span class="hljs-keyword">init</span>(state: <span class="hljs-type">AppState</span> = .<span class="hljs-keyword">init</span>(workouts: [<span class="hljs-type">Workout</span>]())) {
         <span class="hljs-keyword">self</span>.state = state<font></font>
     }<font></font>
     <font></font>
     <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dispatch</span><span class="hljs-params">(action: Action)</span></span> {<font></font>
         state = reducer(state: state, action: action)<font></font>
     }<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
オブジェクトの実装で</font><font style="vertical-align: inherit;">は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObservableObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコルのすべての利点を使用します</font><font style="vertical-align: inherit;">。これにより、大量のテンプレートコードを記述したり、サードパーティのフレームワークを使用したりする必要がなくなります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">は読み取り専用であり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ Published</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティのラッパーを使用します</font><font style="vertical-align: inherit;">。つまり、変更されるたびにSwiftUIが通知を受け取ります。 initメソッドは、Workout要素の空の配列の形式で指定されたデフォルト値を持つパラメーターとして初期状態を取ります。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスパッチ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">は、状態を更新する唯一の方法です。現在の状態を</font><font style="vertical-align: inherit;">、以下に基づいて</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レデューサー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数によって作成された新しい状態に置き換えます</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、パラメーターとして渡されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reduxのすべてのコンポーネントを実装したので、アプリケーションのユーザーインターフェイスの作成を開始できます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの実装</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのユーザーインターフェイスは非常にシンプルになります。</font><font style="vertical-align: inherit;">また、2つの小さな画面で構成されます。</font><font style="vertical-align: inherit;">最初のメイン画面は、ワークアウトのリストを表示する画面です。</font><font style="vertical-align: inherit;">2番目の画面はワークアウトの追加画面です。</font><font style="vertical-align: inherit;">また、各要素は特定の色で表示され、色はワークアウトの複雑さを反映します。</font><font style="vertical-align: inherit;">赤いセルはワークアウトの最高の難易度を示し、オレンジは平均的な難易度の原因であり、緑は最も簡単なワークアウトの原因です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AppleのSwiftUIと呼ばれる新しいフレームワークを使用してインターフェイスを実装します。 SwiftUIは、使い慣れたUIKitを置き換えるものです。 SwiftUIはUIKitと根本的に異なります。主に、コードでUI要素を記述するための宣言型のアプローチです。この記事では、SwiftUIのすべての複雑な機能については詳しく説明しません。SwiftUIの経験はすでにあると思います。 SwiftUIの知識がない場合は、Appleのドキュメントに注意を払うことをお勧めします。つまり、</font><font style="vertical-align: inherit;">段階的な追加と結果のインタラクティブな表示を含む</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつかの完全なチュートリアル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をご覧ください。サンプルプロジェクトへのリンクもあります。これらのチュートリアルでは、SwiftUIの宣言型の世界にすばやく飛び込むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SwiftUIはまだプロダクションプロジェクトの準備ができていないことも注目に値します。若すぎるため、この方法で使用できるようになるまでに1年以上かかります。また、iOS 13.0以降のバージョンのみをサポートすることを忘れないでください。ただし、SwiftUIがすべてのAppleプラットフォームで動作することも注目に値します。これは、UIKitよりも大きな利点です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのメイン画面から実装を始めましょう。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに移動し、</font><font style="vertical-align: inherit;">現在のコードをこれに変更</font><font style="vertical-align: inherit;">します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">WorkoutListView</span>()<font></font>
                .navigationBarTitle(<span class="hljs-string">"Workouts diary"</span>, displayMode: .inline)<font></font>
                .navigationBarItems(<font></font>
                    leading: <span class="hljs-type">AddButton</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode),<font></font>
                    trailing: <span class="hljs-type">TrailingView</span>()<font></font>
                )<font></font>
        }<font></font>
        .sheet(isPresented: $isAddingMode) {<font></font>
            <span class="hljs-type">AddWorkoutView</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode)<font></font>
                .environmentObject(<span class="hljs-keyword">self</span>.store)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテンツビューは、SwiftUIの標準ビューです。</font><font style="vertical-align: inherit;">最も重要な部分-私の観点から-は、store変数を含むコード行です。</font><font style="vertical-align: inherit;">@EnvironmentObjectを作成します。</font><font style="vertical-align: inherit;">これにより、必要に応じてストアのデータを使用できるようになり、さらに、データが変更された場合にビューが自動的に更新されます。</font><font style="vertical-align: inherit;">これは私たちのストアのシングルトンのようなものです。</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコード行にも注目してください。</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューの状態を示すために使用できるラッパーです。</font><font style="vertical-align: inherit;">SwiftUIはそれをView構造の外の特別な内部メモリに保存します。</font><font style="vertical-align: inherit;">リンクされたビューのみがアクセスできます。</font><font style="vertical-align: inherit;">一度プロパティ値</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 変更された場合、SwiftUIはビューを再構築して、状態の変化を考慮します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ul/ab/qx/ulabqxoyqpmsk3vndncjq3-i-1m.png" alt="画像" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、SceneDelegate.swiftファイルに移動して、コードをメソッドに追加します。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(
        <span class="hljs-number">_</span> scene: UIScene,
        willConnectTo session: UISceneSession,
        options connectionOptions: UIScene.ConnectionOptions
    )</span></span> {
        <span class="hljs-keyword">let</span> contentView = <span class="hljs-type">ContentView</span>().environmentObject(<span class="hljs-type">Store</span>())<font></font>
        <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: contentView)
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ EnvironmentObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はアプリケーション全体の任意の子表現に渡すことができますが、これは環境のおかげで可能です。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">マークされている</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セカンダリビューが表示されるかどうかを示します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって自動的に継承され</font><font style="vertical-align: inherit;">、明示的に渡す必要はありませんが</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">ContentViewの</font></b><font style="vertical-align: inherit;">子ではないシートの形式で提示されるため</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に対して</font><font style="vertical-align: inherit;">これを行う必要があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
次に</font><font style="vertical-align: inherit;">、Viewから継承</font><font style="vertical-align: inherit;">する</font><b><font style="vertical-align: inherit;">WorkoutListView</font></b><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成</font><font style="vertical-align: inherit;">します。</font><i><font style="vertical-align: inherit;">WorkoutListView</font></i><font style="vertical-align: inherit;">という新しいswiftファイルを作成します</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutListView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">List</span> {
            <span class="hljs-type">ForEach</span>(store.state.workouts) {
                <span class="hljs-type">WorkoutView</span>(workout: $<span class="hljs-number">0</span>)<font></font>
            }<font></font>
            .onDelete {<font></font>
                <span class="hljs-keyword">self</span>.store.dispatch(action: .removeWorkout(at: $<span class="hljs-number">0</span>))<font></font>
            }<font></font>
            .listRowInsets(<span class="hljs-type">EdgeInsets</span>())<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテナリスト要素を使用してワークアウトのリストを表示するビュー。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDelete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">は、ワークアウトを削除するために使用</font><font style="vertical-align: inherit;">され、</font><b><font style="vertical-align: inherit;">ストア</font></b><font style="vertical-align: inherit;">によって提供される</font><i><font style="vertical-align: inherit;">ディスパッチ</font></i><font style="vertical-align: inherit;">関数を使用して実行される</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">removeWorkoutアクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><font style="vertical-align: inherit;">ます。リストにワークアウトを表示するには、WorkoutViewを使用します。</font><font style="vertical-align: inherit;">リストにアイテムを表示する</font><font style="vertical-align: inherit;">
別のファイル</font><i><font style="vertical-align: inherit;">WorkoutView.swift</font></i><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成します</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">let</span> workout: <span class="hljs-type">Workout</span><font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> backgroundColor: <span class="hljs-type">Color</span> {
        <span class="hljs-keyword">switch</span> workout.complexity {
        <span class="hljs-keyword">case</span> .low:
            <span class="hljs-keyword">return</span> .green
        <span class="hljs-keyword">case</span> .medium:
            <span class="hljs-keyword">return</span> .orange
        <span class="hljs-keyword">case</span> .high:
            <span class="hljs-keyword">return</span> .red<font></font>
        }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span> {
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(workout.name)
                <span class="hljs-type">Text</span>(<span class="hljs-string">"Distance:"</span> + workout.<span class="hljs-built_in">distance</span> + <span class="hljs-string">"km"</span>)<font></font>
                    .font(.subheadline)<font></font>
            }<font></font>
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(simpleFormat(workout.date))<font></font>
            }<font></font>
        }<font></font>
        .padding()<font></font>
        .background(backgroundColor)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">WorkoutView</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleFormat</span><span class="hljs-params">(<span class="hljs-number">_</span> date: Date)</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">let</span> dateFormatter = <span class="hljs-type">DateFormatter</span>()<font></font>
        dateFormatter.dateFormat = <span class="hljs-string">"dd MMM yyyy"</span>
        dateFormatter.locale = .<span class="hljs-keyword">init</span>(identifier: <span class="hljs-string">"en_GB"</span>)
        <span class="hljs-keyword">return</span> dateFormatter.string(from: date)<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューは、トレーニングオブジェクトをパラメーターとして受け取り、そのプロパティに基づいて構成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リストに新しいアイテムを追加するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">変更して</font><i><font style="vertical-align: inherit;">AddWorkoutView</font></i><font style="vertical-align: inherit;">を表示する</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要があり</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この責任</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はAddButtonにあり</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddButton</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">true</span> }) {
            <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"plus"</span>)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AddButtonも別のファイルに入れる価値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューは、</font><font style="vertical-align: inherit;">構造とコードの分離を改善するために</font><font style="vertical-align: inherit;">メインの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から抽出されたシンプルなボタンです</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいワークアウトを追加するビューを作成します。</font><font style="vertical-align: inherit;">新しい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルを作成します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddWorkoutView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> nameText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> distanceText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> complexityField: <span class="hljs-type">Complexity</span> = .medium<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dateField: <span class="hljs-type">Date</span> = <span class="hljs-type">Date</span>()<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">Form</span> {
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Name"</span>, text: $nameText)
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Distance"</span>, text: $distanceText)
                <span class="hljs-type">Picker</span>(selection: $complexityField, label: <span class="hljs-type">Text</span>(<span class="hljs-string">"Complexity"</span>)) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Low"</span>).tag(<span class="hljs-type">Complexity</span>.low)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Medium"</span>).tag(<span class="hljs-type">Complexity</span>.medium)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"High"</span>).tag(<span class="hljs-type">Complexity</span>.high)<font></font>
                }<font></font>
                <span class="hljs-type">DatePicker</span>(selection: $dateField, displayedComponents: .date) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Date"</span>)<font></font>
                }<font></font>
            }<font></font>
            .navigationBarTitle(<span class="hljs-string">"Workout Details"</span>, displayMode: .inline)<font></font>
            .navigationBarItems(<font></font>
                leading: <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span> }) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Cancel"</span>)<font></font>
                },<font></font>
                trailing: <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-keyword">let</span> workout = <span class="hljs-type">Workout</span>(<font></font>
                        name: <span class="hljs-keyword">self</span>.nameText,
                        <span class="hljs-built_in">distance</span>: <span class="hljs-keyword">self</span>.distanceText,<font></font>
                        date: <span class="hljs-keyword">self</span>.dateField,<font></font>
                        complexity: <span class="hljs-keyword">self</span>.complexityField<font></font>
                    )<font></font>
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .addWorkout(workout))
                    <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span><font></font>
                }) {<font></font>
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Save"</span>)<font></font>
                }<font></font>
                .disabled(nameText.isEmpty)<font></font>
            )<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、他のコントローラーと同様に、ストア変数を含むかなり大きなコントローラーです。</font><font style="vertical-align: inherit;">また、変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nameText、distanceText、complexityField、isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も含まれています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最初の3つの変数は</font><font style="vertical-align: inherit;">、この画面に表示される</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextField、Picker、DatePicker</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をリンクするために必要です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ナビゲーションバーには2つの要素があります。</font><font style="vertical-align: inherit;">最初のボタンは、新しいワークアウトを追加せずに画面を閉じるボタンです。最後のボタンは、リストに新しいワークアウトを追加します。これは、addWorkoutアクションを送信することで実行できます。</font><font style="vertical-align: inherit;">このアクションは、新しいワークアウトの追加画面も閉じます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/cn/b0/gycnb0wn0s9eachcnmcy2s96jkq.png" alt="画像" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要なの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><b><font style="vertical-align: inherit;">TrailingView</font></b><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TrailingView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span>(alignment: .center, spacing: <span class="hljs-number">30</span>) {
            <span class="hljs-type">Button</span>(action: {
                <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span>.store.state.sortType {
                <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .<span class="hljs-built_in">distance</span>))
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .complexity))<font></font>
                }<font></font>
            }) {<font></font>
                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"arrow.up.arrow.down"</span>)<font></font>
            }<font></font>
            <span class="hljs-type">EditButton</span>()<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューは、ワークアウトリストの並べ替えと、ワークアウトリストの編集モードのアクティブ化または非アクティブ化を担当する2つのボタンで構成されています。</font><font style="vertical-align: inherit;">ソートアクションは、storeプロパティを介して呼び出すことができるディスパッチ関数を使用して呼び出されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/av/72/2u/av722utbzjxbewvozklxazeelde.png" alt="画像" width="350" height="614"></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションは準備ができており、期待どおりに動作するはずです。</font><font style="vertical-align: inherit;">コンパイルして実行してみましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReduxとSwiftUIは非常にうまく連携します。これらのツールを使用して記述されたコードは理解しやすく、適切に編成できます。このソリューションのもう1つの優れた点は、その優れたコードテスト機能です。ただし、このソリューションには欠点がないわけではありません。その1つは、アプリケーションの状態が非常に複雑な場合にアプリケーションが使用する大量のメモリであり、新しい状態を作成するとSwiftUIのすべてのビューが更新されるため、特定のシナリオではアプリケーションのパフォーマンスが理想的ではない場合があります。これらの欠点は、アプリケーションの品質とユーザーインタラクションに大きな影響を与える可能性がありますが、それらを覚えて適切な方法で状態を準備すれば、悪影響を最小限に抑えたり、回避したりすることもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトのソースコードをダウンロードまたは表示できます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちら</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事が気に入って、自分で何か新しいことを学んだことを願っています。また会いましょう。</font><font style="vertical-align: inherit;">さらにそれはさらに興味深いでしょう。</font></font></s></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500146/index.html">製品マネージャーなどとしてドイツでの就職活動。パート3/5。CVの送信を開始する前に行う必要があること</a></li>
<li><a href="../ja500148/index.html">Mikrotikファイアウォールフィルター：フィルターポリシーの基礎を生成するスクリプト</a></li>
<li><a href="../ja500150/index.html">ROSとニューラルグリッド乞食ロボット</a></li>
<li><a href="../ja500152/index.html">1CでPOSターミナルとFR IKKM-Touchを統合する方法：エンタープライズ</a></li>
<li><a href="../ja500154/index.html">機密の機械学習。PySyftライブラリ</a></li>
<li><a href="../ja500160/index.html">視覚的要素</a></li>
<li><a href="../ja500162/index.html">素晴らしいPythonスポーツデータ処理チュートリアル</a></li>
<li><a href="../ja500164/index.html">家庭教師：職業費用</a></li>
<li><a href="../ja500170/index.html">ネットワークシミュレータチュートリアルns-3。第6章</a></li>
<li><a href="../ja500178/index.html">Andrew Unの本、機械学習への情熱、38章と39章の翻訳</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>