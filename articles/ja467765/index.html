<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎲 🥗 💿 Wi-Fiおよび他の多くの略語。AndroidアプリケーションのWi-Fiノードのデータを取得し、スウェルしない方法 👱🏿 🧡 👘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="AndroidからWi-Fiネットワークアプリケーションをスキャンして、アクセスポイントに関するデータの詳細な計算を取得する必要がありました。 
 
 ここで私はいくつかの困難に直面しなければなりませんでした：Androidのオフドキュメントでは、説明されたクラスの多くが非推奨になり（APIレベル>...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wi-Fiおよび他の多くの略語。AndroidアプリケーションのWi-Fiノードのデータを取得し、スウェルしない方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467765/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AndroidからWi-Fiネットワークアプリケーションをスキャンして、アクセスポイントに関するデータの詳細な計算を取得する必要がありました。 </font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで私はいくつかの困難に直面しなければ</font><font style="vertical-align: inherit;">なりません</font><font style="vertical-align: inherit;">でした：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Androidのオフドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、説明されたクラスの多くが非推奨になり（APIレベル&gt; 26）、それに反映されませんでした。ドキュメントの一部の説明は最小限です（たとえば、</font><font style="vertical-align: inherit;">執筆時点での</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScanResult</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの機能フィールドには、</font><font style="vertical-align: inherit;">重要なデータが多数含まれていますが、まったく説明されていませんでした）。 3つ目の難しさは、理論を読んでlocalhost用にルーターを設定することとは異なり、Wi-Fiとの最初の近接では、個別に理解できるように見えるいくつかの略語に対処する必要があるという事実にある可能性があります。しかし、それらをどのように関連付けて構造化するかは明らかではない場合があります（判断は主観的であり、以前の経験に依存します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、NDKを使わずにAndroidコードからWi-Fi環境に関する包括的なデータを取得する方法について説明しますが、Android APIのみを使用してハックし、それらの解釈方法を理解します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードをプルして書き始めることはしません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.プロジェクトを作成する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメモは、Androidプロジェクトを2回以上作成したユーザーを対象としているため、この項目の詳細は省略します。</font><font style="vertical-align: inherit;">以下のコードはKotlin言語のminSdkVersion = 23で表示されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.アクセス許可</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションからWi-Fiを使用するには、ユーザーからいくつかの権限を取得する必要があります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に従って、</font><font style="vertical-align: inherit;">8.0以降のOSバージョンのデバイスでネットワークをスキャンするには、ネットワーク環境のステータスを表示するためのアクセスに加えて、デバイスのWi-Fiモジュールのステータスを変更するためのアクセス、または座標へのアクセス（概算または正確）のいずれかが必要です。</font><font style="vertical-align: inherit;">バージョン9.0以降では、これらとその両方についてユーザーに要求すると同時に、位置情報サービスを有効にするようユーザーに明示的に要求する必要があります。</font><font style="vertical-align: inherit;">これはグーグルの気まぐれであり、彼をスパイしたいという私たちの願望ではないことをユーザーに勇敢に説明することを忘れないでください:) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計、AndroidManifest.xmlに追加：</font></font><br>
<br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.CHANGE_WIFI_STATE"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、現在のアクティビティへのリンクを持つコードでは：</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">import</span> android.app.Activity
<span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.location.LocationManager
<span class="hljs-keyword">import</span> androidx.core.app.ActivityCompat<font></font>
<font></font>
....<font></font>
<font></font>
<span class="hljs-keyword">if</span> (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {<font></font>
            ActivityCompat.requestPermissions(<font></font>
                activity,<font></font>
                arrayOf(Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.CHANGE_WIFI_STATE),<font></font>
                <span class="hljs-number">1</span><font></font>
            )<font></font>
            makeEnableLocationServices(activity.applicationContext)<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            ActivityCompat.requestPermissions(<font></font>
                activity,<font></font>
                arrayOf(Manifest.permission.CHANGE_WIFI_STATE),<font></font>
                <span class="hljs-number">1</span><font></font>
            )<font></font>
        }<font></font>
<font></font>
    <span class="hljs-comment">/*        */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">makeEnableLocationServices</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span>       ,     </span>
        <span class="hljs-keyword">val</span> lm: LocationManager =<font></font>
            context.applicationContext.getSystemService(Context.LOCATION_SERVICE) <span class="hljs-keyword">as</span> LocationManager<font></font>
<font></font>
        <span class="hljs-keyword">val</span> gpsEnabled: <span class="hljs-built_in">Boolean</span> = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
        <span class="hljs-keyword">val</span> networkEnabled: <span class="hljs-built_in">Boolean</span> = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (!gpsEnabled &amp;&amp; !networkEnabled) {<font></font>
            context.startActivity(Intent(ACTION_LOCATION_SOURCE_SETTINGS));<font></font>
        }<font></font>
    }<font></font>
<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. BroadcastReceiverを作成し、Wi-Fiネットワーク環境のスキャンに関する更新イベントにサブスクライブします </font></font></h3><br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">val</span> wifiManager = context.getSystemService(Context.WIFI_SERVICE) <span class="hljs-keyword">as</span> WifiManager<font></font>
<font></font>
<span class="hljs-keyword">val</span> wifiScanReceiver = <span class="hljs-keyword">object</span> : BroadcastReceiver() {<font></font>
<font></font>
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onReceive</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, intent: <span class="hljs-type">Intent</span>)</span></span> {
    <span class="hljs-keyword">val</span> success = intent.getBooleanExtra(WifiManager.EXTRA_RESULTS_UPDATED, <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">if</span> (success) {<font></font>
      scanSuccess()<font></font>
    } <font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">val</span> intentFilter = IntentFilter()
<span class="hljs-comment">/*         */</span><font></font>
intentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)<font></font>
context.registerReceiver(wifiScanReceiver, intentFilter)<font></font>
<font></font>
<span class="hljs-keyword">val</span> success = wifiManager.startScan()
<span class="hljs-keyword">if</span> (!success) {
  <span class="hljs-comment">/* -     ,    */</span><font></font>
}<font></font>
<font></font>
....<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">scanSuccess</span><span class="hljs-params">()</span></span> {
 <span class="hljs-comment">/*  ,   */</span>
  <span class="hljs-keyword">val</span> results: List&lt;ScanResult&gt; = wifiManager.scanResults<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメントのWiFiManager.startScanメソッドは、APIバージョン28から非推奨としてマークされていますが、オフです。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガイド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はそれを使用することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体として、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScanResult</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトのリストを受け取りました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. ScanResultを見て、用語を理解します</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラスのいくつかのフィールドを見て、それらの意味を説明しましょう：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSID-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスセット識別子-ネットワークの名前</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSSID-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本サービスセット識別子-ネットワークアダプター（Wi-Fiポイント）</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベルの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MACアドレス</font><font style="vertical-align: inherit;">-受信信号強度インジケーター[dBm（ロシアdBm） ）-デシベル、基準電力1 mW。]-受信信号のレベルのインジケータ。値は0〜-100で、0から離れるほど、Wi-Fiポイントからデバイスへの経路で失われる信号電力が多くなります。詳細については、たとえば</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をご覧ください</font><font style="vertical-align: inherit;">。ここでは、Androidクラス</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WifiManager</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して、</font><font style="vertical-align: inherit;">選択したステップで信号レベルを優れたものからひどいものまでスケールで調整できることを説明します。</font></font><br>
<br>
<pre><code class="kotlin hljs">        <span class="hljs-keyword">val</span> wifiManager = context.applicationContext.getSystemService(Context.WIFI_SERVICE) <span class="hljs-keyword">as</span> WifiManager
        <span class="hljs-keyword">val</span> numberOfLevels = <span class="hljs-number">5</span>
        <span class="hljs-keyword">val</span> level = WifiManager.calculateSignalLevel(level, numberOfLevels)
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周波数</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Wi-Fiポイントの周波数[Hz]。周波数自体に加えて、いわゆるチャネルに興味があるかもしれません。各ポイントには、独自の実用的な清浄度があります。執筆時点では、最も一般的なWi-Fiポイントの範囲は2.4 GHzです。しかし、より正確に言うと、ポイントは名前付きの周波数に近い番号付き周波数で情報を携帯電話に転送します。チャンネル数と対応する周波数の値は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準化されてい</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。これは、近くのポイントが異なる周波数で動作するように行われるため、相互に干渉せず、伝送の速度と品質を相互に低下させません。同時に、ポイントは同じ周波数ではなく、周波数範囲（channelWidth </font><b><font style="vertical-align: inherit;">パラメーター</font></b><font style="vertical-align: inherit;">）で機能し</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、チャネル幅と呼ばれます。</font><font style="vertical-align: inherit;">つまり、隣接するチャネル（および隣接するチャネルだけでなく、それらの3つでも）で動作するポイントは、相互に干渉を引き起こします。</font><font style="vertical-align: inherit;">この単純なコードは、2.4および5 GHzの周波数を持つポイントの周波数値によってチャネル番号を計算するのに役立ちます。</font></font><br>
<br>
<pre><code class="kotlin hljs">
    <span class="hljs-comment">/*      */</span>
    <span class="hljs-keyword">val</span> channel: <span class="hljs-built_in">Int</span>
        <span class="hljs-keyword">get</span>() {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (frequency <span class="hljs-keyword">in</span> <span class="hljs-number">2412</span>..<span class="hljs-number">2484</span>) {<font></font>
                (frequency - <span class="hljs-number">2412</span>) / <span class="hljs-number">5</span> + <span class="hljs-number">1</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (frequency <span class="hljs-keyword">in</span> <span class="hljs-number">5170</span>..<span class="hljs-number">5825</span>) {<font></font>
                (frequency - <span class="hljs-number">5170</span>) / <span class="hljs-number">5</span> + <span class="hljs-number">34</span>
            } <span class="hljs-keyword">else</span> {<font></font>
                -<span class="hljs-number">1</span><font></font>
            }<font></font>
        }<font></font>
<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能力</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -分析に最も興味深い分野であり、作業に長い時間がかかりました。</font><font style="vertical-align: inherit;">ここでは、ポイントの「機能」がラインに書き込まれます。</font><font style="vertical-align: inherit;">同時に、ドキュメントで文字列の解釈の詳細を探すことはできません。</font><font style="vertical-align: inherit;">この行にあるものの例をいくつか示します。</font></font><br>
<br>
<pre><code class="bash hljs">[WPA-PSK-TKIP+CCMP][WPA2-PSK-TKIP+CCMP][WPS][ESS]<font></font>
[WPA2-PSK-CCMP][ESS]<font></font>
[WPA2-PSK-CCMP+TKIP][ESS]<font></font>
[WPA-PSK-CCMP+TKIP][WPA2-PSK-CCMP+TKIP][ESS]<font></font>
[ESS][WPS]<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.略語とparsim機能を理解する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージandroid.net.wifiのクラス*フードの下で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wpa_supplicant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> linuxユーティリティを使用</font><font style="vertical-align: inherit;">し、機能フィールドの出力はスキャン中のフラグフィールドのコピーである</font><font style="vertical-align: inherit;">ことは言及する価値があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
順次行動していきます。</font><font style="vertical-align: inherit;">最初に、角括弧内の要素が「-」記号で区切られている形式の出力について考えます。</font></font><br>
<br>
<pre><code class="bash hljs">[WPA-PSK-TKIP+CCMP]<font></font>
[WPA2-PSK-CCMP]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の値は、いわゆる </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">認証方法</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。つまり、デバイスとアクセスポイントで実行する必要のある一連のアクションと、アクセスポイント自体の使用を許可し、ペイロードを暗号化する方法です。この投稿の執筆時点では、最も一般的なオプションはWPAとWPA2で、それぞれが直接接続されているか、いわゆるデバイスを介して接続されています。 RADIUSサーバー（WPA-Enterprice）は、暗号化されたチャネルを介してパスワードを提供します。ほとんどの場合、自宅では、アクセスポイントはこのスキームに従って接続を提供します。より強力な暗号における2番目のバージョンと最初のバージョンの違い：AESと安全でないTKIP。より複雑で高度なWPA3も徐々に導入されています。理論的には、CCKM（Cisco Centralized Key Managment）起業家向けソリューションにオプションがあるかもしれませんが、私は会ったことがありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセスポイントは、MACアドレスで認証するように設定できます。または、アクセスポイントが古いWEPアルゴリズムに関するデータを提供する場合、認証は事実上ありません（ここでの秘密鍵は暗号化鍵です）。これらのオプションは「その他」に分類されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パブリックwi-fiには、非表示のキャプティブポータル検出-ブラウザ経由の認証要求を使用するお気に入りの方法もあります。このようなアクセスポイントは、スキャナーに対して開いているように見えます（物理的な接続の観点からは、アクセスポイントです）。したがって、OPENとして分類します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の値は</font><b><font style="vertical-align: inherit;">、鍵管理アルゴリズム</font></b><font style="vertical-align: inherit;">として指定でき</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。上記の認証方法のパラメータです。暗号化キーの交換がどのように行われるかについて話します。可能なオプションを考えてみましょう。 EAP-前述のWPA-Enterpriceで使用され、データベースを使用して、入力された認証データを検証します。 SAE-バスティングに対してより耐性のある高度なWPA3で使用されます。 PSK-最も一般的なオプションで、パスワードの入力と暗号化された形式での送信が含まれます。 IEEE8021X-国際標準に準拠（WPAファミリーでサポートされている以外）。 OWE（オポチュニスティックワイヤレス暗号化）は、IEEE 802.11標準の拡張であり、OPENと分類したポイントです。 OWEは、暗号化することにより、安全でないネットワークを介して送信されるデータのセキュリティを確保します。アクセスキーがない場合のバリエーションも可能です。このオプションをNONEと呼びましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目のパラメーターは、いわゆる </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗号化方式（暗号化スキーム）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -送信されたデータを保護するために使用される暗号の正確さ。</font><font style="vertical-align: inherit;">オプションを一覧表示します。</font><font style="vertical-align: inherit;">WEP-RC4ストリーム暗号を使用します。秘密鍵は暗号鍵であり、現代の暗号化の世界では受け入れられないと考えられています。</font><font style="vertical-align: inherit;">TKIP-WPA、CKIP-WPA2で使用されます。</font><font style="vertical-align: inherit;">TKIP + CKIP-下位互換性のためにWPAおよびWPA2が可能なポイントで指定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つの要素の代わりに、1つのWEPマークを見つけることができます。</font></font><br>
<br>
<pre><code class="bash hljs">[WEP]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記で説明したように、これは、そこにない鍵を使用するためのアルゴリズムと、デフォルトである暗号化方式を指定しないのに十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、このブラケットについて考えます。</font></font><br>
<br>
<pre><code class="bash hljs">[ESS]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Wi-Fiの動作モード</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fiネットワークのトポロジです</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。接続されたデバイスが通信するアクセスポイントが1つある場合、BSS（基本サービスセット）モードが発生する可能性があります。ローカルネットワーク上で見つけることができます。通常、アクセスポイントは、異なるローカルネットワークのデバイスを接続するために必要なため、拡張サービスセット-ESSの一部です。 IBSS（独立した基本サービスセット）のタイプは、デバイスがピアツーピアネットワークの一部であることを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WPSフラグも下がる場合があります。</font></font><br>
<br>
<pre><code class="bash hljs">[WPS]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WPS（Wi-Fi Protected Setup）-Wi-Fiネットワークの半自動初期化のためのプロトコル。</font><font style="vertical-align: inherit;">初期化するには、ユーザーは8文字のパスワードを入力するか、ルーターのボタンを固定します。</font><font style="vertical-align: inherit;">アクセスポイントが最初のタイプであり、このフラグがアクセスポイントの名前の反対側で強調表示されている場合は、管理パネルに移動して、WPS経由のアクセスを無効にすることを強くお勧めします。</font><font style="vertical-align: inherit;">多くの場合、8桁のPINはMACアドレスによって認識されるか、予見可能な時間に分類され、手元の汚れた人が利用する可能性があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.解析モデルと関数を作成する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記でわかったことに基づいて、何が起こったかをデータクラスで説明します。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-comment">/*   */</span>
<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthMethod</span> </span>{<font></font>
    WPA3,<font></font>
    WPA2,<font></font>
    WPA, <span class="hljs-comment">// Wi-Fi Protected Access</span>
    OTHER, <span class="hljs-comment">//    Shared Key Authentication  .  mac-address-based  WEP</span>
    CCKM, <span class="hljs-comment">// Cisco</span>
    OPEN <span class="hljs-comment">// Open Authentication.     Captive Portal Detection -    </span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/*    */</span>
<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KeyManagementAlgorithm</span> </span>{<font></font>
    IEEE8021X, <span class="hljs-comment">//  </span>
    EAP, <span class="hljs-comment">// Extensible Authentication Protocol,   </span>
    PSK, <span class="hljs-comment">// Pre-Shared Key —        </span>
    WEP, <span class="hljs-comment">//  WEP     (No auth key)</span>
    SAE, <span class="hljs-comment">// Simultaneous Authentication of Equals -    WPA3</span>
    OWE, <span class="hljs-comment">// Opportunistic Wireless Encryption -    ,    OPEN</span>
    NONE <span class="hljs-comment">//      OPEN, OTHER</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/*   */</span>
<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CipherMethod</span> </span>{<font></font>
    WEP, <span class="hljs-comment">// Wired Equivalent Privacy,      </span>
    TKIP, <span class="hljs-comment">// Temporal Key Integrity Protocol</span>
    CCMP, <span class="hljs-comment">// Counter Mode with Cipher Block Chaining Message Authentication Code Protocol,</span>
    <span class="hljs-comment">//             </span>
    <span class="hljs-comment">//   AES</span>
    NONE <span class="hljs-comment">//      OPEN, OTHER</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/*     ,      */</span>
<span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Capability</span></span>(
    <span class="hljs-keyword">var</span> authScheme: AuthMethod? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">var</span> keyManagementAlgorithm: KeyManagementAlgorithm? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">var</span> cipherMethod: CipherMethod? = <span class="hljs-literal">null</span><font></font>
)<font></font>
<font></font>
<span class="hljs-comment">/*   WiFi (   WiFi) */</span>
<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TopologyMode</span> </span>{<font></font>
    IBSS, <span class="hljs-comment">//   (Ad-Hoc  IBSS – Independent Basic Service Set).</span>
    BSS, <span class="hljs-comment">//    Basic Service Set (BSS)  Infrastructure Mode.</span>
    ESS <span class="hljs-comment">//    ESS – Extended Service Set.</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、機能フィールドを解析する関数を記述します。</font></font><br>
<br>
<pre><code class="kotlin hljs">
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseCapabilities</span><span class="hljs-params">(capabilitiesString: <span class="hljs-type">String</span>)</span></span>: List &lt; Capability &gt; {
    <span class="hljs-keyword">val</span> capabilities: List &lt; Capability &gt; = capabilitiesString<font></font>
        .splitByBrackets()<font></font>
        .filter {<font></font>
            !it.isTopology() &amp;&amp; !it.isWps()<font></font>
        }<font></font>
        .flatMap {<font></font>
            parseCapability(it)<font></font>
        }<font></font>
    <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">if</span> (!capabilities.isEmpty()) {<font></font>
            capabilities<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            listOf(Capability(AuthMethod.OPEN, KeyManagementAlgorithm.NONE, CipherMethod.NONE))<font></font>
        }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseCapability</span><span class="hljs-params">(part: <span class="hljs-type">String</span>)</span></span>: List &lt; Capability &gt; {
    <span class="hljs-keyword">if</span> (part.contains(<span class="hljs-string">"WEP"</span>)) {
        <span class="hljs-keyword">return</span> listOf(Capability(<font></font>
            AuthMethod.OTHER,<font></font>
            KeyManagementAlgorithm.WEP,<font></font>
            CipherMethod.WEP<font></font>
        ))<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">val</span> authScheme = <span class="hljs-keyword">when</span> {<font></font>
        part.contains(<span class="hljs-string">"WPA3"</span>) - &gt; AuthMethod.WPA3<font></font>
        part.contains(<span class="hljs-string">"WPA2"</span>) - &gt; AuthMethod.WPA2<font></font>
        part.contains(<span class="hljs-string">"WPA"</span>) - &gt; AuthMethod.WPA
        <span class="hljs-keyword">else</span> - &gt; <span class="hljs-literal">null</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">val</span> keyManagementAlgorithm = <span class="hljs-keyword">when</span> {<font></font>
        part.contains(<span class="hljs-string">"OWE"</span>) - &gt; KeyManagementAlgorithm.OWE<font></font>
        part.contains(<span class="hljs-string">"SAE"</span>) - &gt; KeyManagementAlgorithm.SAE<font></font>
        part.contains(<span class="hljs-string">"IEEE802.1X"</span>) - &gt; KeyManagementAlgorithm.IEEE8021X<font></font>
        part.contains(<span class="hljs-string">"EAP"</span>) - &gt; KeyManagementAlgorithm.EAP<font></font>
        part.contains(<span class="hljs-string">"PSK"</span>) - &gt; KeyManagementAlgorithm.PSK
        <span class="hljs-keyword">else</span> - &gt; <span class="hljs-literal">null</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">val</span> capabilities = ArrayList &lt; Capability &gt; ()
    <span class="hljs-keyword">if</span> (part.contains(<span class="hljs-string">"TKIP"</span>) || part.contains(<span class="hljs-string">"CCMP"</span>)) {
        <span class="hljs-keyword">if</span> (part.contains(<span class="hljs-string">"TKIP"</span>)) {<font></font>
            capabilities.add(Capability(<font></font>
                authScheme ? : AuthMethod.OPEN,<font></font>
                keyManagementAlgorithm ? : KeyManagementAlgorithm.NONE,<font></font>
                CipherMethod.TKIP<font></font>
            ))<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (part.contains(<span class="hljs-string">"CCMP"</span>)) {<font></font>
            capabilities.add(Capability(<font></font>
                authScheme ? : AuthMethod.OPEN,<font></font>
                keyManagementAlgorithm ? : KeyManagementAlgorithm.NONE,<font></font>
                CipherMethod.CCMP<font></font>
            ))<font></font>
        }<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (authScheme != <span class="hljs-literal">null</span> || keyManagementAlgorithm != <span class="hljs-literal">null</span>) {<font></font>
        capabilities.add(Capability(<font></font>
            authScheme ? : AuthMethod.OPEN,<font></font>
            keyManagementAlgorithm ? : KeyManagementAlgorithm.NONE,<font></font>
            CipherMethod.NONE<font></font>
        ))<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> capabilities<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseTopologyMode</span><span class="hljs-params">(capabilitiesString: <span class="hljs-type">String</span>)</span></span>: TopologyMode ? {
    <span class="hljs-keyword">return</span> capabilitiesString<font></font>
        .splitByBrackets()<font></font>
        .mapNotNull {<font></font>
            <span class="hljs-keyword">when</span> {<font></font>
                it.contains(<span class="hljs-string">"ESS"</span>) - &gt; TopologyMode.ESS<font></font>
                it.contains(<span class="hljs-string">"BSS"</span>) - &gt; TopologyMode.BSS<font></font>
                it.contains(<span class="hljs-string">"IBSS"</span>) - &gt; TopologyMode.IBSS
                <span class="hljs-keyword">else</span> - &gt; <span class="hljs-literal">null</span><font></font>
            }<font></font>
        }<font></font>
        .firstOrNull()<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseWPSAvailable</span><span class="hljs-params">(capabilitiesString: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> capabilitiesString<font></font>
        .splitByBrackets()<font></font>
        .any {<font></font>
            it.isWps()<font></font>
        }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">splitByBrackets</span><span class="hljs-params">()</span></span>: List &lt; String &gt; {
    <span class="hljs-keyword">val</span> m = Pattern.compile(<span class="hljs-string">"\\[(.*?)\\]"</span>).matcher(<span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">val</span> parts = ArrayList &lt; String &gt; ()
    <span class="hljs-keyword">while</span> (m.find()) {<font></font>
        parts.add(m.group().replace(<span class="hljs-string">"["</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"]"</span>, <span class="hljs-string">""</span>))<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> parts<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">isTopology</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> TopologyMode.values().any {
        <span class="hljs-keyword">this</span> == it.name<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">isWps</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> == <span class="hljs-string">"WPS"</span><font></font>
}<font></font>
<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.結果を見る</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークをスキャンして、何が起こったかを示します。</font><font style="vertical-align: inherit;">Log.dによる単純な出力の結果の表示：</font></font><br>
<br>
<pre><code class="plaintext hljs">Capability of Home-Home [WPA2-PSK-CCMP][ESS][WPS]<font></font>
...<font></font>
capabilities=[Capability(authScheme=WPA2, keyManagementAlgorithm=PSK, cipherMethod=CCMP)], topologyMode=ESS, availableWps=true<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションコードからネットワークに接続する問題は未解決のままでした。</font><font style="vertical-align: inherit;">モバイルデバイスの保存されたOSパスワードを読み取るためには、root権限と、wpa_supplicant.confを読み取るためにファイルシステムを駆け巡る意欲が必要だと言えます。</font><font style="vertical-align: inherit;">アプリケーションロジックに外部からのパスワードの入力が含まれる場合、接続は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">android.net.wifi.WifiManager</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスを介して行うことができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">貴重な追加をして</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
くれた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Egor Ponomarevに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感謝し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何かを追加または修正する必要があると思われる場合は、コメントに書き込んでください:)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467753/index.html">ワイヤレスデータ伝送の世界記録：11キロメートルあたり40 Gb /秒</a></li>
<li><a href="../ja467755/index.html">プリオン、カルシウム、微生物叢、食物ホルモン、アルツハイマー病</a></li>
<li><a href="../ja467759/index.html">UnixライクなOS開発-仮想アドレス空間（6）</a></li>
<li><a href="../ja467761/index.html">エネルギー、熱、水パート3：ラジオに行く</a></li>
<li><a href="../ja467763/index.html">RTOSに関する真実。記事＃33。Nucleus SEリアルタイムオペレーティングシステムの使用</a></li>
<li><a href="../ja467767/index.html">JSON-RPCフォロワーのためのその他のアメニティ</a></li>
<li><a href="../ja467769/index.html">人口情報を含む単一の連邦情報リソース</a></li>
<li><a href="../ja467771/index.html">緑のジュニアのオートリローダーが彼の<s> hot </ s>を書いたように。パート2. CSS</a></li>
<li><a href="../ja467773/index.html">珍しいリソースを調達し、最初の連絡をする</a></li>
<li><a href="../ja467775/index.html">ビジネスに関する5つの神話：クライアントが間違っている理由とAppleを凌ぐ方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>