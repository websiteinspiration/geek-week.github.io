<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¼â€ğŸ’» ğŸƒ ğŸ¤¶ Bitrix24ã§ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®ç§»è¡Œã‚’è¨­å®šã™ã‚‹æ–¹æ³• ğŸ‘¸ğŸ¼ âš¾ï¸ ğŸ‘‡ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ¥­å‹™ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã«ã€ä¼æ¥­ã§ã¯å¤šãã®å ´åˆBitrix24ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã¨ãã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å•é¡Œã®ã„ãã¤ã‹ã¨ã€ãã®è§£æ±ºæ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
 
 
 
 Bitrix24ã¯ã€ä¸€èˆ¬çš„ãªCRMã‚·ã‚¹ãƒ†ãƒ ã®1ã¤ã§ã™ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹å›³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ãƒ“ã‚¸...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bitrix24ã§ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®ç§»è¡Œã‚’è¨­å®šã™ã‚‹æ–¹æ³•</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/466823/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥­å‹™ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã«ã€ä¼æ¥­ã§ã¯å¤šãã®å ´åˆBitrix24ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã¨ãã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å•é¡Œã®ã„ãã¤ã‹ã¨ã€ãã®è§£æ±ºæ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/-p/sj/fx-psjbms29rlcnbbytsumkgw0y.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitrix24ã¯ã€ä¸€èˆ¬çš„ãªCRMã‚·ã‚¹ãƒ†ãƒ ã®1ã¤ã§ã™ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹å›³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ï¼ˆãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç·¨é›†ã™ã‚‹å ´åˆã€ç‰¹ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã§å¤‰æ›´ãŒæœ€åˆã«ãƒã‚§ãƒƒã‚¯ã•ã‚Œã‚‹å¤§è¦æ¨¡ãªæ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€å•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã€æœ¬ç•ªç’°å¢ƒã¸ã®ç§»è¡Œæ™‚ã«ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ç§»è¡Œãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼ˆä»¥ä¸‹ã€BPï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸­å°ä¼æ¥­ã¯ã€åŸå‰‡ã¨ã—ã¦ã€ç§»è¡Œãªã—ã§å®Ÿè¡Œã§ãã€ç‰¹å®šã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’2ã€œ3æ—¥é–“åœæ­¢ã™ã‚‹ã ã‘ã§ã™ã€‚å¤§ä¼æ¥­ã¯é€šå¸¸ãã‚Œã‚’è²·ã†ä½™è£•ãŒãªã„ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã¨å±•é–‹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/-9/2z/bc-92zo3_pb_lszqvilcyr8ifvc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã©ã®ã‚ˆã†ã«Bitrix24 </font><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ©Ÿèƒ½ã—ã¾ã™</font></font></a><font style="vertical-align: inherit;"></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§»è¡Œã®å‡¦ç†ã«ã¯ç‹¬è‡ªã®ç‰¹æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç‰¹ã«ã€é–¢é€£ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨IDã®æ•°ãŒå¤šã„ãŸã‚ã€è¤‡é›‘ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€Bitrix24ã¯ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹è‡ªä½“ã®ç§»è¡Œã‚‚æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚ã“ã®å•é¡Œã¯ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«ã‚ˆã£ã¦è§£æ±ºã•ã‚Œã‚‹ã“ã¨ãŒå¤šãã€ã•ã¾ã–ã¾ãªä¸æ•´åˆãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">åŒæ™‚ã«èµ·ã“ã‚Šã†ã‚‹å•é¡Œã‚’ã€é–‹ç™ºã®è¦³ç‚¹ã‹ã‚‰è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ¤œç´¢ã«é–¢ã™ã‚‹å•é¡Œ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œæˆã™ã‚‹å ´åˆã€ä¸€æ„ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ãªãã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«åå‰ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®å ´åˆã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã¨ãã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰åå‰ã§å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã¯èµ·å‹•æ™‚ã«ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒªã‚¹ãƒˆã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ãã‚Œã‚‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€åå‰ãŒå¤‰ã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€æ›´æ–°ä¸­ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¸€èˆ¬ã«ã€åå‰ã§æ¤œç´¢ã™ã‚‹ã®ã¯ã‚ã¾ã‚Šè‰¯ã„è€ƒãˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§£æ±ºç­–ï¼š</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚·ã‚¹ãƒ†ãƒ ã§ä½œæˆã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€b_bp_workflow_templateãƒ†ãƒ¼ãƒ–ãƒ«ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é–‹ãã¨ã€SYSTEM_CODEãŒè¡¨ç¤ºã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¸­ã«ã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å‡ºåŠ›ã•ã‚Œãªã„ã ã‘ã§ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆIDã‚’ä½¿ç”¨ã—ã¦è‡ªåˆ†ã§ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚»ã‚¹ç·¨é›†ãƒšãƒ¼ã‚¸ã®URLã§ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4j/x2/re/4jx2redv2qt5vecw6aulrikvvmc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®IDã¨ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’ä½œæˆã—ã€é‡è¤‡ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨å¤‰æ›´ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å®Œå…¨æ€§ã‚’ç¢ºèªã—ã€ãã®ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">use</span> <span class="hljs-title">Bitrix</span>\<span class="hljs-title">Main</span>\<span class="hljs-title">Loader</span>;<font></font>
Loader::includeModule(<span class="hljs-string">"bizproc"</span>);<font></font>
$BPloader = CBPWorkflowTemplateLoader::GetLoader();<font></font>
<font></font>
<span class="hljs-comment">// set template CODE field</span>
setTemplateCode ($BPloader, <span class="hljs-string">'TEST'</span>, <span class="hljs-string">'94'</span> );<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTemplateCode</span>(<span class="hljs-params">$BPloader, $code, $tempalteId</span>) </span>{<font></font>
<font></font>
   <span class="hljs-keyword">if</span> (isCodeExists($BPloader, $code)) {<font></font>
<font></font>
      <span class="hljs-keyword">die</span>(<span class="hljs-string">'   '</span>);<font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">if</span> (!isCodeEmpty($BPloader, $tempalteId)) {<font></font>
<font></font>
      <span class="hljs-keyword">die</span>(<span class="hljs-string">'     '</span>)<font></font>
   }<font></font>
<font></font>
   $BPloader-&gt;UpdateTemplate($tempalteId, [<span class="hljs-string">'SYSTEM_CODE'</span> =&gt; $code]);<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">// check if $code exists in DB</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isCodeExists</span>(<span class="hljs-params">$BPloader, <span class="hljs-keyword">string</span> $code</span>) </span>{<font></font>
<font></font>
   $dbRes =  $BPloader-&gt;GetTemplatesList(<font></font>
      $arOrder = [<span class="hljs-string">'ID'</span> =&gt; <span class="hljs-string">'DESC'</span>],<font></font>
      $arFilter = [<span class="hljs-string">'CODE'</span> =&gt; $code],<font></font>
      $arGroupBy = <span class="hljs-literal">false</span>,<font></font>
      $arNavStartParams = <span class="hljs-literal">false</span>,<font></font>
      $arSelectFields = [<span class="hljs-string">'ID'</span>]<font></font>
   );<font></font>
<font></font>
   <span class="hljs-keyword">if</span> (intval($dbRes-&gt;SelectedRowsCount()) &gt; <span class="hljs-number">0</span>) {<font></font>
<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// check if the template code is not empty</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isCodeEmpty</span>(<span class="hljs-params">$BPloader, $tempalteId</span>) </span>{<font></font>
<font></font>
   $dbRes =  $BPloader-&gt;GetTemplatesList(<font></font>
      $arOrder = [<span class="hljs-string">'ID'</span> =&gt; <span class="hljs-string">'DESC'</span>],<font></font>
      $arFilter = [<span class="hljs-string">'CODE'</span> =&gt; <span class="hljs-string">''</span>, <span class="hljs-string">'ID'</span> =&gt; $tempalteId],<font></font>
      $arGroupBy = <span class="hljs-literal">false</span>,<font></font>
      $arNavStartParams = <span class="hljs-literal">false</span>,<font></font>
      $arSelectFields = [<span class="hljs-string">'ID'</span>]<font></font>
   );<font></font>
<font></font>
   <span class="hljs-keyword">if</span> (intval($dbRes-&gt;SelectedRowsCount()) &gt; <span class="hljs-number">0</span>) {<font></font>
<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€²ã‚ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ãƒªã‚¹ãƒˆä¸Šã«ãƒ†ã‚¹ãƒˆãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k4/z-/qc/k4z-qcs92cs5g7xcoiyf4dozfs0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã«ï¼ˆæ¬¡ã«æœ¬ç•ªç’°å¢ƒã«ï¼‰è»¢é€ã™ã‚‹ã«ã¯ã€ç§»è¡Œãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitrix24ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®æ©Ÿä¼šã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0x/ew/1c/0xew1cwrivumtl94pxwpfqvycoy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è»¢é€ã‚¹ã‚­ãƒ¼ãƒ ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜ã—ã¾ã™</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°ã—ã„ã‚¹ã‚¿ãƒ³ãƒ‰ã§ã¯ã€å¤ã„ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¾ã™</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§»è¡Œã‚’é©ç”¨</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒã©ã®ã‚ˆã†ã«ç™ºç”Ÿã™ã‚‹ã‹ã‚’æ¤œè¨ã—ã¾ã™ã€‚ </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§»è¡Œã‚’ä½œæˆã™ã‚‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã‹ã‚‰ã®ç§»è¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">//marketplace.1c-bitrix.ru/solutions/ws.migrations/</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ­ãƒ¼ã‚«ãƒ«/ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³/ã‚·ãƒŠãƒªã‚ªã«ã‚ã‚Šã¾ã™ã€‚</font></font><br>
</b><br>
<br>
<img src="https://habrastorage.org/webt/dp/pr/g1/dpprg1qs2z8qe_3i03xq87oo1xs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">migrationãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«filesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã“ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ­ãƒ¼ã‚«ãƒ«/ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³/ã‚·ãƒŠãƒªã‚ª/ãƒ•ã‚¡ã‚¤ãƒ«/ bp-94.bpt</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ws_m_1565783124_approve_task</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">WS</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">ScriptScenario</span> </span>{</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ws_m_1565783124_approve_task</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">WS</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">ScriptScenario</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">private</span> $arBPFields = [
       <span class="hljs-string">'DOCUMENT_TYPE'</span> =&gt; [
           <span class="hljs-string">'lists'</span>,
           <span class="hljs-string">'BizprocDocument'</span>,
           <span class="hljs-string">'iblock_'</span><font></font>
       ],<font></font>
       <span class="hljs-string">'AUTO_EXECUTE'</span> =&gt; <span class="hljs-number">0</span>,
       <span class="hljs-string">'NAME'</span> =&gt; <span class="hljs-string">' '</span>,
       <span class="hljs-string">'CODE'</span> =&gt; <span class="hljs-string">'TEST'</span>,<font></font>
   ];</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">importBP</span>(<span class="hljs-params">$path</span>)
</span>{<font></font>
   CModule::IncludeModule(<span class="hljs-string">'bizproc'</span>);<font></font>
   CModule::IncludeModule(<span class="hljs-string">'iblock'</span>);<font></font>
<font></font>
   <span class="hljs-comment">//Get iBlock id for which BP is created</span>
   <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'DOCUMENT_TYPE'</span>][<span class="hljs-number">2</span>] .= <span class="hljs-keyword">$this</span>-&gt;getIblockId();<font></font>
<font></font>
   <span class="hljs-comment">// Get BP id by the CODE</span><font></font>
   $result = \CBPWorkflowTemplateLoader::GetList(<font></font>
       [],<font></font>
       [<font></font>
           <span class="hljs-string">'CODE'</span>      =&gt; <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'CODE'</span>],
           <span class="hljs-string">'MODULE_ID'</span> =&gt; <span class="hljs-string">'lists'</span><font></font>
       ]<font></font>
   );<font></font>
  <font></font>
   <span class="hljs-keyword">if</span> ($arFields = $result-&gt;GetNext()) {<font></font>
       $id = $arFields[<span class="hljs-string">'ID'</span>];<font></font>
   } <span class="hljs-keyword">else</span> {<font></font>
       $id = <span class="hljs-number">0</span>;<font></font>
   }<font></font>
<font></font>
   <span class="hljs-comment">//read file to a variable</span>
   $f = fopen($path, <span class="hljs-string">'rb'</span>);<font></font>
   $datum = fread($f, filesize($path));<font></font>
   fclose($f);<font></font>
<font></font>
   <span class="hljs-comment">//Update BP if id&gt;0, otherwise add BP</span><font></font>
   \CBPWorkflowTemplateLoader::ImportTemplate(<font></font>
       $id,<font></font>
       <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'DOCUMENT_TYPE'</span>],
       <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'AUTO_EXECUTE'</span>],
       <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'NAME'</span>],
       <span class="hljs-string">''</span>,<font></font>
       $datum,<font></font>
       <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'CODE'</span>]<font></font>
   );<font></font>
<font></font>
   <span class="hljs-keyword">return</span> $arFields[<span class="hljs-string">'ID'</span>];<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€æœ€åˆã«ãƒ—ãƒ­ã‚»ã‚¹ã‚’é©ç”¨ã™ã‚‹æƒ…å ±ãƒ–ãƒ­ãƒƒã‚¯ã®IDã‚’ç‰¹å®šã—ã€æŒ‡å®šã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã§ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®IDã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã€ãã‚Œã‚’æ›´æ–°ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ-è¿½åŠ ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®é–¢æ•°ã¯ã€ä½œæˆã¾ãŸã¯æ›´æ–°ã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ã®IDã¨ã€ãã‚ŒãŒå¿…è¦ãªã‚‚ã®ã‚’è¿”ã—ã¾ã™-è©³ç´°ã¯å¾Œã§èª¬æ˜ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¿½åŠ /æ›´æ–°ã™ã‚‹ã‚³ãƒŸãƒƒãƒˆé–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commit</span>(<span class="hljs-params"></span>) </span>{<font></font>
<font></font>
$pathBPElement = <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/files/bp-94-approve-task.bpt'</span>;<font></font>
$id = <span class="hljs-keyword">$this</span>-&gt;importBP($pathBPElement);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ç§»è¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ç‰¹å®šã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œæˆãŠã‚ˆã³æ›´æ–°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã«é–¢ã™ã‚‹å•é¡Œ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã«æˆ»ã‚Šã€ãã“ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ï¼‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/m0/8k/tfm08kk36ju3xtaonop4vjpr3lo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€ä¿¡è€…ã¨ã—ã¦è‘—è€…ã‚’é¸æŠã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å—ä¿¡è€…ã¯ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HRãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼Svetlana Kuznetsova</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã©ã®ã‚ˆã†ã«è¨˜éŒ²ã•ã‚Œã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ç®¡ç†ãƒ‘ãƒãƒ«ã®PHPã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å–å¾—ã—ã¦å°åˆ·ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yi/ug/nx/yiugnxm3nbaflnr1_syuq9_3ljm.png"><br>
<br>
<pre><code class="php hljs">$arFieldsTemplate = \CBPWorkflowTemplateLoader::GetList([], [<span class="hljs-string">'ID'</span> =&gt; <span class="hljs-number">94</span>])-&gt;GetNext();<font></font>
 <font></font>
 <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;pre&gt;'</span>;<font></font>
 var_dump($arFieldsTemplate);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®é…åˆ—ã«ã¯</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w6/wm/wb/w6wmwbgunucvakqyk_1skuvqwqa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚group_g15è¡Œã‚’ç¢ºèªã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§15ã¯HRã‚°ãƒ«ãƒ¼ãƒ—IDã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¡Œuser_579ã‚’èª¿ã¹ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§579ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¤ã¾ã‚Šã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’åˆ¥ã®ã‚µã‚¤ãƒˆã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã¨ã€ä¸€è²«æ€§ãŒå¤±ã‚ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã«ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®IDã‚’ã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‚µã‚¤ãƒˆã«é–¢é€£ã™ã‚‹IDã«ç§»è¡Œã—ãŸå¾Œã€ç½®ãæ›ãˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚°ãƒ«ãƒ¼ãƒ—ã¯ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã§è­˜åˆ¥ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ã§è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€ãƒ—ãƒ­ã‚»ã‚¹ãŒä½œæˆã•ã‚ŒãŸã‚µã‚¤ãƒˆã§ã€ã‚°ãƒ«ãƒ¼ãƒ—ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ã‚’å–å¾—ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ã‚°ãƒ«ãƒ¼ãƒ—ã‚³ãƒ¼ãƒ‰ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€ç§»è¡Œã‚’è¨˜è¿°ã—ã¦æœ€åˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ä¾‹ã§ã¯ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ«ãƒ¼ãƒ—ã‚³ãƒ¼ãƒ‰-HR</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³-svetlana.kuznetsova</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã‚³ãƒ¼ãƒ‰ã¨ãƒ­ã‚°ã‚¤ãƒ³ã«ã‚ˆã£ã¦ã‚°ãƒ«ãƒ¼ãƒ—ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®IDã‚’æä¾›ã™ã‚‹ç§»è¡Œé–¢æ•°ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getUserIdï¼ˆ$ãƒ­ã‚°ã‚¤ãƒ³ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getGroupIdï¼ˆ$ã‚³ãƒ¼ãƒ‰ï¼‰;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®é©åˆ‡ãªå€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment">/**
  * Write action by apply scenario. Use method `setData` for save need rollback data
  **/</span>
 <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commit</span>(<span class="hljs-params"></span>) </span>{</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs">$pathBPElement = <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/files/bp-94-approve-task.bpt'</span>;<font></font>
$id = <span class="hljs-keyword">$this</span>-&gt;importBP($pathBPElement);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs">$arFieldsTemplate = \CBPWorkflowTemplateLoader::GetList([], [<span class="hljs-string">'ID'</span> =&gt; $id])-&gt;GetNext();<font></font>
$template = $arFieldsTemplate[<span class="hljs-string">"TEMPLATE"</span>];</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç½®ãæ›ãˆã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="php hljs">$template[<span class="hljs-number">0</span>][<span class="hljs-string">'Children'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'Properties'</span>][<span class="hljs-string">"MessageUserTo"</span>][<span class="hljs-number">0</span>] = <span class="hljs-string">'group_g'</span> . <span class="hljs-keyword">$this</span>-&gt;getGroupId(<span class="hljs-string">'HR'</span>);<font></font>
$template[<span class="hljs-number">0</span>][<span class="hljs-string">'Children'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'Properties'</span>][<span class="hljs-string">"MessageUserTo"</span>][<span class="hljs-number">1</span>] = <span class="hljs-string">'user_'</span> . <span class="hljs-keyword">$this</span>-&gt;getUserId(<span class="hljs-string">'svetlana.kuznetsova'</span>);<font></font>
$arNewFields = [<font></font>
  â€œTEMPLATEâ€ =&gt; $template,<font></font>
  â€œVARIABLESâ€ =&gt; $arFieldsTemplate[<span class="hljs-string">"VARIABLES"</span>]<font></font>
];<font></font>
$arNewFields[<span class="hljs-string">"MODIFIER_USER"</span>] = <span class="hljs-keyword">new</span> \CBPWorkflowTemplateUser(CBPWorkflowTemplateUser::CurrentUser);<font></font>
<font></font>
\CBPWorkflowTemplateLoader::Update($id, $arNewFields);<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€ç§»è¡Œã‚’é–‹å§‹ã™ã‚‹ã¨ãã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€importBPé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œæˆ/æ›´æ–°ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹é€ ã‚’é…åˆ—ã«å…¥ã‚Œã€IDã‚’ç½®ãæ›ãˆã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ›´æ–°ã—ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦ç´„ã™ã‚‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€ã‚µã‚¤ãƒˆé–“ã®è»¢é€ä¸­ã«ä¸æ•´åˆãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã„ãã¤ã‹ã®ã‚±ãƒ¼ã‚¹ã®ã¿ã«è§¦ã‚Œã€ä½•ã‚’æ¢ã™ã¹ãã‹ã‚’æ¦‚èª¬ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ä¸€èˆ¬çš„ã«ã€ç§ãŸã¡ã®å®Ÿè·µã§ã¯ã€æ¬¡ã®IDãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«é­é‡ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒã‚¤ãƒ³ãƒ‰ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">group_ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã¸ã®ãƒã‚¤ãƒ³ãƒ‰ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iblock_ï¼ˆæƒ…å ±ãƒ–ãƒ­ãƒƒã‚¯ã¸ã®ãƒã‚¤ãƒ³ãƒ‰ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SequentialWorkflowActivityï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®é–‹å§‹ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PROPERTY_ï¼ˆæœªå®šç¾©ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒã‚¤ãƒ³ãƒ‰ï¼‰</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ãŒæ­£ã—ãè¡Œã‚ã‚Œã¦ã„ã‚Œã°ã€ãƒ‡ãƒãƒƒã‚°ã•ã‚ŒãŸãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’æœ¬ç•ªç’°å¢ƒã«è¿…é€Ÿã‹ã¤ã‚¹ãƒ ãƒ¼ã‚ºã«è»¢é€ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã®çµŒé¨“ãŒã‚ãªãŸã«å½¹ç«‹ã¤ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ï¼</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Œå…¨ãªä¾‹ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-comment">/**
 * Updates migration scenario actions
 **/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ws_m_1565783124_approve_task</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">WS</span>\<span class="hljs-title">Migrations</span>\<span class="hljs-title">ScriptScenario</span>
</span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> $arBPFields = [
        <span class="hljs-string">'DOCUMENT_TYPE'</span> =&gt; [
            <span class="hljs-string">'lists'</span>,
            <span class="hljs-string">'BizprocDocument'</span>,
            <span class="hljs-string">'iblock_'</span><font></font>
        ],<font></font>
        <span class="hljs-string">'AUTO_EXECUTE'</span> =&gt; <span class="hljs-number">0</span>,
        <span class="hljs-string">'NAME'</span> =&gt; <span class="hljs-string">' '</span>,
        <span class="hljs-string">'CODE'</span> =&gt; <span class="hljs-string">'TEST'</span>,<font></font>
    ];<font></font>
<font></font>
    <span class="hljs-keyword">private</span> $codeIBlock = <span class="hljs-string">'APPROVE_TASK'</span>;<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Name of scenario
     * <span class="hljs-doctag">@return</span> string
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">name</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'approve task process'</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Description of scenario
     * <span class="hljs-doctag">@return</span> string
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">description</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'process to approve task and set task deadline  +14 days after approving'</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@return</span> array First element is hash, second is owner name
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">version</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'13ebf9abe69204014459b80a7036b7a0'</span>, <span class="hljs-string">''</span>];<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Return IBlock ID
     * <span class="hljs-doctag">@return</span> int
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getIblockId</span>(<span class="hljs-params"></span>)
    </span>{<font></font>
        $result = CIBlock::GetList(<font></font>
            [],<font></font>
            [<font></font>
                <span class="hljs-string">'TYPE'</span>   =&gt; <span class="hljs-string">'bitrix_processes'</span>,
                <span class="hljs-string">'=CODE'</span>  =&gt; <span class="hljs-keyword">$this</span>-&gt;codeIBlock<font></font>
            ],<font></font>
            <span class="hljs-literal">false</span>,<font></font>
            [<span class="hljs-string">'nTopCount'</span> =&gt; <span class="hljs-number">1</span>]<font></font>
        );<font></font>
        <span class="hljs-keyword">if</span> ($arIBlock = $result-&gt;Fetch()) {
            <span class="hljs-keyword">return</span> $arIBlock[<span class="hljs-string">'ID'</span>];<font></font>
        }<font></font>
            <font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Start import BP
     * <span class="hljs-doctag">@param</span> $path
     * <span class="hljs-doctag">@return</span> mixed
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">importBP</span>(<span class="hljs-params">$path</span>)
    </span>{<font></font>
        CModule::IncludeModule(<span class="hljs-string">'bizproc'</span>);<font></font>
        CModule::IncludeModule(<span class="hljs-string">'iblock'</span>);<font></font>
<font></font>
        <span class="hljs-comment">//Get iBlock id for which BP is created</span>
        <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'DOCUMENT_TYPE'</span>][<span class="hljs-number">2</span>] .= <span class="hljs-keyword">$this</span>-&gt;getIblockId();<font></font>
<font></font>
        <span class="hljs-comment">// Get BP id by the CODE</span><font></font>
        $result = \CBPWorkflowTemplateLoader::GetList(<font></font>
            [],<font></font>
            [<font></font>
                <span class="hljs-string">'CODE'</span>      =&gt; <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'CODE'</span>],
                <span class="hljs-string">'MODULE_ID'</span> =&gt; <span class="hljs-string">'lists'</span><font></font>
            ]<font></font>
        );<font></font>
        <font></font>
        <span class="hljs-keyword">if</span> ($arFields = $result-&gt;GetNext()) {<font></font>
            $id = $arFields[<span class="hljs-string">'ID'</span>];<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            $id = <span class="hljs-number">0</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-comment">//read file to a variable</span>
        $f = fopen($path, <span class="hljs-string">'rb'</span>);<font></font>
        $datum = fread($f, filesize($path));<font></font>
        fclose($f);<font></font>
<font></font>
        <span class="hljs-comment">//Update BP if id&gt;0, otherwise add BP</span><font></font>
        \CBPWorkflowTemplateLoader::ImportTemplate(<font></font>
            $id,<font></font>
            <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'DOCUMENT_TYPE'</span>],
            <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'AUTO_EXECUTE'</span>],
            <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'NAME'</span>],
            <span class="hljs-string">''</span>,<font></font>
            $datum,<font></font>
            <span class="hljs-keyword">$this</span>-&gt;arBPFields[<span class="hljs-string">'CODE'</span>]<font></font>
        );<font></font>
<font></font>
        <span class="hljs-keyword">return</span> $arFields[<span class="hljs-string">'ID'</span>];<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> $login
     * <span class="hljs-doctag">@return</span> mixed
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserId</span>(<span class="hljs-params">$login</span>)
    </span>{<font></font>
        $rsUsers = Bitrix\Main\UserTable::getList([<font></font>
            <span class="hljs-string">"select"</span> =&gt;[<span class="hljs-string">'ID'</span>],
            <span class="hljs-string">"filter"</span> =&gt; [<span class="hljs-string">'LOGIN'</span> =&gt; $login],<font></font>
        ]);<font></font>
        $userFields = $rsUsers-&gt;fetch();<font></font>
<font></font>
        <span class="hljs-keyword">return</span> $userFields[<span class="hljs-string">'ID'</span>];<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> $code
     * <span class="hljs-doctag">@return</span> mixed
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getGroupId</span>(<span class="hljs-params">$code</span>)
    </span>{<font></font>
        $rsGroups = \Bitrix\Main\GroupTable::getList(<font></font>
            [<font></font>
                <span class="hljs-string">'filter'</span> =&gt; [<span class="hljs-string">'STRING_ID'</span>=&gt; <span class="hljs-string">'HR'</span>],
                <span class="hljs-string">'select'</span> =&gt; [<span class="hljs-string">'ID'</span>]<font></font>
            ]);<font></font>
<font></font>
        $arFields = $rsGroups-&gt;fetch();<font></font>
        <font></font>
        <span class="hljs-keyword">return</span> $arFields[<span class="hljs-string">'ID'</span>];<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Write action by apply scenario. Use method `setData` for save need rollback data
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commit</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-comment">//make BP import</span>
        $pathBPElement = _DIR_ . <span class="hljs-string">'/files/bp-94-approve-task.bpt'</span>;<font></font>
        $id = <span class="hljs-keyword">$this</span>-&gt;importBP($pathBPElement);<font></font>
<font></font>
        <span class="hljs-comment">//get template data</span>
        $arFieldsTemplate = \CBPWorkflowTemplateLoader::GetList([], [<span class="hljs-string">'ID'</span> =&gt; $id])-&gt;GetNext();<font></font>
        $template = $arFieldsTemplate[<span class="hljs-string">'TEMPLATE'</span>];<font></font>
<font></font>
        <span class="hljs-comment">//replace id inside BP tempalte</span>
        $template[<span class="hljs-number">0</span>][<span class="hljs-string">'Children'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'Properties'</span>][<span class="hljs-string">'MessageUserTo'</span>][<span class="hljs-number">0</span>] = <span class="hljs-string">'group_g'</span> . <span class="hljs-keyword">$this</span>-&gt;getGroupId(<span class="hljs-string">'HR'</span>);<font></font>
        $template[<span class="hljs-number">0</span>][<span class="hljs-string">'Children'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'Properties'</span>][<span class="hljs-string">'MessageUserTo'</span>][<span class="hljs-number">1</span>] = <span class="hljs-string">'user_'</span> . <span class="hljs-keyword">$this</span>-&gt;getUserId(<span class="hljs-string">'svetlana.kuznetsova'</span>);<font></font>
        $arNewFields = [<font></font>
            <span class="hljs-string">'TEMPLATE'</span> =&gt; $template,
            <span class="hljs-string">'VARIABLES'</span> =&gt; $arFieldsTemplate[<span class="hljs-string">'VARIABLES'</span>]<font></font>
        ];<font></font>
        $arNewFields[<span class="hljs-string">'MODIFIER_USER'</span>] = <span class="hljs-keyword">new</span> CBPWorkflowTemplateUser(CBPWorkflowTemplateUser::CurrentUser);<font></font>
<font></font>
        \CBPWorkflowTemplateLoader::Update($id, $arNewFields);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Write action by rollback scenario. Use method `getData` for getting commit saved data
     **/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rollback</span>(<span class="hljs-params"></span>)
    </span>{<font></font>
        $pathBPElement = _DIR_ . <span class="hljs-string">'/files/bp-wt-old.bpt'</span>;<font></font>
        $id = <span class="hljs-keyword">$this</span>-&gt;importBP($pathBPElement);<font></font>
<font></font>
        $arFieldsTemplate = \CBPWorkflowTemplateLoader::GetList([], [<span class="hljs-string">'ID'</span> =&gt; $id])-&gt;GetNext();<font></font>
        $template = $arFieldsTemplate[<span class="hljs-string">'TEMPLATE'</span>];<font></font>
<font></font>
        $arNewFields = [<font></font>
            <span class="hljs-string">'TEMPLATE'</span> =&gt; $template,
            <span class="hljs-string">'VARIABLES'</span> =&gt; $arFieldsTemplate[<span class="hljs-string">'VARIABLES'</span>]<font></font>
        ];<font></font>
        $arNewFields[<span class="hljs-string">'MODIFIER_USER'</span>] = <span class="hljs-keyword">new</span> CBPWorkflowTemplateUser(CBPWorkflowTemplateUser::CurrentUser);<font></font>
        \CBPWorkflowTemplateLoader::Update($id, $arNewFields);<font></font>
    }<font></font>
}</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja466813/index.html">Posit-arithmeticï¼šè‡ªåˆ†ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§æµ®å‹•å°æ•°ç‚¹ã‚’æ‰“ã¡è² ã‹ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../ja466815/index.html">NEC HYDRAstor HS8ã®æŠ€è¡“æ¦‚è¦ãªã©</a></li>
<li><a href="../ja466817/index.html">VaronisãŒæš—å·åŒ–ãƒã‚¤ãƒ‹ãƒ³ã‚°ã‚¦ã‚¤ãƒ«ã‚¹ã‚’ç™ºè¦‹ï¼šç§ãŸã¡ã®èª¿æŸ»</a></li>
<li><a href="../ja466819/index.html">iOSã§ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ•ã‚¡ãƒ¼ã®å®Ÿè£…ã€‚ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã§ã•ã‚‰ã«ç¨¼ãã«ã¯ï¼Ÿ</a></li>
<li><a href="../ja466821/index.html">Amazon AWS Marketplaceã‹ã‚‰3CXã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</a></li>
<li><a href="../ja466829/index.html">Rã§ã®bigint IDã®æ“ä½œã«é–¢ã™ã‚‹ã„ãã¤ã‹ã®ã‚¿ãƒƒãƒ</a></li>
<li><a href="../ja466831/index.html">ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯ãªUnixãƒ©ã‚¤ã‚¯ãªOSã®é–‹ç™º-ãƒ’ãƒ¼ãƒ—ï¼ˆ4ï¼‰</a></li>
<li><a href="../ja466837/index.html">ã‚¬ã‚¹ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’å‚™ãˆãŸé›»æ°—è‡ªè»¢è»Šã§ã®é€±æœ«</a></li>
<li><a href="../ja466839/index.html">ãƒãƒ¼ãƒˆãƒ³ã‚³ãƒãƒ³ãƒ€ãƒ¼ã®æ­´å²ã€‚ãƒ‘ãƒ¼ãƒˆ1/3</a></li>
<li><a href="../ja466841/index.html">ãƒ©ãƒƒãƒ—ãƒˆãƒƒãƒ—ãŒã‚ã‚‹å ´åˆã€ãªãœåŠ ç†±ãƒ‘ãƒƒãƒ‰ï¼šåŸå­ãƒ¬ãƒ™ãƒ«ã§ã®ç†±æŠµæŠ—ã®ç ”ç©¶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>