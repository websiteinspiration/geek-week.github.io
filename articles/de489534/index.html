<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧙🏼 ☃️ 🏇 Noch einmal zur Analyse von Ausdrücken mit der Methode der rekursiven Abstammung 💪 🌓 👰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich war noch ein Schüler, als ich in die Hände des Buches "Anfängerkurs C und C ++" des Verlags Dialog MEPhI fiel. Aus diesem Buch lernte ich die Grun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Noch einmal zur Analyse von Ausdrücken mit der Methode der rekursiven Abstammung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489534/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich war noch ein Schüler, als ich in die Hände des Buches "Anfängerkurs C und C ++" des Verlags Dialog MEPhI fiel. Aus diesem Buch lernte ich die Grundlagen der objektorientierten Programmierung und es stellte mich vor ein Problem, das ich seit einiger Zeit nicht mehr lösen konnte. Am Ende stand eine Anwendung, die Programme auflistete, von denen eines als rekursiver Rechner bezeichnet wurde. Dies war meine erste Begegnung mit der Analyse von arithmetischen Ausdrücken unter Verwendung der rekursiven Abstiegsmethode. Ich erinnere mich noch an die langen Stunden, die damit verbracht wurden, zumindest etwas in diesem Code zu verstehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Artikel richtet sich in erster Linie an diejenigen, die zum ersten Mal vor der Aufgabe stehen, Ausdrücke zu analysieren.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir also den Parser für arithmetische Ausdrücke schreiben, müssen wir die Struktur dieser Ausdrücke verstehen. </font><font style="vertical-align: inherit;">Der Einfachheit halber werden wir die unäre Minusoperation und die Möglichkeit, Funktionen im Ausdruck zu verwenden, vorerst nicht berücksichtigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Beschreibung der Struktur verwenden wir die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Beckus-Naur-</font></a><font style="vertical-align: inherit;"> Formen</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E -&gt; T + E | </font><font style="vertical-align: inherit;">T - E | </font><font style="vertical-align: inherit;">T.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T -&gt; F * T | </font><font style="vertical-align: inherit;">F / t | </font><font style="vertical-align: inherit;">F.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F -&gt; N | </font><font style="vertical-align: inherit;">(E)</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der vertikale Balken "|" </font><font style="vertical-align: inherit;">bedeutet eine logische Operation "oder" und E, T, F, N - verschiedene Arten von Unterausdrücken, in die der ursprüngliche Ausdruck bei Verwendung dieser Sätze aufgeteilt wird. </font><font style="vertical-align: inherit;">N bezeichnet in diesem Fall eine Zahl. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der erste Satz bedeutet, dass ein Ausdruck vom Typ E aus einem Ausdruck vom Typ T plus einem Ausdruck vom Typ E oder einem Ausdruck vom Typ T minus einem Ausdruck vom Typ E oder nur einem Ausdruck vom Typ T bestehen kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für den zweiten Satz ist alles ähnlich, aber anstatt zu addieren und zu subtrahieren, wird multipliziert und Teilung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte Satz bedeutet, dass ein Ausdruck vom Typ F entweder eine Zahl oder ein Ausdruck vom Typ E in Klammern ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir, diese drei Sätze auf ein Beispiel eines arithmetischen Ausdrucks anzuwenden</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 + 3 * (4 - 5) + 6 - 7
</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir wenden den ersten Satz mehrmals an</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E (2 + 3 * (4-5) + 6-7) -&gt; </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T (2) + E (3 * (4-5) + 6-7) -&gt; </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T (2) + T (3 * (4-5)) + E (6-7) -&gt; </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T (2) + T (3 * (4-5)) + T (6) - T (7)</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt besteht unser Ausdruck nur noch aus Unterausdrücken vom Typ T, daher wenden wir den zweiten Satz auf jeden von ihnen an.</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T (2) -&gt; F (2)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T (3 * (4-5)) -&gt; F (3) * T ((4-5)) -&gt; F (3) * F ((4-5))</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T (6) -&gt; F (6)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T (7) -&gt; F (7)</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist Zeit für den dritten Satz</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F (2) -&gt; N (2) -&gt; 2</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F (3) -&gt; N (3) -&gt; 3</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F ((4-5)) -&gt; E (4-5)</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F (6) -&gt; N (6) -&gt; 6</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F (7) -&gt; N (7) -&gt; 7</font></font><font></font>
</pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für den Ausdruck in Klammern (4-5) haben wir rekursiv zum ersten Satz gewechselt und müssen alle Aktionen analog zu dem wiederholen, was er für den Rest des Ausdrucks war. </font><font style="vertical-align: inherit;">Wenn der Ausdruck verschachtelte Klammern enthalten würde, gäbe es mehr solche rekursiven Übergänge. </font><font style="vertical-align: inherit;">Ich würde empfehlen, dass Sie unabhängig versuchen, alle drei Sätze auf einen Ausdruck anzuwenden, der verschachtelte Ebenen von Klammern enthält, z. B. 2 + 2 * (3 + 4 * (5-6)), um sicherzustellen, dass sie auch für ihn funktionieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen wir nur noch die Aktionen implementieren, die von den Vorschlägen in Form von Code ausgeführt werden. </font><font style="vertical-align: inherit;">Dies ist die Analyse des Ausdrucks mit der Methode des rekursiven Abstiegs. Bevor Sie jedoch mit dem Schreiben von Code beginnen, vereinfachen wir die Sätze ein wenig, indem wir die Rekursion in den ersten beiden entfernen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir den ersten Satz endlos in sich selbst einsetzen, dann bekommen wir</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E -&gt; T ± T ± T ± T ± ... ± T.</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Satz kann auf ähnliche Weise transformiert werden.</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T -&gt; F * / F * / F * / * / ... * / F.</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich bedeutet dies, dass wir hier anstelle einer Rekursion eine Schleife verwenden können. </font><font style="vertical-align: inherit;">Ebenso kann eine Rekursion nicht aus dem dritten Satz ausgeschlossen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden den Code in Java schreiben, weil </font><font style="vertical-align: inherit;">Dies ist momentan die bekannteste Programmiersprache für mich. </font><font style="vertical-align: inherit;">Die letzte Bemerkung, bevor wir mit dem Schreiben des Codes beginnen - ich lasse die Aufgabe der Tokenisierung aus, d.h. </font><font style="vertical-align: inherit;">Aufteilen des Ausdrucks in unteilbare signifikante Elemente (Token). </font><font style="vertical-align: inherit;">Solche Token sind Zahlen, Zeichen von Rechenoperationen und Klammern. </font><font style="vertical-align: inherit;">Angenommen, wir haben bereits ein Token-Array als Eingabe vom Ausdruck.</font></font><br>
<br>
<pre><code class="java hljs">String[] tokens = {<span class="hljs-string">"2"</span>, <span class="hljs-string">"+"</span>, <span class="hljs-string">"3"</span>, <span class="hljs-string">"*"</span>, <span class="hljs-string">"("</span>, <span class="hljs-string">"4"</span>, <span class="hljs-string">"-"</span>, <span class="hljs-string">"5"</span>, <span class="hljs-string">")"</span>, <span class="hljs-string">"+"</span>, <span class="hljs-string">"6"</span>, <span class="hljs-string">"-"</span>, <span class="hljs-string">"7"</span>};
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie die nächste Parser-Klasse, die die Methoden enthält</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse () beginnt mit dem Parsen eines Ausdrucks</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expression () zur Behandlung von Ausdrücken vom Typ E.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">term () zur Verarbeitung von Ausdrücken vom Typ T.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faktor () zur Verarbeitung von Ausdrücken vom Typ F und N.</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RecursiveDescentParser</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String[] tokens;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>; <span class="hljs-comment">//   </span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RecursiveDescentParser</span><span class="hljs-params">(String[] tokens)</span> </span>{
        <span class="hljs-keyword">this</span>.tokens = tokens;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Double <span class="hljs-title">parse</span><span class="hljs-params">()</span> </span>{<font></font>
        Double result = expression();<font></font>
        <span class="hljs-keyword">if</span> (pos != tokens.length) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(<span class="hljs-string">"Error in expression at "</span> + tokens[pos]));<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// E -&gt; T±T±T±T± ... ±T</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Double <span class="hljs-title">expression</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">//   </span><font></font>
        Double first = term();<font></font>
<font></font>
        <span class="hljs-keyword">while</span> (pos &lt; tokens.length) {<font></font>
            String operator = tokens[pos];<font></font>
            <span class="hljs-keyword">if</span> (!operator.equals(<span class="hljs-string">"+"</span>) &amp;&amp; !operator.equals(<span class="hljs-string">"-"</span>)) {
                <span class="hljs-keyword">break</span>;<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                pos++;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-comment">//    ()</span><font></font>
            Double second = term();<font></font>
            <span class="hljs-keyword">if</span> (operator.equals(<span class="hljs-string">"+"</span>)) {<font></font>
                first += second;<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                first -= second;<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> first;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// T -&gt; F*/F*/F*/*/ ... */F</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Double <span class="hljs-title">term</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">//   </span><font></font>
        Double first = factor();<font></font>
<font></font>
        <span class="hljs-keyword">while</span> (pos &lt; tokens.length) {<font></font>
            String operator = tokens[pos];<font></font>
            <span class="hljs-keyword">if</span> (!operator.equals(<span class="hljs-string">"*"</span>) &amp;&amp; !operator.equals(<span class="hljs-string">"/"</span>)) {
                <span class="hljs-keyword">break</span>;<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                pos++;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-comment">//    ()</span><font></font>
            Double second = factor();<font></font>
            <span class="hljs-keyword">if</span> (operator.equals(<span class="hljs-string">"*"</span>)) {<font></font>
                first *= second;<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                first /= second;<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> first;<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// F -&gt; N | (E)</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Double <span class="hljs-title">factor</span><span class="hljs-params">()</span> </span>{<font></font>
        String next = tokens[pos];<font></font>
        Double result;<font></font>
        <span class="hljs-keyword">if</span> (next.equals(<span class="hljs-string">"("</span>)) {<font></font>
            pos++;<font></font>
            <span class="hljs-comment">//    ,        </span><font></font>
            result = expression();  <font></font>
            String closingBracket;<font></font>
            <span class="hljs-keyword">if</span> (pos &lt; tokens.length) {<font></font>
                closingBracket = tokens[pos];<font></font>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(<span class="hljs-string">"Unexpected end of expression"</span>);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (pos &lt; tokens.length &amp;&amp; closingBracket.equals(<span class="hljs-string">")"</span>)) {<font></font>
                pos++;<font></font>
                <span class="hljs-keyword">return</span> result;<font></font>
            }<font></font>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException(<span class="hljs-string">"')' expected but "</span> + closingBracket);<font></font>
        }<font></font>
        pos++;<font></font>
        <span class="hljs-comment">//       </span>
        <span class="hljs-keyword">return</span> Double.parseDouble(next);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles. </font><font style="vertical-align: inherit;">Falls gewünscht, kann diesem Parser beigebracht werden, mit einem unären Minus oder Funktionen in einem Ausdruck zu arbeiten. </font><font style="vertical-align: inherit;">Das erste, was zu tun ist, ist, die ursprünglichen Sätze so zu ändern, dass sie ein neues Element der Struktur des Ausdrucks berücksichtigen, und es kann weitere Vorschläge daraus geben. </font><font style="vertical-align: inherit;">Sobald sie ordnungsgemäß geändert wurden, wird die Implementierung fast formal.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489518/index.html">Mitgliederaustausch Low-Cost-Austausch erscheint in den USA</a></li>
<li><a href="../de489526/index.html">Nullsummenspiele und Karush-Kun-Takker-Bedingungen</a></li>
<li><a href="../de489528/index.html">Sie sehen während der Entwicklung keine Anzeigen? Störung</a></li>
<li><a href="../de489530/index.html">Was macht ein reaktives System gut?</a></li>
<li><a href="../de489532/index.html">Was ist neu in Android 11 für Benutzer und Entwickler</a></li>
<li><a href="../de489536/index.html">Merkmale von Stromversorgungssystemen mit DDIBP</a></li>
<li><a href="../de489538/index.html">Warum mögen Entwickler Agile nicht?</a></li>
<li><a href="../de489540/index.html">Debuggen von ARM Cortex-M-Mikrocontrollern durch UART Teil 2</a></li>
<li><a href="../de489542/index.html">Nano oder minimalistische IDE</a></li>
<li><a href="../de489544/index.html">Ändern Sie die Größe von Bildern im laufenden Betrieb mit Nginx und LuaJIT (OpenResty).</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>