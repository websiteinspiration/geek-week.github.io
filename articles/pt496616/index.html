<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÉ üî• üõ∂ Como contamos pessoas que usam vis√£o computacional üë©üèΩ‚Äçüöí ü§öüèΩ üë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fotos de fontes abertas
 
 Reuni√µes em massa de pessoas criam problemas em v√°rios campos (varejo, servi√ßos p√∫blicos , bancos, desenvolvedores). Os cli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como contamos pessoas que usam vis√£o computacional</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/center2m/blog/496616/"><img src="https://habrastorage.org/webt/b2/gt/vy/b2gtvy54vvgxucterhxudpe5y58.png" alt="imagem"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotos de fontes abertas</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Reuni√µes em massa de pessoas criam problemas em v√°rios campos (varejo, servi√ßos </font><i><font style="vertical-align: inherit;">p√∫blicos</font></i><font style="vertical-align: inherit;"> , bancos, desenvolvedores). Os clientes precisam combinar e monitorar informa√ß√µes sobre o n√∫mero de pessoas em muitos lugares: em escrit√≥rios de servi√ßo, pr√©dios administrativos, canteiros de obras, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As tarefas de contar pessoas t√™m solu√ß√µes prontas, por exemplo, o uso de c√¢meras com an√°lises integradas. No entanto, em muitos casos, √© importante usar um grande n√∫mero de c√¢meras instaladas anteriormente em diferentes departamentos. Al√©m disso, uma solu√ß√£o que leve em considera√ß√£o as especificidades de um cliente em particular ser√° melhor para ele.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossos nomes s√£o Tatyana Voronova e Elvira Dyaminova, estamos envolvidos na an√°lise de dados no Center 2M. Embora o t√≥pico pare√ßa ser o mais simples do que est√° sendo considerado atualmente nos problemas de vis√£o computacional, mesmo nesse problema, quando se trata de pr√°tica (implementa√ß√£o), muitas subtarefas complexas e n√£o triviais precisam ser resolvidas. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O objetivo do nosso artigo √© mostrar a complexidade e as abordagens b√°sicas dos problemas de vis√£o computacional, usando o exemplo de solu√ß√£o de um dos problemas b√°sicos.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para os seguintes materiais, queremos atrair colegas: devops, engenheiro, gerentes de projeto em an√°lise de v√≠deo, para que falem sobre os recursos de computa√ß√£o envolvidos, medi√ß√µes de velocidade, as nuances da comunica√ß√£o com os clientes e hist√≥rias de implementa√ß√£o de projetos. Vamos nos concentrar em alguns dos m√©todos de an√°lise de dados usados.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar com a seguinte declara√ß√£o: voc√™ precisa exibir o n√∫mero de pessoas na fila no escrit√≥rio de servi√ßo. </font><font style="vertical-align: inherit;">Se a fila, de acordo com as regras internas da empresa cliente, for considerada cr√≠tica, o cen√°rio interno come√ßar√° a ser elaborado:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notifica√ß√£o da necessidade de abrir uma entrada / caixa adicional;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chamada do gerente;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informando sobre a necessidade de redirecionar fluxos de pessoas para outros balc√µes (mais gratuitos).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, nosso trabalho economizar√° muitos nervos aos clientes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelos de aprendizado de m√°quina usados</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detec√ß√£o de silhuetas de pessoas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, decidimos usar um modelo j√° treinado para detectar pessoas (silhuetas), uma vez que tais tarefas t√™m solu√ß√µes bastante boas, por exemplo, a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defini√ß√£o de silhuetas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, na biblioteca TensorFlow, h√° um grande n√∫mero de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelos pr√©-treinados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s a realiza√ß√£o dos testes, primeiro estabelecemos duas arquiteturas: R-CNN mais r√°pida e YOLO v2. Mais tarde, depois que a nova vers√£o apareceu, adicionamos o YOLO v3. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descri√ß√£o dos modelos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo de resultado de reconhecimento para YOLO v2 (a seguir, imagens s√£o obtidas de fontes gratuitas - n√£o podemos publicar quadros de c√¢meras de clientes): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7d/7t/ci/7d7tciq9yzbof4hsrp00ckrbh7o.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo de resultado de reconhecimento para Faster R-CNN:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lg/qg/gq/lgqggq6y-hq6bbkmpkynivfy1co.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vantagem do YOLO √© que o modelo responde mais rapidamente e, em algumas tarefas, isso √© importante. No entanto, na pr√°tica, descobrimos que, se n√£o for poss√≠vel usar uma vers√£o pr√©-treinada do modelo, e a reciclagem for necess√°ria em seu conjunto de treinamento especializado, √© mais correto usar o R-CNN mais r√°pido. Se a c√¢mera foi instalada longe o suficiente das pessoas (a altura da silhueta √© inferior a 100 pixels para uma resolu√ß√£o de 1920 por 1080) ou foi necess√°rio reconhecer adicionalmente o equipamento de prote√ß√£o individual de uma pessoa: capacetes, fixadores, elementos de vestu√°rio de prote√ß√£o, nessas situa√ß√µes a qualidade do treinamento resulta em seu pr√≥prio conjunto de dados (at√© 10 mil objetos diferentes) para o YOLO v2, n√£o ficamos satisfeitos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O YOLO v3 mostrou resultados aceit√°veis, no entanto, os testes de velocidade n√£o deram uma vantagem significativa para o YOLO v3 em compara√ß√£o ao R-CNN mais r√°pido. Al√©m disso, encontramos uma maneira de aumentar a velocidade de reconhecimento usando o lote (processamento em grupo de imagens), an√°lise seletiva de imagens (mais sobre isso abaixo).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para todos os tipos de modelos, aprimoramos a precis√£o usando o p√≥s-processamento dos resultados: removemos valores discrepantes de valores, obtivemos os valores mais comuns para um conjunto de quadros consecutivos. Um segundo de uma c√¢mera geralmente corresponde a 25-50 quadros. Obviamente, para melhorar o desempenho (com um n√∫mero crescente de c√¢meras), analisamos nem todos os quadros, mas muitas vezes √© poss√≠vel dar uma resposta final por um intervalo de v√°rios segundos, ou seja, usar v√°rios quadros. Essa decis√£o pode ser tomada dinamicamente, levando em considera√ß√£o o n√∫mero total de c√¢meras (fluxos de v√≠deo para processamento) e a capacidade computacional dispon√≠vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo de uso do modelo Faster R-CNN, treinado em nosso pr√≥prio conjunto de dados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cn/b9/8i/cnb98ihri3ztp_kd6eanszvv2g4.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora estamos realizando testes com o modelo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSD-300</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esperamos que isso nos d√™ um aumento de produtividade, mantendo uma qualidade de reconhecimento aceit√°vel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando seu pr√≥prio conjunto de dados de treinamento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos casos em que voc√™ deseja criar seu pr√≥prio conjunto de aprendizado, desenvolvemos para n√≥s mesmos o seguinte procedimento:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coletamos videoclipes com os objetos necess√°rios: v√≠deos de clientes, v√≠deos de dom√≠nio p√∫blico (v√≠deos definidos, c√¢meras de vigil√¢ncia);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recortamos e filtramos fragmentos de v√≠deo para que o conjunto de dados resultante seja equilibrado entre v√°rios objetos de reconhecimento;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Distribu√≠mos quadros entre marcadores para destacar os objetos necess√°rios. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um exemplo de uma ferramenta de marca√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar seletivamente os resultados dos marcadores;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se necess√°rio, realizamos aumento: geralmente adicionamos curvas, reflex√£o, alteramos a nitidez (formam um conjunto de dados marcado e estendido).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando zonas de detec√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dos problemas com a contagem de pessoas na fila √© a interse√ß√£o das √°reas de visibilidade de v√°rias c√¢meras. </font><font style="vertical-align: inherit;">Mais de uma c√¢mera pode ser instalada em uma sala; portanto, √© importante preservar a √°rea sobreposta das imagens e, quando uma pessoa entra no campo de vis√£o de v√°rias c√¢meras, ela deve ser levada em considera√ß√£o uma vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em algumas situa√ß√µes, as pessoas precisam ser detectadas apenas em uma determinada √°rea da sala (perto das janelas de servi√ßo) ou plataforma (perto do equipamento).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por raz√µes √≥bvias, √© errado verificar se o ret√¢ngulo da borda (caixa / quadro), restringindo toda a pessoa, cai na zona (pol√≠gono). </font><font style="vertical-align: inherit;">Nessa situa√ß√£o, a parte inferior (terceira / metade) do ret√¢ngulo √© dividida em pontos - n√≥s (uma grade de 10 por 10 n√≥s) e a queda na zona dos n√≥s selecionados individualmente √© verificada. </font><font style="vertical-align: inherit;">Os n√≥s "significativos" s√£o alocados pelo administrador do sistema com base na geometria da sala (os valores padr√£o tamb√©m s√£o selecionados - se a configura√ß√£o para uma sala espec√≠fica n√£o for inserida). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/ck/6w/flck6wqyyr5ojbwpeuqebuidzoe.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, a aplica√ß√£o da arquitetura </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mask R-CNN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para nossas tarefas est√° </font><font style="vertical-align: inherit;">sendo testada </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O m√©todo permite determinar o contorno da silhueta - isso permitir√° </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">evitar o uso de um ret√¢ngulo de borda ao analisar a interse√ß√£o com uma zona</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/wy/oq/etwyoqwuuebhqh4jyxmf8j509-0.jpeg" alt="imagem"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outra abordagem: detec√ß√£o de cabe√ßa (modelo de treinamento)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A qualidade nem sempre √© alcan√ßada escolhendo um modelo, aumentando / alterando o conjunto de treinamento e outros m√©todos puramente de ML. √Äs vezes, uma melhoria decisiva s√≥ pode ser obtida alterando toda a formula√ß√£o do problema (por exemplo, no nosso problema). Nessas filas, as pessoas se amontoam e, portanto, se sobrep√µem, de modo que a qualidade do reconhecimento geralmente √© insuficiente para usar apenas esse m√©todo em condi√ß√µes reais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja a imagem abaixo. Fechamos os olhos para o fato de a foto ter sido tirada no telefone e o √¢ngulo de inclina√ß√£o n√£o corresponder ao √¢ngulo de inclina√ß√£o das c√¢meras de CFTV. H√° 18 pessoas no quadro, e o modelo de detec√ß√£o de silhueta identificou 11 pessoas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/qe/lr/twqelrrbt5dsacykfcb_2vm1zwe.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para melhorar os resultados, passamos da defini√ß√£o de silhuetas para a defini√ß√£o de objetivos. Para isso, o modelo R-CNN mais r√°pido foi treinado em um conjunto de dados retirado de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o conjunto de dados inclui quadros com um n√∫mero diferente de pessoas, incluindo grandes grupos, entre os quais pessoas de diferentes ra√ßas e idades). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, enriquecemos o conjunto de dados com quadros do material (das c√¢meras) do cliente em cerca de um ter√ßo (principalmente devido ao fato de que o conjunto de dados original tinha poucas cabe√ßas). Um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi √∫til para o aprendizado de um modelo </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os principais problemas que encontramos s√£o a qualidade da imagem e a escala dos objetos. As cabe√ßas t√™m tamanhos diferentes (como pode ser visto na imagem acima), e os quadros das c√¢meras do cliente t√™m uma resolu√ß√£o de 640x480, por isso, objetos interessantes (capuzes, bolas de Natal, encostos de cadeiras) √†s vezes s√£o detectados como cabe√ßas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, no conjunto de dados de treinamento, rotulamos chefes:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q6/u6/di/q6u6di-qwgmrlotfsyxeynpx-1q.png" alt="imagem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- estas s√£o cabe√ßas em um conjunto de dados; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rn/2r/es/rn2resr7gorbgtezqs7jhoozzhs.jpeg" alt="imagem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- e este √© o encosto da cadeira, mas o modelo quer acreditar que este √© o chefe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, em geral, esse modelo lida muito bem nos casos em que h√° uma grande concentra√ß√£o de pessoas. Assim, no quadro acima, nosso modelo identificou 15 pessoas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b2/gt/vy/b2gtvy54vvgxucterhxudpe5y58.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, nesta imagem, o modelo n√£o conseguiu encontrar apenas tr√™s cabe√ßas, que foram significativamente bloqueadas por objetos estranhos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para melhorar a qualidade do modelo, voc√™ pode substituir as c√¢meras atuais por c√¢meras com uma resolu√ß√£o mais alta e coletar e marcar adicionalmente o conjunto de dados de treinamento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, deve-se ter em mente que, com um pequeno n√∫mero de pessoas, o m√©todo de detec√ß√£o por silhuetas e n√£o por cabe√ßas √© mais adequado, pois √© mais dif√≠cil sobrepor ou confundir completamente com objetos estranhos. </font><font style="vertical-align: inherit;">No entanto, se houver uma multid√£o, n√£o h√° sa√≠da; portanto, para contar as pessoas na fila, foi decidido usar dois modelos em paralelo - para cabe√ßas e silhuetas - e combinar a resposta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Silhuetas e cabe√ßas, um exemplo de resultado de reconhecimento:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ku/rf/jt/kurfjth3rdirwguzsqnsrgnketg.png" alt="imagem"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classifica√ß√£o de precis√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao testar o modelo, foram selecionados quadros que n√£o participaram do treinamento (conjunto de dados com um n√∫mero diferente de pessoas no quadro, em diferentes √¢ngulos e tamanhos diferentes), para avaliar a qualidade do modelo, usamos recall e precis√£o. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lembre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -se de que a integridade mostra qual propor√ß√£o de objetos que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realmente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pertencem √† classe positiva, previmos corretamente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precis√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a precis√£o mostra qual a propor√ß√£o de objetos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reconhecidos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como objetos de uma classe positiva que previmos corretamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em quadros de c√¢meras em locais de teste (as imagens nessas salas estavam no conjunto de dados) m√©tricas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9k/dc/to/9kdctoymo_ibp2pyhzxhnllrtkk.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em quadros de novas c√¢meras (essas salas n√£o estavam no conjunto de dados):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wn/pc/a0/wnpca03c5bbmnermgoiuh9zegzy.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando o cliente precisava de um d√≠gito, uma combina√ß√£o de precis√£o e integridade, fornec√≠amos uma </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©dia harm√¥nica</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medida F</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<img src="https://habrastorage.org/webt/ye/3o/aw/ye3oawilyj5rh_cvzpxr0c0sx3w.png" alt="imagem"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comunicando</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma parte importante do servi√ßo √© estat√≠stica. Juntamente com quadros individuais (e pessoas dedicadas contadas por eles), os clientes desejam ver os resultados na forma de relat√≥rios prontos (pain√©is) com ocupa√ß√£o m√©dia / m√°xima para diferentes intervalos de tempo. O resultado geralmente √© interessante na forma de gr√°ficos e tabelas que caracterizam a distribui√ß√£o do n√∫mero de pessoas ao longo do tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, em nossa solu√ß√£o para o quadro, o n√∫mero de pessoas para os dois modelos (silhuetas e cabe√ßas) √© calculado e o m√°ximo √© selecionado. Se houver v√°rias c√¢meras na sala, a zona de sobreposi√ß√£o da imagem (predefinida por meio da interface) √© salva e, quando uma pessoa entra no escopo de v√°rias c√¢meras, ela √© levada em considera√ß√£o uma vez.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, o valor do n√∫mero de pessoas na fila √© formado por v√°rios quadros consecutivos - para o intervalo </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œît</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dentro de uma hora, os valores para v√°rios desses intervalos s√£o descarregados para cada sala. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tamanho do intervalo de tempo e o n√∫mero de intervalos s√£o determinados com base no n√∫mero de salas e na pot√™ncia de computa√ß√£o usada. Para cada intervalo, uma matriz de valores √© formada com o n√∫mero de pessoas na sala. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O valor mais comum (modo) √© selecionado. Se houver v√°rios valores com a mesma frequ√™ncia, o m√°ximo ser√° selecionado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O valor resultante √© o n√∫mero de pessoas na fila no momento </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imediatamente ap√≥s o intervalo em quest√£o. </font><font style="vertical-align: inherit;">Em apenas uma hora, um conjunto de valores √© obtido para diferentes intervalos - ou seja, valores nos instantes de tempo </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t_1, t_2 .... </font><font style="vertical-align: inherit;">t_n</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais para </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t_1, t_2 .... </font><font style="vertical-align: inherit;">t_n, os</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> valores m√°ximo e m√©dio do n√∫mero de pessoas s√£o calculados - esses valores s√£o exibidos no relat√≥rio como cargas m√©dias e de pico por uma determinada hora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagrama da distribui√ß√£o de pessoas por tempo para carga m√°xima (exemplo simples): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/nb/zp/umnbzpjh1aj_0gdt1qhwywj8niu.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagrama da distribui√ß√£o de pessoas por tempo para carga </font><font style="vertical-align: inherit;">m√°xima (exemplo </font><font style="vertical-align: inherit;">simples):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rj/h4/rx/rjh4rxxkyftekb8tspvwylamwu8.png" alt="imagem"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multid√µes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Concluindo, para concluir o t√≥pico, gostaria de mencionar casos de multid√µes muito grandes, por exemplo, multid√µes em est√°dios, em locais de intenso tr√°fego humano. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas tarefas s√£o sobre estimar o tamanho da multid√£o: se for uma multid√£o de 300 pessoas, uma resposta de 312 ou 270 ser√° considerada aceit√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na pr√°tica, n√£o tivemos que resolver esses problemas com a ajuda da an√°lise de v√≠deo (se este for um evento organizado, ser√° mais f√°cil para cada pessoa emitir um r√≥tulo). No entanto, realizamos testes. Para tais tarefas, s√£o utilizados m√©todos separados, uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis√£o geral dos m√©todos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado do modelo da revis√£o (modelo pr√©-treinado na CSRNet) foi reproduzido:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/ks/-k/vqks-kmt4kykj1vuls2t9dr18sc.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O √¢ngulo √© importante para as configura√ß√µes deste modelo, ou seja, se o local da grava√ß√£o for fixo, o resultado ser√° melhor do que quando aplicado a diversas imagens. </font><font style="vertical-align: inherit;">De um modo geral, h√° uma oportunidade de treinar novamente este modelo - a qualidade pode ser aprimorada durante a opera√ß√£o do modelo, quando o v√≠deo real das c√¢meras instaladas est√° ativado. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autores do artigo: Tatyana Voronova (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tvoronova</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), Elvira Dyaminova (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elviraa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496600/index.html">Como parte da substitui√ß√£o de importa√ß√µes, Moscou compra software da Microsoft por 90 milh√µes de rublos</a></li>
<li><a href="../pt496608/index.html">Food Design Digest, mar√ßo de 2020</a></li>
<li><a href="../pt496610/index.html">Roteador Banana Pi R64 - Debian, Wireguard, ILV</a></li>
<li><a href="../pt496612/index.html">Sim, meu laptop antigo √© v√°rias vezes mais poderoso que o servidor de produ√ß√£o</a></li>
<li><a href="../pt496614/index.html">Como os Habrachians mudaram em 5 anos? Ou "280 semanas depois"</a></li>
<li><a href="../pt496620/index.html">Erros populares em ingl√™s entre profissionais de TI</a></li>
<li><a href="../pt496626/index.html">Journeyman and Dragons: como ajudar o estagi√°rio a se adaptar em equipe</a></li>
<li><a href="../pt496630/index.html">Interface Bikes Toxic Grandfather. "Artefatos minha bunda!" (s1 e5)</a></li>
<li><a href="../pt496634/index.html">Escola 21 para o candidato</a></li>
<li><a href="../pt496638/index.html">F #, algoritmo de marca√ß√£o para componentes de imagem conectados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>