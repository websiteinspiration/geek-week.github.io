<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ï¸ ğŸ‘¶ â›³ï¸ Linuxã§ã®å°ã•ãªãƒ‡ã‚£ã‚¹ã‚¯ã‹ã‚‰å¤§ããªãƒ‡ã‚£ã‚¹ã‚¯ã¸ã®ç½®ãæ›ãˆ âœŒï¸ ğŸ˜° ğŸ’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚Linuxã‚¢ãƒ‰ãƒŸãƒ‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚³ãƒ¼ã‚¹ã®æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ã®ç«‹ã¡ä¸Šã’ã‚’è¦‹è¶Šã—ã¦ã€å­¦ç”Ÿã¨ã‚³ãƒ¼ã‚¹ãƒ¡ãƒ³ã‚¿ãƒ¼ã§ã‚ã‚‹REG.RUä¼æ¥­å‘ã‘è£½å“ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚µãƒãƒ¼ãƒˆã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆã§ã‚ã‚‹Roman TravinãŒæ›¸ã„ãŸæœ‰ç”¨ãªè³‡æ–™ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
 
 
 
 ã“ã®è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ¬ã‚¤ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Linuxã§ã®å°ã•ãªãƒ‡ã‚£ã‚¹ã‚¯ã‹ã‚‰å¤§ããªãƒ‡ã‚£ã‚¹ã‚¯ã¸ã®ç½®ãæ›ãˆ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/486084/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linuxã‚¢ãƒ‰ãƒŸãƒ‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ã‚¹ã®æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ã®ç«‹ã¡ä¸Šã’ã‚’è¦‹è¶Šã—</font><font style="vertical-align: inherit;">ã¦ã€å­¦ç”Ÿã¨ã‚³ãƒ¼ã‚¹ãƒ¡ãƒ³ã‚¿ãƒ¼ã§ã‚ã‚‹REG.RUä¼æ¥­å‘ã‘è£½å“ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚µãƒãƒ¼ãƒˆã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆã§ã‚ã‚‹Roman TravinãŒæ›¸ã„ãŸæœ‰ç”¨ãªè³‡æ–™</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã‚’</font></a><font style="vertical-align: inherit;">å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/uo/ar/_j/uoar_jhfy1k5vvnqceiil6cbe10.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã“ã®è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ¬ã‚¤ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã•ã‚‰ã«æ‹¡å¼µã—ã¦ã€ãƒ‡ã‚£ã‚¹ã‚¯ã‚’äº¤æ›ã—ã¦æƒ…å ±ã‚’æ–°ã—ã„å¤§ããªãƒ‡ã‚£ã‚¹ã‚¯ã«è»¢é€ã™ã‚‹2ã¤ã®ã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚æœ€åˆã®ã‚±ãƒ¼ã‚¹ã¯ã€åŒã˜MBR / MBRã¾ãŸã¯GPT / GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’æŒã¤ãƒ‡ã‚£ã‚¹ã‚¯ã®äº¤æ›ã«é–¢ä¿‚ã—ã¾ã™ã€‚2ç•ªç›®ã®ã‚±ãƒ¼ã‚¹ã¯ã€biosbootãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’æŒã¤GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹2 TBã‚ˆã‚Šå¤§ãã„ãƒ‡ã‚£ã‚¹ã‚¯ã®MBRãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’æŒã¤ãƒ‡ã‚£ã‚¹ã‚¯ã®äº¤æ›ã«é–¢ä¿‚ã—ã¾ã™ã€‚ã©ã¡ã‚‰ã®å ´åˆã‚‚ã€ãƒ‡ãƒ¼ã‚¿ã®è»¢é€å…ˆã®ãƒ‡ã‚£ã‚¹ã‚¯ã¯ã™ã§ã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ä½¿ç”¨ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¯ext4ã§ã™ã€‚</font></font><br>
<br>
<hr><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚±ãƒ¼ã‚¹1ï¼šå°ã•ã„ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’å¤§ãã„ãƒ‰ãƒ©ã‚¤ãƒ–ï¼ˆæœ€å¤§2 TBï¼‰ã§ç½®ãæ›ãˆã‚‹</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¿ã‚¹ã‚¯ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å ±ã‚’è»¢é€ã—ã¦ã€ç¾åœ¨ã®ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’ã‚ˆã‚Šå¤§ããªãƒ‰ãƒ©ã‚¤ãƒ–ï¼ˆæœ€å¤§2 TBï¼‰ã«äº¤æ›ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸ240 GB SSDï¼ˆRAID-1ï¼‰ãƒ‡ã‚£ã‚¹ã‚¯ãŒ2ã¤ã¨ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’è»¢é€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹1 TB SATAãƒ‡ã‚£ã‚¹ã‚¯ãŒ2ã¤ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®ãƒ‡ã‚£ã‚¹ã‚¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
sdd              8:48   0 931,5G  0 disk  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ é ˜åŸŸã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># df -h</span><font></font>
          % C <font></font>
devtmpfs                32G            0   32G            0% /dev<font></font>
tmpfs                   32G            0   32G            0% /dev/shm<font></font>
tmpfs                   32G         9,6M   32G            1% /run<font></font>
tmpfs                   32G            0   32G            0% /sys/fs/cgroup<font></font>
/dev/mapper/vg0-root   204G         1,3G  192G            1% /<font></font>
/dev/md126            1007M         120M  837M           13% /boot<font></font>
tmpfs                  6,3G            0  6,3G            0% /run/user/0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ã‚’äº¤æ›ã™ã‚‹å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚µã‚¤ã‚ºãŒã«æ­è¼‰204 GBã€2ã¤ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢md126ã‚¢ãƒ¬ã‚¤ãŒä½¿ç”¨ã•ã‚Œã‚‹</font></font><code>/boot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>md127</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã©ã®ã‚ˆã†ã«ä½¿ç”¨ã•ã‚Œã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰©ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VGã‚°ãƒ«ãƒ¼ãƒ—ã®ãŸã‚ã«</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VG0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.ã‚¢ãƒ¬ã‚¤ã‹ã‚‰ãƒ‡ã‚£ã‚¹ã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sda1[0] sdb1[1]<font></font>
      1047552 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sda2[0] sdb2[1]<font></font>
      233206784 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/2 pages [0KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ã‚¹ãƒ†ãƒ ã¯ã€2ã¤ã®ã‚¢ãƒ¬ã‚¤ã‚’ä½¿ç”¨ã—ï¼š</font></font><code>md126</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆãƒã‚¦ãƒ³ãƒˆãƒã‚¤ãƒ³ãƒˆ</font></font><code>/boot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ -ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§æ§‹æˆã•</font></font><code>/dev/sda1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdb1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>md127</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆLVMç”¨ã®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ¯ãƒƒãƒ—</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ«ãƒ¼ãƒˆï¼‰ -ã‹ã‚‰æˆã‚‹</font></font><code>/dev/sda2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdb2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å„ã‚¢ãƒ¬ã‚¤ã§ä½¿ç”¨ã•ã‚Œã‚‹æœ€åˆã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä¸è‰¯ã¨ã—ã¦ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --fail /dev/sda1<font></font>
<font></font>
mdadm /dev/md127 --fail /dev/sda2<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã‹ã‚‰ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹/ dev / sdaã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --remove /dev/sda1<font></font>
<font></font>
mdadm /dev/md127 --remove /dev/sda2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã‹ã‚‰ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
sdd              8:48   0 931,5G  0 disk  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å–ã‚Šå¤–ã—ãŸå¾Œã®ã‚¢ãƒ¬ã‚¤ã®çŠ¶æ…‹ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdb1[1]<font></font>
      1047552 blocks super 1.2 [2/1] [_U]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdb2[1]<font></font>
      233206784 blocks super 1.2 [2/1] [_U]<font></font>
      bitmap: 1/2 pages [4KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ‡ã‚£ã‚¹ã‚¯ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">fdisk -l /dev/sdb | grep <span class="hljs-string">'Disk label type'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MBRã®å‡ºåŠ›ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">Disk label <span class="hljs-built_in">type</span>: dos</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPTã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">Disk label <span class="hljs-built_in">type</span>: gpt</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MBRã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ï¼š</font></font><br>
</b><br>
<pre><code class="bash hljs">sfdisk -d /dev/sdb | sfdisk /dev/sdc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ã¯</font><font style="vertical-align: inherit;">ã€ãƒ‡ã‚£ã‚¹ã‚¯</font><b><font style="vertical-align: inherit;">ã‹ã‚‰</font></b><b><font style="vertical-align: inherit;">ãã®</font></b><font style="vertical-align: inherit;">ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒ</font><b><font style="vertical-align: inherit;">ã•ã‚Œ</font></b><font style="vertical-align: inherit;">ã¦ã„ã‚‹ã‚³ãƒ”ãƒ¼</font><font style="vertical-align: inherit;">ç¤ºã•</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åˆã¯</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><b><font style="vertical-align: inherit;">å…ˆç§’ã§ã‚ã‚‹</font></b><font style="vertical-align: inherit;">ã‚³ãƒ”ãƒ¼ã€‚</font></font><b><font style="vertical-align: inherit;"></font></b> <b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šGPTã®å ´åˆã¯ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åˆã®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ãƒ©ã‚¤ãƒ–ãŒãƒ‰ãƒ©ã‚¤ãƒ–ã§ã‚ã‚‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã‚ã«</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬äºŒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ãƒ©ã‚¤ãƒ–ãŒãƒ‰ãƒ©ã‚¤ãƒ–ã§</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ã‚¯ã‚’æ··åŒã™ã‚‹ã¨ã€æœ€åˆã¯æ­£å¸¸ãªãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒä¸Šæ›¸ãã•ã‚Œã¦ç ´æ£„ã•ã‚Œã¾ã™ã€‚</font></font><br>
</blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPTã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ï¼š</font></font><br>
</b><br>
<pre><code class="bash hljs">sgdisk -R /dev/sd /dev/sdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ©ãƒ³ãƒ€ãƒ ãªUUIDã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«å‰²ã‚Šå½“ã¦ã¾ã™ï¼ˆGPTã®å ´åˆï¼‰ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">
sgdisk -G /dev/sdc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãŒãƒ‡ã‚£ã‚¹ã‚¯ã«è¡¨ç¤ºã•ã‚Œ</font></font><code> /dev/sdc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â””â”€sdc2           8:34   0 222,5G  0 part  <font></font>
sdd              8:48   0 931,5G  0 disk  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</font></font><code>/dev/sdc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’å®Ÿè¡Œã—ãŸå¾Œ</font><font style="vertical-align: inherit;">ã€ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã®ã‚·ã‚¹ãƒ†ãƒ å†…ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãŒ</font><font style="vertical-align: inherit;">å®šç¾©ã•ã‚Œ</font><font style="vertical-align: inherit;">ã¦</font><font style="vertical-align: inherit;">ã„ãªã„å ´åˆã¯ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†åº¦èª­ã¿å–ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">sfdisk -R /dev/sdc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®ãƒ‡ã‚£ã‚¹ã‚¯ãŒMBRãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€æƒ…å ±ã‚’2 TBã‚’è¶…ãˆã‚‹ãƒ‡ã‚£ã‚¹ã‚¯ã«è»¢é€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã¯biosbootãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’æ‰‹å‹•ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚±ãƒ¼ã‚¹ã¯ã€ã“ã®è¨˜äº‹ã®ãƒ‘ãƒ¼ãƒˆ2ã§æ¤œè¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒ¬ã‚¤ã«è¿½åŠ ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å¯¾å¿œã™ã‚‹ã‚¢ãƒ¬ã‚¤ã«è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --add /dev/sdc1<font></font>
<font></font>
mdadm /dev/md127 --add /dev/sdc2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®å¾Œã€é…åˆ—ã®åŒæœŸã‚’å¾…ã¡ã¾ã™ã€‚ </font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdc1[2] sdb1[1]<font></font>
      1047552 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdc2[2] sdb2[1]<font></font>
      233206784 blocks super 1.2 [2/1] [_U]<font></font>
      [==&gt;..................]  recovery = 10.6% (24859136/233206784) finish=29.3min speed=118119K/sec<font></font>
      bitmap: 2/2 pages [8KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã€åŒæœŸãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¶™ç¶šçš„ã«ç›£è¦–ã§ãã¾ã™</font></font><code>watch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">watch -n 2 cat /proc/mdstat</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€é€²æ—çŠ¶æ³ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹é–“éš”ã‚’ç§’å˜ä½ã§ç¤ºã—</font><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¬¡ã®äº¤æ›ç”¨ãƒ‰ãƒ©ã‚¤ãƒ–ã«ã¤ã„ã¦ã€æ‰‹é †1ã€œ3ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å„ã‚¢ãƒ¬ã‚¤ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹2ç•ªç›®ã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä¸è‰¯ã¨ã—ã¦ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --fail /dev/sdb1<font></font>
<font></font>
mdadm /dev/md127 --fail /dev/sdb2<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><code> /dev/sdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ¬ã‚¤ã‹ã‚‰</font><font style="vertical-align: inherit;">
ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤</font><font style="vertical-align: inherit;">ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --remove /dev/sdb1<font></font>
<font></font>
mdadm /dev/md127 --remove /dev/sdb2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã‹ã‚‰ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å–ã‚Šå¤–ã—ãŸå¾Œã®ã‚¢ãƒ¬ã‚¤ã®çŠ¶æ…‹ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdc1[2]<font></font>
      1047552 blocks super 1.2 [2/1] [U_]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdc2[2]<font></font>
      233206784 blocks super 1.2 [2/1] [U_]<font></font>
      bitmap: 1/2 pages [4KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MBRãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã‹ã‚‰ãƒ‡ã‚£ã‚¹ã‚¯</font></font><code>/dev/sd </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">ã‚³ãƒ”ãƒ¼ã—ã¾ã™</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">sfdisk -d /dev/sd | sfdisk /dev/sdd</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãŒãƒ‡ã‚£ã‚¹ã‚¯ã«è¡¨ç¤ºã•ã‚Œ</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     1G  0 part  <font></font>
â””â”€sdd2           8:50   0 222,5G  0 part  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã«ãƒ‡ã‚£ã‚¹ã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --add /dev/sdd1<font></font>
<font></font>
mdadm /dev/md127 --add /dev/sdd2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd2           8:50   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®å¾Œã€é…åˆ—ã®åŒæœŸã‚’å¾…ã¡ã¾ã™ã€‚ </font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdd1[3] sdc1[2]<font></font>
      1047552 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdd2[3] sdc2[2]<font></font>
      233206784 blocks super 1.2 [2/1] [U_]<font></font>
      [&gt;....................]  recovery =  0.5% (1200000/233206784) finish=35.4min speed=109090K/sec<font></font>
      bitmap: 2/2 pages [8KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.æ–°ã—ã„ãƒ‰ãƒ©ã‚¤ãƒ–ã«GRUBã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOSã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">grub2-install /dev/sdX</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian / Ubuntuã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">grub-install /dev/sdX</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã©ã“</font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã®æ–‡å­—ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€GRUBã‚’</font></font><code>/dev/sdc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³</font><font style="vertical-align: inherit;">ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</font><font style="vertical-align: inherit;">ã—</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆext4ï¼‰ã®æ‹¡å¼µ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯</font></font><code>/dev/sdc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ©ç”¨å¯èƒ½ãª931.5 GBã€‚</font><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå°ã•ã„ãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã€CDã‹ã‚‰ã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†äº‹å®Ÿã«ã‚ˆã‚‹</font></font><code> /dev/sdc2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdd2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">222.5ã‚®ã‚¬ãƒã‚¤ãƒˆã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd2           8:50   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯å¿…è¦ã§ã‚ã‚‹ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å„ãƒ‰ãƒ©ã‚¤ãƒ–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³2ã‚’æ‹¡å¼µã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">md127é…åˆ—ã‚’æ‹¡å¼µã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVï¼ˆç‰©ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰ã‚’å±•é–‹ã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LVï¼ˆè«–ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰vg0-rootã‚’æ‹¡å¼µã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æ‹¡å¼µã—ã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parted</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦</font><font style="vertical-align: inherit;">ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³</font></font><code>/dev/sdc2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’æœ€å¤§å€¤ã«</font><font style="vertical-align: inherit;">å±•é–‹ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰</font></font><code>parted /dev/sdc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ1ï¼‰</font><font style="vertical-align: inherit;">ã‚’å®Ÿè¡Œ</font><font style="vertical-align: inherit;">ã—ã€ã‚³ãƒãƒ³ãƒ‰</font></font><code>p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ2ï¼‰</font><font style="vertical-align: inherit;">ã§ç¾åœ¨ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ao/zx/xc/aozxxc_zhq42me4qblnij5bib4y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã¨ãŠã‚Šã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³2ã®æœ€å¾Œã¯240 GBã§çµ‚ã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰</font></font><code>resizepart</code> <code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å±•é–‹ã—ã¦ã¿ã¾ã—ã‚‡ã†</font><font style="vertical-align: inherit;">ã€‚2ã¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ï¼ˆ3ï¼‰ã§ã™ã€‚</font><font style="vertical-align: inherit;">1000 GBãªã©ã®ãƒ‡ã‚¸ã‚¿ãƒ«å½¢å¼ã§å€¤ã‚’ç¤ºã—ã¾ã™ã€‚ã¾ãŸã¯ã€ãƒ‡ã‚£ã‚¹ã‚¯å…±æœ‰ã®è¡¨ç¤º-100ï¼…ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã‚‚ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚µã‚¤ã‚ºãŒæ–°ã—ã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ï¼ˆ4ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ã«å¯¾ã—ã¦ä¸Šè¨˜ã®æ‰‹é †ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ‹¡å¼µå¾Œã€</font></font><code>/dev/sdc2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã‚‰</font></font><code>/dev/sdd2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯930.5 GBã«ç­‰ã—ããªã‚Šã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk                                                 </span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 930,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd2           8:50   0 930,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®å¾Œã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">md127</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…åˆ—</font><font style="vertical-align: inherit;">ã‚’æœ€å¤§ã«</font><font style="vertical-align: inherit;">æ‹¡å¼µã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm --grow /dev/md127 --size=max</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ãŒæ‹¡å¼µã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">ç¾åœ¨ã€ãã®ã‚µã‚¤ã‚ºã¯930.4 GBã«ãªã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0 931,5G  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc2           8:34   0 930,5G  0 part  <font></font>
  â””â”€md127        9:127  0 930,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0 931,5G  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd2           8:50   0 930,5G  0 part  <font></font>
  â””â”€md127        9:127  0 930,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰©ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã®æ‹¡å¼µã‚’è¡Œã„ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‹¡å¼µã™ã‚‹å‰ã«ã€PVã®ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># pvscan</span><font></font>
  PV /dev/md127   VG vg0             lvm2 [222,40 GiB / 0    free]<font></font>
  Total: 1 [222,40 GiB] / <span class="hljs-keyword">in</span> use: 1 [222,40 GiB] / <span class="hljs-keyword">in</span> no VG: 0 [0   ]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã¨ãŠã‚Šã€PV </font></font><code>/dev/md127</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯222.4 GBã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§PVã‚’å±•é–‹ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">pvresize /dev/md127</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVå»¶é•·ã®çµæœã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[</font></font><pre><code class="bash hljs">root@localhost ~]<span class="hljs-comment"># pvscan</span><font></font>
  PV /dev/md127   VG vg0             lvm2 [930,38 GiB / 707,98 GiB free]<font></font>
  Total: 1 [930,38 GiB] / <span class="hljs-keyword">in</span> use: 1 [930,38 GiB] / <span class="hljs-keyword">in</span> no VG: 0 [0   ]</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è«–ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ‹¡å¼µ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‹¡å¼µã®å‰ã«ã€LVï¼ˆ1ï¼‰ã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lvscan</span>
  ACTIVE            <span class="hljs-string">'/dev/vg0/swap'</span> [&lt;16,00 GiB] inherit<font></font>
  ACTIVE            <span class="hljs-string">'/dev/vg0/root'</span> [&lt;206,41 GiB] inherit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LV </font></font><code>/dev/vg0/root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯206.41 GBã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆ2ï¼‰ã§LVã‚’æ‹¡å¼µã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">lvextend -l +100%FREE /dev/mapper/vg0-root</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿè¡Œã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ3ï¼‰ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lvscan </span>
  ACTIVE            <span class="hljs-string">'/dev/vg0/swap'</span> [&lt;16,00 GiB] inherit<font></font>
  ACTIVE            <span class="hljs-string">'/dev/vg0/root'</span> [&lt;914,39 GiB] inherit
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã‚ˆã†ã«ã€LVã‚’æ‹¡å¼µã™ã‚‹ã¨ã€å æœ‰ã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã¯914.39 GBã«ãªã‚Šã¾ã—ãŸã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/6r/qh/vd6rqhe3wvbukzdfachz7xf4ehk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LVãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯å¢—åŠ ã—ã¾ã—ãŸãŒï¼ˆ4ï¼‰ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¯ã¾ã 204 GBã‚’å ã‚ã¦ã„ã¾ã™ï¼ˆ5ï¼‰ã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å¼µã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font></i><br>
<br>
<pre><code class="bash hljs">resize2fs /dev/mapper/vg0-root</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¾Œã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚µã‚¤ã‚ºã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># df -h</span><font></font>
          % C <font></font>
devtmpfs                32G            0   32G            0% /dev<font></font>
tmpfs                   32G            0   32G            0% /dev/shm<font></font>
tmpfs                   32G         9,5M   32G            1% /run<font></font>
tmpfs                   32G            0   32G            0% /sys/fs/cgroup<font></font>
/dev/mapper/vg0-root   900G         1,3G  860G            1% /<font></font>
/dev/md126            1007M         120M  837M           13% /boot<font></font>
tmpfs                  6,3G            0  6,3G            0% /run/user/0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚µã‚¤ã‚ºã¯900 GBã«å¢—åŠ ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ‰‹é †ãŒå®Œäº†ã—ãŸã‚‰ã€å¤ã„ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚±ãƒ¼ã‚¹2ï¼šå°ã•ã„ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’å¤§ãã„ãƒ‰ãƒ©ã‚¤ãƒ–ï¼ˆ2TBä»¥ä¸Šï¼‰ã§ç½®ãæ›ãˆã‚‹</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¿ã‚¹ã‚¯ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¾åœ¨ã®ãƒ‡ã‚£ã‚¹ã‚¯ã‚’ã€æƒ…å ±ã‚’ä¿å­˜ã—ã¦ã‚ˆã‚Šå¤§ããªãƒ‡ã‚£ã‚¹ã‚¯ï¼ˆ2 x 3TBï¼‰ã«äº¤æ›ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸ2 x 240 GB SSDï¼ˆRAID-1ï¼‰ãƒ‡ã‚£ã‚¹ã‚¯ã¨2 x 3 TB SATAãƒ‡ã‚£ã‚¹ã‚¯ãŒã‚ã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã‚’è»¢é€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç¾åœ¨ã®ãƒ‰ãƒ©ã‚¤ãƒ–ã¯MBRãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã®å®¹é‡ã¯2 TBã‚’è¶…ãˆã‚‹ãŸã‚ã€MBRã¯2 TBã‚’è¶…ãˆã‚‹ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å‡¦ç†ã§ããªã„ãŸã‚ã€GPTãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®ãƒ‡ã‚£ã‚¹ã‚¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
sdd              8:48   0   2,7T  0 disk  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèªã—ã¾ã™</font></font><code>/dev/sda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># fdisk -l /dev/sda | grep 'Disk label type'</span>
Disk label <span class="hljs-built_in">type</span>: dos</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯</font></font><code>/dev/sdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯åŒæ§˜ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ç”¨æ¸ˆã¿ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># df -h</span><font></font>
          % C <font></font>
devtmpfs                16G            0   16G            0% /dev<font></font>
tmpfs                   16G            0   16G            0% /dev/shm<font></font>
tmpfs                   16G         9,5M   16G            1% /run<font></font>
tmpfs                   16G            0   16G            0% /sys/fs/cgroup<font></font>
/dev/mapper/vg0-root   204G         1,3G  192G            1% /<font></font>
/dev/md126            1007M         120M  837M           13% /boot<font></font>
tmpfs                  3,2G            0  3,2G            0% /run/user/0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã¨ãŠã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ«ãƒ¼ãƒˆã¯204 GBã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢RAIDã®ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. GPTãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãƒ‡ã‚£ã‚¹ã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚»ã‚¯ã‚¿ãƒ¼ã”ã¨ã«ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># parted /dev/sda print</span><font></font>
: ATA KINGSTON SVP200S (scsi)<font></font>
 /dev/sda: 240GB<font></font>
  (./.): 512B/512B<font></font>
 : msdos<font></font>
Disk Flags: <font></font>
<font></font>
                  <font></font>
 1     1049kB  1076MB  1075MB  primary                    , raid<font></font>
 2     1076MB  240GB   239GB   primary                    raid<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–°ã—ã„3TBãƒ‰ãƒ©ã‚¤ãƒ–ã§ã€3ã¤ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><code>bios_grub</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BIOSã¨ã®äº’æ›æ€§ã®ãŸã‚ã®</font><font style="vertical-align: inherit;">CATEGORY </font><font style="vertical-align: inherit;">2MiB GPTã‚µã‚¤ã‚ºã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹RAIDã‚¢ãƒ¬ã‚¤ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³</font></font><code>/boot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAIDã‚¢ãƒ¬ã‚¤ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚LVãƒ«ãƒ¼ãƒˆ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LVã‚¹ãƒ¯ãƒƒãƒ—ãŒå­˜åœ¨ã—</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰</font><font style="vertical-align: inherit;">ï¼ˆCentOSã®å ´åˆï¼‰ã€</font><font style="vertical-align: inherit;">ï¼ˆDebian / Ubuntuã®å ´åˆï¼‰ã‚’</font><font style="vertical-align: inherit;">
ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¦</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><i><font style="vertical-align: inherit;">parted</font></i><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</font><i><font style="vertical-align: inherit;">ã‚’</font></i><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><i><font style="vertical-align: inherit;">parted</font></i><font style="vertical-align: inherit;"> 
ã‚’ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¦æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãƒ‡ã‚£ã‚¹ã‚¯ã‚’ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€</font><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ã‚¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
GPTãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><code>yum install -y parted</code><font style="vertical-align: inherit;"></font><code>apt install -y parted</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>parted /dev/sdc</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">(parted) mktable gpt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ã¤ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³</font></font><code>bios_grub</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚»ã‚¯ã‚·ãƒ§ãƒ³</font><font style="vertical-align: inherit;">ã‚’ä½œæˆã—</font><font style="vertical-align: inherit;">ã€ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">(parted) mkpart primary 1MiB 3MiB<font></font>
(parted) <span class="hljs-built_in">set</span> 1 bios_grub on  </code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ã¤ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã€ãã‚Œã«ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯RAIDã‚¢ãƒ¬ã‚¤ã®ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã€ã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œ</font></font><code>/boot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">(parted) mkpart primary ext2 3MiB 1028MiB<font></font>
(parted) <span class="hljs-built_in">set</span> 2 boot on</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LVMãŒé…ç½®ã•ã‚Œã‚‹é…åˆ—ãƒ–ãƒ­ãƒƒã‚¯ã¨ã—ã¦ã‚‚ä½¿ç”¨ã•ã‚Œã‚‹3ã¤ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">(parted) mkpart primary 1028MiB 100% </code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®å ´åˆã€ãƒ•ãƒ©ã‚°ã®è¨­å®šã¯ä¸è¦ã§ã™ãŒã€å¿…è¦ã«å¿œã˜ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">(parted) <span class="hljs-built_in">set</span> 3 raid on</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œæˆã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">(parted) p                                                                <font></font>
: ATA TOSHIBA DT01ACA3 (scsi)<font></font>
 /dev/sdc: 3001GB<font></font>
  (./.): 512B/4096B<font></font>
 : gpt<font></font>
Disk Flags: <font></font>
<font></font>
                  <font></font>
 1     1049kB  3146kB  2097kB                    primary  bios_grub<font></font>
 2     3146kB  1077MB  1074MB                    primary  <font></font>
 3     1077MB  3001GB  3000GB                    primary<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‰ãƒ©ã‚¤ãƒ–ã«æ–°ã—ã„ãƒ©ãƒ³ãƒ€ãƒ ãªGUIDã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">sgdisk -G /dev/sdd
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.æœ€åˆã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒ¬ã‚¤ã‹ã‚‰å‰Šé™¤ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sda1[0] sdb1[1]<font></font>
      1047552 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sda2[0] sdb2[1]<font></font>
      233206784 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/2 pages [0KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ã‚¹ãƒ†ãƒ ã¯ã€2ã¤ã®ã‚¢ãƒ¬ã‚¤ã‚’ä½¿ç”¨ã™ã‚‹ï¼šmd126ã¯ï¼ˆãƒã‚¤ãƒ³ãƒˆ/ãƒ–ãƒ¼ãƒˆãƒã‚¦ãƒ³ãƒˆï¼‰ -ã‹ã‚‰æˆã‚‹</font></font><code>/dev/sda1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdb1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>md127</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆã®ãŸã‚ã®LVM </font></font><code>swap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ«ãƒ¼ãƒˆï¼‰ -ã‹ã‚‰æˆã‚‹</font></font><code>/dev/sda2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdb2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å„ã‚¢ãƒ¬ã‚¤ã§ä½¿ç”¨ã•ã‚Œã‚‹æœ€åˆã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä¸è‰¯ã¨ã—ã¦ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --fail /dev/sda1<font></font>
<font></font>
mdadm /dev/md127 --fail /dev/sda2</code></pre><br><font style="vertical-align: inherit;"></font><code>/dev/sda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ¬ã‚¤ã‹ã‚‰</font><font style="vertical-align: inherit;">
ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤</font><font style="vertical-align: inherit;">ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --remove /dev/sda1<font></font>
<font></font>
mdadm /dev/md127 --remove /dev/sda2<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å–ã‚Šå¤–ã—ãŸå¾Œã€ã‚¢ãƒ¬ã‚¤ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdb1[1]<font></font>
      1047552 blocks super 1.2 [2/1] [_U]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdb2[1]<font></font>
      233206784 blocks super 1.2 [2/1] [_U]<font></font>
      bitmap: 2/2 pages [8KB], 65536KB chunk<font></font>
<font></font>
unused devices: &lt;none&gt;<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒ¬ã‚¤ã«è¿½åŠ ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã€åŒæœŸã®ãŸã‚ã«æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒ¬ã‚¤ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ã‚¯ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     2M  0 part  <font></font>
â”œâ”€sdc2           8:34   0     1G  0 part  <font></font>
â””â”€sdc3           8:35   0   2,7T  0 part  <font></font>
sdd              8:48   0   2,7T  0 disk  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚»ã‚¯ã‚·ãƒ§ãƒ³</font></font><code>/dev/sdc1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯</font><font style="vertical-align: inherit;">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§</font><font style="vertical-align: inherit;">ã‚ã‚Šã€</font></font><code>bios_grub</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…åˆ—ã®ä½œæˆã«ã¯é–¢ä¸ã—ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">é…åˆ—ã®å ´åˆã®ã¿</font></font><code>/dev/sdc2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><font style="vertical-align: inherit;">å«ã¾ã‚Œ</font></font><code>/dev/sdc3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¯¾å¿œã™ã‚‹é…åˆ—ã«è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --add /dev/sdc2<font></font>
<font></font>
mdadm /dev/md127 --add /dev/sdc3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã‚¢ãƒ¬ã‚¤ã®åŒæœŸã‚’å¾…ã¡ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdc2[2] sdb1[1]<font></font>
      1047552 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 0/1 pages [0KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdc3[2] sdb2[1]<font></font>
      233206784 blocks super 1.2 [2/1] [_U]<font></font>
      [&gt;....................]  recovery =  0.2% (619904/233206784) finish=31.2min speed=123980K/sec<font></font>
      bitmap: 2/2 pages [8KB], 65536KB chunk<font></font>
unused devices: &lt;none&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸå¾Œã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     2M  0 part  <font></font>
â”œâ”€sdc2           8:34   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc3           8:35   0   2,7T  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0   2,7T  0 disk  </code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. 2ç•ªç›®ã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒ¬ã‚¤ã‹ã‚‰å‰Šé™¤ã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å„ã‚¢ãƒ¬ã‚¤ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹2ç•ªç›®ã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä¸è‰¯ã¨ã—ã¦ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --fail /dev/sdb1<font></font>
<font></font>
mdadm /dev/md127 --fail /dev/sdb2<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><code>/dev/sda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ¬ã‚¤ã‹ã‚‰</font><font style="vertical-align: inherit;">
ãƒ–ãƒ­ãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤</font><font style="vertical-align: inherit;">ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --remove /dev/sdb1<font></font>
<font></font>
mdadm /dev/md127 --remove /dev/sdb2<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚¢ãƒ¬ã‚¤ã‚’åŒæœŸã™ã‚‹</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</font></font><code>sgdisk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã¦</font><font style="vertical-align: inherit;">ã„ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨</font><font style="vertical-align: inherit;">ã—ã¦ã€ãƒ‡ã‚£ã‚¹ã‚¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¨GPTãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ“ä½œã—ã¾ã™</font></font><code>gdisk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">CentOSã®</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</font></font><code>gdisk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">yum install -y gdisk</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</font></font><code>gdisk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®Debian / Ubuntuã®ãŸã‚ã«ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">apt install -y gdisk</code></pre><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šGPTã®å ´åˆ</font><font style="vertical-align: inherit;">ã€ãƒ‡ã‚£ã‚¹ã‚¯</font><b><font style="vertical-align: inherit;">ã‚ŒãŸ</font></b><font style="vertical-align: inherit;">ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒã‚³ãƒ”ãƒ¼ã•ã§ã‚ã‚‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºã•ã‚Œ</font><font style="vertical-align: inherit;">ã€</font><b><font style="vertical-align: inherit;">ç¬¬äºŒã®</font></b><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ã‚¯ã¯ãƒ‡ã‚£ã‚¹ã‚¯ã§ã‚ã‚‹</font><b><font style="vertical-align: inherit;">ã€ãã“ã‹ã‚‰</font></b><font style="vertical-align: inherit;">ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒ</font><b><font style="vertical-align: inherit;">ã•ã‚Œã¦ã„ã‚‹</font></b><font style="vertical-align: inherit;">ã‚³ãƒ”ãƒ¼ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ã‚¯ã‚’æ··åŒã™ã‚‹ã¨ã€æœ€åˆã¯æ­£å¸¸ãªãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒä¸Šæ›¸ãã•ã‚Œã¦ç ´æ£„ã•ã‚Œã¾ã™ã€‚</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">sgdisk -R /dev/sdd /dev/sdc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã«è»¢é€ã—ãŸå¾Œã®ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     2M  0 part  <font></font>
â”œâ”€sdc2           8:34   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc3           8:35   0   2,7T  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0   2,7T  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     2M  0 part  <font></font>
â”œâ”€sdd2           8:50   0     1G  0 part  <font></font>
â””â”€sdd3           8:51   0   2,7T  0 part  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢RAIDã‚¢ãƒ¬ã‚¤ã«å‚åŠ ã—ã¦ã„ã‚‹å„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">mdadm /dev/md126 --add /dev/sdd2<font></font>
<font></font>
mdadm /dev/md127 --add /dev/sdd3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã®åŒæœŸã‚’å¾…ã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># cat /proc/mdstat </span><font></font>
Personalities : [raid1] <font></font>
md126 : active raid1 sdd2[3] sdc2[2]<font></font>
      1047552 blocks super 1.2 [2/2] [UU]<font></font>
      bitmap: 1/1 pages [4KB], 65536KB chunk<font></font>
<font></font>
md127 : active raid1 sdd3[3] sdc3[2]<font></font>
      233206784 blocks super 1.2 [2/1] [U_]<font></font>
      [&gt;....................]  recovery =  0.0% (148224/233206784) finish=26.2min speed=148224K/sec<font></font>
      bitmap: 2/2 pages [8KB], 65536KB chunk<font></font>
unused devices: &lt;none&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPTãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’2ç•ªç›®ã®æ–°ã—ã„ãƒ‡ã‚£ã‚¹ã‚¯ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ã€ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
â”œâ”€sda1           8:1    0     1G  0 part  <font></font>
â””â”€sda2           8:2    0 222,5G  0 part  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
â”œâ”€sdb1           8:17   0     1G  0 part  <font></font>
â””â”€sdb2           8:18   0 222,5G  0 part  <font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     2M  0 part  <font></font>
â”œâ”€sdc2           8:34   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc3           8:35   0   2,7T  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0   2,7T  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     2M  0 part  <font></font>
â”œâ”€sdd2           8:50   0     1G  0 part  <font></font>
â”‚ â””â”€md126        9:126  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd3           8:51   0   2,7T  0 part  <font></font>
  â””â”€md127        9:127  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€GRUBã‚’æ–°ã—ã„ãƒ‰ãƒ©ã‚¤ãƒ–ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOSã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">grub2-install /dev/sdX</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian / Ubuntuã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">grub-install /dev/sdX</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“</font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã€ãƒ‰ãƒ©ã‚¤ãƒ–æ–‡å­—ã¯ã€</font><font style="vertical-align: inherit;">ã“ã“ã§</font><font style="vertical-align: inherit;">ã¯ãƒ‰ãƒ©ã‚¤ãƒ–</font></font><code>/dev/sdc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>/dev/sdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã«é–¢ã™ã‚‹æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOSã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">mdadm --detail --scan --verbose &gt; /etc/mdadm.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian / Ubuntuã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">echo</span> <span class="hljs-string">"DEVICE partitions"</span> &gt; /etc/mdadm/mdadm.conf<font></font>
<font></font>
mdadm --detail --scan --verbose | awk <span class="hljs-string">'/ARRAY/ {print}'</span> &gt;&gt; /etc/mdadm/mdadm.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”»åƒã®æ›´æ–°</font></font><code>initrd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOSã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">dracut -f -v --regenerate-all</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian / Ubuntuã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">update-initramfs -u -k all</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GRUBæ§‹æˆã®æ›´æ–°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOSã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian / Ubuntuã®å ´åˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs">update-grub</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰‹é †ãŒå®Œäº†ã—ãŸã‚‰ã€å¤ã„ãƒ‡ã‚£ã‚¹ã‚¯ã‚’å–ã‚Šå¤–ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆext4ï¼‰ã®æ‹¡å¼µ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ã‚¹ãƒ†ãƒ ã‚’2 x 3TBï¼ˆRAID-1ï¼‰ãƒ‡ã‚£ã‚¹ã‚¯ã«ç§»å‹•ã—ãŸå¾Œã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æ‹¡å¼µã™ã‚‹å‰ã«ãƒ‡ã‚£ã‚¹ã‚¯ã‚’ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     2M  0 part  <font></font>
â”œâ”€sdc2           8:34   0     1G  0 part  <font></font>
â”‚ â””â”€md127        9:127  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc3           8:35   0   2,7T  0 part  <font></font>
  â””â”€md126        9:126  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0   2,7T  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     2M  0 part  <font></font>
â”œâ”€sdd2           8:50   0     1G  0 part  <font></font>
â”‚ â””â”€md127        9:127  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd3           8:51   0   2,7T  0 part  <font></font>
  â””â”€md126        9:126  0 222,4G  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šã‚»ã‚¯ã‚·ãƒ§ãƒ³</font></font><code>/dev/sdc3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code> /dev/sdd3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.7 TB </font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">å ã‚ã¾ã™ã€‚</font><font style="vertical-align: inherit;">GPTãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ã‚£ã‚¹ã‚¯ã®æ–°ã—ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ãŸãŸã‚ã€3ã¤ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ã‚µã‚¤ã‚ºã¯ã™ãã«æœ€å¤§å¯èƒ½ãªãƒ‡ã‚£ã‚¹ã‚¯é ˜åŸŸã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚ã“ã®å ´åˆã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’æ‹¡å¼µã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯å¿…è¦ã§ã‚ã‚‹ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">md126é…åˆ—ã‚’æ‹¡å¼µã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVï¼ˆç‰©ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰ã‚’å±•é–‹ã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LVï¼ˆè«–ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰vg0-rootã‚’æ‹¡å¼µã—ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æ‹¡å¼µã—ã¾ã™ã€‚</font></font></li>
</ol><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.ã‚¢ãƒ¬ã‚¤</font></font><code>md126</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’æœ€å¤§ã¾ã§</font><font style="vertical-align: inherit;">æ‹¡å¼µã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font></i><br>
<br>
<pre><code class="bash hljs">mdadm --grow /dev/md126 --size=max
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ¬ã‚¤ã‚’æ‹¡å¼µã—ãŸå¾Œ</font></font><code>md126</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€å æœ‰ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚µã‚¤ã‚ºã¯2.7 TBã«å¢—åŠ ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lsblk</span><font></font>
NAME           MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT<font></font>
sda              8:0    0 223,6G  0 disk  <font></font>
sdb              8:16   0 223,6G  0 disk  <font></font>
sdc              8:32   0   2,7T  0 disk  <font></font>
â”œâ”€sdc1           8:33   0     2M  0 part  <font></font>
â”œâ”€sdc2           8:34   0     1G  0 part  <font></font>
â”‚ â””â”€md127        9:127  0  1023M  0 raid1 /boot<font></font>
â””â”€sdc3           8:35   0   2,7T  0 part  <font></font>
  â””â”€md126        9:126  0   2,7T  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
sdd              8:48   0   2,7T  0 disk  <font></font>
â”œâ”€sdd1           8:49   0     2M  0 part  <font></font>
â”œâ”€sdd2           8:50   0     1G  0 part  <font></font>
â”‚ â””â”€md127        9:127  0  1023M  0 raid1 /boot<font></font>
â””â”€sdd3           8:51   0   2,7T  0 part  <font></font>
  â””â”€md126        9:126  0   2,7T  0 raid1 <font></font>
    â”œâ”€vg0-root 253:0    0 206,4G  0 lvm   /<font></font>
    â””â”€vg0-swap 253:1    0    16G  0 lvm   [SWAP]<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰©ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‹¡å¼µ</font><font style="vertical-align: inherit;">ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‹¡å¼µã®å‰ã«ã€å æœ‰ã‚¹ãƒšãƒ¼ã‚¹PV /ã®ç¾åœ¨ã®å€¤ã‚’ç¢ºèªã—ã¾ã™</font></font><code>dev/md126</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># pvs</span><font></font>
  PV         VG  Fmt  Attr PSize   PFree<font></font>
  /dev/md126 vg0 lvm2 a--  222,40g    0 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§PVã‚’å±•é–‹ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">pvresize /dev/md126
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Œäº†ã—ãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># pvs</span><font></font>
  PV         VG  Fmt  Attr PSize  PFree<font></font>
  /dev/md126 vg0 lvm2 a--  &lt;2,73t 2,51t</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹è«–ç†ãƒœãƒªãƒ¥ãƒ¼ãƒ vg0-root</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’æ‹¡å¼µã—ã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVæ‹¡å¤§å¾Œã€VGã®å æœ‰ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># vgs</span>
  VG  <span class="hljs-comment">#PV #LV #SN Attr   VSize  VFree</span>
  vg0   1   2   0 wz--n- &lt;2,73t 2,51t</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LVãŒå ã‚ã‚‹ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lvs</span><font></font>
  LV   VG  Attr       LSize    Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert<font></font>
  root vg0 -wi-ao---- &lt;206,41g                                                    <font></font>
  swap vg0 -wi-ao----  &lt;16,00g            </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vg0-rootãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯206.41 GBã‚’å æœ‰ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LVã‚’æœ€å¤§ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã¾ã§æ‹¡å¼µã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">lvextend -l +100%FREE /dev/mapper/vg0-root </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‹¡å¼µå¾Œã®LVã‚¹ãƒšãƒ¼ã‚¹ã®ç¢ºèªã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># lvs</span><font></font>
  LV   VG  Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert<font></font>
  root vg0 -wi-ao----   2,71t                                                    <font></font>
  swap vg0 -wi-ao---- &lt;16,00g</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å¼µï¼ˆext4ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚µã‚¤ã‚ºã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># df -h</span><font></font>
          % C <font></font>
devtmpfs                16G            0   16G            0% /dev<font></font>
tmpfs                   16G            0   16G            0% /dev/shm<font></font>
tmpfs                   16G         9,6M   16G            1% /run<font></font>
tmpfs                   16G            0   16G            0% /sys/fs/cgroup<font></font>
/dev/mapper/vg0-root   204G         1,4G  192G            1% /<font></font>
/dev/md127            1007M         141M  816M           15% /boot<font></font>
tmpfs                  3,2G            0  3,2G            0% /run/user/0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ dev / mapper / vg0-rootãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯ã€LVæ‹¡å¼µã®å¾Œã«204 GBã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å¼µã€‚</font></font><br>
<br>
<pre><code class="bash hljs">resize2fs /dev/mapper/vg0-root 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‹¡å¼µå¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚µã‚¤ã‚ºã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># df -h</span><font></font>
          % C <font></font>
devtmpfs                16G            0   16G            0% /dev<font></font>
tmpfs                   16G            0   16G            0% /dev/shm<font></font>
tmpfs                   16G         9,6M   16G            1% /run<font></font>
tmpfs                   16G            0   16G            0% /sys/fs/cgroup<font></font>
/dev/mapper/vg0-root   2,7T         1,4G  2,6T            1% /<font></font>
/dev/md127            1007M         141M  816M           15% /boot<font></font>
tmpfs                  3,2G            0  3,2G            0% /run/user/0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚µã‚¤ã‚ºã¯ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ å…¨ä½“ã«ã‚ˆã£ã¦å¢—åŠ ã—ã¾ã™ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja486070/index.html">ACLã‚¹ã‚¤ãƒƒãƒã®è©³ç´°</a></li>
<li><a href="../ja486072/index.html">SQLãƒã‚¦ãƒ„ãƒ¼ï¼šã‚¯ã‚¨ãƒªã§ç›´æ¥whileãƒ«ãƒ¼ãƒ—ã‚’è¨˜è¿°ã™ã‚‹ã€ã¾ãŸã¯ã€ŒåŸºæœ¬çš„ãª3æ–¹å‘ã€</a></li>
<li><a href="../ja486076/index.html">åœ°ä¸Šã‹ã‚‰FPVã‚¯ãƒ¯ãƒƒãƒ‰ã‚³ãƒ—ã‚¿ãƒ¼ã¸ï¼šã¯ã˜ã‚ã«</a></li>
<li><a href="../ja486080/index.html">ã”ç´¹ä»‹ã—ã¾ã—ã‚‡ã†ï¼šVeeam Availability Suite v10</a></li>
<li><a href="../ja486082/index.html">ãƒ€ã‚¬ã‚ºï¼šãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®ç·å’Œ</a></li>
<li><a href="../ja486092/index.html">ãƒãƒªãƒ¼ãƒŠã‚¢ãƒ¬ãƒƒã‚¯ã‚¹ã€ãƒ“ã‚¸ãƒã‚¹å¤§å­¦ã‚¢ã‚¸ãƒªãƒ†ã‚£ã®CEOï¼šã€Œã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ã¯ITã®å¤–ã«ã‚ã‚Šã¾ã™ã€‚ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«-ITä»¥ä¸Š</a></li>
<li><a href="../ja486094/index.html">ä¸‹é™¢æ°‘ä¸»å…šã€ã‚·ãƒªã‚³ãƒ³ãƒãƒ¬ãƒ¼ã¨æˆ¦ã†</a></li>
<li><a href="../ja486098/index.html">ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®è² å‚µãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã„ã‹ã«æ®ºã™ã‹</a></li>
<li><a href="../ja486100/index.html">æ‹¡å¼µå¯èƒ½ãªåˆ†æ•£å‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã™ã‹ï¼Ÿãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚’å°‘ãªãã™ã‚‹</a></li>
<li><a href="../ja486106/index.html">Raspberry Pi TVã®ã‚¢ãƒ€ãƒ—ãƒ†ã‚£ãƒ–ãƒãƒƒã‚¯ãƒ©ã‚¤ãƒˆ-Ambilight Analog</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>