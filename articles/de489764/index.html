<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧀 💞 🐪 "Das Ziel hat viele Gestalten ..." oder wir automatisieren die Steuerung einer Glühbirne mit CANNY 3 tiny und einem Fotowiderstand 🦖 🛌 🐃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im letzten Artikel über Habr habe ich Ihnen erzählt, wie ich den winzigen Canny3-Controller als Geschenk erhalten habe. Wir haben die LED „geblinkt“ u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"Das Ziel hat viele Gestalten ..." oder wir automatisieren die Steuerung einer Glühbirne mit CANNY 3 tiny und einem Fotowiderstand</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489764/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">letzten Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über Habr habe ich Ihnen erzählt, wie ich den winzigen Canny3-Controller als Geschenk erhalten habe. Wir haben die LED „geblinkt“ und einen Knopf gedrückt. Damit konnten die Versuche grundsätzlich abgeschlossen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den letzten Wochen habe ich mir jedoch Hörbücher über The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Witcher angehört</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und bin daher viel ernster über </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Destination geworden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nach den Angaben auf der Website des Herstellers ist die CANNY-Steuerungsfamilie in erster Linie für die Automatisierung verschiedener Automobilsysteme und Spezialausrüstungen vorgesehen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem ist, dass mich niemand mit meinen „goldenen Händen“ in einem echten Auto herumstochern lässt, und im Allgemeinen habe ich Angst vor Autos. </font><font style="vertical-align: inherit;">Deshalb musste ich speziell für diesen Artikel eine kleine Autolampe und einen Fotowiderstand kaufen. </font><font style="vertical-align: inherit;">Was Sie nicht tun werden, um das Schicksal nicht zu verärgern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heute werden wir den Controller und die Autolampe an eine 12-V-Stromversorgung anschließen, eine Nachricht an den COM-Port senden, die Aufnahme der Lampe je nach Licht automatisieren und den Hochfrequenz-PWM-Controller ausprobieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Glauben Sie auch an die Kraft des Ziels? </font><font style="vertical-align: inherit;">Dann sind Sie unter Katze willkommen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/kd/tj/ytkdtjul2i1qbdrqllt278lszck.png"><br>
<a name="habracut"></a><br>
<br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil I: Einführung</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil I: Einführung </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil II: Komponenten und Vorsichtsmaßnahmen </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil III: Schreiben von Daten in den COM-Anschluss </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil IV: Anschließen und Programmieren der Autolampe und des Fotowiderstands </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil V: Versuch, die Lampenhelligkeit mit PWM zu </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">verringern </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil VI: Fazit</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ganz am Anfang des Artikels </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">möchte</font></a><font style="vertical-align: inherit;"> ich Sie daran erinnern Ich habe nicht viel Erfahrung mit Heimwerkerelektronik. </font><font style="vertical-align: inherit;">Vor vielen Jahren habe ich mich mit CraftDuino beschäftigt - dem heimischen Arduino-Klon. </font><font style="vertical-align: inherit;">Und abgesehen von den "Handwerken", die er für mich gemacht hat</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist eigentlich meine Erfahrung in der DIY-Elektronik ist begrenzt. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da ich meine Liebe zu häuslichen Entwicklungen kannte, entschied ich mich anscheinend, Canny 3 zu geben.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Schon bei der Vorbereitung des letzten Artikels war ich überrascht, dass der Controller nicht nur mit 5 V, sondern auch mit 12 V betrieben werden kann, während die Spannung an den Ausgängen dieselbe sein wird wie an Eingang, und der maximale Strom pro Kanal beträgt bis zu 100 mA. Es schien mir interessant, weil mein alter CraftDuino es nicht konnte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch einfache Berechnungen mit der Formel</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo>=</mo><mi>U</mi><mo>&amp;#x2217;</mo><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.993ex" height="2.009ex" viewBox="0 -755.5 4302.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-55" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-2217" x="3075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-49" x="3798" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>=</mo><mi>U</mi><mo>∗</mo><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">P=U*I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe festgestellt, dass die maximale Leistung pro Controller-Ausgang bei 1,2 Watt liegt. Es wurde beschlossen, für alle Fälle eine Lampe mit Gangreserve mitzunehmen. Die Wahl fiel auf eine 0,9 W LED-Lampe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotzdem wollte ich mein Neujahrsgeschenk nicht unrühmlich verbrennen, und bevor ich es verband, beschloss ich, die Entwickler zu fragen, ob ich alles richtig verstanden habe. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu meiner großen Überraschung antworteten sie mir nicht nur, sondern schlugen auch vor, dass die Leistung proportional zunimmt, wenn Sie mehrere Ausgänge kombinieren. Danach wurde beschlossen, etwas Stärkeres als die Lampe zu kaufen, und die Wahl fiel auf den Autofächer, der in den Zigarettenanzünder eingesetzt wird. Um jedoch keine „Vinaigrette“ aus dem Artikel zu machen, habe ich beschlossen, Manipulationen mit dem Autofan auf das nächste Mal zu verschieben.</font></font><br>
<br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil II: Ausrüstung und Vorsichtsmaßnahmen </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu Beginn der Experimente hatte ich also Folgendes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lade- und Startgerät "Orion Vympel-55". </font><font style="vertical-align: inherit;">Ich hatte es bereits und zum Glück kann es nicht nur die Batterien aufladen, sondern auch eine Stromquelle in einem weiten Bereich (einschließlich 12 V) sein;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uj/fi/_i/ujfi_iwx1hku88fcb2trgbdhvqu.jpeg"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED Autolampe "Skyway H3. </font><font style="vertical-align: inherit;">SH3-9SMD-5050 W. </font><font style="vertical-align: inherit;">Soweit ich weiß, kann die Glühbirne in verschiedenen Scheinwerfern verwendet werden, aber ich kann sie nirgendwo anbringen. Deshalb habe ich die Leistung und die einfache Verbindung ohne Löten gewählt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zw/vm/yi/zwvmyih0_5t0grxn5elq4j1zvfe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens, als ich zur Formel für die Leistungsberechnung zurückkehrte, entschied ich mich, die Ströme zu messen und sicherzustellen, dass ich in die zulässigen 100 mA passe. </font><font style="vertical-align: inherit;">Theoretisch sollte der Strom der Glühbirne sein</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi><mo>=</mo><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.044ex" height="2.634ex" viewBox="0 -809.3 12504.8 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-50" x="1838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-2F" x="2590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-55" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-3D" x="4135" y="0"></use><g transform="translate(5192,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-39" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-2F" x="6471" y="0"></use><g transform="translate(6972,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-3D" x="8250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-30" x="9307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-2C" x="9807" y="0"></use><g transform="translate(10252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-37" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMAIN-35" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiz1pnOcXlCXreONmif3O26j_Qf2g#MJMATHI-41" x="11754" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>I</mi><mo>=</mo><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">I=P/U=0.9/12=0,075A</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber gemessen an der Messung stellte sich heraus, dass es etwas weniger war. </font><font style="vertical-align: inherit;">Obwohl ich vielleicht gerade etwas falsch gemacht habe.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/fw/qv/glfwqvsyuybaay2nr5bdftlk2n8.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotowiderstand FR-765. </font><font style="vertical-align: inherit;">Ich habe ihn einfach gewählt, weil sonst nichts im Laden war.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h9/zq/gq/h9zqgqgqp4vfwhhoreh_qxmo5aa.png"></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich hatte ich: einen Controller, ein Steckbrett, Drähte, Krokodile usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einem früheren Artikel über Canny 3 habe ich den Controller wirklich gelobt, aber es stellte sich heraus, dass die Salbe eine Fliege enthält. </font><font style="vertical-align: inherit;">Das letzte Mal habe ich das mitgelieferte Kabelbündel nicht verwendet, aber diesmal konnte ich nicht darauf verzichten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da ich einen Lötkolben sehr schlecht benutze, wollte ich seinen Einsatz auf ein lebenswichtiges Minimum reduzieren. </font><font style="vertical-align: inherit;">Daher habe ich am Ende alle Schaltkreise auf abnehmbaren Verbindungen gesammelt. </font><font style="vertical-align: inherit;">Ich habe spezielle Drähte (Papa-Papa, Mama-Mama, Mama-Papa), Steckbretter und Krokodilklemmen verwendet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wenn die Entwickler des Controllers nicht dafür verantwortlich sind, dass ich beim Abisolieren des Kabels ein paar Schnitte bekommen habe, dann die Momente, in denen meine gesamte Struktur zu Boden fiel, weil ich den "hölzernen" Gurt teilweise auf ihr Gewissen gehakt habe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Tourniquet ist einerseits eine gute Sache. Um den Controller im Auto zu installieren, ist der Kabelbaum meiner Meinung nach genau richtig. Die Drähte darin sind verseilt und wenn sie gut verdrillt sind, passen sie vollständig in die Anschlüsse „Mutter“, meine „Steckbrett“ -Drähte. Auf der anderen Seite war es aufgrund der „Eichendrähte“ schwierig, selbst ein schönes Foto mit voll gedrehtem Controller zu machen, da es nicht bequem ist, mit dem Kabel mit dem Steckbrett zu experimentieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich sagte etwas höher, dass ich keinen Lötkolben verwenden wollte, aber mindestens einmal müssten sie sich bewaffnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um das Signal vom Fotowiderstand zu messen, müssen wir es in den Analog-Digital-Wandler (ADC) des Controllers „einfügen“. </font><font style="vertical-align: inherit;">Aber Tatsache ist, dass im Gegensatz zu zum Beispiel meinem alten Craftduino. </font><font style="vertical-align: inherit;">Im Fall von Canny stellte sich heraus, dass ein Jumper angebracht werden musste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Anfang habe ich die Dokumentation nicht sorgfältig gelesen und dachte, dass die 5 und 6 Ausgänge des Controllers die Ausgänge von A5 und A6 sind. </font><font style="vertical-align: inherit;">Ich habe sogar ein Programm geschrieben und lange versucht, Lesungen zu machen. </font><font style="vertical-align: inherit;">Das ist mir natürlich nicht gelungen, da die Kanäle Nr. 5 und 6 ohne vorherige Vorbereitung standardmäßig als normaler diskreter Eingang arbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich die Dokumentation für den Controller "frisch" gelesen hatte, wurde mir klar, dass ich noch löten muss. </font><font style="vertical-align: inherit;">Sie haben keine Ahnung, wie ich Angst hatte, alles zu "vermasseln".</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Das letzte Mal habe ich versucht, etwas in die Schaltung zu löten, die ich für mich getan habe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe es geschafft, alle Kondensatoren in der Nähe der Lötstelle mit Lötmittel zu füllen. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diesmal war der Lötvorgang einfach. </font><font style="vertical-align: inherit;">Es genügte, sehr vorsichtig einen Tropfen Lötmittel auf die Schiene zu geben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie mein Lötpullover aussieht, ist auf dem Foto unten zu sehen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/r9/vd/pvr9vdryjakzmbjalenhh6wrn9a.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe nur den 6. Ausgang an Kanal A6 angeschlossen, ich habe es nicht gewagt, den fünften Kanal zu löten, um nicht versehentlich beide Jumper mit Lötmittel zu füllen. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rein theoretisch war es möglich, auf einen Lötkolben zu verzichten, indem das Loch und die Klemme Nr. 6 mit einem Draht verbunden wurden. </font><font style="vertical-align: inherit;">Aber das wäre furchtbar unpraktisch. </font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Foto unten zeigt die Verbindung von Pin Nr. 5 und ADC-Pin Nr. A5 mit einem Dad-to-Dad-Kabel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/l6/hb/qul6hbndz9lv1jwj8rq-m34sipe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Letzte, worauf Sie achten sollten, bevor Sie zur Sache kommen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachtung!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiederholen Sie nicht eins zu eins, was ich weiter unten im Text beschreiben werde. </font><font style="vertical-align: inherit;">Seien Sie nicht faul, die Steckverbindungen durch Löten zu ersetzen, nehmen Sie dickere Drähte auf und lesen Sie die Dokumentation. </font><font style="vertical-align: inherit;">Ich bin kein Experte in diesen Angelegenheiten, also habe ich alles so gut ich konnte zusammengestellt. </font><font style="vertical-align: inherit;">Ich rate Ihnen auch, die Brandgefahr sorgfältig zu überwachen und die Geräte nicht unbeaufsichtigt zu lassen. </font><font style="vertical-align: inherit;">Ich konnte ein paar Mal ein paar schwelende Drähte riechen. </font><font style="vertical-align: inherit;">Naja, auch im Netzteil gab es Schutz gegen Kurzschluss (ich habe es auch arrangiert). </font><font style="vertical-align: inherit;">Deshalb - bitte seien Sie vorsichtig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vergessen Sie auch nicht, dass es trotz der geringen Spannungen und Ströme schmerzhaft sein kann, die unter Spannung stehenden stromführenden Teile zu berühren </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(insbesondere, wenn Sie sie mit einem verletzten Körperteil stoßen)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil III: Schreiben von Daten in den COM-Port</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um unseren Umgebungslichtsensor irgendwie zu kalibrieren, müssen wir verstehen, welche Werte er abhängig von der Lichtstärke an die Steuerung sendet. Dazu müssen wir Daten vom ADC auf den Monitor ausgeben. Bei der Arbeit mit Arduino und seinen Klonen zur Lösung solcher Probleme habe ich einen COM-Port-Monitor verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Fall von Canny 3 tiny ist das Lesen von Daten von einem virtuellen COM-Port nicht viel komplizierter als bei Arduino. Es gibt jedoch einen wesentlichen Unterschied. Die CannyLab-Entwicklungsumgebung verfügt nicht über einen eigenen COM-Port-Monitor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hterm verwendet,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> weil es plattformübergreifend und leicht ist und keine Installation erfordert. Sie können aber auch jeden anderen verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde noch mehr sagen, nichts wird uns davon abhalten, den Arduino IDE COM Port Monitor zu verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf meinem Windows 10-System hat alles sofort funktioniert, und ich musste die Treiber für den virtuellen COM-Port nicht separat installieren. Aber nur für den Fall, ich sage, der Treiber scheint mit der CannyLab-Entwicklungsumgebung gebündelt zu sein (er befindet sich im Ordner drv \ canny3tiny_vcp). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um nicht weiter zu erläutern, wie die mit dem Senden von Daten an den virtuellen USB-COM-Port verbundenen Diagrammblöcke funktionieren, werde ich ein einfaches Beispiel geben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heute werden wir als Training die Nachricht „HABR“ über den Controller senden. Zuerst müssen Sie das IDE CannyLab herunterladen. Es kann leicht auf der offiziellen Website des Entwicklers gefunden werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens habe ich CannyLab v 1.42 verwendet, aber ich denke, in früheren Versionen wird es keine Probleme mit der Leistung von Diagrammen geben.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Prozess des Schreibens von Software auf den neuen Controller und die Grundprinzipien der Arbeit mit Cannylab I wurden in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kapitel 3 des letzten Artikels beschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Erstellen Sie ein neues Diagramm und wählen Sie im Dialogfeld Canny 3 tiny aus. Und wir übertragen Blöcke, Konstanten und Register in das Diagramm, wie im folgenden Screenshot. Natürlich ist es nicht erforderlich, Textbeschriftungen zu übertragen, da während der Ausführung des Diagramms nichts davon abhängt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/st/g9/rzstg9zmltxsf2ekndo4orydcnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie keine Lust haben, Blöcke selbst zu verschieben, können Sie die Diagramme für diesen Artikel mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herunterladen </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es sollte beachtet werden, dass das Senden einer Nachricht an den COM-Port etwas seltsam funktioniert und Sie Buchstaben in zwei Zeichen in einem Spiegel schreiben müssen, aber Sie können sich daran gewöhnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde in Teilen erklären. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parametereinstellung"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir stellen die USB VCP-Treibereinstellungen ein. Aktivieren Sie zuerst den Übertragungsmodus am virtuellen COM-Port und stellen Sie dann die Länge der übertragenen Nachricht ein. In unserem Fall - 6 Zeichen inklusive Zeilenvorschub. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Nachrichtentext"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> schreiben wir den Nachrichtentext in Konstanten (vergessen Sie nicht, in den "chr" -Modus zu wechseln) und übertragen diese Konstanten in die entsprechenden Treiberregister. Ich mache Sie noch einmal darauf aufmerksam, dass wir die Nachricht in umgekehrter Reihenfolge schreiben, sowohl in den Symbolpaaren selbst als auch in den Treiberregistern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Letzter Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Nachrichtenübertragung"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sendet mit einer bestimmten Häufigkeit unsere Nachricht an den COM-Port. Dafür verwenden wir einen PWM-Block. Verwechseln Sie es nicht mit der HF-PWM, die wir beim Anschließen der Lampe verwenden. In diesem Fall erzeugt der Block die Hälfte der Zeit "0" und die zweite Hälfte "1". Sie können mit der Größe des Zeitraums "herumspielen" und füllen, um die Häufigkeit des Sendens von Nachrichten zu erhöhen oder zu verringern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Anschließen einer grünen LED an diesen PWM-Block ist erforderlich, um den Betrieb der Steuerung zu überprüfen. Wenn alles in Ordnung ist, blinkt die LED mit der Häufigkeit des Sendens einer Nachricht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie man ein Programm in die Steuerung schreibt, habe ich bereits </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einem früheren Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gesagt </font><font style="vertical-align: inherit;">. In der letzten Zeit habe ich jedoch einen weiteren coolen Trick gelernt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir den Controller an den Computer anschließen, wechselt er in den Programmaufzeichnungsmodus. Zuvor habe ich, um in den Laufzeitmodus zu wechseln, den Controller vom Computer entfernt und das USB-Laden in den Computer gesteckt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich heraus, dass es einen einfacheren Weg gibt. Nachdem Sie den Controller an den USB-Anschluss des Computers angeschlossen und in CannyLab </font><font style="vertical-align: inherit;">auf die </font><font style="vertical-align: inherit;">Schaltfläche </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Verbinden“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geklickt haben </font><font style="vertical-align: inherit;">, gehen Sie zum </font><font style="vertical-align: inherit;">Menü </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Gerät“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und wählen Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ausführen“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b-/dt/bv/b-dtbvog9sirji-opbj-ehor-hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Controller beginnt mit der Ausführung des aufgezeichneten Programms und wird über den USB-Anschluss mit Strom versorgt. Auch danach wird der Controller auf dem Monitor des COM-Ports verfügbar. Um in den Programmaufzeichnungsmodus zurückzukehren, muss der Controller entfernt und wieder in den USB-Anschluss des Computers eingesteckt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und hier ist unser „HABR“ im Hterm COM-Port-Monitor. </font><font style="vertical-align: inherit;">Achten Sie auf die Datenübertragungsgeschwindigkeit und andere Einstellungen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/lh/yu/lslhyucpy7cxrmexfqnn3l5swgi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dies ist der Arduino IDE COM-Port-Monitor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/zd/vl/abzdvlqwpn6jaw0q0uuzx06ltzo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Foto zeigt, wie der Controller nach dem Aufzeichnen des Diagramms funktioniert: Die </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/4n/zu/qv4nzuowx6saogj5xskvkn7dt3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rote LED signalisiert, dass Strom über den USB-Port des Computers empfangen wird, und die grüne „blinkt“ im Takt der Nachrichten, die über den virtuellen USB-COM-Port übertragen werden.</font></font><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil IV: Wir verbinden und programmieren eine Autolampe und einen Fotowiderstand.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst betrachten wir die einfachste Option. Schließen Sie einfach die Lampe an Klemme Nr. 1 des Controllers und den Fotowiderstand an Klemme Nr. 6 (ADC) an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles ist ganz einfach, aber nur für den Fall, ich habe ein Diagramm gezeichnet: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/un/pm/svunpmu3hc-n4agrotbzy2rquea.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber hier sieht es live aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/az/z8/apazz8ybxdpnfnaxf9y3c-daabc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"-" und "+" der Stromquelle, die wir an die entsprechenden Klemmen von Canny 3 winzig anschließen, Pin Nr. 1 ist mit dem Lampengehäuse verbunden, und der "Schwanz" der Lampe mit einem Plus auf dem Steckbrett des Steckbretts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch mit einem Fotowiderstand ist alles einfach. Außerdem bringen wir das Steckbrett vom Bus zum Steckbrett, und das Minus geht an Pin Nr. 6 des Controllers, den wir zuvor mit dem Jumper an den ADC angeschlossen haben. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe bereits oben geschrieben, dass meine gesamte Struktur ein paar Mal vom Tisch gefallen ist. Daher kann es weiter unten auf den Fotos geringfügige Unterschiede hinsichtlich der Farben der Leiter und der Punkte ihres Eintritts in das Steckbrett geben.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt schreiben wir ein Programm. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/7s/l8/n17sl8exoem1_jl54mqgb-bapeg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie den neuen Tag, den wir blockieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit dem Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Abrufen des Werts vom ADC und Konvertieren in Suites“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Block übersetzen wir die Werte, die der ADC (0 bis 1023) uns bei der Beleuchtung (Lux) geben kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir müssen eine Messung der Beleuchtung bei Licht und eine Messung bei dunkleren Bedingungen durchführen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dementsprechend habe </font><font style="vertical-align: inherit;">ich </font><font style="vertical-align: inherit;">im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Wert von"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den minimalen ADC- </font><b><font style="vertical-align: inherit;">Wert</font></b><font style="vertical-align: inherit;"> "0" und im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ergebnis von" den</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nullwert des Beleuchtungspegels </font><font style="vertical-align: inherit;">aufgezeichnet </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Wert bis" habe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich die ADC- </font><b><font style="vertical-align: inherit;">Werte</font></b><font style="vertical-align: inherit;"> = 20 aufgezeichnet, und die entsprechende Beleuchtung von 300 Lux habe ich in das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ergebnis bis"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eingegeben </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe keine detaillierte Beschreibung der Parameter des Fotowiderstands, aber ich vermute, dass er keine vollständig lineare Charakteristik hat, aber das reicht uns jetzt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Überprüfen Sie vorab, wie das Diagramm im Simulator ausgeführt wird. Ausführlicher über die Arbeit im CannyLab-Simulator, den ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier geschrieben habe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes habe ich erreicht: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/yw/no/mpywnolxlvzxyaqqkeyy3oh2m-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich vor, der Fotowiderstand hat einen Wert von 10 an den ADC übergeben. Der Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Display (MAP)“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist im Wesentlichen eine lineare Skalierung. Zehn ist genau die Hälfte der Skala unserer Skala, was bedeutet, dass der Ausgang die Hälfte des Bereichs von 0 bis 300 ist, nämlich 150. Dieser Wert liegt unter dem angegebenen Wert von 300 Lux. Daher wird einer an das Kanalregister Nr. 1 (Ausgang Nr. 1) gesendet und die Lampe eingeschaltet . Es schaltet sich jedoch nicht sofort ein, sondern nur, wenn es mindestens eine Sekunde lang dunkel ist (1000 Millisekunden). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu verstehen, welche Nachricht wir am COM-Port erhalten, habe ich die Anzeige der Werte im Simulator auf das Hexadezimalformat umgestellt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mq/nr/rk/mqnrrkxyzudcput-yez77oke13a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"VCP-Nachrichten-Setup-Register D1: D0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in das der Wert 3130 eingeht. Wie wir uns erinnern, handelt es sich um ein Zeichenpaar, von dem jeder Teil einen hexadezimalen Zeichencode darstellt. Es stellt sich heraus, dass 31h der Zeichencode "1" in ASCII ist, 30 der Nullcode in ASCII.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installationsregister "VCP D3: D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " haben wir dementsprechend die Zeichen "0" und "5". Wir sammeln die Werte der Zeichenpaare in der Reihenfolge von D0 bis D3, die wir erhalten: "0", "1", "5", "0". Also haben wir unsere 0150 Lux bekommen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber wie sie sagen "kein einziger Simulator ...". Mal sehen, was in der Praxis passiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Messung unter dem Licht des Kronleuchters und des natürlichen Lichts (kombinierte Beleuchtung): Die </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/ze/ps/ofzepsndi0bepg1hwoxzursk7my.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Messwerte des Werkslichtmessers und unseres hausgemachten Lichts stimmen nahezu perfekt überein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Messung bei Tageslicht: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w_/kz/aq/w_kzaqulbnhvr-pq2tsdcy7pqu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Extrem schlechter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies liegt wahrscheinlich an der Nichtlinearität der Eigenschaften des Fotowiderstands und auch daran, dass wir die untere Skalierungsgrenze auf Null setzen, aber wir werden das Diagramm nicht komplizieren, um die Messgenauigkeit zu erhöhen. In unserem Beispiel bestand die Hauptsache darin, das allgemeine Prinzip des Erhaltens von Beleuchtungswerten zu verstehen. </font><font style="vertical-align: inherit;">Eine Erhöhung der Genauigkeit kann bis zur Umsetzung dieser Projekte im Auto oder zu Hause verzögert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir überprüfen die Funktion der Schaltung, schließen den Sensor mit einem Finger und entfernen dann den Finger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4f/nh/qd/4fnhqd-jpxmvsbj5wtvwnokgybg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt gibt es eine Option, wenn es im Raum nur dunkel ist: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/d7/lc/5rd7lcy5_cdx339o6z6c39r3y5i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Lampe </font><font style="vertical-align: inherit;">leuchtet </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alles funktioniert wie es sollte.</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil V: Versuch, die Lampenhelligkeit mit PWM zu verringern</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns das Schema etwas komplizieren, indem wir die Helligkeit der Lampe ändern. Dazu benötigen wir eine Hochfrequenz-PWM (RF-PWM), die in Canny 3 tiny an den Ausgängen Nr. 3 und Nr. 4 implementiert ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe mich für den Ausgang Nr </font><font style="vertical-align: inherit;">. 4 </font><font style="vertical-align: inherit;">entschieden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Verbindungsschema bleibt praktisch unverändert. Anstelle von Ausgang Nr. 1 verbinden wir einfach Ausgang Nr. 4 mit der Lampe. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qp/bg/b-/qpbgb-a7whds1vugbizqoyr3its.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht es in der Montage aus. Der Unterschied besteht darin, dass der Rahmen anstelle eines weißen Drahtes jetzt blau ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/z3/nl/2tz3nldjplnly2tzmo7ttrb0he0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch das Diagramm hat sich nicht wesentlich verändert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/fx/wl/orfxwlbv1adspw_c0fv2ouenqhy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde das Diagramm nicht im Detail malen. Die wichtigsten Änderungen in der Konfiguration von Ausgang 4, die wir für PWM verwenden. In diesem Abschnitt müssen wir das </font><b><font style="vertical-align: inherit;">"Fill Setting Register"</font></b><font style="vertical-align: inherit;"> einstellen.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es dauert Werte von 2 bis 255 Mikrosekunden, ich habe beschlossen, es nicht zu riskieren und habe 254 gewählt. Beachten Sie, dass es für zwei Kanäle gleichzeitig installiert ist (Nr. 3 und Nr. 4). Dann schreiben wir "1" in das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"PWM-Kanalfreigaberegister Nr. 4" und schließen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dabei die PWM unserer Glühbirne ein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Einschalten der Lampe im PWM-Modus (mit geringer Helligkeit)“ ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für uns nur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Register zum Einstellen des Füllkanals Nr. 4, μs“ neu.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir schreiben den Wert „10“ hinein, vorausgesetzt, der Beleuchtungsgrad über dem Photosensor betrug weniger als 250 Lux in innerhalb von 1 Sekunde. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Foto unten zeigt, dass die Lampe eingeschaltet ist, aber schwach leuchtet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/pp/_t/ompp_teo-f76yagfthj5qylheus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Lampe heller leuchten soll, müssen Sie nur den Wert der Konstanten „10“ in eine größere Zahl ändern. Sie können beispielsweise die Nummer 127 verwenden. In unserem Fall ist es die Hälfte der Zeit, die zum Füllen der HF-PWM-Periode benötigt wird, was etwa die Hälfte der Helligkeit der Lampe bedeutet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lx/ni/3t/lxni3tbt3zw1y6lyqthoqqufc1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass die HF-PWM mit dieser Lampe ziemlich deutlich funktioniert. Hier drei Fotos: Auf dem ersten setzen wir den </font><font style="vertical-align: inherit;">Wert </font><font style="vertical-align: inherit;">im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Register zum Füllen des Kanals Nummer 4“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf 10 μs, auf dem zweiten auf 110 μs auf der rechten Seite auf 210 μs. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/os/_w/udos_wpczlgn2m1naf4nc5053da.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grundsätzlich wird die Autolampe aus unserem Beispiel, wie ich es verstehe, in Positionssignalen und manchmal in Nebelscheinwerfern von Autos verwendet.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich denke, wenn wir das Schema und das Diagramm verfeinern, wäre es möglich, die Einbeziehung der Hintergrundbeleuchtung bei schlechten Lichtverhältnissen auf älteren Maschinen zu implementieren. </font><font style="vertical-align: inherit;">Es stimmt, Sie müssen die Wirkung von künstlichem Licht in der Nacht berücksichtigen. </font><font style="vertical-align: inherit;">Damit auf den Straßen, in den Tunneln und von den Scheinwerfern entgegenkommender Autos die Lampe nicht ausging. </font><font style="vertical-align: inherit;">Oder es wäre möglich, die Lampe im Fahrgastraum so zu steuern, dass beispielsweise die Lampen in den Türen des Zhiguli oder Niva beim Öffnen nicht immer aufleuchten.</font></font><br>
<br>
<a name="VI"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil VI: Schlussfolgerung </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während ich diesen Artikel schrieb, hatte ich ein starkes Gefühl von Nostalgie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während meines Studiums am Institut hatte mein Freund und Klassenkamerad Seryoga eine schicke blaue Limousine der Marke VAZ 2107. Was er gerade nicht mit ihm gemacht hat: Er wird eine Art Schlauch anbringen (um den Boost zu erhöhen), einen Lüfter im Fahrgastraum installieren, so dass er sich über einen separaten Knopf einschaltet, und dann das Auto auf Knopfdruck starten lassen (nur mit gedrehtem Schlüssel) Zündung). Im Allgemeinen hat er seine „Schwalbe“ einfach nicht „gestimmt“. Seitdem sind viele Jahre vergangen, mein Freund ist zu einem solideren Auto gewechselt, aber ich habe Angst, mir vorzustellen, was er mit seinem Zhiguli machen würde, wenn er diesen Controller vor 10 Jahren bekommen würde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dank dieses Artikels erinnerte ich mich auch an mein Ziel. Immerhin habe ich viele Jahre als Automatisierungsingenieur studiert, aber ich habe keinen Tag nur in meinem Fachgebiet gearbeitet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich heraus, dass es so cool ist, in die DIY-Welt einzutauchen. Beim Zusammenbau der Schaltkreise „stecken“ die Glühlampe und die LED mehr als einmal mit einem Knopf ein / aus. Es ist ein angenehmes Gefühl, wenn etwas wie beabsichtigt funktioniert. Ich kam auch auf die Idee, dass das Programmieren eines Controllers mithilfe von Diagrammen eine meditativere Aufgabe ist als das Schreiben von Code in der Arduino IDE. Eine völlig andere Wahrnehmung des Programms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Während ich diesen Artikel schrieb, bestellte ich mir eine Version von Canny 3 tiny ohne Kabelbaum. Jetzt werde ich mich etwas ausruhen und einen Artikel über die Installation dieses Controllers in einem Steckbrett schreiben. An sich werden wir mit seiner Hilfe einige weitere Beispiele für die Lichtautomatisierung analysieren.</font></font><br>
<br>
<i>   ,  ,    . </i><br>
<br>
<i>UPD:<br>
,       ,            :</i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">«, ,  –  !»       CANNY 3 tiny</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">«  ...»         (CANNY  Arduino)  Raspberry PI</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">« ?»     bluetooth      Xamarin (Android)</a>.<br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489754/index.html">20 Projektmanagementsysteme, Übersicht über 100 Chips</a></li>
<li><a href="../de489756/index.html">Erstellen Sie einen Stifteffekt in SVG</a></li>
<li><a href="../de489758/index.html">Winkel: Ein Beispiel für die Verwendung von NGRX</a></li>
<li><a href="../de489760/index.html">Bewusstsein und Existenz. Quantenmechanik ohne Paradoxien</a></li>
<li><a href="../de489762/index.html">Ein einfaches Beispiel für Parsing und Datenanalyse für World of Tanks</a></li>
<li><a href="../de489768/index.html">Wie π kollidierende Blöcke und einen Quantensuchalgorithmus kombiniert</a></li>
<li><a href="../de489770/index.html">Video von MinskJS mitap: Mein Bericht über Browsererweiterungen</a></li>
<li><a href="../de489772/index.html">Hackathon in Simferopol, Yandex. Dialoge und Gesetze der Chat-Bot-Technologie</a></li>
<li><a href="../de489774/index.html">Die Geschichte, wie ich die Wohnung mit Node-RED automatisiert habe. Teil II</a></li>
<li><a href="../de489776/index.html">The Ember Times - Ausgabe 136</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>