<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍⚕️ 🤔 🈺 Quanto de marketing há no ACID? 👐🏽 🤸🏿 🤙🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá a todos. Em contato com Vladislav Rodin. Atualmente, sou o chefe do curso de arquiteto de carga alta da OTUS e também ensino cursos de arquitetura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Quanto de marketing há no ACID?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/494652/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olá a todos. </font><font style="vertical-align: inherit;">Em contato com Vladislav Rodin. </font><font style="vertical-align: inherit;">Atualmente, sou o chefe do curso de arquiteto de carga alta da OTUS e também ensino cursos de arquitetura de software. </font></font></i><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Além de ensinar, como você pode ver, eu escrevi para o blog OTUS Habré, material com direitos autorais do blog, e o artigo de hoje quero coincidir com o início do curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Banco de Dados"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que agora está aberto ao público.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/iv/po/dw/ivpodwutiqb7mpd1iuwkdzyfg98.png"><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefácio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As transações surgiram nos anos 70 e foram apresentadas como uma ferramenta de banco de dados para resolver os problemas de tolerância a falhas e acesso a dados em um ambiente competitivo. Em seguida, foram formuladas várias propriedades que uma transação deve possuir para cumprir as tarefas atribuídas a ela, e as letras maiúsculas dessas propriedades, definidas na ordem correta, compunham a bela sigla ACID.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O período durante o qual esses eventos ocorreram foi caracterizado pela ausência de altas cargas, pela Internet e por problemas de desempenho, que poderiam ser resolvidos apenas por métodos de escala vertical. Posteriormente, no início dos anos 2000, apareceu uma tendência nos bancos de dados NoSQL, apareceu a abreviatura BASE, que na verdade era contrária ao ACID clássico (ACID - ácido, BASE - alcalino). Agora, há uma tendência inversa para o ACID. Até o MongoDB do NoSQL agora suporta o ACID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejamos o significado dessa abreviação e quanto de marketing ela possui.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACID representa 4 propriedades: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A = atomicidade </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C = consistência </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I = isolamento </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D = durabilidade </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, vamos falar sobre cada propriedade separadamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A = atomicidade</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atomicidade é um termo sobrecarregado e, no contexto de transações em um banco de dados, pode ser formulado como o princípio de "tudo ou nada". Se sua transação contiver 10 operações de inserção, todas as 10 serão executadas (transações de confirmação serão realizadas) ou nenhuma delas (transações de reversão serão realizadas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esta propriedade é fornecida? O fato é que, quando uma transação contendo as mesmas 10 inserções chega ao banco de dados, os dados não começam a mudar. Antes de uma transação, a transação é gravada diretamente nos dados em um log, no qual as alterações feitas por ela são registradas. Esse diário também pode ser usado para replicar dados ou pode não ter relação com ele, como descrevi, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Graças a este diário, as transações podem ser confirmadas diretamente nos dados ou, nesse caso, revertê-los. </font><font style="vertical-align: inherit;">A regra de que uma transação deve ser fechada o mais rápido possível segue diretamente do entendimento dos princípios para implementar essa propriedade: os bancos de dados são proibidos de limpar esse log enquanto a transação está aberta, para que possa ficar entupido, o que, por sua vez, leva a consequências muito desagradáveis.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C = consistência (consistência ou integridade)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em termos de ACID, consistência não significa o mesmo que em termos do teorema da PAC (na teoria de sistemas distribuídos, existem muitos graus dessa consistência). Por consistência, queremos dizer o seguinte: alguns invariantes predefinidos do sistema devem ser executados antes e depois da transação de confirmação. Exemplos de invariantes do sistema podem ser representados: o débito converge com o empréstimo, o salário total de funcionários não excede o orçamento, o número de funcionários da empresa é igual ao número de vagas abertas anteriormente, etc. No idioma do banco de dados, isso significa apenas o cumprimento de todas as restrições.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A questão sobre a necessidade de consistência no nível do banco de dados é bastante controversa, porque a presença de restrições pode indicar que parte da lógica de negócios mudou do aplicativo para o nível do banco de dados, o que não é universalmente reconhecido como uma boa prática. </font><font style="vertical-align: inherit;">No final, o próprio aplicativo pode decidir não confirmar dados inválidos. </font><font style="vertical-align: inherit;">Há uma opinião de que a consistência foi adicionada apenas para tornar a abreviação bonita (marketing).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I = isolamento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O isolamento é uma propriedade do banco de dados que permite que transações paralelas sejam executadas como seqüenciais. Afinal, ninguém proíbe o banco de dados de executar várias transações ao mesmo tempo, é necessário garantir que elas não se afetem, para que não ocorram anomalias do tipo de condição de corrida. De fato, é o isolamento que resolve o problema do acesso a dados em um ambiente competitivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A divulgação do conceito de isolamento devido ao seu volume merece um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo separado.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, porque é precisamente o isolamento que pode ser chamado de coração do ACID. </font><font style="vertical-align: inherit;">O preço da transacionalidade geralmente se resume ao preço de garantir o isolamento, e é por isso que o isolamento tem níveis diferentes, cada um dos quais fornece seu próprio nível de proteção contra as condições da corrida e carrega uma ou outra sobrecarga. </font><font style="vertical-align: inherit;">O isolamento é totalmente garantido apenas no nível serializável, que é muito difícil de implementar e raramente é necessário.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D = durabilidade</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A durabilidade nos diz que, se uma transação foi aplicada, ela nunca deve desaparecer. </font><font style="vertical-align: inherit;">De fato, isso significa o seguinte: se o banco de dados respondeu que uma transação foi confirmada, a transação foi confirmada na memória não volátil. </font><font style="vertical-align: inherit;">Isso significa que ocorreu a chamada do sistema fsync, ou seja, os buffers foram liberados para o disco rígido e ela respondeu ok.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durabilidade também é um termo de marketing, porque não pode ser totalmente fornecido. Mesmo que descartemos os cenários artificiais de “queimar a Terra por alienígenas”, após os quais não haverá bancos de dados ou transações, cenários mais prováveis, mas extremos, de destruição física de um disco rígido específico no qual a transação foi gravada, podemos lembrar que a chamada do sistema fsync garante bater em um disco rígido no controlador, que, por sua vez, ainda contém um buffer volátil. O tempo gasto é curto, mas não é igual a 0. Como resultado, se você desligar a eletricidade exatamente no momento “certo”, a transação ainda poderá ser perdida!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora o problema com o fsync tenha sido resolvido em um banco de dados Oracle caro, nada pode nos proteger dos problemas associados à destruição física da máquina. </font><font style="vertical-align: inherit;">Só podemos aumentar as garantias usando backups e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replicação</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar do ACID fornecer propriedades bastante interessantes, como atomicidade e isolamento, algumas dessas propriedades são apenas de marketing, e mesmo conhecidas por seu rigor em comparação com o BASE, o ACID não garante totalmente a ausência de oportunidades de perda de transações, bem como o impacto dos resultados. executando transações simultâneas entre si (o isolamento ainda deve estar configurado!).</font></font><br>
<hr><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convidamos todos a uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aula gratuita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre o tópico: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Um modelo para trabalhar com dados no PostgreSQL</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><i><font style="vertical-align: inherit;">"</font></i></b></font><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494642/index.html">Indicadores cármicos</a></li>
<li><a href="../pt494644/index.html">Automação de um jornalista. Parte 2. Trabalhando com Alto-falantes</a></li>
<li><a href="../pt494646/index.html">A vida da análise leva ou "imaginei que você faria isso sozinho"</a></li>
<li><a href="../pt494648/index.html">Analisamos os problemas do GOST R 53894-2016 “Gerenciamento de conhecimento. Termos e definições"</a></li>
<li><a href="../pt494650/index.html">Procure anagramas e sabanagramas em todas as palavras da língua</a></li>
<li><a href="../pt494658/index.html">Usando traços para relacionamentos polimórficos no Laravel</a></li>
<li><a href="../pt494660/index.html">Tutorial do CSS Houdini</a></li>
<li><a href="../pt494662/index.html">Nosso espaço - é tão ruim?</a></li>
<li><a href="../pt494664/index.html">Como a implementação de processos de segurança ajuda na transição para o trabalho remoto</a></li>
<li><a href="../pt494666/index.html">Achados de um homem de áudio: onde ouvir a música de épocas passadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>