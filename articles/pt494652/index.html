<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚öïÔ∏è ü§î üà∫ Quanto de marketing h√° no ACID? üëêüèΩ ü§∏üèø ü§ôüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° a todos. Em contato com Vladislav Rodin. Atualmente, sou o chefe do curso de arquiteto de carga alta da OTUS e tamb√©m ensino cursos de arquitetura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Quanto de marketing h√° no ACID?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/494652/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° a todos. </font><font style="vertical-align: inherit;">Em contato com Vladislav Rodin. </font><font style="vertical-align: inherit;">Atualmente, sou o chefe do curso de arquiteto de carga alta da OTUS e tamb√©m ensino cursos de arquitetura de software. </font></font></i><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©m de ensinar, como voc√™ pode ver, eu escrevi para o blog OTUS Habr√©, material com direitos autorais do blog, e o artigo de hoje quero coincidir com o in√≠cio do curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Banco de Dados"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que agora est√° aberto ao p√∫blico.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/iv/po/dw/ivpodwutiqb7mpd1iuwkdzyfg98.png"><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pref√°cio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As transa√ß√µes surgiram nos anos 70 e foram apresentadas como uma ferramenta de banco de dados para resolver os problemas de toler√¢ncia a falhas e acesso a dados em um ambiente competitivo. Em seguida, foram formuladas v√°rias propriedades que uma transa√ß√£o deve possuir para cumprir as tarefas atribu√≠das a ela, e as letras mai√∫sculas dessas propriedades, definidas na ordem correta, compunham a bela sigla ACID.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O per√≠odo durante o qual esses eventos ocorreram foi caracterizado pela aus√™ncia de altas cargas, pela Internet e por problemas de desempenho, que poderiam ser resolvidos apenas por m√©todos de escala vertical. Posteriormente, no in√≠cio dos anos 2000, apareceu uma tend√™ncia nos bancos de dados NoSQL, apareceu a abreviatura BASE, que na verdade era contr√°ria ao ACID cl√°ssico (ACID - √°cido, BASE - alcalino). Agora, h√° uma tend√™ncia inversa para o ACID. At√© o MongoDB do NoSQL agora suporta o ACID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejamos o significado dessa abrevia√ß√£o e quanto de marketing ela possui.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACID representa 4 propriedades: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A = atomicidade </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C = consist√™ncia </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I = isolamento </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D = durabilidade </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, vamos falar sobre cada propriedade separadamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A = atomicidade</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atomicidade √© um termo sobrecarregado e, no contexto de transa√ß√µes em um banco de dados, pode ser formulado como o princ√≠pio de "tudo ou nada". Se sua transa√ß√£o contiver 10 opera√ß√µes de inser√ß√£o, todas as 10 ser√£o executadas (transa√ß√µes de confirma√ß√£o ser√£o realizadas) ou nenhuma delas (transa√ß√µes de revers√£o ser√£o realizadas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esta propriedade √© fornecida? O fato √© que, quando uma transa√ß√£o contendo as mesmas 10 inser√ß√µes chega ao banco de dados, os dados n√£o come√ßam a mudar. Antes de uma transa√ß√£o, a transa√ß√£o √© gravada diretamente nos dados em um log, no qual as altera√ß√µes feitas por ela s√£o registradas. Esse di√°rio tamb√©m pode ser usado para replicar dados ou pode n√£o ter rela√ß√£o com ele, como descrevi, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Gra√ßas a este di√°rio, as transa√ß√µes podem ser confirmadas diretamente nos dados ou, nesse caso, revert√™-los. </font><font style="vertical-align: inherit;">A regra de que uma transa√ß√£o deve ser fechada o mais r√°pido poss√≠vel segue diretamente do entendimento dos princ√≠pios para implementar essa propriedade: os bancos de dados s√£o proibidos de limpar esse log enquanto a transa√ß√£o est√° aberta, para que possa ficar entupido, o que, por sua vez, leva a consequ√™ncias muito desagrad√°veis.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C = consist√™ncia (consist√™ncia ou integridade)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em termos de ACID, consist√™ncia n√£o significa o mesmo que em termos do teorema da PAC (na teoria de sistemas distribu√≠dos, existem muitos graus dessa consist√™ncia). Por consist√™ncia, queremos dizer o seguinte: alguns invariantes predefinidos do sistema devem ser executados antes e depois da transa√ß√£o de confirma√ß√£o. Exemplos de invariantes do sistema podem ser representados: o d√©bito converge com o empr√©stimo, o sal√°rio total de funcion√°rios n√£o excede o or√ßamento, o n√∫mero de funcion√°rios da empresa √© igual ao n√∫mero de vagas abertas anteriormente, etc. No idioma do banco de dados, isso significa apenas o cumprimento de todas as restri√ß√µes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A quest√£o sobre a necessidade de consist√™ncia no n√≠vel do banco de dados √© bastante controversa, porque a presen√ßa de restri√ß√µes pode indicar que parte da l√≥gica de neg√≥cios mudou do aplicativo para o n√≠vel do banco de dados, o que n√£o √© universalmente reconhecido como uma boa pr√°tica. </font><font style="vertical-align: inherit;">No final, o pr√≥prio aplicativo pode decidir n√£o confirmar dados inv√°lidos. </font><font style="vertical-align: inherit;">H√° uma opini√£o de que a consist√™ncia foi adicionada apenas para tornar a abrevia√ß√£o bonita (marketing).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I = isolamento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O isolamento √© uma propriedade do banco de dados que permite que transa√ß√µes paralelas sejam executadas como seq√ºenciais. Afinal, ningu√©m pro√≠be o banco de dados de executar v√°rias transa√ß√µes ao mesmo tempo, √© necess√°rio garantir que elas n√£o se afetem, para que n√£o ocorram anomalias do tipo de condi√ß√£o de corrida. De fato, √© o isolamento que resolve o problema do acesso a dados em um ambiente competitivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A divulga√ß√£o do conceito de isolamento devido ao seu volume merece um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo separado.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, porque √© precisamente o isolamento que pode ser chamado de cora√ß√£o do ACID. </font><font style="vertical-align: inherit;">O pre√ßo da transacionalidade geralmente se resume ao pre√ßo de garantir o isolamento, e √© por isso que o isolamento tem n√≠veis diferentes, cada um dos quais fornece seu pr√≥prio n√≠vel de prote√ß√£o contra as condi√ß√µes da corrida e carrega uma ou outra sobrecarga. </font><font style="vertical-align: inherit;">O isolamento √© totalmente garantido apenas no n√≠vel serializ√°vel, que √© muito dif√≠cil de implementar e raramente √© necess√°rio.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D = durabilidade</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A durabilidade nos diz que, se uma transa√ß√£o foi aplicada, ela nunca deve desaparecer. </font><font style="vertical-align: inherit;">De fato, isso significa o seguinte: se o banco de dados respondeu que uma transa√ß√£o foi confirmada, a transa√ß√£o foi confirmada na mem√≥ria n√£o vol√°til. </font><font style="vertical-align: inherit;">Isso significa que ocorreu a chamada do sistema fsync, ou seja, os buffers foram liberados para o disco r√≠gido e ela respondeu ok.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durabilidade tamb√©m √© um termo de marketing, porque n√£o pode ser totalmente fornecido. Mesmo que descartemos os cen√°rios artificiais de ‚Äúqueimar a Terra por alien√≠genas‚Äù, ap√≥s os quais n√£o haver√° bancos de dados ou transa√ß√µes, cen√°rios mais prov√°veis, mas extremos, de destrui√ß√£o f√≠sica de um disco r√≠gido espec√≠fico no qual a transa√ß√£o foi gravada, podemos lembrar que a chamada do sistema fsync garante bater em um disco r√≠gido no controlador, que, por sua vez, ainda cont√©m um buffer vol√°til. O tempo gasto √© curto, mas n√£o √© igual a 0. Como resultado, se voc√™ desligar a eletricidade exatamente no momento ‚Äúcerto‚Äù, a transa√ß√£o ainda poder√° ser perdida!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora o problema com o fsync tenha sido resolvido em um banco de dados Oracle caro, nada pode nos proteger dos problemas associados √† destrui√ß√£o f√≠sica da m√°quina. </font><font style="vertical-align: inherit;">S√≥ podemos aumentar as garantias usando backups e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replica√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar do ACID fornecer propriedades bastante interessantes, como atomicidade e isolamento, algumas dessas propriedades s√£o apenas de marketing, e mesmo conhecidas por seu rigor em compara√ß√£o com o BASE, o ACID n√£o garante totalmente a aus√™ncia de oportunidades de perda de transa√ß√µes, bem como o impacto dos resultados. executando transa√ß√µes simult√¢neas entre si (o isolamento ainda deve estar configurado!).</font></font><br>
<hr><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convidamos todos a uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aula gratuita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre o t√≥pico: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Um modelo para trabalhar com dados no PostgreSQL</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><i><font style="vertical-align: inherit;">"</font></i></b></font><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494642/index.html">Indicadores c√°rmicos</a></li>
<li><a href="../pt494644/index.html">Automa√ß√£o de um jornalista. Parte 2. Trabalhando com Alto-falantes</a></li>
<li><a href="../pt494646/index.html">A vida da an√°lise leva ou "imaginei que voc√™ faria isso sozinho"</a></li>
<li><a href="../pt494648/index.html">Analisamos os problemas do GOST R 53894-2016 ‚ÄúGerenciamento de conhecimento. Termos e defini√ß√µes"</a></li>
<li><a href="../pt494650/index.html">Procure anagramas e sabanagramas em todas as palavras da l√≠ngua</a></li>
<li><a href="../pt494658/index.html">Usando tra√ßos para relacionamentos polim√≥rficos no Laravel</a></li>
<li><a href="../pt494660/index.html">Tutorial do CSS Houdini</a></li>
<li><a href="../pt494662/index.html">Nosso espa√ßo - √© t√£o ruim?</a></li>
<li><a href="../pt494664/index.html">Como a implementa√ß√£o de processos de seguran√ßa ajuda na transi√ß√£o para o trabalho remoto</a></li>
<li><a href="../pt494666/index.html">Achados de um homem de √°udio: onde ouvir a m√∫sica de √©pocas passadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>