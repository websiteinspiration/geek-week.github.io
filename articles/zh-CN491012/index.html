<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â¯ï¸ ğŸ‘¨ğŸ¼â€ğŸ³ ğŸ¥’ å¼‚æ­¥ç¼–ç¨‹ä¸å¼‚æ­¥/ç­‰å¾… ğŸˆ ğŸšµğŸ¿ ğŸ“¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ‹å‹ä»¬ï¼Œç¾å¥½çš„ä¸€å¤©ï¼
 
 ç›¸å¯¹è€Œè¨€ï¼Œæ–°å¢çš„JavaScriptæ˜¯å¼‚æ­¥å‡½æ•°å’Œawaitå…³é”®å­—ã€‚è¿™äº›åŠŸèƒ½åŸºæœ¬ä¸Šæ˜¯å¯¹Promiseï¼ˆæ‰¿è¯ºï¼‰çš„è¯­æ³•è¡¥å……ï¼Œä½¿ç¼–å†™å’Œè¯»å–å¼‚æ­¥ä»£ç å˜å¾—å®¹æ˜“ã€‚å®ƒä»¬ä½¿å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥çš„ã€‚æœ¬æ–‡å°†å¸®åŠ©æ‚¨å¼„æ¸…æ¥šæ˜¯ä»€ä¹ˆã€‚
 
 æ¡ä»¶ï¼šåŸºæœ¬çš„è®¡ç®—æœºçŸ¥è¯†ï¼ŒJSåŸºç¡€çŸ¥è¯†ï¼Œç†è§£å¼‚æ­¥ä»£ç å’ŒProm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å¼‚æ­¥ç¼–ç¨‹ä¸å¼‚æ­¥/ç­‰å¾…</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491012/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‹å‹ä»¬ï¼Œç¾å¥½çš„ä¸€å¤©ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›¸å¯¹è€Œè¨€ï¼Œæ–°å¢çš„JavaScriptæ˜¯å¼‚æ­¥å‡½æ•°å’Œawaitå…³é”®å­—ã€‚</font><font style="vertical-align: inherit;">è¿™äº›åŠŸèƒ½åŸºæœ¬ä¸Šæ˜¯å¯¹Promiseï¼ˆæ‰¿è¯ºï¼‰çš„è¯­æ³•è¡¥å……ï¼Œä½¿ç¼–å†™å’Œè¯»å–å¼‚æ­¥ä»£ç å˜å¾—å®¹æ˜“ã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬ä½¿å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥çš„ã€‚</font><font style="vertical-align: inherit;">æœ¬æ–‡å°†å¸®åŠ©æ‚¨å¼„æ¸…æ¥šæ˜¯ä»€ä¹ˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¡ä»¶ï¼šåŸºæœ¬çš„è®¡ç®—æœºçŸ¥è¯†ï¼ŒJSåŸºç¡€çŸ¥è¯†ï¼Œç†è§£å¼‚æ­¥ä»£ç å’ŒPromiseçš„åŸºç¡€ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›®çš„ï¼šäº†è§£å¦‚ä½•ä½œå‡ºæ‰¿è¯ºä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚æ­¥/ç­‰å¾…åŸºç¡€</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨å¼‚æ­¥/ç­‰å¾…æœ‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚æ­¥å…³é”®å­—</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰asyncå…³é”®å­—ï¼Œè¯¥å…³é”®å­—æ”¾åœ¨å‡½æ•°å£°æ˜ä¹‹å‰ä»¥ä½¿å…¶å¼‚æ­¥ã€‚</font><font style="vertical-align: inherit;">å¼‚æ­¥åŠŸèƒ½æ˜¯ä¸€ç§é¢„æœŸå¯ä»¥ä½¿ç”¨awaitå…³é”®å­—è¿è¡Œå¼‚æ­¥ä»£ç çš„åŠŸèƒ½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°è¯•åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­é”®å…¥ä»¥ä¸‹å†…å®¹ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> }<font></font>
hello()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥å‡½æ•°å°†è¿”å›â€œ Helloâ€ã€‚</font><font style="vertical-align: inherit;">æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå¯¹å§ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºå¼‚æ­¥å‡½æ•°å‘¢ï¼Ÿ</font><font style="vertical-align: inherit;">è¯·å°è¯•ä»¥ä¸‹æ“ä½œï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> }<font></font>
hello()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œå‡½æ•°è°ƒç”¨å°†è¿”å›ä¸€ä¸ªPromiseã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯å¼‚æ­¥å‡½æ•°çš„åŠŸèƒ½ä¹‹ä¸€-å®ƒä»¬è¿”å›ä¿è¯è¢«è½¬æ¢ä¸ºPromiseçš„å€¼ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨è¿˜å¯ä»¥åˆ›å»ºå¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> hello = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> hello() }<font></font>
hello()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç®­å¤´åŠŸèƒ½ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> hello = <span class="hljs-keyword">async</span> () =&gt; { <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello'</span> }
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æœ‰è¿™äº›åŠŸèƒ½éƒ½åšåŒæ ·çš„äº‹æƒ…ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†è·å¾—å®Œæˆçš„æ‰¿è¯ºçš„ä»·å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨.thenï¼ˆï¼‰å—ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">hello().then(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(value))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...ç”šè‡³æ˜¯è¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">hello().then(<span class="hljs-built_in">console</span>.log)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæ·»åŠ asyncå…³é”®å­—ä¼šä½¿å‡½æ•°è¿”å›promiseè€Œä¸æ˜¯å€¼ã€‚</font><font style="vertical-align: inherit;">å¦å¤–ï¼Œå®ƒå…è®¸åŒæ­¥åŠŸèƒ½é¿å…ä¸è¿è¡Œå’Œæ”¯æŒä½¿ç”¨awaitç›¸å…³çš„ä»»ä½•å¼€é”€ã€‚</font><font style="vertical-align: inherit;">åœ¨åŠŸèƒ½ä¹‹å‰ç®€å•æ·»åŠ å¼‚æ­¥åŠŸèƒ½ï¼Œå³å¯é€šè¿‡JSå¼•æ“è‡ªåŠ¨ä¼˜åŒ–ä»£ç ã€‚</font><font style="vertical-align: inherit;">å‡‰ï¼</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­‰å¾…å…³é”®å­—</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“æ‚¨å°†å¼‚æ­¥åŠŸèƒ½ä¸awaitå…³é”®å­—ç»“åˆä½¿ç”¨æ—¶ï¼Œå¼‚æ­¥åŠŸèƒ½çš„ä¼˜åŠ¿å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚</font><font style="vertical-align: inherit;">å¯ä»¥åœ¨ä»»ä½•åŸºäºpromiseçš„å‡½æ•°ä¹‹å‰æ·»åŠ å®ƒï¼Œä»¥ä½¿å…¶ç­‰å¾…promiseå®Œæˆï¼Œç„¶åè¿”å›ç»“æœã€‚</font><font style="vertical-align: inherit;">ä¹‹åï¼Œå°†æ‰§è¡Œä¸‹ä¸€ä¸ªä»£ç å—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥åœ¨è°ƒç”¨ä»»ä½•è¿”å›æ‰¿è¯ºçš„å‡½æ•°ï¼ˆåŒ…æ‹¬Web APIå‡½æ•°ï¼‰æ—¶ä½¿ç”¨awaitã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> greeting = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">'Hello'</span>)<font></font>
}<font></font>
<font></font>
hello().then(alert)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œä¸Šé¢çš„ä»£ç æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå®ƒä»…ç”¨ä½œè¯­æ³•çš„æ¼”ç¤ºã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬ç»§ç»­çœ‹ä¸€ä¸ªçœŸå®çš„ä¾‹å­ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨å¼‚æ­¥/ç­‰å¾…åœ¨Promiseä¸Šé‡å†™ä»£ç </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸Šä¸€ç¯‡æ–‡ç« çš„è·å–ç¤ºä¾‹ä¸ºä¾‹ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">fetch(<span class="hljs-string">'coffee.jpg'</span>)<font></font>
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.blob())<font></font>
.then(<span class="hljs-function"><span class="hljs-params">myBlob</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> objectURL = URL.createObjectURL(myBlob)
    <span class="hljs-keyword">let</span> image = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>)<font></font>
    image.src = objectURL<font></font>
    <span class="hljs-built_in">document</span>.body.appendChild(image)<font></font>
})<font></font>
.catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'There has been a problem with your fetch operation: '</span> + e.message)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨åº”è¯¥å·²ç»äº†è§£äº†ä»€ä¹ˆæ˜¯Promiseä»¥åŠå®ƒä»¬å¦‚ä½•å·¥ä½œï¼Œä½†æ˜¯è®©æˆ‘ä»¬ä½¿ç”¨async / awaité‡å†™æ­¤ä»£ç ï¼Œçœ‹çœ‹å®ƒæœ‰å¤šç®€å•ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFetch</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'coffee.jpg'</span>)
    <span class="hljs-keyword">let</span> myBlob = <span class="hljs-keyword">await</span> response.blob()<font></font>
<font></font>
    <span class="hljs-keyword">let</span> objectURL = URL.createObjectURL(myBlob)
    <span class="hljs-keyword">let</span> image = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>)<font></font>
    image.src = objectURL<font></font>
    <span class="hljs-built_in">document</span>.body.appendChild(image)<font></font>
}<font></font>
<font></font>
myFetch().catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'There has been a problem with your fetch operation: '</span> + e.message)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ä½¿ä»£ç æ›´åŠ ç®€å•æ˜“æ‡‚-æ²¡æœ‰.thenï¼ˆï¼‰å—ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨asyncå…³é”®å­—å°†åŠŸèƒ½è½¬æ¢ä¸ºä¸€ä¸ªæ‰¿è¯ºï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»æ‰¿è¯ºåˆ°ç­‰å¾…çš„æ··åˆæ–¹æ³•ï¼Œåœ¨å•ç‹¬çš„å—ä¸­çªå‡ºæ˜¾ç¤ºè¯¥åŠŸèƒ½çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œä»¥æé«˜çµæ´»æ€§ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFetch</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'coffee.jpg'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.blob()<font></font>
}<font></font>
<font></font>
myFetch().then(<span class="hljs-function">(<span class="hljs-params">blob</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> objectURL = URL.createObjectURL(blob)
    <span class="hljs-keyword">let</span> image = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'image'</span>)<font></font>
    image.src = objectURL<font></font>
    <span class="hljs-built_in">document</span>.body.appendChild(image)<font></font>
}).catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(e))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥é‡å†™ç¤ºä¾‹æˆ–è¿è¡Œæˆ‘ä»¬çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®æ—¶æ¼”ç¤º</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå¦è¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½†æ˜¯å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†ä»£ç åŒ…è£…åœ¨å‡½æ•°ä¸­ï¼Œå¹¶åœ¨functionå…³é”®å­—ä¹‹å‰æ·»åŠ äº†asyncå…³é”®å­—ã€‚æ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ¥ç¡®å®šå°†åœ¨å…¶ä¸­è¿è¡Œå¼‚æ­¥ä»£ç çš„ä»£ç å—ã€‚ awaitä»…åœ¨å¼‚æ­¥å‡½æ•°ä¸­èµ·ä½œç”¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†ä¸€æ¬¡ï¼šawaitä»…åœ¨å¼‚æ­¥å‡½æ•°ä¸­èµ·ä½œç”¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨myFetchï¼ˆï¼‰å‡½æ•°å†…éƒ¨ï¼Œä»£ç éå¸¸ç±»ä¼¼äºpromiseä¸Šçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯æœ‰ä¸€äº›åŒºåˆ«ã€‚ä¸å¿…åœ¨æ¯ä¸ªåŸºäºpromiseçš„æ–¹æ³•ä¹‹åä½¿ç”¨.thenï¼ˆï¼‰å—ï¼Œè€Œåªéœ€åœ¨è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰æ·»åŠ awaitå…³é”®å­—å¹¶å°†ä¸€ä¸ªå€¼åˆ†é…ç»™è¯¥å˜é‡ã€‚å…³é”®å­—awaitä½¿JSå¼•æ“åœ¨ç»™å®šçš„è¡Œä¸Šæš‚åœä»£ç æ‰§è¡Œï¼Œä»è€Œå…è®¸å¦ä¸€ä¸ªä»£ç æ‰§è¡Œï¼Œç›´åˆ°å¼‚æ­¥å‡½æ•°è¿”å›ç»“æœä¸ºæ­¢ã€‚ä¸€æ—¦æ‰§è¡Œï¼Œä»£ç å°†ä»ä¸‹ä¸€è¡Œç»§ç»­æ‰§è¡Œã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'coffee.jpg'</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç»™å®šå€¼å¯ç”¨æ—¶ï¼Œå°†fetchï¼ˆï¼‰æ‰¿è¯ºè¿”å›çš„å€¼åˆ†é…ç»™å“åº”å˜é‡ï¼Œå¹¶ä¸”è§£æå™¨å°†åœ¨è¯¥è¡Œåœæ­¢ï¼Œç›´åˆ°æ‰¿è¯ºå®Œæˆä¸ºæ­¢ã€‚</font><font style="vertical-align: inherit;">ä¸€æ—¦è¯¥å€¼å˜ä¸ºå¯ç”¨ï¼Œè§£æå™¨ä¾¿ç§»è‡³åˆ›å»ºBlobçš„ä¸‹ä¸€è¡Œä»£ç ã€‚</font><font style="vertical-align: inherit;">è¯¥è¡Œè¿˜è°ƒç”¨äº†åŸºäºPromiseçš„å¼‚æ­¥æ–¹æ³•ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨awaitã€‚</font><font style="vertical-align: inherit;">å½“æ“ä½œç»“æœè¿”å›æ—¶ï¼Œæˆ‘ä»¬ä»myFetchï¼ˆï¼‰å‡½æ•°è¿”å›å®ƒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ„å‘³ç€ï¼Œå½“æˆ‘ä»¬è°ƒç”¨myFetchï¼ˆï¼‰å‡½æ•°æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªpromiseï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ .thenï¼ˆï¼‰ï¼Œä»¥åœ¨å…¶ä¸­å¤„ç†å±å¹•ä¸Šå›¾åƒçš„æ˜¾ç¤ºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯èƒ½ä¼šè®¤ä¸ºâ€œå¤ªå¥½äº†ï¼â€è€Œä¸”æ‚¨æ˜¯å¯¹çš„-è¾ƒå°‘ç”¨äºåŒ…è£…ä»£ç çš„.thenï¼ˆï¼‰å—ï¼Œå®ƒä»¬çœ‹èµ·æ¥éƒ½åƒæ˜¯åŒæ­¥ä»£ç ï¼Œå› æ­¤å¾ˆç›´è§‚ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ·»åŠ é”™è¯¯å¤„ç†</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœè¦æ·»åŠ é”™è¯¯å¤„ç†ï¼Œåˆ™æœ‰å‡ ç§é€‰æ‹©ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥å°†åŒæ­¥try ... catchç»“æ„ä¸async / awaitä¸€èµ·ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æ­¤ç¤ºä¾‹æ˜¯ä¸Šé¢ä»£ç çš„æ‰©å±•ç‰ˆæœ¬ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFetch</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">try</span>{
        <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'coffee.jpg'</span>)
        <span class="hljs-keyword">let</span> myBlob = <span class="hljs-keyword">await</span> response.blob()<font></font>
<font></font>
        <span class="hljs-keyword">let</span> objectURL = URL.createObjectURL(myBlob)
        <span class="hljs-keyword">let</span> image = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>)<font></font>
        image.src = objectURL<font></font>
        <span class="hljs-built_in">document</span>.body.appendChild(image)<font></font>
    } <span class="hljs-keyword">catch</span>(e){
        <span class="hljs-built_in">console</span>.log(e)<font></font>
    }<font></font>
}<font></font>
<font></font>
myFetch()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
catchï¼ˆï¼‰{}å—æ¥å—ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸ºâ€œ eâ€ï¼›</font><font style="vertical-align: inherit;">ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†å…¶è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œè¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ¥æ”¶åˆ°æœ‰å…³ä»£ç ä¸­é”™è¯¯å‘ç”Ÿä½ç½®çš„æ¶ˆæ¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœè¦ä½¿ç”¨ä¸Šé¢æ˜¾ç¤ºçš„ä»£ç çš„ç¬¬äºŒç‰ˆï¼Œåˆ™åº”ç»§ç»­ä½¿ç”¨æ··åˆæ–¹æ³•ï¼Œå¹¶åœ¨.thenï¼ˆï¼‰è°ƒç”¨çš„æœ«å°¾æ·»åŠ .catchï¼ˆï¼‰å—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFetch</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fecth(<span class="hljs-string">'coffee.jpg'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.blob()<font></font>
}<font></font>
<font></font>
myFetch().then(<span class="hljs-function">(<span class="hljs-params">blob</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> objectURL = URL.createObjectURL
    <span class="hljs-keyword">let</span> image = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>)<font></font>
    image.src = objectURL<font></font>
    <span class="hljs-built_in">document</span>.body.appendChild(image)<font></font>
}).catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(e))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸º.catchï¼ˆï¼‰å—å°†æ•è·å¼‚æ­¥å‡½æ•°å’Œpromiseé“¾ä¸­éƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">å¦‚æœåœ¨æ­¤å¤„ä½¿ç”¨try / catchå—ï¼Œå°†æ— æ³•å¤„ç†è°ƒç”¨myFetchï¼ˆï¼‰å‡½æ•°æ—¶å‘ç”Ÿçš„é”™è¯¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥åœ¨GitHubä¸Šæ‰¾åˆ°ä¸¤ä¸ªç¤ºä¾‹ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simple-fetch-async-await-try-catch.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆè¯·å‚é˜…</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simple-fetch-async-await-promise-catch.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆè¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­‰å¾…Promise.allï¼ˆï¼‰</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼‚æ­¥/ç­‰å¾…åŸºäºæ‰¿è¯ºï¼Œå› æ­¤æ‚¨å¯ä»¥å……åˆ†åˆ©ç”¨åè€…ã€‚</font><font style="vertical-align: inherit;">è¿™äº›ç‰¹åˆ«åŒ…æ‹¬Promise.allï¼ˆï¼‰-æ‚¨å¯ä»¥è½»æ¾åœ°å‘Promise.allï¼ˆï¼‰æ·»åŠ awaitä»¥ç±»ä¼¼äºåŒæ­¥ä»£ç çš„æ–¹å¼å†™å…¥æ‰€æœ‰è¿”å›å€¼ã€‚</font><font style="vertical-align: inherit;">åŒæ ·ï¼Œä»¥ä¸Š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ç¯‡æ–‡ç« ä¸ºä¾‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¿æŒæ‰“å¼€çš„æ ‡ç­¾é¡µä¸ä¸‹é¢æ˜¾ç¤ºçš„ä»£ç è¿›è¡Œæ¯”è¾ƒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨async / awaitï¼ˆè¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®æ—¶æ¼”ç¤º</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchAndDecode</span>(<span class="hljs-params">url, type</span>)</span>{
    <span class="hljs-keyword">let</span> repsonse = <span class="hljs-keyword">await</span> fetch(url)<font></font>
<font></font>
    <span class="hljs-keyword">let</span> content<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'blob'</span>){<font></font>
        content = <span class="hljs-keyword">await</span> response.blob()<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'text'</span>){<font></font>
        content = <span class="hljs-keyword">await</span> response.text()<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> content<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayContent</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> coffee = fetchAndDecode(<span class="hljs-string">'coffee.jpg'</span>, <span class="hljs-string">'blob'</span>)
    <span class="hljs-keyword">let</span> tea = fetchAndDecode(<span class="hljs-string">'tea.jpg'</span>, <span class="hljs-string">'blob'</span>)
    <span class="hljs-keyword">let</span> description = fetchAndDecode(<span class="hljs-string">'description.txt'</span>, <span class="hljs-string">'text'</span>)<font></font>
<font></font>
    <span class="hljs-keyword">let</span> values = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([coffee, tea, description])<font></font>
<font></font>
    <span class="hljs-keyword">let</span> objectURL1 = URL.createObjectURL(values[<span class="hljs-number">0</span>])
    <span class="hljs-keyword">let</span> objectURL2 = URL.createObjectURL(values[<span class="hljs-number">1</span>])
    <span class="hljs-keyword">let</span> descText = values[<span class="hljs-number">2</span>]<font></font>
<font></font>
    <span class="hljs-keyword">let</span> image1 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>)
    <span class="hljs-keyword">let</span> image2 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'img'</span>)<font></font>
    image1.src = objectURL1<font></font>
    image2.src = objectURL2<font></font>
    <span class="hljs-built_in">document</span>.body.appendChild(image1)
    <span class="hljs-built_in">document</span>.body.appendChild(image2)<font></font>
<font></font>
    <span class="hljs-keyword">let</span> para = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'p'</span>)<font></font>
    para.textContent = descText<font></font>
    <span class="hljs-built_in">document</span>.body.appendChild(para)<font></font>
}<font></font>
<font></font>
displayContent()<font></font>
.catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(e))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¾ˆå®¹æ˜“é€šè¿‡ä¸€äº›æ›´æ”¹ä½¿fetchAndDecodeï¼ˆï¼‰å‡½æ•°å¼‚æ­¥ã€‚</font><font style="vertical-align: inherit;">æ³¨æ„è¿™ä¸€è¡Œï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> values = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([coffee, tea, description])
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨awaitï¼Œæˆ‘ä»¬ä»¥ç±»ä¼¼äºåŒæ­¥ä»£ç çš„æ–¹å¼è·å¾—å˜é‡å€¼ä¸­ä¸‰ä¸ªpromiseçš„ç»“æœã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¿…é¡»å°†æ•´ä¸ªå‡½æ•°åŒ…è£…åœ¨ä¸€ä¸ªæ–°çš„å¼‚æ­¥å‡½æ•°displayContentï¼ˆï¼‰ä¸­ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬æ²¡æœ‰å®ç°å¼ºå¤§çš„ä»£ç ç¼©å‡ï¼Œä½†æ˜¯èƒ½å¤Ÿä».thenï¼ˆï¼‰å—ä¸­æå–å¤§å¤šæ•°ä»£ç ï¼Œè¿™æä¾›äº†æœ‰ç”¨çš„ç®€åŒ–ï¼Œå¹¶ä½¿ä»£ç æ›´å…·å¯è¯»æ€§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†å¤„ç†é”™è¯¯ï¼Œæˆ‘ä»¬åœ¨å¯¹displayContentï¼ˆï¼‰çš„è°ƒç”¨ä¸­æ·»åŠ äº†.catchï¼ˆï¼‰å—ï¼›</font><font style="vertical-align: inherit;">å®ƒå¤„ç†ä¸¤ä¸ªå‡½æ•°çš„é”™è¯¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·è®°ä½ï¼šæ‚¨è¿˜å¯ä»¥ä½¿ç”¨.finallyï¼ˆï¼‰å—è·å–æœ‰å…³è¯¥æ“ä½œçš„æŠ¥å‘Š-æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®æ—¶æ¼”ç¤ºä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çœ‹åˆ°å®ƒçš„è¿è¡Œæƒ…å†µ</font><font style="vertical-align: inherit;">ï¼ˆå¦è¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚æ­¥/ç­‰å¾…åŠ£åŠ¿</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼‚æ­¥/ç­‰å¾…æœ‰ä¸¤ä¸ªç¼ºé™·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼‚æ­¥/ç­‰å¾…ä½¿ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥çš„ï¼Œä»æŸç§æ„ä¹‰ä¸Šè®²ï¼Œä½¿å…¶è¡Œä¸ºæ›´åŠ åŒæ­¥ã€‚ä¸åŒæ­¥æ“ä½œä¸­å‘ç”Ÿçš„æƒ…å†µä¸€æ ·ï¼Œå…³é”®å­—awaité˜»æ­¢å…¶åçš„ä»£ç æ‰§è¡Œï¼Œç›´åˆ°æ‰¿è¯ºå®Œæˆä¸ºæ­¢ã€‚è¿™å…è®¸æ‚¨æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä½†æ˜¯æ‚¨è‡ªå·±çš„ä»£ç å·²é”å®šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ„å‘³ç€æ‚¨çš„ä»£ç å¯èƒ½ä¼šå› å¤§é‡çš„æœªå†³æ‰¿è¯ºè€Œè¢«æ”¾æ…¢é€Ÿåº¦ã€‚æ¯æ¬¡ç­‰å¾…éƒ½å°†ç­‰å¾…ä¸Šä¸€ä¸ªçš„å®Œæˆï¼Œè€Œæˆ‘ä»¬å¸Œæœ›åŒæ—¶å®ç°æ‰¿è¯ºï¼Œå°±å¥½åƒæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨å¼‚æ­¥/ç­‰å¾…ä¸€æ ·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰ä¸€ç§è®¾è®¡æ¨¡å¼å¯ä»¥ç¼“è§£æ­¤é—®é¢˜-é€šè¿‡å°†Promiseå¯¹è±¡å­˜å‚¨åœ¨å˜é‡ä¸­ç„¶åç­‰å¾…å®ƒä»¬æ¥ç¦ç”¨æ‰€æœ‰promiseè¿‡ç¨‹ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯å¦‚ä½•å®ç°çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬æœ‰ä¸¤ä¸ªç¤ºä¾‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä¾›ä½¿ç”¨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">slow-async-await.html</font></a><font style="vertical-align: inherit;">ï¼ˆè¯·å‚é˜…</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fast-async-await.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆè¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font><font style="vertical-align: inherit;">è¿™ä¸¤ä¸ªç¤ºä¾‹å‡ä»¥promiseå‡½æ•°å¼€å¤´ï¼Œè¯¥å‡½æ•°ä½¿ç”¨setTimeoutï¼ˆï¼‰æ¨¡ä»¿å¼‚æ­¥æ“ä½œï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeoutPromise</span>(<span class="hljs-params">interval</span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {<font></font>
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<font></font>
            resolve(<span class="hljs-string">'done'</span>)<font></font>
        }, interval)<font></font>
    })<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åæ˜¯å¼‚æ­¥å‡½æ•°timeTestï¼ˆï¼‰ï¼Œè¯¥å‡½æ•°å¸Œæœ›å¯¹timeoutPromiseï¼ˆï¼‰è¿›è¡Œä¸‰ä¸ªè°ƒç”¨ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeTest</span>(<span class="hljs-params"></span>)</span>{<font></font>
    ...<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹timeTestï¼ˆï¼‰çš„ä¸‰ä¸ªè°ƒç”¨ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä»¥è®°å½•å®Œæˆæ‰¿è¯ºçš„æ—¶é—´ç»“æŸï¼Œç„¶åè®°å½•å®Œæˆæ•´ä¸ªæ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> startTime = <span class="hljs-built_in">Date</span>.now()<font></font>
timeTest().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> finishTime = <span class="hljs-built_in">Date</span>.now()
    <span class="hljs-keyword">let</span> timeTaken = finishTime - startTime<font></font>
    alert(<span class="hljs-string">'Time taken in milliseconds: '</span> + timeTaken)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ¯ç§æƒ…å†µä¸‹ï¼ŒtimeTestï¼ˆï¼‰å‡½æ•°éƒ½ä¸åŒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨slow-async-await.htmlä¸­ï¼ŒtimeTestï¼ˆï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeTest</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">await</span> timeoutPromise(<span class="hljs-number">3000</span>)
    <span class="hljs-keyword">await</span> timeoutPromise(<span class="hljs-number">3000</span>)
    <span class="hljs-keyword">await</span> timeoutPromise(<span class="hljs-number">3000</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªå¸Œæœ›å¯¹timeoutPromiseè¿›è¡Œä¸‰ä¸ªè°ƒç”¨ï¼Œæ¯æ¬¡è®¾ç½®3ç§’çš„å»¶è¿Ÿã€‚</font><font style="vertical-align: inherit;">æ¯ä¸ªè°ƒç”¨éƒ½ç­‰å¾…ä¸Šä¸€ä¸ªè°ƒç”¨çš„å®Œæˆ-å¦‚æœè¿è¡Œç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œåˆ™å°†åœ¨9ç§’é’Ÿå·¦å³çœ‹åˆ°ä¸€ä¸ªæ¨¡æ€çª—å£ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨fast-async-await.htmlä¸­ï¼ŒtimeTestï¼ˆï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeTest</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> timeoutPromise1 = timeoutPromise(<span class="hljs-number">3000</span>)
    <span class="hljs-keyword">const</span> timeoutPromise2 = timeoutPromise(<span class="hljs-number">3000</span>)
    <span class="hljs-keyword">const</span> timeoutPromise3 = timeoutPromise(<span class="hljs-number">3000</span>)<font></font>
<font></font>
    <span class="hljs-keyword">await</span> timeoutPromise1
    <span class="hljs-keyword">await</span> timeoutPromise2
    <span class="hljs-keyword">await</span> timeoutPromise3<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸‰ä¸ªPromiseå¯¹è±¡ä¿å­˜åœ¨å˜é‡ä¸­ï¼Œè¿™å°†å¯¼è‡´ä¸å…¶å…³è”çš„è¿›ç¨‹åŒæ—¶è¿è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œæˆ‘ä»¬æœŸæœ›ä»–ä»¬çš„ç»“æœ-å½“è¯ºè¨€åŒæ—¶å¼€å§‹å±¥è¡Œæ—¶ï¼Œè¯ºè¨€ä¹Ÿå°†åŒæ—¶å®Œæˆï¼›</font><font style="vertical-align: inherit;">å½“æ‚¨è¿è¡Œç¬¬äºŒä¸ªç¤ºä¾‹æ—¶ï¼Œæ‚¨å°†åœ¨3ç§’é’Ÿå·¦å³çœ‹åˆ°ä¸€ä¸ªæ¨¡æ€çª—å£ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨åº”è¯¥ä»”ç»†æµ‹è¯•ä»£ç ï¼Œå¹¶åœ¨é™ä½æ€§èƒ½çš„åŒæ—¶ç‰¢è®°è¿™ä¸€ç‚¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦ä¸€ä¸ªä¸ä¾¿ä¹‹å¤„æ˜¯éœ€è¦å°†é¢„æœŸçš„æ‰¿è¯ºåŒ…è£…åœ¨å¼‚æ­¥å‡½æ•°ä¸­ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹ç±»ä½¿ç”¨å¼‚æ­¥/ç­‰å¾…</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ€»ä¹‹ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°æ‚¨ç”šè‡³å¯ä»¥åœ¨ç”¨äºåˆ›å»ºç±»çš„æ–¹æ³•ä¸­æ·»åŠ å¼‚æ­¥ï¼Œä»¥ä¾¿å®ƒä»¬è¿”å›promiseå¹¶åœ¨å…¶ä¸­ç­‰å¾…promiseã€‚</font><font style="vertical-align: inherit;">ä»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰å…³é¢å‘å¯¹è±¡JS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">æ–‡ç« ä¸­</font></a><font style="vertical-align: inherit;">è·å–ä»£ç </font><font style="vertical-align: inherit;">ï¼Œå¹¶å°†å…¶ä¸ä½¿ç”¨asyncä¿®æ”¹çš„ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>{
    <span class="hljs-keyword">constructor</span>(first, last, age, gender, interests){
        <span class="hljs-keyword">this</span>.name = {<font></font>
            first,<font></font>
            last<font></font>
        }<font></font>
        <span class="hljs-keyword">this</span>.age = age
        <span class="hljs-keyword">this</span>.gender = gender
        <span class="hljs-keyword">this</span>.interests = interests<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">async</span> greeting(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">`Hi! I'm <span class="hljs-subst">${<span class="hljs-keyword">this</span>.name.first}</span>`</span>)<font></font>
    }<font></font>
<font></font>
    farewell(){<font></font>
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name.first}</span> has left the building. Bye for now!`</span>)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">let</span> han = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">'Han'</span>, <span class="hljs-string">'Solo'</span>, <span class="hljs-number">25</span>, <span class="hljs-string">'male'</span>, [<span class="hljs-string">'Smuggling'</span>])
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç±»æ–¹æ³•å¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">han.greeting().then(<span class="hljs-built_in">console</span>.log)
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµè§ˆå™¨æ”¯æŒ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨å¼‚æ­¥/ç­‰å¾…çš„éšœç¢ä¹‹ä¸€æ˜¯ç¼ºä¹å¯¹è¾ƒæ—§æµè§ˆå™¨çš„æ”¯æŒã€‚</font><font style="vertical-align: inherit;">å‡ ä¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½å¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">Internet Explorerå’ŒOpera Miniä¸­å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœè¦ä½¿ç”¨async / awaitï¼Œä½†éœ€è¦è¾ƒæ—§æµè§ˆå™¨çš„æ”¯æŒï¼Œåˆ™å¯ä»¥ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BabelJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº“</font><font style="vertical-align: inherit;">-å®ƒå…è®¸æ‚¨ä½¿ç”¨æœ€æ–°çš„JSï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºé€‚åˆç‰¹å®šæµè§ˆå™¨çš„JSã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼‚æ­¥/ç­‰å¾…å…è®¸æ‚¨ç¼–å†™æ˜“äºé˜…è¯»å’Œç»´æŠ¤çš„å¼‚æ­¥ä»£ç ã€‚</font><font style="vertical-align: inherit;">å°½ç®¡ä¸å…¶ä»–å¼‚æ­¥ä»£ç ç¼–å†™æ–¹æ³•ç›¸æ¯”ï¼Œå¯¹async / awaitçš„æ”¯æŒæ›´å·®ï¼Œä½†æ˜¯ç»å¯¹å€¼å¾—æ¢ç´¢ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¼–ç æ„‰å¿«ï¼</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490998/index.html">SIBURä¸­çš„ç¡¬ä»¶æµ‹è¯•</a></li>
<li><a href="../zh-CN491000/index.html">åœ¨æ²¡æœ‰JavaScriptçš„æƒ…å†µä¸‹ï¼ˆå‡ ä¹ï¼‰å¯¹Select-Optionè¿›è¡Œæ ·å¼è®¾ç½®</a></li>
<li><a href="../zh-CN491006/index.html">Intel NUCé€šè¿‡Unity3D</a></li>
<li><a href="../zh-CN491008/index.html">å¥½è¢«é—å¿˜çš„è€</a></li>
<li><a href="../zh-CN491010/index.html">æœºå™¨å­¦ä¹ æ–‡ç« ç²¾é€‰ï¼š2020å¹´2æœˆçš„æ¡ˆä¾‹ï¼ŒæŒ‡å—å’Œç ”ç©¶</a></li>
<li><a href="../zh-CN491016/index.html">ç¬¬32æœŸï¼šITåŸ¹è®­-é¢†å…ˆå…¬å¸çš„å½“å‰é—®é¢˜å’ŒæŒ‘æˆ˜</a></li>
<li><a href="../zh-CN491018/index.html">åœ¨Nuxt.jsä¸Šåˆ›å»ºåœ¨çº¿å•†åº—2æ¼”ç»ƒç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN491028/index.html">è‡ç‹</a></li>
<li><a href="../zh-CN491030/index.html">åœ¨Debianä¸Šéƒ¨ç½²Mediawikiï¼ˆéå¸¸ç®€å•ï¼‰</a></li>
<li><a href="../zh-CN491032/index.html">â€œ RTFMï¼Œä¼™è®¡ï¼â€ï¼Œæˆ–è€…å…è´¹çš„å¥¶é…ªèŠ±äº†æˆ‘5ç¾å…ƒã€‚æˆ–è€…å¯èƒ½æ˜¯$ 80 +</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>