<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äç‚öñÔ∏è üêó ü§≥üèª Um guia modesto para esquemas de banco de dados üßô üë®üèø‚Äçüéì ü§¶üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geometria das flores por Mookiezoolook 
 
 Para aplicativos que ser√£o escalados de acordo com o tr√°fego e a complexidade, √© extremamente importante pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Um guia modesto para esquemas de banco de dados</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/501598/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/al/m2/zoalm23rpnu233blf2nybyz6tk0.jpeg"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geometria das flores por Mookiezoolook</font></font></i></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para aplicativos que ser√£o escalados de acordo com o tr√°fego e a complexidade, √© extremamente importante projetar inicialmente um esquema de banco de dados competente. Se voc√™ fizer uma m√° escolha, ter√° que se esfor√ßar muito para que esse modelo ruim n√£o se espalhe para servi√ßos e controladores de back-end e, finalmente, para o front-end.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas como avaliar qual circuito √© melhor? E o que significa "melhor" quando falamos sobre arquitetura de banco de dados? A equipe do</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> convida voc√™ a</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seguir as recomenda√ß√µes de Mike Alcha</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , consultor de desenvolvimento de software. Parece-nos que ele resumiu sucintamente alguns princ√≠pios da arquitetura competente.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/ed/6j/tged6jbyakg4f0no_up6r9c-9aw.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diretor: </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acho que devemos construir um banco de dados SQL </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvedor (ele entende o que est√° falando ou apenas viu algum tipo de an√∫ncio em uma revista de neg√≥cios?): </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"De </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que cor voc√™ deseja o banco de dados? </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diretor: </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez o lil√°s tenha mais mem√≥ria </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">. </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äù</font></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algumas dicas b√°sicas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, √© importante lutar </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por duas coisas principais</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao dividir informa√ß√µes em tabelas, todas as informa√ß√µes s√£o armazenadas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A redund√¢ncia de armazenamento √© m√≠nima.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quanto ao segundo ponto: queremos reduzir a redund√¢ncia apenas por causa de um problema com o tamanho do armazenamento? </font><font style="vertical-align: inherit;">N√£o, fazemos isso principalmente porque a presen√ßa de dados redundantes gera </font></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">problemas de inconsist√™ncia</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se voc√™ n√£o atualizar todos os campos que representam as mesmas informa√ß√µes durante a atualiza√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√£o algumas diretrizes </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para se aproximar de boa arquitetura</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use pelo menos a terceira forma normal (na qual cada atributo que n√£o seja a chave "deve fornecer informa√ß√µes sobre a chave, a chave completa e nada al√©m da chave", de acordo com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o texto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Bill Kent).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie a √∫ltima linha de defesa na forma de restri√ß√µes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca armazene endere√ßos inteiros em um campo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca armazene o nome e o sobrenome em um campo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina conven√ß√µes para nomes de tabelas e campos e atenha-se a elas.</font></font></li>
</ol><br>
<i><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/lx/pr/qulxprdoqnbq5twc8dgw47qewry.jpeg"></div></i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Em que voc√™ est√° trabalhando? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otimizando esta consulta SQL." </font><font style="vertical-align: inherit;">Ele fica mais lento e os usu√°rios come√ßam a reclamar. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E linguagem obscena nos coment√°rios √© </font></font></i><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">necess√°ria</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para otimiza√ß√£o? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ visse o </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">c√≥digo </font></i></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , n√£o perguntaria. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos considerar essas recomenda√ß√µes em mais detalhes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Use pelo menos uma terceira forma normal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A arquitetura do banco de dados pode ser dividida nas seguintes categorias:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira forma normal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A segunda forma normal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terceira forma normal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A forma normal de Boyce-Codd.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas categorias representam uma classifica√ß√£o por qualidade. </font><font style="vertical-align: inherit;">Analisaremos brevemente todas as categorias e veremos por que √© necess√°rio pelo menos um terceiro formul√°rio normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeira forma normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a primeira forma normal, cada valor de cada coluna de cada tabela no banco de dados deve ser at√¥mico. </font><font style="vertical-align: inherit;">O que significa at√¥mico? </font><font style="vertical-align: inherit;">Em resumo, o valor at√¥mico √© uma "coisa √∫nica". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, temos uma tabela como esta:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeiro nome</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√∫ltimo nome</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">era</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√°reas</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jhon</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cor√ßa</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Design do site", "Pesquisa de clientes"}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jane</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Planejamento estrat√©gico a longo prazo", "Recrutamento"}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smith</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Marketing"}</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, a coluna </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√°reas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√©m valores que n√£o s√£o at√¥micos. </font><font style="vertical-align: inherit;">Por exemplo, em uma linha de John Doe, o campo armazena duas entidades: design do site e pesquisa do cliente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, esta tabela n√£o est√° na primeira forma normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para traz√™-lo para este formul√°rio, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apenas um valor deve ser armazenado em cada campo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segunda forma normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na segunda forma normal, nenhuma coluna que n√£o fa√ßa parte da chave prim√°ria (ou que possa atuar como parte de outra chave prim√°ria) n√£o pode ser derivada da </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte menor da chave prim√°ria</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso significa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que voc√™ tenha uma arquitetura b√°sica (enfatizei os campos correspondentes √† chave prim√°ria nesta tabela):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID do Empregado</font></font></u></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horas</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nome do empregado</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do Projeto</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Design do site"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vinte</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Design do site"</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste projeto, o nome do funcion√°rio pode ser inferido diretamente de employeee_id, porque a id√©ia √© que o nome do funcion√°rio seja determinado exclusivamente pelo seu identificador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, o nome do projeto √© identificado exclusivamente pelo identificador project_id. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, temos duas colunas que podem ser deduzidas da parte da chave prim√°ria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada um desses exemplos seria suficiente para eliminar essa tabela da segunda forma normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra conclus√£o √© que, se a tabela estava na primeira forma normal e todas as chaves prim√°rias s√£o colunas √∫nicas, a tabela j√° est√° na segunda forma normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terceira forma normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que a tabela corresponda √† terceira forma normal, ela deve estar na segunda forma normal, embora n√£o deva haver atributos (colunas) nela, exceto a principal, que depende temporariamente da chave prim√°ria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso significa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Digamos que voc√™ tenha a seguinte arquitetura (que est√° longe do ideal):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nome do empregado</font></font></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID do Empregado</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">era</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">department_number</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do departamento</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Marketing"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Operacional"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Marketing"</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta tabela, o n√∫mero do departamento pode ser inferido a partir de employee_id e o nome do departamento pode ser inferido a partir do n√∫mero do departamento. Portanto, department_name depende transitivamente de employee_id! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se houver uma depend√™ncia transitiva: employee_id ‚Üí department_number ‚Üí department_name, essa tabela n√£o est√° na terceira forma normal. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que problemas surgem por causa disso</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o nome do departamento puder ser derivado de seu n√∫mero, o armazenamento desse campo para cada funcion√°rio introduzir√° redund√¢ncia excessiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que o departamento de marketing mude seu nome para "Marketing e vendas". Para manter a consist√™ncia, voc√™ precisar√° atualizar a c√©lula em cada linha da tabela para cada funcion√°rio neste departamento! Na terceira forma normal, isso n√£o teria acontecido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, eis o que acontece se Mary decide sair da empresa: precisamos excluir sua linha da tabela, mas se ela era a √∫nica funcion√°ria do departamento de opera√ß√µes, o departamento tamb√©m precisar√° ser exclu√≠do. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos esses problemas podem ser completamente evitados em uma terceira forma normal.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c45/93e/423/c4593e423e573702d0039506bdbe562f.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fa√ßanhas da mam√£e</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O nome da filha dela √© Help! </font><font style="vertical-align: inherit;">Eu sou for√ßado a passaportes falsos</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Crie a √∫ltima linha de defesa na forma de restri√ß√µes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O banco de dados com o qual voc√™ est√° trabalhando √© mais do que apenas um grupo de tabelas. Certas funcionalidades est√£o embutidas nele. Muitos desses recursos ajudam a garantir a qualidade e a precis√£o dos dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As restri√ß√µes definem as regras, quais valores podem ser inseridos nos campos do banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao definir relacionamentos em um banco de dados, certifique-se de definir restri√ß√µes de chave estrangeira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certifique-se de especificar o que deve acontecer ao excluir e atualizar uma linha associada a outras linhas em outras tabelas (regras ON DELETE e ON UPDATE). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certifique-se de usar NOT NULL para todos os campos que nunca devem ser anulados. Pode fazer sentido definir uma verifica√ß√£o no back-end, mas lembre-se de que as falhas sempre acontecem; portanto, adicionar esse tipo de restri√ß√£o n√£o ser√° prejudicial.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Defina os limites de verifica√ß√£o CHECK para garantir que os valores da tabela estejam na faixa aceit√°vel, por exemplo, o pre√ßo de um produto sempre tenha um valor positivo. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um fato interessante</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : em abril de 2020, essa restri√ß√£o de software </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impediu a negocia√ß√£o no MICEX de Moscou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> porque o pre√ßo dos futuros do petr√≥leo WTI caiu abaixo de zero. </font><font style="vertical-align: inherit;">Ao contr√°rio da bolsa de valores de Moscou, a Bolsa Mercantil de Nova York NYMEX </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atualizou o software uma semana antes do incidente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para que pudesse realizar com √™xito transa√ß√µes a um pre√ßo negativo, isto √©, com uma sobretaxa ao comprador do vendedor - aprox. </font><font style="vertical-align: inherit;">trans. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as limita√ß√µes do PostgreSQL podem ser encontradas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Nunca armazene endere√ßos inteiros em um campo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o seu aplicativo ou site tiver um formul√°rio com um campo em que o usu√°rio digitar seu endere√ßo, ele ter√° um cheiro ruim. √â muito prov√°vel que, nesse caso, voc√™ tamb√©m tenha um campo no banco de dados para armazenar o endere√ßo como uma sequ√™ncia simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o que fazer se voc√™ precisar combinar compras de clientes por cidade para ver qual cidade √© o produto mais popular? consegues faz√™-lo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vai ser muito dif√≠cil! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o endere√ßo completo √© armazenado como uma sequ√™ncia no campo do banco de dados, voc√™ primeiro precisa descobrir quanto dessa sequ√™ncia √© a cidade! E essa √© uma tarefa quase imposs√≠vel, considerando todos os formatos de endere√ßo poss√≠veis nesse campo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, n√£o se esque√ßa de dividir o campo universal "Endere√ßo" em campos espec√≠ficos: rua, n√∫mero da casa, cidade, regi√£o, CEP e assim por diante.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro problema de endere√ßo - campos an√¥nimos</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° uma ilustra√ß√£o do livro de Michaels Blach, A Bala de Cobre para Melhorar a Qualidade do Software:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b98/165/d9e/b98165d9e6cd4b9e43350285a75609ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que problemas em potencial s√£o vis√≠veis aqui? </font><font style="vertical-align: inherit;">Voc√™ consegue distinguir facilmente a cidade de Chicago das ruas de Chicago? </font><font style="vertical-align: inherit;">Provavelmente n√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, lembre-se de sempre fornecer nomes de colunas claros para cada unidade de informa√ß√£o.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0e/te/dp/0etedpf1hxfr2sci5m1jliwd4zi.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como escrever um curr√≠culo</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ tem experi√™ncia em SQL? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o (n√£o) </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o escreva: especialista NoSQL.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Nunca armazene o nome e o sobrenome em um campo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semelhante √† situa√ß√£o com endere√ßos: o n√∫mero de varia√ß√µes do nome e do sobrenome √© muito grande para distinguir claramente entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, voc√™ pode separar o nome do sobrenome, se houver um espa√ßo entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, "Mike Alche" ‚Üí o nome "Mike" e o sobrenome "Alche". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas e se o usu√°rio digitar um nome do meio? Ou ele tem um sobrenome duplo? Mas e se houver um nome do meio e um sobrenome duplo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como determinar onde est√° o nome e onde est√° o sobrenome para dividir a string? Erros s√£o inevit√°veis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma maneira de evitar muitos problemas √© criar campos separados (em formul√°rios) para os nomes de usu√°rio first_name e last_name. Dessa forma, voc√™ permite que os usu√°rios compartilhem seus pr√≥prios nomes e pode armazenar dados de maneira consistente. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: N√£o estou dizendo que espa√ßos s√£o proibidos nos campos do banco de dados. </font><font style="vertical-align: inherit;">Por exemplo, para nomes como Juan Martin Del Potro, a primeira parte de Juan Martin est√° no campo first_name e Del Potro est√° no campo last_name. </font><font style="vertical-align: inherit;">Claro, isso </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© </font><strong><font style="vertical-align: inherit;">perfeito</font></strong><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Opcionalmente, voc√™ pode ter as colunas middle_name e second_last_name. </font><font style="vertical-align: inherit;">Veja com mais detalhes as poss√≠veis varia√ß√µes de nomes e sobrenomes na lista ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceitos err√¥neos de programadores sobre nomes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù e no artigo ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceitos err√¥neos de programadores sobre nomes - com exemplos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù. </font><font style="vertical-align: inherit;">Voc√™ precisa concordar com algum tipo de compromisso entre precis√£o e praticidade.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Defina conven√ß√µes para nomes de tabelas e campos e atenha-se a eles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â muito chato trabalhar com dados que se parecem com user.firstName, user.lst_name, user.birthDate e assim por diante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu recomendaria que voc√™ estabelecesse regras de nomea√ß√£o de sublinhado, porque nem todos os mecanismos SQL lidam com letras mai√∫sculas da mesma maneira, e colocar tudo entre aspas √© muito tedioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escolha o mesmo que chamar as tabelas - no plural ou no singular (por exemplo, usu√°rios no plural ou usu√°rio no singular). </font><font style="vertical-align: inherit;">Gosto mais do singular, mas todas as estruturas de back-end parecem plurais por padr√£o. </font><font style="vertical-align: inherit;">Voc√™ tem que seguir o padr√£o e usar o plural. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que mais se pode ler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual banco de dados escolher para o projeto, para que voc√™ n√£o precise escolher novamente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   IIoT-:  Mail.ru Cloud Solutions       </a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">      </a>.</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501582/index.html">Como os pre√ßos din√¢micos na Amazon e no AliExpress levam a US $ 24 milh√µes em mercadorias</a></li>
<li><a href="../pt501588/index.html">√ìtimos testes de processadores de v√°rias arquiteturas</a></li>
<li><a href="../pt501590/index.html">Artigos em ingl√™s: Guerra impiedosa de regras e exce√ß√µes</a></li>
<li><a href="../pt501594/index.html">Fuja do zool√≥gico ou como fiz jogos casuais no iOS</a></li>
<li><a href="../pt501596/index.html">Como facilitar a vida ao usar o Git (assim como uma sele√ß√£o de materiais para imers√£o profunda)</a></li>
<li><a href="../pt501600/index.html">Consola de jogos stm32</a></li>
<li><a href="../pt501604/index.html">Tradu√ß√£o do livro de Andrew Un, Passion for Machine Learning. Cap√≠tulos 51 e 52</a></li>
<li><a href="../pt501610/index.html">Barra de rolagem personalizada em Angular</a></li>
<li><a href="../pt501612/index.html">Qual placa gr√°fica escolher para o seu computador em 2020</a></li>
<li><a href="../pt501614/index.html">Antipadr√µes do PostgreSQL: qual a profundidade da toca do coelho? passar pela hierarquia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>