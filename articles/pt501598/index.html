<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍⚖️ 🐗 🤳🏻 Um guia modesto para esquemas de banco de dados 🧙 👨🏿‍🎓 🤦🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geometria das flores por Mookiezoolook 
 
 Para aplicativos que serão escalados de acordo com o tráfego e a complexidade, é extremamente importante pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Um guia modesto para esquemas de banco de dados</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/501598/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/al/m2/zoalm23rpnu233blf2nybyz6tk0.jpeg"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geometria das flores por Mookiezoolook</font></font></i></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para aplicativos que serão escalados de acordo com o tráfego e a complexidade, é extremamente importante projetar inicialmente um esquema de banco de dados competente. Se você fizer uma má escolha, terá que se esforçar muito para que esse modelo ruim não se espalhe para serviços e controladores de back-end e, finalmente, para o front-end.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas como avaliar qual circuito é melhor? E o que significa "melhor" quando falamos sobre arquitetura de banco de dados? A equipe do</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> convida você a</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seguir as recomendações de Mike Alcha</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , consultor de desenvolvimento de software. Parece-nos que ele resumiu sucintamente alguns princípios da arquitetura competente.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/ed/6j/tged6jbyakg4f0no_up6r9c-9aw.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diretor: </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acho que devemos construir um banco de dados SQL </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvedor (ele entende o que está falando ou apenas viu algum tipo de anúncio em uma revista de negócios?): </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"De </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que cor você deseja o banco de dados? </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diretor: </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez o lilás tenha mais memória </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">. </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”</font></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algumas dicas básicas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, é importante lutar </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por duas coisas principais</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao dividir informações em tabelas, todas as informações são armazenadas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A redundância de armazenamento é mínima.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quanto ao segundo ponto: queremos reduzir a redundância apenas por causa de um problema com o tamanho do armazenamento? </font><font style="vertical-align: inherit;">Não, fazemos isso principalmente porque a presença de dados redundantes gera </font></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">problemas de inconsistência</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se você não atualizar todos os campos que representam as mesmas informações durante a atualização. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estão algumas diretrizes </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para se aproximar de boa arquitetura</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use pelo menos a terceira forma normal (na qual cada atributo que não seja a chave "deve fornecer informações sobre a chave, a chave completa e nada além da chave", de acordo com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o texto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Bill Kent).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie a última linha de defesa na forma de restrições.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca armazene endereços inteiros em um campo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca armazene o nome e o sobrenome em um campo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina convenções para nomes de tabelas e campos e atenha-se a elas.</font></font></li>
</ol><br>
<i><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/lx/pr/qulxprdoqnbq5twc8dgw47qewry.jpeg"></div></i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Em que você está trabalhando? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otimizando esta consulta SQL." </font><font style="vertical-align: inherit;">Ele fica mais lento e os usuários começam a reclamar. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E linguagem obscena nos comentários é </font></font></i><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">necessária</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para otimização? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você visse o </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">código </font></i></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , não perguntaria. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos considerar essas recomendações em mais detalhes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Use pelo menos uma terceira forma normal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A arquitetura do banco de dados pode ser dividida nas seguintes categorias:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira forma normal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A segunda forma normal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terceira forma normal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A forma normal de Boyce-Codd.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas categorias representam uma classificação por qualidade. </font><font style="vertical-align: inherit;">Analisaremos brevemente todas as categorias e veremos por que é necessário pelo menos um terceiro formulário normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeira forma normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a primeira forma normal, cada valor de cada coluna de cada tabela no banco de dados deve ser atômico. </font><font style="vertical-align: inherit;">O que significa atômico? </font><font style="vertical-align: inherit;">Em resumo, o valor atômico é uma "coisa única". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, temos uma tabela como esta:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeiro nome</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">último nome</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">era</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">áreas</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jhon</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corça</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Design do site", "Pesquisa de clientes"}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jane</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Planejamento estratégico a longo prazo", "Recrutamento"}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smith</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Marketing"}</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, a coluna </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">áreas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contém valores que não são atômicos. </font><font style="vertical-align: inherit;">Por exemplo, em uma linha de John Doe, o campo armazena duas entidades: design do site e pesquisa do cliente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, esta tabela não está na primeira forma normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para trazê-lo para este formulário, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apenas um valor deve ser armazenado em cada campo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segunda forma normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na segunda forma normal, nenhuma coluna que não faça parte da chave primária (ou que possa atuar como parte de outra chave primária) não pode ser derivada da </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte menor da chave primária</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso significa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que você tenha uma arquitetura básica (enfatizei os campos correspondentes à chave primária nesta tabela):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID do Empregado</font></font></u></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horas</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nome do empregado</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do Projeto</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Design do site"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vinte</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Design do site"</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste projeto, o nome do funcionário pode ser inferido diretamente de employeee_id, porque a idéia é que o nome do funcionário seja determinado exclusivamente pelo seu identificador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, o nome do projeto é identificado exclusivamente pelo identificador project_id. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, temos duas colunas que podem ser deduzidas da parte da chave primária. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada um desses exemplos seria suficiente para eliminar essa tabela da segunda forma normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra conclusão é que, se a tabela estava na primeira forma normal e todas as chaves primárias são colunas únicas, a tabela já está na segunda forma normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terceira forma normal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que a tabela corresponda à terceira forma normal, ela deve estar na segunda forma normal, embora não deva haver atributos (colunas) nela, exceto a principal, que depende temporariamente da chave primária. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso significa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Digamos que você tenha a seguinte arquitetura (que está longe do ideal):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nome do empregado</font></font></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID do Empregado</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">era</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">department_number</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do departamento</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Marketing"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Operacional"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Marketing"</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta tabela, o número do departamento pode ser inferido a partir de employee_id e o nome do departamento pode ser inferido a partir do número do departamento. Portanto, department_name depende transitivamente de employee_id! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se houver uma dependência transitiva: employee_id → department_number → department_name, essa tabela não está na terceira forma normal. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que problemas surgem por causa disso</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o nome do departamento puder ser derivado de seu número, o armazenamento desse campo para cada funcionário introduzirá redundância excessiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que o departamento de marketing mude seu nome para "Marketing e vendas". Para manter a consistência, você precisará atualizar a célula em cada linha da tabela para cada funcionário neste departamento! Na terceira forma normal, isso não teria acontecido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além disso, eis o que acontece se Mary decide sair da empresa: precisamos excluir sua linha da tabela, mas se ela era a única funcionária do departamento de operações, o departamento também precisará ser excluído. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos esses problemas podem ser completamente evitados em uma terceira forma normal.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c45/93e/423/c4593e423e573702d0039506bdbe562f.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Façanhas da mamãe</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O nome da filha dela é Help! </font><font style="vertical-align: inherit;">Eu sou forçado a passaportes falsos</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Crie a última linha de defesa na forma de restrições</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O banco de dados com o qual você está trabalhando é mais do que apenas um grupo de tabelas. Certas funcionalidades estão embutidas nele. Muitos desses recursos ajudam a garantir a qualidade e a precisão dos dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As restrições definem as regras, quais valores podem ser inseridos nos campos do banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao definir relacionamentos em um banco de dados, certifique-se de definir restrições de chave estrangeira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certifique-se de especificar o que deve acontecer ao excluir e atualizar uma linha associada a outras linhas em outras tabelas (regras ON DELETE e ON UPDATE). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certifique-se de usar NOT NULL para todos os campos que nunca devem ser anulados. Pode fazer sentido definir uma verificação no back-end, mas lembre-se de que as falhas sempre acontecem; portanto, adicionar esse tipo de restrição não será prejudicial.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Defina os limites de verificação CHECK para garantir que os valores da tabela estejam na faixa aceitável, por exemplo, o preço de um produto sempre tenha um valor positivo. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um fato interessante</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : em abril de 2020, essa restrição de software </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impediu a negociação no MICEX de Moscou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> porque o preço dos futuros do petróleo WTI caiu abaixo de zero. </font><font style="vertical-align: inherit;">Ao contrário da bolsa de valores de Moscou, a Bolsa Mercantil de Nova York NYMEX </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atualizou o software uma semana antes do incidente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para que pudesse realizar com êxito transações a um preço negativo, isto é, com uma sobretaxa ao comprador do vendedor - aprox. </font><font style="vertical-align: inherit;">trans. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas as limitações do PostgreSQL podem ser encontradas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Nunca armazene endereços inteiros em um campo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o seu aplicativo ou site tiver um formulário com um campo em que o usuário digitar seu endereço, ele terá um cheiro ruim. É muito provável que, nesse caso, você também tenha um campo no banco de dados para armazenar o endereço como uma sequência simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o que fazer se você precisar combinar compras de clientes por cidade para ver qual cidade é o produto mais popular? consegues fazê-lo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vai ser muito difícil! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o endereço completo é armazenado como uma sequência no campo do banco de dados, você primeiro precisa descobrir quanto dessa sequência é a cidade! E essa é uma tarefa quase impossível, considerando todos os formatos de endereço possíveis nesse campo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, não se esqueça de dividir o campo universal "Endereço" em campos específicos: rua, número da casa, cidade, região, CEP e assim por diante.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro problema de endereço - campos anônimos</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está uma ilustração do livro de Michaels Blach, A Bala de Cobre para Melhorar a Qualidade do Software:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b98/165/d9e/b98165d9e6cd4b9e43350285a75609ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que problemas em potencial são visíveis aqui? </font><font style="vertical-align: inherit;">Você consegue distinguir facilmente a cidade de Chicago das ruas de Chicago? </font><font style="vertical-align: inherit;">Provavelmente não. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, lembre-se de sempre fornecer nomes de colunas claros para cada unidade de informação.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0e/te/dp/0etedpf1hxfr2sci5m1jliwd4zi.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como escrever um currículo</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você tem experiência em SQL? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não (não) </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Então escreva: especialista NoSQL.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Nunca armazene o nome e o sobrenome em um campo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semelhante à situação com endereços: o número de variações do nome e do sobrenome é muito grande para distinguir claramente entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, você pode separar o nome do sobrenome, se houver um espaço entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, "Mike Alche" → o nome "Mike" e o sobrenome "Alche". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas e se o usuário digitar um nome do meio? Ou ele tem um sobrenome duplo? Mas e se houver um nome do meio e um sobrenome duplo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como determinar onde está o nome e onde está o sobrenome para dividir a string? Erros são inevitáveis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma maneira de evitar muitos problemas é criar campos separados (em formulários) para os nomes de usuário first_name e last_name. Dessa forma, você permite que os usuários compartilhem seus próprios nomes e pode armazenar dados de maneira consistente. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Não estou dizendo que espaços são proibidos nos campos do banco de dados. </font><font style="vertical-align: inherit;">Por exemplo, para nomes como Juan Martin Del Potro, a primeira parte de Juan Martin está no campo first_name e Del Potro está no campo last_name. </font><font style="vertical-align: inherit;">Claro, isso </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">não</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é </font><strong><font style="vertical-align: inherit;">perfeito</font></strong><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Opcionalmente, você pode ter as colunas middle_name e second_last_name. </font><font style="vertical-align: inherit;">Veja com mais detalhes as possíveis variações de nomes e sobrenomes na lista “ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceitos errôneos de programadores sobre nomes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ” e no artigo “ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceitos errôneos de programadores sobre nomes - com exemplos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”. </font><font style="vertical-align: inherit;">Você precisa concordar com algum tipo de compromisso entre precisão e praticidade.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Defina convenções para nomes de tabelas e campos e atenha-se a eles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É muito chato trabalhar com dados que se parecem com user.firstName, user.lst_name, user.birthDate e assim por diante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu recomendaria que você estabelecesse regras de nomeação de sublinhado, porque nem todos os mecanismos SQL lidam com letras maiúsculas da mesma maneira, e colocar tudo entre aspas é muito tedioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escolha o mesmo que chamar as tabelas - no plural ou no singular (por exemplo, usuários no plural ou usuário no singular). </font><font style="vertical-align: inherit;">Gosto mais do singular, mas todas as estruturas de back-end parecem plurais por padrão. </font><font style="vertical-align: inherit;">Você tem que seguir o padrão e usar o plural. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que mais se pode ler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual banco de dados escolher para o projeto, para que você não precise escolher novamente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   IIoT-:  Mail.ru Cloud Solutions       </a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">      </a>.</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501582/index.html">Como os preços dinâmicos na Amazon e no AliExpress levam a US $ 24 milhões em mercadorias</a></li>
<li><a href="../pt501588/index.html">Ótimos testes de processadores de várias arquiteturas</a></li>
<li><a href="../pt501590/index.html">Artigos em inglês: Guerra impiedosa de regras e exceções</a></li>
<li><a href="../pt501594/index.html">Fuja do zoológico ou como fiz jogos casuais no iOS</a></li>
<li><a href="../pt501596/index.html">Como facilitar a vida ao usar o Git (assim como uma seleção de materiais para imersão profunda)</a></li>
<li><a href="../pt501600/index.html">Consola de jogos stm32</a></li>
<li><a href="../pt501604/index.html">Tradução do livro de Andrew Un, Passion for Machine Learning. Capítulos 51 e 52</a></li>
<li><a href="../pt501610/index.html">Barra de rolagem personalizada em Angular</a></li>
<li><a href="../pt501612/index.html">Qual placa gráfica escolher para o seu computador em 2020</a></li>
<li><a href="../pt501614/index.html">Antipadrões do PostgreSQL: qual a profundidade da toca do coelho? passar pela hierarquia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>