<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§© ‚ûï üè† Geo-Tracking in React Native üíÜüèº üîß üî•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine mobile Anwendung kann als ‚ÄûArbeitsplatz‚Äú eines Mitarbeiters fungieren, w√§hrend m√∂glicherweise geografische Koordinaten und andere Daten √ºbertrage...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Geo-Tracking in React Native</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/493312/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine mobile Anwendung kann als ‚ÄûArbeitsplatz‚Äú eines Mitarbeiters fungieren, w√§hrend m√∂glicherweise geografische Koordinaten und andere Daten √ºbertragen werden m√ºssen. Bei der plattform√ºbergreifenden Anwendungsentwicklung unter iOS und Android werden h√§ufig Frameworks wie Flutter oder React Native f√ºr diese Aufgabe verwendet. In diesem Artikel sprechen wir am Beispiel unseres Falls √ºber die Funktionen der Arbeit mit der Geolokalisierung in React Native.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/d8/av/bqd8avprg_s7gfc5vohsywtdptg.png"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Zuverl√§ssigkeit, Geschwindigkeit und Reife von React Native werden manchmal von Entwicklern kritisiert, und vor etwa drei Jahren konnten solche Zweifel als berechtigt bezeichnet werden. In dieser Zeit wurde die Technologie jedoch weiterentwickelt, und React Native wurde als praktisches Werkzeug zur Erstellung einer Vielzahl von Anwendungen anerkannt. React Native eignet sich insbesondere f√ºr Anwendungen, die geografische Koordinaten verwenden, z. B. verschiedene Tracker, Anwendungen f√ºr Kuriere usw.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die von React Native entwickelten Online-Shop-Anwendungen, Restaurantmen√ºs, Newsfeeds, Lieferanwendungen und Social-Media-Clients sind auch in den Stores beliebt. Daher wird eine gro√üe Menge von React Native st√§ndig verwendet, ohne dar√ºber nachzudenken. Einfache Beispiele sind Facebook, Instagram, Skype, Uber Eats, Wallmart. Prognosen zufolge kann Microsoft diese Liste auff√ºllen und seine mobilen Anwendungen an React Native √ºbertragen, insbesondere nachdem die Unterst√ºtzung f√ºr die Windows-Plattform implementiert wurde. Es gibt React Native-Unterst√ºtzung f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qt-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macOS-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und "integrierte" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weechat-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anwendungen </font><font style="vertical-align: inherit;">, obwohl die Unterst√ºtzung und Dokumentation f√ºr diese Plattformen eher rar ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
React Native kann fast alles genauso machen wie eine native Anwendung. Empfangen Sie beispielsweise Informationen von Ger√§tesensoren, wie dies bei Java / Kotlin- oder ObjC / Swift-Anwendungen der Fall ist, oder senden Sie Daten im Hintergrund mithilfe des Vordergrunddienstes oder des Hintergrundabrufs. Der einzige Unterschied besteht darin, dass Sie in React Native eine Schnittstelle f√ºr die Interaktion zwischen dem nativen Teil und Javascript implementieren m√ºssen. F√ºr allt√§gliche Aufgaben sind diese Schnittstellen h√§ufig bereits implementiert. Dies gilt auch f√ºr die Verfolgung des Speicherorts und des Betriebs von Javascript im Hintergrund: Es gibt bereits L√∂sungen in Form unabh√§ngiger Open Source-Bibliotheken. So kam es, dass die Community Javascript unabh√§ngig nach vorne ‚Äûzieht‚Äú. Sowohl Programmierer als auch Unternehmen nutzen aktiv Open Source-L√∂sungen. Nur wenige Sprachgemeinschaften verf√ºgen √ºber die gleiche Anzahl von Bibliotheken, Frameworks,Qualit√§tsdienstprogramme. In React Native sind jedoch einige Funktionen, die in der nativen Entwicklung vorhanden sind, immer noch begrenzt, und dies sollte beachtet werden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten Sie mit React Native</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ber√ºcksichtigen Sie mehrere Schl√ºsselfaktoren, die die Entwicklungsgeschwindigkeit plattform√ºbergreifender Anwendungen in React Native sicherstellen:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gemeinsame Codebasis</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald die Logik geschrieben ist, funktionieren Layoutbildschirme und Komponenten auf verschiedenen Plattformen und sehen so gut wie m√∂glich aus (z. B. verwenden sie unter Android anstelle der √ºblichen Schatten den Begriff der Hochstimmung). </font><font style="vertical-align: inherit;">F√ºr Entwickler mit alten Versionen gibt es praktisch keine ewigen Kopfschmerzen. Beispielsweise ist es einfach, Unterst√ºtzung auch f√ºr Android 4.4 hinzuzuf√ºgen, obwohl die Implementierung dieser Aufgabe in der Praxis auch von der Verwendung zus√§tzlicher nativer Module abh√§ngt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimaler Workflow</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oft bietet React einen optimalen Workflow, der die Entwicklung neuer Funktionen um ein Vielfaches schneller macht als in Muttersprachen. </font><font style="vertical-align: inherit;">Dies gilt f√ºr Layout, Komponentenansatz, Abh√§ngigkeitsinstallation und allgemeine Architekturl√∂sungen f√ºr React.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hot Reload</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Entwickler muss die Anwendung nicht jedes Mal neu erstellen, um die √Ñnderungen zu sehen. </font><font style="vertical-align: inherit;">Dank Hot Reload dauert es nur ein paar Sekunden, um die Anwendung auf den aktuellen Status zu aktualisieren. </font><font style="vertical-align: inherit;">In Version 0.61 wurde zus√§tzlich an Live Reload (jetzt Fast Refresh) erinnert. Beim Bearbeiten des Schriftsatzes werden √Ñnderungen sofort √ºbernommen, ohne dass der aktuelle Status der Komponenten zur√ºckgesetzt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Erstellung einer Anwendung m√ºssen einige Schl√ºsselbereiche besonders ber√ºcksichtigt werden: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Javascript</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
React Native zielt darauf ab, mit Javascript zu arbeiten, sodass Sie die Logik und die Schnittstellen schnell beschreiben k√∂nnen. Es gibt viele vorgefertigte Module aus der Welt von Web und Node.js, die auf die √ºbliche Weise verwendet werden k√∂nnen (nat√ºrlich, wenn sie nicht mit dem DOM oder der Serverseite verbunden sind). Trotz seiner hohen Geschwindigkeit ist Javascript Muttersprachen manchmal unterlegen. Es gibt kein Multithreading. In React Native k√∂nnen wir nicht direkt auf die Native-API zugreifen, obwohl diese Einschr√§nkung m√∂glicherweise bald aufgehoben wird. Javascript beschreibt haupts√§chlich, was im nativen Teil getan und gerendert werden muss. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Br√ºcke</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Bus, der Javascript-Aufrufe √ºber spezielle Schnittstellen akzeptiert, die von der reaktionsnativen Bibliothek bereitgestellt werden. Anrufe sind regul√§re serialisierte Nachrichten. F√ºr jede Komponente - eine einfache Ansicht, ein Eingabefeld oder ein Aufruf des Systemdialogs - gibt es eine in Javascript beschriebene Schnittstelle mit der im nativen Teil implementierten Logik. Der Bus ist der langsamste Teil, er ist asynchron, das √úbertragen von Daten zwischen Javascript und dem Native braucht Zeit (h√∂chstwahrscheinlich kann Facebook ihn vollst√§ndig </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entfernen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). H√§ufig werden die Leistungsprobleme von Anwendungen in React Native genau durch den Betrieb der Bridge verursacht. Wenn Sie sie jedoch korrekt verwenden (reduzieren Sie die Daten√ºbertragung auf das erforderliche Minimum), unterscheidet sich die Leistung in React Native-Anwendungen nicht wesentlich. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Der native Teil</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Anwendung auf React Native ist zun√§chst eine normale native Anwendung. </font><font style="vertical-align: inherit;">Die Besonderheit ist, dass alle erforderlichen Bibliotheken bereits darin verbunden sind, sodass Sie die gesamte Logik in React JS schreiben k√∂nnen. </font><font style="vertical-align: inherit;">Hier k√∂nnen wir unsere eigene native Logik schreiben, um sie in JS zu verwenden (oder nicht zu verwenden), die √ºblichen nativen Bibliotheken hinzuf√ºgen (z. B. um TLS v1.2 unter KitKat und fr√ºher zu unterst√ºtzen). </font><font style="vertical-align: inherit;">In vorgefertigten nativen Anwendungen k√∂nnen Sie Unterst√ºtzung f√ºr React Native hinzuf√ºgen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten mit Geo-Tracking in React Native</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einem der Projekte mussten wir einen ‚Äûmobilen Arbeitsplatz‚Äú f√ºr die Mitarbeiter unserer Kunden entwickeln, um insbesondere die √úbertragung ihrer geografischen Koordinaten im Hintergrund sicherzustellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In React Native gibt es verschiedene Tools f√ºr die Arbeit mit der Geolokalisierung. Dies ist beispielsweise ein Paket aus der React Native </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> React-Native </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">-Community / Geolocation-Community</font></a><font style="vertical-align: inherit;"> , das die meisten Anwendungsf√§lle abdeckt, jedoch nicht im Hintergrund funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um unsere Aufgabe zu implementieren, haben wir verschiedene L√∂sungen verwendet, einschlie√ülich einer Bibliothek mit dem sprechenden Namen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ mauron85 / react-native-background-geolocation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Urspr√ºnglich war diese Bibliothek ein Plugin f√ºr Cordova, aber sp√§ter trennte der Autor die Basis und erstellte separate Wrapper f√ºr React Native. Es gibt auch eine gleichnamige kostenpflichtige Bibliothek von transistorsoft, die zum Zeitpunkt unserer Arbeit an dem Projekt jedoch nur mit ihrer Dokumentation gewonnen hat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Bibliothek konnten wir flexible Einstellungen f√ºr die Standortverfolgung vornehmen. Zum Beispiel, mit welcher H√§ufigkeit ein Systemdienst abgefragt werden soll, wie genau im Hintergrund gearbeitet werden soll, in welchem ‚Äã‚ÄãRadius die Position als bewegungslos betrachtet wird. Einstellungen und Methoden zum Senden dieser Koordinaten an den Server k√∂nnten "out of the box" verwendet werden. Wir haben uns jedoch entschieden, keine Spam-Anfragen zu stellen, sondern die empfangenen Koordinaten im Repository zu aggregieren und mit einem gro√üen Intervall zu senden. Gleichzeitig erm√∂glichte uns die Bibliothek, unsere Anwendung als foregroundActivity zu starten, wodurch unn√∂tige Kopfschmerzen vermieden wurden, da auf vielen Android-Ger√§ten Anwendungen im Hintergrund nur mit zus√§tzlichen Einstellungen funktionieren k√∂nnen ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei, MIUI, Samsung k√ºrzlich</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Installation k√∂nnen Sie eine Komponente oder nur einen Helfer erstellen, der den Dienst verwaltet. </font><font style="vertical-align: inherit;">Wir haben uns entschlossen, die Komponente zu verwenden, um sie unter den Bedingungen im Router zu montieren und einfach mit Redux zu verbinden. </font><font style="vertical-align: inherit;">Richten Sie unseren Service ein:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> BackgroundGeolocation, {<font></font>
  Location,<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@mauron85/react-native-background-geolocation'</span>;<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForegroundService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
<span class="hljs-comment">//...</span>
startBackgroundService = <span class="hljs-function">(<span class="hljs-params">config: GeotrackerConfig</span>) =&gt;</span> {
     <span class="hljs-comment">//    </span><font></font>
	BackgroundGeolocation.configure({<font></font>
  	<span class="hljs-attr">desiredAccuracy</span>: BackgroundGeolocation.HIGH_ACCURACY,
  	<span class="hljs-attr">stationaryRadius</span>: <span class="hljs-number">50</span>,
  	<span class="hljs-attr">distanceFilter</span>: config.distance,
  	<span class="hljs-attr">notificationTitle</span>: Strings.Geolocation.NOTIFICATION_TITLE,
  	<span class="hljs-attr">notificationText</span>: Strings.Geolocation.NOTIFICATION_DESCRIPTION,
  	<span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>,
  	<span class="hljs-attr">startOnBoot</span>: <span class="hljs-literal">false</span>,
  	<span class="hljs-attr">stopOnTerminate</span>: <span class="hljs-literal">true</span>,
  	<span class="hljs-attr">locationProvider</span>: BackgroundGeolocation.ACTIVITY_PROVIDER,
  	<span class="hljs-attr">interval</span>: <span class="hljs-keyword">this</span>.runnerInterval,
  	<span class="hljs-attr">fastestInterval</span>: <span class="hljs-number">10000</span>,
  	<span class="hljs-attr">activitiesInterval</span>: <span class="hljs-number">30000</span>,
  	<span class="hljs-attr">stopOnStillActivity</span>: <span class="hljs-literal">false</span>,
  	<span class="hljs-attr">notificationIconColor</span>: Colors.primary,
  	<span class="hljs-attr">notificationIconSmall</span>: <span class="hljs-string">'notification_icon'</span>,<font></font>
	});<font></font>
 <font></font>
     <span class="hljs-comment">//    start()      </span>
                    	BackgroundGeolocation.on(<span class="hljs-string">'authorization'</span>, status =&gt; {
  	<span class="hljs-keyword">if</span> (status !== BackgroundGeolocation.AUTHORIZED) {
    	<span class="hljs-comment">//   </span>
  	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status.hasPermissions) {
        <span class="hljs-comment">// hasPermission -  ,    </span><font></font>
  	}<font></font>
	});<font></font>
 <font></font>
     <span class="hljs-comment">//  </span><font></font>
                    	BackgroundGeolocation.start();<font></font>
};<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen, dass Sie hier auch Einstellungen f√ºr die Benachrichtigung festlegen k√∂nnen, ein Symbol (aus nativen Assets). </font><font style="vertical-align: inherit;">Was ist mit Berechtigungen? </font><font style="vertical-align: inherit;">F√ºr Android ist nach der Installation des Pakets nichts erforderlich. Die Bibliothek √ºbernimmt die Anforderungen f√ºr den Zugriff auf die Geolokalisierung des Systems. </font><font style="vertical-align: inherit;">F√ºr den normalen Betrieb unter iOS in Xcode m√ºssen Sie jedoch auch die Hintergrundverarbeitung und Standortaktualisierungen auf der Registerkarte Signieren und Funktionen des Projekts aktivieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vn/q9/yw/vnq9ywwhisotkblbxko5g3je3he.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir implementieren die Hauptmethode zum Speichern und Senden von Koordinaten im Ereignis on ('location') in derselben Methode. </font><font style="vertical-align: inherit;">Es funktioniert sowohl mit der aktiven Anwendung als auch im minimierten Zustand:</font></font><br>
<br>
<pre><code class="javascript hljs">BackgroundGeolocation.on(<span class="hljs-string">'location'</span>, location =&gt; {<font></font>
    BackgroundGeolocation.startTask(<span class="hljs-keyword">async</span> taskKey =&gt; {
     <span class="hljs-comment">//       ,</span>
     <span class="hljs-comment">//     iOS-</span>
      <span class="hljs-keyword">const</span> batteryLevel = <span class="hljs-keyword">this</span>.isSimulator<font></font>
        ? <span class="hljs-number">100</span>
        : (<span class="hljs-keyword">await</span> DeviceInfo.getBatteryLevel()) * <span class="hljs-number">100</span>;
      <span class="hljs-keyword">const</span> updateDelta = location.time - <span class="hljs-keyword">this</span>.lastUpdateAt;<font></font>
<font></font>
     <span class="hljs-comment">//      </span>
      <span class="hljs-keyword">this</span>.props.locationUpdate(location);
      <span class="hljs-keyword">this</span>.props.locationAddTrackerData({
        <span class="hljs-attr">altitude</span>: location.altitude,
        <span class="hljs-attr">batteryChargeLevel</span>: batteryLevel,
        <span class="hljs-attr">latitude</span>: location.latitude,
        <span class="hljs-attr">longitude</span>: location.longitude,
        <span class="hljs-attr">course</span>: location.bearing,
        <span class="hljs-attr">accuracy</span>: location.accuracy,
        <span class="hljs-attr">speed</span>: location.speed,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">Number</span>(<span class="hljs-built_in">String</span>(location.time).substr(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)),
        <span class="hljs-attr">isAlertOn</span>: <span class="hljs-literal">false</span>,<font></font>
      });<font></font>
<font></font>
     <span class="hljs-comment">//  ?</span>
      <span class="hljs-keyword">if</span> (updateDelta / <span class="hljs-number">1000</span> &gt; config.sendInterval) {
        <span class="hljs-keyword">this</span>.syncDataWithInterval();
        <span class="hljs-keyword">this</span>.lastUpdateAt = location.time;<font></font>
      }<font></font>
<font></font>
     <span class="hljs-comment">//    AsyncStorage,    </span><font></font>
      Storage.setLastKnownLocation(location);<font></font>
      BackgroundGeolocation.endTask(taskKey);  <span class="hljs-comment">//   !</span><font></font>
    });<font></font>
});<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier rufen wir die Aktion aus dem Speicher auf, wo wir die Koordinatendaten in einem benutzerdefinierten Format √ºbertragen und zus√§tzlich Daten zu den Batteriemesswerten mithilfe der Bibliothek mit reaktionsnativen Ger√§teinformationen speichern. </font><font style="vertical-align: inherit;">All dies funktioniert unter Android und iOS gleich gut, wenn die Anwendung aktiv ist oder im Hintergrund. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus gibt es Methoden zum Abrufen des aktuellen Speicherorts (dies funktioniert jedoch nur, wenn der Dienst ausgef√ºhrt wird), zum Abonnieren von √úberg√§ngen des Anwendungsstatus vom aktiven zum Hintergrund und zum Wechseln zu den Systemeinstellungen der Anwendung. </font><font style="vertical-align: inherit;">Im Gro√üen und Ganzen ist in diesen Beispielen jedoch das Notwendigste angegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis ist eine Komponente, die beispielsweise nur f√ºr das autorisierte Teil montiert werden kann:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForegroundService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
	<span class="hljs-comment">//...</span><font></font>
	componentDidMount() {<font></font>
		<span class="hljs-keyword">this</span>.startBackgroundService(<span class="hljs-keyword">this</span>.props.config);<font></font>
	}<font></font>
<font></font>
	componentWillUnmount() {<font></font>
    BackgroundGeolocation.stop();<font></font>
    BackgroundGeolocation.removeAllListeners();<font></font>
  }<font></font>
<font></font>
	startBackgroundService = <span class="hljs-function">(<span class="hljs-params">config: GeotrackerConfig</span>) =&gt;</span> {<font></font>
    BackgroundGeolocation.configure({<font></font>
		<span class="hljs-comment">// ...</span><font></font>
	};<font></font>
<font></font>
	render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
  }<font></font>
} </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn React-Navigation verwendet wird, k√∂nnen Sie die Navigation f√ºr das autorisierte Teil wie folgt erstellen:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  StackNavigator   </span>
<span class="hljs-keyword">const</span> Navigator = createStackNavigator(RouteConfigs, NavigatorConfig);<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppNavigator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
  <span class="hljs-keyword">static</span> router: NavigationRouter = Navigator.router;<font></font>
<font></font>
  componentDidMount(): <span class="hljs-keyword">void</span> {<font></font>
    SplashScreen &amp;&amp; SplashScreen.hide();<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ForegroundService</span> <span class="hljs-attr">navigation</span>=<span class="hljs-string">{this.props.navigation}</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Navigator</span> {<span class="hljs-attr">...this.props</span>} /&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AppNavigator;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au√üerdem kann dieser Navigator im Root-Navigator auf die √ºbliche Weise verwendet werden:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> RootNavigator = createSwitchNavigator(<font></font>
  {<font></font>
    <span class="hljs-attr">Auth</span>: AuthNavigator,
    <span class="hljs-attr">App</span>: AppNavigator,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">initialRouteName</span>: <span class="hljs-string">'Auth'</span>,<font></font>
  },<font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createAppContainer(RootNavigator);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher funktioniert der Geolokalisierungs- und Datenaustauschdienst nur im autorisierten Teil der Anwendung.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel haben wir die Funktionen der Verwendung von React Native in Geolocation-Anwendungen untersucht. </font><font style="vertical-align: inherit;">Wie wir herausgefunden haben, k√∂nnen Entwickler mithilfe dieses Frameworks jetzt problemlos die geografischen Koordinaten des Ger√§ts verfolgen - beispielsweise in Fahrrad-Trackern, Anwendungen f√ºr Kuriere und Spediteure, Anwendungen f√ºr die Auswahl von Immobilien usw. </font><font style="vertical-align: inherit;">Die Bibliothek deckt die meisten F√§lle im Zusammenhang mit Geotracking ab. Insbesondere k√∂nnen Sie die Intervalle anpassen und die Ladung des Ger√§ts sparen. Sie funktioniert auf beiden Plattformen stabil im Hintergrund und unterst√ºtzt Autorun unter Android. </font><font style="vertical-align: inherit;">Gleichzeitig ist f√ºr komplexe Anwendungen in der Regel die native Entwicklung besser geeignet (z. B. f√ºr die Arbeit mit Berechnungen und Widgets, wie wir bereits im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vorherigen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Artikel geschrieben haben). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielen Dank f√ºr Ihre Aufmerksamkeit, wir hoffen, dass der Artikel f√ºr Sie n√ºtzlich war!</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493302/index.html">Welche Technologien wurden bereits zur Bek√§mpfung des Coronavirus eingesetzt?</a></li>
<li><a href="../de493304/index.html">Entwicklung eines Hexapods von Grund auf neu (Teil 8) - verbesserte mathematische Bewegung</a></li>
<li><a href="../de493306/index.html">Verwenden von Gateway-APIs als einzelner Einstiegspunkt f√ºr Webanwendungen und APIs</a></li>
<li><a href="../de493308/index.html">Echte Erfahrung mit der √úbertragung fast aller Mitarbeiter an einen entfernten Standort</a></li>
<li><a href="../de493310/index.html">Spiel Gottes: K√ºnstliche Organismen</a></li>
<li><a href="../de493320/index.html">Erweitern Sie Laravel mit unseren eigenen Komponenten</a></li>
<li><a href="../de493322/index.html">IT GRAD: erste Eindr√ºcke vom Remote-Arbeitsformat</a></li>
<li><a href="../de493332/index.html">Warum W√§rmebildkameras die K√∂rpertemperatur einer Person nicht messen k√∂nnen</a></li>
<li><a href="../de493334/index.html">52 Milliarden Angriffe: Trend Micro 2019-Bedrohungen</a></li>
<li><a href="../de493336/index.html">Wie das Informatikzentrum das Online-Lernen √ºbersetzte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>