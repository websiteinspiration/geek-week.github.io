<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’ª ğŸ”¨ ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Swift 5.2 - apa yang baru? ğŸˆšï¸ ğŸ¤ŸğŸ» ğŸ‘©ğŸ¼â€âš•ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beta pertama dari Swift 5.2 baru saja muncul di Xcode 11.4 beta, dan telah ada perubahan dalam bahasa, bersama dengan pengurangan dalam ukuran kode da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Swift 5.2 - apa yang baru?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487552/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beta pertama dari Swift 5.2 baru saja muncul di Xcode 11.4 beta, dan telah ada perubahan dalam bahasa, bersama dengan pengurangan dalam ukuran kode dan memori yang digunakan, serta sistem diagnostik baru yang akan memungkinkan Anda untuk dengan cepat mendeteksi kesalahan.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menggunakan Ekspresi KeyPath sebagai Fungsi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mendefinisikan struktur berikut:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">User</span> </span>{
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> age: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> bestFriend: <span class="hljs-type">String?</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> canVote: <span class="hljs-type">Bool</span> {<font></font>
        age &gt;= <span class="hljs-number">18</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita membuat beberapa contoh struktur kita dan meletakkannya dalam array:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> eric = <span class="hljs-type">User</span>(name: <span class="hljs-string">"Eric Effiong"</span>, age: <span class="hljs-number">18</span>, bestFriend: <span class="hljs-string">"Otis Milburn"</span>)
<span class="hljs-keyword">let</span> maeve = <span class="hljs-type">User</span>(name: <span class="hljs-string">"Maeve Wiley"</span>, age: <span class="hljs-number">19</span>, bestFriend: <span class="hljs-literal">nil</span>)
<span class="hljs-keyword">let</span> otis = <span class="hljs-type">User</span>(name: <span class="hljs-string">"Otis Milburn"</span>, age: <span class="hljs-number">17</span>, bestFriend: <span class="hljs-string">"Eric Effiong"</span>)
<span class="hljs-keyword">let</span> users = [eric, maeve, otis]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang perhatikan: jika Anda perlu mendapatkan array nama semua pengguna, Anda dapat melakukannya sebagai berikut:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> userNames = users.<span class="hljs-built_in">map</span>(\.name)
<span class="hljs-built_in">print</span>(userNames)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelumnya, kami perlu menggunakan penutupan:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> oldUserNames = users.<span class="hljs-built_in">map</span> { $<span class="hljs-number">0</span>.name }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan cara baru yang sama, Anda bisa mendapatkan semua pengguna yang dapat memilih:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> voters = users.<span class="hljs-built_in">filter</span>(\.canVote)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di sini kita mendapatkan semua orang yang memiliki sahabat:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> bestFriends = users.<span class="hljs-built_in">compactMap</span>(\.bestFriend)</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai untuk tipe yang ditentukan pengguna</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat struktur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dice</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan properti lowerBound dan upperBound, lalu tambahkan fungsi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">callAsFunction</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jadi, setiap kali kita mendapatkan nilai dadu, kita akan mendapatkan nilai acak:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Dice</span> </span>{
    <span class="hljs-keyword">var</span> lowerBound: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">var</span> upperBound: <span class="hljs-type">Int</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callAsFunction</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Int</span> {<font></font>
        (lowerBound...upperBound).randomElement()!<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">let</span> d6 = <span class="hljs-type">Dice</span>(lowerBound: <span class="hljs-number">1</span>, upperBound: <span class="hljs-number">6</span>)
<span class="hljs-keyword">let</span> roll1 = d6()
<span class="hljs-built_in">print</span>(roll1)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini kita mendapatkan nomor acak dari 1 hingga 6, dan ini benar-benar identik dengan panggilan langsung ke fungsi panggilan (). </font><font style="vertical-align: inherit;">Kita bisa melakukan hal yang sama seperti ini:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> d12 = <span class="hljs-type">Dice</span>(lowerBound: <span class="hljs-number">1</span>, upperBound: <span class="hljs-number">12</span>)
<span class="hljs-keyword">let</span> roll2 = d12.callAsFunction()
<span class="hljs-built_in">print</span>(roll2)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swift secara otomatis memilih panggilan yang benar berdasarkan pada bagaimana callAsFunction () didefinisikan. </font><font style="vertical-align: inherit;">Misalnya, Anda dapat menambahkan beberapa parameter, mengubah nilai balik, dan bahkan, jika perlu, menandai metode sebagai bermutasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini kita akan membuat struktur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StepCounter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang menangkap jumlah langkah yang diambil dan memberi sinyal apakah jumlah langkah yang telah mencapai 10.000:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">StepCounter</span> </span>{
    <span class="hljs-keyword">var</span> steps = <span class="hljs-number">0</span><font></font>
<font></font>
    <span class="hljs-keyword">mutating</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callAsFunction</span><span class="hljs-params">(<span class="hljs-built_in">count</span>: Int)</span></span> -&gt; <span class="hljs-type">Bool</span> {<font></font>
        steps += <span class="hljs-built_in">count</span>
        <span class="hljs-built_in">print</span>(steps)
        <span class="hljs-keyword">return</span> steps &gt; <span class="hljs-number">10_000</span><font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> steps = <span class="hljs-type">StepCounter</span>()
<span class="hljs-keyword">let</span> targetReached = steps(<span class="hljs-built_in">count</span>: <span class="hljs-number">10</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
callAsFunction () juga mendukung throw dan rethrows, dan Anda dapat mendefinisikan beberapa metode callAsFunction (), seperti overloading reguler.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subskrip dapat mendeklarasikan argumen default</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menambahkan subskrip ke suatu tipe, Anda bisa menggunakan argumen default. </font><font style="vertical-align: inherit;">Misalnya, jika kami memiliki struktur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PoliceForce</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan subskrip khusus untuk membuat daftar petugas di unit, kami dapat menambahkan parameter default untuk mengembalikannya jika array dibaca di luar perbatasannya:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PoliceForce</span> </span>{
    <span class="hljs-keyword">var</span> officers: [<span class="hljs-type">String</span>]<font></font>
<font></font>
    <span class="hljs-keyword">subscript</span>(index: <span class="hljs-type">Int</span>, <span class="hljs-keyword">default</span> <span class="hljs-keyword">default</span>: <span class="hljs-type">String</span> = <span class="hljs-string">"Unknown"</span>) -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">if</span> index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt; officers.<span class="hljs-built_in">count</span> {
            <span class="hljs-keyword">return</span> officers[index]<font></font>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> `<span class="hljs-keyword">default</span>`<font></font>
        }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">let</span> force = <span class="hljs-type">PoliceForce</span>(officers: [<span class="hljs-string">"Amy"</span>, <span class="hljs-string">"Jake"</span>, <span class="hljs-string">"Rosa"</span>, <span class="hljs-string">"Terry"</span>])
<span class="hljs-built_in">print</span>(force[<span class="hljs-number">0</span>])
<span class="hljs-built_in">print</span>(force[<span class="hljs-number">5</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini kita mendapatkan "Amy" dan kemudian "Tidak Dikenal" di output, karena kita tidak memiliki elemen array dengan indeks 5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena kita menulis default default, kita dapat menetapkan nilai kustom, seperti:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-built_in">print</span>(force[-<span class="hljs-number">1</span>, <span class="hljs-keyword">default</span>: <span class="hljs-string">"The Vulture"</span>])</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagnostik baru dan lebih baik</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swift 5.2 memperkenalkan arsitektur diagnostik baru yang tujuannya adalah untuk meningkatkan kualitas dan keakuratan pesan kesalahan pengembangan Xcode. </font><font style="vertical-align: inherit;">Ini terutama terlihat ketika bekerja dengan kode SwiftUI, di mana Swift sering menghasilkan pesan kesalahan positif palsu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, pertimbangkan kode berikut:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> name = <span class="hljs-number">0</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"What is your name?"</span>)
            <span class="hljs-type">TextField</span>(<span class="hljs-string">"Name"</span>, text: $name)<font></font>
                .frame(maxWidth: <span class="hljs-number">300</span>)<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini kami mencoba mengaitkan tampilan TextField dengan integer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Negara</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">properti yang salah. </font><font style="vertical-align: inherit;">Dalam hal ini, Swift 5.1 akan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghasilkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kesalahan karena frame () pengubah </font><b><font style="vertical-align: inherit;">'Int' tidak dapat dikonversi menjadi 'CGFloat?' </font></b><font style="vertical-align: inherit;">tetapi Swift 5.2 dan yang lebih baru mengenali kesalahan dalam pengikatan $ name: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak dapat mengonversi nilai tipe 'Binding' menjadi argumen yang diharapkan, ketik 'Binding'.</font></font></b></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id487540/index.html">HighLoad ++, Anastasia Tsymbalyuk, Stanislav Tselovalnikov (Sberbank): bagaimana kami menjadi MDA</a></li>
<li><a href="../id487542/index.html">PRESENT - Enkripsi Blok Sangat Ringan (terjemahan dari PRESENT asli: Sandi Blok Sangat Ringan)</a></li>
<li><a href="../id487544/index.html">Dokumentasi .NET: Apa yang Baru untuk Januari</a></li>
<li><a href="../id487548/index.html">Eksperimen Baru: Memanggil .NET gRPC Services dari Browser dengan gRPC-Web</a></li>
<li><a href="../id487550/index.html">Gambar 3D dalam python dengan (hampir) kinerja normal</a></li>
<li><a href="../id487556/index.html">Berita dari dunia OpenStreetMap No. 497 (01/21 / 2020-27.01.2020)</a></li>
<li><a href="../id487558/index.html">Paul Graham: Anak-Anak dan Startup</a></li>
<li><a href="../id487560/index.html">Bank of America: Kapitalisasi Yandex akan tumbuh sebesar $ 1,4 miliar</a></li>
<li><a href="../id487564/index.html">Paul Graham: "Gagasan Terbaik dalam Pikiran Anda"</a></li>
<li><a href="../id487566/index.html">Memahami CSS Grid (1 bagian): Grid container</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>