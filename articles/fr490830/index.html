<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏻 🤬 👇🏽 Gestion des mots de passe dans Zimbra Collaboration Suite Open-Source Edition 🕺🏽 🎥 🆒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La gestion des mots de passe a toujours été l'un des problèmes les plus importants associés au fonctionnement sûr des systèmes d'information. La possi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gestion des mots de passe dans Zimbra Collaboration Suite Open-Source Edition</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/490830/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La gestion des mots de passe a toujours été l'un des problèmes les plus importants associés au fonctionnement sûr des systèmes d'information. La possibilité de stocker en toute sécurité et de changer rapidement les mots de passe de plusieurs comptes, la possibilité pour les utilisateurs de réinitialiser en toute sécurité un mot de passe oublié et la possibilité de réinitialiser en toute sécurité un mot de passe administrateur - toutes ces fonctions ne sont pas moins importantes que la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">politique de sécurité des mots de passe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dont nous avons parlé plus tôt. Dans cet article, nous verrons comment ces fonctions sont implémentées dans Zimbra OSE.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/xi/ie/opxiieyaijocgswpkt2td6f4-u0.png"><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modification du</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
mot de passe </font><b><font style="vertical-align: inherit;">utilisateur et administrateur global</font></b><font style="vertical-align: inherit;"> Le mot de passe </font><b><font style="vertical-align: inherit;">administrateur global</font></b><font style="vertical-align: inherit;"> est défini lors de l'installation de Zimbra OSE et peut ensuite être modifié dans les paramètres du client Web. Le mot de passe utilisateur est initialement défini lors de la création du compte, cependant, l'administrateur peut activer la modification forcée du mot de passe lorsque l'utilisateur se connecte pour la première fois au client Web afin que l'utilisateur n'oublie pas de définir son propre mot de passe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si l'utilisateur oublie son mot de passe, Zimbra OSE fournit une fonction de récupération de mot de passe. Cette fonction, si elle est activée par l'administrateur, permet à l'utilisateur de spécifier une boîte aux lettres de sauvegarde à laquelle un code de confirmation temporaire sera envoyé. Avec ce code unique, un utilisateur peut accéder au client Web Zimbra OSE et changer son mot de passe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, si l'administrateur a soudainement oublié le mot de passe de son compte et ne peut donc pas se connecter au client Web pour changer le mot de passe, il peut utiliser l'attribut&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setPassword</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou simplement&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur la ligne de commande. Par exemple, la commande&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov sp admin@company.ru qwerty</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;vous permet de changer le mot de passe administrateur en qwerty sans vous connecter au client Web Zimbra OSE. La même commande peut être utilisée pour modifier le mot de passe de tout autre utilisateur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez également que l'administrateur n'a pas la possibilité d'afficher le mot de passe de l'utilisateur. Cette limitation est due au fait que Zimbra OSE, en principe, ne stocke pas les mots de passe des utilisateurs en texte clair. Au lieu de cela, Zimbra OSE stocke uniquement les hachages de mot de passe salés et, lors de la tentative de connexion, compare le hachage du mot de passe entré par l'utilisateur avec ce qui est stocké sur le serveur LDAP. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modification du mot de passe lors de l'authentification via AD</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si AD est utilisé pour authentifier les utilisateurs, les mots de passe ne sont pas non plus stockés sur le serveur. Au lieu de cela, Zimbra OSE passe simplement AD à l'entrée utilisateur et reçoit une réponse indiquant si ce compte est authentifié ou non. Et comme toutes les informations de compte sont stockées sur un autre serveur, lors de l'utilisation d'AD externe, il est généralement recommandé de désactiver la fonction de changement de mot de passe automatique dans le client Web Zimbra OSE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, il existe un moyen de combiner l'authentification des utilisateurs via AD avec la possibilité de modifier indépendamment le mot de passe des utilisateurs. </font><font style="vertical-align: inherit;">Cela peut être fait par une extension appelée&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Active Directory Change Password</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il modifie la fonctionnalité du bouton de changement de mot de passe dans le client Web Zimbra OSE afin que le mot de passe dans AD change.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'extension est assez facile à installer et fonctionne comme suit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'utilisateur clique sur le bouton de changement de mot de passe</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrer le mot de passe</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'extension définit le DN de l'utilisateur</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherche un serveur AD externe</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apporte des modifications au mot de passe du compte via une connexion sécurisée</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'extension est installée sur la ligne de commande à l'aide des commandes suivantes:</font></font><br>
&nbsp;<blockquote>&nbsp;mkdir -p /opt/zimbra/lib/ext/adpassword<br>
&nbsp; wget&nbsp;https://github.com/Zimbra-Community/ADPassword/raw/master/out/artifacts/ADPassword_jar/ADPassword.jar&nbsp;-O /opt/zimbra/lib/ext/adpassword/adPassword.jar<br>
&nbsp; su zimbra<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapBindDn "%u@company.ru"<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchBase «CN=Users,DC=DOMAIN,DC=EXT»<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchBindDn «CN=serviceAccount,CN=Users,DC=DOMAIN,DC=EXT»<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchBindPassword "*********"<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchFilter "(samaccountname=%u)"<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapURL «ldaps://ad.company.ru:636»<br>
&nbsp; zmprov md domain.ext zimbraExternalGroupLdapSearchBase «CN=Users,DC=DOMAIN,DC=EXT»<br>
&nbsp; zmprov md domain.ext zimbraExternalGroupLdapSearchFilter "(samaccountname=%u)"<br>
&nbsp; zmprov md domain.ext zimbraAuthMech «ad»<br>
&nbsp; zmprov md domain.ext zimbraAuthMechAdmin «ad»<br>
&nbsp; zmprov md domain.ext zimbraPasswordChangeListener ADPassword<br>
&nbsp; zmprov gd domain.ext | grep -i ldap | grep -v Gal<br>
&nbsp; zmprov gd domain.ext | grep -i zimbraPasswordChangeListener<br>
&nbsp; zmprov md domain.ext zimbraAuthFallbackToLocal FALSE<br>
&nbsp; zmcontrol restart</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, si vos serveurs Zimbra OSE et Active Directory utilisent des certificats SSL différents, vous devez ajouter le certificat AD à la liste de confiance sur le serveur Zimbra OSE. Si les deux systèmes d'information utilisent le même certificat, vous pouvez ignorer cette étape. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, après avoir installé cette extension, vos utilisateurs pourront changer leur mot de passe directement dans le client Web Zimbra OSE, même lorsqu'ils utilisent l'authentification à l'aide d'AD. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Réinitialisation de masse du mot de passe</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit de situations tout à fait acceptables dans lesquelles vous devrez peut-être réinitialiser rapidement les mots de passe pour un grand nombre d'utilisateurs de Zimbra OSE. Dans le cas où le nombre d'utilisateurs est suffisamment important, la réinitialisation manuelle des mots de passe prendra beaucoup de temps, ce qui peut tout simplement être inacceptable dans une situation critique. Un script peut aider à optimiser cette tâche, qui peut réinitialiser automatiquement les mots de passe des utilisateurs d'un seul domaine et d'un serveur de messagerie entier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, réinitialisez les mots de passe de tous les utilisateurs du domaine company.ru. Pour ce faire, connectez-vous au serveur et exécutez la commande&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov -l gaa company.ru&gt; /tmp/domainusers.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . À la suite de l'exécution de cette commande, le fichier texte </font><b><font style="vertical-align: inherit;">domainusers.txt</font></b><font style="vertical-align: inherit;"> sera créé</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dans lequel tous les utilisateurs du domaine spécifié par nous seront répertoriés. </font><font style="vertical-align: inherit;">Si vous ne spécifiez pas de domaine dans cette commande, tous les comptes de ce serveur seront écrits dans le fichier texte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, vous pouvez supprimer du fichier texte reçu tous les comptes système, tels que galsync ou spam, ainsi que les utilisateurs dont le mot de passe ne sera pas réinitialisé. </font><font style="vertical-align: inherit;">Lorsque le fichier est prêt, vous pouvez exécuter le script suivant:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour i dans `cat / tmp / domainusers.txt`; </font><font style="vertical-align: inherit;">do newpass = "Z1mBr @` openssl rand -base64 12`0a "&amp;&amp; / opt / zimbra / bin / zmprov sp $ i $ newpass &amp;&amp; echo $ i $ newpass &gt;&gt; newlogin.txt &amp;&amp; echo $ i &amp;&amp; sleep 5s; </font><font style="vertical-align: inherit;">terminé</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat de ce script sera un fichier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newlogin.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec de nouveaux mots de passe de compte. Nous vous recommandons de l'enregistrer dans un endroit sûr dès que possible et de supprimer ce fichier du serveur. Après cela, vous pouvez informer les utilisateurs de leurs nouveaux mots de passe afin qu'ils puissent continuer à travailler dans Zimbra OSE. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de passe séparé pour les appareils mobiles</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre fonctionnalité intéressante qui devient disponible après l'installation de la suite d'extensions Zextras pour Zimbra OSE est un mot de passe distinct pour entrer dans la boîte aux lettres à partir d'un appareil mobile. En d'autres termes, un mot de passe supplémentaire est créé pour le compte en utilisant son compte sur l'appareil mobile, avec lequel il peut synchroniser son appareil avec la boîte aux lettres, mais ne peut pas se connecter au client Web Zimbra OSE. Cette fonctionnalité peut augmenter considérablement la sécurité de l'utilisation du courrier électronique en dehors du bureau, car l'appareil mobile peut être compromis ou même volé, et la fonction de mot de passe mobile aidera à empêcher le mot de passe du compte réel de tomber entre les mains des attaquants.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FLGYFkXLMZU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La création d'un mot de passe pour les appareils mobiles est assez simple. </font><font style="vertical-align: inherit;">Cela peut être fait à la fois dans la console d'administration à l'aide du plugin Zextras et sur la ligne de commande. </font><font style="vertical-align: inherit;">Ainsi, par exemple, en utilisant la commande&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zxsuite mobile setAccountMobilePassword manager@company.ru Z1mBr @,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous donnerez à l'utilisateur manager@company.ru le mot de passe Z1mBr @. </font><font style="vertical-align: inherit;">En utilisant la commande&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zxsuite mobile getAccountMobilePassword manager@company.ru,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez voir le mot de passe mobile de l'utilisateur manager@company.ru, et en utilisant la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zxsuite mobile unsetAccountMobilePassword manager@company.ru,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez supprimer complètement le mot de passe mobile de l'utilisateur spécifié.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour toutes questions relatives à la Suite Zextras, vous pouvez contacter le représentant de la société Zextras Ekaterina Triandafilidi par e-mail katerina@zextras.com</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490812/index.html">Expérience de soumission de certification professionnelle de printemps 5</a></li>
<li><a href="../fr490816/index.html">Comment les sites de commerce électronique résistent-ils aux botnets AuthBots?</a></li>
<li><a href="../fr490820/index.html">Tous les Habr dans une seule base</a></li>
<li><a href="../fr490826/index.html">La source de l'efficacité de la production</a></li>
<li><a href="../fr490828/index.html">Créer roguelike dans Unity à partir de zéro</a></li>
<li><a href="../fr490832/index.html">Marquage des chaussures: en mettant en circulation 2 millions de codes de marquage «1C» + «Honest Sign»</a></li>
<li><a href="../fr490836/index.html">Comment ouvrir des commentaires et ne pas se noyer dans le spam</a></li>
<li><a href="../fr490838/index.html">Le WiFi 6 est là: ce que le marché propose et pourquoi avons-nous besoin de cette technologie</a></li>
<li><a href="../fr490840/index.html">La planification des ressources. Partie 4.1. Avant de faire un plan de ressources</a></li>
<li><a href="../fr490842/index.html">GPT-2 en images (visualisation des modèles de langage Transformer)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>