<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ğŸ¿ â¹ï¸ ğŸ¤š CSEï¼švCloudã®ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã®Kubernetes ğŸ‘·ğŸ» ğŸ‘¨ğŸ¾â€ğŸ¤ ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼
 
 å¶ç„¶ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æœ€è¿‘ã®ã“ã¨ã¯è¨€ã†ã¾ã§ã‚‚ãªãã€ç§ãŸã¡ã®å°è¦æ¨¡ãªé–‹ç™ºãƒãƒ¼ãƒ ãŒæ€¥æˆé•·ã—ã€ä¸€éƒ¨ã®ï¼ˆãã—ã¦é•·æœŸçš„ã«ã¯ã™ã¹ã¦ã®ï¼‰è£½å“ã‚’Kubernetesã«ç§»è¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
 
 ã“ã‚Œã«ã¯å¤šãã®ç†ç”±ãŒã‚ã‚Šã¾ã—ãŸãŒã€ç§ãŸã¡ã®è©±ã¯ãƒ›ãƒªãƒãƒ¼ã«ã¤ã„ã¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CSEï¼švCloudã®ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã®Kubernetes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/linxdatacenter/blog/472752/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pk/0v/u9/pk0vu9vp36lten5zgvswrtyzpl8.png"></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å¶ç„¶ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æœ€è¿‘ã®ã“ã¨ã¯è¨€ã†ã¾ã§ã‚‚ãªãã€ç§ãŸã¡ã®å°è¦æ¨¡ãªé–‹ç™ºãƒãƒ¼ãƒ ãŒæ€¥æˆé•·ã—ã€ä¸€éƒ¨ã®ï¼ˆãã—ã¦é•·æœŸçš„ã«ã¯ã™ã¹ã¦ã®ï¼‰è£½å“ã‚’Kubernetesã«ç§»è¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«ã¯å¤šãã®ç†ç”±ãŒã‚ã‚Šã¾ã—ãŸãŒã€ç§ãŸã¡ã®è©±ã¯ãƒ›ãƒªãƒãƒ¼ã«ã¤ã„ã¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã«é–¢ã—ã¦ã¯ã€ç§ãŸã¡ã«ã¯ã»ã¨ã‚“ã©é¸æŠè‚¢ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ vCloud DirectorãŠã‚ˆã³vCloud Directorã€‚æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã€é–‹å§‹ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚‚ã†ä¸€åº¦ã€ã€Œãƒãƒ¼ãƒ‰ãªæ–¹æ³•ã€ã‚’èª¿ã¹ãŸã¨ã“ã‚ã€æ˜¨æ—¥ã€å°‘ãªãã¨ã‚‚åŸºæœ¬çš„ãªãƒ—ãƒ­ã‚»ã‚¹ï¼ˆå±•é–‹ã‚„ã‚µã‚¤ã‚¸ãƒ³ã‚°ãªã©ï¼‰ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ã§ã‚ã‚‹ã¨ã„ã†çµè«–ã«è‡³ã‚Šã¾ã—ãŸã€‚ Googleã«æ·±ãæ²¡é ­ã™ã‚‹ã¨ã€VMware Container Service Extensionï¼ˆCSEï¼‰ãªã©ã®è£½å“ãŒæ˜ã‚‰ã‹ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã¯ã€vCloudã§ã®k8sã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ä½œæˆã¨ã‚µã‚¤ã‚¸ãƒ³ã‚°ã‚’è‡ªå‹•åŒ–ã§ãã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹è£½å“ã§ã™ã€‚</font></font><a name="habracut"></a><br>
<blockquote>Disclaimer: CSE   ,       .      ,       open-source,       :)</blockquote><br>
<h2>  CSE</h2><br>
<ol>
<li>        vCloud    routed-  . <i><b>:</b>          ,    Firewall/NAT.</i><br>
<br>
   .     10.0.240.0/24:<br>
<br>
<img src="https://habrastorage.org/webt/lz/3i/0e/lz3i0euak9ln8kfp1fmbwuobcdi.png"><br>
<blockquote>       - ,   VPN     .    SSL-VPN,   Edge Gateway  .</blockquote></li>
<li>   CSE  ,      k8s.         <s> </s> ,   . <br>
<br>
    Python  3.7.3      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">vcd-cli</a>,      .<br>
<br>
<pre><code class="bash hljs">pip3 install vcd-cli<font></font>
<font></font>
pip3 install container-service-extension<font></font>
</code></pre></li>
<li>    CSE   :<br>
<br>
<pre><code class="plaintext hljs"># vcd cse version<font></font>
Error: No such command "cse".<font></font>
</code></pre><br>
,  .</li>
<li> , CSE      vcd-cli.<br>
     vcd-cli   :<br>
 <br>
<pre><code class="plaintext hljs"># vcd login MyCloud.provider.com org-dev admin<font></font>
Password: <font></font>
admin logged in, org: 'org-dev', vdc: 'org-dev_vDC01'<font></font>
</code></pre></li>
<li>  vcd-cli    <i>~/.vcd-cli/profiles.yaml</i><br>
     :<br>
<br>
<pre><code class="plaintext hljs">extensions:<font></font>
  - container_service_extension.client.cse<font></font>
</code></pre></li>
<li>   :<br>
<br>
<pre><code class="plaintext hljs"># vcd cse version<font></font>
CSE, Container Service Extension for VMware vCloud Director, version 2.5.0<font></font>
</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚§ãƒ¼ã‚ºãŒå®Œäº†ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">æœ€åˆã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚¿ã®å°å…¥</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CSEã«ã¯ã„ãã¤ã‹ã®ä½¿ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ã‚»ãƒƒãƒˆãŒã‚ã‚Šã€ãã®ã™ã¹ã¦ã‚’</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã“ã“</font></a><font style="vertical-align: inherit;">ã§è¡¨ç¤ºã§ã</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font></a><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åˆã«ã€å°†æ¥ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ã‚­ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒãƒ¼ãƒ‰ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ã¯ç„¡åŠ¹ã«ãªã‚‹ãŸã‚ã€ã“ã®ç‚¹ã¯é‡è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ã‚­ãƒ¼ã‚’æŒ‡å®šã—ãªã„å ´åˆã€ä»®æƒ³ãƒã‚·ãƒ³ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ä»‹ã—ã¦å¤šãã®ä½œæ¥­ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ãŒã€ã“ã‚Œã¯ä¾¿åˆ©ãªã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># ssh-keygen<font></font>
Generating public/private rsa key pair.<font></font>
Enter file in which to save the key (/root/.ssh/id_rsa): <font></font>
Created directory '/root/.ssh'.<font></font>
Enter passphrase (empty for no passphrase): <font></font>
Enter same passphrase again: <font></font>
Your identification has been saved in /root/.ssh/id_rsa.<font></font>
Your public key has been saved in /root/.ssh/id_rsa.pub.<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ä½œæˆã‚’é–‹å§‹ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">vcd cse cluster create MyCluster --network k8s_cluster_net --ssh-key ~/.ssh/id_rsa.pub --nodes 3 --<span class="hljs-built_in">enable</span>-nfs</code></pre></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å ´åˆ</font><i><font style="vertical-align: inherit;">ï¼šã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã‚‹ã‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“ã€‚</font></i><i><font style="vertical-align: inherit;">å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚</font></i><font style="vertical-align: inherit;">-ä¸Šè¨˜ã®ã‚ˆã†ã«vcd-cliã‚’vCloudã«å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã€å†è©¦è¡Œã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šå›ã¯ã€ã™ã¹ã¦å•é¡Œãªãã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹ã‚¿ã‚¹ã‚¯ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="bash hljs">cluster operation: Creating cluster vApp <span class="hljs-string">'MyCluster'</span> (38959587-54f4-4a49-8f2e-61c3a3e879e0) from template <span class="hljs-string">'photon-v2_k8-1.12_weave-2.3.0'</span> (revision 1)
</code></pre></li>
<li>     20 .      .<br>
<blockquote><ul>
<li>--network â€”    .</li>
<li>--ssh-key â€”   ,      .</li>
<li>--nodes n â€”  Worker  .    ,   CSE.</li>
<li>--enable-nfs â€”     NFS   persistent volumes.   ,   ,   ,    .</li>
</ul><br>
</blockquote></li>
<li>   vCloud      .<br>
<br>
<img src="https://habrastorage.org/webt/x0/ni/qk/x0niqksfidmbunupuflf61u7qww.png"></li>
<li>     ,    .</li>
<li>    <i>vcd cse cluster info MyCluster</i>.<br>
<br>
<img src="https://habrastorage.org/webt/fx/4m/tj/fx4mtj6uzscxl3pns7shd8lni6a.png"></li>
<li>        <i>kubectl</i>.<br>
<br>
<pre><code class="plaintext hljs"># vcd cse cluster config MyCluster &gt; ./.kube/config
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ãŸã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/1k/58/vu1k58dcahsedsulmu_vixrstge.png"></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã»ã©å˜ç´”ã§ã¯ãªã„</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ™‚ç‚¹ã§ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¯ã€æ°¸ç¶šçš„ãªãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒã‚ã‚‹ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§ã¯ãªã„ã¨ã—ã¦ã‚‚ã€æ¡ä»¶ä»˜ãã§å‹•ä½œã—ã¦ã„ã‚‹ã¨è¦‹ãªã™ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§ãŸã¡ã¯vCloudã«ã„ã‚‹ã®ã§ã€vSphereãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ä½¿ç”¨ã¯å¤±æ•—ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--enable-nfs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ãŒã€æœ€å¾Œã¾ã§æ©Ÿèƒ½ã—ã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">æ‰‹å‹•èª¿æ•´ãŒå¿…è¦ã§ã™ã€‚</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é–‹å§‹ã™ã‚‹ã«ã¯ã€ãƒãƒ¼ãƒ‰ã§vCloudã«å€‹åˆ¥ã®ç‹¬ç«‹ãƒ‡ã‚£ã‚¹ã‚¯ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¦ã‚‚ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¨ã¨ã‚‚ã«ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆãªã„ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’NFSã«æ¥ç¶šã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># vcd disk create nfs-shares-1 100g --description 'Kubernetes NFS shares'<font></font>
# vcd vapp attach mycluster nfsd-9604 nfs-shares-1<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã®å¾Œã€sshã‚’å®Ÿè¡Œã—ã¾ã™ï¼ˆå®Ÿéš›ã«ã‚­ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸã‹ï¼Ÿï¼‰NFSãƒãƒ¼ãƒ‰ã«æ¥ç¶šã—ã€æœ€å¾Œã«ãƒ‡ã‚£ã‚¹ã‚¯ã‚’æ¥ç¶šã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">root@nfsd-9604:~# parted /dev/sdb<font></font>
(parted) mklabel gpt<font></font>
Warning: The existing disk label on /dev/sdb will be destroyed and all data on<font></font>
this disk will be lost. Do you want to continue?<font></font>
Yes/No? yes<font></font>
(parted) unit GB<font></font>
(parted) mkpart primary 0 100<font></font>
(parted) print<font></font>
Model: VMware Virtual disk (scsi)<font></font>
Disk /dev/sdb: 100GB<font></font>
Sector size (logical/physical): 512B/512B<font></font>
Partition Table: gpt<font></font>
Disk Flags:<font></font>
<font></font>
Number  Start   End    Size   File system  Name     Flags<font></font>
 1      0.00GB  100GB  100GB               primary<font></font>
<font></font>
(parted) quit<font></font>
root@nfsd-9604:~# mkfs -t ext4 /dev/sdb1<font></font>
Creating filesystem with 24413696 4k blocks and 6111232 inodes<font></font>
Filesystem UUID: 8622c0f5-4044-4ebf-95a5-0372256b34f0<font></font>
Superblock backups stored on blocks:<font></font>
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,<font></font>
	4096000, 7962624, 11239424, 20480000, 23887872<font></font>
<font></font>
Allocating group tables: done<font></font>
Writing inode tables: done<font></font>
Creating journal (32768 blocks): done<font></font>
Writing superblocks and filesystem accounting information: done<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã“ã«æ–°ã—ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">mkdir /export<font></font>
echo '/dev/sdb1  /export   ext4  defaults   0 0' &gt;&gt; /etc/fstab<font></font>
mount -a<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5ã¤ã®ãƒ†ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç”¨ã«å…±æœ‰ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">&gt;<span class="hljs-built_in">cd</span> /<span class="hljs-built_in">export</span><font></font>
&gt;mkdir vol1 vol2 vol3 vol4 vol5<font></font>
&gt;vi /etc/exports<font></font>
<span class="hljs-comment">#    </span>
/<span class="hljs-built_in">export</span>/vol1 *(rw,sync,no_root_squash,no_subtree_check)<font></font>
/<span class="hljs-built_in">export</span>/vol2 *(rw,sync,no_root_squash,no_subtree_check)<font></font>
/<span class="hljs-built_in">export</span>/vol3 *(rw,sync,no_root_squash,no_subtree_check)<font></font>
/<span class="hljs-built_in">export</span>/vol4 *(rw,sync,no_root_squash,no_subtree_check)<font></font>
/<span class="hljs-built_in">export</span>/vol5 *(rw,sync,no_root_squash,no_subtree_check)
<span class="hljs-comment">#:wq! ;)</span>
<span class="hljs-comment"># -  </span><font></font>
&gt;exportfs -r<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã™ã¹ã¦ã®é­”æ³•ã®å¾Œã€æ¬¡ã®ã‚ˆã†ã«ç§ãŸã¡ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§PVã¨PVCã‚’ä½œæˆã§ãã¾ã™ï¼š</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PV</font></font></b><br>
<br>
<pre><code class="bash hljs">cat &lt;&lt;EOF | kubectl apply -f -<font></font>
apiVersion: v1<font></font>
kind: PersistentVolume<font></font>
metadata:<font></font>
  name: nfs-vol1<font></font>
spec:<font></font>
  capacity:<font></font>
    storage: 10Gi<font></font>
  accessModes:<font></font>
    - ReadWriteMany<font></font>
  nfs:<font></font>
    <span class="hljs-comment"># Same IP as the NFS host we ssh'ed to earlier.</span><font></font>
    server: 10.150.200.22<font></font>
    path: <span class="hljs-string">"/export/vol1"</span><font></font>
EOF<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¡©ãƒ“</font></font></b><br>
<br>
<pre><code class="bash hljs">cat &lt;&lt;EOF | kubectl apply -f -<font></font>
apiVersion: v1<font></font>
kind: PersistentVolumeClaim<font></font>
metadata:<font></font>
  name: nfs-pvc<font></font>
spec:<font></font>
  accessModes:<font></font>
    - ReadWriteMany<font></font>
  storageClassName: <span class="hljs-string">""</span><font></font>
  resources:<font></font>
    requests:<font></font>
      storage: 10Gi<font></font>
EOF<font></font>
</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«ã‚ˆã‚Šã€1ã¤ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ä½œæˆã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãŒçµ‚äº†ã—ã€ãã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®å±¥æ­´ãŒå§‹ã¾ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŠã¾ã‘ã¨ã—ã¦ã€æ™‚ã€…</font><font style="vertical-align: inherit;">ãƒªã‚½ãƒ¼ã‚¹</font><font style="vertical-align: inherit;">ã‚’ç¯€ç´„ã§ãã‚‹ã‹ã©ã†</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ã«ã‹ã‹ã‚ã‚‰ãš</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã•ã‚‰ã«2ã¤ã®ä¾¿åˆ©ãªCSEã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#    8  </span><font></font>
&gt;cse cluster resize MyCluster --network k8s_cluster_net --nodes 8<font></font>
<font></font>
<span class="hljs-comment">#        </span><font></font>
&gt;vcd cse node delete MyCluster node-1a2v node-6685 --yes<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’ãŠå¯„ã›ãã ã•ã„ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472738/index.html">æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ASP.NET MVCã‹ã‚‰ASP.NET Coreã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã€‚å®Ÿç”¨ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="../ja472744/index.html">MRPãŒæ©Ÿèƒ½ã—ãªã„...ä»£æ›¿æ‰‹æ®µã¯ä½•ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja472746/index.html">ç®¡ç†è€…ç”¨ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚µãƒ¼ãƒãƒ¼ã€‚å˜ä¸€ã®SSHã‚®ãƒ£ãƒƒãƒ—ã§ã¯ãªã„</a></li>
<li><a href="../ja472748/index.html">ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒ–ãƒ©ã‚¦ã‚¶ã¾ãŸã¯ã‚µã‚¤ãƒˆã®ãªã„ç”Ÿæ´»</a></li>
<li><a href="../ja472750/index.html">OKã€æœ¬å½“ã«KubernetesãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja472754/index.html">æœˆã«è‹±èªã‚’è©±ã™æ–¹æ³•ã€‚9ã¤ã®ç°¡å˜ã§å®Ÿç¸¾ã®ã‚ã‚‹ã‚¹ãƒ†ãƒƒãƒ—</a></li>
<li><a href="../ja472758/index.html">ææ¡ˆï¼štry-çµ„ã¿è¾¼ã¿ã®ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½</a></li>
<li><a href="../ja472760/index.html">è¨ˆç®—æ™‚é–“ã‚’æ•°å¹´ã‹ã‚‰æ•°åˆ†ã«çŸ­ç¸®ã—ã¾ã™ã€‚é‡å­æ©Ÿæ¢°å­¦ç¿’ã«ã¤ã„ã¦</a></li>
<li><a href="../ja472766/index.html">py.testã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼åŒ–</a></li>
<li><a href="../ja472768/index.html">æ¡ç”¨ã€è§£é›‡ã€ç®¡ç†ã‹ã‚‰é–‹ç™ºã«æˆ»ã‚‹æ–¹æ³•ï¼šBadoo Techleads Meetupï¼ƒ5ã®ãƒ“ãƒ‡ã‚ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>