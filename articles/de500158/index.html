<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🌾 👶🏾 👨‍🏫 SwiftUI-Interaktion mit Redux 🤶🏾 🕉️ 🌙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. In diesem Artikel werden wir über das SwiftUI- Framework in Verbindung mit Redux sprechen. Mit diesem Bundle können wir schnell u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SwiftUI-Interaktion mit Redux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500158/"><img src="https://habrastorage.org/webt/0a/1b/6r/0a1b6rckxwuh5wqlxbsyqygrf94.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hallo alle zusammen. In diesem Artikel werden wir über das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Framework </font><font style="vertical-align: inherit;">in Verbindung mit Redux </font><font style="vertical-align: inherit;">sprechen. </font><font style="vertical-align: inherit;">Mit diesem Bundle können wir schnell und einfach Anwendungen erstellen. SwiftUI wird im Gegensatz zu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIKit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zum Erstellen einer Benutzeroberfläche im deklarativen Stil </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">verwendet</font></a><font style="vertical-align: inherit;"> . Redux dient wiederum dazu, den Status der Anwendung zu steuern. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein grundlegendes Konzept in SwiftUI und Redux. In unserem Fall ist dies nicht nur ein Schlagwort, sondern auch eine Einheit, die sie verbindet und es ihnen ermöglicht, sehr gut zusammenzuarbeiten. In diesem Artikel werde ich versuchen zu zeigen, dass die obige These wahr ist, also fangen wir an! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir uns mit dem Schreiben von Code befassen, wollen wir zunächst verstehen, was Redux ist und woraus es besteht.</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine Open Source-Bibliothek zum Verwalten des Status einer Anwendung. </font><font style="vertical-align: inherit;">Wird am häufigsten in Verbindung mit React oder Angular verwendet, um die Client-Seite zu entwickeln. </font><font style="vertical-align: inherit;">Enthält eine Reihe von Tools, um die Übertragung von Speicherdaten durch den Kontext erheblich zu vereinfachen. </font><font style="vertical-align: inherit;">Schöpfer: Daniil Abramov und Andrew Clark. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für mich ist Redux nicht nur eine Bibliothek, es ist bereits etwas mehr, ich schreibe es den Architekturentscheidungen zu, auf denen die Anwendung basiert. </font><font style="vertical-align: inherit;">In erster Linie aufgrund seines unidirektionalen Datenstroms.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multidirektionaler oder unidirektionaler Fluss</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu erklären, was ich unter Datenfluss verstehe, werde ich das folgende Beispiel geben. Eine mit VIPER erstellte Anwendung unterstützt einen multidirektionalen Datenstrom zwischen Modulen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/1h/3j/a61h3juugoawz8ij3xt_mot6brm.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redux wiederum ist ein unidirektionaler Datenstrom und lässt sich anhand seiner Bestandteile am einfachsten erklären. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/yc/hl/hmychlrpj6tbe0loeykh5wax8hk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns ein wenig detailliert über jede Redux-Komponente sprechen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Staat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die einzige Quelle der Wahrheit, die alle notwendigen Informationen für unsere Anwendung enthält. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die Absicht, den Zustand zu ändern. In unserem Fall ist dies eine Aufzählung, die neue Informationen enthält, die wir im aktuellen Status hinzufügen oder ändern möchten. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzierstück</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ist eine Funktion, die Aktion und aktuellen Status als Parameter verwendet und einen neuen Status zurückgibt. </font><font style="vertical-align: inherit;">Dies ist der einzige Weg, um es zu erstellen. </font><font style="vertical-align: inherit;">Es ist auch erwähnenswert, dass diese Funktion sauber sein sollte. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein Objekt, das State enthält und alle erforderlichen Tools zum Aktualisieren bereitstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich glaube, dass die Theorie ausreicht, lassen Sie uns zur Praxis übergehen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux-Implementierung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der einfachsten Möglichkeiten, ein Tool kennenzulernen, besteht darin, es zu verwenden, wie mein Programmierlehrer sagte. Wenn Sie eine Programmiersprache lernen möchten, schreiben Sie eine Anwendung darauf. Erstellen wir also eine kleine Anwendung, lassen Sie es ein einfaches Trainingstagebuch sein, es gibt nur vier Optionen: Die erste dient zum Anzeigen einer Liste von Trainingseinheiten, die zweite zum Hinzufügen eines abgeschlossenen Trainings, die dritte zum Löschen und die vierte zum Sortieren von Trainingseinheiten. Ziemlich einfache Anwendung, aber gleichzeitig können wir uns mit Redux und SwiftUI vertraut machen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie ein sauberes Projekt in Xcode, geben Sie ihm den Namen WorkoutsDiary und wählen Sie vor allem SwiftUI für die Benutzeroberfläche aus, da wir SwiftUI zum Erstellen unserer Benutzeroberfläche verwenden werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Erstellen des Projekts. </font><font style="vertical-align: inherit;">Erstellen Sie eine Trainingsstruktur, die für das von uns abgeschlossene Training verantwortlich ist.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Workout</span>: <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">UUID</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">distance</span>: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> date: <span class="hljs-type">Date</span>
    <span class="hljs-keyword">let</span> complexity: <span class="hljs-type">Complexity</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, ist an dieser Struktur nichts Verrücktes, das ID-Feld muss dem identifizierbaren Protokoll entsprechen, und das Komplexitätsfeld ist nur eine Aufzählung mit der folgenden Definition:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Complexity</span>: <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">case</span> low
    <span class="hljs-keyword">case</span> medium
    <span class="hljs-keyword">case</span> high<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir nun alles haben, was wir für die Implementierung von Redux benötigen, erstellen wir zunächst einen Status.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AppState</span> </span>{
    <span class="hljs-keyword">var</span> workouts: [<span class="hljs-type">Workout</span>]
    <span class="hljs-keyword">var</span> sortType: <span class="hljs-type">SortType?</span><font></font>
}<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine einfache Struktur, die zwei Felder enthält: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workouts</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortType</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Das erste ist eine Liste von Workouts und das zweite ist ein optionales Feld, das bestimmt, wie die Liste sortiert wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SortType ist eine Aufzählung, die wie folgt definiert ist:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">SortType</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">distance</span>
    <span class="hljs-keyword">case</span> complexity<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Einfachheit halber werden wir nach Entfernung und Schwierigkeit in absteigender Reihenfolge sortieren, dh je höher die Komplexität unseres Trainings ist, desto höher wird es in unserer Liste angezeigt. </font><font style="vertical-align: inherit;">Es ist erwähnenswert, dass sortType ein optionaler Typ ist und null sein kann, was bedeutet, dass die Liste im Moment nicht sortiert ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden die Implementierung unserer Komponenten fortsetzen. </font><font style="vertical-align: inherit;">Lassen Sie uns eine </font><b><font style="vertical-align: inherit;">Aktion</font></b><font style="vertical-align: inherit;"> erstellen</font></font><b><font style="vertical-align: inherit;"></font></b><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Action</span> </span>{
    <span class="hljs-keyword">case</span> addWorkout(<span class="hljs-number">_</span> workout: <span class="hljs-type">Workout</span>)
    <span class="hljs-keyword">case</span> removeWorkout(at: <span class="hljs-type">IndexSet</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">sort</span>(by: <span class="hljs-type">SortType</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie wir sehen können, ist </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine Aufzählung mit drei Fällen, die uns die Möglichkeit geben, unseren </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Staat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu manipulieren </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addWorkout (_ Workout: Workout)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fügt einfach ein Workout hinzu, das als Parameter übergeben wird.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">removeWorkout (at: IndexSet)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entfernt das Element am angegebenen Index.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sort (nach: SortType)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sortiert die Trainingsliste nach dem angegebenen </font><i><font style="vertical-align: inherit;">Sortiertyp</font></i><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns eine der komplexesten Komponenten erstellen, nämlich </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reducer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reducer</span><span class="hljs-params">(state: AppState, action: Action)</span></span> -&gt; <span class="hljs-type">AppState</span> {
    <span class="hljs-keyword">var</span> state = state<font></font>
    <font></font>
    <span class="hljs-keyword">switch</span> action {
    <span class="hljs-keyword">case</span> .addWorkout(<span class="hljs-keyword">let</span> workout):<font></font>
        state.workouts.append(workout)<font></font>
        <font></font>
    <span class="hljs-keyword">case</span> .removeWorkout(<span class="hljs-keyword">let</span> indexSet):<font></font>
        state.workouts.remove(atOffsets: indexSet)<font></font>
    <font></font>
    <span class="hljs-keyword">case</span> .<span class="hljs-built_in">sort</span>(<span class="hljs-keyword">let</span> type):
        <span class="hljs-keyword">switch</span> type {
        <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.<span class="hljs-built_in">distance</span> &gt; $<span class="hljs-number">1</span>.<span class="hljs-built_in">distance</span> }<font></font>
            state.sortType = .<span class="hljs-built_in">distance</span>
        <span class="hljs-keyword">case</span> .complexity:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.complexity.rawValue &gt; $<span class="hljs-number">1</span>.complexity.rawValue }<font></font>
            state.sortType = .complexity<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Funktion, die wir geschrieben haben, ist recht einfach und funktioniert wie folgt:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopiert den aktuellen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um damit zu arbeiten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basierend auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aktualisieren wir unseren kopierten </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie den aktualisierten </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status zurück</font></font></b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist erwähnenswert, dass die obige Funktion eine reine Funktion ist, und das wollten wir erreichen! </font><font style="vertical-align: inherit;">Eine Funktion muss zwei Bedingungen erfüllen, um als „rein“ zu gelten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jedes Mal gibt die Funktion dasselbe Ergebnis zurück, wenn sie mit demselben Datensatz aufgerufen wird.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt keine Nebenwirkungen.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das letzte fehlende Redux-Element ist der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Implementieren wir es also für unsere Anwendung.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Store</span>: <span class="hljs-title">ObservableObject</span> </span>{<font></font>
     @<span class="hljs-type">Published</span> <span class="hljs-keyword">private</span>(<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> state: <span class="hljs-type">AppState</span><font></font>
     <font></font>
     <span class="hljs-keyword">init</span>(state: <span class="hljs-type">AppState</span> = .<span class="hljs-keyword">init</span>(workouts: [<span class="hljs-type">Workout</span>]())) {
         <span class="hljs-keyword">self</span>.state = state<font></font>
     }<font></font>
     <font></font>
     <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dispatch</span><span class="hljs-params">(action: Action)</span></span> {<font></font>
         state = reducer(state: state, action: action)<font></font>
     }<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Implementierungen des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Objekts </font><font style="vertical-align: inherit;">nutzen wir alle Vorteile des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObservableObject-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokolls </font><font style="vertical-align: inherit;">, wodurch das Schreiben einer großen Menge von Vorlagencode oder die Verwendung von Frameworks von Drittanbietern ausgeschlossen werden kann. Die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eigenschaft </font><font style="vertical-align: inherit;">ist schreibgeschützt und verwendet den Wrapper der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ Publishing-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eigenschaft. </font><b><font style="vertical-align: inherit;">Dies</font></b><font style="vertical-align: inherit;"> bedeutet, dass SwiftUI bei jeder Änderung Benachrichtigungen erhält. Die init-Methode nimmt einen Anfangszustand als Parameter mit einem bestimmten Standardwert in Form eines leeren Arrays von Workout-Elementen an. Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versandfunktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die einzige Möglichkeit, den Status zu aktualisieren: Sie ersetzt den aktuellen Status durch den neuen Status, der von der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzierungsfunktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basierend auf erstellt wurde</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die als Parameter übergeben wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir alle Komponenten von Redux implementiert haben, können wir mit der Erstellung einer Benutzeroberfläche für unsere Anwendung beginnen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsimplementierung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Benutzeroberfläche unserer Anwendung wird recht einfach sein. </font><font style="vertical-align: inherit;">Und es wird aus zwei kleinen Bildschirmen bestehen. </font><font style="vertical-align: inherit;">Der erste und Hauptbildschirm ist ein Bildschirm, auf dem eine Liste der Trainingseinheiten angezeigt wird. </font><font style="vertical-align: inherit;">Der zweite Bildschirm ist der Bildschirm zum Hinzufügen von Training. </font><font style="vertical-align: inherit;">Außerdem wird jedes Element in einer bestimmten Farbe angezeigt. Die Farbe spiegelt die Komplexität des Trainings wider. </font><font style="vertical-align: inherit;">Die roten Blutkörperchen zeigen die höchste Schwierigkeit des Trainings an, Orange ist für die durchschnittliche Schwierigkeit verantwortlich und Grün ist für das einfachste Training verantwortlich.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden die Schnittstelle mit einem neuen Framework von Apple namens SwiftUI implementieren. SwiftUI ersetzt unser bekanntes UIKit. SwiftUI unterscheidet sich grundlegend von UIKit, vor allem darin, dass es ein deklarativer Ansatz zum Schreiben von UI-Elementen mit Code ist. In diesem Artikel werde ich nicht auf alle Feinheiten von SwiftUI eingehen, und ich gehe davon aus, dass Sie bereits Erfahrung mit SwiftUI haben. Wenn Sie keine Kenntnisse über SwiftUI haben, empfehle ich Ihnen, die Dokumentation von Apple zu beachten, nämlich die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verschiedenen vollständigen Tutorials</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit schrittweiser Hinzufügung und interaktiver Anzeige des angezeigten Ergebnisses. Es gibt auch Links zu Beispielprojekten. Mit diesen Tutorials können Sie schnell in die deklarative Welt von SwiftUI eintauchen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist auch erwähnenswert, dass SwiftUI noch nicht für Produktionsprojekte bereit ist, zu jung ist und mehr als ein Jahr vergeht, bevor es auf diese Weise verwendet werden kann. Vergessen Sie auch nicht, dass nur iOS 13.0+ Versionen unterstützt werden. Es ist aber auch erwähnenswert, dass SwiftUI auf allen Apple-Plattformen funktioniert, was ein großer Vorteil gegenüber UIKit ist! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir die Implementierung vom Hauptbildschirm unserer Anwendung aus. Gehen Sie zur Datei </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView.swift und</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ändern Sie den aktuellen Code in diesen.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">WorkoutListView</span>()<font></font>
                .navigationBarTitle(<span class="hljs-string">"Workouts diary"</span>, displayMode: .inline)<font></font>
                .navigationBarItems(<font></font>
                    leading: <span class="hljs-type">AddButton</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode),<font></font>
                    trailing: <span class="hljs-type">TrailingView</span>()<font></font>
                )<font></font>
        }<font></font>
        .sheet(isPresented: $isAddingMode) {<font></font>
            <span class="hljs-type">AddWorkoutView</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode)<font></font>
                .environmentObject(<span class="hljs-keyword">self</span>.store)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Inhaltsansicht ist eine Standardansicht in SwiftUI. </font><font style="vertical-align: inherit;">Der aus meiner Sicht wichtigste Teil ist die Codezeile, die die Speichervariable enthält. </font><font style="vertical-align: inherit;">Wir werden @EnvironmentObject erstellen. </font><font style="vertical-align: inherit;">Auf diese Weise können wir Daten aus dem Store verwenden, wo immer dies erforderlich ist, und unsere Ansichten werden automatisch aktualisiert, wenn die Daten geändert werden. </font><font style="vertical-align: inherit;">Dies ist so etwas wie Singleton für unseren Shop.</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie auch die folgende Codezeile:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zustand</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ist ein Wrapper, mit dem wir den Status einer Ansicht anzeigen können. </font><font style="vertical-align: inherit;">SwiftUI speichert es in einem speziellen internen Speicher außerhalb der View-Struktur. </font><font style="vertical-align: inherit;">Nur eine verknüpfte Ansicht kann darauf zugreifen. </font><font style="vertical-align: inherit;">Einmal der Eigenschaftswert</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zustand</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Änderungen, SwiftUI erstellt die Ansicht neu, um Statusänderungen zu berücksichtigen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ul/ab/qx/ulabqxoyqpmsk3vndncjq3-i-1m.png" alt="Bild" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann gehen wir zur Datei SceneDelegate.swift und fügen der Methode den Code hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(
        <span class="hljs-number">_</span> scene: UIScene,
        willConnectTo session: UISceneSession,
        options connectionOptions: UIScene.ConnectionOptions
    )</span></span> {
        <span class="hljs-keyword">let</span> contentView = <span class="hljs-type">ContentView</span>().environmentObject(<span class="hljs-type">Store</span>())<font></font>
        <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: contentView)
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf die gleiche Weise kann jedes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@EnvironmentObject an</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jede </font><b><font style="vertical-align: inherit;">untergeordnete</font></b><font style="vertical-align: inherit;"> Darstellung in der gesamten Anwendung übergeben werden, und all dies ist dank der Umgebung möglich. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Variable </font><i><font style="vertical-align: inherit;">IsAddingMode ist</font></i><font style="vertical-align: inherit;"> markiert</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zustand</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und gibt an, ob die sekundäre Ansicht angezeigt wird oder nicht. </font><font style="vertical-align: inherit;">Die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichervariable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird </font><font style="vertical-align: inherit;">automatisch von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geerbt </font><font style="vertical-align: inherit;">, und wir müssen sie nicht explizit übergeben, aber wir müssen dies für </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tun </font><font style="vertical-align: inherit;">, da sie in Form eines Blattes dargestellt wird, das kein </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untergeordnetes Element</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von </font><b><font style="vertical-align: inherit;">ContentView ist</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie nun eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die von View erbt. </font><font style="vertical-align: inherit;">Erstellen Sie eine neue schnelle Datei mit dem Namen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutListView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">List</span> {
            <span class="hljs-type">ForEach</span>(store.state.workouts) {
                <span class="hljs-type">WorkoutView</span>(workout: $<span class="hljs-number">0</span>)<font></font>
            }<font></font>
            .onDelete {<font></font>
                <span class="hljs-keyword">self</span>.store.dispatch(action: .removeWorkout(at: $<span class="hljs-number">0</span>))<font></font>
            }<font></font>
            .listRowInsets(<span class="hljs-type">EdgeInsets</span>())<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansicht, die das Containerlistenelement verwendet, um eine Liste der Trainingseinheiten anzuzeigen. Die Funktion </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDelete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird zum Löschen eines Trainings verwendet und verwendet die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktion removeWorkout</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die mit der </font><font style="vertical-align: inherit;">vom </font><b><font style="vertical-align: inherit;">Store</font></b><font style="vertical-align: inherit;"> bereitgestellten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versandfunktion ausgeführt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird </font><font style="vertical-align: inherit;">. Um das Training in der Liste anzuzeigen, wird WorkoutView verwendet. </font><font style="vertical-align: inherit;">
Erstellen Sie eine weitere Datei </font><i><font style="vertical-align: inherit;">WorkoutView.swift,</font></i><font style="vertical-align: inherit;"> die für die Anzeige unseres Artikels in der Liste verantwortlich ist.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">let</span> workout: <span class="hljs-type">Workout</span><font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> backgroundColor: <span class="hljs-type">Color</span> {
        <span class="hljs-keyword">switch</span> workout.complexity {
        <span class="hljs-keyword">case</span> .low:
            <span class="hljs-keyword">return</span> .green
        <span class="hljs-keyword">case</span> .medium:
            <span class="hljs-keyword">return</span> .orange
        <span class="hljs-keyword">case</span> .high:
            <span class="hljs-keyword">return</span> .red<font></font>
        }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span> {
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(workout.name)
                <span class="hljs-type">Text</span>(<span class="hljs-string">"Distance:"</span> + workout.<span class="hljs-built_in">distance</span> + <span class="hljs-string">"km"</span>)<font></font>
                    .font(.subheadline)<font></font>
            }<font></font>
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(simpleFormat(workout.date))<font></font>
            }<font></font>
        }<font></font>
        .padding()<font></font>
        .background(backgroundColor)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">WorkoutView</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleFormat</span><span class="hljs-params">(<span class="hljs-number">_</span> date: Date)</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">let</span> dateFormatter = <span class="hljs-type">DateFormatter</span>()<font></font>
        dateFormatter.dateFormat = <span class="hljs-string">"dd MMM yyyy"</span>
        dateFormatter.locale = .<span class="hljs-keyword">init</span>(identifier: <span class="hljs-string">"en_GB"</span>)
        <span class="hljs-keyword">return</span> dateFormatter.string(from: date)<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Ansicht verwendet das Trainingsobjekt als Parameter und wird basierend auf seinen Eigenschaften konfiguriert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um der Liste ein neues Element hinzuzufügen, müssen Sie den Parameter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ändern </font><font style="vertical-align: inherit;">, um </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anzuzeigen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Diese Verantwortung </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liegt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bei </font><b><font style="vertical-align: inherit;">AddButton</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddButton</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">true</span> }) {
            <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"plus"</span>)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AddButton ist es auch wert, in eine separate Datei eingefügt zu werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Ansicht ist eine einfache Schaltfläche, die </font><font style="vertical-align: inherit;">zur besseren Strukturierung und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codetrennung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus der Hauptinhaltsansicht </font><b><font style="vertical-align: inherit;">extrahiert wurde</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie eine Ansicht, um ein neues Training hinzuzufügen. </font><font style="vertical-align: inherit;">Erstellen Sie eine neue </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView.swift-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datei </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddWorkoutView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> nameText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> distanceText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> complexityField: <span class="hljs-type">Complexity</span> = .medium<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dateField: <span class="hljs-type">Date</span> = <span class="hljs-type">Date</span>()<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">Form</span> {
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Name"</span>, text: $nameText)
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Distance"</span>, text: $distanceText)
                <span class="hljs-type">Picker</span>(selection: $complexityField, label: <span class="hljs-type">Text</span>(<span class="hljs-string">"Complexity"</span>)) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Low"</span>).tag(<span class="hljs-type">Complexity</span>.low)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Medium"</span>).tag(<span class="hljs-type">Complexity</span>.medium)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"High"</span>).tag(<span class="hljs-type">Complexity</span>.high)<font></font>
                }<font></font>
                <span class="hljs-type">DatePicker</span>(selection: $dateField, displayedComponents: .date) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Date"</span>)<font></font>
                }<font></font>
            }<font></font>
            .navigationBarTitle(<span class="hljs-string">"Workout Details"</span>, displayMode: .inline)<font></font>
            .navigationBarItems(<font></font>
                leading: <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span> }) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Cancel"</span>)<font></font>
                },<font></font>
                trailing: <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-keyword">let</span> workout = <span class="hljs-type">Workout</span>(<font></font>
                        name: <span class="hljs-keyword">self</span>.nameText,
                        <span class="hljs-built_in">distance</span>: <span class="hljs-keyword">self</span>.distanceText,<font></font>
                        date: <span class="hljs-keyword">self</span>.dateField,<font></font>
                        complexity: <span class="hljs-keyword">self</span>.complexityField<font></font>
                    )<font></font>
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .addWorkout(workout))
                    <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span><font></font>
                }) {<font></font>
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Save"</span>)<font></font>
                }<font></font>
                .disabled(nameText.isEmpty)<font></font>
            )<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist ein ziemlich großer Controller, der wie andere Controller die Speichervariable enthält. </font><font style="vertical-align: inherit;">Es enthält auch die Variablen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nameText, distanceText, complexificationField und isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die ersten drei Variablen sind für die Verknüpfung von </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextField, Picker und DatePicker erforderlich</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die auf diesem Bildschirm angezeigt werden. </font><font style="vertical-align: inherit;">Die Navigationsleiste besteht aus zwei Elementen. </font><font style="vertical-align: inherit;">Die erste Schaltfläche schließt den Bildschirm, ohne ein neues Training hinzuzufügen, und die letzte Schaltfläche fügt der Liste ein neues Training hinzu. Dies wird durch Senden der Aktion addWorkout erreicht. </font><font style="vertical-align: inherit;">Diese Aktion schließt auch den Bildschirm zum Hinzufügen eines neuen Trainings.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/cn/b0/gycnb0wn0s9eachcnmcy2s96jkq.png" alt="Bild" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Last but not least ist </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrailingView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TrailingView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span>(alignment: .center, spacing: <span class="hljs-number">30</span>) {
            <span class="hljs-type">Button</span>(action: {
                <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span>.store.state.sortType {
                <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .<span class="hljs-built_in">distance</span>))
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .complexity))<font></font>
                }<font></font>
            }) {<font></font>
                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"arrow.up.arrow.down"</span>)<font></font>
            }<font></font>
            <span class="hljs-type">EditButton</span>()<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Ansicht besteht aus zwei Schaltflächen, die zum Sortieren der Trainingsliste und zum Aktivieren oder Deaktivieren des Bearbeitungsmodus unserer Trainingsliste verantwortlich sind. </font><font style="vertical-align: inherit;">Sortieraktionen werden mit der Versandfunktion aufgerufen, die wir über die Store-Eigenschaft aufrufen können.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/av/72/2u/av722utbzjxbewvozklxazeelde.png" alt="Bild" width="350" height="614"></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnis</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anwendung ist fertig und sollte genau wie erwartet funktionieren. </font><font style="vertical-align: inherit;">Versuchen wir es zu kompilieren und auszuführen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redux und SwiftUI arbeiten sehr gut zusammen. Mit diesen Tools geschriebener Code ist leicht zu verstehen und kann gut organisiert werden. Ein weiterer guter Aspekt dieser Lösung ist die hervorragende Codetestbarkeit. Diese Lösung ist jedoch nicht ohne Nachteile. Eine davon ist eine große Menge an Speicher, die von der Anwendung verwendet wird, wenn der Status der Anwendung sehr komplex ist, und die Anwendungsleistung in bestimmten Szenarien möglicherweise nicht optimal ist, da alle Ansichten in SwiftUI beim Erstellen eines neuen Status aktualisiert werden. Diese Mängel können einen großen Einfluss auf die Qualität der Anwendung und die Benutzerinteraktion haben. Wenn wir uns jedoch an sie erinnern und den Status auf angemessene Weise vorbereiten, können die negativen Auswirkungen leicht minimiert oder sogar vermieden werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können den Quellcode des Projekts herunterladen oder anzeigen.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich hoffe, dass Ihnen dieser Artikel gefallen hat und Sie etwas Neues für sich gelernt haben. Bis bald. </font><font style="vertical-align: inherit;">Weiter wird es noch interessanter.</font></font></s></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500146/index.html">Jobsuche in Deutschland als Produktmanager und mehr. Teil 3/5. Was Sie tun müssen, bevor Sie Lebensläufe versenden</a></li>
<li><a href="../de500148/index.html">Mikrotik-Firewall-Filter: Skript, das die Grundlage für eine Filterrichtlinie generiert</a></li>
<li><a href="../de500150/index.html">ROS und Neural Grid Beggar Robot</a></li>
<li><a href="../de500152/index.html">Wie ich POS-Terminal und FR IKKM-Touch in 1C: Enterprise integriert habe</a></li>
<li><a href="../de500154/index.html">Vertrauliches maschinelles Lernen. PySyft-Bibliothek</a></li>
<li><a href="../de500160/index.html">Visuelle Elemente</a></li>
<li><a href="../de500162/index.html">Tolles Tutorial zur Verarbeitung von Python-Sportdaten</a></li>
<li><a href="../de500164/index.html">Tutor: Berufskosten</a></li>
<li><a href="../de500170/index.html">Netzwerksimulator-Tutorial ns-3. Kapitel 6</a></li>
<li><a href="../de500178/index.html">Übersetzung von Andrew Un's Buch, Leidenschaft für maschinelles Lernen, Kapitel 38 und 39</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>