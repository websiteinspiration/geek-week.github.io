<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕙 🤜 👵🏼 useSWR est ma nouvelle bibliothèque React préférée 👉🏿 ☦️ 🤐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une traduction de l'article a été préparée avant le début du cours "Développeur React.js" .
 
 
 Ces derniers mois, j'ai travaillé sur une application...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>useSWR est ma nouvelle bibliothèque React préférée</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/506158/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une traduction de l'article a été préparée avant le début du cours </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Développeur React.js"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ces derniers mois, j'ai travaillé sur une application sur NextJS. Chaque semaine, cela devient de plus en plus. L'application utilise </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">axios</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour les appels d'API et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unstated-next</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour la gestion des états. Il y a beaucoup d'appels d'API, mais nous ne voulons pas que les utilisateurs voient un tas d'écrans de chargement. Par conséquent, nous stockons les résultats des appels </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">axios</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans des </font><font style="vertical-align: inherit;">référentiels </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> déclarés.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, nous avons rencontré un problème. </font><font style="vertical-align: inherit;">Les chambres fortes elles-mêmes deviennent de plus en plus complexes. </font><font style="vertical-align: inherit;">Les pages nécessitent parfois plusieurs appels d'API, et elles dépendent à leur tour des résultats d'autres appels d'API. </font><font style="vertical-align: inherit;">Les jours se sont transformés en semaines et les semaines en mois, tandis que nos coffres non déclarés devenaient de plus en plus encombrants. </font><font style="vertical-align: inherit;">Nous avons rencontré d'étranges erreurs alors que notre logique de mise en cache maison luttait pour faire face à des cas extrêmes inattendus.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons pensé que le chemin devrait être plus simple. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Et le voici. </font><font style="vertical-align: inherit;">Et il est même développé par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vercel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , créateur de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NextJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
 <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Découvrez SWR</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le nom SWR vient de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stale-while-revalidate</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , une méthode de mise en cache qui gagne maintenant en popularité dans le développement frontal. </font><font style="vertical-align: inherit;">Il vous permet de télécharger immédiatement le contenu mis en cache et de le mettre à jour immédiatement pour gérer le nouveau contenu à l'avenir. </font><font style="vertical-align: inherit;">Dans notre cas, nous avons obtenu le compromis parfait entre performances et expérience utilisateur.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment utiliser useSWR </font></font></h3><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une bibliothèque de hook React développée par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vercel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il vous permet de récupérer des données à partir d'une API ou d'une autre source externe, de les enregistrer dans le cache, puis de les rendre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par examiner un exemple de composant React qui reçoit une liste TODO d'un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serveur JSON</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et la restitue.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./App.css"</span>;
<span class="hljs-keyword">const</span> todosEndpoint = <span class="hljs-string">"http://localhost:3001/todos"</span>;
<span class="hljs-keyword">const</span> TodoApp = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> [todos, setTodos] = React.useState([]);<font></font>
  React.useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> getData = <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(todosEndpoint);
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.json();<font></font>
      setTodos(data);<font></font>
    };<font></font>
     getData();<font></font>
    }, []);<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
      {todos.map((todo) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>&gt;</span>{todo.title}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> TodoApp;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Examinons maintenant le même composant, mais réécrit à l'aide de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> useSWR <span class="hljs-keyword">from</span> <span class="hljs-string">"swr"</span>;
<span class="hljs-keyword">const</span> todosEndpoint = <span class="hljs-string">"http://localhost:3001/todos"</span>;
<span class="hljs-keyword">const</span> getData = <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(todosEndpoint);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.json();<font></font>
};<font></font>
<span class="hljs-keyword">const</span> TodoApp = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: todos } = useSWR(todosEndpoint, getData);<font></font>
  <font></font>
<span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {todos &amp;&amp; todos.map(todo =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>&gt;</span>{todo.title}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> TodoApp;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Comme vous pouvez le voir, il est très similaire à l'implémentation précédente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple, nous utilisons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR (clé, récupérateur, options)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour obtenir notre liste TODO. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La clé</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisée: SWR est nécessaire pour la mise en cache. Dans notre cas, nous avons utilisé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todosEndpoint</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En tant </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'outil de récupération,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons transmis une fonction asynchrone qui récupère une liste TODO. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'a aucune idée de la façon dont vous récupérez les données. Vous pouvez utiliser n'importe quelle stratégie d'exploration de données asynchrone que vous aimez. Vous pouvez utiliser </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fetch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">axios</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou même </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GraphQL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pendant que votre fonction renvoie des données de manière asynchrone,</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sera heureux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'appel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> renvoie les paramètres suivants:</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><i><font style="vertical-align: inherit;">données</font></i><font style="vertical-align: inherit;"> clés obtenues à l'aide de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fetcher</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (non définies, si elles ne sont pas déjà chargées);</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erreur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : erreur causée par l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extracteur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isValidating</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un booléen qui indique si une demande ou une revalidation est en cours;</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutate (data?, shouldRevalidate)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : fonction pour modifier les données en cache.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple plus complexe</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons un exemple plus complexe qui utilise plus de paramètres renvoyés par </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans cet exemple, nous allons récupérer un élément de la liste TODO et afficher la case à cocher pour le statut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">notre tâche dans la liste. </font><font style="vertical-align: inherit;">Lorsque la case à </font><font style="vertical-align: inherit;">cocher est cliqué, nous envoyons une demande de mise à jour TODO, et nous appelons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mettre à jour le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cache </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> useSWR <span class="hljs-keyword">from</span> <span class="hljs-string">"swr"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./App.css"</span>;
<span class="hljs-keyword">const</span> todosEndpoint = <span class="hljs-string">"http://localhost:3001/todos"</span>;
<span class="hljs-keyword">const</span> getTodo = <span class="hljs-keyword">async</span> (id) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`<span class="hljs-subst">${todosEndpoint}</span>/<span class="hljs-subst">${id}</span>`</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.json();<font></font>
};<font></font>
<span class="hljs-keyword">const</span> updateTodo = <span class="hljs-keyword">async</span> (id, todo) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`<span class="hljs-subst">${todosEndpoint}</span>/<span class="hljs-subst">${id}</span>`</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">"Content-type"</span>: <span class="hljs-string">"application/json; charset=UTF-8"</span>,<font></font>
    },<font></font>
    <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(todo),<font></font>
  });<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.json();<font></font>
};<font></font>
<span class="hljs-keyword">const</span> TodoApp = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> todoId = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> key = <span class="hljs-string">`<span class="hljs-subst">${todosEndpoint}</span>/<span class="hljs-subst">${todoId}</span>`</span>;
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: todo, mutate } = useSWR(key, () =&gt;<font></font>
    getTodo(todoId)<font></font>
  );<font></font>
  <span class="hljs-keyword">const</span> toggleCompleted = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> newTodo = {<font></font>
      ...todo,<font></font>
      <span class="hljs-attr">completed</span>: !todo.completed,<font></font>
    };<font></font>
    <span class="hljs-keyword">await</span> updateTodo(todoId, newTodo);<font></font>
    mutate(newTodo);<font></font>
  };<font></font>
  <span class="hljs-keyword">if</span> (!todo) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{todo.title}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
          <span class="hljs-attr">id</span>=<span class="hljs-string">"completed"</span>
          <span class="hljs-attr">name</span>=<span class="hljs-string">"completed"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">"completed"</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{toggleCompleted}</span>
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"completed"</span>&gt;</span>Completed<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
  );<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutate</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un excellent moyen d'augmenter les performances visibles de votre application Web. </font><font style="vertical-align: inherit;">Nous pouvons modifier les données localement et changer la vue, sans attendre la mise à jour de la source de données distante. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> va même les revalider et les remplacer par les dernières données en arrière-plan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi ai-je besoin d'une bibliothèque pour cela?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez poser cette question. </font><font style="vertical-align: inherit;">Peut-être avez-vous déjà un mécanisme de gestion des états dans votre application, et vous ne voyez pas l'intérêt d'utiliser une bibliothèque tierce pour quelque chose d'aussi simple que l'extraction et la mise en cache des données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et je vous répondrai que la mise en cache des données n'est pas facile. </font><font style="vertical-align: inherit;">Et à mesure que votre application se développe, cela devient encore plus difficile. </font><font style="vertical-align: inherit;">Vous rencontrerez des cas extrêmes, et en les traitant, vous obtiendrez des référentiels et des fournisseurs complexes qui sont difficiles à comprendre et à maintenir. </font><font style="vertical-align: inherit;">Les insectes se répandront de nulle part.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«En informatique, il n'y a que deux problèmes complexes: l'invalidation du cache et l'invention de noms» - Phil Carleton</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu de mettre en œuvre votre propre solution d'exploration de données, pourquoi ne pas vous fier aux solutions éprouvées, développées par l'une des entreprises les plus respectées de l'écosystème React?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment useSWR nous a aidés</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Porter la question de l'extraction des données dans notre application sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> donné de nombreux avantages. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Il nous a permis de supprimer le code</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pull-requests qui supprime le code inutile, mais n'ajoutez pas de nouveau - mes favoris. </font><font style="vertical-align: inherit;">Moins il y a de code dans l'application, moins il est probable que des erreurs se produisent. </font><font style="vertical-align: inherit;">Et c'est bien. </font><font style="vertical-align: inherit;">En vieillissant, je commence à apprécier de plus en plus la simplicité. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous a permis de supprimer complètement le stockage non </font><i><font style="vertical-align: inherit;">déclaré</font></i><font style="vertical-align: inherit;"> , ce qui a simplifié notre application et rendu plus facile à comprendre. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Il a simplifié la connexion des nouveaux développeurs au projet </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme la plupart des projets open source, il dispose d'une excellente documentation. La mise en œuvre de notre propre solution signifierait que nous devons rédiger notre propre documentation et enseigner aux nouveaux développeurs du projet comment gérer l'extraction de données. Maintenant que nous utilisons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous n'avons plus besoin de le faire. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Il a simplifié les choses difficiles</font></font></b><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Notre application, comme la plupart des autres applications, contient de nombreux appels API. Certains de ces appels dépendent d'autres appels d'API. Avec </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR, il est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> facile d'écrire des crochets pour les requêtes dépendantes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Il a amélioré les performances visibles. L'</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
application semble plus rapide. Les utilisateurs l'ont évalué et ont donné de bons commentaires. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Il met à jour les données obsolètes</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> met à jour les données obsolètes en </font><i><font style="vertical-align: inherit;">bref</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cela signifie que les utilisateurs ont toujours la version la plus à jour des données, à l'exclusion du temps de téléchargement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eu un grand impact sur notre application. </font><font style="vertical-align: inherit;">Cette bibliothèque a simplifié notre code et amélioré l'expérience utilisateur. </font><font style="vertical-align: inherit;">Je ne peux même pas imaginer une autre bibliothèque qui serait aussi facile à implémenter et qui </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offrirait</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> autant d'avantages que </font><i><font style="vertical-align: inherit;">useSWR</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour en savoir plus sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vous pouvez visiter le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou le référentiel sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bibliothèques alternatives</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est pas la seule bonne bibliothèque pour récupérer des données. </font><font style="vertical-align: inherit;">Bien qu'elle ait bien fonctionné dans notre cas, une autre bibliothèque peut peut-être vous convenir davantage pour l'extraction de données.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React-query</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-query</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une bibliothèque de hooks pour récupérer, mettre en cache et mettre à jour des données asynchrones dans React. </font><font style="vertical-align: inherit;">Cette solution populaire, écrite par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanner Linsi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a une portée très similaire à </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useSWR</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apollon</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le </font><font style="vertical-align: inherit;">client </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apollo</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un client </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GraphQL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui prend en charge la récupération et la mise en cache de vos données, ainsi que la mise à jour de l'interface utilisateur. </font><font style="vertical-align: inherit;">Si vous utilisez </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GraphQL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apollo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sera une excellente solution.</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur le cours.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr506144/index.html">Comparaison des plateformes de développement 1C et Client Communicator</a></li>
<li><a href="../fr506146/index.html">Que fait un analyste de jeux et comment le devenir</a></li>
<li><a href="../fr506148/index.html">La science de la perception des couleurs transforme notre relation avec les écrans</a></li>
<li><a href="../fr506150/index.html">Frappez le SETI: calcul volontaire pour les sceptiques, les optimistes et les croqueurs sophistiqués</a></li>
<li><a href="../fr506152/index.html">Collecte de métriques d'une classe "étrangère" en utilisant jmx et javaassist comme javaagent</a></li>
<li><a href="../fr506164/index.html">#nodesigndev: design par les mains des développeurs</a></li>
<li><a href="../fr506166/index.html">Configuration d'un réseau de neurones pour détecter les objets nécessaires</a></li>
<li><a href="../fr506168/index.html">Grand guide de Google Trends: comment lire toutes ces statistiques et apprendre à saisir les tendances</a></li>
<li><a href="../fr506170/index.html">Type de données abstrait. Partie 1: données (type de données)</a></li>
<li><a href="../fr506176/index.html">Présentation de Creaform 3D Scanner</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>