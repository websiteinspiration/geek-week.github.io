<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚩 🙌🏻 👨🏾‍🤝‍👨🏻 Tudo o que você precisa saber sobre armazenamento em cache 🍒 ↗️ 👩‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dia bom. 
 
 Apresento a você a tradução do artigo "Tudo o que você precisa saber sobre Cache - Design de Sistemas", de Animesh Gaitonde.
 
 Introduçã...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tudo o que você precisa saber sobre armazenamento em cache</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504786/"><img src="https://habrastorage.org/webt/yb/dy/sz/ybdyszmr39n1ymqep4omiofuhfy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia bom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apresento a você a tradução do artigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Tudo o que você precisa saber sobre Cache - Design de Sistemas",</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Animesh Gaitonde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdução</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você notou que, ao navegar em uma página da Web com uma conexão de Internet ruim, o texto é carregado na frente de imagens de alta qualidade? No entanto, quando você visita a mesma página novamente, ela carrega muito mais rapidamente. Quando você visita um novo site, leva muito mais tempo para fazer o download do que para baixar sites visitados com frequência, como o Facebook ou a Amazon. Você sabe por que isso está acontecendo? É tudo sobre cache.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/uo/xx/bcuoxxd5lqtpswaic_oncu82tlc.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É assim que minha página do Instagram se parece com uma conexão lenta. Como você pode ver, o texto é exibido enquanto as imagens ainda não foram carregadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É muito importante fornecer a melhor experiência com o aplicativo para reter e envolver os usuários. Em um mundo moderno onde reina o espírito de competição, os negócios sofrem muito devido à pouca experiência do usuário. Imagine que você está assistindo sua série favorita ou fazendo streaming de vídeo em um site, mas o vídeo é constantemente interrompido para carregamento adicional (buffer). Por quanto tempo você aguentará essa "atitude" e retornará a esse site?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O armazenamento em cache trabalha com o princípio de "localização de links". </font><font style="vertical-align: inherit;">O cache é um armazém de dados local para acelerar a recuperação de informações e a recuperação de dados. </font><font style="vertical-align: inherit;">O principal objetivo do cache é reduzir o atraso na leitura de dados e aumentar a taxa de transferência do aplicativo. </font><font style="vertical-align: inherit;">Vejamos alguns exemplos da vida real.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uso de cache</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que você faça o jantar todos os dias. </font><font style="vertical-align: inherit;">Para cozinhar, você precisa de vários ingredientes, vegetais, especiarias, etc. </font><font style="vertical-align: inherit;">No entanto, você vai à loja todos os dias para isso? </font><font style="vertical-align: inherit;">Isso pode ser bastante oneroso e demorado. </font><font style="vertical-align: inherit;">Claro, a primeira coisa que você olha dentro do armário na cozinha ou na geladeira. </font><font style="vertical-align: inherit;">Isso ajuda a evitar uma viagem desnecessária ao supermercado. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mg/y6/i6/mgy6i6dasy2xuqop18mtldzoqpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sua geladeira é uma espécie de cache para vegetais. </font><font style="vertical-align: inherit;">A vantagem óbvia desse cache é uma economia significativa no tempo de preparação do jantar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o cache funciona?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aplicativos de servidor normalmente armazenam dados em um banco de dados. Quando um cliente solicita dados, o aplicativo envia uma solicitação ao banco de dados, recebe dados de lá e os envia ao cliente. O servidor de banco de dados está offline e pode estar localizado em um computador diferente daquele em que o servidor de aplicativos está localizado. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5f/qg/e4/5fqge4lmt8q5yigsx4kj5gmqksw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A leitura de dados do banco de dados é um processo muito lento, porque você precisa enviar uma solicitação e executar E / S para obter dados do sistema de arquivos. Se os dados estiverem armazenados no cache, a operação de leitura será muito rápida. Quando um cliente solicita repetidamente os mesmos dados, faz sentido retornar dados do cache em vez do banco de dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo: se um tweet for viral, todos os clientes solicitarão dados para o mesmo tweet. </font><font style="vertical-align: inherit;">Como o Twitter tem milhões de usuários, o uso de um cache evita milhões de consultas ao banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, o cache reduz a carga no banco de dados. </font><font style="vertical-align: inherit;">Se os dados solicitados estiverem no cache, a solicitação do banco de dados será redirecionada (interceptada). </font><font style="vertical-align: inherit;">Você pode desenhar alguma analogia com uma tabela de hash que armazena pares de valores-chave. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O diagrama a seguir mostra o processo de leitura de dados do cache:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u4/4x/6a/u44x6annynx7u794dgoq-0a6s-g.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceitos de cache de chaves</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Time to Live (TTL)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses são os limites da quantidade de dados que podem ser armazenados no cache. </font><font style="vertical-align: inherit;">Você deve excluir entradas no cache que o servidor de aplicativos não precisa mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caso da Netflix, o servidor armazenará em cache os programas mais vistos ou populares. </font><font style="vertical-align: inherit;">Não há necessidade de mostrar em cache que ninguém está assistindo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo: o cache da série Paper House é mais racional que o filme de Indiana Jones.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excluir política</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em algum momento, o cache está cheio. </font><font style="vertical-align: inherit;">Portanto, surge a necessidade de excluir dados antigos (irrelevantes) e substituí-los por novas (relevantes) informações. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem várias políticas para limpar o cache, como "antigo (usado menos recentemente)" (LRU menos usado recentemente), "raramente solicitado (menos usado)" (LFU menos usado), "último (usado mais recentemente)" ( Utilizado Mais Recentemente, MRU). </font><font style="vertical-align: inherit;">Essas políticas excluem dados do cache de acordo com um princípio específico.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Velho</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dados que não são solicitados há muito tempo são excluídos do cache. </font><font style="vertical-align: inherit;">Assim que o cache estiver cheio, os dados antigos serão excluídos e novos dados serão adicionados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que o Facebook armazene em cache fotos de celebridades. </font><font style="vertical-align: inherit;">A análise das solicitações de assinantes indica a relevância de novas fotos. </font><font style="vertical-align: inherit;">Quando o cache estiver cheio, a foto mais antiga será excluída.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raramente solicitado</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O LFU rastreia a frequência ou o número de solicitações de dados. </font><font style="vertical-align: inherit;">Quando o tamanho do cache se aproximar do valor limite, os dados mais raramente solicitados serão excluídos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando inserimos o texto, o telefone começa a oferecer várias opções para finalizar a palavra, uma das quais pode ser selecionada em vez do conjunto completo (preenchimento automático). </font><font style="vertical-align: inherit;">O software do smartphone armazena em cache as palavras digitadas com mais freqüência. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/vi/r8/rlvir8pfmzflt3mri6oauh81nmu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Palavras raramente digitadas são posteriormente excluídas desse cache. </font><font style="vertical-align: inherit;">No exemplo acima, se você usar as palavras "recurso", "recursos", "pluma" etc. etc., depois de algum tempo, o telefone deixará de lhe oferecer "talento", pois ele será removido do cache.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Último</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta política, os dados mais recentes estão sujeitos a exclusão, é dada preferência a dados mais antigos armazenados no cache. </font><font style="vertical-align: inherit;">Essa estratégia é usada se o modelo de aquisição de dados for tal que o usuário esteja menos interessado em recuperar os dados mais recentes. </font><font style="vertical-align: inherit;">Considere um exemplo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_y/r7/dw/_yr7dwecmhrodbvoellhw14qvau.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aplicativos de namoro como o Tinder geralmente armazenam em cache todos os parceiros em potencial (possíveis correspondências ou preferências) do usuário. </font><font style="vertical-align: inherit;">Quando um usuário percorre um feed movendo um perfil específico de um parceiro em potencial para a esquerda ou para a direita, o aplicativo não deve mais recomendar esse perfil a ele. </font><font style="vertical-align: inherit;">Se isso acontecer, levará a uma má experiência do usuário. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, é necessário excluir os dados mais recentes. </font><font style="vertical-align: inherit;">O aplicativo deve excluir os perfis visualizados do cache.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de cache</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gravação em cache</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o nome indica, os dados são gravados primeiro no cache e depois no banco de dados. </font><font style="vertical-align: inherit;">Isso garante a consistência dos dados no cache e no banco de dados. </font><font style="vertical-align: inherit;">Cada leitura de dados do cache corresponde ao registro mais recente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/ih/ix/jiihixkutm0lpxxdrff0l3q4tby.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A desvantagem dessa abordagem é o aumento do tempo de gravação. </font><font style="vertical-align: inherit;">Não é adequado para sistemas muito carregados com operações frequentes de gravação de dados. </font><font style="vertical-align: inherit;">No entanto, é ótimo para aplicativos que costumam reler dados armazenados no banco de dados. </font><font style="vertical-align: inherit;">A escrita lenta é compensada pela leitura e consistência rápidas.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrada de cache</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma alternativa à primeira abordagem é gravar dados no cache e adicionar uma observação sobre alterações de dados para a atualização subsequente no banco de dados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/co/td/_l/cotd_ldfasg4f4xhgyzl4of1ncw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando operações assíncronas periódicas, você pode ler dados atualizados no cache e fazer alterações nos dados correspondentes no banco de dados. Essa abordagem não aumenta as operações de leitura / gravação. A única desvantagem aqui é o atraso na sincronização entre o cache e o banco de dados. Isso pode levar ao fato de que aplicativos que dependem do banco de dados como fonte de verdade lerão dados desatualizados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O YouTube, por exemplo, usa essa abordagem para armazenar informações sobre o número de visualizações de um vídeo específico. Atualizar o banco de dados para cada exibição do vídeo viral será muito caro. A melhor solução é gravar dados no cache e sincronizar com o banco de dados.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registro de desvio de cache</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vários aplicativos de servidor nem sempre lêem os dados mais recentes. </font><font style="vertical-align: inherit;">Nesse caso, uma entrada de desvio de cache é usada. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7w/d0/6p/7wd06ph2okntw0mjrqpwyet_ptw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta abordagem, o banco de dados é atualizado sem um cache. </font><font style="vertical-align: inherit;">Isso evita o carregamento de dados não reclamados no cache. </font><font style="vertical-align: inherit;">No entanto, se o aplicativo ainda solicitar os dados mais recentes que não estão no cache, isso levará ao carregamento desses dados do banco de dados com todas as conseqüências resultantes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplos de uso de cache distribuído</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lista de projetos de cache aberto:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redis</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memcached</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voltdb</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aerospike dbs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache inflamado</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado pela atenção.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt504772/index.html">Eventos digitais em Moscou, de 1 a 7 de junho</a></li>
<li><a href="../pt504774/index.html">Pesquisa com executivos de TI sobre mudanças nas necessidades de serviços de TI</a></li>
<li><a href="../pt504776/index.html">Escrevendo um mecanismo de jogo em seu primeiro ano: fácil! (Quase)</a></li>
<li><a href="../pt504780/index.html">NSA, Ghidra e Unicórnios</a></li>
<li><a href="../pt504784/index.html">O certificado raiz AddTrust do Sectigo expirou em 30 de maio de 2020, causando problemas nos clientes OpenSSL 1.0.xe GnuTLS</a></li>
<li><a href="../pt504790/index.html">Uma seleção de artigos sobre aprendizado de máquina: casos, guias e estudos para maio de 2020</a></li>
<li><a href="../pt504792/index.html">Pensão de serviço. Como o NSPK salvou sua sala de serviço de um coronavírus</a></li>
<li><a href="../pt504796/index.html">Udalenka é legal. Talvez fique para sempre?</a></li>
<li><a href="../pt504798/index.html">Reclamações sobre relógios de inteligência artificial</a></li>
<li><a href="../pt504800/index.html">dracut + systemd + LUKS + usbflash = desbloqueio automático</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>