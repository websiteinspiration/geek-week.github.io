<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏾 🧙🏾 🎅🏽 開閉原理 🤰🏿 👩🏻‍⚖️ 👩🏻‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！これは、1996年1月に公開された開閉原理の Robert Martinによる記事の翻訳です。この記事は、控えめに言っても最新のものではありません。しかし、RuNetでは、ボドルおじさんのSOLIDに関する記事は切り捨てられた形でしか再販されていないため、完全な翻訳は不必要ではな...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>開閉原理</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/472186/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font><font style="vertical-align: inherit;">これは、</font><font style="vertical-align: inherit;">1996年1月に公開された</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://web.archive.org/web/20060822033314/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開閉原理の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Robert Martinによる記事の翻訳です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この記事は、控えめに言っても最新のものではありません。</font><font style="vertical-align: inherit;">しかし、RuNetでは、ボドルおじさんのSOLIDに関する記事は切り捨てられた形でしか再販されていないため、完全な翻訳は不必要ではないと考えました。</font></font></p><br>
<p><img src="https://habrastorage.org/webt/yt/xn/-q/ytxn-qjuk7_t4wyyna-6nr4xvsc.png"></p><br>
<p>     O,    -,  ,  .       ,     :</p><br>
<ul>
<li>    «»  100%.</li>
<li>-  ()      ,   — ,  «».<a name="habracut"></a></li>
</ul><br>
<p>      <em> </em>  <em>The C++ Report</em>. ,    ,     C++        .    ,         .   -         .</p><br>
<p> -    . , « - (member variables)    (private)»,  «   »,  «     ».     ?   ? <em></em>   ?      ,     , —  -.<br>
  : «      .        ,      ».      ,               ?          1988 ,      -:</p><br>
<p><strong>  (, ,   ..)         .</strong></p><br>
<p>            ,       «» .</p><br>
<p>  , ,   .  -      .  ,    ,   <em> </em>.   ,         ,    ,   .</p><br>
<h1></h1><br>
<p>,   -,    :</p><br>
<ol>
<li><strong>  .</strong>  ,      .                     .</li>
<li><strong>  .</strong>     .       .</li>
</ol><br>
<p>,         .      —    . ,     ,       .         ?</p><br>
<h1>   — </h1><br>
<p> ++,   - ,    ,       .</p><br>
<p> —    ,         -.    .     ,       .          .</p><br>
<p>      ,     -.  , <code>Client</code>  <code>Server</code>,  .  ,   —   <code>Server</code> .  <code>Client</code>   <code>Server</code>.   ,    <code>Client</code>    ,      <code>Client</code>,       .</p><br>
<p><img src="https://habrastorage.org/webt/ee/0b/3d/ee0b3dy_mdhs48fzsk2cz9qm6tu.png" alt="画像"><br>
<em> </em></p><br>
<p>       ,    -.     <code>AbstractServer</code> —   ,  -  .  <code>Client</code>  .    <code>Client</code>    - <code>Server</code>.   ,    <code>Client</code>    ,       <code>AbstractServer</code>.  <code>Client</code>     .</p><br>
<p><img src="https://habrastorage.org/webt/k6/ea/y_/k6eay_lv4u4q7rsu7z37pimqtme.png" alt="画像"><br>
<em> </em></p><br>
<h1> <code>Shape</code></h1><br>
<p> ,         GUI.         .         ,              .</p><br>
<p> C,    ,    -,           1.             .   —  ,        .  <code>DrawAllShapes</code>        ,         (<code>DrawCircle</code> <code>DrawSquare</code>).</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 1</span>
<span class="hljs-comment">//  /   </span><font></font>
<font></font>
<span class="hljs-keyword">enum</span> ShapeType {circle, square}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Shape</span>
{</span><font></font>
    ShapeType itsType;<font></font>
};<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Circle</span>
{</span><font></font>
    ShapeType itsType;<font></font>
    <span class="hljs-keyword">double</span> itsRadius;<font></font>
    Point itsCenter;<font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Square</span>
{</span><font></font>
    ShapeType itsType;<font></font>
    <span class="hljs-keyword">double</span> itsSide;<font></font>
    Point itsTopLeft;<font></font>
};<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//    </span>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawSquare</span><span class="hljs-params">(struct Square*)</span>
<span class="hljs-keyword">void</span> <span class="hljs-title">DrawCircle</span><span class="hljs-params">(struct Circle*)</span></span>;
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Shape</span> *<span class="hljs-title">ShapePointer</span>;</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawAllShapes</span><span class="hljs-params">(ShapePointer <span class="hljs-built_in">list</span>[], <span class="hljs-keyword">int</span> n)</span>
</span>{
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;n; i++)<font></font>
    {<font></font>
        <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Shape</span>* <span class="hljs-title">s</span> = <span class="hljs-title">list</span>[<span class="hljs-title">i</span>];</span>
        <span class="hljs-keyword">switch</span> (s-&gt;itsType)<font></font>
        {<font></font>
            <span class="hljs-keyword">case</span> square:<font></font>
            DrawSquare((struct Square*)s);<font></font>
            <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> circle:<font></font>
            DrawCircle((struct Circle*)s);<font></font>
            <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<p> <code>DrawAllShapes</code>    -,       «»    .            ,  ,      .          ,    .</p><br>
<p>,   —  .    <code>switch</code>-   <code>DrawAllShapes</code>                - .       —    ,    <code>switch</code>- (  <code>if/else</code>),        .  ,  ,   <code>switch</code>-   <code>if/else</code>     ,   <code>DrawAllShapes</code>.   ,     <code>if</code>       <code>case</code>- <code>switch</code>-   ,  «»    .       ,     ,   .</p><br>
<p>  2   ,     /,   -.    <code>Shape</code>.         <code>Draw</code>.  <code>Circle</code>  <code>Square</code>    <code>Shape</code>.</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 2</span>
<span class="hljs-comment">//  /  -</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;<font></font>
};<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> :</span> <span class="hljs-keyword">public</span> Shape<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;<font></font>
};<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> :</span> <span class="hljs-keyword">public</span> Shape<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;<font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawAllShapes</span><span class="hljs-params">(Set&lt;Shape*&gt;&amp; <span class="hljs-built_in">list</span>)</span>
</span>{
    <span class="hljs-keyword">for</span> (Iterator&lt;Shape*&gt;i(<span class="hljs-built_in">list</span>); i; i++)<font></font>
        (*i)-&gt;Draw();<font></font>
}</code></pre><br>
<p>:       <code>DrawAllShapes</code>   2,     ,  ,    ,      <code>Shape</code>.     <code>DrawAllShapes</code>.  <code>DrawAllShapes</code>   -.         .</p><br>
<p>    <code>Shape</code>     .            ,   ,   , —        .         ,  .</p><br>
<p> ,   -,     ,     ,      ,  ,     .</p><br>
<h1>  </h1><br>
<p>,         100% . ,     <code>DrawAllShapes</code>   2,   ,      ,   ?  <code>DrawAllShapes</code>      .    ,  «» ,   -  ,     .</p><br>
<p>      ,    .       ,     .    .        ,     .   ,   -     .</p><br>
<h2>   c  </h2><br>
<p>     <code>DrawAllShapes</code>     ? ,     . ,   <code>DrawAllShapes</code>  ,    « ».   ,  , —         .</p><br>
<p>  , ,   ,  ,       .        <code>Shape</code>   <code>Precedes</code>,      <code>Shape</code>           <code>true</code>,    <code>Shape</code>,   ,        <code>Shape</code>,      .</p><br>
<p> C++         «&lt;».   3   <code>Shape</code>   .</p><br>
<p>,           <code>Shape</code>,    ,   .   4     C++.     <code>Set</code>, <code>OrderedSet</code>  <code>Iterator</code>   <code>Components</code>,     (Designing Object Oriented C++ Applications using the Booch Method, Robert C. Martin, Prentice Hall, 1995).</p><br>
<p>,      <code>Shape</code>      .         . ,     <code>Shape</code>    <code>Precedes</code>   .    ?      <code>Circle::Precedes</code>,     ?     5.</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 3</span>
<span class="hljs-comment">//  Shape    .</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Precedes</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Shape&amp;)</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Shape&amp; s) {<span class="hljs-keyword">return</span> Precedes(s);}<font></font>
};</code></pre><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 4</span>
<span class="hljs-comment">// DrawAllShapes  </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawAllShapes</span><span class="hljs-params">(Set&lt;Shape*&gt;&amp; <span class="hljs-built_in">list</span>)</span>
</span>{
    <span class="hljs-comment">//    OrderedSet  .</span>
    OrderedSet&lt;Shape*&gt; orderedList = <span class="hljs-built_in">list</span>;<font></font>
    orderedList.Sort();<font></font>
    <span class="hljs-keyword">for</span> (Iterator&lt;Shape*&gt; i(orderedList); i; i++)<font></font>
        (*i)-&gt;Draw();<font></font>
}</code></pre><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 5</span>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">Circle::Precedes</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Shape&amp; s)</span> <span class="hljs-keyword">const</span>
</span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">dynamic_cast</span>&lt;Square*&gt;(s))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
}</code></pre><br>
<p>,       -.         <code>Shape</code>.  ,       <code>Shape</code>,    .</p><br>
<h2> Data Driven    </h2><br>
<p>   <code>Shape</code>  ,   ,        .       6.</p><br>
<p>  ,     <code>DrawAllShapes</code>  ,   ,     <code>Shape</code> —             <code>Shape</code>      (, ,    <code>Squares</code>   ).</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 6</span>
<span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;typeinfo.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span>
<span class="hljs-keyword">enum</span> {<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>};
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> <span class="hljs-keyword">bool</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Precedes</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Shape&amp;)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Shape&amp; s) <span class="hljs-keyword">const</span>
    {<span class="hljs-keyword">return</span> Precedes(s);}
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span>* typeOrderTable[];<font></font>
};<font></font>
<span class="hljs-keyword">char</span>* Shape::typeOrderTable[] =<font></font>
{<font></font>
    <span class="hljs-string">"Circle"</span>,
    <span class="hljs-string">"Square"</span>,
    <span class="hljs-number">0</span><font></font>
};<font></font>
<span class="hljs-comment">//      .</span>
<span class="hljs-comment">//   ,   </span>
<span class="hljs-comment">//  . ,    ,</span>
<span class="hljs-comment">//     </span>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">Shape::Precedes</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Shape&amp; s)</span> <span class="hljs-keyword">const</span>
</span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* thisType = <span class="hljs-keyword">typeid</span>(*<span class="hljs-keyword">this</span>).name();
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* argType = <span class="hljs-keyword">typeid</span>(s).name();
    <span class="hljs-keyword">bool</span> done = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">int</span> thisOrd = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">int</span> argOrd = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; !done; i++)<font></font>
    {<font></font>
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* tableEntry = typeOrderTable[i];
        <span class="hljs-keyword">if</span> (tableEntry != <span class="hljs-number">0</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(tableEntry, thisType) == <span class="hljs-number">0</span>)<font></font>
                thisOrd = i;<font></font>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(tableEntry, argType) == <span class="hljs-number">0</span>)<font></font>
                argOrd = i;<font></font>
            <span class="hljs-keyword">if</span> ((argOrd &gt; <span class="hljs-number">0</span>) &amp;&amp; (thisOrd &gt; <span class="hljs-number">0</span>))<font></font>
                done = <span class="hljs-literal">true</span>;<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-comment">// table entry == 0</span>
            done = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> thisOrd &lt; argOrd;<font></font>
}</code></pre><br>
<p> ,        , —  .       ,     ,        .</p><br>
<h2> </h2><br>
<p>   .     <code>Shape</code>   <code>DrawAllShapes</code>    ,    .    <code>Shape</code>     ,      . ,            .         ;     ,    ,    <code>OrderedObject</code>,    <code>OrderedShape</code>,     <code>Shape</code>  <code>OrderedObject</code>.</p><br>
<h1>  </h1><br>
<p>      ,  -   ,       ,       .      .</p><br>
<h2>  - </h2><br>
<p>      . -      ,    .         ,  -.         <code>private</code>,   <code>public</code>  <code>protected</code>.<br>
   -    .   —   ,  ,   ,  .         .</p><br>
<p>   ,         —   .   ,    ,  ,     .   .</p><br>
<p>      ,    ,     ?      <code>private</code>? ,   7   <code>Device</code>,   —  <code>bool status</code>.      .    ,    <code>status</code>  <code>true</code>,    — <code>false</code>.</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 7</span>
<span class="hljs-comment">//  </span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Device</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">bool</span> status;<font></font>
};</code></pre><br>
<p> ,         .       <code>public</code>        ?      ,           ,      ,   .  ,  ,              . </p><br>
<p>           <code>Device</code>.  ,      <code>Device</code>     .    .</p><br>
<p>  , ,      <code>Time</code>,    8.      —   ?  ,   .  ,  ,        ,      .   ,         -.    ?</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 8</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Time</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">int</span> hours, minutes, seconds;<font></font>
    Time&amp; <span class="hljs-keyword">operator</span>-=(<span class="hljs-keyword">int</span> seconds);<font></font>
    Time&amp; <span class="hljs-keyword">operator</span>+=(<span class="hljs-keyword">int</span> seconds);
    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt; (<span class="hljs-keyword">const</span> Time&amp;);
    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&gt; (<span class="hljs-keyword">const</span> Time&amp;);
    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-keyword">const</span> Time&amp;);
    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> Time&amp;);<font></font>
};</code></pre><br>
<p> ,         8, —  ,     .        <code>minutes</code>     <code>hours</code>.     ,    <code>Time</code>    .         ,     ,       .    .</p><br>
<p>    ,         .            <code>private</code>.    ,      —   , , ,    .  ,    ,              ,     ,      ,       .</p><br>
<p>    ,   -  ,  <code>public</code> —  <code>protected</code>-    ,    .</p><br>
<h2>  … !</h2><br>
<p>     ,      -.   ,     ,      ,     .  ,     ,    ,   .    —   ,    -   .<br>
  ,   ,                 ,    .   ,       ,    ,   .</p><br>
<p>       .      .     ,     ,      ,     , —    .      - .   —   cout  cin.   ,   -  ,     .</p><br>
<h2>RTTI —  </h2><br>
<p>    —  <code>dynamic_cast</code>.   <code>dynamic_cast</code>         (RTTI)   ,     ,     .        9,     -.    10    ,   <code>dynamic_cast</code>,      -.</p><br>
<p>    ,    ,    9,     ,      <code>Shape</code> (    ,     ).    10       .     10    -.<br>
        ,  RTTI  ,   -  .</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 9</span>
<span class="hljs-comment">//RTTI,   -.</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> {</span>};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> :</span> <span class="hljs-keyword">public</span> Shape<font></font>
{<font></font>
<span class="hljs-keyword">private</span>:<font></font>
    Point itsTopLeft;<font></font>
    <span class="hljs-keyword">double</span> itsSide;
    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-title">DrawSquare</span><span class="hljs-params">(Square*)</span></span>;<font></font>
};<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> :</span> <span class="hljs-keyword">public</span> Shape<font></font>
{<font></font>
<span class="hljs-keyword">private</span>:<font></font>
    Point itsCenter;<font></font>
    <span class="hljs-keyword">double</span> itsRadius;
    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-title">DrawCircle</span><span class="hljs-params">(Circle*)</span></span>;<font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawAllShapes</span><span class="hljs-params">(Set&lt;Shape*&gt;&amp; ss)</span>
</span>{
    <span class="hljs-keyword">for</span> (Iterator&lt;Shape*&gt;i(ss); i; i++)<font></font>
    {<font></font>
        Circle* c = <span class="hljs-keyword">dynamic_cast</span>&lt;Circle*&gt;(*i);<font></font>
        Square* s = <span class="hljs-keyword">dynamic_cast</span>&lt;Square*&gt;(*i);
        <span class="hljs-keyword">if</span> (c)<font></font>
            DrawCircle(c);<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s)<font></font>
            DrawSquare(s);<font></font>
    }<font></font>
}</code></pre><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// 10</span>
<span class="hljs-comment">//RTTI,    -.</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span><span class="hljs-params">()</span> cont </span>= <span class="hljs-number">0</span>;<font></font>
};<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> :</span> <span class="hljs-keyword">public</span> Shape<font></font>
{<font></font>
<span class="hljs-comment">// .</span><font></font>
};<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawSquaresOnly</span><span class="hljs-params">(Set&lt;Shape*&gt;&amp; ss)</span>
</span>{
    <span class="hljs-keyword">for</span> (Iterator&lt;Shape*&gt;i(ss); i; i++)<font></font>
    {<font></font>
        Square* s = <span class="hljs-keyword">dynamic_cast</span>&lt;Square*&gt;(*i);
        <span class="hljs-keyword">if</span> (s)<font></font>
            s-&gt;Draw();<font></font>
    }<font></font>
}</code></pre><br>
<h1></h1><br>
<p>        -.          - .        - ,     .</p><br>
<p>   ,   -        -.      ,   ,   ,  ,    ,      .<br>
</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472170/index.html">誰がDNSルートゾーンの分散化を提案したか</a></li>
<li><a href="../ja472172/index.html">適切なウェブサイトの再設計-ステップバイステップのアルゴリズム、基本的な質問とニュアンス</a></li>
<li><a href="../ja472174/index.html">パーソナリティとサウンド：ポールヴォイト-「Sennheiser 30s」、ブロードバンドの父、機械式クロスオーバーおよび伝送ライン</a></li>
<li><a href="../ja472176/index.html">バーチャルプーシキン博物館</a></li>
<li><a href="../ja472178/index.html">ホリバー。ルネットの歴史。パート7. YouTube：コメディアン、きしむ音、シリコンバレー</a></li>
<li><a href="../ja472188/index.html">App Store Check Verification（App Storeの領収書）について知っておくべきこと</a></li>
<li><a href="../ja472190/index.html">Webサーバーなしでphp-fpmを介してPHPスクリプトを実行します。または、FastCGIクライアント（内部）</a></li>
<li><a href="../ja472196/index.html">Androidプロジェクト用の自家製「砂糖」または「それをしない方法」</a></li>
<li><a href="../ja472198/index.html">モバイルアプリケーションでのプッシュメッセージのローカリゼーション</a></li>
<li><a href="../ja472200/index.html">ラズベリーのロシアの学校でのコンピューターサイエンスクラスの近代化：安くて明るい</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>