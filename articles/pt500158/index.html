<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüç≥ üïõ ü§µüèΩ Intera√ß√£o SwiftUI com Redux üÜé üíâ üë®‚Äçüë®‚Äçüë¶‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° a todos. Neste artigo, falaremos sobre a estrutura SwiftUI em conjunto com o Redux, este pacote nos permite criar aplicativos de maneira r√°pida e ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Intera√ß√£o SwiftUI com Redux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500158/"><img src="https://habrastorage.org/webt/0a/1b/6r/0a1b6rckxwuh5wqlxbsyqygrf94.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ol√° a todos. Neste artigo, falaremos sobre a estrutura </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em conjunto com o Redux, este pacote nos permite criar aplicativos de maneira r√°pida e f√°cil. O SwiftUI √© usado para criar uma interface de usu√°rio de estilo declarativo, diferente do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIKit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O Redux, por sua vez, serve para controlar o estado do aplicativo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um conceito fundamental no SwiftUI e Redux. No nosso caso, isso n√£o √© apenas uma palavra da moda, mas tamb√©m uma entidade que os conecta e permite que trabalhem muito bem juntos. Neste artigo, tentarei mostrar que a tese acima √© verdadeira, ent√£o vamos come√ßar! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de come√ßarmos a escrever c√≥digo, vamos primeiro entender o que √© Redux e em que consiste.</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma biblioteca de c√≥digo aberto para gerenciar o estado de um aplicativo. </font><font style="vertical-align: inherit;">Geralmente usado em conjunto com React ou Angular para desenvolver o lado do cliente. </font><font style="vertical-align: inherit;">Cont√©m v√°rias ferramentas para simplificar significativamente a transfer√™ncia de dados de armazenamento atrav√©s do contexto. </font><font style="vertical-align: inherit;">Criadores: Daniil Abramov e Andrew Clark. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mim, o Redux n√£o √© apenas uma biblioteca, j√° √© algo mais, eu atribuo isso √†s decis√µes de arquitetura nas quais o aplicativo se baseia. </font><font style="vertical-align: inherit;">Principalmente devido ao seu fluxo de dados unidirecional.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fluxo multidirecional ou unidirecional</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para explicar o que quero dizer com fluxo de dados, darei o exemplo a seguir. Um aplicativo criado usando o VIPER suporta um fluxo de dados multidirecional entre m√≥dulos: o </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/1h/3j/a61h3juugoawz8ij3xt_mot6brm.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redux, por sua vez, √© um fluxo de dados unidirecional e √© mais f√°cil de explicar com base em seus componentes constituintes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/yc/hl/hmychlrpj6tbe0loeykh5wax8hk.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos falar um pouco em detalhes sobre cada componente do Redux. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© a √∫nica fonte de verdade que cont√©m todas as informa√ß√µes necess√°rias para nossa aplica√ß√£o. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© a inten√ß√£o de mudar de estado. No nosso caso, essa √© uma enumera√ß√£o que cont√©m novas informa√ß√µes que queremos adicionar ou alterar no estado atual. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redutor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â uma fun√ß√£o que toma A√ß√£o e Estado atual como par√¢metros e retorna um novo Estado. </font><font style="vertical-align: inherit;">Esta √© a √∫nica maneira de cri√°-lo. </font><font style="vertical-align: inherit;">Tamb√©m √© importante notar que esse recurso deve estar limpo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um objeto que cont√©m State e fornece todas as ferramentas necess√°rias para atualiz√°-lo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu acredito que a teoria √© suficiente, vamos seguir praticando.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementa√ß√£o de Redux</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das maneiras mais f√°ceis de conhecer uma ferramenta √© come√ßar a us√°-la, como disse meu professor de programa√ß√£o, se voc√™ quiser aprender uma linguagem de programa√ß√£o, escreva uma aplica√ß√£o nela. Ent√£o, vamos criar um pequeno aplicativo, seja um di√°rio de treinamento simples, ele ter√° apenas quatro op√ß√µes, a primeira √© exibir uma lista de exerc√≠cios, a segunda √© adicionar um treino completo, a terceira √© excluir e a quarta √© classificar os exerc√≠cios. Aplica√ß√£o bastante simples, mas ao mesmo tempo nos permitir√° conhecer o Redux e o SwiftUI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie um projeto limpo no Xcode, d√™ o nome de WorkoutsDiary e, mais importante, selecione SwiftUI para a interface do usu√°rio, pois usaremos o SwiftUI para criar nossa interface do usu√°rio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de criar o projeto. </font><font style="vertical-align: inherit;">Crie uma estrutura de treino que ser√° respons√°vel pelo treino que conclu√≠mos.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Workout</span>: <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">UUID</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">distance</span>: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> date: <span class="hljs-type">Date</span>
    <span class="hljs-keyword">let</span> complexity: <span class="hljs-type">Complexity</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, n√£o h√° nada louco nessa estrutura, o campo id √© necess√°rio para estar em conformidade com o protocolo Identific√°vel e o campo complexidade √© apenas uma enumera√ß√£o com a seguinte defini√ß√£o:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Complexity</span>: <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">case</span> low
    <span class="hljs-keyword">case</span> medium
    <span class="hljs-keyword">case</span> high<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que temos tudo o que precisamos para come√ßar a implementar o Redux, vamos come√ßar criando um Estado.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AppState</span> </span>{
    <span class="hljs-keyword">var</span> workouts: [<span class="hljs-type">Workout</span>]
    <span class="hljs-keyword">var</span> sortType: <span class="hljs-type">SortType?</span><font></font>
}<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma estrutura simples que cont√©m dois campos: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exerc√≠cios</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortType</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O primeiro √© uma lista de exerc√≠cios e o segundo √© um campo opcional que determina como a lista √© classificada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SortType √© uma enumera√ß√£o definida da seguinte maneira:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">SortType</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">distance</span>
    <span class="hljs-keyword">case</span> complexity<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por simplicidade, classificaremos por dist√¢ncia e dificuldade em ordem decrescente, ou seja, quanto maior a complexidade do treinamento, maior ser√° exibida em nossa lista. </font><font style="vertical-align: inherit;">Vale ressaltar que sortType √© um tipo opcional e pode ser nulo, o que significa que a lista n√£o est√° classificada no momento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continuaremos a implementa√ß√£o de nossos componentes. </font><font style="vertical-align: inherit;">Vamos criar uma </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√£o</font></font></b><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Action</span> </span>{
    <span class="hljs-keyword">case</span> addWorkout(<span class="hljs-number">_</span> workout: <span class="hljs-type">Workout</span>)
    <span class="hljs-keyword">case</span> removeWorkout(at: <span class="hljs-type">IndexSet</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">sort</span>(by: <span class="hljs-type">SortType</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como podemos ver, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma enumera√ß√£o com tr√™s casos que nos d√£o a capacidade de manipular nosso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addWorkout (_ treino: treino)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simplesmente adiciona um treino que √© passado como par√¢metro.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">removeWorkout (em: IndexSet)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remove o item no √≠ndice especificado.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sort (por: SortType)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classifica a lista de treinamento pelo tipo de classifica√ß√£o especificado.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos criar um dos componentes mais complexos, o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reducer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reducer</span><span class="hljs-params">(state: AppState, action: Action)</span></span> -&gt; <span class="hljs-type">AppState</span> {
    <span class="hljs-keyword">var</span> state = state<font></font>
    <font></font>
    <span class="hljs-keyword">switch</span> action {
    <span class="hljs-keyword">case</span> .addWorkout(<span class="hljs-keyword">let</span> workout):<font></font>
        state.workouts.append(workout)<font></font>
        <font></font>
    <span class="hljs-keyword">case</span> .removeWorkout(<span class="hljs-keyword">let</span> indexSet):<font></font>
        state.workouts.remove(atOffsets: indexSet)<font></font>
    <font></font>
    <span class="hljs-keyword">case</span> .<span class="hljs-built_in">sort</span>(<span class="hljs-keyword">let</span> type):
        <span class="hljs-keyword">switch</span> type {
        <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.<span class="hljs-built_in">distance</span> &gt; $<span class="hljs-number">1</span>.<span class="hljs-built_in">distance</span> }<font></font>
            state.sortType = .<span class="hljs-built_in">distance</span>
        <span class="hljs-keyword">case</span> .complexity:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.complexity.rawValue &gt; $<span class="hljs-number">1</span>.complexity.rawValue }<font></font>
            state.sortType = .complexity<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fun√ß√£o que escrevemos √© bastante simples e funciona da seguinte maneira:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copia o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atual </font><font style="vertical-align: inherit;">para trabalhar com ele.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com base na </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , atualizamos nosso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> copiado </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retornar o </font><b><font style="vertical-align: inherit;">estado</font></b><font style="vertical-align: inherit;"> atualizado</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale a pena notar que a fun√ß√£o acima √© uma fun√ß√£o pura, e √© isso que quer√≠amos alcan√ßar! </font><font style="vertical-align: inherit;">Uma fun√ß√£o deve atender a duas condi√ß√µes para ser considerada "pura":</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada vez, a fun√ß√£o retorna o mesmo resultado quando √© chamada com o mesmo conjunto de dados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o tem efeitos colaterais.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O √∫ltimo elemento Redux ausente √© a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ent√£o vamos implement√°-lo para nosso aplicativo.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Store</span>: <span class="hljs-title">ObservableObject</span> </span>{<font></font>
     @<span class="hljs-type">Published</span> <span class="hljs-keyword">private</span>(<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> state: <span class="hljs-type">AppState</span><font></font>
     <font></font>
     <span class="hljs-keyword">init</span>(state: <span class="hljs-type">AppState</span> = .<span class="hljs-keyword">init</span>(workouts: [<span class="hljs-type">Workout</span>]())) {
         <span class="hljs-keyword">self</span>.state = state<font></font>
     }<font></font>
     <font></font>
     <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dispatch</span><span class="hljs-params">(action: Action)</span></span> {<font></font>
         state = reducer(state: state, action: action)<font></font>
     }<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas implementa√ß√µes do objeto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">usamos todas as vantagens do protocolo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObservableObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o que nos permite excluir a grava√ß√£o de uma grande quantidade de c√≥digo de modelo ou o uso de estruturas de terceiros. A propriedade </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© somente leitura e usa o wrapper da propriedade </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Published</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o que significa que sempre que √© alterado, o SwiftUI recebe notifica√ß√µes. O m√©todo init assume um estado inicial como um par√¢metro com um determinado valor padr√£o na forma de uma matriz vazia de elementos do Workout. A fun√ß√£o de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">despacho</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© a √∫nica maneira de atualizar o estado: ela substitui o estado atual pelo novo criado pela fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redutora</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , com base em</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© passada como um par√¢metro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que implementamos todos os componentes do Redux, podemos come√ßar a criar uma interface de usu√°rio para nosso aplicativo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementa√ß√£o de aplicativo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A interface do usu√°rio do nosso aplicativo ser√° bastante simples. </font><font style="vertical-align: inherit;">E ser√° composto por duas telas pequenas. </font><font style="vertical-align: inherit;">A primeira e principal tela √© uma tela que exibir√° uma lista de exerc√≠cios. </font><font style="vertical-align: inherit;">A segunda tela √© a tela de adi√ß√£o de treino. </font><font style="vertical-align: inherit;">Al√©m disso, cada elemento ser√° exibido em uma determinada cor, a cor refletir√° a complexidade do treino. </font><font style="vertical-align: inherit;">Os gl√≥bulos vermelhos indicam a maior dificuldade do treino, a laranja √© respons√°vel pela dificuldade m√©dia e o verde √© o respons√°vel pelo treino mais f√°cil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementaremos a interface usando uma nova estrutura da Apple chamada SwiftUI. O SwiftUI substitui nosso familiar UIKit. O SwiftUI √© fundamentalmente diferente do UIKit, principalmente por ser uma abordagem declarativa para escrever elementos da interface do usu√°rio com c√≥digo. Neste artigo, n√£o vou me aprofundar em todos os meandros do SwiftUI e presumo que voc√™ j√° tenha experi√™ncia com o SwiftUI. Se voc√™ n√£o tem conhecimento do SwiftUI, aconselho a prestar aten√ß√£o √† documenta√ß√£o da Apple, ou seja, veja os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√°rios tutoriais completos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com adi√ß√£o passo a passo e exibi√ß√£o interativa do resultado em exibi√ß√£o. H√° tamb√©m links para exemplos de projetos. Esses tutoriais permitir√£o que voc√™ mergulhe rapidamente no mundo declarativo do SwiftUI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m √© importante notar que o SwiftUI ainda n√£o est√° pronto para projetos de produ√ß√£o, √© muito jovem e mais de um ano se passar√° antes que possa ser usado dessa maneira. Al√©m disso, n√£o esque√ßa que ele suporta apenas as vers√µes do iOS 13.0+. Mas tamb√©m vale a pena notar que o SwiftUI funcionar√° em todas as plataformas da Apple, o que √© uma grande vantagem sobre o UIKit! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar a implementa√ß√£o na tela principal do nosso aplicativo. V√° para o arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView.swift,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> altere o c√≥digo atual para isso.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">WorkoutListView</span>()<font></font>
                .navigationBarTitle(<span class="hljs-string">"Workouts diary"</span>, displayMode: .inline)<font></font>
                .navigationBarItems(<font></font>
                    leading: <span class="hljs-type">AddButton</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode),<font></font>
                    trailing: <span class="hljs-type">TrailingView</span>()<font></font>
                )<font></font>
        }<font></font>
        .sheet(isPresented: $isAddingMode) {<font></font>
            <span class="hljs-type">AddWorkoutView</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode)<font></font>
                .environmentObject(<span class="hljs-keyword">self</span>.store)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Visualiza√ß√£o de Conte√∫do √© uma visualiza√ß√£o padr√£o no SwiftUI. </font><font style="vertical-align: inherit;">A parte mais importante - do meu ponto de vista - √© a linha de c√≥digo que cont√©m a vari√°vel store. </font><font style="vertical-align: inherit;">Criaremos @EnvironmentObject. </font><font style="vertical-align: inherit;">Isso nos permitir√° usar os dados da loja sempre que necess√°rio e, al√©m disso, atualizar√° automaticamente nossas visualiza√ß√µes se os dados forem alterados. </font><font style="vertical-align: inherit;">Isso √© algo como Singleton para nossa loja.</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m vale a pena observar a seguinte linha de c√≥digo:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â um inv√≥lucro que podemos usar para indicar o estado de uma Visualiza√ß√£o. </font><font style="vertical-align: inherit;">O SwiftUI o armazenar√° em uma mem√≥ria interna especial fora da estrutura do View. </font><font style="vertical-align: inherit;">Somente uma Visualiza√ß√£o vinculada pode acess√°-la. </font><font style="vertical-align: inherit;">Uma vez que o valor da propriedade</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> altera√ß√µes, o SwiftUI recria a tela para levar em conta as altera√ß√µes de estado.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ul/ab/qx/ulabqxoyqpmsk3vndncjq3-i-1m.png" alt="imagem" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, iremos ao arquivo SceneDelegate.swift e adicionaremos o c√≥digo ao m√©todo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(
        <span class="hljs-number">_</span> scene: UIScene,
        willConnectTo session: UISceneSession,
        options connectionOptions: UIScene.ConnectionOptions
    )</span></span> {
        <span class="hljs-keyword">let</span> contentView = <span class="hljs-type">ContentView</span>().environmentObject(<span class="hljs-type">Store</span>())<font></font>
        <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: contentView)
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma maneira, qualquer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@EnvironmentObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode ser passado para qualquer representa√ß√£o filho em todo o aplicativo, e tudo isso √© poss√≠vel gra√ßas ao Environment. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vari√°vel </font><i><font style="vertical-align: inherit;">IsAddingMode est√°</font></i><font style="vertical-align: inherit;"> marcada</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e indica se a visualiza√ß√£o secund√°ria √© exibida ou n√£o. </font><font style="vertical-align: inherit;">A vari√°vel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© </font><font style="vertical-align: inherit;">herdada automaticamente pelo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e n√£o precisamos transmiti-la explicitamente, mas precisamos fazer isso para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque √© apresentada na forma de uma planilha que n√£o √© filha do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora crie um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que herdar√° da View. </font><font style="vertical-align: inherit;">Crie um novo arquivo r√°pido chamado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutListView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">List</span> {
            <span class="hljs-type">ForEach</span>(store.state.workouts) {
                <span class="hljs-type">WorkoutView</span>(workout: $<span class="hljs-number">0</span>)<font></font>
            }<font></font>
            .onDelete {<font></font>
                <span class="hljs-keyword">self</span>.store.dispatch(action: .removeWorkout(at: $<span class="hljs-number">0</span>))<font></font>
            }<font></font>
            .listRowInsets(<span class="hljs-type">EdgeInsets</span>())<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
View, que usa o elemento List do cont√™iner para exibir uma lista de exerc√≠cios. A fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDelete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© usada para excluir um treino e usa a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√£o removeWorkout</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© executada usando a fun√ß√£o de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">despacho</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fornecida pela </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loja</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para exibir o treino na lista, o WorkoutView √© usado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie outro arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutView.swift,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que ser√° respons√°vel por exibir nosso item na lista.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">let</span> workout: <span class="hljs-type">Workout</span><font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> backgroundColor: <span class="hljs-type">Color</span> {
        <span class="hljs-keyword">switch</span> workout.complexity {
        <span class="hljs-keyword">case</span> .low:
            <span class="hljs-keyword">return</span> .green
        <span class="hljs-keyword">case</span> .medium:
            <span class="hljs-keyword">return</span> .orange
        <span class="hljs-keyword">case</span> .high:
            <span class="hljs-keyword">return</span> .red<font></font>
        }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span> {
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(workout.name)
                <span class="hljs-type">Text</span>(<span class="hljs-string">"Distance:"</span> + workout.<span class="hljs-built_in">distance</span> + <span class="hljs-string">"km"</span>)<font></font>
                    .font(.subheadline)<font></font>
            }<font></font>
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(simpleFormat(workout.date))<font></font>
            }<font></font>
        }<font></font>
        .padding()<font></font>
        .background(backgroundColor)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">WorkoutView</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleFormat</span><span class="hljs-params">(<span class="hljs-number">_</span> date: Date)</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">let</span> dateFormatter = <span class="hljs-type">DateFormatter</span>()<font></font>
        dateFormatter.dateFormat = <span class="hljs-string">"dd MMM yyyy"</span>
        dateFormatter.locale = .<span class="hljs-keyword">init</span>(identifier: <span class="hljs-string">"en_GB"</span>)
        <span class="hljs-keyword">return</span> dateFormatter.string(from: date)<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa visualiza√ß√£o usa o objeto de treinamento como par√¢metro e √© configurada com base em suas propriedades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para adicionar um novo item √† lista, voc√™ deve alterar o par√¢metro </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para exibir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Essa responsabilidade </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© do AddButton</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddButton</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">true</span> }) {
            <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"plus"</span>)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AddButton tamb√©m vale a pena colocar em um arquivo separado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa visualiza√ß√£o √© um bot√£o simples que foi extra√≠do do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> principal </font><font style="vertical-align: inherit;">para melhor estrutura e separa√ß√£o de c√≥digo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie uma exibi√ß√£o para adicionar um novo treino. </font><font style="vertical-align: inherit;">Crie um novo arquivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddWorkoutView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> nameText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> distanceText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> complexityField: <span class="hljs-type">Complexity</span> = .medium<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dateField: <span class="hljs-type">Date</span> = <span class="hljs-type">Date</span>()<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">Form</span> {
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Name"</span>, text: $nameText)
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Distance"</span>, text: $distanceText)
                <span class="hljs-type">Picker</span>(selection: $complexityField, label: <span class="hljs-type">Text</span>(<span class="hljs-string">"Complexity"</span>)) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Low"</span>).tag(<span class="hljs-type">Complexity</span>.low)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Medium"</span>).tag(<span class="hljs-type">Complexity</span>.medium)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"High"</span>).tag(<span class="hljs-type">Complexity</span>.high)<font></font>
                }<font></font>
                <span class="hljs-type">DatePicker</span>(selection: $dateField, displayedComponents: .date) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Date"</span>)<font></font>
                }<font></font>
            }<font></font>
            .navigationBarTitle(<span class="hljs-string">"Workout Details"</span>, displayMode: .inline)<font></font>
            .navigationBarItems(<font></font>
                leading: <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span> }) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Cancel"</span>)<font></font>
                },<font></font>
                trailing: <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-keyword">let</span> workout = <span class="hljs-type">Workout</span>(<font></font>
                        name: <span class="hljs-keyword">self</span>.nameText,
                        <span class="hljs-built_in">distance</span>: <span class="hljs-keyword">self</span>.distanceText,<font></font>
                        date: <span class="hljs-keyword">self</span>.dateField,<font></font>
                        complexity: <span class="hljs-keyword">self</span>.complexityField<font></font>
                    )<font></font>
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .addWorkout(workout))
                    <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span><font></font>
                }) {<font></font>
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Save"</span>)<font></font>
                }<font></font>
                .disabled(nameText.isEmpty)<font></font>
            )<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um controlador bastante grande que, como outros controladores, cont√©m a vari√°vel de armazenamento. </font><font style="vertical-align: inherit;">Ele tamb√©m cont√©m as vari√°veis </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nameText, distanceText, complexField e isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As tr√™s primeiras vari√°veis ‚Äã‚Äãs√£o necess√°rias para vincular </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextField, Picker, DatePicker</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que podem ser vistas nesta tela. </font><font style="vertical-align: inherit;">A barra de navega√ß√£o possui dois elementos. </font><font style="vertical-align: inherit;">O primeiro bot√£o √© um bot√£o que fecha a tela sem adicionar um novo treino, e o √∫ltimo adiciona um novo treino √† lista, o que √© alcan√ßado enviando a a√ß√£o addWorkout. </font><font style="vertical-align: inherit;">Essa a√ß√£o tamb√©m fecha a tela Adicionar novo treino.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/cn/b0/gycnb0wn0s9eachcnmcy2s96jkq.png" alt="imagem" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por √∫ltimo, mas n√£o menos importante, √© o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrailingView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TrailingView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span>(alignment: .center, spacing: <span class="hljs-number">30</span>) {
            <span class="hljs-type">Button</span>(action: {
                <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span>.store.state.sortType {
                <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .<span class="hljs-built_in">distance</span>))
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .complexity))<font></font>
                }<font></font>
            }) {<font></font>
                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"arrow.up.arrow.down"</span>)<font></font>
            }<font></font>
            <span class="hljs-type">EditButton</span>()<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa visualiza√ß√£o consiste em dois bot√µes respons√°veis ‚Äã‚Äãpela classifica√ß√£o da lista de exerc√≠cios e pela ativa√ß√£o ou desativa√ß√£o do modo de edi√ß√£o da nossa lista de exerc√≠cios. </font><font style="vertical-align: inherit;">As a√ß√µes de classifica√ß√£o s√£o chamadas usando a fun√ß√£o de despacho, que podemos chamar atrav√©s da propriedade store.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/av/72/2u/av722utbzjxbewvozklxazeelde.png" alt="imagem" width="350" height="614"></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultado</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O aplicativo est√° pronto e deve funcionar exatamente como o esperado. </font><font style="vertical-align: inherit;">Vamos tentar compilar e execut√°-lo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redux e SwiftUI funcionam muito bem juntos. O c√≥digo escrito usando essas ferramentas √© f√°cil de entender e pode ser bem organizado. Outro bom aspecto desta solu√ß√£o √© sua excelente testabilidade de c√≥digo. No entanto, esta solu√ß√£o n√£o apresenta desvantagens, uma delas √© uma grande quantidade de mem√≥ria usada pelo aplicativo quando o estado do aplicativo √© muito complexo e o desempenho do aplicativo pode n√£o ser o ideal em alguns cen√°rios espec√≠ficos, pois todas as Exibi√ß√µes no SwiftUI s√£o atualizadas ao criar um novo Estado. Essas defici√™ncias podem ter um grande impacto na qualidade do aplicativo e na intera√ß√£o do usu√°rio, mas se as lembrarmos e prepararmos o estado de maneira razo√°vel, o impacto negativo poder√° ser facilmente minimizado ou mesmo evitado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode baixar ou visualizar o c√≥digo fonte do projeto.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que voc√™ tenha gostado deste artigo e tenha aprendido algo novo por si mesmo. At√© breve. </font><font style="vertical-align: inherit;">Al√©m disso, ser√° ainda mais interessante.</font></font></s></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500146/index.html">Procura de emprego na Alemanha como gerente de produtos e muito mais. Parte 3/5. O que voc√™ precisa fazer antes de come√ßar a enviar curr√≠culos</a></li>
<li><a href="../pt500148/index.html">Filtro de firewall Mikrotik: script gerando a base para uma pol√≠tica de filtragem</a></li>
<li><a href="../pt500150/index.html">Rob√¥ ROS e Mendigo de Grade Neural</a></li>
<li><a href="../pt500152/index.html">Como integrei o terminal POS e o FR IKKM-Touch em 1C: empresa</a></li>
<li><a href="../pt500154/index.html">Aprendizado de m√°quina confidencial. Biblioteca PySyft</a></li>
<li><a href="../pt500160/index.html">Elementos visuais</a></li>
<li><a href="../pt500162/index.html">Tutorial sobre processamento de dados esportivos em python</a></li>
<li><a href="../pt500164/index.html">Tutor: custos profissionais</a></li>
<li><a href="../pt500170/index.html">Tutorial do simulador de rede ns-3. Cap√≠tulo 6</a></li>
<li><a href="../pt500178/index.html">Tradu√ß√£o do livro de Andrew Un, Passion for Machine Learning, Cap√≠tulos 38 e 39</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>