<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСйЁЯП╝тАНЁЯОи ЁЯРИ ЁЯТЕЁЯП╜ MySQL (Percona Server) рдХреЛ 5.7 рд╕реЗ 8.0 рддрдХ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдирд╛ ЁЯСиЁЯП╜тАНЁЯН│ тЖЧя╕П тЧАя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкреНрд░рдЧрддрд┐ рдЕрднреА рднреА рд╕реНрдерд┐рд░ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП MySQL рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХреЗ рдХрд╛рд░рдг рддреЗрдЬреА рд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реЛрддреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред рдмрд╣реБрдд рд╕рдордп рдкрд╣рд▓реЗ рдирд╣реАрдВ, рд╣рдорд╛рд░реА рдПрдХ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MySQL (Percona Server) рдХреЛ 5.7 рд╕реЗ 8.0 рддрдХ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдирд╛</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/500706/"><img src="https://habrastorage.org/webt/gr/ty/r9/grtyr9g5ysbgx9woi8ldfpn91ac.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкреНрд░рдЧрддрд┐ рдЕрднреА рднреА рд╕реНрдерд┐рд░ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП MySQL рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХреЗ рдХрд╛рд░рдг рддреЗрдЬреА рд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реЛрддреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдмрд╣реБрдд рд╕рдордп рдкрд╣рд▓реЗ рдирд╣реАрдВ, рд╣рдорд╛рд░реА рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рдЖрд░рд╛рдорджрд╛рдпрдХ рдкрд░реНрдХреЛрдирд╛ рд╕рд░реНрд╡рд░ 5.7 рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╕рдВрд╕реНрдХрд░рдг 8 рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдерд╛ред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдм рдЙрдмрдВрдЯреВ рд▓рд┐рдирдХреНрд╕ 16.04 рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкрд░ рд╣реБрдЖред </font><font style="vertical-align: inherit;">рдиреНрдпреВрдирддрдо рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдорд╛рди рдСрдкрд░реЗрд╢рди рдХреИрд╕реЗ рдХрд░реЗрдВ рдФрд░ рдЕрдкрдЧреНрд░реЗрдб рдХреЗ рджреМрд░рд╛рди рд╣рдореЗрдВ рдХреНрдпрд╛ рд╕рдорд╕реНрдпрд╛рдПрдВ рдЖрдИрдВ - рдЗрд╕ рд▓реЗрдЦ рдХреЛ рдкрдврд╝реЗрдВред</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╢рд┐рдХреНрд╖рдг</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░ рдХрд╛ рдХреЛрдИ рднреА рдЕрдкрдбреЗрдЯ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рд╕реЗ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИ: рд╕рд┐рд╕реНрдЯрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ рд╕реАрдорд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕реБрдзрд╛рд░, рдЬреЛ рдкреБрд░рд╛рдиреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рд╕рд╛рдл рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рджрд╕реНрддрд╛рд╡реЗрдЬ рдХреА рдУрд░ рд░реБрдЦ рдХрд░реЗрдВрдЧреЗ:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL 8 рдЬрд╛рд░реА рдиреЛрдЯ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL рд╕реЗ рдЕрдкрдЧреНрд░реЗрдб рдЧрд╛рдЗрдб</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЗрд░рдХреЛрдирд╛ рд╕реЗ рдЕрдкрдЧреНрд░реЗрдб рдЧрд╛рдЗрдб</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рдФрд░ рдЬрд╛рджреВрдЧрд░ рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдкрд░ MySQL рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдПрдХ рдХрд╛рд░реНрдп рдпреЛрдЬрдирд╛ рдмрдирд╛рдПрдВ:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкреНрд░рдЪрд▓рд┐рдд рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рд╣рдЯрд╛рдХрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдареАрдХ рдХрд░реЗрдВред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдЧрддрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдХреЗ рджрд╛рд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ </font></font><code>percona-server-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрд╕реА рдкреИрдХреЗрдЬ рдХреЛ рд▓рдЧрд╛рдХрд░ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВред</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдпреЛрдЬрдирд╛ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдЖрдЗрдЯрдо рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВрдЧреЗ рдФрд░ рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдХреНрдпрд╛ рдЧрд▓рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд░реВрд░реА! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреИрд▓реЗрд░рд╛ рдЖрдзрд╛рд░рд┐рдд MySQL рдХреНрд▓рд╕реНрдЯрд░ рдЕрдкрдЧреНрд░реЗрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдЕрдкрдиреА рд╕реВрдХреНрд╖реНрдорддрд╛рдПрдВ рд╣реИрдВ рдЬреЛ рдХрд┐ рд▓реЗрдЦ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдирд╣реАрдВ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрдкрдХреЛ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЗрд╕ рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднрд╛рдЧ 1: рдХрдиреНрдлрд╝рд┐рдЧрд▓реНрд╕ рдХреА рдЬрд╛рдБрдЪ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдВрд╕реНрдХрд░рдг 8 рдореЗрдВ, MySQL рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ </font></font><code>query_cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЗрд╕реЗ </font><font style="vertical-align: inherit;">рд╡рд╛рдкрд╕ рд╕рдВрд╕реНрдХрд░рдг 5.7 рдореЗрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкреНрд░рдЪрд▓рд┐рдд рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЧрдпрд╛ рдерд╛ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдЕрдм рдЗрд╕реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рддрджрдиреБрд╕рд╛рд░, рд╕рдВрдмрдВрдзрд┐рдд рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдХреИрд╢рд┐рдВрдЧ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд▓рд┐рдП, рдЕрдм рдЖрдк рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдкреБрд░рд╛рдиреЗ рдкреНрд░реЛ рдбрд╛рдпрд░реЗрдХреНрд╢рдВрд╕ рдХреЙрдиреНрдлрд┐рдЧ рдореЗрдВ рдкрд╛рдП рдЧрдП рдереЗ </font></font><code>innodb_file_format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдпрджрд┐ MySQL 5.7 рдореЗрдВ рдпрд╣ InnoDB рдкреНрд░рд╛рд░реВрдк рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рдерд╛, рддреЛ 8 рд╡рд╛рдВ рд╕рдВрд╕реНрдХрд░рдг рдкрд╣рд▓реЗ рд╕реЗ рд╣реА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗрд╡рд▓ рдмрд╛рд░рд╛рдХреБрдбрд╛ рдкреНрд░рд╛рд░реВрдк рдХреЗ рд╕рд╛рде</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдорд╛рд░рд╛ рдкрд░рд┐рдгрд╛рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХрд╛ рд╣реИ:</font></font><br>
<br>
<ul>
<li> <code>query_cache_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>query_cache_limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>query_cache_size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li> <code>innodb_file_format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>innodb_file_format_max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рд╣рдо Percona рд╕рд░реНрд╡рд░ рдХреА рдбреЙрдХрдЯрд░ рдЫрд╡рд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╣рдо рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рд░реНрд╡рд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВрдЧреЗ </font></font><code>mysql_config_test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдФрд░ рдЕрдЧрд▓рд╛ рдбреЗрдЯрд╛ рдФрд░ рд▓реЙрдЧ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдПрдВред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг percona- рд╕рд░реНрд╡рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░реАрдХреНрд╖рдг:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p {mysql_config_test,mysql_data,mysql_logs}<font></font>
cp -r /etc/mysql/conf.d/* mysql_config_test/<font></font>
docker run  --name some-percona -v $(<span class="hljs-built_in">pwd</span>)/mysql_config_test:/etc/my.cnf.d/  -v $(<span class="hljs-built_in">pwd</span>)/mysql_data/:/var/lib/mysql/ -v $(<span class="hljs-built_in">pwd</span>)/mysql_logs/:/var/<span class="hljs-built_in">log</span>/mysql/ -e MYSQL_ROOT_PASSWORD=<span class="hljs-variable">${MYSQL_PASSWORD}</span> -d percona:8-centos</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд░рд┐рдгрд╛рдо: рдпрд╛ рддреЛ рдбреЙрдХрд░ рд▓реЙрдЧ рдореЗрдВ, рдпрд╛ рд▓реЙрдЧ рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ - рдЖрдкрдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ - рдПрдХ рдлрд╝рд╛рдЗрд▓ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА рдЬрд┐рд╕рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдБ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╣реИ:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-04-03T12:44:19.670831Z 0 [Warning] [MY-011068] [Server] The syntax 'expire-logs-days' is deprecated and will be removed in a future release. Please use binlog_expire_logs_seconds instead.<font></font>
2020-04-03T12:44:19.671678Z 0 [Warning] [MY-013242] [Server] --character-set-server: 'utf8' is currently an alias for the character set UTF8MB3, but will be an alias for UTF8MB4 in a future release. Please consider using UTF8MB4 in order to be unambiguous.<font></font>
2020-04-03T12:44:19.671682Z 0 [Warning] [MY-013244] [Server] --collation-server: 'utf8_general_ci' is a collation of the deprecated character set UTF8MB3. Please consider using UTF8MB4 with an appropriate collation instead.</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдореЗрдВ рдЕрднреА рднреА рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдФрд░ рдЕрдкреНрд░рдЪрд▓рд┐рдд рдирд┐рд░реНрджреЗрд╢ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА </font></font><code>expire-logs-days</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднрд╛рдЧ 2: рдЪрд▓ рд░рд╣реЗ рдкреНрд░рддрд┐рд╖реНрдард╛рдиреЛрдВ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдирд╛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдВрдЧрддрддрд╛ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рдЬрд╛рдБрдЪ рдХреЗ рд▓рд┐рдП рдЕрджреНрдпрддрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ 2 рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЛ рдореМрдЬреВрджрд╛ рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреА рд╕рдВрдЧрддрддрд╛ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪрд▓реЛ рдХреНрд▓рд╛рд╕рд┐рдХ mysqlcheck рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдмрд╕ рдЪрд▓рд╛рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="bash hljs">mysqlcheck -u root -p --all-databases --check-upgrade</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЛрдб 0 рдХреЗ рд╕рд╛рде рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рдЬрд╛рдПрдЧреА: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xc/f-/yk/xcf-yknfyh2puesxjqupkstv_qo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL рдХреЗ рд╢реЗрд▓</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдВрд╕реНрдХрд░рдг рдЙрдкрдпреЛрдЧрд┐рддрд╛ MySQL рдХреЗ рдЖрдзреБрдирд┐рдХ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИ </font><font style="vertical-align: inherit;">(рдкреЗрд░рдХреЛрдирд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рдПрдХ рдкреИрдХреЗрдЬ рд╣реИ </font></font><code>percona-mysql-shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред рдпрд╣ рдХреНрд▓рд╛рд╕рд┐рдХ mysql рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рд╣реИ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ, SQL рд╕рдВрдкрд╛рджрдХ рдФрд░ MySQL рдкреНрд░рд╢рд╛рд╕рди рдЯреВрд▓ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рддреА рд╣реИред рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд░ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рдореНрди рдХрдорд╛рдВрдб рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="bash hljs">mysqlsh -- util check-for-server-upgrade { --user=root --host=1.1.1.1 --port=3306 } --config-path=/etc/mysql/my.cnf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдпрд╣рд╛рдВ рд╣рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ рд╣реИрдВ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o_/nd/r5/o_ndr55tsfxrr0gbbu7zgala-vu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХреБрдЫ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИ - рдмрд╕ рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪреЗрддрд╛рд╡рдиреА </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдиреАрдЪреЗ рджреЗрдЦреЗрдВ)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рд╕рдордЧреНрд░ рдкрд░рд┐рдгрд╛рдо: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/uy/xc/afuyxccks5gfu2w2bl1pgruvv-8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдордиреЗ рддрдп рдХрд┐рдпрд╛ рдХрд┐ рдЕрджреНрдпрддрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдкрд░реЛрдХреНрдд рдЪреЗрддрд╛рд╡рдиреА рдкрд░ рдПрдХ рдиреЛрдЯ рдЬреЛ рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ MySQL рдореЗрдВ UTF-8 рд╣рд╛рд▓ рддрдХ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд╡рд╛рд╕реНрддрд╡рд┐рдХ" UTF-8 рдирд╣реАрдВ рдерд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ 4. рдХреЗ рдмрдЬрд╛рдп 3 рдмрд╛рдЗрдЯреНрд╕ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рдерд╛ред MySQL 8 рдореЗрдВ, рдЙрдиреНрд╣реЛрдВрдиреЗ рдЕрдВрдд рдореЗрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : рдЙрдкрдирд╛рдо </font></font><code>utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд▓реНрдж рд╣реА рдПрдиреНрдХреЛрдбрд┐рдВрдЧ </font></font><code>utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдкреБрд░рд╛рдиреЗ </font><font style="vertical-align: inherit;">рдХреЛ рдЬрдиреНрдо рджреЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдХреЙрд▓рдо рдмрди рдЬрд╛рдПрдВрдЧреЗ </font></font><code>utf8mb3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рдПрдиреНрдХреЛрдбрд┐рдВрдЧ </font></font><code>utf8mb3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдЗрд╕ рд░рд┐рд▓реАрдЬрд╝ рдореЗрдВ рдирд╣реАрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдЗрд╕реЗ рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдбреАрдмреАрдПрдордПрд╕ рдХреА рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рд╕реНрдерд╛рдкрдирд╛ рдкрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдиреНрдХреЛрдбрд┐рдВрдЧреНрд╕ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднрд╛рдЧ 3: рд╕рд░реНрд╡рд░ рдЕрдкрдбреЗрдЯ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рддрд░рд╣ рдХреА рдард╛рда рдпреЛрдЬрдирд╛ рд╣реЛрдиреЗ рдкрд░ рдХреНрдпрд╛ рдЧрд▓рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ? .. рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдкрддрд╛ рд╣реИ рдХрд┐ рдмрд╛рд░реАрдХрд┐рдпрд╛рдВ рд╣рдореЗрд╢рд╛ рд╣реЛрддреА рд╣реИрдВ, рд╣рдордиреЗ MySQL рджреЗрд╡ рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рдкрд╣рд▓рд╛ рдкреНрд░рдпреЛрдЧ рдХрд┐рдпрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдкреНрд░рд▓реЗрдЦрди</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде MySQL рд╕рд░реНрд╡рд░ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рдореБрджреНрджреЗ рдкрд░ рдкреНрд░рдХрд╛рд╢ рдбрд╛рд▓рддрд╛ рд╣реИред рд▓рдмреНрдмреЛрд▓реБрдЖрдм рдпрд╣ рд╣реИ рдХрд┐ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдпрд╣ рд╕рднреА рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ (рджрд╛рд╕) рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ MySQL 8 рд╕рдВрд╕реНрдХрд░рдг 5.7 рд╡рд┐рдЬрд╝рд╛рд░реНрдб рд╕реЗ рджреЛрд╣рд░рд╛ рд╕рдХрддрд╛ рд╣реИред рдХреБрдЫ рдХрдард┐рдирд╛рдИ рдЗрд╕ рддрдереНрдп рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ рдХрд┐ рд╣рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рд╕реНрдЯрд░ &lt;-&gt; рдорд╛рд╕реНрдЯрд░</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЛрдб рдХрд╛ </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">рдЬрдм рджреВрд░рд╕реНрде рдорд╛рд╕реНрдЯрд░ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗрд╡рд▓-рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЛрдб рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдпрд╣реА рд╣реИ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореБрдХрд╛рдмрд▓рд╛ рдпрд╛рддрд╛рдпрд╛рдд рдПрдХ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рджреВрд╕рд░рд╛ рдмреИрдХрдЕрдк рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯреЛрдкреЛрд▓реЙрдЬреА рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uw/kx/j0/uwkxj0bwhbtjxd27brnug5iosaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрдЧреНрд░реЗрдб рдХреА рд╢реБрд░реБрдЖрдд </font><i><font style="vertical-align: inherit;">mysql рдкреНрд░рддрд┐рдХреГрддрд┐ dc 2</font></i><font style="vertical-align: inherit;"> рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рд╕реЗ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql рдорд╛рд╕реНрдЯрд░ рдбреАрд╕реА 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><code>mysql replica dc 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдФрд░ mysql рдорд╛рд╕реНрдЯрд░ рдбреАрд╕реА 1. рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред рдмреЗрд╣рддрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЛ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛, рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛ рджрд┐рдпрд╛, рдФрд░ рдЕрджреНрдпрддрди рд╕реЗ рдареАрдХ рдкрд╣рд▓реЗ рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рд░реЛрдХ рджрд┐рдпрд╛ </font></font><code>STOP SLAVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдмрд╛рдХреА рдЕрдкрдбреЗрдЯ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рдкреБрдирдГ рдЖрд░рдВрдн, config рд╡рд┐рдХрд▓реНрдк 3 рдЬреЛрдбрд╝рдиреЗ: </font></font><code>skip-networking</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>skip-slave-start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>skip-log-bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдЯреЗрдмрд▓ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдирд░реА рд▓реЙрдЧ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпреЗ рдирд┐рд░реНрджреЗрд╢ рдЧрд╛рд░рдВрдЯреА рджреЗрддреЗ рд╣реИрдВ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЗрдЯрд╛ рдореЗрдВ рдХреЛрдИ рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдЯреЗрдмрд▓ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдмрд╛рдЗрдирд░реА рд▓реЙрдЧ рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓реЗрдЧреАред </font><font style="vertical-align: inherit;">рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдкрд░ рдпрд╣ рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдмрдЪрд╛рдПрдЧрд╛ред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреИрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </font></font><code>percona-server-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ MySQL 8 рдореЗрдВ, рдЖрдкрдХреЛ </font><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд░ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж </font><font style="vertical-align: inherit;">рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд╣реАрдВ</font></font></b><font style="vertical-align: inherit;"></font><code>mysqlupgrade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╕рдлрд▓ рд╢реБрд░реБрдЖрдд рдХреЗ рдмрд╛рдж, рд╕рд░реНрд╡рд░ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ - рдкрд╣рд▓реЗ рдкреИрд░рд╛ рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЧрдП рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реАред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдХрд╛рдо рдХрд░рддреА рд╣реИ: рд╣рдо рдЬрд╛рдВрдЪрддреЗ рд╣реИрдВ </font></font><code>SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдХрд╛рдЙрдВрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рдЯреЗрдмрд▓ рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП рд╣реИрдВред</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕рдм рдХрд╛рдлреА рд╕рд░рд▓ рд▓рдЧрддрд╛ рд╣реИ: рджреЗрд╡ рдЕрдкрдбреЗрдЯ рд╕рдлрд▓ рд░рд╣рд╛ред </font><font style="vertical-align: inherit;">рдареАрдХ рд╣реИ, рдЖрдк рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рд░рд╛рдд рднрд░ рдХреЗ рдЙрдиреНрдирдпрди рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдИ рджреБрдЦ рдирд╣реАрдВ рдерд╛ - рд╣рдордиреЗ рдареЗрд╕ рдХреЛ рдЕрджреНрдпрддрди рдХрд┐рдпрд╛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рд╕рдлрд▓ рджреЗрд╡ рдЕрдиреБрднрд╡ рдХреЛ рдЪрд┐рддреНрд░рд┐рдд рдХрд░рдирд╛ рдЖрд╢реНрдЪрд░реНрдп рдХреЗ рдмрд┐рдирд╛ рдирд╣реАрдВ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЕрдкрдбреЗрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реНрд╡рдпрдВ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝ рд░рд╣рд╛ рд╣реИ, рд╣рдордиреЗ рдХрд╛рдо рд░реЛрдХ рджрд┐рдпрд╛ рдФрд░ рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕реЗ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ред рдЕрдЧрд▓реА рд╕реБрдмрд╣ рд╕рдорд╕реНрдпрд╛ рдЕрдзреНрдпрдпрди рдХреЛ рдкреБрдирд░реНрдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдирд┐рдореНрди рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдБ рд▓реЙрдЧ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреАрдВ:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-01-14T21:43:21.500563Z 2 [ERROR] [MY-012069] [InnoDB] table: t1 has 19 columns but InnoDB dictionary has 20 columns<font></font>
2020-01-14T21:43:21.500722Z 2 [ERROR] [MY-010767] [Server] Error in fixing SE data for db1.t1<font></font>
2020-01-14T21:43:24.208365Z 0 [ERROR] [MY-010022] [Server] Failed to Populate DD tables.<font></font>
2020-01-14T21:43:24.208658Z 0 [ERROR] [MY-010119] [Server] Aborting</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдореЗрд▓рд┐рдВрдЧ рд╕реВрдЪрд┐рдпреЛрдВ рдХреЗ рдЕрднрд┐рд▓реЗрдЦрд╛рдЧрд╛рд░ рдХреЗ рдПрдХ рдЕрдзреНрдпрдпрди рд╕реЗ рд╕рдордЭ рдореЗрдВ рдЖрдпрд╛ рдХрд┐ рдРрд╕реА рд╕рдорд╕реНрдпрд╛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL рдмрдЧ рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛рд░рдг рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ </font><font style="vertical-align: inherit;">ред рд╣рд╛рд▓рд╛рдВрдХрд┐ рдмрд▓реНрдХрд┐ рдпрд╣ рдПрдХ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдмрдЧ </font></font><code>mysqlcheck</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рднреА рд╣реИ </font></font><code>mysqlsh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ MySQL рдиреЗ рджрд╢рдорд▓рд╡ рдлрд╝реАрд▓реНрдб (int, smallint, рдЖрджрд┐) рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рддрд░реАрдХрд╛ mysql-server рдХреЗ рдЕрдВрджрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрджрд┐ рдЖрдкрдХрд╛ рдбреЗрдЯрд╛рдмреЗрд╕ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореВрд▓ рд░реВрдк</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реЗ 5.5 рдпрд╛ 5.1 рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ </font><b><font style="vertical-align: inherit;">рдерд╛</font></b><font style="vertical-align: inherit;"> , рдФрд░ рдлрд┐рд░ рдЖрдкрдиреЗ 5.7 рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд┐рдпрд╛, рддреЛ рдЖрдкрдХреЛ </font></font><code>OPTIMIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдЫ рддрд╛рд▓рд┐рдХрд╛рдУрдВ </font><font style="vertical-align: inherit;">рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ </font><font style="vertical-align: inherit;">ред рддрдм MySQL рдбреЗрдЯрд╛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдЧрд╛, рдЙрдиреНрд╣реЗрдВ рд╡рд░реНрддрдорд╛рди рд╕рдВрдЧреНрд░рд╣рдг рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдк рдЗрд╕реЗ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рд╕рд╛рде рднреА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ </font></font><code>mysqlfrm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">mysqlfrm --diagnostic -vv /var/lib/mysql/db/table.frm<font></font>
...<font></font>
 <span class="hljs-string">'field_length'</span>: 8,
  <span class="hljs-string">'field_type'</span>: 246, <span class="hljs-comment">#  </span>
  <span class="hljs-string">'field_type_name'</span>: <span class="hljs-string">'decimal'</span>,
  <span class="hljs-string">'flags'</span>: 3,
  <span class="hljs-string">'flags_extra'</span>: 67,
  <span class="hljs-string">'interval_nr'</span>: 0,
 <span class="hljs-string">'name'</span>: <span class="hljs-string">'you_deciaml_column'</span>,<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ </font></font><code>field_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдкрдХреЗ рдкрд╛рд╕ 0 рд╣реИ, рддреЛ рдкреБрд░рд╛рдиреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдпрд╣ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font></font><code>OPTIMIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдореВрд▓реНрдп 246 рд╣реИ, рддреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдирдпрд╛ рдкреНрд░рдХрд╛рд░ рд╣реИред рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдб</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдмрдЧ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рджреВрд╕рд░рд╛ рд╕рдВрднрд╛рд╡рд┐рдд рдХрд╛рд░рдг рдорд╛рдирддрд╛ рд╣реИ рдЬрд┐рд╕рдиреЗ рд╣рдореЗрдВ рджрд░рдХрд┐рдирд╛рд░ рдХрд░ рджрд┐рдпрд╛ рд╣реИ - рд╕рд┐рд╕реНрдЯрдо рдЯреЗрдмрд▓ рдореЗрдВ рдЗрдиреЛрдмреАрдбреА рдЯреЗрдмрд▓ рдХреА рдХрдореА </font></font><code>INNODB_SYS_TABLESPACES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдпрджрд┐ рд╡реЗ, рдЯреЗрдмрд▓ 5.1 рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдмрдирд╛рдП рдЧрдП рдереЗред рдЕрдкрдЧреНрд░реЗрдб рдХреЗ рджреМрд░рд╛рди рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрд▓рдЧреНрди рдПрд╕рдХреНрдпреВрдПрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдореЗрдВ рджреЗрд╡ рдкрд░ рдРрд╕реА рд╕рдорд╕реНрдпрд╛рдПрдБ рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИрдВ? рдЖрдзрд╛рд░ рдХреЛ рд╕рдордп-рд╕рдордп рдкрд░ рдЙрддреНрдкрд╛рджрди рд╕реЗ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдЗрд╕ рдкреНрд░рдХрд╛рд░, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рдмрдбрд╝реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рдпрд╣ рд╕рд░реНрд╡рд╡реНрдпрд╛рдкреА рд▓реЗрдиреЗ рдФрд░ рдкреНрд░рджрд░реНрд╢рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ </font></font><code>OPTIMIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдкрд░реНрдХреЛрдирд╛-рдЯреВрд▓рдХрд┐рдЯ рдпрд╣рд╛рдВ рдорджрдж рдХрд░реЗрдЧрд╛: рдкреАрдЯреА-рдСрдирд▓рд╛рдЗрди-рд╕реНрдХреАрдорд╛-рдкрд░рд┐рд╡рд░реНрддрди рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдСрдирд▓рд╛рдЗрди рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЙрддреНрдХреГрд╖реНрдЯ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрджреНрдпрддрди рдпреЛрдЬрдирд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдереА:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдХрд░реЗрдВред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбреЗрдЯрд╛рдмреЗрд╕ рдЕрдкрдЧреНрд░реЗрдб рдХрд░реЗрдВред</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдЙрд╕реА рд╕рдордп рдЕрджреНрдпрддрди рд╕рдордп рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░ рджрд┐рдпрд╛, рдФрд░ рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЛ рдЪрд▓рд╛рдпрд╛:</font></font><br>
<br>
<pre><code class="bash hljs">pt-online-schema-change --critical-load Threads_running=150 --alter <span class="hljs-string">"ENGINE=InnoDB"</span> --execute --chunk-size 100 --quiet --alter-foreign-keys-method auto h=127.0.0.1,u=root,p=<span class="hljs-variable">${MYSQL_PASSWORD}</span>,D=db1,t=t1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯреЗрдмрд▓ рдХреЛ рд▓рдВрдмреЗ рддрд╛рд▓реЗ рдХреЗ рдмрд┐рдирд╛ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдПрдХ рдирдИ рдЕрд╕реНрдерд╛рдпреА рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдпрд╣ рдореБрдЦреНрдп рддрд╛рд▓рд┐рдХрд╛ рд╕реЗ рдбреЗрдЯрд╛ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрд╕ рд╕рдордп рдЬрдм рджреЛрдиреЛрдВ рддрд╛рд▓рд┐рдХрд╛рдПрдВ рд╕рдорд╛рди рд╣реЛрддреА рд╣реИрдВ, рдореВрд▓ рддрд╛рд▓рд┐рдХрд╛ рд▓реЙрдХ рд╣реЛ рдЬрд╛рддреА рд╣реИ рдФрд░ рдПрдХ рдирдП рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рд▓рдЧрднрдЧ рдПрдХ рджрд┐рди рд▓рдЧреЗрдЧрд╛, рд▓реЗрдХрд┐рди рдбреЗрдЯрд╛ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдиреЗ рд╕реЗ рдбрд┐рд╕реНрдХ рдкрд░ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд▓реЛрдб рд╣реЛрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрддреНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рд╣рдордиреЗ рдХрдорд╛рдВрдб </font></font><code>--sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрдВ 10 рдХреЗ рдорд╛рди рдХреЗ рд╕рд╛рде рдПрдХ </font><font style="vertical-align: inherit;">рддрд░реНрдХ рдЬреЛрдбрд╝рд╛ </font><font style="vertical-align: inherit;">- рдпрд╣ рдкреИрд░рд╛рдореАрдЯрд░ рдбреЗрдЯрд╛ рдХреЗ рдПрдХ рдкреИрдХреЗрдЯ рдХреЛ рдПрдХ рдирдИ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдкреНрд░рддреАрдХреНрд╖рд╛ рдХреА рд▓рдВрдмрд╛рдИ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЖрдк рд▓реЛрдб рдХреЛ рдХрдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕рдордп рдХреА рдорд╛рдВрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдиреБрдХреВрд▓рди рдкреНрд░рджрд░реНрд╢рди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЕрджреНрдпрддрди рд╕рдлрд▓ рд░рд╣рд╛ред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... рд▓реЗрдХрд┐рди рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирд╣реАрдВ!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрдбреЗрдЯ рдХреЗ рдЖрдзреЗ рдШрдВрдЯреЗ рдмрд╛рдж, рдХреНрд▓рд╛рдЗрдВрдЯ рдПрдХ рд╕рдорд╕реНрдпрд╛ рд▓реЗрдХрд░ рдЖрдпрд╛ред </font><font style="vertical-align: inherit;">рдЖрдзрд╛рд░ рдиреЗ рдмрд╣реБрдд рдЕрдЬреАрдм рдХрд╛рдо рдХрд┐рдпрд╛: рд╕рдордп-рд╕рдордп рдкрд░, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдиреЗрдХреНрд╢рди рдХреА рдмреВрдВрджреЗрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╢реБрд░реВ рд╣реБрдИрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рдпрд╣ рджреЗрдЦрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рдореЗрдВ рдХреНрдпрд╛ рджреЗрдЦрд╛: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/gn/7v/hugn7vq8clkacetlzfb-gli1bcw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рдореЗрдВ sawtooth рдЧреНрд░рд╛рдл рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ, рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ MySQL рд╕рд░реНрд╡рд░ рдХреЗ рдереНрд░реЗрдбреНрд╕ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╕рдордп-рд╕рдордп рдкрд░ рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рдЧрд┐рд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдЖрд╡реЗрджрди рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреАрдВ:</font></font><br>
<br>
<pre><code class="plaintext hljs">[PDOException] SQLSTATE[HY000] [2002] Connection refused</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЙрдЧ рдХреЗ рдПрдХ рддреНрд╡рд░рд┐рдд рдирд┐рд░реАрдХреНрд╖рдг рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдорд╛рдпрд╕реНрдХрд▓реНрдб рдбреЗрдорди рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░ рд╕рдХрд╛ред </font><font style="vertical-align: inherit;">рддреНрд░реБрдЯрд┐рдпреЛрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЗ рдирд┐рдкрдЯрдиреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЗ рджреМрд░рд╛рди, рд╣рдордиреЗ рд╕рд┐рд╕реНрдЯрдо </font><b><font style="vertical-align: inherit;">"рдЕрдирд╛рде" рдПрдкрд░рдореЛрд░ рдкреЙрд▓рд┐рд╕реА рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рдкрд╛рдпрд╛</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># dpkg -S /etc/apparmor.d/cache/usr.sbin.mysqld</span><font></font>
dpkg-query: no path found matching pattern /etc/apparmor.d/cache/usr.sbin.mysqld<font></font>
<span class="hljs-comment"># dpkg -S /etc/apparmor.d/local/usr.sbin.mysqld</span>
dpkg-query: no path found matching pattern /etc/apparmor.d/<span class="hljs-built_in">local</span>/usr.sbin.mysqld
<span class="hljs-comment"># dpkg -S /etc/apparmor.d/usr.sbin.mysqld</span><font></font>
mysql-server-5.7: /etc/apparmor.d/usr.sbin.mysqld<font></font>
<span class="hljs-comment"># dpkg -l mysql-server-5.7</span>
rc  mysql-server-5.7 5.7.23-0ubuntu0.16.04.1      amd64</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпреЗ рдлрд╛рдЗрд▓реЗрдВ рдХреБрдЫ рд╕рд╛рд▓ рдкрд╣рд▓реЗ MySQL 5.7 рдХреЗ рдЕрдкрдЧреНрд░реЗрдб рдХреЗ рджреМрд░рд╛рди рдмрдирд╛рдИ рдЧрдИ рдереАрдВ рдФрд░ рд░рд┐рдореЛрдЯ рдкреИрдХреЗрдЬ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдереАрдВред </font><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдФрд░ apparmor рд╕реЗрд╡рд╛ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдиреЗ рд╕реЗ рд╕рдорд╕реНрдпрд╛ рд╣рд▓ рд╣реЛ рдЧрдИ:</font></font><br>
<br>
<pre><code class="bash hljs">systemctl stop apparmor<font></font>
rm /etc/apparmor.d/cache/usr.sbin.mysqld<font></font>
rm /etc/apparmor.d/<span class="hljs-built_in">local</span>/usr.sbin.mysqld<font></font>
rm /etc/apparmor.d/usr.sbin.mysqld<font></font>
systemctl start apparmor</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЦрд┐рд░рдХрд╛рд░</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЛрдИ рднреА, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдСрдкрд░реЗрд╢рди, рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╕рдорд╕реНрдпрд╛рдПрдВ рдкреИрджрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рд╕реБрд╡рд┐рдЪрд╛рд░рд┐рдд рдпреЛрдЬрдирд╛ рд╣рдореЗрд╢рд╛ рдЕрдкреЗрдХреНрд╖рд┐рдд рдкрд░рд┐рдгрд╛рдо рдХреА рдЧрд╛рд░рдВрдЯреА рдирд╣реАрдВ рджреЗрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм, рдХрд┐рд╕реА рднреА рдЕрдкрдбреЗрдЯ рдпреЛрдЬрдирд╛ рдореЗрдВ, рд╣рдорд╛рд░реА рдЯреАрдо рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдЕрдирд┐рд╡рд╛рд░реНрдп рд╕рдлрд╛рдИ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬреЛ рд╣рд╛рд▓ рд╣реА рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рджрд┐рдЦрд╛рдИ рджреЗ рд╕рдХрддреА рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЗрд╕ рдирд╣реАрдВ-рддреЛ рдкреЗрд╢реЗрд╡рд░ рдЧреНрд░рд╛рдлрд┐рдХ рдХрд╛рдо рдХреЗ рд╕рд╛рде, рдореИрдВ Percona рдХреЛ рдЙрдирдХреЗ рдорд╣рд╛рди рдЙрддреНрдкрд╛рджреЛрдВ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж рджреЗрдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛!</font></font><br>
<br>
<img height="75" width="75" src="https://habrastorage.org/webt/b1/af/mg/b1afmgyaozxjh0dqcbr3jrkdlk4.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреБрдирд╢реНрдЪ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдорд╛рд░реЗ рдмреНрд▓реЙрдЧ рдореЗрдВ рднреА рдкрдврд╝реЗрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ (рд╕рдореАрдХреНрд╖рд╛ рдФрд░ рд╡реАрдбрд┐рдпреЛ рд░рд┐рдкреЛрд░реНрдЯ)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдЯрд┐рдкреНрд╕ рдПрдВрдб рдЯреНрд░рд┐рдХреНрд╕: рдмрдбрд╝реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдмреВрдЯрд╕реНрдЯреНрд░реИрдк рдХреЛ рддреЗрдЬ рдХрд░рдирд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ SRE-рд░реЛрдЬрдорд░реНрд░рд╛ рдХреА рдЬрд┐рдВрджрдЧреА рд╕реЗ 6 рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╣рд╛рдирд┐рдпрд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li> ┬л<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">    Redis  K8s  -      </a>┬╗;</li>
<li> ┬л<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  MongoDB  Kubernetes</a>┬╗.</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi500694/index.html">68 рдЕрдирдЪрд╛рд╣реЗ рд╕реБрдЭрд╛рд╡</a></li>
<li><a href="../hi500696/index.html">рджреМрдбрд╝рдиреЗ рд╡рд╛рд▓реЗ рдЬреВрддреЗ рдорд╛рджрд╛ рдкреИрд░ рдХреЛ рдХреИрд╕реЗ рдЕрдиреБрдХреВрд▓ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ</a></li>
<li><a href="../hi500698/index.html">рдПрд╡рдЧреЗрдиреА рдХрдЯреЗрд╢реЗрд╡: "рдУрдкрдирд╡рд░реНрдХрдкрд╛рд░реНрдЯ рдХрд┐рд╕реА рднреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ"</a></li>
<li><a href="../hi500700/index.html">TLS1.3 рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдФрд░ рдЖрдкрдХреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЦрд╛рддреЗ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░: 2020 рдХреА рдкрд╣рд▓реА рддрд┐рдорд╛рд╣реА рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</a></li>
<li><a href="../hi500704/index.html">рдпреВрдирд┐рдХреЙрд░реНрдиреНрд╕ (Airbnb, Uber, Lyft, Careem) рдХреЛрд░реЛрдирд╛рд╡рд╛рдпрд░рд╕ рдорд╣рд╛рдорд╛рд░реА рдХреЗ рджреМрд░рд╛рди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдмреАрдЪ рд╣рдЬрд╛рд░реЛрдВ рдХрд░реНрдордЪрд╛рд░рд┐рдпреЛрдВ рдХреЛ рдмрдВрдж рдХрд░ рджреЗрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi500708/index.html">рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ DBMS: рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрдХрд░рдг рдЪреБрдирддреЗ рд╕рдордп рдЖрдкрдХреЛ рдХреНрдпрд╛ рдпрд╛рдж рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi500712/index.html">рдбрд┐рдЬрд┐рдЯрд▓ рдХреЛрд░реЛрдирд╛рд╡рд╛рдпрд░рд╕ - рд░реИрдВрд╕рдорд╡реЗрдпрд░ рдФрд░ рдЗрдиреНрдлреЛрд╕реНрдЯреАрд▓рд░ рдХрд╛ рд╕рдВрдпреЛрдЬрди</a></li>
<li><a href="../hi500718/index.html">рджреВрд░рд╕реНрде рдореЛрдб рдореЗрдВ EPAM: рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi500720/index.html">рдирдИ рд╕реВрдЪрдирд╛ рд╕реБрд░рдХреНрд╖рд╛ рдорд╛рдирдХ: рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЬреАрд╡рди рдХреЛ рдЕрдзрд┐рдХ рдХрдард┐рди рдмрдирд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi500722/index.html">"рддреИрдпрд╛рд░ рд╣реЛрдиреЗ рддрдХ рд╕реЗрдВрдХрдирд╛": рдЬреЛ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╕реЗ рджреБрд░реНрд▓рдн рдЯреЗрдк рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЛ рдмрдЪрд╛рддрд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>