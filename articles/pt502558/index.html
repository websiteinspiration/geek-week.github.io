<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏻 ✍🏿 👩🏾‍🤝‍👨🏽 Como colecionei física das rodas na Unigine 🤳🏿 🐙 🙍🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dia bom. 
 
 Desta vez, falaremos sobre o mecanismo russo Unigine e sobre como montar uma máquina simples nele. O esquema não é ideal, já que não o de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como colecionei física das rodas na Unigine</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502558/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dia bom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desta vez, falaremos sobre o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mecanismo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> russo </font><b><font style="vertical-align: inherit;">Unigine</font></b><font style="vertical-align: inherit;"> e sobre como montar uma máquina simples nele. </font><font style="vertical-align: inherit;">O esquema não é ideal, já que não o descobri em algumas coisas, mas pelo menos vou compartilhar minha experiência.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c2/zw/ga/c2zwgaa8w_tvfzoalwi0twc8tpw.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro de tudo, para entender como é feita a física das rodas, vamos à documentação oficial e encontramos este </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemplo</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A propósito, observe que este é um exemplo de junta de roda, mas por algum motivo está no endereço / car_suspension_joints /. Você também precisa garantir que a documentação não pule para as versões antigas (ou seja, que o DOCS (2.11) esteja aberto) e marque a caixa "C #" na parte superior do artigo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo estudado o exemplo, vemos que ele foi escrito por analogia com a solução C ++ inicial. Ou seja, tudo é criado através do código. Tanta coisa para programação visual, chegamos. Bem, nem tudo é tão triste, mas você pode ver como tudo isso é feito no código. E, ao rodar nos links, tenha uma idéia geral do dispositivo de articulação das rodas e das configurações físicas.</font></font><br>
<blockquote>           (               ).  ,   -,    UnigineScript,           .           LOD'.</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, eu esperava um guia passo a passo pronto para montagem visual, a fim de fazer algo rolar, custando pouco sangue. </font><font style="vertical-align: inherit;">Como resultado, eu ainda tinha que mergulhar nisso tudo com a cabeça para elaborar algum pipeline aproximado. </font><font style="vertical-align: inherit;">Isso foi parcialmente bem-sucedido, mas estava longe de ser entendido em todos os pontos e as questões permanecem em aberto, por exemplo, se os nós da caixa e da roda devem ser construídos em uma determinada hierarquia, se os eixos dos pontos estão orientados corretamente e assim por diante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, esta instrução o ajudará a entender o princípio básico, mas para entender os meandros das configurações, você ainda precisará estudar a documentação (ou talvez eles lhe digam algo útil nos comentários).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montagem do quadro</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crie um novo projeto. Escolha a opção c #. Abra o projeto no editor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rk/tn/h7/rktnh7wpsyzisoq4ty669fphlse.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/-y/ap/5w/-yap5w7rp7hvkwcn5kvplalrl4y.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qo/i9/h5/qoi9h50sjmgnd8ffvr0j_0adgqg.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Criamos a base da máquina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, clique com o botão direito do mouse na cena, escolhendo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primitivo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caixa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O resultado é um objeto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cubóide</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Levante-o um pouco acima do "piso". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cv/zv/wl/cvzvwl6izztpmcwchcizqgxtnok.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Criamos rodas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clique no mouse novamente e selecione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primitivo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cilindro</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Vai levar 4 peças.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/zl/qe/zmzlqe9puvjmazj1oqxx4vyouj4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para não se confundir com a orientação, você pode girar a câmera para que -Y brilhe de cima no cubo (ou seja, agora olhamos para a futura máquina por trás) e coloque dois cilindros atrás do Cuboid, outros dois na frente. De alguma forma, girar e personalizá-los não é necessário. Por conveniência, cores diferentes podem ser atribuídas à traseira e à frente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adicione física com base. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selecione Cubóide e, à esquerda, na janela </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parâmetros</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da guia </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nó</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">alterne para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Física</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Na coluna Corpo, selecione o tipo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rígido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Depois disso, role para baixo e selecione o item </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caixa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na coluna Formas aberta </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n3/if/mr/n3ifmrljrcf7hdti6jl1d_hkwzy.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ok/b7/bd/okb7bdarwhc9ecqndtxrv99_yvo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos o apareceu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShapeBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Entraremos em suas configurações e definiremos imediatamente nossa base para a massa ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">massa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) recomendada de 64 kg. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/3b/xg/sc3bxgfko_smsb0azhe3cxe6ska.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adicione física às rodas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por sua vez, selecione os cilindros e também os coloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rígidos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na guia Física. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles não precisam criar uma forma, porque as juntas das rodas funcionam em rakcasts. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Amarre as rodas na base. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hora de atribuir juntas de roda. Para fazer isso, selecione Cuboid corretamente e role para baixo até a coluna </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juntas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na guia Física </font><font style="vertical-align: inherit;">. Na lista, selecione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roda</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, quando você clica no botão </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicionar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a </font><font style="vertical-align: inherit;">janela </font><b><font style="vertical-align: inherit;">Selecionar um Corpo</font></b><font style="vertical-align: inherit;"> é </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exibida.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Lá, você seleciona um cilindro, que é destacado com uma grade branca na cena e pressione Ok. Uma ligação </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WheelJoint</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aparecerá na lista </font><font style="vertical-align: inherit;">. Aqui já é desejável renomeá-los (para isso, você precisa clicar na linha JointWheel e escrever um novo nome na coluna Nome). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/wc/55/xlwc55bh8sfeeycxgd_0g69bc4y.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/cy/tx/gu/cytxgutnev7f2dtruvcuxulb_di.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma maneira, conecte os cilindros restantes ao Cuboid. De modo que no final de sua lista de pontos queimou 4 linhas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k9/w7/m0/k9w7m0xomsussfajdt7pfrma0bo.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sem renomear, haveria quatro linhas de WheelJoint.Por </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">favor, note que você precisa vincular a partir do Cuboid, e não da guia Física dos próprios cilindros. Embora depois, se você selecionar um cilindro específico e for para a Física, a junta criada também será exibida lá e você poderá editar seus parâmetros. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Defina a configuração das ligações.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais uma vez, selecione Cuboid, encontre em Física uma lista de seus pontos e selecione um deles. Vemos que um canto branco com quadrados apareceu na cena dentro de Cuboid. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas configurações da junta, encontramos o gráfico do vetor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Âncora 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e ajustamos os valores de seus três campos para que esse canto seja deslocado ao longo do eixo X, fora de Cuboid e ligeiramente abaixado ao longo do eixo Z. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9r/qc/rq/9rqcrqrxixc4te5t044g7b6rgvc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k2/9w/bz/k29wbzbjz46oihwptmknnhs2vvk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, mudamos o canto ao longo do eixo Y, dependendo da ligação qual roda está atualmente selecionada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repetimos o procedimento com o restante dos pontos, definindo exatamente os mesmos turnos ao longo de Z e o mesmo, mas multidirecionais nos outros eixos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você selecionar todos os pontos de uma vez, o design geral ficará visível. Você também pode ativar a exibição de juntas em auxiliares em um painel especial acima da cena: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auxiliares</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Física</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articulações</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hb/up/zc/hbupzcovchgweojafgbxklzpqag.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vista traseira do quadro com os auxiliares incluídos </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vimos o que aconteceu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No editor, há um botão para calcular a física. Se você ativá-lo, uma simulação de física é iniciada (os scripts não funcionam) e você pode verificar como nosso Frankenstein se comporta. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de iniciar, verifique se as caixas de seleção ativadas para </font><b><font style="vertical-align: inherit;">Intersecção de </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colisão</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">física estão marcadas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nas configurações de "andar" </font><font style="vertical-align: inherit;">. Caso contrário, nossa criação poderá falhar completamente embaixo do piso, inteiramente ou apenas com rodas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qb/tm/o8/qbtmo8bd8kf3-p_w6sh7im8g3p0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenha cuidado, antes de ativar a simulação, é melhor salvar, e os parâmetros corrigidos durante sua operação retornarão aos seus valores após a desconexão.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como vemos, as rodas são apanhadas nos lugares certos, mas a estrutura cai na superfície com as extremidades dos cilindros. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o1/fw/-1/o1fw-1vccn8ik64sqcdbuqy2ghg.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você pode congelar o próprio Cuboid no local ativando primeiro a caixa de seleção Imóvel na guia Física na coluna Corpo. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ajuste os eixos das rodas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desativar simulação física. Selecione Cuboid, vá para a guia Physics e edite os eixos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">00</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Axis 10</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Axis 11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada junção </font><font style="vertical-align: inherit;">. Observe que, na soma, os campos de cada vetor assumem valores de 0 a 1 e o editor tentará corrigir automaticamente os valores se você colocar 1 em um novo eixo pela primeira vez sem zerar o vetor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aparentemente, ainda não desenvolvi os vetores, os auxiliares mostram que as partes esquerda e direita estão olhando na mesma direção, mas não dão uma compreensão clara de qual eixo é onde, o que dificulta a sintonia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De qualquer forma, esse layout funciona menos ou menos. Aqui, defino os vetores dos eixos da seguinte forma: Eixo 00 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), Eixo 10 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), Eixo 11 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t3/ag/gx/t3aggx5tphzit6yeuvzgwdlvaz0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você iniciar uma simulação física agora, o design deve recair sobre os cilindros rotacionados corretamente, que posteriormente girarão ao longo do eixo correto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Massa e comportamento das rodas, iterações físicas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muito provavelmente, a estrutura depois de cair no chão agora falha parcialmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, vamos às configurações gerais da física. Clicamos na linha superior do editor. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurações</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e na guia Configurações que se abre, encontramos a coluna </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Física</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Runtime / World /). Definimos </font><font style="vertical-align: inherit;">pelo menos </font><b><font style="vertical-align: inherit;">5</font></b><font style="vertical-align: inherit;"> no campo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iterações</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Mais uma vez, vamos para as configurações de cada junta. </font><font style="vertical-align: inherit;">
No topo da lista, todos têm um campo </font><b><font style="vertical-align: inherit;">Iteração</font></b><font style="vertical-align: inherit;"> , definido como </font><b><font style="vertical-align: inherit;">8</font></b><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">Restituição linear</font></b><font style="vertical-align: inherit;"> e </font><b><font style="vertical-align: inherit;">restituição </font></b><b><font style="vertical-align: inherit;">angular</font></b><font style="vertical-align: inherit;"> definida como </font><b><font style="vertical-align: inherit;">0,1</font></b><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">Linear de</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/hz/rz/3a/hzrz3a_ss_pg09irawvrwz5i5tg.jpeg"><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">altere </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-0,15</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linear para</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,15</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No fundo, afixamos uma massa de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kg no campo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Massa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da </font><b><font style="vertical-align: inherit;">roda</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando a simulação começa, a "máquina" física ainda precisa falhar / falhar parcialmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Defina cada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amortecimento linear</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . E defina </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mola linear</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, durante a simulação, a estrutura deve cair e saltar levemente no chão. Se isso não funcionar, experimente os valores de Amortecimento linear e Mola linear.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A documentação recomenda definir o amortecimento 400 e a mola 100, mas, pessoalmente, ao mesmo tempo, a "máquina" começa a girar como um helicóptero, salta e voa para longe. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A configuração final do quadro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salve e tente clicar em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reproduzir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o botão acima, ao lado da inclusão de simulação física) para percorrer a cena na primeira pessoa. Provavelmente a “máquina” pairou um pouco no ar, mas rola se for empurrada para dentro do cubo central. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gc/rm/ph/gcrmph0gmkv8unsmjjihna9glio.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora você pode ajustar a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âncora 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nos pontos para que fiquem aproximadamente equidistantes do centro (embora não seja necessário). Em seguida, inicie a simulação e altere a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mola Linear</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diretamente durante a mesma </font><font style="vertical-align: inherit;">para encontrar o valor ideal em que cada roda normalmente toca o chão.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de todas essas manipulações, você deve ter uma “máquina” caindo corretamente no chão, que rola levemente ao pressionar o modo de jogo, onde, por padrão, você roda em um controle separado com uma visão em primeira pessoa.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/tx/mp/gztxmpwohsuj6xw3pcwosvommj4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escrevendo um script de controle</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos um espaço em branco da "máquina de escrever", agora vamos escrever um código de controle para ele em C #. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, clique com o botão direito do mouse na janela abaixo da cena e selecione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criar componente C #</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Digite o nome do script na janela que aparece. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7m/wt/tc/7mwttcgrd3_7ugr6w-9frtohwqo.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/o3/ha/x_/o3hax_u0jcam5wcbhrqwk4uwpiq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clique duas vezes no arquivo de script exibido e o ambiente de desenvolvimento é iniciado. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_i/ak/6t/_iak6tyajkyxwcwsharicq44s7o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selecione as linhas preenchidas em azul na imagem, exclua-as e adicione o seguinte código ao qual eu vim editando o script proposto na documentação:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Snippet de script</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs">	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel"</span>)]
	<span class="hljs-keyword">private</span> Node targetWheelL = <span class="hljs-literal">null</span>;<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel"</span>)]
	<span class="hljs-keyword">private</span> Node targetWheelR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel F"</span>)]
	<span class="hljs-keyword">private</span> Node targetFWL = <span class="hljs-literal">null</span>;<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel F"</span>)]
	<span class="hljs-keyword">private</span> Node targetFWR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"theCar"</span>)]
	<span class="hljs-keyword">private</span> Node targetCar = <span class="hljs-literal">null</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> JointWheel my_jointL;
    <span class="hljs-keyword">private</span> JointWheel my_jointR;
    <span class="hljs-keyword">private</span> JointWheel my_jointFL;
    <span class="hljs-keyword">private</span> JointWheel my_jointFR;<font></font>
<font></font>
	Controls controls = <span class="hljs-literal">null</span>;
	<span class="hljs-keyword">float</span> angle = <span class="hljs-number">0.0f</span>;
	<span class="hljs-keyword">float</span> velocity = <span class="hljs-number">0.0f</span>;
	<span class="hljs-keyword">float</span> torque = <span class="hljs-number">0.0f</span>;<font></font>
<font></font>
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> ifps;<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>(<span class="hljs-params"></span>)</span><font></font>
	{<font></font>
	my_jointL = targetWheelL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
	my_jointR = targetWheelR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
	my_jointFL = targetFWL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
	my_jointFR = targetFWR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
<font></font>
	PlayerPersecutor player = <span class="hljs-keyword">new</span> PlayerPersecutor();<font></font>
	controls = player.Controls;<font></font>
	}<font></font>
	<font></font>
	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><font></font>
	{<font></font>
			ifps = Game.IFps;<font></font>
<font></font>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_FORWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_UP) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Max(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity += ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_BACKWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_DOWN) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Min(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity -= ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				velocity *= MathLib.Exp(-ifps);<font></font>
			}<font></font>
			velocity = MathLib.Clamp(velocity, <span class="hljs-number">-90.0f</span>, <span class="hljs-number">90.0f</span>);<font></font>
<font></font>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_LEFT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_LEFT) == <span class="hljs-number">1</span>))<font></font>
				angle += ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_RIGHT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_RIGHT) == <span class="hljs-number">1</span>))<font></font>
				angle -= ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &lt; <span class="hljs-number">0.25f</span>) angle = <span class="hljs-number">0.0f</span>;
				<span class="hljs-keyword">else</span> angle -= MathLib.Sign(angle) * ifps * <span class="hljs-number">45.0f</span>;<font></font>
			}<font></font>
	<font></font>
			angle = MathLib.Clamp(angle, <span class="hljs-number">-10.0f</span>, <span class="hljs-number">10.0f</span>);<font></font>
<font></font>
			<span class="hljs-keyword">float</span> base_a = <span class="hljs-number">3.3f</span>;
			<span class="hljs-keyword">float</span> width = <span class="hljs-number">3.0f</span>;
			<span class="hljs-keyword">float</span> angle_0 = angle;
			<span class="hljs-keyword">float</span> angle_1 = angle;
			<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &gt; MathLib.EPSILON)<font></font>
			{<font></font>
				<span class="hljs-keyword">float</span> radius = base_a / MathLib.Tan(angle * MathLib.DEG2RAD);<font></font>
				angle_0 = MathLib.Atan(base_a / (radius + width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
				angle_1 = MathLib.Atan(base_a / (radius - width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
			}<font></font>
<font></font>
			my_jointFL.Axis10 = MathLib.RotateZ(angle_0).GetColumn3(<span class="hljs-number">0</span>);<font></font>
			my_jointFR.Axis10 = MathLib.RotateZ(angle_1).GetColumn3(<span class="hljs-number">0</span>);<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (controls.GetState(Controls.STATE_USE) == <span class="hljs-number">1</span>)<font></font>
			{<font></font>
				velocity = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
					my_jointR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
					my_jointFL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
					my_jointFR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
					my_jointL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointFL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointFR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
			}<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.Q))<font></font>
			{<font></font>
				targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.UP*<span class="hljs-number">1000f</span>);<font></font>
			}<font></font>
			<span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.E))<font></font>
			{<font></font>
				targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.DOWN*<span class="hljs-number">1000f</span>);<font></font>
			}<font></font>
<font></font>
	}<font></font>
<font></font>
		<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdatePhysics</span>(<span class="hljs-params"></span>)</span><font></font>
		{<font></font>
			my_jointL.AngularVelocity = velocity;<font></font>
			my_jointR.AngularVelocity = velocity;<font></font>
			<font></font>
			my_jointL.AngularTorque = torque;<font></font>
			my_jointR.AngularTorque = torque;<font></font>
		}<font></font>
</code></pre><br>
</div>
                    </div><br>
<br>
<i>      :</i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">   TheVehicle.cs</b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Unigine;<font></font>
<font></font>
[<span class="hljs-meta">Component(PropertyGuid = <span class="hljs-meta-string">"ca695c8787d5703a22a6c2516a3c177cddf38cab"</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TheVehicle</span> : <span class="hljs-title">Component</span><font></font>
{<font></font>
</code></pre><br>
,    ,       .     ,      .<br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel"</span>)]
<span class="hljs-keyword">private</span> Node targetWheelL = <span class="hljs-literal">null</span>;<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel"</span>)]
<span class="hljs-keyword">private</span> Node targetWheelR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel F"</span>)]
<span class="hljs-keyword">private</span> Node targetFWL = <span class="hljs-literal">null</span>;<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel F"</span>)]
<span class="hljs-keyword">private</span> Node targetFWR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"theCar"</span>)]
<span class="hljs-keyword">private</span> Node targetCar = <span class="hljs-literal">null</span>;
</code></pre><br>
       .          tooltip     ,    .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> JointWheel my_jointL;
<span class="hljs-keyword">private</span> JointWheel my_jointR;
<span class="hljs-keyword">private</span> JointWheel my_jointFL;
<span class="hljs-keyword">private</span> JointWheel my_jointFR;
</code></pre><br>
   . <br>
<br>
<pre><code class="cs hljs">Controls controls = <span class="hljs-literal">null</span>;<font></font>
<font></font>
<span class="hljs-keyword">float</span> angle = <span class="hljs-number">0.0f</span>;
<span class="hljs-keyword">float</span> velocity = <span class="hljs-number">0.0f</span>;
<span class="hljs-keyword">float</span> torque = <span class="hljs-number">0.0f</span>;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> ifps;
</code></pre><br>
   .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
my_jointL = targetWheelL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
my_jointR = targetWheelR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
my_jointFL = targetFWL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
my_jointFR = targetFWR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;
</code></pre><br>
   ,               JointWheel.<br>
        , ,    (    ).<br>
<br>
<pre><code class="cs hljs">			
<span class="hljs-comment">// setting up player and controls</span>
PlayerPersecutor player = <span class="hljs-keyword">new</span> PlayerPersecutor();<font></font>
controls = player.Controls;<font></font>
}<font></font>
</code></pre><br>
    ,  PlayerPresecutor,     Controls       player  .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
ifps = Game.IFps;<font></font>
<font></font>
<span class="hljs-comment">// forward and backward movement by setting joint motor's velocity and torque</span>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_FORWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_UP) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Max(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity += ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<span class="hljs-comment">//Input.IsKeyDown(Input.KEY.DOWN)</span>
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_BACKWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_DOWN) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Min(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity -= ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				velocity *= MathLib.Exp(-ifps);<font></font>
			}<font></font>
			velocity = MathLib.Clamp(velocity, <span class="hljs-number">-90.0f</span>, <span class="hljs-number">90.0f</span>);<font></font>
<font></font>
			<span class="hljs-comment">// steering left and right by changing Axis01 for front wheel joints</span>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_LEFT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_LEFT) == <span class="hljs-number">1</span>))<font></font>
				angle += ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_RIGHT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_RIGHT) == <span class="hljs-number">1</span>))<font></font>
				angle -= ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &lt; <span class="hljs-number">0.25f</span>) angle = <span class="hljs-number">0.0f</span>;
				<span class="hljs-keyword">else</span> angle -= MathLib.Sign(angle) * ifps * <span class="hljs-number">45.0f</span>;<font></font>
			}<font></font>
<font></font>
			angle = MathLib.Clamp(angle, <span class="hljs-number">-10.0f</span>, <span class="hljs-number">10.0f</span>);<span class="hljs-comment">//      30  (angle, -30.0f, 30.0f)</span><font></font>
<font></font>
			<span class="hljs-comment">// calculating steering angles for front joints (angle_0 and angle_1)</span>
			<span class="hljs-keyword">float</span> base_a = <span class="hljs-number">3.3f</span>;
			<span class="hljs-keyword">float</span> width = <span class="hljs-number">3.0f</span>;
			<span class="hljs-keyword">float</span> angle_0 = angle;
			<span class="hljs-keyword">float</span> angle_1 = angle;
			<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &gt; MathLib.EPSILON)<font></font>
			{<font></font>
				<span class="hljs-keyword">float</span> radius = base_a / MathLib.Tan(angle * MathLib.DEG2RAD);<font></font>
				angle_0 = MathLib.Atan(base_a / (radius + width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
				angle_1 = MathLib.Atan(base_a / (radius - width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
			}<font></font>
</code></pre><br>
  Update,           ,     .<br>
<br>
<pre><code class="cs hljs">my_jointFL.Axis10 = MathLib.RotateZ(angle_0).GetColumn3(<span class="hljs-number">0</span>);<font></font>
my_jointFR.Axis10 = MathLib.RotateZ(angle_1).GetColumn3(<span class="hljs-number">0</span>);<font></font>
<font></font>
<span class="hljs-comment">// enabling or disabling a brake</span>
<span class="hljs-keyword">if</span> (controls.GetState(Controls.STATE_USE) == <span class="hljs-number">1</span>)<font></font>
{<font></font>
velocity = <span class="hljs-number">0.0f</span>;<font></font>
my_jointL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
my_jointR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
my_jointFL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
my_jointFR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
}<font></font>
<span class="hljs-keyword">else</span><font></font>
{<font></font>
my_jointL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
my_jointR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
my_jointFL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
my_jointFR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
}<font></font>
</code></pre><br>
      ,  ,    .        ,     4 .     ,              ,         10 .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.Q))<font></font>
{<font></font>
targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.UP*<span class="hljs-number">1000f</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.E))<font></font>
{<font></font>
targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.DOWN*<span class="hljs-number">1000f</span>);<font></font>
}<font></font>
<font></font>
}<font></font>
</code></pre><br>
  Update   ,     .         ,            —    «this.»    .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdatePhysics</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
<span class="hljs-comment">// set angular velocity for rear joints</span><font></font>
my_jointL.AngularVelocity = velocity;<font></font>
my_jointR.AngularVelocity = velocity;<font></font>
<font></font>
<span class="hljs-comment">// set torque for rear joints</span><font></font>
my_jointL.AngularTorque = torque;<font></font>
my_jointR.AngularTorque = torque;<font></font>
<font></font>
}<font></font>
<font></font>
}<font></font>
</code></pre><br>
  Update Physics  ,     velocity  torque.<br>
</div>
                    </div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, salve o arquivo de script e retorne à janela do editor. O Unigine verificará se há erros no programa e, se estiver tudo bem, um retângulo verde deve aparecer no canto inferior direito com a notificação Construção do projeto bem-sucedida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora selecione Cuboid, adicione o campo de componente a ele e arraste nosso script para lá. Aparecem alguns campos que precisam ser preenchidos. No campo Target Wheel L, arraste suavemente a roda traseira esquerda (ou seja, o Cilindro que a indica), Target Whell R - a roda traseira direita, Target FWL - a frente esquerda, Target FWR - a frente direita e o próprio Cuboid no campo Target Car. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/pw/hw/3fpwhwurb0yggyc7bob0_uvmjom.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para adicionar um componente, encontramos esse campo nas propriedades do Cuboid e clique nele.Uma </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/08/9q/kt/089qktyx8mxlma6h0p-lm4ecf4s.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linha vazia aparecerá onde você pode arrastar o arquivo de script (ou encontrar o caminho para ele através do ícone da pasta)</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/r8/tt/pj/r8ttpj5o5c76lgobt8l5qkq4cys.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preencha os campos</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Executar Play - agora a máquina começou a se mover. É verdade, simultaneamente com o personagem em nome de quem você está agora olhando o mundo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seu controle é o seguinte: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - rola para frente, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - para trás, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - vira as rodas dianteiras para a esquerda e para a direita, respectivamente. Um </font><font style="vertical-align: inherit;">impulso é dado a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a máquina, por assim dizer, salta. Em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pelo contrário, o impulso diminui.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode notar que a máquina cai um pouco lentamente, como na lua. Para melhorar esse momento, existem duas opções. A documentação sugeriu fazer alterações no arquivo AppWorldLogic.cs. Mas não precisamos disso, pois realizei a inicialização no script da máquina de escrever. Exceto algumas linhas que governam a física global. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O fato é que você pode inserir independentemente essas configurações e alterá-las. Para fazer isso, clique na linha superior do editor. Windows&gt; Configurações, na janela que se abre, localize a coluna Física e defina o valor de Velocidade Linear Congelada como 0,1, para Velocidade Angular Congelada também 0,1 e altere o vetor Gravidade mais baixo de (0,0, -9,8) para (0,0, - 19.6) </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O mesmo pode ser feito no código adicionando as seguintes linhas ao Init:</font></font><br>
<br>
<pre><code class="cs hljs">Physics.Gravity = <span class="hljs-keyword">new</span> vec3(<span class="hljs-number">0.0f</span>, <span class="hljs-number">0.0f</span>, <span class="hljs-number">-9.8f</span> * <span class="hljs-number">2.0f</span>);<font></font>
Physics.FrozenLinearVelocity = <span class="hljs-number">0.1f</span>;<font></font>
Physics.FrozenAngularVelocity = <span class="hljs-number">0.1f</span>;
</code></pre></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você iniciar o Play agora, a “máquina” provavelmente se deteriorará novamente e começará a falhar. Para consertar isso, tente girar uma mola linear em cada roda. Levante duas vezes para começar. Ao configurar, você notará que a gravidade durante os saltos é mais forte (embora eu defina o momento do salto como bastante alto por padrão). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que você já se molhou ao configurar este carrinho mal-humorado, é hora de soltar os grilhões do firts_person_controller e observar o que está acontecendo do lado da máquina em si, com uma câmera de terceira pessoa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desativado baixado first_person_controller (clique na caixa ao lado do nome dele para que fique vazio).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie uma câmera </font><font style="vertical-align: inherit;">Para fazer isso, clique com o botão direito do mouse na cena e selecione Criar&gt; Câmera&gt; Presecutor. </font><font style="vertical-align: inherit;">A própria câmera PlayerPresecutor e seu alvo simulado Presecutor_Target serão exibidos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O manequim pode ser desligado. </font><font style="vertical-align: inherit;">Clicamos na própria câmera, marque a caixa de seleção Main Player em suas propriedades (para não obter uma tela preta na inicialização). </font><font style="vertical-align: inherit;">No campo Nó de destino, encontramos nosso cubóide na lista suspensa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salve e clique em Reproduzir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora você pode andar totalmente. </font><font style="vertical-align: inherit;">É verdade que a câmera pode voar muito longe. </font><font style="vertical-align: inherit;">Para corrigir isso, você precisa ajustar seus limites. </font><font style="vertical-align: inherit;">Retornamos ao editor e definimos as propriedades da câmera, por exemplo, Distância mínima 10 e Distância máxima 30.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Separadores no mecanismo Unigine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo aprendido a coletar física aproximada das rodas, fiz uma cena de teste com um modelo de biomechos do meu projeto em Nevanger. </font><font style="vertical-align: inherit;">Aqui está o que parece no momento:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2LRuL-i9MF8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Screenshots</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/0u/-i/hp/0u-ihp26nyuwqnqhxxmd2pkicdu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bu/z4/oa/buz4oajcy-reimur3him3_wn-ya.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5a/wy/dp/5awydpmdbzfbmjisfxveew-g2nw.jpeg"><br>
</div>
                    </div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os principais problemas no momento são alguma instabilidade do design. O que é novamente devido ao fato de que ainda não compreendi completamente todos os aspectos e nuances das configurações. Às vezes, a máquina tropeça em algo e começa a girar ferozmente. Reduzir o amortecimento linear não parece ajudar muito, distorcendo os outros parâmetros também, embora ainda não tenha torcido ou configurado algo, mas não é abrangente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro bug - há situações com o total preso no chão, quando as rodas dianteiras ficam presas e a traseira sob a paisagem. Ou perfurando a própria paisagem em alta velocidade, seguido de um voo por baixo dela. Aparentemente, tudo isso é corrigido pela definição de tolerâncias e iterações, mas até agora não foram encontrados os valores ideais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, em uma superfície bastante plana, o movimento já é mais adequado. </font><font style="vertical-align: inherit;">Não está claro como as juntas de roda se comportam idealmente em uma superfície irregular, como eu entendi nas demos em vídeo do motor para carros que elas usavam desatualizadas (aparentemente), mas juntas de suspensão mais fisicamente "honestas" (a propósito, eu não tentei montar uma máquina nelas, talvez , tudo é um pouco mais fácil lá). </font><font style="vertical-align: inherit;">As juntas de roda levam em consideração os parâmetros de atrito da paisagem ou apenas interessam se a bandeira da física está ativada.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impressões gerais do mecanismo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quanto ao trabalho com o editor, o que aconteceu mais me lembrou o processo de trabalho com o CryEngine. Embora em alguns lugares seja mais conveniente. Mas é como alguém, no mesmo CryEngine foi possível modelar diretamente no editor. Isso não é relevante para mim, porque para isso eu uso o Blender, onde você tem ordens de magnitude com mais controle sobre o modelo, e para alguém isso pode ser importante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na figura abaixo, uma lista de materiais é visível à esquerda. As malhas são pintadas através de um grupo de materiais baseados em malha, dos quais é possível clonar suas opções de material. Pintar terrane com uma textura já é mais difícil, mas as máscaras são usadas ao máximo - você pode misturar texturas, mapas de altura e assim por diante, se entender o dispositivo. Para a mesma água, existe seu próprio grupo separado de materiais, que é adicionado literalmente em um clique e parece muito bom.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À direita está a hierarquia dos objetos de cena e a janela de propriedades. </font><font style="vertical-align: inherit;">É um pouco inconveniente manipular valores numéricos em tempo real - você precisa entrar no ícone com pequenas setas. </font><font style="vertical-align: inherit;">Alguns controles deslizantes são inicialmente enganosos, porque não mostram todo o intervalo possível do parâmetro, mas, digamos, apenas o intervalo de 0 a 1. A velocidade de vôo da câmera é regulada no campo com um homem correndo por cima, por padrão, de alguma forma, se move lentamente, a julgar pelas sensações . </font><font style="vertical-align: inherit;">Talvez isso seja mais conveniente quando você trabalha com modelos em escala real.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s0/1o/v1/s01ov1bzrei4oabsjfjequkpzvo.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt502512/index.html">Resultados do concurso de especialistas em sofás: as regras da cutucada científica</a></li>
<li><a href="../pt502518/index.html">Como escalar uma árvore</a></li>
<li><a href="../pt502520/index.html">Relatórios em vídeo de relatórios mitap sobre análise de produtos</a></li>
<li><a href="../pt502554/index.html">Tecnologia da informação intermediária como saída da crise</a></li>
<li><a href="../pt502556/index.html">Conferência Microsoft Build 2020 - totalmente online hoje (veja diretamente Habré)</a></li>
<li><a href="../pt502560/index.html">Basta dizer não aos testes de ponta a ponta</a></li>
<li><a href="../zh-CN486176/index.html">企业电子邮件通讯备忘录</a></li>
<li><a href="../zh-CN486178/index.html">FOSS新闻1-2020年1月27日至2月2日免费和开源新闻的回顾</a></li>
<li><a href="../zh-CN486180/index.html">创建无服务器应用程序的提示和资源</a></li>
<li><a href="../zh-CN486184/index.html">如何有效使用搜索</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>