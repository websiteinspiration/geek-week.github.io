<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ö üë©üèø‚Äçü§ù‚Äçüë©üèæ üóª Increasing server data parser loyalty in iOS üë®üèª‚Äçüîß üë®üèª‚Äçüíª üóëÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing mobile applications, one way or another, we are faced with the need to parse server data into internal application models. In the vast...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Increasing server data parser loyalty in iOS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501140/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When developing mobile applications, one way or another, we are faced with the need to parse server data into internal application models. </font><font style="vertical-align: inherit;">In the vast majority of cases, this data comes in JSON format. </font><font style="vertical-align: inherit;">Starting with Swift 4, the main tool for parsing JSON is to use a protocol </font></font><code>Decodable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and an object </font></font><code>JSONDecoder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This approach greatly simplified the process of parsing data and reduced the number of boilerplate code. In most cases, it‚Äôs quite simple to create models with properties named just like fields in the JSON object and </font></font><code>JSONDecoder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will do the </font><font style="vertical-align: inherit;">rest </font><font style="vertical-align: inherit;">for you. Minimum code, maximum benefit. However, this approach has one drawback, namely, the extremely low parser loyalty. I will explain. If there is any discrepancy between the internal data model (Decodable objects) and what came in JSON,</font></font><code>JSONDecoder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">throws an error and we lose the whole object. </font><font style="vertical-align: inherit;">Perhaps, in some situations, this model of behavior is preferable, especially when it comes, for example, to financial transactions. </font><font style="vertical-align: inherit;">But in many cases it would be useful to make the parsing process more loyal. </font><font style="vertical-align: inherit;">In this article I would like to share my experience and talk about the main ways to increase this same loyalty.</font></font></p><a name="habracut"></a><br>
<h2 id="filtraciya-nevalidnyh-obektov"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filtering invalid objects</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, the first item is, of course, filtering invalid objects. </font><font style="vertical-align: inherit;">In many situations, we do not want to lose the entire object if one of the nested objects is not valid. </font><font style="vertical-align: inherit;">This applies to both single objects and arrays of objects. </font><font style="vertical-align: inherit;">I will give an example. </font><font style="vertical-align: inherit;">Suppose we make an application for selling goods and on one of the screens we get a list of goods in approximately this form.</font></font></p><br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"products"</span>: [<font></font>
       {...},<font></font>
       {...},<font></font>
       ....<font></font>
    ]<font></font>
}</code></pre><br>
<p>       ,       .           . ,          ,     -   .  , <code>JSONDecoder</code>      ‚Äú ‚Äù     .</p><br>
<p>,      :</p><br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Awesome product"</span>,
    <span class="hljs-attr">"price"</span>: <span class="hljs-number">12.2</span>,
    <span class="hljs-attr">"image"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://image.png"</span>,
        <span class="hljs-attr">"thumbnail_url"</span>: <span class="hljs-string">"http://thumbnail.png"</span><font></font>
    }<font></font>
}</code></pre><br>
<p> ,  ,    <code>image</code>.     ,     ,     image    ,   <code>image = nil</code>.  ,       , <code>JSONDecoder</code>     .</p><br>
<p> , <code>JSONDecoder</code>  2  : <code>decode</code>  <code>decodeIfPresent</code>.      <code>optional</code>       ,   <code>nil</code>,   ,   <code>null</code>.               .</p><br>
<p> ,  ,    . ,    <code>init(decoder)</code>   <code>try?</code>     <code>nil</code>.      ,           boilerplate .         .</p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FailableDecodable</span>&lt;<span class="hljs-title">Value</span>: <span class="hljs-title">Decodable</span>&gt;: <span class="hljs-title">Decodable</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">var</span> wrappedValue: <span class="hljs-type">Value?</span><font></font>
<font></font>
    <span class="hljs-keyword">init</span>(from decoder: <span class="hljs-type">Decoder</span>) <span class="hljs-keyword">throws</span> {
        <span class="hljs-keyword">let</span> container = <span class="hljs-keyword">try</span> decoder.singleValueContainer()<font></font>
        wrappedValue = <span class="hljs-keyword">try</span>? container.decode(<span class="hljs-type">Value</span>.<span class="hljs-keyword">self</span>)<font></font>
    }<font></font>
}</code></pre><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FailableDecodableArray</span>&lt;<span class="hljs-title">Value</span>: <span class="hljs-title">Decodable</span>&gt;: <span class="hljs-title">Decodable</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">var</span> wrappedValue: [<span class="hljs-type">Value</span>]<font></font>
<font></font>
    <span class="hljs-keyword">init</span>(from decoder: <span class="hljs-type">Decoder</span>) <span class="hljs-keyword">throws</span> {
        <span class="hljs-keyword">var</span> container = <span class="hljs-keyword">try</span> decoder.unkeyedContainer()
        <span class="hljs-keyword">var</span> elements: [<span class="hljs-type">Value</span>] = []
        <span class="hljs-keyword">while</span> !container.isAtEnd {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> element = <span class="hljs-keyword">try</span>? container.decode(<span class="hljs-type">Value</span>.<span class="hljs-keyword">self</span>) {<font></font>
                elements.append(element)<font></font>
            }<font></font>
        }<font></font>
        wrappedValue = elements<font></font>
    }<font></font>
}</code></pre><br>
<p>        .</p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ProductList</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">var</span> products:<span class="hljs-type">FailableDecodableArray</span>&lt;<span class="hljs-type">Product</span>&gt;<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Product</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> price: <span class="hljs-type">Double</span>
    <span class="hljs-keyword">let</span> image: <span class="hljs-type">FailableDecodable</span>&lt;<span class="hljs-type">Image</span>&gt;?<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Image</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> thumbnailUrl: <span class="hljs-type">String</span>
}</code></pre><br>
<p>            . ,       .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> products = productsList.products.wrappedValue
<span class="hljs-keyword">let</span> image = products.first?.image.wrappedValue</code></pre><br>
<p>   <code>FailableDecodableArray</code>    .      ,         <code>RandomAccessCollection</code>  <code>MutableCollection</code>    ,    <code>wrappedValue</code>.      <code>FailableDecodable</code>    . , ,  <code>computed property</code>    ,   ,       . ,     .</p><br>
<h4 id="propertywrapper">@propertyWrapper</h4><br>
<p>    Swift 5.1 ‚Äî <code>@propertyWrapper</code>.           </p><br>
<pre><code class="swift hljs"><span class="hljs-meta">@propertyWrapper</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FailableDecodable</span>&lt;<span class="hljs-title">Value</span>: <span class="hljs-title">Decodable</span>&gt;: <span class="hljs-title">Decodable</span> </span>{<font></font>
    ...<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@propertyWrapper</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FailableDecodableArray</span>&lt;<span class="hljs-title">Value</span>: <span class="hljs-title">Decodable</span>&gt;: <span class="hljs-title">Decodable</span> </span>{<font></font>
    ...<font></font>
}</code></pre><br>
<p>       </p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ProductList</span>: <span class="hljs-title">Decodable</span> </span>{<font></font>
    @<span class="hljs-type">FailableDecodableArray</span>
    <span class="hljs-keyword">var</span> products:[<span class="hljs-type">Product</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Product</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> price: <span class="hljs-type">Double</span>
    @<span class="hljs-type">FailableDecodable</span>
    <span class="hljs-keyword">let</span> image:<span class="hljs-type">Image?</span>
}</code></pre><br>
<p>    ,      <code>wrappedValue</code>       . ,   ,        ,     ,    :)</p><br>
<p>,      ,       <code>optional</code>.   </p><br>
<pre><code class="swift hljs">@<span class="hljs-type">FailableDecodable</span>
<span class="hljs-keyword">let</span> image:<span class="hljs-type">Image?</span></code></pre><br>
<p>     </p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> image: <span class="hljs-type">FailableDecodable</span>&lt;<span class="hljs-type">Image</span>&gt;</code></pre><br>
<p> ,    <code>optional</code>  <code>Image?</code>    ,  <code>wrappedValue</code>  <code>optional</code> ,      .<br>
    Swift  </p><br>
<pre><code class="swift hljs">@<span class="hljs-type">FailableDecodable?</span>
<span class="hljs-keyword">let</span> image:<span class="hljs-type">Image?</span></code></pre><br>
<p>  ,     ,        JSON      <code>nil</code>  .   <code>@propertyWrapper</code>  ,    100%       JSON.</p><br>
<h4 id="dynamicmemberlookup">@dynamicMemberLookup</h4><br>
<p>     <code>dynamicMemberLookup</code>.</p><br>
<pre><code class="swift hljs"><span class="hljs-meta">@dynamicMemberLookup</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FailableDecodable</span>&lt;<span class="hljs-title">Value</span>: <span class="hljs-title">Decodable</span>&gt;: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">var</span> wrappedValue: <span class="hljs-type">Value?</span><font></font>
<font></font>
    <span class="hljs-keyword">subscript</span>&lt;<span class="hljs-type">Prop</span>&gt;(dynamicMember kp: <span class="hljs-type">KeyPath</span>&lt;<span class="hljs-type">Value</span>, <span class="hljs-type">Prop</span>&gt;) -&gt; <span class="hljs-type">Prop</span> {<font></font>
        wrappedValue[keyPath: kp]<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">subscript</span>&lt;<span class="hljs-type">Prop</span>&gt;(dynamicMember kp: <span class="hljs-type">WritableKeyPath</span>&lt;<span class="hljs-type">Value</span>, <span class="hljs-type">Prop</span>&gt;) -&gt; <span class="hljs-type">Prop</span> {
            <span class="hljs-keyword">get</span> {<font></font>
                wrappedValue[keyPath: kp]<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">set</span> {<font></font>
                wrappedValue[keyPath: kp] = newValue<font></font>
            }<font></font>
    }<font></font>
}</code></pre><br>
<p>    2 <code>subscript</code>,   readonly ,   read/write .        .</p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ProductList</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">var</span> products:<span class="hljs-type">FailableDecodableArray</span>&lt;<span class="hljs-type">Product</span>&gt;<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Product</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> price: <span class="hljs-type">Double</span>
    <span class="hljs-keyword">let</span> image: <span class="hljs-type">FailableDecodable</span>&lt;<span class="hljs-type">Image</span>&gt;?<font></font>
}</code></pre><br>
<p>   <code>@propertyWrapper</code>        <code>wrappedValue</code>,     .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> imageURL = products.first?.image.url</code></pre><br>
<p>     ,      <code>optional</code> . ,     ,         <code>wrappedValue</code>,     ,           . </p><br>
<pre><code class="swift hljs">products.first?.image.load() <span class="hljs-comment">// Compilation error</span>
products.first?.image.wrappedValue.load() <span class="hljs-comment">// Success</span></code></pre><br>
<p>           (   ),         .</p><br>
<h2 id="privedenie-tipov"> </h2><br>
<p>        ‚Äî   .    - ,        (   JSON) Swift    ,   ‚Äú1‚Äù  1 ‚Äî              .    <code>JSONDecoder</code>      ,  ,    .           . ,    <code>Product</code>     .</p><br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Awesome product"</span>,
    <span class="hljs-attr">"price"</span>: <span class="hljs-string">"12.2"</span>,
    <span class="hljs-attr">"image"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://image.png"</span>,
        <span class="hljs-attr">"thumbnail_url"</span>: <span class="hljs-string">"http://thumbnail.png"</span><font></font>
    }<font></font>
}</code></pre><br>
<p>, ,      ,   ‚Äî  ,   ,   , , ,               .         ,    .</p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Convertible</span>&lt;<span class="hljs-title">Value</span>: <span class="hljs-title">Decodable</span> &amp; <span class="hljs-title">LosslessStringConvertible</span>&gt;: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">var</span> wrappedValue: <span class="hljs-type">Value</span>
    <span class="hljs-keyword">init</span>(from decoder: <span class="hljs-type">Decoder</span>) <span class="hljs-keyword">throws</span> {
        <span class="hljs-keyword">let</span> container = <span class="hljs-keyword">try</span> decoder.singleValueContainer()
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> stringValue = <span class="hljs-keyword">try</span>? container.decode(<span class="hljs-type">String</span>.<span class="hljs-keyword">self</span>),
            <span class="hljs-keyword">let</span> value = <span class="hljs-type">Value</span>(stringValue) <span class="hljs-keyword">else</span> {<font></font>
                wrappedValue = <span class="hljs-keyword">try</span> container.decode(<span class="hljs-type">Value</span>.<span class="hljs-keyword">self</span>)
                <span class="hljs-keyword">return</span><font></font>
        }<font></font>
        wrappedValue = value<font></font>
    }<font></font>
}</code></pre><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Product</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> price: <span class="hljs-type">Convertible</span>&lt;<span class="hljs-type">Double</span>&gt;
    <span class="hljs-keyword">let</span> image: <span class="hljs-type">FailableDecodable</span>&lt;<span class="hljs-type">Image</span>&gt;?<font></font>
}</code></pre><br>
<p>         ,      .      <code>FailableDecdable</code>     <code>@propertyWrapper</code>  <code>@dynamicMemberLookup</code>      .</p><br>
<p>    (   )            .  ,       ,  API  -    ,           ,     -  .   , ,         , , -,      ,  , -,    ,         .   ,     ,       .</p><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">StringConvertible</span>: <span class="hljs-title">Decodable</span> </span>{
    <span class="hljs-keyword">var</span> wrappedValue: <span class="hljs-type">String</span>
    <span class="hljs-keyword">init</span>(from decoder: <span class="hljs-type">Decoder</span>) <span class="hljs-keyword">throws</span> {
        <span class="hljs-keyword">let</span> container = <span class="hljs-keyword">try</span> decoder.singleValueContainer()
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> number = <span class="hljs-keyword">try</span>? container.decode(<span class="hljs-type">Double</span>.<span class="hljs-keyword">self</span>) <span class="hljs-keyword">else</span> {<font></font>
            wrappedValue = <span class="hljs-keyword">try</span> container.decode(<span class="hljs-type">String</span>.<span class="hljs-keyword">self</span>)
            <span class="hljs-keyword">return</span><font></font>
        }<font></font>
        wrappedValue = <span class="hljs-string">"\(number)"</span><font></font>
    }<font></font>
}</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summarizing all of the above, I would like to note that the emergence of the protocol </font></font><code>Decodable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in conjunction with the class </font></font><code>JSONDecoder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significantly simplified our life in what is associated with the parsing of server data. </font><font style="vertical-align: inherit;">However, it is worth noting that </font></font><code>JSONDecoder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the moment it has extremely low loyalty and to improve it (if necessary) you need to work a little and write a few wrappers. </font><font style="vertical-align: inherit;">I think that in the future all these features will be realized in the object itself </font></font><code>JSONDecoder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, because relatively recently he did not even know how to convert keys from snakecase to camelcase and string to date, and now all this is available ‚Äúout of the box‚Äù.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501128/index.html">Why VR development doesn't suit you</a></li>
<li><a href="../en501130/index.html">Halt and Catch Fire - a team that deserves an adaptation</a></li>
<li><a href="../en501132/index.html">How to make work with Microsoft Remote Desktop better</a></li>
<li><a href="../en501134/index.html">How the GitLab QA Team Uses the GitLab Performance Tool</a></li>
<li><a href="../en501138/index.html">10 online events that you can attend on the second of May</a></li>
<li><a href="../en501142/index.html">Are you using a numeric keypad?</a></li>
<li><a href="../en501144/index.html">Is it possible to hack the brain with sound</a></li>
<li><a href="../en501148/index.html">JavaScript Workplace Hall of Fame</a></li>
<li><a href="../en501154/index.html">We measure temperature without ADC</a></li>
<li><a href="../en501156/index.html">HackTheBox. Passage of Obscurity. OS Command Injection and Race Condition</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>