<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë®üèø üßîüèº üíí Monitoring in the data center: how we changed the old BMS to a new one. Part 3 ü§æüèø üåï ‚ôøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue our story about how we changed the BMS system in our data centers ( part 1 , part 2 ). At the same time, we did not just change the soluti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Monitoring in the data center: how we changed the old BMS to a new one. Part 3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/linxdatacenter/blog/500986/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We continue our story about how we changed the BMS system in our data centers ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">part 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">At the same time, we did not just change the solution of one vendor to another, but developed the system from scratch to fit our requirements. </font><font style="vertical-align: inherit;">To conclude our story, we share the results of the work done and interesting solutions that may be useful to you.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New interface</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here, as they say, it is better to see once.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ed/7df/537/1ed7df5378bbc1e39a4442031d3c023f.jpg"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Racks.</font></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's analyze the differences.</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firstly, it is </font></font></strong><strong><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beautifully</font></font></s></strong><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comfortable. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note how easy it has become to track the load on the modules (‚ÄúBanks‚Äù or just ‚ÄúBanks‚Äù) of the PDU and the sum of the parallel loads of the paired modules. </font><font style="vertical-align: inherit;">On the rack model from the new BMS, we immediately see that the lower paired PDUs are overloaded (the total current above the permissible 16A is a ‚Äúblue‚Äù notification), and the upper ones are underloaded. </font><font style="vertical-align: inherit;">If one of the inputs is disconnected, the entire load will transfer to the second, and the lower module remaining energized will be disconnected due to overload. </font><font style="vertical-align: inherit;">To prevent this, the data center support service will warn the customer in advance and send a recommendation on how to redistribute the load.</font></font></li>
<li><strong>  .</strong>   BMS                      PDU.   BMS    ,     ,     - ¬´ ¬ª.</li>
<li><strong>   .</strong>         .        .  ,          (     )         .        ,     .&nbsp;</li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intuitive interface. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the new interface there are no heaps of icons, fans spin, switches ‚Äúclick‚Äù. </font><font style="vertical-align: inherit;">And the most convenient is the ability to indicate the status of the PDU Line A / B inside the racks. </font><font style="vertical-align: inherit;">We tried to do something similar in the old BMS, but the number of merging icons per square centimeter of the card forced us to abandon it.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now the eye is pleased to watch:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d85/84d/739/d8584d739885bfaf0ff73f53986ca868.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b84/8e7/efe/b848e7efe251431596df1a2329608a80.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment of main switchboard.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/627/b83/083/627b83083d7b907ff15f8e184f6be901.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ventilation control panel. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And you can decorate the new BMS for the New Year :-)</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddc/4f5/43b/ddc4f543b6ec6525afb904231e7317aa.png"></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One page - Understanding and Without TK</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a very long time we wanted to implement another ‚Äútrick‚Äù in BMS: to compose on one page the main parameters of the data center, so that one glance at the screen would be enough to assess the status of the main systems. However, we did not fully understand how it should look. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Even before the development of the new BMS began, we visited dozens of data centers in the Netherlands with excursions. One of the goals was to see examples of the implementation of such a page. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And they weren‚Äôt shown to us in any data center - somewhere it wasn‚Äôt, somewhere ‚Äúit was being developed right now‚Äù, somewhere it was a ‚Äúbig trade secret‚Äù. Therefore, in our ToR for the creation of a new BMS, an exact description of this page, which is very important for us, was missing.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, we came up with it literally "on the go." Just at that moment, I had to remotely consult colleagues in the data center. Scrolling through the BMS pages on the phone in search of disparate data was very inconvenient, and in fact, the first version of </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One page</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> was scribbled on a napkin </font><font style="vertical-align: inherit;">. It was implemented by the developers of the photo.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Following the example of cautious Dutch colleagues, we will not demonstrate the final version of our main page, especially since each data center is unique and it makes no sense to copy. But we describe two main principles of its formation:</font></font><br>
<br>
<ol>
<li> ,        ( ,     ),        .    ¬´¬ª  ,          .&nbsp;</li>
<li>       (  ).        ,     .&nbsp;      - ‚Äì         .    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, now absolutely all the key characteristics of the data center are grouped and presented on the same screen of the smartphone / monitor by the responsible engineer and manager, while the connection to the physical and logical topography of the data center is implemented.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is a photo of the very first draft, although, of course, then this version was rethought and finalized.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f8a/b4e/3ce/f8ab4e3cea336fd13a9c75de72be50c8.png"></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acknowledgment and summary of incidents</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's talk about another new concept for us, which appeared as a result of the project to update the monitoring system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acknowledgment is a rather rare term that the developer of the new BMS proposed to use. </font><font style="vertical-align: inherit;">It means confirmation that the operator saw the incident, confirmed it and assumed the responsibility for eliminating it.&nbsp;&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The word has taken root, and now we "acknowledge" the incidents. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The algorithm laid down in the basic version of the new BMS did not suit us. </font><font style="vertical-align: inherit;">In fact, these were comments on the event log, that is, the resolved incidents did not disappear from the log, and the received (‚Äúacknowledged‚Äù) messages were not sorted from new ones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, a window was developed under the name "summary", in which:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Only active incidents and devices are displayed in service mode (without commercial "blue" notifications).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The NEW and ACCEPTED incidents are clearly separated.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is indicated who accepted the incident.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The duty algorithm in the new BMS is as follows:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New incidents are reported and await acknowledgment. </font><font style="vertical-align: inherit;">They cannot be in this section for a long time, the equipment officer on duty should immediately take the incident upon himself.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The employee accepts the incident by clicking on the checkmark on the right. </font><font style="vertical-align: inherit;">Since all employees are under unique accounts, it automatically displays who accepted the incident. </font><font style="vertical-align: inherit;">If necessary, leave a comment.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The incident moves to the "Acknowledged" section, the rest of the attendants and the manager understand that the responsible officer is involved in the incident.</font></font></li>
</ol><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/22f/ae1/ada/22fae1adab762bbfda3af82fe19ae4f2.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An example of a summary window with a new and already acknowledged message. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having connected the summary window with the One page table, we got a full-fledged </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main screen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> of the BMS system, on which you can immediately see:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the state of the main data center systems;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the presence of new unprocessed incidents;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the presence of accepted incidents and data on who specifically eliminates them.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Access via browser and pop-up alerts on the phone</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The web interface, accessible from any device from anywhere in the world, is a stark contrast to the "fat" client, completely closed to outside users.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The old approach dragged on a set of inconveniences, from problems in organizing the remote work of monitoring service employees to the need to install ‚Äúthick‚Äù clients from distributions to staff jobs in the data center. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now any page in BMS has a unique address, which allows you to share not only the direct address of the page or device, but also links to unique graphs / reports.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Access to the system is now provided through LDAP authentication through Active Directory, which enhances its level of security.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mobility today is a key factor in the quality work of duty engineers. In addition to monitoring monitoring in the duty shift room, engineers make detours, perform routine work outside the ‚Äúduty room‚Äù and, thanks to the BMS main screen optimized for the mobile screen, do not lose control of what is happening in the rooms for a second.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The quality of control is enhanced by the functionality of work chats. They accelerate workflows, allowing you to "link" the correspondence of duty engineers to BMS. For example, we use the Teams application, which allows you to conduct internal correspondence and receive all messages from BMS on the phone in the form of pop-up Push notifications, which eliminates the duty of the duty officer from constantly looking at the phone screen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/xv/k_/buxvk_kkytde_uintn-mmf--ce4.png"><br>
&nbsp;<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Push notification on smartphone screen.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ye/e-/mm/yee-mmhflsbvbhlydal-4uyxjky.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And so the notifications look in the Teams application. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, pop-up notifications are configured only for messages about incidents, thereby minimizing the distraction, staff know that if Teams Push-notification appears on the smartphone‚Äôs screen, you need to go to the BMS page and accept the incident. </font><font style="vertical-align: inherit;">Corrective action messages are already tracked on the BMS page. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-y/dv/p_/-ydvp_3qnfa6jhchfdnl8i9ejaq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the photo, the BMS interface in the smartphone.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summarizing</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the cost of updating BMS from our old vendor, comparable to developing a new system from scratch (about $ 100,000), the difference in the functionality of the products turned out to be enormous. We received a flexible system optimized for our business tasks and processes. We also achieved significant savings in running costs for maintaining and updating the system.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But, of course, there were difficulties.&nbsp;</font></font><br>
<br>
<ul>
<li>-,    ,        BMS,       .       ,           ,    ,      ,  .      ,          .       ,            ,  .&nbsp;</li>
<li>-,     ,         .        BMS,        .     . ,         ,       .</li>
<li>-,        .       ( )  ,       ,        ,     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The radical update of our BMS system today can be called the most important project of the past year, which will seriously affect the quality of operational management of our sites in the future.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, we did not throw out the old iron server, but ‚Äúmade it easier‚Äù: we cleaned thousands of ‚Äúcommercial‚Äù virtual sensors and PDUs and left only a few dozen of the most critical devices in it, such as diesel generator sets, UPSs, air conditioners, pumps, leakage sensors, and temperatures. </font><font style="vertical-align: inherit;">In this mode, it returned to its former speed, and it can be a "reserve reserve." </font><font style="vertical-align: inherit;">By the way, after removing the PDU from the old BMS, about 1000 now unnecessary licenses have been freed, do you happen to know what to do with them?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500972/index.html">These strange OSs: briefly about three unusual operating systems</a></li>
<li><a href="../en500974/index.html">Translation of Andrew Un's book, Passion for Machine Learning, Chapters 47 and 48</a></li>
<li><a href="../en500978/index.html">Delayed Retrays by RabbitMQ</a></li>
<li><a href="../en500980/index.html">Brain rx</a></li>
<li><a href="../en500984/index.html">Bad Apple or Happy Radio Day, geeks</a></li>
<li><a href="../en500992/index.html">How is Performance Management in the best IT companies</a></li>
<li><a href="../en500994/index.html">Run ant. Run</a></li>
<li><a href="../en500996/index.html">How to become a DevOps engineer in six months or even faster. Part 1. Introduction</a></li>
<li><a href="../en500998/index.html">Convolutional neural network and its integration in iOS (part 1)</a></li>
<li><a href="../en501000/index.html">Code generation in Go by the example of creating a client for the database</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>