<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙌🏿 🥚 👊🏻 カスタムタイヤコンプレックスReddで作業する 🧝🏿 👋🏼 🖕🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="では前回の記事、私たちはどのように私はそれでより多くのエキゾチックなタイヤへのアクセスを取得する方法に移行することを約束した後、複雑なReddのを使用して、標準的な、よく知られたタイヤ、との仕事にと知り合い始めました。しかし、何人かの知人と話し合った後、私は突然、このサイクルの外でRedd複合施設に...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>カスタムタイヤコンプレックスReddで作業する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483724/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前回の記事、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちはどのように私はそれでより多くのエキゾチックなタイヤへのアクセスを取得する方法に移行することを約束した後、複雑なReddのを使用して、標準的な、よく知られたタイヤ、との仕事にと知り合い始めました。</font><font style="vertical-align: inherit;">しかし、何人かの知人と話し合った後、私は突然、このサイクルの外でRedd複合施設について書かれた記事を誰もが読むわけではないことに気付きました。</font><font style="vertical-align: inherit;">そして、それに応じて、誰もがなぜこれらのタイヤがコンプレックスに追加されたのかをまったく知りません。</font><font style="vertical-align: inherit;">もちろん、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その記事を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照するだけでもかまいませんが、</font><font style="vertical-align: inherit;">この特定のサイクルのテーマを参照して、対応する部分を再説するほうが正しいように思えます。</font><font style="vertical-align: inherit;">したがって、今日では、実用的なだけでなく、Reddコンプレックスが販売するタイヤに関する理論的な問題も検討します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/-c/vx/af-cvxucoo4l55__goxrdffbbtc.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">退屈な理論部分</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検討すること</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redd複合システムですべてが何らかの方法で行われる理由を明確に理解するために、いくつかの理論的な問題を簡単に（可能な限り）調べてみましょう。まず、複合体の主なタスク...奇妙なことに、この一連の記事の一部として、私はまだそれについて書いたことがありません。はい、私は書くつもりはありません。実際のところ、主要なタスクは、特定のハードウェア（マイクロコントローラーから巨大なマルチコアプロセッサーシステムまで）のデバッグへの共同リモートアクセスです。作業時間の予約、平均的な幸運度（理想的ではない）やその他の楽しみのチャネルを介した物理的なアクセスの提供。デバッグは、JTAGまたは開発環境によって提供される他のツールを介して行うことができます。大きなチームがこれに取り組んでいますが、すべてが非常に興味深いですが、官僚機構は好きではないので、それらのトピックについては書きたくありません。多分、将来、他の誰かがこのギャップを埋めます...その間、私はについて書いています</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複合施設の</font><b><font style="vertical-align: inherit;">補助</font></b><font style="vertical-align: inherit;">施設。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、はい、私が6か月以上にわたって説明してきたことはすべて、</font><font style="vertical-align: inherit;">開発者</font><font style="vertical-align: inherit;">を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支援</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font><b><font style="vertical-align: inherit;">ために</font></b><font style="vertical-align: inherit;">設計されたものにすぎません</font><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前のサイクル記事</font></font></b><div class="spoiler_text"><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  «»  ,   Redd,      .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  «»  ,   Redd.  2.  .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">          .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     Redd     .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">              Redd.</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> ,       .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Redd.  1:  .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Redd.  2:      .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  :        .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Redd,    FTDI</a></li>
</ol><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reddに複雑な標準タイヤが実装されている理由</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、自分でアクセスすることなく機器を開発する必要があります。素敵なリンクがあるプロジェクトの具体的な例を見てみましょう。たとえば、ここに私のお気に入りの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘリコプターがあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。私たちはここにいて、ヘリコプターはスウェーデンにいます。さらに、ヘリコプターが実装した機能を物理的に実行できない冬（つまり、森林の土壌を肥やすこと、当時の土壌は雪の吹きだまりであった）に開発を命じました。ヘリコプターにインストールされたデバイスは、デバッグおよび飛行中にエミュレートする必要があることがわかりました-事実上。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それはデバッグです。プロジェクトをテストする場合、エミュレーションが唯一のオプションです。テスターは、さまざまな組み合わせを並べ替えて、最大数のモードですべてをチェックする必要があります。さらに、彼は危機的および緊急の状況（テスターのための破壊的な作業など）を作成する必要があります。実際の機器でそれを行う方法は？エミュレータのみ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近のデバイスとの通信はどうですか？通常、標準のバスを介します。これは、デバイス開発者がすでに消費者に知られているものを介して接続する傾向があるためです。それはReddであり、多くのデバイスのエミュレータとして機能します。そのバスは開発されたブロックに接続されています。そして、ユニットはそれが実際の機器で動作することを確信します、タイヤの反対側でアイアンの束ではなく、多くのエミュレーターが回転しているReddコンプレックスであることを知りません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際の機器で作業する場合、タイヤはアナライザーとして機能し、ロギングは実際のハードウェアで機能して、問題が発生した場合にフライトを分析します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、タイヤはできるだけ多く、そのセットは可能な限り変化させる必要があります。</font><font style="vertical-align: inherit;">しかし、すべてにおいてあなたは測定を知る必要があります。</font><font style="vertical-align: inherit;">まあ、もしそれぞれのバスがいくらかのお金を要し、ケースのスペースを占有するだけでなく、そしてコネクタの上でも。</font><font style="vertical-align: inherit;">次に、これらのバスをプログラムで制御するためにどの戦略が最適に使用されるかを検討します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">誰がReddのコード開発をリードするか</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現代の企業では、陛下の工数が最前線にいます。事実、これは多くの点で非常に高価なリソースです（お金、開発時間、この特定の瞬間におけるスペシャリストの、この会社のその他のタスクへの対応状況など）。そのため、経営陣が時間を節約できれば、それは実現します。チームに開発者を追加できない場合は、追加されません。短時間ですべてを実行できる場合は、開発者をノックアウトして、短時間で実行できるようにします。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このことから、彼らがエミュレータを書くために個々の専門家を与えることはありそうもないことになります。もしそうなら、それは同じ会社で働く普通のプログラマーでしょう。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜこれを書いているのですか。一部の記事では、標準以外のタイヤの整備作業にいくつかの専門的な言語が使用されている場合、シックと見なされます。私はこのようなものを扱う機会がありました。これまでに発表されたものの例に対する私の印象を述べさせてください。ここでは、たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https：//www.astrosoft.ru/about/clients/bvg-group/case-959/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。さらに、GOSTでさえYASTEKの言語になったのはそれほど前のことではありません。私の意見はこれです。70年代後半から80年代前半に必要だったものが、XXI世紀の第1四半期の終わりにはまったく必要なくなりました。これは、コンスタンティンチゾフによるすばらしい記事です。その言語の最も重要なもの（コンタクトグループ）は、C ++のメタプログラミングによって完全にほぼ無料で実装されています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。http：//easyelectronics.ru/rabota-s-portami-vvoda-vyvoda-mikrokontrollerov-na- si.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この記事では、すべてのAVRをチェックします。 Cortex Mのライブラリオプションをチェックしたところ、結果もすばらしいものになりました。オプティマイザは、アセンブラで直接開発してもメリットが得られないような方法ですべてをパックします。そして、これは連絡先グループだけでなく、一般にmcucppのすべてのドライバーに適用されます。当局がMAX RTOSへのこのイデオロギーを許可しなかったのは残念なことです。そのため、研究結果は公表されませんでした。しかし、自宅では私はこのライブラリのみを使用しています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YASTEKに実装されている他のすべてのものも、C ++構造に完全にパッケージ化されています。しかし、70年代と80年代の接点でのオペレーターの双方向性はそうではありませんでした。確かに、当時のPascal、C、その他の言語のコンパイラにはありませんでした。ほとんどの場合、コンパイラはバッチであり、デバッグツールなしでアセンブラテキストを簡単に生成しました。 YASTEKをリメイクするときに、画面に出力するための演算子と対話型デバッガーを追加しましたが、これらは通常のプログラミング言語の既製の開発環境で起こっていることの背景に対する半分の対策です。要するに、YASTEKの特殊言語を廃止するための技術的理由があった時代は過ぎ去りました。今日、一般的なプログラミング言語では、同じことをはるかに達成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこにコードを書いたのはC ++の専門家ではなく、通常のカスタマイザであると言う人もいるかもしれません...そうですが、普通のプログラマがReddのコードを書くことはすでに述べました。経営者が時折の仕事のために狭い専門家を維持する意味はありません。そして、別の言語を学ぶことは、普通の専門家には意味がありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これには他にどんな表現機能がありますか？エミュレータを開発するとき、完全にエキゾチックなものが必要になる場合があります。たとえば、インタラクティブモードのGPSエミュレータの場合、ジョイスティックで制御します。どの問題指向言語がそれをサポートしていますか？そして、これらの言語の柔軟性はまだ残っています。最後に、議論されたYESTEKでのコードの再利用は標準に達していませんが、ネットワーク上の既製のソリューションの検索...一般的な言語でさえ、</font><b><font style="vertical-align: inherit;">良い</font></b><font style="vertical-align: inherit;">ものを見つけるのは簡単ではありませ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえば、エキゾチックです-そしてさらにそうです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じことに適用される</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ような場合</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スムーズになって、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このような</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Aケース</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">エンタープライズオートメーションのフレームワークでは、高度な構成とプログラミングシステムを備えたSIMATICは優れていますが、小規模なプロジェクトでは、解決するよりも多くの問題が発生したため、より普遍的なソリューションに置き換えられました。</font></font><br>
 <br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全体として、私たちは彼らの通常の言語での通常のプログラマーの仕事はReddにとって正常であると結論付けています。</font><font style="vertical-align: inherit;">他のタスクについて-それは議論され、特にRedd複合システムによって解決される補助タスクについては、それは正常です。</font></font></blockquote><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイヤの実装方法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私たちが普通のプログラマーが彼らの通常の言語でタイヤを使うと言うなら、これらのバスを扱うためのライブラリはできるだけ典型的でなければなりません。特に、この文章はすぐに書き留められました。「マイクロコントローラーを複雑な場所に配置すると、プログラマーがそれらにすべてを書き込みます。」このオプションでも、これらのコントローラーの専門家が必要です。さらに、サブシステム間の深刻な同期が必要です。可能であれば、プログラマは使い慣れた中央処理装置のPCで作業する必要があると判断されました。 「しかし、FPGAはどうですか？」 - あなたが尋ねる。ええと、おっと、おそらく誰もがFPGAの場合、「Verilogでの最小限の開発、プログラマーにとってはなじみのある開発」というイデオロギーを選択したことに誰もが気づいたでしょう。そこではもっと便利にできません。しかし、私たちは懸命に働いています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、典型的なタイヤの実装。 UARTを使用すると、すべてが明確になります。 SPI / I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cでは、PCの確立された事実上の標準がないため、さまざまなオプションが検討されました。しかし、コントローラ、ドライバ、およびライブラリの「ファームウェア」という完全なセットを作成するオプションなしでやりたいという要望がありました。何か用意したかった。それでも、最近まで、USBレベルでサイプレスのデバッガープロトコルを実装するマイクロコントローラーのオプションを検討してきました。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">DMAに関する記事で述べ</font></a><font style="vertical-align: inherit;">られた調査結果は、これに終止符を打ちました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。以前に未知のデータストリームを持つすべてのバスが同時に動作する場合、TSで要求される帯域幅を保証することは不可能です。そして、複数のコントローラにまたがる場合、USB 2.0 FSの帯域幅に依存します。したがって、FTDIブリッジのみです。 1つのブリッジ-1つの機能、およびUSB 2.0 HSが帯域幅を提供します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、前のセクションでは、常に一般的なC ++言語について言及しました。</font><font style="vertical-align: inherit;">実際のところ、私の人生の旅のこの段階では、これが私の主なプログラミング言語です（ただし、常にそうであるとは限りませんでした）。</font><font style="vertical-align: inherit;">しかし、標準的なソリューションは、Python、Javaなど、今日一般的な他の言語で完全に機能するための標準的なソリューションです。</font><font style="vertical-align: inherit;">したがって、それらの言語のスペシャリストが戦いに巻き込まれた場合、彼はこれらの言語を使用して、同じようにすべてを簡単に実行します。</font><font style="vertical-align: inherit;">それがユニバーサルソリューションの美しさです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、高価なFTDIチップを載せるのに馬鹿げているタイヤがいくつかあります。</font><font style="vertical-align: inherit;">それらがコンプレックスにどのように実装されるかについて話します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">千の小さなこと</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReddコンプレックスにSDカードが切り替えられているのはなぜですか</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発中の多くのデバイスは、SDカードを使用して「ファームウェア」を更新しています。ほとんどの場合、「ファームウェア」はファイルの形でカードに流し込まれ、その後デバイスの電源がオフになり、オンにされると、更新ファイルが検出されて適用されます。最近、3Dプリンターの1つ用の新しいボードに手を出しました。そこでは、いくつかのMコマンド（正確なコードは覚えていません）の後で、Marlin 2.0の「ファームウェア」がUSBバス経由でSDのコンテンツを開いたので、トリックなしでアップデートを挿入できました。 USB経由で接続し、その後、自分で電源をオフ/オンしたことがわかった（Reddコンプレックスでこれを行う方法、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">以前の記事で</font></a><font style="vertical-align: inherit;">調べた）</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、SDカードをUSBに接続するコマンドを出し、ディスクが表示されるのを待って、「ファームウェア」をアップロードし、電源をオフ/オンにして、待機しました。 「ファームウェア」を更新しました。しかし、すべてが常に美しいとは限りません。事前にSDカードを用意する必要がある場合があります。ちなみに、3Dプリンターに「ファームウェア」カーブを追加すると、上記の理想的なオプションも機能せず、事前にカードを用意する必要があります。そして、開発するときは、機能しない「ファームウェア」を作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、Reddコンプレックスにはスイッチ付きSDカードがあります。電気回路図には、次のように含まれています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/su/xj/9esuxjssl9kznrnz4dodepejj9k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、FPGAを介してSDIOバス（SPIではなく、つまりSDIO、デバイスもこのインターフェイスを介して動作できる）の切り替えを可能にする典型的なソリューションを見つけようとしました。美しい解決策は存在しないことがわかりました。 FPGAメーカーのソリューションでさえ複雑で、あまり信頼できません。したがって、カードを外部コネクタまたはReddの一部としてリーダーに物理的に接続するアナログキーが提供されていました。したがって、操作アルゴリズムは次のとおりです。リーダーに接続し、Linux OSを使用してファイルを準備し、ターゲットデバイスに接続します。そこで使用しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルシステムでの作業は重要なものに属していないため（特別な速度を必要としないようにデータを準備しているだけです）、STM32F103マイクロコントローラーに基づいてリーダーを作成することにしました。</font><font style="vertical-align: inherit;">フルSDIOのサポートは、このチップの最大バージョンのみです。</font><font style="vertical-align: inherit;">そして、このコントローラーにはたくさんの無料接点があるので、他の低速機能を作ることにしました。</font><font style="vertical-align: inherit;">リストが表示される電気回路図の一部を考えてみましょう。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/q_/lt/lq/q_ltlqt32trstidfnkm7aeffhtw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、SDIOおよびSDカードの切り替えに関連する信号は赤で強調表示されています。</font><font style="vertical-align: inherit;">残りのバックライトの色を検討します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPIフラッシュドライブ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ターゲットデバイスの「ファームウェア」を更新するための2番目の一般的な手法は、SPIフラッシュドライブを使用することです。</font><font style="vertical-align: inherit;">現在、これはますますSPIではなく、Quad-SPIです。</font><font style="vertical-align: inherit;">原理は同じです。</font><font style="vertical-align: inherit;">データを入力し、フラッシュドライブをデバイスに接続して電源を入れました。</font><font style="vertical-align: inherit;">ブートストラップメカニズムは、起動時にファームウェアをRAMに「吸い込み」ます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じスキームがここで適用されます-アナログスイッチの場合：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l8/zn/v_/l8znv_7bcjtawlsxmrfbypheab0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ええと、フラッシュドライブの操作に関連する行は緑色で強調表示されています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低ソリッドステートリレー</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定期的に、デバイスのボタンの押下をシミュレートするタスクが発生します。</font><font style="vertical-align: inherit;">典型的な状況：テスターは、ターゲットデバイスのメニューの操作を確認する必要があります。</font><font style="vertical-align: inherit;">いいえ、一度すべてのポイントを通過できますが、開発者が変更した場合はどうなりますか？</font><font style="vertical-align: inherit;">プロセスを自動化するには、メニューをナビゲートするためのボタンを自動化することをお勧めします（ターゲットデバイスのOSフォースを使用するか、FPGAへのスニファーを使用してディスプレイに行くバスをスキャンすることでスクリーンショットを撮ることができます）。</font><font style="vertical-align: inherit;">まあ、ボタンを押すことをプログラムでシミュレートする必要がある他の多くのタスクがあります。</font><font style="vertical-align: inherit;">これを行うために、回路にソリッドステートリレーが追加されました</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uf/4g/yo/uf4gyofip5mjrwxmejjm96l0i5w.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。...そして、それらの制御線が青色で強調表示されました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB-SPI / I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C </font><font style="vertical-align: inherit;">ブリッジの構成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前回の記事で、SPIおよびI </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C </font><font style="vertical-align: inherit;">バスが実装され</font><font style="vertical-align: inherit;">て</font><font style="vertical-align: inherit;">いるFTDIブリッジに</font><font style="vertical-align: inherit;">は、制御レッグCFG0およびCFG1があることに注意しました。</font><font style="vertical-align: inherit;">一般的に、ほとんどの場合、デフォルト値（すべてゼロ）を変更する必要はありませんが、必要に応じて、これらの信号を制御するラインも問題のSTM32コントローラーから出ており、紫色で強調表示されています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USBデバイスのリセット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの開発中に、純粋に理論的には、デバイスが「フリーズ」する可能性があることが決定されました。</font><font style="vertical-align: inherit;">たとえば、最初のシリーズのFTDIブリッジには、不安定な「地面」を伴う「凍結」という特性がありました。</font><font style="vertical-align: inherit;">はい、それは10年以上前のことです。</font><font style="vertical-align: inherit;">はい、橋はコンピュータと同じ建物内にあるため、複合施設内では地球は非常に安定しています。</font><font style="vertical-align: inherit;">しかし、突然。</font><font style="vertical-align: inherit;">一般的に、ToRには、任意のデバイスをリセットする可能性がありました。</font><font style="vertical-align: inherit;">対応する要求は同じSTM32コントローラによって生成され、黄色で強調表示されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32コントローラへのプログラムによるアクセス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、上記のデバイスのほとんどは標準ではありません。</font><font style="vertical-align: inherit;">より正確には、それらのほとんどはGPIOとして分類できますが、事実上の標準はありません。</font><font style="vertical-align: inherit;">デバイスの最も難しい部分はSDカードリーダーです。</font><font style="vertical-align: inherit;">したがって、STM32コントローラーにSDリーダー機能を実装することを決定しました（幸い、STM Cube MX環境では、独自のコードを数行書くだけでこれを実行できます）。残りの機能は、リーダーの基礎となる大容量記憶装置へのベンダーリクエストとして実装します。</font><font style="vertical-align: inherit;">しかし、いくつかの記事が前に決定されたので、巨大な物語は読むのに不便です。</font><font style="vertical-align: inherit;">したがって、Linuxから大容量記憶装置にコマンドを送信する原理と、結果として得られるデバイスへのプログラムによるアクセスの例を次回検討します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja483714/index.html">革新的なプロジェクトの賞品とコンテスト。世界のベンダー体験</a></li>
<li><a href="../ja483716/index.html">GitlabCIで使用される依存関係チェックライブラリでの脆弱性スキャナーの使用</a></li>
<li><a href="../ja483718/index.html">VDIがオフィス環境をどのように変革するか</a></li>
<li><a href="../ja483720/index.html">私たちにパンダ1.0をもたらしたもの</a></li>
<li><a href="../ja483722/index.html">小売業のジオアナリティクス、パート1：ビジネスの場所を選択するプロセスを自動化します。2GIS + MS Azure + ML</a></li>
<li><a href="../ja483726/index.html">バニラJavaScriptとHTML。フレームワークはありません。ライブラリはありません。問題ない</a></li>
<li><a href="../ja483730/index.html">Programmers Union 2：スリッパは笑うのをやめ、思慮深くなった</a></li>
<li><a href="../ja483732/index.html">ChipWhispererを使用してSTM32F1xxフラッシュから安全なファームウェアを読み取る</a></li>
<li><a href="../ja483734/index.html">JS / C＃/ Rustでasync / awaitを使用するために支払う価格</a></li>
<li><a href="../ja483736/index.html">画像の逆検索：Bellingcat探偵機関からのガイド</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>