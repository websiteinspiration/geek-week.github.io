<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍💼 👨‍👩‍👦‍👦 🙉 手続き型ムーンメイキング 👩🏿‍🚀 🛣️ 🙇🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="少し前に、私たちは月の作成システムを作りました。私たちの目標は、太陽系に存在するものと同じサイズと構成で月を作成することでした。主な難しさは、そのような月とその内部の広大な表面を取得することでした。さらに、月までの距離に関係なく、明確な詳細で月をレンダリングする必要がありました。
 
 システムは、...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>手続き型ムーンメイキング</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468305/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png" alt="画像"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し前に、私たちは月の作成システムを作りました。私たちの目標は、太陽系に存在するものと同じサイズと構成で月を作成することでした。主な難しさは、そのような月とその内部の広大な表面を取得することでした。さらに、月までの距離に関係なく、明確な詳細で月をレンダリングする必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムは、月が球状の底面を持っていると想定しています。測地線メッシュの作成はベース球に適用され、サーフェスのすべての部分の同じ領域を保証します。システムは、この構造を手続き型生成の計算グリッドとしてのみ適用します。月の実際の表面は、生成グリッドよりもはるかに滑らかになります。</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b16/ef1/c39/b16ef1c39e3002d49b6d30ecb2a36a5e.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">測地線球</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
小さな不均一な月を取得するために、基本的な幾何学形状は低周波3Dノイズによって歪められます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39e/971/5de/39e9715de990094a4c155425d6dd9d0f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歪んだ測地線球</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この基礎から始まって、システムは一連の同心シェルを使用しています。</font><font style="vertical-align: inherit;">各セルは、後続の同心シェルの体積特性を決定します。</font><font style="vertical-align: inherit;">最も外側のシェルは、月の表面特性を定義します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ff/e29/a6c/1ffe29a6cb9f66fbcda22b4f1e6d7ac4.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同心のシェル</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
各シェルは、そのシェルに固有の低周波3Dノイズによって歪む場合があります。</font><font style="vertical-align: inherit;">この生成オプションを選択すると、内側のシェルが外側のシェルよりも大きくなる場合があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/064/56f/4ab/06456f4aba57b3eeab4ebbd25a47978a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェルの歪み</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
上記の図では、シェル間の距離と歪みの量が誇張されており、構築プロセスをより明確に示しています。実際には、シェルは互いに非常に近くなり、それらの歪みの大きさは比例して小さくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下では、最も外側のシェルを作成する方法について説明します。内側のシェルを作成する場合にも同じ原則が適用されるため、詳細には考慮しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手続き型ムーンシステムには、リアルタイムコンポーネントとオフラインコンポーネントが必要です。リアルタイムコンポーネントは、プレーヤーのコンピューターで実行されます。オフラインコンポーネントは、ゲーム開発者のコ​​ンピューターで実行されます。オフライン生成コンポーネントは、リアルタイムコンポーネントですばやく補足できる情報を作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
球殻の各頂点は、1つの個別のバイオームに属するものとして分類されます。</font><font style="vertical-align: inherit;">バイオームは、高さ、材料の分布、標本の配置、材料の色付けなど、一連の表面特性です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/292/18d/4d3/29218d4d3fb1e588fc742ccf46d94e61.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイオームの例バイオーム</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
情報には、クレーター、乾燥した海、重力潮によって引き起こされた表面の亀裂など、エントロピーの豊富な特性が含まれています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a10/4cd/a32/a104cda328cc7e51e19a3c321321d64a.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイオーム情報に記録された大きなクレーターバイオームの</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
定義には、石、石畳、棚などの小さな部品の位置、頻度、ランダム化を決定するオブジェクトの配置規則も含まれています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/3bb/76a/9a83bb76a7843923d8774f2e0d2e3754.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レリーフ上の石のインスタンス</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
各バイオームは、タイル（タイル）によって配置された要素から作成されるため、リアルタイムコンポーネントは同じ情報を月の別の部分だけでなく他の月にも適用できます。バイオーム情報は、迅速な歪みと再配置が可能な方法で生成する必要があります。これにより、繰り返し予測可能な環境パターンの数が減少します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このシステムは、2つのタイプのバイオームタイルを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バイオームの遷移情報は、バイオームが隣接するバイオームに入る領域で発生します。分離されたバイオーム情報は、システムが隣接するバイオームがないことを保証する領域で発生します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バイオーム間の遷移が高さプロファイルとレリーフ要素の外観に影響を与える可能性があるため、バイオームの一部の要素（クレーターなど）は、バイオームが別のバイオームに移行しない領域にしか配置できないため、これら2つの個別のモードが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、3つの異なるバイオームを使用する月の簡略化した例です。極、熱帯、赤道、それぞれ赤、青、緑に色分けされています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/d51/35f/f5dd5135fa458abddc2384468f770b11.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3つのバイオームがある月</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
孤立した</font><i><font style="vertical-align: inherit;">バイオーム</font></i><font style="vertical-align: inherit;">があるサイトの色は均一ですが、遷移バイオームがあるエリアでは、色が混ざります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムは、事前に計算された一連のノイズを使用して、バイオーム間の遷移ゾーンに変動性を導入し、バイオームからバイオームへの興味深いユニークな遷移を作成します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abb/a7c/d18/abba7cd18459dccae567bbb832a843fe.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイオーム間の遷移に適用される手続き型ノイズ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
上記の画像では、バイオームの作成手法をより明確に示すために、バイオームの各部分のサイズが月のサイズに対して誇張されています。別のバイオームサイトは、約10 x 10 kmのエリアをカバーします。半径が1,500 kmの月の表面積は3,000万km </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2になり</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。この表面をカバーするには、30万近くのそのような領域が必要になります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/707/9d2/f98/7079d2f982a17f506ab76405a96a14c6.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">半径1,500 kmの月</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
のバイオームグリッドの解像度バイオームグリッドの解像度は、非常に多数のバイオームサイトにつながる可能性があります。各サイトの場所は分析的に計算できるため、システムはそれらを個別に追跡しません。ほとんどのサイトのバイオームは、高レベルのバイオームマップから割り当てることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高レベルのバイオームマップは、遠くから見たときの月の主要な特性を決定します。システムはこれらのマップを使用して、より詳細な形式で追加の詳細を生成し、異なる距離から見た場合の月の定義の均一性を維持します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高レベルのバイオームマップは、2Dパラメータ化を使用して月の表面に配置できる2D画像です。</font><font style="vertical-align: inherit;">各マップポイントには、対応する表面または内殻の位置に存在するバイオームの数値識別子が含まれています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/214/4a5/682/2144a56825fc99a706f7498ddddf4c54.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2Dバイオームマップ上</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の画像は、4つの異なるタイプのバイオーム（青、赤、黄、白）のマップを示しています。</font><font style="vertical-align: inherit;">画像は、2Dパラメータ化を使用して球に重ね合わされます。</font><font style="vertical-align: inherit;">可能なパラメーター化の1つを以下に示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97c/b14/da1/97cb14da1a178f0e11e5925bc6997c40.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイオーム識別子マップの2Dパラメータ化バイオーム識別子マップに</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
加えて、システムは、たとえば高さと表面色を含む他のマップの使用を許可します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a9/3b5/012/7a93b5012ca67394a4ac79ebbcb6a5e1.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高さ、色相、遠方での月のレンダリング</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
各画像の1ピクセルで4 km </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2を</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カバーできるため</font><font style="vertical-align: inherit;">、コスト効率が高くなります。このような高さマップとカラーマップは、手順に従って生成するか、アーティストが描くことができます。 1ダースの月のみを使用するプロジェクトで、各月に豊かでユニークな自然の特性がなければならない場合、この段階でアーティストの作品を使用するのが最適です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下の画像は、シェルサーフェスの高さとその他のプロパティを生成するプロセスを示しています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月の作成に使用される3つのスケール</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
月は、少なくとも1つの球殻で構成されます。複数のシェルがある場合、システムは、最大半径とシェル高さの関数に基づいて内部シェルを押し出します。これは、上記の異なるスケールでプロセスを実行することによって得られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
月の設計者は、シェルごとに、バイオームの分布の高レベルのマップ、このマップにあるバイオームのバイオームの定義、およびこのバイオームにある材料の定義を作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムは空気を許容できる材料と見なしているため、どのシェルにも空洞を作成するために使用できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/069/94f/db9/06994fdb95020a907fa281bc0e0baf0b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまなシェルが表示されている月のレリーフの断面。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
別のシェルもボリュームオブジェクトであり、その深さはマテリアルのスタックによって定義されます。スタック情報はバイオームに保存されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/308/002/d5b30800245d119f324fb378ff56d35e.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6つのマテリアルで構成されるマテリアルのスタック</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
地下のマテリアルはめったに表面に到達しないため、バイオームの表面のマテリアルよりもはるかに低い解像度で記述でき、ローカルの手続き型ノイズの使用はプレイヤーには見えません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタック内の一部のマテリアルは非常にまれである可能性があるため、レイアウトにはマテリアルスタックの機能で十分な場合があります。バイオーム設計者は、スタック上の任意のマテリアルの普及とパターンをカスタマイズできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手続き型の生成は、GPUシェーダーとボクセルCPUアルゴリズムによって実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーは、3つのスケールのそれぞれについてフラグメントの色を計算し、カメラとフラグメント間の距離に応じてこれらのサンプルを混合します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジオメトリに登録するには小さすぎるすべてのパーツ。しかし、表面の知覚された複雑さに影響を与え、それらは材料、バイオーム、または月を決定するための高レベルマップの手順決定に基づいてリアルタイムで生成された法線マップに記録されます。これにより、少数のポリゴンがシーンで維持されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カメラに月が見える限り、この代金を支払う必要があります。バイオームと高レベルの定義マップはGPUに保存する必要があります。現在の月の縮尺をレンダリングするために必要なミップテクスチャのみを選択的に読み込むことができます。オブザーバーの位置を変更するときにGPUからのストリーミングのロードとアンロードにより、必要なGPUメモリの総量が最小限に抑えられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カメラに近接しているために、個々の要素が十分に大きくなると、リアルタイムのボクセル生成を使用してジオメトリの出力に表示され始めます。</font><font style="vertical-align: inherit;">同じことは、プレーヤーがテラフォームしたり掘ったりした月のすべての部分に適用されます。</font><font style="vertical-align: inherit;">変更が十分に大きく、軌道から観察できる場合、アダプティブシーンマネージャーのボクセルファームは、すべてのエリアの詳細レベル（LOD）を増やします。この変更は、アプリケーションが重要と見なします。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja468289/index.html">AM</a></li>
<li><a href="../ja468291/index.html">マークゴールストンの本「I Can You Hear You Through」の概要</a></li>
<li><a href="../ja468293/index.html">Vive Cosmos-HTCの新しいVRセットのレビュー</a></li>
<li><a href="../ja468295/index.html">50シェードのmatplotlib-マスタープロット（完全なPythonコード付き）</a></li>
<li><a href="../ja468299/index.html">2019年以降に開発者のためにOracleを開発するもの</a></li>
<li><a href="../ja468309/index.html">Cascadiaコードフォントの紹介</a></li>
<li><a href="../ja468311/index.html">Pythonプログラムを使用してダウンロードフォルダーをクリアする</a></li>
<li><a href="../ja468315/index.html">OK.RU APIで正しい署名（SIG）を生成する方法。エラー104で動作します</a></li>
<li><a href="../ja468321/index.html">私は燃え尽き症候群を生き延びた、またはハムスターを車輪で止める方法</a></li>
<li><a href="../ja468323/index.html">どのような騒音が集中してリラックスするのに役立ち、また重大事故で難聴を防止するか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>