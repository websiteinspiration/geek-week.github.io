<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò∏ üéûÔ∏è ‚úçÔ∏è A brief comparison of the SDS architecture or finding a suitable storage platform (GlusterVsCephVsVirtuozzoStorage) ü§Ø ü§∑ ü§öüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is written to help you choose the right solution for yourself and to understand the differences between SDS such as Gluster, Ceph and Vst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A brief comparison of the SDS architecture or finding a suitable storage platform (GlusterVsCephVsVirtuozzoStorage)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486392/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This article is written to help you choose the right solution for yourself and to understand the differences between SDS such as Gluster, Ceph and Vstorage (Virtuozzo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The text uses links to articles with a more detailed disclosure of certain problems, so the descriptions will be as brief as possible using key points without unnecessary water and background information that you can independently obtain on the Internet if you wish. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, of course, the topics covered require tones of text, but in the modern world more and more people don‚Äôt like to read a lot))), so you can quickly read and make a choice, and if it‚Äôs unclear to follow the links or google incomprehensible words))), and this article as a transparent wrapper for these deep topics, showing the filling - the main key points of each decision.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gluster</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with Gluster, which is actively used by manufacturers of hyperconverged platforms with SDS based on open source for virtual environments and can be found on the RedHat website in the storage section, where you are offered to choose from two SDS options: Gluster or Ceph. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gluster consists of a stack of translators - services that do all the work of distributing files, etc. Brick - a service that serves one disk, Volume - a volume (pool) - which combines these bricks. Next comes the service for distributing files into groups due to the function DHT (distributed hash table). We will not include the Sharding service in the description since the links below will describe the problems associated with it.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ar/m8/vw/arm8vwgchcznki_ujp1dt3priec.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When recording, the entire file lays in the brick and its copy is written in parallel on the brick on the second server. </font><font style="vertical-align: inherit;">Further, the second file will already be written to the second group of two brik (or more) on different servers.</font></font><br>
<a name="habracut"></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the files are about the same size and the volume will consist of only one group, then everything is fine, but under other conditions, the following problems will arise from the descriptions: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the place in the groups is not evenly utilized, it depends on the size of the files and if there is not enough space in the group to write the file, you will get an error, the file will not be written and will not be redistributed to another group;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when writing one file, IO goes to only one group, the rest are idle;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You cannot get the IO of the entire volume when writing a single file;</font></font></li>
<li>            ,         ,         .</li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the official description of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">architecture, one</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> also involuntarily understands that gluster works as a file storage on top of the classic hardware RAID. There have been development attempts to shard files into blocks, but this is all an add-on that puts performance losses on an existing architectural approach, plus the use of freely distributed components with performance limitations like Fuse. There are no metadata services, which limits the storage and distribution capabilities of files when distributing files into blocks. Better performance can be observed with the ‚ÄúDistributed Replicated‚Äù configuration, and the number of nodes must be at least 6 to create a reliable replica of 3 with optimal load distribution.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These conclusions are also related to the description of the experience of using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gluster</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and when compared with </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceph</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and there is also a description of the experience to the understanding of this more productive and more reliable </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúReplicated Distributed‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> configuration </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">.</font></a></font><br>
<img src="https://habrastorage.org/webt/p0/9-/jm/p09-jm28gt8dxygcveehbyejlic.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The picture shows the load distribution when recording two files, where copies of the first file are laid out on the first three servers, which are combined in the volume 0 group and three copies of the second file fall on the second group volume1 of the three servers. Each server has one disk.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The general conclusion is that you can use Gluster, but with the understanding that there will be limitations in performance and fault tolerance, which create difficulties under certain conditions of a hyperconverged solution, where resources are also needed for the computing loads of virtual environments.</font></font><cut> <br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are also some Gluster performance indicators that can be achieved under certain conditions by limiting in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fault tolerance.</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceph</font></font></h3><br>
  eph   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">.</a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Glusterfs  Ceph</a>,      Ceph     ,          . <br>
<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">eph</a>    Gluster       ,                 .    ,    ,      (),   latency          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">.</a><br>
 <br>
     CRUSH,       .   PG ‚Äî     ( )  . PG   ,  CRUSH   .   PG ‚Äî     -,    .    ,  ,     PG    . OSD ‚Äì      .<cut><br>
<br>
<img src="https://habrastorage.org/webt/ir/rz/fe/irrzfeyfxqzlfjhfr_iiychlyns.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qo/n8/oy/qon8oylqdywi1t5oqycmt56ere4.jpeg"><br>
<br>
             .    -.  -  ,    .     ,   ,     -       - (      ).  ,        -,    ‚Äî  ,    .              .<br>
<br>
   -        ,           ,       .                        .          ,     ‚Äì          ( ,  ).     ‚Äì     ,   .    -    ,          (  ),       ,      ,  Ceph      PG   self-healing   . ,  Ceph  (  ),     ,    .<cut><br>
 <br>
         -,           .    Ceph    Gluster  .          ‚Äì    ,        linux,       ,   ,         . <br>
<br>
<h3>Vstorage</h3><br>
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Virtuozzo storage(Vstorage)</a>,          ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>,      ,    .                     ,   .<br>
<br>
          kvm-qemu,      ,      :     FUSE(,  open source),   MDS (Metadata service),    Chunk service,           .          ,         SSD,    (erase coding  raid6)           all flash.  EC(erase coding)  :         .       eph   EC          ,      ,     Virtuozzo Storage       ‚Äúlog-structured file system‚Äù,      .         EC  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">.</a> ‚Äì          ,       .<br>
<br>
      ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> ,</a>      ,         . <br>
       eph  Virtuozzo storage.<br>
<br>
<img src="https://habrastorage.org/webt/nx/tb/nz/nxtbnzp3vy4zjmmtmqdl9dh6_ty.png"><br>
<br>
   Gluster  Ceph     ,      ,   Virtuozzo .                <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>      Vstorage             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>  .<cut><br>
<br>
          ,         ,                 . <br>
 <br>
          :           (   FUSE),     (MDS)         (   CS),   MDS     ,       .           .  ,     256.<br>
<br>
<img src="https://habrastorage.org/webt/u1/w1/4i/u1w14ikksmnwh3lbbmy5uctj83k.png"><br>
<br>
   ,  -   ,       256.      ,         .‚Ä¶        SSD ,   (    ),          SSD,     SSD,    HDD,     .           SSD  .  ,      SSD           ,        Latency   ,   SSD,         .    ,    IOPS     Vstorage  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>,     ,     ,       ,    .. <br>
<br>
     SSD,  ,       ,        HDD.   (MDS)        ,     Paxos.       FUSE,    ,      ,              .<br>
<br>
        ,     ,   ,             .          .         SDS,  fuse   fast path  Virtuozzo Storage.     fuse     open source ,   IOPS-        .            ,             eph  Gluster. <br>
<br>
      :         Virtuozzo Storage,  Ceph   Gluster. <br>
 <br>
,    Virtuozzo Storage:     ,     Fuse  fast path,    ,         compute(/),       ,      .   Ceph,        Gluster,    ,            .<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The plans include a desire to write a comparison between vSAN, Space Direct Storage, Vstorage and Nutanix Storage, testing Vstorage on HPE, Huawei equipment, as well as Vstorage integration scenarios with external hardware storage systems, so if you liked the article, it would be nice to get feedback from you , which could enhance the motivation for new articles based on your comments and suggestions.</font></font></cut></cut></cut></cut></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en486378/index.html">The solar-powered home server worked for 15 months: uptime 95.26%</a></li>
<li><a href="../en486380/index.html">What a Product Manager Should Actually Do</a></li>
<li><a href="../en486382/index.html">Seals and Scrum</a></li>
<li><a href="../en486388/index.html">MyVPN Open Source Nonprofit Project Overview</a></li>
<li><a href="../en486390/index.html">Wright In The Shadows</a></li>
<li><a href="../en486394/index.html">Bookmarks - is there a limit?</a></li>
<li><a href="../en486396/index.html">React Native: New Milestone in Shopify Mobile Development</a></li>
<li><a href="../en486400/index.html">To get your personal data, you need to give out even more personal data</a></li>
<li><a href="../en486402/index.html">Backup Death: New Threats and New Protection for Global Cyber ‚Äã‚ÄãSummit 2020</a></li>
<li><a href="../en486404/index.html">The task of the delivery of goods</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>