<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéè üë®‚Äçüíº üöô Un ejemplo de arquitectura hexagonal en Java üí∂ üôÅ üè∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se prepar√≥ una traducci√≥n del art√≠culo espec√≠ficamente para estudiantes del curso Java Developer .
 
  
 
 
 Como desarrolladores, a menudo tenemos qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Un ejemplo de arquitectura hexagonal en Java</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492076/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se prepar√≥ una traducci√≥n del art√≠culo espec√≠ficamente para estudiantes del curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/gd/2f/ap/gd2fapnfvwthsglrmjmhnn1wyvk.png"> <br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como desarrolladores, a menudo tenemos que lidiar con el c√≥digo heredado, que es dif√≠cil de mantener. Sabes lo dif√≠cil que es comprender la l√≥gica simple en un c√≥digo de espagueti grande y complicado. Mejorar el c√≥digo o desarrollar nuevas funciones se convierte en una pesadilla para el desarrollador.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno de los objetivos principales del dise√±o de software es la facilidad de mantenimiento. El c√≥digo mal mantenido se vuelve dif√≠cil de administrar. No solo es dif√≠cil de escalar, sino que se est√° convirtiendo en un problema para atraer nuevos desarrolladores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el mundo de TI, las cosas se mueven r√°pido. Si se le pide que implemente urgentemente una nueva funcionalidad o si desea cambiar de una base de datos relacional a NoSQL, ¬øcu√°l ser√° su primera reacci√≥n? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/lj/8b/wklj8bigqatvwl-qo7cjlapjl_8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una buena cobertura de prueba aumenta la confianza de los desarrolladores de que no habr√° problemas con la nueva versi√≥n. Sin embargo, si la l√≥gica de su negocio est√° entrelazada con la l√≥gica de la infraestructura, puede haber problemas con sus pruebas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mo/vc/hh/movchhizk5zg4m56jhtnkdsrvdy.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© yo?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero hay suficiente charla vac√≠a, veamos la arquitectura hexagonal. </font><font style="vertical-align: inherit;">El uso de esta plantilla lo ayudar√° a mejorar la capacidad de mantenimiento, la capacidad de prueba y otros beneficios.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducci√≥n a la arquitectura hexagonal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El t√©rmino </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura Hexagonal (arquitectura hexagonal, hexagonal) fue</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> acu√±ado en 2006 por Alistair Cockburn. Este estilo arquitect√≥nico tambi√©n se conoce como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura de Puertos y Adaptadores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En palabras simples, los componentes de su aplicaci√≥n interact√∫an a trav√©s de muchos puntos finales (puertos). Para procesar solicitudes, debe tener adaptadores que coincidan con los puertos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede hacer una analog√≠a con los puertos USB de la computadora. Puede usarlos si tiene un adaptador compatible (cargador o unidad flash).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tn/om/vd/tnomvd4i3cngipfc8olfqpyec9g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta arquitectura puede representarse esquem√°ticamente como un hex√°gono con l√≥gica de negocios en el centro (en el n√∫cleo), rodeada por los objetos con los que interact√∫a y los componentes que lo controlan, proporcionando datos de entrada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la vida real, los usuarios, las llamadas a la API, los scripts automatizados y las pruebas unitarias interact√∫an y brindan informaci√≥n a su aplicaci√≥n. Si su l√≥gica de negocios se combina con la l√≥gica de la interfaz de usuario, entonces encontrar√° muchos problemas. Por ejemplo, ser√° dif√≠cil cambiar la entrada de datos desde la interfaz de usuario a pruebas unitarias.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La aplicaci√≥n tambi√©n interact√∫a con objetos externos como bases de datos, colas de mensajes, servidores web (a trav√©s de llamadas API HTTP), etc. Si es necesario, migre la base de datos o cargue datos en un archivo, deber√≠a poder hacerlo sin afectar el negocio. l√≥gica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como su nombre lo indica, " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puertos y adaptadores</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", hay "puertos" a trav√©s de los cuales se produce la interacci√≥n y los "adaptadores" son componentes que procesan la entrada del usuario y la convierten al "idioma" del dominio. Los adaptadores encapsulan la l√≥gica de interacci√≥n con sistemas externos, como bases de datos, colas de mensajes, etc., y facilitan la comunicaci√≥n entre la l√≥gica empresarial y los objetos externos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente diagrama muestra las capas en las que se divide la aplicaci√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/zd/k-/yuzdk-bppoignfpz98ck7ld-a4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La arquitectura hexagonal distingue tres capas en la aplicaci√≥n: dominio, aplicaci√≥n e infraestructura:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dominio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La capa contiene la l√≥gica empresarial central. </font><font style="vertical-align: inherit;">No necesita conocer los detalles de la implementaci√≥n de las capas externas.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicaci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Una capa act√∫a como un puente entre las capas de un dominio y la infraestructura.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infraestructura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La implementaci√≥n de la interacci√≥n del dominio con el mundo exterior. </font><font style="vertical-align: inherit;">Las capas internas le parecen una caja negra.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n esta arquitectura, dos tipos de participantes interact√∫an con la aplicaci√≥n: primaria (controlador) y secundaria (controlada). </font><font style="vertical-align: inherit;">Los actores clave env√≠an solicitudes y administran la aplicaci√≥n (por ejemplo, usuarios o pruebas automatizadas). </font><font style="vertical-align: inherit;">Los secundarios proporcionan la infraestructura para la comunicaci√≥n con el mundo exterior (estos son adaptadores de bases de datos, clientes TCP o HTTP). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto se puede representar de la siguiente manera: el </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9j/yd/l-/9jydl-rnrtzuy8dk23gexjitq_g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lado izquierdo del hex√°gono consta de componentes que proporcionan informaci√≥n para el dominio ("controlan" la aplicaci√≥n) y el lado derecho consta de componentes controlados por nuestra aplicaci√≥n.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dise√±emos una aplicaci√≥n que almacenar√° cr√≠ticas de pel√≠culas. El usuario debe poder enviar una solicitud con el nombre de la pel√≠cula y obtener cinco rese√±as aleatorias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para simplificar, crearemos una aplicaci√≥n de consola con almacenamiento de datos en RAM. La respuesta al usuario se mostrar√° en la consola. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos un usuario (Usuario) que env√≠a una solicitud a la aplicaci√≥n. Por lo tanto, el usuario se convierte en un "administrador" (controlador). La aplicaci√≥n deber√≠a poder recibir datos de cualquier tipo de almacenamiento y enviar los resultados a la consola o a un archivo. Los objetos gestionados (controlados) ser√°n el "almac√©n de datos" ( </font></font><code>IFetchMovieReviews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) y la "impresora de respuesta" ( </font></font><code>IPrintMovieReviews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La siguiente figura muestra los componentes principales de nuestra aplicaci√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/kz/cj/yokzcjkqbwbvklf1bcxgqnhfx74.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A la izquierda est√°n los componentes que proporcionan la entrada de datos en la aplicaci√≥n. </font><font style="vertical-align: inherit;">A la derecha est√°n los componentes que le permiten interactuar con la base de datos y la consola. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos el c√≥digo de la aplicaci√≥n. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puerto de control</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IUserInput</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">(Object userCommand)</span></span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puertos gestionados</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFetchMovieReviews</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MovieReview&gt; <span class="hljs-title">fetchMovieReviews</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IPrintMovieReviews</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeMovieReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span></span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptadores de puerto gestionados Las</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
pel√≠culas se obtendr√°n del repositorio de pel√≠culas (MovieReviewsRepo). </font><font style="vertical-align: inherit;">Mostrar cr√≠ticas de pel√≠culas en la consola ser√° una clase </font></font><code>ConsolePrinter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Implementemos las dos interfaces anteriores.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsolePrinter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IPrintMovieReviews</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeMovieReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span> </span>{<font></font>
        movieReviewList.forEach(movieReview -&gt; {<font></font>
            System.out.println(movieReview.toString());<font></font>
        });<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieReviewsRepo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFetchMovieReviews</span> </span>{
    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;MovieReview&gt;&gt; movieReviewMap;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieReviewsRepo</span><span class="hljs-params">()</span> </span>{<font></font>
        initialize();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MovieReview&gt; <span class="hljs-title">fetchMovieReviews</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
<font></font>
        <span class="hljs-keyword">return</span> Optional.ofNullable(movieReviewMap.get(movieSearchRequest.getMovieName()))<font></font>
            .orElse(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.movieReviewMap = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<font></font>
        movieReviewMap.put(<span class="hljs-string">"StarWars"</span>, Collections.singletonList(<span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">7.5</span>, <span class="hljs-string">"Good"</span>)));<font></font>
        movieReviewMap.put(<span class="hljs-string">"StarTreck"</span>, Arrays.asList(<span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">9.5</span>, <span class="hljs-string">"Excellent"</span>), <span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">8.5</span>, <span class="hljs-string">"Good"</span>)));<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dominio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tarea principal de nuestra aplicaci√≥n es procesar las solicitudes de los usuarios. </font><font style="vertical-align: inherit;">Necesita obtener las pel√≠culas, procesarlas y transferir los resultados a la "impresora". </font><font style="vertical-align: inherit;">Por el momento, solo tenemos una funcionalidad: la b√∫squeda de pel√≠culas. </font><font style="vertical-align: inherit;">Para procesar las solicitudes de los usuarios, utilizaremos la interfaz est√°ndar </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos la clase principal </font></font><code>MovieApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieApp</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Consumer</span>&lt;<span class="hljs-title">MovieSearchRequest</span>&gt; </span>{
    <span class="hljs-keyword">private</span> IFetchMovieReviews fetchMovieReviews;
    <span class="hljs-keyword">private</span> IPrintMovieReviews printMovieReviews;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Random rand = <span class="hljs-keyword">new</span> Random();<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieApp</span><span class="hljs-params">(IFetchMovieReviews fetchMovieReviews, IPrintMovieReviews printMovieReviews)</span> </span>{
        <span class="hljs-keyword">this</span>.fetchMovieReviews = fetchMovieReviews;
        <span class="hljs-keyword">this</span>.printMovieReviews = printMovieReviews;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;MovieReview&gt; <span class="hljs-title">filterRandomReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span> </span>{<font></font>
        List&lt;MovieReview&gt; result = <span class="hljs-keyword">new</span> ArrayList&lt;MovieReview&gt;();
        <span class="hljs-comment">// logic to return random reviews</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; <span class="hljs-number">5</span>; ++index) {
            <span class="hljs-keyword">if</span> (movieReviewList.size() &lt; <span class="hljs-number">1</span>)
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">int</span> randomIndex = getRandomElement(movieReviewList.size());<font></font>
            MovieReview movieReview = movieReviewList.get(randomIndex);<font></font>
            movieReviewList.remove(movieReview);<font></font>
            result.add(movieReview);<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getRandomElement</span><span class="hljs-params">(<span class="hljs-keyword">int</span> size)</span> </span>{
        <span class="hljs-keyword">return</span> rand.nextInt(size);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
        List&lt;MovieReview&gt; movieReviewList = fetchMovieReviews.fetchMovieReviews(movieSearchRequest);<font></font>
        List&lt;MovieReview&gt; randomReviews = filterRandomReviews(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(movieReviewList));<font></font>
        printMovieReviews.writeMovieReviews(randomReviews);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora definimos una clase </font></font><code>CommandMapperModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que asignar√° comandos a los controladores.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommandMapperModel</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Class&lt;MovieSearchRequest&gt; searchMovies = MovieSearchRequest.class;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Model <span class="hljs-title">build</span><span class="hljs-params">(Consumer&lt;MovieSearchRequest&gt; displayMovies)</span> </span>{<font></font>
        Model model = Model.builder()<font></font>
            .user(searchMovies)<font></font>
            .system(displayMovies)<font></font>
            .build();<font></font>
<font></font>
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptadores de puerto de control</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El usuario interactuar√° con nuestro sistema a trav√©s de la interfaz </font></font><code>IUserInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">La implementaci√≥n usar√° </font></font><code>ModelRunner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y delegar√° la ejecuci√≥n.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCommandBoundary</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserInput</span> </span>{
    <span class="hljs-keyword">private</span> Model model;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserCommandBoundary</span><span class="hljs-params">(IFetchMovieReviews fetchMovieReviews, IPrintMovieReviews printMovieReviews)</span> </span>{<font></font>
        MovieApp movieApp = <span class="hljs-keyword">new</span> MovieApp(fetchMovieReviews, printMovieReviews);<font></font>
        model = CommandMapperModel.build(movieApp);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">(Object userCommand)</span> </span>{
        <span class="hljs-keyword">new</span> ModelRunner().run(model)<font></font>
            .reactTo(userCommand);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora veamos al usuario que usa la interfaz anterior.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieUser</span> </span>{
    <span class="hljs-keyword">private</span> IUserInput userInputDriverPort;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieUser</span><span class="hljs-params">(IUserInput userInputDriverPort)</span> </span>{
        <span class="hljs-keyword">this</span>.userInputDriverPort = userInputDriverPort;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processInput</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
        userInputDriverPort.handleUserInput(movieSearchRequest);<font></font>
    }<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solicitud</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, cree una aplicaci√≥n de consola. </font><font style="vertical-align: inherit;">Los adaptadores administrados se agregan como dependencias. </font><font style="vertical-align: inherit;">El usuario crear√° y enviar√° una solicitud a la aplicaci√≥n. </font><font style="vertical-align: inherit;">La aplicaci√≥n recibir√° datos, procesar√° y mostrar√° una respuesta a la consola.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        IFetchMovieReviews fetchMovieReviews = <span class="hljs-keyword">new</span> MovieReviewsRepo();<font></font>
        IPrintMovieReviews printMovieReviews = <span class="hljs-keyword">new</span> ConsolePrinter();<font></font>
        IUserInput userCommandBoundary = <span class="hljs-keyword">new</span> UserCommandBoundary(fetchMovieReviews, printMovieReviews);<font></font>
        MovieUser movieUser = <span class="hljs-keyword">new</span> MovieUser(userCommandBoundary);<font></font>
        MovieSearchRequest starWarsRequest = <span class="hljs-keyword">new</span> MovieSearchRequest(<span class="hljs-string">"StarWars"</span>);<font></font>
        MovieSearchRequest starTreckRequest = <span class="hljs-keyword">new</span> MovieSearchRequest(<span class="hljs-string">"StarTreck"</span>);<font></font>
<font></font>
        System.out.println(<span class="hljs-string">"Displaying reviews for movie "</span> + starTreckRequest.getMovieName());<font></font>
        movieUser.processInput(starTreckRequest);<font></font>
        System.out.println(<span class="hljs-string">"Displaying reviews for movie "</span> + starWarsRequest.getMovieName());<font></font>
        movieUser.processInput(starWarsRequest);<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que se puede mejorar, cambiar</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En nuestra implementaci√≥n, puede cambiar f√°cilmente de un almac√©n de datos a otro. </font><font style="vertical-align: inherit;">La implementaci√≥n de almacenamiento se puede inyectar en el c√≥digo sin cambiar la l√≥gica empresarial. </font><font style="vertical-align: inherit;">Por ejemplo, puede transferir datos de la memoria a una base de datos escribiendo un adaptador de base de datos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En lugar de enviarlo a la consola, puede implementar una "impresora", que escribir√° datos en un archivo. </font><font style="vertical-align: inherit;">En una aplicaci√≥n de m√∫ltiples capas de este tipo, resulta m√°s f√°cil agregar funcionalidad y corregir errores.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para probar la l√≥gica empresarial, puede escribir pruebas complejas. </font><font style="vertical-align: inherit;">Los adaptadores se pueden probar de forma aislada. </font><font style="vertical-align: inherit;">Por lo tanto, es posible aumentar la cobertura general de la prueba.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se pueden observar las siguientes ventajas de la arquitectura hexagonal:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acompa√±amiento</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : capas sueltas e independientes. </font><font style="vertical-align: inherit;">Se vuelve f√°cil agregar nuevas caracter√≠sticas a una capa sin afectar a otras capas.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testabilidad</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : las pruebas unitarias se escriben de forma simple y r√°pida. </font><font style="vertical-align: inherit;">Puede escribir pruebas para cada capa utilizando objetos de c√≥digo auxiliar que simulan dependencias. </font><font style="vertical-align: inherit;">Por ejemplo, podemos eliminar la dependencia de la base de datos haciendo un almac√©n de datos en la memoria.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptabilidad</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : la l√≥gica empresarial principal se vuelve independiente de los cambios en los objetos externos. </font><font style="vertical-align: inherit;">Por ejemplo, si necesita migrar a otra base de datos, no es necesario que realicemos cambios en el dominio. </font><font style="vertical-align: inherit;">Podemos hacer un adaptador apropiado para la base de datos.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referencias</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura Hexagonal (Alistair Cockburn)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura Hexagonal-Wiki</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitectura de puertos y adaptadores</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Giphy</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo. </font><font style="vertical-align: inherit;">¬°Nos vemos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el curso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492060/index.html">¬øC√≥mo resolver? "ECONNREFUSED - Conexi√≥n rechazada por el servidor"</a></li>
<li><a href="../es492062/index.html">Plantilla de servidor backend de Golang - parte 1 (servidor HTTP)</a></li>
<li><a href="../es492066/index.html">¬øPor qu√© Event Sourcing es el antipatr√≥n para la interacci√≥n de microservicios?</a></li>
<li><a href="../es492068/index.html">S7 Group abre un departamento "Tecnolog√≠as de la informaci√≥n en la aviaci√≥n" en MIPT</a></li>
<li><a href="../es492074/index.html">Tengo que ir r√°pido. Sincronizaci√≥n r√°pida de correo electr√≥nico IMAP</a></li>
<li><a href="../es492078/index.html">Los materiales m√°s importantes y √∫tiles sobre el coronavirus COVID-19</a></li>
<li><a href="../es492082/index.html">C√≥mo simplificar la administraci√≥n de dispositivos dom√©sticos y asegurarlos (compartir ideas sobre Kauri Safe Smart Home)</a></li>
<li><a href="../es492086/index.html">Coronavirus vs negocio ruso de TI: ¬øest√°n las empresas listas para transferir empleados a una ubicaci√≥n remota?</a></li>
<li><a href="../es492088/index.html">Probar el motor del juego Amazon Lumberyard. Enfoques y herramientas</a></li>
<li><a href="../es492094/index.html">Actualice RouterOS en su MikroTik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>