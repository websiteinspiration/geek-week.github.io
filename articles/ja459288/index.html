<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âš°ï¸ ğŸ”” ğŸ­ ECSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒã‚¤ãƒ†ã‚£ãƒ–å®Ÿè£… ğŸ‘¨ğŸ¿â€ğŸš’ ğŸ‘• ğŸ¤²ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»Šé€±ã€ç§ã¯Vagabondã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã«å–ã‚Šçµ„ã¿å§‹ã‚ã€entity-component-systemãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®Ÿè£…ã—å§‹ã‚ã¾ã—ãŸã€‚
 
 ã“ã®è¨˜äº‹ã§ã¯ã€GitHubã‹ã‚‰ç„¡æ–™ã§å…¥æ‰‹ã§ãã‚‹å®Ÿè£…ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ã—ã‹ã—ã€å˜ã«ã‚³ãƒ¼ãƒ‰ã«ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã®ã§ã¯ãªãã€ãã®æ§‹é€ ãŒã©ã®ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸã‹ã‚’èª¬æ˜ã—ãŸã„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ECSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒã‚¤ãƒ†ã‚£ãƒ–å®Ÿè£…</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459288/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c9/fc6/23e/4c9fc623e0787518bde7823317b0e6af.png" alt="ç”»åƒ"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šé€±ã€ç§ã¯Vagabondã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã«å–ã‚Šçµ„ã¿å§‹ã‚ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entity-component-system</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®Ÿè£…ã—å§‹ã‚ã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubã‹ã‚‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¡æ–™ã§å…¥æ‰‹ã§ãã‚‹å®Ÿè£…ã«ã¤ã„ã¦èª¬æ˜ã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€å˜ã«ã‚³ãƒ¼ãƒ‰ã«ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã®ã§ã¯ãªãã€ãã®æ§‹é€ ãŒã©ã®ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸã‹ã‚’èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€æœ€åˆã«ä½œæˆã—ãŸå®Ÿè£…ã‹ã‚‰å§‹ã‚ã¦ã€ãã®é•·æ‰€ã¨çŸ­æ‰€ã‚’åˆ†æã—ã€ãã‚Œã‚’ã©ã®ã‚ˆã†ã«æ”¹å–„ã—ãŸã‹ã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œã«ã€æ”¹å–„ã§ãã‚‹å´é¢ã®ãƒªã‚¹ãƒˆã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰æ›¸ã</font></font></h1><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‹•æ©Ÿ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®å‰ã®å¤šãã®äººã€…ãŒã“ã‚Œã‚’ã†ã¾ãã‚„ã£ã¦ããŸã®ã§ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«å¯¾ã™ã‚‹ECSã®åˆ©ç‚¹ã«ã¤ã„ã¦ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">Scott Bilasã¯</font><font style="vertical-align: inherit;">ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://web.archive.org/web/20101011021902/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GDC 2002</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§æœ€åˆã«ECSã«ã¤ã„ã¦è©±ã—ã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚ãƒˆãƒ”ãƒƒã‚¯ã¸ã®ä»–ã®æ³¨ç›®ã™ã¹ãå°å…¥ã«ã¯ã€</font><font style="vertical-align: inherit;">ãƒã‚¤ã‚¯ã‚¦ã‚§ã‚¹ãƒˆã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€²åŒ–ã™ã‚‹éšå±¤</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã€</font><font style="vertical-align: inherit;">ãƒ­ãƒãƒ¼ãƒˆãƒ‹ã‚¹ãƒˆãƒ­ãƒ </font><font style="vertical-align: inherit;">ã®ç´ æ™´ã‚‰ã—ã„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³</font></a><font style="vertical-align: inherit;">ãƒ–ãƒƒã‚¯</font><font style="vertical-align: inherit;">ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç« ãŒå«ã¾</font><font style="vertical-align: inherit;">ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">
è¦ã™ã‚‹ã«ã€ECSã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®ãƒ‡ãƒ¼ã‚¿æŒ‡å‘ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½œæˆã—ã€ãƒ‡ãƒ¼ã‚¿ã¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¾¿åˆ©ã«åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã™ã€‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãã—ã¦ã€ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚€ã‚·ã‚¹ãƒ†ãƒ ã¯ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">
è©³ç´°ã«å…¥ã‚‹ã¨ã€</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ç¶™æ‰¿</font></a><font style="vertical-align: inherit;">ã§ã¯ãªã</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECSã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ã“ã®ãƒ‡ãƒ¼ã‚¿æŒ‡å‘ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚ˆã‚Šæœ‰åŠ¹ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã€å„ªã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å®Ÿç¾ã—ã¾ã™ã€‚</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã‚’è©³ã—ãèª¬æ˜ã™ã‚‹å‰ã«ã€ã“ã‚Œã‹ã‚‰ä½•ã‚’è¨­è¨ˆã™ã‚‹ã‹ã‚’èª¬æ˜ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‰²ã‚Šå½“ã¦ã¯éå¸¸ã«ç°¡å˜ã§ã™ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Position</span> :</span> <span class="hljs-keyword">public</span> Component&lt;Position&gt;<font></font>
{<font></font>
    <span class="hljs-keyword">float</span> x;
    <span class="hljs-keyword">float</span> y;<font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Velocity</span> :</span> <span class="hljs-keyword">public</span> Component&lt;Velocity&gt;<font></font>
{<font></font>
    <span class="hljs-keyword">float</span> x;
    <span class="hljs-keyword">float</span> y;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã¨ãŠã‚Šã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRTP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€å¾Œã§èª¬æ˜ã™ã‚‹æŠ€è¡“çš„ãªç†ç”±ã‹ã‚‰ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ•°ã¨ã‚·ã‚¹ãƒ†ãƒ ã®æ•°ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> ComponentCount = <span class="hljs-number">32</span>;
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> SystemCount = <span class="hljs-number">8</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ä¸¡æ–¹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒã¤ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å–å¾—ã—ã€ãã‚Œã‚‰ã®ä½ç½®ã‚’æ›´æ–°ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PhysicsSystem</span> :</span> <span class="hljs-keyword">public</span> System&lt;ComponentCount, SystemCount&gt;<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    PhysicsSystem(EntityManager&lt;ComponentCount, SystemCount&gt;&amp; entityManager) : mEntityManager(entityManager)<font></font>
    {<font></font>
        setRequirements&lt;Position, Velocity&gt;();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-keyword">float</span> dt)</span>
    </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; entity : getManagedEntities())<font></font>
        {<font></font>
            <span class="hljs-keyword">auto</span> [position, velocity] = mEntityManager.getComponents&lt;Position, Velocity&gt;(entity);<font></font>
            position.x += velocity.x * dt;<font></font>
            position.y += velocity.y * dt;<font></font>
        }<font></font>
    }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
    EntityManager&lt;ComponentCount, SystemCount&gt;&amp; mEntityManager;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€å¯¾è±¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®£è¨€ã—ã¾ã™</font></font><code>setRequirements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã®å¾Œã€ã“ã®æ–¹æ³•ã§ã¯ã€</font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚ŒãŒå‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹</font></font><code>getManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦ä»¶ã‚’æº€ãŸã™ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®åå¾©ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«ã®ãŸã‚ã«ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’ä½œæˆã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç™»éŒ²ã—ã€ã‚·ã‚¹ãƒ†ãƒ ã¨ã„ãã¤ã‹ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆã—ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¦ãã‚Œã‚‰ã®ä½ç½®ã‚’æ›´æ–°ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">auto</span> manager = EntityManager&lt;ComponentCount, SystemCount&gt;();<font></font>
manager.registerComponent&lt;Position&gt;();<font></font>
manager.registerComponent&lt;Velocity&gt;();<font></font>
<span class="hljs-keyword">auto</span> system = manager.createSystem&lt;PhysicsSystem&gt;(manager);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i)<font></font>
{<font></font>
    <span class="hljs-keyword">auto</span> entity = manager.createEntity();<font></font>
    manager.addComponent&lt;Position&gt;(entity);<font></font>
    manager.addComponent&lt;Velocity&gt;(entity);<font></font>
}<font></font>
<span class="hljs-keyword">auto</span> dt = <span class="hljs-number">1.0f</span> / <span class="hljs-number">60.0f</span>;
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
    system-&gt;update(dt);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€é«˜ã®ECSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã™ã‚‹ãµã‚Šã¯ã—ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">è‡ªåˆ†ã§æ›¸ããŸã‹ã£ãŸã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ç§ã¯ãã‚Œã‚’ä¸€é€±é–“ã ã‘ä½œæ¥­ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€ã“ã‚ŒãŒã¾ã£ãŸãåŠ¹æœã®ãªã„ã‚‚ã®ã‚’ä½œæˆã™ã‚‹ç†ç”±ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åˆã¯ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2ã¤ç›®ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç¹°ã‚Šè¿”ã—ãƒˆãƒ©ãƒãƒ¼ã‚¹ã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾Œè€…ã¯ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆãŠã‚ˆã³ç ´æ£„ã—ã¾ã™ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚‰ã™ã¹ã¦ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ•°ã€å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ•°ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æœ€å¤§æ•°ã€ã‚·ã‚¹ãƒ†ãƒ ã®æœ€å¤§æ•°ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ã«ã—ã¦ã€å®Ÿè£…ãŒã©ã‚Œã»ã©é©åˆ‡ã«æ‹¡å¼µã§ãã‚‹ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç‰¹ã«ã€3ã¤ã®ç•°ãªã‚‹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®çµæœã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«Aï¼š32ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨16ã®ã‚·ã‚¹ãƒ†ãƒ ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AAãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼š128ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨32ã®ã‚·ã‚¹ãƒ†ãƒ ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AAAãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼š512ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŠã‚ˆã³64ã‚·ã‚¹ãƒ†ãƒ ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚‰ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯å®Ÿè£…ã®å“è³ªã«ã¤ã„ã¦ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æä¾›ã™ã‚‹ã¨ã„ã†äº‹å®Ÿã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ãã‚Œã‚‰ã¯éå¸¸ã«å˜ç´”ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€ã“ã‚Œã‚‰ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯åŒç¨®ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã¿ã‚’ä½¿ç”¨ã—ã€ãã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å°ã•ã„ã§ã™ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿè£…</font></font></h1><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒƒã‚»ãƒ³ã‚¹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®å®Ÿè£…ã§ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯å˜ãªã‚‹idã§ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> Entity = <span class="hljs-keyword">uint32_t</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entity.h</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã¯ã€</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">å¾Œã§å½¹ç«‹ã¤</font></a><font style="vertical-align: inherit;">ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚‚å®šç¾©ã—ã¾ã™</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> Index = <span class="hljs-keyword">uint32_t</span>;
<span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> InvalidIndex = <span class="hljs-built_in">std</span>::numeric_limits&lt;Index&gt;::max();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
64ãƒ“ãƒƒãƒˆã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ä»£ã‚ã‚Šã«ã€</font><font style="vertical-align: inherit;">ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¯€ç´„ã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æœ€é©åŒ–ã‚’æ”¹å–„ã™ã‚‹ãŸã‚</font><font style="vertical-align: inherit;">ã«</font></font><code>std::size_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã™ã‚‹</font></font><code>uint32_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ç§ãŸã¡ã¯ãã‚Œã»ã©å¤±ã†ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚èª°ã‹ãŒä½•åå„„ã‚‚ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’æŒã¤ã“ã¨ã¯ã¾ãšã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆåˆ†</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åŸºæœ¬ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">auto</span> Type&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Component</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> type = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>&gt;(Type);<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ã‚¿ã‚¤ãƒ—IDã‚’æ ¼ç´ã™ã‚‹ã ã‘ã§ã™ã€‚ã“ã‚Œã¯ã€å¾Œã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã«ã‚ˆã£ã¦ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä»˜ã‘ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã§ã™ã€‚</font><font style="vertical-align: inherit;">2ç•ªç›®ã¯ã«å¤‰æ›ã•ã‚ŒãŸå€¤</font></font><code>std::size_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®IDã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°ã€</font></font><code>Position</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¬¡ã®ã‚ˆã†ã«</font><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">å®šç¾©ã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Positon</span> :</span> Component&lt;Position, <span class="hljs-number">0</span>&gt;<font></font>
{<font></font>
    <span class="hljs-keyword">float</span> x;
    <span class="hljs-keyword">float</span> y;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€åˆ—æŒ™å‹ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒä¾¿åˆ©ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComponentType</span>
{</span><font></font>
    Position<font></font>
};<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Positon</span> :</span> Component&lt;Position, ComponentType::Position&gt;<font></font>
{<font></font>
    <span class="hljs-keyword">float</span> x;
    <span class="hljs-keyword">float</span> y;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°å…¥ä¾‹ã§ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯1ã¤ã ã‘ã§ã™ã€‚ã‚¿ã‚¤ãƒ—IDã‚’æ‰‹å‹•ã§æŒ‡å®šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">å¾Œã§ã€æ§‹é€ ã‚’æ”¹å–„ã—ã€ã‚¿ã‚¤ãƒ—è­˜åˆ¥å­ã‚’è‡ªå‹•çš„ã«ç”Ÿæˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EntityContainer</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹</font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ãã‚Œãã‚Œã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ç®¡ç†ã‚’æ‹…å½“ã—ã¾ã™</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>std::bitset</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒæ‰€æœ‰ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã€ç‰¹ã«ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆ</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã‚‹ãŸã‚ã€IDã‚’ã§ãã‚‹ã ã‘å°ã•ãã—ã¦ã€ãƒ¡ãƒ¢ãƒªã®ä½¿ç”¨é‡ã‚’å°‘ãªãã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ç ´æ£„ã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®IDã‚’å†åˆ©ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ç„¡æ–™ã®IDãŒã¨ã„ã†ã‚³ãƒ³ãƒ†ãƒŠã«æ ¼ç´ã•ã‚Œ</font></font><code>mFreeEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã«ç™ºè¡¨ãŒã‚ã‚Š</font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> ComponentCount, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> SystemCount&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntityContainer</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span></span>;
    <span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&gt;&amp; <span class="hljs-title">getEntityToBitset</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&amp; <span class="hljs-title">getBitset</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function">Entity <span class="hljs-title">create</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Entity entity)</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&gt; mEntityToBitset;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Entity&gt; mFreeEntities;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…æ–¹æ³•ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<code>getEntityToBitset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>getBitset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã“ã‚Œã‚‰ã¯æ™®é€šã®å°ã•ãªã‚²ãƒƒã‚¿ãƒ¼ã§ã™ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&gt;&amp; <span class="hljs-title">getEntityToBitset</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> mEntityToBitset;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&amp; <span class="hljs-title">getBitset</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span>
</span>{
    <span class="hljs-keyword">return</span> mEntityToBitset[entity];<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ–¹æ³•ã¯</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ˆã‚Šèˆˆå‘³æ·±ã„ã‚‚ã®ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">Entity <span class="hljs-title">create</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">auto</span> entity = Entity();
    <span class="hljs-keyword">if</span> (mFreeEntities.empty())<font></font>
    {<font></font>
        entity = <span class="hljs-keyword">static_cast</span>&lt;Entity&gt;(mEntityToBitset.size());<font></font>
        mEntityToBitset.emplace_back();<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        entity = mFreeEntities.back();<font></font>
        mFreeEntities.pop_back();<font></font>
        mEntityToBitset[entity].reset();<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> entity;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç©ºãã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒã‚ã‚‹å ´åˆã€å½¼ã¯ãã‚Œã‚’å†åˆ©ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œä»¥å¤–ã®å ´åˆã€ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ–°ã—ã„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>remove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€å‰Šé™¤ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™</font></font><code>mFreeEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    mFreeEntities.push_back(entity);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã®æ–¹æ³•ã¯ã“ã‚Œ</font></font><code>reserve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã®ã‚¿ã‚¹ã‚¯ã¯ã€ã•ã¾ã–ã¾ãªã‚³ãƒ³ãƒ†ãƒŠç”¨ã«ãƒ¡ãƒ¢ãƒªã‚’äºˆç´„ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã”å­˜çŸ¥ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒ¡ãƒ¢ãƒªã®å‰²ã‚Šå½“ã¦ã¯ã‚³ã‚¹ãƒˆã®ã‹ã‹ã‚‹æ“ä½œã§ã‚ã‚‹ãŸã‚ã€ã‚²ãƒ¼ãƒ å†…ã®å°†æ¥ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ•°ãŒã»ã¼ã‚ã‹ã£ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ¡ãƒ¢ãƒªã‚’äºˆç´„ã™ã‚‹ã¨ä½œæ¥­ãŒé«˜é€ŸåŒ–ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span>
</span>{<font></font>
    mFreeEntities.resize(size);<font></font>
    <span class="hljs-built_in">std</span>::iota(<span class="hljs-built_in">std</span>::begin(mFreeEntities), <span class="hljs-built_in">std</span>::end(mFreeEntities), <span class="hljs-number">0</span>);<font></font>
    mEntityToBitset.resize(size);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¡ãƒ¢ãƒªã®å˜ç´”ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã«åŠ ãˆã¦ã€ãã‚Œã‚‚ã„ã£ã±ã„ã«ãªã‚Š</font></font><code>mFreeEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ComponentContainer</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹</font></font><code>ComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ç‰¹å®šã®ã‚¿ã‚¤ãƒ—ã®ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ ¼ç´ã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ã€ç‰¹å®šã®ã‚¿ã‚¤ãƒ—ã®ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä¸€ç·’ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ã¨å‘¼ã°ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã”ã¨ã«1ã¤ã®å¤§ããªé…åˆ—ãŒã‚ã‚Šã¾ã™</font></font><code>mComponents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¸€å®šã®æ™‚é–“ã§è¿½åŠ ã€å—ä¿¡ã€ã¾ãŸã¯å‰Šé™¤ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã€ãŠã‚ˆã³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸é·ç§»ã™ã‚‹æ–¹æ³•ãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€</font></font><code>mComponentToEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³ã¨</font><font style="vertical-align: inherit;">å‘¼ã°ã‚Œã‚‹ã•ã‚‰ã«2ã¤ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒå¿…è¦</font></font><code>mEntityToComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã«ç™ºè¡¨ãŒã‚ã‚Š</font></font><code>ComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> ComponentCount, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> SystemCount&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComponentContainer</span> :</span> <span class="hljs-keyword">public</span> BaseComponentContainer<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:<font></font>
    ComponentContainer(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&gt;&amp; entityToBitset);<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span> <span class="hljs-keyword">override</span></span>;<font></font>
<font></font>
    <span class="hljs-function">T&amp; <span class="hljs-title">get</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">const</span> T&amp; <span class="hljs-title">get</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Args&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">tryRemove</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">override</span></span>;
    <span class="hljs-function">Entity <span class="hljs-title">getOwner</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T&amp; component)</span> <span class="hljs-keyword">const</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;T&gt; mComponents;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Entity&gt; mComponentToEntity;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_map</span>&lt;Entity, Index&gt; mEntityToComponent;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&gt;&amp; mEntityToBitset;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®</font></font><code>BaseComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹</font><font style="vertical-align: inherit;">ã‹ã‚‰ç¶™æ‰¿ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseComponentContainer</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~BaseComponentContainer() = <span class="hljs-keyword">default</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">tryRemove</span><span class="hljs-params">(Entity entity)</span> </span>= <span class="hljs-number">0</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®åŸºæœ¬ã‚¯ãƒ©ã‚¹ã®å”¯ä¸€ã®ç›®çš„ã¯ã€ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</font></font><code>ComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ã‚³ãƒ³ãƒ†ãƒŠ</font><font style="vertical-align: inherit;">ã«æ ¼ç´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¼ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã‚’å«ã‚€ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã¸ã®å‚ç…§ã‚’å–å¾—ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¯ãƒ©ã‚¹ã¯ãã‚Œã‚’ä½¿ç”¨ã—ã¦ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã¾ãŸã¯å‰Šé™¤ã™ã‚‹ã¨ãã«ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã‚’æ›´æ–°ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">ComponentContainer(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&gt;&amp; entityToBitset) :<font></font>
    mEntityToBitset(entityToBitset)<font></font>
{<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ–¹æ³•ã§ã¯</font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æˆ‘ã€…ã¯ãã‚Œã‚’ä½¿ç”¨ã—ã€ã‚·ãƒ³ãƒ—ãƒ«ã§</font></font><code>mEntityToComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã«</font></font><code>entity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã¯</font></font><code>mComponents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">T&amp; <span class="hljs-title">get</span><span class="hljs-params">(Entity entity)</span>
</span>{
    <span class="hljs-keyword">return</span> mComponents[mEntityToComponent[entity]];<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>add</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€å¼•æ•°ã‚’ä½¿ç”¨ã—ã¦æœ«å°¾ã«æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒ¿å…¥</font></font><code>mComponents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã€ãŠã‚ˆã³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ç§»å‹•ã™ã‚‹ãŸã‚ã®ãƒªãƒ³ã‚¯ã‚’æº–å‚™ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œ</font></font><code>entity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾å¿œã™ã‚‹</font><font style="vertical-align: inherit;">ãƒ“ãƒƒãƒˆã‚»ãƒƒãƒˆã®ãƒ“ãƒƒãƒˆ</font><font style="vertical-align: inherit;">ã€å€¤ã‚’</font><font style="vertical-align: inherit;">å‰²ã‚Šå½“ã¦</font><font style="vertical-align: inherit;">ã¾ã™</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Args&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span>
</span>{
    <span class="hljs-keyword">auto</span> index = <span class="hljs-keyword">static_cast</span>&lt;Index&gt;(mComponents.size());<font></font>
    mComponents.emplace_back(<span class="hljs-built_in">std</span>::forward&lt;Args&gt;(args)...);<font></font>
    mComponentToEntity.emplace_back(entity);<font></font>
    mEntityToComponent[entity] = index;<font></font>
    mEntityToBitset[entity][T::type] = <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>remove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ãƒ“ãƒƒãƒˆã®å¯¾å¿œã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å€¤ã‚’å‰²ã‚Šå½“ã¦</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æœ€å¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font></font><code>mComponents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ã€å‰Šé™¤ã™ã‚‹</font><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font><font style="vertical-align: inherit;">ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«</font><font style="vertical-align: inherit;">ç§»å‹•ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§»å‹•ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã‚’æ›´æ–°ã—ã€ç ´æ£„ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®1ã¤ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    mEntityToBitset[entity][T::type] = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">auto</span> index = mEntityToComponent[entity];
    <span class="hljs-comment">// Update mComponents</span>
    mComponents[index] = <span class="hljs-built_in">std</span>::move(mComponents.back());<font></font>
    mComponents.pop_back();<font></font>
    <span class="hljs-comment">// Update mEntityToComponent</span><font></font>
    mEntityToComponent[mComponentToEntity.back()] = index;<font></font>
    mEntityToComponent.erase(entity);<font></font>
    <span class="hljs-comment">// Update mComponentToEntity</span><font></font>
    mComponentToEntity[index] = mComponentToEntity.back();<font></font>
    mComponentToEntity.pop_back();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç ´å£Šã—ãŸã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æœ€å¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç§»å‹•ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ä¸€å®šæ™‚é–“ã®ç§»å‹•ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦å®Ÿéš›ã«ã¯ã€æœ€å¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‰Šé™¤ã™ã‚‹ã ã‘ã§æ¸ˆã¿ã¾ã™ã€‚ã“ã‚Œã¯</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€å®šã®æ™‚é–“ã§</font><font style="vertical-align: inherit;">å®Ÿè¡Œã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>tryRemove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å‰Šé™¤ã™ã‚‹å‰ã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">tryRemove</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">override</span>
</span>{
    <span class="hljs-keyword">if</span> (mEntityToBitset[entity][T::type])<font></font>
    {<font></font>
        remove(entity);<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>getOwner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ‰€æœ‰ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®ãŸã‚ã«ã€ãƒã‚¤ãƒ³ã‚¿ãƒ¼æ¼”ç®—ã¨</font></font><code>mComponentToEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">Entity <span class="hljs-title">getOwner</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T&amp; component)</span> <span class="hljs-keyword">const</span>
</span>{
    <span class="hljs-keyword">auto</span> begin = mComponents.data();
    <span class="hljs-keyword">auto</span> index = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>&gt;(&amp;component - begin);
    <span class="hljs-keyword">return</span> mComponentToEntity[index];<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯thisã§ã™</font></font><code>reserve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã«ã¯ã€ã®é¡ä¼¼ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒã˜ã‚ˆã†ãªç›®çš„ãŒã‚ã‚Šã¾ã™</font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span> <span class="hljs-keyword">override</span>
</span>{<font></font>
    mComponents.reserve(size);<font></font>
    mComponentToEntity.reserve(size);<font></font>
    mEntityToComponent.reserve(size);<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</font></font><code>System</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å„ã‚·ã‚¹ãƒ†ãƒ ã«ã¯ã€</font></font><code>mRequirements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨˜è¿°ã™ã‚‹</font><font style="vertical-align: inherit;">ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆãŒã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€</font></font><code>mManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®è¦ä»¶ã‚’æº€ãŸã™</font><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚»ãƒƒãƒˆã‚’æ ¼ç´ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç¹°ã‚Šè¿”ã—ã¾ã™ãŒã€ã™ã¹ã¦ã®æ“ä½œã‚’ä¸€å®šã®æ™‚é–“ã§å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ç§»å‹•ã™ã‚‹æ–¹æ³•ãŒå¿…è¦</font></font><code>mManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã¯ã€</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åå‰</font><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¾ã™</font></font><code>mEntityToManagedEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åºƒå‘Šã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™</font></font><code>System</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> ComponentCount, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> SystemCount&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">System</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~System() = <span class="hljs-keyword">default</span>;<font></font>
<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">setRequirements</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Entity&gt;&amp; <span class="hljs-title">getManagedEntities</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onManagedEntityAdded</span><span class="hljs-params">([[maybe_unused]] Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onManagedEntityRemoved</span><span class="hljs-params">([[maybe_unused]] Entity entity)</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">friend</span> EntityManager&lt;ComponentCount, SystemCount&gt;;<font></font>
<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt; mRequirements;
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> mType;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Entity&gt; mManagedEntities;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_map</span>&lt;Entity, Index&gt; mEntityToManagedEntity;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> type)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onEntityUpdated</span><span class="hljs-params">(Entity entity, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&amp; components)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onEntityRemoved</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addEntity</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">removeEntity</span><span class="hljs-params">(Entity entity)</span></span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ãƒƒãƒˆå€¤ã‚’è¨­å®šã™ã‚‹ã«</font></font><code>setRequirements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç•³ã¿è¾¼ã¿å¼ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">setRequirements</span><span class="hljs-params">()</span>
</span>{<font></font>
    (mRequirements.<span class="hljs-built_in">set</span>(Ts::type), ...);<font></font>
}</code></pre><br>
<code>getManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç”Ÿæˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ãŒå‡¦ç†ã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã‚²ãƒƒã‚¿ãƒ¼ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Entity&gt;&amp; <span class="hljs-title">getManagedEntities</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
</span>{
    <span class="hljs-keyword">return</span> mManagedEntities;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”Ÿæˆã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ãŒå¤‰æ›´ã‚’è©¦ã¿ãªã„ã‚ˆã†ã«ã€å®šæ•°å‚ç…§ã‚’è¿”ã—ã¾ã™</font></font><code>mManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<code>onManagedEntityAdded</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>onManagedEntityRemoved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©ºã§ã™ã€‚ãã‚Œã‚‰ã¯å¾Œã§å†å®šç¾©ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’è¿½åŠ </font></font><code>mManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ãŸã¯å‰Šé™¤ã™ã‚‹</font><font style="vertical-align: inherit;">ã¨ãã«å‘¼ã³å‡ºã•ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§ã‚ã‚Š</font></font><code>EntityManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Friendlyã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®£è¨€ã•ã‚Œã¦ã„ã‚‹</font><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<code>setUp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã‚ˆã£ã¦å‘¼ã³å‡ºã•ã‚Œã€ã‚·ã‚¹ãƒ†ãƒ ã«IDã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚æ¬¡ã«ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> type)</span>
</span>{<font></font>
    mType = type;<font></font>
}</code></pre><br>
<code>onEntityUpdated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã€ã¤ã¾ã‚Š </font><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã¾ãŸã¯å‰Šé™¤ã™ã‚‹ã¨ãã€‚</font><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ ã¯ã€è¦ä»¶ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã€ãŠã‚ˆã³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¼ãŒã™ã§ã«å‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¦ä»¶ã‚’æº€ãŸã—ã€ã¾ã å‡¦ç†ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦è¿½åŠ ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒè¦ä»¶ã‚’æº€ãŸã—ã¦ãŠã‚‰ãšã€ã™ã§ã«å‡¦ç†ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦å‰Šé™¤ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã®ä»–ã®å ´åˆã¯ã™ã¹ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã¯ä½•ã‚‚ã—ã¾ã›ã‚“ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onEntityUpdated</span><span class="hljs-params">(Entity entity, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;&amp; components)</span>
</span>{
    <span class="hljs-keyword">auto</span> satisfied = (mRequirements &amp; components) == mRequirements;
    <span class="hljs-keyword">auto</span> managed = mEntityToManagedEntity.find(entity) != <span class="hljs-built_in">std</span>::end(mEntityToManagedEntity);
    <span class="hljs-keyword">if</span> (satisfied &amp;&amp; !managed)<font></font>
        addEntity(entity);<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!satisfied &amp;&amp; managed)<font></font>
        removeEntity(entity);<font></font>
}</code></pre><br>
<code>onEntityRemoved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒå‰Šé™¤ã•ã‚ŒãŸã¨ãã«ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ã«ã‚ˆã£ã¦å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚ŒãŸå ´åˆã¯ã€ãã‚Œã‚’å‰Šé™¤ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onEntityRemoved</span><span class="hljs-params">(Entity entity)</span>
</span>{
    <span class="hljs-keyword">if</span> (mEntityToManagedEntity.find(entity) != <span class="hljs-built_in">std</span>::end(mEntityToManagedEntity))<font></font>
        removeEntity(entity);<font></font>
}</code></pre><br>
<code>addEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>removeEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã“ã‚Œã‚‰ã¯å˜ãªã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</font></font><br>
<br>
<code>addEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿½åŠ ã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ãã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ãƒªãƒ³ã‚¯ã™ã‚‹ã‚ˆã†ã«ãƒªãƒ³ã‚¯ã‚’è¨­å®šã—</font></font><code>mManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¦ã‚’å‘¼ã³å‡ºã—ã¾ã™</font></font><code>onManagedEntityAdded</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addEntity</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    mEntityToManagedEntity[entity] = <span class="hljs-keyword">static_cast</span>&lt;Index&gt;(mManagedEntities.size());<font></font>
    mManagedEntities.emplace_back(entity);<font></font>
    onManagedEntityAdded(entity);<font></font>
}</code></pre><br>
<code>removeEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åˆã®å‘¼ã³å‡ºã—</font></font><code>onManagedEntityRemoved</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€æœ€å¾Œã«å‡¦ç†ã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ã€å‰Šé™¤ã•ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ç§»å‹•ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§»å‹•ã—ãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å‚ç…§ã‚’æ›´æ–°ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">çµ‚ã‚ã‚Šã«ã€ãã‚Œã¯ã‹ã‚‰å‰Šé™¤ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å‰Šé™¤</font></font><code>mManagedEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¦</font></font><code>mEntityToManagedEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">removeEntity</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    onManagedEntityRemoved(entity);<font></font>
    <span class="hljs-keyword">auto</span> index = mEntityToManagedEntity[entity];<font></font>
    mEntityToManagedEntity[mManagedEntities.back()] = index;<font></font>
    mEntityToManagedEntity.erase(entity);<font></font>
    mManagedEntities[index] = mManagedEntities.back();<font></font>
    mManagedEntities.pop_back();<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EntityManager</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®é‡è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã¯ä»–ã®ã‚¯ãƒ©ã‚¹ã«ã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ã¯å˜ã«ã™ã¹ã¦ã‚’ä¸€ç·’ã«çµã³ä»˜ã‘ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½¼ã®åºƒå‘Šã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> ComponentCount, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> SystemCount&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntityManager</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">registerComponent</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> ...Args&gt;
    T* <span class="hljs-title">createSystem</span><span class="hljs-params">(Args&amp;&amp; ...args)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span></span>;
    <span class="hljs-function">Entity <span class="hljs-title">createEntity</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">removeEntity</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">bool</span> <span class="hljs-title">hasComponent</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
    <span class="hljs-keyword">bool</span> <span class="hljs-title">hasComponents</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    T&amp; <span class="hljs-title">getComponent</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">const</span> T&amp; <span class="hljs-title">getComponent</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
    <span class="hljs-built_in">std</span>::tuple&lt;Ts&amp;...&gt; <span class="hljs-title">getComponents</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
    <span class="hljs-built_in">std</span>::tuple&lt;<span class="hljs-keyword">const</span> Ts&amp;...&gt; <span class="hljs-title">getComponents</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Args&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">addComponent</span><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">removeComponent</span><span class="hljs-params">(Entity entity)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    Entity <span class="hljs-title">getOwner</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T&amp; component)</span> <span class="hljs-keyword">const</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">array</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;BaseComponentContainer&gt;, ComponentCount&gt; mComponentContainers;<font></font>
    EntityContainer&lt;ComponentCount, SystemCount&gt; mEntities;<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;System&lt;ComponentCount, SystemCount&gt;&gt;&gt; mSystems;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">checkComponentType</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">checkComponentTypes</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">auto</span> <span class="hljs-title">getComponentContainer</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">auto</span> <span class="hljs-title">getComponentContainer</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹ã¯</font></font><code>EntityManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ï¼š3äººã®å¯å¤‰ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ³ãƒãƒ¼æŒã£ã¦</font></font><code>mComponentContainers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã„ã‚‹åº—èˆ—ã®ãƒã‚¤ãƒ³ã‚¿ã‚’</font></font><code>std::unique_ptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—</font></font><code>BaseComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>mEntities</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ã“ã¨ã‚’1 </font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>mSystems</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1åº—èˆ—ãƒã‚¤ãƒ³ã‚¿ã“ã¨</font></font><code>unique_ptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«</font></font><code>System</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹ã«ã¯å¤šãã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ãŒã€å®Ÿéš›ã«ã¯ã™ã¹ã¦éå¸¸ã«å˜ç´”ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãš</font></font><code>getComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€å‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‡¦ç†ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒŠã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™ã‚’</font><font style="vertical-align: inherit;">è¦‹ã¦ã¿ã¾ã—ã‚‡ã†</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">getComponentContainer</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;ComponentContainer&lt;T, ComponentCount, SystemCount&gt;*&gt;(mComponentContainers[T::type].get());<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ¥ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¯</font></font><code>checkComponentType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¿ã‚¤ãƒ—IDãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æœ€å¤§æ•°ã‚’ä¸‹å›ã£ã¦</font><font style="vertical-align: inherit;">ã„ã‚‹ã“ã¨</font><font style="vertical-align: inherit;">ã‚’å˜ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‚‚ã®ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">checkComponentType</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
</span>{
    <span class="hljs-keyword">static_assert</span>(T::type &lt; ComponentCount);<font></font>
}</code></pre><br>
<code>checkComponentTypes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç•³ã¿è¾¼ã¿å¼ã‚’ä½¿ç”¨ã—ã¦ã€ã„ãã¤ã‹ã®ã‚¿ã‚¤ãƒ—ã®ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">checkComponentTypes</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
    (checkComponentType&lt;Ts&gt;(), ...);<font></font>
}</code></pre><br>
<code>registerComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¤ãƒ—ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">registerComponent</span><span class="hljs-params">()</span>
</span>{<font></font>
    checkComponentType&lt;T&gt;();<font></font>
    mComponentContainers[T::type] = <span class="hljs-built_in">std</span>::make_unique&lt;ComponentContainer&lt;T, ComponentCount, SystemCount&gt;&gt;(<font></font>
        mEntities.getEntityToBitset());<font></font>
}</code></pre><br>
<code>createSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¤ãƒ—ã®æ–°ã—ã„ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œæˆã—ã€ãã®ã‚¿ã‚¤ãƒ—ã‚’è¨­å®šã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> ...Args&gt;
T* <span class="hljs-title">createSystem</span><span class="hljs-params">(Args&amp;&amp; ...args)</span>
</span>{
    <span class="hljs-keyword">auto</span> type = mSystems.size();
    <span class="hljs-keyword">auto</span>&amp; system = mSystems.emplace_back(<span class="hljs-built_in">std</span>::make_unique&lt;T&gt;(<span class="hljs-built_in">std</span>::forward&lt;Args&gt;(args)...));<font></font>
    system-&gt;setUp(type);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;T*&gt;(system.get());<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ–¹æ³•ã¯ã€</font></font><code>reserve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘¼ã³å‡ºã—ã¦</font></font><code>reserve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚³ãƒ³ãƒ†ãƒŠã®</font><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã‚’</font></font><code>ComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> size)</span>
</span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>(<span class="hljs-number">0</span>); i &lt; ComponentCount; ++i)<font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (mComponentContainers[i])<font></font>
            mComponentContainers[i]-&gt;reserve(size);<font></font>
    }<font></font>
    mEntities.reserve(size);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>createEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manager </font><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã®çµæœã‚’è¿”ã—ã¾ã™</font></font><code>EntityManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">Entity <span class="hljs-title">createEntity</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> mEntities.create();<font></font>
}</code></pre><br>
<code>hasComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¤ãƒ—ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã“ã¨ã‚’ã™ã°ã‚„ãç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">bool</span> <span class="hljs-title">hasComponent</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
    checkComponentType&lt;T&gt;();<font></font>
    <span class="hljs-keyword">return</span> mEntities.getBitset(entity)[T::type];<font></font>
}</code></pre><br>
<code>hasComponents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã¯ã€ãŸãŸã¿è¾¼ã¿å¼ã‚’ä½¿ç”¨ã—ã¦å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¤ºã™ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã€ãã‚Œã‚’ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã¨ã¨ã‚‚ã«ä½¿ç”¨ã—ã¦ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¿…è¦ãªã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
<span class="hljs-keyword">bool</span> <span class="hljs-title">hasComponents</span><span class="hljs-params">(Entity entity)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
    checkComponentTypes&lt;Ts...&gt;();<font></font>
    <span class="hljs-keyword">auto</span> requirements = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">bitset</span>&lt;ComponentCount&gt;();<font></font>
    (requirements.<span class="hljs-built_in">set</span>(Ts::type), ...);
    <span class="hljs-keyword">return</span> (requirements &amp; mEntities.getBitset(entity)) == requirements;<font></font>
}</code></pre><br>
<code>getComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¦æ±‚ã‚’å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒŠã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
T&amp; <span class="hljs-title">getComponent</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    checkComponentType&lt;T&gt;();<font></font>
    <span class="hljs-keyword">return</span> getComponentContainer&lt;T&gt;()-&gt;get(entity);<font></font>
}</code></pre><br>
<code>getComponents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦æ±‚ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã®ã‚¿ãƒ—ãƒ«ã‚’è¿”ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€å½¼ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>std::tie</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç•³ã¿è¾¼ã¿å¼</font><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ...Ts&gt;
<span class="hljs-built_in">std</span>::tuple&lt;Ts&amp;...&gt; <span class="hljs-title">getComponents</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    checkComponentTypes&lt;Ts...&gt;();<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::tie(getComponentContainer&lt;Ts&gt;()-&gt;get(entity)...);<font></font>
}</code></pre><br>
<code>addComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>removeComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒŠã«è¦æ±‚ã‚’è»¢é€ã—ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™</font></font><code>onEntityUpdated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Args&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">addComponent</span><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span>
</span>{<font></font>
    checkComponentType&lt;T&gt;();<font></font>
    getComponentContainer&lt;T&gt;()-&gt;add(entity, <span class="hljs-built_in">std</span>::forward&lt;Args&gt;(args)...);
    <span class="hljs-comment">// Send message to systems</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; <span class="hljs-built_in">bitset</span> = mEntities.getBitset(entity);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; system : mSystems)<font></font>
        system-&gt;onEntityUpdated(entity, <span class="hljs-built_in">bitset</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">removeComponent</span><span class="hljs-params">(Entity entity)</span>
</span>{<font></font>
    checkComponentType&lt;T&gt;();<font></font>
    getComponentContainer&lt;T&gt;()-&gt;remove(entity);<font></font>
    <span class="hljs-comment">// Send message to systems</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; <span class="hljs-built_in">bitset</span> = mEntities.getBitset(entity);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; system : mSystems)<font></font>
        system-&gt;onEntityUpdated(entity, <span class="hljs-built_in">bitset</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«</font></font><code>getOwner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç›®çš„ã®ã‚³ãƒ³ãƒ†ãƒŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">è»¢é€ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
Entity <span class="hljs-title">getOwner</span><span class="hljs-params">(<span class="hljs-keyword">const</span> T&amp; component)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
    checkComponentType&lt;T&gt;();<font></font>
    <span class="hljs-keyword">return</span> getComponentContainer&lt;T&gt;()-&gt;getOwner(component);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚ŒãŒç§ã®æœ€åˆã®å®Ÿè£…ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã‚ãšã‹357è¡Œã®ã‚³ãƒ¼ãƒ‰ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</font></font></h1><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šã“ãã€ç§ã®æœ€åˆã®ECSå®Ÿè£…ã‚’ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã™ã‚‹æ™‚ã§ã™ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çµæœã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c9/fc6/23e/4c9fc623e0787518bde7823317b0e6af.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb0/323/9a9/bb03239a90cccf5f95ab47ecf94e3a4d.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/679/e54/f0e/679e54f0e32260a9f62621838b51a15e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ååˆ†ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ï¼</font><font style="vertical-align: inherit;">1ç§’é–“ã«å‡¦ç†ã•ã‚Œã‚‹æ•°ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ•°ã‚’å¢—ã‚„ã—ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆAã€AAã€ãŠã‚ˆã³AAAï¼‰ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¨ã»ã¼åŒã˜ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ•°ã®å¢—åŠ ã«åˆã‚ã›ã¦é©åˆ‡ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒã¤ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’åå¾©ã™ã‚‹å ´åˆã€1ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒã¤ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’åå¾©ã™ã‚‹ã‚ˆã‚Šã‚‚3å€é…ãç™ºç”Ÿã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€3ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€äºˆæƒ³ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ã®æ•°ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã“ã“ã‹ã‚‰</font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å–å¾—</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ãŸ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">cachegrindã®</font></a><font style="vertical-align: inherit;">ä¾‹</font><font style="vertical-align: inherit;">ã‚’å®Ÿè¡Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã—ã¾ã—ãŸ</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10,000ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£</font><font style="vertical-align: inherit;">
ã®çµæœã¯</font><font style="vertical-align: inherit;">
æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚100,000ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£</font><font style="vertical-align: inherit;">ã®çµæœã¯</font><font style="vertical-align: inherit;">æ¬¡ã®ã¨ãŠã‚Šã§ã™</font><font style="vertical-align: inherit;">ã€‚çµæœã¯ã‹ãªã‚Šè‰¯å¥½ã§ã™ã€‚</font><font style="vertical-align: inherit;">100,000ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã§LLdãƒŸã‚¹ãŒéå¸¸ã«å¤šã„ã®ã¯ã€å°‘ã—å¥‡å¦™ãªã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<code>==1652== D refs: 277,577,353 (254,775,159 rd + 22,802,194 wr)<br>
==1652== D1 misses: 20,814,368 ( 20,759,914 rd + 54,454 wr)<br>
==1652== LLd misses: 43,483 ( 7,847 rd + 35,636 wr)<br>
==1652== D1 miss rate: 7.5% ( 8.1% + 0.2% )<br>
==1652== LLd miss rate: 0.0% ( 0.0% + 0.2% )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>==1738== D refs: 2,762,879,670 (2,539,368,564 rd + 223,511,106 wr)<br>
==1738== D1 misses: 207,415,181 ( 206,902,072 rd + 513,109 wr)<br>
==1738== LLd misses: 207,274,328 ( 206,789,289 rd + 485,039 wr)<br>
==1738== D1 miss rate: 7.5% ( 8.1% + 0.2% )<br>
==1738== LLd miss rate: 7.5% ( 8.1% + 0.2% )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®å®Ÿè£…ã®ã©ã®éƒ¨åˆ†ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gprofã‚’ä½¿ç”¨ã—</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¦ä¾‹ã‚’ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã—ã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çµæœã¯æ¬¡ã®ã¨ãŠã‚Š</font><font style="vertical-align: inherit;">ã§ã™ã€‚gprofãŒæ„å‘³ã®ã‚ã‚‹ã‚‚ã®ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«</font><font style="vertical-align: inherit;">
ãƒ•ãƒ©ã‚°ã‚’ä»˜ã‘ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸãŸã‚ã€çµæœãŒå°‘ã—æ­ªã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æœ€é©åŒ–ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šã’ã‚‹ã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼ã¯ã™ã¹ã¦ã‚’ç©æ¥µçš„ã«åŸ‹ã‚è¾¼ã¿å§‹ã‚ã€gprofã¯ã»ã¨ã‚“ã©ä½•ã‚‚è¨€ã‚ãªã„ã‚ˆã†ã§ã™ã€‚</font><font style="vertical-align: inherit;">
gprofã«ã‚ˆã‚‹ã¨ã€ã“ã®å®Ÿè£…ã®æ˜ã‚‰ã‹ãªãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¯</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚’æœ€é©åŒ–ã—ãŸã„å ´åˆã¯ã€ãã‚Œã‚‰ã‚’å–ã‚Šé™¤ãã“ã¨ã‚’è©¦ã¿ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<code>Flat profile:<br>
<br>
Each sample counts as 0.01 seconds.<br>
 % cumulative self self total<br>
 time seconds seconds calls ms/call ms/call name<br>
 57.45 1.16 1.16 200300000 0.00 0.00 std::__detail::_Map_base&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt;, true&gt;::operator[](unsigned int const&amp;)<br>
 19.31 1.55 0.39 main<br>
 16.34 1.88 0.33 200500000 0.00 0.00 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::_M_find_before_node(unsigned long, unsigned int const&amp;, unsigned long) const<br>
 3.96 1.96 0.08 300000 0.00 0.00 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node&lt;std::pair&lt;unsigned int const, unsigned int&gt;, false&gt;*)<br>
 2.48 2.01 0.05 300000 0.00 0.00 unsigned int&amp; std::vector&lt;unsigned int, std::allocator&lt;unsigned int&gt; &gt;::emplace_back&lt;unsigned int&amp;&gt;(unsigned int&amp;)<br>
 0.50 2.02 0.01 3 3.33 3.33 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::~_Hashtable()<br>
 0.00 2.02 0.00 200000 0.00 0.00 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::find(unsigned int const&amp;)</code><br>
<br><font style="vertical-align: inherit;"></font><code>-O1</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>std::unordered_map</code><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¯”è¼ƒ </font></font><code>std::map</code></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã¯é–“ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é•ã„ãŒæ°—ã«ãªã£ãŸ</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>std::map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ç§ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ã™ã¹ã¦ã‚’ç½®ãæ›ãˆã‚‹</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>std::map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®å®Ÿè£…ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã¡ã‚‰ã‹ã‚‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¥æ‰‹ã§ã</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/611/50b/3da/61150b3da1ec1cf850a0ed5b761f03a1.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/136/3be/951/1363be95163a3dfb2ab968c1591c7c60.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d08/b4b/7f1/d08b4b7f1b5b35531bdc32a614ccbb81.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šå›ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ•°ãŒå¢—ãˆã‚‹ãŸã‚ã€å®Ÿè£…ãŒã†ã¾ãã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã—ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒ1000ã®å ´åˆã§ã‚‚ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³cã®2å€ã®é€Ÿåº¦ã§åå¾©ãŒè¡Œã‚ã‚Œã¾ã™</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
entity-component-systemãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚·ãƒ³ãƒ—ãƒ«ã ãŒæ—¢ã«å®Ÿç”¨çš„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">å°†æ¥çš„ã«ã¯ã€æ”¹å–„ã¨æœ€é©åŒ–ã®åŸºç›¤ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®éƒ¨åˆ†ã§ã¯ã€æˆ‘ã€…ã¯äº¤æ›ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ç”Ÿç”£æ€§ã‚’å‘ä¸Šã•ã›ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€IDã‚¿ã‚¤ãƒ—ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è‡ªå‹•çš„ã«å‰²ã‚Šå½“ã¦ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std :: unordered_mapã‚’std :: vectorã«ç½®ãæ›ãˆã‚‹</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦‹ã¦ããŸã‚ˆã†ã«ã€ã“ã‚Œã‚‰</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ç§ãŸã¡ã®å®Ÿè£…ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ä»£ã‚ã‚Šã«</font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>mEntityToComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><code>ComponentContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³in </font></font><code>mEntityToManagedEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><code>System</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã—</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤‰åŒ–</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤‰æ›´ã¯éå¸¸ã«ç°¡å˜</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã“ã“</font></a><font style="vertical-align: inherit;">ã§ç¢ºèªã§ã</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å”¯ä¸€ã®å¾®å¦™ãªç‚¹ã§ã‚ã‚‹</font></font><code>vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«</font></font><code>mEntityToComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¦</font></font><code>mEntityToManagedEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»æ„ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚ˆã£ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä»˜ã‘ã®ãŸã‚ã«ååˆ†ãªé•·ã•ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç°¡å˜ãªæ–¹æ³•ã§ã“ã‚Œã‚’è¡Œã†ãŸã‚ã«ã€ç§ã¯ã“ã‚Œã‚‰ä¿å­˜ã™ã‚‹ã“ã¨ã‚’æ±ºã‚ãŸ</font></font><code>vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­</font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ç§ãŸã¡ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æœ€å¤§ã®IDã‚’çŸ¥ã£ã¦ã„ã‚‹ã—ã€ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«</font></font><code>vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§å‚ç…§ã¾ãŸã¯ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã«ã‚ˆã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã«</font><font style="vertical-align: inherit;">ãƒ™ã‚¯ã‚¿ãƒ¼ã‚’æ¸¡ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤‰æ›´ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯ã“ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµæœ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚ˆã‚Šã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/38a/1df/4bd/38a1df4bd3c8110d3873588854ffc314.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0f5/897/2ae/0f58972ae408b9726899597fbd774be1.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/22b/3f5/fcd/22b3f5fcd21c8285cc779f46ca3896a4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã¨ãŠã‚Šã€å¤šæ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚·ã‚¹ãƒ†ãƒ ã§ã®ä½œæˆã¨å‰Šé™¤ã¯å°‘ã—</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é…ã</font><font style="vertical-align: inherit;">ãªã£ã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€åå¾©ã¯ã¯ã‚‹ã‹ã«é€Ÿããªã‚Šã€ã»ã¼10å€ã«ãªã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãã‚Œã¯éå¸¸ã«ã‚ˆãã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®é«˜é€ŸåŒ–ã¯ã€ä½œæˆã¨å‰Šé™¤ã®é€Ÿåº¦ä½ä¸‹ã‚’å¤§å¹…ã«ä¸Šå›ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯è«–ç†çš„ã§ã™ã€‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®åå¾©ã¯ä½•åº¦ã‚‚ç™ºç”Ÿã—ã¾ã™ãŒã€ä½œæˆã¨å‰Šé™¤ã¯1å›ã ã‘ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«ã‚ˆã‚Šã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ã®æ•°ãŒæ¸›å°‘ã—ãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ä¸‡ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨cachegrindã®å‡ºåŠ›ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ãã—ã¦ã€ã“ã“ã§10ä¸‡ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãŸã‚ã«å‡ºåŠ›ã•ã‚Œã¾ã™ï¼š</font><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯ã€ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯3å›å°‘ãªã„ãƒªãƒ³ã‚¯ã¨4å€å°‘ãªã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒŸã‚¹ã«ã¤ã„ã¦ä½œæˆã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<code>==1374== D refs: 94,563,949 (72,082,880 rd + 22,481,069 wr)<br>
==1374== D1 misses: 4,813,780 ( 4,417,702 rd + 396,078 wr)<br>
==1374== LLd misses: 378,905 ( 9,626 rd + 369,279 wr)<br>
==1374== D1 miss rate: 5.1% ( 6.1% + 1.8% )<br>
==1374== LLd miss rate: 0.4% ( 0.0% + 1.6% )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>==1307== D refs: 938,405,796 (715,424,940 rd + 222,980,856 wr)<br>
==1307== D1 misses: 51,034,738 ( 44,045,090 rd + 6,989,648 wr)<br>
==1307== LLd misses: 5,866,508 ( 1,997,948 rd + 3,868,560 wr)<br>
==1307== D1 miss rate: 5.4% ( 6.2% + 3.1% )<br>
==1307== LLd miss rate: 0.6% ( 0.3% + 1.7% )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå‹•ã‚¿ã‚¤ãƒ—</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«èª¬æ˜ã™ã‚‹æ”¹å–„ç‚¹ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¿ã‚¤ãƒ—è­˜åˆ¥å­ã®è‡ªå‹•ç”Ÿæˆã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤‰åŒ–</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
idå‹ã®è‡ªå‹•ç”Ÿæˆã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®ã™ã¹ã¦ã®å¤‰æ›´ã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã”ã¨ã«1ã¤ã®ä¸€æ„ã®IDã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€CRTPã¨é™çš„ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’æŒã¤é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Component</span>
{</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> type;<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> <span class="hljs-title">generateComponentType</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">auto</span> counter = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> counter++;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> Component&lt;T&gt;::type = generateComponentType();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¿ã‚¤ãƒ—IDãŒå®Ÿè¡Œæ™‚ã«ç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã€ä»¥å‰ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«èªè­˜ã•ã‚Œã¦ã„ãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤‰æ›´å¾Œã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã“ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã‚ã‚Šã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµæœ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å®Ÿæ–½ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7bd/112/0da/7bd1120da37daac5e3ef48446776b6e7.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/234/f2f/937/234f2f9377a0f3ad8ea231f91e335ddf.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/101/4f2/ade/1014f2adebd6156bc48c9b6fe5670b43.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œæˆã¨å‰Šé™¤ã«ã¤ã„ã¦ã¯ã€çµæœã¯ã»ã¼åŒã˜ã¾ã¾ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€åå¾©ãŒå°‘ã—é…ãã€ç´„10ï¼…ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®é€Ÿåº¦ä½ä¸‹ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«å‹è­˜åˆ¥å­ã‚’çŸ¥ã£ã¦ã„ãŸãŸã‚ã«ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šæœ€é©åŒ–ã§ãã‚‹ã¨ã„ã†äº‹å®Ÿã§èª¬æ˜ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
idã‚¿ã‚¤ãƒ—ã®æ‰‹å‹•å‰²ã‚Šå½“ã¦ã¯å°‘ã—ä¸ä¾¿ã§ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å°‘ã—ä½ä¸‹ã•ã›ã¦ã‚‚ã€ECSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ã„ã‚„ã™ã•ã¯å‘ä¸Šã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã‚‰ãªã‚‹æ”¹å–„ã®ãŸã‚ã®ã‚¢ã‚¤ãƒ‡ã‚¢</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã‚’ç· ã‚ããã‚‹å‰ã«ã€ä»–ã®æ”¹å–„ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’çš†ã•ã‚“ã¨å…±æœ‰ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€ãã‚Œã‚‰ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã›ã‚“ãŒã€å°†æ¥çš„ã«ã¯å®Ÿè£…ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚·ã‚¹ãƒ†ãƒ ã®å‹•çš„ãªæ•°</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚·ã‚¹ãƒ†ãƒ ã®æœ€å¤§æ•°ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¢å¼ã§äº‹å‰ã«ç¤ºã™ã®ã¯ä¸ä¾¿ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã¯ãã‚Œã‚’äº¤æ›ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚‹ã¨æ€ã†</font></font><code>std::array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­</font></font><code>EntityManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å¼·ã„æ¸›å°‘ãªã—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€</font></font><code>std::bitset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ãƒ“ãƒƒãƒˆæ•°ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä»Šã®ã¨ã“ã‚ã€ç§ã¯ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã€ã“ã®å•é¡Œã‚’ä¿®æ­£ã™ã‚‹ã¨æ€ã£ã¦</font></font><code>std::vector&lt;bitset&lt;ComponentCount&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­</font></font><code>EntityContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font></font><code>std::vector&lt;char&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ“ãƒƒãƒˆã‚»ãƒƒãƒˆã‚’è¡¨ã™ã®ã«ååˆ†ãªãƒã‚¤ãƒˆã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«</font></font><code>BitsetView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒ“ãƒƒãƒˆã®ã‚»ãƒƒãƒˆã®æœ€åˆã¨æœ€å¾Œã¸ã®ãƒã‚¤ãƒ³ã‚¿ã®ãƒšã‚¢ã‚’å…¥åŠ›ã§å—ã‘å–ã‚‹</font><font style="vertical-align: inherit;">è»½é‡ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…</font><font style="vertical-align: inherit;">ã—</font></font><code>std::bitset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã“ã®ãƒ¡ãƒ¢ãƒªç¯„å›²ã§</font><font style="vertical-align: inherit;">å¿…è¦ãªã™ã¹ã¦ã®æ“ä½œã‚’å®Ÿè¡Œã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ¥ã®ã‚¢ã‚¤ãƒ‡ã‚¢ï¼šãƒ“ãƒƒãƒˆã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã›ãš</font></font><code>mEntityToComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’</font><font style="vertical-align: inherit;">ç¢ºèªã™ã‚‹ã ã‘</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°¡ç•¥åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åå¾©</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾æ™‚ç‚¹ã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ãŒå‡¦ç†ã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¹°ã‚Šè¿”ã—å‡¦ç†ã—ãŸã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; entity : getManagedEntities())<font></font>
{<font></font>
    <span class="hljs-keyword">auto</span> [position, velocity] = mEntityManager.getComponents&lt;Position, Velocity&gt;(entity);<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã‚Œã°ã€ã‚ˆã‚Šãã‚Œã„ã§ç°¡å˜ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; [position, velocity] : mEntityManager.getComponents&lt;Position, Velocity&gt;(mManagedEntities))<font></font>
{<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><code>std::view::transform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ 20ã®</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ç¯„å›²ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã‚‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã¨ã€ã“ã‚Œã‚’å®Ÿè£…ã™ã‚‹ã®ãŒç°¡å˜ã«ãªã‚Šã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ®‹å¿µãªãŒã‚‰ã€ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">Eric Niblerã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rangeãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™</font><font style="vertical-align: inherit;">ãŒã€ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ ã—ãŸãã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è§£æ±ºç­–</font></font><code>EntityRangeView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å—ã‘å–ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã‚’å—ã‘å–ã‚‹</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹</font><font style="vertical-align: inherit;">ã¨ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£</font><font style="vertical-align: inherit;">å‚ç…§</font><font style="vertical-align: inherit;">ã‚’å®Ÿè£…ã™ã‚‹</font><font style="vertical-align: inherit;">ã“ã¨ã§ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«</font></font><code>begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><font style="vertical-align: inherit;">ã‚’å®Ÿç¾</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã€ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã—ã¦ç›®çš„ã®å‹•ä½œã‚’å®Ÿç¾ã™ã‚‹ã ã‘ã§æ¸ˆã¿ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã»ã©é›£ã—ãã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æ›¸ãã®ã«å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã®æœ€é©åŒ–</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã¾ãŸã¯å‰Šé™¤ã™ã‚‹ã¨ãã«ã€</font></font><code>onEntityUpdated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ã‚·ã‚¹ãƒ†ãƒ </font><font style="vertical-align: inherit;">ã‚’å‘¼ã³å‡ºã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å¤šãã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€å¤‰æ›´ã•ã‚ŒãŸã°ã‹ã‚Šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã«é–¢å¿ƒãŒãªã„ãŸã‚ã€ã“ã‚Œã¯å°‘ã—éåŠ¹ç‡çš„ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æå‚·ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã«ã€æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¤ãƒ—ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é–¢é€£ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«æ ¼ç´ã§ãã¾ã™</font></font><code>std::array&lt;std::vector&lt;System&lt;ComponentCount, SystemCount&gt;&gt;, ComponentCount&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã¾ãŸã¯å‰Šé™¤ã™ã‚‹ã¨ãã«</font></font><code>onEntityUpdated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é–¢é€£ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ </font><font style="vertical-align: inherit;">ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ãªãã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚µãƒ–ã‚»ãƒƒãƒˆ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®æœ€å¾Œã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ§‹é€ ã‚’ã‚ˆã‚Šåºƒç¯„å›²ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚»ãƒƒãƒˆã‚’ç®¡ç†ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®ä»£ã‚ã‚Šã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ãŒã“ã‚Œã‚’è¡Œã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒ ã®åˆ©ç‚¹ã¯ã€2ã¤ã®ã‚·ã‚¹ãƒ†ãƒ ãŒåŒã˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚»ãƒƒãƒˆã«é–¢å¿ƒãŒã‚ã‚‹å ´åˆã€ã“ã‚Œã‚‰ã®è¦ä»¶ã‚’æº€ãŸã™ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚µãƒ–ã‚»ãƒƒãƒˆã‚’è¤‡è£½ã—ãªã„ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ã‚¹ãƒ†ãƒ ã¯ã€å˜ã«è¦ä»¶ã‚’ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ã«å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã™ã¹ã¦ã®ç•°ãªã‚‹ã‚µãƒ–ã‚»ãƒƒãƒˆã‚’ä¿å­˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œã«ã€ã‚·ã‚¹ãƒ†ãƒ ã¯åŒæ§˜ã®æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ã‚¯ã‚¨ãƒªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; entity : mEntityManager.getEntitiesWith&lt;Position, Velocity&gt;())<font></font>
{<font></font>
    ...<font></font>
}</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€ç§ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ã«é–¢ã™ã‚‹è¨˜äº‹ã®çµ‚ã‚ã‚Šã§ã™ã€‚</font><font style="vertical-align: inherit;">ä»–ã«æ”¹å–„ã‚’åŠ ãˆãŸã‚‰ã€å°†æ¥æ–°ã—ã„è¨˜äº‹ã‚’æ›¸ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§èª¬æ˜ã™ã‚‹å®Ÿè£…ã¯éå¸¸ã«å˜ç´”ã§ã™ã€‚500è¡Œæœªæº€ã®ã‚³ãƒ¼ãƒ‰ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚‚å„ªã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ï¼ˆå„Ÿå´ã•ã‚ŒãŸï¼‰ä¸€å®šã®æ™‚é–“ã§å®Ÿç¾ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€å®Ÿéš›ã«ã¯ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ€é©ã«ä½¿ç”¨ã—ã€éå¸¸ã«è¿…é€Ÿã«ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ¼ã‚’å–å¾—ã—ã¦åå¾©ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ãŒãŠã‚‚ã—ã‚ã‹ã£ãŸã‹ã€å½¹ã«ç«‹ã£ãŸã¨æ€ã„ã¾ã™ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿½åŠ ã®èª­æ›¸</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹ã¯ã€entity-component-systemãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚ˆã‚Šè©³ç´°ãªèª¿æŸ»ã«å½¹ç«‹ã¤ãƒªã‚½ãƒ¼ã‚¹ã§ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒŸã‚·ã‚§ãƒ«Kayneyã€è‘—è€…ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENTTã¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã¨å‘¼ã°ã‚Œã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®è¨˜äº‹ã®éå¸¸ã«èˆˆå‘³æ·±ã„ä¸€é€£ã®æ›¸ãè¾¼ã¿</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECSã®å‰å¾Œã«ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entity Systems Wikiã«</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€éå¸¸ã«å½¹ç«‹ã¤æƒ…å ±ã¨ãƒªãƒ³ã‚¯ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja459264/index.html">Tarantoolãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰æŠœã‘å‡ºã™ã€‚ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹éš›ã®ãƒãƒ¼ãƒ‰ã®åŒæœŸ</a></li>
<li><a href="../ja459272/index.html">Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ã®APIã‚’ä½œæˆã™ã‚‹ã€ãƒ‘ãƒ¼ãƒˆ1ï¼šç«¶åˆã™ã‚‹å°é“å…·ã‚’ä½œæˆã—ãªã„</a></li>
<li><a href="../ja459274/index.html">Astra Linux Special Editionï¼ˆã‚¹ãƒ¢ãƒ¬ãƒ³ã‚¹ã‚¯ï¼‰ã®ç”»é¢ãƒ­ãƒƒã‚¯ã®è„†å¼±æ€§</a></li>
<li><a href="../ja459276/index.html">ã‚¨ãƒ”ãƒƒã‚¯ãƒ•ã‚§ã‚¤ãƒ«ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ³ã‚¹2ã€ã¾ãŸã¯FireFoxãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é–¢ä¸ã™ã¹ãã§ãªã„ç†ç”±</a></li>
<li><a href="../ja459286/index.html">ã‚»ãƒŸãƒ¡ã‚¿ãƒ«ãƒ†ãƒ«ãƒ«åŒ–ã‚¿ãƒ³ã‚°ã‚¹ãƒ†ãƒ³-ãƒŠãƒãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®æ—¥ã®ã‚¹ã‚¤ã‚¹ãƒŠã‚¤ãƒ•</a></li>
<li><a href="../ja459292/index.html">ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã®è‡ªå‹•åŒ–ï¼šãƒ„ãƒ¼ãƒ«ã®æ¯”è¼ƒ</a></li>
<li><a href="../ja459294/index.html">ã•ã‚‰ã«é‡è¦ãªã“ã¨ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’çŸ¥ã£ã¦ã„ã‚‹ã‹ã€ãƒ“ã‚¸ãƒã‚¹ä¸Šã®å•é¡Œã‚’è§£æ±ºã§ãã‚‹ã‹ã§ã™ã€‚</a></li>
<li><a href="../ja459296/index.html">JavaScriptä¾¡æ ¼2019</a></li>
<li><a href="../ja459298/index.html">Angularï¼š2019å¹´ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</a></li>
<li><a href="../ja459300/index.html">Quasar 1.0ï¼šVueé–‹ç™ºè€…ã«ã¨ã£ã¦ã ã‘ã§ãªãã€Vueé–‹ç™ºè€…ã«ã¨ã£ã¦ã‚‚æ–°ã—ã„ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>