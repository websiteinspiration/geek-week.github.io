<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ต๐ฟ ๐ข [ุงูุฌุฒุก 2/2] ุฏููู FFmpeg ู SDL ุฃู ููููุฉ ูุชุงุจุฉ ูุดุบู ููุฏูู ูู ุฃูู ูู 1000 ุณุทุฑ ๐๐ฝ ๐จ ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุดุฑ ูุง ุชุจูู ูู ุชุฑุฌูุฉ ุงูุฏููู ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ ุ ูุงูุชู ุนูุง ุนูููุง ุงูุฒูู ุฅูู ุญุฏ ูุง ุ ููููุง ูู ุชููุฏ ุฃูููุชูุง ุ ูุฃู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูุณุงุนุฏ ุนูู ููู "ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>[ุงูุฌุฒุก 2/2] ุฏููู FFmpeg ู SDL ุฃู ููููุฉ ูุชุงุจุฉ ูุดุบู ููุฏูู ูู ุฃูู ูู 1000 ุณุทุฑ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/502844/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><div style="text-align:center;"><img width="780" height="325" src="https://habrastorage.org/webt/yx/qh/nq/yxqhnqwvdlvzfw22erhmpfzpfba.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุดุฑ ูุง ุชุจูู ูู ุชุฑุฌูุฉ ุงูุฏููู ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ ุ ูุงูุชู ุนูุง ุนูููุง ุงูุฒูู ุฅูู ุญุฏ ูุง ุ ููููุง ูู ุชููุฏ ุฃูููุชูุง ุ ูุฃู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูุณุงุนุฏ ุนูู ููู "ุงููุทุจุฎ" ูุฅูุดุงุก ุชุทุจููุงุช ุงูููุฏูู ุจุงุณุชุฎุฏุงู ููุชุจุงุช FFmpeg ู SDL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูู ุงูุฑุบู ูู ูุญุงููุชูุง ุ ุฅูุง ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตุนูุจุงุช ุงูุชุฑุฌูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุฑ ูุง ููุฑ ููู ูู ูุซู ูุฐุง ุงููุต ุงูุถุฎู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุฅุจูุงุบ ุนู ุงูุฃุฎุทุงุก (ูููุถู ุฃู ูููู ุฐูู ูู ุงูุฑุณุงุฆู ุงูุฎุงุตุฉ) - ุณูุนูู ูุนูุง ุจุดูู ุฃูุถู.</font></font><a name="menu"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฏูู ุงููุญุชููุงุช</font></font></h3><div class="scrollable-table"><table>
<tbody><tr>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃูู</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 2</font></font></th>
</tr>
<tr>
<td align="left"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏูุฉ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 1: ุฅูุดุงุก SCREENCAPS </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 2: ุนุฑุถ ูู </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 3: ุงููุนุจ ุงูุตูุช </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 4: ุงูููุงุถูุน ูุชุนุฏุฏุฉ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 5: ูุฒุงููุฉ ุงูููุฏูู</font></font></a><br>
</td>
<td align="left"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 6: ุงูุตูุช ุชุฒุงูู </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 7: ุจุญุซ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุชูุฉ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุญู 1. ูุงุฆูุฉ ูุธุงุฆู </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูู ุงูููุญู 2. ุจูุงูุงุช </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฑูุนุฉ</font></font></a></td>
</tr>
</tbody></table></div><a name="habracut"></a><br>
<a name="audio"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅุฏูุณูู ุจุฑูุฌูุงุช - ุชุทููุฑ ุงูููุจ"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="ุฅุฏูุณูู ุจุฑูุฌูุงุช - ุชุทููุฑ ุงูููุจ"></a><br clear="right">
     EDISON.<br>
<br>
    ,      .<br>
<br>
,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   Axxon Next  SureView Immix</a>.<br>
<br>
      ! ;-)</blockquote><br>
<h2> 6:   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูุฏุฑุณ 5: ูุฒุงููุฉ ุงูููุฏูู">โ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅูู ุฌุฏูู ุงููุญุชููุงุช">โ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูุฏุฑุณ 7: ุงูุจุญุซ">โ</a></h2><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">  tutorial06.c</b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">// tutorial05.c</span>
<span class="hljs-comment">// A pedagogical video player that really works!</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Code based on FFplay, Copyright (c) 2003 Fabrice Bellard, </span>
<span class="hljs-comment">// and a tutorial by Martin Bohme (boehme@inb.uni-luebeckREMOVETHIS.de)</span>
<span class="hljs-comment">// Tested on Gentoo, CVS version 5/01/07 compiled with GCC 4.1.1</span>
<span class="hljs-comment">// With updates from https://github.com/chelyaev/ffmpeg-tutorial</span>
<span class="hljs-comment">// Updates tested on:</span>
<span class="hljs-comment">// LAVC 54.59.100, LAVF 54.29.104, LSWS 2.1.101, SDL 1.2.15</span>
<span class="hljs-comment">// on GCC 4.7.2 in Debian February 2015</span>
<span class="hljs-comment">// Use</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// gcc -o tutorial05 tutorial05.c -lavformat -lavcodec -lswscale -lz -lm `sdl-config --cflags --libs`</span>
<span class="hljs-comment">// to build (assuming libavformat and libavcodec are correctly installed, </span>
<span class="hljs-comment">// and assuming you have sdl-config. Please refer to SDL docs for your installation.)</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Run using</span>
<span class="hljs-comment">// tutorial04 myvideofile.mpg</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// to play the video stream on your screen.</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavcodec/avcodec.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavformat/avformat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libswscale/swscale.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL_thread.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> __MINGW32__</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> main <span class="hljs-comment">/* Prevents SDL from overriding main() */</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;math.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">// compatibility with newer API</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_alloc avcodec_alloc_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_free avcodec_free_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SDL_AUDIO_BUFFER_SIZE 1024</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIO_FRAME_SIZE 192000</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIOQ_SIZE (5 * 16 * 1024)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_VIDEOQ_SIZE (5 * 256 * 1024)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_SYNC_THRESHOLD 0.01</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_NOSYNC_THRESHOLD 10.0</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SAMPLE_CORRECTION_PERCENT_MAX 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AUDIO_DIFF_AVG_NB 20</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_REFRESH_EVENT (SDL_USEREVENT)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_QUIT_EVENT (SDL_USEREVENT + 1)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> VIDEO_PICTURE_QUEUE_SIZE 1</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_AV_SYNC_TYPE AV_SYNC_VIDEO_MASTER</span><font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PacketQueue</span> {</span><font></font>
  AVPacketList *first_pkt, *last_pkt;<font></font>
  <span class="hljs-keyword">int</span> nb_packets;
  <span class="hljs-keyword">int</span> size;<font></font>
  SDL_mutex *mutex;<font></font>
  SDL_cond *cond;<font></font>
} PacketQueue;<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoPicture</span> {</span><font></font>
  SDL_Overlay *bmp;<font></font>
  <span class="hljs-keyword">int</span> width, height; <span class="hljs-comment">/* source height &amp; width */</span>
  <span class="hljs-keyword">int</span> allocated;
  <span class="hljs-keyword">double</span> pts;<font></font>
} VideoPicture;<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoState</span> {</span><font></font>
<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  <span class="hljs-keyword">int</span>             videoStream, audioStream;<font></font>
<font></font>
  <span class="hljs-keyword">int</span>             av_sync_type;
  <span class="hljs-keyword">double</span>          external_clock; <span class="hljs-comment">/* external clock base */</span>
  <span class="hljs-keyword">int64_t</span>         external_clock_time;<font></font>
<font></font>
  <span class="hljs-keyword">double</span>          audio_clock;<font></font>
  AVStream        *audio_st;<font></font>
  AVCodecContext  *audio_ctx;<font></font>
  PacketQueue     audioq;<font></font>
  <span class="hljs-keyword">uint8_t</span>         audio_buf[(AVCODEC_MAX_AUDIO_FRAME_SIZE * <span class="hljs-number">3</span>) / <span class="hljs-number">2</span>];
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_size;
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_index;<font></font>
  AVFrame         audio_frame;<font></font>
  AVPacket        audio_pkt;<font></font>
  <span class="hljs-keyword">uint8_t</span>         *audio_pkt_data;
  <span class="hljs-keyword">int</span>             audio_pkt_size;
  <span class="hljs-keyword">int</span>             audio_hw_buf_size;
  <span class="hljs-keyword">double</span>          audio_diff_cum; <span class="hljs-comment">/* used for AV difference average computation */</span>
  <span class="hljs-keyword">double</span>          audio_diff_avg_coef;
  <span class="hljs-keyword">double</span>          audio_diff_threshold;
  <span class="hljs-keyword">int</span>             audio_diff_avg_count;
  <span class="hljs-keyword">double</span>          frame_timer;
  <span class="hljs-keyword">double</span>          frame_last_pts;
  <span class="hljs-keyword">double</span>          frame_last_delay;
  <span class="hljs-keyword">double</span>          video_clock; <span class="hljs-comment">///&lt;pts of last decoded frame / predicted pts of next decoded frame</span>
  <span class="hljs-keyword">double</span>          video_current_pts; <span class="hljs-comment">///&lt;current displayed pts (different from video_clock if frame fifos are used)</span>
  <span class="hljs-keyword">int64_t</span>         video_current_pts_time;  <span class="hljs-comment">///&lt;time (av_gettime) at which we updated video_current_pts - used to have running video pts</span><font></font>
  AVStream        *video_st;<font></font>
  AVCodecContext  *video_ctx;<font></font>
  PacketQueue     videoq;<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SwsContext</span> *<span class="hljs-title">sws_ctx</span>;</span><font></font>
<font></font>
  VideoPicture    pictq[VIDEO_PICTURE_QUEUE_SIZE];<font></font>
  <span class="hljs-keyword">int</span>             pictq_size, pictq_rindex, pictq_windex;<font></font>
  SDL_mutex       *pictq_mutex;<font></font>
  SDL_cond        *pictq_cond;<font></font>
  <font></font>
  SDL_Thread      *parse_tid;<font></font>
  SDL_Thread      *video_tid;<font></font>
<font></font>
  <span class="hljs-keyword">char</span>            filename[<span class="hljs-number">1024</span>];
  <span class="hljs-keyword">int</span>             quit;<font></font>
} VideoState;<font></font>
<font></font>
<span class="hljs-keyword">enum</span> {<font></font>
  AV_SYNC_AUDIO_MASTER,<font></font>
  AV_SYNC_VIDEO_MASTER,<font></font>
  AV_SYNC_EXTERNAL_MASTER,<font></font>
};<font></font>
<font></font>
SDL_Surface     *screen;<font></font>
SDL_mutex       *screen_mutex;<font></font>
<font></font>
<span class="hljs-comment">/* Since we only have one decoding thread, the Big Struct
   can be global in case we need it. */</span><font></font>
VideoState *global_video_state;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_init</span><span class="hljs-params">(PacketQueue *q)</span> </span>{
  <span class="hljs-built_in">memset</span>(q, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(PacketQueue));<font></font>
  q-&gt;mutex = SDL_CreateMutex();<font></font>
  q-&gt;cond = SDL_CreateCond();<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_put</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt)</span> </span>{<font></font>
<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">if</span>(av_dup_packet(pkt) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
  pkt1 = av_malloc(<span class="hljs-keyword">sizeof</span>(AVPacketList));
  <span class="hljs-keyword">if</span> (!pkt1)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  pkt1-&gt;pkt = *pkt;<font></font>
  pkt1-&gt;next = <span class="hljs-literal">NULL</span>;<font></font>
  <font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (!q-&gt;last_pkt)<font></font>
    q-&gt;first_pkt = pkt1;<font></font>
  <span class="hljs-keyword">else</span><font></font>
    q-&gt;last_pkt-&gt;next = pkt1;<font></font>
  q-&gt;last_pkt = pkt1;<font></font>
  q-&gt;nb_packets++;<font></font>
  q-&gt;size += pkt1-&gt;pkt.size;<font></font>
  SDL_CondSignal(q-&gt;cond);<font></font>
  <font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_get</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt, <span class="hljs-keyword">int</span> block)</span>
</span>{<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">int</span> ret;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <font></font>
  <span class="hljs-keyword">for</span>(;;) {<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(global_video_state-&gt;quit) {<font></font>
      ret = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    pkt1 = q-&gt;first_pkt;<font></font>
    <span class="hljs-keyword">if</span> (pkt1) {<font></font>
      q-&gt;first_pkt = pkt1-&gt;next;<font></font>
      <span class="hljs-keyword">if</span> (!q-&gt;first_pkt)<font></font>
	q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
      q-&gt;nb_packets--;<font></font>
      q-&gt;size -= pkt1-&gt;pkt.size;<font></font>
      *pkt = pkt1-&gt;pkt;<font></font>
      av_free(pkt1);<font></font>
      ret = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!block) {<font></font>
      ret = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      SDL_CondWait(q-&gt;cond, q-&gt;mutex);<font></font>
    }<font></font>
  }<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> ret;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_audio_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> hw_buf_size, bytes_per_sec, n;<font></font>
  <font></font>
  pts = is-&gt;audio_clock; <span class="hljs-comment">/* maintained in the audio thread */</span><font></font>
  hw_buf_size = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
  bytes_per_sec = <span class="hljs-number">0</span>;<font></font>
  n = is-&gt;audio_ctx-&gt;channels * <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span>(is-&gt;audio_st) {<font></font>
    bytes_per_sec = is-&gt;audio_ctx-&gt;sample_rate * n;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(bytes_per_sec) {<font></font>
    pts -= (<span class="hljs-keyword">double</span>)hw_buf_size / bytes_per_sec;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_video_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> delta;<font></font>
<font></font>
  delta = (av_gettime() - is-&gt;video_current_pts_time) / <span class="hljs-number">1000000.0</span>;
  <span class="hljs-keyword">return</span> is-&gt;video_current_pts + delta;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_external_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">return</span> av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_master_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_VIDEO_MASTER) {
    <span class="hljs-keyword">return</span> get_video_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">return</span> get_audio_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> get_external_clock(is);<font></font>
  }<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">/* Add or subtract samples to get a better sync, return new
   audio buffer size */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">synchronize_audio</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">short</span> *samples,
		      <span class="hljs-keyword">int</span> samples_size, <span class="hljs-keyword">double</span> pts)</span> </span>{
  <span class="hljs-keyword">int</span> n;
  <span class="hljs-keyword">double</span> ref_clock;<font></font>
<font></font>
  n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">double</span> diff, avg_diff;
    <span class="hljs-keyword">int</span> wanted_size, min_size, max_size <span class="hljs-comment">/*, nb_samples */</span>;<font></font>
    <font></font>
    ref_clock = get_master_clock(is);<font></font>
    diff = get_audio_clock(is) - ref_clock;<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(diff &lt; AV_NOSYNC_THRESHOLD) {
      <span class="hljs-comment">// accumulate the diffs</span><font></font>
      is-&gt;audio_diff_cum = diff + is-&gt;audio_diff_avg_coef<font></font>
	* is-&gt;audio_diff_cum;<font></font>
      <span class="hljs-keyword">if</span>(is-&gt;audio_diff_avg_count &lt; AUDIO_DIFF_AVG_NB) {<font></font>
	is-&gt;audio_diff_avg_count++;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	avg_diff = is-&gt;audio_diff_cum * (<span class="hljs-number">1.0</span> - is-&gt;audio_diff_avg_coef);
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(avg_diff) &gt;= is-&gt;audio_diff_threshold) {<font></font>
	  wanted_size = samples_size + ((<span class="hljs-keyword">int</span>)(diff * is-&gt;audio_ctx-&gt;sample_rate) * n);<font></font>
	  min_size = samples_size * ((<span class="hljs-number">100</span> - SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);<font></font>
	  max_size = samples_size * ((<span class="hljs-number">100</span> + SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);
	  <span class="hljs-keyword">if</span>(wanted_size &lt; min_size) {<font></font>
	    wanted_size = min_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wanted_size &gt; max_size) {<font></font>
	    wanted_size = max_size;<font></font>
	  }<font></font>
	  <span class="hljs-keyword">if</span>(wanted_size &lt; samples_size) {
	    <span class="hljs-comment">/* remove samples */</span><font></font>
	    samples_size = wanted_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(wanted_size &gt; samples_size) {
	    <span class="hljs-keyword">uint8_t</span> *samples_end, *q;
	    <span class="hljs-keyword">int</span> nb;<font></font>
<font></font>
	    <span class="hljs-comment">/* add samples by copying final sample*/</span><font></font>
	    nb = (samples_size - wanted_size);<font></font>
	    samples_end = (<span class="hljs-keyword">uint8_t</span> *)samples + samples_size - n;<font></font>
	    q = samples_end + n;<font></font>
	    <span class="hljs-keyword">while</span>(nb &gt; <span class="hljs-number">0</span>) {
	      <span class="hljs-built_in">memcpy</span>(q, samples_end, n);<font></font>
	      q += n;<font></font>
	      nb -= n;<font></font>
	    }<font></font>
	    samples_size = wanted_size;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* difference is TOO big; reset diff stuff */</span>
      is-&gt;audio_diff_avg_count = <span class="hljs-number">0</span>;<font></font>
      is-&gt;audio_diff_cum = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> samples_size;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">audio_decode_frame</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">uint8_t</span> *audio_buf, <span class="hljs-keyword">int</span> buf_size, <span class="hljs-keyword">double</span> *pts_ptr)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">int</span> len1, data_size = <span class="hljs-number">0</span>;<font></font>
  AVPacket *pkt = &amp;is-&gt;audio_pkt;<font></font>
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> n;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">while</span>(is-&gt;audio_pkt_size &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">int</span> got_frame = <span class="hljs-number">0</span>;<font></font>
      len1 = avcodec_decode_audio4(is-&gt;audio_ctx, &amp;is-&gt;audio_frame, &amp;got_frame, pkt);<font></font>
      <span class="hljs-keyword">if</span>(len1 &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* if error, skip frame */</span>
	is-&gt;audio_pkt_size = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      data_size = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span>(got_frame) {<font></font>
	data_size = av_samples_get_buffer_size(<span class="hljs-literal">NULL</span>, <font></font>
					       is-&gt;audio_ctx-&gt;channels,<font></font>
					       is-&gt;audio_frame.nb_samples,<font></font>
					       is-&gt;audio_ctx-&gt;sample_fmt,<font></font>
					       <span class="hljs-number">1</span>);<font></font>
	assert(data_size &lt;= buf_size);<font></font>
	<span class="hljs-built_in">memcpy</span>(audio_buf, is-&gt;audio_frame.data[<span class="hljs-number">0</span>], data_size);<font></font>
      }<font></font>
      is-&gt;audio_pkt_data += len1;<font></font>
      is-&gt;audio_pkt_size -= len1;<font></font>
      <span class="hljs-keyword">if</span>(data_size &lt;= <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* No data yet, get more frames */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      }<font></font>
      pts = is-&gt;audio_clock;<font></font>
      *pts_ptr = pts;<font></font>
      n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
      is-&gt;audio_clock += (<span class="hljs-keyword">double</span>)data_size /<font></font>
	(<span class="hljs-keyword">double</span>)(n * is-&gt;audio_ctx-&gt;sample_rate);
      <span class="hljs-comment">/* We have data, return it and come back for more later */</span>
      <span class="hljs-keyword">return</span> data_size;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data)<font></font>
      av_free_packet(pkt);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">/* next packet */</span>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;audioq, pkt, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    is-&gt;audio_pkt_data = pkt-&gt;data;<font></font>
    is-&gt;audio_pkt_size = pkt-&gt;size;<font></font>
    <span class="hljs-comment">/* if update, update the audio clock w/pts */</span>
    <span class="hljs-keyword">if</span>(pkt-&gt;pts != AV_NOPTS_VALUE) {<font></font>
      is-&gt;audio_clock = av_q2d(is-&gt;audio_st-&gt;time_base)*pkt-&gt;pts;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">audio_callback</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata, Uint8 *stream, <span class="hljs-keyword">int</span> len)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  <span class="hljs-keyword">int</span> len1, audio_size;
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  <span class="hljs-keyword">while</span>(len &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span>(is-&gt;audio_buf_index &gt;= is-&gt;audio_buf_size) {
      <span class="hljs-comment">/* We have already sent all our data; get more */</span>
      audio_size = audio_decode_frame(is, is-&gt;audio_buf, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_buf), &amp;pts);
      <span class="hljs-keyword">if</span>(audio_size &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* If error, output silence */</span>
	is-&gt;audio_buf_size = <span class="hljs-number">1024</span>;
	<span class="hljs-built_in">memset</span>(is-&gt;audio_buf, <span class="hljs-number">0</span>, is-&gt;audio_buf_size);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	audio_size = synchronize_audio(is, (<span class="hljs-keyword">int16_t</span> *)is-&gt;audio_buf,<font></font>
				       audio_size, pts);<font></font>
	is-&gt;audio_buf_size = audio_size;<font></font>
      }<font></font>
      is-&gt;audio_buf_index = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    len1 = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
    <span class="hljs-keyword">if</span>(len1 &gt; len)<font></font>
      len1 = len;<font></font>
    <span class="hljs-built_in">memcpy</span>(stream, (<span class="hljs-keyword">uint8_t</span> *)is-&gt;audio_buf + is-&gt;audio_buf_index, len1);<font></font>
    len -= len1;<font></font>
    stream += len1;<font></font>
    is-&gt;audio_buf_index += len1;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> Uint32 <span class="hljs-title">sdl_refresh_timer_cb</span><span class="hljs-params">(Uint32 interval, <span class="hljs-keyword">void</span> *opaque)</span> </span>{<font></font>
  SDL_Event event;<font></font>
  event.type = FF_REFRESH_EVENT;<font></font>
  event.user.data1 = opaque;<font></font>
  SDL_PushEvent(&amp;event);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* 0 means stop timer */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* schedule a video refresh in 'delay' ms */</span>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">schedule_refresh</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> delay)</span> </span>{<font></font>
  SDL_AddTimer(delay, sdl_refresh_timer_cb, is);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_display</span><span class="hljs-params">(VideoState *is)</span> </span>{<font></font>
<font></font>
  SDL_Rect rect;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">float</span> aspect_ratio;
  <span class="hljs-keyword">int</span> w, h, x, y;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-keyword">if</span>(is-&gt;video_ctx-&gt;sample_aspect_ratio.num == <span class="hljs-number">0</span>) {<font></font>
      aspect_ratio = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      aspect_ratio = av_q2d(is-&gt;video_ctx-&gt;sample_aspect_ratio) *<font></font>
	is-&gt;video_ctx-&gt;width / is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(aspect_ratio &lt;= <span class="hljs-number">0.0</span>) {<font></font>
      aspect_ratio = (<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;width /<font></font>
	(<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    h = screen-&gt;h;<font></font>
    w = ((<span class="hljs-keyword">int</span>)rint(h * aspect_ratio)) &amp; <span class="hljs-number">-3</span>;
    <span class="hljs-keyword">if</span>(w &gt; screen-&gt;w) {<font></font>
      w = screen-&gt;w;<font></font>
      h = ((<span class="hljs-keyword">int</span>)rint(w / aspect_ratio)) &amp; <span class="hljs-number">-3</span>;<font></font>
    }<font></font>
    x = (screen-&gt;w - w) / <span class="hljs-number">2</span>;<font></font>
    y = (screen-&gt;h - h) / <span class="hljs-number">2</span>;<font></font>
    <font></font>
    rect.x = x;<font></font>
    rect.y = y;<font></font>
    rect.w = w;<font></font>
    rect.h = h;<font></font>
    SDL_LockMutex(screen_mutex);<font></font>
    SDL_DisplayYUVOverlay(vp-&gt;bmp, &amp;rect);<font></font>
    SDL_UnlockMutex(screen_mutex);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_refresh_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">double</span> actual_delay, delay, sync_threshold, ref_clock, diff;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;video_st) {
    <span class="hljs-keyword">if</span>(is-&gt;pictq_size == <span class="hljs-number">0</span>) {<font></font>
      schedule_refresh(is, <span class="hljs-number">1</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
      <font></font>
      is-&gt;video_current_pts = vp-&gt;pts;<font></font>
      is-&gt;video_current_pts_time = av_gettime();<font></font>
      delay = vp-&gt;pts - is-&gt;frame_last_pts; <span class="hljs-comment">/* the pts from last time */</span>
      <span class="hljs-keyword">if</span>(delay &lt;= <span class="hljs-number">0</span> || delay &gt;= <span class="hljs-number">1.0</span>) {
	<span class="hljs-comment">/* if incorrect delay, use previous one */</span><font></font>
	delay = is-&gt;frame_last_delay;<font></font>
      }<font></font>
      <span class="hljs-comment">/* save for next time */</span><font></font>
      is-&gt;frame_last_delay = delay;<font></font>
      is-&gt;frame_last_pts = vp-&gt;pts;<font></font>
<font></font>
<font></font>
<font></font>
      <span class="hljs-comment">/* update delay to sync to audio if not master source */</span>
      <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_VIDEO_MASTER) {<font></font>
	ref_clock = get_master_clock(is);<font></font>
	diff = vp-&gt;pts - ref_clock;<font></font>
	<font></font>
	<span class="hljs-comment">/* Skip or repeat the frame. Take delay into account
	   FFPlay still doesn't "know if this is the best guess." */</span><font></font>
	sync_threshold = (delay &gt; AV_SYNC_THRESHOLD) ? delay : AV_SYNC_THRESHOLD;<font></font>
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(diff) &lt; AV_NOSYNC_THRESHOLD) {
	  <span class="hljs-keyword">if</span>(diff &lt;= -sync_threshold) {<font></font>
	    delay = <span class="hljs-number">0</span>;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(diff &gt;= sync_threshold) {<font></font>
	    delay = <span class="hljs-number">2</span> * delay;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
      is-&gt;frame_timer += delay;<font></font>
      <span class="hljs-comment">/* computer the REAL delay */</span>
      actual_delay = is-&gt;frame_timer - (av_gettime() / <span class="hljs-number">1000000.0</span>);
      <span class="hljs-keyword">if</span>(actual_delay &lt; <span class="hljs-number">0.010</span>) {
	<span class="hljs-comment">/* Really it should skip the picture instead */</span>
	actual_delay = <span class="hljs-number">0.010</span>;<font></font>
      }<font></font>
      schedule_refresh(is, (<span class="hljs-keyword">int</span>)(actual_delay * <span class="hljs-number">1000</span> + <span class="hljs-number">0.5</span>));<font></font>
      <font></font>
      <span class="hljs-comment">/* show the picture! */</span><font></font>
      video_display(is);<font></font>
      <font></font>
      <span class="hljs-comment">/* update queue for next picture! */</span>
      <span class="hljs-keyword">if</span>(++is-&gt;pictq_rindex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
	is-&gt;pictq_rindex = <span class="hljs-number">0</span>;<font></font>
      }<font></font>
      SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
      is-&gt;pictq_size--;<font></font>
      SDL_CondSignal(is-&gt;pictq_cond);<font></font>
      SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
    }<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    schedule_refresh(is, <span class="hljs-number">100</span>);<font></font>
  }<font></font>
}<font></font>
      <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">alloc_picture</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-comment">// we already have one make another, bigger/smaller</span><font></font>
    SDL_FreeYUVOverlay(vp-&gt;bmp);<font></font>
  }<font></font>
  <span class="hljs-comment">// Allocate a place to put our YUV image on that screen</span><font></font>
  SDL_LockMutex(screen_mutex);<font></font>
  vp-&gt;bmp = SDL_CreateYUVOverlay(is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height,<font></font>
				 SDL_YV12_OVERLAY,<font></font>
				 screen);<font></font>
  SDL_UnlockMutex(screen_mutex);<font></font>
<font></font>
  vp-&gt;width = is-&gt;video_ctx-&gt;width;<font></font>
  vp-&gt;height = is-&gt;video_ctx-&gt;height;<font></font>
  vp-&gt;allocated = <span class="hljs-number">1</span>;<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">queue_picture</span><span class="hljs-params">(VideoState *is, AVFrame *pFrame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">int</span> dst_pix_fmt;<font></font>
  AVPicture pict;<font></font>
<font></font>
  <span class="hljs-comment">/* wait until we have space for a new pic */</span><font></font>
  SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
  <span class="hljs-keyword">while</span>(is-&gt;pictq_size &gt;= VIDEO_PICTURE_QUEUE_SIZE &amp;&amp;<font></font>
	!is-&gt;quit) {<font></font>
    SDL_CondWait(is-&gt;pictq_cond, is-&gt;pictq_mutex);<font></font>
  }<font></font>
  SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;quit)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
<font></font>
  <span class="hljs-comment">// windex is set to 0 initially</span><font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
<font></font>
  <span class="hljs-comment">/* allocate or resize the buffer! */</span>
  <span class="hljs-keyword">if</span>(!vp-&gt;bmp ||<font></font>
     vp-&gt;width != is-&gt;video_ctx-&gt;width ||<font></font>
     vp-&gt;height != is-&gt;video_ctx-&gt;height) {<font></font>
    SDL_Event event;<font></font>
<font></font>
    vp-&gt;allocated = <span class="hljs-number">0</span>;<font></font>
    alloc_picture(is);<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">/* We have a place to put our picture on the queue */</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {<font></font>
<font></font>
    SDL_LockYUVOverlay(vp-&gt;bmp);<font></font>
    vp-&gt;pts = pts;<font></font>
    <font></font>
    dst_pix_fmt = PIX_FMT_YUV420P;<font></font>
    <span class="hljs-comment">/* point pict at the queue */</span><font></font>
<font></font>
    pict.data[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">0</span>];<font></font>
    pict.data[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">2</span>];<font></font>
    pict.data[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    pict.linesize[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">0</span>];<font></font>
    pict.linesize[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">2</span>];<font></font>
    pict.linesize[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    <span class="hljs-comment">// Convert the image into YUV format that SDL uses</span>
    sws_scale(is-&gt;sws_ctx, (<span class="hljs-keyword">uint8_t</span> <span class="hljs-keyword">const</span> * <span class="hljs-keyword">const</span> *)pFrame-&gt;data,<font></font>
	      pFrame-&gt;linesize, <span class="hljs-number">0</span>, is-&gt;video_ctx-&gt;height,<font></font>
	      pict.data, pict.linesize);<font></font>
    <font></font>
    SDL_UnlockYUVOverlay(vp-&gt;bmp);<font></font>
    <span class="hljs-comment">/* now we inform our display thread that we have a pic ready */</span>
    <span class="hljs-keyword">if</span>(++is-&gt;pictq_windex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
      is-&gt;pictq_windex = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
    is-&gt;pictq_size++;<font></font>
    SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">synchronize_video</span><span class="hljs-params">(VideoState *is, AVFrame *src_frame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">double</span> frame_delay;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(pts != <span class="hljs-number">0</span>) {
    <span class="hljs-comment">/* if we have pts, set video clock to it */</span><font></font>
    is-&gt;video_clock = pts;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">/* if we aren't given a pts, set it to the clock */</span><font></font>
    pts = is-&gt;video_clock;<font></font>
  }<font></font>
  <span class="hljs-comment">/* update the video clock */</span><font></font>
  frame_delay = av_q2d(is-&gt;video_ctx-&gt;time_base);<font></font>
  <span class="hljs-comment">/* if we are repeating a frame, adjust clock accordingly */</span>
  frame_delay += src_frame-&gt;repeat_pict * (frame_delay * <span class="hljs-number">0.5</span>);<font></font>
  is-&gt;video_clock += frame_delay;<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">video_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
  <span class="hljs-keyword">int</span> frameFinished;<font></font>
  AVFrame *pFrame;<font></font>
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  pFrame = av_frame_alloc();<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    pts = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-comment">// Decode video frame</span><font></font>
    avcodec_decode_video2(is-&gt;video_ctx, pFrame, &amp;frameFinished, packet);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>((pts = av_frame_get_best_effort_timestamp(pFrame)) == AV_NOPTS_VALUE) {<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      pts = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    pts *= av_q2d(is-&gt;video_st-&gt;time_base);<font></font>
<font></font>
    <span class="hljs-comment">// Did we get a video frame?</span>
    <span class="hljs-keyword">if</span>(frameFinished) {<font></font>
      pts = synchronize_video(is, pFrame, pts);<font></font>
      <span class="hljs-keyword">if</span>(queue_picture(is, pFrame, pts) &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    av_free_packet(packet);<font></font>
  }<font></font>
  av_frame_free(&amp;pFrame);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">stream_component_open</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> stream_index)</span> </span>{<font></font>
<font></font>
  AVFormatContext *pFormatCtx = is-&gt;pFormatCtx;<font></font>
  AVCodecContext *codecCtx = <span class="hljs-literal">NULL</span>;<font></font>
  AVCodec *codec = <span class="hljs-literal">NULL</span>;<font></font>
  SDL_AudioSpec wanted_spec, spec;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(stream_index &lt; <span class="hljs-number">0</span> || stream_index &gt;= pFormatCtx-&gt;nb_streams) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codec = avcodec_find_decoder(pFormatCtx-&gt;streams[stream_index]-&gt;codec-&gt;codec_id);<font></font>
  <span class="hljs-keyword">if</span>(!codec) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codecCtx = avcodec_alloc_context3(codec);<font></font>
  <span class="hljs-keyword">if</span>(avcodec_copy_context(codecCtx, pFormatCtx-&gt;streams[stream_index]-&gt;codec) != <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Couldn't copy codec context"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Error copying codec context</span><font></font>
  }<font></font>
<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(codecCtx-&gt;codec_type == AVMEDIA_TYPE_AUDIO) {
    <span class="hljs-comment">// Set audio settings from codec info</span><font></font>
    wanted_spec.freq = codecCtx-&gt;sample_rate;<font></font>
    wanted_spec.format = AUDIO_S16SYS;<font></font>
    wanted_spec.channels = codecCtx-&gt;channels;<font></font>
    wanted_spec.silence = <span class="hljs-number">0</span>;<font></font>
    wanted_spec.samples = SDL_AUDIO_BUFFER_SIZE;<font></font>
    wanted_spec.callback = audio_callback;<font></font>
    wanted_spec.userdata = is;<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(SDL_OpenAudio(&amp;wanted_spec, &amp;spec) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL_OpenAudio: %s\n"</span>, SDL_GetError());
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    is-&gt;audio_hw_buf_size = spec.size;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(avcodec_open2(codecCtx, codec, <span class="hljs-literal">NULL</span>) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">switch</span>(codecCtx-&gt;codec_type) {
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_AUDIO:<font></font>
    is-&gt;audioStream = stream_index;<font></font>
    is-&gt;audio_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;audio_ctx = codecCtx;<font></font>
    is-&gt;audio_buf_size = <span class="hljs-number">0</span>;<font></font>
    is-&gt;audio_buf_index = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">memset</span>(&amp;is-&gt;audio_pkt, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_pkt));<font></font>
    packet_queue_init(&amp;is-&gt;audioq);<font></font>
    SDL_PauseAudio(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_VIDEO:<font></font>
    is-&gt;videoStream = stream_index;<font></font>
    is-&gt;video_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;video_ctx = codecCtx;<font></font>
<font></font>
    is-&gt;frame_timer = (<span class="hljs-keyword">double</span>)av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
    is-&gt;frame_last_delay = <span class="hljs-number">40e-3</span>;<font></font>
    is-&gt;video_current_pts_time = av_gettime();<font></font>
<font></font>
    packet_queue_init(&amp;is-&gt;videoq);<font></font>
    is-&gt;video_tid = SDL_CreateThread(video_thread, is);<font></font>
    is-&gt;sws_ctx = sws_getContext(is-&gt;video_ctx-&gt;width, is-&gt;video_ctx-&gt;height,<font></font>
				 is-&gt;video_ctx-&gt;pix_fmt, is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height, PIX_FMT_YUV420P,<font></font>
				 SWS_BILINEAR, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span><font></font>
				 );<font></font>
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">default</span>:
    <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">decode_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
<font></font>
  <span class="hljs-keyword">int</span> video_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> audio_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  is-&gt;videoStream=<span class="hljs-number">-1</span>;<font></font>
  is-&gt;audioStream=<span class="hljs-number">-1</span>;<font></font>
<font></font>
  global_video_state = is;<font></font>
<font></font>
  <span class="hljs-comment">// Open video file</span>
  <span class="hljs-keyword">if</span>(avformat_open_input(&amp;pFormatCtx, is-&gt;filename, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>)!=<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't open file</span><font></font>
<font></font>
  is-&gt;pFormatCtx = pFormatCtx;<font></font>
  <font></font>
  <span class="hljs-comment">// Retrieve stream information</span>
  <span class="hljs-keyword">if</span>(avformat_find_stream_info(pFormatCtx, <span class="hljs-literal">NULL</span>)&lt;<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't find stream information</span><font></font>
  <font></font>
  <span class="hljs-comment">// Dump information about file onto standard error</span>
  av_dump_format(pFormatCtx, <span class="hljs-number">0</span>, is-&gt;filename, <span class="hljs-number">0</span>);<font></font>
  <font></font>
  <span class="hljs-comment">// Find the first video stream</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;pFormatCtx-&gt;nb_streams; i++) {
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_VIDEO &amp;&amp;<font></font>
       video_index &lt; <span class="hljs-number">0</span>) {<font></font>
      video_index=i;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO &amp;&amp;<font></font>
       audio_index &lt; <span class="hljs-number">0</span>) {<font></font>
      audio_index=i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(audio_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, audio_index);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(video_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, video_index);<font></font>
  }   <font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;videoStream &lt; <span class="hljs-number">0</span> || is-&gt;audioStream &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: could not open codecs\n"</span>, is-&gt;filename);
    <span class="hljs-keyword">goto</span> fail;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// main decode loop</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">// seek stuff goes here</span>
    <span class="hljs-keyword">if</span>(is-&gt;audioq.size &gt; MAX_AUDIOQ_SIZE ||<font></font>
       is-&gt;videoq.size &gt; MAX_VIDEOQ_SIZE) {<font></font>
      SDL_Delay(<span class="hljs-number">10</span>);
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(av_read_frame(is-&gt;pFormatCtx, packet) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span>(is-&gt;pFormatCtx-&gt;pb-&gt;error == <span class="hljs-number">0</span>) {<font></font>
	SDL_Delay(<span class="hljs-number">100</span>); <span class="hljs-comment">/* no error; wait for user input */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      } <span class="hljs-keyword">else</span> {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-comment">// Is this a packet from the video stream?</span>
    <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;videoStream) {<font></font>
      packet_queue_put(&amp;is-&gt;videoq, packet);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;audioStream) {<font></font>
      packet_queue_put(&amp;is-&gt;audioq, packet);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      av_free_packet(packet);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-comment">/* all done - wait for it */</span>
  <span class="hljs-keyword">while</span>(!is-&gt;quit) {<font></font>
    SDL_Delay(<span class="hljs-number">100</span>);<font></font>
  }<font></font>
<font></font>
 fail:<font></font>
  <span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>){<font></font>
    SDL_Event event;<font></font>
    event.type = FF_QUIT_EVENT;<font></font>
    event.user.data1 = is;<font></font>
    SDL_PushEvent(&amp;event);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> </span>{<font></font>
<font></font>
  SDL_Event       event;<font></font>
<font></font>
  VideoState      *is;<font></font>
<font></font>
  is = av_mallocz(<span class="hljs-keyword">sizeof</span>(VideoState));<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(argc &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Usage: test &lt;file&gt;\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
  <span class="hljs-comment">// Register all formats and codecs</span><font></font>
  av_register_all();<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER)) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Could not initialize SDL - %s\n"</span>, SDL_GetError());
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// Make a screen to put our video</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> __DARWIN__</span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
  <span class="hljs-keyword">if</span>(!screen) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL: could not set video mode - exiting\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  screen_mutex = SDL_CreateMutex();<font></font>
<font></font>
  av_strlcpy(is-&gt;filename, argv[<span class="hljs-number">1</span>], <span class="hljs-keyword">sizeof</span>(is-&gt;filename));<font></font>
<font></font>
  is-&gt;pictq_mutex = SDL_CreateMutex();<font></font>
  is-&gt;pictq_cond = SDL_CreateCond();<font></font>
<font></font>
  schedule_refresh(is, <span class="hljs-number">40</span>);<font></font>
<font></font>
  is-&gt;av_sync_type = DEFAULT_AV_SYNC_TYPE;<font></font>
  is-&gt;parse_tid = SDL_CreateThread(decode_thread, is);<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;parse_tid) {<font></font>
    av_free(is);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">for</span>(;;) {<font></font>
<font></font>
    SDL_WaitEvent(&amp;event);<font></font>
    <span class="hljs-keyword">switch</span>(event.type) {
    <span class="hljs-keyword">case</span> FF_QUIT_EVENT:
    <span class="hljs-keyword">case</span> SDL_QUIT:<font></font>
      is-&gt;quit = <span class="hljs-number">1</span>;<font></font>
      SDL_Quit();<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> FF_REFRESH_EVENT:<font></font>
      video_refresh_timer(event.user.data1);<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre></div>
                    </div><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ูุงุนุจ ูุงุฆู ุฃูุซุฑ ุฃู ุฃูู ููููู ุญุชู ูุดุงูุฏุฉ ูููู ุ ุฏุนูุง ุงูุขู ููุจู ุงุญุชูุงุฌุงุชูุง. </font><font style="vertical-align: inherit;">ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ ุ ุชุทุฑููุง ููููุงู ุฅูู ุงููุฒุงููุฉ ุ ุฃู ูุฒุงููุฉ ุงูุตูุช ูุน ุงูููุฏูู ุ ุจูุฐุง ุงูุชุฑุชูุจ ุ ูููุณ ุงูุนูุณ. </font><font style="vertical-align: inherit;">ุณูุฌุนู ูุฐุง ููุณ ุงูุชุฎุทูุท ููุง ูู ุงูุญุงู ูุน ุงูููุฏูู: ูู ุจุนูู ุณุงุนุฉ ููุฏูู ุฏุงุฎููุฉ ูุชุชุจุน ูุฏู ุฏูู ุงูููุฏูู ููุฒุงููุฉ ุงูุตูุช ูุนู. </font><font style="vertical-align: inherit;">ุณูููู ูุงุญููุง ุจุชุนููู ุงููุฒูุฏ - ูููู ุจูุฒุงููุฉ ุงูุตูุช ูุงูููุฏูู ูุน ุณุงุนุฉ ุฎุงุฑุฌูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ ุณุงุนุฉ ุงูููุฏูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑูุฏ ุงูุขู ุฅูุดุงุก ุณุงุนุฉ ููุฏูู ูุดุงุจูุฉ ููุณุงุนุฉ ุงูุตูุชูุฉ ุงูุชู ูุงูุช ูุฏููุง ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ: ูููุฉ ุฏุงุฎููุฉ ุชูุฑุฌุน ุงูุฅุฒุงุญุฉ ุงูุญุงููุฉ ููููุฏูู ููุฏ ุงูุชุดุบูู ุญุงูููุง. ูุฏ ุชุนุชูุฏ ุฃูู ุณูููู ุจุณูุทูุง ูุซู ุชุญุฏูุซ ุงููุคูุช ูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญุงูู </font><font style="vertical-align: inherit;">ููุฅุทุงุฑ ุงูุฃุฎูุฑ ุงููุนุฑูุถ. ููุน ุฐูู ุ ูุง ุชูุณ ุฃู ุงูููุช ุจูู ุฅุทุงุฑุงุช ุงูููุฏูู ูุฏ ูููู ุทููููุง ุฌุฏูุง ุฅุฐุง ุงูุฎูุถูุง ุฅูู ูุณุชูู ุงููููู ุซุงููุฉ. ูุฐูู ุ ูุฅู ุงูุญู ูู ุชุชุจุน ูููุฉ ุฃุฎุฑู ุ ููู ุงูููุช ุงูุฐู ูุชู ููู ุชุนููู ุณุงุนุฉ ุงูููุฏูู ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTS ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุทุงุฑ ุงูุฃุฎูุฑ. ูุจุงูุชุงูู ุ ูุฅู ุงููููุฉ ุงูุญุงููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุนุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฏูู ุณุชููู </font><b><font style="vertical-align: inherit;">PTS_of_last_frame</font></b><font style="vertical-align: inherit;"> + ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_elapsed_since_PTS_value_was_set</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">ูุฐุง ุงูุญู ูุดุงุจู ุฌุฏูุง ููุง ูุนููุงู ูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_audio_clock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุณูุถุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุนู video_current_pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t video_current_pts_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูููููุง ุงููุงูู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุชู ุชุญุฏูุซ ุงูุณุงุนุฉ ูู ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video_refresh_timer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_refresh_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">/* ... */</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;video_st) {
    <span class="hljs-keyword">if</span>(is-&gt;pictq_size == <span class="hljs-number">0</span>) {<font></font>
      schedule_refresh(is, <span class="hljs-number">1</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
<font></font>
      is-&gt;video_current_pts = vp-&gt;pts;<font></font>
      is-&gt;video_current_pts_time = av_gettime();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชูุณู ุชููุฆุชู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_component_open</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">is-&gt;video_current_pts_time = av_gettime();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุขู ูู ูุง ูุญุชุงุฌู ูู ุทุฑููุฉ ููุญุตูู ุนูู ุงููุนูููุงุช:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_video_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> delta;<font></font>
<font></font>
  delta = (av_gettime() - is-&gt;video_current_pts_time) / <span class="hljs-number">1000000.0</span>;
  <span class="hljs-keyword">return</span> is-&gt;video_current_pts + delta;<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฎูุต ุงูุณุงุนุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ููุงุฐุง ุชุฌุจุฑ ููุณู ุนูู ุงุณุชุฎุฏุงู ุณุงุนุฉ ููุฏููุ </font><font style="vertical-align: inherit;">ููููู ุงูุฐูุงุจ ุฅูู ุฃุจุนุฏ ูู ุฐูู ูุชุบููุฑ ุฑูุฒ ูุฒุงููุฉ ุงูููุฏูู ุงูุฎุงุต ุจูุง ุจุญูุซ ูุง ูุญุงูู ุงูุตูุช ูุงูููุฏูู ูุฒุงููุฉ ุจุนุถููุง ุงูุจุนุถ. </font><font style="vertical-align: inherit;">ุชุฎูู ูุง ุณุชููู ุงูููุถู ุฅุฐุง ุญุงูููุง ุงูููุงู ุจุฐูู ุจุงุณุชุฎุฏุงู ุฎูุงุฑ ุณุทุฑ ุงูุฃูุงูุฑ ุ ููุง ูู ุงูุญุงู ูู FFplay. </font><font style="vertical-align: inherit;">ูุฐุง ุ ุฏุนูุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฎูุต ูู ุฐูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">ุณููุดุฆ</font></b><font style="vertical-align: inherit;"> ูุธููุฉ ุบูุงู ุฌุฏูุฏุฉ ุ </font><b><font style="vertical-align: inherit;">get_master_clock</font></b><font style="vertical-align: inherit;"> ุ ูุงูุชู ุชุชุญูู ูู ุงููุชุบูุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_sync_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุซู ุชุณุชุฏุนู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_audio_clock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_video_clock ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ุฃู ุณุงุนุฉ ุฃุฎุฑู ูููู ุงุณุชุฎุฏุงููุง. </font><font style="vertical-align: inherit;">ูููููุง ุญุชู ุงุณุชุฎุฏุงู ุณุงุนุฉ ููุจููุชุฑ ุ ูุงูุชู ูุณูููุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_external_clock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> {<font></font>
  AV_SYNC_AUDIO_MASTER,<font></font>
  AV_SYNC_VIDEO_MASTER,<font></font>
  AV_SYNC_EXTERNAL_MASTER,<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_AV_SYNC_TYPE AV_SYNC_VIDEO_MASTER</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_master_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_VIDEO_MASTER) {
    <span class="hljs-keyword">return</span> get_video_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">return</span> get_audio_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> get_external_clock(is);<font></font>
  }<font></font>
}<font></font>
main() {<font></font>
...<font></font>
  is-&gt;av_sync_type = DEFAULT_AV_SYNC_TYPE;<font></font>
...<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุงููุฉ ุงูุตูุช</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุงูุฌุฒุก ุงูุฃุตุนุจ: ูุฒุงููุฉ ุงูุตูุช ูุน ุณุงุนุฉ ุงูููุฏูู. ุงุณุชุฑุงุชูุฌูุชูุง ูู ููุงุณ ููุงู ุงูุตูุช ุ ูููุงุฑูุชู ุจุณุงุนุฉ ุงูููุฏูู ุ ุซู ูุนุฑูุฉ ุนุฏุฏ ุงูุนููุงุช ุงูุชู ูุญุชุงุฌ ุฅูู ุถุจุทูุง ุ ุฃู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุงูุฅุณุฑุงุน ุจุฅุณูุงุท ุงูุนููุงุช ุฃู ุฅุจุทุงุฆูุง ุนู ุทุฑูู ุงูุฅุถุงูุฉุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชุดุบูู ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syncize_audio ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฑุฉ ูุนุงูุฌ ูููุง ูู ูุฌููุนุฉ ูู ุงูุนููุงุช ุงูุตูุชูุฉ ุงูุชู ูุญุตู ุนูููุง ูู ุฃุฌู ุชูููู ูุฐู ุงููุฌููุนุฉ ุฃู ุฒูุงุฏุชูุง ุจุดูู ุตุญูุญ. ููุน ุฐูู ุ ูุง ูุฑูุฏ ุงููุฒุงููุฉ ุทูุงู ุงูููุช ุ ูุฃู ูุนุงูุฌุฉ ุงูุตูุช ุชุญุฏุซ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุฃูุซุฑ ูู ูุนุงูุฌุฉ ุญุฒู ุงูููุฏูู. ูุฐุง ุ ุณูููู ุจุชุนููู ุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุงูููุงููุงุช ุงููุชุชุงููุฉ ููุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syncize_audio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ุชุนุชุจุฑ ุบูุฑ ูุชุฒุงููุฉ ูุจู ุฃู ูุชุนุจ ุฃููุณูุง ููููุงู ุจุฃู ุดูุก. ุจุงูุทุจุน ุ ูุซู ุขุฎุฑ ูุฑุฉ ุ ูุนูู "ุนุฏู ุงูุชุฒุงูู" ุฃู ุงูุณุงุนุฉ ุงูุตูุชูุฉ ูุณุงุนุฉ ุงูููุฏูู ุชุฎุชููุงู ุจููุฏุงุฑ ุฃูุจุฑ ูู ุญุฏ ุงูุชุฒุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุณูุณุชุฎุฏู ูุนุงูู ูุณุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุขู ุ ูููุชุฑุถ ุฃููุง ุญุตููุง ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุนุงุช ูู ุงูุนููุงุช ุงูุตูุชูุฉ ุบูุฑ ูุชุฒุงููุฉ. ูููู ุฃู ูุฎุชูู ุฃูุถูุง ุนุฏุฏ ุงูุนููุงุช ุงูุชู ูุง ูููู ุจูุฒุงููุชูุง ุจุดูู ูุจูุฑ ุ ูุฐูู ูุฃุฎุฐ ูุชูุณุท โโุงููููุฉ ูููุฏุงุฑ ุนุฏู ูุฒุงููุฉ ูู ูููุง. ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู ุชูุถุญ ุงูููุงููุฉ ุงูุฃููู ุฃููุง ุบูุฑ ูุชุฒุงูููู ููุฏุฉ 40 ูููู ุซุงููุฉ ุ ุซู ุงูุชุงููุฉ ููุฏุฉ 50 ูููู ุซุงููุฉ ููุง ุฅูู ุฐูู. ููููุง ูู ูุฃุฎุฐ ูุณููุฉ ุจุณูุทุฉ ุ ูุฃู ุฃุญุฏุซ ุงูููู ุฃูู ูู ุชูู ุงูุชู ุชุณุจููุง. ูุฐุง ุ ุณูุณุชุฎุฏู ูุนุงูู ูุณุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุฎุต ุงูุงุฎุชูุงูุงุช ุนูู ุงููุญู ุงูุชุงูู: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_sum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new_diff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_sum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุนูุฏูุง ูููู ูุณุชุนุฏูู ูุฅูุฌุงุฏ ูุชูุณุท โโุงููุฑู ุ ูุฅููุง ุจุจุณุงุทุฉ ูุญุณุจ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avg_diff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> =</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_sum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * (1 - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูุฌุฑู ุจุญู ุงูุฌุญูู ููุงุ </font><font style="vertical-align: inherit;">ุงููุนุงุฏูุฉ ุชุจุฏู ููุฃููุง ููุน ูู ุงูุณุญุฑ. </font><font style="vertical-align: inherit;">ุญุณููุง ุ ูุฐุง ูู ุงูุฃุณุงุณ ูุชูุณุท โโูุฑุฌุญ ุจุงุณุชุฎุฏุงู ุณูุณูุฉ ููุฏุณูุฉ ูุฃูุฒุงู. </font><font style="vertical-align: inherit;">ูุง ุฃุนุฑู ูุง ุฅุฐุง ูุงู ููุงู ุงุณู ููุฐุง (ุญุชู ุฑุงุฌุนุช ุนูู ููููุจูุฏูุง!) ุ ูููู ููุฒูุฏ ูู ุงููุนูููุงุช ุ ุฅููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุฑุญ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุฃู ููุง: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">weightedmean.txt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅููู ูุง ุชุจุฏู ุนููู ูุธููุชูุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* Add or subtract samples to get a better sync, return new
   audio buffer size */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">synchronize_audio</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">short</span> *samples,
		      <span class="hljs-keyword">int</span> samples_size, <span class="hljs-keyword">double</span> pts)</span> </span>{
  <span class="hljs-keyword">int</span> n;
  <span class="hljs-keyword">double</span> ref_clock;<font></font>
  <font></font>
  n = <span class="hljs-number">2</span> * is-&gt;audio_st-&gt;codec-&gt;channels;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">double</span> diff, avg_diff;
    <span class="hljs-keyword">int</span> wanted_size, min_size, max_size, nb_samples;<font></font>
    <font></font>
    ref_clock = get_master_clock(is);<font></font>
    diff = get_audio_clock(is) - ref_clock;<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(diff &lt; AV_NOSYNC_THRESHOLD) {
      <span class="hljs-comment">// accumulate the diffs</span><font></font>
      is-&gt;audio_diff_cum = diff + is-&gt;audio_diff_avg_coef<font></font>
	* is-&gt;audio_diff_cum;<font></font>
      <span class="hljs-keyword">if</span>(is-&gt;audio_diff_avg_count &lt; AUDIO_DIFF_AVG_NB) {<font></font>
	is-&gt;audio_diff_avg_count++;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	avg_diff = is-&gt;audio_diff_cum * (<span class="hljs-number">1.0</span> - is-&gt;audio_diff_avg_coef);<font></font>
<font></font>
       <span class="hljs-comment">/* Shrinking/expanding buffer code.... */</span><font></font>
<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* difference is TOO big; reset diff stuff */</span>
      is-&gt;audio_diff_avg_count = <span class="hljs-number">0</span>;<font></font>
      is-&gt;audio_diff_cum = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> samples_size;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ูู ุดูุก ุนูู ูุง ูุฑุงู ูุนูุง. </font><font style="vertical-align: inherit;">ูุญู ูุนุฑู ุชูุฑูุจูุง ููุฏุงุฑ ุงูุตูุช ุงูุฐู ูุง ูุชูุงูู ูุน ุงูููุฏูู ุฃู ูุน ูุง ูุณุชุฎุฏูู ููุดุงูุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุ ุฏุนููุง ุงูุขู ูุญุณุจ ุนุฏุฏ ุงูุนููุงุช ุงูุชู ูุญุชุงุฌ ุฅูู ุฅุถุงูุชูุง ุฃู ุชุฌุงูููุง ุจูุถุน ูุฐุง ุงูููุฏ ูู ูุณู "ุชูููู / ุชูุณูุน ููุฏ ุงููุฎุฒู ุงููุคูุช":</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(avg_diff) &gt;= is-&gt;audio_diff_threshold) {<font></font>
  wanted_size = samples_size + <font></font>
  ((<span class="hljs-keyword">int</span>)(diff * is-&gt;audio_st-&gt;codec-&gt;sample_rate) * n);<font></font>
  min_size = samples_size * ((<span class="hljs-number">100</span> - SAMPLE_CORRECTION_PERCENT_MAX)<font></font>
                             / <span class="hljs-number">100</span>);<font></font>
  max_size = samples_size * ((<span class="hljs-number">100</span> + SAMPLE_CORRECTION_PERCENT_MAX) <font></font>
                             / <span class="hljs-number">100</span>);
  <span class="hljs-keyword">if</span>(wanted_size &lt; min_size) {<font></font>
    wanted_size = min_size;<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wanted_size &gt; max_size) {<font></font>
    wanted_size = max_size;<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฐูุฑ ุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">length_length</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * # </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุงุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * 2) ูู ุนุฏุฏ ุงูุนููุงุช ูู </font><font style="vertical-align: inherit;">ุซูุงูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุตูุชู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ุนุฏุฏ ุงูุนููุงุช ุงูุชู ูุฑูุฏูุง ูุณุงูููุง ูุนุฏุฏ ุงูุนููุงุช ุงูุชู ูุฏููุง ุจุงููุนู ุ ุจุงูุฅุถุงูุฉ ุฃู ูุงูุต ุนุฏุฏ ุงูุนููุงุช ุงูุชู ุชุชูุงูู ูุน ููุฏุงุฑ ุงูููุช ุงูุฐู ุชู ููู ุชุดุบูู ุงูุตูุช. </font><font style="vertical-align: inherit;">ุณูุญุฏุฏ ุฃูุถูุง ุญุฏูุง ููุฏู ุญุฌู ุงูุชุตุญูุญ ุฃู ุตุบุฑู ุ ูุฃูู ุฅุฐุง ูููุง ุจุชุบููุฑ ุงููุฎุฒู ุงููุคูุช ูุฏููุง ูุซูุฑูุง ุ ูุณูููู ุฐูู ูุฒุนุฌูุง ููุบุงูุฉ ุจุงููุณุจุฉ ูููุณุชุฎุฏู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตุญูุญ ุนุฏุฏ ุงูุนููุงุช</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุตูุงุญ ุงูุตูุช. </font><font style="vertical-align: inherit;">ููุช ูุฏ ูุงุญุธุช ุฃู ูุฏููุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchronize_audio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธููุฉ </font><font style="vertical-align: inherit;">ุนุงุฆุฏุงุช ุญุฌู ุงูุนููุฉุ ุงูุฐู ูุฑูู ููุง ุจุนุฏ ุฐูู ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ูุฅุฑุณุงููุง ุฅูู ุงูุฏูู. </font><font style="vertical-align: inherit;">ูุฐูู ูุญุชุงุฌ ููุท ุฅูู ุถุจุท ุญุฌู ุงูุนููุฉ ุนูู ุงููููุฉ ุงููุทููุจุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุนูู ุชูููู ุญุฌู ุงูุนููุฉ. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฒูุงุฏุชู ุ ููุง ูููููุง ุฒูุงุฏุฉ ุญุฌู ุงูุนููุฉ ููุท ุ ูุฃูู ูุง ููุฌุฏ ุงููุฒูุฏ ูู ุงูุจูุงูุงุช ูู ุงููุฎุฒู ุงููุคูุช! </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฌุจ ุฃู ูุถูู ุงููููู. </font><font style="vertical-align: inherit;">ูููู ูุงุฐุง ุชุถูู ุจุงูุถุจุทุ </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูุญูุงูุฉ ูุญุงููุฉ ุงุณุชูุฑุงุก ุงูุตูุช ุ ูุฐูู ุฏุนููุง ูุณุชุฎุฏู ุงูุตูุช ุงูููุฌูุฏ ูุฏููุง ุจุงููุนู ุ ูุน ุฅุถุงูุฉ ูููุฉ ุงูุนููุฉ ุงูุฃุฎูุฑุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(wanted_size &lt; samples_size) {
  <span class="hljs-comment">/* remove samples */</span><font></font>
  samples_size = wanted_size;<font></font>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(wanted_size &gt; samples_size) {
  <span class="hljs-keyword">uint8_t</span> *samples_end, *q;
  <span class="hljs-keyword">int</span> nb;<font></font>
<font></font>
  <span class="hljs-comment">/* add samples by copying final samples */</span><font></font>
  nb = (samples_size - wanted_size);<font></font>
  samples_end = (<span class="hljs-keyword">uint8_t</span> *)samples + samples_size - n;<font></font>
  q = samples_end + n;<font></font>
  <span class="hljs-keyword">while</span>(nb &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">memcpy</span>(q, samples_end, n);<font></font>
    q += n;<font></font>
    nb -= n;<font></font>
  }<font></font>
  samples_size = wanted_size;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุนูุฏ ุญุฌู ุงูุนููุฉ ุ ููุฏ ุงูุชูููุง ุจูุฐู ุงููุธููุฉ. </font><font style="vertical-align: inherit;">ูู ูุง ุนูููุง ูุนูู ุงูุขู ูู ุงุณุชุฎุฏุงู ูุฐุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">audio_callback</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata, Uint8 *stream, <span class="hljs-keyword">int</span> len)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  <span class="hljs-keyword">int</span> len1, audio_size;
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  <span class="hljs-keyword">while</span>(len &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span>(is-&gt;audio_buf_index &gt;= is-&gt;audio_buf_size) {
      <span class="hljs-comment">/* We have already sent all our data; get more */</span>
      audio_size = audio_decode_frame(is, is-&gt;audio_buf, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_buf), &amp;pts);
      <span class="hljs-keyword">if</span>(audio_size &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* If error, output silence */</span>
	is-&gt;audio_buf_size = <span class="hljs-number">1024</span>;
	<span class="hljs-built_in">memset</span>(is-&gt;audio_buf, <span class="hljs-number">0</span>, is-&gt;audio_buf_size);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	audio_size = synchronize_audio(is, (<span class="hljs-keyword">int16_t</span> *)is-&gt;audio_buf,<font></font>
				       audio_size, pts);<font></font>
	is-&gt;audio_buf_size = audio_size;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุง ูุนููุงู ูู ุฅุฏุฑุงุฌ ููุงููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syncize_audio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">(ุฃูุถูุง ุ ุชุฃูุฏ ูู ุงูุชุญูู ูู ุดูุฑุฉ ุงููุตุฏุฑ ุ ุงูุชู ูููู ูููุง ุจุชููุฆุฉ ุงููุชุบูุฑุงุช ุงูุชู ูู ุฃุฒุนุฌ ููุณู ูู ุชุนุฑูููุง.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุฃุฎูุฑ ุ ูุจู ุฃู ููุชูู: ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุดุฑุท "if" ููุชุฃูุฏ ูู ุฃููุง ูุง ูููู ุจูุฒุงููุฉ ุงูููุฏูู ุฅุฐุง ูุงูุช ุงูุณุงุนุฉ ุงูุฑุฆูุณูุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_VIDEO_MASTER) {<font></font>
  ref_clock = get_master_clock(is);<font></font>
  diff = vp-&gt;pts - ref_clock;<font></font>
<font></font>
  <span class="hljs-comment">/* Skip or repeat the frame. Take delay into account
     FFPlay still doesn't "know if this is the best guess." */</span><font></font>
  sync_threshold = (delay &gt; AV_SYNC_THRESHOLD) ? delay :<font></font>
                    AV_SYNC_THRESHOLD;<font></font>
  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(diff) &lt; AV_NOSYNC_THRESHOLD) {
    <span class="hljs-keyword">if</span>(diff &lt;= -sync_threshold) {<font></font>
      delay = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(diff &gt;= sync_threshold) {<font></font>
      delay = <span class="hljs-number">2</span> * delay;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุนูู! </font><font style="vertical-align: inherit;">ุชุฃูุฏ ูู ุงูุชุญูู ูู ุงูููู ุงููุตุฏุฑ ูุชููุฆุฉ ุฃู ูุชุบูุฑุงุช ูู ุฃููู ููุณูุง ุนูุงุก ุชุนุฑูููุง ุฃู ุชููุฆุชูุง. </font><font style="vertical-align: inherit;">ุซู ุงุฌูุน:</font></font><br>
<br>
<pre><code class="bash hljs">gcc -o tutorial06 tutorial06.c -lavutil -lavformat -lavcodec -lswscale -lz -lm \<font></font>
`sdl-config --cflags --libs`</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชููู ุงูุฑุญูุฉ ุทุจูุนูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฏุฑุณ ุงูุฃุฎูุฑ ุณูุฑุฌุน.</font></font><a name="seeking"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุณ 7: ุจุญุซ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูุฏุฑุณ 6: ูุฒุงููุฉ ุงูุตูุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅูู ุฌุฏูู ุงููุญุชููุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฎุงุชูุฉ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ</font></font></a></h2><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงููุงุฆูุฉ ุงููุงููุฉ 07.C</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">// tutorial05.c</span>
<span class="hljs-comment">// A pedagogical video player that really works!</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Code based on FFplay, Copyright (c) 2003 Fabrice Bellard, </span>
<span class="hljs-comment">// and a tutorial by Martin Bohme (boehme@inb.uni-luebeckREMOVETHIS.de)</span>
<span class="hljs-comment">// Tested on Gentoo, CVS version 5/01/07 compiled with GCC 4.1.1</span>
<span class="hljs-comment">// With updates from https://github.com/chelyaev/ffmpeg-tutorial</span>
<span class="hljs-comment">// Updates tested on:</span>
<span class="hljs-comment">// LAVC 54.59.100, LAVF 54.29.104, LSWS 2.1.101, SDL 1.2.15</span>
<span class="hljs-comment">// on GCC 4.7.2 in Debian February 2015</span>
<span class="hljs-comment">// Use</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// gcc -o tutorial05 tutorial05.c -lavformat -lavcodec -lswscale -lz -lm `sdl-config --cflags --libs`</span>
<span class="hljs-comment">// to build (assuming libavformat and libavcodec are correctly installed, </span>
<span class="hljs-comment">// and assuming you have sdl-config. Please refer to SDL docs for your installation.)</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Run using</span>
<span class="hljs-comment">// tutorial04 myvideofile.mpg</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// to play the video stream on your screen.</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavcodec/avcodec.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavformat/avformat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libswscale/swscale.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL_thread.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> __MINGW32__</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> main <span class="hljs-comment">/* Prevents SDL from overriding main() */</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;math.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">// compatibility with newer API</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_alloc avcodec_alloc_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_free avcodec_free_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SDL_AUDIO_BUFFER_SIZE 1024</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIO_FRAME_SIZE 192000</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIOQ_SIZE (5 * 16 * 1024)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_VIDEOQ_SIZE (5 * 256 * 1024)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_SYNC_THRESHOLD 0.01</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_NOSYNC_THRESHOLD 10.0</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SAMPLE_CORRECTION_PERCENT_MAX 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AUDIO_DIFF_AVG_NB 20</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_REFRESH_EVENT (SDL_USEREVENT)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_QUIT_EVENT (SDL_USEREVENT + 1)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> VIDEO_PICTURE_QUEUE_SIZE 1</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_AV_SYNC_TYPE AV_SYNC_VIDEO_MASTER</span><font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PacketQueue</span> {</span><font></font>
  AVPacketList *first_pkt, *last_pkt;<font></font>
  <span class="hljs-keyword">int</span> nb_packets;
  <span class="hljs-keyword">int</span> size;<font></font>
  SDL_mutex *mutex;<font></font>
  SDL_cond *cond;<font></font>
} PacketQueue;<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoPicture</span> {</span><font></font>
  SDL_Overlay *bmp;<font></font>
  <span class="hljs-keyword">int</span> width, height; <span class="hljs-comment">/* source height &amp; width */</span>
  <span class="hljs-keyword">int</span> allocated;
  <span class="hljs-keyword">double</span> pts;<font></font>
} VideoPicture;<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoState</span> {</span><font></font>
<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  <span class="hljs-keyword">int</span>             videoStream, audioStream;<font></font>
<font></font>
  <span class="hljs-keyword">int</span>             av_sync_type;
  <span class="hljs-keyword">double</span>          external_clock; <span class="hljs-comment">/* external clock base */</span>
  <span class="hljs-keyword">int64_t</span>         external_clock_time;
  <span class="hljs-keyword">int</span>             seek_req;
  <span class="hljs-keyword">int</span>             seek_flags;
  <span class="hljs-keyword">int64_t</span>         seek_pos;<font></font>
<font></font>
  <span class="hljs-keyword">double</span>          audio_clock;<font></font>
  AVStream        *audio_st;<font></font>
  AVCodecContext  *audio_ctx;<font></font>
  PacketQueue     audioq;<font></font>
  <span class="hljs-keyword">uint8_t</span>         audio_buf[(AVCODEC_MAX_AUDIO_FRAME_SIZE * <span class="hljs-number">3</span>) / <span class="hljs-number">2</span>];
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_size;
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_index;<font></font>
  AVFrame         audio_frame;<font></font>
  AVPacket        audio_pkt;<font></font>
  <span class="hljs-keyword">uint8_t</span>         *audio_pkt_data;
  <span class="hljs-keyword">int</span>             audio_pkt_size;
  <span class="hljs-keyword">int</span>             audio_hw_buf_size;
  <span class="hljs-keyword">double</span>          audio_diff_cum; <span class="hljs-comment">/* used for AV difference average computation */</span>
  <span class="hljs-keyword">double</span>          audio_diff_avg_coef;
  <span class="hljs-keyword">double</span>          audio_diff_threshold;
  <span class="hljs-keyword">int</span>             audio_diff_avg_count;
  <span class="hljs-keyword">double</span>          frame_timer;
  <span class="hljs-keyword">double</span>          frame_last_pts;
  <span class="hljs-keyword">double</span>          frame_last_delay;
  <span class="hljs-keyword">double</span>          video_clock; <span class="hljs-comment">///&lt;pts of last decoded frame / predicted pts of next decoded frame</span>
  <span class="hljs-keyword">double</span>          video_current_pts; <span class="hljs-comment">///&lt;current displayed pts (different from video_clock if frame fifos are used)</span>
  <span class="hljs-keyword">int64_t</span>         video_current_pts_time;  <span class="hljs-comment">///&lt;time (av_gettime) at which we updated video_current_pts - used to have running video pts</span><font></font>
  AVStream        *video_st;<font></font>
  AVCodecContext  *video_ctx;<font></font>
  PacketQueue     videoq;<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SwsContext</span> *<span class="hljs-title">sws_ctx</span>;</span><font></font>
<font></font>
  VideoPicture    pictq[VIDEO_PICTURE_QUEUE_SIZE];<font></font>
  <span class="hljs-keyword">int</span>             pictq_size, pictq_rindex, pictq_windex;<font></font>
  SDL_mutex       *pictq_mutex;<font></font>
  SDL_cond        *pictq_cond;<font></font>
  <font></font>
  SDL_Thread      *parse_tid;<font></font>
  SDL_Thread      *video_tid;<font></font>
<font></font>
  <span class="hljs-keyword">char</span>            filename[<span class="hljs-number">1024</span>];
  <span class="hljs-keyword">int</span>             quit;<font></font>
} VideoState;<font></font>
<font></font>
<span class="hljs-keyword">enum</span> {<font></font>
  AV_SYNC_AUDIO_MASTER,<font></font>
  AV_SYNC_VIDEO_MASTER,<font></font>
  AV_SYNC_EXTERNAL_MASTER,<font></font>
};<font></font>
<font></font>
SDL_Surface     *screen;<font></font>
SDL_mutex       *screen_mutex;<font></font>
<font></font>
<span class="hljs-comment">/* Since we only have one decoding thread, the Big Struct
   can be global in case we need it. */</span><font></font>
VideoState *global_video_state;<font></font>
AVPacket flush_pkt;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_init</span><span class="hljs-params">(PacketQueue *q)</span> </span>{
  <span class="hljs-built_in">memset</span>(q, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(PacketQueue));<font></font>
  q-&gt;mutex = SDL_CreateMutex();<font></font>
  q-&gt;cond = SDL_CreateCond();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_put</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt)</span> </span>{<font></font>
<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">if</span>(pkt != &amp;flush_pkt &amp;&amp; av_dup_packet(pkt) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
  pkt1 = av_malloc(<span class="hljs-keyword">sizeof</span>(AVPacketList));
  <span class="hljs-keyword">if</span> (!pkt1)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  pkt1-&gt;pkt = *pkt;<font></font>
  pkt1-&gt;next = <span class="hljs-literal">NULL</span>;<font></font>
  <font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (!q-&gt;last_pkt)<font></font>
    q-&gt;first_pkt = pkt1;<font></font>
  <span class="hljs-keyword">else</span><font></font>
    q-&gt;last_pkt-&gt;next = pkt1;<font></font>
  q-&gt;last_pkt = pkt1;<font></font>
  q-&gt;nb_packets++;<font></font>
  q-&gt;size += pkt1-&gt;pkt.size;<font></font>
  SDL_CondSignal(q-&gt;cond);<font></font>
  <font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_get</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt, <span class="hljs-keyword">int</span> block)</span>
</span>{<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">int</span> ret;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <font></font>
  <span class="hljs-keyword">for</span>(;;) {<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(global_video_state-&gt;quit) {<font></font>
      ret = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    pkt1 = q-&gt;first_pkt;<font></font>
    <span class="hljs-keyword">if</span> (pkt1) {<font></font>
      q-&gt;first_pkt = pkt1-&gt;next;<font></font>
      <span class="hljs-keyword">if</span> (!q-&gt;first_pkt)<font></font>
	q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
      q-&gt;nb_packets--;<font></font>
      q-&gt;size -= pkt1-&gt;pkt.size;<font></font>
      *pkt = pkt1-&gt;pkt;<font></font>
      av_free(pkt1);<font></font>
      ret = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!block) {<font></font>
      ret = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      SDL_CondWait(q-&gt;cond, q-&gt;mutex);<font></font>
    }<font></font>
  }<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> ret;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_flush</span><span class="hljs-params">(PacketQueue *q)</span> </span>{<font></font>
  AVPacketList *pkt, *pkt1;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">for</span>(pkt = q-&gt;first_pkt; pkt != <span class="hljs-literal">NULL</span>; pkt = pkt1) {<font></font>
    pkt1 = pkt-&gt;next;<font></font>
    av_free_packet(&amp;pkt-&gt;pkt);<font></font>
    av_freep(&amp;pkt);<font></font>
  }<font></font>
  q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;first_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;nb_packets = <span class="hljs-number">0</span>;<font></font>
  q-&gt;size = <span class="hljs-number">0</span>;<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_audio_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> hw_buf_size, bytes_per_sec, n;<font></font>
  <font></font>
  pts = is-&gt;audio_clock; <span class="hljs-comment">/* maintained in the audio thread */</span><font></font>
  hw_buf_size = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
  bytes_per_sec = <span class="hljs-number">0</span>;<font></font>
  n = is-&gt;audio_ctx-&gt;channels * <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span>(is-&gt;audio_st) {<font></font>
    bytes_per_sec = is-&gt;audio_ctx-&gt;sample_rate * n;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(bytes_per_sec) {<font></font>
    pts -= (<span class="hljs-keyword">double</span>)hw_buf_size / bytes_per_sec;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_video_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> delta;<font></font>
<font></font>
  delta = (av_gettime() - is-&gt;video_current_pts_time) / <span class="hljs-number">1000000.0</span>;
  <span class="hljs-keyword">return</span> is-&gt;video_current_pts + delta;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_external_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">return</span> av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_master_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_VIDEO_MASTER) {
    <span class="hljs-keyword">return</span> get_video_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">return</span> get_audio_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> get_external_clock(is);<font></font>
  }<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">/* Add or subtract samples to get a better sync, return new
   audio buffer size */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">synchronize_audio</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">short</span> *samples,
		      <span class="hljs-keyword">int</span> samples_size, <span class="hljs-keyword">double</span> pts)</span> </span>{
  <span class="hljs-keyword">int</span> n;
  <span class="hljs-keyword">double</span> ref_clock;<font></font>
<font></font>
  n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">double</span> diff, avg_diff;
    <span class="hljs-keyword">int</span> wanted_size, min_size, max_size <span class="hljs-comment">/*, nb_samples */</span>;<font></font>
    <font></font>
    ref_clock = get_master_clock(is);<font></font>
    diff = get_audio_clock(is) - ref_clock;<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(diff &lt; AV_NOSYNC_THRESHOLD) {
      <span class="hljs-comment">// accumulate the diffs</span><font></font>
      is-&gt;audio_diff_cum = diff + is-&gt;audio_diff_avg_coef<font></font>
	* is-&gt;audio_diff_cum;<font></font>
      <span class="hljs-keyword">if</span>(is-&gt;audio_diff_avg_count &lt; AUDIO_DIFF_AVG_NB) {<font></font>
	is-&gt;audio_diff_avg_count++;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	avg_diff = is-&gt;audio_diff_cum * (<span class="hljs-number">1.0</span> - is-&gt;audio_diff_avg_coef);
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(avg_diff) &gt;= is-&gt;audio_diff_threshold) {<font></font>
	  wanted_size = samples_size + ((<span class="hljs-keyword">int</span>)(diff * is-&gt;audio_ctx-&gt;sample_rate) * n);<font></font>
	  min_size = samples_size * ((<span class="hljs-number">100</span> - SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);<font></font>
	  max_size = samples_size * ((<span class="hljs-number">100</span> + SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);
	  <span class="hljs-keyword">if</span>(wanted_size &lt; min_size) {<font></font>
	    wanted_size = min_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wanted_size &gt; max_size) {<font></font>
	    wanted_size = max_size;<font></font>
	  }<font></font>
	  <span class="hljs-keyword">if</span>(wanted_size &lt; samples_size) {
	    <span class="hljs-comment">/* remove samples */</span><font></font>
	    samples_size = wanted_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(wanted_size &gt; samples_size) {
	    <span class="hljs-keyword">uint8_t</span> *samples_end, *q;
	    <span class="hljs-keyword">int</span> nb;<font></font>
<font></font>
	    <span class="hljs-comment">/* add samples by copying final sample*/</span><font></font>
	    nb = (samples_size - wanted_size);<font></font>
	    samples_end = (<span class="hljs-keyword">uint8_t</span> *)samples + samples_size - n;<font></font>
	    q = samples_end + n;<font></font>
	    <span class="hljs-keyword">while</span>(nb &gt; <span class="hljs-number">0</span>) {
	      <span class="hljs-built_in">memcpy</span>(q, samples_end, n);<font></font>
	      q += n;<font></font>
	      nb -= n;<font></font>
	    }<font></font>
	    samples_size = wanted_size;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* difference is TOO big; reset diff stuff */</span>
      is-&gt;audio_diff_avg_count = <span class="hljs-number">0</span>;<font></font>
      is-&gt;audio_diff_cum = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> samples_size;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">audio_decode_frame</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">uint8_t</span> *audio_buf, <span class="hljs-keyword">int</span> buf_size, <span class="hljs-keyword">double</span> *pts_ptr)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">int</span> len1, data_size = <span class="hljs-number">0</span>;<font></font>
  AVPacket *pkt = &amp;is-&gt;audio_pkt;<font></font>
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> n;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">while</span>(is-&gt;audio_pkt_size &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">int</span> got_frame = <span class="hljs-number">0</span>;<font></font>
      len1 = avcodec_decode_audio4(is-&gt;audio_ctx, &amp;is-&gt;audio_frame, &amp;got_frame, pkt);<font></font>
      <span class="hljs-keyword">if</span>(len1 &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* if error, skip frame */</span>
	is-&gt;audio_pkt_size = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      data_size = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span>(got_frame) {<font></font>
	data_size = av_samples_get_buffer_size(<span class="hljs-literal">NULL</span>, <font></font>
					       is-&gt;audio_ctx-&gt;channels,<font></font>
					       is-&gt;audio_frame.nb_samples,<font></font>
					       is-&gt;audio_ctx-&gt;sample_fmt,<font></font>
					       <span class="hljs-number">1</span>);<font></font>
	assert(data_size &lt;= buf_size);<font></font>
	<span class="hljs-built_in">memcpy</span>(audio_buf, is-&gt;audio_frame.data[<span class="hljs-number">0</span>], data_size);<font></font>
      }<font></font>
      is-&gt;audio_pkt_data += len1;<font></font>
      is-&gt;audio_pkt_size -= len1;<font></font>
      <span class="hljs-keyword">if</span>(data_size &lt;= <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* No data yet, get more frames */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      }<font></font>
      pts = is-&gt;audio_clock;<font></font>
      *pts_ptr = pts;<font></font>
      n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
      is-&gt;audio_clock += (<span class="hljs-keyword">double</span>)data_size /<font></font>
	(<span class="hljs-keyword">double</span>)(n * is-&gt;audio_ctx-&gt;sample_rate);
      <span class="hljs-comment">/* We have data, return it and come back for more later */</span>
      <span class="hljs-keyword">return</span> data_size;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data)<font></font>
      av_free_packet(pkt);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">/* next packet */</span>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;audioq, pkt, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data == flush_pkt.data) {<font></font>
      avcodec_flush_buffers(is-&gt;audio_ctx);<font></font>
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    is-&gt;audio_pkt_data = pkt-&gt;data;<font></font>
    is-&gt;audio_pkt_size = pkt-&gt;size;<font></font>
    <span class="hljs-comment">/* if update, update the audio clock w/pts */</span>
    <span class="hljs-keyword">if</span>(pkt-&gt;pts != AV_NOPTS_VALUE) {<font></font>
      is-&gt;audio_clock = av_q2d(is-&gt;audio_st-&gt;time_base)*pkt-&gt;pts;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">audio_callback</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata, Uint8 *stream, <span class="hljs-keyword">int</span> len)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  <span class="hljs-keyword">int</span> len1, audio_size;
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  <span class="hljs-keyword">while</span>(len &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span>(is-&gt;audio_buf_index &gt;= is-&gt;audio_buf_size) {
      <span class="hljs-comment">/* We have already sent all our data; get more */</span>
      audio_size = audio_decode_frame(is, is-&gt;audio_buf, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_buf), &amp;pts);
      <span class="hljs-keyword">if</span>(audio_size &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* If error, output silence */</span>
	is-&gt;audio_buf_size = <span class="hljs-number">1024</span>;
	<span class="hljs-built_in">memset</span>(is-&gt;audio_buf, <span class="hljs-number">0</span>, is-&gt;audio_buf_size);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	audio_size = synchronize_audio(is, (<span class="hljs-keyword">int16_t</span> *)is-&gt;audio_buf,<font></font>
				       audio_size, pts);<font></font>
	is-&gt;audio_buf_size = audio_size;<font></font>
      }<font></font>
      is-&gt;audio_buf_index = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    len1 = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
    <span class="hljs-keyword">if</span>(len1 &gt; len)<font></font>
      len1 = len;<font></font>
    <span class="hljs-built_in">memcpy</span>(stream, (<span class="hljs-keyword">uint8_t</span> *)is-&gt;audio_buf + is-&gt;audio_buf_index, len1);<font></font>
    len -= len1;<font></font>
    stream += len1;<font></font>
    is-&gt;audio_buf_index += len1;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> Uint32 <span class="hljs-title">sdl_refresh_timer_cb</span><span class="hljs-params">(Uint32 interval, <span class="hljs-keyword">void</span> *opaque)</span> </span>{<font></font>
  SDL_Event event;<font></font>
  event.type = FF_REFRESH_EVENT;<font></font>
  event.user.data1 = opaque;<font></font>
  SDL_PushEvent(&amp;event);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* 0 means stop timer */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* schedule a video refresh in 'delay' ms */</span>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">schedule_refresh</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> delay)</span> </span>{<font></font>
  SDL_AddTimer(delay, sdl_refresh_timer_cb, is);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_display</span><span class="hljs-params">(VideoState *is)</span> </span>{<font></font>
<font></font>
  SDL_Rect rect;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">float</span> aspect_ratio;
  <span class="hljs-keyword">int</span> w, h, x, y;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-keyword">if</span>(is-&gt;video_ctx-&gt;sample_aspect_ratio.num == <span class="hljs-number">0</span>) {<font></font>
      aspect_ratio = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      aspect_ratio = av_q2d(is-&gt;video_ctx-&gt;sample_aspect_ratio) *<font></font>
	is-&gt;video_ctx-&gt;width / is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(aspect_ratio &lt;= <span class="hljs-number">0.0</span>) {<font></font>
      aspect_ratio = (<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;width /<font></font>
	(<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    h = screen-&gt;h;<font></font>
    w = ((<span class="hljs-keyword">int</span>)rint(h * aspect_ratio)) &amp; <span class="hljs-number">-3</span>;
    <span class="hljs-keyword">if</span>(w &gt; screen-&gt;w) {<font></font>
      w = screen-&gt;w;<font></font>
      h = ((<span class="hljs-keyword">int</span>)rint(w / aspect_ratio)) &amp; <span class="hljs-number">-3</span>;<font></font>
    }<font></font>
    x = (screen-&gt;w - w) / <span class="hljs-number">2</span>;<font></font>
    y = (screen-&gt;h - h) / <span class="hljs-number">2</span>;<font></font>
    <font></font>
    rect.x = x;<font></font>
    rect.y = y;<font></font>
    rect.w = w;<font></font>
    rect.h = h;<font></font>
    SDL_LockMutex(screen_mutex);<font></font>
    SDL_DisplayYUVOverlay(vp-&gt;bmp, &amp;rect);<font></font>
    SDL_UnlockMutex(screen_mutex);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_refresh_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">double</span> actual_delay, delay, sync_threshold, ref_clock, diff;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;video_st) {
    <span class="hljs-keyword">if</span>(is-&gt;pictq_size == <span class="hljs-number">0</span>) {<font></font>
      schedule_refresh(is, <span class="hljs-number">1</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
      <font></font>
      is-&gt;video_current_pts = vp-&gt;pts;<font></font>
      is-&gt;video_current_pts_time = av_gettime();<font></font>
      delay = vp-&gt;pts - is-&gt;frame_last_pts; <span class="hljs-comment">/* the pts from last time */</span>
      <span class="hljs-keyword">if</span>(delay &lt;= <span class="hljs-number">0</span> || delay &gt;= <span class="hljs-number">1.0</span>) {
	<span class="hljs-comment">/* if incorrect delay, use previous one */</span><font></font>
	delay = is-&gt;frame_last_delay;<font></font>
      }<font></font>
      <span class="hljs-comment">/* save for next time */</span><font></font>
      is-&gt;frame_last_delay = delay;<font></font>
      is-&gt;frame_last_pts = vp-&gt;pts;<font></font>
<font></font>
<font></font>
<font></font>
      <span class="hljs-comment">/* update delay to sync to audio if not master source */</span>
      <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_VIDEO_MASTER) {<font></font>
	ref_clock = get_master_clock(is);<font></font>
	diff = vp-&gt;pts - ref_clock;<font></font>
	<font></font>
	<span class="hljs-comment">/* Skip or repeat the frame. Take delay into account
	   FFPlay still doesn't "know if this is the best guess." */</span><font></font>
	sync_threshold = (delay &gt; AV_SYNC_THRESHOLD) ? delay : AV_SYNC_THRESHOLD;<font></font>
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(diff) &lt; AV_NOSYNC_THRESHOLD) {
	  <span class="hljs-keyword">if</span>(diff &lt;= -sync_threshold) {<font></font>
	    delay = <span class="hljs-number">0</span>;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(diff &gt;= sync_threshold) {<font></font>
	    delay = <span class="hljs-number">2</span> * delay;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
      is-&gt;frame_timer += delay;<font></font>
      <span class="hljs-comment">/* computer the REAL delay */</span>
      actual_delay = is-&gt;frame_timer - (av_gettime() / <span class="hljs-number">1000000.0</span>);
      <span class="hljs-keyword">if</span>(actual_delay &lt; <span class="hljs-number">0.010</span>) {
	<span class="hljs-comment">/* Really it should skip the picture instead */</span>
	actual_delay = <span class="hljs-number">0.010</span>;<font></font>
      }<font></font>
      schedule_refresh(is, (<span class="hljs-keyword">int</span>)(actual_delay * <span class="hljs-number">1000</span> + <span class="hljs-number">0.5</span>));<font></font>
      <font></font>
      <span class="hljs-comment">/* show the picture! */</span><font></font>
      video_display(is);<font></font>
      <font></font>
      <span class="hljs-comment">/* update queue for next picture! */</span>
      <span class="hljs-keyword">if</span>(++is-&gt;pictq_rindex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
	is-&gt;pictq_rindex = <span class="hljs-number">0</span>;<font></font>
      }<font></font>
      SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
      is-&gt;pictq_size--;<font></font>
      SDL_CondSignal(is-&gt;pictq_cond);<font></font>
      SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
    }<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    schedule_refresh(is, <span class="hljs-number">100</span>);<font></font>
  }<font></font>
}<font></font>
      <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">alloc_picture</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-comment">// we already have one make another, bigger/smaller</span><font></font>
    SDL_FreeYUVOverlay(vp-&gt;bmp);<font></font>
  }<font></font>
  <span class="hljs-comment">// Allocate a place to put our YUV image on that screen</span><font></font>
  SDL_LockMutex(screen_mutex);<font></font>
  vp-&gt;bmp = SDL_CreateYUVOverlay(is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height,<font></font>
				 SDL_YV12_OVERLAY,<font></font>
				 screen);<font></font>
  SDL_UnlockMutex(screen_mutex);<font></font>
<font></font>
  vp-&gt;width = is-&gt;video_ctx-&gt;width;<font></font>
  vp-&gt;height = is-&gt;video_ctx-&gt;height;<font></font>
  vp-&gt;allocated = <span class="hljs-number">1</span>;<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">queue_picture</span><span class="hljs-params">(VideoState *is, AVFrame *pFrame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">int</span> dst_pix_fmt;<font></font>
  AVPicture pict;<font></font>
<font></font>
  <span class="hljs-comment">/* wait until we have space for a new pic */</span><font></font>
  SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
  <span class="hljs-keyword">while</span>(is-&gt;pictq_size &gt;= VIDEO_PICTURE_QUEUE_SIZE &amp;&amp;<font></font>
	!is-&gt;quit) {<font></font>
    SDL_CondWait(is-&gt;pictq_cond, is-&gt;pictq_mutex);<font></font>
  }<font></font>
  SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;quit)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
<font></font>
  <span class="hljs-comment">// windex is set to 0 initially</span><font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
<font></font>
  <span class="hljs-comment">/* allocate or resize the buffer! */</span>
  <span class="hljs-keyword">if</span>(!vp-&gt;bmp ||<font></font>
     vp-&gt;width != is-&gt;video_ctx-&gt;width ||<font></font>
     vp-&gt;height != is-&gt;video_ctx-&gt;height) {<font></font>
    SDL_Event event;<font></font>
<font></font>
    vp-&gt;allocated = <span class="hljs-number">0</span>;<font></font>
    alloc_picture(is);<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-comment">/* We have a place to put our picture on the queue */</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {<font></font>
<font></font>
    SDL_LockYUVOverlay(vp-&gt;bmp);<font></font>
    vp-&gt;pts = pts;<font></font>
    <font></font>
    dst_pix_fmt = PIX_FMT_YUV420P;<font></font>
    <span class="hljs-comment">/* point pict at the queue */</span><font></font>
<font></font>
    pict.data[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">0</span>];<font></font>
    pict.data[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">2</span>];<font></font>
    pict.data[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    pict.linesize[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">0</span>];<font></font>
    pict.linesize[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">2</span>];<font></font>
    pict.linesize[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    <span class="hljs-comment">// Convert the image into YUV format that SDL uses</span>
    sws_scale(is-&gt;sws_ctx, (<span class="hljs-keyword">uint8_t</span> <span class="hljs-keyword">const</span> * <span class="hljs-keyword">const</span> *)pFrame-&gt;data,<font></font>
	      pFrame-&gt;linesize, <span class="hljs-number">0</span>, is-&gt;video_ctx-&gt;height,<font></font>
	      pict.data, pict.linesize);<font></font>
    <font></font>
    SDL_UnlockYUVOverlay(vp-&gt;bmp);<font></font>
    <span class="hljs-comment">/* now we inform our display thread that we have a pic ready */</span>
    <span class="hljs-keyword">if</span>(++is-&gt;pictq_windex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
      is-&gt;pictq_windex = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
    is-&gt;pictq_size++;<font></font>
    SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">synchronize_video</span><span class="hljs-params">(VideoState *is, AVFrame *src_frame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">double</span> frame_delay;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(pts != <span class="hljs-number">0</span>) {
    <span class="hljs-comment">/* if we have pts, set video clock to it */</span><font></font>
    is-&gt;video_clock = pts;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">/* if we aren't given a pts, set it to the clock */</span><font></font>
    pts = is-&gt;video_clock;<font></font>
  }<font></font>
  <span class="hljs-comment">/* update the video clock */</span><font></font>
  frame_delay = av_q2d(is-&gt;video_ctx-&gt;time_base);<font></font>
  <span class="hljs-comment">/* if we are repeating a frame, adjust clock accordingly */</span>
  frame_delay += src_frame-&gt;repeat_pict * (frame_delay * <span class="hljs-number">0.5</span>);<font></font>
  is-&gt;video_clock += frame_delay;<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">video_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
  <span class="hljs-keyword">int</span> frameFinished;<font></font>
  AVFrame *pFrame;<font></font>
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  pFrame = av_frame_alloc();<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    pts = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-comment">// Decode video frame</span><font></font>
    avcodec_decode_video2(is-&gt;video_ctx, pFrame, &amp;frameFinished, packet);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>((pts = av_frame_get_best_effort_timestamp(pFrame)) == AV_NOPTS_VALUE) {<font></font>
      pts = av_frame_get_best_effort_timestamp(pFrame);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      pts = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    pts *= av_q2d(is-&gt;video_st-&gt;time_base);<font></font>
<font></font>
    <span class="hljs-comment">// Did we get a video frame?</span>
    <span class="hljs-keyword">if</span>(frameFinished) {<font></font>
      pts = synchronize_video(is, pFrame, pts);<font></font>
      <span class="hljs-keyword">if</span>(queue_picture(is, pFrame, pts) &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    av_free_packet(packet);<font></font>
  }<font></font>
  av_frame_free(&amp;pFrame);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">stream_component_open</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> stream_index)</span> </span>{<font></font>
<font></font>
  AVFormatContext *pFormatCtx = is-&gt;pFormatCtx;<font></font>
  AVCodecContext *codecCtx = <span class="hljs-literal">NULL</span>;<font></font>
  AVCodec *codec = <span class="hljs-literal">NULL</span>;<font></font>
  SDL_AudioSpec wanted_spec, spec;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(stream_index &lt; <span class="hljs-number">0</span> || stream_index &gt;= pFormatCtx-&gt;nb_streams) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codec = avcodec_find_decoder(pFormatCtx-&gt;streams[stream_index]-&gt;codec-&gt;codec_id);<font></font>
  <span class="hljs-keyword">if</span>(!codec) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codecCtx = avcodec_alloc_context3(codec);<font></font>
  <span class="hljs-keyword">if</span>(avcodec_copy_context(codecCtx, pFormatCtx-&gt;streams[stream_index]-&gt;codec) != <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Couldn't copy codec context"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Error copying codec context</span><font></font>
  }<font></font>
<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(codecCtx-&gt;codec_type == AVMEDIA_TYPE_AUDIO) {
    <span class="hljs-comment">// Set audio settings from codec info</span><font></font>
    wanted_spec.freq = codecCtx-&gt;sample_rate;<font></font>
    wanted_spec.format = AUDIO_S16SYS;<font></font>
    wanted_spec.channels = codecCtx-&gt;channels;<font></font>
    wanted_spec.silence = <span class="hljs-number">0</span>;<font></font>
    wanted_spec.samples = SDL_AUDIO_BUFFER_SIZE;<font></font>
    wanted_spec.callback = audio_callback;<font></font>
    wanted_spec.userdata = is;<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(SDL_OpenAudio(&amp;wanted_spec, &amp;spec) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL_OpenAudio: %s\n"</span>, SDL_GetError());
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    is-&gt;audio_hw_buf_size = spec.size;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(avcodec_open2(codecCtx, codec, <span class="hljs-literal">NULL</span>) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">switch</span>(codecCtx-&gt;codec_type) {
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_AUDIO:<font></font>
    is-&gt;audioStream = stream_index;<font></font>
    is-&gt;audio_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;audio_ctx = codecCtx;<font></font>
    is-&gt;audio_buf_size = <span class="hljs-number">0</span>;<font></font>
    is-&gt;audio_buf_index = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">memset</span>(&amp;is-&gt;audio_pkt, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_pkt));<font></font>
    packet_queue_init(&amp;is-&gt;audioq);<font></font>
    SDL_PauseAudio(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_VIDEO:<font></font>
    is-&gt;videoStream = stream_index;<font></font>
    is-&gt;video_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;video_ctx = codecCtx;<font></font>
<font></font>
    is-&gt;frame_timer = (<span class="hljs-keyword">double</span>)av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
    is-&gt;frame_last_delay = <span class="hljs-number">40e-3</span>;<font></font>
    is-&gt;video_current_pts_time = av_gettime();<font></font>
<font></font>
    packet_queue_init(&amp;is-&gt;videoq);<font></font>
    is-&gt;video_tid = SDL_CreateThread(video_thread, is);<font></font>
    is-&gt;sws_ctx = sws_getContext(is-&gt;video_ctx-&gt;width, is-&gt;video_ctx-&gt;height,<font></font>
				 is-&gt;video_ctx-&gt;pix_fmt, is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height, PIX_FMT_YUV420P,<font></font>
				 SWS_BILINEAR, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span><font></font>
				 );<font></font>
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">default</span>:
    <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">decode_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
<font></font>
  <span class="hljs-keyword">int</span> video_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> audio_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  is-&gt;videoStream=<span class="hljs-number">-1</span>;<font></font>
  is-&gt;audioStream=<span class="hljs-number">-1</span>;<font></font>
<font></font>
  global_video_state = is;<font></font>
<font></font>
  <span class="hljs-comment">// Open video file</span>
  <span class="hljs-keyword">if</span>(avformat_open_input(&amp;pFormatCtx, is-&gt;filename, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>)!=<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't open file</span><font></font>
<font></font>
  is-&gt;pFormatCtx = pFormatCtx;<font></font>
  <font></font>
  <span class="hljs-comment">// Retrieve stream information</span>
  <span class="hljs-keyword">if</span>(avformat_find_stream_info(pFormatCtx, <span class="hljs-literal">NULL</span>)&lt;<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't find stream information</span><font></font>
  <font></font>
  <span class="hljs-comment">// Dump information about file onto standard error</span>
  av_dump_format(pFormatCtx, <span class="hljs-number">0</span>, is-&gt;filename, <span class="hljs-number">0</span>);<font></font>
  <font></font>
  <span class="hljs-comment">// Find the first video stream</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;pFormatCtx-&gt;nb_streams; i++) {
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_VIDEO &amp;&amp;<font></font>
       video_index &lt; <span class="hljs-number">0</span>) {<font></font>
      video_index=i;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO &amp;&amp;<font></font>
       audio_index &lt; <span class="hljs-number">0</span>) {<font></font>
      audio_index=i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(audio_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, audio_index);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(video_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, video_index);<font></font>
  }   <font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;videoStream &lt; <span class="hljs-number">0</span> || is-&gt;audioStream &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: could not open codecs\n"</span>, is-&gt;filename);
    <span class="hljs-keyword">goto</span> fail;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// main decode loop</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">// seek stuff goes here</span>
    <span class="hljs-keyword">if</span>(is-&gt;seek_req) {
      <span class="hljs-keyword">int</span> stream_index= <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">int64_t</span> seek_target = is-&gt;seek_pos;<font></font>
<font></font>
      <span class="hljs-keyword">if</span>     (is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;videoStream;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;audioStream;<font></font>
<font></font>
      <span class="hljs-keyword">if</span>(stream_index&gt;=<span class="hljs-number">0</span>){<font></font>
	seek_target= av_rescale_q(seek_target, AV_TIME_BASE_Q,<font></font>
				  pFormatCtx-&gt;streams[stream_index]-&gt;time_base);<font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>(av_seek_frame(is-&gt;pFormatCtx, stream_index, <font></font>
		       seek_target, is-&gt;seek_flags) &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: error while seeking\n"</span>,<font></font>
		is-&gt;pFormatCtx-&gt;filename);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
<font></font>
	<span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) {<font></font>
	  packet_queue_flush(&amp;is-&gt;audioq);<font></font>
	  packet_queue_put(&amp;is-&gt;audioq, &amp;flush_pkt);<font></font>
	}<font></font>
	<span class="hljs-keyword">if</span>(is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) {<font></font>
	  packet_queue_flush(&amp;is-&gt;videoq);<font></font>
	  packet_queue_put(&amp;is-&gt;videoq, &amp;flush_pkt);<font></font>
	}<font></font>
      }<font></font>
      is-&gt;seek_req = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;audioq.size &gt; MAX_AUDIOQ_SIZE ||<font></font>
       is-&gt;videoq.size &gt; MAX_VIDEOQ_SIZE) {<font></font>
      SDL_Delay(<span class="hljs-number">10</span>);
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(av_read_frame(is-&gt;pFormatCtx, packet) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span>(is-&gt;pFormatCtx-&gt;pb-&gt;error == <span class="hljs-number">0</span>) {<font></font>
	SDL_Delay(<span class="hljs-number">100</span>); <span class="hljs-comment">/* no error; wait for user input */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      } <span class="hljs-keyword">else</span> {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-comment">// Is this a packet from the video stream?</span>
    <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;videoStream) {<font></font>
      packet_queue_put(&amp;is-&gt;videoq, packet);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;audioStream) {<font></font>
      packet_queue_put(&amp;is-&gt;audioq, packet);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      av_free_packet(packet);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-comment">/* all done - wait for it */</span>
  <span class="hljs-keyword">while</span>(!is-&gt;quit) {<font></font>
    SDL_Delay(<span class="hljs-number">100</span>);<font></font>
  }<font></font>
<font></font>
 fail:<font></font>
  <span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>){<font></font>
    SDL_Event event;<font></font>
    event.type = FF_QUIT_EVENT;<font></font>
    event.user.data1 = is;<font></font>
    SDL_PushEvent(&amp;event);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stream_seek</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int64_t</span> pos, <span class="hljs-keyword">int</span> rel)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;seek_req) {<font></font>
    is-&gt;seek_pos = pos;<font></font>
    is-&gt;seek_flags = rel &lt; <span class="hljs-number">0</span> ? AVSEEK_FLAG_BACKWARD : <span class="hljs-number">0</span>;<font></font>
    is-&gt;seek_req = <span class="hljs-number">1</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> </span>{<font></font>
<font></font>
  SDL_Event       event;<font></font>
<font></font>
  VideoState      *is;<font></font>
<font></font>
  is = av_mallocz(<span class="hljs-keyword">sizeof</span>(VideoState));<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(argc &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Usage: test &lt;file&gt;\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
  <span class="hljs-comment">// Register all formats and codecs</span><font></font>
  av_register_all();<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER)) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Could not initialize SDL - %s\n"</span>, SDL_GetError());
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// Make a screen to put our video</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> __DARWIN__</span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
  <span class="hljs-keyword">if</span>(!screen) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL: could not set video mode - exiting\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  screen_mutex = SDL_CreateMutex();<font></font>
<font></font>
  av_strlcpy(is-&gt;filename, argv[<span class="hljs-number">1</span>], <span class="hljs-keyword">sizeof</span>(is-&gt;filename));<font></font>
<font></font>
  is-&gt;pictq_mutex = SDL_CreateMutex();<font></font>
  is-&gt;pictq_cond = SDL_CreateCond();<font></font>
<font></font>
  schedule_refresh(is, <span class="hljs-number">40</span>);<font></font>
<font></font>
  is-&gt;av_sync_type = DEFAULT_AV_SYNC_TYPE;<font></font>
  is-&gt;parse_tid = SDL_CreateThread(decode_thread, is);<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;parse_tid) {<font></font>
    av_free(is);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  av_init_packet(&amp;flush_pkt);<font></font>
  flush_pkt.data = <span class="hljs-string">"FLUSH"</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">double</span> incr, pos;<font></font>
    SDL_WaitEvent(&amp;event);<font></font>
    <span class="hljs-keyword">switch</span>(event.type) {
    <span class="hljs-keyword">case</span> SDL_KEYDOWN:
      <span class="hljs-keyword">switch</span>(event.key.keysym.sym) {
      <span class="hljs-keyword">case</span> SDLK_LEFT:<font></font>
	incr = <span class="hljs-number">-10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_RIGHT:<font></font>
	incr = <span class="hljs-number">10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_UP:<font></font>
	incr = <span class="hljs-number">60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_DOWN:<font></font>
	incr = <span class="hljs-number">-60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;<font></font>
      do_seek:<font></font>
	<span class="hljs-keyword">if</span>(global_video_state) {<font></font>
	  pos = get_master_clock(global_video_state);<font></font>
	  pos += incr;<font></font>
	  stream_seek(global_video_state, (<span class="hljs-keyword">int64_t</span>)(pos * AV_TIME_BASE), incr);<font></font>
	}<font></font>
	<span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> FF_QUIT_EVENT:
    <span class="hljs-keyword">case</span> SDL_QUIT:<font></font>
      is-&gt;quit = <span class="hljs-number">1</span>;
      <span class="hljs-comment">/*
       * If the video has finished playing, then both the picture and
       * audio queues are waiting for more data.  Make them stop
       * waiting and terminate normally.
       */</span><font></font>
      SDL_CondSignal(is-&gt;audioq.cond);<font></font>
      SDL_CondSignal(is-&gt;videoq.cond);<font></font>
      SDL_Quit();<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> FF_REFRESH_EVENT:<font></font>
      video_refresh_timer(event.user.data1);<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
<font></font>
}<font></font>
</code></pre></div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุฉ ุฃูุงูุฑ ุงูุจุญุซ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุงูุขู ุจุฅุถุงูุฉ ุจุนุถ ุฅููุงููุงุช ุงูุจุญุซ ูู ูุดุบููุง ุ ูุฃูู ุฃูุฑ ูุฒุนุฌ ุญููุง ุนูุฏูุง ูุง ููููู ุฅุฑุฌุงุน ุงููููู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุฑู ูุฏู ุณูููุฉ ุงุณุชุฎุฏุงู ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุฌุนู ุงูุฃุณูู ุนูู ููุญุฉ ุงูููุงุชูุญ "ูุณุงุฑ" ู "ูููู" ููุฑุฑ ุงููููู ููุฃูุงู ูุงูุฎูู ููููุงู ุ ูุงูุณูุงู "ูุฃุนูู" ู "ูุฃุณูู" ุฃูุซุฑ ุฃูููุฉ ุจุงููุนู. "ุงููููู" - ุณุชููู 10 ุซูุงูู ุ ู "ุงููุซูุฑ" - ูู 60. ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุชูููู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ ูุฏููุง ุจุญูุซ ุชุนุชุฑุถ ุฃุญุฏุงุซ ุงูุถุบุท ุนูู ุงูููุงุชูุญ. ููู ุงูุญูููุฉ ูู ุฃูู ุนูุฏูุง ูุญุตู ุนูู ุถุบุทุฉ ููุชุงุญ ุ ูุง ูููููุง ุงูุงุชุตุงู ุจู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจุงุดุฑุฉ. ูุฐุง ูุฌุจ ุฃู ูุชู ูู ูุฏููุง ุงูุฑุฆูุณู ูู ุญููุฉุ </font><b><font style="vertical-align: inherit;">decode_thread</font></b><font style="vertical-align: inherit;"> ุญููุฉ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุฏูุงู ูู ุฐูู ุ ุณูุถูู ุจุนุถ ุงูููู ุฅูู ุงููููู ุงูุฑุฆูุณู ุ ูุงูุฐู ุณูุญุชูู ุนูู ููุถุน ุฌุฏูุฏ ููุจุญุซ ูุจุนุถ ุนูุงูุงุช ุงูุจุญุซ:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">int</span>             seek_req;
  <span class="hljs-keyword">int</span>             seek_flags;
  <span class="hljs-keyword">int64_t</span>         seek_pos;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชูููู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุชูุชูุท ุถุบุทุงุช ุงูููุงุชูุญ:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">double</span> incr, pos;<font></font>
<font></font>
    SDL_WaitEvent(&amp;event);<font></font>
    <span class="hljs-keyword">switch</span>(event.type) {
    <span class="hljs-keyword">case</span> SDL_KEYDOWN:
      <span class="hljs-keyword">switch</span>(event.key.keysym.sym) {
      <span class="hljs-keyword">case</span> SDLK_LEFT:<font></font>
	incr = <span class="hljs-number">-10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_RIGHT:<font></font>
	incr = <span class="hljs-number">10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_UP:<font></font>
	incr = <span class="hljs-number">60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_DOWN:<font></font>
	incr = <span class="hljs-number">-60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;<font></font>
      do_seek:<font></font>
	<span class="hljs-keyword">if</span>(global_video_state) {<font></font>
	  pos = get_master_clock(global_video_state);<font></font>
	  pos += incr;<font></font>
	  stream_seek(global_video_state, <font></font>
                      (<span class="hljs-keyword">int64_t</span>)(pos * AV_TIME_BASE), incr);<font></font>
	}<font></font>
	<span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">break</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุจุถ ุนูู ุถุบุทุฉ ููุชุงุญ ุ ููุธุฑ ุฃููุงู ุฅูู ูุง ุฅุฐุง ูุงู ุญุฏุซ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_KEYDOWN ุญุฏุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุซู ูุชุญูู ูู ุงูููุชุงุญ ุงูุฐู ุชู ุงุณุชูุงูู ุจุงุณุชุฎุฏุงู </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.key.keysym.sym</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุจูุฌุฑุฏ ูุนุฑูุฉ ุงูุงุชุฌุงู ุงูุฐู ูุชุทูุน ุฅููู ุ ูุญุณุจ ููุชูุง ุฌุฏูุฏูุง ุ ููุถูู ุฒูุงุฏุฉ ูู ุงููููุฉ ูู ุฏุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_master_clock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฏูุฏุฉ </font><font style="vertical-align: inherit;">. ุซู ูุณููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_seek</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธููุฉ </font><font style="vertical-align: inherit;">ูุชุนููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seek_pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููู </font><font style="vertical-align: inherit;">ุ ุงูุฎ ูู ุจุชุญููู ููุชูุง ุงูุฌุฏูุฏ ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุงุจุน ุงูุฒููู ุงูุฏุงุฎููุฉ </font><b><font style="vertical-align: inherit;">avcodec</font></b><font style="vertical-align: inherit;"> . ุชุฐูุฑ ุฃู ุงูุทูุงุจุน ุงูุฒูููุฉ ูู ุงูุชุฏููุงุช ุชูุงุณ ุจุฅุทุงุฑุงุช ุ ูููุณ ุจุงูุซูุงูู ุ ุจุงุณุชุฎุฏุงู ุงูุตูุบุฉ ุงูุชุงููุฉ: </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seconds</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frames</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fps</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนููู </font><b><font style="vertical-align: inherit;">avcodec</font></b><font style="vertical-align: inherit;"> ุนูู 1ุ000ุ000 ุฅุทุงุฑ ูู ุงูุซุงููุฉ (ูุจุงูุชุงูู ูุฅู ููุถุน 2 ุซุงููุฉ ุณูููู ูู ุทุงุจุน ุฒููู ูุฏุฑู 2ุ000ุ000). ููุงุฐุง ูุญุชุงุฌ ุฅูู ุชุญููู ูุฐู ุงููููุฉ - ุงูุธุฑ ูุงุญููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ูู ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_seek</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุงุญุธ ุฃููุง ูุถุนูุง ุงูุนูู ุฅุฐุง ุนุฏูุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stream_seek</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int64_t</span> pos, <span class="hljs-keyword">int</span> rel)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;seek_req) {<font></font>
    is-&gt;seek_pos = pos;<font></font>
    is-&gt;seek_flags = rel &lt; <span class="hljs-number">0</span> ? AVSEEK_FLAG_BACKWARD : <span class="hljs-number">0</span>;<font></font>
    is-&gt;seek_req = <span class="hljs-number">1</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ููุชูู ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decode_thread</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ ูุฌุฑู ุจุญุซูุง ุจุงููุนู. ูู ูููุงุช ุงููุตุฏุฑ ููููู ุฃู ุชุฑู ุฃููุง ูุถุนูุง ุนูุงูุฉ ุนูู ุงูููุทูุฉ "ุงูุจุญุซ ููุฏ ุงูุชูุฏู". ุญุณููุง ุ ุณูุถุนูุง ููุงู ุงูุขู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุญูุฑ ุงูุจุญุซ ุญูู ุฏุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุชุฃุฎุฐ ูุฐู ุงููุธููุฉ ูุญุฌุฉ ุณูุงู ุงูุชูุณูู ุ ูุงูุฏูู ุ ูุงูุทุงุจุน ุงูุฒููู ุ ููุฌููุนุฉ ุงูุนูู. ุณุชุจุญุซ ุงููุธููุฉ ุนู ุงูุทุงุจุน ุงูุฒููู ุงูุฐู ุชุนุทูู ูู. ูุญุฏุฉ ุงูุทุงุจุน ุงูุฒููู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุนุฏุฉ ุงูููุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฏูู ุงูุชู ุชูุฑุฑูุง ุฅูู ุงููุธููุฉ. ููุน ุฐูู ุ ูุง ุชุญุชุงุฌ ุฅูู ุชูุฑูุฑู ุฅูู ุงูุฏูู (ูุดุงุฑ ุฅููู ุจุชูุฑูุฑ ุงููููุฉ -1). ุฅุฐุง ููุช ุจุฐูู ุ </font><font style="vertical-align: inherit;">ุณูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font><b><font style="vertical-align: inherit;">ูุญุฏุฉ</font></b><font style="vertical-align: inherit;"> ุงูููุช ุงูุฏุงุฎููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู 1000000 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ. ูุฐุง ูู ุงูุณุจุจ ูู ุฃููุง ุถุฑุจูุง ูููููุง ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏูุง ูููุง ุจุชุนููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุนู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูู ุจุนุถ ุงูุฃุญูุงู ููููู (ูุงุฏุฑูุง) </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฌูุฉ</font></font></b><font style="vertical-align: inherit;"></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดููุงุช ูุจุนุถ ุงููููุงุช ุฅุฐุง ููุช ุจุชูุฑูุฑ </font><nobr><b><font style="vertical-align: inherit;">av_seek_frame</font></b></nobr><nobr><font style="vertical-align: inherit;"> - 1</font></nobr><font style="vertical-align: inherit;"> ููุฏูู ุ ูุฐูู ุณูููู ุจุชุญุฏูุฏ ุงูุฏูู ุงูุฃูู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุง ูุชูุฑูุฑู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู </font><b><font style="vertical-align: inherit;">av_seek_frame</font></b><font style="vertical-align: inherit;"> . ูุง ุชูุณ ุฃูู ูุฌุจ ุนูููุง ุชุบููุฑ ูููุงุณ ุทุงุจุนูุง ุงูุฒููู ุญุชู ูููู ูู "ูุธุงู ุงูุฅุญุฏุงุซูุงุช" ุงูุฌุฏูุฏ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(is-&gt;seek_req) {
  <span class="hljs-keyword">int</span> stream_index= <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int64_t</span> seek_target = is-&gt;seek_pos;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>     (is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;videoStream;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;audioStream;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(stream_index&gt;=<span class="hljs-number">0</span>){<font></font>
    seek_target= av_rescale_q(seek_target, AV_TIME_BASE_Q,<font></font>
                      pFormatCtx-&gt;streams[stream_index]-&gt;time_base);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(av_seek_frame(is-&gt;pFormatCtx, stream_index, <font></font>
                    seek_target, is-&gt;seek_flags) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: error while seeking\n"</span>,<font></font>
            is-&gt;pFormatCtx-&gt;filename);<font></font>
  } <span class="hljs-keyword">else</span> {
     <span class="hljs-comment">/* handle packet queues... more later... */</span>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_rescale_q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูู ูุธููุฉ ุชููู </font><b><font style="vertical-align: inherit;">ุจุชุบููุฑ</font></b><font style="vertical-align: inherit;"> ุญุฌู ุงูุทุงุจุน ุงูุฒููู ูู ูุงุนุฏุฉ ุฅูู ุฃุฎุฑู. ูุชุญุณุจ ุฃุณุงุณุง </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌ</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ูุฃุชู ูุฐุง ูู ูุชูุงูู ุงููุฏูู ูุธููุฉ ููุฐุง ุงูุญุณุงุจ ูู ุจุนุถ ุงูุฃุญูุงู ูุคุฏู ุฅูู ุชุฌุงูุฒ. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE_Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุณุฎุฉ ูุณุฑูุฉ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฅููุง ูุฎุชููุฉ ุชูุงููุง: </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_in_seconds</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec_timestamp</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE_Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec_timestamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_in_seconds</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ููู ูุงุญุธ ุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE_Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูู ุงููุงูุน ูุงุฆู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุธุงุฆู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎุงุตุฉ </font><font style="vertical-align: inherit;">ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec ููุนุงูุฌุชูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุธูู ุนุงุฒูุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูููุง ุจุฅุนุฏุงุฏ ุนูููุงุช ุงูุจุญุซ ุจุดูู ุตุญูุญ ุ ูููููุง ูู ููุชูู ุจุนุฏ. ุชุฐูุฑ ุ ูู ูุฏููุง ูุงุฆูุฉ ุงูุชุธุงุฑ ุชู ุชูููููุง ูุชุฌููุน ุงูุญุฒูุ ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญูุง ูู ุทุงุจุน ุฒููู ูุฎุชูู ุ ูุญุชุงุฌ ุฅูู ูุณุญ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุฐู ุ ูุฅูุง ููู ูุนูู ุงูุจุญุซ ูู ุงููููู! ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ </font><font style="vertical-align: inherit;">ูุฏู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุงุฒู ุฏุงุฎููุฉ ุฎุงุตุฉ ุจูุง ุ ูุงูุชู ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ูุณุญูุง ููู ุชูุงุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุงู ุจุฐูู ุ ูุฌุจ ุนููู ุฃููุงู ูุชุงุจุฉ ุฏุงูุฉ ุชุนูู ุนูู ูุณุญ ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุญุฒู ุงูุฎุงุตุฉ ุจูุง. ุซู ุชุญุชุงุฌ ุฅูู ุฅุฑุดุงุฏ ุฏูู ุงูุตูุช ูุงูููุฏูู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุงูุชู ูุณุญูุง ุงููุฎุงุฒู ุงููุคูุชุฉ ุงูุฏุงุฎููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ูุถุน ุญุฒูุฉ ุฎุงุตุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุนุฏ ุชูุธูููุง ุ ูุนูุฏูุง ููุชุดููู (ุงูุฎููุท) ูุฐู ุงูุญุฒูุฉ ุงูุฎุงุตุฉ ุ ุณูููููู ุจุจุณุงุทุฉ ุจูุณุญ ูุฎุงุฒููู ุงููุคูุชุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุจุฏุฃ ุจูุธููุฉ ุฅุนุงุฏุฉ ุงูุถุจุท. </font><font style="vertical-align: inherit;">ุฅูู ุญููุง ุจุณูุท ุฌุฏูุง ุ ูุฐุง ุณุฃุนุฑุถ ูู ุงูุฑูุฒ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_flush</span><span class="hljs-params">(PacketQueue *q)</span> </span>{<font></font>
  AVPacketList *pkt, *pkt1;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">for</span>(pkt = q-&gt;first_pkt; pkt != <span class="hljs-literal">NULL</span>; pkt = pkt1) {<font></font>
    pkt1 = pkt-&gt;next;<font></font>
    av_free_packet(&amp;pkt-&gt;pkt);<font></font>
    av_freep(&amp;pkt);<font></font>
  }<font></font>
  q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;first_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;nb_packets = <span class="hljs-number">0</span>;<font></font>
  q-&gt;size = <span class="hljs-number">0</span>;<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุจุนุฏ ุฃู ุชู ูุณุญ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ุฃุถู "ุญุฒูุฉ ุงูุชูุธูู" ุงูุฎุงุตุฉ ุจูุง. </font><font style="vertical-align: inherit;">ูููู ุฃููุงู ุ ุณูููู ูู ุงูุฌูุฏ ุชุญุฏูุฏ ูุงููุชู ูุฅูุดุงุฆู:</font></font><br>
<br>
<pre><code class="cpp hljs">AVPacket flush_pkt;<font></font>
<font></font>
main() {<font></font>
  ...<font></font>
  av_init_packet(&amp;flush_pkt);<font></font>
  flush_pkt.data = <span class="hljs-string">"FLUSH"</span>;<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุถุน ูุฐู ุงูุญุฒูุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ:</font></font><br>
<br>
<pre><code class="cpp hljs">  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) {<font></font>
      packet_queue_flush(&amp;is-&gt;audioq);<font></font>
      packet_queue_put(&amp;is-&gt;audioq, &amp;flush_pkt);<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) {<font></font>
      packet_queue_flush(&amp;is-&gt;videoq);<font></font>
      packet_queue_put(&amp;is-&gt;videoq, &amp;flush_pkt);<font></font>
    }<font></font>
  }<font></font>
  is-&gt;seek_req = <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(ููุงุตู ููุชุทู ุงูุดูุฑุฉ ูุฐุง ููุชุทู ุงูุดูุฑุฉ ุฃุนูุงู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decode_thread</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .) ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุนุฏูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packet_queue_put</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ ูุง </font><b><font style="vertical-align: inherit;">ููุฑุฑ</font></b><font style="vertical-align: inherit;"> ุญุฒูุฉ ุฎุงุตุฉ ููุชูุธูู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_put</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt)</span> </span>{<font></font>
<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">if</span>(pkt != &amp;flush_pkt &amp;&amp; av_dup_packet(pkt) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูู ุฏูู ุงูุตูุช ูุงูููุฏูู ูุถุน ูุฐู ุงูููุงููุฉ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec_flush_buffers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจุงุดุฑุฉ ุจุนุฏ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packet_queue_get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;audioq, pkt, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data == flush_pkt.data) {<font></font>
      avcodec_flush_buffers(is-&gt;audio_st-&gt;codec);<font></font>
      <span class="hljs-keyword">continue</span>;<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุทู ุงูุดูุฑุฉ ุฃุนูุงู ูู ููุณู ุชูุงููุง ูุฏูู ุงูููุฏูู ุ ูุน ุงุณุชุจุฏุงู "ุตูุช" ุจู "ููุฏูู". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ูู! </font><font style="vertical-align: inherit;">ููุฏ ูุนููุงูุง! </font><font style="vertical-align: inherit;">ุงุฌูุน ูุงุนุจู:</font></font><br>
<br>
<pre><code class="bash hljs">gcc -o tutorial07 tutorial07.c -lavutil -lavformat -lavcodec -lswscale -lz -lm \<font></font>
`sdl-config --cflags --libs`</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุณุชูุชุน ุจูุดุบู ุงูุฃููุงู ุงูุฎุงุต ุจู ุงููุตููุน ูู ุฃูู ูู 1000 ุณุทุฑ ูู C! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ุ ุจุงูุทุจุน ุ ููุงู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงูุชู ูููู ุฅุถุงูุชูุง ุฃู ุชุญุณูููุง.</font></font><a name="epilogue"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุชูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูุฏุฑุณ 7: ุงูุจุญุซ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅูู ุฌุฏูู ุงููุญุชููุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูุชุฐููู 1. ูุงุฆูุฉ ุงููุธุงุฆู"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ</font></font></a></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูุฏููุง ูุงุนุจ ุนุงูู ุ ูููู ุจุงูุทุจุน ููุณุช ุฌูุฏุฉ ููุง ูููู ุฃู ุชููู. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงููููู ุชุนุฏูู ุงูููู ูุฅุถุงูุฉ ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููููุฏุฉ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ููุงุฌู ุงูุฃูุฑ ุ ูุฐุง ุงููุงุนุจ ุณูุก. </font><font style="vertical-align: inherit;">ุฅุตุฏุงุฑ ffplay.c ุงูุฐู ูุณุชูุฏ ุฅููู ูุฏูู ุชูุงููุง ุ ููุชูุฌุฉ ูุฐูู ุ ูุญุชุงุฌ ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุฅูู ุงููุฑุงุฌุนุฉ ุงูุดุงููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุฑูุฏ ุงูุงูุชูุงู ุฅูู ูุดุฑูุนุงุช ุฃูุซุฑ ุฌุฏูุฉ ุจุงุณุชุฎุฏุงู ููุชุจุงุช FFmpeg ุ ูุฅููู ุฃูุตู ุจุดุฏุฉ ุจุงูุชุญูู ูู ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู ffplay.c ููููุฉ ุชุงููุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅู ูุนุงูุฌุฉ ุงูุฎุทุฃ ูู ุงูููุฏ ุงูุฎุงุต ุจูุง ุฃูุฑ ูุธูุน ููููู ุชูููุฐู ุจุดูู ุฃูุถู.</font></font></li>
<li>      ,  ,   ,     .   ,    <b>paused</b>    ,   ,    .   ,    ,      .     <b>av_read_play</b>.   -   ,     .  ,    ,       . : ,     ffplay.c.</li>
<li> .</li>
<li> .       ,    ,      ,    ,   <b>VOB-</b>.</li>
<li> .   ,        .</li>
<li> .       .</li>
<li>  ,   ,  ,      ,   <b>YUV</b>,             <b>time_base</b>.</li>
<li> .</li>
<li>--,    ;  ffplay.c      .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุนู FFmpeg ุ ููุฏ ูุธุฑูุง ููุง ุจุนูุฏูุง ุนู ูู ุดูุก. ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฏุฑุงุณุฉ ุชุฑููุฒ ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ. ูู ุงูุฃูุถู ุฃู ุชุจุฏุฃ ุจุงูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output_example.c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ุณุชุฌุฏู ูู ุชูุฒูุน FFmpeg. ูููููู ูุชุงุจุฉ ูุชุงุจ ูุฏุฑุณู ุขุฎุฑ ุญูู ูุฐุง ุงูููุถูุน ุจุงููุนู ุ ูููู ูู ุบูุฑ ุงููุญุชูู ุฃู ูุชุฌุงูุฒ ูุฐุง ุงูุฏููู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐ ููุช ุทููู ูู ุฃูู ุจุชุญุฏูุซ ูุฐุง ุงููุต ุ ูููู ูู ุงูููุช ููุณู ูุง ููู ุงูุนุงูู ุซุงุจุชูุง. ูุชุทูุจ ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุชุญุฏูุซุงุช API ุจุณูุทุฉ ููุท ุ ููุฏ ุชุบูุฑ ุงููููู ุฌุฏุง ูู ุญูุซ ุงูููุงููู ุงูุฃุณุงุณูุฉ. ููุฏ ูุงูุช ูุนุธู ูุฐู ุงูุชุญุฏูุซุงุช ุจุชุจุณูุท ุงูููุฏ ุจุงููุนู. ููุน ุฐูู ุ ุนูู ุงูุฑุบู ูู ุฃููู ูุดูุช ูู ุฌููุน ุฃูุญุงุก ุงูููุฏ ูููุช ุจุชุญุฏูุซู ุ ูุง ูุฒุงู FFplay ูุชููููุง ุนูู ูุดุบู ุงูุฃูุนุงุจ ูุฐุง. ูุนุชุฑู ููุจูุง: ูู ูุฐู ุงูุฏุฑูุณ ูุชุจูุง ูุงุนุจ ูููู ุฑุฏูุก ุฌุฏูุง. ูุฐูู ุ ุฅุฐุง ููุช ุชุฑูุฏ ุงูููู (ุฃู ูู ุงููุณุชูุจู) ุชุญุณูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ุฃูุตู ุจุฃู ุชุชุนุฑู ุนูู FFplay ูุชูุชุดู ูุง ูู ููููุฏ. ุฃุนุชูุฏ ุฃู ูุฐุง ูุชุนูู ุฃุณุงุณูุง ุจุงุณุชุฎุฏุงู ูุนุฏุงุช ุงูููุฏูู ุ ูููู ุฑุจูุง ุฃูุชูุฏ ุจุนุถ ุงูุฃุดูุงุก ุงููุงุถุญุฉ ุงูุฃุฎุฑู. ุฑุจูุง ุชุคุฏู ุงูููุงุฑูุฉ ูุน FFplay ุงูุญุงูู ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุฌุฐุฑูุฉ ูุจุนุถ ุงูุฃุดูุงุก - ูู ุฃุดุงูุฏูุง ุจุนุฏ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ูุฎูุฑ ุฌุฏูุง ุจุฃู ุนููู ูุฏ ุณุงุนุฏ ูุซูุฑูุง ุนูู ูุฑ ุงูุณููู ุ ุญุชู ูุน ูุฑุงุนุงุฉ ุญูููุฉ ุฃู ุงูุฃุดุฎุงุต ุบุงูุจูุง ูุง ูุงููุง ูุจุญุซูู ุนู ุฑูุฒ ูู ููุงู ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุฃูุง ููุชู ููุบุงูุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chelyaev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุฐู ุฃุฎุฐ ุนูู ุนุงุชูู ุฑูุชูู ุงุณุชุจุฏุงู ุฌููุน ุงููุธุงุฆู ุงูุชู ุนูุง ุนูููุง ุงูุฒูู ููุฐ ุฃู ูุชุจุช ูุฐู ุงูุฏุฑุงุณุฉ ููุฐ 8 ุณููุงุช (!). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุฑุญ ุนูู ุฃูู ุฃู ุชููู ูุฐู ุงูุฏุฑูุณ ูููุฏุฉ ูููุณุช ูููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ุฃู ุงูุชุฑุงุญุงุช ุฃู ุฃุฎุทุงุก ุฃู ุดูุงูู ุฃู ุดูุฑ ุ ููุง ุฅูู ุฐูู ูููุง ูุชุนูู ุจูุฐุง ุงูุฏููู ุ ูุฑุฌู ุงููุชุงุจุฉ ุฅูู ุนูู dranger dog gmail dot com. </font><font style="vertical-align: inherit;">ููุนู ุ ููุณ ูู ุงูููุทูู ุฃู ุชุทูุจ ููู ุงููุณุงุนุฏุฉ ูู ูุดุฑูุน FFmpeg ุงูุฎุงุต ุจู. </font><font style="vertical-align: inherit;">ููุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนุฏูุฏ ูู </font><font style="vertical-align: inherit;">ุฑุณุงุฆู ููุงุซูุฉ </font><font style="vertical-align: inherit;">.</font></font><a name="functions"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุญู 1. ูุงุฆูุฉ ุงููุธุงุฆู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฎุงุชูุฉ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅูู ุฌุฏูู ุงููุญุชููุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูููุญู 2. ููุงูู ุงูุจูุงูุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ</font></font></a></h2><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avformat_open_input</span><span class="hljs-params">(AVFormatContext **ptr, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * filename, AVInputFormat *fmt, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญ ุงุณู ููู ุงููุณุงุฆุท ููุญูุธ ุณูุงู ุงูุชูุณูู ูู ุงูุนููุงู ุงููุญุฏุฏ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฅุฐุง ูู ููู NULL ุ ูุณูููู ุจุชุนููู ุชูุณูู ุงูููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buf_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฌู ุงููุฎุฒู ุงููุคูุช (ุงุฎุชูุงุฑู). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุชู ููุก </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVDictionary ุจูุนููุงุช AVFormatContext</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู demultiplexer.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">avformat_close_input</span><span class="hljs-params">(AVFormatContext **s)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุบูุงู ููู ุงููุณุงุฆุท. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฅูู ูุง ูุบูู ุจุฑุงูุฌ ุงูุชุฑููุฒ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">nt <span class="hljs-title">avio_open2</span> <span class="hljs-params">(AVIOContext **s, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *url, <span class="hljs-keyword">int</span> flags, <span class="hljs-keyword">const</span> AVIOInterruptCB *int_cb, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุดุงุก ุณูุงู ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ ูุงุณุชุฎุฏุงู ุงูููุฑุฏ ุงููุญุฏุฏ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุงู url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงููุคุดุฑ ุฅูู ุงูููุงู ุงูุฐู ุณูุชู ููู ุฅูุดุงุก </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุต AVIOContext</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุญุงูุฉ ุงููุดู ุ ูุชู ุชุนููู ุงููููุฉ ุงููุญุฏุฏุฉ ุฅูู NULL. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงุณู ุงูููุฑุฏ ูููุตูู ุฅููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุดุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุชุญูู ูู ูุชุญ ุงูููุฑุฏ ุงููุญุฏุฏ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุงู url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int_cb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฑุฏ ุงุชุตุงู ุงูููุงุทุนุฉ ูุงุณุชุฎุฏุงู ูุณุชูู ุงูุจุฑูุชูููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุงููุณ ูุนุจุฃ ุจูุนููุงุช ุงูุจุฑูุชูููู ุงูุฎุงุต. ุนูุฏูุง ุชุนูุฏ ุงูุฏุงูุฉ ุ ุณูุชู ุชุฏููุฑ ุงููุนููุฉ ูุงุณุชุจุฏุงููุง ุจุฅููุงุก ูุญุชูู ุนูู ุฎูุงุฑุงุช ูู ูุชู ุงูุนุซูุฑ ุนูููุง. ูุฏ ุชููู ูุงุฑุบุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_dup_packet</span><span class="hljs-params">(AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุทุจุน ุ ูุฐุง ุงุฎุชุฑุงู: ุฅุฐุง ูู ูุชู ุชุฎุตูุต ูุฐู ุงูุญุฒูุฉ ุ ูุฅููุง ููุดุฑูุง ููุง. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ุนูุฏ ุงููุฌุงุญ ุฃู AVERROR_NOMEM ุนูุฏ ุงููุดู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_find_stream_info</span><span class="hljs-params">(AVFormatContext *s, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุญุซ ูุฐู ุงููุธููุฉ ุนู ูุนูููุงุช ุฏูู ุบูุฑ ูุงุถุญุฉ ุ ูุซู ูุนุฏู ุงูุฅุทุงุฑุงุช. </font><font style="vertical-align: inherit;">ูููุฏ ุฐูู ูู ุชูุณููุงุช ุงููููุงุช ุงูุฎุงููุฉ ูู ุงูุนูุงููู ูุซู MPEG. </font><font style="vertical-align: inherit;">ููุตู ุจุงูุงุชุตุงู ุจุนุฏ ูุชุญ ุงูููู. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน&gt; = 0 ูู ุญุงูุฉ ุงููุฌุงุญ ุ AVERROR_ * ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVFrame *<span class="hljs-title">avcodec_free_frame</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุงุณู ุงููุฏูู ูู av_frame_free. </font><font style="vertical-align: inherit;">ุชู ุงูุชุบููุฑ ูู LAVC 55.28.1.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_frame_free</span> <span class="hljs-params">(AVFrame **frame)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุทูู ุฅุทุงุฑูุง ูุฃู ูุงุฆูุงุช ูุฎุตุตุฉ ุฏููุงูููููุง ููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจูุงูุงุช ููุณุนุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_free</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *ptr)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุทูู ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ุจุงุณุชุฎุฏุงู av_malloc () ุฃู av_realloc (). </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ูุน ptr == NULL. </font><font style="vertical-align: inherit;">ูู ุงููุณุชุญุณู ุงุณุชุฏุนุงุก av_freep () ุจุฏูุงู ูู ุฐูู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_freep</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *ptr)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุฑุฑ ุงูุฐุงูุฑุฉ ููุถุจุท ุงููุคุดุฑ ุนูู NULL. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฏุงุฎูููุง av_free ().</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_free_packet</span><span class="hljs-params">(AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชูุงู ุญูู ุทุฑููุฉ ุชุฏููุฑ ุงูุญุฒูุฉ (pkt-&gt; ุงูุชุฏููุฑ).</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int64_t</span> <span class="hljs-title">av_gettime</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุญุตู ุนูู ุงูููุช ุงูุญุงูู ุจุงููููุฑูุซุงููุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_init_packet</span><span class="hljs-params">(AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููุฆุฉ ุญููู ุงูุญุฒูุฉ ุงูุงุฎุชูุงุฑูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">av_malloc</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> size)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุฌู ุจุงูุช ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุน ูุญุงุฐุงุฉ ููุงุณุจุฉ ูุฌููุน ุนูููุงุช ุงููุตูู ุฅูู ุงูุฐุงูุฑุฉ (ุจูุง ูู ุฐูู ุงููุชุฌูุงุช ุ ุฅุฐุง ูุงูุช ูุชููุฑุฉ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ). </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุนูุฏ av_malloc (0) ูุคุดุฑ ุบูุฑ ุตูุฑู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">av_mallocz</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> size)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดุจู av_malloc () ุ ูููู ุชููุฆุฉ ุงูุฐุงูุฑุฉ ุฅูู ุงูุตูุฑ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">av_q2d</span><span class="hljs-params">(AVRational a)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุถุงุนู AVRational.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_read_frame</span><span class="hljs-params">(AVFormatContext *s, AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฑุฌุงุน ุฅุทุงุฑ ุงูุฏูู ุงูุชุงูู. ูุชู ุชุฎุฒูู ุงููุนูููุงุช ูุญุฒูุฉ ูู pkt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุญุฒูุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง ุตุงูุญุฉ ุญุชู av_read_frame () ุฃู ุญุชู av_close_input_file () ููุฌุจ ุชุญุฑูุฑูุง ุจุงุณุชุฎุฏุงู av_free_packet. ูุญุฒูุฉ ููุฏูู ุชุญุชูู ุนูู ุฅุทุงุฑ ูุงุญุฏ ุจุงูุถุจุท. ุจุงููุณุจุฉ ุฅูู ุงูุตูุช ุ ูุญุชูู ุนูู ุนุฏุฏ ุตุญูุญ ูู ุงูุฅุทุงุฑุงุช ุฅุฐุง ูุงู ููู ุฅุทุงุฑ ุญุฌู ุซุงุจุช ูุนุฑูู (ุนูู ุณุจูู ุงููุซุงู ุ ุจูุงูุงุช PCM ุฃู ADPCM). ุฅุฐุง ูุงูุช ุฅุทุงุฑุงุช ุงูุตูุช ุฐุงุช ุญุฌู ูุชุบูุฑ (ุนูู ุณุจูู ุงููุซุงู ุ ุตูุช MPEG) ุ ูุฅููุง ุชุญุชูู ุนูู ุฅุทุงุฑ ูุงุญุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุนููู ูุฏุฉ pkt-&gt; pts ู pkt-&gt; dts ู pkt-&gt; ุฏุงุฆููุง ุนูู ุงูููู ุงูุตุญูุญุฉ ูู ูุญุฏุงุช AVStream.timebase (ูููุชุฑุถ ุฃู ุงูุชูุณูู ูุง ููููู ุชูููุฑูุง). pkt-&gt; pts ูููู ุฃู ุชููู AV_NOPTS_VALUE ุฅุฐุง ูุงู ุชูุณูู ุงูููุฏูู ุจู ุฅุทุงุฑุงุช B ุ ูุฐุง ูู ุงูุฃูุถู ุงูุงุนุชูุงุฏ ุนูู pkt-&gt; dts ุฅุฐุง ูู ุชูู ุชูุฑูุบ ุงูุญูููุฉ.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0 ุ ุฅุฐุง ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ &lt;0 ุ ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ุฃู ููุงูุฉ ุงูููู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_register_all</span><span class="hljs-params">()</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุฌู ุฌููุน ุจุฑุงูุฌ ุงูุชุฑููุฒ ูู ุงูููุชุจุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int64_t</span> <span class="hljs-title">av_rescale_q</span><span class="hljs-params">(<span class="hljs-keyword">int64_t</span> a, AVRational bq, AVRational cq)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฑุฌุงุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_seek_frame</span><span class="hljs-params">(AVFormatContext *s, <span class="hljs-keyword">int</span> stream_index, <span class="hljs-keyword">int64_t</span> timestamp, <span class="hljs-keyword">int</span> flags)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุญุซ ุนู ุฅุทุงุฑ ุฑุฆูุณู ูู ุทุงุจุน ุฒููู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_index</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฅุฐุง ูุงู stream_index ูุณุงูู -1 ุ ูุณูุชู ุชุญุฏูุฏ ุงูุฏูู ุงูุงูุชุฑุงุถู ููุชู ุชุญููู ุงูุทุงุจุน ุงูุฒููู ุชููุงุฆููุง ูู ูุญุฏุงุช AV_TIME_BASE ุฅูู ูุงุนุฏุฉ ุฒูููุฉ ุฎุงุตุฉ ุจุงูุฏูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุงุจุน ุงูุฒููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุทุงุจุน ุงูุฒููู ุงูููุงุณ ุจูุญุฏุงุช AVStream.time_base ุฃู ุ ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ ุฏูู ุ ูู ูุญุฏุงุช AV_TIME_BASE. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุดุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุถุจุท ุงููุนููุงุช ุงููุชุนููุฉ ุจุงูุงุชุฌุงู ููุถุน ุงูุจุญุซ: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVSEEK_FLAG_ANY: ุงูุจุญุซ ูู ุฃู ุฅุทุงุฑ ุ ูููุณ ููุท ูู ุงูุฅุทุงุฑุงุช ุงูุฑุฆูุณูุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVSEEK_FLAG_BACKWARD: ุงูุจุญุซ ูู ุงูุงุชุฌุงู ุงููุนุงูุณ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVSEEK_FLAG_BYTE: ุงูุจุญุซ ุจูุงุกู ุนูู ุงูููุถุน ุจุงูุจุงูุช.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVFrame *<span class="hljs-title">avcodec_alloc_frame</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุงุณู ุงููุฏูู ูู av_frame_alloc. </font><font style="vertical-align: inherit;">ุชู ุงูุชุบููุฑ ูู LAVC 55.28.1.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVFrame *<span class="hljs-title">av_frame_alloc</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุฏูุฏ AVFrame ูุชููุฆุชู. </font><font style="vertical-align: inherit;">ูููู ุชุญุฑูุฑู ุจุงุณุชุฎุฏุงู av_frame_free ().</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_decode_audio4</span><span class="hljs-params">(AVCodecContext *avctx, AVFrame *frame, <span class="hljs-keyword">int</span> *got_frame_ptr, <span class="hljs-keyword">const</span> AVPacket *avpkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุชุดููุฑ ุฅุทุงุฑ ุตูุชู ูู avpkt ุฅูู ุงูุฅุทุงุฑ. ุชููู ุงูุฏุงูุฉ avcodec_decode_audio4 () ุจูู ุชุดููุฑ ููู ุตูุชู ูู AVPacket. ููู ุชุฑููุฒู ุ ูุชู ุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุชุฑููุฒ ุตูุชู ูุฑุชุจุท ุจู avctx ุจุงุณุชุฎุฏุงู avcodec_open2 (). ูุชู ุชุฎุฒูู ุงูุฅุทุงุฑ ุงูุฐู ุชู ูู ุชุดููุฑู ูู AVFrame ุงููุญุฏุฏ. ุฅุฐุง ุชู ุชูููู ุงูุฅุทุงุฑ ุ ูุณูููู ุจุถุจุท got_frame_ptr ุนูู 1. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฐูุฑ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุจ ุฃู ูููู ุงููุฎุฒู ุงููุคูุช ููุฅุฏุฎุงู ุ avpkt-&gt; ุงูุจูุงูุงุช ุฃูุจุฑ ูู FF_INPUT_BUFFER_PADDING_SIZE ุจูุฑุงุกุฉ ูุญุฏุงุช ุงูุจุงูุช ุงููุนููุฉ ุ ูุฃู ุจุนุถ ุฃุฌูุฒุฉ ูุฑุงุกุฉ ุงูุจุช ุงูุฃุณุงุณูุฉ ุงููุญุณูุฉ ุชูุฑุฃ 32 ุฃู 64 ุจุช ูู ุงููุฑุฉ ุงููุงุญุฏุฉ ููููููุง ุงููุฑุงุกุฉ ููุง ูุตู ุฅูู ุงูููุงูุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avctx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุณูุงู ุงูููุฏูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุทุงุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">ุงูุฅุทุงุฑ</font></b><font style="vertical-align: inherit;"> ุงููุฏู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">got_frame_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงููุฏู int ุ ุงูุฐู ุณูุชู ุชุนูููู ุฅุฐุง ุชู ูู ุงูุฅุทุงุฑ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPKT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: AVPacket ูุญุชูู ุนูู ุตูุช. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ุชู ุฅุฑุฌุงุน ุฎุทุฃ ุ ูุชู ุฅุฑุฌุงุน ูููุฉ ุณุงูุจุฉ ุ ูุฅูุง ุ ูุชู ุฅุฑุฌุงุน ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ุงููุณุชุฎุฏูุฉ ูู ุฅุฏุฎุงู AVPacket.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_decode_video2</span><span class="hljs-params">(AVCodecContext *avctx, AVFrame *picture, <span class="hljs-keyword">int</span> *frameFinished, <span class="hljs-keyword">const</span> AVPacket *avpkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุชุดููุฑ ุฅุทุงุฑ ุงูููุฏูู ูู buf ุฅูู ุตูุฑุฉ. ุชููู ุงูุฏุงูุฉ avcodec_decode_video2 () ุจูู ุชุดููุฑ ุฅุทุงุฑ ููุฏูู ูู ูุฎุฒู ูุคูุช ููุฅุฏุฎุงู ุจุญุฌู buf_size. ููู ุชุฑููุฒู ุ ูุชู ุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุชุฑููุฒ ุงูููุฏูู ุ ูุงูุฐู ูุงู ูุฑุชุจุทูุง ุจู avctx ุจุงุณุชุฎุฏุงู avcodec_open2 (). ูุชู ุญูุธ ุงูุฅุทุงุฑ ุงูุฐู ุชู ูู ุชุดููุฑู ูู ุงูุตูุฑุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฐูุฑ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุซูุฉ ุงููุญุงุฐุงุฉ ููุดุงูู ุงูุชุฎุฒูู ุงููุคูุช ุงูุชู ุชูุทุจู ุนูู avcodec_decode_audio4 ุชูุทุจู ุนูู ูุฐู ุงููุธููุฉ ุฃูุถูุง. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avctx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุณูุงู ุงูููุฏูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตูุฑุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : AVFrame ุงูุฐู ุณูุชู ููู ุญูุธ ุงูููุฏูู ุงูุฐู ุชู ูู ุชุดููุฑู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frameFinished</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุตูุฑ ุฅุฐุง ูู ููู ุจุงูุฅููุงู ูู ุงูุฅุทุงุฑุงุช ุ ูุฅูุง ููู ุชุณุงูู ุตูุฑูุง. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avpkt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุฅุฏุฎุงู AVPacket ูุญุชูู ุนูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช. </font><font style="vertical-align: inherit;">ููููู ุฅูุดุงุก ูุซู ูุฐู ุงูุญุฒูุฉ ุจุงุณุชุฎุฏุงู av_init_packet () ุ ูุจุนุฏ ุชุญุฏูุฏ ุงูุจูุงูุงุช ูุงูุญุฌู ุงููุญุฏุฏ ุ ูุฏ ุชุญุชุงุฌ ุจุนุถ ุฃุฌูุฒุฉ ูู ุงูุชุดููุฑ ุฃูุถูุง ุฅูู ุญููู ุฃุฎุฑู ุ ูุซู ุงูุฅุดุงุฑุงุช ู AV_PKT_FLAG_KEY. </font><font style="vertical-align: inherit;">ุชู ุชุตููู ุฌููุน ุฃุฌูุฒุฉ ูู ุงูุชุดููุฑ ูุงุณุชุฎุฏุงู ุฃูู ุนุฏุฏ ูููู ูู ุงูุญููู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงูุฎุทุฃ ุ ูุชู ุฅุฑุฌุงุน ูููุฉ ุณุงูุจุฉ ุ ูุฅูุง ูุชู ุงุณุชุฎุฏุงู ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ุฃู ุตูุฑ ุฅุฐุง ูู ููู ุจุงูุฅููุงู ูู ุถุบุท ุงูุฅุทุงุฑุงุช.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int64_t</span> <span class="hljs-title">av_frame_get_best_effort_timestamp</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> AVFrame *frame)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุทุฑููุฉ ูุตูู ุจุณูุทุฉ ููุญุตูู ุนูู best_effort_timestamp ูู ูุงุฆู AVFrame.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVCodec *<span class="hljs-title">avcodec_find_decoder</span><span class="hljs-params">(<span class="hljs-keyword">enum</span> CodecID id)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุญุซ ุนู ูุญุฏุฉ ูู ุชุฑููุฒ ุจุงุณุชุฎุฏุงู CodecID. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน NULL ุนูุฏ ุงูุฎุทุฃ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชู ุงุณุชุฏุนุงุคูุง ุจุนุฏ ุงูุญุตูู ุนูู AVCodecContext ุงููุทููุจ ูู ุงูุฏูู ูู AVFormatContext ุจุงุณุชุฎุฏุงู codecCtx-&gt; codec_id.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">avcodec_flush_buffers</span><span class="hljs-params">(AVCodecContetx *avctx)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฏูู ุงูุนุงุฒูุฉ. </font><font style="vertical-align: inherit;">ูุชู ุงูุงุชุตุงู ุจู ุนูุฏ ุงูุจุญุซ ุฃู ุงูุชุจุฏูู ุฅูู ุฏูู ุขุฎุฑ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVCodecContext * <span class="hljs-title">avcodec_alloc_context3</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> AVCodec *codec)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูู AVCodecContext ููุนูู ุญูููู ุนูู ุงูููู ุงูุงูุชุฑุงุถูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_copy_context</span> <span class="hljs-params">(AVCodecContext *dest, <span class="hljs-keyword">const</span> AVCodecContext *src)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุณุฎ ุฅุนุฏุงุฏุงุช AVCodecContext ุงููุตุฏุฑ ุฅูู AVCodecContext ุงููุฏู. </font><font style="vertical-align: inherit;">ุณูุชู ุฅุบูุงู ุงูุณูุงู ุงููุงุชุฌ ูู ุจุฑูุงูุฌ ุชุฑููุฒ ุงููุฌูุฉ ุ ุฃู </font><font style="vertical-align: inherit;">ูุฌุจ ุนููู ุงูุงุชุตุงู ุจู avcodec_open2 () ูุจู ุงุณุชุฎุฏุงู AVCodecContext ูุฐุง ููู ุชุฑููุฒ / ุชุฑููุฒ ุจูุงูุงุช ุงูููุฏูู / ุงูุตูุช. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฌุจ ุฃู ุชุชู ุชููุฆุชู ุจุงุณุชุฎุฏุงู avcodec_alloc_context3 (NULL) ุ ูุฅูุง ููู ุชุชู ุชููุฆุชู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_open2</span><span class="hljs-params">(AVCodecContext *avctx, AVCodec *codec, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููุฆุฉ avctx ูุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุงููุญุฏุฏ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฑูุงูุฌ ุงูุชุฑููุฒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฌุจ ุงุณุชุฎุฏุงูู ุจุนุฏ avcodec_find_decoder. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน ุตูุฑ ุนูุฏ ุงููุฌุงุญ ููููุฉ ุณุงูุจุฉ ุนูุฏ ุงูุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avpicture_fill</span><span class="hljs-params">(AVPicture *picture, <span class="hljs-keyword">uint8_t</span> *ptr, <span class="hljs-keyword">int</span> pix_fmt, <span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุถุจุท ุงูุจููุฉ ุงูุชู ุชุดูุฑ ุฅูููุง ุงูุตูุฑุฉ ุ ูุน ุงููุฎุฒู ุงููุคูุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุชูุณูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pix_fmt ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุนุฑุถ ูุงูุงุฑุชูุงุน ุงููุญุฏุฏูู. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน ุญุฌู ุจูุงูุงุช ุงูุตูุฑุฉ ุจุงูุจุงูุช.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avpicture_get_size</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pix_fmt, <span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณุงุจ ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ุงููุทููุจุฉ ูุตูุฑุฉ ุฐุงุช ุนุฑุถ ุ ุงุฑุชูุงุน ูุชูุณูู ุตูุฑุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">struct SwsContext* <span class="hljs-title">sws_getContext</span><span class="hljs-params">(<span class="hljs-keyword">int</span> srcW, <span class="hljs-keyword">int</span> srcH, <span class="hljs-keyword">int</span> srcFormat, <span class="hljs-keyword">int</span> dstW, <span class="hljs-keyword">int</span> dstH, <span class="hljs-keyword">int</span> dstFormat, <span class="hljs-keyword">int</span> flags, SwsFilter *srcFilter, SwsFilter *dstFilter, <span class="hljs-keyword">double</span> *param)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฑุฌุงุน SwsContext ููุงุณุชุฎุฏุงู ูู sws_scale. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcW</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฑุถ ูุงุฑุชูุงุน ูุชูุณูู ูุญุฏุงุช ุงูุจูุณู ุงููุทููุจุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstW</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฑุถ ูุงุฑุชูุงุน ูุชูุณูู ูุญุฏุงุช ุงูุจูุณู ุงูููุงุฆูุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุนูุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุทุฑููุฉ ุงูุชุญุฌูู ููุงุณุชุฎุฏุงู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ ูุชุงุญุฉ: SWS_FAST_BILINEAR ู SWS_BILINEAR ู SWS_BICUBIC ู SWS_X ู SWS_POINT ู SWS_AREA ู SWS_BICUBLIN ู SWS_GAUSS ู SWS_SINC ู SWS_LANCZOS ู SWS_SPLINE. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุชุถูู ุงูุนูุงูุงุช ุงูุฃุฎุฑู ุฅุดุงุฑุงุช ูุฏุฑุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: SWS_CPU_CAPS_MMX ู SWS_CPU_CAPS_MMX2 ู SWS_CPU_CAPS_3DNOW ู SWS_CPU_CAPS_ALTIVEC.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุดูู ุงูุนูุงูุงุช ุงูุฃุฎุฑู (ุงูุชู ูู ูุชู ุชูููุฐูุง ุจุงููุงูู ุญุงูููุง) SWS_FULL_CHR_H_INT ู SWS_FULL_CHR_H_INP ู SWS_DIRECT_BGR. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ููุงู SWS_ACCURATE_RND ูุฑุจูุง ุงูุฃูุซุฑ ูุงุฆุฏุฉ ูููุจุชุฏุฆูู ุ SWS_PRINT_INFO. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณ ูุฏู ุฃู ููุฑุฉ ุนูุง ููุนูู ูุนุธููู. ุฑุจูุง ุงูุชุจ ููุ </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcFilter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstFilter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : SwsFilter ูููุตุฏุฑ ูุงููุฌูุฉ. ูุชูุญ SwsFilter ููุชุฑุฉ ุงูุฃููุงู / ุงูุณุทูุน. ุงููููู ุงูุงูุชุฑุงุถูู ูุงุฑุบู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฌุจ ุฃู ูููู ูุคุดุฑูุง ููุฎุฒู ูุคูุช int [2] ูุน ุงููุนุงููุงุช. ุบูุฑ ููุซู. ูุจุฏู ุฃูู ูุณุชุฎุฏู ูุชุนุฏูู ุฎูุงุฑุฒููุงุช ุงูููุงุณ ุงูููุงุณูุฉ ููููุงู. ุงููููู ุงูุงูุชุฑุงุถูู ูุงุฑุบู. ููุท ููุฎุจุฑุงุก!</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sws_scale</span><span class="hljs-params">(SwsContext *c, <span class="hljs-keyword">uint8_t</span> *src, <span class="hljs-keyword">int</span> srcStride[], <span class="hljs-keyword">int</span> srcSliceY, <span class="hljs-keyword">int</span> srcSliceH, <span class="hljs-keyword">uint8_t</span> dst[], <span class="hljs-keyword">int</span> dstStride[]
sws_scale(sws_ctx, pFrame-&gt;data, pFrame-&gt;linesize, <span class="hljs-number">0</span>, is-&gt;video_st-&gt;codec-&gt;height, pict.data, pict.linesize);</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู </font><b><font style="vertical-align: inherit;">ุจููุงุณ ุงูุจูุงูุงุช ุจุชูุณูู </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">src</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุง ูุฅุนุฏุงุฏุงุชูุง ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwsContext * c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcStride</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstStride</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ุฃุญุฌุงู ุตู ุงููุตุฏุฑ ูุงููุฌูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_TimerID <span class="hljs-title">SDL_AddTimer</span><span class="hljs-params">(Uint32 interval, SDL_NewTimerCallback callback, <span class="hljs-keyword">void</span> *param)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุถูู ูุธููุฉ ุฑุฏ ุงุชุตุงู ูุชู ุชุดุบูููุง ุจุนุฏ ุนุฏุฏ ูุญุฏุฏ ูู ุงููููู ุซุงููุฉ. ุชููู ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ุจุชูุฑูุฑ ุงููุงุตู ุงูุฒููู ูููููุช ุงูุญุงูู ูุงููุนููุฉ ุงูุชู ูููุฑูุง ุงููุณุชุฎุฏู ูู ุงุณุชุฏุนุงุก SDL_AddTimer ูุฅุฑุฌุงุน ุงููุงุตู ุงูุฒููู ูููููุช ุงูุชุงูู. (ุฅุฐุง ุชุทุงุจู ุงููููุฉ ุงููุฑุฌุนุฉ ูุฑุฏ ุงูุงุชุตุงู ูุน ุงููููุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุ ูุณุชูุฑ ุงููุคูุช ูู ุงูุนูู ุจููุณ ุงูุณุฑุนุฉ.) ุฅุฐุง ูุงูุช ูููุฉ ุงูุฅุฑุฌุงุน ูุฑุฏ ุงูุงุชุตุงู ูู 0 ุ ูุณูุชู ุฅูุบุงุก ุงููุคูุช. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุทุฑููุฉ ุฃุฎุฑู ูุฅูุบุงุก ุงููุคูุช ุงูุญุงูู ููู ุงุณุชุฏุนุงุก SDL_RemoveTimer ุจุงุณุชุฎุฏุงู ูุนุฑู ุงููุคูุช (ุงูุฐู ุชู ุฅุฑุฌุงุนู ูู SDL_AddTimer). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏ ูุชู ุชูููุฐ ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ูููุคูุช ุนูู ูุคุดุฑ ุชุฑุงุจุท ูุฎุชูู ุนู ุจุฑูุงูุฌู ุงูุฑุฆูุณู ุ ูุจุงูุชุงูู ูุง ูุฌุจ ุงุณุชุฏุนุงุก ุฃู ูุธุงุฆู ูู ุชููุงุก ููุณูุง. ููุน ุฐูู ุ ููููู ุฏุงุฆููุง ุงูุงุชุตุงู ุจู SDL_PushEvent.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุชูุฏ ุฏุฑุฌุฉ ุชูุงุตูู ุงููุคูุช ุนูู ุงููุธุงู ุงูุฃุณุงุณู ุ ูููู ูุฌุจ ุฃู ุชุชููุน ุฃูู ูุง ููู ุนู 10 ูููู ุซุงููุฉ ุ ูุฃู ูุฐู ูู ุงููููุฉ ุงูุฃูุซุฑ ุดููุนูุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุฅุฐุง ุทูุจุช ูุคูุช 16 ูููู ุซุงููุฉ ุ ูุณูุจุฏุฃ ุฑุฏ ุงูุงุชุตุงู ุจุนุฏ ุญูุงูู 20 ูููู ุซุงููุฉ ุนูู ูุธุงู ุบูุฑ ูุญูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุนููู ุฅุดุงุฑุฉ ุชุดูุฑ ุฅูู ุชุญุฏูุซ ุงูุฅุทุงุฑุงุช ุจุณุฑุนุฉ 30 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ (ูู 33 ูููู ุซุงููุฉ) ุ ููููู ุชุนููู ูุคูุช ููุฏุฉ 30 ูููู ุซุงููุฉ (ุงูุธุฑ ุงููุซุงู ุฃุฏูุงู). </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุณุชุฎุฏู ูุฐู ุงููุธููุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุชูุฑูุฑ SDL_INIT_TIMER ุฅูู SDL_Init. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฑุฌุงุน ูููุฉ ุงููุนุฑู ูุฌูุงุฒ ุถุจุท ุงูููุช ุงููุถุงู ุฃู NULL ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุณูู ุฑุฏ ุงูุงุชุตุงู:</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-function">Uint32 <span class="hljs-title">callback</span> <span class="hljs-params">( Uint32, <span class="hljs-keyword">void</span> * param)</span></span></code></pre><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_CondSignal</span><span class="hljs-params">(SDL_cond *cond)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุนุงุฏุฉ ุชุดุบูู ุฃุญุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุงูุชุธุงุฑ ูุชุบูุฑ ุญุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cond</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ุนูุฏ ุงููุฌุงุญ ู -1 ุนูุฏ ุงูุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_CondWait</span><span class="hljs-params">(SDL_cond *cond, SDL_mutex *mut)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุฅูุบุงุก ุชุฃููู ูุงุฆู ุงููุฒุงููุฉ ุงูููุฏู ูุงูุชุธุฑ ุณูุณูุฉ ุฑุณุงุฆู ุฃุฎุฑู ูุงุณุชุฏุนุงุก SDL_CondSignal ุฃู SDL_CondBroadcast ููุชุบูุฑ ุงูุดุฑุท ุ ุซู ุฃุนุฏ ููู ููู ุงููุฒุงููุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุชุฃููู ูุงุฆู ุงููุฒุงููุฉ ูุจู ุฏุฎูู ูุฐู ุงููุธููุฉ. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ุนูุฏ ุชููู ุฅุดุงุฑุฉ ุฃู -1 ุนูุฏ ุงูุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_cond *<span class="hljs-title">SDL_CreateCond</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุดุฆ ูุชุบูุฑ ุดุฑุท.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_Thread *<span class="hljs-title">SDL_CreateThread</span><span class="hljs-params">(<span class="hljs-keyword">int</span> (*fn)(<span class="hljs-keyword">void</span> *), <span class="hljs-keyword">void</span> *data)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุดุฆ SDL_CreateThread ุณูุณูุฉ ุชูููุฐ ุฌุฏูุฏุฉ ุชุดุงุฑู ูู ุงูุฐุงูุฑุฉ ุงูุนุงูููุฉ ุจุฃููููุง ูุฃุตููุง ุ ููุนุงูุฌุงุช ุงูุฅุดุงุฑุฉ ุ ููุงุตูุงุช ุงูููู ุ ุฅูุฎ. </font><font style="vertical-align: inherit;">ููููู ุจุชุดุบูู ุฏุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fn</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููุฑุฑูุง ุจูุงูุงุช ูุคุดุฑ ุงููุฑุงุบ. </font><font style="vertical-align: inherit;">ูุคุดุฑ ุงูุชุฑุงุจุท ููุชูู ุนูุฏูุง ุชููู fn ุจุฅุฑุฌุงุน ูููุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_Delay</span> <span class="hljs-params">(Uint32 )</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุธุฑ ุงูุนุฏุฏ ุงููุญุฏุฏ ูู ุงููููู ุซุงููุฉ. SDL_Delay ุณููุชุธุฑ ุนูู ุงูุฃูู ุงูููุช ุงููุญุฏุฏ ุ ูููู ุฑุจูุง ุฃุทูู ุจุณุจุจ ุชุฎุทูุท ูุธุงู ุงูุชุดุบูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญูุธุฉ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููุน ุฏูุฉ ุชุฃุฎูุฑ ูุง ุชูู ุนู 10 ูููู ุซุงููุฉ. ุชุญุชูู ุจุนุถ ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุนูู ููุงููุณ ุฃูุตุฑ ุ ูููู ูุฐุง ูู ุงูุฎูุงุฑ ุงูุฃูุซุฑ ุดููุนูุง.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_Overlay *<span class="hljs-title">SDL_CreateYUVOverlay</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height, Uint32 format, SDL_Surface *display)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_CreateYUVOverlay ููุดุฆ ุชุฑุงูุจ YUV ููุนุฑุถ ูุงูุงุฑุชูุงุน ูุงูุชูุณูู ุงููุญุฏุฏ (ููุญุตูู ุนูู ูุงุฆูุฉ ุจุงูุชูุณููุงุช ุงููุชุงุญุฉ ุ ุงูุธุฑ ุจููุฉ ุจูุงูุงุช SDL_Overlay) ููุนุฑุถ ุงูููุฏู. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน SDL_Overlay. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุดุงุดุฉ ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุงูุน ุณุทุญูุง ูุดุชููุง ูู SDL_SetVideoMode ุ ูุฅูุง ุณุชุนูู ูุฐู ุงููุธููุฉ ุงูุชุฑุงุถููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุตุทูุญ "ุชุฑุงูุจ" ุบูุฑ ุตุญูุญ ุ ูุฃูู ุฅุฐุง ูู ูุชู ุฅูุดุงุก ุงูุชุฑุงูุจ ูู ุงูุฃุฌูุฒุฉ ุ ูุณูุชู ุงุณุชุจุฏุงู ูุญุชููุงุช ุณุทุญ ุงูุนุฑุถ ุฃุณูู ุงูููุทูุฉ ุงูุชู ูุชู ูููุง ุนุฑุถ ุงูุชุฑุงูุจ ุนูุฏ ุนุฑุถ ุงูุชุฑุงูุจ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_LockYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูู SDL_LockYUVO ุนูู ุญุธุฑ ุงูุชุฑุงูุจ ูููุตูู ุงููุจุงุดุฑ ุฅูู ุจูุงูุงุช ุงูุจูุณู. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ุนูุฏ ุงููุฌุงุญ ุฃู -1 ุนูุฏ ุงูุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_UnlockYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญ ุชุฑุงูุจ ูููู ุณุงุจูุง. </font><font style="vertical-align: inherit;">ูุฌุจ ุฅูุบุงุก ุชุฃููู ุงูุชุฑุงูุจ ูุจู ุฃู ูุชู ุนุฑุถู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_DisplayYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay, SDL_Rect *dstrect)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุถุน ุงูุชุฑุงูุจ ุนูู ุงูุณุทุญ ุงููุญุฏุฏ ุนูุฏ ุฅูุดุงุฆู. </font><font style="vertical-align: inherit;">ุชุญุฏุฏ ุจููุฉ dstrect SDL_Rect ููุถุน ูุญุฌู ุงููุฌูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู dstrect ูู ุชุฑุงูุจ ุฃูุซุฑ ุฃู ุฃูู ุ ูุณูุชู ุชุญุฌูู ุงูุชุฑุงูุจ ุ ุญูุซ ูุชู ุชุญุณูู ูุฐุง ููุชูุจูุฑ 2x. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ุฅุฐุง ูุฌุญ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_FreeYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุทูู ุงูุชุฑุงูุจ ุงูุฐู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ SDL_CreateYUVOverlay.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_Init</span><span class="hljs-params">(Uint32 flags)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููุฆุฉ SDL. ูุฌุจ ุงุณุชุฏุนุงุก ูุฐุง ูุจู ูุงูุฉ ูุธุงุฆู SDL ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุชุญุฏุฏ </font><font style="vertical-align: inherit;">ูุนููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุดุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฌุฒุงุก SDL ุงููุฑุงุฏ ุชููุฆุชูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_TIMER - ุชููุฆุฉ ุงููุธุงู ุงููุฑุนู ูููุคูุช. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_AUDIO - ุชููุฆุฉ ุงููุธุงู ุงููุฑุนู ุงูุตูุชู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_VIDEO - ุชููุฆุฉ ุงููุธุงู ุงููุฑุนู ููููุฏูู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_CDROM - ุชููุฆุฉ ุงููุธุงู ุงููุฑุนู ูููุฑุต ุงููุถุบูุท. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_JOYSTICK - ุชููุฆุฉ ุงููุธุงู ุงููุฑุนู ูุนุตุง ุงูุชุญูู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_EVERYTHING - ุชููุฆุฉ ูู ูุง ุณุจู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_NOPARACHUTE - ูุง ูุณูุญ ูู SDL ุจุงูุชูุงุท ุงูุฃุฎุทุงุก ุงููุงุฏุญุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_EVENTTHREAD - ูููู ุจุชุดุบูู ูุฏูุฑ ุงูุฃุญุฏุงุซ ูู ุณูุณูุฉ ูุญุงุฏุซุงุช ูููุตูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฑุฌุงุน -1 ุนูู ุฎุทุฃ ุฃู 0 ุนูุฏ ุงููุฌุงุญ. </font><font style="vertical-align: inherit;">ููููู ุงูุญุตูู ุนูู ุฑุณุงูุฉ ุฎุทุฃ ููุณุนุฉ ุนู ุทุฑูู ุงุณุชุฏุนุงุก SDL_GetError. </font><font style="vertical-align: inherit;">ุงูุณุจุจ ุงููุนุชุงุฏ ููุฎุทุฃ ูู ุงุณุชุฎุฏุงู ุดุงุดุฉ ุนุฑุถ ูุญุฏุฏุฉ ุฏูู ุฏุนู ููุงุจู ูููุธุงู ุงููุฑุนู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนุฏู ูุฌูุฏ ุจุฑูุงูุฌ ุชุดุบูู ุงููุงูุณ ุนูุฏ ุงุณุชุฎุฏุงู ูุฎุฒู ูุคูุช ููุฅุทุงุฑ ูุน ุงูุฌูุงุฒ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุฅูุง ุชุฌููุน SDL ุจุฏูู ูุงูุณ ุ ุฃู ุชุนููู ูุชุบูุฑ ุงูุจูุฆุฉ "SDL_NOMOUSE = 1" ูุจู ุจุฏุก ุงูุชุทุจูู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_mutex *<span class="hljs-title">SDL_CreateMutex</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุดุงุก ูุงุฆู ูุฒุงููุฉ ุฌุฏูุฏ ุบูุฑ ูุคูู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_LockMutex</span><span class="hljs-params">(SDL_mutex *mutex)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_LockMutex ูู ุงุณู ูุณุชุนุงุฑ ูู SDL_mutexP. </font><font style="vertical-align: inherit;">ูุญุธุฑ ูุงุฆู ุงููุฒุงููุฉ ุงูุฐู ุชู ุฅูุดุงุคู ูุณุจููุง ุจุงุณุชุฎุฏุงู SDL_CreateMutex. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุญุธุฑ ูุงุฆู ุงููุฒุงููุฉ ุจุงููุนู ุจูุงุณุทุฉ ูุคุดุฑ ุชุฑุงุจุท ุขุฎุฑ ุ ููู ูููู SDL_mutexP ุจุฅุฑุฌุงุน ูููุฉ ุญุชู ูููู ูุคุดุฑ ุงูุชุฑุงุจุท ุงููุญุธูุฑ ุจูุชุญู (ุจุงุณุชุฎุฏุงู SDL_mutexV). </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก ูุงุฆู ุงููุฒุงููุฉ ูุฑุฉ ุฃุฎุฑู ุ ูุฌุจ ุงุณุชุฏุนุงุก SDL_mutexV (ุงููุนุฑูู ุฃูุถูุง ุจุงุณู SDL_UnlockMutex) ุนุฏุฏูุง ูุชุณุงูููุง ูู ุงููุฑุงุช ูุฅุนุงุฏุฉ ูุงุฆู ุงููุฒุงููุฉ ุฅูู ุญุงูุฉ ุบูุฑ ูุคููุฉ. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ุนูุฏ ุงููุฌุงุญ ุฃู -1 ุนูุฏ ุงูุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_UnlockMutex</span><span class="hljs-params">(SDL_Mutex *mutex)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุบุงุก ุชุฃููู Mutex.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_OpenAudio</span><span class="hljs-params">(SDL_AudioSpec *desired, SDL_AudioSpec *obtained)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนูู ูุฐู ุงููุธููุฉ ุนูู ูุชุญ ูุญุฏุฉ ุงูุตูุช ุจุงููุนููุงุช ุงููุทููุจุฉ ูุฅุฑุฌุงุน 0 ูู ุญุงูุฉ ูุฌุงุญูุง ุ ููุถุน ูุนููุงุช ุงูุฃุฌูุฒุฉ ุงููุนููุฉ ูู ุงูุจููุฉ ุงูุชู ุชุดูุฑ ุฅูููุง ูู ุงูููุงูุฉ. ุฅุฐุง ุชู ุงุณุชูุงู ูููุฉ ูุงุฑุบุฉ (NULL) ุ ูุณูุชู ุถูุงู ุฃู ุชููู ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ุชุญุชูู ุนูู ุงูุชูุณูู ุงููุทููุจ ุ ูุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุณูุชู ุชุญููููุง ุชููุงุฆููุง ุฅูู ุชูุณูู ุตูุช ุงูุฃุฌูุฒุฉ. ุชุฑุฌุน ูุฐู ุงููุธููุฉ -1 ุฅุฐุง ุชุนุฐุฑ ูุชุญ ุฌูุงุฒ ุงูุตูุช ุฃู ุชุนุฐุฑ ุชูููู ุฏูู ุงูุตูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญ ุฌูุงุฒ ุตูุชู ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก SDL_AudioSpec ุงููุทููุจ. ุซู ุชุญุชุงุฌ ูููุก ูุฐุง ุงููููู ุจุงูููุงุตูุงุช ุงูุตูุชูุฉ ุงููุทููุจุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; freq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุทููุจ: ุชุฑุฏุฏ ุงูุตูุช ุงููุทููุจ ูู ุงูุนููุงุช ูู ุงูุซุงููุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุณูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุทููุจ </font><b><font style="vertical-align: inherit;">&gt; ุชูุณูู</font></b><font style="vertical-align: inherit;"> ุงูุตูุช ุงููุทููุจ (ุฑุงุฌุน SDL_AudioSpec). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุช ุงููุฑุบูุจุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุงููููุงุช ุงููุทููุจุฉ (1 ููุฃุญุงุฏูุฉ ุ 2 ููุงุณุชุฑูู ุ 4 ููุตูุช ุงููุญูุทู ุ 6 ููุตูุช ุงููุญูุทู ูุน ุชูุณูุท ู LFE). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนููุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุทููุจุฉ </font><b><font style="vertical-align: inherit;">&gt;</font></b><font style="vertical-align: inherit;"> ุญุฌู ุงููุฎุฒู ุงูุตูุชู ุงููุทููุจ ูู ุงูุนููุงุช. ูุฌุจ ุฃู ูููู ูุฐุง ุงูุฑูู ููุฉ ูู ุงุซููู ููููู ุถุจุทู ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุชุดุบูู ุงูุตูุช ุฅูู ูููุฉ ุฃูุซุฑ ููุงุกูุฉ ููุฃุฌูุฒุฉ. ุชุชุฑุงูุญ ุงูููู ุงููุซูู ูู 512 ุฅูู 8192 ุดุงููุฉ ุ ุญุณุจ ุงูุชุทุจูู ูุณุฑุนุฉ ุงููุนุงูุฌ. ุชุคุฏู ุงูููู ุงูุฃุตุบุฑ ุฅูู ุฃููุงุช ุงุณุชุฌุงุจุฉ ุฃุณุฑุน ุ ูููู ูููู ุฃู ุชุคุฏู ุฅูู ุฃุฏุงุก ุถุนูู ุฅุฐุง ูุงู ุงูุชุทุจูู ูููู ุจูุนุงูุฌุฉ ุซูููุฉ ููุง ููููู ููุก ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ูู ุงูููุช ุงูููุงุณุจ. ุชุชููู ุนููุฉ ุงูุงุณุชุฑูู ูู ุงููููุงุช ุงููููู ูุงููุณุฑู ุจุชุฑุชูุจ LR. ูุฑุฌู ููุงุญุธุฉ ุฃู ุนุฏุฏ ุงูุนููุงุช ูุฑุชุจุท ูุจุงุดุฑุฉ ุจุงูููุช ุจุงุณุชุฎุฏุงู ุงูุตูุบุฉ ุงูุชุงููุฉ: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ms</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = (</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * 1000) / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฑุงุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุทููุจ&gt; ุฑุฏ ุงูุงุชุตุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฌุจ ุชุนูููู ุนูู ูุธููุฉ ุณูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏูุง ุชููู ูุญุฏุฉ ุงูุตูุช ุฌุงูุฒุฉ ูุงุณุชูุจุงู ุจูุงูุงุช ุฅุถุงููุฉ. ูุชู ุฅุฑุณุงู ูุคุดุฑ ุงููุฎุฒู ุงูุตูุชู ูุงูุทูู ุจุงูุจุงูุช ูู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู. ุนุงุฏุฉู ูุง ูุชู ุชูููุฐ ูุฐู ุงููุธููุฉ ูู ุณูุณูุฉ ูุญุงุฏุซุงุช ูููุตูุฉ ุ ูุจุงูุชุงูู ููู ุงูุถุฑูุฑู ุญูุงูุฉ ููุงูู ุงูุจูุงูุงุช ุงูุชู ุชุตู ุฅูููุง ุนู ุทุฑูู ุงุณุชุฏุนุงุก SDL_LockAudio ู SDL_UnlockAudio ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. ุงููููุฐุฌ ุงูุฃููู </font><nobr><b><font style="vertical-align: inherit;">ูุฑุฏ</font></b></nobr><font style="vertical-align: inherit;"> ุงูุงุชุตุงู ูู </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุฏ ุจุงุทู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">userdata</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uint8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int len</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงูุงุช ุงููุณุชุฎุฏู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุคุดุฑ ูุฎุฒูู ูู ุญูู ุจูุงูุงุช ุงููุณุชุฎุฏู SDL_AudioSpec. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุฑู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุคุดุฑ ุฅูู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ุงูุฐู ุชุฑูุฏ ููุคู ุจุงููุนูููุงุช ุ ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">len</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุทูู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ุจุงูุจุงูุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทููุจ&gt; ุจูุงูุงุช ุงููุณุชุฎุฏู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุชู ุชูุฑูุฑ ูุฐุง ุงููุคุดุฑ ููุนููุฉ ุฃููู ููุธููุฉ ุฑุฏ ุงูุงุชุตุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑุฃ SDL_OpenAudio ูุฐู ุงูุญููู ูู ุจููุฉ SDL_AudioSpec ุงููุทููุจุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู ุงููุธููุฉ ููุญุงูู ุงูุนุซูุฑ ุนูู ุงูุชูููู ุงูุตูุชู ุงูุฐู ูุทุงุจู ุฑุบุจุชู. ููุง ุฐูุฑ ุฃุนูุงู ุ ุฅุฐุง ูุงูุช ุงููุนููุฉ ุงููุงุชุฌุฉ ูู NULL ุ ูุชู ุชุญููู SDL ูู ุฅุนุฏุงุฏุงุช ุงูุตูุช ุงููุทููุจุฉ ุฅูู ุฅุนุฏุงุฏุงุช ุงูุฌูุงุฒ ุฃุซูุงุก ุงูุชุดุบูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุชู ุฅุฑุฌุงุน NULL ุ ูุฅู SDL_AudioSpec ุงููุทููุจ ูู ููุงุตูุงุช ุงูุนูู ุงูุฎุงุตุฉ ุจู ุ ูุฅูุง ูุตุจุญ SDL_AudioSpec ุงููุงุชุฌ ููุงุตูุงุช ุนูู ุ ููููู ุญุฐู ุงูููุงุตูุงุช ุงููุทููุจุฉ. ูุชู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู ููุงุตูุงุช ุงูุนูู ุนูุฏ ุฅูุดุงุก SDL_AudioCVT ูุชุญููู ุงูุจูุงูุงุช ุงูุชู ุชู ุชูุฒูููุง ุฅูู ุชูุณูู ุงููุนุฏุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณุจ SDL_OpenAudio ุญููู ุงูุญุฌู ูุงูุตูุช ููู ูู ุงูููุงุตูุงุช ุงููุฑุบูุจุฉ ูุงูููุงุตูุงุช ุงููุงุชุฌุฉ. ูุฎุฒู ุญูู ุงูุญุฌู ุงูุญุฌู ุงูููู ููุฎุฒู ุงูุตูุช ุงููุคูุช ุจุงูุจุงูุช ุ ุจูููุง ูุฎุฒู ุงูุตูุช ุงููููุฉ ุงููุณุชุฎุฏูุฉ ูุชูุซูู ุงูุตูุช ูู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ุฌูุงุฒ ุงูุตูุช ูู ุงูุชุดุบูู ุจุตูุช ุนูุฏูุง ูููู ููุชูุญูุง ููุฌุจ ุชุดุบููู ููุชุดุบูู ูู ุฎูุงู ุงูุงุชุตุงู ุจู SDL_PauseAudio (0) ุนูุฏูุง ุชููู ูุณุชุนุฏูุง ูุงุณุชุฏุนุงุก ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ุงูุตูุชู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุจุฑูุงูุฌ ุชุดุบูู ุงูุตูุช ููููู ุชุบููุฑ ุงูุญุฌู ุงููุทููุจ ููุฎุฒู ุงูุตูุช ุงููุคูุช ุ ูุฌุจ ุชุญุฏูุฏ ุฃู ูุฎุงุฒู ูุญููุฉ ููุฎูุงุท ุจุนุฏ ูุชุญ ุฌูุงุฒ ุงูุตูุช.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_PauseAudio</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pause_on)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู ูุฐู ุงููุธููุฉ ุจุฅููุงู ูุนุงูุฌุฉ ุฑุฏ ุงูุงุชุตุงู ุงูุตูุชู ูุคูุชูุง ูุฅููุงููุง. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชู ุงุณุชุฏุนุงุคู ุจุงุณุชุฎุฏุงู pause_on = 0 ุจุนุฏ ูุชุญ ุฌูุงุฒ ุงูุตูุช ูุจุฏุก ุชุดุบูู ุงูุตูุช. </font><font style="vertical-align: inherit;">ูุณูุญ ูู ุฐูู ุจุชููุฆุฉ ุงูุจูุงูุงุช ููุธููุฉ ุฑุฏ ุงูุงุชุตุงู ุจุฃูุงู ุจุนุฏ ูุชุญ ูุญุฏุฉ ุงูุตูุช. </font><font style="vertical-align: inherit;">ุณูุชู ุชุณุฌูู ุงูุตูุช ุนูู ุฌูุงุฒ ุงูุตูุช ุฃุซูุงุก ูููุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_PushEvent</span><span class="hljs-params">(SDL_Event *event)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฆูุฉ ุงูุชุธุงุฑ ุญุฏุซ ูุชู ุงุณุชุฎุฏุงููุง ุจุงููุนู ูููุงุฉ ุงุชุตุงู ุซูุงุฆูุฉ ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ูุง ูููู ููุท ูุฑุงุกุฉ ุงูุฃุญุฏุงุซ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูููู ูููู ูููุณุชุฎุฏู ุฃูุถูุง ูุถุน ุงูุฃุญุฏุงุซ ุงูุฎุงุตุฉ ุจู ูููุง. </font><font style="vertical-align: inherit;">ุงูุญุฏุซ ุนุจุงุฑุฉ ุนู ูุคุดุฑ ูุจููุฉ ุงูุญุฏุซ ุงูุฐู ุชุฑูุฏ ูุถุนู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ูุชู ูุณุฎ ุงูุญุฏุซ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ููููู ูููุชุตู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุดุงุฑ ุฅูููุง ุจุนุฏ ุฅุฑุฌุงุน SDL_PushEvent. </font><font style="vertical-align: inherit;">ูุฐู ุงููุธููุฉ ููุฌูุฉ ููุฎูุท ููููู ุงุณุชุฏุนุงุคูุง ุจุฃูุงู ูู ุฎููุท ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุฅุฑุฌุงุน 0 ูู ุญุงูุฉ ูุฌุงุญ ุฃู -1 ุฅุฐุง ุชุนุฐุฑ ุฅุฑุณุงู ุงูุญุฏุซ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_WaitEvent</span><span class="hljs-params">(SDL_Event *event)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุธุฑ ุฅูู ุฃุฌู ุบูุฑ ูุณูู ููุญุฏุซ ุงููุชุงุญ ุงูุชุงูู ุ ููุนูุฏ 0 ุฅุฐุง ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุธุงุฑ ุงูุฃุญุฏุงุซ ุ 1 ุฎูุงู ุฐูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุญุฏุซ ูุงุฑุบูุง ุ ูุณูุชู ุฅุฒุงูุฉ ุงูุญุฏุซ ุงูุชุงูู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุชุฎุฒููู ูู ูุฐู ุงูููุทูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_Quit</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุทูู ูุงูุฉ ุฃูุธูุฉ SDL ุงููุฑุนูุฉ ูุชุญุฑูุฑ ุงูููุงุฑุฏ ุงููุฎุตุตุฉ ููุง. ูุฌุจ ุฃู ูุชู ุงุณุชุฏุนุงุก ูุฐุง ุฏุงุฆููุง ูุจู ุงูุฎุฑูุฌ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_Surface *<span class="hljs-title">SDL_SetVideoMode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height, <span class="hljs-keyword">int</span> bitsperpixel, Uint32 flags)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุนุฏุงุฏ ูุถุน ุงูููุฏูู ูุน ุงูุนุฑุถ ูุงูุงุฑุชูุงุน ูุจุช ูุญุฏุงุช ุงูุจูุณู ุงููุญุฏุฏุฉ. ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 1.2.10 ูู SDL ุ ุฅุฐุง ูุงู ุงูุนุฑุถ ูุงูุงุฑุชูุงุน ูุณุงูู 0 ุ ูุณูุณุชุฎุฏู ุนุฑุถ ูุงุฑุชูุงุน ูุถุน ุงูููุฏูู ุงูุญุงูู (ุฃู ูุถุน ุณุทุญ ุงูููุชุจ ุฅุฐุง ูู ูุชู ุชุนููู ุงููุถุน). ุฅุฐุง ูุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bitsperpixel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุงูู 0 ุ </font><b><font style="vertical-align: inherit;">ูุณูุชู</font></b><font style="vertical-align: inherit;"> ูุนุงููุชู ุนูู ุฃูู ุจุชุงุช ุงูุนุฑุถ ุงูุญุงููุฉ ููู ุจูุณู. ูุนููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุดุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุณูุง ุญูู ุงูุฅุดุงุฑุงุช ูุจููุฉ SDL_Surface. ุฃู ูุฒูุฌ ูู ุงูููู ุงูุชุงููุฉ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SWSURFACE - ุฅูุดุงุก ุณุทุญ ููุฏูู ูู ุฐุงูุฑุฉ ุงููุธุงู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWSURFACE - ุฅูุดุงุก ุณุทุญ ููุฏูู ูู ุฐุงูุฑุฉ ุงูููุฏูู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ASYNCBLIT - ุชูููู ุงุณุชุฎุฏุงู ุงูุชุญุฏูุซุงุช ุบูุฑ ุงููุชุฒุงููุฉ ุนูู ุณุทุญ ุงูุดุงุดุฉ. ุนุงุฏุฉ ูุง ูุคุฏู ุฐูู ุฅูู ุฅุจุทุงุก ุงูุนูู ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุฐุงุช ุงููุนุงูุฌ ุงููุงุญุฏ ุ ูููู ูููู ุฃู ูุฒูุฏ ุงูุณุฑุนุฉ ูู ุฃูุธูุฉ SMP.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ANYFORMAT - ุนุงุฏุฉู ุ ุฅุฐุง ูุงู ุณุทุญ ุงูููุฏูู ุงูุฐู ูุญุชูู ุนูู ูุญุฏุงุช ุงูุจุช ุงููุทููุจุฉ ููู ุจูุณู (bpp - ูู ูุญุฏุงุช ุงูุจุช ููู ุจูุณู) ุบูุฑ ูุชููุฑ ุ ูุณุชููู SDL ุจูุญุงูุงุฉ ุงูููุฏูู ุจุณุทุญ ูุธูู. ูููุน ุชูุฑูุฑ SDL_ANYFORMAT ุฐูู ููุฌุจุฑ SDL ุนูู ุงุณุชุฎุฏุงู ุณุทุญ ุงูููุฏูู ุ ุจุบุถ ุงููุธุฑ ุนู ุนูู ูุญุฏุงุช ุงูุจูุณู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWPALETTE - ุชูููุฑ ูุตูู ุฎุงุต ูู SDL ุฅูู ุงูููุญุฉ. ุจุฏูู ูุฐู ุงูุนูุงูุฉ ุ ูุง ููููู ุฏุงุฆููุง ุงูุญุตูู ุนูู ุงูุฃููุงู ุงูุชู ุชุทูุจูุง ุจุงุณุชุฎุฏุงู SDL_SetColors ุฃู SDL_SetPalette.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_DOUBLEBUF - ุชูููู ุงูุชุฎุฒูู ุงููุคูุช ุงููุฒุฏูุฌ ููุฃุฌูุฒุฉ ุ ุตุงูุญ ููุท ูุน SDL_HWSURFACE. ุณูุคุฏู ุงุณุชุฏุนุงุก SDL_Flip ุฅูู ุนูุณ ุงููุฎุงุฒู ุงููุคูุชุฉ ูุชุญุฏูุซ ุงูุดุงุดุฉ. ุณุชุชู ุฌููุน ุนูููุงุช ุงูุฑุณู ุนูู ุณุทุญ ุบูุฑ ูุนุฑูุถ ุญุงูููุง. ุฅุฐุง ุชุนุฐุฑ ุชูููู ุงูุชุฎุฒูู ุงููุคูุช ุงููุฒุฏูุฌ ุ ูุณูููู SDL_Flip ุจุจุณุงุทุฉ ุจุชูููุฐ SDL_UpdateRect ููุก ุงูุดุงุดุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_FULLSCREEN SDL - ุญุงูู ุงุณุชุฎุฏุงู ูุถุน ููุก ุงูุดุงุดุฉ. ุฅุฐุง ูุงู ุชุบููุฑ ุฏูุฉ ุงูุฌูุงุฒ ุบูุฑ ูููู (ูุฃู ุณุจุจ) ุ ูุณูุชู ุงุณุชุฎุฏุงู ุงูุฏูุฉ ุงูุฃุนูู ุงูุชุงููุฉ ุ ูุณูุชู ุชูุณูุท ูุงูุฐุฉ ุงูุนุฑุถ ุนูู ุฎูููุฉ ุณูุฏุงุก. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGL - ูู ุจุฅูุดุงุก ุณูุงู ุนุฑุถ OpenGL. ูู ุงูููุชุฑุถ ุฃู ุณูุงุช ููุฏูู OpenGL ุฐุงุช SDL_GL_SetAttribute ูุญุฏุฏุฉ ูุณุจููุง.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGLBLIT - ูู ุจุฅูุดุงุก ุณูุงู ุนุฑุถ OpenGL ุ ููุง ูู ููุถุญ ุฃุนูุงู ุ ูููู ูุน ุงูุณูุงุญ ุจุนูููุงุช ุงูุชุตููุฉ ุงูุนุงุฏูุฉ. ูููู ุฃู ูุญุชูู ุณุทุญ ุงูุดุงุดุฉ (ุซูุงุฆู ุงูุฃุจุนุงุฏ) ุนูู ููุงุฉ ุฃููุง ุ ููุฌุจ ุงุณุชุฎุฏุงู SDL_UpdateRects ูุชุญุฏูุซ ุชุบููุฑุงุช ุณุทุญ ุงูุดุงุดุฉ. ููุญูุธุฉ. ูุชู ุญูุธ ูุฐุง ุงูุฎูุงุฑ ููุท ููุชูุงูู ูุณูุชู ุฅุฒุงูุชู ูู ุงูุฅุตุฏุงุฑุงุช ุงููุณุชูุจููุฉ. ุบูุฑ ูุณุชุญุณู ููุงุณุชุฎุฏุงู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฌุฏูุฏุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_RESIZABL -ุฅูุดุงุก ูุงูุฐุฉ ูุงุจูุฉ ูุชุบููุฑ ุงูุญุฌู. ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ ุ ูุชู ุฅูุดุงุก ุญุฏุซ SDL_VIDEORESIZE ุ ููููู ุงุณุชุฏุนุงุก SDL_SetVideoMode ูุฑุฉ ุฃุฎุฑู ุจุญุฌู ุฌุฏูุฏ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_NOFRAME ุฅู ุฃููู ุ ููุฑุถ SDL_NOFRAME SDL ุนูู ุฅูุดุงุก ุฅุทุงุฑ ุจุฏูู ุนููุงู ุฃู ูุคุทุฑ. ูุชู ุชุนููู ูุฐู ุงูุนูุงูุฉ ุชููุงุฆููุง ูู ูุถุน ููุก ุงูุดุงุดุฉ.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ. ุจุบุถ ุงููุธุฑ ุนู ุฃุนูุงู SDL_SetVideoMode ุงูุชู ูููู ุฃู ุชูุจู ุ ูุชู ุชุนููููุง ูู ุนูุตุฑ ุงูุฅุดุงุฑุงุช ุนูู ุงูุณุทุญ ุงูุฐู ุชู ุฅุฑุฌุงุนู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ. ูุณุชุฎุฏู Bit pixel 24 ุชูุซููุงู ูุนุจุฃูุง ูุจูุบ 3 ุจุงูุชุงุช ููู ุจูุณู. ููุญุตูู ุนูู ูุถุน 4 ุจุงูุช ุงูุฃูุซุฑ ุดููุนูุง ููู ุจูุณู ุ ุงุณุชุฎุฏู ุจูุณู 32 ุจุช. ููู ุงูุบุฑูุจ ุฃู ููุง 15 ู 16 ุณูุทูุจุงู 2 ุจุงูุช ููู ูุถุน ุจูุณู ุ ูููู ุจุชูุณููุงุช ุจูุณู ูุฎุชููุฉ.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ. ุงุณุชุฎุฏู SDL_SWSURFACE ุฅุฐุง ููุช ุชุฎุทุท ูุฅุฌุฑุงุก ูุนุงูุฌุฉ ูููุตูุฉ ููุจูุณู ุฃู ุณุญุจ ุงูุฃุณุทุญ ุจุงุณุชุฎุฏุงู ูููุงุช ุฃููุง ูุชุชุทูุจ ูุนุฏู ุฅุทุงุฑุงุช ูุฑุชูุน. ุนูุฏ ุงุณุชุฎุฏุงู ุฃุณุทุญ ุงูุฃุฌูุฒุฉ (SDL_HWSURFACE) ุ ุชูุณุฎ SDL ุงูุฃุณุทุญ ูู ุฐุงูุฑุฉ ุงูููุฏูู ุฅูู ุฐุงูุฑุฉ ุงููุธุงู ุนูุฏูุง ุชููู ุจููููุง ูุงูุนูุณ ุจุงูุนูุณ ุนูุฏ ูุชุญูุง. ูุฐุง ูููู ุฃู ูุคุฏู ุฅูู ุงูุฎูุงุถ ูุจูุฑ ูู ุงูุฃุฏุงุก. (ุถุน ูู ุงุนุชุจุงุฑู ุฃูู ููููู ุงูุงุณุชุนูุงู ุนู ุณุทุญ ุงูุฌูุงุฒ ูููู ูุง ูุฒุงู ูุฏูู ุณุทุญ ุจุฑูุงูุฌ. ูููู ููุนุฏูุฏ ูู ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุชูููุฑ ุณุทุญ ุฌูุงุฒ ููุท ุนูุฏ ุงุณุชุฎุฏุงู SDL_FULLSCREEN.) ูููุถู ุงุณุชุฎุฏุงู SDL_HWSURFACE ุนูุฏูุง ูููู ุฃูุถูุง ุชุฎุฒูู ุงูุฃุณุทุญ ุงูุชู ุณุชููุถ ูู ุฐุงูุฑุฉ ุงูููุฏูู.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุฑูุฏ ุงูุชุญูู ูู ุงูููุถุน ุนูู ุงูุดุงุดุฉ ุนูุฏ ุฅูุดุงุก ุณุทุญ ุงููุงูุฐุฉ ุ ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ "SDL_VIDEO_CENTERED = ุงููุฑูุฒ" ุฃู "SDL_VIDEO_WINDOW_POS = xุ y". </font><font style="vertical-align: inherit;">ููููู ุชุซุจูุชูุง ุนุจุฑ SDL_putenv. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุนุงุฏุฉ </font><b><font style="vertical-align: inherit;">:</font></b><font style="vertical-align: inherit;"> ุณุทุญ ุงูุฅุทุงุฑ ุงููุคูุช ุฃู NULL ูู ุญุงูุฉ ุงููุดู. </font><font style="vertical-align: inherit;">ูุชู ุชุญุฑูุฑ ุงูุณุทุญ ุงูุฐู ุชู ุฅุฑุฌุงุนู ุจูุงุณุทุฉ SDL_Quit ููุฌุจ ุฃูุง ูุชู ุชุญุฑูุฑู ุจูุงุณุทุฉ ุงููุชุตู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ. </font><font style="vertical-align: inherit;">ุชุชุถูู ูุฐู ุงููุงุนุฏุฉ ููุงููุงุช ูุชุชุงููุฉ ุฅูู SDL_SetVideoMode (ุฃู ุชุบููุฑ ุงูุญุฌู) - ุณูุชู ุชุญุฑูุฑ ุงูุณุทุญ ุงูุญุงูู ุชููุงุฆููุง.</font></font><a name="data"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุญู 2. ููุงูู ุงูุจูุงูุงุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูุชุฐููู 1. ูุงุฆูุฉ ุงููุธุงุฆู"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅูู ุฌุฏูู ุงููุญุชููุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงููุฑุงุฌุน"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ</font></font></a></h2><br>
<br>
<pre><code class="cpp hljs">AVCodecContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฌููุน ุงููุนูููุงุช ุญูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูู ุงูุฏูู ุ ูู AVStream-&gt; ุจุฑูุงูุฌ ุงูุชุฑููุฒ. ุจุนุถ ุงูุณูุงุช ุงููููุฉ: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ุงูุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนููุงุช ููู </font><b><font style="vertical-align: inherit;">ููุงุฉ</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
int </font><font style="vertical-align: inherit;">ุซุงููุฉ </font><font style="vertical-align: inherit;">: ุนุฏุฏ ุงููููุงุช </font><font style="vertical-align: inherit;">
ุฑุงุฌุน ุงููุงุฆูุฉ ุงููุงููุฉ (ูุซูุฑุฉ ููุฅุนุฌุงุจ ููุบุงูุฉ) </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://web.archive.org/web/20090410064257/"><font style="vertical-align: inherit;">ููุง</font></a><font style="vertical-align: inherit;"> ( </font><i><font style="vertical-align: inherit;">ุฃุฑุดูู ุงูููุจ ุ ูุฃู ุงูุฑุงุจุท ุงูุฃุตูู ุบูุฑ ููุฌูุฏ ุจุงููุนู</font></i><font style="vertical-align: inherit;"> ). ูุชู ุงุณุชุฎุฏุงู ุงูุนุฏูุฏ ูู ุงููุนููุงุช ุจุดูู ุฃุณุงุณู ููุชุดููุฑ ุ ูููุณ ููู ุงูุชุดููุฑ.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://web.archive.org/web/20090410064257/"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs">AVFormatContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญููู ุงูุจูุงูุงุช: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
const </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVClass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_class </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVInputFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iformat </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVOutputFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oformat </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">priv_data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ByteIOContext </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุชุณุชุฎุฏู ููุนุงูุฌุฉ ุงููููุงุช ุฐุงุช ุงููุณุชูู ุงูููุฎูุถ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int ุบูุฑ ูููุนุฉ nb_streams</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุงูููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุฑุงุช AVStream * [MAX_STREAMS]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุชู ุชุฎุฒูู ุงูุจูุงูุงุช ููู ุฏูู ููุง. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณู ุงูููู ุดุงุฑ [1024]:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ูุงุฐุง ุนูู ุจุฏููู (ูู ุงูุฃุตู - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูููุงุช ุงูููู: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int64_t </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timestamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">title</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุคูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููู ุงูุชุฃููู ูุงููุดุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุจูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงูุฉ ุงูุนูููุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงูุฉ ุงูุนูููุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุงุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [32]: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุจุงุญุซ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ctx_flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููู ุงูููููุฉ ูู AVFMT_NOFILEุ AVFMT_NEEDNUMBERุ AVFMT_SHOW_IDSุ AVFMT_RAWPICTUREุ AVFMT_GLOBALHEADER ุ AVFMT_NOTIMESTAMPS ุ AVFMT_GENERIC_INDEX </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacketList</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packet_buffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฐุง ุงููุฎุฒู ุงููุคูุช ูุทููุจ ููุท ุนูุฏูุง ูุชู ุชุฎุฒูู ุงูุญุฒู ูุคูุชูุง ุจุงููุนู ูููู ูุง ูุชู ูู ุชุดููุฑูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุชููู ูุนููุงุช ุงูุชุฑููุฒ ูู ุชุฏููุงุช mpeg. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int64_t</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนูุฏ ูู ุงูุชุดููุฑ: ููุถุน ุงูุฅุทุงุฑ ุงูุฃูู ูููููู ุ ูู ุฃุฌุฒุงุก ูู ุงูุซุงููุฉ AV_TIME_BASE. ูุง ุชูู ุฃุจุฏูุง ุจุชุนููู ูุฐู ุงููููุฉ ูุจุงุดุฑุฉ: ูุชู ุงุณุชูุชุงุฌูุง ูู ููู AVStream. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุฉ int64_t: ูู ุงูุชุดููุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฏุฉ ุงูุฏูู ุ ุจุฃุฌุฒุงุก AV_TIME_BASE. ูุง ุชูู ุฃุจุฏูุง ุจุชุนููู ูุฐู ุงููููุฉ ูุจุงุดุฑุฉ: ูุชู ุงุณุชูุชุงุฌูุง ูู ููู AVStream. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t file_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฅุฌูุงูู ุญุฌู ุงูููู ุ 0 ุฅุฐุง ูุงู ุบูุฑ ูุนุฑูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int bit_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูู ุงูุชุดููุฑ: ุฅุฌูุงูู ูุนุฏู ุงูุจุช </font><b><font style="vertical-align: inherit;">ููุชุฏูู ุจุงูุจุชุงุช</font></b><font style="vertical-align: inherit;"> / ุซุงููุฉ ุ 0 ุฅุฐุง ูู ููู ูุชุงุญูุง. ูุง ุชูู ุฃุจุฏูุง ุจุชุนููููุง ูุจุงุดุฑุฉ ุฅุฐุง ูุงู file_size ูุงููุฏุฉ ุงููุนุฑููุฉ ูู ffmpeg ูููููุง ุญุณุงุจูุง ุชููุงุฆููุง. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVStream * cur_st </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const uint8_t * cur_ptr </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int cur_len </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacket cur_pkt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t data_offset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int index_built</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฅุฒุงุญุฉ ุงูุญุฒูุฉ ุงูุฃููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int mux_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int packet_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int preload</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_delay</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int loop_output</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ุญููุงุช ุงูุฅุฎุฑุงุฌ ูู ุงูุชูุณููุงุช ุงููุฏุนููุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int loop_input</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int ุบูุฑ ุงููููุนุฉ int probize</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูู ุงูุชุดููุฑ: ุญุฌู ุจูุงูุงุช ุงูุนููุฉ ุ ูุง ุชุณุชุฎุฏู ูู ุงูุชุฑููุฒ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_analyze_duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงููุฏุฉ ุงููุตูู ุจุงููุญุฏุงุช AV_TIME_BASE ุงูุชู ูุฌุจ ุฎูุงููุง ุชุญููู ุจูุงูุงุช ุงูุฅุฏุฎุงู ูู av_find_stream_info () </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const uint8_t * key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int keylen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">AVIOContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุงู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูููุตูู ุฅูู ุงูููุงุฑุฏ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const AVClass * av_class</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฆุฉ ููุฅุนุฏุงุฏุงุช ุงูุฎุงุตุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงูุฉ ุชุดุงุฑ * ุงูุนุงุฒูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุจุฏุงูุฉ ุงููุฎุฒู ุงููุคูุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int buffer_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงููุฎุฒู ุงููุคูุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * buf_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงููููุน ุงูุญุงูู ูู ุงููุฎุฒู ุงููุคูุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * buf_end ุบูุฑ ุงููููุนุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูููู ุฃู ุชููู ุงูุจูุงูุงุช ุฃุตุบุฑ ูู ุงููุฎุฒู ุงููุคูุช + buffer_size ุฅุฐุง ุฃุนุงุฏุช ูุธููุฉ ุงููุฑุงุกุฉ ุจูุงูุงุช ุฃูู ููุง ูู ูุทููุจ ุ ุนูู ุณุจูู ุงููุซุงู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * opaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุชูุฑูุฑ ูุคุดุฑ ุฎุงุต ูููุฑุงุกุฉ / ุงููุชุงุจุฉ / ุงูุจุญุซ / ... </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int (* read_packet) (void * opaqueุ uint8_t * bufุ int buf_size)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int (* write_packet) (void * opaqueุ uint8_t * bufุ int buf_size )</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t (* ุชุณุนู) (ุจุงุทู * ูุนุชู ุ int64_t offset ุ int </font></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whence </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">)</font></b><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">int64_t pos</font></b><font style="vertical-align: inherit;"> : ููุถุน ูู ููู ุงููุฎุฒู ุงููุคูุช ุงูุญุงูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int must_flush</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุตุญูุญ ุฅุฐุง ูุงู ูุฌุจ ุฅุนุงุฏุฉ ุชุนููู ุงูุจุญุซ ุงูุชุงูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int eof_reached</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุตุญูุญ ุฅุฐุง ุชู ุงููุตูู ุฅูู ููุงูุฉ ุงูููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int write_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุตุญูุญ ุฅุฐุง ูุงู ููุชูุญูุง ูููุชุงุจุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_packet_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฌููุน ุงูุงุฎุชุจุงุฑู ุงูุทููู ุบูุฑ ุงููููููุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char </font></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบูุฑ ุงููููููุน * checkum_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">ุงูุทููู ุบูุฑ ุงููููููุน (* update_checksum) (ุงููุฌููุน ุงูุงุฎุชุจุงุฑู ุงูุทููู ุบูุฑ ุงููููุน ุ const uint8_t * buf ุ ุงูุญุฌู ุงูุฏููู ุบูุฑ ุงููููููุน)</font></b><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ int</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุญุชูู ุนูู ุฑูุฒ ุงูุฎุทุฃ ุฃู 0 ุฅุฐุง ูู ูุญุฏุซ ุฎุทุฃ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int (* read_pause) (ุจุงุทู * ูุนุชู ุ int pause)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุฅููุงู ุงูุชุดุบูู ูุคูุชูุง ุฃู ุงุณุชุฆูุงูู ูุจุฑูุชููููุงุช ุฏูู ุงูุดุจูุฉ ุ ุนูู ุณุจูู ุงููุซุงู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t (* read_seek) (void * opaqueุ int stream_indexุ int64_t timestampุ int flags)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงุจุญุซ ุนู ุงูุทุงุจุน ุงูุฒููู ุงููุญุฏุฏ ูู ุงูุฏูู ุจุงุณุชุฎุฏุงู ููุฑุณ stream_index ุงููุญุฏุฏ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int ุงูุจุงุญุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฒูุฌ ูู ุฅุดุงุฑุงุช AVIO_SEEKABLE_ ุฃู 0 ุนูุฏูุง ูุง ูููู ุงูุฏูู ูุงุจูุงู ููุจุญุซ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t maxsize</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูููู ุงููุณุชุฎุฏู ููุญุฏ ูู ุงูุชุญุฏูุฏ. ูุฐุง ุงูุญูู ุฏุงุฎูู ูู libavformat ุ ููุญุธุฑ ุงููุตูู ุฅููู ูู ุงูุฎุงุฑุฌ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int direct</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฌุจ ุชูููุฐ avio_read ู avio_write ูุจุงุดุฑุฉ ูููุง ุฃููู ุฐูู ุ ูุนุฏู ุงููุฑูุฑ ุนุจุฑ ุงููุฎุฒู ุงููุคูุช ุ ูุณูุชุตู avio_seek ุฏุงุฆููุง ุจูุธููุฉ ุงูุจุญุซ ุงูุฑุฆูุณูุฉ ูุจุงุดุฑุฉู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t bytes_read</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุฅุญุตุงุฆูุงุช ูุฑุงุกุฉ ุงูุจุงูุช ูุฐุง ุงูุญูู ุฏุงุฎูู ูู libavformat ูุชู ุฑูุถ ุงููุตูู ุงูุฎุงุฑุฌู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int ุชุณุนู_count</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฅุญุตุงุฆูุงุช ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ูุฐุง ุงูุญูู ุฏุงุฎูู ูู libavformat ุ ููุญุธุฑ ุงููุตูู ุฅููู ูู ุงูุฎุงุฑุฌ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int writeout_count</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุชุงุจุฉ ุงูุฅุญุตุงุฆูุงุช. </font><font style="vertical-align: inherit;">ูุฐุง ุงูุญูู ุฏุงุฎูู ูู libavformat ุ ููุญุธุฑ ุงููุตูู ุฅููู ูู ุงูุฎุงุฑุฌ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int orig_buffer_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฌู ุงููุฎุฒู ุงููุคูุช ุงูุฃุตูู ุงููุณุชุฎุฏู ุฏุงุฎูููุง ุจุนุฏ ุงูุชุญูู ูุชูููุฑ ุนูุฏุฉ ูุฅุนุงุฏุฉ ุชุนููู ุญุฌู ุงููุฎุฒู ุงููุคูุช. </font><font style="vertical-align: inherit;">ูุฐุง ุงูุญูู ุฏุงุฎูู ูู libavformat ุ ููุญุธุฑ ุงููุตูู ุฅููู ูู ุงูุฎุงุฑุฌ.</font></font><br>
<br>
<pre><code class="cpp hljs">AVDictionary</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชุฎุฏู ูุชูุฑูุฑ ุงููุนููุงุช ุฅูู ffmpeg. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุฏุฏ </font></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุงุฎูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">AVDictionaryEntry * elems</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">AVDictionaryEntry</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชุฎุฏู ูุชุฎุฒูู ุฅุฏุฎุงูุงุช ุงููุงููุณ ูู AVDictionary. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * ket</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">AVFrame</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุชูุฏ ูุฐู ุงูุจููุฉ ุนูู ููุน ุจุฑูุงูุฌ ุงูุชุฑููุฒ ุ ูุจุงูุชุงูู ูุชู ุชุญุฏูุฏูุง ุฏููุงูููููุง. ููุน ุฐูู ุ ููุงู ุฎุตุงุฆุต ูุทุฑู ุดุงุฆุนุฉ ููุฐุง ุงููููู: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * data [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int lineize [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฎุทูุฉ ุงููุนูููุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * base [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int key_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int pict_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฐู ููุณุช ุงูููุงุท ุงูุชู ุชุชููุนูุง ุนูุฏ ูู ุงูุชุดููุฑ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int coded_picture_number</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int display_picture_number</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int quality</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int age</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int reference</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int8_t * qscale_table</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int qstride</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * mbskip_table</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int16_t (* motion_val [2]) [2]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint32_t * mb_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t motion_subsample_log2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * opaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุงูุงุช ุงููุณุชุฎุฏู </font><b><font style="vertical-align: inherit;">uint64_t [4]</font></b><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int ุชูุฑุงุฑ_ุงูุตูุฑุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฑุดุฏู ูุชูุฑุงุฑ ุงูุตูุฑุฉ ุจุนุฏุฏ ูุญุฏุฏ ูู ุงููุฑุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int qscale_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int interlaced_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int top_field_first</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPanScan * pan_scan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int palette_has_changed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int buffer_hints</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">short * dct_coeff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int8_t * ref_index [2]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">AVPacket</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููููู ุงูุฐู ูุชู ููู ุชุฎุฒูู ุจูุงูุงุช ุงูุญุฒูุฉ ุงูุฃูููุฉ. ูุฌุจ ููู ูุฐู ุงูุจูุงูุงุช ุฅูู avcodec_decode_audio2 ุฃู avcodec_decode_video ูุงุณุชูุงู ุฅุทุงุฑ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุทุงุจุน ุงูุฒููู ููุนุฑุถ ุจูุญุฏุงุช time_base. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t dts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุทุงุจุน ุฒููู ููู ุถุบุท ุงููุญุฏุงุช ุงูุฒูููุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงูุงุช uint8_t *</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุจูุงูุงุช ุงูุฃูููุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฌู int</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฌู ุงูุจูุงูุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int stream_index</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุฏูู ุงูุฐู ุฌุงุก ููู AVPacket ุ ุจูุงุกู ุนูู ุงููููุฉ ูู AVFormatContext. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงูุงุช int</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุชู ุชุนููู PKT_FLAG_KEY ุฅุฐุง ูุงูุช ุงูุญุฒูุฉ ุฅุทุงุฑ ููุชุงุญู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏุฉ ุงูุฒูููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฏุฉ ุงูุนุฑุถ ุจุงููุญุฏุงุช ุงูุฒูููุฉ (0 ุฅุฐุง ูู ุชูู ูุชุงุญุฉ)</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void (* ุชุฏููุฑ) (ูููู AVPacket *)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุธููุฉ ุชุญุฑูุฑ ุงูููุงุฑุฏ ููุฐู ุงูุญุฒูุฉ (ุงูุงูุชุฑุงุถู ูู av_destruct_packet). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * priv</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ููุถุน ุจุงูุช ูู ุงูุฏูู ุ -1 ุฅุฐุง ูุงู ุบูุฑ ูุนุฑูู.</font></font><br>
<br>
<pre><code class="cpp hljs">AVPacketList</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฆูุฉ ูุฑุชุจุทุฉ ุจุณูุทุฉ ููุญุฒู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacket pkt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacketList * ุงูุชุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">AVPicture</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงูุจููุฉ ูู ุจุงูุถุจุท ููุณ ุนูุตุฑู ุจูุงูุงุช AVFrame ุงูุฃูููู ุ ูุฐูู ูุชู ุชุฌุงูููุง ุบุงูุจูุง. </font><font style="vertical-align: inherit;">ูุดูุน ุงุณุชุฎุฏุงููุง ูู ูุธุงุฆู SWS. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * data [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int lineize [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ูู ุงูุณูุณูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs">AVRational</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุณูุท ูุชูุซูู ุงูุฃุฑูุงู ุงูุนููุงููุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฏ ุตุญูุญ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุจุณุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int den</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูููุงู.</font></font><br>
<br>
<pre><code class="cpp hljs">AVStream</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงูุฏูู. ูู ุงููุญุชูู ุฃู ุชุณุชุฎุฏู ูุฐู ุงููุนูููุงุช ูู ุจุฑูุงูุฌ ุงูุชุฑููุฒ ูู ุฃุบูุจ ุงูุฃุญูุงู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุดุฑ ูุซุงูุฉ ุงูุนูููุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑู ูุซุงูุฉ ุงูุนูููุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVCodecContext * ุงูุชุฑููุฒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational r_frame_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุบ * priv_data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codec_info_duration int64_t</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codec_info_nb_frames ุงูุจุงุญุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุฉ AVFrac</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base AVRational</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pts_wrap_bits ุงูุจุงุญุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงูุฉ stream_copy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVDiscard ุนูู ุงูุชุนุฏุงุฏ ูุชุฌุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ููููู ุงุฎุชูุงุฑ ุงูุญุฒู ุงูุชู ุณูู ูููู ุจุนูุฏุง ูุฃููุง ูุง ุชุญุชุงุฌ ูู ุชุนุฏุฏ ุงูุฅุฑุณุงู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู ุงูุฌูุฏุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t start_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t ุงููุฏุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุงุฑ ูุบุฉ [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุงุญุซ need_parsing</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 1 -&gt; ูุญุชุงุฌ ุชุญููู ูุงููุ 2 -&gt; ุฑุคูุณ ูู ุงูุชุญููู ููุทุ ูู ุฏูู ุฅุนุงุฏุฉ ุงูุชุนุจุฆุฉ </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVCodecParserContext * ูุญูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t cur_dts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงูุฉ last_IP_duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_IP_pts int64_t</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVIndexEntry * index_entries</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nb_index_entries ุงูุจุงุญุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฏ ุตุญูุญ index_entries_allocated_size ุบูุฑ ูููุนุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t nb_frames</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ุงูุฅุทุงุฑุงุช ูู ูุฐุง ุงูุฏูู (ุฅุฐุง ูุงู ูุนุฑูููุง) ุฃู 0 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pts_buffer [MAX_REORDER_DELAY + 1]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">ByteIOContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูููู ุจุชุฎุฒูู ูุนูููุงุช ููุฎูุถุฉ ุงููุณุชูู ุญูู ููู ูููู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * buffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int buffer_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">unigned </font></b></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * buf_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">charigned b </font></b></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* buf_end</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * opaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int (* read_packet) (void * opaqueุ uint8_t * bufุ int buf_size)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int (* write_packet) (void * opaqueุ uint8_t * buf ุ int buf_size)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offset_t (* ุชุณุนู) (ุจุงุทู * ูุนุชู ุ offset_t offset ุ int </font></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whence </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">)</font></b><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">offset_t pos</font></b><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int must_flush</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int eof_reached</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int write_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int is_streamed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_packet_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฌููุน ุงูุงุฎุชุจุงุฑู ุงูุทููู ุบูุฑ ุงููููููุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char </font></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบูุฑ ุงููููููุน * checkum_ptr</font></font><br><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">ุทููู ุบูุฑ ูููููุน (* update_checksum) (ุงููุฌููุน ุงูุงุฎุชุจุงุฑู ุงูุทููู ุบูุฑ ุงููููููุน: </font></b><b><font style="vertical-align: inherit;">
const uint8_t * buf ุ ุงูุญุฌู int ุบูุฑ ุงููููููุน)</font></b><font style="vertical-align: inherit;"> : </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ int</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุญุชูู ุนูู ุฑูุฒ ุงูุฎุทุฃ ุฃู 0 ูู ุญุงูุฉ ุนุฏู ุญุฏูุซ ุฎุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_AudioSpec</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุฎุฏู ููุตู ุชูุณูู ุจุนุถ ุงูุจูุงูุงุช ุงูุตูุชูุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุชุฑุฏุฏ ุงูุตูุช ูู ุงูุนููุงุช ูู ุงูุซุงููุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุณูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุชูุณูู ุงูุจูุงูุงุช ุงูุตูุชูุฉ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ุงููููุงุช: 1 - ุฃุญุงุฏู ุ 2 - ุงุณุชุฑูู ุ 4 ูุญูุทู ุ 6 ูุญุงุท ุจุชูุณูุท </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LFE </font><font style="vertical-align: inherit;">: ูููุฉ </font><b><font style="vertical-align: inherit;">ุตูุช</font></b><font style="vertical-align: inherit;"> ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู (ูุญุณูุจ). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนููุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฌู ุงููุฎุฒู ุงูุตูุชู ูู ุงูุนููุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฌู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฌู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ุจุงูุจุงูุช (ุงููุญุณูุจ). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุฏ ุงูุงุชุตุงู (..)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู ูููุก ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงูุงุช ุงููุณุชุฎุฏููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุคุดุฑ ุฅูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุชู ูุชู ุชูุฑูุฑูุง ุฅูู ูุธููุฉ ุฑุฏ ุงูุงุชุตุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูุชูุณูู ุงูุชุงููุฉ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุตุงูุญุฉ </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">AUDIO_U8 - โโุนููุงุช ุบูุฑ ูููุนุฉ ูู 8 ุจุช.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S8 - ุนููุงุช 8 ุจุช ูููุนุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_U16 ุฃู AUDIO_U16LSB - ุบูุฑ ูุฏุนูู ูู ูุจู ุฌููุน ุงูุฃุฌูุฒุฉ (ุชุฑุชูุจ ุจุงูุช ููุฎูุถ 16 ุจุช ุบูุฑ ูููุน). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S16L ุฃู AUDIO_S16LS - ุบูุฑ ูุฏุนูู ูู ูุจู ุฌููุน ุงูุฃุฌูุฒุฉ (16 ุจุช ุจุชุฑุชูุจ ุจุงูุช ูุฏูู) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_U16MSB - ุบูุฑ ูุฏุนูู ูู ูุจู ุฌููุน ุงูุฃุฌูุฒุฉ (ุบูุฑ ูููุนุฉ 16 ุจุช ูุจูุฑุฉ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S16MS - ุบูุฑ ูุฏุนูู ูู ุฌููุน ุงูุฃุฌูุฒุฉ (16 ุจุช ุจุชุฑุชูุจ ุจุงูุช ุนุงูู). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_U16SYS: ุฅูุง AUDIO_U16LSB ุฃู AUDIO_U16MSB - ุงุนุชูุงุฏูุง ุนูู ูุนุงูุฌ ุงูุฃุฌูุฒุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S16SYS: ุฅูุง AUDIO_S16LSB ุฃู AUDIO_S16MSB - ุงุนุชูุงุฏูุง ุนูู ูุนุงูุฌ ุงูุฃุฌูุฒุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Event</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููููู ุงูุฃุณุงุณู ููุฃุญุฏุงุซ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ููุน ุงูุญุฏุซ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">active</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุงูุชูุดูุท (ุฑุงุฌุน SDL_ActiveEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุชุงุญ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ููุญุฉ ุงูููุงุชูุญ (ุฑุงุฌุน SDL_KeyboardEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฑูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุญุฑูุฉ ุงููุงูุณ (ุฑุงุฌุน SDL_MouseMotionEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฒุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุงูููุฑ ุจุงููุงูุณ (ุฑุงุฌุน SDL_MouseButtonEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jaxis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุญุฑูุฉ ูุญูุฑ ุนุตุง ุงูุชุญูู (ุฑุงุฌุน SDL_JoyAxisEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jball</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุญุฑูุฉ ูุฑุฉ ุงูุชุชุจุน ุจุนุตุง ุงูุชุญูู (ุงูุธุฑ SDL_JoyBallEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jhat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุญุฑูุฉ ุฑุฃุณ ุนุตุง ุงูุชุญูู (ุฑุงุฌุน SDL_JoyHatEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jbutton</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุงูุถุบุท ุนูู ุฒุฑ ุนุตุง ุงูุชุญูู (ุฑุงุฌุน SDL_JoyButtonEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุบููุฑ ุงูุญุฌู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุญุฏุซ ุชุบููุฑ ุญุฌู ูุงูุฐุฉ ุงูุชุทุจูู (ุฑุงุฌุน SDL_ResizeEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถุญ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ูุชุญ ูุงูุฐุฉ ุงูุชุทุจูู (ุงูุธุฑ SDL_ExposeEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅููุงุก</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุทูุจ ุงูุฎุฑูุฌ ูู ุงูุชุทุจูู (ุฑุงุฌุน SDL_QuitEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชุฎุฏู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ุงููุณุชุฎุฏู (ุฑุงุฌุน SDL_UserEvent). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syswm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุญุฏุซ ูุฏูุฑ ููุงูุฐ ุบูุฑ ูุญุฏุฏ (ุฑุงุฌุน SDL_SysWMEvent). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ุฃููุงุน ุงูุฃุญุฏุงุซ. ุฑุงุฌุน ูุซุงุฆู SDL ููุฒูุฏ ูู ุงููุนูููุงุช :. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ACTIVEEVENT SDL_ActiveEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_KEYDOWN / ูUP SDL_KeyboardEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_MOUSEMOTION SDL_MouseMotionEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_MOUSEBUTTONDOWN / ูUP SDL_MouseButtonEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JOYAXISMOTION SDL_JoyAxisEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JOYBALLMOTION SDL_JoyBallEvent</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JoyHatEvent SDL_JOYHATMOTION </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JOYBUTTONDOWN / UP </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JoyButtonEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_VIDEORESIZE SDL_ResizeEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_VIDEOEXPOSE SDL_ExposeEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_Quit SDL_Vent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_Vent SDL_VentSLV</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Overlay</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฑุงูุจ YUV. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุณูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">ุชูุณูู</font></b><font style="vertical-align: inherit;"> ุงูุชุฑุงูุจ (ุงูุธุฑ ุฃุฏูุงู). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wุ h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฑุถ / ุงุฑุชูุงุน ุงูุชุฑุงูุจ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุงุฆุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฏุฏ ุฎุทุท ุงูุชุฑุงูุจ. ุนุงุฏุฉ ูุง ุชููู 1 ุฃู 3 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุฑุฌุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฌููุนุฉ ูู ุงููุณุงูุงุช ุงูุจุงุฏุฆุฉ ุ ูุงุญุฏุฉ ููู ุฎุทุฉ. ุงููุณุงูุฉ ุงูุจุงุฏุฆุฉ ูู ุทูู ุงูุณูุณูุฉ ุจุงูุจุงูุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุณู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุตููู ูู ูุคุดุฑุงุช ุงูุจูุงูุงุช ููู ุฎุทุฉ. ูุฌุจ ููู ุงูุชุฑุงูุจ ูุจู ุงุณุชุฎุฏุงู ูุฐู ุงููุคุดุฑุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hw_overlay</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงุถุจุท ุนูู 1 ุฅุฐุง ูุงู ุงูุชุฑุงูุจ ูุนุฌู ููุฃุฌูุฒุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Rect</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุทูุฉ ุงููุณุชุทููุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sint16 xุ y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ููุถุน ุงูุฒุงููุฉ ุงููุณุฑู ุงูุนููุง ูู ุงููุณุชุทูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uint16 w ุ h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนุฑุถ ุงููุณุชุทูู ูุงุฑุชูุงุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุฏุฏ SDL_Rect ูุณุงุญุฉ ูุณุชุทููุฉ ูู ูุญุฏุงุช ุงูุจูุณู. ูุชู ุงุณุชุฎุฏุงูู ุจูุงุณุทุฉ SDL_BlitSurface ูุชุญุฏูุฏ ููุงุทู ุงูุฎุฏุงุน ูุจุนุถ ููุฒุงุช ุงูููุฏูู ุงูุฃุฎุฑู.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Surface</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููููู ุงูุจูุงูู ููุฌุงูุจ ุงูุฎุงุฑุฌู (ุงูุณุทุญ). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุนูุงู Uint32</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฃุนูุงู stotrons ุงูุฎุงุฑุฌูุฉ. ูููุฑุงุกุฉ ููุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณูู SDL_PixelFormat *</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูููุฑุงุกุฉ ููุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int wุ h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงูุนุฑุถ ูุงูุงุฑุชูุงุน. ูููุฑุงุกุฉ ููุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทูุฉ Uint16</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฎุทูุฉ. ูููุฑุงุกุฉ ููุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * pixels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุคุดุฑ ูุจูุงูุงุช ุงูุจููุณู ุงููุนููุฉ. ููุชุณุฌูู ููุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_Rect clip_rect</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุงููุณุชุทูู ุงูููุฌูุฏ ุฎุงุฑุฌ ุงูููุทุน. ูููุฑุงุกุฉ ููุท. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int refcount</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุณุชุฎุฏู ูุชุฎุตูุต ุงูุฐุงูุฑุฉ. ูู ุงูุบุงูุจ ูููุฑุงุกุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ูุฐุง ุงููููู ุฃูุถูุง ุนูู ุญููู ุฎุงุตุฉ ุบูุฑ ูุนุฑูุถุฉ ููุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุซู SDL_Surface ูุณุงุญุฉ ูู ุงูุฐุงูุฑุฉ "ุงูุฑุณูููุฉ" ุงูุชู ูููู ุฑุณููุง. ูุชู ุฅุฑุฌุงุน ุฅุทุงุฑ ุงููุฎุฒู ุงููุคูุช ููููุฏูู ุนูู ุฃูู SDL_Surface ุจุงุณุชุฎุฏุงู SDL_SetVideoMode ู SDL_GetVideoSurface. ุงูุญููู w ู h ูู ููู ุชูุซู ุนุฑุถ ูุงุฑุชูุงุน ุงูุณุทุญ ุจุงูุจูุณู. ูุนุชุจุฑ ุญูู ุงูุจูุณู ูุคุดุฑูุง ูุจูุงูุงุช ุงูุจูุณู ุงููุนููุฉ. ููุงุญุธุฉ: ูุฌุจ ุชุฃููู ุงูุณุทุญ (ุนุจุฑ SDL_LockSurface) ูุจู ุงููุตูู ุฅูู ูุฐุง ุงูุญูู. ุงูุญูู clip_rect ูู ุงููุณุชุทูู ุงูููุตูุต ุงูุฐู ุชู ุชุนูููู ุจูุงุณุทุฉ SDL_SetClipRect. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏุนู ุญูู ุงูุนูู ููู OR ุงูุชุงููุฉ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SWSURFACE - ูุชู ุชุฎุฒูู ุงูุฌุฒุก ุงูุฎุงุฑุฌู ูู ุฐุงูุฑุฉ ุงููุธุงู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWSURFACE - ูุชู ุชุฎุฒูู ุงูุฌุงูุจ ุงูุฎุงุฑุฌู ูู ุฐุงูุฑุฉ ุงูููุฏูู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ASYNCBLIT - ูุณุชุฎุฏู ุงูุฎุงุฑุฌ ุงูููุฌ ุบูุฑ ุงููุชุฒุงูู ุ ุฅู ุฃููู.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ANYFORMAT - ูุณูุญ ุจุฃู ุชูุณูู ุจูุณู (ุณุทุญ ุงูุนุฑุถ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWPALETTE - ูุญุชูู ุงูุณุทุญ ุนูู ููุญุฉ ุญุตุฑูุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_DOUBLEBUF - ุณุทุญ ูุฎุฒููู ูุฒุฏูุฌ (ุณุทุญ ุนุฑุถ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_FULLSCREEN - ุณุทุญ ููุก ุงูุดุงุดุฉ (ุณุทุญ ุนุฑุถ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGL - ุงูุณุทุญ ุจู ุณูุงู OpenGL (ุณุทุญ ุงูุนุฑุถ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGLBLIT - ูุฏุนู ุงูุณุทุญ ุงูููุชูุญ OpenGL (ุณุทุญ ุงูุนุฑุถ). ููุญูุธุฉ. ูุฐุง ุงูุฎูุงุฑ ููุชูุงูู ููุท ููุง ููุตู ุจู ููุฑูุฒ ุงูุฌุฏูุฏ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_RESIZABLE - ูููู ุชุบููุฑ ุงูุญุฌู ูุณุทุญ (ุณุทุญ ุนุฑุถ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWACCEL - ูุณุชุฎุฏู ุงูุณุทุญ ุงูุณุทุญู ุชุณุฑูุน ุงูุฃุฌูุฒุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SRCCOLORKEY - ุงูุณุทุญูุฉ ุชุณุชุฎุฏู ุงูุชุจููุถ ุงููููู.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_RLEACCEL - ุชุณุฑูุน ุนูููุฉ ูุฒุฌ ุงูุฃููุงู ุจุงุณุชุฎุฏุงู RLE. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SRCALPHA - ูุณุชุฎุฏู Surface Blyth ูุฒุฌ ุฃููุง. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_PREALLOC - ูุณุชุฎุฏู ุงูุณุทุญ ุฐุงูุฑุฉ ูุฎุตุตุฉ ูุณุจููุง.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Thread</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงููููู ูุณุชูู ุนู ุงููุธุงู ุ ูุฑุจูุง ูุง ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงูู. </font><font style="vertical-align: inherit;">ุงูุธุฑ src / thread / sdl_thread_c.h ูู ุดูุฑุฉ ุงููุตุฏุฑ ููุฒูุฏ ูู ุงููุนูููุงุช.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_cond</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงููููู ูุณุชูู ุนู ุงููุธุงู ุ ูุฑุจูุง ูุง ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงูู. </font><font style="vertical-align: inherit;">ุงูุธุฑ src / thread / &lt;system&gt; /SDL_syscond.c ูู ููุฏ ุงููุตุฏุฑ ููุฒูุฏ ูู ุงููุนูููุงุช.</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_mutex</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงููููู ูุณุชูู ุนู ุงููุธุงู ุ ูุฑุจูุง ูุง ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงูู. </font><font style="vertical-align: inherit;">ุงูุธุฑ src / thread / &lt;system&gt; /SDL_sysmutex.c ูู ููุฏ ุงููุตุฏุฑ ููุฒูุฏ ูู ุงููุนูููุงุช.</font></font><a name="links"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุงุจุท </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุงูููุญู 2. ููุงูู ุงูุจูุงูุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุฅูู ุฌุฏูู ุงููุญุชููุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">โ</font></font></a></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img width="122" height="30" src="https://habrastorage.org/webt/ts/cs/ro/tscsrofdmymu7o1rbml2evolway.png"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุฑูุณ FFmpeg ู SDL ุฃู ููููุฉ ูุชุงุจุฉ ูุดุบู ููุฏูู ูู ุฃูู ูู 1000 </font></font></a><br>
<br>
<img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุทุฑ FFmpeg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">FFmpeg HomePage </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">SDL HomePage</font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img width="122" height="30" src="https://habrastorage.org/webt/z0/e1/6o/z0e16ozcekig9i8jdthljdqpgga.png"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img width="60" height="30" src="https://habrastorage.org/webt/js/4n/23/js4n231ba7glkow_nud5i3dsveq.png"> </a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br>
<hr><hr><hr><hr><hr><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img align="right" width="420" height="125" src="https://habrastorage.org/webt/co/i3/m0/coi3m0tliby9r5uxtiydjoeaqkm.png"></a><br clear="left">
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุฃ ุฃูุถุง ุนูู ูุฏููุฉ ุดุฑูุฉ ุฅุฏูุณูู:</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg ุฏููู ููุจุงู</font></font></b></a><br></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar502834/index.html">ููู ุชุตุจุญ ูููุฏุณ DevOps ูู ุณุชุฉ ุฃุดูุฑ ุฃู ุญุชู ุฃุณุฑุน. ุงูุฌุฒุก 5. ุงููุดุฑ</a></li>
<li><a href="../ar502836/index.html">ูุบุงูุฑุงุช ูุญุฑุฑ ุงููุญุฏุฉ: Serialized Matryoshka</a></li>
<li><a href="../ar502838/index.html">ูุง ุงููุฑู ุจูู ุชูููููุฌูุง ุงููุนูููุงุช ูุงูููู ุงูุฑูููุฉ: ุงูุชุญูู ุงูุฑููู ูุขุฑุงุก ุงูุฎุจุฑุงุก</a></li>
<li><a href="../ar502840/index.html">ุงุณุชุนุฑุงุถ ุงููุงุณุญ 3D EinScan Pro 2X Plus 3D Scanner</a></li>
<li><a href="../ar502842/index.html">ููููุฉ ุญูุงูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุจูููุชุฑูุฉ ูู ุงูุงุณุชุฎุฏุงู ุงูุฅุฌุฑุงูู</a></li>
<li><a href="../ar502846/index.html">ุฃุทููุช ุฒููุฑุจูุฑุฌ ูุชุงุฌุฑ. ูุชุญูู Instagram ู Facebook ุชุฏุฑูุฌูุงู ุฅูู ูุชุงุฌุฑ.</a></li>
<li><a href="../ar502852/index.html">ููุงุฐุง ููุงูู ุงููุงุณ ุงูุชุบููุฑ ูููู ูููููู ูุณุงุนุฏุชูู ุนูู ุฅุนุงุฏุฉ ุงูุจูุงุก</a></li>
<li><a href="../ar502854/index.html">ููุงุฐุง ุชูุดู ุชุทุจููุงุช ุชุฎุทูุท ููุงุฑุฏ ุงููุคุณุณุงุชุ</a></li>
<li><a href="../ar502860/index.html">ุงูููู ูู 20 ูุงูู: ุงูุงุณุชุฑุฏุงุฏ ุงูุณุฑูุน ููุทูุฑุงู ูุฑุฆู</a></li>
<li><a href="../ar502862/index.html">LabVIEW NXG - ุฃุณุงุณูุงุช ุงูููุญุฉ ุงูุฃูุงููุฉ - ุงูุถูุงุจุท ูุงููุคุดุฑุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>