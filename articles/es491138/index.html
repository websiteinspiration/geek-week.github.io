<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéª üôåüèΩ üõÇ Sat√©lite y torre de integraci√≥n Ansible üôÅ üë®üèΩ ü§ôüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øUsando Red Hat Satellite y Red Hat Ansible Automation Platform? Comenzando con Satellite 6.3, se pueden integrar entre s√≠ para que Dynamic Inventory ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sat√©lite y torre de integraci√≥n Ansible</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/491138/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øUsando Red Hat Satellite y Red Hat Ansible Automation Platform? Comenzando con Satellite 6.3, se pueden integrar entre s√≠ para que Dynamic Inventory en Ansible Tower obtenga listas de hosts de Satellite. Adem√°s, si los hosts RHEL se inicializan usando Sat√©lite (lo que significa aprovisionamiento), entonces Ansible Tower se puede integrar en este proceso para que ejecute autom√°ticamente los scripts de configuraci√≥n en los nuevos hosts. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/4o/so/qq4oso9wx_wxkl81ha7aiy1b18a.jpeg" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta publicaci√≥n, veremos c√≥mo configurar Dynamic Inventory en Ansible Tower para que muestre los hosts de Satellite, y mostraremos c√≥mo usarlo con ejemplos. Adem√°s, le mostraremos c√≥mo organizar una llamada autom√°tica a Ansible Tower despu√©s de inicializar un nuevo host desde Satellite.</font></font><br>
<a name="habracut"></a><br>
<h3> 1.    Inventory.  Satellite,       Dynamic Inventory  Ansible Tower</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que Ansible Tower tenga acceso a la lista de hosts, grupos de hosts y otra informaci√≥n relacionada, necesita una cuenta en Satellite. Esta entrada tiene suficientes permisos m√≠nimos, por lo que crearemos una nueva funci√≥n en Satellite, le daremos solo los permisos necesarios para Ansible Tower, y luego crearemos una nueva cuenta y le asignaremos esta funci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satellite 6.6 y versiones posteriores ya tienen lista una funci√≥n de lector de inventario de torre de Ansible, por lo que puede omitir los pasos a continuaci√≥n para crear una funci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Satellite 6.3-6.5, el rol tendr√° que ser creado a mano. Para hacer esto, vaya a la interfaz web de Sat√©lite, vaya a la pantalla Administrar, seleccione Roles y haga clic en Crear rol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llamamos a este rol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ansible_tower_integration_role</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y establecemos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubicaciones y organizaciones</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para √©l </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/oy/ey/ocoyeyrceo04wboamjmzv_2nnf0.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Haga clic en Enviar para crear el rol. Despu√©s de eso, haga clic en su nombre y vaya a la pesta√±a Filtros. Haga clic en el bot√≥n verde Nuevo filtro y agregue los siguientes filtros, uno a la vez: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipo de recurso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Permiso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">view_hosts</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tipo de recurso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grupo de host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Permiso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">view_hostgroups</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tipo de recurso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valor de hecho</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Permiso: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">view_facts</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como resultado, los siguientes filtros deber√≠an tener un rol:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/ia/r-/cciar-m-0-bz63n2lrijzatkbrg.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, hemos creado un rol. Ahora comenzaremos un nuevo usuario en Sat√©lite, para lo cual iremos al men√∫ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administrar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , seleccionaremos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usuarios</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y haremos clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear usuario</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Llamamos a este usuario </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ansible_integration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cambiamos el par√°metro </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autorizado por</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INTERNO</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y establecemos la contrase√±a. Luego, en las pesta√±as </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubicaciones y Organizaciones</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">seleccione las ubicaciones / organizaciones apropiadas. Finalmente, vaya a la pesta√±a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roles</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y asigne a este usuario el rol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ansible_tower_integration_role</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reci√©n creado </font><font style="vertical-align: inherit;">(si tiene Satellite 6.3 - 6.5) o el rol de </font><b><font style="vertical-align: inherit;">lector de inventario de torre Ansible</font></b><font style="vertical-align: inherit;"> incorporado</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Sat√©lite 6.6 y superior). </font><font style="vertical-align: inherit;">Finalmente, haga clic en Enviar para crear una cuenta para este usuario.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personalizar Torre Ansible</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vaya a la interfaz web de Ansible Tower y vaya a la pantalla </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Credenciales</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Haga clic en el bot√≥n verde </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ (Agregar)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para crear una nueva entrada de credencial. </font><font style="vertical-align: inherit;">Lo llamamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sat√©lite_integraci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y en el Tipo de credencial especificamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red Hat Satellite 6</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Luego ingresamos la URL (en nuestro caso Satellite 6), as√≠ como el nombre de usuario (en nuestro caso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ansible_integration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), y la contrase√±a es la que configuramos en Satellite arriba:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yb/xd/ws/ybxdws81uadmggdncbl_icg-ig8.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vaya a la pantalla </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inventarios</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , haga clic en el bot√≥n verde </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ (Agregar)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y seleccione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inventario</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especifique satellite_inventory</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como nombre </font><font style="vertical-align: inherit;">y haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para crear un inventario. Despu√©s de eso, vaya a la pesta√±a Fuentes del inventario reci√©n creado y haga clic en el bot√≥n verde </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ (Agregar)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Usamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sat√©lite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como el nombre de la fuente </font><font style="vertical-align: inherit;">, y especificamos el tipo de fuente como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red Hat Satellite 6</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En el campo Credencial, especifique </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satellite_integration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se cre√≥ en el paso anterior. Active la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">casilla de verificaci√≥n Sobrescribir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobrescribir variables</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actualizar al iniciar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el grupo de control Opciones de actualizaci√≥n (puede obtener m√°s informaci√≥n sobre estas opciones utilizando los signos de interrogaci√≥n a la derecha). </font><font style="vertical-align: inherit;">Adem√°s, en el campo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo de espera de cach√© (segundos)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">ingrese 90 y haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0n/_2/0j/0n_20jc394t3fh9vkxz00cqda3w.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, sin salir de la pesta√±a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Or√≠genes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , haga clic en el icono </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciar proceso de sincronizaci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gz/ys/um/gzysumhr2fghwc0l-xymeofs7cu.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esperamos hasta que el icono se vuelva verde; esto indica que la sincronizaci√≥n se complet√≥ con √©xito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora puede ir a la pesta√±a Hosts y ver los datos que se han extra√≠do del sat√©lite:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ne/4_/qk/ne4_qk5ne8ohsfx3iriwkkdfbvm.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puedes mirar la pesta√±a Grupos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oj/sw/af/ojswafnsedywlukqweh3oib_hgu.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, la sincronizaci√≥n no solo extrajo las listas de hosts de Satellite, sino que tambi√©n las dividi√≥ en grupos de acuerdo con las vistas de contenido correspondientes en Satellite, grupos de hosts, entornos de ciclo de vida, ubicaciones y organizaciones. </font><font style="vertical-align: inherit;">Esta agrupaci√≥n se puede usar para apuntar scripts Ansible en hosts de destino, y esto es algo muy poderoso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si selecciona un host en la pesta√±a Hosts, veremos que entre Satellite y Ansible Tower se sincroniza mucha informaci√≥n auxiliar sobre el host, que se presenta en forma de variables. </font><font style="vertical-align: inherit;">Estas variables se pueden usar en secuencias de comandos Ansible:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/la/6o/fw/la6ofwr3cf91cfxktzok_0eoy7c.png"></div><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uso del inventario din√°mico vinculado al sat√©lite</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, sincronizamos Satellite y Ansible Tower. Ahora consideraremos c√≥mo usarlo en la pr√°ctica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La forma m√°s f√°cil es usar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satellite_inventory</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como la fuente de inventario en la plantilla de torre de Ansible. Si la opci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hosts: all</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° especificada en el script </font><font style="vertical-align: inherit;">, el script se ejecutar√° en todos los hosts Satellite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una opci√≥n m√°s avanzada es utilizar grupos de inventario creados autom√°ticamente en secuencias de comandos (c√≥mo se crean; consulte m√°s arriba), en otras palabras, especifique el grupo de host deseado en la l√≠nea de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hosts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por ejemplo, como en este escenario donde est√° instalado el paquete de pantalla:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
- name: Install screen package<font></font>
  hosts: "foreman_hostgroup_rhel6"<font></font>
  tasks:<font></font>
  - yum:<font></font>
      name: screen<font></font>
      state: installed<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ tenemos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hosts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> registrados </font><b><font style="vertical-align: inherit;">: foreman_hostgroup_rhel6</font></b><font style="vertical-align: inherit;"> , lo que indica la lista de hosts que forman el grupo de hosts rhel6 en el Sat√©lite. </font><font style="vertical-align: inherit;">En consecuencia, el script se ejecutar√° solo en estos hosts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, en el script, puede especificar en la l√≠nea de hosts aquellas variables que Ansible Tower recibe durante la sincronizaci√≥n con Satellite. </font><font style="vertical-align: inherit;">Por ejemplo, puedes hacer esto:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
- name: Install screen package<font></font>
  hosts: "{{ hosts_var }}"<font></font>
  tasks:<font></font>
  - yum:<font></font>
      name: screen<font></font>
      state: installed<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, podremos cambiar la plantilla de trabajo en Ansible Tower sobre la marcha, lo que indica uno de los grupos de inventario a trav√©s de una variable externa.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jr/fe/iu/jrfeiulsq6wqesxwt-e1njpt2mm.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo, la plantilla solo se ejecutar√° en hosts que sean miembros del grupo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rhel7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en Satellite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, la plantilla de trabajo se puede configurar para que al inicio le pida al usuario el valor de la variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hosts_var</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (y al mismo tiempo muestre los grupos de inventario disponibles en forma de comentarios):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ad/lh/gl/adlhglvneyz5ettasl8vh1z_mag.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pantalla de arriba ilustra la situaci√≥n cuando, al iniciar la plantilla, se le solicita al usuario que ingrese el nombre del grupo de inventario de Sat√©lite en cuyos hosts desea ejecutar el script. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, puede usar las variables de host extra√≠das de Satellite durante la sincronizaci√≥n. </font><font style="vertical-align: inherit;">Por ejemplo, as√≠ es como se ve un script que muestra c√≥mo hacer referencia a estas variables:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
- name: Show Satellite variables<font></font>
  hosts: all<font></font>
  tasks:<font></font>
  - name: Show subscription_status<font></font>
    debug:<font></font>
      msg: &gt;<font></font>
        Subscription Status: {{ foreman.subscription_status_label }}<font></font>
  - name: Show Errata Counts<font></font>
    debug:<font></font>
      msg: &gt;<font></font>
        Bug fixes: {{ foreman.content_facet_attributes.errata_counts.bugfix }},<font></font>
        Security: {{ foreman.content_facet_attributes.errata_counts.security }},<font></font>
        Enhancement: {{ foreman.content_facet_attributes.errata_counts.enhancement }},<font></font>
        Total: {{ foreman.content_facet_attributes.errata_counts.total }}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ejecuta este script en Ansible Tower, mostrar√° los valores de las variables:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/la/3o/ub/la3oubu_3gdoc2o_tvxhuqycyko.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y, por supuesto, estas variables se pueden usar en construcciones condicionales cuando, de modo que las tareas se inician solo bajo ciertas condiciones. </font><font style="vertical-align: inherit;">Por ejemplo, si el host no tiene parches de seguridad, o cuando la suscripci√≥n del host no es v√°lida.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para resumir</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red Hat Satellite y Red Hat Ansible son herramientas muy poderosas y su integraci√≥n proporciona una sinergia tangible. </font><font style="vertical-align: inherit;">Arriba, mostramos c√≥mo hacer que Satellite sea una fuente de datos para Dynamic Inventory en Ansible y usarlo en la pr√°ctica.</font></font><br>
‚ÄÉ<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 2. Configuraci√≥n autom√°tica de nuevos hosts a trav√©s de la devoluci√≥n de llamada de aprovisionamiento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de muchas otras caracter√≠sticas, Satellite tambi√©n puede inicializar hosts, en otras palabras, realizar el aprovisionamiento. Ansible Tower, a su vez, est√° dise√±ado para configurar hosts. La integraci√≥n le permite asegurarse de que despu√©s de la inicializaci√≥n de un nuevo host RHEL por medio de Sat√©lite, Ansible Tower se conectar√° autom√°ticamente a este host y ejecutar√° el script de configuraci√≥n correspondiente en √©l. Obviamente, tal esquema ahorra mucho tiempo para los administradores del sistema, ayud√°ndoles a responder r√°pidamente a las necesidades de la organizaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cabe se√±alar que este esquema solo funciona si se cumplen varias condiciones. </font><font style="vertical-align: inherit;">Primero, Satellite deber√≠a usarse como una fuente de datos de inventario din√°mico en Ansible Tower (cubrimos este problema en la parte anterior). </font><font style="vertical-align: inherit;">En segundo lugar, la inicializaci√≥n del host no solo debe hacerse a trav√©s de Sat√©lite, sino tambi√©n a trav√©s del mecanismo del grupo de host (para m√°s detalles, consulte la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gu√≠a de aprovisionamiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n mostramos c√≥mo configurar Satellite y Ansible Tower para que despu√©s de inicializar el host, ejecute autom√°ticamente el script de configuraci√≥n de Ansible.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visi√≥n general</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las herramientas de automatizaci√≥n de TI, como Ansible Tower, generalmente se dividen en una de dos categor√≠as: algunas funcionan por el m√©todo push, otras por el m√©todo pull. En los sistemas push a los que pertenece Ansible Tower, el servidor de automatizaci√≥n inicia una conexi√≥n con el host. En los sistemas de extracci√≥n, el iniciador es el host, que se comunica con el servidor de automatizaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro caso, con secuencias de comandos autom√°ticas en nuevos hosts, se utiliza un esquema mixto. El host reci√©n inicializado se pone en contacto con el servidor de automatizaci√≥n con una solicitud de "devoluci√≥n de llamada" y configuraci√≥n. Despu√©s de eso, el servidor de automatizaci√≥n se conecta a este host y ejecuta el script de configuraci√≥n solicitado por el host en √©l. Por lo tanto, en Ansible Tower este mecanismo se denomina devoluci√≥n de llamada de aprovisionamiento, que se puede traducir como "devoluci√≥n de llamada de inicializaci√≥n".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mostrar por qu√© es necesaria la devoluci√≥n de llamada de aprovisionamiento, considere la siguiente situaci√≥n: tenemos un cierto script de configuraci√≥n de host que se ejecuta diariamente a la medianoche. Digamos que a las 8 a.m. estamos inicializando varios servidores nuevos a la vez a trav√©s de Satellite. Al mismo tiempo, Satellite se utiliza como una fuente de datos de inventario din√°mico en Ansible Tower, por lo que los hosts creados se incluyen autom√°ticamente en Ansible. Sin embargo, el pr√≥ximo lanzamiento del script de automatizaci√≥n tendr√° lugar solo a medianoche, es decir, despu√©s de 16 horas. Obviamente, esto est√° lejos de ser ideal, y me gustar√≠a que el script se ejecute inmediatamente despu√©s de la inicializaci√≥n del nuevo host. Para este prop√≥sito, la devoluci√≥n de llamada de aprovisionamiento tambi√©n est√° pensada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, la devoluci√≥n de llamada de aprovisionamiento se configura y funciona de la siguiente manera:</font></font><br>
<br>
<ol>
<li>  Ansible Tower   credential        root,  Satellite           . Tower    ,            .</li>
<li>   Job Template  Ansible Tower   provisioning callback.       URL     Host Config Key,        Ansible. </li>
<li> Satellite      ,       provisioning callback   Ansible Tower,  : URL-  Ansible Tower,  Host Config Key    Ansible.</li>
<li>      Satellite     /etc/systemd/system/ansible-callback.service (  RHEL 7  8;   RHEL 6  ).         provisioning callback   Ansible Tower,  ,     (URL-, Host Config Key   ).</li>
<li>Ansible Tower       Host Config Key.   , Tower       ,      root,    Job Template.   ,      .</li>
</ol><br>
<h4> Ansible Tower  Provisioning Callback</h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos creando un script de configuraci√≥n en el servidor de Ansible Tower que cambie el contenido de / etc / motd, cree alg√∫n tipo de usuario e instale un paquete espec√≠fico. </font><font style="vertical-align: inherit;">Luego usaremos este script para configurar nuevos hosts inmediatamente despu√©s de que se inicialicen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la vida real, lo m√°s probable es que los scripts de automatizaci√≥n se almacenen en alg√∫n sistema de control de versiones, pero por simplicidad, suponemos que se encuentran directamente en el servidor de Ansible Tower. </font><font style="vertical-align: inherit;">Por lo tanto, ingresamos al servidor Ansible Tower a trav√©s de SSH y creamos el directorio / var / lib / awx / projects / provision para ellos ejecutando el siguiente comando:</font></font><br>
<br>
<pre><code class="plaintext hljs"># mkdir /var/lib/awx/projects/provision
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego creamos nuestro script en este directorio, lo llamamos provision.yaml y escribimos los siguientes contenidos en √©l:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
<font></font>
- name: Provision new host<font></font>
<font></font>
  hosts: all<font></font>
<font></font>
  tasks:<font></font>
<font></font>
  - name: Set content in /etc/motd <font></font>
<font></font>
    copy:<font></font>
<font></font>
      content: Authorized use only!<font></font>
<font></font>
      dest: /etc/motd<font></font>
<font></font>
      mode: 644<font></font>
<font></font>
      owner: root<font></font>
<font></font>
      group: root<font></font>
<font></font>
<font></font>
  - name: Create brian user account<font></font>
<font></font>
    user:<font></font>
<font></font>
      name: brian<font></font>
<font></font>
      uid: 10000<font></font>
<font></font>
      state: present<font></font>
<font></font>
<font></font>
  - name: Install tmux package<font></font>
<font></font>
    yum:<font></font>
<font></font>
      name: tmux<font></font>
<font></font>
      state: present<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vaya a la interfaz web de Tower y vaya a la pantalla Credenciales. </font><font style="vertical-align: inherit;">Hacemos clic en el bot√≥n con el signo m√°s verde para crear un nuevo registro de credenciales, darle el nombre provisioning_root y tambi√©n establecer el Tipo de credencial como M√°quina. </font><font style="vertical-align: inherit;">En el campo Nombre de usuario, escriba root, y en el campo Contrase√±a, especifique la contrase√±a que se especifica en Satellite para usar en los nuevos hosts del grupo de host correspondiente en Satellite (su nombre se puede encontrar en la interfaz web de Satellite en la pesta√±a Sistema operativo). </font><font style="vertical-align: inherit;">Con esta entrada, Ansible Tower podr√° iniciar sesi√≥n en los nuevos hosts creados durante la inicializaci√≥n a trav√©s de Sat√©lite.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zf/b7/lb/zfb7lbondu4unvzqe-h5ex-2e54.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, en la interfaz de Ansible Tower, vaya a la pantalla Proyectos y haga clic en el signo m√°s verde para crear un nuevo proyecto. </font><font style="vertical-align: inherit;">Ll√°melo provisi√≥n, cambie el Tipo de SCM a Manual y especifique provisi√≥n como el Directorio de Playbook:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yb/aq/ib/ybaqibhcd2nlts3ysjwzfphdr8w.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, en la interfaz de Ansible Tower, vaya a la pantalla Plantillas, haga clic en el signo m√°s verde para crear una nueva Plantilla de trabajo. </font><font style="vertical-align: inherit;">Lo llamaremos provision, en el campo Inventory escribiremos Satellite, en el campo Project - provision, en el campo Playbook - provision.yaml, y en el campo Credential - provisioning_root. </font><font style="vertical-align: inherit;">Adem√°s, debe habilitar la casilla de verificaci√≥n Permitir devoluciones de llamadas de aprovisionamiento y hacer clic en el icono de la varita m√°gica a la derecha del campo Clave de configuraci√≥n del host para generar una clave secreta. </font><font style="vertical-align: inherit;">Esta clave es necesaria para solicitar una devoluci√≥n de llamada de aprovisionamiento que no podr√≠a ser nadie, sino solo alguien que conozca la clave de configuraci√≥n del host. </font><font style="vertical-align: inherit;">Sin la clave correcta, el servidor de Ansible Tower simplemente no responder√° a la solicitud.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mx/lo/f6/mxlof6mxbd8ny0f0wursfzhqdzy.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora debemos recordar para el futuro el valor de la clave de configuraci√≥n del host, as√≠ como la ID de la plantilla, que se puede encontrar en la URL de esta plantilla de trabajo: </font></font><br>
<br>
<pre><code class="plaintext hljs">https://tower.example.com/#/templates/job_template/11
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo, la ID es 11. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n de sat√©lite para aprovisionamiento de devoluci√≥n de llamada</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vaya a la interfaz web satelital, vaya a la pantalla Configurar y haga clic en Grupos de hosts. </font><font style="vertical-align: inherit;">Seleccionamos el grupo de hosts existente, que se utiliza al inicializar nuevos hosts, en nuestro ejemplo, esto es RHEL 8. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la pantalla de edici√≥n del grupo de hosts, vaya a la pesta√±a Par√°metros y cree 4 nuevos par√°metros: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ansible_host_config_key: aqu√≠ ingresamos la clave de configuraci√≥n del host desde nuestra plantilla de torre de Ansible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ansible_job_template_id: aqu√≠ escribimos el ID de la plantilla, que descubrimos previamente en la URL de la plantilla. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ansible_tower_fqdn es el nombre de dominio completo del servidor de Ansible Tower. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ansible_tower_provisioning: establecer verdadero.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/th/ji/m8/thjim8rh06qhbq_gdwhxfc4jlue.png"></div><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mira c√≥mo funciona todo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora inicialice el nuevo host desde Satellite y verifique que la devoluci√≥n de llamada de aprovisionamiento funcione y ejecute autom√°ticamente nuestro script en ese host. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la interfaz web del sat√©lite, vaya a la pantalla Hosts, haga clic en Crear host y verifique que se utiliza el grupo para el que acabamos de crear 4 nuevos par√°metros, es decir, el grupo RHEL 8.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xt/mn/yc/xtmnycjplympck_rrh4lag9l2ts.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez completada la inicializaci√≥n del host, debemos asegurarnos de que la plantilla se haya iniciado correctamente. </font><font style="vertical-align: inherit;">Para hacer esto, vaya a la pantalla Plantillas en la interfaz web de Ansible Tower, busque nuestra plantilla en la lista y vea si el cuadrado m√°s a la izquierda de su indicador se ha vuelto verde:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lk/g2/o-/lkg2o-kj5rtuuotxnvyhnxrcr3e.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hacemos clic en este cuadro verde para ver los detalles del lanzamiento, que en nuestro caso fue exitoso. </font><font style="vertical-align: inherit;">Tenga en cuenta que esta tarea tiene un l√≠mite (L√≠mite): el lanzamiento de solo nuevos hosts que se crean durante la inicializaci√≥n. </font><font style="vertical-align: inherit;">Bueno, esto no es sorprendente, ya que el mecanismo de devoluci√≥n de llamada de aprovisionamiento solo ejecuta la plantilla en los hosts que lo solicitan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aa/ll/t1/aallt1qykw1g_z9t_hmsujmtqby.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vayamos al host reci√©n creado y verifiquemos si coincide con lo que est√° escrito en el script:</font></font><br>
<br>
<pre><code class="plaintext hljs">[root@provision-test-rhel8 ~]# rpm -qa | grep tmux<font></font>
tmux-2.7-1.el8.x86_64<font></font>
<font></font>
[root@provision-test-rhel8 ~]# id brian<font></font>
uid=10000(brian) gid=10000(brian) groups=10000(brian)<font></font>
<font></font>
[root@provision-test-rhel8 ~]# cat /etc/motd<font></font>
Authorized use only!<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluci√≥n de problemas</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la plantilla de Ansible Tower no se inicia autom√°ticamente en un nuevo host inicializado a trav√©s de Sat√©lite, hay algunas cosas que debe verificar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer paso es averiguar si la Torre Ansible recibi√≥ una solicitud de devoluci√≥n de llamada de aprovisionamiento, c√≥mo fue el script y si comenz√≥ en absoluto. Para hacer esto, vaya a la pantalla de Plantillas en la interfaz de la Torre y observe el color del indicador al lado del nombre de la plantilla: verde - el lanzamiento fue exitoso, rojo - el lanzamiento fall√≥.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gc/ra/id/gcraidlrqdznksnzfsryp80qbwk.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el cuadrado es rojo, hacemos clic en √©l y buscamos informaci√≥n adicional para entender por qu√© fall√≥ el inicio (estos pueden ser errores de sintaxis en el script y otros problemas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el cuadro es verde, entonces hacemos clic y miramos de todos modos, ya que la tarea podr√≠a informar una ejecuci√≥n exitosa, pero en realidad no comenz√≥ en nuestro host. Por ejemplo, si la l√≠nea de hosts en la secuencia de comandos indica hosts y grupos espec√≠ficos, pero no incluye los hosts creados durante la inicializaci√≥n, la tarea informar√° de √©xito, pero la informaci√≥n adicional dir√° "omitiendo: no hay hosts coincidentes".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el cuadrado del indicador no es verde ni rojo, entonces debe comenzar verificando los par√°metros del grupo host en Sat√©lite. Aseg√∫rese de que la URL del servidor de Ansible Tower, la clave de configuraci√≥n del host y el ID de la plantilla est√©n correctamente especificados all√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, vaya al host reci√©n inicializado y verifique que haya un archivo /etc/systemd/system/ansible-callback.service (en los sistemas RHEL 7 u 8) o un archivo /root/ansible_provisioning_call.sh (RHEL 6). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el archivo no existe, verifique que el par√°metro ansible_tower_provisioning est√© establecido en verdadero para este grupo de hosts y que los patrones de inicializaci√≥n en el servidor Satellite no hayan cambiado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el archivo /etc/systemd/system/ansible-callback.service est√° presente en el host, √°bralo y busque la URL donde se env√≠a la solicitud de devoluci√≥n de llamada de aprovisionamiento:</font></font><br>
<br>
<pre><code class="plaintext hljs">[root@provision-test-rhel8 ~]# cat /etc/systemd/system/ansible-callback.service<font></font>
[Unit]<font></font>
Description=Provisioning callback to Ansible Tower<font></font>
Wants=network-online.target<font></font>
After=network-online.target<font></font>
<font></font>
[Service]<font></font>
Type=oneshot<font></font>
ExecStart=/usr/bin/curl -k -s --data "host_config_key=aa5ebe82-491c-4fbb-bd36-a6657549451e" https://tower.example.com/api/v2/job_templates/11/callback/<font></font>
ExecStartPost=/usr/bin/systemctl disable ansible-callback<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede ejecutar curl y duplicar manualmente los comandos especificados en este archivo para iniciar manualmente una devoluci√≥n de llamada de aprovisionamiento:</font></font><br>
<br>
<pre><code class="plaintext hljs">[root@provision-test-rhel8 ~]# /usr/bin/curl -k -s --data "host_config_key=aa5ebe82-491c-4fbb-bd36-a6657549451e" https://tower.example.com/api/v2/job_templates/11/callback/
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si se especifica una clave de configuraci√≥n de host no v√°lida, recibimos el siguiente mensaje de error:</font></font><br>
<br>
<pre><code class="plaintext hljs">[root@provision-test-rhel8 ~]# /usr/bin/curl -k -s --data "host_config_key=wrong-key-here" https://tower.example.com/api/v2/job_templates/11/callback/<font></font>
<font></font>
{"detail":"You do not have permission to perform this action."}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la ID de plantilla se especifica incorrectamente (aqu√≠ - 43 en lugar de 11), la respuesta ser√° la siguiente:</font></font><br>
<br>
<pre><code class="plaintext hljs">[root@provision-test-rhel8 ~]# /usr/bin/curl -k -s --data "host_config_key=wrong-key-here" https://tower.example.com/api/v2/job_templates/43/callback/<font></font>
<font></font>
{"detail":"Not found."}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puede deshabilitar el modo silencioso (-s) en el comando curl para que muestre errores relacionados con la resoluci√≥n del nombre de host, como en el ejemplo a continuaci√≥n, donde reemplazamos el nombre correcto ansible.example.com con el ansible-tower.example.com incorrecto :</font></font><br>
<br>
<pre><code class="plaintext hljs">[root@provision-test-rhel8 ~]# /usr/bin/curl -k  --data "host_config_key=wrong-key-here" https://ansible-tower.example.com/api/v2/job_templates/11/callback/<font></font>
<font></font>
curl: (6) Could not resolve host: ansible-tower.example.com<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, al descubrir la causa del error, el archivo /var/log/tower/tower.log en el servidor de Ansible Tower puede ser √∫til. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, este archivo registra el uso de una clave de configuraci√≥n de host no v√°lida:</font></font><br>
<br>
<pre><code class="plaintext hljs">2019-11-19 23:19:17,371 WARNING  awx.api.generics status 403 received by user AnonymousUser attempting to access /api/v2/job_templates/11/callback/ from 192.168.0.138
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto tambi√©n corrige el uso de una ID de plantilla no v√°lida:</font></font><br>
<br>
<pre><code class="plaintext hljs">2019-11-19 23:19:49,093 WARNING  awx.api.generics status 404 received by user AnonymousUser attempting to access /api/v2/job_templates/43/callback/ from 192.168.0.138<font></font>
<font></font>
2019-11-19 23:19:49,095 WARNING  django.request Not Found: /api/v2/job_templates/43/callback/<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para resumir</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La integraci√≥n de Satellite y Ansible Tower puede optimizar en gran medida la inicializaci√≥n y configuraci√≥n de nuevos hosts, lo que ahorra mucho tiempo para los administradores del sistema, ayud√°ndoles a responder m√°s r√°pidamente a las necesidades de la organizaci√≥n. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El 24 de marzo, de 11:00 a 12:30, Red Hat llevar√° a cabo un seminario web "Lo que necesita saber sobre la automatizaci√≥n: habilidades b√°sicas y sensibles". La</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
automatizaci√≥n es un tema que se acerca en popularidad y la cantidad de solicitudes de transformaci√≥n digital. Le informaremos sobre nuestra visi√≥n de la automatizaci√≥n, junto con Ansible y Ansible Tower, y esta ser√° la informaci√≥n b√°sica que le abrir√° la puerta al valiente y nuevo mundo de las herramientas de automatizaci√≥n declarativa.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de este seminario web, comprender√° las entidades Ansible b√°sicas, como el libro de jugadas, el inventario y el m√≥dulo. </font><font style="vertical-align: inherit;">Junto con usted, dominaremos la sintaxis b√°sica de YAML para que pueda escribir sus propios scripts. </font><font style="vertical-align: inherit;">Tambi√©n considerar√° lanzar scripts y aumentar los privilegios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, obtendr√° un conjunto b√°sico de habilidades que le permitir√°n estudiar con √©xito la documentaci√≥n y otra literatura sin la constante sensaci√≥n de que le falta algo. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Reg√≠strate</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y ven!</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es491122/index.html">An√°lisis forense de copias de seguridad HiSuite</a></li>
<li><a href="../es491130/index.html">Caracter√≠sticas de Vue para recordar</a></li>
<li><a href="../es491132/index.html">Cuando el filtro de floraci√≥n no encaja</a></li>
<li><a href="../es491134/index.html">5 etapas de inevitabilidad de la adopci√≥n de la certificaci√≥n ISO / IEC 27001. Negaci√≥n</a></li>
<li><a href="../es491136/index.html">Proyectar contenido en documentaci√≥n angular o perdida de contenido ng</a></li>
<li><a href="../es491146/index.html">UML para desarrolladores</a></li>
<li><a href="../es491150/index.html">C√≥mo pirate√© a los estafadores, o solo el interior de los paneles de phishing</a></li>
<li><a href="../es491154/index.html">B√∫squeda de cursos: c√≥mo construir una ruta de aprendizaje</a></li>
<li><a href="../es491156/index.html">Empat√≠a medible: predicci√≥n de simpat√≠a por IRM cerebral</a></li>
<li><a href="../es491162/index.html">PostgreSQL Antipatterns: una historia sobre el refinamiento iterativo de la b√∫squeda por nombre u "Optimizaci√≥n de ida y vuelta"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>