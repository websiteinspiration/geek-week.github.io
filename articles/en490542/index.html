<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå´Ô∏è üê• üëåüèΩ We bring Python and Bash together: the release of the python-shell and smart-env v libraries. 1.0.1 üë®‚Äçüíª üôÜüèø üïï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all! 
 
 On February 29, 2020, the official micro-release of smart-env and python-shell libraries was held . For those who are not in the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>We bring Python and Bash together: the release of the python-shell and smart-env v libraries. 1.0.1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490542/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Good day to all! </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On February 29, 2020,</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the official micro-release of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smart-env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python-shell</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> libraries </font><u><font style="vertical-align: inherit;">was</font></u><font style="vertical-align: inherit;"> held </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">For those who are not in the know, I suggest that you first read the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In short, the changes include auto-completion of commands, expanding the ability to run commands, a bit of refactoring and bug fixes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I ask for details under cat.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's new in python-shell?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I'll start right away with dessert.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Team completion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agree - it is convenient when the editor / IDE / terminal prompts the name of the command, and sometimes call parameters? </font><font style="vertical-align: inherit;">So python-shell is progressing a bit in providing such functionality. </font><font style="vertical-align: inherit;">Due to the fact that the fields of the Shell class under the de-facto hood are not its fields (ubiquitous __getattr__), autocompletion was also created from scratch (by overloading the __dir__ method, respectively). </font><font style="vertical-align: inherit;">Auto-completion is currently running on BPython and IPython environments. </font><font style="vertical-align: inherit;">Of course, I want to see integration with more venerable products like PyCharm, and in this direction we are exploring implementation possibilities.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding Properties</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As part of the release, the Shell class received a new last_command property. </font><font style="vertical-align: inherit;">The need for it arose due to the fact that when a ShellException was thrown by a command with a non-zero return code, the Command object was not returned from the __call __ () call of the command object. </font><font style="vertical-align: inherit;">Now there is an opportunity to do so:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">try</span>:<font></font>
&nbsp; &nbsp; command = Shell.touch(<span class="hljs-string">'/foo.txt'</span>)
<span class="hljs-keyword">except</span> ShellException:<font></font>
&nbsp; &nbsp; command = Shell.last_command</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also expanded the list of properties of the Command object. </font><font style="vertical-align: inherit;">Added the errors field, which returns the output of the command to the error stream.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Running Commands with Python Invalid Names</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Almost any system has at least one program whose name does not fit as an identifier in Python (for example, the well-known utility 2to3). </font><font style="vertical-align: inherit;">Call her with</font></font><br>
<br>
<pre><code class="python hljs">Shell<span class="hljs-number">.2</span>to3()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fails - the interpreter will not skip. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The solution is to invoke the command in a workaround:</font></font><br>
<br>
<pre><code class="python hljs">Shell(<span class="hljs-string">"2to3"</span>)  <span class="hljs-comment">#   </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is worth noting that in the same way it is possible to run commands that are valid from the point of view of the interpreter, which leaves it possible to create flexible scripts like</font></font><br>
<br>
<pre><code class="python hljs">cmd = <span class="hljs-string">"python{}"</span>.format(sys.version_info[<span class="hljs-number">0</span>])<font></font>
Shell(cmd)(*args, **kwargs)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minor changes</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The __repr __ () and __str __ () methods of the Command object are implemented, which now produce intuitive values ‚Äã‚Äã(a command with parameters and its stdout exhaust, respectively).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minor corrections by code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding test coverage as well as reorganizing existing ones.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding the Subprocess and Process classes, the purpose of which is to create an additional level of abstraction when working with the subprocess module. </font><font style="vertical-align: inherit;">For the most part, it is necessary to eliminate code repetitions when working with Python 2/3, but it can potentially give other bonuses.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's new in smart-env?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unlike python-shell, there are fewer changes in the smart-env library. </font><font style="vertical-align: inherit;">The reason for this is simple - lack of free time, during which some potential improvements (for example, the completion of environment variables) were carried over to the next release. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, the following changes have been made to the library:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minor corrections by code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reorganization and refinement of existing tests.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next Release Plans</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python-shell library</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding support for non-blocking command calls (parallel execution).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smart-env library</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementation of self-completion of environment variables in the ENV class.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support for the in operator to verify the existence of an env variable.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementing str () and repr () functions for the ENV class.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The dates of the next releases will be additionally announced in the following communication channels:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram channel (public)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update in this article.</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490532/index.html">Technologies for Computing: From Call-Only Phones to the Cloud and Linux Supercomputers</a></li>
<li><a href="../en490534/index.html">Fuzzy induction method and its application for modeling knowledge and information systems</a></li>
<li><a href="../en490536/index.html">Continuation of participation (and victory) in the Russian AI Cup 2019</a></li>
<li><a href="../en490538/index.html">Half a Century Secret: The Whole World in the Palm of the CIA</a></li>
<li><a href="../en490540/index.html">Home Theater at Raspberry</a></li>
<li><a href="../en490550/index.html">Mapping data from a relational database</a></li>
<li><a href="../en490552/index.html">Products, projects and other animals</a></li>
<li><a href="../en490554/index.html">New ITMO University Podcast - Discussing the Work of Beginning Scientists in Machine Learning</a></li>
<li><a href="../en490558/index.html">Evangelists vs. Werewolves</a></li>
<li><a href="../en490560/index.html">Hackathon from scratch in two weeks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>