<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฏ ๐ฉ๐ผโ๐พ ููุง ูุชุจุช ุฑุณุงูุชู ๐ค ๐๐ฟ ๐ฒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฐุงุช ูุณุงุก ุ ุจุนุฏ ููู ูุญุจุท ุขุฎุฑ ุ ูููุก ุจูุญุงููุงุช ููุงุฒูุฉ ุงููุนุจุฉ ุ ูุฑุฑุช ุฃููู ุจุญุงุฌุฉ ูุงุณุฉ ุฅูู ุงูุฑุงุญุฉ. ุณุฃูุชูู ุฅูู ูุดุฑูุน ุขุฎุฑ ุ ูุณุฃูุนู ุฐูู ุจุณุฑุนุฉ ุ ูุฃุฑุฏ ุงุญุชุฑุงู ุงูุฐ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ููุง ูุชุจุช ุฑุณุงูุชู</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490070/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐุงุช ูุณุงุก ุ ุจุนุฏ ููู ูุญุจุท ุขุฎุฑ ุ ูููุก ุจูุญุงููุงุช ููุงุฒูุฉ ุงููุนุจุฉ ุ ูุฑุฑุช ุฃููู ุจุญุงุฌุฉ ูุงุณุฉ ุฅูู ุงูุฑุงุญุฉ. </font><font style="vertical-align: inherit;">ุณุฃูุชูู ุฅูู ูุดุฑูุน ุขุฎุฑ ุ ูุณุฃูุนู ุฐูู ุจุณุฑุนุฉ ุ ูุฃุฑุฏ ุงุญุชุฑุงู ุงูุฐุงุช ุงูุฐู ุงูุญุฏุฑ ุฎูุงู ุชุทููุฑ ุงููุนุจุฉ ูุณูุฃุฎุฐ ุงููุนุจุฉ ุนุงุตูุฉ ุจููุฉ ูุชุฌุฏุฏุฉ! </font><font style="vertical-align: inherit;">ุงูุดูุก ุงูุฑุฆูุณู ูู ุงุฎุชูุงุฑ ูุดุฑูุน ุฌููู ููุฑูุญ ... ุงูุชุจ ุฑุณุงูุชู ุงูุฎุงุตุฉุ </font><font style="vertical-align: inherit;">ูุง! </font><font style="vertical-align: inherit;">ูุง ูุฏู ุตุนูุจุชูุงุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงูุนุซูุฑ ุนูู ุงูุฑูุฒ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/_b/cw/av/_bcwavbn-h0r3vgv8zzhdkaq09y.jpeg"></td>
<td><img src="https://habrastorage.org/webt/97/4x/qd/974xqd470ltfwu6gge0hfnaqry4.jpeg"></td>
</tr>
</tbody></table></div><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูููุฉ ููุฌุฒุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏุฉ ุนุงู ุชูุฑูุจูุง ูุจู ุจุฏุก ุงูุนูู ูู ุจุฑูุงูุฌ ุงููุฑุงุณูุฉ ุ ูุงู ูุนูู ูู ูุนุจุฉ Line Tower Wars ูุชุนุฏุฏุฉ ุงููุงุนุจูู ุนุจุฑ ุงูุฅูุชุฑูุช. </font><font style="vertical-align: inherit;">ุณุงุฑุช ุงูุจุฑูุฌุฉ ุจุดูู ุฌูุฏ ุ ูู ุดูุก ุขุฎุฑ (ุงูุชูุงุฒู ูุงููุฑุฆู ุนูู ูุฌู ุงูุฎุตูุต) ูู ููู ุฌูุฏูุง ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูุฌุฃุฉ ุงุชุถุญ ุฃู ุตูุน ูุนุจุฉ ูุตูุน ูุนุจุฉ ููุชุนุฉ (ููุชุนุฉ ูุดุฎุต ุขุฎุฑ ุบูุฑู) ุดูุฆุงู ูุฎุชููุงู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุนุงู ูู ุงููุญูุฉ ุ ููุช ุจุญุงุฌุฉ ุฅูู ุงูุชุดุชุช ุ ูุฐูู ูุฑุฑุช ุฃู ุฃุฌุฑุจ ูุฏู ุนูู ุดูุก ุขุฎุฑ. </font><font style="vertical-align: inherit;">ููุน ุงูุงุฎุชูุงุฑ ุนูู ุชุทููุฑ ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ุ ููู Flutter. </font><font style="vertical-align: inherit;">ุณูุนุช ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงูุฌูุฏุฉ ุนู Flutter ุ ูุฃุนุฌุจุช ุจุงูุณูุงู ุจุนุฏ ุชุฌุฑุจุฉ ูุตูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฑุฑุช ุฃู ุฃูุชุจ ุฑุณุงูุชู. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ุงูุฃูุถู ุชูููุฐ ูู ูู ุงูุนููู ูุงูุฎุงุฏู. </font><font style="vertical-align: inherit;">ุซุงูููุง ุ ุณูููู ููุงู ุดูุก ููู ููุถุนู ูู ุงููุญูุธุฉ ููุจุญุซ ุนู ุนูู ุ ุฃูุง ููุท ูู ูุฐู ุงูุนูููุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุธููุฉ ุงููุฌุฏููุฉ</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุฏุดุงุช ุงูุฎุงุตุฉ ูุงูุฌูุงุนูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุณุงู ุงููุต ูุงูุตูุฑ ูููุงุทุน ุงูููุฏูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงููุงุช ุงูุตูุช ูุงูููุฏูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃููุฏ ุงูุงุณุชูุงู ูุงููุฑุงุกุฉ (ุนูุงูุงุช ูู Votsap)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุทุจูุนุงุช ..."</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุดุนุงุฑุงุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ ุนู ุทุฑูู ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ ุงูุณุฑูุนุฉ ูุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุธุฑ ุฅูู ุงููุณุชูุจู ุ ูููููู ุฃู ุฃูุฎุฑ ุจูุฎุฑ (ูุจุงุฑุชูุงุญ) ุจุฃู ูู ุดูุก ุชู ุงูุชุฎุทูุท ูู ุชูุฑูุจูุง ุชู ุชูููุฐู ุ ููู ูุชู ุชูููุฐู ุจุนุฏ - ุณูุชู ุชูููุฐู ูู ุงููุณุชูุจู ุงููุฑูุจ.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://player.vimeo.com/video/393246625" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชูุงุฑ ุงููุบุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃููุฑ ููุชุฑุฉ ุทูููุฉ ูู ุงุฎุชูุงุฑ ุงููุบุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ูุงู ูู ุงููุบุฑู ุงุณุชุฎุฏุงู ุงูุณูุงู ููู ูู ุงูุนููู ูุงูุฎุงุฏู ุ ูููู ุฃุธูุฑ ูุญุต ุฃูุซุฑ ุชูุตููุงู ุฃูู ูุง ููุฌุฏ ุงูุนุฏูุฏ ูู ุจุฑุงูุฌ ุชุดุบูู ุงูุณูุงู ุงููุชุงุญุฉ ุ ูุฃู ุชูู ุงูุชู ูุง ุชููู ุงููุซูุฑ ูู ุงูุซูุฉ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููู ูู ุฃุชุญุฏุซ ุนู ุงููุญุธุฉ ุงูุญุงููุฉ ุ ููุฏ ูููู ุงููุถุน ูุฏ ุชุญุณู. </font><font style="vertical-align: inherit;">ูุฐูู ููุน ุงุฎุชูุงุฑู ุนูู C # ุ ุงูุฐู ุนููุช ูุนู ูู Unity.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏุณุฉ ูุนูุงุฑูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏุฃ ุจุงูุชูููุฑ ูู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ. </font><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ุจุงููุธุฑ ุฅูู ุฃู 3 ุฃุดุฎุงุต ููุตู ุนูู ุงูุฃุฑุฌุญ ุณูุณุชุฎุฏููู ุฑุณุงูุชู ุ ููู ูุถุทุฑ ุงููุฑุก ุฅูู ุงูุงูุชูุงู ุจุงูุนูุงุฑุฉ ุจุดูู ุนุงู. </font><font style="vertical-align: inherit;">ุชุฃุฎุฐ ูุชูุนู ููุง ูู ุงูุญุงู ูู ุนุฏุฏ ูุง ูุญุตู ูู ุงูุฏุฑูุณ. </font><font style="vertical-align: inherit;">ููุง ุงูุนูุฏุฉ ุ ููุง ุงููุงูุฌู ุ ููุง ููุงุจุณ ุงูููุจ. </font><font style="vertical-align: inherit;">ููุฌุฒ. </font><font style="vertical-align: inherit;">ู Firebase ููุง. </font><font style="vertical-align: inherit;">ููููุง ููุณุช ูุซูุฑุฉ ููุงูุชูุงู. </font><font style="vertical-align: inherit;">ูุฑุฑุช ุฃู ุฃุตูุน ุฑุณูููุง ููููู ุงูุชูุณุน ุฃููููุง ุจุณูููุฉ ุ ููุง ูู ููุช ุฃุชููุน ููุงููู ุงูุนููุงุก ุงููุชุฒุงูููู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุญูุซ ูู ููู ูุฏู ุฎุจุฑุฉ ูู ูุฐุง ุงููุฌุงู ุ ูุงู ุนูู ุฃู ุฃุชุนูู ูู ุดูุก ุนููููุง ูู ุฎูุงู ุทุฑููุฉ ุงูุฃุฎุทุงุก ูุงูุฃุฎุทุงุก ูุฑุฉ ุฃุฎุฑู.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏู ุงูููุฏุณุฉ ุงูููุงุฆูุฉ ูุซู ูุฐุง</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/xp/jc/n7/xpjcn7otuw8am5jv9yztpp1sgyu.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุฃุฏุนู ุฃู ูุซู ูุฐู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุฑุงุฆุนุฉ ุฌุฏูุง ูููุซููุฉ ุ ูููููุง ูุงุจูุฉ ููุชุทุจูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุญูุฉ ุงููุธุฑูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุจ ุฃู ุชุชุญูู ุงูุฃุญูุงู ุงูุซูููุฉ ูุงูููุงุณ ุงูุฃููู ุ ููููู ูุง ุฃููู ุญููุง ููููุฉ ุงูุชุญูู. </font><font style="vertical-align: inherit;">ูุขูู ุฃู ูุง ุฃููุช ูุญุธุฉ ูุงุถุญุฉ ูุนุฑููุฉ ููุฌููุน ุฅูุง ุฃูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ูุตู ุชูุตููู ููููููุงุช ุงููุฑุฏูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุชู ูุจู ุฃู ุฃุจุฏุฃ ูู ุตูุน ุงููุนุจุฉ ุ ููุช ููุชูููุง ุจููููู ุงูุฎุงุฏู ุบูุฑ ุงููุชุฒุงูู ุฃุญุงุฏู ุงูุฎููุท. </font><font style="vertical-align: inherit;">ุจุดูู ูุนุงู ูุจุฏูู ุณุจุงู ูุญุชูู - ูุงุฐุง ููููู ุฃู ุชุณุฃู ุนูู. </font><font style="vertical-align: inherit;">ูู ุฃุฌู ููู ููููุฉ ุชุฑุชูุจ ูุฐู ุงูุฎูุงุฏู ุ ุจุฏุฃุช ูู ุงูุฎูุถ ูู ูุญุฏุฉ </font></font><code>asyncio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุบุฉ ุงูุซุนุจุงู. </font><font style="vertical-align: inherit;">ุงูุญู ุงูุฐู ุฑุฃูุชู ุจุฏุง ุฃููููุง ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุจุงุฎุชุตุงุฑ ุ ูุจุฏู ุญู ุงูููุฏ ุงูุฒุงุฆู ููุฐุง.</font></font><br>
<pre><code class="cs hljs"><span class="hljs-comment">//  ,      ,    </span>
<span class="hljs-comment">//       .      socket.Receive</span>
<span class="hljs-comment">//     , :</span>
<span class="hljs-keyword">var</span> bytesReceived = Completer&lt;<span class="hljs-keyword">object</span>&gt;();<font></font>
selector.Register(<font></font>
    socket,<font></font>
    SocketEvent.Receive,<font></font>
    () =&gt; bytesReceived.Complete(<span class="hljs-literal">null</span>)<font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">await</span> bytesReceived.Future;<font></font>
<font></font>
<span class="hljs-keyword">int</span> n = socket.Receive(...); <span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-comment">// selector -     poll.   </span>
<span class="hljs-comment">//        (Receive </span>
<span class="hljs-comment">//  ), ,    ,  .</span>
<span class="hljs-comment">//   completer,      ,</span>
<span class="hljs-comment">//        , ,     .</span>
<span class="hljs-comment">//     ,       .</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุณุชุฎุฏุงู ูุฐู ุงูุชูููุฉ ุงูุจุณูุทุฉ ุ ูููููุง ุชูุฏูู ุนุฏุฏ ูุจูุฑ ูู ุงูููุงุจุณ ูู ุฎูุท ูุงุญุฏ. </font><font style="vertical-align: inherit;">ูุญู ูุง ูุญุธุฑ ุงูุฏูู ุฃุซูุงุก ุงูุชุธุงุฑ ุชููู ุฃู ุฅุฑุณุงู ูุญุฏุงุช ุงูุจุงูุช. </font><font style="vertical-align: inherit;">ุงูุฏูู ูุดุบูู ุฏุงุฆููุง ุจุนูู ูููุฏ. </font><font style="vertical-align: inherit;">ุงูุชุฒุงูู ุ ูู ูููุฉ ูุงุญุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชูููุฐ ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุจูุฐู ุงูุทุฑููุฉ. </font><font style="vertical-align: inherit;">ูููุง ูููุง ูุชุฑุงุจุทุฉ ูุบูุฑ ูุชุฒุงููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุญุตูู ุนูู ุฃูุตู ุฃุฏุงุก ุ ุชุญุชุงุฌ ุฅูู ุชุดุบูู ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูุฎูุงุฏู ุนูู ุฌูุงุฒ ูุงุญุฏ ูุฃูู ูุญุชูู ุนูู ููู (4 ูู ุงูุตูุฑุฉ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑุฃ ุฎุงุฏู Frontend ุงูุฑุณุงูุฉ ูู ุงูุนููู ููุฑุณููุง ุ ุจูุงุกู ุนูู ุฑูุฒ ุงูุฑุณุงูุฉ ุ ุฅูู ุฃุญุฏ ุงูููุถูุนุงุช ูู Kafka.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงุดูุฉ ุตุบูุฑุฉ ููู ูุง ูุนุฑู ุงููุงูุง</font></font></b><div class="spoiler_text">   ,          RabbitMQ.    .       ,              (   authentication backend     authentication, ).  ?      -  ,         (partition).      ,      .      ,   ,       . ,             ( ,   ,  ,     (headers)).<br>
<br>
  ?     ?      .   (consumer)         (  consumer'),    ( )      . , ,      ,    2 ,       .   3 โ     2.                .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุณู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุฑุณุงูุฉ ุฅูู ุงููุงููุง ุจุฏูู ููุชุงุญ (ุนูุฏูุง ูุง ูููู ููุงู ููุชุงุญ ุ ุชุฑุณู ุงููุงููุง ุจุจุณุงุทุฉ ุงูุฑุณุงุฆู ุฅูู ุงูุทุฑู ุจุฏูุฑู). ูุชู ุณุญุจ ุงูุฑุณุงูุฉ ูู ุงูููุถูุน ุจูุงุณุทุฉ ุฃุญุฏ ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุงูููุงุจูุฉ. ูููู ุงูุฎุงุฏู ุจูุนุงูุฌุฉ ุงูุฑุณุงูุฉ ู ... ูุงุฐุง ุจุนุฏ ุฐููุ ููุงุฐุง ูุนุชูุฏ ุนูู ููุน ุงูุฑุณุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุญุงูุฉ ุงูุฃูุซุฑ ุดููุนูุง ุ ุชุญุฏุซ ุฏูุฑุฉ ุงุณุชุฌุงุจุฉ ุงูุทูุจ. ุนูู ุณุจูู ุงููุซุงู ุ ุจุงููุณุจุฉ ูุทูุจ ุงูุชุณุฌูู ุ ูุญุชุงุฌ ููุท ูุฅุนุทุงุก ุงูุนููู ุฅุฌุงุจุฉ ( </font></font><code>Success</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font><code>EmailAlreadyInUse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฅูุฎ). ูููู ุจุงููุณุจุฉ ูุฑุณุงูุฉ ุชุญุชูู ุนูู ุฏุนูุฉ ุฅูู ุฏุฑุฏุดุฉ ุญุงููุฉ ููุฃุนุถุงุก ุงูุฌุฏุฏ (Vasya ู Emil ู Julia) ุ ูุญุชุงุฌ ุฅูู ุงูุฑุฏ ููุฑูุง ุจุซูุงุซุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฑุณุงุฆู. ุงูููุน ุงูุฃูู - ุชุญุชุงุฌ ุฅูู ุฅุฎุทุงุฑ ุงูุฏุงุนู ุจูุชูุฌุฉ ุงูุนูููุฉ (ูุฌุฃุฉ ุญุฏุซ ุฎุทุฃ ูู ุงูุฎุงุฏู). ุงูููุน ุงูุซุงูู - ุชุญุชุงุฌ ุฅูู ุฅุฎุทุงุฑ ุฌููุน ุงูุฃุนุถุงุก ุงูุญุงูููู ูู ุงูุฏุฑุฏุดุฉ ุจูุฌูุฏ ุงูุขู ูุซู ูุคูุงุก ุงูุฃุนุถุงุก ุงูุฌุฏุฏ ูู ุงูุฏุฑุฏุดุฉ. ูุงูุซุงูุซ ูู ุฅุฑุณุงู ุฏุนูุงุช ุฅูู ูุงุฒูุง ูุฅููู ูููููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ูุฐุง ูุง ูุจุฏู ุตุนุจูุง ููุบุงูุฉ ุ ูููู ูู ุฃุฌู ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุฃู ุนููู ูุญุชุงุฌ ุฅูู: 1) ูุนุฑูุฉ ุฃู ุฎุงุฏู ุฃูุงูู ูุชุตู ุจู ูุฐุง ุงูุนููู (ูุง ูุฎุชุงุฑ ุงูุฎุงุฏู ุงูุฐู ุณูุชุตู ุจู ุงูุนููู ุ ููุฑุฑ ุงูููุงุฒู ุจุงููุณุจุฉ ููุง) ุ 2) ุฅุฑุณุงู ุฑุณุงูุฉ ูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุฅูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงููุทููุจ ุ 3) ูู ุงููุงูุน ุ ุฃุฑุณู ุฑุณุงูุฉ ุฅูู ุงูุนููู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูููุฐ ุงูููุทุชูู 1 ู 2 ุ ูุฑุฑุช ุงุณุชุฎุฏุงู ููุถูุน ูููุตู (ููุถูุน "ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ"). ูุนูู ูุตู ุงููุตุงุฏูุฉ ูุงูุฌูุณุฉ ูููุงุถูุน ุงูุงุณุชุฏุนุงุก ุฅูู ุฃูุณุงู ูุขููุฉ ููุงุฒูุฉ. ูุฑู ุฃู ุฎุงุฏู ุงูุฌูุณุฉ ูุญููุฉ ุจุดูู ูุจูุฑุ ูููุง ููุท ุจุฅุถุงูุฉ ุงุซููู ูู ุฎูุงุฏู ุงูุชูุณูู ูุงูุฌูุณุงุช ุงูุฌุฏูุฏุฉ ุ ูุณุชููู ูุงููุง ุจุฅุนุงุฏุฉ ุชูุฒูุน ุงูุญูู ุจุงููุณุจุฉ ููุง ุ ูุชูุฑูุบ ุฎูุงุฏู ุงูุฌูุณุฉ ุงูุญุงููุฉ. ูุนูู ูุตู ููุถูุน "ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ" ูู ุงููุณู ูุขููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุงูู ูู ุฎุงุฏู ุฃูุงูู ูุน ุฌุฒุก ูุงุญุฏ ูู ููุถูุน "ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ" (ูุน ููุณ ุงูููุฑุณ ูุซู ุงูุฎุงุฏู ููุณู). ุฃู ุ ุฎุงุฏู 0 - ูุณู 0 ุ ูููุฐุง. ูุชูุญ ูุงููุง ุงูุงุดุชุฑุงู ููุณ ููุท ูู ููุถูุน ูุนูู ุ ูููู ุฃูุถูุง ูู ุฌุฒุก ูุนูู ูู ููุถูุน ูุนูู. ุชุดุชุฑู ุฌููุน ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูู ุงูุดุฑูุงุช ุงููุงุดุฆุฉ ูู ุงููุณู ุงูููุงุจู. ูุจุงูุชุงูู ุ ูุฅู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ูุงุฏุฑ ุนูู ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุฎุงุฏู ุฃูุงูู ูุนูู ุนู ุทุฑูู ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ูุณู ูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุงูุขู ุนูุฏูุง ููุถู ุงูุนููู ุ ุชุญุชุงุฌ ููุท ุฅูู ุญูุธ ุฒูุฌ ูู UserId - Frontend Server Index ูู ููุงู ูุง. ูู ุญุงูุฉ ูุทุน ุงูุงุชุตุงู - ุญุฐู. ููุฐู ุงูุฃุบุฑุงุถ ุ ุณุชูุนู ุฃู ูู ููุงุนุฏ ุจูุงูุงุช ูููุฉ ููุชุงุญ ุนุฏูุฏุฉ ูู ุงูุฐุงูุฑุฉ. ุงุฎุชุฑุช ุงููุฌู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุชุจุฏู ูู ุงูููุงุฑุณุฉ. </font><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุจุนุฏ ุฅูุดุงุก ุงูุงุชุตุงู ุ ูุฑุณู ุงูุนููู ุฃูุฏุฑูู ุฑุณุงูุฉ ุฅูู ุงูุฎุงุฏู </font></font><code>Join</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุชููู ุฎุงุฏู Frontend ุงูุฑุณุงูุฉ ููุนูุฏ ุชูุฌูููุง ุฅูู ููุถูุน ุงูุฌูุณุฉ ุ ูุน ุฅุถุงูุฉ ุฑุฃุณ "Frontend Server" ูุจุฏุฆููุง: {index}. </font><font style="vertical-align: inherit;">ุณูุชููู ุฃุญุฏ ุฎูุงุฏู ุฌูุณุฉ ุงููุงุฌูุฉ ุงูุฎูููุฉ ุฑุณุงูุฉ ุ ูููุฑุฃ ุฑูุฒ ุงูุชูููุถ ุงููููุฒ ุ ููุญุฏุฏ ููุน ุงููุณุชุฎุฏู ุงูุฐู ุงูุถู ุฅููู ุ ูููุฑุฃ ุงูููุฑุณ ุงูููุถุงู ุจูุงุณุทุฉ ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูููุชุจ UserId - ุงูููุฑุณ ุฅูู ุงููุฌู. </font><font style="vertical-align: inherit;">ุงุนุชุจุงุฑูุง ูู ูุฐู ุงููุญุธุฉ ุ ูุชู ุงุนุชุจุงุฑ ุงูุนููู ุนุจุฑ ุงูุฅูุชุฑูุช ุ ูุงูุขู ูุนุฑู ูู ุฎูุงู ุฃู ุฎุงุฏู ุฃูุงูู (ูุจุงูุชุงูู ุ ูู ุฎูุงู ุฃู ุฌุฒุก ูู ููุถูุน "ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ") ูููููุง "ุงููุตูู ุฅููู" ุนูุฏูุง ูุฑุณู ุนููุงุก ุขุฎุฑูู ุฑุณุงุฆู ุฅูู ุฃูุฏุฑู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* ูู ุงููุงูุน ุ ุงูุนูููุฉ ุฃูุซุฑ ุชุนููุฏูุง ููููุงู ููุง ูุตูุชู. </font><font style="vertical-align: inherit;">ููููู ุงูุนุซูุฑ ุนููู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฏ ุงูุฒุงุฆู ูุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ</font></font></h4><br>
<pre><code class="cs hljs"><span class="hljs-comment">// Frontend Server 6</span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-comment">// Consume from "Frontend Servers" topic, partition 6</span>
    <span class="hljs-keyword">var</span> messageToClient = consumer.Consume();
    <span class="hljs-keyword">if</span> (message != <span class="hljs-literal">null</span>) {<font></font>
        relayMessageToClient(messageToClient);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> callbacks = selector.Poll();
    <span class="hljs-keyword">while</span> (callbacks.TryDequeue(<span class="hljs-keyword">out</span> callback)) {<font></font>
        callback();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">long</span> now = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();
    <span class="hljs-keyword">while</span> (!callAtQueue.IsEmpty &amp;&amp; callAtQueue.PeekPriority() &lt;= now) {<font></font>
        callAtQueue.Dequeue()();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">while</span> (messagesToRelayToBackendServers.TryDequeue(<span class="hljs-keyword">out</span> messageFromClient)) {
        <span class="hljs-comment">// choose topic</span><font></font>
        producer.Produce(topic, messageFromClient);<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุจุนุถ ุงูุญูู ููุง. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) </font></font><code>relayMessageToClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุณูููู ูู ุงูุฎุทุฃ ุฃุฎุฐ ุงูููุจุณ ุงูุฐู ุชุฑูุฏู ูุงูุจุฏุก ููุฑูุง ูู ุฅุฑุณุงู ุฑุณุงูุฉ ุฅููู ุ ูุฃููุง ุฑุจูุง ูุฑุณู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุนู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุถ ุงูุฑุณุงุฆู ุงูุฃุฎุฑู ุฅูู ุงูุนููู. ุฅุฐุง ุจุฏุฃูุง ูู ุฅุฑุณุงู ูุญุฏุงุช ุงูุจุงูุช ุฏูู ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุจุณ ูุดุบูููุง ุญุงูููุง ุ ูุณูุชู ุฎูุท ุงูุฑุณุงุฆู. ููุง ูู ุงูุญุงู ูู ุงูุนุฏูุฏ ูู ุงูุฃูุงูู ุงูุฃุฎุฑู ุงูุชู ุชุชุทูุจ ูุนุงูุฌุฉ ุจูุงูุงุช ููุธูุฉ ุ ูุฅู ุงูุญููุฉ ูู ุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุชุธุงุฑ ุ ุฃู ูุงุฆูุฉ ุงูุชุธุงุฑ ูู ุงููููู ( </font></font><code>TaskCompletionSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู C #).</font></font><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-keyword">async</span> <span class="hljs-title">relayMessageToClient</span>(<span class="hljs-params">message</span>)</span> {
    <span class="hljs-comment">// find client</span>
    <span class="hljs-keyword">await</span> client.ReadyToSend();
    <span class="hljs-keyword">await</span> sendMessage(client, message);<font></font>
    client.CompleteSend();<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> {
    <span class="hljs-comment">// ...</span>
    sendMessageQueue = <span class="hljs-keyword">new</span> LinkedList&lt;Completer&lt;<span class="hljs-keyword">object</span>&gt;&gt;();<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">async</span> Future <span class="hljs-title">ReadyToSend</span>(<span class="hljs-params"></span>)</span> {
        <span class="hljs-keyword">var</span> sendMessage = Completer&lt;<span class="hljs-keyword">object</span>&gt;();
	<span class="hljs-keyword">if</span> (sendMessageQueue.IsEmpty) {<font></font>
	    sendMessageQueue.AddLast(sendMessage);<font></font>
	} <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">var</span> prevSendMessage = sendMessageQueue.Last;<font></font>
	    sendMessageQueue.AddLast(sendMessage);<font></font>
	    <span class="hljs-keyword">await</span> prevSendMessage.Future;<font></font>
	}<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">CompleteSend</span>(<span class="hljs-params"></span>)</span> {
        <span class="hljs-keyword">var</span> sendMessage = sendMessageQueue.RemoveFirst();<font></font>
	sendMessage.Complete(<span class="hljs-literal">null</span>);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูู ุชูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุงุฑุบุฉ ุ ููุฐุง ูุนูู ุฃู ุงูููุจุณ ูุดุบูู ุจุงููุนู ูู ุงูููุช ุงูุญุงูู. ุฅูุดุงุก ูุงุญุฏุฉ ุฌุฏูุฏุฉ </font></font><code>completer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฅุถุงูุชู ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ู </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุงุจู</font></font></i> <code>completer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุจุงูุชุงูู ุ ุนูุฏ ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงูุณุงุจูุฉ ุ </font></font><code>CompleteSend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชูุชูู </font></font><code>completer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ุณูุชุณุจุจ ูู ุจุฏุก ุงูุฎุงุฏู ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงูุชุงููุฉ. ุชุณูุญ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุฐู ุฃูุถูุง ุจูุดุฑ ุงูุงุณุชุซูุงุกุงุช ุจุณูุงุณุฉ. ุงูุชุฑุถ ุญุฏูุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุนููู. ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุฅููุงู ุ ุจุงุณุชุซูุงุก ุฅุฑุณุงู ูุฐู ุงูุฑุณุงูุฉ ููุณ ููุท ุ ูููู ุฃูุถูุง ุฌููุน ุงูุฑุณุงุฆู ุงูุชู ุชูุชุธุฑ ุญุงูููุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ (ุงูุชุธุฑ </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'ah). ุฅุฐุง ูู ููุนู ุฐูู ุ ูุณูู ุชุณุชูุฑ ูู ุชุนููู ุ ูุณูู ูุชููู ุชุณุฑุจ ููุฐุงูุฑุฉ. ููุฅูุฌุงุฒ ุ ูุง ูุธูุฑ ุงูุฑูุฒ ุงูุฐู ููุนู ุฐูู ููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2)</font></font><code>selector.Poll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ุงููุงูุน ุ ุฅููุง ููุณุช ุฎุฏุนุฉ ุ ูููููุง ูุฌุฑุฏ ูุญุงููุฉ ูุชุฐููู ุฃูุฌู ุงููุตูุฑ ูู ุชูููุฐ ุงูุทุฑููุฉ </font></font><code>Socket.Select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code>selector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุฌุฑุฏ ุงูุชูุงู ุนูู ูุฐู ุงูุทุฑููุฉ). ุงุนุชูุงุฏูุง ุนูู ูุธุงู ุงูุชุดุบูู ุชุญุช ุบุทุงุก ุงููุญุฑู ุ ุชุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ุฅูุง </font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>poll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููู ูุฐุง ููุณ ูููุง ููุง. ุงูุดูุก ุงูููู ูู ููู ุชุนูู ูุฐู ุงูุทุฑููุฉ ูุน ุงูููุงุฆู ุงูุชู ูุทุนููุง ูููุฏุฎูุงุช (ูุงุฆูุฉ ุงูููุงุจุณ ูููุฑุงุกุฉ ูุงููุชุงุจุฉ ูุงูุชุญูู ูู ุงูุฃุฎุทุงุก). ุชุฃุฎุฐ ูุฐู ุงูุทุฑููุฉ ุงูููุงุฆู ูุงุณุชุทูุงุนุงุช ุงูุฑุฃู ูุชุชุฑู ููุท ุชูู ุงููุขุฎุฐ ูู ุงูููุงุฆู ุงูุฌุงูุฒุฉ ูุฃุฏุงุก ุงูุนูููุฉ ุงููุทููุจุฉ. ูุชู ุทุฑุญ ูุงูุฉ ุงูููุงุจุณ ุงูุฃุฎุฑู ูู ุงูููุงุฆู. "ุงูุฑูู" ูุญุฏุซ ูู ุฎูุงู</font></font><code>RemoveAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุฃู ุ ูุชู ุชุญููู ุฌููุน ุงูุนูุงุตุฑ ุงููุงุญูุฉ ุ ููู ุบูุฑ ูุนุงู). ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุธุฑูุง ูุฃููุง ูุญุชุงุฌ ุฅูู ุงุณุชุทูุงุน ุฌููุน ุงูููุงุจุณ ุงููุณุฌูุฉ ูู ูู ุชูุฑุงุฑ ููุฏูุฑุฉ ุ ูุฅู ูุฐุง "ุงูุชุทููุฑ" ุถุงุฑ ุจุดูู ุนุงู ุ ูุชุนูู ุนูููุง ุฅุนุงุฏุฉ ููุก ุงูููุงุฆู ูู ูู ูุฑุฉ. ูููููุง ุงูุชุบูุจ ุนูู ูู ูุฐู ุงููุดุงูู ุจุงุณุชุฎุฏุงู ูุดููุฉ ูุฎุตุตุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>RemoveAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุคุฏู </font><font style="vertical-align: inherit;">ุทุฑููุชู ุฅูู </font><font style="vertical-align: inherit;">ุฅุฒุงูุฉ ุงูุนูุตุฑ ูู ุงููุงุฆูุฉ ุ ูููู ุจุจุณุงุทุฉ ุชูููุฒู ุนูู ุฃูู ูุญุฐูู. ุงููุฆุฉ </font></font><code>ListForPolling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชูููุฐู ููุฐู ุงููุงุฆูุฉ. </font></font><code>ListForPolling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ููุท ูุน ุงูุทุฑููุฉ </font></font><code>Socket.Select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููุงุณุจ ุฃู ุดูุก ุขุฎุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3)</font></font><code>callAtQueue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ูุนุธู ุงูุญุงูุงุช ุ ูุชููุน ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุ ุจุนุฏ ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุนููู ุฅูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุ ุงุณุชุฌุงุจุฉ (ุชุฃููุฏ ูุฌุงุญ ุงูุนูููุฉ ุ ุฃู ุฎุทุฃ ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูุง). ุฅุฐุง ูู ููุชุธุฑ ุฅุฌุงุจุฉ ุฎูุงู ูุชุฑุฉ ุฒูููุฉ ูุงุจูุฉ ููุชูููู ุ ูุฑุณู ุฎุทุฃ ุฅูู ุงูุนููู ุญุชู ูุง ููุชุธุฑ ุฅุฌุงุจุฉ ูู ุชุฃุชู ุฃุจุฏูุง. </font></font><code>callAtQueue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุฐุงุช ุฃููููุฉ. ูุจุงุดุฑุฉ ุจุนุฏ ุฃู ูุฑุณู ุงูุฎุงุฏู ุงูุฑุณุงูุฉ ุฅูู Kafka ุ ููุนู ุดูุฆูุง ููุฐุง:</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">long</span> now = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();<font></font>
callAtQueue.Enqueue(callback, now + config.WaitForReplyMSec);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฑุฏ ุงูุงุชุตุงู ุ ูุชู ุฅูุบุงุก ุงูุชุธุงุฑ ุงูุฑุฏ ููุจุฏุฃ ุฅุฑุณุงู ุฎุทุฃ ุงูุฎุงุฏู. ุฅุฐุง ุชู ุชููู ุงุณุชุฌุงุจุฉ ูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุ ูุฅู ุฑุฏ ุงูุงุชุตุงู ูุง ููุนู ุดูุฆูุง. </font><font style="vertical-align: inherit;">ูุง ุชูุฌุฏ ุทุฑููุฉ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุณุชุฎุฏุงูู </font></font><code>await Task.WhenAny(answerReceivedTask, Task.Delay(x))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุญูุซ ุฃู ุงูููุฏ ุจุนุฏ </font></font><code>Task.Delay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐู ุนูู ุงูุฎูุท ูู ุงูุชุฌูุน. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุ ูู ุงููุงูุน ุ ูู ุดูุก ุนู ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ. ูุทููุจ ุชุตุญูุญ ุทููู ููุง. ูู ุงููุงูุน ุ ุงูุฎุงุฏู ููุณ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุงูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุฏ ูุชุฑุงุจุทุฉ. ุจุงูุทุจุน ุงููุงููุง ุชุญุช ุบุทุงุก ูุญุฑู ุงูุณูุงุฑุฉ ุชุณุชุฎุฏู ุฎููุท ุ ูููู ุฃุนูู ุฑูุฒ ุงูุชุทุจูู. ูุงูุญูููุฉ ุฃู ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ููุถูุน ุงููุงููุฉ (ุฅูุชุงุฌ) ูุฏ ูุง ููุฌุญ. ูู ุญุงูุฉ ุงููุดู ุ ููุฑุฑ ูุงููุง ุฅุฑุณุงู ุนุฏุฏ ูุนูู ูุงุจู ููุชูููู ูู ุงููุฑุงุช ุ ูููู ุฅุฐุง ูุดูุช ุงููุบุงุฏุฑุฉ ุงููุชูุฑุฑุฉ ุ ูุชุฎูู ูุงููุง ุนู ูุฐุง ุงูุนูู ุจุงุนุชุจุงุฑู ููุฆูุณูุง ููู. ููููู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูุฏ ุชู ุฅุฑุณุงููุง ุจูุฌุงุญ ุฃู ูุง </font></font><code>deliveryHandler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุชู ููุฑ ูููุง ุฅูู ุงูุทุฑููุฉ </font></font><code>Produce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุณุชุฏุนู Kafka ูุฐุง ุงููุนุงูุฌ ูู ูุคุดุฑ ุชุฑุงุจุท ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงูุฎุงุต ุจุงูููุชุฌ (ุงูุฎูุท ุงูุฐู ูุฑุณู ุงูุฑุณุงุฆู). ูุฌุจ ุฃู ูุชุฃูุฏ ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููู ุจุฅูุบุงุก ุงูุชุธุงุฑ ุงูุฑุฏ ูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ (ูู ุชุฃุชู ุงูุงุณุชุฌุงุจุฉ ูุฃู ุงูุทูุจ ูู ูุชู ุฅุฑุณุงูู) ูุฃุฑุณู ุฎุทุฃ ุฅูู ุงูุนููู. ุฃู ุฃูู ูุง ูููููุง ุชุฌูุจ ุงูุชูุงุนู ูุน ููุถูุน ุขุฎุฑ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* ุนูุฏ ูุชุงุจุฉ ููุงู ุ ุฃุฏุฑูุช ูุฌุฃุฉ ุฃูู ูุง ูููููุง ุงููุฑูุฑ </font></font><code>deliveryHandler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุงูุทุฑููุฉ </font></font><code>Produce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุจุจุณุงุทุฉ ุชุฌุงูู ุฌููุน ุฃุฎุทุงุก ุงููุงููุง (ุณูุณุชูุฑ ุฅุฑุณุงู ุงูุฎุทุฃ ุฅูู ุงูุนููู ุจุญููู ุงููููุฉ ุงูุชู ูุตูุชูุง ุณุงุจููุง) - ุนูุฏุฆุฐู ุณุชููู ุฌููุน ุดูุฑุงุชูุง ูุชุฑุงุจุทุฉ. </font><font style="vertical-align: inherit;">ุฃููุฑ ุงูุขู ูู ููููุฉ ุงูููุงู ุจุฐูู ุจุดูู ุฃูุถู.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ุ ูู ุงููุงูุน ุ ูุงููุง ุ ูููุณ ุฃุฑูุจุ</font></font></b><div class="spoiler_text">,        ,   ,  , ,   RabbitMQ?        .  , ,   .     ?    ,         frontend .   ,     backend ,      ,          .    ,       ,     .   ,       error-prone.  ,     <code>basicGet</code> ,    ,   ,      .     .      <code>basicGet</code>,      ,       .          .<br>
</div></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุฏู ุงูุฎูููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฑูุฉ ุจุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุ ูุง ุชูุฌุฏ ููุงุท ูุซูุฑุฉ ููุงูุชูุงู ููุง. </font><font style="vertical-align: inherit;">ุชุนูู ุฌููุน ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุจููุณ ุงูุทุฑููุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ูุดุชุฑู ุงูุฎุงุฏู ูู ุงูููุถูุน (ุงููุตุงุฏูุฉ ุฃู ุงูุฌูุณุฉ ุฃู ุงูููุงููุฉ ุจูุงุกู ุนูู ุงูุฏูุฑ) ุ ูุชุนูู ุงููุงููุง ูุณููุง ูุงุญุฏูุง ุฃู ุฃูุซุฑ ุฅููู. </font><font style="vertical-align: inherit;">ูุณุชูุจู ุงูุฎุงุฏู ุงูุฑุณุงูุฉ ูู ูุงููุง ุ ููููู ุจูุนุงูุฌุฉ ุฑุณุงูุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ูุฑุฏ ุนูู ุฐูู. </font><font style="vertical-align: inherit;">ููุฏ ุญูููู ุชูุฑูุจุง:</font></font><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Run</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">long</span> lastCommitTime = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();<font></font>
<font></font>
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">var</span> consumeResult = consumer.Consume(<font></font>
            TimeSpan.FromMilliseconds(config.Consumer.PollTimeoutMSec)<font></font>
        );<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (consumeResult != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">var</span> workUnit = <span class="hljs-keyword">new</span> WorkUnit() {<font></font>
                ConsumeResult = consumeResult,<font></font>
            };<font></font>
<font></font>
            LinkedList&lt;WorkUnit&gt; workUnits;<font></font>
            <span class="hljs-keyword">if</span> (partitionToWorkUnits.ContainsKey(consumeResult.Partition)) {<font></font>
                workUnits = partitionToWorkUnits[consumeResult.Partition];<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                workUnits = partitionToWorkUnits[consumeResult.Partition] =<font></font>
                    <span class="hljs-keyword">new</span> LinkedList&lt;WorkUnit&gt;();<font></font>
            }<font></font>
<font></font>
            workUnits.AddLast(workUnit);<font></font>
<font></font>
            handleWorkUnit(workUnit);<font></font>
        }<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (<font></font>
            DateTimeOffset.UtcNow.ToUnixTimeMilliseconds() - lastCommitTime &gt;=<font></font>
            config.Consumer.CommitIntervalMSec<font></font>
        ) {<font></font>
            commitOffsets();<font></font>
	    lastCommitTime = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds();<font></font>
	}<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ููุน ูู ุงูุชุนููุถุงุช ูุงุฑุชูุงุจูุงุ</font></font></b><div class="spoiler_text">       .   โ   (offset)    (0, 1  ).         0.        <code>TopicPartitionOffset</code>.    (consume)   ,   <code>ConsumeResult</code>, ,   ,   <code>TopicPartitionOffset</code>.     ?<br>
<br>
  at least once delivery,  ,              (    ).     ,           (commited) . ,  consumer         16,  ,  16 ,   ,      ,   .     -  consumer'     consumer'        ,    16 + 1 (   + 1).    17   .        N ,       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุนุทูุช ุงูุงูุชุฒุงู ุงูุชููุงุฆู ูุฃูุฒู ููุณู. ูุฐุง ุถุฑูุฑู ูุฃูู </font></font><code>handleWorkUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุญูุซ ูุชู ุชูููุฐ ูุนุงูุฌุฉ ุงูุฑุณุงูุฉ ุจุงููุนู ุ ููุฐู </font></font><code>async void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุ ูุฐูู ููุณ ููุงู ูุง ูุถูู ูุนุงูุฌุฉ ุงูุฑุณุงูุฉ 5 ูุจู ุงูุฑุณุงูุฉ 6. ูุฎุฒู ูุงููุง ุฅุฒุงุญุฉ ูุงุญุฏุฉ ููุท (ูููุณ ูุฌููุนุฉ ุฅุฒุงุญุฉ) ุ ุนูู ุงูุชูุงูู ุ ูุจู ุชูููุฐ ุงูุฅุฒุงุญุฉ 6 ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ูุนุงูุฌุฉ ุฌููุน ุงูุฑุณุงุฆู ุงูุณุงุจูุฉ ุฃูุถูุง. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููู ูุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุฃู ูุณุชููู ุฑุณุงุฆู ูู ุนุฏุฉ ุฃูุณุงู ูู ููุณ ุงูููุช ุ ูุจุงูุชุงูู ุ ูุฌุจ ุงูุชุฃูุฏ ูู ุฃูู ูููู ุจุฅุฒุงุญุฉ ุงูุฅุฒุงุญุฉ ุงูุตุญูุญุฉ ุฅูู ุงููุณู ุงูููุงุจู. ููุฐุง ุ ูุณุชุฎุฏู ุฎุฑูุทุฉ ุชุฌุฒุฆุฉ ููุณู ุงููููุฐุฌ: ูุญุฏุงุช ุงูุนูู. ุฅููู ุดูู ุงูุฑูุฒ </font></font><code>commitOffsets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงูุฑูุฒ ุงูุญูููู ูุฐู ุงููุฑุฉ):</font></font><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">commitOffsets</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">foreach</span> (LinkedList&lt;WorkUnit&gt; workUnits <span class="hljs-keyword">in</span> partitionToWorkUnits.Values) {<font></font>
        WorkUnit lastFinishedWorkUnit = <span class="hljs-literal">null</span>;<font></font>
        LinkedListNode&lt;WorkUnit&gt; workUnit;<font></font>
        <span class="hljs-keyword">while</span> ((workUnit = workUnits.First) != <span class="hljs-literal">null</span> &amp;&amp; workUnit.Value.IsFinished) {<font></font>
            lastFinishedWorkUnit = workUnit.Value;<font></font>
            workUnits.RemoveFirst();<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (lastFinishedWorkUnit != <span class="hljs-literal">null</span>) {<font></font>
            offsets.Add(lastFinishedWorkUnit.ConsumeResult.TopicPartitionOffset);<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (offsets.Count &gt; <span class="hljs-number">0</span>) {<font></font>
        consumer.Commit(offsets);<font></font>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> offset <span class="hljs-keyword">in</span> offsets) {<font></font>
            logger.Debug(<font></font>
                <span class="hljs-string">"{Identifier}: Commited offset {TopicPartitionOffset}"</span>,<font></font>
                identifier,<font></font>
                offset<font></font>
            );<font></font>
        }<font></font>
        offsets.Clear();<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑูู ุ ูุฅููุง ููุฑุฑ ุนูู ุงููุญุฏุงุช ุ ููุนุซุฑ ุนูู ุขุฎุฑ ูุญุฏุฉ ุชู ุฅููุงููุง ูู ูุฐู ุงููุญุธุฉ ุ ูุจุนุฏ ุฐูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชูุฌุฏ ูุญุฏุงุช ุบูุฑ ููุชููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููููู </font><font style="vertical-align: inherit;">ุจุชูููุฐ ุงูุฅุฒุงุญุฉ ุงูููุงุจูุฉ. </font><font style="vertical-align: inherit;">ุชุณูุญ ููุง ูุฐู ุงูุญููุฉ ุจุชุฌูุจ ุงุฑุชูุงุจ "ุงููููู". </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ูุฏููุง ุญุงูููุง 4 ูุญุฏุงุช ( </font></font><code>0: Finished, 1: Not Finished, 2: Finished, 3: Finished</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูููููุง ุชูููุฐ ุงููุญุฏุฉ ุฑูู 0 ููุท ุ ูุธุฑูุง ูุฃููุง ุฅุฐุง ุงุฑุชูุจูุง ุงููุญุฏุฉ ุงูุซุงูุซุฉ ุนูู ุงูููุฑ ุ ููุฏ ูุคุฏู ุฐูู ุฅูู ููุฏ ุงููุญุฏุฉ ุงูุฃููู ุฅุฐุง ูุงุช ุงูุฎุงุฏู ูู ุงูููุช ุงูุญุงูู.</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">class</span> <span class="hljs-title">WorkUnit</span> {
    <span class="hljs-keyword">public</span> ConsumeResult&lt;Null, <span class="hljs-keyword">byte</span>[]&gt; ConsumeResult { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> finished = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsFinished =&gt; finished == <span class="hljs-number">1</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Finish</span>(<span class="hljs-params"></span>)</span> {<font></font>
        Interlocked.Increment(<span class="hljs-keyword">ref</span> finished);<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br>
<code>handleWorkUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููู ุ </font></font><code>async void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุ ูุจุงูุชุงูู ุ ูููููุฉ ุจุงููุงูู </font></font><code>try-catch-finally</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู </font></font><code>try</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุนู ุงูุฎุฏูุฉ ุงููุงุฒูุฉ ุ </font></font><code>finally</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู- </font></font><code>workUnit.Finish()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฎุฏูุงุช ุชุงููุฉ ุฌุฏุง. </font><font style="vertical-align: inherit;">ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูู ุงูุฑูุฒ ุงูุฐู ูุชู ุชูููุฐู ุนูุฏูุง ูุฑุณู ุงููุณุชุฎุฏู ุฑุณุงูุฉ ุฌุฏูุฏุฉ:</font></font><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task&lt;ServiceResult&gt; <span class="hljs-title">createShareItem</span>(<span class="hljs-params">CreateShareItemMessage msg</span>)</span> {
    <span class="hljs-keyword">byte</span>[] message;
    <span class="hljs-keyword">byte</span>[] messageToPals1 = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">int</span>?[] partitions1 = <span class="hljs-literal">null</span>;<font></font>
<font></font>
    <span class="hljs-comment">//  UserId  .</span>
    <span class="hljs-keyword">long</span>? userId = hashService.ValidateSessionIdentifier(msg.SessionIdentifier);
    <span class="hljs-keyword">if</span> (userId != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">var</span> shareItem = <span class="hljs-keyword">new</span> ShareItemModel(<font></font>
            requestIdentifier: msg.RequestIdentifier,<font></font>
            roomIdentifier: msg.RoomIdentifier,<font></font>
            creatorId: userId,<font></font>
            timeOfCreation: <span class="hljs-literal">null</span>,<font></font>
            type: msg.ShareItemType,<font></font>
            content: msg.Content<font></font>
        );<font></font>
<font></font>
        <span class="hljs-comment">//      null,</span>
        <span class="hljs-comment">//     .</span>
        <span class="hljs-keyword">long</span>? timeOfCreation = <span class="hljs-keyword">await</span> storageService.CreateShareItem(shareItem);
        <span class="hljs-keyword">if</span> (timeOfCreation != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">//      .</span>
            List&lt;<span class="hljs-keyword">long</span>&gt; pals = <span class="hljs-keyword">await</span> inMemoryStorageService.GetRoomPals(<font></font>
                msg.RoomIdentifier<font></font>
            );<font></font>
            <span class="hljs-keyword">if</span> (pals == <span class="hljs-literal">null</span>) {
            	<span class="hljs-comment">//     -       .</span>
                pals = <span class="hljs-keyword">await</span> storageService.GetRoomPals(msg.RoomIdentifier);
                <span class="hljs-keyword">await</span> inMemoryStorageService.SaveRoomPals(msg.RoomIdentifier, pals);<font></font>
            }<font></font>
<font></font>
            <span class="hljs-comment">//    ,  .</span><font></font>
            pals.Remove(userId.Value);<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (pals.Count &gt; <span class="hljs-number">0</span>) {
            	<span class="hljs-comment">//  ack,  ,    </span>
                <span class="hljs-comment">//    .</span>
                <span class="hljs-keyword">await</span> storageService.CreateAck(<font></font>
                    msg.RequestIdentifier, userId.Value, msg.RoomIdentifier,<font></font>
                    timeOfCreation.Value, pals<font></font>
                );<font></font>
<font></font>
                <span class="hljs-comment">// in -  UserId, out -   frontend ,</span>
                <span class="hljs-comment">//    .  -   -</span>
                <span class="hljs-comment">//   null.</span>
                partitions1 = <span class="hljs-keyword">await</span> inMemoryStorageService.GetUserPartitions(pals);<font></font>
<font></font>
                List&lt;<span class="hljs-keyword">long</span>&gt; onlinePals = getOnlinePals(pals, partitions1);<font></font>
<font></font>
                <span class="hljs-comment">//    ,       .</span>
                <span class="hljs-comment">//         .</span>
                <span class="hljs-keyword">if</span> (onlinePals.Count &gt; <span class="hljs-number">0</span>) {<font></font>
                    messageToPals1 = converterService.EncodeNewShareItemMessage(<font></font>
                        userId.Value, timeOfCreation.Value, onlinePals, shareItem<font></font>
                    );<font></font>
                    nullRepeatedPartitions(partitions1);<font></font>
                    <span class="hljs-comment">// -         </span>
                    <span class="hljs-comment">// frontend ,    null' .</span><font></font>
                }<font></font>
            }<font></font>
<font></font>
            message = converterService.EncodeSuccessfulShareItemCreationMessage(<font></font>
                msg.RequestIdentifier, timeOfCreation.Value<font></font>
            );<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            message = converterService.EncodeMessage(<font></font>
                MessageCode.RoomNotFound, msg.RequestIdentifier<font></font>
            );<font></font>
        }<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        message = converterService.EncodeMessage(<font></font>
            MessageCode.UserNotFound, msg.RequestIdentifier<font></font>
        );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ServiceResult(<font></font>
        message: message, <span class="hljs-comment">//    .</span>
        messageToPals1: messageToPals1, <span class="hljs-comment">//  -    .</span><font></font>
        partitions1: partitions1<font></font>
    );<font></font>
}<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุนุฏุฉ ุงูุจูุงูุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุธู ูุธุงุฆู ุงูุฎุฏูุงุช ุงูุชู ุชุทูุจูุง ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ูู ุจุจุณุงุทุฉ ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุนุงูุฌุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ. ูู ุงููุงุถุญ ุฃู ููููุฉ ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููู ูุนูู ุนูููุง ุฃูุฑ ููู ููุบุงูุฉ ุจุงููุณุจุฉ ููุฑุณูู ุ ูููุง ุฃูุฏ ุฃู ุฃููู ุฃููู ุชุนุงููุช ูุน ูุณุฃูุฉ ุงุฎุชูุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุนูุงูุฉ ูุงุฆูุฉ ุจุนุฏ ุฏุฑุงุณุฉ ุฌููุน ุงูุฎูุงุฑุงุช ุจุนูุงูุฉ ุ ูููู ูุฐุง ููุณ ูุฐูู. ููุฏ ุงุฎุชุฑุช CockroachDb ููุชู ูุฃูู ูุนุฏ ุจุงููุซูุฑ ุจุฃูู ุฌูุฏ ููุฏูู ุจูุงุก ุฌููุฉ ูุชูุงูู ูุน postgres (ููุฏ ุนููุช ูุน postgres ูู ูุจู). ูุงูุช ููุงู ุฃููุงุฑ ุญูู ุงุณุชุฎุฏุงู ูุงุณุงูุฏุฑุง ุ ูููู ูู ุงูููุงูุฉ ูุฑุฑุช ุฃู ุฃุชุญุฏุซ ุนู ุดูุก ูุฃููู. ูู ุฃุนูู ุฃุจุฏูุง ูุน ูุงููุง ุ ุฃู ูุน ุฃุฑูุจ ุ ุฃู ูุน Flutter ู Dart ุ ุฃู ูุน WebRtc ุ ูุฐูู ูุฑุฑุช ุนุฏู ุณุญุจ ูุงุณุงูุฏุฑุง ุฃูุถูุง ุ ูุฃููู ููุช ุฎุงุฆูุฉ ูู ุงูุบุฑู ูู ูุฌููุนุฉ ูุงููุฉ ูู ุงูุชูููุงุช ุงูุฌุฏูุฏุฉ ุจุงููุณุจุฉ ูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจูู ุฌููุน ุฃุฌุฒุงุก ูุดุฑูุนู ุ ูุฅู ุชุตููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุดูุก ุงูุฐู ุฃุดู ููู ุฃูุซุฑ. ูุณุช ูุชุฃูุฏูุง ูู ุฃู ุงููุฑุงุฑุงุช ุงูุชู ุงุชุฎุฐุชูุง ูู </font><font style="vertical-align: inherit;">ูุฑุงุฑุงุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌูุฏุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญููุง </font><font style="vertical-align: inherit;">. ูู ุดูุก ูุนูู ุ ูููู ูููู ุงูููุงู ุจู ุจุดูู ุฃูุถู. ุนูู ุณุจูู ุงููุซุงู ุ ููุงู ุฌุฏุงูู ShareRooms (ููุง ุฃุณูู ุงูุฏุฑุฏุดุงุช) ู ShareItems (ููุง ุฃุณูู ุงูุฑุณุงุฆู). ูุฐูู ูุชู ุชุณุฌูู ุฌููุน ุงููุณุชุฎุฏููู ุงูุฐูู ูุฏุฎููู ุงูุบุฑูุฉ ูู ุญูู jsonb ููุฐู ุงูุบุฑูุฉ. ูุฐุง ูุฑูุญ ุ ูููู ูู ุงููุงุถุญ ุฃูู ุจุทูุก ุฌุฏูุง ุ ูุฐูู ุฑุจูุง ุณุฃุนูุฏู ุจุงุณุชุฎุฏุงู ููุงุชูุญ ุฃุฌูุจูุฉ. ุฃู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฌุฏูู ShareItems ุจุชุฎุฒูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณุงุฆู. ููู ุฃูุถุง ููุงุฆูุ ูููู ุจูุง ุฃู ShareItems ูู ูุงุญุฏุฉ ูู ุฃูุซุฑ ุงูุฌุฏุงูู ุชุญููู (ุซุงุจุชุฉ </font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู</font></font><code>insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุฏ ูููู ูู ุงููููุฏ ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ ููู ุบุฑูุฉ ุฃู ุดูุก ูู ูุฐุง ุงููุจูู. ูููู Kokroach ุจุชูุฒูุน ุงูุณุฌูุงุช ุนูู ุงูุนูุฏ ุงููุฎุชููุฉ ุ ูุจูุงุกู ุนูู ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงูุชูููุฑ ุจุนูุงูุฉ ูู ุฃู ุณุฌู ุณูุฐูุจ ูุชุญููู ุฃูุตู ุฃุฏุงุก ุ ููููู ูู ุฃูุนู ุฐูู. ุจุดูู ุนุงู ุ ููุง ูููู ูููู ูู ูู ูุง ุณุจู ุ ูุฅู ููุงุนุฏ ุงูุจูุงูุงุช ููุณุช ุฃููู ููุทุฉ ูุฏู. ุงูุขู ุฃูุง ุจุดูู ุนุงู ุฃุฎุชุจุฑ ูู ุดูุก ูู ุฃุฌู postgres ุ ูููุณ kokroach ุ ูุธุฑูุง ูุฃู ุงูุญูู ุฃูู ุนูู ุฌูุงุฒ ุงูุนูู ุงูุฎุงุต ุจู ุ ููู ุจุงููุนู ุถุนูู ุฌุฏูุง ูู ุงูุฃุญูุงู ุงูุชู ุณุชูุทูู ูุฑูุจูุง. ูุญุณู ุงูุญุธ ุ ูุฎุชูู ุฑูุฒ postgres ู kokroach ููููุงู ุ ูุฐุง ูุฅู ุงูุชุจุฏูู ููุณ ุตุนุจูุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุง ุงูุขู ุจุตุฏุฏ ุฏุฑุงุณุฉ ููููุฉ ุนูู ุงูุตุฑุตูุฑ ุจุงููุนู (ููู ูุญุฏุซ ุงูุชุนููู ุจูู SQL ููููุฉ ุงูููุชุงุญ (ูุณุชุฎุฏู ุงูุตุฑุตูุฑ RocksDb ุชุญุช ุบุทุงุก ุงููุญุฑู) ุ ูููู ููุฒุน ุงูุจูุงูุงุช ุจูู ุงูุนูุฏ ุ ูุงููุณุฎ ุงููุชูุงุซูุฉ ุ ููุง ุฅูู ุฐูู). ูุงู ูู ุงููููุฏ ุจุงูุทุจุน ุฏุฑุงุณุฉ ุงูุตุฑุตูุฑ ูุจู ุงุณุชุฎุฏุงูู ุ ูููู ูู ููุช ูุชุฃุฎุฑ ุฃูุถู ูู ุนุฏูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนุชูุฏ ุฃู ุงููุงุนุฏุฉ ุณุชุฎุถุน ูุชุบููุฑุงุช ูุจูุฑุฉ ุนูุฏูุง ุฃุตุจุญ ุฃูุถู ูู ููู ูุฐู ุงููุดููุฉ. ุงูุขู ุ ุฌุฏูู Acks ููุงุญููู. ูู ูุฐุง ุงูุฌุฏูู ุ ุฃููู ุจุชุฎุฒูู ุจูุงูุงุช ุญูู ูู ูู ูุณุชูู ุจุนุฏ ููู ูู ููุฑุฃ ุงูุฑุณุงูุฉ ุจุนุฏ (ูุฅุธูุงุฑ ุนูุงูุงุช ุงุฎุชูุงุฑ ุงููุณุชุฎุฏู). ูู ุงูุณูู ุฅุฎุทุงุฑ ุงููุณุชุฎุฏู ุจุฃู ุฑุณุงูุชู ูุฏ ุชูุช ูุฑุงุกุชูุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุชุตูุงู ุงูุขู ุ ูููู ุฅุฐุง ูู ููู ูุฐูู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุญูุธ ูุฐู ุงููุนูููุงุช ูุฅุฎุทุงุฑ ุงููุณุชุฎุฏู ูุงุญููุง. ูุจูุง ุฃู ุงูุฏุฑุฏุดุงุช ุงูุฌูุงุนูุฉ ูุชุงุญุฉ ุ ููุง ูููู ููุท ุชุฎุฒูู ุงูุนูู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุจูุงูุงุช ุญูู ุงููุณุชุฎุฏููู ุงููุฑุฏููู. ูุฐุง ูุทูุจ ููุง ุจุดูู ูุจุงุดุฑ ุงุณุชุฎุฏุงู ุณูุงุณู ุงูุจุช (ุณุทุฑ ูุงุญุฏ ูููุณุชุฎุฏููู ุงูุฐูู ูู ูุชูููุง ุจุนุฏ ุ ูุงูุซุงูู - ูุฃููุฆู ุงูุฐูู ูู ููุฑุคูุง ุจุนุฏ). ูุฎุงุตุฉ ุฏุนู kokroach </font></font><code>bit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู</font></font><code>bit varying</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุน ุฐูู ุ ูู ุฃุญุณุจ ุฃุจุฏูุง ููููุฉ ุชูููุฐ ูุฐุง ุงูุนูู ุ ูุธุฑูุง ูุฃู ุชูููู ุงูุบุฑู ูููู ุฃู ูุชุบูุฑ ุจุงุณุชูุฑุงุฑ. ููู ุชุญุชูุธ ุณูุงุณู ุงูุจุช ุจูุนูุงูุง ุ ูุฌุจ ุฃู ูุจูู ุงููุณุชุฎุฏููู ูู ุงูุบุฑูุฉ ุจููุณ ุงูุชุฑุชูุจ ุ ููู ุฃูุฑ ุตุนุจ ููุบุงูุฉ ุนูุฏูุง ูุบุงุฏุฑ ุจุนุถ ุงููุณุชุฎุฏููู ุงูุบุฑูุฉ ุนูู ุณุจูู ุงููุซุงู. ููุงู ุฎูุงุฑุงุช ููุง. ุฑุจูุง ูุฌุฏุฑ ูุชุงุจุฉ -1 ุจุฏูุงู ูู ุญุฐู ุงููุณุชุฎุฏู ูู ุญูู jsonb ุจุญูุซ ูุชู ุญูุธ ุงูุทูุจ ุ ุฃู ุจุงุณุชุฎุฏุงู ุจุนุถ ุทุฑู ุงูุฅุตุฏุงุฑ ุ ุญุชู ูุนูู ุฃู ุณูุณูุฉ ุงูุจุช ูุฐู ุชุดูุฑ ุฅูู ุชุฑุชูุจ ุงููุณุชุฎุฏููู ุ ูุงูุฐู ูุงู ุญูููุง ุ ูููุณ ุนูู ุงูุชุฑุชูุจ ุงูุญุงูู ูููุณุชุฎุฏููู. ูุง ุฒูุช ูู ุทูุฑ ุงูุชูููุฑ ูู ููููุฉ ุชูููุฐ ูุฐุง ุงูุนูู ุจุดูู ุฃูุถู ุ ูููู ูู ุงูููุช ุงูุญุงูู ุ ุฃููุฆู ุงูุฐูู ูู ูุชูููุง ููู ููุฑุฃูุง ุงููุณุชุฎุฏููู ุจุนุฏ ูู ุฃูุถูุง ุญููู jsonb. ุจุงููุธุฑ ุฅูู ุฃู ุฌุฏูู Acks ููุชูุจ ูุน ูู ุฑุณุงูุฉ ุ ูุฅู ูููุฉ ุงูุจูุงูุงุช ูุจูุฑุฉ.ุนูู ุงูุฑุบู ูู ุฃู ุงูุณุฌู ุ ุจุงูุทุจุน ุ ูุชู ุญุฐูู ุนูุฏ ุชููู ุงูุฑุณุงูุฉ ููุฑุงุกุชูุง ูู ูุจู ุงูุฌููุน.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฑูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุฑุฉ ุทูููุฉ ุนููุช ุนูู ุฌุงูุจ ุงูุฎุงุฏู ูุงุณุชุฎุฏูุช ุนููุงุก ูุญุฏุฉ ุชุญูู ุจุณูุทุฉ ููุงุฎุชุจุงุฑ ุ ูุฐูู ูู ุฃูู ุญุชู ุจุฅูุดุงุก ูุดุฑูุน Flutter. </font><font style="vertical-align: inherit;">ูุนูุฏูุง ููุช ุจุฅูุดุงุฆู ุ ุงุนุชูุฏุช ุฃู ุฌุฒุก ุงูุฎุงุฏู ูุงู ุฌุฒุกูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุฏูุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุชุทุจูู ุนูู ูุฐุง ุงููุญู ุ ุงูููุงูุฉ ุ ุณุฃูุชุดู ุฐูู ูู ุบุถูู ููููู. </font><font style="vertical-align: inherit;">ุฃุซูุงุก ุงูุนูู ุนูู ุงูุฎุงุฏู ุ ููุช ุจุฅูุดุงุก Hello Worlds ููุฑูุฑูุฉ ุนุฏุฉ ูุฑุงุช ููุชุนุฑูู ุนูู ุฅุทุงุฑ ุงูุนูู ุ ูุจูุง ุฃู ุจุฑูุงูุฌ ุงููุฑุงุณูุฉ ูุง ูุญุชุงุฌ ุฅูู ุฃู ูุงุฌูุฉ ูุณุชุฎุฏู ูุนูุฏุฉ ุ ุงุนุชูุฏุช ุฃูู ุฌุงูุฒ ุชูุงููุง. </font><font style="vertical-align: inherit;">ูุฐุง ุ ูุฅู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ุญููุง ุงูููุงูุฉ ุ ููู ุชูููุฐ ุงููุธููุฉ ุฃุนุทุงูู ูุดุงูู (ูุณุชุณุชูุฑ ูู ุชูุฏูููุง ุ ูุธุฑูุง ูุฃู ูู ุดูุก ููุณ ุฌุงูุฒูุง).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุงุฑุฉ ุงูุฏููุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุถูุน ุงูุฃูุซุฑ ุดุนุจูุฉ. ููุงู ุฃูู ุทุฑููุฉ ูุฅุฏุงุฑุฉ ุญุงูุชู ุ ููุชู ุชุบููุฑ ุงูููุฌ ุงูููุตู ุจู ูู ุณุชุฉ ุฃุดูุฑ. ุงูุขู ุงูุชูุงุฑ ูู ูุฒูุฏ. ุฃูุง ุดุฎุตูุงู ุงุฎุชุฑุช ุทุฑููุชูู ูููุณู: ูุชูุฉ ู redux. Bloc (Business Logic Component) ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ ุงููุญููุฉ ูุฅุนุงุฏุฉ ุงูุงุฎุชุฒุงู ูุฅุฏุงุฑุฉ ุงูุนุงูููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู ุงููุชูุฉ ููุณุช ููุนูุง ูู ุงูููุชุจุงุช (ุนูู ุงูุฑุบู ูู ูุฌูุฏ ููุชุจุฉ ุชููู ุฃูุถูุง ูู ุงูุตููุญุฉ ุงููุฑููุฉ ุ ููููู ูุง ุฃุณุชุฎุฏููุง). ุงููุชูุฉ ูู ููุฌ ูุงุฆู ุนูู ุงูุชุฏูู. ุจุดูู ุนุงู ุ ุงูุณูุงู ูุบุฉ ุฌูููุฉ ุฌุฏูุง ุ ูุงูุฌุฏุงูู ุฌูููุฉ ุฌุฏูุง ุจุดูู ุนุงู. ุฌููุฑ ูุฐุง ุงูููุฌ ูู ุฃููุง ูุฏูุน ููุทู ุงูุฃุนูุงู ุจุฃูููู ุฅูู ุงูุฎุฏูุงุช ุ ููุชูุงุตู ุจูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุงูุฎุฏูุงุช ูู ุฎูุงู ูุญุฏุฉ ุชุญูู ุชููุฑ ููุง ูุฎุชูู ุงูุชุฏููุงุช. ูู ูุงู ุงููุณุชุฎุฏู ุจุงูููุฑ ููู ุงูุฒุฑ "ุงูุนุซูุฑ ุนูู ุฌูุฉ ุงุชุตุงู"ุ ุจุงุณุชุฎุฏุงู</font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงูุทุฑู ุงูุขุฎุฑ ูู ุงูุฏูู) ูุฑุณู ุญุฏุซูุง ุฅูู ูุญุฏุฉ ุงูุชุญูู </font></font><code>SearchContactsEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณุชุชุตู ูุญุฏุฉ ุงูุชุญูู ุจุงูุฎุฏูุฉ ุงููุทููุจุฉ ุ ูุชูุชุธุฑ ุงููุชูุฌุฉ ูุชุฑุฌุน ูุงุฆูุฉ ุงููุณุชุฎุฏููู ูุฑุฉ ุฃุฎุฑู ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ุฎูุงู ุงูุฏูู ุฃูุถูุง. ุชูุชุธุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุชุงุฆุฌ ุจุงุณุชุฎุฏุงู </font></font><code>StreamBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงููุทุนุฉ ุงูุชู ุฃุนูุฏ ุจูุงุคูุง ูู ูู ูุฑุฉ ุชุตู ุจูุงูุงุช ุฌุฏูุฏุฉ ุฅูู ุงูุฏูู ุงููุดุชุฑู ูููุง). ูุฐุง ุ ูู ุงููุงูุน ุ ูู ุดูุก. ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุฏูู ุฃู ุชุฏุฎู ูู ุงููุณุชุฎุฏู (ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ูุตูู ุฑุณุงูุฉ ุฌุฏูุฏุฉ) ุ ูููู ูุชู ุฐูู ุฃูุถูุง ุจุณูููุฉ ูู ุฎูุงู ุงูุชุฏููุงุช. ูู ุงููุงูุน ุ MVC ุจุณูุท ูุน ุชูุงุฑุงุช ุ ูุง ุณุญุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฑูุฉ ุจุนุถ ุงูุทุฑู ุงูุฃุฎุฑูุ ูุชูุฉ ูุชุทูุจ ุงููุฒูุฏ ูู ุงูููุทูุ ููููุ ูู ุฑุฃููุ ููู ุงูุฃูุถู ูุงุณุชุฎุฏุงู ุญููู ุงูุฃู ุฏูู ูุดุงุฑูุฉ ุทุฑู ุซุงูุซ ุงูููุชุจุงุชุ ุฅูุง ุจุงุณุชุฎุฏุงู ูุญููู ุทุฑู ุซุงูุซ ูุนุทู ุจุนุถ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุงูุง. </font><font style="vertical-align: inherit;">ูููุง ุฒุงุฏุช ุงูุชุฌุฑูุฏ ูู ุงูุฃุนูู ุ ุฒุงุฏุช ุตุนูุจุฉ ููู ุงูุฎุทุฃ ุนูุฏ ุญุฏูุซ ุงูุฎุทุฃ. </font><font style="vertical-align: inherit;">ุฃูุง ูุง ุฃุนุชุจุฑ ูุฒุงูุง ุงููููุฑ ูุจูุฑุฉ ุจูุง ูููู ููุชุจุฏูู ุฅูููุง. </font><font style="vertical-align: inherit;">ููู ูุฏู ุฎุจุฑุฉ ููููุฉ ูู ูุฐุง ุงููุฌุงู ุ ูุฐุง ูู ุงููุญุชูู ุฃู ุฃุบูุฑ ุงููุฎูู ูู ุงููุณุชูุจู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุญูู redux ุ ูุจุงูุชุงูู ูุนุฑู ุงูุฌููุน ูู ุดูุก ุ ูุฐูู ููุณ ููุงู ูุง ููุงู. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ููุช ุจูุตู ูู ุงูุชุทุจูู :) ุงุณุชุฎุฏูุชู ูุฅุฏุงุฑุฉ ุญุณุงุจู ุ ูููู ุจุนุฏ ุฐูู ุ ูุน ุฅุฏุฑุงู ุฃูู ูู ูุฐู ุงูุญุงูุฉ ูุง ุชูุฌุฏ ูุฒุงูุง ุฎุงุตุฉ ุนูู ุงููุชูุฉ ุ ููุช ุจูุตูุง ุญุชู ูุง ุชุณุญุจ ูุซูุฑูุง. </font><font style="vertical-align: inherit;">ูููู ุจุดูู ุนุงู ุ ุฃุนุชุจุฑ ุฅุนุงุฏุฉ ุดูุก ูููุฏูุง ูุฅุฏุงุฑุฉ ุงูุฏููุฉ ุงูุนุงูููุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃูุซุฑ ุฅููุงูุง</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ุนูู ุฃู ุฃูุนู ุฅุฐุง ุฃุฑุณู ุงููุณุชุฎุฏู ุฑุณุงูุฉ ุ ูููู ูุจู ุฅุฑุณุงููุง ุ ููุฏ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุชุ ูุงุฐุง ุนูู ุฃู ุฃูุนู ุฅุฐุง ุชููู ุงููุณุชุฎุฏู ุชุฃููุฏ ูุฑุงุกุฉ ุ ูููู ุฃุบูู ุงูุชุทุจูู ูุจู ุชุญุฏูุซ ุงูุณุฌู ุงููุทุงุจู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุงุฐุง ุฃูุนู ุฅุฐุง ุฏุนุง ุงููุณุชุฎุฏู ุตุฏููู ุฅูู ุงูุบุฑูุฉ ุ ูููู ูุจู ุฅุฑุณุงู ุงูุฏุนูุฉ ุ ููุฏุช ุจุทุงุฑูุชูุ ูู ุณุจู ูู ุฃู ุณุฃูุช ุฃุณุฆูุฉ ููุงุซูุฉุ ูุง ุฃูุง. ูุจู. ูููู ูู ุนูููุฉ ุงูุชูููุฉ ุจุฏุฃุช ุฃุชุณุงุกู. ูุธุฑูุง ูุฃู ุงูุงุชุตุงู ูููู ุฃู ูุฎุชูู ูู ุฃู ููุช ุ ููุชู ุฅููุงู ุชุดุบูู ุงููุงุชู ูู ุฃู ููุช ุ ูุฌุจ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃููุฏ ูู ุดูุก</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุบูุฑ ูุณูู. ูุฐูู ุ ูุฅู ุฃูู ุฑุณุงูุฉ ูุฑุณููุง ุงูุนููู ุฅูู ุงูุฎุงุฏู ( </font></font><code>Join</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุชุฐูุฑ) ููุณุช ูุฌุฑุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุฑุญุจูุง ุฃูุง ูุชุตู ุจุงูุฅูุชุฑูุช"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุฑุญุจูุง ุ ุฃูุง ูุชุตู ุจุงูุฅูุชุฑูุช ูููุง ุบุฑู ุบูุฑ ูุคูุฏุฉ ุ ูููุง ุฃูููุณ ุบูุฑ ูุคูุฏุฉ ุ ูููุง ุนูููุงุช ุนุถููุฉ ุบุฑูุฉ ุบูุฑ ูุคูุฏุฉ ุ ูููุง ุขุฎุฑ ุฑุณุงุฆู ูุณุชููุฉ ููู ุบุฑูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><i><font style="vertical-align: inherit;">" </font></i><font style="vertical-align: inherit;">ููุณุชุฌูุจ ุงูุฎุงุฏู ุจูุฑูุฉ ููุงุซูุฉ: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุนูุฏูุง ููุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู ุ ุชู ูุฑุงุกุฉ ูุซู ูุฐู ุงูุฑุณุงุฆู ุงูุฎุงุตุฉ ุจู ูู ูุจู ูุคูุงุก ุงููุณุชุฎุฏููู ููุคูุงุก ุ ูุฏุนูุง ุฃูุถูุง Petya ุฅูู ูุฐู ุงูุบุฑูุฉ ุ ูุบุงุฏุฑุช Sveta ูุฐู ุงูุบุฑูุฉ ุ ูุชูุช ุฏุนูุชู ุฅูู ูุฐู ุงูุบุฑูุฉ ุ ูููู ุชุญุชูู ูุงุชุงู ุงูุบุฑูุชุงู ุนูู 40 ูุดุงุฑูุฉ ุฌุฏูุฏุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><i><font style="vertical-align: inherit;">" </font></i><font style="vertical-align: inherit;">ุฃูุฏ ุญููุง ุฃู ุฃุนุฑู ููู ุชุชู ุงูุฃุดูุงุก ุงูููุงุซูุฉ ูู ุฑุณู ุขุฎุฑูู ุ ูุฃู ุชูููุฐู ูุง ูุชุฃูู ุจุงููุนูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตูุฑ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุช ุงูุญุงูู ุ ููููู ุฅุฑุณุงู ูุต ุ ูุต + ุตูุฑ ูุตูุฑ ููุท. </font><font style="vertical-align: inherit;">ูู ูุชู ุชูููุฐ ุชุญููู ุงูููุฏูู ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ูุชู ุถุบุท ุงูุตูุฑ ููููุงู ูุญูุธูุง ูู ุชุฎุฒูู Firebase. </font><font style="vertical-align: inherit;">ุชุญุชูู ุงูุฑุณุงูุฉ ููุณูุง ุนูู ุฑูุงุจุท. </font><font style="vertical-align: inherit;">ุนูุฏ ุงุณุชูุงู ุงูุฑุณุงูุฉ ุ ูููู ุงูุนููู ุจุชูุฒูู ุงูุตูุฑ ูุฅูุดุงุก ุตูุฑ ูุตุบุฑุฉ ูุญูุธ ูู ุดูุก ูู ูุธุงู ุงููููุงุช. </font><font style="vertical-align: inherit;">ุชุชู ูุชุงุจุฉ ูุณุงุฑุงุช ุงููููุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ุจุงูููุงุณุจุฉ ุ ุฅู ุฅูุดุงุก ุงูุตูุฑ ุงููุตุบุฑุฉ ูู ุงูุฑูุฒ ุงููุญูุฏ ุงูุฐู ูุชู ุชูููุฐู ุนูู ุฎูุท ูููุตู ุ ูุฃูู ุนูููุฉ ุซูููุฉ. </font><font style="vertical-align: inherit;">ุฃุจุฏุฃ ูุฌุฑุฏ ุชุฏูู ุนุงูู ูุงุญุฏ ุ ูุฃุทุนููุง ุตูุฑุฉ ููู ุงูููุงุจู ุฃุญุตู ุนูู ุตูุฑุฉ ูุตุบุฑุฉ. </font><font style="vertical-align: inherit;">ุงูููุฏ ุจุณูุท ููุบุงูุฉ ุ ูุฃู ุงูุณูุงู ูููุฑ ุชุฌุฑูุฏุงุช ููุงุฆูุฉ ููุนูู ูุน ุงูุชุฏููุงุช.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ThumbnailGeneratorService</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThumbnailGeneratorService</span> </span>{<font></font>
  SendPort _sendPort;<font></font>
  final Queue&lt;Completer&lt;Uint8List&gt;&gt; _completerQueue =<font></font>
      Queue&lt;Completer&lt;Uint8List&gt;&gt;();<font></font>
<font></font>
  ThumbnailGeneratorService() {<font></font>
    <span class="hljs-keyword">var</span> receivePort = ReceivePort();<font></font>
    Isolate.spawn(startWorker, receivePort.sendPort);<font></font>
<font></font>
    receivePort.listen((data) {<font></font>
      <span class="hljs-keyword">if</span> (data is SendPort) {<font></font>
        _sendPort = data;<font></font>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> completer = _completerQueue.removeFirst();<font></font>
        completer.complete(data);<font></font>
      }<font></font>
    });<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> startWorker(SendPort sendPort) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">var</span> receivePort = ReceivePort();<font></font>
    sendPort.send(receivePort.sendPort);<font></font>
<font></font>
    receivePort.listen((imageBytes) {<font></font>
      Image image = decodeImage(imageBytes);<font></font>
      Image thumbnail = copyResize(image, <span class="hljs-attr">width</span>: min(image.width, <span class="hljs-number">200</span>));<font></font>
<font></font>
      sendPort.send(Uint8List.fromList(encodePng(thumbnail)));<font></font>
    });<font></font>
  }<font></font>
<font></font>
  Future&lt;Uint8List&gt; generate(Uint8List imageBytes) {<font></font>
    <span class="hljs-keyword">var</span> completer = Completer&lt;Uint8List&gt;();<font></font>
    _completerQueue.add(completer);<font></font>
    <font></font>
    _sendPort.send(imageBytes);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> completer.future;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงุณุชุฎุฏุงู ูุตุงุฏูุฉ Firebase ุฃูุถูุง ุ ูููู ููุท ูู ุฃุฌู ุชูููุถ ุงููุตูู ุฅูู ุชุฎุฒูู Firebase (ุจุญูุซ ูุง ูููู ูููุณุชุฎุฏู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุก ุตูุฑุฉ ุงูููู ุงูุดุฎุตู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุฎุต ุขุฎุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">ูุชู ุฅุฌุฑุงุก ุฌููุน ุงูุชูููุถุงุช ุงูุฃุฎุฑู ูู ุฎูุงู ุฎูุงุฏูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณูู ุงูุฑุณุงูุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑุจูุง ุชุดุนุฑ ุจุงูุฑุนุจ ููุง ุ ุญูุซ ุฃุณุชุฎุฏู ุตูุงุฆู ุงูุจุงูุช ุงูุนุงุฏูุฉ. ูุฎุชูู Json ูุฃู ุงูููุงุกุฉ ูุทููุจุฉ ุ ููู ุฃูู ุฃุนุฑู ุนู protobuf ุนูุฏูุง ุจุฏุฃุช. ูุชุทูุจ ุงุณุชุฎุฏุงู ุงููุตูููุงุช ุงููุซูุฑ ูู ุงูุนูุงูุฉ ูุฃู ุงูููุฑุณ ุฎุงุทุฆ ูุงูุฃุดูุงุก ุชุณูุก. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู 4 ุจุงูุช</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุทูู ุงูุฑุณุงูุฉ. </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุงูุช ุงูุชุงูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฑูุฒ ุงูุฑุณุงูุฉ. </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16 ุจุงูุช ุงูุชุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุนุฑูู ุงูุทูุจ (uuid). </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูู 40 ุจุงูุช ุงูุชุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฑูุฒ ุงูุชูููุถ. </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุจูู ูู ุงูุฑุณุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทูู ุงูุฑุณุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทููุจ ุ ูุฃููู ูุง ุฃุณุชุฎุฏู ูุขุฎุฐ http ุฃู ุงูููุจ ุ ุฃู ุฃู ุจุฑูุชูููู ุขุฎุฑ ูููุฑ ูุตู ุฑุณุงูุฉ ุนู ุฃุฎุฑู. ูุง ุชุฑู ุฎูุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุฅูุง ุชุฏููุงุช ุงูุจุงูุช ุ ููู ุจุญุงุฌุฉ ุฅูู ูุนุฑูุฉ ุฃูู ุชูุชูู ุฑุณุงูุฉ ูุชุจุฏุฃ ุฃุฎุฑู. ููุงู ุนุฏุฉ ุทุฑู ููุตู ุงูุฑุณุงุฆู (ุนูู ุณุจูู ุงููุซุงู ุ ูุงุณุชุฎุฏุงู ููุน ูุง ูู ุงูุฃุญุฑู ุงูุชู ูู ูุชู ุงูุนุซูุฑ ุนูููุง ูุทูููุง ูู ุงูุฑุณุงุฆู ููุงุตู) ุ ููููู ูุถูุช ุชุญุฏูุฏ ุงูุทูู ุ ูุธุฑูุง ูุฃู ูุฐู ุงูุทุฑููุฉ ูู ุงูุฃุณูู ุ ุนูู ุงูุฑุบู ูู ุฃููุง ุชูุทูู ุนูู ุฒูุงุฏุฉ ุ ุญูุซ ุฃู ูุนุธู ุงูุฑุณุงุฆู ููููุฏุฉ ู ุจุงูุช ูุงุญุฏ ููุฅุดุงุฑุฉ ุฅูู ุงูุทูู. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ุงูุฑุณุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุงุญุฏ ููุท ูู ุฃุนุถุงุก ุงูุชุนุฏุงุฏ</font></font><code>MessageCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชู ุชูููุฐ ุงูุชูุฌูู ููููุง ููููุฏ ุ ูุจูุง ุฃููุง ูุณุชุทูุน ุงุณุชุฎุฑุงุฌ ุงูููุฏ ูู ุงููุตูููุฉ ุจุฏูู ุฅูุบุงุก ุชุณูุณู ุฃููู ุ ููุฑุฑ ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุฃู ููุถูุน ูู ุงููุงููุง ูุฅุฑุณุงู ุฑุณุงูุฉ ุจุฏูุงู ูู ุชูููุถ ูุฐู ุงููุณุคูููุฉ ูุดุฎุต ุขุฎุฑ. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทูุจ ูุนุฑู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฌูุฏุฉ ูู ูุนุธู ุงููุธุงุฆู ุ ูููู ููุณ ูู ุฌููุน. ูููู ุจูุธููุชูู: ูู ุฎูุงู ูุฐุง ุงููุนุฑู ุ ูุญุฏุฏ ุงูุนููู ุงููุฑุงุณูุงุช ุจูู ุงูุทูุจ ุงููุฑุณู ูุงูุงุณุชุฌุงุจุฉ ุงููุณุชููุฉ (ุฅุฐุง ุฃุฑุณู ุงูุนููู ุงูุฑุณุงุฆู A ุ B ุ C ุจูุฐุง ุงูุชุฑุชูุจ ุ ููุฐุง ูุง ูุนูู ุฃู ุงูุฅุฌุงุจุงุช ุณุชุฃุชู ุฃูุถูุง ุจุงูุชุฑุชูุจ). ุงููุธููุฉ ุงูุซุงููุฉ ูู ุชุฌูุจ ุงูุชูุฑุงุฑุงุช. ููุง ุฐูุฑูุง ุณุงุจููุง ุ ุชุถูู ูุงููุง ุงูุชูุตูู ูุฑุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู. ุฃู ุฃูู ูู ุญุงูุงุช ูุงุฏุฑุฉ ุ ูุง ูุฒุงู ูู ุงููููู ุชูุฑุงุฑ ุงูุฑุณุงุฆู. ุจุฅุถุงูุฉ ุนููุฏ RequestIdentifier ูุน ูููุฏ ูุฑูุฏุฉ ุฅูู ุฌุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุทููุจ ุ ูููููุง ุชุฌูุจ ุฅุฏุฑุงุฌ ูุณุฎุฉ ููุฑุฑุฉ. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ุงูุชูููุถ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู UserId (8 ุจุงูุช) + 32 ุจุงูุช HmacSha256 ุงูุชูููุน. </font><font style="vertical-align: inherit;">ูุง ุฃุนุชูุฏ ุฃู ุงูุฃูุฑ ูุณุชุญู ุงุณุชุฎุฏุงู Jwt ููุง. </font><font style="vertical-align: inherit;">Jwt ุฃูุจุฑ ุจุญูุงูู 7-8 ูุฑุงุช ููุงุฐุงุ </font><font style="vertical-align: inherit;">ููุณ ูุฏู ุงููุณุชุฎุฏููู ุฃูุฉ ูุทุงูุจุงุช ุ ูุฐุง ูุฅู ุชูููุน hmac ุงูุจุณูุท ุฌูุฏ. </font><font style="vertical-align: inherit;">ุงูุชุฑุฎูุต ูู ุฎูุงู ุฎุฏูุงุช ุฃุฎุฑู ุบูุฑ ูุฎุทุท ูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงููุงุช ุงูุตูุช ูุงูููุฏูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุถุญู ุฃููู ุฃูููุช ุนูุฏุง ุชูููุฐ ููุงููุงุช ุงูุตูุช ูุงูููุฏูู ุ ูุฃููู ููุช ูุชุฃูุฏูุง ูู ุฃููู ูู ุฃุชููู ูู ุญู ุงููุดุงูู ุ ูููู ูู ุงููุงูุน ุชุจูู ุฃููุง ูุงุญุฏุฉ ูู ุฃุณูู ุงูููุฒุงุช ูู ุงูุชูููุฐ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฃูู ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ. </font><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ูู ุชุณุชุบุฑู ุฅุถุงูุฉ WebRtc ุฅูู ุงูุชุทุจูู ูุงูุญุตูู ุนูู ุฌูุณุฉ ุงูููุฏูู ุงูุฃููู ุณูู ุจุถุน ุณุงุนุงุช ุ ูุจุฃุนุฌูุจุฉ ุ ูุฌุญ ุงูุงุฎุชุจุงุฑ ุงูุฃูู. </font><font style="vertical-align: inherit;">ูุจู ุฐูู ุ ุงุนุชูุฏุช ุฃู ุงูุดูุฑุฉ ุงูุชู ุนููุช ูู ุงููุฑุฉ ุงูุฃููู ูุงูุช ุฃุณุทูุฑุฉ. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ููุดู ุงูุงุฎุชุจุงุฑ ุงูุฃูู ูููุฒุฉ ุฌุฏูุฏุฉ ุฏุงุฆููุง ุจุณุจุจ ููุน ูู ุงูุฎุทุฃ ุงูุบุจู ูุซู "ุฅุถุงูุฉ ุฎุฏูุฉ ุ ูููู ูู ูุชู ุชุณุฌูููุง ูู ุญุงููุฉ DI".</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุช ููุฌุฒุฉ ููุบุงูุฉ ุญูู WebRtc ูููุจุชุฏุฆูู</font></font></b><div class="spoiler_text">WebRtc โ  ,   peer-to-peer    , ,    peer-to-peer  ,     .   - ,     ,      .      ,      .<br>
<br>
          (peer-to-peer),     <i></i> ,  3   (     <i></i> ,  3  .           3 ).<br>
<br>
    โ stun .   stun  ,    โ  Source IP  Source Port      ,    <i></i> .    ?        - .       IP .      - , ,    ,   Source IP  Source Port    IP  -        NAT  [ Source IP | Source Port | Router External IP | Router Port ].     - ,   Dest IP  Dest Port     Router External IP  Router Port  NAT, ,    Source IP โ Source Port     ,   .   , ,       ,      , ,    ,      NAT .       stun     NAT .     stun     Router External IP โ Router Port.   โ <i></i>   .     ,  ยซยป    NAT (NAT traversal)  ,      NAT  ,     stun .<br>
*  NAT ,      . ,     ,  WebRtc    .<br>
<br>
  โ turn.  ,       ,   peer-to-peer . Fallback .    , ,  ,  ,   ,   peer-to-peer     .    turn  โ coturn,      .<br>
<br>
  โ .    <i> </i>  ,    .       ,    .   โ           .       .    ,          , ,     :)       โ   .<br>
<br>
 WebRtc  3   : offer, answer  candidate.    offer     ,    answer,       .    , ,  ,    ,       .    (     )   ,  .<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู ุชูููุฉ WebRtc ููุณูุง ุจุฅูุดุงุก ุงุชุตุงู ูุชุดุงุฑู ูู ููู ุงูุชุฏููุงุช ุฐูุงุจูุง ูุฅูุงุจูุง ุ ูููู ูุฐุง ููุณ ุฅุทุงุฑูุง ูุฅูุดุงุก ููุงููุงุช ูุงููุฉ. ุนู ุทุฑูู ุงูุงุชุตุงู ุ ุฃุนูู ุฌูุณุฉ ุงุชุตุงู ูุน ุฅููุงููุฉ ุฅูุบุงุก ุงูููุงููุฉ ูุฑูุถูุง ููุจูููุง ุ ููุฐูู ุฅููุงุก ุงูููุงููุฉ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุฅุฎุจุงุฑ ุงููุชุตู ุฅุฐุง ูุงู ุงูุฌุงูุจ ุงูุขุฎุฑ ูุฏ ุชู ุงูุชูุงุทู ุจุงููุนู. ูุฃูุถูุง ูุชูููุฐ ุฃุดูุงุก ุตุบูุฑุฉ ูุซู "ุงูุชุธุฑ ุงูุฑุฏ ุนูู ุงูููุงููุฉ N ุซุงููุฉ ุ ุซู ุฅุนุงุฏุฉ ุงูุชุนููู". ุฅุฐุง ููุช ุจุจุณุงุทุฉ ุจุชุทุจูู WebRtc ูู ุงูุชุทุจูู ูู ูููุฐุฌ ููุดูู ุ ูุนูุฏ ููุงููุฉ ูุงุฑุฏุฉ ุ ุณูุชู ุชุดุบูู ุงููุงููุฑุง ูุงูููุฏูู ุชููุงุฆููุง ุ ููู ุฃูุฑ ุบูุฑ ููุจูู ุจุงูุทุจุน. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุงุฏุฉ ูุง ูุชุถูู WebRtc ูู ุดููู ุงูุฎุงูุต ุฅุฑุณุงู ุงููุฑุดุญูู ุฅูู ุงูุทุฑู ุงูุขุฎุฑ ูู ุฃูุฑุจ ููุช ูููู ุญุชู ุชุจุฏุฃ ุงูููุงูุถุงุช ูู ุฃุณุฑุน ููุช ูููู ุ ููู ุฃูุฑ ููุทูู. ูู ุงุฎุชุจุงุฑุงุชู ุ </font><i><font style="vertical-align: inherit;">ุฏุงุฆููุง</font></i><font style="vertical-align: inherit;"> ูุง </font><i><font style="vertical-align: inherit;">ูููู</font></i><font style="vertical-align: inherit;"> ุงููุฑุดุญูู ุฅูู ุงูุทุฑู ุงููุชููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆููุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏุฃ ูุฃุชู ุญุชู ูุจู ุฃู ูุฃุชู ุงูุนุฑุถ. ูุง ูููู ุชุฌุงูู ูุคูุงุก ุงููุฑุดุญูู "ุงูุฃูุงุฆู" ุ ูุฌุจ ุชุฐูุฑูู ุ ูุฐูู ุนูุฏูุง ูุตู ุงูุนุฑุถ </font></font><code>RTCPeerConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชู ุฅูุดุงุคู ุ ูู ุจุฅุถุงูุชูู ุฅูู ุงูุงุชุตุงู. ุญูููุฉ ุฃู ุงููุฑุดุญูู ูุฏ ูุจุฏุฃูู ูู ุงููุตูู ุญุชู ูุจู ุงูุนุฑุถ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุจุนุถ ุงูุฃุณุจุงุจ ุงูุฃุฎุฑู ุ ุชุฌุนู ุชูููุฐ ุงูููุงููุงุช ุงููุงููุฉ ูููุฉ ุบูุฑ ุชุงููุฉ. ูุงุฐุง ุชูุนู ุฅุฐุง ุงุชุตู ุจูุง ุนุฏุฉ ูุณุชุฎุฏููู ูู ููุช ูุงุญุฏุ ุณูู ูุชููู ูุฑุดุญูู ูู ุงูุฌููุน ุ ูุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ูุตู ุงููุฑุดุญูู ุนู ูุณุชุฎุฏู ูู ูุณุชุฎุฏู ุขุฎุฑ ุ ูุฅูู ูู ุบูุฑ ุงููุงุถุญ ุฃู ุงููุฑุดุญูู ุณูุฑูุถูู ุ ูุฃููุง ูุง ูุนุฑู ูู ุณูุฃุชู ุนุฑุถู ูู ููุช ุณุงุจู. ุณุชููู ููุงู ุฃูุถูุง ูุดุงูู ุฅุฐุง ุจุฏุฃ ุงููุฑุดุญูู ุจุงููุฏูู ุฅูููุง ุซู ุนุฑุถูุง ูู ุงููุญุธุฉ ุงูุชู </font><font style="vertical-align: inherit;">ูุณูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุณูุง ูููุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดุฎุตูุง ูุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงุฎุชุจุงุฑ ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ุจุงุณุชุฎุฏุงู WebRtc ุนุงุฑูุฉ ุ ุชูุตูุช ุฅูู ุงุณุชูุชุงุฌ ููุงุฏู ุฃู ูุญุงููุฉ ุฅุฌุฑุงุก ููุงููุงุช ูู ูุฐุง ุงููููุฐุฌ ุณุชููู ูุดููุฉ ููููุฆุฉ ุจุชุณุฑูุจุงุช ุงูุฐุงูุฑุฉ ุ ูุฐูู ูุฑุฑุช ุฅุถุงูุฉ ูุฑุญูุฉ ุฃุฎุฑู ุฅูู ุนูููุฉ ุชูุงูุถ WebRtc. ุฃุณูู ูุฐู ุงููุฑุญูุฉ </font></font><code>Inquire - Grant/Refuse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุฑุฉ ุจุณูุทุฉ ููุบุงูุฉ ุ ููููู ุงุณุชุบุฑูุช ุจุนุถ ุงูููุช ูููุตูู ุฅูููุง. </font><font style="vertical-align: inherit;">ูุฑุณู </font><font style="vertical-align: inherit;">ุงููุชุตู ุญุชู ูุจู ุฅูุดุงุก ุงูุฏูู </font></font><code>RTCPeerConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ูุจุดูู ุนุงู ูุจู ุชูููุฐ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฑูุฒ ูุฑุชุจุท ุจู WebRtc) ุฑุณุงูุฉ ุนุจุฑ ุฎุงุฏู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุฌุงูุจ ุงูุขุฎุฑ </font></font><code>Inquire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุนูู ุงูุฌุงูุจ ุงููุชููู ุ ูุชู ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูู ุฌูุณุฉ ุงุชุตุงู ุฃุฎุฑู ูู ุงูููุช ุงูุญุงูู ( </font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูู </font><font style="vertical-align: inherit;">ุจุณูุท </font><font style="vertical-align: inherit;">). ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูุชู ุฅุนุงุฏุฉ ุงูุฑุณุงูุฉ.</font></font><code>Refuse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุฐู ุงูุทุฑููุฉ ูุฏุน ุงููุชุตู ูุนุฑู ุฃู ุงููุณุชุฎุฏู ูุดุบูู ุ ูุงููุชููู - ุฃู ูุซู ูุฐุง ุงููุงุชู ุงุชุตู ุจู ุจูููุง ูุงู ูุดุบููุงู ุจูุญุงุฏุซุฉ ุฃุฎุฑู. ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุฌุงูููุง ุญุงูููุง ุ ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฌูุฒ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><code>Inquire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุฑุณุงู ูุนุฑู ุงูุฌูุณุฉ </font><font style="vertical-align: inherit;">ูู ุงูุฑุณุงูุฉ </font><font style="vertical-align: inherit;">ุ ููุชู ุชุนููู ูุฐุง ุงููุนุฑูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุฑู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฌูุณุฉ </font><i><font style="vertical-align: inherit;">ุงูุญุงููุฉ</font></i><font style="vertical-align: inherit;"> . ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุญุฌูุฒูุง ุ ูุณูุฑูุถ ุฌููุน </font></font><code>Inquire/Offer/Candidate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุณุงุฆู ุฐุงุช ูุนุฑูุงุช ุงูุฌูุณุฉ ุจุฎูุงู ุงูุญุงููุฉ. ุจุนุฏ ุงูุญุฌุฒ ุ ูุฑุณู ุงููุชููู ุฑุณุงูุฉ ุนุจุฑ ุฎุงุฏู ุงูุฅุดุงุฑุฉ ุฅูู ุงููุชุตู </font></font><code>Grant</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐู ุงูุนูููุฉ ุบูุฑ ูุฑุฆูุฉ ูููุณุชุฎุฏู ุงููุชููู ุ ูุธุฑูุง ูุนุฏู ูุฌูุฏ ููุงููุฉ ุญุชู ุงูุขู. ูุงูุดูุก ุงูุฑุฆูุณู ููุง ูู ุฃูุง ููุณู ุชุนููู ุงูููุช ุงููุณุชูุทุน ุนูู ุงูุฌุงูุจ ุงููุชููู. ูุฌุฃุฉ ุณูู ูุญุฌุฒ ุฌูุณุฉ ุ ููู ูุชุจุน ุฐูู ุฃู ุนุฑุถ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชูุจู ุงููุชุตู </font></font><code>Grant</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููุง ูุจุฏุฃ WebRtc ุจุงูุนุฑูุถ ูุงููุฑุดุญูู ุ ููุฐุง ูู ููุฌููุน. </font><font style="vertical-align: inherit;">ูุทูุฑ ุงูุนุฑุถ ุฅูู ุฌูุงุฒ ุงูุงุณุชูุจุงู ุ ููุนุฑุถ ุนูุฏ ุงูุงุณุชูุงู ุดุงุดุฉ ุจุฃุฒุฑุงุฑ ุงูุฅุฌุงุจุฉ / ุงูุฑูุถ. </font><font style="vertical-align: inherit;">ููู ุงููุฑุดุญูู ุ ูุงูุนุงุฏุฉ ุ ูุง ูุชููุนูู ุฃู ุดุฎุต. </font><font style="vertical-align: inherit;">ูุจุฏุฃูู ูุฑุฉ ุฃุฎุฑู ูู ุงููุตูู ุญุชู ูุจู ุงูุนุฑุถ ุ ูุฃูู ูุง ููุฌุฏ ุณุจุจ ูุงูุชุธุงุฑ ุงููุณุชุฎุฏู ููุฑุฏ ุนูู ุงูููุงููุฉ. </font><font style="vertical-align: inherit;">ูุฏ ูุง ูุฌูุจ ุ ูููู ูุฑูุถ ุฃู ููุชุธุฑ ุญุชู ุงูุชูุงุก ุงููููุฉ - ุซู ุณูุชู ุงุณุชุจุนุงุฏ ุงููุฑุดุญูู ุจุจุณุงุทุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุถุน ุงูุญุงูู ูุงูุฎุทุท ุงููุณุชูุจููุฉ</font></font></h2><br>
<ul>
<li><font color="#009c50"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุฑุฏุดุงุช ุงูุฎุงุตุฉ ูุงูุฌูุงุนูุฉ</font></font></font></li>
<li><font color="#009c50"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุณุงู ุงููุต ูุงูุตูุฑ</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุงุทุน ุงูููุฏูู</font></font></li>
<li><font color="#009c50"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงููุงุช ุงูุตูุช ูุงูููุฏูู</font></font></font></li>
<li><font color="#009c50"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃููุฏ ุงูุงุณุชูุงู ูุงููุฑุงุกุฉ</font></font></font></li>
<li><font color="#009c50"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูุทุจูุนุงุช ..."</font></font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุดุนุงุฑุงุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ ุนู ุทุฑูู ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ ุงูุณุฑูุนุฉ ูุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุจุญุซ ุจุงุณุชุฎุฏุงู ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ ุงูุณุฑูุนุฉ ุ ุจุดูู ุบูุฑ ูุชููุน ุ ููุซู ูุดููุฉ ูุจูุฑุฉ ูู ุงูุชูููุฐ ุ ูุฃู ุฌููุน ุงูููููุงุช ุงูุฅุถุงููุฉ ููุณุญ ุงูุดูุฑุฉ ุงูุชู ุญุงููุช ุงุณุชุฎุฏุงููุง ุชูุฑูุจูุง ุชุฑูุถ ุงูุจุฏุก ุฃู ูุง ุชุนูู ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ูููู ุฃุนุชูุฏ ุฃูู ุณูุชู ุญู ุงููุดุงูู ููุง. </font><font style="vertical-align: inherit;">ููุชูููุฐ ุงูุจุญุซ ุนู ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู ุ ูู ุฃุชูุงููู ุจุนุฏ. </font><font style="vertical-align: inherit;">ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูุง ููุจุบู ุฃู ูููู ููุงู ุฃู ูุดุงูู ุฎุงุตุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฅุฎุทุงุฑุงุช ููุฏ ุงูุชูุฏู ุ ููุฐูู ุฅุฑุณุงู ููุงุทุน ุงูููุฏูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงูุฐู ูุฌุจ ูุนูู ุฃูุถูุงุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุซูุฑ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ุชูุฌุฏ ุงุฎุชุจุงุฑุงุช. ุงุนุชุงุฏ ุงูุฒููุงุก ุนูู ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ุ ูุฐูู ุงุฑุชุญุช ุชูุงููุง. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูููุง ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูููู ุญุงูููุง ุฏุนูุฉ ุงููุณุชุฎุฏููู ุฅูู ุฏุฑุฏุดุฉ ุญุงููุฉ ูุชุฑู ุงูุฏุฑุฏุดุฉ. ุฑูุฒ ุงูุฎุงุฏู ุฌุงูุฒ ูุฐูู ุ ุฑูุฒ ุงูุนููู ููุณ ูุฐูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูุซูุง ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ูุงูุช ูุนุงูุฌุฉ ุงูุฎุทุฃ ุนูู ุงูุฎุงุฏู ุฃูุซุฑ ุฃู ุฃูู ุ ููุง ููุฌุฏ ุฎุทุฃ ูู ุงูุชุนุงูู ูุน ุงูุนููู. ูุง ูููู ููุท ุฅุฏุฎุงู ุฅุฏุฎุงู ุณุฌู ุ ูุฌุจ ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูุนูููุฉ. ุงูุขู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ูุชู ุชูููุฐ ุขููุฉ ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑุณุงุฆู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุงุจุนุงู ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูููู ุงูุฎุงุฏู ุจุชูููุฐ ุงูุฃูุฑ ping ุนูู ุงูุนููู ุ ูุฐูู ูุง ูุชู ุงููุดู ุนู ูุทุน ุงูุงุชุตุงู ุฅุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุฏ ุงูุนููู ุงูุฅูุชุฑูุช. ูุชู ุงููุดู ุนู ูุทุน ุงูุงุชุตุงู ููุท ุนูุฏูุง ูููู ุงูุนููู ุจุฅุบูุงู ุงูุชุทุจูู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงูุณุงู ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูุชู ุงุณุชุฎุฏุงู ุงูููุงุฑุณ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุงุฏุณุง ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญุณูู. ูุญุชูู ุงูุฑูุฒ ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูุฃูุงูู ุญูุซ ุชุชู ูุชุงุจุฉ ุดูุก ูุซู </font></font><code>// @@TODO: Pool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุนุธู ุงููุตูููุงุช ูู </font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูู </font><font style="vertical-align: inherit;">ููุท </font><font style="vertical-align: inherit;">. ูููู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุจุฅูุดุงุก ุงูุนุฏูุฏ ูู ุงูุตูุงุฆู ุฐุงุช ุงูุทูู ุงูุซุงุจุช ุ ูุฐูู ููููู ููุง ุงุณุชุฎุฏุงู ุงูุชุฌูุน. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุงุจุนูุง ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงู ุงูุนุฏูุฏ ูู ุงูุฃูุงูู ุนูู ุงูุนููู ุญูุซ </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูู </font><font style="vertical-align: inherit;">ุงูุฑูุฒ </font><font style="vertical-align: inherit;">ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ููุณ ุถุฑูุฑููุง. ุฅุฑุณุงู ุงูุตูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุจุฏู ุจุทูุฆูุง ูุฃู ุงูุดูุฑุฉ</font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญูุธ ุงูุตูุฑ ูู ูุธุงู ุงููููุงุช ูููุดุฆ ุตูุฑูุง ูุตุบุฑุฉ ูุจู ุนุฑุถ ุงูุฑุณุงูุฉ ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุง ููุฒู ุงูููุงู ุจุฃู ูู ุฐูู. ุฃู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุชุญุช ุงูุชุทุจูู ูุฃุฑุณูุช ูู ุตูุฑูุง ุฃุซูุงุก ุบูุงุจู ุ ูุณูููู ุจุฏุก ุงูุชุดุบูู ุจุทูุฆูุง ุ ูุฃูู ูุฑุฉ ุฃุฎุฑู ูุชู ุชูุฒูู ุฌููุน ูุฐู ุงูุตูุฑ ูุญูุธูุง ูู ุงููุธุงู ุ ููุชู ุฅูุดุงุก ุงูุตูุฑ ุงููุตุบุฑุฉ ุ ูุจุนุฏ ุฐูู ููุท ููุชูู ุจุฏุก ุงูุชุดุบูู ููุชู ุทุฑุญู ูู ุดุงุดุฉ ุงูุจุฏุงูุฉ ุนูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ. ุชู ุนูู ูู ูุฐู ุงูุชูุฑุงุฑุงุช </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุณููู ุนูููุฉ ุงูุชุตุญูุญ ุ ูููู ุ ุจุงูุทุจุน ุ ุชุญุชุงุฌ ุฅูู ุงูุชุฎูุต ูู ุงูุงูุชุธุงุฑ ุบูุฑ ุงูุถุฑูุฑู ูุจู ุงูุฅุตุฏุงุฑ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุตุจุญุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุขู ูุตู ุฌุงูุฒุฉ ุ ูุฃููู ูู ุฃูุฑุฑ ููู ุฃุฑูุฏ ุฑุคูุชูุง. ูุฐูู ุ ุงูุขู ูู ุดูุก ููุณ ุจุฏููููุง ุ ูุตู ุงูุฃุฒุฑุงุฑ ุบูุฑ ูุงุถุญุฉ ูุง ููุนูููู. ูุบุงูุจูุง ูุง ูุง ูุชู ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ ูู ุงููุฑุฉ ุงูุฃููู ุ ูุฃููุง ุงูุขู ูุฌุฑุฏ ุฑููุฒ ูุน </font></font><code>GestureDetector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุดู ุฃู ุจุฏูู ุญุดู ุ ูุฐูู ููุณ ูู ุงููููู ุฏุงุฆููุง ุงูุฏุฎูู ุฅูููุง. ุจุงูุฅุถุงูุฉ ุฅูู ุฃูู ูู ุจุนุถ ุงูุฃูุงูู ูุง ูุชู ุฅุตูุงุญ ุชุฌุงูุฒ ูุญุฏุงุช ุงูุจูุณู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุงุณุนุงู ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุตุจุญ ูู ุงููุณุชุญูู ุงูุขู ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุญุณุงุจ ุ ููุท ูู ุจุงูุชุณุฌูู. ูุฐูู ุ ุฅุฐุง ููุช ุจุฅูุบุงุก ุชุซุจูุช ุงูุชุทุจูู ูุฅุนุงุฏุฉ ุชุซุจูุชู ุ ููู ุชุชููู ูู ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุญุณุงุจู :) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุงุดุฑ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูุชู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู ุฅูู ุงูุจุฑูุฏ. ุงูุขู ุงูุฑูุฒ ุฏุงุฆููุง ูู ููุณู ุฏุงุฆููุง ุ ูุฑุฉ ุฃุฎุฑู ูุฃูู ูู ุงูุฃุณูู ุชุตุญูุญู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุงุฏูู ุนุดุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงูุชูุงู ูุจุฏุฃ ุงููุณุคูููุฉ ุงููุฑุฏูุฉ ูู ุงูุนุฏูุฏ ูู ุงูุฃูุงูู. ุจุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุจูุงุก. ุนุงุฏุฉู ูุง ุชููู ุงููุฆุงุช ุงููุณุคููุฉ ุนู ุงูุชูุงุนู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุนูู ูู ูู ุงูุนููู ูุงูุฎุงุฏู) ููุชูุฎุฉ ููุบุงูุฉ ุ ูุฃููุง ุชุดุงุฑู ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูู ุนุดุฑ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชููุน ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุฏุงุฆููุง ุงุณุชุฌุงุจุฉ ูู ุฎุงุฏู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุ ุญุชู ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ูุง ุชุนูู ุฅุฑุณุงู ุงุณุชุฌุงุจุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุฑุณุงูุฉ ุชุญุชูู ุนูู ุฑูุฒ </font></font><code>IsTyping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุนุถ ุงูุฑุณุงุฆู ุงููุชุนููุฉ ุจู WebRtc). ูุฐูู ุ ุฏูู ุงูุชุธุงุฑ ุฅุฌุงุจุฉ ุ ููุชุจ ุฎุทุฃ ุฅูู ูุญุฏุฉ ุงูุชุญูู ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ููุณ ุฎุทุฃ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงูุซ ุนุดุฑ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ุชูุชุญ ุงูุตูุฑ ุงููุงููุฉ ุนูุฏ ุงูููุฑ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆุฉ ููููู ุฃุฎูุงุณ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุฑุณุงู ุจุนุถ ุงูุฑุณุงุฆู ุงูุชู ุชุญุชุงุฌ ุฅูู ุฅุฑุณุงููุง ุนูู ุฏูุนุงุช ุจุดูู ูููุตู. ุงูุฃูุฑ ููุณู ููุทุจู ุนูู ุจุนุถ ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช. ุจุฏูุงู ูู ุชูููุฐ ุฃูุฑ ูุงุญุฏ ุ ูุชู ุชูููุฐ ุงูุฃูุงูุฑ ูู ุญููุฉ ุจุงุณุชุฎุฏุงู </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(brr ..). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆุฉ ููููู ุณุฏุณ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุถ ุงูููู ูุดูุฑุฉ ุ ุจุฏูุงู ูู ููููุง ูุงุจูุฉ ููุชูููู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆุฉ ููุงุญุฏ ููููู ุณุงุจุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุฌูู ุงูุฏุฎูู ุนูู ุงูุฎุงุฏู ูู ุงูุขู ููุท ุนูู ูุญุฏุฉ ุงูุชุญูู ุ ูุนูู ุงูุนููู ุจุดูู ุนุงู ุ ูุจุงุดุฑุฉ ุฅูู ุงููุทุนุฉ. ููุฌุฏ ุนูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ ุนูุงูุฉ ุชุจููุจ "ุณุฌูุงุช" ุ ุญูุซ ูุชู ุฅุณูุงุท ุฌููุน ุงูุณุฌูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุดุงุดุฉ. ุงูุญูููุฉ ูู ุฃู ุขูุฉ ุงูุนูู ุงูุฎุงุตุฉ ุจู ุชุฑูุถ ุชุดุบูู ูู ูู ุงููุญุงูู ููู ูุง ูู ุถุฑูุฑู ููุฎุงุฏู (kafka ุ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุงููุฌู ูุฌููุน ุงูุฎูุงุฏู). ูู ููุฌุญ ุงูุฎุตู ูุน ุฌูุงุฒ ูุชุตู ุ ูู ุดูุก ุชู ุชุนูููู ุจุฅุญูุงู ูู ูุตู ุงูุญุงูุงุช ุ ูุฃู ุงูููุจููุชุฑ ูู ูุชููู ูู ุงูุชุนุงูู ูุน ุงูุฃุญูุงู. ูุฐูู ุ ูุฌุจ ุนููู ุฅูุดุงุก ุฅุตุฏุงุฑ ูู ูู ูุฑุฉ ุ ูุฅุณูุงุทู ุนูู ุงูุฌูุงุฒ ุ ูุชุซุจูุชู ูุงุฎุชุจุงุฑู ูุซู ูุฐุง. ูุฑุคูุฉ ุงูุณุฌูุงุช ุ ุฃุณูุทูุง ูุจุงุดุฑุฉ ูู ุงูุฃุฏุงุฉ. ุฃุนูู ุฃู ุงูุงูุญุฑุงู ููุณ ููุงู ุฎูุงุฑ. ููุณุจุจ ููุณู ุ ุงูุนุฏูุฏ ูู ุงูุฃุณุงููุจ ุชุนูุฏ </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู</font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู (ูููุจุถ ุนูู ุงูุงุณุชุซูุงุก ูุฑูู ูู ุงููุทุนุฉ) ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุง ููุจุบู ููู. ุฅุฐุง ูุธุฑุช ุฅูู ุงูุดูุฑุฉ ุ ุณุชุฑู </font></font><code>_logError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font><font style="vertical-align: inherit;">ูุจูุญุฉ </font><font style="vertical-align: inherit;">ูู ุงูุนุฏูุฏ ูู ุงููุฆุงุช ุงูุชู ุชูุนู ุฐูู. ูุฐุง ุ ุจุงูุทุจุน ุ ุณูุฐูุจ ุฃูุถูุง ุฅูู ุณูุฉ ุงูููููุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆุฉ ููููู ูุซูุงููุฉ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ุฃุตูุงุช. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆุฉ ููููู ูุชุณุนุฉ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุงูุชุฎุฒูู ุงููุคูุช ุฃูุซุฑ. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆุฉ ููููู ุนูุดุฑ ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุซูุฑ ูู ุงูุดูุฑุงุช ุงููุชูุฑุฑุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ุชููู ุงูุนุฏูุฏ ูู ุงูุฅุฌุฑุงุกุงุช ุฃููุงู ุจุงูุชุญูู ูู ุตุญุฉ ุงูุฑูุฒ ุงููููุฒ ุ ูุฅุฐุง ูู ุชูู ุตุงูุญุฉ ุ ูุฅููุง ุชุฑุณู ุฎุทุฃู. ุฃุนุชูุฏ ุฃูู ุจุญุงุฌุฉ ุฅูู ุชูููุฐ ุฎุท ุฃูุงุจูุจ ูุณูุท ุจุณูุท. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงูุตุบูุฑุฉ ุ ูุซู ุณูุงุณู ูุชุณูุณูุฉ ุจุฏูุงู ูู ุงุณุชุฎุฏุงู </font></font><code>StringBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"a ุ</font></font><code>Dispose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณ ูู ููุงู ูุณูู ุญูุซ ูุฌุจ ุ ูููุฐุง ุฏูุงููู. </font><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ุงูุญุงูุฉ ุงูุทุจูุนูุฉ ูููุดุฑูุน ููุฏ ุงูุชุทููุฑ. </font><font style="vertical-align: inherit;">ูู ูุง ุณุจู ูุงุจู ููุญู ุ ูููู ููุงู ูุดููุฉ ุฃุณุงุณูุฉ ูุงุญุฏุฉ ูู ุฃููุฑ ุจูุง ุญุชู ุงููุญุธุฉ ุงูุฃุฎูุฑุฉ ุ ูุฃููุง ุฎุฑุฌุช ูู ุฑุฃุณู - ูุฌุจ ุฃู ูุนูู ุงูุฑุณูู ุญุชู ุนูุฏูุง ูุง ูููู ุงูุชุทุจูู ููุชูุญูุง ุ ููุง ูุนูู ูุดููุชู. </font><font style="vertical-align: inherit;">ููููู ุตุงุฏููู ุ ูุฅู ุญู ูุฐู ุงููุดููุฉ ูู ูุฎุทุฑ ุจุจุงูู ุจุนุฏ. </font><font style="vertical-align: inherit;">ููุง ุ ุนูู ูุง ูุจุฏู ุ ูุง ููููู ุงูุงุณุชุบูุงุก ุนู ุงูููุฏ ุงูุฃุตูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุฏุฑ ุฌุงูุฒูุฉ ุงููุดุฑูุน ุจูุณุจุฉ 70ูช.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฎุต</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ูุฑุช ุณุชุฉ ุฃุดูุฑ ููุฐ ุจุฏุก ุงูุนูู ูู ุงููุดุฑูุน. </font><font style="vertical-align: inherit;">ุฌูุจุง ุฅูู ุฌูุจ ูุน ุงูุนูู ุจุฏูุงู ุฌุฒุฆู ูุฃุฎุฐ ูุชุฑุงุช ุฑุงุญุฉ ุทูููุฉ ุ ูููู ูุง ูุฒุงู ูุณุชุบุฑู ูููุฉ ูุงุฆูุฉ ูู ุงูููุช ูุงูุทุงูุฉ. </font><font style="vertical-align: inherit;">ุฃุฎุทุท ูุชูููุฐ ุฌููุน ุงูููุฒุงุช ุงููุนููุฉ + ุฅุถุงูุฉ ุดูุก ุบูุฑ ุนุงุฏู ูุซู ุชูู ุชุงู ุชู ุฃู ูุณูุฏุงุช ูุจุงุดุฑุฉ ูู ุงูุบุฑูุฉ. </font><font style="vertical-align: inherit;">ุจุฏูู ุณุจุจ ุ ููุท ูุฃูู ูุซูุฑ ููุงูุชูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู ูุฏูู ุฃู ุฃุณุฆูุฉ ุ ุงูุชุจ. </font><font style="vertical-align: inherit;">ุงูุจุฑูุฏ ููุฌูุฏ ุนูู ุฌูุซุจ.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar490054/index.html">17 ููุงุฌุฃุฉ ููุนุงู ุงูุฃูู ุจุงุณุชุฎุฏุงู ูููุฐุฌ ุชุณูุง 3</a></li>
<li><a href="../ar490056/index.html">ุงูุตูุฏูู ุงูุฃุณูุฏ: ูุณูุงู ุงูุชุณุฌูู</a></li>
<li><a href="../ar490060/index.html">ุงูุฑุณู ุงูุจูุงูู ุงููุนุฑูู ููุจุญุซ: ุงูุจูุงุก ูู ูุตุงุฏุฑ ูุชุนุฏุฏุฉ</a></li>
<li><a href="../ar490066/index.html">ูู ุงูุตูู ุฅูู ุงููุทุจ ุงูุฌููุจู: ุชูุญูุฏ ุงูููู ูุญู ูุบุฒ ูุชูุฉ ุงููููุชุฑููู</a></li>
<li><a href="../ar490068/index.html">ุชุฒููู ุงูุนุดูุงุฆูุฉ ูุงูุชุญูู ุนู ุทุฑูู ูุฑุฒ ุชุณูุณู ุดุจู ุนุดูุงุฆู</a></li>
<li><a href="../ar490076/index.html">ุงูุชุตููู ุงูุฑูุงุถู ููุชุฎุตุตุงุช ุงูุฑูุงุถูุฉ ุงูุฅููุชุฑูููุฉ</a></li>
<li><a href="../ar490080/index.html">ะะฐะบ ะบะพะฝะบััะตะฝัั ะผะพะณัั ะปะตะณะบะพ ะทะฐะฑะปะพะบะธัะพะฒะฐัั ะฒะฐั ัะฐะนั</a></li>
<li><a href="../ar490082/index.html">ุชุญููู ุงูุดูุฑุฉ ุงููุฑุงุซูุฉ I</a></li>
<li><a href="../ar490084/index.html">ููู ููุงุตูุงุช ECMAScript ุ ุงูุฌุฒุก 1</a></li>
<li><a href="../ar490086/index.html">ุฏููู ุชุตูุญ ุงููุจุชุฏุฆูู ุฃู ุญูุงุฉ ุงููุจุฑูุฌูู ูู ุงูุจุฑุชุบุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>