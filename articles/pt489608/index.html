<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úäüèº üç© üë∞üèº Intera√ß√£o com o NIDD via SCEF usando o utilit√°rio Postman. Um breve tour pelo SCEF e suas caracter√≠sticas üöπ üëçüèæ üà∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo permitir√° que aqueles que est√£o iniciando seu desenvolvimento ou que j√° estejam aplicando a tecnologia NB-IoT tenham uma id√©ia de como int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Intera√ß√£o com o NIDD via SCEF usando o utilit√°rio Postman. Um breve tour pelo SCEF e suas caracter√≠sticas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489608/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este artigo permitir√° que aqueles que est√£o iniciando seu desenvolvimento ou que j√° estejam aplicando a tecnologia NB-IoT tenham uma id√©ia de como interagir remotamente com dispositivos NB-IoT.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/ax/eq/hjaxeqtz5llcdmfzbwcv6zosici.png" alt="imagem"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breve revis√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NB-IoT se destaca facilmente do 2G e se estabeleceu como um padr√£o energeticamente eficiente para comunica√ß√µes celulares, que em um futuro pr√≥ximo poder√° espremer o 2G, o que fortaleceu sua posi√ß√£o. A raz√£o para isso √© a capacidade de abordar com flexibilidade a quest√£o do consumo de energia de uma das partes mais consumidoras do dispositivo - o transmissor de r√°dio. Se voc√™ n√£o se aprofundar nos detalhes, juntamente com o NB-IoT, temos a oportunidade de configurar com flexibilidade os modos de opera√ß√£o do dispositivo, definindo a programa√ß√£o de comunica√ß√£o do dispositivo e a intera√ß√£o do dispositivo com os servidores na Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paralelamente, o n√∫mero de dispositivos de assinante conectados simultaneamente a uma c√©lula est√° aumentando significativamente, assim como os custos da operadora m√≥vel de manter a operabilidade dessa pr√≥pria comunica√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sup√µe-se que o leitor tenha uma compreens√£o aproximada da tecnologia NB-IoT e que haja uma experi√™ncia m√≠nima de intera√ß√£o.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O artigo √© atualizado e atualizado regularmente.</font></font></blockquote><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dificuldades na rede NB-IoT</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juntamente com a capacidade de controlar o transmissor de r√°dio e a alta efici√™ncia energ√©tica, surgiu o problema de enviar dados na dire√ß√£o do servidor para o m√≥dulo (dispositivo). O motivo √© que √© poss√≠vel fornecer centenas de milhares de dispositivos com endere√ßos IP brancos, mas isso implica uma grande quantidade de sobrecarga e reduz a confiabilidade geral da rede devido √† sua complexidade. O m√≥dulo recebe o endere√ßo para o NAT do operador e √© dif√≠cil para o operador convert√™-lo "fora" devido ao grande n√∫mero de dispositivos. Por exemplo: 100 mil dispositivos s√£o o mesmo n√∫mero de endere√ßos IP e, dentro da estrutura do IPv4, simplesmente n√£o parece poss√≠vel implement√°-lo. A transi√ß√£o para o IPv6 pode resolver esse problema, mas voc√™ ainda precisa pagar pelo endere√ßo ‚Äúbranco‚Äù do dispositivo na rede, o que afetar√° significativamente o bolso dos clientes corporativos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, no caso geral, verifica-se que o dispositivo s√≥ pode funcionar no modo unidirecional transmitindo dados para o servidor sem a possibilidade de receber dados do servidor, porque o servidor praticamente n√£o tem conhecimento quando o dispositivo entra em contato pela primeira vez. </font><font style="vertical-align: inherit;">Ou use, em m√©dia, n√£o mais de cinco minutos ap√≥s o estabelecimento da conex√£o entre o dispositivo e o servidor para transferir dados do servidor para o dispositivo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIDD (Entrega de dados n√£o IP) - por que isso √© necess√°rio?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com a rede NB-IoT, √© muito dif√≠cil recorrer a um dispositivo para transmitir um comando ou alguns dados. Para resolver esse problema, foi inventado um mecanismo para otimizar a transfer√™ncia de pequenas quantidades de dados, a Entrega de Dados N√£o-IP (NIDD). </font><font style="vertical-align: inherit;">O mecanismo reduz o tamanho geral da mensagem transmitida, reduzindo os cabe√ßalhos. </font><font style="vertical-align: inherit;">Isso, por sua vez, afeta positivamente as caracter√≠sticas do dispositivo: reduz o consumo de energia e aumenta a autonomia (dura√ß√£o da bateria). </font><font style="vertical-align: inherit;">Como resultado, a rejei√ß√£o do suporte IP leva a dispositivos mais baratos, tempo de desenvolvimento reduzido, aumento da competitividade no mercado de dispositivos IoT, etc.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCEF (Fun√ß√£o de Exposi√ß√£o de Capacidade de Servi√ßo) - um presente para os usu√°rios</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O SCEF √© um elemento de rede funcional que apareceu pela primeira vez e o 3GPP Release 13, implantado no lado da operadora m√≥vel e fornecendo um canal de comunica√ß√£o seguro entre o SCS / AS (Servidor de Capabilidade de Servi√ßo / Servidor de Aplicativos) e o dispositivo NB-IoT. O SCEF fornece um canal de comunica√ß√£o ao se comunicar com o dispositivo via NIDD e fornece acesso a recursos / servi√ßos de rede adicionais da rede NB-IoT atrav√©s de uma √∫nica interface de programa√ß√£o de aplicativos (da descri√ß√£o da API T8). No 3GPP Release 13, apenas o mecanismo SCEF para interface com interfaces de rede celular foi padronizado. Assim, a carga da rede √© otimizada, a intera√ß√£o com o dispositivo √© simplificada, o algoritmo do pr√≥prio dispositivo √© simplificado.O SCEF tamb√©m cumpre altos requisitos para a seguran√ßa da transmiss√£o de dados e o cumprimento de requisitos para confirmar a transfer√™ncia bem-sucedida de dados em ambas as dire√ß√µes.</font></font><br>
<br>
<h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O SCEF permite que voc√™ abstraia de sistemas complexos de intera√ß√£o com o dispositivo NB-IoT, inclusive quando este est√° no modo eDRX ou PSM e n√£o est√° dispon√≠vel para transfer√™ncia de dados na dire√ß√£o do servidor-&gt; dispositivo. Quando o dispositivo recebe registro e "concorda" com a rede da operadora sobre a programa√ß√£o da comunica√ß√£o, usando uma interface simples, voc√™ pode transferir dados para o dispositivo e receber dados dele, gerenciar a "assinatura" do seu dispositivo e AS para determinados eventos, definir e vincular voc√™ mesmo. Nomes de identifica√ß√£o universal e muito mais. Tudo isso atrav√©s da mesma interface - API T8. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â importante observar que um servidor (AS) n√£o pode ser um, mas v√°rios, e voc√™ pode configurar com flexibilidade a distribui√ß√£o de informa√ß√µes entre servidores para determinados eventos ou grupos de dispositivos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como funciona</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A solu√ß√£o mais popular para organizar o acesso de um dispositivo a uma rede celular √© o uso de um m√≥dulo celular, por exemplo:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/f6/yn/xw/f6ynxwxpeypur3-lg6wabxhwyay.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao se registrar em uma rede celular, esse m√≥dulo transmite ao operador algumas informa√ß√µes, incluindo o IMSI de um cart√£o SIM de assinante que o operador pode associar √† conta do assinante ou ao pr√≥prio assinante, se ele tiver acesso √† conta pessoal do operador. Por tr√°s da tela do SCEF est√° oculto o conhecimento da pr√≥xima sess√£o de comunica√ß√£o com o dispositivo. O registro de um dispositivo n√£o IP na rede da operadora s√≥ √© poss√≠vel se houver pelo menos uma assinatura do SCS / AS para este dispositivo. Sem assinatura - ningu√©m se comunicar√° com este dispositivo via NIDD, e o dispositivo n√£o ser√° registrado na rede. Assim, o SCEF, sabendo da pr√≥xima sess√£o de comunica√ß√£o, √© capaz de transferir dados de / para o dispositivo, de acordo com os par√¢metros de entrega especificados e o tempo de vida da mensagem transmitida, sem a necessidade de organizar um monitoramento adicional do status da transfer√™ncia e controle de entrega de dados.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leveza</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encapsular unidades de bytes de dados do dispositivo no protocolo TCP e transferi-lo para o servidor √© caro em termos de centenas de milhares de dispositivos de assinante na frota da empresa. </font><font style="vertical-align: inherit;">O SCEF permite que voc√™ abandone o IP no dispositivo e transfira apenas dados n√£o IP, sem cabe√ßalhos IP atrav√©s do canal de sinal, o que contribui para uma redu√ß√£o m√∫ltipla no custo do byte transmitido e oferece benef√≠cios adicionais com o uso do servi√ßo. </font><font style="vertical-align: inherit;">Al√©m disso, o SCEF n√£o faz nenhuma altera√ß√£o nos dados transmitidos, tanto no dispositivo quanto a partir dele, a carga √∫til √© transmitida de forma transparente. </font><font style="vertical-align: inherit;">Portanto, usando o NIDD, √© poss√≠vel transferir n√£o apenas dados n√£o estruturados, mas tamb√©m dados "agrupados" em um formato padronizado compreens√≠vel, como JSON, para simplificar o processamento de dados no lado AS.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In√≠cio do trabalho</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A estrutura do URI (Uniform Resource Identifier) ‚Äã‚Äãno exemplo do Postman</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro de tudo, voc√™ precisa acessar sua conta pessoal da operadora (servi√ßo M2M-manager). </font><font style="vertical-align: inherit;">Para a implementa√ß√£o comercial do MTS, √© fornecida uma √∫nica interface de Conta Pessoal, na qual voc√™ pode criar de forma independente o APN, acessar a API de login / senha e atribuir nomes de ScsAsID, extID para seus dispositivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa. </font><font style="vertical-align: inherit;">pelo menos precisaremos de:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScsAsID - Seu ID de AS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APN - aquele que geralmente √© usado para interagir com a rede n√£o funcionar√°</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login / Senha - dados para acesso √† sua conta pessoal e intera√ß√£o com o SCEF</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URI - endere√ßo e porta HTTP na rede fornecida pelo SCEF </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">externalID - ID do nosso dispositivo</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos seguir praticando</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A teoria acabou, vamos para a parte mais interessante - a pr√°tica no m√≥dulo de produ√ß√£o SIMCom Wireless Solutions - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIM7020E</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/d6/_o/ued6_opqiacsy2l1axsi8zch1d0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, voc√™ precisa configurar o pr√≥prio m√≥dulo para trabalhar com o NIDD. </font><font style="vertical-align: inherit;">Para fazer isso, primeiro coloque o m√≥dulo no modo CFUN = 0 e configure-o:</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+CFUN=0<font></font>
+CPIN: NOT READY<font></font>
<font></font>
OK<font></font>
AT+ENVDM=1,tel_conn_mgr,default_pdn_flag,1,30<font></font>
OK<font></font>
AT*MCGDEFCONT="Non-IP","&lt;APN&gt;"<font></font>
OK<font></font>
AT+CFUN=1<font></font>
OK<font></font>
<font></font>
+CPIN: READY<font></font>
AT+EGACT=1,4,"&lt;APN&gt;"<font></font>
+EGACT:1<font></font>
<font></font>
OK<font></font>
<font></font>
+EGACT:1,1,1,4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificando o registro do m√≥dulo na rede de dados por pacote</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+CGREG?<font></font>
+CGREG: 0,1<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E termine de configurar o NIDD</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=0,"&lt;APN&gt;","&lt;login&gt;","&lt;pass&gt;"<font></font>
+NIDD=0,0<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A resposta do m√≥dulo conter√° account_id aqui: + NIDD = 0, &lt;account_id&gt; - isso ser√° √∫til ao ativar o NIDD no m√≥dulo.</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=1,0<font></font>
+NIDD=1,0<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, account_id √© 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclu√≠do. </font><font style="vertical-align: inherit;">Nesta fase, o trabalho com o m√≥dulo est√° conclu√≠do. </font><font style="vertical-align: inherit;">Vamos seguir para a configura√ß√£o do SCEF. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um ponto importante: sem uma assinatura registrada no SCEF, o m√≥dulo n√£o receber√° registro na rede!</font></font></u><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCEF</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API T8</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° um documento especial detalhando a intera√ß√£o com o SCEF. </font><font style="vertical-align: inherit;">Essa API define um conjunto de modelos de dados, recursos e procedimentos relacionados para a transmiss√£o de dados n√£o IP.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yd/nm/zz/ydnmzzwqtgnhqbxt7gnrsdpow00.png"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabalhar com SCEF e assinaturas de servi√ßo - JSON (JavaScript Object Notation)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dados que incluem a configura√ß√£o do SCEF e s√£o transmitidos via HTTP / 1.1 para o SCEF devem ser codificados no formato JSON, e o corpo da pr√≥pria solicita√ß√£o HTTP no campo Tipo de Conte√∫do deve incluir o cabe√ßalho "application / json". </font><font style="vertical-align: inherit;">Ao mesmo tempo, se a mensagem foi entregue ao destinat√°rio e a confirma√ß√£o da entrega foi recebida - o SCEF deve excluir a configura√ß√£o apropriada, envie a mensagem via HTTP POST para AS com o c√≥digo de status "200 OK" e ative o relat√≥rio no evento.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carteiro</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o vou me aprofundar em como trabalhar com esse utilit√°rio. Na Internet, voc√™ pode encontrar muitas cr√≠ticas. </font><font style="vertical-align: inherit;">S√≥ posso dizer que ele tem algumas limita√ß√µes em sua vers√£o gratuita, mas n√£o precisamos de muito, a funcionalidade fornecida gratuitamente √© mais que suficiente para nossas tarefas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o download e a abertura, a primeira guia nos dar√° as boas-vindas - Launchpad, onde seremos oferecidos para criar nossa primeira solicita√ß√£o, n√£o recusaremos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mf/ej/si/mfejsivr_jj6forivsfp0jhstbu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prossiga imediatamente para a configura√ß√£o do nosso novo dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, configuramos o m√©todo GET, alterne para POST (um pouco mais tarde, ficar√° claro por que isso √© necess√°rio). </font><font style="vertical-align: inherit;">Na guia "Autoriza√ß√£o", insira as "credenciais" que temos dispon√≠veis:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/96/ci/zc/96cizcahk44iy5-rpfvcznue3jw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora crie nosso primeiro pedido:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kp/zj/rp/kpzjrpd26ykmyt5r6xtyyoizk1w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No corpo da solicita√ß√£o, indicamos:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"pdnEstablishmentOption"</span>: <span class="hljs-string">"WAIT_FOR_UE"</span>,
    <span class="hljs-attr">"duration"</span>:<span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importante!</font></font></b>
                        <div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prestar aten√ß√£o em:</font></font><br>
<ul>
<li>‚Äúduration‚Äù ‚Äì      duration     SLA SCEF    (SCSAS/ID)   , SCEF    ,    </li>
<li>‚ÄúmaximumPacketSize‚Äù ‚Äì       / </li>
</ul></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos observar imediatamente que as seguintes op√ß√µes s√£o poss√≠veis em "pdnEstablishmentOption":</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WAIT_FOR_UE - buffer se o dispositivo n√£o estiver dispon√≠vel (n√£o registrado na rede ou no PSM ou em outro estado)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDICATE_ERROR - responda imediatamente com um erro se o dispositivo estiver indispon√≠vel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEND_TRIGGER - use o servi√ßo de acionamento de dispositivos (canal de entrega alternativo via SMS). </font><font style="vertical-align: inherit;">Este artigo n√£o √© considerado.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usamos o mesmo par√¢metro para enviar dados para o dispositivo. </font><font style="vertical-align: inherit;">E ao criar uma assinatura, podemos enviar dados imediatamente para o dispositivo, reduzindo o n√∫mero de solicita√ß√µes de API. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos! </font><font style="vertical-align: inherit;">Voc√™ pode clicar no bot√£o Enviar e examinar cuidadosamente o que obtemos em resposta do SCEF:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>,<font></font>
    ‚ÄúreliableDataService<span class="hljs-attr">": false,
    "</span>maximumPacketSize<span class="hljs-attr">": 500,
    "</span>self<span class="hljs-attr">": "</span>/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;<span class="hljs-attr">",
    "</span>status<span class="hljs-attr">": "</span>ACTIVE<span class="hljs-attr">"
}</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na linha pr√≥pria, estamos interessados ‚Äã‚Äãprincipalmente no ID da configura√ß√£o que criamos, √© extremamente indesej√°vel perd√™-lo, pois √© muito prov√°vel que os operadores n√£o suportem a fun√ß√£o de solicita√ß√£o de todas as configura√ß√µes criadas. </font><font style="vertical-align: inherit;">Quando houver v√°rios milhares de dispositivos criados na estrutura de um ScsAsID, muita carga ser√° criada nos servidores SCEF para transmitir todas as configura√ß√µes do dispositivo. </font><font style="vertical-align: inherit;">Tomamos como regra: um dispositivo = uma assinatura como parte do servi√ßo ScsAsID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, j√° podemos receber dados do m√≥dulo no servidor, cujo endere√ßo IP e porta foram indicados acima.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transfer√™ncia de dados do m√≥dulo para o AS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar transferir dados do dispositivo para o AS, retornar ao m√≥dulo SIM7020E e, se n√£o tocamos no cap√≠tulo anterior e n√£o o desativamos, enviaremos o comando para ele:</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=3,&lt;account_id&gt;,"6162636465"<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que nossa mensagem √© codificada em HEX e cont√©m uma sequ√™ncia simples: "abcde". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quase imediatamente no servidor (AS), que √© o host, veremos:</font></font><br>
<br>
<pre><code class="xml hljs">POST / HTTP/1.1<font></font>
OCSGHTTPProcessor: 147ff7c6-a43d-4fc9-b303-0ca50f497747<font></font>
X-callback-t8-type: 3<font></font>
X-callback-url: http://<span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
X-api-network-service-node: 0<font></font>
Content-Type: application/json<font></font>
Content-Length: 214<font></font>
Host: <span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpAsyncClient/4.1.3 (Java/1.8.0_181)<font></font>
<font></font>
{"externalId":"<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>","niddConfiguration":"/3gpp-nidd/v1/<span class="hljs-tag">&lt;<span class="hljs-name">ScsAsID</span>&gt;</span>/configurations/<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>","data":"YWJjZGU=","reliableDataService":false}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A mensagem em si chegou na codifica√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e fica assim:</font></font><br>
<pre><code class="plaintext hljs">YWJjZGU=</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se traduzirmos da codifica√ß√£o Base64, receberemos nossa mensagem original:</font></font><br>
<pre><code class="plaintext hljs">abcde</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A codifica√ß√£o Base64 √© usada devido ao fato de que ao usar a codifica√ß√£o ASCII, alguns dados s√£o perdidos √†s vezes e o uso do Base64 torna a transmiss√£o mais confi√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note-se tamb√©m que, neste caso, as informa√ß√µes transmitidas pelo m√≥dulo n√£o s√£o armazenadas no SCEF e s√£o imediatamente transmitidas ao nosso servidor via HTTP.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transfer√™ncia de dados do AS para o m√≥dulo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para enviar dados na dire√ß√£o do nosso AS para o m√≥dulo, vamos voltar ao Postman e criar uma nova solicita√ß√£o usando o m√©todo POST e a codifica√ß√£o Base64. Enviaremos 1234567890 (na Base64: MTIzNDU2Nzg5MA ==) para o nosso m√≥dulo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/mj/mc/wzmjmczcilbscfvrsjryyi5qfr8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que um adendo apareceu no campo "endere√ßo", no qual indicamos para qual configura√ß√£o queremos enviar a mensagem. Se v√°rios dispositivos estiverem inclu√≠dos em nossa configura√ß√£o, voc√™ poder√° usar o identificador ‚ÄúexternalGroupID‚Äù e todos receber√£o esses dados. Outro ponto importante √© o tempo de vida da mensagem enviada, indicada em segundos e com uma faixa bastante ampla.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, se o dispositivo n√£o estiver online no momento, nossa mensagem ser√° armazenada em buffer no SCEF, e a linha "maximumLatency" nos dir√° quantos segundos restam at√© que a mensagem seja destru√≠da se o dispositivo n√£o entrar em contato antes do cron√¥metro definido. . </font><font style="vertical-align: inherit;">Abaixo est√° a apar√™ncia da configura√ß√£o atual solicitada do SCEF (usando o mecanismo GET, mais sobre isso abaixo):</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
    <span class="hljs-attr">"niddDownlinkDataTransfers"</span>: [<font></font>
    {<font></font>
        <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
        <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"data"</span>: <span class="hljs-string">"MDEyMzQ1Njc4OTA="</span>,
        <span class="hljs-attr">"maximumLatency"</span>: <span class="hljs-number">96</span>,
        <span class="hljs-attr">"priority"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"self"</span>: <span class="hljs-string">"/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/1"</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se, depois que o cron√¥metro expirar, o dispositivo ainda n√£o entrou em contato, o SCEF notificar√° seu servidor (AS) de que a mensagem n√£o foi entregue devido √† expira√ß√£o do cron√¥metro e a mensagem ser√° exclu√≠da:</font></font><br>
<br>
<pre><code class="xml hljs">POST / HTTP/1.1<font></font>
OCSGHTTPProcessor: 14c8cab8-ecce-4868-a59e-1f784224518b<font></font>
X-callback-t8-type: 4<font></font>
X-callback-url: http://<span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
X-api-network-service-node: 0<font></font>
Content-Type: application/json<font></font>
Content-Length: 139<font></font>
Host: <span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpAsyncClient/4.1.3 (Java/1.8.0_181)<font></font>
<font></font>
{"niddDownlinkDataTransfer":"/3gpp-nidd/v1/<span class="hljs-tag">&lt;<span class="hljs-name">ScsAsID</span>&gt;</span>/configurations/<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>/downlink-data-deliveries/1","status":"FAILURE"}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se for bem-sucedido, o SCEF responder√° imediatamente:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode adicionar a capacidade de priorizar mensagens caso elas sejam armazenadas em buffer. </font><font style="vertical-align: inherit;">√â regulado pelo par√¢metro "priority". </font><font style="vertical-align: inherit;">Quando uma nova mensagem √© enviada ao dispositivo e se o buffer de entrega for excedido pelo SCEF, a mensagem ser√° substitu√≠da por uma mensagem com prioridade mais baixa, caso contr√°rio, a mensagem n√£o ser√° aceita para entrega. </font><font style="vertical-align: inherit;">Tamb√©m √© poss√≠vel excluir uma mensagem do buffer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a mensagem n√£o puder ser entregue e estiver em buffer, voc√™ receber√° o seguinte:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"self"</span>: <span class="hljs-string">"/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/2"</span>,
   <span class="hljs-attr">"status"</span>: <span class="hljs-string">"BUFFERING"</span>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importante!</font></font></b>
                        <div class="spoiler_text">  :<br>
/&lt;ID &gt;/downlink-data-deliveries/<b>1</b><br>
 ‚Äì      SCEF.  ,    .         .</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o recebimento da mensagem, o m√≥dulo relatar√° o seguinte URC:</font></font><br>
<br>
<pre><code class="plaintext hljs">+NIDD=4,0,11,0,"3031323334353637383930"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que na tradu√ß√£o de HEX para ASCII ser√° a nossa mensagem:</font></font><br>
<br>
<pre><code class="plaintext hljs">1234567890</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas deixe aqui. </font><font style="vertical-align: inherit;">Notifica√ß√£o de entrega de uma mensagem "em buffer":</font></font><br>
<br>
<pre><code class="json hljs">{
<span class="hljs-attr">"niddDownlinkDataTransfer"</span>:<span class="hljs-string">"3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/1"</span>,
<span class="hljs-attr">"status"</span>:<span class="hljs-string">"SUCCESS"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O monitoramento do status do dispositivo √© poss√≠vel atrav√©s de outro servi√ßo SCEF chamado ‚ÄúMonitoring Event (MONTE)‚Äù. </font><font style="vertical-align: inherit;">No MONTE, √© poss√≠vel receber notifica√ß√µes sobre eventos e hor√°rios (por exemplo, quando o dispositivo estiver dispon√≠vel), usando um sistema de assinatura semelhante. </font><font style="vertical-align: inherit;">Mas vamos falar sobre isso outra hora.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtendo configura√ß√£o do SCEF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ provavelmente percebeu que pode obter a configura√ß√£o atual do SCEF. </font><font style="vertical-align: inherit;">Vamos fazer isso. </font><font style="vertical-align: inherit;">Pegamos o Postman que j√° amamos e criamos a seguinte solicita√ß√£o usando o m√©todo GET:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/i_/jp/j6/i_jpj6tfbbgoxt0u5sf6gl9obnk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa. </font><font style="vertical-align: inherit;">deixamos o corpo da mensagem em branco e, na barra de endere√ßo, precisamos apenas especificar o ID da configura√ß√£o criada para n√≥s, a fim de receber seu estado atual em resposta:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">" http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
    <span class="hljs-attr">"niddDownlinkDataTransfers"</span>: []<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excluindo uma configura√ß√£o no SCEF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem e o √∫ltimo - excluiremos a configura√ß√£o criada por n√≥s. </font><font style="vertical-align: inherit;">Para fazer isso, use a mesma barra de endere√ßo da configura√ß√£o atual, mas altere-a para DELETE:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/w_/bt/n5/w_btn5pki3qerymozmgnub-f4ug.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em resposta, receberemos:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">" &lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">" notificationDestination"</span>: <span class="hljs-string">" http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"TERMINATED"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde na linha "status" veremos que a configura√ß√£o criada por n√≥s √© exclu√≠da.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais de uma disserta√ß√£o pode ser escrita sobre o tema do uso do SCEF, o t√≥pico √© extenso e em breve se tornar√° extremamente relevante para muitos dispositivos M2M em todas as √°reas, e especialmente para a Internet das coisas. </font><font style="vertical-align: inherit;">A principal coisa que eu queria transmitir a voc√™ era como come√ßar a trabalhar com o NIDD e o SCEF imediatamente, para que voc√™ possa descobrir por conta pr√≥pria. </font><font style="vertical-align: inherit;">Mas tamb√©m estou sempre feliz em ajud√°-lo: support@simcom.com (marcado para a Equipe RUS). Na carta, voc√™ deve indicar seus detalhes de contato e algumas palavras sobre seu projeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos artigos a seguir, analisaremos cuidadosamente outros aspectos do trabalho com m√≥dulos celulares e voc√™ escrever√° nos coment√°rios qual t√≥pico ser√° do seu interesse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero agradecer especialmente a Sergey Novikov, especialista s√™nior de solu√ß√µes convergentes e servi√ßos de multim√≠dia.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sanov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) do MTS pela assist√™ncia inestim√°vel na prepara√ß√£o do artigo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fontes utilizadas</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NB-IoT: como funciona? </font><font style="vertical-align: inherit;">Parte 3: SCEF - uma √∫nica janela de acesso aos servi√ßos do operador </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ETSI TS 129 122</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt489594/index.html">Framework vs Platform: qual a diferen√ßa?</a></li>
<li><a href="../pt489596/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel n¬∫ 334 (de 17 a 23 de fevereiro)</a></li>
<li><a href="../pt489600/index.html">GDC-2020: o que esperar de uma das maiores exposi√ß√µes de desenvolvimento de jogos</a></li>
<li><a href="../pt489602/index.html">Pr√©-renderizador em tela 2D</a></li>
<li><a href="../pt489604/index.html">Como eu, l√≠der de equipe, avalio projetos</a></li>
<li><a href="../pt489610/index.html">Dom√≥tica completa em um novo pr√©dio</a></li>
<li><a href="../pt489612/index.html">Confer√™ncia DEFCON 27. Duplica√ß√£o de chaves mec√¢nicas com acesso limitado. Parte 2</a></li>
<li><a href="../pt489614/index.html">Marca√ß√£o de res√≠duos de cal√ßados em 1C. Resolvendo o problema de digitalizar e fazer upload para o Honest Sign</a></li>
<li><a href="../pt489618/index.html">Precisamos desse formato? .. e algumas estat√≠sticas</a></li>
<li><a href="../pt489620/index.html">9 dicas de terminal do Windows por Scott Hanselman</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>