<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏽 👆🏾 🏘️ K1986BE1QI（air）用デバッグボードの開発 👐🏾 🧑🏼 🥁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="数年前、私はミランダー社のロシアのマイクロコントローラーに会いました。エンジニアが連邦ターゲットプログラムの最初の結果「電子部品ベースと無線電子機器の開発」を2008〜2015年に活発に議論したのは2013年でした。当時、K1986BE9xコントローラー（Cortex-M3コア）はすでにリリースされ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>K1986BE1QI（air）用デバッグボードの開発</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482716/"><img src="https://habrastorage.org/webt/xa/8d/4m/xa8d4m3m5jgwavt_34l7oj8abfi.jpeg" alt="デバッグボードMDB1986"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数年前、私はミランダー社のロシアのマイクロコントローラーに会いました。エンジニアが連邦ターゲットプログラムの最初の結果「電子部品ベースと無線電子機器の開発」を2008〜2015年に活発に議論したのは2013年でした。当時、K1986BE9xコントローラー（Cortex-M3コア）はすでにリリースされており、1986BE1Tコントローラー（Cortex-M1コア）が登場しました。プラスチックケースのLQFP-144にはK1986BE1QI（avia）と表示され、チップ自体にはMDR32F1QIと表示されていました。製造元のWebサイトには、航空機業界に固有のインターフェース（ARINC 429、MIL_STD_1553）があるため、「avia」というサフィックスが付いています。</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
驚いたことに、これらのコントローラーの配布時に、Milander社は、周辺機器を操作するためのデバッグキットとサブプログラムのライブラリを用意しましたが、「ライブラリの正確性に対する追加の保証と義務はありません」。このライブラリは、STMicroelectronicsの標準ペリフェラルライブラリに似ています。一般に、Cortex-Mコア上に構築されたすべてのARMコントローラには、多くの共通点があります。このため、新しいロシアのコントローラーとの知り合いは急速に進みました。ブランドのデバッグキットを購入したユーザーには、使用中にテクニカルサポートが提供されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/36/-5/cu/36-5cuhduqbdylqea5diodzri2o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロコントローラーのデバッグキット1986BE1T、©Milander</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、時間の経過とともに、新しいマイクロ回路とライブラリの「小児疾患」が出現し始めました。ファームウェアのテスト例は目に見える問題なく機能しましたが、大幅な変更により、クラッシュやエラーが発生しました。私の実践における最初の「飲み込み」は、CANコントローラの操作における原因不明の障害でした。 1年後、1986BE1T（空挺）初期監査コントローラーで、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MKIO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">（多重化情報交換チャネル）で</font></a><font style="vertical-align: inherit;">問題が検出されました</font><font style="vertical-align: inherit;">。一般に、2016年までのこれらのマイクロコントローラーのすべてのリビジョンは、使用が制限されていました。これらの問題を特定するには多くの時間と神経が必要でしたが、その確認は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーリスト（正誤表）で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不愉快な特徴は、デバッグボードではなく、シリアル生産が予定されているデバイスのプロトタイプボードでエラーを処理および処理する必要があったことです。 JTAGコネクタ以外には、通常何もありませんでした。ロジックアナライザーとの接続は困難で不便で、通常、LEDや画面はありませんでした。そのため、自分でデバッグボードを作ろうという思いが頭に浮かびました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方で、市場にはブランド化されたデバッグキットがあり、ZelenogradのLDM-Systemsの素晴らしいボードもありました。一方で、これらの製品の価格は混乱に陥り、拡張カードなしの基本機能は期待に応えません。はんだ付けされたコントローラーとピンコネクターを備えたボードは私には興味がありません。そして、より興味深いボードは高価です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6u/ob/ww/6uobww_tvc36dmyyhcmemgkedhg.jpeg"><br>
<i>  MILANDR LDM-HELPER-K1986BE1QI-FULL, © LDM Systems </i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
会社「Milander」の価格設定とマーケティングは独特です。したがって、一部のマイクロ回路の無料サンプルを入手することは可能ですが、これは法人のみが利用でき、官僚的な探求に関連しています。一般に、金属セラミックケースのマイクロ回路は、直接的な比喩的な意味で金です。たとえば、1986BE1Tのコントローラーのコストは、モスクワでは14,000〜24,000ルーブルです。 1645RU6Uスタティックメモリチップのコストは15,000ルーブルです。そして、すべての製品の価格のそのような順序。その結果、州からの注文がある専門の研究機関でさえ、そのような価格を節約し、恥ずかしがっています。民生用のプラスチックケース内のマイクロ回路は大幅に安価ですが、人気のあるサプライヤーからは入手できません。さらに、プラスチックのケースのマイクロ回路の品質は、「ゴールド」のものよりも悪いようです。例えば、フラッシュレイテンシパラメーターを大きくしないと、K1986BE1QIコントローラーを128 MHzで起動できませんでした。同時に、このコントローラーの温度は40〜50℃に上昇しました。しかし、コントローラ1986BE1T（ "ゴールド"）は、追加設定なしで128 MHzで起動され、低温のままでした。彼は本当に良いです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/hd/vm/hmhdvmzvhpvw7ujz09cw5ol49ou.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ゴールデン」マイクロコントローラー1986BE1T、（c）ミランダー</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プラスチックケースに入ったマイクロコントローラーは、まだ小売店でLDM Systemsで購入でき、すべての回路基板が自由に入手できることは幸運でした。悪い点は、コントローラーの写真のサイトに、これが2014年の4番目のリビジョンであることを示すマークがあることです。欠陥あり。私は長い間考えていました-買うか買わないか。それで数年が経ちました...</font></font><hr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバッグボードを作成するという考えは消えていません。徐々に、すべての要件を作成し、これらすべてを1つのボードに配置する方法を考えました。これにより、コンパクトで高価になりません。並行して、不足しているコンポーネントを中国人に注文しました。私は急いでいませんでした-私は自分のためにすべてをしました。中国のサプライヤーはずさんなことで有名です-必要なものをすべて手に入れるために、同じものを別の場所で注文する必要がありました。さらに、一部のメモリマイクロ回路は使用中であることが判明しました-明らかに壊れたデバイスからはんだ付けされています。これは後で私に戻ってきました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロコントローラーMilander K1986BE1QI（avia）を購入するのは簡単なことではありません。</font><font style="vertical-align: inherit;">同じチップアンドディップストアの[注文商品]セクションで、740ルーブルのK1986BE92QIのみを見つけましたが、私には適していませんでした。</font><font style="vertical-align: inherit;">唯一の選択肢は、LDMシステムで2,000ルーブルを購入することです。</font><font style="vertical-align: inherit;">どこにも代替品が見つからなかったので、何を買うか決めました。</font><font style="vertical-align: inherit;">驚いたことに、彼らは私に真新しい2018年12月リリースのコントローラー、リビジョン6+（1820）を売りました。</font><font style="vertical-align: inherit;">サイトにはまだ古い写真があり、記事の執筆時点ではコントローラはありません... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cr/p3/eu/crp3euoxhtfbkqo_pzet4vjencs.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K1986BE1QI（air）技術パッケージのマイクロコントローラ（c）著者による写真</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDB1986デバッグボードの主な技術的特徴は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> J-LinkおよびCMSIS-DAPと互換性のある組み込みデバッガープログラマー。</font></font></li>
<li>   4 (256k x 16, 10 ns);</li>
<li>    64, Winbond 25Q64FVSIG;</li>
<li>   RS-232   RTS  CTS;</li>
<li>     Ethernet, USB, CAN;</li>
<li>  7-  MAX7221;</li>
<li>       (MIL_STD_1553)  ARINC429;</li>
<li>  Everlight PT17-21C;</li>
<li>   ,      ;</li>
<li>    USB 5 ;</li>
<li>    100  80, </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
STM-Discoveryシリーズのボードが好きだったのは、組み込みのデバッガープログラマーST-Linkがあるからです。ブランドのST-LinkはSTMicroelectronicsコントローラーでのみ機能しますが、数年前にST-Linkでファームウェアを更新し、SEGGER J-Link OB（オンボード）デバッガーを取得することが可能になりました。法的には、このようなデバッガをSTMicroelectronicsボードでのみ使用することには制限がありますが、実際にはその可能性は制限されていません。したがって、J-Link OBがあれば、デバッグボード上に組み込みデバッガーを持つことができます。 LD2-Systems製品は、フラッシュのみが可能なCP2102コンバーター（Usb2Uart）を使用することに注意してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fq/yd/6z/fqyd6z1yxuwig0mw46du7l0pu8y.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロコントローラーSTM32F103C8T6、実際のそうではない、（c）撮影者</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、オリジナルのSTM32F103C8T6を購入する必要がありました。これは、専用ファームウェアがクローンで正しく機能しないためです。私はこの論文を疑い、中国の会社CKSのCS32F103C8T6コントローラーを試してみることにしました。コントローラー自体には不満はありませんが、ファームウェアST-Linkは機能しませんでした。 J-Linkは部分的に動作しました-USBデバイスが検出されましたが、プログラマーはその機能を実行せず、常に「欠陥がある」ことを思い出させました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/dp/zs/shdpzs1rrvs4ndpodfxgykmxoqk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元のコントローラー以外でデバッガーを操作するときのエラー</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれを落ち着かせずに、LEDが点滅するようにファームウェアを最初に作成し、次にJTAGプロトコルを使用してIDCODE要求を実装しました。</font><font style="vertical-align: inherit;">私がディスカバリーボードに置いていたST-LinkプログラマーとST-LinkユーティリティプログラムはCS32F103C8T6を問題なくフラッシュしていたので、ボードが機能していることを確認しました。</font><font style="vertical-align: inherit;">嬉しいことに、ターゲットコントローラーK1986BE1QI（avia）はTDOライン経由でIDCODEを陽気に発行しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mg/cd/6b/mgcd6bodfiolhoncf0dqpy_ztyi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDCODE応答がエンコードされたTDO信号線のオシログラム、（c）作成者による写真</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ls/9b/hk/ls9bhkuow-fz1gir-e48kwyld2i.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SWDポートは、デバッガ自体のデバッグとIDCODEチェックに便利でし</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
た</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMSIS-DAP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバッガ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">（デバッグアクセスポート）</font></a><font style="vertical-align: inherit;">にはバリアントがありました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ARMのソースコードからプロジェクトをアセンブルすることは簡単なことではありません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X893</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それからもう一度DAP42を試しました。残念ながら、Keil uVisionは電話を切り、彼らとの協力を望んでいませんでした。その結果、デバッガーチップを独自のSTM32F103C8T6に交換しましたが、この問題には戻れません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qd/ry/fs/qdryfsbagp3hggtvmrl0tiym-dg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J-Link STLink V2組み込みデバッガーの正常な動作</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
将来のデバッグボードのすべての主要コンポーネントが利用可能になったとき、私はEagle CADに登り、それらが要素ライブラリーにないことに気付きました。どこにも行きません-彼らは自分でそれらを描く必要がありました。同時に、メモリのフットプリント、イーサネット用のHanRunコネクタ、抵抗とコンデンサのフレームを追加しました。プロジェクトファイルとコンポーネントライブラリは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、GitHubにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/44/jy/hx44jyp0pkskpjgb1zh-1tf6hfu.png"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバッグボードMDB1986の回路図</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードは、USBポートから取得した5ボルトのDC電源から給電されます。ボードには2つのUSB Type-Bポートがあります。 1つはプログラマー用、2つ目はK1986BE1QIコントローラー用です。手数料は、これらのソースのいずれかから、または同時に両方で機能します。最も単純な負荷制御と電力線の保護はショットキーダイオードに実装されています。図では、これらは要素D2とD3（SS24）です。また、図では、500mAでの自己回復ヒューズF1およびF2を確認できます。 USBポートの信号ラインは、USBLC6-2SC6ダイオードアセンブリによって保護されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ST-Linkデバッガープログラマー回路は多くの人に知られています。STM32-Discoveryボードやその他のソースのドキュメントに記載されています。 ST-Link / J-Link-OB / DAPクローン（オプション）の初期ファームウェアのために、SWDIO（PA13）、SWCLK（PA14）、GNDのラインを引き出しました。多くの人がファームウェアにUARTを使用しており、BOOTジャンパーをプルする必要があります。しかし、SWDは私にとってより便利です。さらに、このプロトコルはデバッグを可能にします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードのほとんどすべてのコンポーネントは、電圧レギュレータAMS1117-3.3から供給される3.3ボルトで給電されます。電磁干渉や突入電流を抑えるために、BLM31PGシリーズのコンデンサやチョークからのLCフィルターを使用しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、7セグメントディスプレイMAX7221のドライバーについても言及します。仕様によれば、推奨電源は4〜5.5ボルトで、高信号レベル（論理ユニット）は少なくとも3.5 V（0.7 x VCC）で、5 V電源を使用します。 K1986BE1QIコントローラー（avia）の場合、論理ユニットの出力は2.8〜3.3Vの電圧に対応します。明らかに、通常の動作を妨害する可能性のある信号レベルの不一致があります。 MAX7221に4Vから電力を供給し、信号レベルを2.8V（0.7 x 4 = 2.8）に下げることにしました。このため、D4ダイオード（RS1AまたはFR103）がドライバー電源と直列に取り付けられます。総電圧降下は0.9V（ショットキーダイオード0.3Vおよびダイオード0.6V）で、すべてが機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
K1986BE1QIマイクロコントローラー（空気）のほとんどのポートは、最大5Vの信号に対応しています。したがって、同じく5Vで動作するMCP2551 CANトランシーバを使用しても問題は発生しません。 MAX3232チップは図ではRS-232トランシーバーとして示されていますが、実際にはTexas InstrumentsのSN65C3232Dを使用しました。 3.3Vで動作し、最大1Mbit / sの速度を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードには4つの水晶振動子があり、1つはデバッガー（8 MHz）用、3つはターゲットマイクロコントローラーK1986BE1QI（avia）用で、値は32.768 kHz、16 MHz、25 MHzです。これらは必要なコンポーネントです。内蔵RCジェネレーターのパラメーターは、6〜10 MHzの広い範囲にあります。統合イーサネットコントローラの動作には、25 MHzの周波数が必要です。何らかの理由で（おそらく誤って）Milanderのサイトでは、プラスチックケースにイーサネットがないことが示されています。しかし、仕様と事実に依存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独自のデバッグボードを作成する重要な動機は、基本的にパラレルポートである外部システムバスEBC（外部バスコントローラー）を操作できることでした。マイクロコントローラK1986BE1QI（avia）を使用すると、ADC、FPGAなどの外部メモリチップや周辺機器を接続して操作できます。外部システムバスの機能は非常に大きく、8ビット、16ビット、32ビットのスタティックRAM、ROM、NANDフラッシュで作業できます。 32ビットのデータを読み書きするために、コントローラーは16ビット回路に対して2つの対応する操作を自動的に実行でき、8ビット-4つの操作に対しても実行できます。明らかに、32ビットI / O操作は、32ビットデータバスで最速になります。欠点には、プログラムが32ビットデータで動作する必要があること、ボードでは、32トラックを舗装する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/sf/n8/ohsfn8vpr98krnms8rohx6l-bjs.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用されているスタティックRAMのチップ（どちらが不良かを推測）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
バランスのとれた解決策は、16ビットのメモリチップを使用することです。 Integrated Silicon Solutions Inc.を持っています。 （ISSI IS61LV25616AL、16 x 256k、10 ns、3.3V）。もちろん、Milander社には独自の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">1645RUシリーズ</font></a><font style="vertical-align: inherit;">スタティックメモリ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チップがあります。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、それらは高すぎてアクセスできません。</font><font style="vertical-align: inherit;">または、Samsung K6R4016V1Dピン互換性があります。</font><font style="vertical-align: inherit;">以前に、私はマイクロ回路が使用中であることが判明し、最初にインストールしたインスタンスが15番目のデータ行に障害と無秩序な値を与えたと述べました。</font><font style="vertical-align: inherit;">ハードウェアのエラーを探すのに数日かかったし、壊れたチップを動作するチップに交換したときの満足感も大きかった。</font><font style="vertical-align: inherit;">いずれにせよ、外部メモリを操作する速度は遅いです。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部バスとスタンドアロンモード</font></font></b><div class="spoiler_text"> 19861QI ()    StandAlone,         Ethernet   (MIL_STD_1553)   ,      , ..  .       ,    Ethernet / .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接続図は次のとおりです。 </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCUデータバス（D0-D15）=&gt; SRAM（I / O0-I / O15）、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCUアドレスバス（A1-A18）=&gt; SRAM（A0-A17）、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCU制御（nWR、nRD、PortC2）=&gt; SRAM（WE、OE、CE）、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SRAM（UB、LB）は、抵抗器を介して接続または接地されます。</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CEラインは抵抗を介して電源にプルアップされており、MCUバイト選択用のピン（BE0〜BE3）は使用されていません。</font><font style="vertical-align: inherit;">スポイラーの下で、ポートと外部バスコントローラーの初期化コードを引用します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポートおよびEBCコントローラー（外部バスコントローラー）の初期化</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">void SRAM_Init (void)<font></font>
{<font></font>
	EBC_InitTypeDef          EBC_InitStruct = { 0 };<font></font>
	EBC_MemRegionInitTypeDef EBC_MemRegionInitStruct = { 0 };<font></font>
	PORT_InitTypeDef         initStruct = { 0 };<font></font>
<font></font>
	RST_CLK_PCLKcmd (RST_CLK_PCLK_EBC, ENABLE);<font></font>
<font></font>
	PORT_StructInit (&amp;initStruct);<font></font>
	//--------------------------------------------//<font></font>
	// DATA PA0..PA15 (D0..D15)                   //<font></font>
	//--------------------------------------------//<font></font>
	initStruct.PORT_MODE      = PORT_MODE_DIGITAL;<font></font>
	initStruct.PORT_PD_SHM    = PORT_PD_SHM_ON;<font></font>
	initStruct.PORT_SPEED     = PORT_SPEED_FAST;<font></font>
	initStruct.PORT_FUNC      = PORT_FUNC_MAIN;<font></font>
	initStruct.PORT_Pin       = PORT_Pin_All;<font></font>
	PORT_Init (MDR_PORTA, &amp;initStruct);	<font></font>
	//--------------------------------------------//<font></font>
	// Address PF3-PF15 (A0..A12), A0 - not used. //<font></font>
	//--------------------------------------------//<font></font>
	initStruct.PORT_FUNC      = PORT_FUNC_ALTER;<font></font>
	initStruct.PORT_Pin       = PORT_Pin_4  | PORT_Pin_5  |<font></font>
	                            PORT_Pin_6  | PORT_Pin_7  |<font></font>
	                            PORT_Pin_8  | PORT_Pin_9  |<font></font>
	                            PORT_Pin_10 | PORT_Pin_11 |<font></font>
	                            PORT_Pin_12 | PORT_Pin_13 |<font></font>
	                            PORT_Pin_14 | PORT_Pin_15;<font></font>
	PORT_Init (MDR_PORTF, &amp;initStruct);	<font></font>
	//--------------------------------------------//<font></font>
	// Address PD3..PD0 (A13..A16)                //<font></font>
	//--------------------------------------------//<font></font>
	initStruct.PORT_FUNC      = PORT_FUNC_OVERRID;<font></font>
	initStruct.PORT_Pin       = PORT_Pin_0 | PORT_Pin_1 |<font></font>
	                            PORT_Pin_2 | PORT_Pin_3;<font></font>
	PORT_Init (MDR_PORTD, &amp;initStruct);	<font></font>
	//--------------------------------------------//<font></font>
	// Address PE3, PE4 (A17, A18)                //<font></font>
	//--------------------------------------------//<font></font>
	initStruct.PORT_FUNC      = PORT_FUNC_ALTER;<font></font>
	initStruct.PORT_Pin       = PORT_Pin_3 | PORT_Pin_4;<font></font>
	PORT_Init (MDR_PORTE, &amp;initStruct);	<font></font>
	//--------------------------------------------//<font></font>
	// Control PC0,PC1 (nWE,nOE)                  //<font></font>
	//--------------------------------------------//<font></font>
	initStruct.PORT_FUNC      = PORT_FUNC_MAIN;<font></font>
	initStruct.PORT_Pin       = PORT_Pin_0 | PORT_Pin_1;<font></font>
	PORT_Init (MDR_PORTC, &amp;initStruct);	<font></font>
	//--------------------------------------------//<font></font>
	// Control PC2 (nCE)                          //<font></font>
	//--------------------------------------------//<font></font>
	initStruct.PORT_PD        = PORT_PD_DRIVER;<font></font>
	initStruct.PORT_OE        = PORT_OE_OUT;<font></font>
	initStruct.PORT_FUNC      = PORT_FUNC_PORT;<font></font>
	initStruct.PORT_Pin       = MDB_SRAM_CE;<font></font>
	PORT_Init (MDR_PORTC, &amp;initStruct);	<font></font>
<font></font>
	//--------------------------------------------//<font></font>
	// Initialize EBC controler                   //<font></font>
	//--------------------------------------------//<font></font>
	EBC_DeInit();<font></font>
	EBC_StructInit(&amp;EBC_InitStruct);<font></font>
	EBC_InitStruct.EBC_Mode             = EBC_MODE_RAM;<font></font>
	EBC_InitStruct.EBC_WaitState        = EBC_WAIT_STATE_3HCLK;<font></font>
	EBC_InitStruct.EBC_DataAlignment    = EBC_EBC_DATA_ALIGNMENT_16;<font></font>
	EBC_Init(&amp;EBC_InitStruct);<font></font>
	<font></font>
	EBC_MemRegionStructInit(&amp;EBC_MemRegionInitStruct);<font></font>
	EBC_MemRegionInitStruct.WS_Active   = 2;<font></font>
	EBC_MemRegionInitStruct.WS_Setup    = EBC_WS_SETUP_CYCLE_1HCLK;<font></font>
	EBC_MemRegionInitStruct.WS_Hold     = EBC_WS_HOLD_CYCLE_1HCLK;<font></font>
	EBC_MemRegionInitStruct.Enable_Tune = ENABLE;<font></font>
	EBC_MemRegionInit (&amp;EBC_MemRegionInitStruct, EBC_MEM_REGION_60000000);<font></font>
	EBC_MemRegionCMD(EBC_MEM_REGION_60000000, ENABLE);<font></font>
<font></font>
	// Turn ON RAM (nCE)<font></font>
	PORT_ResetBits (MDR_PORTC, MDB_SRAM_CE);<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LQFP-144パッケージのマイクロコントローラーとTSOP-44パッケージのメモリには、接続されたピンが多数あり、プリント回路基板上で多くのスペースを占有します。経済学の分野で最適化問題を解決した経験があるため、これらのマイクロ回路を最初にボードに配置する必要があることは明らかでした。さまざまなソースで、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TopoR CAD（トポロジカルルーター）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に対する称賛を見てきました</font><font style="vertical-align: inherit;">。試用版をダウンロードして、ほとんどすべてのコンポーネントを削除した場合にのみ、プロジェクトをEagle CADからエクスポートできました。残念ながら、10要素のTopoRプログラムでさえ、私が理事会に参加するのに役立ちませんでした。まず、すべてのコンポーネントをコーナーに配置し、次にエッジに沿って配置しました。このオプションは私を満足させませんでした。そして、長い間、使い慣れたEagle CAD環境で手動モードでボードをトレースしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プリント基板の重要な要素はシルクスクリーン印刷です。デバッグボードには、電子コンポーネントの署名だけでなく、すべてのコネクタにも署名する必要があります。ボードの裏側に、コントローラーポートの機能（プライマリ、代替、オーバーライド、実際）を含むメモテーブルを配置しました。私は中国のPCBWayの有名なオフィスでプリント回路基板の製造を注文しました。品質が良いので賞賛しません。彼らはより少ない公差でより良いことができますが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、有償</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8q/gh/2w/8qgh2wsaofz5p2lat7gcoqc4km4.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">製造されたプリント回路基板MDB1986、（c）著者による写真</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1年に1〜2回はほとんどはんだ付けせず、はんだペーストが乾いてしまったため、40ワットのはんだごてとPOS-61はんだで「膝の上」にコンポーネントをはんだ付けする必要がありました。中国のCS32F103コントローラーを元のSTM32F103に変更し、メモリも交換する必要がありました。一般に、RS-232とCANの動作はまだ検証していませんが、結果は完全に適切です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/il/8v/-hil8vgd1228zqjk7ig090eurpq.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業中のデバッグボードMDB1986-輝きと熱、（c）著者による写真Milandraの</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Webサイトで、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">コントローラーを研究する</font></a><font style="vertical-align: inherit;">ための十分な</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">トレーニング資料を</font></a><font style="vertical-align: inherit;">見つけることができます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1986BE9シリーズ（Cortex-M3コア）ですが、マイクロコントローラーK1986BE1QI（avia）には何も表示されません。</font><font style="vertical-align: inherit;">そこで公開されている資料、大学のマニュアルや実験室の作業を検討した後、ロシアのコントローラーと協力するために全国的に人材が訓練されていることをうれしく思います。</font><font style="vertical-align: inherit;">ほとんどのトレーニング資料は、I / Oポート、タイマー、ADC、DAC、SPI、UARTを使用するために準備されています。</font><font style="vertical-align: inherit;">異なるIDE開発環境（Keil、IAR、CodeMaster）が使用されます。</font><font style="vertical-align: inherit;">CMSISレジスタを使用してプログラムする場所と、MDRライブラリを使用する場所。</font><font style="vertical-align: inherit;">実用的なプログラマーからの多くの記事が含まれて</font><font style="vertical-align: inherit;">いる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start Milandr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースについて言及する必要が</font><font style="vertical-align: inherit;">あります。</font><font style="vertical-align: inherit;">そしてもちろん、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Milanderフォーラム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も忘れて</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">なりません</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミランダーの思想</font></font></b><div class="spoiler_text">   ,      «»   .    , , 198681  «»   SpaceWire   (    1986BE1 , ,    ),  ..   ,         .             .  ,        ,     ,     (. approbatio — , )             .            .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が開発したデバッグボードはだれでも、教育プロセスで繰り返し、変更して使用できます。</font><font style="vertical-align: inherit;">まずは自分でボードを作りましたが、結構良かったので</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みんなでシェアすることにしました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
K1986BE1QI（avia）は、大学で学生の教育に使用できる独自のインターフェースを備えた非常に興味深いコントローラーです。</font><font style="vertical-align: inherit;">コントローラで検出されたエラーを修正し、認証テストに合格すると、コントローラは文字通りの意味で飛ぶと思います！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja482704/index.html">GoサービスのRedisキャッシュ同期</a></li>
<li><a href="../ja482706/index.html">1Cプラットフォームでの並列会計RAS + IFRSの実装に関する推奨事項</a></li>
<li><a href="../ja482708/index.html">コードベースの幸福に必要な企業文化の1つの特徴</a></li>
<li><a href="../ja482712/index.html">骨董品：ソニーMZ-1または生産に入ったプロトタイプの物語</a></li>
<li><a href="../ja482714/index.html">最も単純なインターネットラジオコラム「コディ」または「ラズベリー」レンガの救出</a></li>
<li><a href="../ja482718/index.html">プロジェクトの終わりとしての逆ピラミッド</a></li>
<li><a href="../ja482722/index.html">幻想的な物語「Project C. Vanity of Vanities」（10分）</a></li>
<li><a href="../ja482726/index.html">モバイルデベロッパー向けの興味深い資料のダイジェスト＃328（12月23〜29日）</a></li>
<li><a href="../ja482728/index.html">Jpeg。圧縮アルゴリズム</a></li>
<li><a href="../ja482730/index.html">休日の投票</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>