<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍪 🐙 🎅🏻 Metode untuk mengoptimalkan kueri LINQ di C # .NET 🛄 🛄 🥊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="pengantar
 Pada artikel ini kami membahas beberapa teknik optimasi LINQ-inquiry . 
 Berikut adalah beberapa pendekatan optimasi kode yang terkait deng...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Metode untuk mengoptimalkan kueri LINQ di C # .NET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489226/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami membahas beberapa teknik optimasi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LINQ-inquiry</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah beberapa pendekatan optimasi kode yang terkait dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permintaan LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diketahui bahwa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Language-Integrated Query) adalah bahasa yang sederhana dan nyaman untuk menanyakan sumber data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LINQ to SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah teknologi akses data dalam DBMS. Ini adalah alat yang ampuh untuk bekerja dengan data, di mana kueri dibangun melalui bahasa deklaratif, yang kemudian akan dikonversi menjadi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri SQL oleh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> platform dan dikirim ke server database yang sudah siap untuk dieksekusi. Dalam kasus kami, yang kami maksud dengan DBMS adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS SQL Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak dikonversi ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri SQL yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditulis secara optimal yang dapat ditulis </font><font style="vertical-align: inherit;">oleh DBA berpengalaman dengan semua nuansa mengoptimalkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koneksi optimal ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GABUNG</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dan penyaringan hasil ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DI MANA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banyak nuansa dalam penggunaan senyawa dan kondisi kelompok</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banyak variasi dalam mengganti kondisi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXISTS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NOT IN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , &lt;&gt; dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXISTS</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caching hasil antara melalui tabel sementara, CTE, variabel tabel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan klausa ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OPTION</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dengan instruksi dan petunjuk tabel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DENGAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (...)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penggunaan tampilan indeks, sebagai salah satu cara untuk menyingkirkan pembacaan data yang berlebihan dalam sampel</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hambatan kinerja utama dari </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri SQL yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dihasilkan </font><font style="vertical-align: inherit;">saat menyusun </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konsolidasi seluruh mekanisme pemilihan data dalam satu permintaan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">duplikasi blok kode yang identik, yang pada akhirnya mengarah ke beberapa pembacaan data tambahan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kelompok kondisi multikomponen (logis "dan" dan "atau") - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATAU</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , menggabungkan dalam kondisi yang sulit, mengarah pada fakta bahwa pengoptimal, memiliki indeks nonclustered yang sesuai, oleh bidang yang diperlukan, akhirnya mulai memindai dengan indeks klaster ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEX SCAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) berdasarkan grup kondisi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bersarang mendalam dari subqueries membuatnya sangat bermasalah untuk mem-parsing </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pernyataan SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan mem-parsing rencana kueri dari pengembang dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DBA</font></font></b></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode optimasi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kami beralih langsung ke metode optimasi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Pengindeksan tambahan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang terbaik adalah mempertimbangkan filter pada tabel sampel utama, karena sangat sering seluruh permintaan dibangun di sekitar satu atau dua tabel utama (aplikasi-orang-operasi) dan dengan serangkaian kondisi standar (IsClosed, Cancelled, Diaktifkan, Status). Penting bagi sampel yang diidentifikasi untuk membuat indeks yang sesuai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusi ini masuk akal ketika memilih dari bidang-bidang ini secara signifikan membatasi set yang dikembalikan ke kueri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, kami memiliki 500.000 aplikasi. Namun, hanya ada 2.000 entri aktif. Kemudian indeks yang dipilih dengan benar akan menyelamatkan kita dari </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEX SCAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada tabel besar dan akan memungkinkan kita untuk dengan cepat memilih data melalui indeks yang tidak berkerumun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kurangnya indeks juga dapat dideteksi melalui permintaan untuk menguraikan rencana kueri atau mengumpulkan statistik untuk tampilan sistem</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS SQL Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sys.dm_db_missing_index_groups</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sys.dm_db_missing_index_group_stats</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sys.dm_db_missing_index_details</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua data tampilan berisi informasi tentang indeks yang hilang, dengan pengecualian indeks spasial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, indeks dan caching seringkali merupakan metode untuk menangani efek dari </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">query LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditulis dengan buruk </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang ditunjukkan oleh praktik kehidupan yang keras untuk bisnis, seringkali penting untuk menerapkan fitur bisnis pada tanggal tertentu. Dan oleh karena itu, seringkali pertanyaan yang banyak ditelusuri dengan caching. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini sebagian dibenarkan, karena pengguna tidak selalu membutuhkan data terbaru dan tingkat respons antarmuka pengguna yang dapat diterima terjadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekatan ini memungkinkan Anda untuk menyelesaikan kebutuhan bisnis, tetapi pada akhirnya mengurangi efisiensi sistem informasi, hanya menunda solusi dari masalah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu juga diingat bahwa dalam proses pencarian yang diperlukan untuk menambahkan indeks baru, proposal </font><font style="vertical-align: inherit;">optimasi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mungkin salah, termasuk dalam kondisi berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika indeks dengan set bidang yang sama sudah ada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika bidang dalam tabel tidak dapat diindeks karena pembatasan pengindeksan (lebih lanjut tentang ini dijelaskan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Menggabungkan atribut menjadi satu atribut baru</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terkadang beberapa bidang dari tabel yang sama di mana sekelompok kondisi terjadi dapat digantikan oleh pengenalan satu bidang baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini terutama berlaku untuk bidang negara, yang menurut jenisnya biasanya bitwise atau integer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsClosed = 0 AND Cancelled = 0 AND Diaktifkan = 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diganti oleh </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status = 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda memasukkan Status atribut bilangan bulat, yang disediakan dengan mengisi status ini di tabel. </font><font style="vertical-align: inherit;">Langkah selanjutnya adalah mengindeks atribut baru ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah solusi mendasar untuk masalah kinerja, karena kami meminta data tanpa perhitungan yang tidak perlu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Materialisasi pengiriman</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak bisa langsung menggunakan tabel temporer, CTE, dan variabel tabel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, ada cara lain untuk mengoptimalkan kasus ini - ini adalah tampilan yang diindeks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekelompok kondisi (dari contoh di atas) </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsClosed = 0 AND Cancelled = 0 AND Enabled = 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (atau serangkaian kondisi serupa lainnya) menjadi pilihan yang baik untuk menggunakannya dalam tampilan yang diindeks, menyimpan sebagian kecil data dari kumpulan besar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ada sejumlah batasan saat mewujudkan tampilan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan subqueries, klausa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXISTS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> harus diganti menggunakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JOIN</font></font></b></li>
<li><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">Tidak dapat</font></b><font style="vertical-align: inherit;"> menggunakan </font><b><font style="vertical-align: inherit;">klausa </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNION</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNION ALL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXCEPTION</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INTERSECT</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda tidak dapat menggunakan petunjuk meja dan klausa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OPTION</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak ada kemampuan untuk bekerja dengan siklus</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak mungkin menampilkan data dalam satu tampilan dari tabel yang berbeda</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penting untuk diingat bahwa manfaat nyata menggunakan tampilan indeks sebenarnya hanya dapat diperoleh dengan mengindeksnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ketika menggunakan tampilan, indeks ini mungkin tidak digunakan, dan untuk menggunakannya secara eksplisit, Anda harus menentukan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WITH (NOEXPAND)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena </font><font style="vertical-align: inherit;">tidak mungkin untuk menentukan petunjuk tabel </font><font style="vertical-align: inherit;">dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jadi Anda harus membuat representasi lain - "pembungkus" dari formulir berikut:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> _ <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> MAT_VIEW <span class="hljs-keyword">WITH</span> (NOEXPAND);
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Menggunakan fungsi tabel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seringkali dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> blok subquery besar atau blok yang menggunakan representasi dengan struktur kompleks membentuk kueri akhir dengan struktur eksekusi yang sangat kompleks dan tidak optimal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manfaat utama menggunakan fungsi tabel dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemampuan, seperti dalam kasus tampilan, untuk menggunakan dan menentukan sebagai objek, tetapi Anda dapat melewati serangkaian parameter input: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DARI FUNGSI (@ param1, @ param2 ...)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
pada akhirnya, Anda dapat mencapai pengambilan sampel data yang fleksibel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat menggunakan fungsi tabel, tidak ada batasan yang kuat seperti dalam kasus tampilan indeks yang dijelaskan di atas:</font></font><br>
<br>
<ol>
<li> :<br>
 <b>LINQ</b>             .<br>
     .<br>
        ,          </li>
<li>  ,     , :<br>
<br>
<ul>
<li>    (   )</li>
<li>     </li>
<li> <b>UNION</b>  <b>EXISTS</b></li>
</ul></li>
</ol><br>
</li>
<li> <b>OPTION</b>  ,       <b>OPTION(MAXDOP N)</b>,    . :<br>
<br>
<ul>
<li>      <b>OPTION (RECOMPILE)</b></li>
<li>         ,    <b>OPTION (FORCE ORDER)</b></li>
</ul><br>
   <b>OPTION</b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>.<br>
</li>
<li>      :<br>
        (     ),         .<br>
,  ,     <b>WHERE</b>    <b>(a, b, c)</b>.<br>
<br>
       <b>a = 0 and b = 0</b>.<br>
<br>
,    <b>c</b>  .<br>
<br>
  <b>a = 0 and b = 0</b>          ,    <b></b>      .<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini fungsi tabel mungkin merupakan opsi yang lebih baik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, fungsi tabel lebih dapat diprediksi dan konstan dalam waktu eksekusi.</font></font><br>
</li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contohnya</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita pertimbangkan contoh implementasi menggunakan contoh dari database Pertanyaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada kueri </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang menggabungkan beberapa tabel dan menggunakan satu tampilan (OperativeQuestions), yang memverifikasi melalui email afiliasi (melalui </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXISTS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dari "Permintaan Aktif" ([Pertanyaan Operatif]):</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permintaan No. 1</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">(@p__linq__0 nvarchar(4000))<span class="hljs-keyword">SELECT</span>
<span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> [C1],<font></font>
[Extent1].[<span class="hljs-keyword">Id</span>] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Id</span>],<font></font>
[Join2].[Object_Id] <span class="hljs-keyword">AS</span> [Object_Id],<font></font>
[Join2].[ObjectType_Id] <span class="hljs-keyword">AS</span> [ObjectType_Id],<font></font>
[Join2].[<span class="hljs-keyword">Name</span>] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Name</span>],<font></font>
[Join2].[ExternalId] <span class="hljs-keyword">AS</span> [ExternalId]
<span class="hljs-keyword">FROM</span> [dbo].[Questions] <span class="hljs-keyword">AS</span> [Extent1]
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (<span class="hljs-keyword">SELECT</span> [Extent2].[Object_Id] <span class="hljs-keyword">AS</span> [Object_Id],<font></font>
[Extent2].[Question_Id] <span class="hljs-keyword">AS</span> [Question_Id], [Extent3].[ExternalId] <span class="hljs-keyword">AS</span> [ExternalId],<font></font>
[Extent3].[ObjectType_Id] <span class="hljs-keyword">AS</span> [ObjectType_Id], [Extent4].[<span class="hljs-keyword">Name</span>] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Name</span>]
<span class="hljs-keyword">FROM</span> [dbo].[ObjectQuestions] <span class="hljs-keyword">AS</span> [Extent2]
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> [dbo].[Objects] <span class="hljs-keyword">AS</span> [Extent3] <span class="hljs-keyword">ON</span> [Extent2].[Object_Id] = [Extent3].[<span class="hljs-keyword">Id</span>]
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> [dbo].[ObjectTypes] <span class="hljs-keyword">AS</span> [Extent4] 
<span class="hljs-keyword">ON</span> [Extent3].[ObjectType_Id] = [Extent4].[<span class="hljs-keyword">Id</span>] ) <span class="hljs-keyword">AS</span> [Join2] 
<span class="hljs-keyword">ON</span> [Extent1].[<span class="hljs-keyword">Id</span>] = [Join2].[Question_Id]
<span class="hljs-keyword">WHERE</span> ([Extent1].[AnswerId] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">AND</span> (<span class="hljs-number">0</span> = [Extent1].[<span class="hljs-keyword">Exp</span>]) <span class="hljs-keyword">AND</span> ( <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span>
<span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> [C1]
<span class="hljs-keyword">FROM</span> [dbo].[OperativeQuestions] <span class="hljs-keyword">AS</span> [Extent5]
<span class="hljs-keyword">WHERE</span> (([Extent5].[Email] = @p__linq__0) <span class="hljs-keyword">OR</span> (([Extent5].[Email] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>) 
<span class="hljs-keyword">AND</span> (@p__linq__0 <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>))) <span class="hljs-keyword">AND</span> ([Extent5].[<span class="hljs-keyword">Id</span>] = [Extent1].[<span class="hljs-keyword">Id</span>])<font></font>
));<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pandangan memiliki struktur yang agak rumit: memiliki subquery joins dan penggunaan sorting </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DISTINCT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dalam kasus umum adalah operasi yang agak intensif sumber daya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilihan sekitar sepuluh ribu catatan dari OperativeQuestions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah utama dari kueri ini adalah bahwa untuk catatan dari kueri eksternal, subquery internal dilakukan pada tampilan [OperativeQuestions], yang seharusnya membatasi sampel output (melalui </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXISTS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) hingga ratusan catatan </font><font style="vertical-align: inherit;">untuk [Email] = @ p__linq__0 </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan mungkin tampak bahwa subquery harus sekali menghitung catatan dengan [Email] = @ p__linq__0, dan kemudian beberapa dari ratusan catatan ini harus bergabung dengan Pertanyaan ID c, dan kueri akan cepat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan, semua tabel terhubung secara seri: Id Pertanyaan dan Id dari OperativeQuestions diperiksa kepatuhannya, dan Email difilter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan, permintaan berfungsi dengan semua puluhan ribu catatan OperativeQuestions, dan Anda hanya perlu data yang menarik di Email. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teks tampilan OperativeQuestions:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permintaan No. 2</font></font></b><div class="spoiler_text"><pre><code class="sql hljs"> 
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[OperativeQuestions]
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> Q.Id, USR.email <span class="hljs-keyword">AS</span> Email
<span class="hljs-keyword">FROM</span>            [dbo].Questions <span class="hljs-keyword">AS</span> Q <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
                         [dbo].ProcessUserAccesses <span class="hljs-keyword">AS</span> BPU <span class="hljs-keyword">ON</span> BPU.ProcessId = CQ.Process_Id 
<span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">APPLY</span>
                     (<span class="hljs-keyword">SELECT</span>   <span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> HasNoObjects
                      <span class="hljs-keyword">WHERE</span>   <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>
                                    (<span class="hljs-keyword">SELECT</span>   <span class="hljs-number">1</span>
                                     <span class="hljs-keyword">FROM</span>     [dbo].ObjectUserAccesses <span class="hljs-keyword">AS</span> BOU
                                     <span class="hljs-keyword">WHERE</span>   BOU.ProcessUserAccessId = BPU.[<span class="hljs-keyword">Id</span>] <span class="hljs-keyword">AND</span> BOU.[<span class="hljs-keyword">To</span>] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>)<font></font>
) <span class="hljs-keyword">AS</span> BO <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
                         [dbo].Users <span class="hljs-keyword">AS</span> USR <span class="hljs-keyword">ON</span> USR.Id = BPU.UserId
<span class="hljs-keyword">WHERE</span>        CQ.[<span class="hljs-keyword">Exp</span>] = <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> CQ.AnswerId <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">AND</span> BPU.[<span class="hljs-keyword">To</span>] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> 
<span class="hljs-keyword">AND</span> (BO.HasNoObjects = <span class="hljs-number">1</span> <span class="hljs-keyword">OR</span>
              <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span>   <span class="hljs-number">1</span>
                           <span class="hljs-keyword">FROM</span>   [dbo].ObjectUserAccesses <span class="hljs-keyword">AS</span> BOU <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
                                      [dbo].ObjectQuestions <span class="hljs-keyword">AS</span> QBO 
                                                  <span class="hljs-keyword">ON</span> QBO.[Object_Id] =BOU.ObjectId
                               <span class="hljs-keyword">WHERE</span>  BOU.ProcessUserAccessId = BPU.Id 
                               <span class="hljs-keyword">AND</span> BOU.[<span class="hljs-keyword">To</span>] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">AND</span> QBO.Question_Id = CQ.Id));
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Representasi pemetaan asli dalam DbContext (EF Core 2)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">public class QuestionsDbContext : DbContext<font></font>
{<font></font>
    //...<font></font>
    public DbQuery&lt;OperativeQuestion&gt; OperativeQuestions { get; set; }<font></font>
    //...<font></font>
    protected override void OnModelCreating(ModelBuilder modelBuilder)<font></font>
    {<font></font>
        modelBuilder.Query&lt;OperativeQuestion&gt;().ToView("OperativeQuestions");<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Query LINQ asli</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">var businessObjectsData = await context<font></font>
    .OperativeQuestions<font></font>
    .Where(x =&gt; x.Email == Email)<font></font>
    .Include(x =&gt; x.Question)<font></font>
    .Select(x =&gt; x.Question)<font></font>
    .SelectMany(x =&gt; x.ObjectQuestions,<font></font>
                (x, bo) =&gt; new<font></font>
                {<font></font>
                    Id = x.Id,<font></font>
                    ObjectId = bo.Object.Id,<font></font>
                    ObjectTypeId = bo.Object.ObjectType.Id,<font></font>
                    ObjectTypeName = bo.Object.ObjectType.Name,<font></font>
                    ObjectExternalId = bo.Object.ExternalId<font></font>
                })<font></font>
    .ToListAsync();<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus khusus ini, solusi untuk masalah ini dipertimbangkan tanpa perubahan infrastruktur, tanpa memperkenalkan tabel terpisah dengan hasil yang siap pakai ("Permintaan Aktif"), di mana suatu mekanisme akan diperlukan untuk mengisi data dan tetap memperbaruinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun ini adalah solusi yang baik, ada opsi lain untuk mengoptimalkan tugas ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tujuan utamanya adalah untuk me-cache entri oleh [Email] = @ p__linq__0 dari tampilan OperativeQuestions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memasukkan fungsi tabel [dbo]. [OperativeQuestionsUserMail] dalam database. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengirim Email sebagai parameter input, kami mendapatkan kembali tabel nilai:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permintaan No. 3</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> [dbo].[OperativeQuestionsUserMail]<font></font>
(<font></font>
    @Email  <span class="hljs-keyword">nvarchar</span>(<span class="hljs-number">4000</span>)<font></font>
)<font></font>
<span class="hljs-keyword">RETURNS</span>
@tbl <span class="hljs-keyword">TABLE</span><font></font>
(<font></font>
    [<span class="hljs-keyword">Id</span>]           uniqueidentifier,<font></font>
    [Email]      <span class="hljs-keyword">nvarchar</span>(<span class="hljs-number">4000</span>)<font></font>
)<font></font>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> @tbl ([<span class="hljs-keyword">Id</span>], [Email])
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">Id</span>, @Email
        <span class="hljs-keyword">FROM</span> [OperativeQuestions]  <span class="hljs-keyword">AS</span> [x] <span class="hljs-keyword">WHERE</span> [x].[Email] = @Email;<font></font>
     <font></font>
    RETURN;<font></font>
<span class="hljs-keyword">END</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini mengembalikan tabel nilai dengan struktur data yang telah ditentukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar kueri untuk OperativeQuestionsUserMail menjadi optimal, untuk memiliki rencana kueri yang optimal, diperlukan struktur yang ketat, dan bukan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KEMBALI MEJA SEBAGAI KEMBALI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, Permintaan 1 yang diinginkan dikonversi menjadi Permintaan 4:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permintaan No. 4</font></font></b><div class="spoiler_text"><pre><code class="sql hljs">(@p__linq__0 nvarchar(4000))<span class="hljs-keyword">SELECT</span>
<span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> [C1],<font></font>
[Extent1].[<span class="hljs-keyword">Id</span>] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Id</span>],<font></font>
[Join2].[Object_Id] <span class="hljs-keyword">AS</span> [Object_Id],<font></font>
[Join2].[ObjectType_Id] <span class="hljs-keyword">AS</span> [ObjectType_Id],<font></font>
[Join2].[<span class="hljs-keyword">Name</span>] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Name</span>],<font></font>
[Join2].[ExternalId] <span class="hljs-keyword">AS</span> [ExternalId]
<span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">Id</span>, Email <span class="hljs-keyword">FROM</span> [dbo].[OperativeQuestionsUserMail] (@p__linq__0)<font></font>
) <span class="hljs-keyword">AS</span> [Extent0]
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> [dbo].[Questions] <span class="hljs-keyword">AS</span> [Extent1] <span class="hljs-keyword">ON</span>([Extent0].Id=[Extent1].Id)
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (<span class="hljs-keyword">SELECT</span> [Extent2].[Object_Id] <span class="hljs-keyword">AS</span> [Object_Id], [Extent2].[Question_Id] <span class="hljs-keyword">AS</span> [Question_Id], [Extent3].[ExternalId] <span class="hljs-keyword">AS</span> [ExternalId], [Extent3].[ObjectType_Id] <span class="hljs-keyword">AS</span> [ObjectType_Id], [Extent4].[<span class="hljs-keyword">Name</span>] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Name</span>]
<span class="hljs-keyword">FROM</span> [dbo].[ObjectQuestions] <span class="hljs-keyword">AS</span> [Extent2]
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> [dbo].[Objects] <span class="hljs-keyword">AS</span> [Extent3] <span class="hljs-keyword">ON</span> [Extent2].[Object_Id] = [Extent3].[<span class="hljs-keyword">Id</span>]
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> [dbo].[ObjectTypes] <span class="hljs-keyword">AS</span> [Extent4] 
<span class="hljs-keyword">ON</span> [Extent3].[ObjectType_Id] = [Extent4].[<span class="hljs-keyword">Id</span>] ) <span class="hljs-keyword">AS</span> [Join2] 
<span class="hljs-keyword">ON</span> [Extent1].[<span class="hljs-keyword">Id</span>] = [Join2].[Question_Id]
<span class="hljs-keyword">WHERE</span> ([Extent1].[AnswerId] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">AND</span> (<span class="hljs-number">0</span> = [Extent1].[<span class="hljs-keyword">Exp</span>]);
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memetakan tampilan dan fungsi dalam DbContext (EF Core 2)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">public class QuestionsDbContext : DbContext<font></font>
{<font></font>
    //...<font></font>
    public DbQuery&lt;OperativeQuestion&gt; OperativeQuestions { get; set; }<font></font>
    //...<font></font>
    protected override void OnModelCreating(ModelBuilder modelBuilder)<font></font>
    {<font></font>
        modelBuilder.Query&lt;OperativeQuestion&gt;().ToView("OperativeQuestions");<font></font>
    }<font></font>
}<font></font>
 <font></font>
public static class FromSqlQueries<font></font>
{<font></font>
    public static IQueryable&lt;OperativeQuestion&gt; GetByUserEmail(this DbQuery&lt;OperativeQuestion&gt; source, string Email)<font></font>
        =&gt; source.FromSql($"SELECT Id, Email FROM [dbo].[OperativeQuestionsUserMail] ({Email})");<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kueri LINQ terakhir</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">var businessObjectsData = await context<font></font>
    .OperativeQuestions<font></font>
    .GetByUserEmail(Email)<font></font>
    .Include(x =&gt; x.Question)<font></font>
    .Select(x =&gt; x.Question)<font></font>
    .SelectMany(x =&gt; x.ObjectQuestions,<font></font>
                (x, bo) =&gt; new<font></font>
                {<font></font>
                    Id = x.Id,<font></font>
                    ObjectId = bo.Object.Id,<font></font>
                    ObjectTypeId = bo.Object.ObjectType.Id,<font></font>
                    ObjectTypeName = bo.Object.ObjectType.Name,<font></font>
                    ObjectExternalId = bo.Object.ExternalId<font></font>
                })<font></font>
    .ToListAsync();<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Urutan waktu eksekusi menurun dari 200-800 ms, menjadi 2-20 ms., Dll., Yaitu sepuluh kali lebih cepat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kita mengambil lebih banyak rata-rata, maka alih-alih 350 ms kita mendapat 8 ms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari plus yang jelas, kami juga mendapatkan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengurangan umum dalam beban bacaan,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengurangi kemungkinan memblokir secara signifikan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengurangan waktu pemblokiran rata-rata ke nilai yang dapat diterima</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Optimalisasi dan fine-tuning panggilan ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">database MS SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> melalui </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LINQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah masalah yang bisa diselesaikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam pekerjaan ini, perawatan dan konsistensi sangat penting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di awal proses:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perlu memeriksa data yang digunakan kueri (nilai, tipe data yang dipilih)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengindeks data ini dengan benar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">periksa kebenaran kondisi penghubung antara tabel</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada iterasi berikutnya, optimasi mengungkapkan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dasar permintaan dan filter permintaan utama</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengulangi blok permintaan serupa dan kondisi berpotongan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di SSMS atau GUI lain untuk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> itu sendiri dioptimalkan </font><font style="vertical-align: inherit;">(alokasi penyimpanan data perantara, membangun kueri yang dihasilkan menggunakan toko ini (mungkin ada beberapa))</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada tahap terakhir, dengan mengambil </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">query SQL yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dihasilkan sebagai dasar </font><font style="vertical-align: inherit;">, struktur </font><b><font style="vertical-align: inherit;">kueri LINQ</font></b><font style="vertical-align: inherit;"> dibangun kembali</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri LINQ yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dihasilkan </font><font style="vertical-align: inherit;">harus identik dalam struktur dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> optimal yang diidentifikasi </font><font style="vertical-align: inherit;">dari paragraf 3.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ucapan Terima Kasih</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih banyak kepada kolega </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jobgemws</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alex_ozr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk membantu dengan artikel ini.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id489206/index.html">Hancurkan cerita dengan Patroni, atau Cara menjatuhkan kluster PostgreSQL</a></li>
<li><a href="../id489210/index.html">Pengujian kinerja kode Linux dengan contoh-contoh</a></li>
<li><a href="../id489212/index.html">1C-Bitrix mencegah berhenti berlangganan buletin dengan persyaratan untuk mengirimkan data pribadi mereka</a></li>
<li><a href="../id489214/index.html">Pendekatan modern untuk menguji lokalisasi di iOS</a></li>
<li><a href="../id489218/index.html">Itu naif. Super: kode dan arsitektur gim sederhana</a></li>
<li><a href="../id489230/index.html">Apa itu kinerja aplikasi web?</a></li>
<li><a href="../id489232/index.html">Kembali ke Masa Depan Ponsel II</a></li>
<li><a href="../id489234/index.html">Bagaimana agar berhasil melewati segala pentest (saran buruk)</a></li>
<li><a href="../id489236/index.html">Spring: mencari konteks</a></li>
<li><a href="../id489240/index.html">Fitur konferensi regional. Mengapa seorang pembicara harus meninggalkan MKAD?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>