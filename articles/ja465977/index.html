<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💧 🎋 🌉 Cisco 200-125 CCNA v3.0のトレーニング。31日目。CDP、Syslog、NTP 🙂 👴 🤟🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日は、3つの概念について説明します。独自のCisco CDPプロトコル、Syslogシステムログ、およびNTPネットワークタイムプロトコルです。問題のトピックについても引き続き説明し、問題を診断するためのいくつかのツールを確認します。次に、SyslogとNTPを確認し、レッスンの最後でCDPとLL...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cisco 200-125 CCNA v3.0のトレーニング。31日目。CDP、Syslog、NTP</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/465977/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日は、3つの概念について説明します。独自のCisco CDPプロトコル、Syslogシステムログ、およびNTPネットワークタイムプロトコルです。問題のトピックについても引き続き説明し、問題を診断するためのいくつかのツールを確認します。次に、SyslogとNTPを確認し、レッスンの最後でCDPとLLDPについて説明します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のレッスンでは、トラブルシューティングの方法論について説明しました。次に、ネットワークの問題の解決に役立つ、オペレーティングシステムとシスコデバイスに組み込まれているいくつかのツールについて説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のツールはipconfigコマンドです。ほとんどの人がWindows 10を使用しているため、このOSの例を使用してこのコマンドを見ていきます。コンピューターのコマンドラインターミナルに移動してipconfigコマンドを入力すると、コンピューターで使用可能なすべてのネットワークインターフェイスの構成パラメーターを確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f6/-9/6l/f6-96lo5pw0zenpcqovymdfxcjw.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソフトウェア仮想インターフェイスイーサネットアダプターVPNといくつかのソフトウェアインターフェイスが表示されます。その数は、システムで使用可能なドライバーによって異なります。これが私のWi-FiワイヤレスLANアダプターです。これでインターネットに接続しました。WMwareNetwork WMnet1仮想アダプター上のデータは少し高い位置にあります。トンネルアダプターを以下に示します。つまり、VPNソフトウェアによってインストールされたすべてのアダプターがここに表示されます。</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CCNAコースのトピックでは、ワイヤレスWi-Fiアダプターとイーサネットアダプターの2つのアダプターについて知っている必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uq/tx/ek/uqtxekxqi20bmcytun7reeigss4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オフィスネットワークの場合、ワイヤレスアダプターの方が重要です。ユーザーから問題があった場合は、最初にipconfigコマンドを使用してデバイスのIPアドレスを確認する必要があります。このアドレスがDHCPアドレス範囲内にあるかどうかを確認する必要があります。おそらく、ユーザーが動的IPをオフにしてDHCPの一部ではない静的IPをオンにしたか、デバイスがIPアドレスを自動的に取得するように構成されていて、何らかの理由でDHCPサーバーに接続できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より完全な情報が必要な場合は、ipconfig / allコマンドを使用します。同じデータを受け取りますが、より詳細な形式で、アダプターブランド、DHCPパラメーター、リンクローカルアドレス、IPアドレス、サーバーリースの有効期間、デフォルトゲートウェイアドレスなどの説明が含まれます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/so/9f/h1/so9fh161ces0au1rr-7jbz00f5u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この情報を確認した結果、IPアドレスに問題がなく、インターフェース設定が問題の原因ではないことが判明した場合は、NSLookupなどの他の診断ツールを使用する必要があります。これは、コマンドラインからDNSシステムにアクセスできるユーティリティです。これで問題が解決しない場合は、pingを使用します。 ping 8.8.8.8コマンドを使用します。つまり、GoogleのパブリックDNSにpingします。 pingに成功した場合、接続はすべて正常であり、理由は他の場所で調べる必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pingが失敗した場合は、Trace Routeまたはtracertと呼ばれるツールを使用する必要があります。これは、特定のホストへのルートをトレースするWindowsコマンドです。コマンドラインでtracert 8.8.8.8と入力すると、最大30ノードのルートトレースでTTL = 1の値でpingが実行されます。ご覧のとおり、最初のノードは私のルーターであり、システムはDD-WRTファームウェアとIPアドレス192.168.1.1を示し、2番目のノードはプロバイダーのサーバーで、IPアドレス192.168.100.1を使用してインターネットに接続し、pingを実行します。他のノード上で、Googleサーバーに到達します。私たちの場合、14の希望が判明しましたが、たとえば、プロバイダー側​​で問題が発生した場合、ISPサーバーを特徴付ける3番目のノードの後に​​トレースが停止します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7i/qy/zy/7iqyzy7odxlbo85k9dtbk__eqou.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、トレースルートは、トラフィックのルートに沿って問題を特定するための優れたツールです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NSLookupとは何かを詳しく見てみましょう。これは、DNSサーバーについて話すコマンドです。 nslookupと入力すると、2行表示されます。デフォルトサーバーはDD-WRT、つまり私のルーターであり、そのアドレスは192.168.1.1です。 server 8.8.8.8コマンドで特定のDNSサーバーを指定すると、システムからその説明とIPアドレスが表示されます。この方法で、特定のDNSサーバーをチェックできます。同様に、たとえば</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.cisco.comと</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力すると、特定のドメインに関するデータを取得できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2c/hc/gc/2chcgcfg7mt1taavbtd_9qldsvs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、シスコでは2つのバージョンのIPアドレスを使用しています。google.comと入力すると、このサーバーで使用されている多くのIPアドレスが表示されます。これは巨大なサービスであり、1つのIPアドレスでは十分ではないほど多くの人がアクセスします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/_v/bq/v-_vbqbx-0xm4xs_xb5pp_ph8qa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インターネットが機能しているかどうかを知りたいときは、単にgoogle.comと入力するだけの冗談があります。 PCユーザーに加えて、Androidを実行しているスマートフォンの所有者は常にこのサービスにアクセスしているため、この会社のサーバーを通過するトラフィックは膨大です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、nslookupコマンドを使用すると、特定のドメイン名のIPアドレスを見つけることができます。上記のすべてのツールは問題を解決しませんが、それらを診断するのに役立ちます。 IT業界で実践すればするほど、これらのツールをより効果的に使用できるようになります。これは、実践と経験だけがネットワークの問題をすばやく診断して修正する方法を教えてくれるからです。練習では、コンピューターのネットワーク設定コンソールを一目で見て、問題が何であるかを理解する機会を得ます。したがって、ICND1のトピックの研究が完了した後、理論の習得した知識を適用できるように、実際の実験室の作業をサイトに掲載します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
syslogについて説明する前に、Cisco IOSオペレーティングシステムのTerminal Monitorコマンドについて説明します。 Packet Tracerプログラムに入ります（まだインストールしていない場合は、Network Academyに登録してこのプログラムをダウンロードできます）。2台のルーターを使用して、ケーブルで接続します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、グローバル構成モードに入り、これらのルーターを順番にセットアップして、R0およびR1という名前を付けます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/b_/rg/pcb_rg5syep3srml9bngkixaaku.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、R1設定で、enable password enableコマンドを入力してパスワードを設定し、ip add 10.1.1.2 255.255.255.0およびno shutコマンドを使用してg0 / 0インターフェイスを構成します。同様に、R0ルーターにIPアドレス10.1.1.1を割り当てて構成します。次に、line vty 0 4コマンドを使用してTelnetプロトコルをアクティブにし、loginおよびpassword telnetコマンドを使用してTelnetに入るパスワードを設定します。次に、R0の設定に移動し、telnet 10.1.1.2コマンドを使用してR1ルーターとの接続を確立します。その後、システムは接続を確立するためにパスワードを要求し、R1のパスワードとして設定したtelnetという単語を入力します。ご覧のとおり、その後、コマンドラインでルーターR0の名前がR1に変更されました。これは、ルーターR0を経由してルーターR1の設定に移動したことを意味します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/se/nu/y4/senuy4fu7fbkzerhi1y7g8noz7c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では、g0 / 1インターフェースに移りましょう。いくつかのことを紹介します。まず、no shutコマンドを使用します。 2番目のルーターのCLIウィンドウにログメッセージが表示され、g0 / 1インターフェースの状態がアップに変わったことがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/jo/fd/stjofdzlgbi1f6tc_c_dgm1noqa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R0ルーターからR1設定を入力したため、通常のラップトップを2番目のルーターにケーブルで接続し、リモートで制御していることがわかりました。ただし、このログメッセージはR1ウィンドウにのみ表示されました。これは、Telnetチャネルを介してのみ2番目のルーターに接続され、最初のルーターのCLIウィンドウでは複製されなかったためです。実際、別の建物などにあるデバイスの設定をリモートで入力した場合、デフォルトではこのデバイスのログメッセージは画面に表示されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのログメッセージをデバイスの画面に表示するには、ターミナルモニターコマンドを使用する必要があります。実際、イベントログメッセージが別のデバイスの画面に表示された場合、Telnetプロトコルを介してパケットの形式でデバイスのIPアドレスに送信する必要があります。デフォルトでは、ログメッセージはIPアドレスに送信されませんが、ターミナルモニターコマンドを入力すると、これが発生し始めます。 R1ルーターの設定ウィンドウでshutdownコマンドを入力すると、インターフェイスの状態の変化に関するログメッセージが両方の画面に同時に表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n4/ex/sk/n4exskp970o-aj8-qp1b2c5l0jw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、最初のウィンドウでグローバル設定モードR1に移動し、int g0 / 0などのコマンドの入力を開始します。どうにかしてint g0 /だけを出力できたとしましょう。そのとき、なんらかのログメッセージが表示されました。私のチームはこのメッセージによって2つの部分に引き裂かれるので、0は次の行にあり、デバイスはそれを理解できない可能性があります。これは、長いコマンドを入力する場合、またはログメッセージが多数の行で構成される場合は特に不便です。これは、入力をどこで停止すればよいかわからないため、チームがバラバラになったり、中断した場所を忘れたりする可能性があるためです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/bi/qh/vebiqhnjmtg6uqdk0etrdsjfhcs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを防ぐために、ログ同期が使用されます。右側のウィンドウでline vty 0 4コマンドを入力してTelnet設定に入ります。その後、コマンドラインヘッダーの外観がR1（config-if）からR1（config-line）に変わります。次に、logging同期コマンドを入力して、左側のウィンドウに戻ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、同じ状況を繰り返します。intg0 /と入力して、一時停止すると、ログメッセージが再び表示されます。また、両方の画面に表示されますが、テキストによってコマンドが中断されることはありません。その下には、入力した内容が繰り返されます。出現した丸太によって分割されることを恐れることなく、開始したチームを静かにタイプし続けることができます。ユーザーにとって、これは非常に便利です。突然イベントログメッセージが表示されるまで、コマンドをより速く入力する方法を考える必要がないからです。これは、logging同期コマンド、つまり「ログの同期」が行うことです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/r0/pv/zkr0pvyxzbst_gytdh3pth4mciy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各ログメッセージには特定の優先度レベルがあり、この例ではレベル5です。ログレベルの値が低いほど、メッセージの重要度は高くなります。シスコのログには、合計8つの優先レベルがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jl/7e/9g/jl7e9gtrfe9dtgdih32qqem42tq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0-緊急事態、システムは完全に機能していない、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1-アラーム状況、緊急の介入が必要、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2-重大なイベント、システムが失敗する可能性がある、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3-エラーメッセージ、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4-さまざまな警告</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5-さまざまな重要な通知、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6-情報メッセージ、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7-デバッグメッセージ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の3つのレベルはシステムの危険な状態を報告し、レベル3はシステムの問題を示し、4番目のレベルはシステムの状態が不安定になる可能性があることを警告しますが、まだ機能しています。レベル5は、例のように、リンク状態の変化など、さまざまなイベントについて通知します。デバッグモードを使用すると、画面にレベル7のデバッグメッセージが表示されます。忙しい人ですべてのログを読みたくない場合は、画面に表示する危険メッセージのレベルを選択できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、第3レベルの危険度までのログメッセージのみを表示したいとします。この場合、システムはレベル0、1、2、3のメッセージのみを表示し、レベル4〜7のメッセージは無視します。デフォルトではレベル7が設定されているため、0から7までのすべてのレベルのログが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ターミナルモニターとは何かを調べました。次に、Syslogに移りましょう。重要なログメッセージが画面に表示された場合、通常はこれらのメッセージがルーターのメモリにのみ保存され、しばらくすると分析できないため、Syslogサーバーに何らかの方法で保存することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Packet Tracerに戻り、最初のルーターに直接接続されている回線にサーバーを追加します。実際には、スイッチはそれらの間に配置する必要がありますが、このスキームはトレーニング目的で使用するため、スイッチなしで実行できます。サーバーのネットワーク設定に移動して、静的IPアドレス10.1.2.10、サブネットマスク255.255.255.0、デフォルトゲートウェイアドレス10.1.2.1を割り当てます。このアドレスはまだ存在しませんが、R0ルーターのインターフェースの構成に進むときに構成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、R0の設定に移動し、g0 / 1コマンドを使用して、アドレス10.1.2.1にサブネットマスク255.255.255.0を割り当てます。したがって、サーバーとルーターは同じネットワーク上にあります。次に、2番目のR1ルーターの設定に入り、最初のルーターとの接続を構成する必要があります。 RIPまたは静的ルートを構成できます。この場合、後者を選択します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、ip route 0.0.0.0 0.0.0.0 10.1.1.1コマンドを入力します。つまり、すべてのトラフィックがアドレス10.1.1.1に送信されることを示しています。次に、do show ip routeと入力して、最後のキューのゲートウェイ最後の手段のゲートウェイがネットワーク0.0.0.0のアドレス10.1.1.1を持っていることを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、10.1.2.10でデバイスにpingできるかどうかを確認します。覚えていれば、pingは問題の診断ツールであり、ご覧のとおり、pingは成功しました。次に、debug ip icmpコマンドでデバッグモードをオンにします。これは、ルーターがpingするたびに、対応するメッセージがコンソールウィンドウに表示されることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ping 10.1.1.2コマンドを使用して左側のルーターR0からR1にpingを実行すると、右側のルーターのCLIウィンドウにログメッセージが表示されます。デフォルトでは、優先度7です。構成プロセス中に表示されるすべてのログメッセージをSyslogサーバーに送信します。これを行うには、サーバー設定パネルの[サービス]タブに移動し、Syslogパラメーターがデフォルトで有効になっていることを確認します。さて、私はR1に言わなければなりません：「ログメッセージが表示されるたびに、10.1.2.10のSyslogサーバーに送信してください！」。これを行うには、logging 10.1.2.10コマンドを入力します。これで、すべてのログメッセージがサーバーに送信されます。これがどのように起こるか見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R0の設定を入力し、再度ルータR1にpingします。右側のサーバーのCLIウィンドウにデバッグメッセージが表示され、Syslogサーバーに転送する必要があります。サーバーの[Syslog]タブに移動すると、これらのメッセージがすべて表示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rm/ar/ad/rmaradajb2w4sgipn5d5bhr44gc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、週末にイベントが発生し、月曜日に稼働するようになった場合、これらのイベントが記録されているすべてのログメッセージを表示できます。問題がある場合は、何が起こったかを分析し、対策を適用してそれらを排除できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、Syslogメッセージをよく見ると、エラーが表示されます。1月1日のタイムスタンプはすべて0時間です。つまり、記録されたイベントが実際にいつ発生したかを知ることができません。これは、R1ルーターのシステムクロックが誤った時間を示しているために発生しました。このルータの設定でshow clockコマンドを入力すると、メッセージ0：26：9.539 UTC Mon Mar 1 1993が表示されます。これは、ルータがオンになってから26分9秒が経過したことを意味し、デフォルトのクロックは1993年3月1日からカウントを開始します今年の。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は手動で正しい時間を設定し、R0ルーターでそれを始めることができます。 clock setコマンドを入力し、hh：mm：ssの形式で正しい時刻を設定します。 22:05:00と入力すると、1日から31日までの日付と月の名前を入力するためのヒントが表示されます。 3月14日と印刷し、1993年から2035年の範囲で年を入力する必要があります。その結果、2017年3月14日には22:05:00という行が表示されます。その後、Enterキーを押します。ここで「show clock」と入力すると、システムは正しい時刻を表示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ph/ss/bv/phssbvazbjjs3rdpmqjyvpt2vvg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜR1ではなくルータR0に時刻を設定したのかと聞かれるかもしれません。これは、2台目のルーターの自動時刻設定をお見せしたいためです。次に、R0設定にdebug ip icmpおよびlogging 10.1.2.10コマンドを入力して、ログがSyslogサーバーに送信されるようにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、un allコマンドを使用してR1ルーターのデバッグを無効にし、デバイス10.1.1.1にpingします。 pingが成功し、サーバーのログを見ると、ここに新しいメッセージが追加されていることがわかりますが、何らかの理由により、時刻と日付が間違っています。 R1ルーターの設定にも正しい時間が表示されるため、これは奇妙です。 R1ルーターから再度R0ルーターにpingを実行すると、ログメッセージが画面とサーバーログに表示されますが、日付が間違っています。おそらく情報はまだ更新されていません。その理由を調べてみます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R0ルーターの設定に移動し、un allコマンドでデバッグメッセージをオフにします。その後、R1ルーターの設定に移動し、service timestampsコマンドを入力して、デバッグメッセージまたはログメッセージにタイムスタンプを付けます。私たちのケースでは、サービスのタイムスタンプログdatetime msを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、R0の設定に戻り、R1にpingを実行します。メッセージがサーバーに表示され、日付と時刻が3月1日00:31:02（ミリ秒）であることがわかります。 3月1日ではなく3月14日を設定したので、これは間違った日付です。このビデオチュートリアルで間違えたことをお詫び申し上げます。今すぐ修正します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の方法で正しい時刻を設定してみます。実際のところ、タイムスタンプサービスをアクティブにするまで、メッセージはデフォルトの日時で届きました。次に、タイムスタンプサービスをオンにしましたが、その後、正しい時刻と日付を設定しなかったため、ログメッセージのタイムスタンプが正しくないことがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間を手動で設定する際の問題は、数百のデバイスがある場合、各デバイスの設定に移動して時間と日付を設定する必要があることです。これを回避するために、自動NTPメカニズム、つまりネットワークタイムプロトコルがあり、コンピューターの時刻をネットワークデバイスの時刻と同期させます。 1つのネットワークデバイスをNTPマスターとして選択し、目的の時刻を設定できます。このプロトコルの学習はCCNAコースの範囲外であり、ntp masterコマンドがPacket Tracerでサポートされているかどうかはわかりません。しかし、それでも適切な時間を設定しようとしています。そのために、別のサーバーをネットワークに追加して、NTPサーバーを割り当てます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、その設定に入り、[NTP]タブを確認します。ご覧のとおり、正しい日付と時刻がここに設定され、NTP機能が有効になっています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nm/7e/49/nm7e499hdsmljca8zx-zvpvo6ac.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Server1のネットワーク設定に移動して、IPアドレス10.1.3.10、サブネットマスク255.255.255.0、デフォルトゲートウェイ10.1.3.1を割り当てます。前に述べたように、このゲートウェイは構成されていないため、R1ルーターの設定に移動し、ip add 10.1.3.1 255.255.255.0とno shutコマンドを入力して、サーバーと通信するようにg0 / 1インターフェイスを構成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ルーターの設定でntp server 10.1.3.10コマンドを入力すると、R1ルーターはNTPサーバーから正しい時刻を受信できるようになります。ご覧のように、レベル5のログメッセージに正しいタイムスタンプが付いています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0v/qe/ek/0vqeekqk9j44hs8beajta_tukdo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
show clockコマンドを入力すると、ルーターのシステム時刻が更新されていることがわかります。 ntp associationコマンドを入力しようとしましたが、予想通り、このコマンドはPacket Tracerではサポートされておらず、ntpステータスしか表示できません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fq/y3/zi/fqy3zicegk9gizgj1i2cegdloz0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntp statusコマンドは、システムクロックが同期されているという情報を表示しました。さらに、Stratumタイムレイヤーが2であることが示されています。これは、R2ルーターがタイムレイヤーが1のサーバーから時間を受信するため、ネットワークがプライマリNTPサーバーを使用することを意味します。ルーターR1、そのタイムレイヤー層は3（NTPサーバー+ R1 +デバイス自体）になります。つまり、R1はタイムレイヤー2のセカンダリNTPサーバーとして機能します。ここで、pingで何が得られるかを見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R0ルーターの設定を入力し、10.1.1.2でR1ルーターにpingを実行すると、デバッグメッセージが表示され、Server0のsyslogに正しい更新時刻のログが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ie/db/ep/iedbepi6kkhhb_rhw2bvhnt1bew.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NTPとSyslogについては以上です。これで、レッスンの次のトピックであるCDPまたはCisco Discovery Protocolに進むことができます。このプロトコルは、ネットワーク上のデバイスを識別するために使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
論理的なスキームなしに別の会社のネットワークを管理するようになり、その会社の誰もローカルネットワーク上のデバイスがどのように構成および接続されているかを知らないとします。この場合、独自のシスコプロトコルが使用されます。これにより、ネットワーク機器を検出し、その名前、OSバージョン、およびIPアドレスを特定できます。これに加えて、CDPとほぼ同じ機能を実行するLLDP（リンク層検出プロトコル）がありますが、これはオープンソースソフトウェアであり、あらゆるメーカーのネットワークデバイスでサポートされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDPは、デフォルトですべてのシスコデバイスでサポートされています。 LLDPもサポートしていますが、このプロトコルはシスコデバイスではデフォルトで無効になっています。ネットワークに異なるメーカーのネットワーク機器がある場合は、LLDPを使用する必要があります。ネットワークがシスコデバイスのみで構成されている場合は、CDPを使用する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのプロトコルがどのように機能するかを見てみましょう。これについて、Packet Tracerのネットワークのトポロジに戻ります。このタイプのデバイスでCDPがどのように機能するかを示すスイッチを追加し、Server0サーバーを削除して、スイッチをR0ルーターに接続します。当然、ルータと連携するようにスイッチを構成する必要があります。少し時間がかかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開始するには、R0ルーターのCLIに移動して、show cdpコマンドを入力します。デバイスが60秒ごとにcdpパケットを送信し、アナウンスの保持時間が180秒であり、アナウンスされたアナウンスのバージョンがCDPv2であることがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/g-/xw/fwg-xwk2qngn5xvhyw4trnn5iai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDPパッケージは自己識別情報です。つまり、デバイスはネットワークを介してアナウンスを送信し、それが何であるかを通知します。これらのアナウンスは60秒ごとにネットワークネイバーに送信されます。 show cdp neighborsコマンドを入力すると、R0ルータがネイバーから受信し、CDPテーブルに格納されているアナウンスを確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wc/wq/oo/wcwqooo-dx6ng2e9j60kbeiyyf8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この表から、デバイスR0には2つのネイバー（ルータR1とスイッチ）があることがわかります。コードRによるデバイスR1はC1900シリーズのルーターであり、g0 / 0インターフェースを介してR0に接続されていますが、最初のg0 / 0はR0ルーターのローカルインターフェースです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、show cdp neighborsコマンドを入力し、受信した情報を使用して、デバイス間の通信に使用されるインターフェイスを示す論理ネットワーク図を作成できます。デバイスのネイバーから情報を受信した後、両方のデバイスを回路に配置して、デバイス間の接続を示すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表の次の行は、ルーターR0の2番目のネイバーを示しています。これは、ローカルインターフェースg0 / 1が使用される通信用の2960シリーズスイッチです。ネットワークデバイスに任意の名前を割り当てることができます。たとえば、ルーターをスイッチ、スイッチをルーターと呼ぶので、デバイス名ではなく、このデバイスの目的をアルファベットコードの形式で示すCapabilityパラメーターに注意を払う必要があります。R-ルーター、S-スイッチ、 H-ホストなどこのスイッチは、FastEthernet 0/1ポートを介してR0ルータに接続されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
先ほど述べたように、CDPは毎分アナウンスを送信します。ネットワーク管理者は、アクティブなCDPとトラフィックの節約のどちらを優先するかを決定する必要があります。アナウンスを送信すると大量のトラフィックを消費すると思われる場合は、この機能を無効にできます。 CDPを有効または無効にする方法は？これを行うには、config tコマンドを使用してグローバルコンフィギュレーションモードを開始し、cdp runコマンドを入力します。デフォルトでは、cdp機能はすべてのデバイスで有効になっています。 cdpを無効にするには、no cdp runコマンドを使用します。 cdpのステータスを確認するには、show cdpコマンドを使用します。ご覧のとおり、このコマンドを入力すると、システムからCDP is not enableというメッセージが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデバイスではなく、特に選択したインターフェイスでcdpを実行したい場合に、状況が発生する可能性があります。これを行うには、最初にcdp runコマンドを使用してcdpを再びオンにする必要があります。次に、特定のインターフェイスの設定（たとえば、int g0 / 1）に移動し、この機能を有効にする場合はcdp enableコマンドを入力し、必要な場合はcdp enableコマンドを入力しないようにします。このインターフェイスでは無効にします。 no cdp enableコマンドを入力すると、cdp機能はこのインターフェイスでのみ機能しなくなり、他のインターフェイスではアクティブのままになります。 runコマンドはデバイスレベルでcdpを有効/無効にするために使用され、enableコマンドはインターフェイスレベルで使用されることに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで再度show cdp neighborsコマンドを入力すると、スイッチの行がテーブルから消え、ルータR0には1つのネイバー（ルータR1）だけが表示されるようになります。 g0 / 1インターフェイスのcdp機能を無効にしたため、スイッチが「見えなくなり」ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムレベルでは、LLDPはCDPのようにlldp run / no lldp runコマンドでオン/オフされます。 CDPはすべてのCiscoデバイスでデフォルトで有効になっていますが、LLDPは有効になっていないことを覚えておいてください。別のインターフェース（g0 / 1など）にLLDPを使用する場合は、このインターフェースの設定に移動し、ネイバーからアナウンスを受信する場合はlldp receiveコマンドを使用するか、ネイバーにLLDPメッセージを送信する場合はlldp送信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のインターフェイスでメッセージを受信したくない場合は、no lldp receiveコマンドを使用します。送信したくない場合は、no lldp transmitを使用します。 CDPとLLDPの違いは、最初のプロトコルは1つのコマンドを使用し、2番目のプロトコルは、LLDPメッセージの受信と送信に別々に2つのコマンドを使用することです。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/YHa-dXBfUrE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつもご利用いただきありがとうございます。私たちの記事は好きですか？もっと面白い資料を見たいですか？注文またはお友達にそれを推奨することで私たちをサポートしてください、私たちがあなたの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために発明したエントリーレベルのサーバーのユニークなアナログのHabrユーザーのための30％割引：</font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS（KVM）E5-2650 v4（6コア）10GB DDR4 240GB SSD 1Gbpsの真実20ドルまたはサーバーを分割する方法？</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（オプションは、RAID1およびRAID10、最大24コア、最大40GB DDR4で利用可能です）。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xdは2倍安いですか？</font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">オランダでは、</font></b></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">199ドルから、インテルTetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV</font></font></a><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">2台</font></a></b><font style="vertical-align: inherit;">だけ持ってい</font><b><font style="vertical-align: inherit;">ます！</font></b><b><b><font style="vertical-align: inherit;">デルR420-2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB-$ 99から！</font></b></b><font style="vertical-align: inherit;">について読む</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   .  c   Dell R730xd 5-2650 v4  9000   ?</a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja465961/index.html">自分でインターネットマーケティングを学ぶ：50以上の無料コース</a></li>
<li><a href="../ja465963/index.html">ドイツの給与伝記2019</a></li>
<li><a href="../ja465969/index.html">初心者向けではないSystemVerilogのチップ設計に関する書籍を通じて、政治的正しさがロシアに浸透</a></li>
<li><a href="../ja465973/index.html">2018年404festで最も人気のある10の動画レポート</a></li>
<li><a href="../ja465975/index.html">SQLガイド：クエリをより適切に記述する方法（パート2）</a></li>
<li><a href="../ja465979/index.html">すべてを覚えておいてください^ Wは必要なものだけです。Ankiの使用経験。パート1（紹介、最後から2番目）</a></li>
<li><a href="../ja465981/index.html">1Cで使用した場合のIBM DB2 Express-C管理エクスペリエンス：エンタープライズ</a></li>
<li><a href="../ja465983/index.html">Intel Comet Lake：第10世代でわずか14 nm</a></li>
<li><a href="../ja465985/index.html">確率的データ構造を使用するだけでなく、大きなグラフの分散処理を加速します。</a></li>
<li><a href="../ja465987/index.html">オウムが上陸しました。本「ジェネレーティブ・ディープラーニング」の発表</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>