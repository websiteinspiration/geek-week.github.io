<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÇüèæ üêî üî≤ Stas Afanasyev. Juno Tuber√≠as basadas en io.Reader / io.Writer. Parte 2 ü§∑üèø „äóÔ∏è üçí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la charla, hablaremos sobre el concepto de io.Reader / io.Writer, por qu√© son necesarios, c√≥mo implementarlos correctamente y qu√© inconvenientes ex...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Stas Afanasyev. Juno Tuber√≠as basadas en io.Reader / io.Writer. Parte 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/491524/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la charla, hablaremos sobre el concepto de io.Reader / io.Writer, por qu√© son necesarios, c√≥mo implementarlos correctamente y qu√© inconvenientes existen a este respecto, as√≠ como sobre la construcci√≥n de tuber√≠as basadas en implementaciones est√°ndar y personalizadas de io.Reader / io.Writer .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/nv/uj/rdnvujcjwsukejxq_6a9syayawu.jpeg"><a name="habracut"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stas Afanasyev. </font><font style="vertical-align: inherit;">Juno </font><font style="vertical-align: inherit;">Tuber√≠as basadas en io.Reader / io.Writer. </font><font style="vertical-align: inherit;">Parte 1</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Error "en confianza"</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro matiz: en esta implementaci√≥n hay un "bagul". </font><font style="vertical-align: inherit;">Este error es confirmado por los desarrolladores (les escrib√≠ al respecto). </font><font style="vertical-align: inherit;">¬øQuiz√°s alguien sabe qu√© es este "bagul"? </font><font style="vertical-align: inherit;">En la diapositiva est√° la pen√∫ltima l√≠nea: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c9/kc/xj/c9kcxjodwjtycg7o2n62tfavto0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
est√° asociada con demasiada confianza en el Reader envuelto: si Reader devuelve un n√∫mero negativo de bytes, entonces aumenta el l√≠mite que nos gustar√≠a obtener por el n√∫mero de bytes restados. </font><font style="vertical-align: inherit;">Y en algunos casos, este es un error bastante grave que no puedes entender de inmediato.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escrib√≠ en el n√∫mero: ¬°hagamos algo, arreglemoslo! Y luego se revel√≥ una capa de problemas ... Primero, me dijeron que si agrega este cheque ahora aqu√≠, tendr√° que agregar este cheque en todas partes, y hay una docena de estos lugares. Si queremos cambiar esto al lado del cliente, entonces necesitamos determinar una serie de reglas mediante las cuales el cliente validar√° los datos (y tambi√©n puede haber cinco o dos de ellos). Resulta que todo esto necesita ser copiado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estoy de acuerdo en que esto no es √≥ptimo. ¬°Entonces veamos una versi√≥n consistente! ¬øPor qu√© tenemos una implementaci√≥n de la biblioteca est√°ndar que no conf√≠a en nada, mientras que otras conf√≠an absolutamente en todo?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, mientras escrib√≠a mi opini√≥n c√≠vica, pens√°ndolo bien, cerramos el tema con comentarios: ‚ÄúNo haremos nada. </font><font style="vertical-align: inherit;">Adi√≥s"! </font><font style="vertical-align: inherit;">Me hicieron parecer una especie de tonto ... Cort√©smente, por supuesto, no puedes encontrar la culpa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, ahora tenemos un problema. </font><font style="vertical-align: inherit;">Consiste en el hecho de que no est√° claro qui√©n debe validar los datos del Reader envuelto. </font><font style="vertical-align: inherit;">O el cliente, o confiamos completamente en el contrato ... ¬°Tenemos una soluci√≥n! </font><font style="vertical-align: inherit;">Si queda tiempo, lo contar√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasemos al siguiente caso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teereader</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observamos un ejemplo de c√≥mo envolver datos de Reader. El siguiente ejemplo de canalizaci√≥n es superar los datos de Reader en Writer. Hay dos situaciones </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primera situacion. Necesitamos leer los datos de Reader, copiarlos de alguna manera en Writer (de manera transparente) y trabajar con ellos como con Reader. Hay una implementaci√≥n de TeeReader para esto. Se presenta en el fragmento de implementaci√≥n superior: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ef/rl/jy/efrljy0zmyzxqk-7cbsbdkqialw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
funciona como el equipo Tee en Unix. Creo que muchos de ustedes han escuchado sobre esto.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que esta implementaci√≥n verifica el n√∫mero de bytes que lee del Reader envuelto. Ver las condiciones en la segunda l√≠nea? Porque cuando escribe tal implementaci√≥n, es intuitivamente clara: en caso de un n√∫mero negativo, se asustar√°. ¬°Y este es otro lugar donde confiamos en el lector envuelto! Les recuerdo que estas son todas las bibliotecas est√°ndar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasemos a un caso, por ejemplo, c√≥mo usarlo. ¬øQu√© haremos en el fragmento inferior? Descargaremos el archivo robot.txt de golang.org usando el cliente http est√°ndar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sabe, el cliente http nos devuelve una estructura de respuesta, en la que el campo Cuerpo es una implementaci√≥n de la interfaz del Lector. </font><font style="vertical-align: inherit;">Debe aclararse diciendo que esta es una implementaci√≥n de la interfaz ReadCloser. </font><font style="vertical-align: inherit;">Pero ReadCloser es solo una interfaz construida desde Reader y Closer. </font><font style="vertical-align: inherit;">Es decir, este es un Reader, que, en general, puede cerrarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo (en el fragmento inferior) recopilamos TeeReader, que leer√° los datos de este Cuerpo y los escribir√° en un archivo. </font><font style="vertical-align: inherit;">La creaci√≥n del archivo hoy, desafortunadamente, se mantuvo detr√°s de escena, porque no todo encajaba. </font><font style="vertical-align: inherit;">Pero, de nuevo, si observa el dendrograma, el tipo de archivo implementa la interfaz de Writer, es decir, podemos escribir en √©l. </font><font style="vertical-align: inherit;">Es obvio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Armamos nuestro TeeReader y lo le√≠mos usando ReadAll. </font><font style="vertical-align: inherit;">Todo funciona como se esperaba: restamos el Cuerpo resultante, lo escribimos en un archivo y lo vemos en Assad.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manera principiante</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La segunda situaci√≥n. </font><font style="vertical-align: inherit;">Solo necesitamos leer los datos de Reader y escribirlos en Writer. </font><font style="vertical-align: inherit;">La soluci√≥n es obvia ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando reci√©n comenc√© a trabajar con Go, resolv√≠ problemas como en una diapositiva: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/yh/wx/yuyhwxfzki71ar1yp2myfgjffdc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
localic√© el b√∫fer, lo llen√© con datos de Reader y transfir√≠ el segmento lleno a Writer. </font><font style="vertical-align: inherit;">Todo es simple </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos puntos. </font><font style="vertical-align: inherit;">En primer lugar, no hay garant√≠a de que todo el Reader se reste en una llamada al m√©todo de lectura, ya que pueden quedar datos (en el buen sentido, esto debe hacerse en un bucle). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo punto es que este camino no es √≥ptimo. </font><font style="vertical-align: inherit;">Aqu√≠ hay un c√≥digo bastante repetitivo escrito antes que nosotros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para esto, hay una familia especial de ayudantes en la biblioteca est√°ndar: estos son Copy, CopyN y CopyBuffer.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io.Copia. </font><font style="vertical-align: inherit;">WriterTo y ReaderFrom</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
io.Copy b√°sicamente hace lo que estaba en la diapositiva anterior: asigna un b√∫fer predeterminado de 32 KB y escribe datos del lector al escritor (la firma de esta copia se muestra en el fragmento superior): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lx/wi/bd/lxwibd_hiz09op5baq0-d77ukrk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
adem√°s de esta rutina de plantilla, tambi√©n contiene Una serie de optimizaciones dif√≠ciles. </font><font style="vertical-align: inherit;">Y antes de hablar sobre estas optimizaciones, necesitamos familiarizarnos con dos interfaces m√°s:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WriterTo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leer de.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Situaci√≥n hipot√©tica. Su lector funciona con un b√∫fer de memoria. Ya lo ha reubicado, escribe, lee algo desde all√≠, es decir, un lugar debajo ya ha sido reubicado. Desea leer este lector en alg√∫n lugar desde el exterior. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya hemos visto c√≥mo sucede esto: se crea un b√∫fer, se pasa el b√∫fer, que se pasa al m√©todo de lectura; El lector, que funciona con memoria, lo tira de la pieza replicada ... Pero esto ya no es √≥ptimo: el lugar ha sido reposicionado. ¬øPor qu√© hacerlo de nuevo? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0h/sd/0b/0hsd0ba3ikgudka2q1ujxt9rtbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En alg√∫n lugar hace 5-6 a√±os (hay un enlace a la lista de cambios) se hicieron dos interfaces: WriteTo y ReadFrom, que se implementan localmente. Reader implementa WriteTo, y Writer implementa ReadFrom. Resulta que Reader, que tiene un segmento con datos ya replicados, puede evitar una ubicaci√≥n adicional y aceptar los m√©todos Write To Writer y pasar un b√∫fer disponible dentro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ es como funciona la implementaci√≥n de bytes.Buffer y bufio. </font><font style="vertical-align: inherit;">Y si vuelve a mirar el dendrograma, ver√° que estas dos interfaces no son muy populares. </font><font style="vertical-align: inherit;">Solo se implementan para aquellos tipos que funcionan con el b√∫fer interno, donde la memoria ya est√° reubicada. </font><font style="vertical-align: inherit;">Esto no lo ayudar√° a evitar la elocuencia cada vez, pero solo si ya est√° trabajando con una pieza reubicada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReaderFrom funciona de manera similar (solo lo implementa Writer). </font><font style="vertical-align: inherit;">ReaderFrom lee todo el Reader, lo que se presenta como un argumento (antes de EOF) y escribe en alg√∫n lugar de la implementaci√≥n interna de Writer.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementaci√≥n de CopyBuffer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este fragmento muestra la implementaci√≥n del ayudante copyBuffer. Este copyBuffer no exportable se utiliza bajo el cap√≥ de io.Copy, CopyN y CopyBuffer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu√≠ hay un peque√±o matiz que vale la pena mencionar. CopyN ha sido optimizado recientemente, desatado de esta l√≥gica. Esta es exactamente la optimizaci√≥n de la que habl√© antes: antes de crear un b√∫fer adicional de 32 KB, se realiza una comprobaci√≥n, ¬øtal vez la fuente de datos implementa la interfaz WriterTo, y este b√∫fer adicional no es necesario? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si esto no sucede, verificamos: ¬øquiz√°s Writer implementa ReaderFrom para conectarlos sin este intermediario? Si esto no sucede, la √∫ltima esperanza permanece: ¬øtal vez nos dieron alg√∫n tipo de b√∫fer reubicado que podr√≠amos usar? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lz/yr/3q/lzyr3qrkehj5qudwoerwitlr6uq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ es como funciona io.Copy.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un problema, que es una semi-propuesta, un semi-error: no est√° claro qu√©. </font><font style="vertical-align: inherit;">Lleva colgado un a√±o y medio. </font><font style="vertical-align: inherit;">Suena as√≠: CopyBuffer es sem√°nticamente incorrecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, no hay firma para este copyBuffer, pero se ve exactamente como este m√©todo no exportable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando llame a copyBuffer con la esperanza de evitar una ubicaci√≥n adicional, pase un byte de rebanada reubicado all√≠, la siguiente l√≥gica funciona: si Reader o Writer tienen las interfaces WriterTo y ReaderFrom, entonces no hay garant√≠a de que pueda evitar esta ubicaci√≥n. </font><font style="vertical-align: inherit;">Esto fue aceptado como una propuesta y prometi√≥ pensarlo en Go 2.0. </font><font style="vertical-align: inherit;">Por ahora, solo necesitas saber.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabaja con io.Pipe. </font><font style="vertical-align: inherit;">PipeReader y pipeWriter</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro caso: necesita obtener datos de Writer de alguna manera en Reader. Bonito caso de vida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que ya tiene algunos datos, implementan la interfaz Reader, todo est√° claro con esto. Debe comprimir estos datos, "ajustarlos" y enviarlos a S3. ¬øCu√°l es el matiz? .. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quien trabaj√≥ con el tipo gzip en el paquete compess sabe que el gzip'er en s√≠ mismo es solo un proxy: toma datos en s√≠ mismo, implementa la interfaz del Escritor, escribe los datos, algo les har√° y entonces tengo que dejarlos caer en alguna parte. En el constructor, se necesita una implementaci√≥n de la interfaz de Writer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consecuencia, aqu√≠ necesitamos alg√∫n tipo de Escritor intermedio, donde eliminaremos los datos ya comprimidos que se archivan en la primera etapa. Nuestro siguiente paso es subir estos datos a S3. Y el cliente est√°ndar de AWS acepta la interfaz io.Reader como fuente de datos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-u/ai/hl/-uaihlpfwlyjeil6iorgelvue2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La diapositiva muestra la canalizaci√≥n: muestra c√≥mo se ve: necesitamos superar el adelanto de datos de Reader a Writer, de Writer a Reader. ¬øC√≥mo hacerlo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioteca est√°ndar tiene una caracter√≠stica genial: io.Pipe. Devuelve dos valores: pipeReader y pipeWriter. Este par est√° inextricablemente vinculado. Imagine un "tel√©fono para beb√©s" en tazas con cuerdas: no tiene sentido hablar en una taza mientras nadie est√° escuchando en el otro extremo ...</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rf/zm/kj/rfzmkj2jivwatxxbukwdesrxvoe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© hace este io.Pipe? </font><font style="vertical-align: inherit;">No se leer√° hasta que nadie escriba los datos. </font><font style="vertical-align: inherit;">Y viceversa, no escribir√° nada hasta que nadie lea estos datos en el otro extremo. </font><font style="vertical-align: inherit;">Aqu√≠ hay un ejemplo de implementaci√≥n: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fk/qa/ze/fkqazendof7z_uoop8kbfzmtxuk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
haremos lo mismo aqu√≠. </font><font style="vertical-align: inherit;">Leeremos el archivo robot.txt, que se ley√≥ antes, lo comprimiremos usando nuestro gzip y lo enviaremos a S3.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la primera l√≠nea, se crea un par: pipeReader, pipeWriter. </font><font style="vertical-align: inherit;">A continuaci√≥n, debemos ejecutar al menos una rutina, que leer√° los datos de un extremo (una especie de tuber√≠a). </font><font style="vertical-align: inherit;">En este gorutin, ejecute el cargador con una fuente de datos (source - pipeReader).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el siguiente paso, necesitamos comprimir los datos. </font><font style="vertical-align: inherit;">Comprimimos los datos y los escribimos en pipeWriter (ser√° el otro extremo de la tuber√≠a), y ya ejecut√°ndose goroutine recibe los datos en el otro extremo de la tuber√≠a y los lee. </font><font style="vertical-align: inherit;">Cuando todo este s√°ndwich est√© listo, todo lo que queda es prender fuego a la mecha ...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ver: io.Copy en la √∫ltima l√≠nea escribe datos del Cuerpo en el gzip que creamos (es decir, de Lector a Escritor). </font><font style="vertical-align: inherit;">Todo esto funciona como se esperaba.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ejemplo se puede resolver de otra manera. </font><font style="vertical-align: inherit;">Si usa alguna implementaci√≥n que implemente tanto Reader como Writer. </font><font style="vertical-align: inherit;">Primero escribir√° datos en √©l y luego los leer√°. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fue una demostraci√≥n clara de c√≥mo trabajar con io.Pipe.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otras implementaciones</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es b√°sicamente todo para m√≠. Llegamos a implementaciones interesantes de las que me gustar√≠a hablar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ei/9n/wd/ei9nwdzzrqc7ynwdvghvlokaujo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No dije nada sobre MultiReader, ni sobre MultiWriter. Y esta es otra implementaci√≥n genial de la biblioteca est√°ndar, que le permite conectar diferentes implementaciones. Por ejemplo, MultiWriter escribe en todos los escritores simult√°neamente, y MultiReader lee los lectores secuencialmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra implementaci√≥n se llama limio. Le permite establecer un l√≠mite para la resta. Puede establecer la velocidad en bytes por segundo a la que debe leer su Reader. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra implementaci√≥n interesante es solo una visualizaci√≥n del progreso de la lectura: la barra de progreso (de alg√∫n tipo). Se llama ioprogreso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© dije todo esto? ¬øQu√© quise decir con eso?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/eq/hq/haeqhquljxa3dyvbxvhpdgn0cvu.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si de repente necesita implementar las interfaces Reader y Writer, h√°galo bien. </font><font style="vertical-align: inherit;">Todav√≠a no hay una decisi√≥n √∫nica sobre qui√©n es responsable de la implementaci√≥n: asumiremos que todos conf√≠an en el contrato. </font><font style="vertical-align: inherit;">Por lo tanto, debe cumplir impecablemente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si su caso funciona con un b√∫fer reposicionado, no se olvide de las interfaces ReaderFrom y WriterTo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si est√° en un callej√≥n sin salida y necesita ejemplos: consulte la biblioteca est√°ndar, hay muchas implementaciones interesantes en las que puede confiar. </font><font style="vertical-align: inherit;">Hay documentaci√≥n all√≠.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si algo es completamente incomprensible para usted, no dude en escribir sus problemas. </font><font style="vertical-align: inherit;">Los chicos all√≠ son adecuados, responden r√°pidamente, muy amablemente y le ayudan de manera competente.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/vf/0y/cy/vf0ycy0f6kuyuyuygxoulwpy538.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo para m√≠. </font><font style="vertical-align: inherit;">¬°Gracias por venir!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preguntas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pregunta de la audiencia (B): Tengo una pregunta simple, supongo. Cu√©ntenos sobre algunos casos de uso de la vida: ¬øcu√°les fueron utilizados y por qu√©? Dijiste que Reader / Writer devuelve la longitud que ley√≥. ¬øAlguna vez has tenido alg√∫n problema con esto? ¬øCu√°ndo exigiste leer (no solo ReadAll existe), pero algo no funcion√≥? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Debo admitir honestamente que nunca tuve tales casos, porque siempre trabaj√© con implementaciones de la biblioteca est√°ndar. Pero hipot√©ticamente, tal situaci√≥n, por supuesto, es posible. En cuanto a casos espec√≠ficos, a menudo recolectamos tuber√≠as multicapa, y si hipot√©ticamente permite tal error, toda la tuber√≠a se vendr√° abajo ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Esto no es del todo un error. Entonces, te cuento sobre mi peque√±a experiencia. Tuve un problema con Booking.com: utilizaron el controlador que escrib√≠ y tuvieron un problema, algo no funcionaba. Hay un protocolo binario est√°ndar que hicimos; localmente, todo funciona bien, todos est√°n bien, pero result√≥ que tienen una red muy mala con un centro de datos. Entonces, Reader realmente no devolvi√≥ todo (tarjetas de red defectuosas, algo m√°s). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pero si no devolvi√≥ todo, entonces no deber√≠a haber devuelto el signo del final (final), y el cliente deber√≠a haber regresado. Seg√∫n el contrato que se describe, Reader no deber√≠a ... Digamos que Reader, por supuesto, decide cu√°ndo quiere venir, cu√°ndo no quiere, sin embargo, si quiere leer todo, debe esperar a EOF. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pero eso es precisamente por la conexi√≥n". Este es exactamente el problema que ocurri√≥ en el paquete neto est√°ndar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ¬øY devolvi√≥ el EOF? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - No devolvi√≥ todo, simplemente no lo ley√≥ todo. Le dije: "Lee los siguientes 20 bytes". El Lee. Y no leo todo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hipot√©ticamente, esto es posible, porque es solo una interfaz que describe un protocolo de comunicaci√≥n. Es necesario mirar y desmontar espec√≠ficamente el caso. Aqu√≠ solo puedo responderte que el cliente, en teor√≠a, deber√≠a haber regresado si no recibi√≥ todo lo que quer√≠a. Le pediste una porci√≥n de 20 bytes, te rest√≥ 15, pero EOF no vino - deber√≠as ir de nuevo ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hay io.ReadFull para esta situaci√≥n. Est√° especialmente dise√±ado para leer el segmento hasta el final. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CALIFORNIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Si. No dije nada sobre ReadFull. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Esta es una situaci√≥n completamente normal cuando Leer no llena todo el segmento. Necesitas estar preparado para esto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ¬°Este es un caso muy esperado! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gracias por el informe, fue interesante. Utilizo lectores en un proxy peque√±o y simple que lee http y escribe al rev√©s. Utilizo Close Reader para resolver un problema: cerrar lo que leo todo el tiempo. ¬øNecesito confiar ciegamente en un contrato? Dijiste que podr√≠a haber problemas. ¬øO agregar cheques adicionales? Es te√≥ricamente posible que algo no venga completamente en este sitio. ¬øNecesito hacer estos controles adicionales y no confiar en el contrato? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CALIFORNIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dir√≠a esto: si su aplicaci√≥n tolera estos errores (por ejemplo, si conf√≠a plenamente en el contrato), entonces tal vez no. Pero si no desea obtener un "p√°nico" en usted (como lo mostr√© en la lectura negativa en byte.Buffer), a√∫n as√≠ lo comprobar√≠a. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero esto depende de usted. ¬øQu√© puedo recomendarle? Creo que sopesar los pros y los contras. ¬øQu√© sucede si de repente obtienes un n√∫mero negativo de bytes? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gracias por el informe. Lamentablemente, no s√© nada en Go. Si se ha producido un "p√°nico", ¬øhay alguna forma de interceptar esta informaci√≥n y obtener informaci√≥n sobre qu√©, d√≥nde, c√≥mo ser parcial, para evitar problemas el viernes por la noche? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S√≠. El mecanismo de recuperaci√≥n le permite "atrapar" un p√°nico y sacarlo sin caerse, en t√©rminos relativos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q_/xq/37/q_xq37jx6hjicmvwwhfhqdmyl7e.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ¬øC√≥mo sus recomendaciones para usar implementaciones de Writer y Reader son consistentes con los errores que se devuelven al implementar sockets web? No dar√© un ejemplo concreto, pero ¬øsiempre se usa el final del archivo all√≠? Por lo que recuerdo, el mensaje termina con algunos otros significados ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Esta es una buena pregunta, porque no tengo nada que responder. Debo mirar! Si EOF no viene, entonces el cliente, si quiere obtener todo, debe volver a ir. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ¬øCu√°nto tiempo pudo ensamblar la tuber√≠a? ¬øHay alguna creencia interna de que no vale la pena reunir a m√°s de cinco participantes, o con ramas? ¬øCu√°nto tiempo logr√≥ construir un √°rbol a partir de estas tuber√≠as (lectura, escritura)? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CALIFORNIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- En mi pr√°ctica, unas cinco llamadas consecutivas son √≥ptimas, porque es m√°s dif√≠cil de depurar, tenga en cuenta lo que fluye y hacia d√≥nde va. Se obtiene una estructura bastante ramificada. Pero yo dir√≠a que en alg√∫n lugar 5-7 m√°ximo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 5-7 - ¬øen este caso? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Esto es leer, por ejemplo, algunos datos. Debe prometer, y lo que inicia sesi√≥n, debe recortar. Prometido, luego lee estos datos, debe enviarlo de vuelta a alg√∫n almacenamiento (bueno, hipot√©ticamente). En cualquier almacenamiento que implemente la interfaz de Writer. Con esta tuber√≠a, se producen 5-6 pasos, aunque en uno de los pasos todav√≠a se ramifica hacia un lado, y contin√∫a trabajando con Reader. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Seg√∫n el modo Principiante, ten√≠as una diapositiva interesante. ¬øPuede indicar otros 2-3 puntos interesantes que estaban all√≠, pero ahora es mejor no hacerlo, sino hacerlo de manera diferente ahora? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Con esa diapositiva, quer√≠a mostrar exactamente c√≥mo hacerlo sin la necesidad de leer Reader. Nunca se me pas√≥ por la cabeza que algo as√≠ como la forma Principiante ... Este es probablemente el principal error, el patr√≥n principal que debe evitarse al trabajar con lectores. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presentador: - Agregar√≠a por mi cuenta que es muy importante para un principiante leer toda la documentaci√≥n del paquete io, en todas las interfaces que est√°n all√≠, y comprenderlas. Porque, de hecho, hay muchos de ellos, y a menudo comienzas a hacer algo por tu cuenta, aunque ya existe all√≠ y est√° implementado correctamente ("correcto", teniendo en cuenta todas las caracter√≠sticas). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pregunta del l√≠der: - ¬øC√≥mo vivir m√°s?</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Buena pregunta! Promet√≠ decir si tenemos tiempo. Como resultado de la discusi√≥n sobre el error, LimitedReader tom√≥ la siguiente decisi√≥n: hacer un cond√≥n Reader en alg√∫n sentido, que proteja contra amenazas externas, envolver un Reader en el que no conf√≠a, para evitar que ingrese cualquier infecci√≥n en su sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y en este lector, implementa todas las comprobaciones que no puede hacer: por ejemplo, lectura negativa, experimentos con el n√∫mero de bytes (digamos que envi√≥ una porci√≥n de 10 bytes y obtuvo 15 de vuelta, ¬øc√≥mo reaccionar ante esto?) ... En este Reader y usted pueden implementar un conjunto de tales controles. Dije: "¬øQuiz√°s agreguemos a la biblioteca est√°ndar, porque ser√≠a √∫til para que todos la usen"?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me dieron la respuesta de que no parece tener sentido en esto: esto es algo simple que puede implementar usted mismo. Todas. Vivimos en Confiamos en el contrato chicos. Pero no confiar√≠a. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gj/e0/_c/gje0_c2o6hhots_d3d5hvnfhgnm.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Cuando trabajamos con lectores, escritores y existe la oportunidad de encontrarnos con una "bomba" de gzip ... ¬øCu√°nto confiamos en ReadAll y WriteAll? ¬øO, sin embargo, implementar la lectura del b√∫fer y trabajar solo con el b√∫fer? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CALIFORNIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ReadAll en s√≠ solo utiliza bytes. Amortiguador bajo el cap√≥. </font><font style="vertical-align: inherit;">Cuando quiera usar esto o aquello, es recomendable que entre y vea c√≥mo se implementan estas "tripas". </font><font style="vertical-align: inherit;">De nuevo, depende de sus requisitos: si es intolerante con los errores que le mostr√©, debe ver si est√° marcado lo que proviene del Reader envuelto. </font><font style="vertical-align: inherit;">Si no est√° marcado, use, por ejemplo, bufio (all√≠ est√° todo marcado). </font><font style="vertical-align: inherit;">O haga lo que acabo de decir: un cierto Lector proxy, que de acuerdo con su lista de requisitos verificar√° estos datos y los devolver√° al cliente o los devolver√° al cliente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/of/v1/yeofv1zmhlx3zoyv26wsh5mxway.jpeg"><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kuyjuGk1USY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un poco de publicidad :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias por estar con nosotros. ¬øTe gustan nuestros art√≠culos? ¬øQuieres ver m√°s materiales interesantes? Ap√≥yenos haciendo un pedido o recomendando a sus amigos, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS en la nube para desarrolladores desde $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an√°logo √∫nico de servidores de nivel b√°sico que inventamos para usted: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toda la verdad sobre VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10GB DDR4 480GB SSD 1Gbps desde $ 19 o c√≥mo dividir el servidor?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 veces m√°s barato en el centro de datos Equinix Tier IV en Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Solo tenemos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV desde $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los Pa√≠ses Bajos.</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - ¬°desde $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lea sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥mo construir un edificio de infraestructura. </font><font style="vertical-align: inherit;">clase c con servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es491510/index.html">Cree su imagen con CentOS 8.1 puro en la nube de Amazon</a></li>
<li><a href="../es491512/index.html">¬øPor qu√© Mr. Robot es la mejor serie sobre la industria de TI?</a></li>
<li><a href="../es491518/index.html">Noticias del mundo de OpenStreetMap No. 501 (18/02/2020/24/02/2020)</a></li>
<li><a href="../es491520/index.html">Convierta xls a xlsx y xml en C #</a></li>
<li><a href="../es491522/index.html">¬øPor qu√© las mujeres viven m√°s?</a></li>
<li><a href="../es491528/index.html">Mi experiencia es realizar 1000 entrevistas. Sinopsis del informe de Yegor Bugaenko</a></li>
<li><a href="../es491530/index.html">Una vez m√°s, unos 433 MHz transmisores y receptores</a></li>
<li><a href="../es491532/index.html">Laravel + Docker + Gitlab. D√≥nde empezar</a></li>
<li><a href="../es491534/index.html">Una breve gu√≠a para usar GDB</a></li>
<li><a href="../es491536/index.html">YouTube: error. Por favor, int√©ntelo de nuevo m√°s tarde. ID de reproducci√≥n: <...></a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>