<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯТ▓ тШ╕я╕П ЁЯФй рд╣рдо PostgreSQL рдореЗрдВ рдПрдХ рдЙрдкрд▓рд╛рдЗрдЯ рдкрд░ рд▓рд┐рдЦрддреЗ рд╣реИрдВ: 1 рд╣реЛрд╕реНрдЯ, 1 рджрд┐рди, 1 рдЯреАрдмреА тЬВя╕П тП│ ЁЯСйЁЯП╗тАНЁЯдЭтАНЁЯСиЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореИрдВрдиреЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ PostgreSQL рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ SQL "рд░реАрдб" рдХреНрд╡реЗрд░реАрдЬрд╝ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рд╡реНрдпрдВрдЬрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдереА ред рдЖрдЬ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рд╣рдо PostgreSQL рдореЗрдВ рдПрдХ рдЙрдкрд▓рд╛рдЗрдЯ рдкрд░ рд▓рд┐рдЦрддреЗ рд╣реИрдВ: 1 рд╣реЛрд╕реНрдЯ, 1 рджрд┐рди, 1 рдЯреАрдмреА</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tensor/blog/497008/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВрдиреЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ </font><font style="vertical-align: inherit;">PostgreSQL рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL "рд░реАрдб" рдХреНрд╡реЗрд░реАрдЬрд╝ рдХреЗ рдкреНрд░рджрд░реНрд╢рди</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдмрдврд╝рд╛рдиреЗ рдХреЗ</font></a><font style="vertical-align: inherit;"> рд▓рд┐рдП рдорд╛рдирдХ рд╡реНрдпрдВрдЬрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдереА </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЖрдЬ рд╣рдо рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдХреИрд╕реЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд┐рдиреНрдпрд╛рд╕ рдореЗрдВ рдХрд┐рд╕реА рднреА "рдЯреНрд╡рд┐рд╕реНрдЯ" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ </font><b><font style="vertical-align: inherit;">рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ</font></b><font style="vertical-align: inherit;"> рдХреЛ </font><b><font style="vertical-align: inherit;">рдЕрдзрд┐рдХ рдХреБрд╢рд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ</font></b><font style="vertical-align: inherit;"> - рдмрд╕ рдбреЗрдЯрд╛ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдХреЗред</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lv/ir/or/lvirorsnhddruod1aggj8x4fgei.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 1ред </font><font style="vertical-align: inherit;">рд╡рд┐рднрд╛рдЬрди</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреИрд╕реЗ рдФрд░ рдХреНрдпреЛрдВ рдпрд╣ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ" рд▓рд╛рдЧреВ рд╡рд┐рднрд╛рдЬрди рдХрд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЖрдпреЛрдЬрди рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рд▓реЗрдЦ </font><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╣реА рдпрд╣рд╛рдВ рджрд┐рдпрд╛ рдЬрд╛ рдЪреБрдХрд╛ рд╣реИ, рдпрд╣рд╛рдВ рд╣рдо </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реИрдХрдбрд╝реЛрдВ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрдпреВрдПрд▓ рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдорд╛рд░реА </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдирд┐рдЧрд░рд╛рдиреА рд╕реЗрд╡рд╛</font></a><font style="vertical-align: inherit;"> рдХреЗ рдврд╛рдВрдЪреЗ рдХреЗ рднреАрддрд░ рдХреБрдЫ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдЕрднреНрдпрд╛рд╕ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">ред</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдмреАрддреЗ рджрд┐рдиреЛрдВ рдХреЗ рдорд╛рдорд▓реЗ ..."</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ, рдХрд┐рд╕реА рднреА рдПрдорд╡реАрдкреА рдХреА рддрд░рд╣, рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛рдлреА рдЫреЛрдЯреЗ рднрд╛рд░ рдХреЗ рддрд╣рдд рд╢реБрд░реВ рд╣реБрдИ - рдирд┐рдЧрд░рд╛рдиреА рдХреЗрд╡рд▓ рджрд╕ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдХреА рдЧрдИ, рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдПрдБ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдХреЙрдореНрдкреИрдХреНрдЯ рдереАрдВ ... рд▓реЗрдХрд┐рди рд╕рдордп рдмреАрддрдиреЗ рдХреЗ рд╕рд╛рде, рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рдирд┐рдЧрд░рд╛рдиреА рд░рдЦрдиреЗ рд╡рд╛рд▓реЗ рдореЗрдЬрдмрд╛рди рдереЗ, рдФрд░ рдПрдХ рдмрд╛рд░ рдлрд┐рд░ рд╕реЗ рдХреБрдЫ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.5TB рдХреЗ рдЖрдХрд╛рд░</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд╛рд▓реА </font><b><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ</font></b><font style="vertical-align: inherit;"> , рд╣рдордиреЗ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛ рдХрд┐ рдпрджреНрдпрдкрд┐ рдЗрд╕ рддрд░рд╣ рд░рд╣рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдпрд╣ рдмрд╣реБрдд рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯрд╛рдЗрдореНрд╕ рд▓рдЧрднрдЧ рдорд╣рд╛рдХрд╛рд╡реНрдп рдереЗ, рд╡рд┐рднрд┐рдиреНрди PostgreSQL 9.x рд╡реЗрд░рд┐рдПрдВрдЯ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдереЗ, рдЗрд╕рд▓рд┐рдП рд╕рднреА рд╡рд┐рднрд╛рдЬрдиреЛрдВ рдХреЛ "рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ" рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдерд╛ - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рд▓рд┐рдХрд╛ рд╡рд┐рд░рд╛рд╕рдд рдФрд░</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЧрддрд┐рд╢реАрд▓ рдорд╛рд░реНрдЧ </font><b><font style="vertical-align: inherit;">рдЯреНрд░рд┐рдЧрд░ рдХреЗ</font></b><font style="vertical-align: inherit;"> рдорд╛рдзреНрдпрдо рд╕реЗ </font></font><code>EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/-k/sv/tt-ksvme0jrmkz2qzkh8va95pjs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд░рд┐рдгрд╛рдореА рд╕рдорд╛рдзрд╛рди рдирд┐рдХрд▓рд╛ рд╕рд░реНрд╡рд╡реНрдпрд╛рдкреА рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рдЗрд╕реЗ рд╕рднреА рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП:</font></font><br>
<br>
<ul>
<li>   ┬л┬╗  ,     <b>   </b>.</li>
<li>       ┬л┬╗ ,     <b> </b> <code>BEFORE INSERT</code>  ┬л┬╗    .      тАФ     ...</li>
<li>тАж   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>CREATE TABLE ... (LIKE ... INCLUDING ...)</code></a>      <b>     </b>,         .</li>
</ul><br>
<h4>PG10:  </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рд╡рд┐рд░рд╛рд╕рдд рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рднрд╛рдЬрди рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рд░реВрдк рд╕реЗ рдПрдХ рд╕рдХреНрд░рд┐рдп рд▓реЗрдЦрди рдзрд╛рд░рд╛ рдпрд╛ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдмрд╛рд▓ рд╡рд░реНрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╣ рдпрд╛рдж рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╡рд╛рдВрдЫрд┐рдд рдЕрдиреБрднрд╛рдЧ рдХреЗ рдЪрдпрди рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдореЗрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреНрд╡рд┐рдШрд╛рдд рдЬрдЯрд┐рд▓рддрд╛ рдереА</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬреЛ рдХрд┐ 100+ рд╡рд░реНрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЖрдк рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдХреИрд╕реЗ ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PG10 рдореЗрдВ, рдпрд╣ рд╕реНрдерд┐рддрд┐ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЗрд╢реА рд╡рд┐рднрд╛рдЬрди рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓рд┐рдП рд╕рдорд░реНрдерди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдХреЗ рдмрд╣реБрдд рдЕрдиреБрдХреВрд▓рд┐рдд рдереА </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рддреБрд░рдВрдд рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рд▓реЗрдХрд┐рди ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдореИрдиреБрдЕрд▓ рдХреЛ рдЦреЛрджрдиреЗ рдХреЗ рдмрд╛рдж рдирд┐рдХрд▓рд╛, рдЗрд╕ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдореВрд▓ рд░реВрдк рд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рддрд╛рд▓рд┐рдХрд╛:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрдХреНрд░рдорд┐рдд рдХреЗ рд╡рд┐рд╡рд░рдг рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкрд░ рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреБрдж рдХреЛрдИ "рд╡рдВрд╢рдЬ" рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ </font></font><code>INSERT ... ON CONFLICT</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдиреБрднрд╛рдЧ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджрд░реНрджрдирд╛рдХ рд░реВрдк рд╕реЗ рд╣рдорд╛рд░реЗ рдорд╛рдереЗ рдкрд░ рдПрдХ рд░реЗрдХ рд╣реЛ рд░рд╣рд╛ рд╣реИ, рд╣рдордиреЗ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛ рдХрд┐ рд╣рдо рдЖрд╡реЗрджрди рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдП рдмрд┐рдирд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдереЗ, рдФрд░ рдЫрд╣ рдорд╣реАрдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рд╢реЛрдз рдХреЛ рд╕реНрдердЧрд┐рдд рдХрд░ рджрд┐рдпрд╛ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PG10: рджреВрд╕рд░рд╛ рдореМрдХрд╛</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдмрд╛рд░реА-рдмрд╛рд░реА рд╕реЗ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреВрдВрдХрд┐ рдЯреНрд░рд┐рдЧрд░ </font></font><code>ON CONFLICT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдЫ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рдЧрдП рдереЗ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдЙрдиреНрд╣реЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдордзреНрдпрд╡рд░реНрддреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░реЙрдХреНрд╕реА рддрд╛рд▓рд┐рдХрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдмрдирд╛рдИ </font><font style="vertical-align: inherit;">ред</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдордиреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯреНрд░рд┐рдЧрд░реНрд╕ рдореЗрдВ </font><b><font style="vertical-align: inherit;">"рд░реВрдЯрд┐рдВрдЧ" рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛ рд▓рд┐рдпрд╛</font></b><font style="vertical-align: inherit;"> - рдЕрд░реНрдерд╛рддреН </font></font><code>EXECUTE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдиреНрд╣реЛрдВрдиреЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЗ рд╕рд╛рде</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдЕрд▓рдЧ </font><b><font style="vertical-align: inherit;">рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдЯреЗрдмрд▓</font></b><font style="vertical-align: inherit;"> рдирд┐рдХрд╛рд▓реА </font><font style="vertical-align: inherit;">рддрд╛рдХрд┐ рд╡реЗ рдкреНрд░реЙрдХреНрд╕реА рдЯреЗрдмрд▓ рдкрд░ рднреА рдореМрдЬреВрдж рди рд╣реЛрдВред</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/3h/ra/sn3hrac9yg0-hrifkjszy7fhih0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдВрдд рдореЗрдВ, рдЗрд╕ рд╕рдм рдХреЗ рдмрд╛рдж, рдореБрдЦреНрдп рддрд╛рд▓рд┐рдХрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореВрд▓ рд░реВрдк рд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рд╣реЛ рдЧрдИ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХ рдирдпрд╛ рдЕрдиреБрднрд╛рдЧ рдмрдирд╛рдирд╛ рдЖрд╡реЗрджрди рдХреА рдЕрдВрддрд░рд╛рддреНрдорд╛ рдХреА рдЖрд╡рд╛рдЬ рдкрд░ рдмрдирд╛ рд╣реБрдЖ рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рджреЗрдЦрд╛" рд╢рдмреНрджрдХреЛрд╢реЛрдВ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрд┐рд╕реА рднреА рд╡рд┐рд╢реНрд▓реЗрд╖рдгрд╛рддреНрдордХ рдкреНрд░рдгрд╛рд▓реА рдХреА рддрд░рд╣, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рднреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рддрдереНрдп" рдФрд░ "рдХрдЯ"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рд╢рдмреНрджрдХреЛрд╢реЛрдВ) рдереЗред рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЗрд╕ рдХреНрд╖рдорддрд╛ рдореЗрдВ рдереЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣реА рдкреНрд░рдХрд╛рд░ рдХреЗ рдзреАрдореЗ рдкреНрд░рд╢реНрдиреЛрдВ рдпрд╛ рдкреНрд░рд╢реНрди рдХреЗ рдкрд╛рда рдХрд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">"рдЯреЗрдореНрдкрд▓реЗрдЯ" рдХрд╛ рдореБрдЦреНрдп рднрд╛рдЧ</font></a><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдорд╛рд░реЗ "рддрдереНрдпреЛрдВ" рдХреЛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рд╢рд╛рдВрддрд┐ рд╕реЗ рдЕрдкреНрд░рдЪрд▓рд┐рдд рд╡рд░реНрдЧреЛрдВ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛, рдФрд░ рдЙрдиреНрд╣реЛрдВрдиреЗ рд╣рдореЗрдВ (рд▓реЙрдЧ!) рдирд╣реАрдВ рдХрд┐рдпрд╛ред рд▓реЗрдХрд┐рди рдЬрд┐рди рд╢рдмреНрджрдХреЛрд╢реЛрдВ рдХреЗ рд╕рд╛рде рдпрд╣ рд╕рдорд╕реНрдпрд╛ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдордиреЗ рдЖрдИ </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">рдпрд╣ рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЙрдирдореЗрдВ рд╕реЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдирд╣реАрдВ рдереЗ, рд▓реЗрдХрд┐рди рд▓рдЧрднрдЧ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100TB "рддрдереНрдпреЛрдВ" рд╕реЗ 2.5TB рдХреЗ рд▓рд┐рдП рдПрдХ рд╢рдмреНрджрдХреЛрд╢ рдирд┐рдХрд▓рд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред рдЖрдк рдРрд╕реА рддрд╛рд▓рд┐рдХрд╛ рд╕реЗ рдХреБрдЫ рднреА рдЖрд╕рд╛рдиреА рд╕реЗ рдирд╣реАрдВ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрдкрдиреЗ рдЗрд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рд╕рдордп рдореЗрдВ рдирд┐рдЪреЛрдбрд╝ рдирд╣реАрдВ рд▓рд┐рдпрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ рд▓рд┐рдЦрдирд╛ рдзреАрд░реЗ-рдзреАрд░реЗ рдзреАрдорд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдПрдХ рд╢рдмреНрджрдХреЛрд╢ рдХреА рддрд░рд╣ рд▓рдЧрддрд╛ рд╣реИ ... рдЗрд╕рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЛ рдПрдХ рдмрд╛рд░ рдмрд┐рд▓реНрдХреБрд▓ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП ... рдФрд░ рдпрд╣ рд╕рд╣реА рд╣реИ, рд▓реЗрдХрд┐рди! .. рдХреЛрдИ рднреА рд╣рдореЗрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд░ рджрд┐рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рд╢рдмреНрджрдХреЛрд╢ рдХреЗ рд▓рд┐рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ </font><b><font style="vertical-align: inherit;">рдХрд░рддрд╛ рд╣реИ</font></b><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">рд╣рд╛рдБ, рдпрд╣ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЕрддрд┐рд░реЗрдХ рд▓рд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЫреЛрдЯреЗ рдЦрдВрдб рдЖрдХрд╛рд░ рдХреЗ рдХрд╛рд░рдг </font><b><font style="vertical-align: inherit;">рддреЗрдЬреА рд╕реЗ рд▓рд┐рдЦрдирд╛ / рдкрдврд╝рдирд╛</font></b></font></li>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдзрд┐рдХ рдХреЙрдореНрдкреИрдХреНрдЯ рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдХреЗ </font><b><font style="vertical-align: inherit;">рдХрдо рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░реЗрдВ</font></b></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдо рдбреЗрдЯрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛ рдЕрдкреНрд░рдЪрд▓рд┐рдд рд╣рдЯрд╛рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рдХрд╛рд░рдг </font><b><font style="vertical-align: inherit;">рдХрдо рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдХрд░реЗрдВ</font></b></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдкрд╛рдпреЛрдВ рдХреЗ рдкреВрд░реЗ рдкрд░рд┐рд╕рд░ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╕реАрдкреАрдпреВ рд▓реЛрдб ~ 30% рдФрд░ рдбрд┐рд╕реНрдХ рджреНрд╡рд╛рд░рд╛ рдШрдЯрд╛рдпрд╛ рдЧрдпрд╛ - ~ 50% рджреНрд╡рд╛рд░рд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/re/uf/x0/reufx0_4pxhj6cci456x4eb6j8q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрд╕реА рд╕рдордп, рд╣рдордиреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдареАрдХ рдЙрд╕реА рдЪреАрдЬрд╝ рдХреЛ рд▓рд┐рдЦрдирд╛ рдЬрд╛рд░реА рд░рдЦрд╛, рдмрд╕ рдХрдо рд▓реЛрдб рдХреЗ рд╕рд╛рдеред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># реи </font><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рд╡рд┐рдХрд╛рд╕ рдФрд░ рд░реАрдлреИрдХреНрдЯрд░рд┐рдВрдЧ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдЗрд╕ рддрдереНрдп рдкрд░ рд╕рдордЭреМрддрд╛ рдХрд┐рдпрд╛ рдХрд┐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рджрд┐рди рдХреЗ рд▓рд┐рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде </font><b><font style="vertical-align: inherit;">рд╣рдорд╛рд░рд╛ рдЕрдкрдирд╛ рдЦрдВрдб рд╣реИ</font></b><font style="vertical-align: inherit;"> ред рджрд░рдЕрд╕рд▓, рдпрд╣ </font></font><code>CHECK (dt = '2018-10-12'::date)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЦрдВрдб рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд╛рдЬрди рдХреБрдВрдЬреА рдФрд░ рд╕реНрдерд┐рддрд┐ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреВрдБрдХрд┐ рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдХреА рд╕рднреА рд░рд┐рдкреЛрд░реНрдЯ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рддрд┐рдерд┐ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдмрдирд╛рдИ рдЧрдИ рд╣реИрдВ, рддреЛ "рдЧреИрд░-рд╡рд┐рднрд╛рдЬрд┐рдд рд╕рдордп" рд╕реЗ рд╕рдВрдХреЗрдд рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдереЗ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╕рд░реНрд╡рд░, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд┐рдерд┐</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдпреЛрдЬрдирд╛ рдЯреЗрдореНрдкрд▓реЗрдЯ)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╕рд░реНрд╡рд░, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд┐рдерд┐</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдпреЛрдЬрдирд╛ рдиреЛрдб)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд┐рдерд┐</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рддреНрд░реБрдЯрд┐ рд╡рд░реНрдЧ) рд╕рд░реНрд╡рд░)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЕрдм рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ </font><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдРрд╕реЗ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗ </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрдиреЗ рдЙрджрд╛рд╣рд░рдг рд╣реИрдВ</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХреЗ рднреАрддрд░ </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рд░реАрдЦ рд╕реНрдерд┐рд░ рд╣реИ</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЕрдм рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдРрд╕реЗ рд╕реВрдЪрдХрд╛рдВрдХ рдореЗрдВ рд╣реИрдВ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рддреБрдЪреНрдЫ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд░реВрдк рд╕реЗ рдЦреЗрддреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рд░реВрдк </font><b><font style="vertical-align: inherit;">рдореЗрдВ рдПрдХ рд╕реНрдерд┐рд░рд╛рдВрдХ рджрд░реНрдЬ</font></b><font style="vertical-align: inherit;"> рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдЗрд╕рдХреА рдорд╛рддреНрд░рд╛, рдФрд░ рдЙрд╕ рдкрд░ рдЦреЛрдЬ рдХрд╛ рд╕рдордп рдмрдирд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЛрдИ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рд▓рд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЦреБрдж рдХреЛ рдПрдХ рд░реЗрдХ рдЫреЛрдбрд╝ рджрд┐рдпрд╛, рдЙрдлрд╝ ...</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rv/to/de/rvtodengrwqlkufq8ovxlp71xn4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдиреБрдХреВрд▓рди рдХреА рджрд┐рд╢рд╛ рд╕реНрдкрд╖реНрдЯ рд╣реИ - рдмрд╕ </font><font style="vertical-align: inherit;">рд╡рд┐рднрд╛рдЬрд┐рдд рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдкрд░ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рдЕрдиреБрдХреНрд░рдорд┐рдд рд╕реЗ рджрд┐рдирд╛рдВрдХ рдлрд╝реАрд▓реНрдб рдирд┐рдХрд╛рд▓реЗрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рд╡реЙрд▓реНрдпреВрдо рдХреЗ рд╕рд╛рде, рд▓рд╛рдн рд▓рдЧрднрдЧ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1TB / рд╕рдкреНрддрд╛рд╣ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЕрдм рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд╕ рдЯреЗрд░рд╛рдмрд╛рдЗрдЯ рдХреЛ рдЕрднреА рднреА рдХрд┐рд╕реА рддрд░рд╣ рдиреАрдЪреЗ рд▓рд┐рдЦрд╛ рдЬрд╛рдирд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдпрд╣реА рд╣реИ, рд╣рдореЗрдВ рднреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм рдХрдо рдбрд┐рд╕реНрдХ рд▓реЛрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">рдЗрд╕ рдЪрд┐рддреНрд░ рдореЗрдВ, рд╕рдлрд╛рдИ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдкреНрд░рднрд╛рд╡, рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдПрдХ рд╕рдкреНрддрд╛рд╣ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x0/4d/dv/x04ddvnrw9ga5m5gt4fukn44vza.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 3 </font><font style="vertical-align: inherit;">рдкреАрдХ рд▓реЛрдб "рд╕реНрдорд┐рдпрд░"</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рднрд░реА рд╣реБрдИ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреА рдмрдбрд╝реА рдкрд░реЗрд╢рд╛рдирд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреБрдЫ рдСрдкрд░реЗрд╢рдиреЛрдВ </font><b><font style="vertical-align: inherit;">рдХрд╛ рдЕрддреНрдпрдзрд┐рдХ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди</font></b><font style="vertical-align: inherit;"> рдЬрд┐рд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред рдХрднреА-рдХрднреА "рдХреНрдпреЛрдВрдХрд┐ рдЙрдиреНрд╣реЛрдВрдиреЗ рдиреЛрдЯрд┐рд╕ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдерд╛", рдХрднреА-рдХрднреА "рдпрд╣ рдЖрд╕рд╛рди рдерд╛", рд▓реЗрдХрд┐рди рдЬрд▓реНрдж рдпрд╛ рдмрд╛рдж рдореЗрдВ рдЖрдкрдХреЛ рдЗрд╕рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдирд╛ рд╣реЛрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдкрд┐рдЫрд▓реА рддрд╕реНрд╡реАрд░ рдХреЛ рдХрд░реАрдм рд▓рд╛рддреЗ рд╣реИрдВ - рдФрд░ рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдбрд┐рд╕реНрдХ </font><font style="vertical-align: inherit;">рдкрдбрд╝реЛрд╕реА рдирдореВрдиреЛрдВ рдХреЗ рдмреАрдЪ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЛрд╣рд░реЗ рдЖрдпрд╛рдо рдХреЗ рд╕рд╛рде рдПрдХ рд▓реЛрдб рдХреЗ рд╕рд╛рде "рд╣рд┐рд▓рд╛рддрд╛ рд╣реИ"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬреЛ рдЬрд╛рд╣рд┐рд░ рд╣реИ рдХрд┐ рдЗрддрдиреЗ рд╕рд╛рд░реЗ рдСрдкрд░реЗрд╢рди рдХреЗ рд╕рд╛рде "рд╕рд╛рдВрдЦреНрдпрд┐рдХреАрдп" рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p4/9v/bw/p49vbwkzasfbjhcnudcmsqaxgaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИред </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рдЧрднрдЧ 1000 рд╕рд░реНрд╡рд░</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВ </font><font style="vertical-align: inherit;">, рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдПрдХ рдЕрд▓рдЧ рддрд╛рд░реНрдХрд┐рдХ рд╕реНрдЯреНрд░реАрдо рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдЯреНрд░реАрдо рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЖрд╡реГрддреНрддрд┐ рдХреЗ рд╕рд╛рде рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдЪрд┐рдд рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдбрдВрдк рдХрд░рддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="javascript hljs">setInterval(sendToDB, interval)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдБ рд╕рдорд╕реНрдпрд╛ рдЗрд╕ рддрдереНрдп рдореЗрдВ рдареАрдХ рд╣реИ рдХрд┐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рдзрд╛рдЧреЗ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рд╢реБрд░реВ рд╣реЛрддреЗ рд╣реИрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЗрд╕рд▓рд┐рдП рдЙрдирдХреЗ рд▓рд┐рдП рднреЗрдЬрдиреЗ рдХрд╛ рд╕рдордп рд▓рдЧрднрдЧ рд╣рдореЗрд╢рд╛ "рдмрд┐рдВрджреБ рдкрд░" рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдУрд╣реНрд╕ рдирдВрдмрд░ 2 ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдпрд╣ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ "рдпрд╛рджреГрдЪреНрдЫрд┐рдХ"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдордп </font><b><font style="vertical-align: inherit;">рдЕрд╡рдзрд┐ рдЬреЛрдбрд╝рдХрд░</font></b><font style="vertical-align: inherit;"> рдХрд╛рдлреА рдЖрд╕рд╛рдиреА рд╕реЗ рд╕рд╣реА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">setInterval(sendToDB, interval * (<span class="hljs-number">1</span> + <span class="hljs-number">0.1</span> * (<span class="hljs-built_in">Math</span>.random() - <span class="hljs-number">0.5</span>)))</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 4ред </font><font style="vertical-align: inherit;">рдХреИрд╢рд┐рдВрдЧ, рдХрд┐ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд░реВрд░рдд</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣реЛ рд╕рдХрддреА рд╣реИ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреАрд╕рд░реА рдкрд╛рд░рдВрдкрд░рд┐рдХ рдЙрдЪреНрдЪ рднрд╛рд░ рд╕рдорд╕реНрдпрд╛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╢</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреА </font><b><font style="vertical-align: inherit;">рдХрдореА рд╣реИ</font></b><font style="vertical-align: inherit;"> рдЬрд╣рд╛рдВ рдпрд╣ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реЛ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдХрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдпреЛрдЬрдирд╛ рдХреЗ рдиреЛрдбреНрд╕ (рдЗрди рд╕рднреА </font></font><code>Seq Scan on users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреЗ рдЯреВрдЯрдиреЗ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдирд╛ рд╕рдВрднрд╡ рдмрдирд╛ рджрд┐рдпрд╛ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рддреБрд░рдВрдд рднреВрд▓ рдЧрдП рдХрд┐ рд╡реЗ, рдореБрдЦреНрдп рд░реВрдк рд╕реЗ, рд╕рдорд╛рди рд╣реИрдВ, рднреВрд▓ рдЧрдП рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдирд╣реАрдВ, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдмрд╛рд░-рдмрд╛рд░ рдХреБрдЫ рднреА рдирд╣реАрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд╕реЗ рдЯреНрд░рд┐рдЧрд░ рдХрдЯ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>INSERT ... ON CONFLICT DO NOTHING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдбреЗрдЯрд╛ рд╡реИрд╕реЗ рднреА рдЖрдзрд╛рд░ рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдШрд░реНрд╖ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдЕрддрд┐рд░рд┐рдХреНрдд </font><b><font style="vertical-align: inherit;">рдкрдврд╝рдирд╛</font></b><font style="vertical-align: inherit;"> рдкрдбрд╝рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдУрд╣реНрд╕ рдирдВрдмрд░ 3 ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреИрд╢рд┐рдВрдЧ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ / рдмрд╛рдж рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рднреЗрдЬреЗ рдЧрдП рд░рд┐рдХреЙрд░реНрдб рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЕрдВрддрд░ рд╕реНрдкрд╖реНрдЯ рд╣реИ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/ed/jm/nuedjmsij1za8mx-dhkcvg36baw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдпрд╣ рд╕реНрдЯреЛрд░реЗрдЬ рд▓реЛрдб рдореЗрдВ рдПрдХ рд╕рд╣рд╡рд░реНрддреА рдЧрд┐рд░рд╛рд╡рдЯ рд╣реИ:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oc/bx/hz/ocbxhzmmplggqzowyekkkl2lsk0.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдкреВрд░реНрдг</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯреЗрд░рд╛рдмрд╛рдЗрдЯ-рдкреНрд░рддрд┐-рджрд┐рди рдХреЗрд╡рд▓ рдбрд░рд╛рд╡рдирд╛ рд▓рдЧрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рд╕рдм рдХреБрдЫ рд╕рд╣реА рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдХреЗрд╡рд▓ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 ^ 40 рдмрд╛рдЗрдЯреНрд╕ / 86400 рд╕реЗрдХрдВрдб = ~ 12.5MB / s рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬреЛ рдХрд┐ рдбреЗрд╕реНрдХрдЯреЙрдк IDE рд╢рд┐рдХрдВрдЬрд╛ рднреА рд╣реИред </font><font style="vertical-align: inherit;">:) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЧрдВрднреАрд░рддрд╛ рд╕реЗ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рджрд┐рди рдХреЗ рджреМрд░рд╛рди рд▓реЛрдб рдХреЗ рджрд╕ рдЧреБрдирд╛ "рддрд┐рд░рдЫрд╛" рдХреЗ рд╕рд╛рде, рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рдЖрдзреБрдирд┐рдХ рдПрд╕рдПрд╕рдбреА рдХреА рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/in/7l/e5/in7le5modvgype2possbfitaqxy.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi496996/index.html">рдкреЗрдЯреНрд░реЛрдХреЗрдорд┐рдХрд▓реНрд╕ рдореЗрдВ рдбреЗрдЯрд╛-рд╕рдВрдЪрд╛рд▓рд┐рдд рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ</a></li>
<li><a href="../hi496998/index.html">рдХреИрд╕реЗ рдЕрдкреНрд░рд╢рд┐рдХреНрд╖рд┐рдд рджрд┐рдорд╛рдЧ рдХреЛрд░реЛрдиреЛрд╡рд╛рдпрд░рд╕ рдХреЗ рдпреБрдЧ рдореЗрдВ рджреБрдирд┐рдпрд╛ рдХреЛ рдирд╖реНрдЯ рдХрд░ рджреЗрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi497000/index.html">рдкрд╛рд╡рд░ рдСрдЯреЛрдореЗрдЯрд┐рдХ рд╡реАрдПрд╕ рд▓реЙрдЬрд┐рдХ рдРрдкреНрд╕ред рд╕реБрд╡рд┐рдзрд╛рдПрдБ рддрд░реНрдХ Apps</a></li>
<li><a href="../hi497004/index.html">SSD рдХреЗ рд▓рд┐рдП рд▓рд┐рдирдХреНрд╕ рдкрд░ рд╕рдХреНрд░рд┐рдпрдг (TRIM) рдЫреЛрдбрд╝реЗрдВ</a></li>
<li><a href="../hi497006/index.html">DOM.ru рд╕реЗ MITM рд╣рдорд▓реЗ</a></li>
<li><a href="../hi497010/index.html">рдмрд╛рдЬрд╛рд░ рдореЗрдВ рдЧрд┐рд░рд╛рд╡рдЯ рдХреА рдЕрд╡рдзрд┐ рдореЗрдВ рдирд┐рд╡реЗрд╢: рд╕реНрдЯреЙрдХ рдПрдХреНрд╕рдЪреЗрдВрдЬ рдореЗрдВ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд▓рд┐рдП 3 рд░рдгрдиреАрддрд┐</a></li>
<li><a href="../hi497014/index.html">рдЖрдк рдХреМрди рд╣реИрдВ, рдХреНрдпреВрдП рдЗрдВрдЬреАрдирд┐рдпрд░ рдпрд╛ рдкрд░реАрдХреНрд╖рдХ?</a></li>
<li><a href="../hi497016/index.html">13 рдЕрдкреНрд░реИрд▓ рдЬрд╛рд╡рд╛ рдбрд╛рдЗрдЬреЗрд╕реНрдЯ</a></li>
<li><a href="../hi497020/index.html">рдбреЙрдХреНрдпреВрдореЗрдВрдЯрд╕рд╛рдЗрди, рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рдбрд┐рдЬрд┐рдЯрд▓ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕реЗрд╡рд╛, рдЕрдм рдЧреНрд▓реЛрдмрд▓рд╕рд╛рдЗрди рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИ</a></li>
<li><a href="../hi497022/index.html">рдХреЙрд░реНрдкреЛрд░реЗрдЯ рдиреЗрдЯрд╡рд░реНрдХ рдПрдХреНрд╕реЗрд╕ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ред рдирдпрд╛ рдПрдХреНрд╕рдЯреНрд░реАрдордЪрд┐рдВрдЧ X435 рдЧреАрдЧрд╛рдмрд┐рдЯ рд╕реНрд╡рд┐рдЪ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>