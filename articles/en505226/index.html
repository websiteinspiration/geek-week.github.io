<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ö üë∞üèø ü•§ Overlay a 2d texture on a 3d object using p5.js (part 1 - creating a pattern) ü§üüèª üíä #‚É£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The imposition of a flat drawing or pattern on a three-dimensional object is always a non-trivial task, and if at the same time you want to do it with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Overlay a 2d texture on a 3d object using p5.js (part 1 - creating a pattern)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505226/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/d4/n3/y3/d4n3y3ctwkgf4-n_oxmtycxt0yi.jpeg" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The imposition of a flat drawing or pattern on a three-dimensional object is always a non-trivial task, and if at the same time you want to do it with some kind of animation, the complexity increases at times. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, there is a fairly simple p5.js library, with which you can create complex spectacular patterns in just a few dozen lines of code. </font><font style="vertical-align: inherit;">I recently created such a project and now I want to give an example. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The easiest way to start is to create a new project in the online </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">editor.p5js.org</font></font></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By default, the new project is as follows:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
function setup () - sets the function that is executed only once </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
function draw () - repeats in an infinite loop </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start by creating a 2D radial pattern, which we then apply to our cube. When creating it, we will first use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Polar coordinates</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and only then translate them into the Cartesian coordinates of the form x, y familiar to most. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is important to understand: the polar coordinate of a point is determined by two numbers: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
r is the distance from the source point (for example, the center of the canvas) to the target point. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
a is the angle of the imaginary line relative to the starting point where the target point is located. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, the first parameter can vary from 0 to infinity, and the second - from 0 to 360.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The beauty of this approach is that it allows you to draw quite complex patterns with just one formula.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/in/xd/eo/inxdeo8zlssyrw14iiaae7cic3y.png" alt="image"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The polar rose is given by the equation r (œÜ) = 2 \ sin œÜ </font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To create variables, let's add two variables at the very beginning of the project: the first one responsible for the distance from the center and the second for the angle: let r = 10 let a = 0 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then, add the variable change to the draw () function, which runs in an infinite loop: a = a + 0.4 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, you get the following code:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r =<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a =<span class="hljs-number">0</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>);<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
    a = a + <span class="hljs-number">0.4</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we begin to translate the coordinates into the Cartesian coordinates x y familiar to us. </font><font style="vertical-align: inherit;">If you want to understand what exactly is happening in the code, then it is better to read the trigonometry tutorial, but since this is not so important for the result, you can simply paste the code into the same draw () function:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> x = r*cos(a)
<span class="hljs-keyword">let</span> y = r*sin(a)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To finally see the results of our mathematical calculations, we need to do two things:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paint objects with color (you can use the internal color dictionary or specify the usual RGB format code - three numbers)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set the shape of the distribution of points. </font><font style="vertical-align: inherit;">For example, an ellipse.</font></font></li>
</ul><br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  <font></font>
  <font></font>
  <span class="hljs-keyword">let</span> x = r*cos(a);
  <span class="hljs-keyword">let</span> y = r*sin(a);<font></font>
  fill(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  r = r + <span class="hljs-number">0.4</span><font></font>
    <font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/-7/iv/8k/-7iv8kzzvnf3zn2mv2uldo1tvmk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The parameters of the ellipse (position along X, position along Y, diameter along X, diameter along Y) are set using variables along x and y. Since the variable x depends on the variable r, which in our cycle is constantly increasing by 0.4, the red circle that we see will constantly move in the upper left corner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To move the reference point to the center, add the translate function (200,200) before the x variable. Now the circle will appear in the middle of our canvas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And let's solve another problem - now all the circles that appear are erased with each new cycle. To get out of this vicious circle, we need to move the creation of our canvas () beyond the draw () function and transfer it to the setup () function, which is responsible for creating the environment.</font></font><br>
<img src="https://habrastorage.org/webt/pf/wz/mo/pfwzmowjzxqtg7gnmvwtkv5fzoc.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After this change, we will see something similar to a loading circle. </font><font style="vertical-align: inherit;">The main problem is that now they are located very close to each other. </font><font style="vertical-align: inherit;">Let's add some space by setting a higher order variable C with a value of 20 and adding it to change each cycle by 0.6 (next to a). </font><font style="vertical-align: inherit;">Well, we will introduce it into our trigonometric formulas: x = r + c * cos (a) and y = r + c * sin (a)</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> =<span class="hljs-number">20</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
translate(<span class="hljs-number">200</span>,<span class="hljs-number">200</span>)
  <span class="hljs-keyword">let</span> x = r+*cos(a);
  <span class="hljs-keyword">let</span> y = r+*sin(a);<font></font>
  fill(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
   =  + <span class="hljs-number">0.6</span>
  a = a + <span class="hljs-number">0.4</span><font></font>
    <font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/j_/7d/r7/j_7dr7dee42fdgsm4pi-c9yq9xc.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Something seems to be looming. </font><font style="vertical-align: inherit;">Finally, let's reduce the value of a to 0.3, s to 0.06</font></font><br>
<br>
<pre><code class="javascript hljs"> =  + <span class="hljs-number">0.06</span>
a = a + <span class="hljs-number">0.3</span></code></pre><br>
<img src="https://habrastorage.org/webt/4s/4t/rf/4s4trfjd_x_iewiw8ectzn3cqva.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The blank for the pattern is ready, time to add it to the volume. </font><font style="vertical-align: inherit;">About how to do this, I will write in the next part. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There will be a link to part 2: holder</font></font></b><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you liked it, links to materials on p5.js:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to recreate the moire pattern effect in the p5.js library for a beginner (quick guide)</font></font></a></li>
</ul></blockquote><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The idea and part of the source code is taken from the article Nazia Fakhruddin: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating 2D texture on a 3D shape in p5.js</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link to the project results</font></font></a></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en505196/index.html">Bad leader - instruction manual</a></li>
<li><a href="../en505208/index.html">How and why should a product hold CustDev?</a></li>
<li><a href="../en505212/index.html">Apple warned looters to track all stolen phones</a></li>
<li><a href="../en505218/index.html">Online Security Meeting</a></li>
<li><a href="../en505220/index.html">Tips for choosing a 2G / 3G / 4G / 5G cellular signal booster</a></li>
<li><a href="../en505240/index.html">The dark side of work in Yandex.Market</a></li>
<li><a href="../en505246/index.html">Print the first tranche with Upwork</a></li>
<li><a href="../es486176/index.html">Memo de correspondencia de correo electr√≥nico corporativo</a></li>
<li><a href="../es486178/index.html">FOSS News No. 1 - revisi√≥n de noticias gratuitas y de c√≥digo abierto del 27 de enero al 2 de febrero de 2020</a></li>
<li><a href="../es486180/index.html">Consejos y fuentes para crear aplicaciones sin servidor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>