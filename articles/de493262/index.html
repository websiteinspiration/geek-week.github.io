<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏐 💪🏼 🤵🏾 Beginnend mit Kerndaten! Schwierig in einfachen Worten 🙍🏻 🔑 👢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Viele Themen wurden bereits mit Core Data geschrieben, aber die meisten dieser Artikel sind in englischer Sprache verfasst und verwenden viele „intell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Beginnend mit Kerndaten! Schwierig in einfachen Worten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493262/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viele Themen wurden bereits mit Core Data geschrieben, aber die meisten dieser Artikel sind in englischer Sprache verfasst und verwenden viele „intelligente“ Wörter, die Anfänger verwirren können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel werde ich versuchen, über dieses Framework von Apple in einer verständlichen Sprache zu sprechen, damit selbst die "kleinsten" Programmierer Informationen für sich selbst herausholen und das Mindestmaß an Wissen erhalten, das ihnen auch bei ihren Projekten hilft.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kleines offtopic</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Core Data ist ein sehr leistungsfähiges Tool, mit dem Sie Daten in Ihrer Anwendung speichern und später verwenden können. </font><font style="vertical-align: inherit;">In diesem Artikel werde ich NICHT über das Arbeiten mit mehreren Kontexten mit anschließender Synchronisierung, das Lösen von Migrationsproblemen und verschiedene erweiterte Funktionen sprechen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Zielgruppe dieses Artikels sind Personen, die im Allgemeinen keine Erfahrung mit Core Data hatten.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun ... Fangen wir an!</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu beginnen, müssen Sie die .xcdatamodeld-Datei selbst erstellen. Nachdem Sie sie geöffnet haben, wird am unteren Bildschirmrand die Schaltfläche "Entität hinzufügen" angezeigt. </font><font style="vertical-align: inherit;">Durch Klicken darauf wird Ihr Objektmodell erstellt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/eu/c5/tieuc5lzlieaqlnl2hzsnbgnypu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt genauer:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihre Entität. </font><font style="vertical-align: inherit;">Sie können sich Entity als Ihre Datenstruktur vorstellen, die von einer bestimmten Klasse - NSManagedObject - vererbt wird und auch bestimmte Felder zum Schreiben von Daten enthält, dazu später mehr.</font></font></li>
<li> Attributes.    Entity    .    +       .    : <br>
<ul>
<li>Integer 16/32/64 —        .       ,      .       Int,         .<br>
: Integer16(15)</li>
<li>Decimal/Double/Float —          .       ,      .</li>
<li>String —        .</li>
<li>Boolean —        .</li>
<li>Date —        Date. <br>
<blockquote>NOTE: Core Data           00:00:00 UTC 1  1970   .</blockquote></li>
<li>Binary Data —       Data<br>
<blockquote>NOTE:      Allow External Storage. Core Data   ,     100 ,       Core Data        .           . </blockquote></li>
<li>UUID —          UUID.</li>
<li>URI —        URL</li>
<li>Transformable —     ,       NSCoding.</li>
</ul><br>
</li>
<li> Relationship.           Entity. Relationships  :<br>
<br>
<ol>
<li>One-to-One</li>
<li>One-to-Many</li>
<li>Many-to-Many</li>
</ol><br>
  Relationships.<br>
 <br>
   3 Entities, Andrey, Home, Car. <br>
<br>
<ul>
<li>     — One-to-One Relationship.</li>
<li>    1,    2    — One-to-Many Relationship.</li>
<li> Many-to-Many Relationship     .                       .</li>
</ul></li>
<li>         Entity</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codegen-Feld. </font><font style="vertical-align: inherit;">Kurz gesagt, dieses Feld gibt an, wer die Erstellung von NSManagedObject-Klassen regelt. </font><font style="vertical-align: inherit;">Wählen Sie zur Vereinfachung der Bedienung </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manuell / Keine aus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und Core Data kann die erforderlichen Klassen für Ihre Entität selbst erstellen. </font><font style="vertical-align: inherit;">Darüber unten.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie </font><font style="vertical-align: inherit;">
zum Erstellen unserer Entitätsklasse </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Editor&gt; NSManagedObject-Unterklasse erstellen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/yl/b6/d7ylb6nrjnzpsqytkn4-lzq-ctq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie Standardwerte für Ihre Attribute </font><font style="vertical-align: inherit;">festlegen </font><font style="vertical-align: inherit;">möchten, verwenden Sie die folgende Methode:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">awakeFromInsert</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.awakeFromInsert()<font></font>
        date = <span class="hljs-type">Date</span>()<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten Sie mit NSManagedObjectContext und PersistentStoreCoordinator</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kerndatenstapelhierarchie: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sp/jl/dr/spjldrdtwsjpgd5_6zxq7snxvj8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einfachen Worten werden alle Ihre Entitäten im obigen Diagramm als verwaltete Objekte angezeigt. </font><font style="vertical-align: inherit;">Alle unsere verwalteten Objekte werden in NSManagedObjectContext gespeichert. </font><font style="vertical-align: inherit;">Kontext Es bezieht sich auf den NSPersistentStoreCoordinator, der Ihre gespeicherten Daten nach dem Zugriff auf SQL als Zeilencache speichert. Dies ist derzeit jedoch nicht der Fall. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Instanz Ihres ManagedObject (Entity) zu erstellen, müssen Sie auf Ihren NSPersistentContainer verweisen, der ein Wrapper für Ihren NSPersistentStoreCoordinator ist.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> persistentContainer: <span class="hljs-type">NSPersistentContainer</span> = {
      <span class="hljs-keyword">let</span> container = <span class="hljs-type">NSPersistentContainer</span>(name: <span class="hljs-string">"SavingLearn"</span>)<font></font>
      container.loadPersistentStores(completionHandler: { (storeDescription, error) <span class="hljs-keyword">in</span>
          <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error <span class="hljs-keyword">as</span> <span class="hljs-type">NSError?</span> {
              <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"Unresolved error \(error), \(error.userInfo)"</span>)<font></font>
          }<font></font>
      })<font></font>
      <span class="hljs-keyword">return</span> container<font></font>
  }()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes müssen wir über unseren PersistentContainer auf den NSManagedObjectContext zugreifen: </font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> context: <span class="hljs-type">NSManagedObjectContext</span> = {
    <span class="hljs-keyword">return</span> persistentContainer.viewContext<font></font>
  }()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können wir eine Instanz unseres ManageObject aus unserem Kontext erstellen und ihm einen Wert zuweisen:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> person = <span class="hljs-type">Person</span>(context: context)<font></font>
person.age = <span class="hljs-number">32</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objekt speichern</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Speichern verwenden wir eine einfache Funktion: </font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">saveContext</span> <span class="hljs-params">()</span></span> {
      <span class="hljs-keyword">if</span> context.hasChanges {
          <span class="hljs-keyword">do</span> {
              <span class="hljs-keyword">try</span> context.save()<font></font>
          } <span class="hljs-keyword">catch</span> {<font></font>
            context.rollback()<font></font>
              <span class="hljs-keyword">let</span> nserror = error <span class="hljs-keyword">as</span> <span class="hljs-type">NSError</span>
              <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"Unresolved error \(nserror), \(nserror.userInfo)"</span>)<font></font>
          }<font></font>
      }<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der obigen Methode überprüfen wir unseren Kontext auf Änderungen und speichern diese, falls vorhanden. </font><font style="vertical-align: inherit;">Im Fehlerfall wird die Methode ausgeführt:</font></font><br>
<br>
<pre><code class="swift hljs">context.rollback()</code></pre><br>
<blockquote><pre><code class="swift hljs">rollback()</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Methode bringt unseren Kontext in den ursprünglichen Zustand zurück und bricht alle Änderungen ab, die daran vorgenommen wurden.</font></font></blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objekt löschen</font></font></b><br>
<br>
<pre><code class="swift hljs">context.delete(object)</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ermöglicht das einfache Entfernen eines Objekts aus den Kerndaten.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HINWEIS: Damit die Änderungen wirksam werden, muss der Kontext gespeichert werden, da sonst nicht alle Änderungen gespeichert werden. </font></font><pre><code class="swift hljs">context.save()</code></pre> </blockquote><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle Objekte abrufen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein Array unserer Objekte aus Core Data abzurufen, müssen wir NSFetchRequest ausführen. </font><font style="vertical-align: inherit;">Ich werde nicht tief in die volle Leistungsfähigkeit von FetchRequest eintauchen, da dieser Artikel für Anfänger gedacht ist.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> fetchRequest: <span class="hljs-type">NSFetchRequest</span>&lt;<span class="hljs-type">Person</span>&gt; = <span class="hljs-type">Person</span>.fetchRequest()
<span class="hljs-keyword">let</span> objects = <span class="hljs-keyword">try</span> context.fetch(fetchRequest)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter der Haube macht NSFetchRequest einen tollen Job: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSFetchRequest wechselt zum Persistent Store Coordinator</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Persistent Store Coordinator sendet eine Anfrage an den Persistent Store </font></font></li>
<li>Persistent Store     SQL</li>
<li>SQL       .    ID  Row Value.  Row Value   Persistent Store      Row Cache   ID. </li>
<li>Persistent Store  Managed Objects   ID     Persistent Store Coordinator.    fault ()          .   Managed Object Context      ID, Core Data       SQL.</li>
<li>Persistent Store Coordinator   context  Managed Object</li>
<li>   Core Data    .        <pre><code class="swift hljs">includePendingChanges = <span class="hljs-literal">false</span></code></pre> </li>
<li>  NSManagedObject </li>
</ol><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANMERKUNG: Während der NSFetchRequest Managed Object Context ausgeführt wird und der Persistent Store Coordinator in einer synchronen Warteschlange ausgeführt wird, werden alle Prozesse blockiert, während ein anderer Prozess ausgeführt wird. </font></font></blockquote><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel habe ich die Mindestinformationen beschrieben, die meiner Meinung nach für die Arbeit mit Core Data erforderlich sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können Sie Ihre eigenen Datenmodelle erstellen, speichern, löschen und abrufen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie an einem fortgeschritteneren Thema über die Arbeit mit Kerndaten und interessanten Tipps interessiert sind, schreiben Sie in die Kommentare und ich werde herausfinden, was dagegen getan werden kann. </font><font style="vertical-align: inherit;">Viel Spaß beim Codieren!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493244/index.html">Was kann ein Quantencomputer?</a></li>
<li><a href="../de493248/index.html">Webinar "Winnum Opportunities for Industrial Analytics"</a></li>
<li><a href="../de493250/index.html">Was passiert gerade mit Reisen - und wie Sie sich beim Transport schützen können</a></li>
<li><a href="../de493252/index.html">Unterrichtserfahrung an einer Entwicklungsschule oder warum Sie nach dem Studium zur Schule gehen müssen</a></li>
<li><a href="../de493254/index.html">Das System des Massenabhörens der Bevölkerung war für das FBI praktisch nutzlos</a></li>
<li><a href="../de493264/index.html">Wo Sie vorher waren oder implizite Funktionen von BI BA</a></li>
<li><a href="../de493266/index.html">45 Youtube-Kanäle in englischer Sprache für IT-Profis</a></li>
<li><a href="../de493268/index.html">Pentester Angewandt</a></li>
<li><a href="../de493272/index.html">So aktivieren Sie Google-Dokumente offline im neuen Microsoft Edge</a></li>
<li><a href="../de493274/index.html">Über 30 prägnante professionelle Empfehlungen für Android-Entwickler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>