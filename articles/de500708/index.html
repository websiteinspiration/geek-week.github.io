<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑‍🤝‍🧑 🖥️ 🐴 Sicherheit und DBMS: Was Sie bei der Auswahl von Schutzwerkzeugen beachten müssen 🅱️ 🕺 👩🏻‍🤝‍👨🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mein Name ist Denis Rozhkov, ich bin Leiter der Softwareentwicklung bei Gazinformservice im Jatoba- Produktteam . Gesetze und Unternehmensvorschriften...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sicherheit und DBMS: Was Sie bei der Auswahl von Schutzwerkzeugen beachten müssen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500708/"><h1><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e1/315/3ed/1e13153edc98d4ac4b2de6858a7ea48c.png"></div></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Name ist Denis Rozhkov, ich bin Leiter der Softwareentwicklung bei Gazinformservice im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jatoba-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Produktteam </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Gesetze und Unternehmensvorschriften stellen bestimmte Anforderungen an die Sicherheit der Datenspeicherung. </font><font style="vertical-align: inherit;">Niemand möchte, dass Dritte Zugriff auf vertrauliche Informationen erhalten. Daher sind die folgenden Punkte für jedes Projekt wichtig: Identifizierung und Authentifizierung, Verwaltung des Datenzugriffs, Gewährleistung der Integrität von Informationen im System, Aufzeichnung von Sicherheitsereignissen. </font><font style="vertical-align: inherit;">Daher möchte ich über einige interessante Punkte in Bezug auf die DBMS-Sicherheit sprechen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Artikel wurde von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup verfasst,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> das von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gehostet wird </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn Sie nicht lesen möchten, können Sie sehen:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/n-54j9FHaMU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Artikel wird drei Teile haben:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So schützen Sie Verbindungen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist eine Prüfung von Aktionen und wie wird aufgezeichnet, was in der Datenbank geschieht, und es wird eine Verbindung hergestellt?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie schützt man Daten in der Datenbank selbst und welche Technologien gibt es dafür?</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a7d/19f/d89/a7d19fd894a9ea6e3f0ff7a0ad42db36.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die drei Komponenten der DBMS-Sicherheit: Verbindungsschutz, Aktivitätsprüfung und Datenschutz</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindungsschutz</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können entweder direkt oder indirekt über Webanwendungen eine Verbindung zur Datenbank herstellen. </font><font style="vertical-align: inherit;">In der Regel interagiert der Benutzer von der Seite des Unternehmens, dh die Person, die mit dem DBMS arbeitet, nicht direkt mit dem DBMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor Sie über das Sichern von Verbindungen sprechen, müssen Sie wichtige Fragen beantworten, die davon abhängen, wie Sicherheitsmaßnahmen aufgebaut werden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ob ein Geschäftsbenutzer einem DBMS-Benutzer entspricht;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wird der Zugriff auf DBMS-Daten nur über die von Ihnen gesteuerte API bereitgestellt oder erfolgt der direkte Zugriff auf Tabellen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ob das DBMS in einem separaten geschützten Segment zugeordnet ist, wer mit ihm interagiert und wie;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ob Pooling / Proxy und Middleware verwendet werden, wodurch Informationen darüber geändert werden können, wie die Verbindung hergestellt wird und wer die Datenbank verwendet.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun wollen wir sehen, welche Tools zum Schutz von Verbindungen verwendet werden können:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie Datenbank-Firewall-Klassenlösungen. </font><font style="vertical-align: inherit;">Zumindest eine zusätzliche Schutzschicht erhöht die Transparenz der Vorgänge im DBMS maximal - Sie können zusätzlichen Datenschutz bieten.</font></font></li>
<li>  .     ,    .    —      -,    ,   .    ,  ,      .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>,    MS SQL Vulnerability Assessmen   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>.&nbsp;</li>
<li>    .   ,   ,       ,         , ,    .      .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie SSL. Wenn Sie keine Netzwerktrennung des DBMS von den Endbenutzern haben, befindet es sich nicht in einem separaten VLAN. </font><font style="vertical-align: inherit;">In solchen Fällen muss der Kanal zwischen dem Verbraucher und dem DBMS selbst geschützt werden. </font><font style="vertical-align: inherit;">Schutzwerkzeuge gehören zu Open Source.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie wirkt sich dies auf die DBMS-Leistung aus?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns ein PostgreSQL-Beispiel an, wie sich SSL auf die CPU-Auslastung auswirkt, das Timing erhöht und das TPS verringert, wenn zu viele Ressourcen verfügbar sind, wenn Sie es aktivieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir laden PostgreSQL mit pgbench - es ist ein einfaches Programm zum Ausführen von Leistungstests. </font><font style="vertical-align: inherit;">Es führt wiederholt eine Folge von Befehlen aus, möglicherweise in parallelen Datenbanksitzungen, und berechnet dann die durchschnittliche Transaktionsgeschwindigkeit. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 1 ohne SSL und mit SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - mit jeder Transaktion wird eine Verbindung hergestellt:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require&nbsp;<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vs.</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 2 ohne SSL und mit SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - alle Transaktionen werden in einer Verbindung ausgeführt:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vs.</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andere Einstellungen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">scaling factor: 1<font></font>
query mode: simple<font></font>
number of clients: 10<font></font>
number of threads: 1<font></font>
number of transactions per client: 5000<font></font>
number of transactions actually processed: 50000/50000</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testergebnisse</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KEIN SSL</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></strong></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Verbindung wird bei jeder Transaktion hergestellt</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Latenzdurchschnitt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">171,915 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">187,695 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps einschließlich Verbindungsaufbau</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.168112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53,278062</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps ohne Verbindungsaufbau</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64.084546</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.725846</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentralprozessor</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle Transaktionen werden in einer Verbindung ausgeführt.</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Latenzdurchschnitt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,722 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,342 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps einschließlich Verbindungsaufbau</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1587.657278</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1576.792883</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps ohne Verbindungsaufbau</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1588.380574</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1577.694766</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentralprozessor</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei geringer Belastung ist der Effekt von SSL mit dem Messfehler vergleichbar. Wenn die übertragene Datenmenge sehr groß ist, kann die Situation anders sein. Wenn wir für jede Transaktion eine Verbindung herstellen (dies ist selten, normalerweise wird die Verbindung zwischen Benutzern geteilt), haben Sie eine große Anzahl von Verbindungen / Verbindungsabbrüchen. Der Effekt kann etwas größer sein. Das heißt, es besteht möglicherweise das Risiko einer Leistungsverschlechterung. Der Unterschied ist jedoch nicht so groß, dass kein Schutz verwendet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass es beim Vergleich der Betriebsarten einen großen Unterschied gibt: Innerhalb derselben Sitzung arbeiten Sie oder anders. Dies ist verständlich: Ressourcen werden für die Erstellung jeder Verbindung aufgewendet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir hatten einen Fall, als wir Zabbix im Vertrauensmodus verbunden haben, dh wir haben md5 nicht überprüft, es war keine Authentifizierung erforderlich. Dann bat der Kunde, den MD5-Authentifizierungsmodus zu aktivieren. Dies belastete die CPU stark und die Leistung sank. Sie suchten nach Optimierungsmöglichkeiten. Eine der möglichen Lösungen für das Problem besteht darin, eine Netzwerkeinschränkung zu implementieren, separate VLANs für das DBMS zu erstellen, Einstellungen hinzuzufügen, damit klar ist, wer von wo aus eine Verbindung herstellt, und die Authentifizierung zu entfernen. Sie können die Authentifizierungseinstellungen auch optimieren, um die Kosten für die Aktivierung der Authentifizierung zu senken, im Allgemeinen jedoch mithilfe verschiedener Methoden Die Authentifizierung wirkt sich auf die Leistung aus und erfordert, dass diese Faktoren beim Entwurf der Rechenleistung von Servern (Hardware) für ein DBMS berücksichtigt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fazit: In einer Reihe von Lösungen können bereits kleine Nuancen der Authentifizierung das Projekt stark beeinträchtigen. Es ist schlecht, wenn es nur bei der Implementierung in einem Produkt klar wird.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prüfung von Maßnahmen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Audit kann nicht nur ein DBMS sein. </font><font style="vertical-align: inherit;">Audit ist der Erhalt von Informationen darüber, was in verschiedenen Segmenten geschieht. </font><font style="vertical-align: inherit;">Dies kann sowohl eine Datenbank-Firewall als auch das Betriebssystem sein, auf dem das DBMS basiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In kommerziellen DBMS auf Unternehmensebene mit Auditing ist alles in Ordnung, in Open Source - nicht immer. </font><font style="vertical-align: inherit;">Folgendes hat PostgreSQL:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardprotokoll - integrierte Protokollierung;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterungen: pgaudit - Wenn Sie nicht über genügend Standardprotokollierung verfügen, können Sie separate Einstellungen verwenden, um einige der Probleme zu lösen.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergänzung zum Bericht im Video:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
„Die grundlegende Registrierung von Bedienern kann mit einer Standardprotokollierungsfunktion mit log_statement = all bereitgestellt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist für die Überwachung und andere Zwecke akzeptabel, bietet jedoch nicht den Detaillierungsgrad, der normalerweise für ein Audit erforderlich ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es reicht nicht aus, eine Liste aller mit der Datenbank ausgeführten Vorgänge zu haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sollte auch möglich sein, bestimmte Aussagen zu finden, die für den Abschlussprüfer von Interesse sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Standard-Protokollierungstool zeigt an, was der Benutzer angefordert hat, während sich pgAudit auf die Details dessen konzentriert, was passiert ist, als die Datenbank die Anforderung gestellt hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispielsweise möchte der Prüfer möglicherweise sicherstellen, dass eine bestimmte Tabelle in einem dokumentierten Wartungsfenster erstellt wurde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies mag wie eine einfache Aufgabe für die grundlegende Prüfung und Grep erscheinen, aber was ist, wenn Sie auf so etwas (absichtlich verwirrendes) Beispiel stoßen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Standardprotokollierung gibt Ihnen </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes an </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">LOG: Anweisung: DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass die Suche nach einer Tabelle von Interesse in Fällen, in denen Tabellen dynamisch erstellt werden, einige Codekenntnisse erfordern kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist nicht ideal, da es vorzuziehen wäre, nur nach Tabellennamen zu suchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist pgAudit nützlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für dieselbe Eingabe wird diese Ausgabe im Protokoll ausgegeben:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PRÜFUNG: SESSION, 33.1, FUNCTION, DO ,,, “DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || </font><font style="vertical-align: inherit;">'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; " </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIT: SESSION, 33,2, DDL, CREATE TABLE, TABLE, public.important_table, CREATE TABLE important_table (id INT) Es wird </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nicht nur der DO-Block registriert, sondern auch der Volltext CREATE TABLE mit dem Operatortyp, dem Objekttyp und vollständiger Name, der die Suche erleichtert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Verhalten des Operator-Magazins SELECT und DML kann pgAudit so konfiguriert werden, dass für jede Beziehung, auf die in der Anweisung verwiesen wird, ein separater Eintrag protokolliert wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen nicht analysieren, um alle Anweisungen zu finden, die sich auf eine bestimmte Tabelle beziehen ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). " .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie wirkt sich dies auf die DBMS-Leistung aus?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns die Tests mit aktivierter vollständiger Prüfung ausführen und sehen, was mit der Leistung von PostgreSQL passiert. </font><font style="vertical-align: inherit;">Wir aktivieren die maximale Datenbankprotokollierung in jeder Hinsicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ändern fast nichts in der Konfigurationsdatei, von der wichtigen - aktivieren Sie den Debug5-Modus, um die maximalen Informationen zu erhalten. </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgresql.conf</font></font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_destination = 'stderr' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
logging_collector = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_truncate_on_rotation = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_age = 1d </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_size = 10 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MB log_min_messages = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_error_statement = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_duration_statement = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_parse =</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug_print_rewritten = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_plan = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_pretty_print = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_checkpoints = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_connections = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_disconnections = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_duration = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_hostname = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_lock_waits = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_replication_commands = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_temp_files = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_timezone =</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem PostgreSQL-DBMS mit den Parametern 1 CPU, 2,8 GHz, 2 GB RAM, 40 GB Festplatte führen wir drei Auslastungstests mit den folgenden Befehlen durch:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ pgbench -p 3389 -U postgres -i -s 150 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 50 -j 2 -P 60 -T 600 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 150 -j 2 -P 60 -T 600 benchmark</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testergebnisse:</font></font></strong><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ohne Protokollierung</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit der Protokollierung</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesamtfüllzeit der Datenbank</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43,74 Sek</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53,23 Sek</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentralprozessor</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">91%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 1 (50 Verbindungen)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anzahl der Transaktionen in 10 Minuten</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74169</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32445</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaktion / Sek</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durchschnittliche Verzögerung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">405 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">925 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 2 (150 Verbindungen bei 100 möglich)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anzahl der Transaktionen in 10 Minuten</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">81727</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31429</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaktion / Sek</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">52</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durchschnittliche Verzögerung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">550 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1432 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über Größen</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB-Größe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2251 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2262 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Größe des Datenbankprotokolls</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 Mb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4587 Mb</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fazit: Eine vollständige Prüfung ist nicht sehr gut. </font><font style="vertical-align: inherit;">Die Daten aus dem Audit werden als Volumen, als Daten in der Datenbank selbst oder noch mehr angezeigt. </font><font style="vertical-align: inherit;">Der Umfang der Protokollierung, der bei der Arbeit mit dem DBMS generiert wird, ist ein häufiges Problem des Produkts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir betrachten andere Parameter:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Geschwindigkeit ändert sich nicht viel: ohne Protokollierung - 43,74 Sekunden, mit Protokollierung - 53,23 Sekunden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Leistung auf RAM und CPU sinkt, da Sie mit dem Audit eine Datei erstellen müssen. </font><font style="vertical-align: inherit;">Es macht sich auch bei der Produktivität bemerkbar.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit zunehmender Anzahl von Verbindungen wird sich die Leistung natürlich leicht verschlechtern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Unternehmen mit Wirtschaftsprüfung ist es noch schwieriger:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es gibt viele Daten;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Prüfung ist nicht nur über Syslog in SIEM erforderlich, sondern auch für Dateien: Mit Syslog passiert plötzlich etwas. Die Datei, in der die Daten gespeichert werden, sollte sich in der Nähe der Datenbank befinden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Für die Prüfung ist ein separates Regal erforderlich, um nicht auf E / A-Festplatten zu sinken, da es viel Platz beansprucht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es kommt vor, dass IS-Mitarbeiter überall GOSTs benötigen, sie benötigen einen Gastausweis.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenzugriffsbeschränkung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns die Technologien an, die zum Schutz von Daten und zum Zugriff darauf in kommerziellem DBMS und Open Source verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was kann als Ganzes verwendet werden:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verschlüsselung und Verschleierung von Prozeduren und Funktionen (Wrapping) - dh separate Tools und Dienstprogramme, die Code von lesbarem Code unlesbar machen. </font><font style="vertical-align: inherit;">Es stimmt, dann kann es weder geändert noch zurückgestaltet werden. </font><font style="vertical-align: inherit;">Ein solcher Ansatz ist manchmal zumindest auf der DBMS-Seite erforderlich - die Logik der Lizenzbeschränkungen oder die Autorisierungslogik wird genau auf der Ebene der Prozedur und Funktion verschlüsselt.</font></font></li>
<li>     (RLS) —       ,      ,   - -     .</li>
<li>   (Masking) —          ,   ,    -    .  ,        .</li>
<li>  Security DBA/Application DBA/DBA — , ,      ,        database-  application-.  open source   ,     .  ,        .</li>
<li>       .   ,    ,         .</li>
<li>     —    .</li>
<li>End-to-end encryption   —  client-side       .</li>
<li> . ,   —    ,     .</li>
</ol><br>
<h3>     ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns ein Beispiel für die Spaltenverschlüsselung in PostgreSQL an. </font><font style="vertical-align: inherit;">Es gibt ein pgcrypto-Modul, mit dem Sie ausgewählte Felder in verschlüsselter Form speichern können. </font><font style="vertical-align: inherit;">Dies ist nützlich, wenn nur einige Daten wertvoll sind. </font><font style="vertical-align: inherit;">Um die verschlüsselten Felder zu lesen, übergibt der Client den Entschlüsselungsschlüssel, der Server entschlüsselt die Daten und gibt sie an den Client aus. </font><font style="vertical-align: inherit;">Ohne einen Schlüssel mit Ihren Daten kann niemand etwas tun. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns mit pgcrypto testen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Erstellen Sie eine Tabelle mit verschlüsselten Daten und regulären Daten. </font><font style="vertical-align: inherit;">Unten finden Sie den Befehl zum Erstellen von Tabellen. In der ersten Zeile erstellt ein nützlicher Befehl die Erweiterung selbst mit der Registrierung des DBMS:</font></font><br>
<br>
<pre><code class="plaintext hljs">CREATE EXTENSION pgcrypto;<font></font>
CREATE TABLE t1 (id integer, text1 text, text2 text);<font></font>
CREATE TABLE t2 (id integer, text1 bytea, text2 bytea);<font></font>
INSERT INTO t1 (id, text1, text2)<font></font>
VALUES (generate_series(1,10000000), generate_series(1,10000000)::text, generate_series(1,10000000)::text);<font></font>
INSERT INTO t2 (id, text1, text2) VALUES (<font></font>
generate_series(1,10000000),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes werden wir versuchen, Daten aus jeder Tabelle abzutasten und die Ausführungszeiten zu betrachten. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auswahl aus der Tabelle ohne Verschlüsselungsfunktion</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select * from t1 limit 1000;" "host=192.168.220.129 dbname=taskdb<font></font>
user=postgres sslmode=disable" &gt; 1.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stoppuhr ist an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">text1 | </font><font style="vertical-align: inherit;">text2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
------ + ------- + ------- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
997 | </font><font style="vertical-align: inherit;">997 | </font><font style="vertical-align: inherit;">997 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
998 | </font><font style="vertical-align: inherit;">998 | </font><font style="vertical-align: inherit;">998.999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">999 | </font><font style="vertical-align: inherit;">999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">1000 | </font><font style="vertical-align: inherit;">1000 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 Zeilen) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeit: 1,386 ms. </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abtastung aus einer Tabelle mit Verschlüsselungsfunktion:</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select id, decrypt(text1, 'key'::bytea, 'bf'),<font></font>
decrypt(text2, 'key'::bytea, 'bf') from t2 limit 1000;"<font></font>
"host=192.168.220.129 dbname=taskdb user=postgres sslmode=disable" &gt; 2.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stoppuhr ist an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">entschlüsseln | </font><font style="vertical-align: inherit;">entschlüsseln </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
----- + -------------- + ------------ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">\ x31 | </font><font style="vertical-align: inherit;">\ x31 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">\ x32 | </font><font style="vertical-align: inherit;">\ x32 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">\ x33 | </font><font style="vertical-align: inherit;">\ x33 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
999 | </font><font style="vertical-align: inherit;">\ x393939 | </font><font style="vertical-align: inherit;">\ x393939 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">\ x31303030 | </font><font style="vertical-align: inherit;">\ x31303030 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 Zeilen) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeit: 50,203 ms </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testergebnisse</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keine Verschlüsselung</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pgcrypto (entschlüsseln)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1000 Zeilen abrufen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.386 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50,203 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentralprozessor</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fünfzehn%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td>&nbsp;</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 5%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verschlüsselung hat einen großen Einfluss auf die Leistung. </font><font style="vertical-align: inherit;">Es ist ersichtlich, dass das Timing zugenommen hat, da die Entschlüsselung verschlüsselter Daten (und die Entschlüsselung normalerweise noch in Ihrer Logik enthalten ist) erhebliche Ressourcen erfordert. </font><font style="vertical-align: inherit;">Das heißt, die Idee, alle Spalten zu verschlüsseln, die Daten enthalten, ist mit einer verringerten Leistung behaftet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verschlüsselung ist jedoch kein Patentrezept, das alle Probleme löst. </font><font style="vertical-align: inherit;">Die entschlüsselten Daten und der Entschlüsselungsschlüssel bei der Entschlüsselung und Datenübertragung befinden sich auf dem Server. </font><font style="vertical-align: inherit;">Daher können Schlüssel von Personen abgefangen werden, die vollen Zugriff auf den Datenbankserver haben, z. B. einem Systemadministrator.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die gesamte Spalte für alle Benutzer einen Schlüssel enthält (auch wenn nicht für alle, aber für eine begrenzte Anzahl von Kunden), ist dies nicht immer gut und richtig. </font><font style="vertical-align: inherit;">Aus diesem Grund begannen sie mit der End-to-End-Verschlüsselung. Im DBMS begannen sie, Optionen zum Verschlüsseln von Daten vom Client und Server in Betracht zu ziehen. Es wurden dieselben Key-Vault-Repositorys angezeigt - separate Produkte, die die Schlüsselverwaltung auf der DBMS-Seite ermöglichen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a97/d2d/cb2/a97d2dcb29c95253ff37b99f2bf1be40.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Beispiel für eine solche Verschlüsselung in MongoDB</font></font></i></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sicherheitsfunktionen in kommerziellem und Open Source DBMS</font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionen</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Art</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kennwortrichtlinie</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prüfung</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schutz des Quellcodes für Prozeduren und Funktionen</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RLS</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verschlüsselung</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orakel</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kommerziell</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Msql</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kommerziell</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jatoba</font></font></strong></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kommerziell</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterungen</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kostenlos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterungen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterungen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- -</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterungen</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mongodb</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kostenlos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- -</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- -</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- -</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nur in MongoDB Enterprise verfügbar</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Tabelle ist bei weitem nicht vollständig, aber die Situation ist folgende: Bei kommerziellen Produkten wurden Sicherheitsprobleme schon lange gelöst, bei Open Source werden in der Regel einige Add-Ons für die Sicherheit verwendet, viele Funktionen reichen nicht aus, manchmal muss etwas hinzugefügt werden. Zum Beispiel Passwortrichtlinien - In PostgreSQL gibt es viele verschiedene Erweiterungen ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), die Passwortrichtlinien implementieren, aber meiner Meinung nach deckt keine alle Anforderungen des inländischen Unternehmenssegments ab. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was tun, wenn nirgendwo etwas benötigt wird</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Zum Beispiel möchte ich ein bestimmtes DBMS verwenden, in dem es keine Funktionen gibt, die der Kunde benötigt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anschließend können Sie Lösungen von Drittanbietern verwenden, die mit verschiedenen DBMS funktionieren, z. B. "Crypto DB" oder "Garda DB". Wenn es sich um Lösungen aus dem Inlandsbereich handelt, kennen sie GOSTs besser als Open Source. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Möglichkeit besteht darin, sich selbst zu schreiben, was Sie benötigen, Datenzugriff und Verschlüsselung in der Anwendung auf Prozedurebene zu implementieren. Es stimmt, mit GOST wird es schwieriger. Aber im Allgemeinen können Sie die Daten nach Bedarf ausblenden, in das DBMS einfügen, dann abrufen und direkt auf Anwendungsebene entschlüsseln. Denken Sie gleichzeitig sofort darüber nach, wie Sie diese Algorithmen bei der Anwendung schützen können. Unserer Meinung nach sollte dies auf DBMS-Ebene erfolgen, da dies schneller funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Vortrag wurde erstmals bei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von Mail.ru Cloud Solutions gehalten. Sehen Sie sich das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/redirect%3Fq%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">andere Auftritte und melden Sie sich für Ankündigungen von Telegrammveranstaltungen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rund um Kubernetes bei der Mail.ru Group an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was gibt es sonst noch zu diesem Thema zu lesen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mehr als Ceph: MCS Block Cloud Storage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So wählen Sie eine Datenbank für das Projekt aus, um sie nicht erneut auszuwählen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500696/index.html">Wie Laufschuhe versuchen, sich an den weiblichen Fuß anzupassen</a></li>
<li><a href="../de500698/index.html">Evgeny Katyshev: "OpenStreetMap ist für keine Informationen geeignet"</a></li>
<li><a href="../de500700/index.html">Unterstützung für TLS1.3 und Erweiterung Ihres persönlichen Kontos: Was wurde für das erste Quartal 2020 getan?</a></li>
<li><a href="../de500704/index.html">Einhörner (Airbnb, Uber, Lyft, Careem) entließen Tausende von Mitarbeitern aufgrund von Problemen während der Coronavirus-Pandemie</a></li>
<li><a href="../de500706/index.html">Upgrade von MySQL (Percona Server) von 5.7 auf 8.0</a></li>
<li><a href="../de500712/index.html">Digital Coronavirus - Eine Kombination aus Ransomware und Infostealer</a></li>
<li><a href="../de500718/index.html">EPAM im Remote-Modus: wie es funktioniert</a></li>
<li><a href="../de500720/index.html">Neue Standards für Informationssicherheit: Machen Sie Angreifern das Leben schwerer</a></li>
<li><a href="../de500722/index.html">"Backen bis fertig": Wer speichert seltene Tonbandaufnahmen auf so ungewöhnliche Weise</a></li>
<li><a href="../de500724/index.html">Wie die US-Finanzbehörden die negativen Auswirkungen des Spiels auf den Rückgang begrenzen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>