<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏾 👩🏼‍💼 🌭 使用Windows Server Core将Windows Server推入低功耗VPS 🤑 🏰 👩🏽‍🤝‍👨🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="由于Windows系统的大量使用，轻量级Linux发行版在VPS环境中占主导地位：Mint，Colibri OS，Debian或Ubuntu，它们被剥夺了不必要的重量级桌面环境，这是我们任务的一部分。正如他们所说，只有控制台，只有铁杆！实际上，这一点也不夸张：同一Debian起始于256 MB的内存...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>使用Windows Server Core将Windows Server推入低功耗VPS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/496476/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/en/wz/bd/enwzbdc8xxauv-rkoswizdznaic.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于Windows系统的大量使用，轻量级Linux发行版在VPS环境中占主导地位：Mint，Colibri OS，Debian或Ubuntu，它们被剥夺了不必要的重量级桌面环境，这是我们任务的一部分。正如他们所说，只有控制台，只有铁杆！实际上，这一点也不夸张：同一Debian起始于256 MB的内存和一个内核，其时钟周期为1 Ghz，即几乎在任何“树桩”上。为了舒适地工作，您将需要512 MB的内存和更快的处理器。但是，如果我们告诉您可以在Windows VPS上执行大致相同的操作呢？什么不需要滚动笨重的Windows Server，而Windows Server则需要三到四公顷的RAM和至少两个内核且时钟速度为1.4 GHz的内核？只需使用Windows Server Core-摆脱GUI和一些服务。我们将在文章中讨论如何执行此操作。</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的Windows Server Core是谁？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
即使在Mikes的官方网站上也没有关于Windows（server）Core的明确信息，或者，所有内容都令人困惑，以至于您无法立即理解，但是第一个参考文献可以追溯到Windows Server 2008的时代。实际上，Windows Core是可行的Windows内核。服务器（突然！）按其自己的GUI大小和大约一半的辅助服务来“减重”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows Core的主要功能是对硬件的要求较低，并且可以通过PowerShell进行全面的控制台管理。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您访问Microsoft网站并检查技术要求，则要启动Windows Server 2016/2019，您将需要2 GB的RAM和至少一个内核，时钟速度为1.4 GHz。但是我们都知道，使用这种配置，我们只能期望系统启动，但肯定不能舒适地运行我们的操作系统。因此，如果Windows Server无法在某些Xeon上为其提供昂贵的物理机而不是廉价的虚拟机，则通常会从处理器中分配更多的内存和至少2个内核/ 4个线程。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，服务器系统本身的核心仅需要512 MB的内存，GUI消耗的那些处理器资源仅用于简单地在屏幕上呈现并保持其大量服务运行，这些可以用于更有用的事情。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下是Microsoft官方网站上支持的现成Windows Core服务和完整Windows Server的比较：</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器核心</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有</font></font></strong><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">桌面经验的</font></strong><strong><font style="vertical-align: inherit;">服务器</font></strong></font><strong><font style="vertical-align: inherit;"></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令提示符</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows PowerShell / Microsoft .NET</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能工具</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windbg（GUI）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复程序</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册表编辑器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fsutil.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disksnapshot.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">磁盘程序</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diskmgmt.msc</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发文件</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器管理员</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventvwr</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wevtutil（事件查询）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services.msc</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制面板</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows更新（GUI）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows资源管理器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务栏</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务栏通知</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务管理器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet Explorer或Edge</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置帮助系统</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10外壳</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows媒体播放器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Powerhell</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerShell ISE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerShell IME</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mstsc.exe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程桌面服务</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyper-V管理器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法使用</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如您所见，Windows Core已被淘汰了很多。</font><font style="vertical-align: inherit;">与系统的GUI相关的服务和流程以及我们的控制台虚拟机（例如Windows Media Player）上绝对不需要的任何“垃圾”都可以使用。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几乎像Linux，但不像他</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我确实想将Windows Server Core与Linux发行版进行比较，但实际上这并不完全正确。是的，由于放弃了GUI和许多辅助服务，这些系统在减少资源消耗方面彼此相似，但是就操作和某些组装方法而言，它仍然是Windows，而不是unix系统。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最简单的例子是，借助Linux内核的手动组装以及随后安装的软件包和服务，即使是最轻量的Linux发行版也可以变成沉重的东西，就像一把瑞士刀（我真的很想扮演Python的玩笑，并插入《如果编程语言是武器”，但我们不会）。在Windows Core中，这种自由要少得多，因为尽管如此，我们仍在处理Microsoft产品。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows Server Core带有现成的程序集，其默认配置可以从上表估算。如果需要不受支持的列表中的某些内容，则必须通过控制台在线添加缺少的元素。但是，请不要忘记按需提供功能以及将组件压缩为.cab文件的功能，然后可以在安装前将其添加到部件中。但是，如果您在流程中已经发现缺少剪切服务之一，则此方案不起作用。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是Core版本与完整版本的不同之处在于它能够在不停止工作的情况下更新系统和添加服务。 Windows Core支持滚动热包而无需重新启动。结果，基于实际观察：运行Windows Core的计算机需要重新启动的频率比运行Windows Server的频率少6倍，即每六个月重新启动一次，而不是每月一次。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于管理员来说，一个不错的好处是，如果您按预期使用系统（通过控制台而不使用RDP）并且不使用第二台Windows Server，那么与完整版相比，它变得非常安全。</font><font style="vertical-align: inherit;">确实，Windows Server中的大多数漏洞都属于RDP，而用户通过该RDP执行不应执行的操作。</font><font style="vertical-align: inherit;">这类似于亨利·福特（Henry Ford）的故事以及他与汽车颜色的关系：“任何客户都可以在汽车上涂任何想要的颜色，只要它是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黑色即可</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。” </font><font style="vertical-align: inherit;">因此对于系统：用户可以通过任何方式与系统进行通信，主要是他通过</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制台进行通信</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装和管理Windows Server 2019 Core</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前面我们提到Windows Core实际上是没有GUI包装的Windows Server。也就是说，您可以使用几乎所有版本的Windows Server作为核心版本，即放弃GUI。对于Windows Server 2019家族的产品，这是4个服务器版本中的3个：核心模式适用于Windows Server 2019 Standard Edition，Windows Server 2019 Datacenter和Hyper-V Server 2019，即只有Windows Server 2019 Essentials不在此列表之内。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，不需要寻找Windows Server Core的安装包。在Microsoft的标准安装程序中，默认情况下，当您必须使用GUI手动选择版本时，默认提供核心版本：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/6w/iw/y66wiwkl8oyl69hozecnlfu_km8.png" alt="图片"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实际上，管理系统的选项比PowerShell提到的选项更多，默认情况下，制造商会提供这些选项。</font><font style="vertical-align: inherit;">在Windows Server Core上至少有五种不同的方法来管理虚拟机：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程PowerShell</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程服务器管理工​​具（RSAT）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows管理中心</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sconfig;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器管理器</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前三个职位最受关注：标准PowerShell，RSAT和Windows管理中心。</font><font style="vertical-align: inherit;">但是，重要的是要了解，当我们获得其中一种工具的好处时，我们也会受到它所施加的限制。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将不介绍控制台的功能； PowerShell是PowerShell，具有明显的优缺点。</font><font style="vertical-align: inherit;">RSAT和WAC稍微复杂一些。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAC使您可以访问重要的系统控件，例如注册表编辑以及磁盘和设备管理。</font><font style="vertical-align: inherit;">第一种情况下的RSAT仅在查看模式下起作用，并且不允许进行任何更改，并且对于管理远程服务器管理工​​具的磁盘和物理设备，您需要一个GUI，而这与我们的情况无关。</font><font style="vertical-align: inherit;">通常，RSAT无法在编辑注册表时使用文件，因此无法更新，安装/卸载程序。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍系统管理</font></font></font></h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><code>&nbsp;<br>
</code></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瓦克</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSAT</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册表编辑器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件查看器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">共享文件夹</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">驱动管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于具有GUI的服务器</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务计划程序</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设备管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于具有GUI的服务器</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集团管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">证书管理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卸载程序</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统监控器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一方面，使用RSAT可以完全控制计算机上的角色，就像Windows Admin Center一样，它实际上什么也不做。</font><font style="vertical-align: inherit;">为了清楚起见，以下是RSAT和WAC在这方面的功能比较：</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍管理角色</font></font></font></h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><code>&nbsp;<br>
</code></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瓦克</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSAT</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级线程保护</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Defender的</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">货柜</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">广告行政中心</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD域和信任</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">广告网站和服务</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHCP服务器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">域名解析</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DFS经理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPO经理</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IIS管理器</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也就是说，很明显，如果您放弃了GUI和PowerShell而转而使用其他控件，那么摆脱使用某种单一工具就行不通了：要在各个方面进行全面管理，我们至少需要一堆RSAT和WAC。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
应当记住，使用WAC必须支付150-180 MB的RAM。连接后，Windows管理中心会在服务器端创建3-4个会话，即使该工具与虚拟机断开连接也不会终止会话。 WAC也不适用于旧版本的PowerShell，因此您至少需要PowerShell 5.0。所有这些都与我们的资源紧缩范式背道而驰，但是您必须为舒适度付出代价。在我们的情况下，通过RAM。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
管理Server Core的另一种方法是安装第三方GUI，以免拖动与界面完全组装在一起的大量垃圾。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，我们有两个选择：将原始资源管理器推出系统或使用资源管理器++。作为后者的替代，任何文件管理器都适用：Total Commander，FAR Manager，Double Commander等。如果节省内存对您来说至关重要，则最好使用后者。您可以通过创建网络文件夹并通过控制台或调度程序启动它来添加Explorer ++或任何其他文件管理器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
安装成熟的资源管理器将为我们提供更多使用带有UI的软件的选择。为此，我们</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将不得不联系</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器核心应用程序按需兼容功能（FOD），它将返回到系统MMC，Eventvwr，PerfMon，Resmon，Explorer.exe甚至Powershell ISE。但是，您将需要为此付出代价，就像WAC那样：我们将不可避免地丢失大约150-200 MB的RAM，这会极大地吞噬explorer.exe和其他服务。即使机器没有活动的用户。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/af/fn/6o/affn6ower9-il8sc0k5l4__dhxq.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/di/to/on/ditoonswove2exiwjlfbzj0x-pk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这就是带有和不带有本地Explorer软件包的计算机上系统内存消耗的样子。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这就引出了一个逻辑问题：为什么所有这些与PowerShell，FOD，文件管理器共舞，如果左右任意一步，都会导致RAM消耗增加？当您只需要滚动Windows Server 2016/2019并像白人一样生活时，为什么还要用一堆工具遮盖自己并羞于确保Windows Server Core上的舒适工作呢？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用服务器核心有几个原因。第一：电流几乎是内存消耗的一半。如果您还记得的话，这种情况从一开始就是我们文章的基础。为了进行比较，将Windows Server 2019的内存消耗与上面的屏幕截图进行比较：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/r2/jo/ttr2joynrl-h2nris2d-cdlypps.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，消耗的内存为1146 MB，而不是Core的655 MB。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假设您不需要WAC，而是使用Explorer ++而不是原始的Explorer，那么您</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仍将</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每台运行Windows Server的虚拟机上</font><strong><font style="vertical-align: inherit;">赢得将近半公顷的土地</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果只有一个虚拟机，那么增长微不足道，但是如果有五个呢？</font><font style="vertical-align: inherit;">在这里，GUI的存在很重要，尤其是在您不需要它的情况下。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其次，围绕Windows Server Core的任何跳舞都不会使您与Windows Server操作RDP及其安全性（更确切地说，完全不存在）的主要问题作斗争。</font><font style="vertical-align: inherit;">Windows Core甚至以FOD，RSAT和WAC的形式仍然是没有RDP的服务器，也就是说，它不受现有攻击的95％的攻击。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在平衡中</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，Windows Core只是比任何现有Linux发行版都“稍微”落后，但功能更多。</font><font style="vertical-align: inherit;">如果您需要释放资源并且准备使用控制台，WAC和RSAT，使用文件管理器而不是完整的GUI，那么Core值得关注。</font><font style="vertical-align: inherit;">此外，将无法为功能完善的Windows支付额外费用，而无法</font><font style="vertical-align: inherit;">通过添加（例如）RAM </font><font style="vertical-align: inherit;">来节省</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的开支</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了方便起见，我们将Windows Server Core添加到了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">市场中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN496456/index.html">符合719法规的家用微芯片概述</a></li>
<li><a href="../zh-CN496458/index.html">以药房星球健康连锁店为例，对药品周转数字化</a></li>
<li><a href="../zh-CN496460/index.html">Unity可寻址对象：始终有足够的内存</a></li>
<li><a href="../zh-CN496466/index.html">任何足够快的光源都具有红色多普勒频移</a></li>
<li><a href="../zh-CN496472/index.html">GitHub上的10个有趣的存储库，对任何开发人员都有用</a></li>
<li><a href="../zh-CN496480/index.html">未来的寂静之声</a></li>
<li><a href="../zh-CN496482/index.html">团队管理中知情领导的发展</a></li>
<li><a href="../zh-CN496484/index.html">通过类似于梯度的下降来选择k近邻（井或其他超参数）的特征重要性</a></li>
<li><a href="../zh-CN496486/index.html">意见：Spamhaus-在线审查还是清洁网络战斗人员？</a></li>
<li><a href="../zh-CN496488/index.html">IaaS提供商抗击BGP协议的攻击</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>