<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐩 💹 👨🏻‍🎤 Mapas normais ideais para o Unity (e outros programas) 🕌 😀 🤹🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="... e como descobrir o que há de errado com seu pipeline de criação de conteúdo.
 
 
 Digamos que você tenha um incrível modelo high-poly no qual o ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mapas normais ideais para o Unity (e outros programas)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487932/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... e como descobrir o que há de errado com seu pipeline de criação de conteúdo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89e/6f3/877/89e6f38773acdefc8f2680cf7bfd223a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Digamos que você tenha um incrível modelo high-poly no qual o artista tenha trabalhado, e você queira colocá-lo no jogo. </font><font style="vertical-align: inherit;">O artista mostrou capturas de tela do modelo em seu programa e elas parecem incríveis. </font><font style="vertical-align: inherit;">Mesmo depois de criar mapas normais para a versão low-poly, ele ainda parece ótimo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a4/810/be8/3a4810be8abd5ad6cb24fca98ee9e61c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Veja a grandeza deste modelo tradicional para testar mapas normais! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então a artista a coloca no jogo, e ela parece ... um pouco errada.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/350/fa2/e70/350fa2e7020b28db82bf99958d10f958.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esses rostos não deveriam ser planos? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As superfícies, que devem ser planas, ainda são um pouco arredondadas, algumas são até deprimidas e, pior ainda, listras estranhas as acompanham. </font><font style="vertical-align: inherit;">Situação familiar? </font><font style="vertical-align: inherit;">Alguns de vocês provavelmente se depararam com isso, pensaram: "Bem, provavelmente, não vai funcionar melhor" e seguiram em frente. </font><font style="vertical-align: inherit;">Talvez um pouco de sujeira tenha sido aplicada para mascarar os casos mais graves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas há realmente algo errado com seu pipeline de criação de conteúdo. </font><font style="vertical-align: inherit;">Isso nem sempre é óbvio, mas o problema pode ser resolvido! * </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Se você assumir que, em alguns casos, poderá fazer alterações no pipeline de conteúdo.</font></font></i><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefácio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artigo é sobre como exportar mapas normais ideais de outros aplicativos para uso no Unity 5.3 e superior. </font><font style="vertical-align: inherit;">Ele não fala sobre como obter mapas normais de alta qualidade, existem muitos outros tutoriais para isso, então não vou abordar esse tópico.</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base espacial tangente</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema é como os mapas normais do espaço tangente funcionam. Em particular, como funciona o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espaço tangente</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou base tangente). Não irei muito longe nos aspectos técnicos do que eles fazem. Eu, como outros autores, já </font></font><a rel="noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conversamos sobre isso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas, em resumo, o espaço tangente determina o que a orientação da direção no mapa normal deve representar. Qual direção no mapa normal é realmente "avançar", "subir" ou "direita". Grosso modo, essa orientação é a orientação das coordenadas UV da textura e normais dos vértices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É mais importante entender que o programa usado para criar o mapa normal da malha highpoly para a malha lowpoly deve calcular seu espaço tangente</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exatamente o mesmo que o programa em que os mapas normais serão usados</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Como programas diferentes podem usar o espaço tangente de maneiras diferentes, os mapas cozidos normais de uma malha não serão necessariamente os mesmos para todos os aplicativos. </font><font style="vertical-align: inherit;">Mesmo para aplicações que usam o mesmo espaço tangente!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conheça seu inimigo</font></font></h1><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Golpe devido a erro óbvio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O erro mais comum é o problema “OpenGL vs Direct3D”. </font><font style="vertical-align: inherit;">Eles também são chamados de mapas normais Y + e Y-. </font><font style="vertical-align: inherit;">Incluí-os aqui apenas para completar. </font><font style="vertical-align: inherit;">Provavelmente, a maioria das pessoas que encontrou esse problema já o conhece ou pelo menos aprendeu a resolvê-lo. </font><font style="vertical-align: inherit;">Como os mapas normais são gerados em uma orientação, eles são essencialmente inúteis para uso em um aplicativo desenvolvido para usar outro.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39a/064/afd/39a064afd8830af08c8841d279e234bc.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapas normais na orientação Direct3D no mecanismo Unity, que espera uma orientação OpenGL.Isso</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
pode ser entendido pelo fato de que a iluminação parece estar invertida ou caindo do outro lado, mas apenas em algumas direções de iluminação. Alguns cantos ou rostos podem parecer completamente normais até você mover a fonte de luz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E com esse problema, tudo está claro o suficiente. </font><font style="vertical-align: inherit;">A maioria dos aplicativos de criação de mapas normais possui um bom botão ou menu grande para alternar entre a opção de orientação OpenGL / Direct3D ou Y. Descubra qual orientação o aplicativo de destino usa e faça mapas nele. </font><font style="vertical-align: inherit;">O Unity usa OpenGL e Y +. </font><font style="vertical-align: inherit;">A Unreal usa o Direct3D e Y-. </font><font style="vertical-align: inherit;">Isso pode ser claramente entendido observando a textura do próprio mapa normal. </font><font style="vertical-align: inherit;">Se parece que no canal verde eles estão acesos "de cima", então esta é a orientação do OpenGL. </font><font style="vertical-align: inherit;">Se de baixo, então é o Direct3D.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extravagâncias com sRGB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro erro comum é usar uma textura marcada como textura sRGB. Isso altera a maneira como a textura da GPU é amostrada, forçando-a a converter valores de cores do espaço sRGB, do qual as pessoas geralmente selecionam valores de cores, em um espaço linear de cores. Para mapas normais, isso não é necessário. Se você definir o tipo como "Mapa normal" para a textura no Unity, o mecanismo desativará automaticamente essa opção, mas você também poderá desativar a opção "sRGB (Textura de cor)" manualmente, e a textura funcionará como um mapa normal. Pelo menos no Unity 2017.1 e mais recente.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eed/4fa/006/eed4fa006eb6dc4cb232b61f6df0d95d.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapa normal com o tipo de textura Padrão e sRGB ativados.Este</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
problema pode ser reconhecido pelo fato de os mapas normais serem fortemente influenciados em uma direção. </font><font style="vertical-align: inherit;">Neste modelo, quase todos os rostos parecem direcionados para uma fonte de luz. </font><font style="vertical-align: inherit;">Obviamente, isso nem sempre será o caso. </font><font style="vertical-align: inherit;">Em um mapa normal mais detalhado, todas as partes respondem à iluminação quase corretamente, mas mudam ligeiramente para algum ângulo. </font><font style="vertical-align: inherit;">Às vezes, pode parecer que toda a superfície da malha está distorcida.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muito diferente para ser normal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro problema comum é o uso de diferentes malhas normais de cozimento no ativo do jogo. </font><font style="vertical-align: inherit;">Assim como as tangentes, para que tudo funcione, elas devem </font><font style="vertical-align: inherit;">corresponder </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exatamente</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esse erro geralmente ocorre se os artistas exportam malhas com valores normais de vértices incorretos. </font><font style="vertical-align: inherit;">Nesse caso, qualquer aplicativo que abrir a malha precisará calculá-los você mesmo. </font><font style="vertical-align: inherit;">Não existe uma maneira certa de resolver isso, tudo depende da malha. Portanto, certifique-se de exportar (ou artistas) o modelo com as normais finais!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/26b/196/2f9/26b1962f97b26c1f90e1143007844e30.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapas normais criados em uma malha suavizada, exibidos como em uma malha com bordas afiadas</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/07c/51d/97007c51d1aea9f42e5971e1a3d79ef6.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapas normais criados em uma malha com bordas afiadas, exibidos como em uma malha suavizada</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse é outro problema fácil de detectar. Se o modelo parecer ter arestas nítidas, mas o sombreamento se inclinar dessas arestas, significa que você criou o mapa normal com normais suaves, mas elas são renderizadas em uma malha com arestas nítidas. Se o sombreamento dobrar em direção à borda, isso significa que o mapa foi cortado com uma borda afiada e renderizado em uma borda suave. De fato, em um modelo, ambos os casos podem estar presentes, porque é possível indicar a suavidade ou nitidez das arestas individuais e até o grau de suavidade. Mas, de fato, eles são garantidos como errôneos se você permitir que outro aplicativo adivinhe como deve ser. O modelo apresentado acima é um caso extremo, e muitas vezes nem tudo é tão óbvio, porque grandes partes do modelo podem parecer completamente normais. Mas no caso geral,se você tiver várias arestas que parecem particularmente estranhas, provavelmente isso se deve a uma incompatibilidade nas normais do vértice.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace vs Autodesk</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um problema menos perceptível é que, ao criar mapas normais do 3ds Max ou Maya, eles sempre estarão incorretos no mecanismo do Unity. </font><font style="vertical-align: inherit;">Eles estarão errados no Unreal e em quase qualquer outro programa, exceto no programa em que foram assados. </font><font style="vertical-align: inherit;">Os mapas normais do 3ds Max não funcionam no Maya e vice-versa! </font><font style="vertical-align: inherit;">Cada um desses aplicativos calcula o espaço tangente de maneira exclusiva, o que não corresponde a outros aplicativos. </font><font style="vertical-align: inherit;">Quando usados ​​de forma independente, eles parecem </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfeitos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, se você gerar mapas normais para uso nesses programas, tente criar mapas normais neles. </font><font style="vertical-align: inherit;">Quase nenhum </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outro</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> programa é capaz de criar os mapas normais corretos para esses aplicativos, então você parece não ter escolha.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A única solução nesse caso é não criar mapas normais com esses aplicativos se você quiser usá-los em outro lugar. </font><font style="vertical-align: inherit;">Se você precisar de um programa gratuito, use o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xNormal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esta é uma ferramenta padrão do setor. </font><font style="vertical-align: inherit;">Se você usar Substância em algum lugar no pipeline de criação de conteúdo, use-o.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/350/fa2/e70/350fa2e7020b28db82bf99958d10f958.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O 3ds Max criou o mapa normal usado pelo Unity A</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
maneira mais fácil de perceber esse problema é ver que as faces planas têm pequenas amolgadelas ou curvaturas. </font><font style="vertical-align: inherit;">Em alguns casos, isso pode ser muito discreto, especialmente em objetos orgânicos. </font><font style="vertical-align: inherit;">Portanto, problemas desse tipo geralmente passam despercebidos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitos aplicativos que não são da Autodesk mudaram para um método de cálculo de espaço tangente chamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O xNormal e o Substance, assim como o Blender, Unity, Unreal, Godot, Marmoset, Houdini, Modo e alguns outros, por padrão, usam o MikkTSpace ou, pelo menos, de alguma forma o suportam, o que melhora bastante sua compatibilidade. </font><font style="vertical-align: inherit;">De fato, nos últimos dez anos, tornou-se o padrão do setor em todos os casos em que são usados ​​mapas normais do espaço tangente. </font><font style="vertical-align: inherit;">Presumivelmente, em algum momento, o 3ds Max adicionará seu suporte, mas não está claro se os desenvolvedores planejam permitir mapas normais usando o MikkTSpace ou simplesmente fornecem suporte para visualização / renderização com sua ajuda.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Malhas de exportação e pintor de substâncias</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro problema com o 3ds Max e o Maya é que, ao exportar malhas a partir deles, existe uma opção de exportação com "tangentes e binormais". Eles não estarão nas tangentes reais do MikkTSpace, mas serão baseados neles. Alguns aplicativos forçam novamente o cálculo do MikkTSpace correto por padrão (por exemplo, xNormal, Unity e Unreal), mas outros aplicativos usam malhas tangentes (se houver) "como estão" e computam o MikkTSpace apenas se a malha não tiver tangentes. Por exemplo, o Substance Painter usa malhas tangentes se estiverem presentes, ou seja, o Painter cria mapas normais muito semelhantes ao 3ds Max! Semelhante, mas não exatamente o mesmo, portanto, se você importá-los de volta para o 3ds Max, eles não parecerão tão bons quanto cozidos no Max.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace vs MikkTSpace?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O próximo problema é que há mais de uma versão do MikkTSpace! </font><font style="vertical-align: inherit;">Sim, esse não seria o padrão se, de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alguma forma,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> não apresentasse confusão. </font><font style="vertical-align: inherit;">O MikkTSpace determina como os dados devem ser armazenados na malha para cada vértice e como os dados são usados ​​para renderização. </font><font style="vertical-align: inherit;">Todos os aplicativos habilitados para MikkTSpace calculam os mesmos dados de malha para vértices. </font><font style="vertical-align: inherit;">Mas existem duas maneiras diferentes de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usar</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> esses dados na renderização. </font><font style="vertical-align: inherit;">MikkTSpace define como calcular o vetor tangente e assinar para cada vértice com base na orientação UV. </font><font style="vertical-align: inherit;">Porém, ao usar o espaço tangente, a tangente a dois pontos (bitangente) é recalculada para cada vértice ou para cada pixel. </font><font style="vertical-align: inherit;">Este parâmetro também deve ser o mesmo para assar e visualizar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
xNormal e Substância têm a opção de criar mapas normais usando os dois métodos. Essas opções são denominadas “computar espaço tangente por fragmento” em Substância e “computar binormal no pixel shader” no xNormal. </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você não precisa</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usá-lo se estiver preparando os métodos de renderização do Unity embutidos. No entanto, pode </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font><em><font style="vertical-align: inherit;">pena</font></em><font style="vertical-align: inherit;"> fazer isso para SRP, dependendo do tipo que você escolher!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/288/f49/dc8288f495d420416d8bd2ee5ae401c3.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XNormal "pixel shader binormals" com renderizador avançado incorporado Unity</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Visualmente, isso parece usar um espaço tangente completamente diferente, mas geralmente é muito menos pronunciado. Alguns rostos podem parecer como se o normal estivesse um pouco distorcido e não terá um grande dente. A solução aqui é muito simples - não selecione essa opção se estiver utilizando os métodos de renderização embutidos do Unity. Marque a caixa se você usar motores Unreal ou Unity para HDRP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitas fontes dizem que Blender e Unity são idênticos, mas na verdade isso nunca é verdade! O Blender, como o Unity, usa a orientação MikkTSpace e OpenGL, mas, como o Unreal, usa binormals para cada binomals de fragmento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A boa notícia é que agora os shaders LWRP, URP e Shader Graph usam binormais para cada vértice e os shaders HDRP integrados para cada pixel. </font><font style="vertical-align: inherit;">Em uma atualização futura do Shader Graph (7.2.0), a transição para a computação pixel por pixel será realizada e, após algum tempo, os shaders URP integrados também mudarão para ele. </font><font style="vertical-align: inherit;">E os métodos de renderização padrão podem ser alterados usando seus próprios shaders, se você escolher essa rota.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Triangular, triangular, triangular!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O último problema são diferentes maneiras de triangular. </font><font style="vertical-align: inherit;">Se você exportar malhas sem triangulação preliminar, não há garantia de que outros aplicativos triangularão o modelo da mesma maneira. </font><font style="vertical-align: inherit;">Isso também prejudica os mapas normais! </font><font style="vertical-align: inherit;">Portanto, triangule as malhas, usando as opções de exportação ou através do modificador de triangulação.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/271/14f/174/27114f17454f66db812ec2673e72d97c.png"></div><br>
<i>  Substance Painter  ,   Unity  ,   3ds Max   (quads)</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso parece muito semelhante a um espaço tangente completamente errado, como se mapas normais tivessem sido cortados no 3ds Max. Mas, no caso geral, elas são um pouco mais nítidas, quase dobradas e não parecem concavidades suaves. Nesta malha, uma forma de X é visível nas faces externas. Esse problema pode ser difícil e irritante quando várias pessoas estão trabalhando com o modelo no pipeline de produção de conteúdo em diferentes aplicativos, porque geralmente é útil não triangular a malha e salvar belos polígonos. Nesse caso, você precisa aceitar a inconveniência ou criar a última ferramenta no pipeline antes de exportar o modelo para o jogo, também usado para gerar uma malha usada para assar normais. Como um espaço tangente com normais de vértices (que fazem parte do espaço tangente),a triangulação também deve corresponder exatamente.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista para criar mapas normais perfeitos para o Unity</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, aqui estão algumas dicas para gerar mapas normais de espaço tangente para malhas lowpoly a partir dos modelos highpoly originais para uso no Unity:</font></font><br>
<br>
<ul>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não é necessário criar</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mapas normais usando o 3ds Max, o Maya ou qualquer outro aplicativo que não possua a opção tangente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporte malhas como </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">triângulos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , com </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normais</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sem</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tangentes.</font></font></strong></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escolha </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou X + </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Z + como orientação do mapa normal ao assar (bem como ao criar um projeto para o Substance Painter).</font></font></li>
<li><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você não precisa</font></font></em> </strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> habilitar as opções de tangentes para os dois pontos "</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por pixel</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " / "</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por fragmento</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ao processar os métodos de renderização internos (proativos ou diferidos) ou LWRP.</font></font></li>
<li><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inclua</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> opções de tangentes para os dois pontos</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "por pixel"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> /</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "por fragmento"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao executar o HDRP e, em breve, o URP.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deixe as opções de importação do modelo padrão para o Unity, com as normais definidas como "Importar" e as tangentes como "Calcular o espaço do Mikkts".</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso é tudo! </font><font style="vertical-align: inherit;">Toda vez que você obtém mapas normais perfeitamente preparados!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a4/810/be8/3a4810be8abd5ad6cb24fca98ee9e61c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viva! </font><font style="vertical-align: inherit;">O mapa normal perfeito!</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bed/daa/477/beddaa477b105ae87e6dda113381e910.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... com reflexões? </font><font style="vertical-align: inherit;">Ahem ..</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bem, o último, nós apenas ignoramos. </font><font style="vertical-align: inherit;">O mais "perfeito" possível com formatos de textura compactada com 8 bits por canal. </font><font style="vertical-align: inherit;">Um mapa de pontilhamento normal pode parecer um pouco melhor que listras, mas, infelizmente, poucas ferramentas fornecem essa opção. </font><font style="vertical-align: inherit;">Caso contrário, você pode usar mapas normais de 16 bits. </font><font style="vertical-align: inherit;">Mas este é um tópico para outro artigo.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saiba mais sobre o MikkTSpace.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O site semi-oficial do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mikktspace.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> explica bem os principais benefícios do MikkTSpace. Em particular, esse espaço funciona bem tanto para recontar quanto para transferir dados tangentes entre programas com diferentes processos de malha, mantendo a integridade dos resultados. O texto do site é uma cópia da já extinta página wiki do Blender, escrita pelo próprio Morten S. Mikkelsen. Infelizmente, ele menciona apenas a versão com tangentes a dois pontos para cada pixel, mas não a versão para cada vértice, o padrão usado pelo Unity e xNormal. Como o Blender usa derivadas de tangentes por pixel, é lógico que apenas elas sejam mencionadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estão comentários sobre essas duas opções do arquivo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mikktspace.h</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> original </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<blockquote>           ,    /.<br>
<br>
<code>bitangent = fSign * cross(vN, tangent);</code><br>
<br>
…<br>
<br>
    (/    )     ,          .<br>
<br>
,   ,       ,    «»  ,       : vT, vB  vN.<br>
<br>
  (  )<br>
<br>
<code>vNout = normalize( vNt.x * vT + vNt.y * vB + vNt.z * vN );</code><br>
<br>
 vNt —    .         «» ,       ,    .<br>
<br>
…<br>
<br>
         ,     ,   ,        .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, no exemplo original, a tangente a dois pontos é recriada no shader de vértice e passada para o shader de pixel como outro valor interpolado. É assim que os shaders normais do Unity atualmente lidam com mapas normais. Um exemplo de execução dessa tarefa em um pixel shader é mais um improviso do que um exemplo "principal". Além disso, desde que a implementação do Unity 5.3 (e xNormal?) Foi criada pelo próprio Morten S. Mikkelsen, e ambos usam tangentes para cada vértice, essa é outra prova de nossa teoria. Mas o Blender usou tangentes pixel por pixel, e Morten também estava envolvido. Provavelmente, de fato, foi apenas uma opção que causou pequenas alterações nos shaders finais do Unity e, embora para gráficos em tempo real, nenhum dos métodos tenha sido considerado muito melhor que o outro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vantagem da implementação pixel por pixel é a eliminação de dois valores interpolados ao custo de pequenos custos extras para a ALU (matemática do pixel shader). Isso significa que, em vez dos três valores do vetor3 (tangente, tangente a dois pontos e o normal), precisamos apenas do vetor4 e do vetor3 (tangente com um sinal e normal). Nas GPUs modernas, isso é um pouco mais rápido. E é </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definitivamente</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mais rápido quando executado na CPU, pois pode ser usado para renderizadores não em tempo real. Desse ponto de vista, é lógico que a maior parte da indústria decidiu recriar a tangente para dois pontos no pixel, e não no topo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É engraçado que, quando escrevi este artigo, o Morten promoveu a transição no Unity SRP para pixel por pixel tangente a dois pontos! </font><font style="vertical-align: inherit;">É uma má sorte que os métodos de renderização internos do Unity tenham um legado de escolhas inconvenientes.</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente em diferentes aplicações</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora este artigo se concentre principalmente no Unity, como hoje esse mecanismo se tornou popular, eu queria que meu estudo fosse mais detalhado. </font><font style="vertical-align: inherit;">Portanto, criei uma lista de vários aplicativos com informações sobre o uso do espaço tangente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidade (5.3+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para vértices ou pixels * </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por padrão, o mecanismo redefine à força as tangentes da malha na importação para usar o MikkTSpace. Para usuários avançados, ele tem opções para o uso de malha tangente, mas isso não garante a compatibilidade com mapas normais criados em outras ferramentas, especialmente ao usar sombreadores embutidos. Eles podem ser substituídos por shaders completamente próprios. E para seus shaders integrados, o HDRP usa tangentes pixel por pixel em dois pontos. No momento da redação deste artigo, planejava-se que os shaders URP e Shader Graph também mudassem para tangentes pixel por pixel para dois pontos. Antes do Unity 5.3, o mecanismo usava tangentes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://web.archive.org/web/20160306000702/" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lengyel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que ainda podem ser usadas selecionando a opção Legacy Tangents no importador de malha, mas os shaders internos não suportam mais esse espaço tangente.</font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Além disso: antes do URP 7.2.0, o processamento de mapas normais no Shader Graph era completamente interrompido! </font><font style="vertical-align: inherit;">Nem o MikkTSpace nem o espaço tangente de Lengyel são usados ​​corretamente, e é impossível corrigir isso dentro do Shader Graph. </font><font style="vertical-align: inherit;">Se possível, atualize para 7.2.0.</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motor irreal 4</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direct3D Y- </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes em dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel por pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por padrão, o mecanismo redefine as tangentes da malha ao importar usando o MikkTSpace. </font><font style="vertical-align: inherit;">Para usuários avançados, há opções para usar uma malha tangente, mas isso não garante a compatibilidade com mapas normais criados em outras ferramentas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Godot</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada vértice </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se não houver dados tangentes, ele poderá calcular malhas tangentes no MikkTSpace na importação. </font><font style="vertical-align: inherit;">A documentação do mecanismo sugere a exportação de malhas de malha tangente, mas como a maioria das ferramentas não exporta a malha tangente correta, eu ignoraria essa dica. </font><font style="vertical-align: inherit;">Mesmo se você usar a malha tangente original, não há garantia de que os mapas normais terão a aparência correta.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Playcanvas</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente: </font></font></strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://web.archive.org/web/20160306000702/" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lengyel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schüler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada vértice / com base em derivadas </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fornece vários métodos para processar o espaço tangente. As tangentes geradas por código não usam MikkTSpace. Possui opções para usar uma tangente a dois pontos para cada vértice que normalizam os vetores de espaço tangente no shader de pixel "fastTbn" </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sem normalizar o</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> espaço tangente no shader de fragmento (do qual </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">precisamos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, uma vez que isso corresponde à implementação do MikkTSpace com um cálculo para cada vértice) ou eles usam o TBN baseado em derivado, emprestado de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Christian Schuler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">ignora completamente a tangente da malha e calcula o espaço tangente no pixel shader. </font><font style="vertical-align: inherit;">Agora, por padrão, são usados ​​mapas normais baseados em derivativos, para os quais, até onde eu sei, não existem ferramentas para fazer mapas normais exatos. </font><font style="vertical-align: inherit;">É possível importar malhas com dados normais e tangentes existentes do MikkTSpace e, em seguida, usar a opção de material "fastTbn" para corresponder aos métodos de renderização integrados do Unity, mas acredito que isso deve ser feito no código, e não na interface do editor.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filamento</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes em dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada vértice </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dependendo do desempenho no futuro, o mecanismo pode ir para tangentes pixel por pixel em dois pontos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3ds max</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direct3D Y- * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opções</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nativas de </font><strong><font style="vertical-align: inherit;">exportação de malha:</font></strong><font style="vertical-align: inherit;"> exporte arquivos FBX com o Triangulate ativado, mas Tangents e Binormals desativados. </font><font style="vertical-align: inherit;">As normais sempre devem ser exportadas. </font><font style="vertical-align: inherit;">As normais divididas por vértice podem ser desativadas. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Por padrão, o 3ds Max supõe que a orientação do Direct3D seja usada em mapas normais, mas tem opções para inverter as orientações X e Y ao usar texturas de mapa normais em materiais. </font><font style="vertical-align: inherit;">O cozimento sempre usa a orientação Direct3D. </font><font style="vertical-align: inherit;">O suporte do MikkTSpace aparecerá em versões futuras.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maya</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opções</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nativas de </font><strong><font style="vertical-align: inherit;">exportação de malha:</font></strong><font style="vertical-align: inherit;"> exporte arquivos FBX com o Triangulate ativado, mas Tangents e Binormals desativados. </font><font style="vertical-align: inherit;">As normais são sempre exportadas. </font><font style="vertical-align: inherit;">As normais divididas por vértice podem ser desativadas. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observações:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> algumas pessoas me disseram que o Maya já suporta parcialmente o MikkTSpace, mas não sei até que ponto.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liquidificador (2.57+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opções de exportação de </font></font></strong><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">malha </font></strong><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> exporte arquivos FBX com um valor de suavização de "Somente normais". </font><font style="vertical-align: inherit;">Você pode exportar com ou sem o Tangent Space se o aplicativo de destino também usar o MikkTSpace, como Unity ou Unreal. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas: O</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Blender não possui uma opção de triangulação ao exportar para o FBX, portanto, use o modificador Triangulate primeiro. </font><font style="vertical-align: inherit;">Os mapas normais criados no Blender não serão 100% compatíveis com o Unity, mas se você virar o canal verde em um aplicativo de terceiros ou em material personalizado, eles funcionarão perfeitamente no Unreal.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xNormal (3.17.5+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espaço tangente</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> MikkTSpace * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado (para cada vértice ou pixel) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opções para fazer mapas normais:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tem opções para inverter os três eixos do mapa normal durante a exportação. A unidade precisa de X + Y + Z +. Também há a opção de usar tangentes para dois pontos para cada vértice ou pixel (ou seja, fragmento). Por padrão, o xNormal usa tangentes para dois pontos para cada vértice, mas isso pode ser alterado no menu Gerenciador de plug-ins (ícone do plugue de energia no canto inferior esquerdo) clicando em "Calculadora de base tangente", "Mikk - TSpace" e clicando em Configurar. Uma janela pop-up aparecerá com a única opção "Computar binormal no pixel shader". Ele deve estar desativado para o Unity e ativado para o Unreal. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Embora o xNormal suporte apenas o MikkTSpace, seu sistema de plugins suporta teoricamente qualquer espaço tangente. </font><font style="vertical-align: inherit;">Até agora, o único plug-in de espaço tangente que conheço foi projetado para criar o espaço tangente do Unity 4 e já é inútil. </font><font style="vertical-align: inherit;">Ou seja, se abordado de forma realista, o aplicativo suporta apenas o MikkTSpace.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pintor de substâncias</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizável (OpenGL ou Direct3D) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para o MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizável (para vértices ou pixels) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opções de cozimento para mapas normais:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> possui opções de cozimento na orientação OpenGL ou Direct3D. E uma opção para usar tangentes em dois pontos para cada vértice ou pixel (fragmento), que é configurado pelo parâmetro “Calcular espaço tangente por fragmento”. Ao exportar para métodos internos de renderização do Unity, é necessário selecionar OpenGL e desativar Computar espaço tangente por fragmento nas opções de projeto e exportação, e ao exportar para o Unreal ou Unity HDRP, faça o oposto. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Pintor de substâncias, por padrão, usa os dados tangentes que a malha importada usa. </font><font style="vertical-align: inherit;">A menos que você esteja exportando do Blender, você não precisa disso! </font><font style="vertical-align: inherit;">Mas não há opções para desativar esse recurso. </font><font style="vertical-align: inherit;">Antes de importar para o Substance Painter, exporte malhas </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sem</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tangentes. </font><font style="vertical-align: inherit;">Anteriormente, na documentação da substância, foi afirmado erroneamente que os cálculos de tangentes a dois pontos </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no Blender correspondem ao Unity, mas agora o erro foi corrigido!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maleta de ferramentas Sagui 3</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel por pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parece que o programa tem opções para visualizar ou criar mapas normais em quase todas as configurações existentes. </font><font style="vertical-align: inherit;">Incluindo configurações prontas para espaços tangentes 3ds Max e Maya! </font><font style="vertical-align: inherit;">No entanto, a opção de espaço tangente “Mikk / xNormal” usa tangentes pixel por pixel em dois pontos, e isso não pode ser alterado. </font><font style="vertical-align: inherit;">Ou seja, o Marmoset Toolbag 3 não pode exibir ou criar corretamente mapas normais para os métodos internos de renderização do Unity. </font><font style="vertical-align: inherit;">Talvez em versões futuras a situação mude, porque os desenvolvedores estão cientes do problema.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DCoat</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espaço tangente</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> personalizado </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :? </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Possui muitas opções para visualizar e criar mapas normais. </font><font style="vertical-align: inherit;">É perfeitamente capaz de combinar o Blender e o UE4, portanto, suporta tangentes pixel por pixel em dois pontos, mas não sei se tangentes de vértice a dois pontos são usadas na predefinição do Unity.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdini (16.0.514+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizável </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espaço tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizável * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para o MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel por pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suporta sua própria base de tangentes ou MikkTSpace, tanto para visualização quanto para cozimento, mas apenas na versão pixel por pixel. </font><font style="vertical-align: inherit;">Parece que, por padrão, ele não usa o MikkTSpace para renderização, mas começando com o Houdini 17.5. </font><font style="vertical-align: inherit;">As malhas podem ser modificadas com nós internos para usar o MikkTSpace tangente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo (10+?)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espaço tangente</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> personalizado </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes de dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado (vértice ou pixel por pixel) * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observações:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parece que suporta renderização e cozimento em diferentes espaços tangentes, bem como a opção de tangentes pixel por pixel para dois pontos para exportação. </font><font style="vertical-align: inherit;">Eu não testei isso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Knald</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientação: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espaço tangente</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personalizado </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cálculo de tangentes a dois pontos para MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel por pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas: ele</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usa o MikkTSpace por padrão e redefine as tangentes das malhas importadas, mas, se necessário, existe uma opção para usar malhas tangentes existentes. </font><font style="vertical-align: inherit;">A orientação dos mapas normais pode ser invertida com um parâmetro que se aplica a todo o projeto.</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um aspecto importante é que, se o modelo de baixo poli no qual você assa é apenas um plano (por exemplo, para textura lado a lado), tudo o que é escrito é inconseqüente e você pode assar usando qualquer ferramenta ... se você mantiver tudo na orientação correta ou depois, inverta os canais de textura correspondentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além disso, a maioria dos problemas listados no artigo é perceptível apenas em modelos sólidos. </font><font style="vertical-align: inherit;">As formas orgânicas podem ocultar as diferenças mais sutis, por exemplo, a diferença entre vértices e pixels por tangentes de pixel em dois pontos.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487920/index.html">Sobrecarga em C ++. Parte I. Sobrecarregando Funções e Modelos</a></li>
<li><a href="../pt487922/index.html">Aprendendo a implantar microsserviços. Parte 1. Spring Boot e Docker</a></li>
<li><a href="../pt487924/index.html">Kim Dotcom: Caught, a pessoa mais procurada online. Parte 3</a></li>
<li><a href="../pt487926/index.html">Em busca de educação física</a></li>
<li><a href="../pt487930/index.html">Palestra noite eu quero gamedev</a></li>
<li><a href="../pt487934/index.html">Como otimizamos nosso servidor DNS usando as ferramentas GO</a></li>
<li><a href="../pt487938/index.html">Apresentando effector-dom usando a lista de tarefas de exemplo</a></li>
<li><a href="../pt487940/index.html">Computação reproduzível em R. Como separar código e dados?</a></li>
<li><a href="../pt487944/index.html">Aprendizado de máquina no setor de energia, ou nem todos podem assistir amanhã</a></li>
<li><a href="../pt487948/index.html">Autenticação de dois fatores no OpenVPN com Telegram bot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>