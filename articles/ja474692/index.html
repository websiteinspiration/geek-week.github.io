<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📠 🏛️ 🤦🏿 Kubernetes開発のSkaffoldレビュー 🐫 🆕 ⬆️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1年半前の2018年3月5日に、Googleは、CI / CD用のオープンソースプロジェクトの最初のアルファバージョンであるSkaffoldをリリースしました。その目的は、開発者が開発に集中できるように「Kubernetesのシンプルで再現可能な開発」を作成することでした。管理ではありません。スカフ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes開発のSkaffoldレビュー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/474692/"><img src="https://habrastorage.org/webt/b3/-g/81/b3-g81qlbnrcybqb5rbrojnibyw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1年半前の2018年3月5日に、Googleは、CI / CD用のオープンソースプロジェクトの最初のアルファバージョンである</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skaffoldをリリースしました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。その目的は、開発者が開発に集中できるように「Kubernetesのシンプルで再現可能な開発」を作成することでした。管理ではありません。</font><font style="vertical-align: inherit;">スカフォードにとって何が興味深いのでしょうか？</font><font style="vertical-align: inherit;">結局のところ、彼はいくつかの切り札を袖に持っています。そのおかげで、彼は開発者にとって強力なツールになり、オペレーティングエンジニアになる可能性があります。</font><font style="vertical-align: inherit;">プロジェクトとその機能について理解します。</font></font><a name="habracut"></a><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ちなみに、</font><font style="vertical-align: inherit;">Kubernetesに関連する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発者向けのツールの概要については</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、すでにSkaffoldについて簡単に説明しました</font><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理論。</font><font style="vertical-align: inherit;">目的と特徴</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、一般的に言えば、Skaffoldは（ビルド、プッシュ、デプロイの段階で）CI / CDサイクルを自動化する問題を解決し、開発者に迅速なフィードバックを提供します。</font><font style="vertical-align: inherit;">次のコード変更の結果をすばやく取得する機能-Kubernetesクラスターで実行されている更新されたアプリケーションの形式で。</font><font style="vertical-align: inherit;">そして、Skaffoldがロールアウトの適切なパイプラインを説明するのに役立つ、さまざまなコンター（開発、ステージ、プロダクションなど）で機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SkaffoldのソースコードはGoで記述されており、無料のApache License 2.0（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">下で配布されてい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主な機能と特徴を考慮してください。</font><font style="vertical-align: inherit;">1つ目は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Skaffoldは、CI / CDパイプラインを作成するためのツールを提供しています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ソースコードの変更をバックグラウンドで監視し、コードをコンテナイメージにビルドし、これらのイメージをDockerレジストリに公開してKubernetesクラスタにデプロイする自動プロセスを開始できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> リポジトリ内のファイルをコンテナ内の作業ディレクトリと同期させます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> container-structure-testを使用して自動的にテストします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ポートを転送します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> コンテナで実行されているアプリケーションのログを読み取ります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Java、Node.js、Python、Goで記述されたアプリケーションのデバッグに役立ちます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、機能について：</font></font><br>
<br>
<ul>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skaffold自体には、クラスター側のコンポーネントはありません</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">つまり、このユーティリティを使用するためにKubernetesを追加で構成する必要はありません。</font></font></li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのさまざまなパイプライン</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">開発中にコードをローカルのMinikubeにロールアウトしてから、ステージまたはプロダクションで展開する必要がありますか？</font><font style="vertical-align: inherit;">これを行うために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロファイル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とユーザー構成、環境変数、およびフラグが</font><font style="vertical-align: inherit;">提供され</font><font style="vertical-align: inherit;">、1つのアプリケーションのさまざまなパイプラインを記述できます。</font></font></li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">YAMLのコンソールユーティリティと構成のみ。</font><font style="vertical-align: inherit;">ネットワーク上で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実験的なGUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成する試みへの参照を見つけることができます</font><font style="vertical-align: inherit;">が、現時点では、これはおそらく誰かがそれを必要としていることを意味するだけで、実際にはそうではありません。</font></font></li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Skaffoldは独立したコンバインではありませんが、個別のモジュールまたは既存のソリューションを特定のタスクに使用することを目指しています。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
後者の例：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 組み立て段階では、次のものを使用できます。</font></font><ul>
<li> docker build ,     kaniko   Google Cloud Build;</li>
<li> Bazel ;</li>
<li> Jib Maven  Jib Gradle    Google Cloud Build;</li>
<li>  build-,  .      ( //…)   ,    ,  Skaffold    (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>).      ,      ;</li>
</ul></li>
<li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">container-structure-test</a>;</li>
<li>   :<ul>
<li> Kubectl;</li>
<li> Helm;</li>
<li> kustomize.</li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このおかげで、Skaffoldは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">構築するための</font></b><font style="vertical-align: inherit;">一種の</font><b><font style="vertical-align: inherit;">フレームワーク</font></b><font style="vertical-align: inherit;">と呼ぶことができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを使用する場合のワークフローの例を以下に示します（プロジェクトドキュメントから）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9w/ch/hy/9wchhy7-rqss03vvpkftjtfo8ea.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skaffoldは一般的にどのように機能しますか？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーティリティは、ソースディレクトリの変更を監視します。</font><font style="vertical-align: inherit;">ファイルに変更を加えると、Kubernetesクラスターのアプリケーションポッドと同期されます。</font><font style="vertical-align: inherit;">可能であれば、イメージを再構成せずに。</font><font style="vertical-align: inherit;">それ以外の場合は、新しい画像になります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 組み立てられたイメージは、container-structure-testを使用してチェックされ、タグ付けされてDockerレジストリに送信されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> その後、イメージがデプロイされます。イメージはKubernetesクラスターにデプロイされます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドを使用して起動が初期化された場合、</font></font><code>skaffold dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションからログの受信を開始し、Skaffoldは変更がすべてのアクションを再度繰り返すことを期待します。</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/webt/mv/uy/sx/mvuysx7r_uteprwwtb3vufffblw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skaffoldマイルストーンイラスト</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">練習。</font><font style="vertical-align: inherit;">スカフォードを試してみる</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skaffoldの使用法を示すために</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、プロジェクト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">GitHubリポジトリ</font></a><font style="vertical-align: inherit;">から例を取り上げ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ところで、</font><font style="vertical-align: inherit;">さまざまな詳細を考慮した他の多くの例を見つける</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こと</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ができます。</font><font style="vertical-align: inherit;">すべてのアクションはMinikubeでローカルに実行されます。</font><font style="vertical-align: inherit;">インストールは簡単で数分かかり、開始するにはkubectlが必要です。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skaffoldをインストールします。</font></font><br>
 <br>
<pre><code class="bash hljs">curl -Lo skaffold https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64<font></font>
chmod +x skaffold<font></font>
sudo mv skaffold /usr/<span class="hljs-built_in">local</span>/bin<font></font>
skaffold version<font></font>
v0.37.1</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要な例を使ってSkaffoldリポジトリを複製しましょう：</font></font><br>
 <br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/GoogleContainerTools/skaffold
<span class="hljs-built_in">cd</span> skaffold/examples/microservices</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は2つのポッドの例を選択しました。各ポッドには、Goで1つの小さなアプリケーションが含まれています。</font><font style="vertical-align: inherit;">1つのアプリケーションはフロントエンド（leeroy-web）で、2番目のアプリケーションへのリダイレクト要求はバックエンド（leeroy-app）です。</font><font style="vertical-align: inherit;">それがどのように見えるか見てみましょう：</font></font><br>
 <br>
<pre><code class="bash hljs">~/skaffold/examples/microservices <span class="hljs-comment"># tree</span><font></font>
.<font></font>
├── leeroy-app<font></font>
│   ├── app.go<font></font>
│   ├── Dockerfile<font></font>
│   └── kubernetes<font></font>
│       └── deployment.yaml<font></font>
├── leeroy-web<font></font>
│   ├── Dockerfile<font></font>
│   ├── kubernetes<font></font>
│   │   └── deployment.yaml<font></font>
│   └── web.go<font></font>
├── README.adoc<font></font>
└── skaffold.yaml<font></font>
 <font></font>
4 directories, 8 files</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
leeroy-appとleeroy-webには、Goコードと、このコードをローカルでビルドするためのシンプルなDockerfileが含まれています。</font></font><br>
 <br>
<pre><code class="bash hljs">~/skaffold/examples/microservices <span class="hljs-comment"># cat leeroy-app/Dockerfile</span><font></font>
FROM golang:1.12.9-alpine3.10 as builder<font></font>
COPY app.go .<font></font>
RUN go build -o /app .<font></font>
 <font></font>
FROM alpine:3.10<font></font>
CMD [<span class="hljs-string">"./app"</span>]<font></font>
COPY --from=builder /app .</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションコードは提供しません。アプリケーションが</font></font><code>leeroy-web</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストを受け入れてプロキシする</font><font style="vertical-align: inherit;">ことを知っていれば十分</font></font><code>leeroy-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">したがって、ファイル</font></font><code>Deployment.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には</font></font><code>app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（内部ルーティング用の）</font><font style="vertical-align: inherit;">サービスのみがあり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ポートpod'a </font></font><code>web</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーション自体にすばやくアクセスするためのprokidyvalです。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それがどのように見えるか</font></font><code>skaffold.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">~/skaffold/examples/microservices # cat skaffold.yaml<font></font>
apiVersion: skaffold/v1beta13<font></font>
kind: Config<font></font>
build:<font></font>
  artifacts:<font></font>
    - image: leeroy-web<font></font>
      context: ./leeroy-web/<font></font>
    - image: leeroy-app<font></font>
      context: ./leeroy-app/<font></font>
deploy:<font></font>
  kubectl:<font></font>
    manifests:<font></font>
      - ./leeroy-web/kubernetes/*<font></font>
      - ./leeroy-app/kubernetes/*<font></font>
portForward:<font></font>
  - resourceType: deployment<font></font>
    resourceName: leeroy-web<font></font>
    port: 8080<font></font>
    localPort: 9000</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、上記のすべての手順について説明します。</font><font style="vertical-align: inherit;">この設定に加えて、グローバル設定を含むファイルもあります- </font></font><code>~/.skaffold/config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは手動またはCLIを介して編集できます-たとえば、次のように：</font></font><br>
 <br>
<pre><code class="bash hljs">skaffold config <span class="hljs-built_in">set</span> --global <span class="hljs-built_in">local</span>-cluster <span class="hljs-literal">true</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは、グローバル変数</font></font><code>local-cluster</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を値</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">設定し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。その後、Skaffoldはイメージをリモートレジストリにプッシュしません。</font><font style="vertical-align: inherit;">ローカルで開発している場合は、このコマンドを使用してローカルにイメージを追加することもできます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
に戻る</font></font><code>skaffold.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この段階で</font></font><code>build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、画像をローカルで収集して保存する必要があることを示しています。</font><font style="vertical-align: inherit;">初めてアセンブリが開始すると、次のようになります。</font></font><br>
 <br>
<pre><code class="bash hljs">// .. Minikube      ,<font></font>
//   ,   <font></font>
<span class="hljs-comment"># minikube ssh</span><font></font>
$ docker images<font></font>
REPOSITORY                                TAG                                                                IMAGE ID            CREATED             SIZE <font></font>
leeroy-app                                7d55a50803590b2ff62e47e6f240723451f3ef6f8c89aeb83b34e661aa287d2e   7d55a5080359        4 hours ago         13MB <font></font>
leeroy-app                                v0.37.1-171-g0270a0c-dirty                                         7d55a5080359        4 hours ago         13MB<font></font>
leeroy-web                                5063bfb29d984db1ff70661f17d6efcc5537f2bbe6aa6907004ad1ab38879681   5063bfb29d98        5 hours ago         13.1MB<font></font>
leeroy-web                                v0.37.1-171-g0270a0c-dirty                                         5063bfb29d98        5 hours ago         13.1MB</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、Skaffoldは独自に画像をテストしました。</font><font style="vertical-align: inherit;">ところで、いくつかのタグ付けポリシーがサポートされています。</font></font></li>
<li>     <code>context: ./leeroy-app/</code>, ..  ,    .</li>
<li>    ,    kubectl     .</li>
<li> <code>PortForward</code>:  ,        <code>kubectl port-forward</code>,   Skaffold    .    —   9000   8080  Deployment’   <code>leeroy-web</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 開始する時</font></font><code>skaffold dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。チームは継続的な「フィードバックループ」を作成します。</font><font style="vertical-align: inherit;">すべてを収集してクラスターにインストールするだけでなく、現時点でのポッドのステータスを通知し、変更を監視してポッドのステータスを更新します。</font><font style="vertical-align: inherit;">
これは、</font><font style="vertical-align: inherit;">再構成中</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の起動の結果です</font></font><code>skaffold dev --port-forward</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ao/hf/s8/aohfs8d_geqzv8tb8uywgtvun3o.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初に、キャッシュが使用されていることは明らかです。</font><font style="vertical-align: inherit;">次に、アプリケーションがアセンブル、デプロイされ、ポートが転送されます。</font><font style="vertical-align: inherit;">示されているように</font></font><code>--port-forward</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Skaffold </font></font><code>web</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は要求に応じ</font><font style="vertical-align: inherit;">てポートを</font></font><code>app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に転送しましたが、彼の裁量で転送しました（最も近い空き</font><font style="vertical-align: inherit;">ポート</font><font style="vertical-align: inherit;">を選択しました）。</font><font style="vertical-align: inherit;">その後、アプリケーションから最初のログを取得します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パフォーマンスを確認しますか？</font></font><br>
<br>
<pre><code class="bash hljs">~/skaffold/examples/microservices <span class="hljs-comment"># kubectl get po</span><font></font>
NAME                          READY   STATUS    RESTARTS   AGE<font></font>
leeroy-app-6998dfcc95-2nxvf   1/1     Running   0          103s<font></font>
leeroy-web-69f7d47c9d-5ff77   1/1     Running   0          103s<font></font>
~/skaffold/examples/microservices <span class="hljs-comment"># curl localhost:9000</span>
leeroooooy app!!!</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルを変更します</font></font><code>leeroy-app/app.go</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-数秒かかり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">...そして：</font></font><br>
<br>
<pre><code class="bash hljs">~/skaffold/examples/microservices <span class="hljs-comment"># kubectl get po</span><font></font>
NAME                          READY   STATUS    RESTARTS   AGE<font></font>
leeroy-app-ffd79d986-l6nwp    1/1     Running   0          11s<font></font>
leeroy-web-69f7d47c9d-5ff77   1/1     Running   0          4m59s<font></font>
~/skaffold/examples/microservices <span class="hljs-comment"># curl localhost:9000</span>
leeroooooy Habr!!!</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、Skaffold自体は以前と同じようにコンソールに表示されましたが、1つだけ例外</font></font><code>leeroy-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がありました。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もっと練習</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいプロジェクトを作成するとき、Skaffoldの構成はを使用してブートストラップできるので</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、非常に便利です。</font><font style="vertical-align: inherit;">さらに、いくつかの構成を作成できます。デフォルトで構成を開発し、コマンドを使用してステージにロールアウトします</font></font><code>run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（変更と同じプロセスで</font></font><code>dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はないので、別の構成を使用）。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Katacodaには、</font><font style="vertical-align: inherit;">さらに簡単な例の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チュートリアル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります。</font><font style="vertical-align: inherit;">しかし、Kubernetes、アプリケーション、およびSkaffoldを備えた既製のサンドボックスを提供します。</font><font style="vertical-align: inherit;">基本を自分で試してみたい場合は、このオプションが最適です。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skaffoldの考えられる使用例の1つは、リモートクラスターで開発を行うことです。</font><font style="vertical-align: inherit;">我々はすでにとして誰もが自分のハードウェア上でMinikubeを実行し、アプリケーションを展開し、その十分な機能を待って快適です...この場合、Skaffoldは完全に、例えば、Redditのエンジニアが確認することができ、問題を解決</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について書いた</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのブログに。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、</font><font style="vertical-align: inherit;">Weaveworksからの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この出版物に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、生産用のパイプラインを作成する例があります。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skaffoldはパイプラインを構築するための便利なツールであり、Kubernetesでのアプリケーションのロールアウトを意味し、主に開発ニーズに焦点を当てています。</font><font style="vertical-align: inherit;">これにより、開発者の基本的なニーズを考慮した「短い」パイプラインを作成するのは非常に簡単ですが、必要に応じて、より大きなプロセスを整理することもできます。</font><font style="vertical-align: inherit;">CI / CDプロセスでSkaffoldを使用する例示的な例の一つは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある</font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストプロジェクト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kubernetes、gRPC、IstioとOpenCensusトレースの機能を使用する10件のmicroservices。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SkaffoldはすでにGitHubで約8000以上の星を獲得しており、Googleによって開発されており、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GoogleContainerToolsの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部です。</font><font style="vertical-align: inherit;">現時点では、現時点でプロジェクトが幸せに発展すると信じる理由はすべてあります。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesで実行されているアプリケーションの開発者向けのツール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WerfはKubernetesのCI / CD向けのツールです（レビューとビデオレポート）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garden v0.10.0：あなたのラップトップはKubernetesを必要としません</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesのヒントとコツ：ローカル開発とTelepresenceについて</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。」</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja474678/index.html">Khronos GroupがVulkanの例を使用して統合リポジトリを作成しました</a></li>
<li><a href="../ja474680/index.html">AIと2048。パート2：ミニマックス+アルファベータクリッピング</a></li>
<li><a href="../ja474686/index.html">幻想的な物語「救い」（10分）</a></li>
<li><a href="../ja474688/index.html">蒸気機関車とレトロな電車</a></li>
<li><a href="../ja474690/index.html">コンピューターでの作業をより便利にするために、高さが可変のコンソールを作成する</a></li>
<li><a href="../ja474694/index.html">パフォーマンステストのフレームワークを選択してねじった方法</a></li>
<li><a href="../ja474696/index.html">Seismic Challengeのオイルチケットまたはロスネフチチケット</a></li>
<li><a href="../ja474698/index.html">ユーザーインターフェイスでのモーダルウィンドウの使用</a></li>
<li><a href="../ja474700/index.html">クラウドスマートホーム。パート2：クラウドサービス</a></li>
<li><a href="../ja474702/index.html">EcmaScriptの観点からの関数型プログラミング。純粋な機能、ラムダ、免疫</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>