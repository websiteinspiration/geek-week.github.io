<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔻 🍯 🧑🏻 Hack en 60 secondes ou folie de quarantaine 🧑🏽‍🤝‍🧑🏽 👎🏾 🤟🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une petite histoire sur un client inadéquat et la découverte d'une vulnérabilité sur un site en 1 minute . 
 
 
 
 Je ne m'attendais pas à ce que cett...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hack en 60 secondes ou folie de quarantaine</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496564/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une petite histoire sur un client inadéquat et la découverte d'une vulnérabilité sur un site </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en 1 minute</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u1/fi/ms/u1fimsdgejpu22xcqudxrmbmrnk.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne m'attendais pas à ce que cette histoire particulière soit mon premier article sur Habré. </font><font style="vertical-align: inherit;">J'écris pendant qu'il fait chaud! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ce que vous lisez plus loin n'est pas un appel à l'action ou une tentative de «compromettre» qui que ce soit.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 avril 2020.</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai vu un message dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linkedin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : «Bonjour. Nous recherchons un développeur pour finaliser le projet sur yii2 ... tel: + 79 ... whatsapp ” </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Publié dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whatsapp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :“ Bonjour. Je viens de linkedin, envoyez des savoirs traditionnels, le cas échéant. " </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En réponse, il a reçu un énorme message avec des liens vers le site, une planche en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trello</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et un petit TK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mm/8i/l0/mm8il0o4jwx8cqzktvxbetsodws.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A étudié </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trello</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selon le conseil d'administration, au moins 4 développeurs ont travaillé sur le projet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 avril 2020</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En raison de la quarantaine, à mon avis, les gens commencent à devenir fous. Voici ce que j'ai vu dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WhatsApp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> quand je me suis réveillé:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/ja/bo/jwjabogkr_rltbobmbl2w71airg.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout semble n'être rien, lu et oublié. Mais quelque chose à l'intérieur ne donnait pas de repos, il y avait un sentiment d'incomplétude, dont je voulais vraiment me débarrasser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne restait plus qu'à entrer dans le projet du «délinquant» et à se débarrasser des sensations désagréables à l'intérieur: D. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le compte à rebours a commencé. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">00:00</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ouvre le site. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vois le formulaire de recherche et j'essaie de vérifier l' </font><b><font style="vertical-align: inherit;">injection SQL que</font></b><font style="vertical-align: inherit;"> je </font><b><font style="vertical-align: inherit;">connaissais </font></b></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">précédemment</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs">' UNION <span class="hljs-keyword">SELECT</span><font></font>
<span class="hljs-number">1</span>,<span class="hljs-keyword">group_concat</span>(username,<span class="hljs-number">0x7c</span>,<span class="hljs-keyword">password</span>),<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">14</span>,<span class="hljs-number">15</span>,<span class="hljs-number">16</span>,<span class="hljs-number">17</span>,<span class="hljs-number">18</span>,<span class="hljs-number">19</span>,<span class="hljs-number">20</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>,<span class="hljs-number">24</span>,<span class="hljs-number">25</span>,<span class="hljs-number">26</span>,<span class="hljs-number">27</span>,<span class="hljs-number">28</span>,<span class="hljs-number">29</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span><font></font>
<span class="hljs-keyword">fRom</span> <span class="hljs-keyword">user</span><span class="hljs-comment">-- -</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme prévu - cela </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne fonctionne pas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais cela valait la peine d'essayer. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">00:20</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le site a la possibilité de s'inscrire de deux manières: en tant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'utilisateur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et en tant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'entreprise</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la base des </font><font style="vertical-align: inherit;">captures d'écran </font><font style="vertical-align: inherit;">vues dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trello</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , j'ai décidé de m'inscrire et de travailler avec le compte personnel de la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">société</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remplissez les champs où l'avant permet les lignes</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">users</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juste pour améliorer "l'effet de présence" des développeurs lorsqu'ils regardent dans la base de données. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">00:40</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Après une inscription réussie, nous serons redirigés vers la page de profil de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entreprise</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ouvrez l'élément de menu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Charger les documents»</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (très pratique, n'est-ce pas: D) et essayez de charger le </font><font style="vertical-align: inherit;">fichier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">php</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/mq/ze/memqze0ofvir3fqfwagu_pgefjq.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d'abord téléchargé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adminer.php</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tel qu'il était à portée de main. </font><font style="vertical-align: inherit;">Le fichier a été téléchargé avec succès et les développeurs ont soigneusement préparé pour moi une redirection vers la page avec un lien vers le fichier. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cz/q_/rj/czq_rjraoulb_kmn4isjptu58zm.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'est ouvert par le lien: </font></font><code>/upload/certified/15861775921.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et a fonctionné correctement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'était le début de la fin! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1:00</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, chargez le plus simple </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">php-web-shell</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> via le même formulaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord comprendre qui nous sommes et où nous sommes:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">pwd</span> &amp;&amp; whoami</code></pre><br>
<img src="https://habrastorage.org/webt/wu/gf/ku/wugfku53jvvhum_-ut0atexgnrc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons la liste des fichiers du répertoire du site:</font></font><br>
<br>
<pre><code class="bash hljs">ls /var/www/admin/data/www/_/</code></pre><br>
<img src="https://habrastorage.org/webt/kg/pl/fz/kgplfzl2ums0nlqvw9y_rozf1k8.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons la structure standard du framework </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yii2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , à laquelle nous nous attendions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons accès à la base de données, qui peut être entrée dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adminer.php</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> précédemment chargé </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">cat /var/www/admin/data/www/_/config/db.php</code></pre><br>
<img src="https://habrastorage.org/webt/qr/of/et/qrofetqv01qfrvbjtlnpitgefa8.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, j'ai été surpris que de telles vulnérabilités existent toujours. </font><font style="vertical-align: inherit;">Et encore plus parce qu'ils peuvent être trouvés si facilement et rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, il s'agissait d'un projet d'une entreprise des Émirats arabes unis, qui fournit des produits de forage et des produits industriels pour les industries du pétrole, du gaz et du forage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai été ajouté à la liste noire dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WhatsApp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> après le dernier message et je ne pouvais pas parler de la vulnérabilité, j'ai donc laissé les œufs de Pâques sur le serveur pour les développeurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'oubliez pas de faire une vérification du type de fichier côté serveur, et faites généralement plus attention à la sécurité de votre code!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr496544/index.html">Hackathon en ligne de projets pour les indépendants: 500 mille roubles pour leurs idées et le soutien du Service fédéral des impôts</a></li>
<li><a href="../fr496546/index.html">Démarrage au sein de l'entreprise</a></li>
<li><a href="../fr496554/index.html">Gerund en anglais: à peu près compliqué</a></li>
<li><a href="../fr496558/index.html">Un nouvel outil pour aider les agences de presse asiatiques à repérer les fausses images</a></li>
<li><a href="../fr496562/index.html">Meetups hebdomadaires en ligne du 10 avril sur DevOps, backing, front, QA, gestion d'équipe et analytique</a></li>
<li><a href="../fr496566/index.html">Algorithmes d'IA et automatisation du codage clinique à titre d'exemple</a></li>
<li><a href="../fr496570/index.html">RCC: ordinateur quantique et blockchain. La science russe et ses scientifiques</a></li>
<li><a href="../fr496574/index.html">Ensemble complet de gRPC, API JSON RESTful, WS et Swagger à partir d'un fichier proto. De l'introduction aux nuances et subtilités de grpc-gateway</a></li>
<li><a href="../fr496580/index.html">Quel modèle de monétisation choisir pour une startup informatique: exemples et cas</a></li>
<li><a href="../fr496582/index.html">Guerre des mondes: technicien contre vendeurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>