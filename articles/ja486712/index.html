<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👾 🍥 🦅 「典型的な間違い-何もかもを気ままにベンチマークする」：ベンチマークについてのAndrey Akinshinへのインタビュー 👩🏿‍🚀 👩🏽‍🏭 😠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="昨年、Andrei Akinshin（ドリームウォーカー）「Pro .NET Benchmarking」という本が発行されました。ベンチマークに関する詳細な作業で、.NET開発者と他の分野のITスペシャリストの両方に役立ちます。
 
 リリースまでに数か月残ったとき、私たちはDotNext 2019...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>「典型的な間違い-何もかもを気ままにベンチマークする」：ベンチマークについてのAndrey Akinshinへのインタビュー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/486712/"><img src="https://habrastorage.org/webt/yi/fa/vg/yifavgmh6omk7aupby2jketcc48.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
昨年、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrei Akinshin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドリームウォーカー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Pro .NET Benchmarking」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という本</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">が発行されました</font></a><font style="vertical-align: inherit;">。ベンチマークに関する詳細な作業で、.NET開発者と他の分野のITスペシャリストの両方に役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースまでに数か月残ったとき、私たちはDotNext 2019 Piterカンファレンスを開催しました。オンラインブロードキャストで、Andreiにこの本と一般的にベンチマークについて尋ねました。それ以来、このインタビューは時代遅れになっているはずです。彼らはその本について将来の時制で話しますが、今ではすでに6か月です。しかし、過去6か月間、人類は99パーセンタイルを採用することを別の方法で決定していませんでした。そのため、ベンチマークを使用できるすべての人にとって、Andreiの回答には多くの関連性があり興味深いものがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は実行します</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DotNextの将来について、トピック「パフォーマンス分析について話しましょう」-つまり、ベンチマークの作成についてではなく、収集した値の分析についてです。</font><font style="vertical-align: inherit;">現在、Andreyは数学的統計に関する何百もの記事を研究しており、実際のパフォーマンス分析に最適な方法について説明しています。</font><font style="vertical-align: inherit;">本では、そのような分析にも注意が払われており、インタビューでアンドレイはその重要性を説明しました。</font><font style="vertical-align: inherit;">したがって、新しいレポートを見越して、すべての人のためにインタビュービデオを開き、Habr専用のテキストのトランスクリプトを作成しました。これで、表示だけでなく読むこともできます。</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/JvIUbjAO7j4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font color="#5D7DBD"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本の主なもの</font></font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-DotNext放送の視聴者を再び歓迎します。今回はAndrey Akinshinが一緒にいます。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- みなさん、こんにちは！</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-今、あなたに関連する主なニュースは、9月までにリリースされる本の発表です</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
...-すべてがうまくいけば、6月下旬にリリースされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、締め切りの仕組みを理解する必要があります。いずれにせよ違反することができない最も極端なものがあります。 Amazonでは、この本の発売日は8月23日頃です。そして、この日付をめくると、あらゆる種類のペナルティが課され、Amazonは不幸になります。そして、本がもっと早く出てきたら、まあ、いいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ですので、問題がなければ6月に読めるようになることを心から願っています。そして、8月末が締め切りです。あなたはIT部門でも働いているので、これらがどのように機能するかを理解しています。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-聴衆のほとんどはおそらくこの本についてすでに聞いています。しかし、知らない人のために、彼女についての話から始めましょう。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-この本は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Pro .NET Benchmarking」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。彼女はApressシリーズの出身です-Conrad Coconut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のPro .NETメモリ管理の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本が最近リリースされたのと同じシリーズ</font><font style="vertical-align: inherit;">です。そして、Sasha Goldsteinによる本</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Pro .NET Performance」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がありました。おそらくこれについて聞いたことがあるでしょう。それはDotNextで時々再生されます。そして同じシリーズで私の本が来ます。最初から最後までベンチマークを行う方法についてです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
統計から始めて、さまざまな側面をカバーしようとしましたが、それについては別の章があります。それは大学で教えられた方法ではなく、「箱に入れるボール」の例は1つもありません。ベンチマークの際に役立つ可能性のあるものに焦点を当てます：指標、標準偏差、標準誤差、あらゆる種類の信頼区間とそれらの解釈方法。つまり、私たちは次のことを話しているのです。条件付きのBenchmarkDotNetが100万の異なる数を与えた場合、それらをどうすればよいですか？このデータを解釈して結論を​​引き出す方法について、実際的な推奨事項を示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、CPUバウンドベンチマークとメモリバウンドベンチマークについての章があります。最新のIntelプロセッサーのマイクロアーキテクチャー効果により、3〜4行のベンチマークを記述し、同時に足を踏み入れる方法の例を含む、さまざまなケーススタディが数多くあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、パフォーマンス分析とパフォーマンステストに関する章があります。ベンチマークは別の実験としても優れていますが、多くの人はCIにベンチマークを付け、常にサーバー（理想的には同じサーバー）でベンチマークを実行し、データを収集してパフォーマンスの低下を検出したいと考えています。したがって、そのようなデータを処理し、さまざまな種類のパフォーマンステストを作成する方法についての章があります（それらの多くは異なります）。たとえば、コールドスタート、ホットスタート、グラフの処理方法、データ配列全体の処理方法の違いは何ですか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
過去のDotNextの1つで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">話しました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンス分析については、彼はパフォーマンスの異常を検索するさまざまな方法について話しました。劣化は発生する可能性がある唯一の問題ではありません。たとえば、ベンチマークが1秒または10秒間機能する場合、マルチモーダル分布があります。大規模な製品（特にマルチスレッド）では、このようなケースは確実に発生し、通常は問題を隠します。対応するマシンで実行されているパフォーマンステストではなく、通常のテストであっても、悪魔は「震え」、多くの差異を与える方法を知っているので、このすべてのデータを収集して分析すると、そのような問題のある多くのテストを見つけることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、ベンチマークには非常に幅広い非常に興味深いタスクがあり、私はそれらを棚に注意深く配置しました。</font><font style="vertical-align: inherit;">しかし、私はそれを理論だけでなく、製品の生産に使用できるいくつかの知識になるように、できる限り実用的にしようとしました。</font></font><br>
<br>
<h2><font color="#5D7DBD"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微妙なベンチマーク</font></font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-どこかで読んだフレーズを覚えています。インターネット上のベンチマーク結果については、この結果の誤った解釈を見つけることができます。このフレーズにどの程度同意しますか？</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- 全く同感であります。有効なベンチマークと無効なベンチマークについて多くの話がありますが、鳥瞰図から見ると、何らかの方法で何かを測定し、少なくともいくつかのパフォーマンスメトリックを収集してファイルまたはコンソールに表示した場合、これは特定のベンチマークです観点からは、それは有効です：何かがいくつかの数値を測定して表示します。主な質問は、これらの数値をどのように解釈し、次に何をするかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベンチマークのトピックに没頭している人々の最初の間違いの1つは、「なぜ」という質問をせずにすべてをベンチマークすることです。さて、私たちはベンチマーク、測定しました-そして何ですか？ベンチマークを行う目的を決定することは非常に重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、特定のケースのパフォーマンスを評価し、パフォーマンスの低下を検出できる安定したワークロードを作成する場合、これは1つのケースです。別のケース：同じことを行う2つのライブラリーがあり、パフォーマンスのために最速のものを選択したいのですが、これをどのように比較しますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解釈の観点からは、正しいビジネス上の決定につながるものはどれも良いと見なすことができます。必ずしも正しいとは限りませんが、成功した場合は問題ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私は私の本の中で特別な練習さえしているようなものがあります。 2つのアルゴリズムがあり、演習はこれであるとします。最初に、最初のアルゴリズムが2番目のアルゴリズムよりも10倍速いことを示すベンチマークを作成し、次に反対のアルゴリズムを示すベンチマークを作成する必要があります。ソースデータや環境で遊んだり、Monoを.NET Coreに変更したり、WindowsではなくLinuxで実行したりできます。カスタマイズには100万のオプションがあります。そして結論はこれです：あるプログラムが別のプログラムよりも速く動作することを示すために着手した場合、おそらくそれを行う方法があるでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、あなたの質問に戻って、有効なベンチマークと無効なベンチマークの間に線を引き、無効の定義を与えることは非常に困難です（つまり、それが悪いことを認識するためにそこにあるべきものです）。そして、「正しい」解釈と「誤った」解釈の違いについても同じことが言えます。ベンチマークで何が起こっているのかを完全に理解することはできません。すべての内部プロセスを完全に説明することはできません（これはあまり良くありません。非常に忙しい場合）が、同時に写真がどのように見えるか一般的に理解します。そして、あなたがそれを正しく行うことができた場合（ここでも問題は「正しい」とは何か）であり、適切なビジネス上の決定に至った場合は、それで問題はありません。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「あなたの本をよく考えて読んだ場合、「正しい」決定を下し始めますか？それとも影響を与える本の範囲外の多くのものがありますか？</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-ベンチマークは、私の意見では、実際にのみ習得できるトピックです。はい、本で私は多くの方法論、推奨事項を提供し、落とし穴を説明します。ベンチマークでは、そのような問題がたくさんあるので、それらについて知らなければ、実際にはそれらについて推測することはできません。しかし、あなたがそれらについて知っているなら、これはあなたのベンチマークが正しいことを絶対に保証するものではありません。つまり、これはその分野で自分自身を何らかの形で方向付けるのに役立つ、このような最小限のツールキットです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のベンチマークとパフォーマンステストは、この領域を体系的に扱う場合にのみ作成できます。ヘッド内のニューラルグリッドは、パフォーマンスレポートを読み取るようにトレーニングします。パフォーマンス測定中に取得された分布を見ると、たとえば、BenchmarkDotNet（および「平均」列だけでなく標準偏差も）からの要約テーブルを見ることができます。 ）、99分位の分位点で、標準誤差、追加の特性、最小、最大で調べます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このすべてを見ると、非常に、非常に、特定の最小ボリュームが蓄積されているため、パフォーマンスへの投資をより速く実行でき、経験のない人（私の本を読んだり、100万のブログ投稿を読んだとしても）には見えないものを見たり彼らは経験がないという事実のために。</font><font style="vertical-align: inherit;">問題が発生しないか、データを即座に正しく解釈することができません。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-このDotNextについて、Dmitry Nesteruk（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メザステル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）通常、ITの本はすぐに古くなりますが、彼がデザインパターンについて書いた場合、そこにあるすべてのものが毎年変わるわけではありません。また、ベンチマークについてはどうですか。この本も非常に古くなったわけではありませんか、それとも2年前に何か書いたでしょうか。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-単音節の答えを出すことは非常に困難です。根拠はありますが、時代遅れにならない資材もあります。同じ統計：99パーセンタイルが2年前に考慮されたので、それはまだそう考えられており、2年後に何も変化しないという疑いがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、同時に私は次のように述べています。ベンチマークは別の分野である必要があると思います。何らかの理由で、歴史的に、体系的な測定に十分な注意を払った人はいませんでした。さて、何がありますか？彼はそれを取り、タイマーを開始し、タイマーをオフにして、どれだけ経過したかを見ました。そして、この本では、予備的な見積もりによると、600ページを超えることが判明し、誰もが「600ページに何が書けますか？」と私に尋ねました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これは分野、コンピューターサイエンスの別の領域である必要があると思います。そして、これはそのような「言語にとらわれない」方向であり、一般的な機器は正しいままであり、変更されません。これは、全体として人類が到達したものです。これは、ランタイム、言語、エコシステムに適用されます。しかし、これは答えの一部にすぎません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてもう1つの部分は、ランタイムの機能、.NETの機能にすでに結びついています。現在（この本には多くのことが含まれています）、. NET Frameworkがあり、.NET Coreがあり、Monoがあります。パフォーマンスの測定値は、ランタイムが異なる場合や、同じランタイムの隣接する2つのバージョンで異なる場合があります。 .NET Core 2.2と今後の.NET Core 3.0を使用する場合、一部のワークロードは昼と夜で異なります。彼らは、最も単純なシナリオが単に10倍、50倍高速化されるようなクールな最適化を行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coreの新しいバージョンに切り替えると、プログラム全体が50倍速く動作しなくなることは明らかですが、ほとんどの場合、合成ベンチマークに該当する個々の小さな断片はオーバークロックされる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして変化するもの、主にこれらすべてのバージョンに関連して変化するもの、新しい最適化が現れます。たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">段階的ジッティング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は.NET Core 3.0に表示されます</font><font style="vertical-align: inherit;">。つまり、ランタイムは最初に、コードによるメソッドの1つの単純な（あまり効果的ではない）ネイティブ実装をすばやく生成できます。そして、ランタイムがこのメソッドを何度も呼び出すことに気づくと、バックグラウンドでもう少し時間がかかり、より生産的なコードが再生成されます。 Java HotSpotが.NETの世界で長年続いているという事実については、今年の後半に今年のデフォルトでリリースに含まれることになります</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（およそEd。：2019で取られたインタビューを思い出してください）</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、BenchmarkDotNetにとって、そのようなケースを正常に処理することは困難です。 Javaの世界では、彼の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">JMH</font></a><font style="vertical-align: inherit;">におけるAlexey Shipilev</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私はずっと前にそれを処理する方法を学びましたが、私たちはまだそうしなければなりません。このテーマについても、ランタイムを見た人とコミュニケーションをとっています。つまり、すべてを正しく処理するには、特別なペンとそれらのAPIが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらは変化しています。間もなくすべてのランタイムが統合され、1つの.NET 5が存在するようになります。これは何らかの方法で名前が変更されると思います。これは中間名です。 .NET Core 5.0のバージョンがすでにあるため、5ではなく6になる可能性があります。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-まあ、私たちがWindowsから知っているように、バージョン番号の数字をスキップすることはMicrosoftにとって問題ではありません。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- はい。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">DNX</font></a><font style="vertical-align: inherit;">の時点ですでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5番目の.NET Coreを備えたターゲットフレームワークがありましたが、今では「5.0」がすでに多く使用されており、古い投稿がたくさんあります。だから私は知りません、彼らは今3番目のバージョンの後に5番目を作るつもりですが、私は4つだけでなく5つも逃し、すぐに6番目を作っただろう。そして、私の意見では、奇数バージョンを安定したLTSにし、偶数バージョンをあまり安定しないようにしたいという事実を考慮すると、すぐに7にすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、これは彼らの頭痛の種です。ただし、ランタイムの開発を監視する必要があることが重要です。この.NET固有の部分が古くなっているため、古くなったほどではありませんが、静かになっています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このすべてが更新された本の第2版を作ることをすでに考えています。</font><font style="vertical-align: inherit;">Intelプロセッサーもまた、静止しておらず、開発が進んでおり、新しい最適化が現れています。これもまた、巧妙な方法で処理する必要があります。</font><font style="vertical-align: inherit;">Skylakeは多くの不愉快な驚きを発表しました。同じBenchmarkDotNetで、トリッキーな最適化を回避して安定した結果を得るために多くの作業が行われました。</font></font><br>
<br>
<h2><font color="#5D7DBD"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BenchmarkDotNetおよびRiderとの相互作用</font></font></font></h2><br>
<strong><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-BenchmarkDotNet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリでの作業で</font><font style="vertical-align: inherit;">多くの経験</font><font style="vertical-align: inherit;">が得</font><font style="vertical-align: inherit;">られた</font><font style="vertical-align: inherit;">ことは明らかです。その</font><font style="vertical-align: inherit;">ため、ベンチマークのトピックについて本を書いたのはあなたでした。</font><font style="vertical-align: inherit;">そして、ここで問題が発生します。本はどういうわけかBenchmarkDotNetに関連付けられていますか、それとも「ツールにとらわれない」ですか？</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-私は彼女の道具にとらわれないようにしようとしました。 BenchmarkDotNetについては、1つの小さなセクションがあり、それをケーススタディの例としても使用しています。小さなマイクロアーキテクチャ効果を示す必要がある場合は、「ここでBenchmarkDotNetを使用してベンチマークを作成します」と言います。本の各ベンチマークに100万のストラップを付けないように、ウォームアップロジックを個別に記述する場所はありません。ベンチマークルーチン全体を実行する既製のソリューションがすでにあります。方法論についてはこれ以上説明しません（冒頭で説明しました）が、CPUレベルでの影響について説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの使用例を以下に示します。残りの部分は、BenchmarkDotNetから可能な限り抽象化して作成しようとしました。この本は.NET開発者だけでなく、たとえばJava開発者にも役立ちました。一般的なメカニズムはすべて他のプラットフォームに簡単に移植できるため、.NETとBenchmarkDotNetは、概念を説明するツールとして使用されます。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-そして、反対の方向に影響はありましたか？この本を作成する過程で、BenchmarkDotNetでこれを行う必要があることにようやく気づきましたか。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-はい、私はあらゆる種類の小さなチップを書きました。特にそれらが本に載るようにしました。たとえば、私がすでに話したマルチモーダル分布のクールな検出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
良い方法では、ベンチマークの結果を分析するときは、常に分布を見て、画像を開き、そこで何が起こったかを調べる必要があります。しかし、実際には、誰もしません。条件付きでいくつかのコードベースで50のベンチマークを実行し、このコードベースを1日に10回変更し、フルセットを再起動するたびに、50のグラフを見ることさえないので、もちろんそれを行う必要があります怠惰に。そして、これは、概して、意味をなさない、これは人間の仕事ではなく、これは調整の仕事です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BenchmarkDotNetには、分布がマルチモーダルであると自動的に判断してユーザーに警告する優れたアルゴリズムがあります。図を見て下さい！ここではすべてが悪いです！ここに、列に平均値が表示されます。見ないでください。それは何にも対応していません、チャートを見てください！」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これは、グラフィックスで人の注意をそらさないことが本当に重要である場合にのみ印刷されます。そこで</font><font style="vertical-align: inherit;">は、Brendan Greggの</font><font style="vertical-align: inherit;">いわゆる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m値に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づくアプローチが</font><font style="vertical-align: inherit;">Netflixの主要なパフォーマンスエンジニアです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、彼は分布に基づいて特別に作成されたヒストグラムを使用するため、彼のアプローチは私には十分ではありませんでした。つまり、ヒストグラムが入力に供給され、n値が考慮され、それによって魔法のように決定されます。マルチモーダル分布があるかどうかです。そして、ヒストグラムを構築する方法、ブレンダングレッグは書きませんでした！なんとか自分のバイクを発明しなければならなかったが、驚くほどうまくいった。このアルゴリズムは本にまとめられています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような話はかなりありました。本を直接書くのに2年半かかりました。一般に、コンテンツを収集してから5年、出版社と契約を結んでから2年半になります。この2年半の間、この本のおかげで、ライブラリーはさまざまな方法で汲み上げられてきました。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-想像するのは難しいですが、本とBenchmarkDotNetに加えて、あなたの人生にはRiderに関する作業もあり、そこにもおそらくベンチマークがあります。これについて話してもらえますか？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冷凍庫</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒーターの横に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あるMacbookのTwitter写真を見て、</font><font style="vertical-align: inherit;">それがパフォーマンスにどのように影響するかを確認しました。それは、仕事用か、本用か、またはその両方ですか？</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-むしろ、すべて一緒に。では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライダー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">個々のパフォーマンスへの投資にはBenchmarkDotNetを使用しています。つまり、パフォーマンスが重要な部分でコードを記述する最良の方法を理解する必要がある場合、またはLinuxのMonoとWindowsの.NET Frameworkでのコードの動作の違いを調査する必要がある場合です。私たちはBenchmarkDotNetを採用し、実験を設計し、結果を収集し、結論を導き出し、ビジネス上の意思決定を行い、どこでもすばやく機能するようにコードを記述する方法を説明します。そして、このベンチマークは破棄されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、CIで実行されるBenchmarkDotNetの体系的なベンチマークはありません。しかし、代わりに、パフォーマンス作業には他にも多くの領域があります。たとえば、すべてのテストから数値を収集し、それらのさまざまなパフォーマンスの異常、同じマルチモーダル分布、いくつかの大きな標準偏差を持つテストを探し、それをすべて1つのダッシュボードに収集する内部ツール。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが非常に長い間取り組んできたものの、そうしていない別のアプローチは、信頼性の高いパフォーマンステストです。つまり、masterブランチでのパフォーマンスの低下を凍結できないようなアプローチを作りたいと考えています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、従来のベンチマークはリソースを大量に消費するため、あまり適していません。通常の統計情報を取得して何らかの方法で機能させるには、多くの反復を行う必要があります。そして、数百または数千のパフォーマンステストがある場合、各テストを予想どおり30回実行すると、これはすべての人のすべてのブランチに当てはまります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、一方では、できるだけ少ない反復回数を実行したいと思います（理想的には1回ですが、一度に1回ずつ、劣化があるかどうかを判断するのは非常に困難です）。起こりうる最悪の事態は、誤検知で、何も問題がなかった場合ですが、システムはパフォーマンスの低下について話し、ブランチをマスターでフリーズできません。これが起こった場合、彼らは私に石を投げ、誰もこのシステムを使用しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、条件付きで、1回の反復後にパフォーマンス低下の疑いがあるが、100％の信頼性がない場合、2回目の反復を行う価値があります。 2番目以降は、何かが起こっただけで、すべてが正常であると判断できます。これで、パフォーマンスの低下が確実になり、行進が禁止されたと言えます。そして、あなたは言うことができます：「いいえ、2回の繰り返しではまだ十分ではありません。3回目に進む必要があります。まあなど。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、少数の反復（1、2、3）では、標準テストはまったく機能しません。これが私のお気に入りの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">マンホイットニー</font></a><font style="vertical-align: inherit;">検定です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">少なくとも5回の反復があると、正常に動作し始めます。しかし、すべてが完全に悪い場合にのみ、5番目に到達します。したがって、偽陽性を発生させないようなヒューリスティックのセットを開発する必要がありますが、同時に、可能な限り最小の反復回数で劣化が検出されます。そして今、これはプログラマー工学と数式の混合にとってかなり難しい仕事です。まだ完了していませんが、これに進みます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、冷蔵庫の中のマックブックについて-これも仕事のためのものです。現在、私がよく行っているミニプロジェクトの1つは、熱抑制モデルの研究です。状況は次のとおりです。CPUにバインドされたベンチマークがハードウェアに非常に負荷をかけると、CPUの温度が上昇し、特定のしきい値に達すると、Intelプロセッサまたはオペレーティングシステムは次のように言います。「Ay-yy-yy！過熱しています！」 -そして、一定期間、頻度を減らします。次に、たとえば、2〜3回の反復が取得されます。この反復では、パフォーマンスの低下が見られます。そして、私たちは次のようなものです。すべてが悪いです！このブランチは開催しません。」しかし、実際には、パフォーマンスエージェントが過熱しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これに対処するにはさまざまな方法があります。独自のスタンドを備えた独自のサーバールームがあり、この温度制限が発生しないように、そこに十分な冷却を提供するようにしています。しかし、これも常に成功するとは限りません。つまり、エージェントを完全に凍結することはできません。エージェントはこれからはそれほどではありませんが、どういうわけか戦う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のオプションは、たとえば、ターボブーストをオフにして、プロセッサが基本周波数を超えないようにすることです。したがって、これにより、過熱の可能性が減り、プロセッサはすでにそれほど熱くありません。 2番目に、周波数がより安定します（ターボブーストでは、かなり頻繁に震え、ベース周波数でターボブーストをオフにすると、非常に直線的になり、より安定した結果が得られます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、サーマルスロットリングのモデルは非常に異なります。1つ目は、プロセッサとすべてのアイアンの構成に大きく依存し、2つ目は、オペレーティングシステムに依存します。たとえば、Macを例にとります。多くのユーザーがいて、Riderが遅くなることを望まないため、Macのテストがたくさんあります。そして、非常にアグレッシブなサーマルスロットリングモデルがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近発表された新しいIntelプロセッサーでは、さらに複雑なジョークがあります。</font><font style="vertical-align: inherit;">温度が50度などの特定のしきい値を下回ると、周波数は通常のターボブーストの最大周波数よりもさらに高くジャンプする可能性があります。</font><font style="vertical-align: inherit;">つまり、低温では「少し」ダイナミックオーバークロックのような動作をします。</font><font style="vertical-align: inherit;">同じ効果。</font><font style="vertical-align: inherit;">私たちのエージェントはまだ条件付きで古いプロセッサであり、まだアップグレードされていませんが、最新のものをすべて購入したいオタクはこれを踏むことができます。</font></font><br>
<br>
<h2><font color="#5D7DBD"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未来</font></font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「時間がなくなるので、私はあなたを中断しなければなりません。」しかし興味をそそられる人のために：この資料についてブログ投稿を書くつもりですか？</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-はい、私が資料を収集している間、すべてが非常に興味深いものであり、熱スロットルの非常に複雑なモデルです。たとえば、Windowsにはパワースロットリングがあり、バッテリーの電力などを節約できます。データを収集している間、ブログの投稿や科学記事にまとめたり、本の第2版に含めたりします。</font></font><br>
<br>
<blockquote>          ,     .  — , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.<br>
<br>
   —     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">DotNext 2020 Piter</a>       -. ,     ,   ,       . -,       ,     .  -,         .      —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.<br>
</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja486702/index.html">2月3日から9日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja486704/index.html">2月3日から9日までのサンクトペテルブルクでのデジタルイベント</a></li>
<li><a href="../ja486706/index.html">生き方としてのバグの検索：レビュー2</a></li>
<li><a href="../ja486708/index.html">ファイリングシステムから政府の自動データベースへの移行</a></li>
<li><a href="../ja486710/index.html">PostgreSQLモニタリングの基本。アレクセイ・レソフスキー</a></li>
<li><a href="../ja486714/index.html">最低でもInstagram API</a></li>
<li><a href="../ja486716/index.html">Moscow Exchange Free APIがGoogleスプレッドシートで行うこと</a></li>
<li><a href="../ja486722/index.html">オープンソースツールによる静的安全性テスト</a></li>
<li><a href="../ja486726/index.html">仮想EDGEルーターのネットワーク接続の診断</a></li>
<li><a href="../ja486728/index.html">ドイツのデータ保護機関：Windows 10 1909 Enterpriseのテレメトリは完全に無効にできます</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>