<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔅 🚶🏻 👩🏼‍⚕️ ¿Qué es Azure Stack HCI y cómo funciona? 👩🏾‍🤝‍👩🏼 😷 🧝🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Hoy queremos hablar sobre de qué se trata la plataforma Azure Stack HCI. Incluyendo lo que es en general, de qué hardware se ensambla, qué ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¿Qué es Azure Stack HCI y cómo funciona?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/496766/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola Habr! </font><font style="vertical-align: inherit;">Hoy queremos hablar sobre de qué se trata la plataforma Azure Stack HCI. </font><font style="vertical-align: inherit;">Incluyendo lo que es en general, de qué hardware se ensambla, qué software contiene, cómo funciona y eso es todo. </font><font style="vertical-align: inherit;">¡Únete ahora!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/a8/ns/msa8nsszbolcqdqftfpzhmhkkci.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es una publicación invitada de los chicos de AltaStor. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AltaStor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un integrador de sistemas especializado en la creación de soluciones para el almacenamiento confiable de datos. </font><font style="vertical-align: inherit;">Gracias a la experiencia acumulada en la creación de clústeres de conmutación por error y HCI, se selecciona una solución individual para cada cliente que mejor se adapte a sus tareas.</font></font></blockquote><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué es la Azure Stack HCI?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es una solución hiperconvergente que combina varios productos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware de un socio OEM certificado de Microsoft.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema operativo Windows Server 2019 Datacenter.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software del Centro de administración de Windows.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servicios de Microsoft Azure si es necesario.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta solución ha existido en el mercado durante mucho tiempo, y algunos de nuestros clientes la han utilizado durante mucho tiempo. </font><font style="vertical-align: inherit;">Sin embargo, no publican los resultados de la prueba de rendimiento de su instalación. </font><font style="vertical-align: inherit;">Decidimos llenar este vacío y hablar sobre nuestra experiencia con Azure Stack HCI con un ejemplo específico. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obtener documentación e información general sobre Azure Stack HCI, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haga clic aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diseño de la cabina</font></font></h2>&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/086/5d0/047/0865d0047d86f46f5e2999f9abac8409.jpg"><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Equipo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crear una solución requiere una plataforma de hardware recomendada por Microsoft. Los principales fabricantes de hardware de servidor (HPE, Dell EMC, Fujitsu, Hitachi, Lenovo, etc.) desarrollaron sus configuraciones, probaron su compatibilidad y certificaron para Azure Stack HCI. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una lista completa de equipos compatibles está disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dependiendo de los tipos de unidades utilizadas, los componentes de la plataforma variarán. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Preferimos construir tales soluciones sobre la base de los servidores Fujitsu con el sistema operativo Windows Server 2019 Datacenter preinstalado. Este fabricante después de la venta admite todo el complejo de software y hardware como una solución completa, y no solo su hardware. Esto es importante tanto para nosotros, como socios, y para el cliente final.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actualmente, Fujitsu tiene cinco configuraciones certificadas para diferentes tipos de unidades, modelos de servidor y número de nodos. El número máximo de nodos para Azure Stack HCI es 16, el mínimo es 2, pero algunas configuraciones se limitan a 4. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas las configuraciones de Fujitsu compatibles se pueden ver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la instalación, elegimos la configuración más eficiente de la actualmente certificada: Fujitsu Primergy con unidades SSD para almacenar datos, y módulos de memoria ultrarrápida Intel Optane conectados a través de la interfaz NVMe como caché del sistema. Esperamos obtener una matriz All-Flash definida por software con un rendimiento comparable al almacenamiento clásico con unidades SSD y caché NVMe.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los sistemas de almacenamiento All-Flash de los líderes de la industria tienen configuraciones de tipo de medios similares. </font><font style="vertical-align: inherit;">Sabemos qué IOPS y las métricas de latencia se pueden obtener en la práctica de sistemas similares y esperamos un rendimiento similar de Azure Stack HCI basado en la configuración Fujitsu seleccionada. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/097/a99/1f1/097a991f1f820647f030183802c834e3.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La arquitectura de esta solución Fujitsu se describe en detalle en un documento disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le recomendamos que se familiarice con él antes de la instalación. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/468/866/9ae/4688669aee12df9248e368a88c758af0.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El documento describe las limitaciones de la arquitectura, los esquemas de conexión típicos y mucha otra información útil en la etapa de implementación.</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b5/f47/26c/9b5f4726c82a82d0d12d6dafd967e443.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interruptores</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La solución de Fujitsu utiliza su propio conmutador Ethernet PSWITCH. </font><font style="vertical-align: inherit;">Para nosotros, notamos las siguientes ventajas:&nbsp;</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los interruptores de esta serie son muy productivos, a bajo costo.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los conmutadores son bastante simples de configurar y utilizan la interfaz tipo CISCO. </font><font style="vertical-align: inherit;">Los ingenieros no encontraron dificultades durante la instalación.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No hay excesos de propiedad en la administración y hay documentación competente disponible.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El equipo de conmutación Fujitsu es uno de los líderes de la industria en Japón. </font><font style="vertical-align: inherit;">Recientemente ha estado disponible en el mercado ruso, pero nuestros arquitectos y otros socios de Fujitsu ya lo utilizan regularmente en proyectos. </font><font style="vertical-align: inherit;">Actualmente hay un número limitado de modelos disponibles.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenga más información sobre los conmutadores Fujitsu en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio web oficial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro del servidor, las tarjetas de memoria Intel Optane ocupan una parte importante del espacio.&nbsp; </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/895/742/c12/895742c127ddef9ed35f44ddbfc2b6fa.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5bb/1dd/77f/5bb1dd77f0079b9babe09973b132156b.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel presta mucha atención al rendimiento bajo alta demanda de calor. Por un lado, para una refrigeración de máxima calidad, se utilizan radiadores grandes. Por otro lado, esto limita el flujo de aire de enfriamiento dentro de todo el servidor.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es uno de los puntos clave que se tiene en cuenta al certificar la configuración: es necesario proporcionar todos los escenarios posibles en los que, debido a una refrigeración insuficiente, los servidores pueden sobrecalentar el módulo Optane, o viceversa.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al trasladar la sala de servidores, nuestros clientes se han enfrentado más de una vez a una situación en la que el sistema de aire acondicionado aún no se ha puesto en funcionamiento. Por lo tanto, decidimos verificar cuán exigente es esta instalación para el sistema de enfriamiento y medir la vida útil de la plataforma bajo carga fuera de la sala de servidores enfriada.&nbsp;&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las pruebas se llevaron a cabo a temperatura ambiente, pero no encontramos ninguna limitación térmica, o una disminución en el rendimiento o la aparición de errores debido al sobrecalentamiento. Hemos visto por nuestra propia experiencia que los servidores probados admiten la capacidad de trabajo declarada a una temperatura ambiente de hasta +45 grados Celsius.&nbsp; </font></font><br>
&nbsp;<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este experimento no debe tomarse como una recomendación para abandonar el uso de salas de servidores especiales con ventilación de alta calidad. </font><font style="vertical-align: inherit;">Al elegir un proveedor de soluciones de hardware, asegúrese de prestar atención al paquete de temperatura máxima.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensamblaje de plataforma de hardware</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vista frontal: Vista </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/53b/5eb/7b553b5eb67aaa8405b3aec5eb7ddfd7.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
posterior: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1db/a71/be8/1dba71be8bf20b34a2874dfb64d2e758.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
solo se usó un interruptor en la prueba. </font><font style="vertical-align: inherit;">Para uso comercial, siempre recomendamos que reserve rutas de acceso utilizando al menos dos conmutadores. </font><font style="vertical-align: inherit;">Según nuestras estadísticas, la falla de hardware más común en los clústeres es una rotura accidental del cable o un contacto roto en el conector.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu RX1330 se utilizó como servidor con software de control. </font><font style="vertical-align: inherit;">También se le asignaron las funciones de árbitro y servidor de quórum.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despliegue de clúster</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera etapa consistió en la instalación física de componentes de hardware, cables de interfaz de conexión, etc. </font><font style="vertical-align: inherit;">Esto fue seguido por la configuración del software, como </font><font style="vertical-align: inherit;">El sistema operativo ya está preinstalado. </font><font style="vertical-align: inherit;">Implementamos Storage Space Direct en cada servidor y creamos un clúster de 2 nodos y un árbitro. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, utilizamos la utilidad Fujitsu Infrastructure Manager, una extensión del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Centro de administración de Windows</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que se integra estrechamente con el hardware del servidor Fujitsu y contiene todas las herramientas de administración de Azure, como:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Site Recovery ofrece alta disponibilidad y recuperación ante desastres como servicio (DRaaS).</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Monitor es un sitio centralizado para monitorear el funcionamiento de aplicaciones, redes e infraestructura con análisis en profundidad basados ​​en inteligencia artificial.</font></font><br>
</li>
<li>«-»   Azure          .<br>
</li>
<li> Azure Backup     ,      -.<br>
</li>
<li> «  Azure»          Windows,   Azure    .<br>
</li>
<li>  Azure          Azure  VPN-  « — ».<br>
</li>
<li> «  Azure»     .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La extensión le permite automatizar una serie de tareas que también se pueden realizar directamente en el Centro de administración. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grupo de almacenamiento reunido, volúmenes creados en él. </font><font style="vertical-align: inherit;">Estos volúmenes se ubican posteriormente en máquinas virtuales para las cuales realizamos pruebas de rendimiento. </font><font style="vertical-align: inherit;">Tanto los volúmenes como las máquinas virtuales se gestionan convenientemente desde una sola ventana. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f25/a14/7cf/f25a147cf1d43eb65ce7afab6c5f2e6a.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A través de Fujitsu Infrastructure Manager, también es conveniente hacer muchas cosas sobre el mantenimiento programado y las actualizaciones de microcódigo. </font><font style="vertical-align: inherit;">El estado de todos los equipos se muestra claramente, mucho se puede automatizar. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/364/a36/bed/364a36bed36a81528668e7d705699c11.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen dos versiones de la utilidad Fujitsu Infrastructure Manager: de pago y gratuitas:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gratis. </font><font style="vertical-align: inherit;">Disponible para descargar desde el sitio web del fabricante, es suficiente para la administración del servidor.</font></font><br>
</li>
<li>.       Microsoft Azure HCI —      Windows Server     .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para una integración profunda de Primergy con Microsoft Azure Stack HCI, necesita un complemento de administración del servidor de Windows Server, que está disponible solo en la versión paga. Por lo tanto, el FUJITSU Integrated System PRIMEFLEX para Microsoft Azure Stack HCI es parte de ella.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuanta más instalación tenga, más valiosa será la automatización que proporciona la utilidad. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo hay 2 nodos en nuestro stand y podríamos hacer todo el trabajo manualmente. Si tiene 4 nodos o más, el software reducirá significativamente sus esfuerzos de instalación y administración. El costo de los servicios públicos es inferior al 1% del proyecto, pero acelera significativamente la puesta en marcha de los equipos. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para el Centro de administración de Windows, Fujitsu Infrastructure Manager Orchestra es un paquete de expansión:</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/03b/747/11d/03b74711d36cdbe8d7809619e3b38e6f.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La misma captura de pantalla muestra la composición del subsistema de disco del servidor: dos módulos Optane se usan como extensión de caché y cinco discos SSD como un grupo de almacenamiento de nivel 1.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puntos importantes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al crear una solución, hay varios matices que se deben tener en cuenta: </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puede administrar Microsoft Azure Stack HCI de dos maneras: a través del Centro de administración de Windows o el Administrador de infraestructura de Fujitsu.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Admin Center también tiene sus ventajas: puede implementarlo en cualquier cosa, incluso en una computadora portátil; Existe la posibilidad de controlar desde la línea de comandos. Con él, el administrador puede hacer casi cualquier cosa.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También hay Cluster Manager, una herramienta indispensable para cualquier problema con el clúster.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al implementar Witness (servidor de quórum), es importante agregarlo a Active Directory y verificar su disponibilidad para todos los nodos. Los requisitos para esta tarea son mínimos y se puede colocar en cualquier servidor base.</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/081/cfc/f9b/081cfcf9b862e035a65600f1138f5dfe.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde el punto de vista de Windows Server, existen tres tipos de dispositivos de disco: NVMe, SSD y HDD. La lógica del trabajo es la siguiente: los dispositivos NVMe son el caché de lectura / escritura, SSD es el nivel de almacenamiento de Nivel 1; HDD: nivel de almacenamiento de nivel 2. A continuación, puede configurar políticas para mover datos entre grupos. Los NVDIMM también se pueden usar como caché. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tamaño de bloque predeterminado para el desgarro es 4K, pero puede variar según el tipo de sistema de archivos en la máquina virtual. Esto posteriormente afectará el rendimiento. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizamos módulos NVMe como caché, por lo que la velocidad de lectura y escritura de datos será muy diferente, esto se verá claramente en las pruebas de rendimiento:</font></font><br>
&nbsp;<br>
<ul>
<li>                 ( ),    SSD (Tier-1,  ).<br>
</li>
<li>       NVMe    ,       ,       .    .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de crear un clúster, se debe completar la validación y todas las pruebas en el Administrador de clústeres de conmutación por error. </font><font style="vertical-align: inherit;">El informe debe guardarse, porque sin él no será posible abrir una llamada de servicio en el soporte de Microsoft, si alguna vez es necesario. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al agregar nuevos nodos a un clúster existente, los nodos se agregarán automáticamente al grupo de almacenamiento. </font><font style="vertical-align: inherit;">Después de 15 minutos, el clúster reconstruirá, reconstruirá y equilibrará automáticamente el grupo de Almacenamiento. </font><font style="vertical-align: inherit;">Esto puede afectar el rendimiento durante la reconstrucción.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pruebas de rendimiento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora pasemos a la parte más interesante: la prueba de carga. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuración de prueba:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dos servidores Fujitsu PRIMERGY RX2540 ensamblados en un clúster;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cada servidor tiene instalados dos módulos de memoria de clase de almacenamiento Intel Optane, utilizados para expandir la caché de lectura / escritura;</font></font><br>
</li>
<li>      SSD,      ,<br>
</li>
<li>      erasure coding ( RAID-5).<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, es un sistema de almacenamiento definido por software que ejecuta Windows Server 2019 Azure Stack HCI. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzamos la primera prueba con 12 máquinas virtuales que se ejecutan en ambos nodos. El perfil de carga de lectura / escritura es 70:30, tamaño de bloque = 8k. El tamaño del bloque se eligió en función del hecho de que la mayoría de las bases de datos transaccionales modernas y las cargas OLTP usan tal tamaño de bloque y aproximadamente la misma relación de lectura / escritura. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6b2/d7c/9da/6b2d7c9dac708b1f4d5330e3f0742e00.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El rendimiento del clúster en estado estable es de 428k IOPS con un retraso de 0.487 ms. Este es un resultado realmente digno, que es bastante comparable a lo que puede obtener en un sistema especializado de almacenamiento todo flash de muchos fabricantes.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se proporcionan pruebas independientes con un perfil de carga similar en el recurso spcresults.org: esta es la prueba SPC-1. La diferencia con nuestra configuración es solo en el tamaño del bloque: es 4k. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si simplificamos significativamente la metodología para comparar los resultados, podemos dividirlos en dos indicadores IOPS obtenidos para sistemas de almacenamiento todo flash y compararlos con las cifras que recibimos al mismo tiempo de respuesta. Los resultados obtenidos en nuestro clúster de dos servidores de nivel medio son bastante comparables con la mayoría de los sistemas de almacenamiento.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, tal comparación no es muy correcta, porque En nuestro caso, un aumento en el número de discos afectará el rendimiento y las demoras de manera muy diferente que con un sistema de almacenamiento especializado. Pero, incluso teniendo en cuenta todas estas suposiciones, se puede decir que hace un par de años esas cifras de rendimiento solo se podían ver en un medio de almacenamiento externo con múltiples controladores o incluso en un nivel superior. Hoy esto se puede lograr con una solución hiperconvergente. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La imagen de rendimiento cambia significativamente cuando la deduplicación y las mediciones se activan con el tamaño de bloque anterior = 8k. Si simplemente habilita la deduplicación en el mismo perfil de carga, el rendimiento será inferior a 300k IOPS.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ejecutamos dos perfiles de carga con un bloque de 8 KB donde un perfil es 100% leído y el otro 100% escrito, a continuación se encuentran los mejores números que pudimos obtener: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ed8/e3d/5e3/ed8e3d5e3a387044eb8b52b8fa45ca41.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos excelentes resultados de lectura, especialmente si tenemos en cuenta un retraso de 12 μs. </font><font style="vertical-align: inherit;">Aquí Optane realmente hace un gran trabajo como caché de lectura con algoritmos proactivos para la transferencia predictiva de datos al caché. </font><font style="vertical-align: inherit;">Sí, y el grupo de almacenamiento en sí, ubicado en el SSD, también muestra muy buenos números de lectura. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la velocidad de escritura es muy diferente. </font><font style="vertical-align: inherit;">Aquí hay algunos factores serios:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La arquitectura de la solución, cuando los datos que caen en la memoria caché de un nodo se copian a través de la red en la memoria caché del segundo nodo.</font></font><br>
</li>
<li>  :         —  ,         Optane.          . <br>
<br>
            45%,            ,      — ,     .       .<br>
</li>
<li>   SSD       SSD —    3D-NAND ,         3D-NAND.<br>
</li>
</ul><br>
<h2></h2><br>
<ul>
<li> OLTP-      –       8k    .&nbsp;&nbsp;<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La desduplicación se puede habilitar en cualquier momento, pero reduce significativamente el rendimiento. </font><font style="vertical-align: inherit;">La eficiencia de la deduplicación en nuestras pruebas fue del 45% con una caída del rendimiento de más del 25%.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto le da libertad de elección, ya sea un mayor rendimiento de almacenamiento o casi el doble de capacidad. </font><font style="vertical-align: inherit;">Además, mucho dependerá del perfil de carga y la capacidad de comprimir los datos grabados.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debido a la arquitectura de la solución, las operaciones de escritura secuencial aumentan significativamente el tiempo de respuesta.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No es en vano que Microsoft requiera que cree una solución solo sobre la base de configuraciones validadas de socios OEM; esto le permite evitar muchos problemas tanto durante la instalación inicial como durante el trabajo posterior.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajar con el hardware de Fujitsu, como siempre, solo dejó una impresión positiva. </font><font style="vertical-align: inherit;">Esta es una documentación sensata y muchas adiciones útiles de Infrastructure Manager: este paquete de software realmente simplifica enormemente la administración del sistema. </font><font style="vertical-align: inherit;">Esto es especialmente importante al aumentar el número de nodos.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La solución PRIMEFLEX de Fujitsu incluye un conjunto de scripts que agiliza el proceso de implementación. </font><font style="vertical-align: inherit;">Facilitan el inicio y la configuración en general, y los servidores Fujitsu PRIMERGY en particular.</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdc/a11/060/fdca11060f83e478d5edd39134097dfa.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aquellos que no están interesados ​​en autoajustar la solución, existe la oportunidad de concluir un Contrato de solución técnica con Fujitsu. </font><font style="vertical-align: inherit;">En este caso, los especialistas técnicos del proveedor desplegarán todo de forma llave en mano y proporcionarán más soporte.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496756/index.html">AWS Lambda en acción. Parte 2: conocer las herramientas de desarrollo y prueba</a></li>
<li><a href="../es496758/index.html">Salud digital medieval. Transformación tecnológica global después de COVID-19</a></li>
<li><a href="../es496760/index.html">Flujo de usuarios: cómo crear aplicaciones y sitios populares</a></li>
<li><a href="../es496762/index.html">Simulación de erosión superficial basada en partículas</a></li>
<li><a href="../es496764/index.html">Pequeño pero orgulloso: DuckDuckGo vs. Ad Monsters</a></li>
<li><a href="../es496768/index.html">Olvídate de RGB y HEX</a></li>
<li><a href="../es496770/index.html">Apartamento de ingeniero automatizado. Parte 1: exposición del problema, elección del hierro.</a></li>
<li><a href="../es496772/index.html">Los vehículos no tripulados deben "tener en cuenta" las marcas de automóviles conducidos por los conductores más difíciles</a></li>
<li><a href="../es496774/index.html">Elevamos nuestro servidor de juegos de Minecraft con minijuegos. Parte 3. Instalación de minijuegos</a></li>
<li><a href="../es496776/index.html">Hackear vehículos no tripulados: quién será responsable (estudio de RAND Corporation)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>