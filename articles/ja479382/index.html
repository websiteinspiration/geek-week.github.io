<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🌾 🍦 🌯 Spring Boot DevToolsによる開発の加速 🚆 🔳 🤶🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DevToolsを使用してSpring Bootでの開発をスピードアップし、このプロセスをより楽しく生産的にする方法は？
 
 カスタマイズ
 Spring Bootで開発するときはいつものように、セットアップは非常に簡単です。必要なのは、正しい依存関係を追加することだけです。これで完了です。Spr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Spring Boot DevToolsによる開発の加速</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479382/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevToolsを使用してSpring Bootでの開発をスピードアップし、このプロセスをより楽しく生産的にする方法は？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタマイズ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootで開発するときはいつものように、セットアップは非常に簡単です。</font><font style="vertical-align: inherit;">必要なのは、正しい依存関係を追加することだけです。これで完了です。</font><font style="vertical-align: inherit;">Spring Bootはそれを見つけ、それに応じてDevToolsを自動的に構成します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mavenを使用している場合：</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gradleを使用している場合：</font></font><br>
<br>
<pre><code class="java hljs">configurations {<font></font>
    developmentOnly<font></font>
    runtimeClasspath {<font></font>
        extendsFrom developmentOnly<font></font>
    }<font></font>
}<font></font>
dependencies {<font></font>
    developmentOnly(<span class="hljs-string">"org.springframework.boot:spring-boot-devtools"</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
依存関係はオプションとして宣言されていることに注意してください。</font><font style="vertical-align: inherit;">このような依存関係の宣言は、DevToolsの依存関係がプロジェクトに依存する他のモジュールに推移的に適用されるのを防ぐため、重要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動再起動</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスパスにファイルの変更がある場合は常に、DevToolsは新しい変更で作業アプリケーションを自動的に再起動します。</font><font style="vertical-align: inherit;">ローカル開発の場合、アプリケーションを手動で再デプロイする必要がないため、これは便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再起動にはまだ時間がかかるため、これ自体はそれほど有用ではありません。</font><font style="vertical-align: inherit;">さいわい、このような再起動は、DevToolsが使用するトリッキーなトリックのため、通常の再起動よりもはるかに高速です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際のところ、アプリケーションを開発するときは、通常、クラスをいくつか変更し、実行中のアプリケーションの結果をチェックしてフィードバックを得たいと思っています。ロードされたクラスのほとんどはフレームワークとサードパーティのライブラリからのものですが、アプリケーションに小さな変更を加えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring DevToolsの内部では、</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベース</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローダー</font><font style="vertical-align: inherit;">と</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再起動という</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つのクラスローダーが使用され</font><font style="vertical-align: inherit;">ます。変更されないクラスは、基本ローダー</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によってロードされ</font><font style="vertical-align: inherit;">ます。操作するクラスは、</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再起動</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローダーを使用してロードされます</font><font style="vertical-align: inherit;">。再起動するたびに、ブートローダーが</font><b><i><font style="vertical-align: inherit;">再起動</font></i></b><font style="vertical-align: inherit;">します</font></font><b><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再作成。</font><font style="vertical-align: inherit;">したがって、アプリケーションの再起動は通常よりもはるかに高速であり、JRebelなどのツールを使用して動的クラスを再ロードする実際の代替手段となります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDEでの再起動の初期化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスパスでファイルが変更されるたびに再起動がトリガーされます。ただし、このプロセスはIDEによって異なります。つまり、Javaファイルを変更するだけでは不十分です。重要なのは、IDEが実際にクラスパスの.classファイルを更新するときです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IntelliJ IDEAを使用する場合、プロジェクトでビルドコマンドを実行する必要があります（</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ctrl + F9</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビルド→プロジェクトのビルド</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDEAで自動的に実行されるようにビルドコマンドを構成</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">することも</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">できます</font></a><font style="vertical-align: inherit;">。さらに、Spring Boot起動構成を開き、アプリケーションの更新が開始したときに何が起こるかを決定できます（</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ctrl + F10</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ua/qc/6j/uaqc6j-uhupn1bj3gso_j_vgfg8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のコンボボックスで、[ </font><i><b><font style="vertical-align: inherit;">トリガーファイルの更新]</font></b></i><font style="vertical-align: inherit;">を選択でき</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b></i><font style="vertical-align: inherit;"></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクションが実行されるたびにDevToolsを再起動し</font><i><b><font style="vertical-align: inherit;">ます</font></b></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">または、</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホットスワップ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">選択して</font><font style="vertical-align: inherit;">、</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホットスワップの</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行が</font><font style="vertical-align: inherit;">失敗した</font><font style="vertical-align: inherit;">場合にのみ、DevToolsを使用してアプリケーションを再起動</font><font style="vertical-align: inherit;">することもできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のコンボボックスでは、IDEAウィンドウがフォーカスを失ったとき（たとえば、ブラウザーウィンドウに切り替えたとき）に、すべての静的リソースとテンプレートの再起動を構成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eclipseでは、ファイルを保存するのは簡単です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発のみ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Boot DevToolsは開発のみを目的としており、アプリケーションの本番運用を目的としていません。</font><font style="vertical-align: inherit;">アプリケーションが本番環境で作業していることを検出すると、DevToolsは自動的に無効になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この目的のために、統合されたアプリケーションサーバーを備えたjarなど、完全にパッケージ化されたアーティファクトとしてアプリケーションを起動する場合は常に、本番アプリケーションと見なされます。</font></font><br>
<br>
<pre><code class="java hljs">java -jar devtools-example-<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>.jar</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションが特別なクラスローダーを介して、たとえばアプリケーションサーバーで起動された場合も同様です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
逆に、（IDEなどで）解凍されたアーティファクトを実行すると、アプリケーションは開発モードと見なされます。</font><font style="vertical-align: inherit;">Spring-boot-pluginを使用してアプリケーションを実行する場合も同様です：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maven：</font></font><br>
<br>
<pre><code class="java hljs">mvn spring-boot:run</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gradle：</font></font><br>
<br>
<pre><code class="java hljs">gradle bootRun</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiveReload</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiveReload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、HTML、CSS、画像などのファイルに変更を加えるたびに、ブラウザーでページを即座に更新できる便利なツールです。</font><font style="vertical-align: inherit;">さらに、必要に応じてファイルを前処理します。これは、SASSまたはLESSファイルの自動コンパイルを意味します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/nv/69/zunv69m_u2b1gs3btmm5t7fpmck.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring DevToolsは、ファイルを追跡するLiveReloadサーバーのローカルインスタンスを自動的に起動します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">拡張機能を</font></a><font style="vertical-align: inherit;">インストールするだけで、作業は完了</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これは、アプリケーションの外部インターフェースの開発（Springアプリケーションアーティファクトの一部として配布する場合）に役立つだけでなく、REST APIの出力を監視および再ロードするためにも使用できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティオーバーライド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションをローカルで開発する場合、通常、本番環境で作業する場合とは異なる構成ニーズがあります。 1つの例はキャッシュです。さまざまなキャッシュ（エンジンテンプレートキャッシュ、静的リソースのキャッシュヘッダーなど）への依存は、運用環境では非常に重要です。開発中は、古いデータが使用され、最新の変更が反映されない場合があります。もう1つの例は、高度なロギングです。これは、開発には役立つかもしれませんが、実稼働環境には詳細すぎます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2種類の構成を自分で管理するのは困難です。良いニュースは、Spring Boot DevToolsがデフォルトでローカル開発用の多くのプロパティを設定することです。</font></font><br>
<br>
<pre><code class="java hljs">spring.thymeleaf.cache=<span class="hljs-keyword">false</span>
spring.freemarker.cache=<span class="hljs-keyword">false</span>
spring.groovy.template.cache=<span class="hljs-keyword">false</span>
spring.mustache.cache=<span class="hljs-keyword">false</span>
server.servlet.session.persistent=<span class="hljs-keyword">true</span>
spring.h2.console.enabled=<span class="hljs-keyword">true</span>
spring.resources.cache.period=<span class="hljs-number">0</span>
spring.resources.chain.cache=<span class="hljs-keyword">false</span>
spring.template.provider.cache=<span class="hljs-keyword">false</span>
spring.mvc.log-resolved-exception=<span class="hljs-keyword">true</span>
server.servlet.jsp.init-parameters.development=<span class="hljs-keyword">true</span>
spring.reactor.stacktrace-mode.enabled=<span class="hljs-keyword">true</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのプロパティのリストは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevToolsPropertyDefaultsPostProcessor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスにあり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リモート接続</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローカル開発に加えて、DevToolsを実行しているリモートアプリケーションに接続することもできます。</font><font style="vertical-align: inherit;">このツールは、深刻な安全上のリスクをもたらす可能性があるため、本番環境用ではありません。</font><font style="vertical-align: inherit;">ただし、運用前の環境では非常に役立ちます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リモート接続を有効にする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リモート接続はデフォルトでは有効になっていません。</font><font style="vertical-align: inherit;">pomファイルを変更して、明示的に有効にする必要があります。</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludeDevtools</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">excludeDevtools</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gradle</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、</font><b><i><font style="vertical-align: inherit;">excludeDevtools = false</font></i></b><font style="vertical-align: inherit;">を設定する必要があり</font><b><i><font style="vertical-align: inherit;">ます</font></i></b><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="java hljs">bootWar {<font></font>
    excludeDevtools = <span class="hljs-keyword">false</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、リモートアプリケーションに接続するときに認証に使用されるパスワードを設定する必要があります。</font></font><br>
<br>
<pre><code class="java hljs">spring.devtools.remote.secret=somesecret</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リモートアプリケーションに接続する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リモートアプリケーションを起動した後、リモート接続セッションを開始できます。</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あと</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、リモートアプリケーションのURLを引数として</font><b><i><font style="vertical-align: inherit;">org.springframework.boot.devtools.RemoteSpringApplication</font></i></b><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">実行するだけです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">可能であれば</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDEでリモート接続を開始するのは簡単です。 IDEAでは、新しい起動構成を作成するだけです。</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行→構成の編集...に</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動し</font><font style="vertical-align: inherit;">、左上隅の</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アイコン</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">新しい構成を作成します</font><font style="vertical-align: inherit;">。アプリケーションのタイプを選択します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mainクラスで、</font><b><i><font style="vertical-align: inherit;">RemoteSpringApplicationを</font></i></b><font style="vertical-align: inherit;">選択します</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevToolsモジュールから、リモートアプリケーションのURLを引数としてプログラムに渡します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lz/hw/ge/lzhwgermp2zadw-7ggxatrgadma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この構成を開始した後、リモートアプリケーションへの接続が成功した場合は、同様の出力が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a-/az/wt/a-azwtua5mg7x4krzmxbp7wceus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リモートアプリケーションに接続した後、DevToolsはローカル開発の場合と同じ方法でクラスパスの変更を監視します。</font><font style="vertical-align: inherit;">ただし、ローカルの再起動の代わりに、変更をリモートサーバーに転送し、そこで再起動を開始します。</font><font style="vertical-align: inherit;">これは、アプリケーションを作成してリモートマシンにデプロイするよりもはるかに高速です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グローバル構成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のSpringアプリケーションと同様に、構成プロパティを使用してDevToolsをカスタマイズできます。</font><font style="vertical-align: inherit;">これは通常</font><font style="vertical-align: inherit;">、プロジェクト</font><font style="vertical-align: inherit;">の</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application.propertiesを</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">編集することを意味し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この構成は、アプリケーションごとに異なります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、一部のシナリオでは、同じコンピューターで実行されているすべてのアプリケーションのグローバル構成が便利な場合があります。</font><b><i><font style="vertical-align: inherit;">$ HOME</font></i></b><font style="vertical-align: inherit;">ディレクトリにある</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.spring-boot-devtools.properties</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">というプロパティファイルを作成できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このファイルに記述されている宣言は、DevToolsを使用するすべてのアプリケーションに適用されます。</font></font><b><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制限事項</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブリロード</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevToolsを使用するSpringアプリケーションは、LiveReloadサーバーを自動的に起動します。</font><font style="vertical-align: inherit;">残念ながら、このサーバーのインスタンスは一度に1つしか起動できません。</font><font style="vertical-align: inherit;">より正確には、最初のインスタンスのみが機能します。</font><font style="vertical-align: inherit;">これは、DevToolsを備えたSpringアプリケーションのいくつかのインスタンスだけでなく</font><font style="vertical-align: inherit;">、開発モードの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など、内部でLiverReloadを使用する他のアプリケーションにも当てはまり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SpringアプリケーションがLiveReloadサーバーを起動しないように設定する場合は、</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application.properties</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルでこれを行うことが</font><b><i><font style="vertical-align: inherit;">でき</font></i></b><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="java hljs">spring.devtools.livereload.enabled=<span class="hljs-keyword">false</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シャットダウンフック</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevTools </font><font style="vertical-align: inherit;">は、</font><b><i><font style="vertical-align: inherit;">SpringApplication</font></i></b><font style="vertical-align: inherit;">クラスの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シャットダウンフック</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">依存しています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下を使用して属性を手動で無効にした場合、クラスは正しく機能しません。</font></font><b><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="java hljs">springApplication.setRegisterShutdownHook(<span class="hljs-keyword">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この属性はデフォルトで有効になっているため、明示的に無効にしない限り、心配する必要はありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サードパーティライブラリとの衝突</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevToolsは通常正しく機能しますが、サードパーティのライブラリと競合する可能性があります。</font><font style="vertical-align: inherit;">特に、標準の</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectInputStream</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用した逆シリアル化には既知の問題があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような競合が発生した場合は、次のように設定して自動再起動を無効にできます。</font></font><br>
<br>
<pre><code class="java hljs">spring.devtools.restart.enabled=<span class="hljs-keyword">false</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再起動は機能しなくなります。</font><font style="vertical-align: inherit;">ただし、</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再起動</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスローダー</font><font style="vertical-align: inherit;">は引き続き使用されます。</font><font style="vertical-align: inherit;">クラスローダーを完全に無効にする必要がある場合は、アプリケーションを起動する前にこれを行う必要があります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
    System.setProperty(<span class="hljs-string">"spring.devtools.restart.enabled"</span>, <span class="hljs-string">"false"</span>);<font></font>
    SpringApplication.run(MyApp.class, args);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動再起動を使用しない場合でも、他のDevTools機能を利用できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遅延初期化を有効にする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アノテーションを使用して、個々のコンポーネントを遅延初期化済みとしてマークできます </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>@</mo></mrow><mi>L</mi><mi>a</mi><mi>z</mi><mi>y</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.864ex" height="2.509ex" viewBox="0 -809.3 2955.5 1080.4" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/479382/&amp;usg=ALkJrhhXI-IYUMPsX2aRWa67rsdUTlHL2A#MJMAIN-40" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/479382/&amp;usg=ALkJrhhXI-IYUMPsX2aRWa67rsdUTlHL2A#MJMATHI-4C" x="778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/479382/&amp;usg=ALkJrhhXI-IYUMPsX2aRWa67rsdUTlHL2A#MJMATHI-61" x="1460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/479382/&amp;usg=ALkJrhhXI-IYUMPsX2aRWa67rsdUTlHL2A#MJMATHI-7A" x="1989" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/479382/&amp;usg=ALkJrhhXI-IYUMPsX2aRWa67rsdUTlHL2A#MJMATHI-79" x="2458" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@</font></font></mo></mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-1">@Lazy</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この機能はかなり前から利用可能です。 Spring Boot 2.2以降では、すべてのBeanコンポーネントの遅延初期化を、</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spring.main.lazy-initialization = true</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して切り替えることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを単独で、または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevToolsと組み合わせて使用​​すると、再起動をさらに高速化でき</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevToolsを使用すると、同じJVMでアプリケーションのホットリスタートを実行できます。ホットリスタートの大きな利点は、アプリケーションの起動に使用されるコードを最適化するためのより多くのオプションがJITに提供されることです。数回の再起動後、2500ミリ秒の初期時間はほぼ80％短縮され、500ミリ秒に近づきます。遅延初期化により、より良い結果を得ることができます。インストール時</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spring.main.lazy-initialization</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 400 ms後にアプリケーションがIDEで直接再起動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本番アプリケーションですべてのBeanに遅延初期化を使用することは疑わしいです。この手順では、個々のBeanコンポーネントに対する初回のリクエストが長くなるため、起動時のパフォーマンスが向上します。さらに重要なのは、アプリケーションがすぐに動作を停止しないことです。ただし、アプリケーションの起動時にすぐにクラッシュするのではなく、正しく構成されていないコンポーネントを直接要求した後にのみ失敗します。手遅れになるまで多くのエラーを見つけることができないため、これは非常に危険です。ただし、大量の遅延初期化は、開発時間を短縮するのに役立ちます。これは、特定の関数を操作する場合、通常、アプリケーションの一部のみを操作し、残りは使用しないためです。理想的な妥協策は、ローカル開発のみ（たとえば、スプリングプロファイルを使用）で一括遅延初期化を有効にし、展開されたより高い環境では無効にすることです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevToolsは、自動再起動とLiveReload機能を提供することで、Spring Bootアプリケーションの開発を高速化および簡素化します。</font><font style="vertical-align: inherit;">これに加えて、ローカル開発により適した値のさまざまなプロパティを設定します。</font><font style="vertical-align: inherit;">さらに、アプリケーションにリモートで接続し、同時にその機能のほとんどを使用することができます。</font><font style="vertical-align: inherit;">本番環境でアプリケーションを起動する場合、DevToolsは使用されません。</font><font style="vertical-align: inherit;">詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を参照してください</font><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja479368/index.html">CMMレベル5 QAおよびテストを達成する方法</a></li>
<li><a href="../ja479370/index.html">Mifare暗号鍵のDIYキャプチャとIronLogicドアホン鍵のDIYコピー</a></li>
<li><a href="../ja479374/index.html">ドングルの世話をする：Logicoolキーボードレシーバーのセキュリティ調査</a></li>
<li><a href="../ja479376/index.html">Knoxで保護-Samsungモバイルセキュリティメカニズム</a></li>
<li><a href="../ja479378/index.html">SREを考える：SREエンジニアの目を通してプロジェクトを見る</a></li>
<li><a href="../ja479384/index.html">MegaFonでビッグデータはどのように機能し、そこに到達する方法を教えてください。</a></li>
<li><a href="../ja479388/index.html">国家データセンター、ミハリッチの建設の特徴</a></li>
<li><a href="../ja479392/index.html">Pinebook Pro：Chromebookは廃止</a></li>
<li><a href="../ja479394/index.html">15のソリューションからヘルプデスクを検索した方法...が見つかりませんでした</a></li>
<li><a href="../ja479398/index.html">線形回帰方程式を行列形式にします</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>