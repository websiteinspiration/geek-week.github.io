<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔤 👨🏻‍🌾 🙎🏻 Kaboom: un zapador inusual 🏯 💆🏿 👖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cuando era niño, me sentaba en el trabajo de mi padre tres veces por semana durante una hora y media. Se me permitió ir a una computadora, donde desde...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kaboom: un zapador inusual</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/487052/"><img src="https://habrastorage.org/webt/8r/zx/fj/8rzxfjri6jhsbbuodzrjy8eauae.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando era niño, me sentaba en el trabajo de mi padre tres veces por semana durante una hora y media. Se me permitió ir a una computadora, donde desde el entretenimiento solo había un zapador y Paint. Estaba cansado de dibujar rápidamente, pero el deseo de abrir todo el campo y no explotar me motivó a buscar nuevas y nuevas formas de jugar este juego. Muchos años después, accidentalmente me topé con un artículo interesante sobre un clon de un zapador, y no pude pasar. Le sugiero que se familiarice con él. Esta es una historia sobre el desarrollo de Kaboom, un clon del legendario juego Buscaminas con su propio entusiasmo.</font></font></i><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buscaminas apareció hace bastante tiempo según los estándares de un juego de computadora. </font><font style="vertical-align: inherit;">Pero me parece que la mayoría de la gente recuerda los juegos que formaban parte de versiones anteriores de Windows. </font><font style="vertical-align: inherit;">Nunca fui bueno en Buscaminas, pero lo jugaba de vez en cuando. </font><font style="vertical-align: inherit;">Algunas personas juegan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">más en serio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Y para aquellos que quieran animarse, les recomiendo ver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buscaminas - La película</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idea</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recientemente tuve una idea: ¿qué pasa si tienes que jugar al Buscaminas contra una computadora más sabia? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, la ubicación de las minas se determina al comienzo del juego (pero hay algunos trucos aquí, por ejemplo, para que no puedas perder el primer clic). Pero, ¿qué pasaría si la ubicación de las minas no se hubiera determinado de antemano y el juego hubiera podido elegir la ubicación de las minas después del inicio del juego? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso sería bastante cruel: si haces clic en un cuadrado que puede contener una mina, ¡siempre lo contendrá! Por lo tanto, debe probar de antemano que el cuadrado es seguro.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/0i/hg/um0ihg9b97wzjslibzfalc5ovmy.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la imagen de arriba, en las celdas marcadas con un punto, no hay minas garantizadas, y las celdas marcadas con un signo de exclamación contienen una. Los signos de interrogación significan incertidumbre: quizás si abre más celdas, puede calcular si una mina está oculta o no.</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por otro lado, hay situaciones en las que tiene que adivinar:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/_r/c0/ji_rc06pslel8r2olgyyjfeqx5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hay una mina en una de las celdas inferiores. Pero en cuál, es imposible de entender. Debes elegir uno de ellos. Pero de acuerdo con la condición de la que acabo de hablar, ¡esto significaría una muerte segura! Quería que el juego fuera brutal, pero ahora obviamente está perdiendo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, cambiaré ligeramente la idea. Puedes adivinar, pero solo si no quedan células seguras. Por lo tanto, el juego será cruel, pero justo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En otras palabras:</font></font><br>
<br>
<ul>
<li>      ,   .</li>
<li>      ,    ,   .</li>
<li>      , :<br>
<br>
<ol>
<li>     ,       ,      .</li>
<li>   ,   ,      .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cómo implementar tal juego? Podría intentar calcular todos los campos posibles, pero esto no es realista: incluso un campo pequeño de 10x10 significa 2 ^ 100 posibilidades. Seleccionar solo aquellos que contienen exactamente N min no ayuda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, no necesito preocuparme por todo el campo. No sabemos nada sobre minas terrestres no adyacentes a las etiquetas. Solo estoy interesado en aquellos que están en la frontera, el resto puede determinarse por accidente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/vp/qc/zlvpqcqpuapldwssoa5lhjtaff4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces puedo calcular todas las opciones para la ubicación de minas en el borde de acuerdo con las etiquetas. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retroceso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (retroceso): una buena técnica que le permite ordenar todas las combinaciones, pero también puede retirarse rápidamente tan pronto como determinemos que una rama no puede calcular.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6z/0h/cf/6z0hcf6bfakj_2x3n0jyfz9bpf8.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las dos posibles ubicaciones de minas en la frontera se muestran arriba. </font><font style="vertical-align: inherit;">Combinándolos, entenderemos qué celdas están garantizadas para estar vacías o extraídas. </font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También necesito rastrear el número total de minas. </font><font style="vertical-align: inherit;">Por lo tanto, la ubicación realmente se ve como "5 minutos en la frontera, 5 minutos afuera". </font><font style="vertical-align: inherit;">Esto es importante porque de lo contrario podría haber creado demasiadas minas en la frontera (¡o muy pocas!)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tengo todas las opciones. </font><font style="vertical-align: inherit;">¿Qué sucede cuando un jugador decide abrir una jaula?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elija una opción aleatoria (una que satisfaga las reglas "crueles pero justas"). </font><font style="vertical-align: inherit;">Esto determinará la ubicación de las minas en la frontera.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispersa al azar a los que quedan fuera de la frontera.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si hay una mina en la celda seleccionada, el juego termina.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De otra manera:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir una nueva etiqueta para la celda identificada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revelar celdas adicionales si es 0</font></font></li>
<li>    ,    !       .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para campos pequeños esto es normal. </font><font style="vertical-align: inherit;">Por lo general, solo hay unas pocas combinaciones posibles ... espera, ¿qué es? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/9n/k_/df9nk_sulyltttsf-u4pafb8fxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Oh no! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/5w/nu/g15wnu_xlthcmvg94n7kjeqsg_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De alguna manera, logré desbloquear 18 millones de posibles ubicaciones mineras. </font><font style="vertical-align: inherit;">Mi Firefox devora 12 gigabytes de memoria, y abrir una celda lleva medio minuto. </font><font style="vertical-align: inherit;">Obviamente, necesito un mejor algoritmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alguien puede notar que Minesweeper es un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juego NP-complete</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y por lo tanto no se puede evitar un tiempo exponencialmente creciente. </font><font style="vertical-align: inherit;">Y en el caso general, esto es cierto: habrá posiciones que tomarán mucho tiempo calcular. </font><font style="vertical-align: inherit;">Pero para un área pequeña esto funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No necesito recordar todas las combinaciones. </font><font style="vertical-align: inherit;">Ni siquiera necesito calcular todas las combinaciones. </font><font style="vertical-align: inherit;">Todo lo que se requiere es una forma:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar si la celda es segura, peligrosa o vaga,</font></font></li>
<li>    (,   ,       ).</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de probar las opciones yo mismo, voy a usar el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionador SAT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Estas son herramientas que toman una fórmula que consiste en variables lógicas y buscan un conjunto de valores que hagan que la fórmula sea verdadera. Un método tan imaginario pero bastante válido para nuestra tarea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una clase de software más potente son los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionadores SMT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que funcionan con una gama más amplia de valores y fórmulas, como la lógica de primer orden (cuantificadores), matrices, enteros, etc. Esto ayudará al menos a definir algunas ecuaciones para enteros. Pero necesito algo que funcione en el navegador. La gente logró portar algunas herramientas sofisticadas como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z3Prover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al navegador, pero la versión de WebAssembly pesa</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17 MB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y eso es demasiado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontré </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniSat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un pequeño solucionador SAT que fue compilado para Javascript por Joel Galenson. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El archivo compilado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solo toma 200 kilobytes, así que lo uso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fórmulas CNF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los solucionadores SAT funcionan con fórmulas conjuntivas normales ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). La fórmula de CNF es "un AND de OR", por ejemplo: </font></font><br>
<br>
<code>(a | ~ b | ~ c) &amp; (c | d ~ e) &amp; f</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puede convertir cualquier fórmula de lógica de oración (variables y, o, no, implicación) a CNF, por lo que es un formato universal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cómo lo usamos? Supongamos que tenemos una tabla: </font><font style="vertical-align: inherit;">
si creo variables para celdas desconocidas (en el sentido de las agujas del reloj: x1, x2, x3), tendrán que satisfacer las siguientes ecuaciones: </font><font style="vertical-align: inherit;">
¿Pero cómo expresar "la suma de las variables es 2" en CNF? </font><font style="vertical-align: inherit;">
Encontré un método que, como supe más tarde, se llama "codificación binomial" y es la codificación más simple. Debe considerar todos los subconjuntos posibles de variables. Por ejemplo, para </font><font style="vertical-align: inherit;">necesitar las siguientes fórmulas:</font></font><br>
<br>
<code>? ? 1<br>
2 ? 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1 + 2 + 3 = 2<br>
2 + 3 = 1<br>
2 + 3 = 1 (   )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>x1 + x2 + x3 = 2 </code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada subconjunto de 2 variables, al menos una es verdadera. </font><font style="vertical-align: inherit;">Esto asegura que la cantidad sea mayor que 1.</font></font><br>
<code>(x1 | x2) &amp; (x1 | x3) &amp; (x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al menos una variable es falsa. </font><font style="vertical-align: inherit;">Esto asegura que la cantidad sea inferior a 3.</font></font><br>
<code>(~ x1 | ~ x2 | ~ x3)</code></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para </font></font><code>x2 + x3 = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mí necesito un conjunto similar de fórmulas:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al menos una de las variables es correcta: </font></font><code>(x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al menos una de las variables es falsa </font></font><code>(~ x2 | ~ x3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al combinar esto, obtengo una fórmula CNF con 6 puntos. En el formato DIMACS estándar: </font><font style="vertical-align: inherit;">
todas las líneas de posición terminan en 0 y la negación se marca con un signo menos. Si lo conecto a MiniSat (pruébelo usted mismo), obtengo: </font><font style="vertical-align: inherit;">
Esto significa que MiniSat encontró una solución donde x1 y x2 son verdaderas y x3 son falsas. Así se verá el tablero: </font><font style="vertical-align: inherit;">
todo el programa es un poco más complicado: esta es solo una solución, hay otra. Por lo tanto, para saber si x1, x2, x3 puede ser verdadero (o falso), debe realizar más solicitudes. Necesito preguntar: “Dada la fórmula anterior, así como x1, ¿es factible? ¿Qué tal la fórmula anterior, así como ~ x1 "?</font></font><br>
<br>
<code>p cnf 3 6<br>
1 2 0<br>
1 3 0<br>
2 3 0<br>
-1 -2 -3 0<br>
2 3 0<br>
-2 -3 0 </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>SAT 1 2 -3</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>! ! 1<br>
2 . 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La codificación significa que necesito encontrar todas las combinaciones posibles (por ejemplo, todos los subconjuntos de 3) de un conjunto de variables. </font><font style="vertical-align: inherit;">Sin embargo, para esta ecuación solo habrá hasta 8 variables, por lo que la fórmula suele ser lo suficientemente pequeña como para que MiniSat pueda resolverla rápidamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguimiento mínimo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Desafortunadamente, esta no es una solución completa! Todavía necesito rastrear cuántas minas quedan. Algunas combinaciones son imposibles, porque de lo contrario puedes crear más minas de las permitidas, y será imposible ganar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ic/pz/vjicpzij8cclzqcvewcn3hpzgpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, el caso contrario también es posible: si hay muy pocas minas, el juego terminará, porque no habrá nada que colocar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, necesito indicar en la fórmula SAT que "el número de minas no es menor que X ni mayor que Y". Al principio pensé que podría usar el truco con todas las combinaciones. Desafortunadamente, no funciona demasiado bien con grandes números. Si hay, por ejemplo, 20 celdas y 10 minutos, luego de conectar los números al </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coeficiente binomial,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¡descubrimos que el número de combinaciones ya es de 6 dígitos!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces descubrí que hay muchas otras formas de codificar la suma de variables en la fórmula SAT. Necesita crear un esquema que combine las variables individuales. Vea, por ejemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta respuesta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en StackExchange o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, me di cuenta de la idea de un artículo titulado "Codificación CNF efectiva con restricciones de cardinalidad booleana", </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito por</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olivier Baillot y Yasin Bufhad. Vemos un árbol que agrega recursivamente números unarios (o clasifica bits para que todos estén al principio):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_s/n8/cg_sn8kuz4tyzsklfiftc9pxr6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final de este diagrama, obtendrá un conjunto ordenado de variables de "salida". Para confirmar que la suma no es menor que X, verifique que la primera X de las variables resultantes sea 1. Para afirmar que la suma no es mayor que Y, verifique que el último N - Y de las variables resultantes sea 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es mucho mejor que usar todas las combinaciones posibles, sin embargo, este esquema sigue siendo irracional porque genera oraciones Ө (N ^ 2). Cuando el número de celdas abiertas es de aproximadamente 100, el juego se vuelve lento. Podemos optimizar el juego aún más. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reducir solicitudes</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras estudiaba el problema, noté que puedo reducir la cantidad de consultas al solucionador. </font><font style="vertical-align: inherit;">Quería determinar el estado de todas las celdas (es decir, verificar si se garantiza que son peligrosas, seguras o no). </font><font style="vertical-align: inherit;">Hice esto usando un bucle simple. </font><font style="vertical-align: inherit;">Digamos que el tablero se describe mediante la fórmula F:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decide </font></font><code>F &amp; ~ x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si x1 puede ser 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decide </font></font><code>F &amp; x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si x1 puede ser 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decide </font></font><code> F &amp; ~ x2 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si x2 puede ser 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decide </font></font><code>F &amp; x2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si x2 puede ser 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué noté? </font><font style="vertical-align: inherit;">Si obtengo una solución para F &amp; ~ x1, también contendrá los valores de todas las demás variables. </font><font style="vertical-align: inherit;">Esto ya responde muchas otras preguntas: si la solución contiene x2 = 0, no necesito preguntar si x2 puede ser 0, porque ya lo sé. </font><font style="vertical-align: inherit;">Esto me permite reducir la cantidad de solicitudes entre 2 y 5 veces.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento en caché</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto no resuelve el problema de la enorme fórmula generada por el circuito de "conteo". Como dije, el número de oraciones está en el orden de N ^ 2. En un tablero grande, la fórmula puede tener hasta 10,000 suposiciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, la mayoría de las veces sabemos el significado exacto de muchas células. Si la celda está garantizada vacía o garantizada llena, ¡el valor nunca cambiará! Esto significa que podemos almacenarlo en caché y no incluirlo en la fórmula SAT. Una vez que determinamos el estado de la celda, ya no necesitaremos incluirla nuevamente en el cálculo. Las celdas se usarán siempre que no estén definidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta optimización es ligeramente peligrosa: ya no tenemos una fórmula que confirme la corrección de toda la placa. Si todo lo demás funciona según lo planeado, esto no es un problema, pero puede complicar el seguimiento de errores.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otro caso: jugar en el extranjero </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Se le permite hacer clic en cualquier parte del mapa fuera del borde entre el área abierta y sin abrir del campo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, pensé que era lo mismo que adivinar: si no hay celdas seguras, simplemente puede hacer clic en cualquier parte del campo. </font><font style="vertical-align: inherit;">Pero a algunos les resulta extraño que esto garantice la apertura de una jaula vacía. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, cambié el juego para que siempre se castigue un clic fuera del borde. </font><font style="vertical-align: inherit;">Con la excepción del comienzo del juego, por supuesto, porque entonces todo el tablero está "afuera". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero resulta que hay otro escenario: ¿qué pasa si todos los campos fronterizos son mortales? </font><font style="vertical-align: inherit;">
No tienes más remedio que revelar algo más. </font><font style="vertical-align: inherit;">Esta situación puede hacer que el juego sea intransitable desde el principio. </font><font style="vertical-align: inherit;">Entonces ahora hay una excepción más. </font><font style="vertical-align: inherit;">Puedes jugar fuera de las fronteras si:</font></font><br>
<br>
<code>3 . .<br>
. . .<br>
. . .<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El campo no está abierto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las celdas extraídas pueden estar ubicadas en el borde (hacer clic en el exterior debe ser seguro), o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debe haber bombas en todas las celdas en el borde (debe hacer clic afuera).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualización</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : El cambio resultó ser controvertido, ya que la restricción es algo artificial. </font><font style="vertical-align: inherit;">Agregué un interruptor que permitirá / prohibirá jugar con estas condiciones.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es todo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puedes jugar Kaboom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Intenta activar el modo de depuración: hace que el juego sea trivial, pero muestra bien cómo funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Código fuente de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El no es muy guapo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usted también podría estar interesado en un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juego similar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Simon Tatham, creador de PuTTY. Su versión tiene un giro diferente: siempre se puede resolver sin especulaciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juega sabiamente! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué más puede ser útil para leer en el blog de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud4Y</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cómo se "rompió" el banco</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Privacidad personal? No, no escucharon</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ La </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gran teoría de los copos de nieve</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagnósticos de conexiones de red en un enrutador EDGE virtual</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los virus resistentes a CRISPR construyen refugios para proteger los genomas de las enzimas que penetran en el ADN. ¡</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Suscríbase a nuestro </font><font style="vertical-align: inherit;">canal de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que no se pierda otro artículo! </font><font style="vertical-align: inherit;">Escribimos no más de dos veces por semana y solo por negocios. </font><font style="vertical-align: inherit;">Te recordamos que las startups pueden obtener 1 millón de rublos. </font><font style="vertical-align: inherit;">de Cloud4Y. </font><font style="vertical-align: inherit;">Términos y condiciones para quienes lo deseen - en nuestro sitio web: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly/2sj6dPK</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es487052/">https://habr.com/ru/post/es487052/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es487038/index.html">De repente, un sistema de recolección de basura solo no es suficiente</a></li>
<li><a href="../es487040/index.html">Firefox Preview Nightly para Android recibe soporte para uBlock Origin</a></li>
<li><a href="../es487042/index.html">Ryzen Threadripper 3990X de 64 núcleos derrotó a todos los procesadores Intel en las pruebas, incluido Xeon por $ 20,000</a></li>
<li><a href="../es487044/index.html">¿Intimidad? No no escuchado</a></li>
<li><a href="../es487046/index.html">Cómo construir una biblioteca nativa para Android</a></li>
<li><a href="../es487054/index.html">ROS: Dedicado a aquellos atrapados en Gazebo ... Plataforma para un robot por 28,000 rublos</a></li>
<li><a href="../es487056/index.html">¿Es peligroso mantener RDP abierto en Internet?</a></li>
<li><a href="../es487058/index.html">"Hadoop. ZooKeeper ”de la serie Mail.Ru Group Technostream“ Procesamiento distribuido de datos grandes en Hadoop ”</a></li>
<li><a href="../es487060/index.html">¿Estás usando Google Chrome? Entonces Google recopila sus datos a través de X-client-data</a></li>
<li><a href="../es487062/index.html">CBS permitió a los usuarios de Linux ver Star Trek, gracias a ella por eso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>