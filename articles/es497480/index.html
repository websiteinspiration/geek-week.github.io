<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙀 💇🏽 🚛 Conferencias de video: unix way ☣️ 🎐 😙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La cuarentena es un momento maravilloso para aprender algo. Sin embargo, como saben, para que alguien aprenda algo, alguien debe enseñar. Si tiene una...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Conferencias de video: unix way</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497480/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vm/gw/wm/vmgwwmtfoo_hivajmmrsjdynktm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cuarentena es un momento maravilloso para aprender algo. </font><font style="vertical-align: inherit;">Sin embargo, como saben, para que alguien aprenda algo, alguien debe enseñar. </font><font style="vertical-align: inherit;">Si tiene una presentación con la que desea hablar ante una audiencia número un millón y ganar fama mundial, entonces este artículo es para usted. </font><font style="vertical-align: inherit;">Aquí encontrará instrucciones paso a paso sobre cómo hacer un video desde la presentación. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Marcamos la forma de grabar "comentarios de sonido" en PowerPoint y exportar la presentación en video como algo trivial y sin dar una décima parte de las posibilidades que se necesitan para un video realmente genial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, decidiremos qué cuadros necesitamos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En realidad se desliza con una voz en off</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambio de diapositiva</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interrumpir citas de películas populares</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unos cuadros con la fisonomía del profesor y el gato favorito (opcional)</font></font></li>
</ol><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear una estructura de directorio</font></font></h3><br>
<pre><code class="bash hljs">.<font></font>
├── clipart<font></font>
├── clips<font></font>
├── rec<font></font>
├── slide<font></font>
└── sound<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Asignación de catálogos en el orden de inclusión: películas de las que sacaremos citas (imágenes prediseñadas), fragmentos de nuestro futuro video (clips), videos de la cámara (rec), diapositivas de imagen (diapositiva), sonido (sonido).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacer una presentación en imágenes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para un verdadero </font><font style="vertical-align: inherit;">Linuxoid de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ojos</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rojos, hacer una presentación en forma de imágenes no presenta ningún problema. </font><font style="vertical-align: inherit;">Permítanme recordarles que un documento pdf se puede analizar en imágenes usando el comando</font></font><br>
<br>
<pre><code class="bash hljs">pdftocairo -png -r 128 ../lecture.pdf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no existe dicho comando, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instale el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> paquete </font><i><font style="vertical-align: inherit;">poppler-utils</font></i><font style="vertical-align: inherit;"> (instrucciones para Ubuntu; si tiene Arch, entonces ya sabe qué hacer sin mí). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lo sucesivo, creo que el video se está preparando en formato HD Ready, es decir, 1280 × 720. </font><font style="vertical-align: inherit;">Una presentación con un tamaño horizontal de 10 pulgadas proporciona exactamente este tamaño cuando se descarga (consulte la opción -r 128).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estamos preparando el texto</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quieres hacer material realmente genial, primero debes escribir tu discurso. </font><font style="vertical-align: inherit;">También pensé que podía decir el texto sin preparación, especialmente porque tengo una buena experiencia en conferencias. </font><font style="vertical-align: inherit;">Pero una cosa es tocar en vivo y otra es grabar video. </font><font style="vertical-align: inherit;">No seas perezoso: el tiempo dedicado a escribir valdrá la pena más de una vez. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_6/jl/bb/_6jlbbte4tfrvad0s6ukynie_ou.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí está mi formato de grabación. </font><font style="vertical-align: inherit;">El número en el encabezado es igual al número de la diapositiva, las interrupciones se resaltan en rojo. </font><font style="vertical-align: inherit;">Cualquier editor es adecuado para la preparación, pero es mejor tomar un procesador de texto completo, por ejemplo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnlyOffice</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diapositivas sonoras</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué puedo decir? Encienda el micrófono y escriba :) La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
experiencia muestra que la calidad de grabación incluso desde el micrófono externo más barato es incomparablemente mejor que con el micrófono incorporado de la computadora portátil. Si desea equipos de alta calidad, le recomiendo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este artículo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la grabación, utilicé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una grabadora de audio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , una aplicación de grabación muy simple. Puedes tomarlo, por ejemplo, aquí:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:audio-recorder/ppa<font></font>
sudo apt-get update<font></font>
sudo apt-get install audio-recorder</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo principal en este paso es el nombre apropiado del archivo. </font><font style="vertical-align: inherit;">El nombre debe consistir en un número de diapositiva y un número de fragmento. </font><font style="vertical-align: inherit;">Los fragmentos están numerados con números impares: 1, 3, 5, etc. Entonces, para la diapositiva, cuyo texto se muestra en la imagen, se crearán dos archivos: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-1.mp3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-3.mp3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si grabaste todos los videos a la vez en una habitación tranquila, entonces no se puede hacer nada con ellos. </font><font style="vertical-align: inherit;">Si grabó en varias etapas, es mejor ecualizar el nivel de volumen:</font></font><br>
<br>
<pre><code class="bash hljs">mp3gain -r *.mp3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por </font><font style="vertical-align: inherit;">alguna razón, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilidades de </font><i><font style="vertical-align: inherit;">mp3gain</font></i><font style="vertical-align: inherit;"> no están en los repositorios estándar, pero puede obtenerlo aquí:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:flexiondotorg/audio<font></font>
sudo apt-get update<font></font>
sudo apt-get install mp3gain</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de todo esto, debe escribir otro archivo con silencio. </font><font style="vertical-align: inherit;">Es necesario agregar una banda sonora a los clips silenciosos: si hay una banda sonora en un clip y no en el otro, entonces es difícil pegar estos clips. </font><font style="vertical-align: inherit;">El silencio se puede grabar desde el micrófono, pero es mejor crear un archivo en el editor de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Audacity</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El archivo debe tener al menos un segundo de </font><i><font style="vertical-align: inherit;">largo</font></i><font style="vertical-align: inherit;"> (más largo) y se debe </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">llamar a silence.mp3</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rodillos de cocción</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo aquí está limitado solo por tu imaginación. </font><font style="vertical-align: inherit;">Puede usar el editor </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para editar el video </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Una vez que estaba en repositorios estándar, pero luego por alguna razón fue aserrada. </font><font style="vertical-align: inherit;">Esto no nos detendrá:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:ubuntuhandbook1/avidemux<font></font>
sudo apt-get update<font></font>
sudo apt-get install avidemux2.7-qt5</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instrucciones para trabajar con este editor en el mar, sí, en principio, todo es intuitivo allí. Es importante observar varias condiciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, la resolución de la película debe coincidir con la resolución objetivo de la película. Para hacer esto, en el "video para salir" necesita usar dos filtros: swsResize para cambiar la resolución y "agregar campos" para hacer que la película soviética de "formato estrecho" sea de formato ancho. Todos los demás filtros son opcionales. Por ejemplo, si alguien no comprende cuál es la declaración del Sr. Sharikov en el fragmento en discusión, utilizando el filtro "agregar logotipo", puede agregar el logotipo de PostgreSQL en la parte superior del "Corazón del perro".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En segundo lugar, todos los fragmentos deben usar la misma velocidad de fotogramas. Utilizo 25 cuadros por segundo, porque mucho me da mi cámara y viejas películas soviéticas. Si la película desde la que corta el cuadro se graba a una velocidad diferente, use el filtro "Resample Video". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tercer lugar, todos los fragmentos deben comprimirse con el mismo códec y empacarse en los mismos contenedores. Por lo tanto, en </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para el formato, seleccione el video - “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mpeg4 AVC (x264)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”, el audio - “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AAC (Faac)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”, el formato de salida - “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MP4 Muxer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuarto, es importante nombrar correctamente los clips cortados. </font><font style="vertical-align: inherit;">El nombre del archivo debe consistir en un número de diapositiva y un número de fragmento. </font><font style="vertical-align: inherit;">Los fragmentos están numerados con números pares, comenzando con 2. Por lo tanto, para el marco en discusión, el clip con el corte debe llamarse </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-2.mp4</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Después de que los clips estén listos, debe transferirlos al directorio con los fragmentos. </font><font style="vertical-align: inherit;">La configuración de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> difiere de la </font><font style="vertical-align: inherit;">configuración predeterminada de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por los misteriosos parámetros tbr, tbn, tbc. </font><font style="vertical-align: inherit;">No afectan la reproducción, pero no permiten que los rodillos se peguen. </font><font style="vertical-align: inherit;">Por lo tanto, recodificamos:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> ???-?.mp4;
<span class="hljs-keyword">do</span>
  ffmpeg -hide_banner -y -i <span class="hljs-string">"<span class="hljs-variable">${f}</span>"</span> -c copy -r 25 -video_track_timescale 12800 ../clips/<span class="hljs-variable">$f</span>
<span class="hljs-keyword">done</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eliminamos protectores de pantalla</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo aquí también es simple: dispare en el fondo de algún tipo de esquema inteligente, coloque los videos recibidos en el directorio </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rec</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y desde allí transfiéralos al directorio con fragmentos. </font><font style="vertical-align: inherit;">Las reglas de nomenclatura son las mismas que para los saltos de comillas, el comando de recodificación es el siguiente:</font></font><br>
<br>
<pre><code class="bash hljs">ffmpeg -y -i source_file -r 25 -vcodec libx264 -pix_fmt yuv420p -profile:v high -coder 1 -s 1280x720 -ar 44100 -ac 2 ../clips/xxx-x.mp4
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si planea comenzar el video con su discurso, nombre este fragmento </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">000-1.mp4</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacemos marcos a partir de imágenes estáticas.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hora de montar clips de imágenes estáticas y sonido. </font><font style="vertical-align: inherit;">Esto se hace con este script:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-keyword">for</span> sound <span class="hljs-keyword">in</span> sound/*.mp3
<span class="hljs-keyword">do</span>
  soundfile=<span class="hljs-variable">${sound##*/}</span>
  chunk=<span class="hljs-variable">${soundfile%%.mp3}</span>
  clip=<span class="hljs-variable">${chunk}</span>.mp4<font></font>
  pic=slide/<span class="hljs-variable">${chunk%%-?}</span>.png<font></font>
<font></font>
  duration=$(soxi -D <span class="hljs-variable">${sound}</span> 2&gt;/dev/null)
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">${sound}</span> <span class="hljs-variable">${pic}</span> <span class="hljs-variable">${clip}</span> <span class="hljs-string">" - "</span> <span class="hljs-variable">${duration}</span><font></font>
<font></font>
  ffmpeg -hide_banner -y -loop 1 -i <span class="hljs-variable">${pic}</span> -i <span class="hljs-variable">${sound}</span> -r 25 -vcodec libx264 -tune stillimage -pix_fmt yuv420p -profile:v high -coder 1 -t <span class="hljs-variable">${duration}</span> clips/<span class="hljs-variable">${clip}</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que primero la duración del archivo de sonido está determinada por la utilidad </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soxi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y luego se monta el video de la duración deseada. Todas las recomendaciones que encontré son más simples: en lugar del </font><font style="vertical-align: inherit;">indicador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-t $ { </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duration </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">}</font></i><font style="vertical-align: inherit;"> , se </font><i><font style="vertical-align: inherit;">utiliza el</font></i><font style="vertical-align: inherit;"> indicador </font><i><font style="vertical-align: inherit;">-shortest</font></i><font style="vertical-align: inherit;"> . De hecho, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> determina la duración del mp3 aproximadamente, y durante la instalación, la duración de la pista de audio puede ser muy diferente (uno o dos segundos) de la duración de la pista de video. No importa si todo el video consta de un solo cuadro, pero al pegar una película con un salto en el borde, se producen efectos extremadamente desagradables con tartamudeo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra forma de determinar la duración de un archivo mp3 es usar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3info</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ella también se equivoca, y a veces</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da más que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3info</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a veces viceversa, a veces ambos mienten. No he notado ningún patrón. </font><font style="vertical-align: inherit;">Pero </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soxi está</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funcionando correctamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalar esta útil utilidad, haga esto:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install sox libsox-fmt-mp3</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacer transiciones entre diapositivas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transición: un video corto en el que una diapositiva se convierte en otra. </font><font style="vertical-align: inherit;">Para hacer tales videos, tome diapositivas en pares y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use imagemagick para</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> convertir uno en el otro:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span><font></font>
BUFFER=$(mktemp -d)<font></font>
<font></font>
<span class="hljs-keyword">for</span> pic <span class="hljs-keyword">in</span> slide/*.png
<span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">${prevpic}</span> != <span class="hljs-string">""</span> ]]
  <span class="hljs-keyword">then</span>
    clip=<span class="hljs-variable">${pic##*/}</span>
    clip=<span class="hljs-variable">${clip/.png/-0.mp4}</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#  </span>
    <span class="hljs-comment">#</span>
    ./fade.pl <span class="hljs-variable">${prevpic}</span> <span class="hljs-variable">${BUFFER}</span> 1280 720 5 direct 0<font></font>
    ./fade.pl <span class="hljs-variable">${pic}</span> <span class="hljs-variable">${BUFFER}</span> 1280 720 5 reverse 12
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#   </span>
    <span class="hljs-comment">#</span>
    ffmpeg -y -hide_banner -i <span class="hljs-string">"<span class="hljs-variable">${BUFFER}</span>/%03d.png"</span> -i sound/silence.mp3 -r 25 -y -acodec aac -vcodec libx264 -pix_fmt yuv420p -profile:v high -coder 1 -shortest clips/<span class="hljs-variable">${clip}</span>
    rm -f <span class="hljs-variable">${BUFFER}</span>/*
  <span class="hljs-keyword">fi</span>
  prevpic=<span class="hljs-variable">${pic}</span>
<span class="hljs-keyword">done</span><font></font>
<font></font>
rmdir <span class="hljs-variable">${BUFFER}</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por alguna razón, quería que la diapositiva se dispersara en puntos, y luego la siguiente diapositiva se ensambló a partir de los puntos, y para esto escribí un script llamado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fade.pl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Al tener </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagemagick</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un verdadero Linuxoid creará algún efecto especial, pero si a alguien le gusta mi idea de dispersión, Aquí está el guión:</font></font><br>
<br>
<pre><code class="perl hljs"><span class="hljs-comment">#!/usr/bin/perl</span><font></font>
<font></font>
<span class="hljs-keyword">use</span> strict;
<span class="hljs-keyword">use</span> warnings;
<span class="hljs-keyword">use</span> locale;
<span class="hljs-keyword">use</span> utf8;
<span class="hljs-keyword">use</span> <span class="hljs-keyword">open</span> <span class="hljs-string">qw(:std :utf8)</span>;
<span class="hljs-keyword">use</span> Encode <span class="hljs-string">qw(decode)</span>;
<span class="hljs-keyword">use</span> I18N::Langinfo <span class="hljs-string">qw(langinfo CODESET)</span>;<font></font>
<font></font>
<span class="hljs-keyword">my</span> $codeset = langinfo(CODESET);<font></font>
@ARGV = <span class="hljs-keyword">map</span> { decode $codeset, $_ } @ARGV;<font></font>
<font></font>
<span class="hljs-keyword">my</span> ($source, $target, $width, $height, $pixsize, $rev, $file_no) = @ARGV;<font></font>
<font></font>
<span class="hljs-keyword">my</span> @rects;<font></font>
$rects[$_] = <span class="hljs-string">"0123456789AB"</span> <span class="hljs-keyword">for</span> <span class="hljs-number">0</span>..$width*$height/$pixsize/$pixsize/<span class="hljs-number">12</span> - <span class="hljs-number">1</span>;<font></font>
<font></font>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $i (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>) {
  <span class="hljs-keyword">substr</span>($_,<span class="hljs-keyword">int</span>(<span class="hljs-keyword">rand</span>(<span class="hljs-number">12</span>-$i)),<span class="hljs-number">1</span>) = <span class="hljs-string">""</span> <span class="hljs-keyword">for</span> (@rects);
  <span class="hljs-keyword">my</span> $s = $source;<font></font>
  $s =~ <span class="hljs-keyword">s</span><span class="hljs-comment">#^.*/##;</span>
  <span class="hljs-keyword">open</span>(PICTURE,<span class="hljs-string">"| convert - -transparent white PNG:- | convert \"$source\" - -composite \"$target/"</span>.substr(<span class="hljs-string">"00"</span>.($file_no+$i),-<span class="hljs-number">3</span>).<span class="hljs-string">".png\""</span>);
  <span class="hljs-keyword">printf</span> PICTURE (<span class="hljs-string">"P3\n%d %d\n255\n"</span>,$width,$height);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $row (<span class="hljs-number">1</span>..$height/$pixsize/<span class="hljs-number">3</span>) {
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $j (<span class="hljs-number">0</span>..<span class="hljs-number">2</span>) {
      <span class="hljs-keyword">my</span> $l = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $col (<span class="hljs-number">1</span>..$width/$pixsize/<span class="hljs-number">4</span>) {
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $k (<span class="hljs-number">0</span>..<span class="hljs-number">3</span>) {<font></font>
          $l .= (<span class="hljs-keyword">index</span>($rects[($row-<span class="hljs-number">1</span>)*$width/$pixsize/<span class="hljs-number">4</span>+$col-<span class="hljs-number">1</span>],<span class="hljs-keyword">sprintf</span>(<span class="hljs-string">"%1X"</span>,$j*<span class="hljs-number">4</span>+$k))==-<span class="hljs-number">1</span> <span class="hljs-keyword">xor</span> $rev eq <span class="hljs-string">"reverse"</span>) ? <span class="hljs-string">"0 0 0\n"</span> : <span class="hljs-string">"255 255 255\n"</span> <span class="hljs-keyword">for</span> (<span class="hljs-number">1</span>..$pixsize);<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword">print</span> PICTURE ($l) <span class="hljs-keyword">for</span> (<span class="hljs-number">1</span>..$pixsize);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">close</span>(PICTURE);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monta el rodillo terminado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora tenemos todos los fragmentos. </font><font style="vertical-align: inherit;">Vamos al directorio de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y recogemos la película terminada con dos comandos:</font></font><br>
<br>
<pre><code class="bash hljs">ls -1 ???-?.mp4 | gawk -e <span class="hljs-string">'{print "file " $0}'</span> &gt;list.txt<font></font>
ffmpeg -y -hide_banner -f concat -i list.txt -c copy MOVIE.mp4<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Disfrute de su visita a sus agradecidos estudiantes!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497466/index.html">Sysbench y la distribución de variables aleatorias.</a></li>
<li><a href="../es497468/index.html">[Clase magistral] Ataques prácticos en la interfaz USB</a></li>
<li><a href="../es497470/index.html">Cómo expulsar virus en el SDK de Corona</a></li>
<li><a href="../es497476/index.html">Las 8 estructuras de datos JavaScript principales</a></li>
<li><a href="../es497478/index.html">Simulador de red tutorial ns-3. Capítulo 4</a></li>
<li><a href="../es497482/index.html">Autenticación en Kubernetes con Dex: sujete LDAP</a></li>
<li><a href="../es497484/index.html">Uso de algoritmos ML para clasificar documentos de varias páginas: experiencia VTB</a></li>
<li><a href="../es497486/index.html">División de datos. Año 2013. Retrospectivo</a></li>
<li><a href="../es497488/index.html">Automatice los procesos de recursos humanos con Microsoft Teams, PowerApps y Power Automate. Solicitudes de retiro de empleados</a></li>
<li><a href="../es497490/index.html">Dificultades en la paternidad de los caballitos de mar: metamorfosis genéticas del sistema inmune.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>