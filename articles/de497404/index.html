<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚪️ 🕴🏿 🧛🏼 T + Conf 2019: Tarantool bei Aeroflot oder MDM on the fly 🕺🏻 🚢 🔺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute veröffentlichen wir eine Abschrift des Berichts von Nikolai Shevtsov und Rustam Kildiev mit T + Conf 2019 " Tarantool in Aeroflot oder MDM (Mast...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>T + Conf 2019: Tarantool bei Aeroflot oder MDM on the fly</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497404/"><img src="https://habrastorage.org/webt/tt/v8/vo/ttv8vohzeerxnvyinyfsi7wi1tw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heute veröffentlichen wir eine Abschrift des Berichts von Nikolai Shevtsov und Rustam Kildiev mit T + Conf 2019 " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool in Aeroflot oder MDM (Master Data Management) on the fly</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". </font><font style="vertical-align: inherit;">Aus dem Bericht erfahren Sie:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum wird MDM benötigt?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum brauche ich Echtzeit?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Science ist mehr als nur ein Jupyter-Notizbuch.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorteile von Tarantool.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum Lua gut verkaufen kann.</font></font></li>
</ul><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Informationstechnologie hilft unserem Unternehmen aktiv dabei, Kunden zu gewinnen. Heute führen wir aktiv eine Reihe von Big Data-Projekten ein. Dies sind Marketingprojekte, die uns bei der Datensegmentierung und der Bereitstellung von Informationen für Kunden, bei der Sozialforschung, bei der Bearbeitung von Beschwerden und Beschwerden und vielem mehr helfen. Darüber hinaus werden mehrere Projekte durchgeführt, die dazu beitragen, die Rentabilität und Rentabilität des Unternehmens zu steigern. Eines der Projekte ist beispielsweise die Analyse des verfügbaren Gepäcks an Bord, um Überschüsse rechtzeitig zu verkaufen oder den Ausfall einzelner Komponenten und Ersatzteile von Flugzeugen für eine rechtzeitige Wartung vorherzusagen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Anrufbearbeitungsplattform verwenden wir Tarantool aktiv und ein wenig mehr darüber.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Hauptwert von Big Data ist für uns die Fähigkeit, Daten zu analysieren. Wir versuchen, alle neuen Informationsquellen in Bezug auf Aeroflot in einem einzigen Informationsfeld zur weiteren Verarbeitung zu sammeln.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c2/53c/34a/0c253c34a90c2d118b770ca120e63ba2.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikolay Shevtsov, Aeroflot. Projektleiter in der Abteilung Informationssysteme.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wie kaufen Leute normalerweise ein Ticket? Es gibt eine Idee über die Reise, eine Person teilt sie mit Freunden und Verwandten in sozialen Netzwerken und Foren und kauft dann ein Ticket auf der Website. Es gibt viele Informationsquellen, und unsere Aufgabe ist es, alle zu sammeln und zu analysieren, um die Einstellung der Passagiere zum Service und zur gesamten Fluggesellschaft zu verstehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eines unserer Projekte heißt Call Platform. Wir sammeln alle Bewertungen, Einsprüche und Beschwerden aus zahlreichen Quellen. "Plattform" ist unser einzelnes Erfassungsfenster auf der Website oder in der mobilen Anwendung, über das wir Informationen von Benutzern erhalten. Wir sammeln auch Aeroflot-bezogene Social-Media-Bewertungen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Aeroflot-Abteilungen sind an der Bearbeitung von Beschwerden und Beschwerden beteiligt: ​​Mitarbeiter, die an Bord Dienstleistungen erbringen, im Abflugbereich, im Ankunftsbereich usw. Die meisten Beschwerden, etwa 2,5 Tausend pro Tag, kommen von ankommenden Passagieren, die Probleme haben. Jede Beschwerde muss bearbeitet, klassifiziert und an die entsprechende Abteilung an einen bestimmten Mitarbeiter weitergeleitet werden, der das Problem des Passagiers lösen kann. Identische Beschwerden können gruppiert werden, um Zeit zu sparen, die Situation zu analysieren und eine Entscheidung zu treffen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ziel des Projekts ist es, die Bearbeitung von Anträgen zu optimieren und die Bearbeitungszeit zu verkürzen. </font><font style="vertical-align: inherit;">Dazu musste ein System erstellt werden, das zum Zeitpunkt einer Beschwerde automatisch das Thema ermittelt und an die zuständige Abteilung an den zuständigen Mitarbeiter sendet. </font><font style="vertical-align: inherit;">Bei der Bearbeitung einer Beschwerde muss das System alle verfügbaren Informationen über den Kunden bis zu seinem Profil, geplanten zukünftigen Flügen usw. finden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu Beginn des Projekts haben wir verschiedene Tools in Betracht gezogen, die uns in dieser Angelegenheit helfen könnten, und uns schließlich für Tarantool entschieden. </font><font style="vertical-align: inherit;">Das Leben hat gezeigt, dass dies die richtige Wahl war: Es ermöglicht Ihnen, die SLA-Anforderungen zu erfüllen und gleichzeitig mit zunehmender Belastung gut zu skalieren.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aeroflot hat eine Plattform für die Bearbeitung von Beschwerden eingeführt. </font><font style="vertical-align: inherit;">Hierbei handelt es sich um ein Repository unstrukturierter Informationen, auf deren Grundlage die Analyse und Synthese eindeutiger Kundenprofile durchgeführt wird.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b31/faa/6eb/b31faa6ebcbeb799116369a843ed6d96.jpg" width="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die auf Anfrage eingegangenen Informationen müssen verarbeitet und systematisiert werden. </font><font style="vertical-align: inherit;">Einsprüche sind Text, der nicht in einer Rohform gespeichert werden kann, sodass der gesamte Text vektorisiert wird. </font><font style="vertical-align: inherit;">Es wird nach einer Reihe von Treffern gesucht, eine Karte mit eindeutigen Wörtern und Phrasen wird erstellt, auf deren Grundlage der Anfangsvektor berechnet wird, um alle nachfolgenden Treffer umzuwandeln. </font><font style="vertical-align: inherit;">Zunächst verwendeten unsere Datenanalysespezialisten klassische Tools - Python und Jupyter Notebook - auf einem Cluster oder einem lokalen Laptop. </font><font style="vertical-align: inherit;">Der Vektor hat eine dynamische Größe, was zu Schwierigkeiten führt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu vielen anderen Tools ist Tarantool ein vollständiger Anwendungsserver. </font><font style="vertical-align: inherit;">Wir können viele Bibliotheken wie SciLua verwenden, Logik in einer regulären Programmiersprache schreiben usw. </font><font style="vertical-align: inherit;">Jetzt vektorisieren wir Daten mithilfe der SicLua-Bibliothek in Echtzeit direkt in Tarantool. </font><font style="vertical-align: inherit;">Dann sucht das System unter Verwendung der Kosinusdistanzmethode für einen Zeitraum von drei Monaten nach einem ähnlichen Vektor. </font><font style="vertical-align: inherit;">Infolgedessen erhalten wir entweder einen doppelten oder einen ähnlichen Aufruf zur weiteren Verarbeitung. </font><font style="vertical-align: inherit;">Während des Suchvorgangs werden viele mathematische Berechnungen durchgeführt: In 3 Monaten werden ungefähr 100.000 Anrufe aus allen verfügbaren Quellen verarbeitet. </font><font style="vertical-align: inherit;">Die durchschnittliche Bearbeitungszeit beträgt 120 ms.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e9d/bac/534/e9dbac534af68444ed73e6c6b0c10aba.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rustam Kildiev, CTO bei Innodata.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastruktur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Tarantool-Datenbank läuft auf vier 16-Core-Servern mit viel RAM. Dank des Vshard-Moduls war es möglich, eine schnelle Suche mit Brute Force durchzuführen. Die Daten sind in Teile-Buckets unterteilt, so dass die Abfrageverarbeitung parallelisiert wird. Das System ist einfach zu skalieren. Fügen Sie einfach einen Server hinzu. Wir haben die Master-Master-Replikation implementiert, obwohl die meisten DBMS jetzt dazu kommen. Außerdem müssen wir keine Module hinzufügen, es gibt keine Probleme mit der Verwaltung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir aus dem RAM zählen, beträgt unsere Datenmenge etwa 1 TB. </font><font style="vertical-align: inherit;">In der Phase des Startens, Debuggens und Behebens von Fehlern im Projekt traten Probleme auf. </font><font style="vertical-align: inherit;">Fast alle Tabellen enthalten 7-8 Indizes, daher dauerte die Tarantool-Datenbank für 1 TB 20-40 Minuten, was nicht akzeptabel ist. </font><font style="vertical-align: inherit;">Während des Startvorgangs erstellt das System Indizes. Wenn Sie diese entfernen, wird das Laden viel schneller. </font><font style="vertical-align: inherit;">In dieser Situation hat uns die Hot-Standby-Funktion geholfen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pläne </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sowohl der Kunde als auch wir, die Darsteller, mochten Tarantool. Wir haben andere Basen in Betracht gezogen, aber am Ende haben wir uns für Tarantool entschieden. Erstens brauchten wir eine sehr schnelle Basis. Zweitens muss es viel damit arbeiten, Logik schreiben usw., also war die vollwertige Lua ein Vorteil für uns. Drittens schreibt Tarantool sofort auf die Festplatte und macht keine Schnappschüsse. Dies ist auch gut für uns, denn obwohl viele Kunden anrufen, können wir es uns nicht leisten, auch nur einen zu verlieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool hat seine Nützlichkeit in der Produktion bewiesen, und wir werden noch mehr Daten darin laden und Geschäftslogik hinzufügen. Im Gegensatz zu anderen Datenbanken muss es nicht ständig aktualisiert und etwas geändert werden. Die Konvertierung und das Laden von Daten aus einem anderen System in Tarantool erfolgt übrigens automatisiert und wird täglich durchgeführt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Zukunft planen wir einen Wechsel zu Tarantool Enterprise, mit dem wir mehrere Tarantool-Instanzen bequem verwalten und konfigurieren können. </font><font style="vertical-align: inherit;">Es gibt noch wenige Spezialisten in dieser Datenbank, und der Bedarf an Spezialisten wächst ständig. </font><font style="vertical-align: inherit;">Unsere Qualifikationen reichen manchmal nicht aus. </font><font style="vertical-align: inherit;">In solchen Fällen hilft der interne Chat des Tarantool-Entwicklers, in dem Sie um Hilfe bitten können. </font><font style="vertical-align: inherit;">Dies ist in keinem anderen System der Fall. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir planen auch ein Upgrade auf Tarantool2 und SQL. </font><font style="vertical-align: inherit;">Es gibt viele SQL-Experten auf dem Arbeitsmarkt, daher wird der Übergang nicht sehr schwierig sein.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Hauptproblem dieses Projekts war Lua. </font><font style="vertical-align: inherit;">Nur wenige Entwickler wissen es, aber sie lieben es noch weniger. </font><font style="vertical-align: inherit;">Anfangs haben wir in einer anderen Sprache geschrieben, aber aufgrund der großen Anzahl von Anfragen arbeitete das System langsam. </font><font style="vertical-align: inherit;">Daher haben wir alles mit Lua für eine lange Zeit und Schmerzen kopiert, aber als Ergebnis arbeitet das System klar und schnell, mit einer kleinen Anzahl von Korrekturen und Releases. </font><font style="vertical-align: inherit;">Lua kommt dem Maschinencode sehr nahe und ist eine der schnellsten Sprachen aus der C-Familie. Obwohl es sich um eine kleine Skriptsprache handelt, verfügt sie über alle erforderlichen Bibliotheken, und wir konnten Such-, Vektorisierungs-, Kosinusabstands- usw. Algorithmen übertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool ist sehr fehlertolerant und funktioniert sofort. </font><font style="vertical-align: inherit;">Wir haben zahlreiche Experimente durchgeführt: Tarantool ausgeschaltet, angehoben usw. </font><font style="vertical-align: inherit;">- Alles funktioniert einwandfrei und Zwischendaten werden auf die Festplatte geschrieben, damit wir keine Daten verlieren.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497392/index.html">Wie kann man aus einem Studenten einen Software-Ingenieur machen?</a></li>
<li><a href="../de497394/index.html">Zehn Ressourcen mit Informatikkursen, die im April kostenlos zur Verfügung stehen</a></li>
<li><a href="../de497396/index.html">Kollegen: weder Freund noch Feind, aber wie?</a></li>
<li><a href="../de497398/index.html">AMD EPYC Rome 7x32-Serverprozessoren - Rekord-Single-Core-Leistung</a></li>
<li><a href="../de497402/index.html">Wie erstelle ich eine Python-Programmiersprache?</a></li>
<li><a href="../de497408/index.html">Wie russische Polarforscher in der Antarktis zellulare Kommunikation erhielten</a></li>
<li><a href="../de497412/index.html">Data Scientist: Lebenserinnerungen unter Quarantäne stellen und auf die Zukunft hoffen</a></li>
<li><a href="../de497414/index.html">Netzwerkdatenverarbeitung im laufenden Betrieb</a></li>
<li><a href="../de497416/index.html">Berühren Sie Unterstützung in JavaScript</a></li>
<li><a href="../de497420/index.html">StegoPy - LSB-Steganografie-Tool in Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>