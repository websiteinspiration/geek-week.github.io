<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕝 👨‍👦‍👦 ☸️ OS "Sivelkiriya": Ein Beispiel für die Erstellung eines Programms 👩🏻‍💻 👉🏼 🌰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr. 
 
 Dieser Beitrag setzt den Zyklus der Veröffentlichungen über das OS-Projekt Sivelkiriya fort. Der erste Artikel des Zyklus enthielt ein...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>OS "Sivelkiriya": Ein Beispiel für die Erstellung eines Programms</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500284/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Beitrag setzt den Zyklus der Veröffentlichungen über das OS-Projekt Sivelkiriya fort. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der erste Artikel des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zyklus enthielt eine allgemeine Beschreibung des Konzepts, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der zweite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erläuterte, warum es benötigt wurde und in welcher Form das Produkt das Licht sehen konnte, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der dritte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beschrieb Architekturlösungen und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der vierte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beantwortete die Frage, wie die Aktionen von Betriebssystementwicklern und koordiniert werden sollten Software in diesem Modell. Dieser Artikel zeigt ein Beispiel für die Aufteilung eines einfachen Programms in Module, um es in die Realität des neuen Betriebssystems zu integrieren.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich ein klassisches Beispiel vor: Ein Programm, mit dem Sie eine Datei mit einem Bitmap-Bild öffnen und auf dem Bildschirm anzeigen können. Das Bild kann skaliert werden. Wenn die Größe im aktuellen Maßstab die Bildschirmgröße überschreitet, scrollen Sie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In modernen Betriebssystemen wird dieses Problem häufig durch eine Anwendung mit einer geschlossenen Architektur gelöst, die entweder selbst den gesamten erforderlichen Code enthält oder Komponenten von Drittanbietern ausschließlich von sich aus verwendet. Der entscheidende Punkt ist, dass Sie einen Teil der Anwendung nicht verwenden können - Sie können sie entweder unverändert starten oder eine andere Lösung verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu verstehen, wie dieses Problem im Rahmen des Sivelkiriya-Betriebssystems gelöst wird, müssen Sie zunächst „unter die Haube“ dieses Programms schauen und verstehen, was es tut und mit welchen Konzepten es arbeitet. </font><font style="vertical-align: inherit;">Das Folgende sind die Entitäten, die während des Betriebs des Programms entstehen.</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Ort des Bildes.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im klassischen Fall wird dies durch den Pfad zur Datei auf der Festplatte beschrieben. Mit etwas größerer Betrachtung fallen auch Adressen im lokalen Netzwerk oder im Internet in diese Kategorie. Dies schöpft jedoch nicht alle Möglichkeiten aus: Das Bild kann sich im RAM, am Ausgang eines Programms (z. B. eines Fotoprozessors oder eines Grafik-Renderers), auf einer Webseite, in einer Chat- oder E-Mail-Nachricht, in einem Archiv oder einem Office-Dokument befinden. Trotz der Tatsache, dass sich technisch alle diese Optionen voneinander unterscheiden und eine unterschiedliche Verarbeitung erfordern, dienen sie aus Sicht des Benutzers alle einem Zweck: Sie geben an, wo sich das Bild befindet, das er anzeigen möchte. Das Erstellen einer Schnittstelle, mit der Sie unter so vielen Optionen auswählen können, ist keine triviale Aufgabe, aber konzeptionell gibt es keine Hindernisse für diesen Ansatz.Darüber hinaus gibt es keinen Grund, warum dem Benutzer nicht die Möglichkeit gegeben werden sollte, das Bild an einem der oben genannten Orte anzuzeigen.</font></font></li>
<li><b> ,   .</b>         ,     ,         ,    .</li>
<li><b>  .</b>   , , jpeg  gif.      :   jpeg      .gif,     gif       .    ,       , ,      ,  web-.</li>
<li><b></b>,       (    )    .</li>
<li><b>       .</b>  ,   tiff,        .  — , gif —   .</li>
<li><b></b>  <b></b>.</li>
<li><b> </b> :  ,  , ,  .</li>
<li><b> </b>    .</li>
<li><b></b> (  ) <b> </b>,    .</li>
<li><b></b> (    ),      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb des Betriebssystems Sivelkiriya wird jede der oben aufgeführten Entitäten durch eine bestimmte Datenschnittstelle beschrieben. Eine solche Darstellung ermöglicht ihre Verwendung in vielen Kontexten außerhalb des ursprünglichen Modells (auf das später eingegangen wird). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Schnittstelle wird von einem Objekt implementiert, das von einem Modul erstellt wird. Der Code der Methoden des Objekts wird im Rahmen des Moduls ausgeführt, das es generiert hat. Gleichzeitig ist es falsch, über das Starten von Modulen als separate Anwendungen zu sprechen, da sie weder über eigene Threads noch über Speicher außerhalb der von ihnen erstellten Objekte verfügen. Wenn Sie einen Status speichern müssen, der über die Arbeit mit einem einzelnen Image hinausgeht, wird dieser in einem separaten Objekt gespeichert, auf das nach allgemeinen Regeln zugegriffen wird - über die OS-Objektschnittstelle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Struktur der Module, die an der Arbeit dieses Programms beteiligt sind, kann folgendermaßen aussehen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das erste Modul definiert das Verhalten eines Objekts, das die Schnittstelle „Objektposition“ implementiert (ein Bild ist ein Sonderfall eines Objekts). </font><font style="vertical-align: inherit;">Insbesondere wird festgelegt, wie von einem bestimmten Speicherort aus auf Bytes zugegriffen werden soll. </font><font style="vertical-align: inherit;">Er kann jedoch Module verwenden, die je nach physischem Standort des Objekts direkten Zugriff auf die Festplatte oder die Netzwerkunterstützung bieten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das zweite Modul bietet direkten Zugriff auf Bildbytes. </font><font style="vertical-align: inherit;">Darüber hinaus enthält es Hinweise zum möglichen Inhaltstyp basierend auf der Speichermethode (Dateierweiterung, Webserver-Header usw.).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das dritte Modul bestimmt anhand von Hinweisen zum Inhaltstyp und zum Zugriff auf die Bytedarstellung den tatsächlichen Inhaltstyp (Bilddateiformat).</font></font></li>
<li>   ,     (    , , )   ( )     .      ,    : ,         .      —        :    jpeg     .</li>
<li>       ,  ,   ,    ,         .      —     —   ,      ,     .</li>
<li>,      .     ,         .           — ,       ,   ,       , ,   ,  ,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zu den beschriebenen Modulen kann das Programm natürlich an Modulen teilnehmen, die zusätzliche Funktionen bieten: Protokollierung, Rendern von Fensterkomponenten, Audio-Feedback usw.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist leicht zu erkennen, dass eine solche Struktur die Wiederverwendung implementierter Funktionen so einfach wie möglich macht. </font><font style="vertical-align: inherit;">Wenn Sie also einen neuen Codec im System installieren, wird dieser Bildtyp automatisch in allen Kontexten und in allen Programmen unterstützt. </font><font style="vertical-align: inherit;">Verschiedene Module können von verschiedenen Programmierern und in verschiedenen Sprachen geschrieben werden. Im Rahmen dieses Interaktionsmodells sind diese Unterschiede jedoch nicht signifikant. </font><font style="vertical-align: inherit;">Ein und derselbe Codec kann sowohl zum Laden von Bildern auf einen Bildschirm in dieser Benutzeroberfläche als auch zum Rendern in einem Nachrichtenprogramm, einem Browser, einem Verzeichnisinhalts-Viewer usw. verwendet werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Unterstützung für neue Anwendungsfälle erfolgt elementar. Wenn Sie beispielsweise einige zusätzliche Schnittstellen hinzufügen, können Sie Aktionen unterstützen, z. B. das Wechseln zum nächsten und vorherigen Bild (unabhängig von deren Position und Zugriff) oder das Anwenden von Filtern. Die Einführung eines Thin Clients ist ebenfalls kein Problem: Da der Durchgang von Daten und Aufrufen über die Grenzen des Moduls vom Betriebssystem gesteuert wird, können teure Vorgänge (z. B. Dekodieren des Inhalts einer Datei und Skalieren eines Bildes) auf einen anderen Computer übertragen werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da die Prototypen aller oben beschriebenen Module dem Betriebssystem bekannt sind, kennt es deren Anforderungen aus Systemsicht und kann entsprechend handeln. Beispielsweise kann die Bildskalierungsoperation in einem separaten Thread ausgeführt werden, sodass die Arbeit mit großen Bildern die Schnittstelle auf Low-End-Computern nicht blockiert. Da die Module keine Annahmen über die Threads treffen, in denen sie ausgeführt werden, sind darüber hinaus zusätzliche Optimierungen möglich: Beispielsweise kann der Benutzeroberflächenthread nur dann vom Thread getrennt werden, der für die Berechnung verantwortlich ist (in diesem Fall Skalierung) Ich hatte keine Zeit, die Arbeit innerhalb eines festgelegten Zeitraums abzuschließen, und mit einer schnellen Neuskalierung kann das Zeichnen des Bildes in einem neuen Maßstab bereits zuvor in einem zusätzlichen Stream gestartet werdenAls Thread, der sich mit dem Rendern befasst und nicht mehr abgeschlossen werden muss, kann er das Signal bis zur Fertigstellung verarbeiten. Da das Betriebssystem Informationen zu allen laufenden Threads, zum Laden und zu den tatsächlichen Funktionen der Prozessoren des Computers enthält, können die Optimierungsdaten effektiver sein als diejenigen, die der Autor einer separaten Anwendung basierend auf Annahmen über die Ausführungsumgebung ausführen kann.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Frage, wie die Module, die gemeinsam eine Lösung für ein angewandtes Problem bieten, miteinander verknüpft sind, kann auf verschiedene Weise gelöst werden. Beispielsweise ist es offensichtlich, dass die Auswahl eines Moduls, das Bytes einer Datei von der Festplatte liest, vom Dateisystem dieses Abschnitts bestimmt wird, und in allen Fällen des Zugriffs auf denselben Abschnitt wird dasselbe Modul verwendet. Das Modul, das für die Bestimmung des Bildformats verantwortlich ist, wird wahrscheinlich auf Systemebene installiert und in allen Kontexten verwendet. Eine Ausnahme können Fälle sein, in denen ein Modul ausfällt: In diesem Fall kann das Betriebssystem nach einem anderen installierten Modul suchen, das diesem Prototyp entspricht, und versuchen, es mit denselben Eingabedaten zu verwenden, falls vorhanden. Auf diese Weise,Der Fehler kann ohne Benutzereingriff verarbeitet werden, und Daten darüber werden gesammelt und, sofern die Sicherheitsrichtlinien dieses Computers dies zulassen, zusammen mit den erforderlichen zugehörigen Informationen an die Entwickler des Problemmoduls weitergeleitet. Wenn ein Modul häufig Probleme hat, kann das Betriebssystem entscheiden, es aus der Suchkette auszuschließen oder seine Priorität darin zu verringern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In anderen Fällen kann die Auswahl des Moduls benutzerdefiniert und in der Konfiguration gespeichert werden. Verschiedene Bildskalierungsmodule können daher einen unterschiedlichen Rendering-Stil bereitstellen (Anti-Aliasing-Parameter beim Verkleinern oder Verwischen der Pixelränder beim Vergrößern). Je nach Kontext benötigt der Benutzer möglicherweise einen anderen Ansatz (scharfe Pixelränder für eine präzise Positionierung oder verschwommen für visuellen Komfort).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Methoden zum Starten von Modulen können ebenfalls variieren. Das Modul, das für das Rendern des Bildbetrachterfensters verantwortlich ist, kann beispielsweise von dem Modul aufgerufen werden, das für das Rendern des Desktops verantwortlich ist (durch Klicken auf die Grafikdatei auf dem Desktop), oder von dem Modul, das das Programmstartmenü anzeigt. Nach dem Start lädt das Fenstermodul die Module, die es zum Ausführen der aktuellen Aufgabe benötigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Beschreibung ist nur eine Demonstration der grundlegenden Möglichkeit der Implementierung eines solchen Interaktionsschemas und kann nicht als vollständige Anweisung zum Schreiben eines Bildbetrachters, Betriebssystems und / oder von Modulen dafür betrachtet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frühere Artikel der Reihe finden Sie hier: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Der vollständige Text ist nach wie vor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf der Projektwebsite verfügbar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500272/index.html">Warum brauchen wir DevOps im Bereich ML-Daten?</a></li>
<li><a href="../de500276/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 413 (27. April - 3. Mai 2020)</a></li>
<li><a href="../de500278/index.html">Gehen Sie durch die Augen eines Rust-Programmierers: erste Eindrücke</a></li>
<li><a href="../de500280/index.html">Verteilungsmodell für Berechtigungsnachweise in FreeBSD v.2.0</a></li>
<li><a href="../de500282/index.html">So messen und bewerten Sie die Entwicklerproduktivität</a></li>
<li><a href="../de500288/index.html">Anfänger an der Börse: ehrliches Gespräch über den Handel</a></li>
<li><a href="../de500290/index.html">Auswahl und CSS</a></li>
<li><a href="../de500292/index.html">Ein einfacher Ansatz zum Arbeiten mit reaktionsschnellen Bildern</a></li>
<li><a href="../de500294/index.html">5 kostenlose Produktivitäts-Tools für Webentwickler</a></li>
<li><a href="../de500300/index.html">Rückverfolgung von Silizium in einem Hackathon-Format. Ohne physisches Design kein iPhone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>