<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗯️ 📗 🌒 Wir verwenden DS, um Kundenbewertungen von großen Websites zu verarbeiten 🤛🏿 🏉 📳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Fall haben wir Python-Sprachbibliotheken verwendet, z. B.: Selenium, BeautifulSoup. Es stellte sich heraus, dass ab 2018 etwa 27.000 Bewertu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wir verwenden DS, um Kundenbewertungen von großen Websites zu verarbeiten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/507238/"><img src="https://habrastorage.org/webt/ew/83/fu/ew83fubxvj8v2l04nqj8vkmicta.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall haben wir Python-Sprachbibliotheken verwendet, z. B.: Selenium, BeautifulSoup. </font><font style="vertical-align: inherit;">Es stellte sich heraus, dass ab 2018 etwa 27.000 Bewertungen abgegeben wurden. </font><font style="vertical-align: inherit;">Im Durchschnitt belegte jede Überprüfung 2 Absätze des A4-Blattes. </font><font style="vertical-align: inherit;">In 70% der Bewertungen wurde die Bewertung von Kunden abgegeben, in den restlichen 30% wurde keine Bewertung abgegeben. </font><font style="vertical-align: inherit;">Wir haben uns entschlossen, die erhaltenen Daten, die mit Noten bewertet wurden, als erste Daten für die Erstellung eines Unterrichtsmodells mit einem Lehrer zu verwenden. </font><font style="vertical-align: inherit;">In Zukunft brauchten wir ein Modell, um die Bewertung der verbleibenden 30% der Bewertungen zu bestimmen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Bewertungen lagen zwischen 1 und 5, aber wir mussten herausfinden, wie die Bewertung in Bezug auf die Qualität war, d. H. Ob sie positiv oder negativ war. </font><font style="vertical-align: inherit;">Wir haben die Logik der Schulnoten in Russland verwendet: Klassen 1.2 - negativ, sie wurden in 0 umgewandelt; </font><font style="vertical-align: inherit;">Schätzungen 3,4,5 sind positiv, sie wurden in 1 umgewandelt. Somit wurde das Problem auf eine binäre Klassifikation reduziert.</font></font><br>
<a name="habracut"></a><br>
<pre><code class="python hljs">dataframe.tail(<span class="hljs-number">5</span>) </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann experimentierten sie mit einem binären Klassifizierungsmodell. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für den ersten Durchgang haben wir die XGBoost-Methode für den Unterricht mit einem Lehrer gewählt. </font><font style="vertical-align: inherit;">Lehrer sind Kundenbewertungen. </font><font style="vertical-align: inherit;">Als Textmodell wurden Vektordarstellungen von Word2Vec-Wörtern verwendet, die je nach Kontext gebildet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben den Text vorverarbeitet, z. B.: Lemmatisierung, Entfernen von Stoppwörtern, Normalisierung und deren Tokenisierung.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> nltk.tokenize <span class="hljs-keyword">import</span> sent_tokenize
<span class="hljs-keyword">from</span> nltk.corpus <span class="hljs-keyword">import</span> stopwords
<span class="hljs-keyword">from</span> nltk.tokenize <span class="hljs-keyword">import</span> word_tokenize</code></pre><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tokenize_ru</span>(<span class="hljs-params">x</span>):</span><font></font>
      tokens = x.lower()<font></font>
       tokens = re.sub(<span class="hljs-string">r'[^\w\s]+|[\d]'</span>,<span class="hljs-string">' '</span>,tokens)<font></font>
       tokens = word_tokenize(tokens)<font></font>
       tokens = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tokens <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> string.punctuation)]<font></font>
       stop_words = stopwords.words(<span class="hljs-string">'russian'</span>)<font></font>
       stop_words.extend([<span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'—'</span>, <span class="hljs-string">'–'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'...'</span>])<font></font>
       tokens = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tokens <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> stop_words)]<font></font>
       tokens = [i.replace(<span class="hljs-string">"«"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"»"</span>, <span class="hljs-string">""</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tokens]
       <span class="hljs-keyword">return</span> tokens</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die besten Parameter mit der GridSearch-Methode sortiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die optimalen Genauigkeitsparameter wurden mit einer Baumtiefe von 8 (max_depth = 8) und der Anzahl der Bäume (n_estimators = 88) erhalten. </font><font style="vertical-align: inherit;">Standardmäßig ist die XGBoost-Bibliothek auf Folgendes eingestellt: n_estimators = 100, max_depth = 3.</font></font><br>
<br>
<pre><code class="python hljs">xgb_word2vec = Pipeline([<font></font>
              (<span class="hljs-string">"word2vec"</span>, MeanVect(w2v)),<font></font>
               (<span class="hljs-string">'model_fitting'</span>,  xgb)]) <font></font>
<font></font>
xgb_word2vec.fit(X_train2, y_train2)</code></pre><br>
<img src="https://habrastorage.org/webt/u2/bb/u9/u2bbu97mg296fz44uq6yf4vxn80.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für diese Bedingungen lautet die Verwirrungsmatrix wie folgt:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> matplotlib.pylab <span class="hljs-keyword">as</span> plt<font></font>
%matplotlib inline<font></font>
<span class="hljs-keyword">from</span> matplotlib.pylab <span class="hljs-keyword">import</span> rcParams<font></font>
rcParams[<span class="hljs-string">'figure.figsize'</span>] = <span class="hljs-number">3</span>, <span class="hljs-number">3</span>
plt.figure(figsize=(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>))<font></font>
sns.set(font_scale=<span class="hljs-number">1.5</span>)<font></font>
ax = sns.heatmap((pd.crosstab(y_test2, pred2).apply(<span class="hljs-keyword">lambda</span> r: r/r.sum()*<span class="hljs-number">100</span>, axis=<span class="hljs-number">0</span>)), cbar=<span class="hljs-literal">None</span>, annot=<span class="hljs-literal">True</span>, cmap=<span class="hljs-string">"Blues"</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">""</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">""</span>)<font></font>
plt.yticks(rotation=<span class="hljs-number">0</span>, size = <span class="hljs-number">15</span>)<font></font>
plt.xticks(rotation=<span class="hljs-number">0</span>, size = <span class="hljs-number">15</span>)
</code></pre><br>
<img src="https://habrastorage.org/webt/zz/jb/w_/zzjbw_dele4bai2panjn7fqyzrc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann haben wir versucht, den SGDClassifier für die TF-IDF-Wortvektoren zu verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachfolgend sind die verschiedenen Kombinationen von Optionen und ihre Verwirrungsmatrix aufgeführt: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. SGDClassifier + Word2Vec </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rp/dn/gd/rpdngd5gbz6qny-zpggnsqvo0vs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. SGDClassifier + TF-IDF </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2m/37/2x/2m372xild8ugy3dc4nrze_wff94.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. XGBoost + TF-IDF </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qa/yh/mb/qayhmbyyvianjzeycktthm7xjj0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
f-mera wird nach der Formel f-mera = 2 * Präzision * Rückruf / (Präzision + Rückruf) berechnet, wobei Präzision und Rückruf (Vollständigkeit) werden aus der Verwirrungsmatrix berechnet. Dies ist das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harmonische Mittel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zwischen Genauigkeit und Vollständigkeit. Für die binäre Klassifizierung reicht dies aus, um die Genauigkeit des Modells zu bewerten. Das beste Ergebnis wurde mit der Kombination von SGDClassifier + TF-IDF erzielt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus haben wir im bereits ausgewählten Modell mit besserer Genauigkeit irrelevante bewertete Bewertungen von 2016 bis 2018 ersetzt, die nicht an der Schulung teilgenommen haben, um die Richtigkeit der Schulung und des Modells zu überprüfen. Als Ergebnis erhielten wir f-mera: 0,9326314212969897. </font><font style="vertical-align: inherit;">Dieses Modell kann später verwendet werden, um Bewertungen zu klassifizieren, um keine Zeit damit zu verschwenden, manuell nach negativen Bewertungen zu suchen.</font></font><br>
<br>
<pre><code class="python hljs">precision_recall_fscore_support(y_prov, predtest, average=<span class="hljs-string">'macro'</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/1v/yd/yu/1vydyu1kkzolkbkxv2qfb58hhew.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann haben wir das Modell verwendet, um die verbleibenden 30 Prozent der Bewertungen zu schätzen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schlussfolgerung: Für die Verarbeitung natürlicher Sprache (NLP) aus unserer oben beschriebenen Erfahrung wurden die Ergebnisse besser durch eine Kombination von schnell konvergierendem SGDClassifier mit TF-IDF gezeigt, aber wiederum liegt der Schlüssel zum Erfolg in der Datenvorverarbeitung.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de507222/index.html">Warum jeder Masken tragen sollte</a></li>
<li><a href="../de507224/index.html">So beseitigen Sie blinde Flecken mit visuellen Tests</a></li>
<li><a href="../de507226/index.html">OCR für PDF in .NET - So extrahieren Sie Text aus unzugänglichen PDF-Dokumenten</a></li>
<li><a href="../de507234/index.html">Schnauben oder Suricata. Teil 2: Installation und Ersteinrichtung von Suricata</a></li>
<li><a href="../de507236/index.html">Wir erhöhen die Effektivität der Interaktion zwischen Designern und Frontend-Entwicklern</a></li>
<li><a href="../de507242/index.html">Was ist interessant Wi-Fi 6 in der Leistung von Huawei</a></li>
<li><a href="../de507250/index.html">Definieren einer gewinnenden Pokerhand mithilfe von Map / Reduce in JavaScript</a></li>
<li><a href="../de507254/index.html">Zabbix - Erweiterung der Makrogrenzen</a></li>
<li><a href="../de507256/index.html">Peter Hinchens: Psychopath Quellcode</a></li>
<li><a href="../de507258/index.html">Boni, Vorteile und Boni in der IT: die Ergebnisse der Habr-Karriereforschung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>