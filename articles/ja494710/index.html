<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌🏽 🎇 👩‍💻 Webプロジェクトでの最新のグラフィック形式の使用 🐿️ ⛹️ 👩‍❤️‍👨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eddie Osmaniは、記事「The Price of JavaScript in 2018」で、200 KBのスクリプトを処理し、同じサイズの画像を処理するのに必要な時間は大きく異なるという1つの貴重なアイデアを表明しました。実際のところ、コードを処理するとき、ブラウザーは画像の使用の準備より...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Webプロジェクトでの最新のグラフィック形式の使用</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/494710/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eddie Osmaniは、記事「The </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Price of JavaScript in 2018</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」で、200 KBのスクリプトを処理し、同じサイズの画像を処理するのに必要な時間は大きく異なるという1つの貴重なアイデアを表明しました。実際のところ、コードを処理するとき、ブラウザーは画像の使用の準備よりも広範な作業を行う必要があります。記事はそれについて言っています：</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPEG画像は、デコード、ラスタライズ、表示する必要があります。そして、単純に考えると、JSバンドルが必要です。ロード、解析、コンパイル、実行します。実際、エンジンはJSコードの処理プロセスで他の問題を解決する必要があります。一般的に、JavaScriptコードの処理にはより多くのシステムリソースが費やされ、そのサイズはバイト単位で他の素材のサイズに匹敵することに注意してください。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これらの単語は2018年に書かれましたが、それでもなお公正です。確かに、現在の状況を考えると、ここで表現されているアイデアは、今日では少し異なって認識されています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/8f/9m/t0/8f9mt0mjuf4ivefgknhgl8ykpge.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、世界的にパンデミックが勃発したことを考えると、インターネット接続が不安定になっていることに気づきました。幸い、インターネットは疲労を知らない優秀な専門家によって保護されているため、ほとんどのWorld Wide Webは依然として正常に機能しています。しかし、インターネットでは、何かが確実に起こっています。 100 Mbpsの接続を使用していますが、3Gモデムを使用しているように感じます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、上記の推論にいくつかの変更が加えられます。実際のところ、私たちのデバイスはJavaScriptを数週間前と同じ速度で解析およびコンパイルできます。しかし、データはネットワークをよりゆっくりと移動します。その結果、現時点では、特定のリソースが読み込まれたときに、そのリソースを表すデータがネットワーク上でどれだけ送信されるかが非常に重要になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、サイトには通常200 KB以上の画像があります。通常、数メガバイトの画像があるページが該当します。多くの開発者（そして私も！）は、原則として、メディア素材のサイズについてまったく考えません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これは非常に良いことであり、Webページで使用される画像を最適化することはそれほど難しくありません。</font><font style="vertical-align: inherit;">この記事では、WebPなどの最新のグラフィック形式の使用方法について説明します。</font><font style="vertical-align: inherit;">そのような形式で保存された画像は、多くの場合、古いおよびよく知られた古い形式がストレージに使用されている画像（JPGやPNGなど）の2〜3倍小さくなります。</font><font style="vertical-align: inherit;">新しいフォーマットを使用すると、状況が深刻に変わります。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新のグラフィック形式の概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webグラフィックでの作業を改善するために、次の3つの形式を使用できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPEG 2000は、通常のJPGを改良したフォーマットです。</font><font style="vertical-align: inherit;">このフォーマットは1997年に開発され、主に映画や医療で使用されます。</font><font style="vertical-align: inherit;">JPEGより強力な画像を圧縮できますが、アーティファクトは少なくなります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPEG XRは、JPEG 2000に関連する形式です。2009年にMicrosoftによって開発されました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPは、Googleが2010年にWeb用に作成した形式です。</font><font style="vertical-align: inherit;">その開発の主な目的は、ファイルサイズを小さくするために、高度な方法を使用して画像を最適化することでした。</font><font style="vertical-align: inherit;">WebPは透明度とアニメーションさえサポートします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは主にWebPについて説明します。</font><font style="vertical-align: inherit;">JPEGに関連するフォーマットについては、ブラウザーの互換性の問題がどこで発生するかについて説明します。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替のグラフィック形式を使用してどれだけ勝つことができますか？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数か月前、次の画像を1つの資料で使用しました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ebb/257/a61/ebb257a61229023d8aee7651708966c8.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つの素材で使用されている画像</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
元の画像の保存にJPGおよびPNG形式の使用を考慮して、いくつかの実験を行いました。</font><font style="vertical-align: inherit;">これらの「レトロ」フォーマットの代わりにWebPが何を提供できるかを見つけるために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imagemin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して画像オプションを最適化し</font><font style="vertical-align: inherit;">ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は驚くべきものでした。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像の特徴</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webp</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.Pngファイル（Photoshopから）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">742 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">61 Kb！</font><font style="vertical-align: inherit;">（92％減少）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最適化された.pngファイル（Imagemin以降）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">178 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58 Kb！</font><font style="vertical-align: inherit;">（67％減少）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.jpg形式のファイル（Photoshopから）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">242 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50 Kb！</font><font style="vertical-align: inherit;">（79％減）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.jpg形式の最適化されたファイル（imagemin以降）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">151 Kb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50 Kb！</font><font style="vertical-align: inherit;">（67％減少）</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの画像を使って同様の実験を行いました。</font><font style="vertical-align: inherit;">ほとんど常に、WebPファイルは他の形式のグラフィックファイルの最適化されたバージョンよりも30〜70％小さいことが判明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、WebPへの変換がSVG画像にどのように影響するかという問題を提起する可能性があります。</font><font style="vertical-align: inherit;">私はSVGでそのような実験をしませんでした。</font><font style="vertical-align: inherit;">SVGはベクター形式です。</font><font style="vertical-align: inherit;">つまり、その中の画像は、個々のピクセルの色に関する情報に基づいてではなく、数学的な指示に基づいて構築されています。</font><font style="vertical-align: inherit;">SVG画像をWebPに変換するということは、SVG画像を拡大縮小する機能を放棄することを意味します。</font><font style="vertical-align: inherit;">さらに、このような変換は、ほとんどの場合、ファイルサイズの増加につながると思います。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザの互換性</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のグラフィック形式がブラウザーでどのようにサポートされているかについては、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caniuse.comをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WebP形式は、ほとんどのブラウザーでサポートされています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8d/e47/094/b8de470941379e70ba194f35566deb05.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザによるWebP形式</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
のサポートこの形式のサポートレベルは非常に高いですが、SafariとInternet Explorerがサポートしていないのは非常に悪いことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これがJPEG 2000サポートに関する情報です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f50/5b6/1e3/f505b61e34cd89c8e5ae6c336396f5ee.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザによるJPEG 2000形式のサポート</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
つまり、Safariは私たちの味方ですが、Internet Explorerは再び機能しなくなりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG XRについてはどうですか？</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c39/c5c/ba1/c39c5cba1bb76927dee034cd17a893e6.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザーによるJPEG XR形式のサポート</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
そしてここでInternet Explorerは際立っていました。</font><font style="vertical-align: inherit;">その結果、これらの3つの形式を使用して、既存のすべてのブラウザーを重ねています（KaiOSブラウザーはこれらの形式のいずれもサポートしていません。彼を無視したことをお詫びしますが、それがどのブラウザーであるかさえわかりません。 ）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、異なるブラウザー用に設計された異なる画像フォーマットを選択する方法について説明します。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">救助への画素</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTMLには、画像を出力するための2つの要素があります。最初のものはマドンナのような国際的なポップスターと比較することができます。ですね</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そして2つ目は、音楽愛好家の狭い輪でしか知られていない新しいバンドのようなものです。これが要素</font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素</font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はHTMLよりもかなり後に出現しました</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この新しい要素の主な目的は、画面解像度に応じて、またはブラウザーが特定のグラフィック形式をサポートしているかどうかに応じて、開発者がさまざまなグラフィックリソースをダウンロードできるようにすることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素を使用するHTMLコードは次のようになり</font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/images/cereal-box.webp"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span> /&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/images/cereal-box.jp2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/jp2"</span> /&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/cereal-box.jxr"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/vnd.ms-photo"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素に</font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、多くの子要素</font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と1つの要素を</font><font style="vertical-align: inherit;">含めることができます</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ブラウザは順次これらの要素、属性に基づいて選択、解析し</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（複数可</font></font><code>media</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、それを使用することができ、それらのいずれかを。そのような要素が見つかると、ブラウザは属性を使用して画像のアドレスを見つけ</font></font><code>srcset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、要素を使用してこの画像を表示します</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この属性</font></font><code>srcset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は通常のものよりもはるかに優れた機能を備えています</font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、幸いにも、これは類似物と見なすことができ</font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。一般に、要素</font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、さまざまな画像に対応する設定のようなものです。</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高のページが表示されている環境と一致していることをイメージが含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、Chromeでは、上記のマークアップを処理した後、ブラウザは次のコードとほぼ同等の何かになります。</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/cereal-box.webp"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一連の連続した要素を使用</font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">することは、それらの少なくとも1つが各ブラウザに適していることを意味します。</font><font style="vertical-align: inherit;">したがって、ほとんどのブラウザはwebp画像を使用し、Safariはjp2画像、IEはjxr画像をロードします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Internet Explorerはこの要素をサポートしていないことを思い出してください</font></font><code>picture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このアイテムはこのブラウザには新しすぎます。</font><font style="vertical-align: inherit;">しかし、これにもかかわらず、上記のIEのマークアップフラグメントは期待どおりに動作します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事実、ブラウザはそれが知らない要素に遭遇すると、それを要素と見なします</font></font><code>div</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その結果、コードを解析するとき、IEは</font></font><code>div</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのタグだけでなく、</font><font style="vertical-align: inherit;">多くの要素を認識します。</font></font><code>&lt;img&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jxrイメージへのパスが含まれています。</font><font style="vertical-align: inherit;">結局のところ、これはInternet Explorerがサポートする形式そのものです。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡略化された代替</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードは、現在のすべてのブラウザーで最新のグラフィック形式を使用できるため、非常に優れています。</font><font style="vertical-align: inherit;">ただし、このようなコードの使用は、リンク先の画像が存在することを前提としています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような画像を自分で作成する場合、多くの手作業をそれに費やす必要があります。</font><font style="vertical-align: inherit;">これらを自動的に生成すると、プロジェクトのビルド時間が大幅に増加する可能性があります。</font><font style="vertical-align: inherit;">ご存知のように、グラフィック処理は、多くの画像に関して非常に遅いプロセスになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のブログへの訪問者はInternet Explorerをごくわずかしか使用していません（過去7日間でIEを使用したのは3人だけで、これはトラフィックの0.02％に相当します）。</font><font style="vertical-align: inherit;">したがって、上記のソリューションの簡易バージョンを使用することにしました。</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/images/cereal-box.webp"</span> /&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/cereal-box.jpg"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このフォーマットをサポートするブラウザー（Chrome、Firefox、Edge）、およびこのフォーマットをサポートしないブラウザー（IE、Safari）にコンパクトなwebp画像を提供します。私は過去の遺産-jpeg画像を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の見解では、これは進歩的な改善の例です。</font><font style="vertical-align: inherit;">画像のロードに時間がかかりますが、プロジェクトは古いブラウザでも動作します。</font><font style="vertical-align: inherit;">これは私に合った妥協です。</font><font style="vertical-align: inherit;">（確かに、WebPのサポートがAppleのブラウザーにもすぐに表示されることを願っています）。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリューションの状態を確認する</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者ツールは常に、画像には最初に</font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tag </font><font style="vertical-align: inherit;">属性に書き込まれたものが含まれていると想定します</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">タブを使用してアイテムを確認する</font></font><code>Elements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、ページがjpg画像を使用していることがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべての操作性を確認するために、私には思えるように、画像を右クリックして項目を選択するのが最善です。</font></font><code>  …</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドが実行されたときにChromeで、システムは拡張子付きのファイルを保存することを提案する必要があります</font></font><code>.webp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、Safariではjpegファイルになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ページが読み込まれたときにサーバーから受信したグラフィックファイルを正確に確認するには、開発者ツールバーを参照してください</font></font><code>Network</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像ファイルをWebP形式に変換する</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Googleは、webpファイルの操作を目的とした一連のツールを作成しました。</font><font style="vertical-align: inherit;">そのようなツールの1つが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cwebp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">他の形式のグラフィックファイルをWebPに変換できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MacOSを使用している場合は、Homebrewを使用してこのツールキットをインストールできます。</font></font><br>
<br>
<pre><code class="plaintext hljs">brew install webp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のプラットフォームで</font><font style="vertical-align: inherit;">は、リポジトリから</font><font style="vertical-align: inherit;">適切な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libwebp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ</font><font style="vertical-align: inherit;">をダウンロードする必要があると</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">思い</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツールをインストールしたら、次のように使用できます。</font></font><br>
<br>
<pre><code class="plaintext hljs">cwebp -q 80 cereal.png -o cereal.webp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコマンドを検討してください。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグを</font></font><code>-q 80</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用すると、画質を設定できます。</font><font style="vertical-align: inherit;">その値は1（最低品質）から100（最高品質）まで変化します。</font><font style="vertical-align: inherit;">さまざまな値を試すことができます。</font><font style="vertical-align: inherit;">70-80の辺りで何か聞いてみるのがいいとわかりました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル名</font></font><code>cereal.jpg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、webpに変換する必要がある元の画像です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構築</font></font><code>-o cereal.webp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、出力ファイルへのパスを設定します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなコマンドを手動で入力する時間を無駄にしたくはありません。</font><font style="vertical-align: inherit;">幸い、このタスクは自動化できます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reactアプリケーションで最新の画像フォーマットを使用する</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントは、要素の奇妙さの一部を無視する優れた方法</font></font><code>&lt;picture&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これにはReactコンポーネントを使用します。</font><font style="vertical-align: inherit;">私の意見では、それは非常に便利です。</font><font style="vertical-align: inherit;">これは次のようになります。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ImgWithFallback = ({<font></font>
&nbsp;&nbsp;src,<font></font>
&nbsp;&nbsp;fallback,<font></font>
&nbsp;&nbsp;type = <span class="hljs-string">'image/webp'</span>,<font></font>
&nbsp;&nbsp;...delegated<font></font>
}) =&gt; {<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcSet</span>=<span class="hljs-string">{src}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span> /&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{fallback}</span> {<span class="hljs-attr">...delegated</span>} /&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントの使用は</font></font><code>ImgWithFallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、通常のタグの操作とよく似てい</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;ImgWithFallback<font></font>
&nbsp;&nbsp;src=<span class="hljs-string">"/images/cereal.webp"</span>
&nbsp;&nbsp;fallback=<span class="hljs-string">"/images/cereal.png"</span>
&nbsp;&nbsp;alt=<span class="hljs-string">"A photo showing the expiration date on a box of Lucky Charms"</span><font></font>
/&gt;<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">様式化されたコンポーネントによる最新のグラフィック形式の使用</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリを使用する場合、</font></font><code>styled-components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>emotion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別な画像デザインに慣れている場合：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> FancyImg = styled.img<span class="hljs-string">`
&nbsp;&nbsp;whatever: stuff;
`</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に良いことは、コンポーネントで動作することです</font></font><code>ImgWithFallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">他のコンポーネントと同じように、適切なラッパーでラップできます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> FancyImg = styled(ImgWithFallback)<span class="hljs-string">`
&nbsp;&nbsp;whatever: stuff;
`</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この設計の操作性の理由は、補助構造がどのように正確に機能するか</font></font><code>styled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">クラスを生成し、ドキュメントのスタイルシートに埋め込みます。</font><font style="vertical-align: inherit;">次に、生成されたクラスの名前がプロパティとしてコンポーネントに渡されます。</font></font><br>
<br>
<pre><code class="css hljs">&lt;<span class="hljs-selector-tag">ImgWithFallback</span> <span class="hljs-selector-tag">className</span>="<span class="hljs-selector-tag">sc-some-generated-thing</span>" /&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのプロパティを子タグ</font></font><code>&lt;img&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">委任します。その</font><font style="vertical-align: inherit;">結果、通常、画像に正しいスタイルが適用されます。</font><font style="vertical-align: inherit;">すべてが期待どおりに機能します。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gatsby-imageパッケージの使用</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gatsbyを使用している場合は、パッケージが</font></font><code>gatsby-image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常使用されている場合、すでに多くの画像最適化を使用</font><font style="vertical-align: inherit;">していることに注意して</font><font style="vertical-align: inherit;">ください。</font><font style="vertical-align: inherit;">これには、画像をwebp形式に変換することが含まれます（ただし、これには適切なオプションを有効にする必要があります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージ</font></font><code>gatsby-image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は交換品であるとは主張していません</font></font><code>img</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その使用はそれほど単純ではない可能性があり、その内部メカニズムは、開発者にとって人生を困難にする驚きにつながる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパッケージに興味がある場合は、その</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPの短所</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が見つけることができたwebpの唯一の本当の欠点は、この形式のファイルを操作するのが非常に不便なことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのデスクトップイメージパッケージはまだサポートしていません。</font><font style="vertical-align: inherit;">たとえば、MacOSのプレビューでwebpファイルを開くことができません。</font><font style="vertical-align: inherit;">つまり、Webページからwebp画像を保存すると、自分のコンピューターで表示できなくなるとしましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
webpファイルからjpegファイルへの変換は、かなり簡単なプロセスです。</font><font style="vertical-align: inherit;">インターネットでは、このような変換を実行する多くの無料サービスを見つけることができます。</font><font style="vertical-align: inherit;">ただし、これも従来のグラフィック形式での作業ほど便利ではありません。</font><font style="vertical-align: inherit;">サイトからグラフィックファイルをダウンロードするようユーザーに提供している場合、webpに切り替える必要がないと判断する場合があります。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
webpを使用すると、ブログの画像のサイズを約50％縮小できたことを本当に気に入っています。私たちの困難な時期にこれにより彼と一緒に作業するユーザーエクスペリエンスが向上するという事実に加えて、これによりトラフィックの支払いを少し節約できることを願っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、手動で画像ファイルをwebp形式に変換するという考えは、非常に非現実的です。私はすでにjpgとpngファイルをこのフォーマットに自動的に変換する方法の問題を研究しています。理想的には、このプロセスは、サイトの構築中に、開発者が気付かないうちに行われるべきです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webプロジェクトの作成者は、通常、新しい画像フォーマットを使用する機能に特に関心がありません。</font><font style="vertical-align: inherit;">しかし、私はこの問題を理解することは非常に役立つと信じています。</font><font style="vertical-align: inherit;">結局のところ、WebPを使用することは、おそらくWebプロジェクトのサイズを数百キロバイト削減する最も簡単な方法です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebP形式を使用していますか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja494690/index.html">人工知能対コロナウイルス</a></li>
<li><a href="../ja494692/index.html">4D針による痛みのない注射</a></li>
<li><a href="../ja494700/index.html">ロシア中の人々の移動のデータセットに基づく特定の都市での感染のシナリオ</a></li>
<li><a href="../ja494702/index.html">先週のフロントエンドの世界からの新鮮な食材のダイジェストNo. 408（2020年3月23日〜29日）</a></li>
<li><a href="../ja494704/index.html">CMI5、またはSCORM後の生活</a></li>
<li><a href="../ja494712/index.html">本番環境でReactフックを使用するための5つのベストプラクティス</a></li>
<li><a href="../ja494714/index.html">可変フォントがWebプロジェクトのパフォーマンスに与えるプラスの影響について</a></li>
<li><a href="../ja494716/index.html">CSSのautoキーワードに関するすべて</a></li>
<li><a href="../ja494718/index.html">OpenStreetMap No. 504の世界からのニュース（2020年3月10日〜2020年3月3日）</a></li>
<li><a href="../ja494720/index.html">パンダによる私のチートシート</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>