<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎢 👩🏿‍🏫 📃 NPS, convoyeur, calcul automatique et encore ... coroutines 🤵🏿 👩🏾‍🤝‍👨🏽 🔵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Encore une fois sur les coroutines
 Dans mon précédent article, cher Habr, je n'ai abordé que les problèmes de connaissance de la programmation mod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NPS, convoyeur, calcul automatique et encore ... coroutines</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489664/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Encore une fois sur les coroutines</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans mon précédent article, cher Habr, je n'ai abordé que les problèmes de connaissance de la programmation moderne. La discussion qui a suivi n'a fait que confirmer les craintes spontanées qui ont surgi: les fameux «fondements théoriques» sont immédiatement devenus une source de désaccord. Le fait qu'ils (désaccords) n'existent pas ou qu'ils soient de nature différente ne semble pas déranger la majeure partie des "vrais" programmeurs. De plus, ce n'est peut-être pas particulièrement intéressant, car les programmeurs sont principalement stimulés par un seul intérêt - le code, le code et le seul code. Eh bien, presque "comme le médecin l'a prescrit" [1] ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Evoquant le sujet de la corutine dans mon article et mes commentaires, je n'ai pas du tout rêvé de leur place dans la tendance «actuelle». Étonné, cependant, des "pistes d'accompagnement" de mes commentaires avec ou sans. Pour quoi, disent-ils, les programmeurs? Cependant, il me semble que tout est devenu clair après avoir lu l'article sur le C ++ 20 nouvellement approuvé et les perspectives de son développement ultérieur [2]. À ma grande surprise, il s'est avéré que les coroutines sont à l'avant-garde des innovations présentes et futures de mon bien-aimé C ++ (voir aussi la bibliothèque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CppCoro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, dites-moi, est-il possible de prendre au sérieux et / ou calmement un front qui, semble-t-il, s'imagine être n'importe qui? Frappez ce qu'on appelle! :(</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fond de ma connaissance des coroutines (je les appellerai tout de même à l'ancienne) est le suivant. Il fallait paralléliser, mais quelque chose de convenable ne l'était pas. J'ai dû inventer, étudier la littérature disponible. En conséquence, les coroutines ont été rejetées immédiatement et les discussions plus tard. La raison en est que les deux sont des méthodes structurelles de parallélisation des programmes, et non des modèles de calcul. Mais je ne voulais pas ça.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La description de ce à quoi je suis finalement arrivé est donnée dans mes précédents articles sur Habré. Cette conversation est loin d'être terminée, mais pour l'instant, comment se souvient-on des coroutines, puisqu'elles sont déjà devenues le sujet d'une discussion aussi animée? La seule chose est les «points» des processus d'arrêt / de commutation. Contrairement aux threads, ils ont permis de prédire le comportement de processus simulant un fonctionnement parallèle. En théorie, cela a également réduit les pertes de système pour la mise en œuvre du parallélisme. Mais, néanmoins, en somme, tout cela fondamentalement n'a pas changé. Et comme les «points» étaient simplement imités par les états du modèle de programmation d'automate (AP), ma connaissance des coroutines était terminée pour sept.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais je ne pouvais pas supposer que l'incarnation des coroutines, maintenant appelées coroutines, m'atteindrait ainsi. De cela, et le mien, peut-être des «attaques» injustifiées contre eux, pour lesquelles je présente mes excuses les plus sincères aux apologistes de Corutin. Probablement pressé. Néanmoins, les circonstances récemment découvertes n'ont pas affecté mon attitude envers les coroutines. Pour le nouveau code, pour raisonner en leur faveur, je n'ai jamais rien vu de fondamentalement nouveau. Cependant, je tiens à noter que les coroutines sont néanmoins plus proches et plus claires pour moi que les threads, car contient, comme je l'ai dit plus haut, un analogue de l'ensemble des états internes des automates finis (CA).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, arrêtez de vous repentir. </font><font style="vertical-align: inherit;">Revenons à des automates qui couvrent complètement le «thème coroutine». </font><font style="vertical-align: inherit;">Ensuite, je présenterai les capacités de l'AP associées à la modélisation de modèles parallèles qui sont assez bien connus en théorie et en pratique - des modèles d'algorithmes parallèles et en pipeline. </font><font style="vertical-align: inherit;">À mon avis, leur solution automatique semble plus visuelle, naturelle et simple qu'elle ne serait basée sur les mêmes coroutines.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Formes d'algorithmes en parallèle et en pipeline</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous devez calculer l'expression: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y = (((a + b) * (c + d)) + ((e * f) + (q + h))). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aussi, laissez le temps d'exécution de l'opération être défini, défini en unités arbitraires de temps discret - mesures où l'addition prend 1 mesure et la multiplication prend 5 mesures. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la base de la logique de calcul de l'expression, du temps d'exécution des opérations et du nombre de variables intermédiaires, dans un mode de réalisation, la distribution des opérations par niveaux et le nombre de niveaux lui-même peuvent ressembler, par exemple, comme suit: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
t1 = a + b; t2 = c + d; t3 = e * f; t4 = q + h; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tier0: t1; t2; t3; t4; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Niveau 1: t5 = t1 * t2; t6 = t3 + t4; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Niveau 2: t7 = t5 + t6;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graphiquement, cela est illustré à la fig. 1, qui montre deux options pour la distribution des calculs en niveaux et le temps de calcul fixé en ticks. Leur comparaison montre que dans le cas général, une diminution du nombre de niveaux ne signifie pas automatiquement une réduction du temps de calcul. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/z8/3v/mnz83viq523btod82i4vgotp5yi.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 1. Forme parallèle à</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
plusieurs niveaux </font><i><font style="vertical-align: inherit;">de calcul d'une expression,</font></i><font style="vertical-align: inherit;"> mais une autre option peut être envisagée, qui est déjà représentée par une multitude de formes parallèles à plusieurs niveaux qui résolvent un seul problème. En figue. La figure 2 montre une telle solution. Le temps de calcul a diminué. La parallélisation des NPS peut également être intéressante compte tenu de leur exécution sur des systèmes multiprocesseurs. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/xq/kg/abxqkgiggx-qyvkm8jra-bo0xro.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 2. NPS parallèle</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous faites pivoter le graphique JPF, vous pouvez obtenir le schéma de calcul de pipeline. </font><font style="vertical-align: inherit;">Dans ce document, les éléments du convoyeur seront des niveaux, dont le temps de fonctionnement est réduit au niveau le plus lent. </font><font style="vertical-align: inherit;">En figue. </font><font style="vertical-align: inherit;">La figure 3 montre un tel schéma de pipeline de l'expression originale. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1r/um/ah/1rumah082yimeiqe0csndeauofy.jpeg" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">3. Modèle de pipeline</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Étant donné que pour cet exemple le temps de convoyeur discret est de 5 cycles d'horloge, le temps de calcul sera encore pire que la pire version du NPS. </font><font style="vertical-align: inherit;">Avantages du pipeline uniquement dans la continuité des calculs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Un modèle d'automate pour calculer les expressions</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous supprimez les restrictions sur la synchronisation des opérations, le NPS peut être transformé en un circuit qui générera le résultat sous forme de pipeline, mais sans restrictions associées à la séquence et à l'heure des opérations. Un tel schéma de réseau logique avec une démonstration de l'opération d'addition (la mise en œuvre de la multiplication est similaire) sous la forme d'un modèle de réseau de vaisseau spatial est représenté sur la Fig. 4. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/-4/-c/tf-4-cwnottehdr8cownolbacrm.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4. Calculs d'expressions basés sur un réseau de machines à états finis</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez voir que le réseau produira constamment un résultat avec un retard de 7 cycles d'horloge, c'est-à-dire ainsi que le modèle NPS le plus rapide (Fig. 7). Ses inconvénients incluent l'instabilité de sortie associée aux courses de données. Par exemple, un changement simultané de la valeur des variables par paires de variables g, h et e, f entraînera un changement de t4 au cycle d'horloge suivant, après un cycle d'horloge pour un changement de variable t6 et un autre cycle d'horloge pour la variable de sortie t7 (voir Fig.1 et Fig.4) . Dans le même temps, après 5 cycles d'horloge, la variable t3 changera, ce qui entraînera une modification et la sortie des valeurs finalement établies des variables t6, t7. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ju/yk/iz/juykiznycz_4f_o-fl62ce-snee.jpeg" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 5. Modélisation de NPS avec un réseau d'automates</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En figue. </font><font style="vertical-align: inherit;">La figure 5 montre comment l'introduction d'un bloc supplémentaire permet de simuler le calcul de NPS. </font><font style="vertical-align: inherit;">De même, vous pouvez simuler le modèle de calcul en pipeline, ainsi que bloquer le changement de sortie associé aux courses de données.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Conclusions </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il serait étrange de douter que les «images» ci-dessus ne puissent pas être réalisées à l'aide de coroutines. C'est juste, pour être honnête, je ne voudrais pas faire ça. Pour moi, il est beaucoup plus facile de créer des automates qui implémentent les opérations nécessaires, puis, en ne modifiant que leur nombre et les relations entre eux, implémentent le calcul de toute expression. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne me lasserai pas de répéter que je suis attiré par le concept de programmation visuelle implémenté dans le package Stateflow de MATLAB. Ici, vous pouvez également créer les opérations d'automate nécessaires, puis, en les utilisant, comme des blocs standard, «dessiner» un schéma de calcul pour n'importe quelle expression, qui après la compilation se transformera en programme de travail (par exemple, dans le même C ++). Parallèlement, au cours du processus de conception, des outils de visualisation et de débogage seront disponibles, spécifiques à la technologie de programmation automatisée.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certes, la question peut se poser - pourquoi des liens permanents avec un certain environnement inconnu du PCUS, s'il y a Stateflow? Mais nous en parlerons encore séparément ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est une chose ingrate de faire des prédictions, mais néanmoins, sur la base de mon expérience, j'exprimerai une pensée séditieuse: en tant que langages de haut niveau utilisés pour nier la programmation en langage assembleur, donc la programmation visuelle tôt ou tard et non moins d'éviction de la programmation dans des langages de haut niveau. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Littérature</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Programmeurs, étudions les sources des programmes classiques. [Ressource électronique], Mode d'accès: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/post/488808</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratuit. Yaz. russe (date du traitement 22.02.2020). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Approuvé C ++ 20! À quoi s'attendre et quoi préparer pour les développeurs C ++ 23. [Ressource électronique], Mode d'accès:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/company/yandex/blog/488588</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratuit. </font><font style="vertical-align: inherit;">Yaz. </font><font style="vertical-align: inherit;">russe </font><font style="vertical-align: inherit;">(date du traitement 02.20.2020).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489638/index.html">Système de fichiers interplanétaire - Blog IPFS simple utilisant XSLT</a></li>
<li><a href="../fr489640/index.html">Des scientifiques du MIT ont réussi à obtenir de l'électricité de l'air à l'aide de protéines bactériennes</a></li>
<li><a href="../fr489642/index.html">Brevets drôles de l'industrie automobile</a></li>
<li><a href="../fr489650/index.html">Automatisation d'un journaliste. Partie 1: tâches et calendriers</a></li>
<li><a href="../fr489662/index.html">PHP Digest n ° 174 (10-24 février 2020)</a></li>
<li><a href="../fr489666/index.html">Surcharge en C ++. Partie II Surcharge de l'opérateur</a></li>
<li><a href="../fr489668/index.html">Limites du processeur et limitation agressive dans Kubernetes</a></li>
<li><a href="../fr489672/index.html">Nous ressuscitons l'hexapode. Deuxième partie</a></li>
<li><a href="../fr489674/index.html">Angular: une introduction claire à NGRX</a></li>
<li><a href="../fr489676/index.html">Nous faisons un clone du service de livraison de nourriture en utilisant Nuxt.js, GraphQL, Strapi et Stripe. Partie 1/7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>