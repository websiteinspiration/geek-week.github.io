<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè® üì§ üôåüèª How to prepare a site for load growth üêó üë©‚Äçüë©‚Äçüëß‚Äçüë¶ ü§≥üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Only the lazy did not get his expertise from the far shelf and did not predict the "online" life - as forced as the regime of self-isolation. But traf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to prepare a site for load growth</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/495452/"><img src="https://habrastorage.org/webt/59/b1/yu/59b1yu2sysdvr-db4ct_uu7dhtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Only the lazy did not get his expertise from the far shelf and did not predict the "online" life - as forced as the regime of self-isolation. But traffic, indeed, has already begun to grow, and taking into account the ‚Äúholidays‚Äù, resources offering goods delivery, online education services, and especially online entertainment, may not be ready for the flow of visitors in the new reality before the end of April. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Based on our 12 years of experience in technical support of web projects and remote server administration, we have prepared a kind of ‚Äútraining manual‚Äù: what is worth checking and what you need to take care of if you want to be sure that your site will cope with any load. Well, almost anyone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, here are 10 points that are critical to the active life of your web project in the coming days and weeks:</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Monitor your infrastructure</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
First of all, you should know what is going on with your site. </font><font style="vertical-align: inherit;">If you know how to handle Prometheus / Grafana, use them. </font><font style="vertical-align: inherit;">But if there is no experience interacting with them, this is not a problem: you can use any service like datadog - you can install it as quickly as possible. </font><font style="vertical-align: inherit;">Still complicated? </font><font style="vertical-align: inherit;">- Pay attention to Pingdom or Site24x7: these are not full-fledged monitoring services, but they are suitable at least to be sure that your site is accessible and to know when it is close to falling.</font></font><br>
 <br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember: you can only control what you can measure. </font><font style="vertical-align: inherit;">After all, if you don‚Äôt know what is going on inside your system, and especially where it is happening, you won‚Äôt be able to fix it if something breaks there.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many options for what could go wrong when traffic piles up:</font></font><br>
<br>
<ul>
<li>   .</li>
<li>    .</li>
<li>   \.</li>
<li>      \\.</li>
</ul> <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Get ready to scale.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Once you see that you have reached 80% of the resource limit, you need to immediately begin scaling. Because if you wait 100%, the site will fall. And you will need some time to restore the project. Not to mention that it‚Äôs all quite nervous ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
you have to act quickly, because otherwise you will lose visitors and possibly make even more mistakes in the ‚Äúchef, everything is lost, burn‚Äù mode. Therefore, when you reach the 80% mark of the resource limit, scale to decrease to 40%. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repeat if necessary (c) </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Do not forget to monitor HDD performance and channel bandwidth</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is much more difficult to understand what happens when the system is ‚Äúdumb‚Äù due to high disk load or bandwidth limitations. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Monitor the performance of your databases,</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
especially if you use cloud databases. RDS, Cloud SQL, MongoDB Atlas and other services are managed using cloud technologies, but they have their own limits, and they must be monitored in order to scale in time. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) When your database creates a large load on the CPU - check the use of indexes, it really helps</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The introduction of indexing fantastically reduces the load on the processor. Suppose your database CPU is 90% used. You will probably want to scale in half to handle the double load. But if most of your queries are not indexed, then introducing indexing can reduce the CPU load by 10 times. Analysis of the use of indexes is worth the effort! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6) Keep an eye on the accounts for the services of cloud providers</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's easy to forget about it when you have time trouble. Therefore, set alerts on your billing system in order to receive notifications of possible cost overruns. Channel width is what is especially costly. If it‚Äôs not possible to transfer content to CDN or to hosting companies that provide large volumes of traffic cheaply, like like100tb.com or leaseweb, get ready for serious costs. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7) Avoid state in your application</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despite the fact that it is possible to scale the resources of the processor or RAM in the cloud, there are still limits that cannot be crossed. From this point of view, if you want to scale horizontally, adding new instances of the same application, it should be ready for such a development of events. And when you have multiple instances of the same application, user requests will be distributed among multiple servers, and as a result, you will not be able to store data on a local disk. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8) Consider moving to the cloud if the site is on a dedicated hosting</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For in this situation, you can‚Äôt easily scale: adding servers will take a certain amount of time - it will take from a couple of hours to a couple of days to get available new servers. Plus, you usually pay on a monthly basis, not an hourly basis. In general, you obviously do not want to wait hours, or even days, if your site "lies". It is much easier to scale in the cloud. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9) "Tighten" the infrastructure</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
There are several basic things that are disabled by default, and they should be optimized - at the level of the OS, network, application manager and the application itself. And this can significantly reduce resource consumption. Google your technology stack setup and follow the basic guidelines. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10) Get ready to launch the cached version</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despite all your efforts, with a hundredfold increase in traffic, you will "lie down". </font><font style="vertical-align: inherit;">It takes time to scale. </font><font style="vertical-align: inherit;">So get ready to use the static cached version. </font><font style="vertical-align: inherit;">For this, Cloudfront / Cloudflare cache, your CDN cache, nginx cache or any other is useful. </font><font style="vertical-align: inherit;">Just make sure you have the opportunity if you need it.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495440/index.html">The servers in the Netherlands are almost over: new orders may not be possible to fulfill, will the VPS and the Internet end?</a></li>
<li><a href="../en495444/index.html">Arrays in C ++</a></li>
<li><a href="../en495446/index.html">Antigravity is not what you thought</a></li>
<li><a href="../en495448/index.html">Online mitaps for the whole week on back, front, QA, PM, DevOps and a little bit on robots, starting from April 3</a></li>
<li><a href="../en495450/index.html">Debugging heavily loaded Golang applications or how we looked for a problem in Kubernetes that was not there</a></li>
<li><a href="../en495454/index.html">Brief Introduction to BPF and eBPF</a></li>
<li><a href="../en495456/index.html">Review of 14 fresh plugins for Figma that will help increase productivity while we all</a></li>
<li><a href="../en495458/index.html">How to write code when children run around you and ask: ‚ÄúWhat will you work for?‚Äù</a></li>
<li><a href="../en495460/index.html">A gas bubble 22,000 times the size of the Earth exploded on Uranus</a></li>
<li><a href="../en495462/index.html">.NET Core: x86_64 Intrinsics on Virtual Machines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>