<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëù üë©üèΩ‚Äçü§ù‚Äçüë©üèª ü§ò Universal GUI ~ = end to misery üì† üëçüèæ üíü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For me, the ideal GUI is an app that does not require programming, design, maintenance, and is able to work equally with any language and on any platf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Universal GUI ~ = end to misery</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501678/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For me, the ideal GUI is an app that does not require programming, design, maintenance, and is able to work equally with any language and on any platform without any tweaks. </font><font style="vertical-align: inherit;">Is it possible in our lifetime we will try to figure it out.</font></font><br>
<br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is easy to individually learn something from Vue / React, JavaFX, Python PyQt, ... but getting data and interacting with the software zoo in a simple and elegant way without thinking about user-OS / browsers / platforms is an unresolved task for such tools. I don‚Äôt want to get into the new framework (even the old, forgotten), changing the programming language, raking the rake and clogging my head with garbage. I want to program exactly my task, without being distracted by the struggle with all sorts of GUI frameworks. And I found a solution for myself. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As an exchange protocol, we will use Json as the top format in terms of popularity / comprehensibility / readability / support for all programming languages ‚Äã‚Äãto one degree or another.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The server sends Json data, according to which our app GUI should design a picture that satisfies the specs of a beautiful GUI. </font><font style="vertical-align: inherit;">Google with its Material Design is today the standard, so take it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The requirements for a modern GUI include the presence of standard elements, such as buttons, input fields, tables, etc. Let us estimate how to use the minimum set of conventions to tell the GUI that we need certain elements on the screen. </font><font style="vertical-align: inherit;">Here are the main ones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stateless button {'name': 'Push me'}. </font><font style="vertical-align: inherit;">If the element contains only a name, then it is a button.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The input field is {'name': 'Edit me', 'value': ''} because the type value is a string.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The switcher button {'name': 'My state', 'value': false} because the type false is boolean.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Select from the list {'name': 'Switch something', value: 'choice1', options = ['choice1', 'choice2', 'choice3']}</font></font></li>
<li>  {‚Äòname‚Äô:‚ÄôImage, ‚Äòurl'‚Äô: ‚Äô..‚Äô, ‚Äòwidth‚Äô: .., ‚Äòheight‚Äô:‚Ä¶ }</li>
<li>  {‚Äòname‚Äô:‚ÄôMy table‚Äô, 'headers'=[‚ÄòName‚Äô, ‚ÄòSynonym‚Äô], rows = [<br>
 [‚Äòyoung‚Äô, ‚Äòyouthful‚Äô],<br>
 [‚Äòsmall‚Äô, ‚Äò meager‚Äô],<br>
 ...]<br>
}<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For customization, you can set the element type to {type: 'ButtonSwitcher'} if the type automatically selected by JSON does not suit you. </font><font style="vertical-align: inherit;">This is possible when the same JSON can be displayed in more than one way. </font><font style="vertical-align: inherit;">For example, 'Select from a list' can be represented as an input field with a drop-down list, or it can also be a horizontal set of buttons, one of which is active and corresponds to the current value. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With a small number of options it makes sense to automatically use the button option, with a large number (more than 3) - an input-selection field. </font><font style="vertical-align: inherit;">Our GUI itself chooses the best way for rendering, but if you really need it - type: ... to help. </font><font style="vertical-align: inherit;">Normally, the type is not needed and the car designer must cope on his own. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's complete the picture in detail:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> if the name should not be displayed on the screen, it must begin with _;</font></font></li>
<li>   -  ,  ‚Äòicon‚Äô: ‚Äò   Material Design ‚Äô; push -     {‚Äòname‚Äô: ‚Äò_Check‚Äô, ‚Äòicon‚Äô: ‚Äòcheck‚Äô}</li>
<li>     , Viewers,    ,   ‚Äòcolors‚Äô, ‚Äòparams‚Äô,‚Ä¶           //  .   ‚Äî   ,     . </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 For the logical grouping of elements, we introduce the concept of a block that groups logically related elements into one visual block. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{'name': 'Block 1', 'elems': [{'name': '_Check', 'icon': 'check'}, ...]} </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Within the block, all elements must have unique names, because they are id . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normally, blocks are built horizontally if they cannot fit everything on the screen (they started the app GUI on a mobile, for example), the auto designer hides them, but adds icons to the toolbar that allow them to be opened with a tap. This gives you the option of working with a complex GUI even on small screens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The top level of description is Screen. It looks like {'name': 'Screan', blocks: [..], menu: [{'name': 'Screen', 'icon': ..,}, ..], 'toolbar': [JSON set - elements (buttons, fields, whatever)]}</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Add implementation details for the conditional uniGUI that supports our JSON protocol. It is a separate process that communicates with the Websocket data server and provides the display of its data with subsequent reporting of all updates of this data that are important for the server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When connecting to the server, uniGUI expects to receive Screen. Having received it, he designs and draws the resulting info in an optimal way for the current screen for the user, then he waits for a reaction from the user and the server. From the constructed data image, the server receives a stream of JSON messages that fully describe what the user did. They have the form ['Block', 'Elem', 'type of action', 'value'], where 'Block' and 'Elem' are the names of the block and element, value is the value of the event.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The server can either accept the change or roll them back by sending an info window about the discrepancy. It can raise a dialog box, which is described as a block, and has additional. the 'buttons' parameter, which describes the buttons on the dialog. The client instantly displays the current server data and their changes. Only objects changed by the server are sent. To receive events and ensure their processing, we will make a Websocket layer (framework), which will automatically translate messages into calls to handlers that are associated with our data (objects).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All the magic on the server comes down to the fact that our displayed data should be linked to the layer in such a way as to ensure their automatic translation into JSON and calling back notifications from user activity without any coding. Since it depends on the capabilities of a particular language, then for each language the layer can have different options, both architecturally and specifically.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, in one case, the layer has a screenshots folder, each of the modules in which has a description of one screen in Python. At startup, the layer reads the screens, gives the user one with global priority = 0. All data is automatically transmitted using jsonpickle. Complex elements have their own ‚Äúintelligence‚Äù, removing the care of details from the programmer. For example, a table receives a set of rows, in which by default id row may be absent when the number of data in row == the number of elements in headers. In this case, when the user selects a row or edits its contents, the server will send the id to the index in row as id ee. If the number of data in row is one more than in headers, the last element in rows is interpreted as id and it is it that is sent to the server. Such automation greatly simplifies life where you don‚Äôt need any specifics,but if you suddenly need it, it is available in the least labor-intensive way.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The task of providing automatic translation in JSON, following a format that occupies one or two pages, is completely solvable in any language (I hope so). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to discuss the applicability of this approach for complex applications, below are screenshots such as described by uniGUI written in flutter. The choice fell on him for multi-platform and the lack of additional layers such as JS / chrome. In the flutter minus, you can write down disgusting desktop support and low quality of the upper layer code (GUI elements), an unpleasant architecture for point updates and managing elements as data, which, however, is treated. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4u/9h/2z/4u9h2zlhr0bzbvhbugz5obt8y6a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The message flow app GUI -&gt; server looks something like this: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [Glossary, Terms, =, 658] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, Links, @, @Folliculitis] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, Links, @, @Adolescent]</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [toolbar, _Back, =, _Back] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [toolbar, _Forward, =, _Forward] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [toolbar, _Back, =, _Back] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, _Status, =, Virtual] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, _Status , =, Stable] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, Links, @,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inflammation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, _Status, =, Virtual] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, _Status, =, Stable] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [toolbar, _Back, =, _Back] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, Links, @, @Folliculitis] </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Will there be slow down such a GUI when waiting for events from the server. No, because the GUI works in the server notification mode, reacting to all user actions as a normal local GUI. By default, it considers the server silence on user actions as Ok. When changing screens, it is clear that its description should come. There may be a delay compared to the typical app c embedded GUI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total. </font><font style="vertical-align: inherit;">It is possible today, on current tools, to make a GUI that removes 90% of the standard dreary service code and not bother where and how it will work. </font><font style="vertical-align: inherit;">At least for business / science applications. </font><font style="vertical-align: inherit;">This article is a Proof of concept that creating a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conditional App Browser is</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> not only possible, but necessary.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501668/index.html">Providing communications of moving objects and tools to increase its reliability</a></li>
<li><a href="../en501670/index.html">How much is life or $ 2.1 million per injection: a wonderful gene therapy</a></li>
<li><a href="../en501672/index.html">How mods for Unity games are developed. Part 2: writing your mod</a></li>
<li><a href="../en501674/index.html">Angular: make the code readable for the back-end. Bonus: swapping APIs and query caching</a></li>
<li><a href="../en501676/index.html">Compare c # operators?: Vs if-else vs switch</a></li>
<li><a href="../en501680/index.html">Some tips on how to speed up the assembly of Docker images. For example, up to 30 seconds</a></li>
<li><a href="../en501684/index.html">Cloister -> easy OTP cluster management</a></li>
<li><a href="../en501688/index.html">Additional SSR performance with Nuxt fullstack server (Part 2)</a></li>
<li><a href="../en501690/index.html">Who is a DevOps engineer, what does he do, how much he earns and how to become one</a></li>
<li><a href="../en501696/index.html">Dashboard Postgresql Overview for postgres_exporter (Prometheus)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>