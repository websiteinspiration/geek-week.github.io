<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆙 👉 👩🏾‍🤝‍👨🏿 Como escrever autotestes de maneira eficaz - testes subcutâneos 🤼 🧖🏽 📯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vamos imaginar uma situação hipotética (na qual mergulhamos regularmente). Você foi atribuído a um projeto para "cortar" a automação. Você recebe um g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como escrever autotestes de maneira eficaz - testes subcutâneos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502154/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos imaginar uma situação </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hipotética</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (na qual mergulhamos regularmente). </font><font style="vertical-align: inherit;">Você foi atribuído a um projeto para "cortar" a automação. </font><font style="vertical-align: inherit;">Você recebe um grande plano de teste com um grande número (milhares deles!) De testes "manuais", e eles dizem que você precisa fazer alguma coisa, e logo ali. </font><font style="vertical-align: inherit;">E também, de forma rápida e estável. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É </font><font style="vertical-align: inherit;">tarde demais para </font><font style="vertical-align: inherit;">escrever testes de unidade, ou mesmo pensar em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o código do produto já foi escrito. </font><font style="vertical-align: inherit;">Sua palavra, camarada autotester! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c6/l-/p9/c6l-p9jm_r8j9ix3dpkptsalx3i.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, existe um pequeno truque que permitirá aumentar a cobertura e tornar os testes estáveis ​​e rápidos - Testes subcutâneos (“testes subcutâneos”), mas primeiro as primeiras coisas.</font></font><br>
<a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A essência do problema</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro reflexo condicional do automatizador é fazer o Selenium (bem, lá, Selenide ou algum outro prodígio para testes de interface do usuário). </font><font style="vertical-align: inherit;">Esse é um padrão do setor, mas há muitos motivos pelos quais ele não decola:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os testes de interface do usuário são lentos. </font><font style="vertical-align: inherit;">Não há como escapar disso. </font><font style="vertical-align: inherit;">Eles podem ser executados em paralelo, arquivados e executados um pouco mais rápido, mas permanecerão lentos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os testes de interface do usuário são instáveis. </font><font style="vertical-align: inherit;">Em parte porque são lentos. </font><font style="vertical-align: inherit;">E também porque o navegador da Web e a interface do usuário não foram criados para serem controlados por um computador (essa tendência está mudando atualmente, mas não o fato de que isso é bom).</font></font></li>
<li>UI- —        .    <i> </i>. (   , , ,   «» -      ,        ).</li>
<li> , , , UI-   . <b>  . </b>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">ID  XPath </a>.       ,   «»  -       -  .   ,      ,      —  - ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alguém dirá que algumas funcionalidades simplesmente não podem ser testadas de outra forma. </font><font style="vertical-align: inherit;">Eu direi que, se houver funcionalidade que possa ser testada apenas por testes de interface do usuário (com exceção da própria lógica da interface do usuário), isso pode ser um bom sinal de problemas de arquitetura no produto.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A única vantagem real dos testes de interface do usuário é que eles permitem que você “faça” verificações mais ou menos úteis sem a necessidade de mergulhar e estudar o código do próprio produto. </font><font style="vertical-align: inherit;">O que dificilmente é uma vantagem a longo prazo. </font><font style="vertical-align: inherit;">Uma explicação mais detalhada de por que isso pode ser ouvido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nesta apresentação</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solução alternativa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como um caso muito simples, vamos considerar um aplicativo que consiste em um formulário no qual você pode inserir um nome de usuário válido. </font><font style="vertical-align: inherit;">Se você digitar um nome de usuário que corresponda às regras - o usuário será criado no sistema e registrado no banco de dados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ef/sx/qs/efsxqs-1l5hrlvozwlt78knzps8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O código fonte do aplicativo pode ser encontrado aqui: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/senpay/login-form</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Você foi avisado - no aplicativo existem muitos erros e não existem ferramentas e estruturas da moda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você tentar "lançar" uma folha de verificação para este aplicativo, poderá obter algo como:</font></font><br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Número</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passos</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados esperados</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Digite um nome de usuário válido </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Clique no botão "Login"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Um novo usuário é criado.</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Digite um nome de usuário vazio </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Clique no botão "Login"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. A mensagem de erro é dada.</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece simples? Simplesmente! Posso escrever testes de interface do usuário? Pode. Um exemplo dos testes escritos (junto com uma estrutura completa de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">três níveis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) pode ser encontrado em </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoginFormTest.java</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se você for para o </font><font style="vertical-align: inherit;">rótulo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uitests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git checkout uitests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginFormTest</span> </span>{<font></font>
<font></font>
    SelenideMainPage sut = SelenideMainPage.INSTANCE;<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APPLICATION_URL = <span class="hljs-string">"http://localhost:4567/index"</span>;<font></font>
<font></font>
    <span class="hljs-meta">@BeforeClass</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpClass</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> String[] args = {};<font></font>
        Main.main(args);<font></font>
        Configuration.browser = <span class="hljs-string">"firefox"</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{<font></font>
        open(APPLICATION_URL);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@After</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
        close();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldBeAbleToAddNewUser</span><span class="hljs-params">()</span> </span>{<font></font>
        sut.setUserName(<span class="hljs-string">"MyCoolNewUser"</span>);<font></font>
        sut.clickSubmit();<font></font>
        Assert.assertEquals(<span class="hljs-string">"Status: user MyCoolNewUser was created"</span>, sut.getStatus());<font></font>
        Assert.assertTrue(sut.getUsers().contains(<span class="hljs-string">"Name: MyCoolNewUser"</span>));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldNotBeAbleToAddEmptyUseName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> numberOfUsersBeforeTheTest = sut.getUsers().size();<font></font>
        sut.clickSubmit();<font></font>
        Assert.assertEquals(<span class="hljs-string">"Status: Login cannot be empty"</span>, sut.getStatus());<font></font>
        Assert.assertEquals(numberOfUsersBeforeTheTest, sut.getUsers().size());<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algumas métricas para este código:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tempo de execução: ~ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12 segundos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (12 segundos 956 milissegundos na última vez em que executei esses testes) </font></font><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobertura de código</font></font></u><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Classe: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100%</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Método: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">93,8% (30/32)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Linha: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">97,4% (75/77 )</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora, vamos supor que os Autotestes funcionais possam ser gravados no nível "imediatamente abaixo" da interface do usuário. Essa técnica é chamada de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">testes subcutâneos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ("testes subcutâneos" - testes que testam imediatamente abaixo do nível da lógica de exibição) e foi proposta por Martin Fowler há muito tempo [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando as pessoas pensam em autotestes "sem interface do usuário", geralmente pensam imediatamente no REST / SOAP ou em sua API. </font><font style="vertical-align: inherit;">Mas a API (Application Programming Interface) é um conceito muito mais amplo, não afetando necessariamente o HTTP e outros protocolos pesados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se escolhermos um código de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , podemos encontrar algo interessante:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IUserRepository repository = <span class="hljs-keyword">new</span> InMemoryUserRepository();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UserService service = <span class="hljs-keyword">new</span> UserService(); {<font></font>
        service.setUserRepository(repository);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">getUsersList</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> getUsersList(<span class="hljs-string">"N/A"</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">addUser</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String username)</span> </span>{
        <span class="hljs-keyword">final</span> String status = service.addUser(username);
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; model = getUsersList(status);
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title">getUsersList</span><span class="hljs-params">(String status)</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; model = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<font></font>
        model.put(<span class="hljs-string">"status"</span>, status);<font></font>
        model.put(<span class="hljs-string">"users"</span>, service.getUserInfoList());
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando clicamos em uma interface do usuário, um desses métodos é chamado, ou um novo objeto Usuário é adicionado, ou uma lista de objetos Usuário já criados é retornada. </font><font style="vertical-align: inherit;">E se usarmos esses métodos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diretamente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">Afinal, esta é uma API real! </font><font style="vertical-align: inherit;">E o mais importante, o REST e outras APIs também funcionam com o mesmo princípio - eles chamam um determinado método de "nível de controlador". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando esses métodos diretamente, podemos escrever um teste mais simples e melhor:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApplicationTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> UserApplication sut;<font></font>
<font></font>
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{<font></font>
       sut = <span class="hljs-keyword">new</span> UserApplication();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldBeAbleToAddNewUser</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; myCoolNewUser = sut.addUser(<span class="hljs-string">"MyCoolNewUser"</span>);<font></font>
        Assert.assertEquals(<span class="hljs-string">"user MyCoolNewUser was created"</span>, myCoolNewUser.get(<span class="hljs-string">"status"</span>));<font></font>
        Assert.assertTrue(((List) myCoolNewUser.get(<span class="hljs-string">"users"</span>)).contains(<span class="hljs-string">"Name: MyCoolNewUser"</span>));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldNotBeAbleToAddEmptyUseName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; usersBeforeTest = sut.getUsersList();
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> numberOfUsersBeforeTheTest = ((List) usersBeforeTest.get(<span class="hljs-string">"users"</span>)).size();
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; myCoolNewUser = sut.addUser(<span class="hljs-string">""</span>);<font></font>
        Assert.assertEquals(<span class="hljs-string">"Login cannot be empty"</span>, myCoolNewUser.get(<span class="hljs-string">"status"</span>));<font></font>
        Assert.assertEquals(numberOfUsersBeforeTheTest, ((List) myCoolNewUser.get(<span class="hljs-string">"users"</span>)).size());<font></font>
    }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este código está disponível sob os </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subtestes de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etiquetas </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">git checkout subctests</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar coletar métricas? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tempo de execução: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ 21 milissegundos </font></font></b><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobertura de código</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classe: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">77,8%</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Método: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78,1 (30/32)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Linha: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78,7 (75/77)</font></font></b><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perdemos um pouco de cobertura, mas a velocidade dos testes aumentou 600 vezes !!!</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quão importante / significante é a perda de cobertura neste caso? </font><font style="vertical-align: inherit;">Depende da situação. </font><font style="vertical-align: inherit;">Perdemos um pouco de código de cola, que pode ser (ou não) importante (eu recomendo determinar qual código é perdido como exercício). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa perda de cobertura justifica a introdução de testes pesados ​​no nível da interface do usuário? </font><font style="vertical-align: inherit;">Também depende da situação. </font><font style="vertical-align: inherit;">Podemos, por exemplo:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicione um teste de interface do usuário para verificar o código de cola ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se não esperamos mudanças frequentes no código de cola - deixe-o sem autoteste ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se tivermos algum tipo de teste "manual", há uma grande chance de que os problemas com o código de cola sejam notados pelo testador, ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie outra coisa (a mesma implantação do Canary)</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventualmente</font></font></h3><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os autotestes funcionais não precisam ser gravados no nível da interface do usuário ou da API REST / SOAP. </font><font style="vertical-align: inherit;">O uso de “testes subcutâneos” em muitas situações testará a mesma funcionalidade com maior velocidade e estabilidade.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma das desvantagens da abordagem é uma certa perda de cobertura.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma maneira de evitar a perda de cobertura é o " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo de testes de recursos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas mesmo com a perda de cobertura, o aumento de velocidade e estabilidade é significativo.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma versão em inglês do artigo está disponível </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt502134/index.html">O suficiente para ter medo de decisões subjetivamente bonitas no código - você não é um robô</a></li>
<li><a href="../pt502136/index.html">Compactação de dados no Apache Ignite. Experiência Sberbank</a></li>
<li><a href="../pt502146/index.html">Mesa redonda on-line "Eu quero jogarev"</a></li>
<li><a href="../pt502148/index.html">Usando componentes de terceiros no armazenamento usando o Qsan como exemplo</a></li>
<li><a href="../pt502150/index.html">Escalando uma rede de alta carga com a Nutanix: recursos e desafios com um caso pessoal</a></li>
<li><a href="../pt502156/index.html">Caso Rambler v. NGINX: Riscos criminais da mesa redonda de digitalização 16 de maio</a></li>
<li><a href="../pt502158/index.html">Como organizar os testes para acelerar e estabilizar os lançamentos de produtos. Parte 2</a></li>
<li><a href="../pt502160/index.html">O desenvolvimento de aplicativos móveis personalizados é barato: realidade ou ilusão</a></li>
<li><a href="../pt502166/index.html">Fantasmas do Windows 3.1</a></li>
<li><a href="../pt502176/index.html">Ir: Desserialização JSON com digitação incorreta ou como solucionar erros de desenvolvedor de API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>