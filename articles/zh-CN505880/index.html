<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš§ ğŸš¡ ğŸ‘©ğŸ»â€ğŸš’ å¦‚ä½•åœ¨Tarantoolä¸­ç¼–å†™ç´¢å¼• ğŸ‘©ğŸ¼â€ğŸ’» ğŸ”« ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tarantoolæ˜¯åº”ç”¨ç¨‹åºæœåŠ¡å™¨å’Œæ•°æ®åº“ã€‚æœåŠ¡å™¨éƒ¨åˆ†æ˜¯ç”¨Cç¼–å†™çš„ï¼Œå¹¶ä¸”ä¸ºç”¨æˆ·æä¾›äº†ä½¿ç”¨å®ƒçš„Luaæ¥å£ã€‚å¦å¤–ï¼ŒTarantoolæ˜¯ä¸€ä¸ªå¼€æºäº§å“ï¼Œè¿™æ„å‘³ç€æºä»£ç æ˜¯å…¬å…±é¢†åŸŸçš„ï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°å¼€å‘å’Œåˆ†å‘åŸºäºTarantoolçš„è½¯ä»¶ã€‚
 
 ä½†æ˜¯ä»Šå¤©çš„æ•…äº‹å°†æœ‰æ‰€ä¸åŒï¼šå…³äºå®éªŒï¼Œå…³äºå°è¯•ç¼–å†™è‡ªå·±çš„æœç´¢æ•°æ®ç»“æ„ï¼ˆ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•åœ¨Tarantoolä¸­ç¼–å†™ç´¢å¼•</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/505880/"><img src="https://habrastorage.org/webt/_w/oc/me/_wocmecfrb1lnc7gdoodtf3j3y4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantoolæ˜¯åº”ç”¨ç¨‹åºæœåŠ¡å™¨å’Œæ•°æ®åº“ã€‚</font><font style="vertical-align: inherit;">æœåŠ¡å™¨éƒ¨åˆ†æ˜¯ç”¨Cç¼–å†™çš„ï¼Œå¹¶ä¸”ä¸ºç”¨æˆ·æä¾›äº†ä½¿ç”¨å®ƒçš„Luaæ¥å£ã€‚</font><font style="vertical-align: inherit;">å¦å¤–ï¼ŒTarantoolæ˜¯ä¸€ä¸ªå¼€æºäº§å“ï¼Œè¿™æ„å‘³ç€æºä»£ç æ˜¯å…¬å…±é¢†åŸŸçš„ï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°å¼€å‘å’Œåˆ†å‘åŸºäºTarantoolçš„è½¯ä»¶ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ä»Šå¤©çš„æ•…äº‹å°†æœ‰æ‰€ä¸åŒï¼šå…³äºå®éªŒï¼Œå…³äºå°è¯•ç¼–å†™è‡ªå·±çš„æœç´¢æ•°æ®ç»“æ„ï¼ˆZé˜¶æ›²çº¿ï¼‰å¹¶å°†å…¶é›†æˆåˆ°ç°æœ‰çš„Tarantoolç”Ÿæ€ç³»ç»Ÿä¸­ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æ˜¯Tarantoolè§£å†³æ–¹æ¡ˆå›¢é˜Ÿçš„å¼€å‘äººå‘˜ï¼Œæˆ‘æ²¡æœ‰ç›´æ¥å‚ä¸Tarantoolçš„å¼€å‘ï¼Œä½†æ˜¯æ˜¯æ´»è·ƒç”¨æˆ·ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œè¯¥å®éªŒæ˜¯ä¸ºäº†äº†è§£Tarantoolå¦‚ä½•åœ¨è¾ƒä½çš„æ°´å¹³ä¸Šå·¥ä½œã€‚</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»€ä¹ˆæ˜¯Tarantoolï¼Œå®ƒåœ¨å“ªé‡Œå­˜å‚¨æ•°æ®ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»€ä¹ˆæ˜¯Tarantoolï¼Ÿåœ¨æ•°æ®åº“ä¸–ç•Œä¸­ï¼Œå®ƒè¢«å®šä½ä¸ºå†…å­˜æŠ€æœ¯ã€‚ memtxå¼•æ“å…è®¸æ‚¨åœ¨æ»¡è¶³ACIDçš„æ‰€æœ‰åŸç†çš„åŒæ—¶å°†æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨RAMä¸­ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨Tarâ€‹â€‹antoolä¸­ï¼Œå…³ç³»è¡¨çš„ä¸€ä¸ªç±»ä¼¼ç‰©æ˜¯ç©ºé—´ï¼Œè¯¥ç©ºé—´ç”¨äºå­˜å‚¨å…ƒç»„ï¼ˆtupleï¼‰ã€‚ä¸å…³ç³»è¡¨ä¸åŒï¼Œç©ºé—´ä¸­çš„å…ƒç»„é€šå¸¸å¯ä»¥å…·æœ‰ä»»æ„é•¿åº¦ã€‚è¦å­˜å‚¨å®ƒä»¬ï¼Œå¿…é¡»åˆ›å»ºæœç´¢æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”æœç´¢é”®æ˜¯ä¸»é”®ï¼Œå§‹ç»ˆæ˜¯å”¯ä¸€çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨è¿˜å¯ä»¥æ„å»ºå…¶ä»–ç»“æ„-äºŒçº§ç´¢å¼•ä»…å­˜å‚¨æŒ‡å‘å…ƒç»„çš„æŒ‡é’ˆã€‚</font><font style="vertical-align: inherit;">æ¬¡è¦ç´¢å¼•å¯èƒ½ä¸æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯ï¼Œè¿™åªæ˜¯ç”¨æˆ·å¯è§çš„å¤–éƒ¨è¡Œä¸ºã€‚</font><font style="vertical-align: inherit;">ä¸»ç´¢å¼•å­—æ®µéšå¼æ·»åŠ åˆ°ä»»ä½•éå”¯ä¸€ç´¢å¼•ã€‚</font><font style="vertical-align: inherit;">è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨ç´¢å¼•å†…å¯¹å…ƒç»„è¿›è¡Œæ’åºçš„ç¨³å®šæ€§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantoolæ”¯æŒä¸åŒç±»å‹çš„ç´¢å¼•ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¦–å…ˆï¼Œåœ¨</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bæ ‘ä¸­</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå¦‚æœç»å¯¹ç²¾ç¡®ï¼Œåˆ™åœ¨B + *-æ ‘ä¸­ï¼‰ã€‚</font><font style="vertical-align: inherit;">å…³äºBæ ‘[ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B-Tree</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] </font><font style="vertical-align: inherit;">çš„ç»“æ„å·²æœ‰å¾ˆå¤šæ–‡çŒ®æŠ¥é“</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘åªæ³¨æ„åˆ°æ•°æ®ä»¥æ’åºå½¢å¼å­˜å‚¨ï¼Œæ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥æŒ‰ç´¢å¼•é”®çš„å‰ç¼€è¿›è¡Œæœç´¢ã€‚</font></font></li>
<li>   <strong>hash-</strong>. ,      .    .    B-,      ,  .    .</li>
<li><strong>R-Tree</strong>.      .    Â«Â» , ,  .       â€” .     ,       .        .   ,      ,    .</li>
<li><strong>Bitset</strong>. ,     .   ,            ,   .</li>
</ul><br>
<h3> Z-,   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¼–å†™ç´¢å¼•çš„æƒ³æ³•ä»ä½•è€Œæ¥ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“æˆ‘é‡åˆ°äºšé©¬é€Šæ–‡ç« [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ï¼Œ2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]æ—¶ï¼Œè°ˆåˆ°äº†Zé˜¶æ›²çº¿æˆ–Mortonæ›²çº¿ç­‰ç»“æ„ã€‚è¿™æ˜¯åœ¨å¹³é¢ç»“æ„ï¼ˆZé˜¶æ›²çº¿ï¼‰ä¸­æ”¾ç½®â€œå¤šç»´â€æ•°æ®çš„æ–¹æ³•ï¼Œç„¶åå°†å…¶æ”¾å…¥Bæ ‘ä¸­ã€‚è¿™ç§æ–¹æ³•åº”æœ‰åŠ©äºé¿å…è¿ç»­æ•°æ®æ‰«æã€‚é€šå¸¸ï¼Œæœ‰å…³å…·æœ‰ç‰¹å®šç‰¹å¾é›†çš„ä»»ä½•å¯¹è±¡çš„ä¿¡æ¯éƒ½å¯ä»¥è§†ä¸ºå¤šç»´æ•°æ®ã€‚ä¾‹å¦‚èº«é«˜ï¼Œä½“é‡ï¼Œè„šé•¿ç­‰ã€‚äººã€‚å¤§å¤šæ•°æ•°æ®åº“ä¸ºæ­¤ç›®çš„ä½¿ç”¨R-Treeã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰å…³Zé˜¶æ›²çº¿çš„ç»“æ„çš„ä¸€äº›çŸ¥è¯†ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/363/a10/2c9/363a102c99adb088e19052945e6298fb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zé˜¶æ›²çº¿ï¼ˆä¹Ÿç§°ä¸ºè«é¡¿æ›²çº¿ï¼‰æ˜¯é€šè¿‡åœ¨ç©ºé—´ä¸­äº¤ç»‡ç‚¹çš„åæ ‡ä½è€Œè·å¾—çš„ã€‚</font><font style="vertical-align: inherit;">è¿™æ ·è·å¾—çš„Zåœ°å€å…·æœ‰å±€éƒ¨æ€§ã€‚</font><font style="vertical-align: inherit;">åœ¨å¹³é¢ç©ºé—´ä¸Šæ˜¾ç¤ºæ—¶ï¼Œå¤šç»´ç©ºé—´ä¸­ä½äºé™„è¿‘çš„ç‚¹ä»å°†ä½äºé™„è¿‘ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸç†ä¸Šç±»ä¼¼çš„æ··åˆå¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6eb/04c/f2b/6eb04cf2b6ac3f0b26613a774c8f479d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ€ä¹ˆè¿è¡Œçš„ï¼Ÿ</font><font style="vertical-align: inherit;">æˆ‘ä»¬å€ŸåŠ©äºå¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªç‚¹ï¼ˆæ˜¾ç¤ºåœ¨ç›´çº¿ä¸Šçš„ä¸¤ä¸ªç‚¹ï¼‰æ¥é™åˆ¶ç©ºé—´ä¸­çš„æŸä¸ªåŒºåŸŸï¼ˆä¸€ä¸ªè¶…ç«‹æ–¹ä½“ï¼ˆäºŒç»´ç©ºé—´ä¸­å°†æœ‰ä¸€ä¸ªçŸ©å½¢ï¼‰ï¼‰ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªä¸æ„‰å¿«çš„å‰¯ä½œç”¨ï¼šæœ‰äº›è¦ç‚¹è¶…å‡ºäº†è¾¹ç•Œæ¡†ï¼š</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/991/fd9/889/991fd9889fa6f3b4b30fd7adecfcd436.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸èƒ½ä»…ä»…æ²¿ç€è¿™æ¡æ›²çº¿è¿›è¡Œè¿­ä»£ã€‚ä½†æ˜¯ï¼Œæœ‰äº†ç‰¹æ®Šçš„ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡ºå›½æ—…è¡Œæ—¶è·³ä¸€ä¸‹ï¼Œå›åˆ°æœç´¢åŒºåŸŸã€‚ä¸€æ—¦æˆ‘ä»¬è¶Šè¿‡æ›²çº¿çš„æé™ç‚¹ï¼ˆæˆ‘ä»¬ç§°å…¶ä¸ºupper_boundï¼‰ï¼Œæœç´¢å°±ç»“æŸäº†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ä½¿ç”¨Bæ ‘æ—¶ï¼Œæˆ‘ä»¬å°†æœ‰ä¸€ç»„é—´éš”ï¼Œå¹¶ä¸”æ­¤æŸ¥è¯¢å°†å¯¼è‡´å¯¹Bæ ‘çš„é¡ºåºæ‰«æï¼Œè¿™å°†èŠ±è´¹å¤§é‡æ—¶é—´å¤„ç†å¤§å‹æ•°æ®é›†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…¶ä»–å‡ºç‰ˆç‰©å¯¹æ­¤æ›²çº¿å¼•èµ·äº†æˆ‘çš„å…´è¶£ã€‚ä¾‹å¦‚ï¼Œå¦‚ä½•å°†å…¶é›†æˆåˆ°</font><font style="vertical-align: inherit;">ä¸“æœ‰æ•°æ®åº“</font><font style="vertical-align: inherit;">TransBase [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]ä¸­ã€‚è€Œä¸”ï¼Œä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°æ­¤ç»“æ„çš„ä»»ä½•å¼€æºå®ç°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åº•å±‚çš„Bæ ‘æ›²çº¿æ¯”Ræ ‘æœ‰å‡ ä¸ªä¼˜ç‚¹ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œæ›´å¥½çš„å ç”¨ç‡å’Œç´§å‡‘æ€§ã€‚</font><font style="vertical-align: inherit;">ç¼ºç‚¹ï¼šå¤§å¤šæ•°ä½¿ç”¨çš„ç®—æ³•å—å¤„ç†å™¨é™åˆ¶ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘å†³å®šä½¿ç”¨Tarantoolï¼šæˆ‘å¯¹è¯»å–/æ’å…¥é€Ÿåº¦ä»¥åŠå†…å­˜æ¶ˆè€—æ„Ÿå…´è¶£ã€‚</font><font style="vertical-align: inherit;">ä¸ç”¨è¯´ï¼Œåœ¨HabrÃ©ä¸Šå·²ç»æå‡ºäº†ç±»ä¼¼çš„è¯é¢˜ï¼Œä½†æ˜¯å¯¹äºå°å°ºå¯¸ï¼ˆ2-3ï¼‰ä»¥åŠä¸PostgreSQLç£ç›˜æ•°æ®åº“[ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZcurvePostgres</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]æœ‰å…³ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åµŒå…¥Tarantooléœ€è¦ä»€ä¹ˆï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æ‰¾åˆ°äº†é’ˆå¯¹2-3ç»´çš„æ­¤ç»“æ„çš„ç®€å•å®ç°ï¼Œä½†æ˜¯æˆ‘æƒ³å°†æ€§èƒ½ä¸ç°æœ‰çš„R-Treeç´¢å¼•è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤æˆ‘ä¸æƒ³å°†è‡ªå·±å±€é™äºå°å°ºå¯¸ã€‚æˆ‘é€‰æ‹©äº†ä¸R-Treeç›¸åŒçš„ç»´åº¦-20ã€‚ä¸ºæ­¤ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªæ”¯æŒæŸäº›åŸå§‹æ“ä½œçš„ä½å›¾ï¼šæå–/ä¿®æ”¹ä½ï¼Œç§»ä½ï¼Œæˆ–/ä¸é€»è¾‘æ“ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºåŸå‹ï¼Œæˆ‘é‡‡ç”¨äº†å‘ç°çš„å¼€æºå®ç°ï¼Œä½†æ˜¯å¾ˆå¿«å¾—å‡ºç»“è®ºï¼Œæˆ‘ä¸éœ€è¦é€šç”¨ä½å›¾ï¼šå¯†é’¥é•¿åº¦å§‹ç»ˆä¸º64çš„å€æ•°ï¼Œå› æ­¤å¯ä»¥å¤§å¤§ç®€åŒ–æŸäº›æ“ä½œã€‚æˆ‘æ ¹æ®è‡ªå·±çš„æƒ…å†µç¼–å†™äº†è‡ªå·±çš„å®ç°ã€‚å¦å¤–ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨ç³»ç»Ÿå‡½æ•°æ¥åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯å¼€å§‹ä½¿ç”¨åœ¨Tarantool [</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç´¢å¼•çš„æ ¸å¿ƒå¯èƒ½æ˜¯ä¸€ç»„ç”¨äºå¤„ç†Zæ›²çº¿çš„ç®—æ³•ã€‚</font><font style="vertical-align: inherit;">å³ï¼Œè®¡ç®—Zåœ°å€ï¼ˆä½¿ç”¨ç‰¹æ®Šçš„æŸ¥æ‰¾è¡¨ï¼‰ï¼Œæ£€æŸ¥Zåœ°å€æ˜¯å¦å±äºæœç´¢åŒºåŸŸï¼Œå¹¶ä»æŒ‡å®šç‚¹å¼€å§‹æ£€æµ‹æœç´¢åŒºåŸŸä¸­çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨åœ¨ç½‘ä¸Šæœç´¢å¾—å¾ˆå¥½ï¼Œé‚£ä¹ˆæ‚¨ä¼šæ‰¾åˆ°æè¿°è¿™äº›ç®—æ³•çš„ç§‘å­¦å‡ºç‰ˆç‰©ï¼Œå› æ­¤æˆ‘è¦åšçš„å°±æ˜¯å®ç°å®ƒä»¬ï¼Œå¯¹å…¶è¿›è¡Œè°ƒè¯•ï¼Œå¹¶åœ¨å¯èƒ½çš„æƒ…å†µä¸‹å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚</font><font style="vertical-align: inherit;">åº”å½“å°†Zåœ°å€å­˜å‚¨åœ¨ç”¨äºTREEç´¢å¼•çš„å·²å®ç°Bæ ‘ä¸­ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°æ®å¤„ç†å¦‚ä½•ç»„ç»‡ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ€ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œå…ƒç»„å°±ä¼šå‡ºç°ã€‚è¿™æ˜¯æ¶ˆæ¯åŒ…æ ¼å¼çš„æ•°æ®æ•°ç»„ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦éš”ç¦»ç´¢å¼•å­—æ®µï¼Œæ··åˆå®ƒä»¬çš„ä½ï¼Œç„¶åå°†åœ°å€ä¸æŒ‡å‘Bæ ‘å†…å…ƒç»„çš„æŒ‡é’ˆä¸€èµ·æ’å…¥å³å¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä½¿ç”¨æ— ç¬¦å·ç±»å‹ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„äº‹æƒ…å°†æ˜¯å¦‚æ­¤ç®€å•ï¼Œæ­¤æ—¶æ•°å­—çš„æ’åºä½è¡¨ç¤ºå½¢å¼å°†ä¸è‡ªç„¶è¡¨ç¤ºå½¢å¼ä¸­çš„æ’åºåçš„æ•°å­—ç›¸å¯¹åº”ã€‚æœ‰ç¬¦å·æ•´æ•°æœ‰è‡ªå·±çš„è¡¨ç¤ºè§„åˆ™ï¼Œæµ®ç‚¹æ•°ä¹Ÿæœ‰è‡ªå·±çš„è¡¨ç¤ºè§„åˆ™ã€‚è¿™å¿…é¡»å¯¼è‡´ä¸€ä¸ªå…±åŒçš„åˆ†æ¯ã€‚ç”±äºæˆ‘ä»¬å°†Zåœ°å€ä¸æ•°æ®æœ¬èº«åˆ†å¼€å­˜å‚¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹é”®è¿›è¡Œä»»ä½•è½¬æ¢ï¼Œä¸»è¦æ˜¯ä¿æŒæ’åºé¡ºåºã€‚è¿™å¯ä»¥ä½¿ç”¨ç®€å•çš„æŒ‰ä½æ“ä½œæ¥å®Œæˆã€‚ä¾‹å¦‚ï¼Œå¯¹äºæœ‰ç¬¦å·æ•´æ•°ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°å°†é«˜å­—èŠ‚åè½¬ã€‚å¯¹äºå…¶ä»–ç±»å‹ï¼Œæœ‰ç›¸ä¼¼çš„è½¬æ¢ï¼Œå°½ç®¡ç¨å¾®å¤æ‚ä¸€äº›ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æœ‰æ•°å­—ç±»å‹éƒ½å¯ä»¥å®¹çº³8ä¸ªå­—èŠ‚ï¼Œå› æ­¤é”®çš„å¤§å°å°†ä¸ºN * 8ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­Næ˜¯æˆ‘ä»¬ç©ºé—´çš„å°ºå¯¸ã€‚å­—ç¬¦ä¸²æ€ä¹ˆåŠï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨å­—ç¬¦ä¸²æ—¶ï¼Œä¸€ç§ç›¸å½“å¸¸è§çš„æƒ…å†µæ˜¯å‰ç¼€æœç´¢ã€‚è€Œä¸”å¾ˆæœ‰å¯èƒ½è·å¾—æ”¯æŒã€‚å­—ç¬¦ä¸²çš„å‰8ä¸ªå­—èŠ‚å¾ˆå¯èƒ½ç”¨ä½œé”®ã€‚å¦‚æœå­—ç¬¦ä¸²è¾ƒçŸ­ï¼Œåˆ™å¯ä»¥ç”¨é›¶å¡«å……ã€‚å­—ç¬¦ä¸²æ”¯æŒå¯¹æˆ‘ä»¬çš„ç´¢å¼•æ–½åŠ äº†åŸºæœ¬é™åˆ¶ï¼šæˆ‘ä»¬å¤±å»äº†å”¯ä¸€æ€§ã€‚å³ä½¿ç¬¬ä¹ä¸ªå­—èŠ‚ä¸­çš„è¡Œä¸åŒï¼Œä»ç³»ç»Ÿçš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä»¬ä»ç„¶æ˜¯ç›¸åŒçš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç´¢å¼•APIç”±ä¸€ç»„ç‰¹å®šçš„æ–¹æ³•ç»„æˆã€‚æˆ‘ä»¬ä¸ä¼šå•ç‹¬è€ƒè™‘æ¯ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬åªä¼šä»‹ç»æœ€åŸºæœ¬çš„å¯¹è±¡ï¼Œå³æœç´¢å’Œæ’å…¥æ“ä½œã€‚</font></font><br>
<br>
<code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-é€šè¿‡å…¨é”®æœç´¢é¡¹ç›®ã€‚ä»…é€‚ç”¨äºå”¯ä¸€ç´¢å¼•ã€‚æˆ‘ä»¬çš„ç´¢å¼•ä¸èƒ½å”¯ä¸€ï¼Œå› æ­¤è¯¥å‡½æ•°å°†è¢«è¿”å›é”™è¯¯â€œä¸æ”¯æŒçš„ç´¢å¼•åŠŸèƒ½â€çš„ç‰¹æ®Šé€šç”¨ç‰ˆæœ¬æ›¿æ¢ã€‚</font></font><br>
<br>
<code>replace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-æ’å…¥ä¸€ä¸ªé¡¹ç›®ã€‚è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è€ƒè™‘ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>
<span class="hljs-title">memtx_zcurve_index_replace</span><span class="hljs-params">(struct index *base, struct tuple *old_tuple,
        struct tuple *new_tuple, <span class="hljs-keyword">enum</span> dup_replace_mode mode,
        struct tuple **result)</span>
</span>{<font></font>
    (<span class="hljs-keyword">void</span>)mode;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">memtx_zcurve_index</span> *<span class="hljs-title">index</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">memtx_zcurve_index</span> *)<span class="hljs-title">base</span>;</span>
    <span class="hljs-keyword">if</span> (new_tuple) {
        <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">memtx_zcurve_data</span> <span class="hljs-title">new_data</span>;</span><font></font>
        new_data.tuple = new_tuple;<font></font>
        new_data.z_address = extract_zaddress(new_tuple,<font></font>
                &amp;index-&gt;bit_array_pool, index);<font></font>
        <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">memtx_zcurve_data</span> <span class="hljs-title">dup_data</span>;</span>
        dup_data.tuple = <span class="hljs-literal">NULL</span>;<font></font>
        dup_data.z_address = <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
        <span class="hljs-keyword">int</span> tree_res = memtx_zcurve_insert(&amp;index-&gt;tree, new_data,<font></font>
                &amp;dup_data);<font></font>
        <span class="hljs-keyword">if</span> (tree_res) {<font></font>
            diag_set(OutOfMemory, MEMTX_EXTENT_SIZE,<font></font>
                     <span class="hljs-string">"memtx_zcurve_index"</span>, <span class="hljs-string">"replace"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (dup_data.tuple != <span class="hljs-literal">NULL</span>) {<font></font>
            *result = dup_data.tuple;<font></font>
            z_value_free(&amp;index-&gt;bit_array_pool, dup_data.z_address);<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span> (old_tuple) {
        <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">memtx_zcurve_data</span> <span class="hljs-title">old_data</span>, <span class="hljs-title">deleted_value</span>;</span><font></font>
        old_data.tuple = old_tuple;<font></font>
        old_data.z_address = extract_zaddress(old_tuple,<font></font>
                &amp;index-&gt;bit_array_pool, index);<font></font>
        memtx_zcurve_delete_value(&amp;index-&gt;tree, old_data, &amp;deleted_value);<font></font>
        z_value_free(&amp;index-&gt;bit_array_pool, old_data.z_address);<font></font>
        z_value_free(&amp;index-&gt;bit_array_pool, deleted_value.z_address);<font></font>
    }<font></font>
    *result = old_tuple;<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æŒ‡æ•°æ–¹é¢ï¼Œæ²¡æœ‰äº¤æ˜“</font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><code>insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>replace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬çš„æ‰€æœ‰é€»è¾‘éƒ½åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œï¼Œè¯¥æ–¹æ³•æ¥æ”¶æ—§çš„å’Œæ–°çš„å…ƒç»„ï¼Œä»¥åŠ</font></font><code>mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰å…³ç´¢å¼•æ˜¯å¦å”¯ä¸€çš„ä¿¡æ¯ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„ç´¢å¼•ä¸èƒ½å”¯ä¸€ï¼Œå› æ­¤ä¸éœ€è¦å…¶ä»–æ£€æŸ¥ï¼Œæ‚¨å¯ä»¥ç«‹å³æ’å…¥ä¸€ä¸ªå…ƒç»„ã€‚</font></font><br>
<br>
<code>memtx_zcurve_insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>memtx_zcurve_delete_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Bæ ‘çš„æ–¹æ³•ï¼Œè¿™å·²ç»åœ¨Tarantoolå®æ–½ï¼Œåœ¨å¸¸è§„æ ‘ç´¢å¼•è¢«ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä¸ä¼šå•ç‹¬ä»‹ç»å®ƒä»¬ã€‚</font><font style="vertical-align: inherit;">ä¸æ™®é€šçš„TREEä¸åŒï¼Œæˆ‘ä»¬ä¸ä»…å­˜å‚¨å…ƒç»„ï¼Œè€Œä¸”å­˜å‚¨zåœ°å€-ç´¢å¼•éƒ¨åˆ†çš„æ··åˆä½ã€‚</font><font style="vertical-align: inherit;">è¯¥åŠŸèƒ½å¯¹æ­¤è´Ÿè´£</font></font><code>extract_zadress</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<code>create_iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-åœ¨Luaä¸­ï¼Œå¯¹äº</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'aå’Œ</font></font><code>pairs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'å’Œã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> struct iterator *
<span class="hljs-title">memtx_zcurve_index_create_iterator</span><span class="hljs-params">(struct index *base, <span class="hljs-keyword">enum</span> iterator_type type,
                                   <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *key, <span class="hljs-keyword">uint32_t</span> part_count)</span>
</span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">memtx_zcurve_index</span> *<span class="hljs-title">index</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">memtx_zcurve_index</span> *)<span class="hljs-title">base</span>;</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">memtx_engine</span> *<span class="hljs-title">memtx</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">memtx_engine</span> *)<span class="hljs-title">base</span>-&gt;<span class="hljs-title">engine</span>;</span><font></font>
<font></font>
    assert(part_count == <span class="hljs-number">0</span> || key != <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">if</span> (type != ITER_EQ &amp;&amp; type != ITER_ALL &amp;&amp; type != ITER_GE) {<font></font>
        diag_set(UnsupportedIndexFeature, base-&gt;def,<font></font>
                 <span class="hljs-string">"requested iterator type"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">uint8_t</span> index_dim = base-&gt;def-&gt;key_def-&gt;part_count;
    <span class="hljs-keyword">if</span> (part_count == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">/*
         * If no key is specified, downgrade equality
         * iterators to a full range.
         */</span><font></font>
        type = ITER_GE;<font></font>
        key = <span class="hljs-literal">NULL</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (index_dim * <span class="hljs-number">2</span> == part_count<font></font>
               &amp;&amp; type != ITER_ALL) {<font></font>
        <span class="hljs-comment">/*
         * If part_count is twice greater than key_def.part_count
         * set iterator to range query
         */</span><font></font>
        type = ITER_GE;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tree_iterator</span> *<span class="hljs-title">it</span> = <span class="hljs-title">mempool_alloc</span>(&amp;<span class="hljs-title">memtx</span>-&gt;<span class="hljs-title">zcurve_iterator_pool</span>);</span>
    <span class="hljs-keyword">if</span> (it == <span class="hljs-literal">NULL</span>) {<font></font>
        diag_set(OutOfMemory, <span class="hljs-keyword">sizeof</span>(struct tree_iterator),
                 <span class="hljs-string">"memtx_zcurve_index"</span>, <span class="hljs-string">"iterator"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
    }<font></font>
<font></font>
    iterator_create(&amp;it-&gt;base, base);<font></font>
    it-&gt;pool = &amp;memtx-&gt;zcurve_iterator_pool;<font></font>
    it-&gt;base.next = tree_iterator_start;<font></font>
    it-&gt;base.<span class="hljs-built_in">free</span> = tree_iterator_free;<font></font>
    it-&gt;type = type;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (part_count == <span class="hljs-number">0</span> || type == ITER_ALL) {<font></font>
        it-&gt;lower_bound = zeros(&amp;index-&gt;bit_array_pool, index_dim);<font></font>
        it-&gt;upper_bound = ones(&amp;index-&gt;bit_array_pool, index_dim);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type == ITER_EQ) {<font></font>
        it-&gt;lower_bound = mp_decode_key(&amp;index-&gt;bit_array_pool,<font></font>
                key, index_dim, index);<font></font>
        it-&gt;upper_bound = <span class="hljs-literal">NULL</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (base-&gt;def-&gt;key_def-&gt;part_count == part_count) {<font></font>
        it-&gt;lower_bound = mp_decode_key(&amp;index-&gt;bit_array_pool,<font></font>
                key, index_dim, index);<font></font>
        it-&gt;upper_bound = ones(&amp;index-&gt;bit_array_pool, index_dim);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (base-&gt;def-&gt;key_def-&gt;part_count * <span class="hljs-number">2</span> == part_count) {<font></font>
        it-&gt;lower_bound  = z_value_create(&amp;index-&gt;bit_array_pool, index_dim);<font></font>
        it-&gt;upper_bound  = z_value_create(&amp;index-&gt;bit_array_pool, index_dim);<font></font>
        mp_decode_part(key, part_count, index, it-&gt;lower_bound, it-&gt;upper_bound);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        unreachable();<font></font>
    }<font></font>
    it-&gt;tree_iterator = memtx_zcurve_invalid_iterator();<font></font>
    it-&gt;current.tuple = <span class="hljs-literal">NULL</span>;<font></font>
    it-&gt;current.z_address = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">return</span> (struct iterator *)it;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ¹æ®ä¼ è¾“çš„å¯†é’¥ï¼Œæˆ‘ä»¬è®¡ç®—è¯·æ±‚çš„ä¸‹é™å’Œä¸Šé™ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ­¤è¿­ä»£å™¨å¹¶æœªæŒ‡å‘ä»»ä½•å†…å®¹ã€‚</font><font style="vertical-align: inherit;">æ€»å…±æœ‰å‡ ç§ç±»å‹çš„è¿­ä»£å™¨ã€‚</font><font style="vertical-align: inherit;">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™å°±æ˜¯å…¨éƒ¨-è·å–æ‰€æœ‰å…ƒç´ ï¼›</font><font style="vertical-align: inherit;">EQ-zåœ°å€ä¸å‘é€çš„åœ°å€ç›¸åŒ¹é…çš„æ¥æ”¶å…ƒç´ ï¼›</font><font style="vertical-align: inherit;">GEæ˜¯è¶…ç«‹æ–¹ä½“ä¸­å…ƒç´ çš„é€‰æ‹©ã€‚</font></font><br>
<br>
<code>destroy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-åˆ é™¤ç´¢å¼•ã€‚</font><font style="vertical-align: inherit;">å¯¹äºäºŒçº§ç´¢å¼•ï¼Œå®ƒåªæ˜¯é‡Šæ”¾åˆ†é…ç»™æœç´¢ç»“æ„çš„å†…å­˜ã€‚</font><font style="vertical-align: inherit;">å¦‚æœç´¢å¼•æ˜¯ä¸»ç´¢å¼•ï¼Œåˆ™ä»ç‰©ç†ä¸Šåˆ é™¤å­˜å‚¨çš„å…ƒç»„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æœ‰ä»£ç éƒ½å¯ä»¥åœ¨ä»¥ä¸‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘å€</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è·å¾—ï¼š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">https</font></a><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">//github.com/olegrok/tarantool/tree/z-order-curve-index</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è®©æˆ‘ä»¬çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆå¹¶è¿›è¡Œæ€»ç»“ã€‚</font></font><br>
<br>
<pre><code class="lua hljs">space = box.schema.space.<span class="hljs-built_in">create</span>(<span class="hljs-string">'myspace'</span>, { engine = <span class="hljs-string">'memtx'</span> })<font></font>
pk = space:create_index(<span class="hljs-string">'primary'</span>, { <span class="hljs-built_in">type</span> = <span class="hljs-string">'tree'</span>, parts = {{<span class="hljs-number">1</span>, <span class="hljs-string">'unsigned'</span>}}, unique = <span class="hljs-literal">true</span>})<font></font>
sk = space:create_index(<span class="hljs-string">'secondary'</span>, { <span class="hljs-built_in">type</span> = <span class="hljs-string">'zcurve'</span>, parts = {{<span class="hljs-number">2</span>, <span class="hljs-string">'unsigned'</span>}, {<span class="hljs-number">3</span>, <span class="hljs-string">'unsigned'</span>}}})
<span class="hljs-keyword">for</span> i=<span class="hljs-number">0</span>,<span class="hljs-number">5</span> <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j=<span class="hljs-number">0</span>,<span class="hljs-number">5</span> <span class="hljs-keyword">do</span> space:<span class="hljs-built_in">insert</span>{i * <span class="hljs-number">6</span> + j, i, j} <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span>
<span class="hljs-comment">-- returns all tuples</span>
pk:<span class="hljs-built_in">select</span>{}
<span class="hljs-comment">-- (2 &lt;= x &lt;= 3) and (3 &lt;= y &lt;= 5)</span>
sk:<span class="hljs-built_in">select</span>{<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>}
<span class="hljs-comment">---</span>
- â€” [<span class="hljs-number">15</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">21</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">16</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">22</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">17</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>]<font></font>
  - [<span class="hljs-number">23</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>]<font></font>
â€¦<font></font>
<span class="hljs-comment">-- (x == 2) and (y == 3)</span>
sk:<span class="hljs-built_in">select</span>{<span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
<span class="hljs-comment">---</span>
- â€” [<span class="hljs-number">15</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
<span class="hljs-comment">-- (2 &lt;= x &lt;= 3)</span>
sk:<span class="hljs-built_in">select</span>({<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, box.NULL, box.NULL})
<span class="hljs-comment">---</span>
- â€” [<span class="hljs-number">12</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>]<font></font>
  - [<span class="hljs-number">18</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>]<font></font>
  - [<span class="hljs-number">13</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]<font></font>
  - [<span class="hljs-number">19</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>]<font></font>
  - [<span class="hljs-number">14</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]<font></font>
  - [<span class="hljs-number">20</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>]<font></font>
  - [<span class="hljs-number">15</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">21</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">16</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">22</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">17</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>]<font></font>
  - [<span class="hljs-number">23</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>]<font></font>
...<font></font>
<span class="hljs-comment">-- (x &gt;= 2) and (y &gt;= 3)</span>
sk:<span class="hljs-built_in">select</span>({<span class="hljs-number">2</span>, box.NULL, <span class="hljs-number">3</span>, box.NULL})
<span class="hljs-comment">---</span>
- â€” [<span class="hljs-number">15</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">21</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">27</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">33</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>]<font></font>
  - [<span class="hljs-number">16</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">22</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">17</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>]<font></font>
  - [<span class="hljs-number">23</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>]<font></font>
  - [<span class="hljs-number">28</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">34</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>]<font></font>
  - [<span class="hljs-number">29</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<font></font>
  - [<span class="hljs-number">35</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>]<font></font>
...</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€§èƒ½å¦‚ä½•ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº‹å®è¯æ˜ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰æˆ‘æè¿°çš„é‚£ä¹ˆä¹è§‚ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»æŸä¸ªç‚¹å¼€å§‹ï¼Œå°±æ•°æ®è®¿é—®é€Ÿåº¦è€Œè¨€ï¼ŒZé˜¶æ›²çº¿å¼€å§‹æ˜¾ç€ä¸‹å‚ã€‚ perf topè¡¨æ˜ï¼Œå¤§å¤šæ•°æ—¶é—´éƒ½èŠ±åœ¨æ£€æŸ¥è¯¥ç‚¹æ˜¯å¦å±äºæœç´¢åŒºåŸŸä»¥åŠè®¡ç®—ä¸‹ä¸€ä¸ªéœ€è¦è·³è½¬çš„ç‚¹ä¸Šã€‚ä¸¤ç§æ“ä½œçš„çº¿æ€§å¤æ‚åº¦å–å†³äºå¯†é’¥çš„é•¿åº¦-éšç€å°ºå¯¸çš„å¢åŠ ï¼Œé•¿åº¦ä¹Ÿä¼šå¢åŠ ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70e/338/fd1/70e338fd15af8701c3a5696ebfb3ea2a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»ä»¤äººæ„‰å¿«çš„è§’åº¦æ¥çœ‹ï¼Œå†…å­˜æ¶ˆè€—æ¯”R-Treeå°‘2-3å€ï¼Œå¹¶ä¸”æ’å…¥é€Ÿåº¦ç¨å¿«ã€‚</font><font style="vertical-align: inherit;">è¿™ä¸æ˜¯ç‰¹åˆ«ç›¸å…³ï¼Œå› ä¸ºåœ¨å…³é—­WALçš„æƒ…å†µä¸‹è¿›è¡Œäº†æµ‹é‡ã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœå‘ç”Ÿæ•…éšœï¼Œç¦ç”¨çš„WALå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</font><font style="vertical-align: inherit;">å…¶æ¬¡ï¼Œå°½ç®¡äº‹å®ä¸Šå†™å…¥WALä½¿ç”¨æ‰¹å¤„ç†æ–¹æ³•ï¼Œä½†å®ƒä»åœ¨å†™å…¥ç£ç›˜ï¼Œè¿™æ¯”ä½¿ç”¨RAMçš„é€Ÿåº¦æ…¢æ•°åƒå€ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ee/e73/e29/9eee73e29d809963c069a9f7414f524a.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c0/8b9/159/2c08b91598dbefe2855ede4d05a593ca.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Bæ ‘è¿›è¡Œæ¯”è¾ƒä¹Ÿå¾ˆæœ‰è¶£ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œæ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæ›²çº¿å°†æ¯”å®Œæ•´æ‰«æå’Œæ£€æŸ¥æ¯ä¸ªç‚¹æ˜¯å¦å±äºç»™å®šåŒºåŸŸå¿«ã€‚</font><font style="vertical-align: inherit;">å³ä½¿æ£€æŸ¥æ¯”Zé˜¶æ›²çº¿æ›´è½»å·§ï¼Œæ‰€æœ‰æ£€æŸ¥éƒ½å½’ç»“ä¸ºæŒ‰ä½æ¯”è¾ƒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å›¾è¡¨ä¸Šçš„æ•°å­—ä¸Ræ ‘çš„é¡ºåºä¸åŒ-æµ‹è¯•å·²ç¨ä½œä¿®æ”¹ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/140/ae5/44d/140ae544d6ba527bffe6bc4d814f609d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºæµ‹è¯•ï¼Œæˆ‘ç”Ÿæˆäº†ä¸€ç»„ç‚¹ï¼Œå¹¶ä½¿ç”¨Zæ›²çº¿å’Œå¸¸è§„æ‰«ææ¯”è¾ƒäº†æŸ¥è¯¢çš„æŒç»­æ—¶é—´ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€»ç»“ä¸€ä¸‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å†…å­˜ä¸–ç•Œä¸­ï¼Œè¿™ç§ç»“æ„å·²è¯æ˜ä¸æ˜¯æœ€ä½³æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä»ç„¶å…·æœ‰ä¼˜åŠ¿ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å ç”¨æ›´å°‘çš„ç©ºé—´ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸R-Treeï¼ˆä»…ä¸Tarantoolç›¸å…³ï¼‰ä¸åŒï¼Œå·²è¾“å…¥ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœåªæœ‰Bæ ‘å¹¶ä¸”æ‚¨éœ€è¦è¿›è¡Œå¤šç»´æŸ¥è¯¢ï¼ˆä¸Tarantoolä¸ç›¸å…³ï¼‰ï¼Œåˆ™å€¼å¾—ä»”ç»†ç ”ç©¶ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„å®éªŒã€‚</font><font style="vertical-align: inherit;">æˆ‘æå‡ºçš„è§£å†³æ–¹æ¡ˆä¸å¤ªå¯èƒ½æˆä¸ºTarantoolçš„ä¸€éƒ¨åˆ†ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œä¸è¦å®³æ€•å°è¯•ã€‚</font><font style="vertical-align: inherit;">è€Œä¸”ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®å’Œè§£å†³æ–¹æ¡ˆï¼Œè¯·ä¸è¦å®³æ€•ä¸ä»–äººåˆ†äº«ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ„æ–™æ¥æº</font></font></h2><br>
<a name="B-Tree"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Bæ ‘]ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLä¸­çš„ç´¢å¼•-4 / Postgres Professionalçš„åšå®¢/ Habr </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bæ ‘/ Habr </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bæ ‘æ•°æ®ç»“æ„/ OTUSåšå®¢ã€‚</font><font style="vertical-align: inherit;">åœ¨çº¿æ•™è‚²/æå®¢æ‚å¿—</font></font></a><br>
<br>
<a name="ZcurvePostgres"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ZcurvePostgres]ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºZ-orderå’ŒR-tree /æå®¢æ‚å¿—</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z-orderä¸R-treeï¼Œç»­/æå®¢æ‚å¿—</font></font></a><br>
<br>
<a name="1"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1] </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon DynamoDBä¸­å¤šé¢æŸ¥è¯¢çš„Zé¡ºåºç´¢å¼•ï¼šç¬¬1éƒ¨åˆ†| </font><font style="vertical-align: inherit;">AWSæ•°æ®åº“åšå®¢</font></font></a><br>
<br>
<a name="1"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2] </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon DynamoDBä¸­å¤šé¢æŸ¥è¯¢çš„Zé¡ºåºç´¢å¼•ï¼šç¬¬2éƒ¨åˆ†| </font><font style="vertical-align: inherit;">AWSæ•°æ®åº“åšå®¢</font></font></a><br>
<br>
<a name="3"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[3] </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†UB-Treeé›†æˆåˆ°æ•°æ®åº“ç³»ç»Ÿå†…æ ¸ä¸­</font></font></a><br>
<br>
<a name="4"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[4] </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/tarantool/small</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN505850/index.html">äº§å“ä»£ç ä¸­çš„C ++åŸºäºæ¦‚å¿µçš„å¤šæ€æ€§ï¼šLLVMä¸­çš„PassManager</a></li>
<li><a href="../zh-CN505856/index.html">ä»æš´åŠ›ç ´è§£åˆ°éšç§å°è¯•-SaaSæä¾›å•†é¢ä¸´çš„æŒ‘æˆ˜</a></li>
<li><a href="../zh-CN505860/index.html">Spring Bootï¼ŒHibernateå’ŒKotlinä¸ºåˆå­¦è€…é€æ­¥æä¾›</a></li>
<li><a href="../zh-CN505870/index.html">å¦‚ä½•åœ¨æ—¥æœ¬ï¼ŒéŸ©å›½å’Œä¸­å›½æ¨å¹¿æ‰‹æœºæ¸¸æˆå’Œåº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN505872/index.html">æ— äººé©¾é©¶è½¦è¾†çš„å†å²</a></li>
<li><a href="../zh-CN505884/index.html">é±¼å‰å¼ç½‘ç»œé’“é±¼ï¼šä½“éªŒåˆ›å»ºæœ‰æ¡ä»¶çš„æ¶æ„å¯æ‰§è¡Œæ–‡ä»¶æ¥ä»¿å†’ç”µå­é‚®ä»¶çš„ç»éªŒ</a></li>
<li><a href="../zh-CN505888/index.html">åœ¨æ²¡æœ‰YouTube APIçš„æƒ…å†µä¸‹è§£æYouTubeï¼ˆåŒ…æ‹¬ä¸Šä¼ çš„æ•°æ®ï¼‰</a></li>
<li><a href="../zh-CN505896/index.html">å®‰å…¨å‘¨24ï¼šZoom and Braveæµè§ˆå™¨éšç§</a></li>
<li><a href="../zh-CN505898/index.html">å…‹åŠ³å¾·Â·é¦™å†œï¼ˆClaude Shannonï¼‰ï¼šå„è¡Œå„ä¸šçš„æ°å…‹ï¼Œå°ä¸‘ï¼Œä¿¡æ¯è®ºä¹‹çˆ¶</a></li>
<li><a href="../zh-CN505900/index.html">ä¸ªäººæˆç˜¾ï¼šå…¨å°ºå¯¸40æ¯«ç±³ï¼Œä¸å¸¦çº¿ï¼ŒæŒç»­72å°æ—¶ï¼Œéœ€æ”¯ä»˜8000å¢å¸ƒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>