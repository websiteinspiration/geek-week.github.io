<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶üèª üòí üí≤ Carga diferida con la API de Intersection Observer üöπ üë®üèø‚Äçüíª ü§∏üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Buen dia amigos! 
 
 En este art√≠culo, presentaremos Intersection Observer API, una nueva herramienta poderosa para cargar im√°genes diferidas y otros...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Carga diferida con la API de Intersection Observer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492592/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Buen dia amigos! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este art√≠culo, presentaremos Intersection Observer API, una nueva herramienta poderosa para cargar im√°genes diferidas y otros elementos en una p√°gina, compatible con todos los navegadores modernos. </font><font style="vertical-align: inherit;">Podemos usar esta herramienta para controlar la visibilidad de los elementos definiendo la carga preliminar o demorada de nuestro contenido DOM.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A medida que la web evoluciona, los navegadores admiten m√°s y m√°s funciones y API nuevas, pero algo a√∫n perjudica a los desarrolladores: la representaci√≥n DOM. Cuando comenzamos a desarrollar una nueva aplicaci√≥n, creamos componentes, pensamos en la estructura HTML, dise√±amos elementos con CSS, tambi√©n pensamos en el proceso de representaci√≥n, c√≥mo se ver√° nuestra p√°gina en general y algunas otras cosas importantes que requieren un manejo cuidadoso y afectar Representaci√≥n de la aplicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto, a su vez, afecta la forma en que creamos nuestros elementos, c√≥mo se organizar√° nuestro CSS, qu√© bibliotecas y marcos se utilizar√°n en el proyecto, etc. Es por eso que la representaci√≥n es tan importante para los desarrolladores.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las razones de la popularidad de la biblioteca React en la comunidad de desarrolladores es el hecho de que utiliza un DOM virtual. En esencia, esta es una representaci√≥n virtual del DOM real, que puede controlar como lo desee. Despu√©s de todas las actualizaciones, el DOM virtual decide qu√© cambios deben realizarse en el DOM original y realiza estos cambios de una manera "perfecta"; No es necesario actualizar toda la p√°gina al cambiar un elemento. Esta es una de las ventajas m√°s significativas de React sobre otras bibliotecas y marcos. La representaci√≥n DOM es una tarea costosa (en t√©rminos de rendimiento) que React funciona bien sin ning√∫n problema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunas bibliotecas y API nos permiten mejorar la representaci√≥n de elementos de nuestras aplicaciones. </font><font style="vertical-align: inherit;">Vamos a familiarizarnos con uno de ellos: la API Intersection Observer. </font><font style="vertical-align: inherit;">Pero primero, descubramos qu√© es la carga de im√°genes "perezosa".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo funciona la carga diferida de im√°genes?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carga diferida es una de las t√©cnicas para representar el contenido de la p√°gina. El concepto de carga "perezosa" es que en lugar de cargar completamente la p√°gina, cargamos solo las partes necesarias y posponemos (retrasamos) la carga de las partes restantes hasta que el usuario las necesite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de descarga "perezosa", de la que probablemente haya o√≠do hablar o que haya encontrado, es el desplazamiento sin fin de la p√°gina. Funciona de la siguiente manera: el usuario visita la p√°gina, se carga el contenido inicial y solo despu√©s de que el usuario desplaza la p√°gina hasta el final, se carga la siguiente parte del contenido. En este caso, no es necesario descargar todo el contenido a la vez, lo que facilita enormemente la aplicaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si una descarga "perezosa" sirve para descargar solo contenido "generado por el usuario", ¬øc√≥mo se llama la t√©cnica opuesta? Algunos han o√≠do hablar de carga lenta antes, pero no han escuchado lo contrario. Lo opuesto a la carga "perezosa" es la carga "energ√©tica" (otras opciones son impacientes, se mueven r√°pidamente), cuando todo el contenido se procesa de inmediato. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øSabes que hay atributos HTML para las im√°genes de carga diferida? Para usarlos, simplemente agregue loading = "perezoso" al elemento "img" o "iframe".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wo/6v/hy/wo6vhy3y4zhzk3kk1edxmtsgmvu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con esta t√©cnica, obtenemos muchas ventajas: cargar solo los recursos necesarios reduce el consumo de memoria y, en √∫ltima instancia, el tiempo de carga de la p√°gina. </font><font style="vertical-align: inherit;">Tambi√©n evita la representaci√≥n de c√≥digo "no reclamado", que optimiza la aplicaci√≥n para trabajar en condiciones de bajo ancho de banda de red. </font><font style="vertical-align: inherit;">Sin embargo, hay algunos inconvenientes: esto puede afectar la clasificaci√≥n de la p√°gina por parte de los motores de b√∫squeda. </font><font style="vertical-align: inherit;">Adem√°s, lleva alg√∫n tiempo elegir la biblioteca o API correcta para trabajar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de observador de intersecci√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScript se est√° desarrollando tan r√°pido que tenemos una nueva API casi todos los a√±os. El objetivo principal de las nuevas API es ayudar a crear aplicaciones y p√°ginas incre√≠bles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intersection Observer es una API que le permite controlar la visibilidad y la posici√≥n de los elementos DOM. La cuesti√≥n es que funciona de forma as√≠ncrona, lo que le permite cambiar sin problemas (imperceptiblemente) la visibilidad de los elementos, determinando la carga preliminar o demorada del contenido de nuestro DOM. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h7/yj/qj/h7yjqj1e_xj4luztht-s08hle1e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace unos a√±os, no ten√≠amos una API u otra herramienta para posicionar y rastrear un elemento. Tuvimos que escribir funciones locas y enormes, crear m√©todos caros (en t√©rminos de rendimiento) que crearon m√°s problemas. Usando la API Intersection Observer, podemos hacer cosas interesantes como:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desplazamiento de p√°gina sin fin: cree un desplazamiento sin fin de tablas, listas, contenedores de cuadr√≠cula, etc. </font><font style="vertical-align: inherit;">Nunca ha sido tan f√°cil.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im√°genes: ¬øpor qu√© cargar todas las im√°genes a la vez, cuando puede usar la descarga "perezosa" y mostrar solo el contenido que el usuario necesita en este momento? </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitoreo de elementos: puede monitorear los elementos en la p√°gina. </font><font style="vertical-align: inherit;">Por ejemplo, puede recibir mensajes sobre el cierre de anuncios.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ es donde todo comienza:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> myFirstObserver = <span class="hljs-keyword">new</span> IntersectionObserver(callback, options)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicializamos el constructor IntersectionObserver y le pasamos dos par√°metros. </font><font style="vertical-align: inherit;">El primer par√°metro es una funci√≥n de devoluci√≥n de llamada, que se llama en respuesta a la intersecci√≥n de nuestro elemento con la ventana gr√°fica (es decir, cuando el elemento va m√°s all√° de los l√≠mites de la ventana gr√°fica) o con otro elemento. </font><font style="vertical-align: inherit;">El par√°metro de opciones es un objeto que controla las condiciones para iniciar la funci√≥n de devoluci√≥n de llamada. </font><font style="vertical-align: inherit;">Este objeto tiene los siguientes campos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">root: el elemento primario que sirve como ventana gr√°fica para el elemento objetivo (para el elemento que estamos observando)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rootMargin: el margen exterior alrededor del elemento ra√≠z (los valores de este campo son similares a los valores de margen en CSS). </font><font style="vertical-align: inherit;">Estos valores pueden cambiar para cada lado de la ra√≠z antes de confirmar la intersecci√≥n.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umbral: un n√∫mero o una matriz de n√∫meros que determina el porcentaje de intersecci√≥n del elemento de destino con el elemento ra√≠z, en el que se inicia la funci√≥n de devoluci√≥n de llamada </font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/sp/up/tk/spuptkzkbpv0m30sblumsls7cgy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Echemos un vistazo al uso de la API Intersection Observer:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> options = {
    <span class="hljs-attr">root</span>: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.scroll-list'</span>),
    <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'5px'</span>,
    <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.5</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">let</span> myFirstObserver = <span class="hljs-keyword">new</span> IntersectionObserver(<span class="hljs-function"><span class="hljs-params">elements</span> =&gt;</span> { elements.forEach(<span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'element'</span>, element)) }, options)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar a "monitorear" un elemento, debe determinar el objetivo y llamar al observador utilizando el m√©todo "observar", pasando el objetivo como par√°metro:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> myDivTarget = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.header'</span>)<font></font>
<font></font>
observer.observe(myDivTarget)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debe recordarse que todos los elementos observados por el observador son rect√°ngulos. </font><font style="vertical-align: inherit;">Los elementos de forma irregular encajan en el rect√°ngulo m√°s peque√±o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© pasa con el soporte del navegador? </font><font style="vertical-align: inherit;">Intersection Observer API es compatible con todos los navegadores modernos como Chrome, Edge, Firefox y Opera. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pp/0g/vc/pp0gvc64xhmxpi8ehtktge53zic.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si va a trabajar con una gran cantidad de datos, por ejemplo, con una tabla que contiene mucha informaci√≥n, la API de Intersection Observer ser√° extremadamente √∫til para usted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las ventajas de esta API es que para resolver estos problemas ya no necesita usar ninguna biblioteca.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estudiamos la API de Intersection Observer y su uso para la carga diferida, observando la posici√≥n de los elementos DOM, etc. </font><font style="vertical-align: inherit;">Los navegadores admiten cada vez m√°s API que reducen el tiempo de representaci√≥n de la p√°gina, principalmente para usuarios con una conexi√≥n lenta, reducen el tama√±o del proyecto y muestran solo contenido relevante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De un traductor: el art√≠culo me pareci√≥ insuficientemente informativo, as√≠ que aqu√≠ hay enlaces a literatura adicional:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especificaci√≥n</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Art√≠culo sobre Intersection Observer API en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MDN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ruso)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Art√≠culo de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muestra de trucos de CSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ingl√©s)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Art√≠culo con ejemplos sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envato</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ingl√©s)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de desplazamiento sin fin de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Google</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par de ejemplos m√°s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en GitHub</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias por su atenci√≥n.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492572/index.html">El estado actual del mundo Java: tendencias y hechos para uno de los lenguajes de programaci√≥n m√°s populares</a></li>
<li><a href="../es492574/index.html">Reflexiones sobre la probabilidad de despegue: Apple AirPods con Momentum True Wireless 2</a></li>
<li><a href="../es492580/index.html">¬øQu√© tienen en com√∫n el coronavirus y el ajedrez?</a></li>
<li><a href="../es492582/index.html">Cisco ofrece acceso remoto seguro</a></li>
<li><a href="../es492590/index.html">C√≥mo apareci√≥ la s√≠ntesis de voz en la PC</a></li>
<li><a href="../es492594/index.html">Localizaci√≥n de juegos independientes: ¬øvale la pena el juego?</a></li>
<li><a href="../es492596/index.html">El espacio como base de datos</a></li>
<li><a href="../es492600/index.html">Gu√≠a semi-cient√≠fica para alojar un enrutador WiFi</a></li>
<li><a href="../es492604/index.html">Trabajando con View asincr√≥nicamente usando corutina</a></li>
<li><a href="../es492606/index.html">Problemas de herramientas en grandes proyectos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>