<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯП┤тАНтШая╕П ЁЯСЗЁЯП╛ ЁЯд▓ЁЯП╝ Nuxt.js 2 рд╡реЙрдХрдереНрд░реВ рднрд╛рдЧ 1 рдкрд░ рдПрдХ рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдмрдирд╛рдирд╛ ЁЯФ░ ЁЯНа ЁЯЫАЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рд▓реЗрдЦ рдРрд╕реЗ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖рд┐рдд рд╣реИ, рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА Vue рдХреА рд╕рдордЭ рд╣реИ, рдЬреЛ Nuxt рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдХреЗрд╡рд▓ Nuxt рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЪреАрдЬреЛрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Nuxt.js 2 рд╡реЙрдХрдереНрд░реВ рднрд╛рдЧ 1 рдкрд░ рдПрдХ рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдмрдирд╛рдирд╛</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490496/"><p><img src="https://habrastorage.org/webt/lm/tu/14/lmtu146wvkkcx1yi2rd57kyozbs.jpeg"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд▓реЗрдЦ рдРрд╕реЗ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖рд┐рдд рд╣реИ, рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА Vue рдХреА рд╕рдордЭ рд╣реИ, рдЬреЛ Nuxt рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдХреЗрд╡рд▓ Nuxt рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЪреАрдЬреЛрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реВрдВрдЧрд╛ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдЖрдк рдЙрдирд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рд▓реЗрдЦ рдЗрд╕ рдмрд╛рдд рдХрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдЪрд╛рд░ рджреЗрдЧрд╛ рдХрд┐ рдиреНрдпреВрдЯреЗрдХреНрд╕ рдХреЗ рд╕рд╛рде рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк рдЙрдкрдпреЛрдЧреА рд╣реИрдХреНрд╕, рдкреНрд▓рдЧрдЗрдиреНрд╕ рдФрд░ рдЙрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рд╕реАрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЕрдХреНрд╕рд░ Nuxt рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рддреЗ рд╕рдордп рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдПрдХ рдЖрджрд┐рдо рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдмрдирд╛рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд┐рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдЬрд▓реНрджреА рд╕реЗ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ SEO рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ Google (рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕рд░реНрдЪ рдЗрдВрдЬрди) рдХреЗ рдкреНрдпрд╛рд░ рдореЗрдВ рдкрдбрд╝ рдЬрд╛рдПрдЧрд╛ред</font></font><a name="habracut"></a></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдзрд╛рд░рдгрд╛ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдмреИрдХрдПрдВрдб рдПрдкрд┐ рдХреЗ рдирд┐рд░реНрдорд╛рдг рд╕реЗ рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдирд┐рдкрдЯрд╛ рдирд╣реАрдВ рдЬрд╛рдПрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╡рд┐рд╖рдп рдХрд╛рдлреА рдмрдбрд╝рд╛ рд╣реИ рдФрд░ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рдкрд░ рдЖрддрд╛ рд╣реИред</font></font></p><br>
<h2 id="vvedenie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдЪрдп</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuxt.js рдЬреИрд╕реЗ рдкреНрд░рдЧрддрд┐рд╢реАрд▓ (PWA) рдЪреМрдЦрдЯреЗ рдХрд╛ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐: </font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдкрдХреЛ рдПрдХ рдкреВрд░реНрд╡рдЬреЗрдВрдбрд░ рдХреА рдорджрдж рд╕реЗ html рдХреА рд╡рд╛рдкрд╕реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЦреЛрдЬ рд░реЛрдмреЛрдЯ рдХреЗ рд▓рд┐рдП SPA рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВред</font></font></li>
<li>    ,     ,      js chunks, css styles  api  (     webpack 4,     nuxt.js)</li>
<li>  Google Lighthouse   ,        (  100/100    ).</li>
<li>CSS Modules, Babel  </li>
</ul><br>
<h3 id="struktura-internet-magazina">  :</h3><br>
<ul>
<li>    </li>
<li>    </li>
<li> </li>
<li>  </li>
</ul><br>
<h3 id="vozmozhnosti-prilozheniya"> :</h3><br>
<ul>
<li>  (     ).</li>
<li>    cookie (   ).</li>
<li>    .</li>
<li> , , , html      .</li>
<li>2  : 1)         ( Babel) 2) Legacy    Babel. </li>
<li>    FOUT, FOIT, FOFT (     ,      ,     ).</li>
<li>    IE 10.</li>
<li> svg.</li>
<li>   SEO .</li>
<li>      ,    html .</li>
<li>  API   XHR .</li>
</ul><br>
<h2 id="ustanovka-nuxt"> Nuxt</h2><br>
<p>  .    <strong>Node v12.16.1  Yarn v1.22.0</strong>.<br>
 ,    package.json       <code>yarn install</code></p><br>
<div class="spoiler"><b class="spoiler_title">package.json</b><div class="spoiler_text"><pre><code class="plaintext hljs">{<font></font>
  "name": "habr",<font></font>
  "version": "1.0.0",<font></font>
  "private": true,<font></font>
  "scripts": {<font></font>
    "analyze": "cross-env NODE_ENV=production  nuxt build --analyze",<font></font>
    "build": "cross-env NODE_ENV=production nuxt build",<font></font>
    "buildandstart": "cross-env NODE_ENV=production nuxt build &amp;&amp; cross-env NODE_ENV=production nuxt start",<font></font>
    "dev": "cross-env NODE_ENV=development NUXT_PORT=3000 nuxt",<font></font>
    "start": "cross-env NODE_ENV=production nuxt start"<font></font>
  },<font></font>
  "dependencies": {<font></font>
    "@nuxtjs/axios": "5.9.5",<font></font>
    "@nuxtjs/style-resources": "1.0.0",<font></font>
    "@nuxtjs/svg": "0.1.6",<font></font>
    "cookie-universal-nuxt": "2.1.1",<font></font>
    "cross-env": "7.0.0",<font></font>
    "cssnano": "4.1.10",<font></font>
    "cssnano-preset-advanced": "4.0.7",<font></font>
    "imagemin-mozjpeg": "^8.0.0",<font></font>
    "imagemin-webpack-plugin": "^2.4.2",<font></font>
    "intersection-observer": "^0.7.0",<font></font>
    "node-sass": "^4.13.1",<font></font>
    "normalize.css": "8.0.1",<font></font>
    "nuxt": "2.11.0",<font></font>
    "nuxt-trailingslash-module": "1.1.0",<font></font>
    "nuxt-webfontloader": "^1.1.0",<font></font>
    "sass-loader": "^8.0.2",<font></font>
    "vue-js-modal": "1.3.31",<font></font>
    "vue-lazy-hydration": "^1.0.0-beta.12",<font></font>
    "vue-lazyload": "1.3.3",<font></font>
    "vue-svg-loader": "0.11.0",<font></font>
    "vuelidate": "^0.7.5"<font></font>
  },<font></font>
  "devDependencies": {<font></font>
    "@nuxtjs/eslint-config": "2.0.0",<font></font>
    "babel-eslint": "8",<font></font>
    "eslint": "^6.8.0",<font></font>
    "eslint-config-prettier": "6.10.0",<font></font>
    "eslint-config-standard": "14.1.0",<font></font>
    "eslint-friendly-formatter": "4.0.1",<font></font>
    "eslint-loader": "3.0.3",<font></font>
    "eslint-plugin-array-func": "3.1.3",<font></font>
    "eslint-plugin-import": "2.20.1",<font></font>
    "eslint-plugin-jest": "23.7.0",<font></font>
    "eslint-plugin-lodash": "6.0.0",<font></font>
    "eslint-plugin-no-loops": "0.3.0",<font></font>
    "eslint-plugin-no-use-extend-native": "0.4.1",<font></font>
    "eslint-plugin-node": "11.0.0",<font></font>
    "eslint-plugin-prettier": "3.1.2",<font></font>
    "eslint-plugin-promise": "4.2.1",<font></font>
    "eslint-plugin-security": "1.4.0",<font></font>
    "eslint-plugin-standard": "4.0.1",<font></font>
    "eslint-plugin-vue": "6.1.2",<font></font>
    "prettier": "1.19.1",<font></font>
    "prettier-eslint": "9.0.1"<font></font>
  }<font></font>
}<font></font>
</code></pre></div></div><br>
<p><em>devDependencies</em>  ,        .</p><br>
<p>     :</p><br>
<ul>
<li><strong>@nuxtjs/axios</strong>    XHR .</li>
<li><strong>@nuxtjs/style-resources</strong>        sass,         .</li>
<li><strong>cookie-universal-nux</strong>t  api    cookie      </li>
<li><strong>cross-env</strong>      Windows,     (    dotenv)</li>
<li><strong>cssnano </strong>     css,    .</li>
<li><strong>image-webpack-loader</strong>  JPG, GIF, WEBP, PNG      .</li>
<li><strong>intersection-observer</strong>   Intersection Observer API (      ).</li>
<li><strong>node-sass</strong> Webpack   scss.</li>
<li><strong>normalize.css</strong>    .</li>
<li><strong>nuxt-trailingslash-module</strong>        ( SEO).</li>
<li><strong>nuxt-webfontloader</strong>   .</li>
<li><strong>vue-js-modal</strong>  .</li>
<li><strong>vue-lazy-hydration</strong>  Max Potential First Input Delay (       SSR ,     html  ,   ,          ).</li>
<li><strong>vue-lazyload</strong>   .</li>
<li><strong>vue-svg-loader</strong> SVG .</li>
<li><strong>vuelidate</strong>   .</li>
</ul><br>
<h2 id="struktura-proekta"> </h2><br>
<pre><code class="plaintext hljs">--assets <font></font>
  --scss<font></font>
  --img<font></font>
  --svg<font></font>
--components<font></font>
--pages<font></font>
  --category<font></font>
  --checkout<font></font>
  --product<font></font>
--layouts<font></font>
--plugins <font></font>
--store <font></font>
--middleware (       )<font></font>
--serverMiddleware (     server only)</code></pre><br>
<ul>
<li><strong>assets</strong>    ,      . </li>
<li><strong>components</strong>           Vue</li>
<li><strong>pages</strong> ,  ,    ,        Vue Router.    .</li>
<li><strong>layouts</strong> ,  ,     ,  ,       (   ).</li>
<li><strong>plugins</strong>             .   .</li>
</ul><br>
<h3 id="sozdayom-layout"> layout</h3><br>
<p>      layout,        .</p><br>
<p> layouts  ,     ,     . </p><br>
<div class="spoiler"><b class="spoiler_title">default.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nuxt</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    meta () {
      <span class="hljs-keyword">return</span> [
        { <span class="hljs-attr">charset</span>: <span class="hljs-string">'utf-8'</span> },
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'viewport'</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-string">'width=device-width, initial-scale=1, maximum-scale=1 shrink-to-fit=no'</span>
        },
        { <span class="hljs-attr">hid</span>: <span class="hljs-string">'description'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">''</span> }
      ]
    }
  },

  head () {
    <span class="hljs-keyword">const</span> canonical = <span class="hljs-string">`https://mysite.com<span class="hljs-subst">${<span class="hljs-keyword">this</span>.$route.path
      .toLowerCase()
      .replace(<span class="hljs-regexp">/\/$/</span>, <span class="hljs-string">''</span>)}</span>`</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">meta</span>: [
        ...this.meta

      ],
      <span class="hljs-attr">script</span>: [
        <span class="hljs-comment">// { src: 'https://markknol.github.io/console-log-viewer/console-log-viewer.js' }</span>
      ],
      <span class="hljs-attr">link</span>: [{ <span class="hljs-attr">rel</span>: <span class="hljs-string">'canonical'</span>, <span class="hljs-attr">href</span>: canonical }]
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<p>    template      Nuxt       layout  .         .</p><br>
<p>    computed  <strong>meta()</strong>,       ,      -      .<br>
        Vuex                   . </p><br>
<p>  <strong>head()</strong>,   Nuxt     .     ,        .</p><br>
<p>     ,    .  Nuxt   :</p><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">data-n-head</span>=<span class="hljs-string">"ssr"</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">data-n-head</span>=<span class="hljs-string">"ssr"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1 shrink-to-fit=no"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">data-n-head</span>=<span class="hljs-string">"ssr"</span> <span class="hljs-attr">data-hid</span>=<span class="hljs-string">"description"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">""</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">data-n-head</span>=<span class="hljs-string">"ssr"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"canonical"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://mysite.com"</span>&gt;</span></code></pre><br>
<p>:</p><br>
<ul>
<li><p><strong>data-n-head="ssr"</strong>        .</p><br>
</li>
<li><p><strong>data-hid="description"</strong> ,  ,    <strong>hid: 'description'</strong>.    ,   Nuxt      <strong>id</strong>,  ,          ,     <strong>id</strong>.      description  layout              (   SEO).</p><br>
</li>
<li><p><strong> link: [{ rel: 'canonical', href: canonical }]</strong>      ,       Nuxt   "",         .<br>
      canonical      .         -.<br>
, <code>site.com/product/myProduct, site.com/product/myProduct/, site.com/product/MyProduct/</code>        ,       canonical,      .</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">data-n-head</span>=<span class="hljs-string">"ssr"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"canonical"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://site.com/product/myproduct"</span>&gt;</span></code></pre><br>
<p>        ,       .</p><br>
</li>
<li><p>        script.        .            .                .</p><br>
</li>
</ul><br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд╛рдо = "рд╡реНрдпреВрдкреЛрд░реНрдЯ" рд╕рд╛рдордЧреНрд░реА = "рдЪреМрдбрд╝рд╛рдИ = рдбрд┐рд╡рд╛рдЗрд╕-рдЪреМрдбрд╝рд╛рдИ, рдкреНрд░рд╛рд░рдВрднрд┐рдХ-рд╕реНрдХреЗрд▓ = 1, рдЕрдзрд┐рдХрддрдо-рд╕реНрдХреЗрд▓ = 1 рд╣рдЯрдирд╛-рдлрд┐рдЯ рд╣реЛрдирд╛ = рдХреЛрдИ"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рд╖реНрдХреНрд░рд┐рдп </font><strong><font style="vertical-align: inherit;">рди</font></strong><font style="vertical-align: inherit;"> рдХрд░реЗрдВ рдореЛрдмрд╛рдЗрд▓ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ (Safary iOS рдХреЛ рдЫреЛрдбрд╝рдХрд░)ред</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">charset = "utf-8"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреГрд╖реНрда рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ</font></font></li>
</ul></div></div><br>
<h3 id="sozdayom-stranicu"> </h3><br>
<p>  ,    .   pages  index.vue</p><br>
<div class="spoiler"><b class="spoiler_title">index.vue</b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> !<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {

    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<p>   ,    Vue ,       .    .</p><br>
<h2 id="konfiguraciya-nuxt"> Nuxt</h2><br>
<p>  Nuxt     .      nuxt.config.js</p><br>
<div class="spoiler"><b class="spoiler_title">nuxt.config.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> imageminMozjpeg = <span class="hljs-built_in">require</span>(<span class="hljs-string">'imagemin-mozjpeg'</span>)
<span class="hljs-keyword">const</span> ImageminPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'imagemin-webpack-plugin'</span>).default
<span class="hljs-keyword">const</span> isDev = process.env.NODE_ENV !== <span class="hljs-string">'production'</span><font></font>
<font></font>
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'universal'</span>,<font></font>
  ...(!isDev &amp;&amp; {<font></font>
    <span class="hljs-attr">modern</span>: <span class="hljs-string">'client'</span><font></font>
  }),<font></font>
<font></font>
  <span class="hljs-attr">head</span>: {
    <span class="hljs-attr">htmlAttrs</span>: {
      <span class="hljs-attr">lang</span>: <span class="hljs-string">'ru'</span><font></font>
    },<font></font>
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Nuxt APP'</span>,
    <span class="hljs-attr">meta</span>: [<font></font>
      { <span class="hljs-attr">hid</span>: <span class="hljs-string">'description'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'-'</span> }<font></font>
    ],<font></font>
    <span class="hljs-attr">link</span>: [<font></font>
      { <span class="hljs-attr">rel</span>: <span class="hljs-string">'shortcut icon'</span>, <span class="hljs-attr">href</span>: <span class="hljs-string">'favicon.ico'</span> }<font></font>
    ]<font></font>
  },<font></font>
  <span class="hljs-attr">rootDir</span>: __dirname,
  <span class="hljs-attr">serverMiddleware</span>: [<font></font>
  ],<font></font>
  <span class="hljs-attr">router</span>: {
    <span class="hljs-attr">prefetchLinks</span>: <span class="hljs-literal">false</span><font></font>
  },<font></font>
  <span class="hljs-attr">loading</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'#ddd'</span> },
  <span class="hljs-attr">css</span>: [
    <span class="hljs-string">'normalize.css'</span>,
    <span class="hljs-string">'./assets/scss/global-styles.scss'</span><font></font>
  ],<font></font>
  <span class="hljs-attr">plugins</span>: [<font></font>
  ],<font></font>
  <span class="hljs-attr">modules</span>: [
    <span class="hljs-comment">// Doc: https://axios.nuxtjs.org/usage</span>
    <span class="hljs-string">'@nuxtjs/axios'</span>,
    <span class="hljs-string">'nuxt-trailingslash-module'</span>,
    <span class="hljs-string">'nuxt-webfontloader'</span>,
    <span class="hljs-string">'cookie-universal-nuxt'</span>,
    <span class="hljs-string">'@nuxtjs/style-resources'</span><font></font>
  ],<font></font>
<font></font>
  <span class="hljs-attr">webfontloader</span>: {
    <span class="hljs-attr">events</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">google</span>: {
      <span class="hljs-attr">families</span>: [<span class="hljs-string">'Montserrat:400,500,600:cyrillic&amp;display=swap'</span>]<font></font>
    },<font></font>
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span><font></font>
  },<font></font>
  <span class="hljs-attr">styleResources</span>: {
    <span class="hljs-comment">// your settings here</span>
    <span class="hljs-comment">// scss: ['./assets/scss/global-variables.scss'], // alternative: scss</span>
    <span class="hljs-attr">less</span>: [],
    <span class="hljs-attr">stylus</span>: []<font></font>
  },<font></font>
  <span class="hljs-comment">/*
  ** Axios module configuration
  */</span>
  <span class="hljs-attr">axios</span>: {
    <span class="hljs-comment">// See https://github.com/nuxt-community/axios-module#options</span><font></font>
  },<font></font>
  <span class="hljs-attr">render</span>: {
    <span class="hljs-comment">// http2: {</span>
    <span class="hljs-comment">//     push: true,</span>
    <span class="hljs-comment">//     pushAssets: (req, res, publicPath, preloadFiles) =&gt; preloadFiles</span>
    <span class="hljs-comment">//     .map(f =&gt; `&lt;${publicPath}${f.file}&gt;; rel=preload; as=${f.asType}`)</span>
    <span class="hljs-comment">//   },</span>
    <span class="hljs-comment">// compressor: false,</span>
    <span class="hljs-attr">resourceHints</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">etag</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">static</span>: {
      <span class="hljs-attr">etag</span>: <span class="hljs-literal">false</span><font></font>
    }<font></font>
  },<font></font>
  <span class="hljs-comment">/*
  ** Build configuration
  */</span>
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">optimizeCss</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">filenames</span>: {
      <span class="hljs-attr">app</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[name].js'</span> : <span class="hljs-string">'js/[contenthash].js'</span>,
      <span class="hljs-attr">chunk</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[name].js'</span> : <span class="hljs-string">'js/[contenthash].js'</span>,
      <span class="hljs-attr">css</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[name].css'</span> : <span class="hljs-string">'css/[contenthash].css'</span>,
      <span class="hljs-attr">img</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'img/[contenthash:7].[ext]'</span>,
      <span class="hljs-attr">font</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'fonts/[contenthash:7].[ext]'</span>,
      <span class="hljs-attr">video</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'videos/[contenthash:7].[ext]'</span><font></font>
    },<font></font>
    ...(!isDev &amp;&amp; {<font></font>
      <span class="hljs-attr">html</span>: {
        <span class="hljs-attr">minify</span>: {
          <span class="hljs-attr">collapseBooleanAttributes</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">decodeEntities</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">minifyCSS</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">minifyJS</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">processConditionalComments</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">removeEmptyAttributes</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">removeRedundantAttributes</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">trimCustomFragments</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">useShortDoctype</span>: <span class="hljs-literal">true</span><font></font>
        }<font></font>
      }<font></font>
    }),<font></font>
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">layouts</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">pages</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">commons</span>: <span class="hljs-literal">true</span><font></font>
    },<font></font>
    <span class="hljs-attr">optimization</span>: {
      <span class="hljs-attr">minimize</span>: !isDev<font></font>
    },<font></font>
    ...(!isDev &amp;&amp; {<font></font>
      <span class="hljs-attr">extractCSS</span>: {
        <span class="hljs-attr">ignoreOrder</span>: <span class="hljs-literal">true</span><font></font>
      }<font></font>
    }),<font></font>
    <span class="hljs-attr">transpile</span>: [<span class="hljs-string">'vue-lazy-hydration'</span>, <span class="hljs-string">'intersection-observer'</span>],
    <span class="hljs-attr">postcss</span>: {
      <span class="hljs-attr">plugins</span>: {<font></font>
        ...(!isDev &amp;&amp; {<font></font>
          <span class="hljs-attr">cssnano</span>: {
            <span class="hljs-attr">preset</span>: [<span class="hljs-string">'advanced'</span>, {
              <span class="hljs-attr">autoprefixer</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">cssDeclarationSorter</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">zindex</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">discardComments</span>: {
                <span class="hljs-attr">removeAll</span>: <span class="hljs-literal">true</span><font></font>
              }<font></font>
            }]<font></font>
          }<font></font>
        })<font></font>
      },<font></font>
      ...(!isDev &amp;&amp; {<font></font>
        <span class="hljs-attr">preset</span>: {
          <span class="hljs-attr">browsers</span>: <span class="hljs-string">'cover 99.5%'</span>,
          <span class="hljs-attr">autoprefixer</span>: <span class="hljs-literal">true</span><font></font>
        }<font></font>
      }),<font></font>
<font></font>
      <span class="hljs-attr">order</span>: <span class="hljs-string">'cssnanoLast'</span><font></font>
    },<font></font>
    extend (config, ctx) {<font></font>
      <span class="hljs-keyword">const</span> ORIGINAL_TEST = <span class="hljs-string">'/\\.(png|jpe?g|gif|svg|webp)$/i'</span>
      <span class="hljs-keyword">const</span> vueSvgLoader = [<font></font>
        {<font></font>
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'vue-svg-loader'</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">svgo</span>: <span class="hljs-literal">false</span><font></font>
          }<font></font>
        }<font></font>
      ]<font></font>
      <span class="hljs-keyword">const</span> imageMinPlugin = <span class="hljs-keyword">new</span> ImageminPlugin({
        <span class="hljs-attr">pngquant</span>: {
          <span class="hljs-attr">quality</span>: <span class="hljs-string">'5-30'</span>,
          <span class="hljs-attr">speed</span>: <span class="hljs-number">7</span>,
          <span class="hljs-attr">strip</span>: <span class="hljs-literal">true</span><font></font>
        },<font></font>
        <span class="hljs-attr">jpegtran</span>: {
          <span class="hljs-attr">progressive</span>: <span class="hljs-literal">true</span><font></font>
<font></font>
        },<font></font>
        <span class="hljs-attr">gifsicle</span>: {
          <span class="hljs-attr">interlaced</span>: <span class="hljs-literal">true</span><font></font>
        },<font></font>
        <span class="hljs-attr">plugins</span>: [<font></font>
          imageminMozjpeg({<font></font>
            <span class="hljs-attr">quality</span>: <span class="hljs-number">70</span>,
            <span class="hljs-attr">progressive</span>: <span class="hljs-literal">true</span><font></font>
          })<font></font>
<font></font>
        ]<font></font>
      })<font></font>
      <span class="hljs-keyword">if</span> (!ctx.isDev) config.plugins.push(imageMinPlugin)<font></font>
<font></font>
      config.module.rules.forEach(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (rule.test.toString() === ORIGINAL_TEST) {<font></font>
          rule.test = <span class="hljs-regexp">/\.(png|jpe?g|gif|webp)$/i</span><font></font>
          rule.use = [<font></font>
            {<font></font>
              <span class="hljs-attr">loader</span>: <span class="hljs-string">'url-loader'</span>,
              <span class="hljs-attr">options</span>: {
                <span class="hljs-attr">limit</span>: <span class="hljs-number">1000</span>,
                <span class="hljs-attr">name</span>: ctx.isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'img/[contenthash:7].[ext]'</span><font></font>
              }<font></font>
            }<font></font>
          ]<font></font>
        }<font></font>
      })<font></font>
      <span class="hljs-comment">//  Create the custom SVG rule</span>
      <span class="hljs-keyword">const</span> svgRule = {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.svg$/</span>,<font></font>
        oneOf: [<font></font>
          {<font></font>
            <span class="hljs-attr">resourceQuery</span>: <span class="hljs-regexp">/inline/</span>,<font></font>
            use: vueSvgLoader<font></font>
          },<font></font>
          {<font></font>
            <span class="hljs-attr">resourceQuery</span>: <span class="hljs-regexp">/data/</span>,<font></font>
            loader: <span class="hljs-string">'url-loader'</span><font></font>
          },<font></font>
          {<font></font>
            <span class="hljs-attr">resourceQuery</span>: <span class="hljs-regexp">/raw/</span>,<font></font>
            loader: <span class="hljs-string">'raw-loader'</span><font></font>
          },<font></font>
          {<font></font>
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'file-loader'</span> <span class="hljs-comment">// By default, always use file-loader</span><font></font>
          }<font></font>
        ]<font></font>
      }<font></font>
<font></font>
      config.module.rules.push(svgRule) <span class="hljs-comment">// Actually add the rule</span><font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre></div></div><br>
<p>      </p><br>
<ul>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> imageminMozjpeg = <span class="hljs-built_in">require</span>(<span class="hljs-string">'imagemin-mozjpeg'</span>)
<span class="hljs-keyword">const</span> ImageminPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'imagemin-webpack-plugin'</span>).default</code></pre><br>
<p> 2 ,   Webpack       .</p><br>
</li>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> isDev = process.env.NODE_ENV !== <span class="hljs-string">'production'</span></code></pre><br>
<p>   ,          .</p><br>
</li>
<li><pre><code class="javascript hljs">mode: <span class="hljs-string">'universal'</span></code></pre><br>
<p> ,     SSR  (  SPA).</p><br>
</li>
<li><pre><code class="javascript hljs">...(!isDev &amp;&amp; {
<span class="hljs-attr">modern</span>: <span class="hljs-string">'client'</span>
}),</code></pre><br>
<p> ES6     .    <strong>!isDev</strong> ,  <strong>modern: 'client'</strong>       production. <strong>modern: 'client'</strong>  Nuxt  2 ,     ES6 Modules    ,   Legacy   Babel.  html   2    js  : </p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">nomodule</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"***"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"***"</span> <span class="hljs-attr">defer</span>&gt;</span></code></pre><br>
<p>      .</p><br>
</li>
<li><pre><code class="javascript hljs">head: {
<span class="hljs-attr">htmlAttrs</span>: {
  <span class="hljs-attr">lang</span>: <span class="hljs-string">'ru'</span><font></font>
},<font></font>
<span class="hljs-attr">title</span>: <span class="hljs-string">'Nuxt APP'</span>,
<span class="hljs-attr">meta</span>: [<font></font>
  { <span class="hljs-attr">hid</span>: <span class="hljs-string">'description'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'-'</span> }<font></font>
],<font></font>
<span class="hljs-attr">link</span>: [<font></font>
  { <span class="hljs-attr">rel</span>: <span class="hljs-string">'shortcut icon'</span>, <span class="hljs-attr">href</span>: <span class="hljs-string">'favicon.ico'</span> }<font></font>
]<font></font>
}</code></pre><br>
<p>  Head,       layout,      head     .   ,  Title  Description     favicon.ico (     ,    ).</p><br>
</li>
<li><pre><code class="javascript hljs">rootDir: __dirname</code></pre><br>
<p>          .</p><br>
</li>
<li><pre><code class="javascript hljs">router: {
<span class="hljs-attr">prefetchLinks</span>: <span class="hljs-literal">false</span>
}</code></pre><br>
<p>   Nuxt,    UI   .               .       ,          .   -       ,       (    ,    2G).</p><br>
</li>
<li><pre><code class="javascript hljs">loading: { <span class="hljs-attr">color</span>: <span class="hljs-string">'#ddd'</span> }</code></pre><br>
<p>    ,  .   ,          .                  XHR . </p><br>
</li>
<li><pre><code class="javascript hljs">css: [
<span class="hljs-string">'normalize.css'</span>
]</code></pre><br>
<p>     .        normalize,    .</p><br>
</li>
<li><pre><code class="javascript hljs">modules: [
<span class="hljs-string">'@nuxtjs/axios'</span>,
<span class="hljs-string">'nuxt-trailingslash-module'</span>,
<span class="hljs-string">'nuxt-webfontloader'</span>,
<span class="hljs-string">'cookie-universal-nuxt'</span>,
<span class="hljs-string">'@nuxtjs/style-resources'</span>
]</code></pre><br>
<p> Nuxt ,        Vue,      install,      .        Vue instance,        ,      .</p><br>
</li>
<li><pre><code class="javascript hljs">webfontloader: {
<span class="hljs-attr">events</span>: <span class="hljs-literal">false</span>,
<span class="hljs-attr">google</span>: {
  <span class="hljs-attr">families</span>: [<span class="hljs-string">'Montserrat:400,500,600:cyrillic&amp;display=swap'</span>]<font></font>
},<font></font>
<span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>
}</code></pre><br>
<p>    <strong>nuxt-webfontloader</strong>.     .        Google Fonts.     ,    html ,  wf-active. <strong>&amp;display=swap </strong> ,    html,     js ,     css     .           ,      ,   <strong>events: false</strong>.</p><br>
</li>
<li><pre><code class="javascript hljs">styleResources: {
<span class="hljs-attr">scss</span>: [<span class="hljs-string">'./assets/scss/global-variables.scss'</span>], <span class="hljs-comment">// alternative: scss</span>
<span class="hljs-attr">less</span>: [],
<span class="hljs-attr">stylus</span>: []<font></font>
}</code></pre><br>
<p>    <strong>@nuxtjs/style-resources</strong>.          .       SCSS   .         <strong>global-variables.scss</strong>,     ,     ,    . </p><br>
</li>
<li><pre><code class="javascript hljs">axios: {
<span class="hljs-comment">// See https://github.com/nuxt-community/axios-module#options</span>
},</code></pre><br>
<p>    axios.     .</p><br>
</li>
<li><pre><code class="javascript hljs">render: {
<span class="hljs-comment">// http2: {</span>
<span class="hljs-comment">//     push: true,</span>
<span class="hljs-comment">//     pushAssets: (req, res, publicPath, preloadFiles) =&gt; preloadFiles</span>
<span class="hljs-comment">//     .map(f =&gt; `&lt;${publicPath}${f.file}&gt;; rel=preload; as=${f.asType}`)</span>
<span class="hljs-comment">//   },</span>
<span class="hljs-comment">// compressor: false,</span>
<span class="hljs-attr">resourceHints</span>: <span class="hljs-literal">false</span>
<span class="hljs-comment">// etag: false,</span>
<span class="hljs-comment">// static: {</span>
<span class="hljs-comment">//  etag: false</span>
<span class="hljs-comment">// }</span>
},</code></pre><br>
<p>Nuxt      Web Server,    http2.       localhost,   http2  https,              .<br>
<strong>compressor</strong>  Gzip ,       (html, js, css, ).       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">https://www.npmjs.com/package/compression</a>   ,     production     <strong>compressor: false</strong>    Nuxt    render,     Nginx   ,          ,   .       Nuxt         .<br>
     etag,    Nginx,     etags.<br>
<strong>resourceHints</strong>   ,     (      prefetchLinks: false) .</p><br>
</li>
<li><pre><code class="javascript hljs">optimizeCss: <span class="hljs-literal">false</span></code></pre><br>
<p>      cssNano   ,     .</p><br>
<pre><code class="javascript hljs">filenames: {
  <span class="hljs-attr">app</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[name].js'</span> : <span class="hljs-string">'js/[contenthash].js'</span>,
  <span class="hljs-attr">chunk</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[name].js'</span> : <span class="hljs-string">'js/[contenthash].js'</span>,
  <span class="hljs-attr">css</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[name].css'</span> : <span class="hljs-string">'css/[contenthash].css'</span>,
  <span class="hljs-attr">img</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'img/[contenthash:7].[ext]'</span>,
  <span class="hljs-attr">font</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'fonts/[contenthash:7].[ext]'</span>,
  <span class="hljs-attr">video</span>: <span class="hljs-function">(<span class="hljs-params">{ isDev }</span>) =&gt;</span> isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'videos/[contenthash:7].[ext]'</span>
},</code></pre><br>
<p>Nuxt    Webpack   .    ,    development     ,   production build          <strong>contenthash</strong>.     ,       production,     js      .    ,         ,   -    .   -  ,       ,        ,                 . </p><br>
</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/vo/yj/sz/voyjszwq6ivxlgxo0ewooevccc0.jpeg"></p><br>
<p>       html  ,     0      .</p><br>
<ul>
<li><pre><code class="javascript hljs">...(!isDev &amp;&amp; {
  <span class="hljs-attr">html</span>: {
    <span class="hljs-attr">minify</span>: {
      <span class="hljs-attr">collapseBooleanAttributes</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">decodeEntities</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">minifyCSS</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">minifyJS</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">processConditionalComments</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">removeEmptyAttributes</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">removeRedundantAttributes</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">trimCustomFragments</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">useShortDoctype</span>: <span class="hljs-literal">true</span><font></font>
    }<font></font>
  }<font></font>
})</code></pre><br>
<p>  Development   html,    .</p><br>
</li>
<li><pre><code class="javascript hljs">splitChunks: {
  <span class="hljs-attr">layouts</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">pages</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">commons</span>: <span class="hljs-literal">true</span>
},</code></pre><br>
<p>     .</p><br>
</li>
<li><pre><code class="javascript hljs">optimization: {
  <span class="hljs-attr">minimize</span>: !isDev<font></font>
},</code></pre><br>
<p>  js  development.</p><br>
</li>
<li><pre><code class="javascript hljs">...(!isDev &amp;&amp; {
  <span class="hljs-attr">extractCSS</span>: {
    <span class="hljs-attr">ignoreOrder</span>: <span class="hljs-literal">true</span><font></font>
  }<font></font>
}),</code></pre><br>
<p>  Nuxt        html   style.      ,           css  .         css .   development   inline styles,   production           .<br>
<strong>ignoreOrder: true</strong>  ,        webpack       ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">#4885</a>.</p><br>
</li>
<li><pre><code class="javascript hljs">transpile: [<span class="hljs-string">'vue-lazy-hydration'</span>, <span class="hljs-string">'intersection-observer'</span>]</code></pre><br>
<p>  Babel     ,              . </p><br>
</li>
<li><pre><code class="javascript hljs">postcss: {
  <span class="hljs-attr">plugins</span>: {<font></font>
    ...(!isDev &amp;&amp; {<font></font>
      <span class="hljs-attr">cssnano</span>: {
        <span class="hljs-attr">preset</span>: [<span class="hljs-string">'advanced'</span>, {
          <span class="hljs-attr">autoprefixer</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">cssDeclarationSorter</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">zindex</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">discardComments</span>: {
            <span class="hljs-attr">removeAll</span>: <span class="hljs-literal">true</span><font></font>
          }<font></font>
        }]<font></font>
      }<font></font>
    })<font></font>
  },<font></font>
  ...(!isDev &amp;&amp; {<font></font>
    <span class="hljs-attr">preset</span>: {
      <span class="hljs-attr">browsers</span>: <span class="hljs-string">'cover 99.5%'</span>,
      <span class="hljs-attr">autoprefixer</span>: <span class="hljs-literal">true</span><font></font>
    }<font></font>
  }),<font></font>
<font></font>
  <span class="hljs-attr">order</span>: <span class="hljs-string">'cssnanoLast'</span>
}</code></pre><br>
<p>Nuxt     Postcss      .        Postcss,    .       development  ,   production  css        vendor   99.5% .      ,       .</p><br>
</li>
<li><pre><code class="javascript hljs">extend (config, ctx) {</code></pre><br>
<p>    webpack ,    loaders  test.<br>
  Webpack <code>'/\\.(png|jpe?g|gif|svg|webp)$/i'</code>     svg       url-loader file-loader          .             svg  .     .</p><br>
</li>
<li><p>          Webpack,        ,    .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ORIGINAL_TEST = <span class="hljs-string">'/\\.(png|jpe?g|gif|svg|webp)$/i'</span>
<span class="hljs-keyword">const</span> vueSvgLoader = [<font></font>
{<font></font>
    <span class="hljs-attr">loader</span>: <span class="hljs-string">'vue-svg-loader'</span>,
    <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">svgo</span>: <span class="hljs-literal">false</span><font></font>
    }<font></font>
}<font></font>
]<font></font>
<span class="hljs-keyword">const</span> imageMinPlugin = <span class="hljs-keyword">new</span> ImageminPlugin({
<span class="hljs-attr">pngquant</span>: {
<span class="hljs-attr">quality</span>: <span class="hljs-string">'5-30'</span>,
<span class="hljs-attr">speed</span>: <span class="hljs-number">7</span>,
<span class="hljs-attr">strip</span>: <span class="hljs-literal">true</span><font></font>
},<font></font>
<span class="hljs-attr">jpegtran</span>: {
<span class="hljs-attr">progressive</span>: <span class="hljs-literal">true</span><font></font>
},<font></font>
<span class="hljs-attr">gifsicle</span>: {
<span class="hljs-attr">interlaced</span>: <span class="hljs-literal">true</span><font></font>
},<font></font>
<span class="hljs-attr">plugins</span>: [<font></font>
imageminMozjpeg({<font></font>
<span class="hljs-attr">quality</span>: <span class="hljs-number">70</span>,
<span class="hljs-attr">progressive</span>: <span class="hljs-literal">true</span><font></font>
})]<font></font>
})</code></pre><br>
</li>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (!ctx.isDev) config.plugins.push(imageMinPlugin)</code></pre><br>
<p>      production</p><br>
</li>
<li><pre><code class="javascript hljs">  config.module.rules.forEach(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (rule.test.toString() === ORIGINAL_TEST) {<font></font>
      rule.test = <span class="hljs-regexp">/\.(png|jpe?g|gif|webp)$/i</span><font></font>
      rule.use = [<font></font>
        {<font></font>
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'url-loader'</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">limit</span>: <span class="hljs-number">1000</span>,
            <span class="hljs-attr">name</span>: ctx.isDev ? <span class="hljs-string">'[path][name].[ext]'</span> : <span class="hljs-string">'img/[contenthash:7].[ext]'</span><font></font>
          }<font></font>
        }<font></font>
      ]<font></font>
    }<font></font>
  })</code></pre><br>
</li>
<li><p>       svg</p><br>
<pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> svgRule = {
    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.svg$/</span>,<font></font>
    oneOf: [<font></font>
      {<font></font>
        <span class="hljs-attr">resourceQuery</span>: <span class="hljs-regexp">/inline/</span>,<font></font>
        use: vueSvgLoader<font></font>
      },<font></font>
      {<font></font>
        <span class="hljs-attr">resourceQuery</span>: <span class="hljs-regexp">/data/</span>,<font></font>
        loader: <span class="hljs-string">'url-loader'</span><font></font>
      },<font></font>
      {<font></font>
        <span class="hljs-attr">resourceQuery</span>: <span class="hljs-regexp">/raw/</span>,<font></font>
        loader: <span class="hljs-string">'raw-loader'</span><font></font>
      },<font></font>
      {<font></font>
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'file-loader'</span> <span class="hljs-comment">// By default, always use file-loader</span><font></font>
      }<font></font>
    ]<font></font>
  }<font></font>
  config.module.rules.push(svgRule) </code></pre><br>
<p>    svg</p><br>
</li>
</ul><br>
<p>   nuxt.config.js      .</p><br>
<h2 id="pervyy-zapusk"> </h2><br>
<p>   Nuxt   development.      <strong>yarn dev</strong><br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">http://localhost:3000/</a>  ,   .</p><br>
<p><img src="https://habrastorage.org/webt/yh/2h/mp/yh2hmpr0emkkvtjpyw-qis-kln0.jpeg"></p><br>
<p>  production ,  dev server   <strong>Ctrl+C</strong>    <strong>yarn buildandstart</strong></p><br>
<p>      ,      package.json.   .</p><br>
<p><img src="https://habrastorage.org/webt/jm/yh/my/jmyhmyg25uinraoych0nmuhwjek.jpeg"></p><br>
<p>    99/100</p><br>
<ol>
<li>    ,  ,    app.js    .      Google Fonts.        .   Webfonts Loader,   100/100,      .</li>
<li>   http2            html,   production     0,5-1.   (   Nuxt  Nginx).</li>
<li>  Lighthouse  4x CPU Throttling,     ,      .</li>
<li>Lighthouse          .         ,            .</li>
<li>    ,      Nginx</li>
</ol><br>
<p>   ,            ,          HighLoad  .</p><br>
<p><img src="https://habrastorage.org/webt/zl/sp/3a/zlsp3asawacw3fcm-tek337hgj4.jpeg"></p><br>
<h2 id="napolnyaem-sayt"> </h2><br>
<h3 id="sozdayom-vuex-store"> Vuex store</h3><br>
<p>      API,      ,           Vuex.</p><br>
<p>      <strong>store</strong>   <strong>index.js</strong>   </p><br>
<div class="spoiler"><b class="spoiler_title">index.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// function for Mock API</span>
<span class="hljs-keyword">const</span> sleep = <span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> setTimeout(r, m))
<span class="hljs-keyword">const</span> categories = [<font></font>
  {<font></font>
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'cats'</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?cat,cats'</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'dogs'</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?dog,dogs'</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'wolfs'</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?wolf'</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'bulls'</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?ox'</span><font></font>
  }<font></font>
]<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> state = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
  <span class="hljs-attr">categoriesList</span>: []<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mutations = {<font></font>
  SET_CATEGORIES_LIST (state, categories) {<font></font>
    state.categoriesList = categories<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> actions = {
  <span class="hljs-keyword">async</span> getCategoriesList ({ commit }) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
      <span class="hljs-keyword">await</span> commit(<span class="hljs-string">'SET_CATEGORIES_LIST'</span>, categories)<font></font>
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err)
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'  ,  '</span>)<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre></div></div><br>
<p>     Vuex <strong>  </strong>   </p><br>
<div class="spoiler"><b class="spoiler_title">Vuex </b><div class="spoiler_text"><ul>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> sleep = <span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> setTimeout(r, m))</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рд╣рдореЗрдВ Async рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рд╕рд░реНрд╡рд░ рд╕реЗ рджреЗрд░реА рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред</font></font></p><br>
</li>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> state = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
<span class="hljs-attr">categoriesList</span>: []<font></font>
})</code></pre><br>
<p>    .       .</p><br>
</li>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mutations = {<font></font>
SET_CATEGORIES_LIST (state, categories) {<font></font>
state.categoriesList = categories<font></font>
}<font></font>
}</code></pre><br>
<p> ,       .     .       .       .</p><br>
</li>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> actions = {
<span class="hljs-keyword">async</span> getCategoriesList ({ commit }) {
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
  <span class="hljs-keyword">await</span> commit(<span class="hljs-string">'SET_CATEGORIES_LIST'</span>, categories)<font></font>
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-built_in">console</span>.log(err)
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'  ,  '</span>)<font></font>
}<font></font>
}<font></font>
}</code></pre><br>
<p>   actions,   ,      ,         store         comit,        ,   ,     .      action   Nuxt       ,     axios       API.<br>
   actions      API.      actions,    .        API,         API                . </p><br>
</li>
</ul></div></div><br>
<h3 id="sozdaem-blok-kategoriy">  </h3><br>
<p>  components   commons,       .    <strong>CategoriesList.vue</strong>   :</p><br>
<div class="spoiler"><b class="spoiler_title">CategoriesList.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"$style.wrapper"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"category in categories"</span>
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"category.cSlug"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"$style.block"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nuxt-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"`/category/${category.cSlug}`"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ category.cName }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"category.cImage"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nuxt-link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">categories</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Array</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> []
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">module</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.wrapper</span> {
  <span class="hljs-attribute">display</span>: flex;
}
<span class="hljs-selector-class">.block</span> {
<span class="hljs-attribute">display</span>: flex;
<span class="hljs-attribute">flex-direction</span>: column;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div></div><br>
<ul>
<li><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">module</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.wrapper</span> {
<span class="hljs-attribute">display</span>: flex;
}
<span class="hljs-selector-class">.block</span> {
<span class="hljs-attribute">display</span>: flex;
<span class="hljs-attribute">flex-direction</span>: column;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre><br>
<p>       CSS Modules,         <strong>wrapper</strong>  <strong>wrapper_26mY3 </strong>,            .<br>
      <strong>$style</strong>   .</p><br>
</li>
<li><pre><code class="javascript hljs">props: {
<span class="hljs-attr">categories</span>: {
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">Array</span>,
  <span class="hljs-attr">default</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> []<font></font>
}<font></font>
}</code></pre><br>
<p>     ,     dump ()    .       API   .</p><br>
</li>
<li><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">nuxt-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"`/category/${category.cSlug}`"</span>&gt;</span></code></pre><br>
<p><strong>Nuxt-link</strong>     <strong>&lt;router-link&gt; </strong>,       ,      ,     ( ,       .<br>
    <strong>to</strong>     <strong>cSlug </strong>  ,           .          </p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/category/cats"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://source.unsplash.com/300x300/?cat,cats"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre><br>
<p>   dom   <strong>a href</strong>,        IObserver.       JS  ,           . </p><br>
</li>
</ul><br>
<h3 id="perepishem-kornevoy-indexvue">  index.vue</h3><br>
<p>         . </p><br>
<div class="spoiler"><b class="spoiler_title">index.vue</b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>- ""<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CategoriesList</span> <span class="hljs-attr">:categories</span>=<span class="hljs-string">"categories"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> CategoriesList <span class="hljs-keyword">from</span> <span class="hljs-string">'~~/components/common/CategoriesList'</span>
<span class="hljs-keyword">import</span> { mapState } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    CategoriesList
  },
  <span class="hljs-keyword">async</span> asyncData ({ app, route, params, error, store }) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> store.dispatch(<span class="hljs-string">'getCategoriesList'</span>)
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err)
      <span class="hljs-keyword">return</span> error({
        <span class="hljs-attr">statusCode</span>: <span class="hljs-number">404</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'      '</span>
      })
    }
  },
  <span class="hljs-attr">computed</span>: {
    ...mapState({
      <span class="hljs-attr">categories</span>: <span class="hljs-string">'categoriesList'</span>
    })
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre></div></div><br>
<ul>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> CategoriesList <span class="hljs-keyword">from</span> <span class="hljs-string">'~~/components/common/CategoriesList'</span></code></pre><br>
<p>     <strong>~~</strong>,    .</p><br>
</li>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { mapState } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span></code></pre><br>
<p>         .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> asyncData ({ app, route, params, error, store }) {
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">await</span> store.dispatch(<span class="hljs-string">'getCategoriesList'</span>)<font></font>
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-built_in">console</span>.log(err)
  <span class="hljs-keyword">return</span> error({
    <span class="hljs-attr">statusCode</span>: <span class="hljs-number">404</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'      '</span><font></font>
  })<font></font>
}<font></font>
},</code></pre><br>
<p><strong>asyncData </strong>   ,   Nuxt  .        API ,    ,       action  Vuex.       <strong>async </strong>,     Nuxt       API  . </p><br>
</li>
<li><pre><code class="javascript hljs">computed: {<font></font>
...mapState({<font></font>
  <span class="hljs-attr">categories</span>: <span class="hljs-string">'categoriesList'</span><font></font>
})<font></font>
}</code></pre><br>
<p>      <strong>categories</strong>     <strong>categoriesList</strong></p><br>
</li>
<li><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">CategoriesList</span> <span class="hljs-attr">:categories</span>=<span class="hljs-string">"categories"</span> /&gt;</span></code></pre><br>
<p>  ,    props  <strong>categories</strong></p><br>
</li>
</ul><br>
<h3 id="zapuskaem-server"> </h3><br>
<p><img src="https://habrastorage.org/webt/nv/pa/x-/nvpax-8h_109peoiauvhhnt_whw.jpeg"></p><br>
<p>    nuxt   ,     .       .</p><br>
<h3 id="sozdayom-stranicu-kategorii">  </h3><br>
<p>  pages   category       <strong>_CategorySlug.vue</strong>  :</p><br>
<div class="spoiler"><b class="spoiler_title">_CategorySlug.vue</b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ category.cName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ category.cDesc }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { mapState } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> asyncData ({ app, params, route, error }) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> app.store.dispatch(<span class="hljs-string">'getCurrentCategory'</span>, { route })
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err)
      <span class="hljs-keyword">return</span> error({
        <span class="hljs-attr">statusCode</span>: <span class="hljs-number">404</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'      '</span>
      })
    }
  },
  <span class="hljs-attr">computed</span>: {
    ...mapState({
      <span class="hljs-attr">category</span>: <span class="hljs-string">'currentCategory'</span>
    })
  },
  head () {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.category.cTitle,
      <span class="hljs-attr">meta</span>: [
        {
          <span class="hljs-attr">hid</span>: <span class="hljs-string">'description'</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.category.cMetaDescription
        }
      ]
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre></div></div><br>
<p>     _,  Nuxt ,    .<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">http://127.0.0.1:3000/category/cats</a><br>
     route   <strong>route.params.CategorySlug</strong> (  ),    <strong>cats</strong><br>
     <strong>index.vue</strong>,    </p><br>
<ul>
<li><pre><code class="javascript hljs"><span class="hljs-keyword">await</span> app.store.dispatch(<span class="hljs-string">'getCurrentCategory'</span>, { route })</code></pre><br>
<p>  actions,      ,       route. </p><br>
</li>
<li><pre><code class="javascript hljs">head () {
<span class="hljs-keyword">return</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.category.cTitle,
  <span class="hljs-attr">meta</span>: [<font></font>
    {<font></font>
      <span class="hljs-attr">hid</span>: <span class="hljs-string">'description'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.category.cMetaDescription<font></font>
    }<font></font>
  ]<font></font>
}<font></font>
}</code></pre><br>
<p>    Title  Meta description,     API.</p><br>
</li>
</ul><br>
<h3 id="izmenyaem-vuex"> Vuex</h3><br>
<div class="spoiler"><b class="spoiler_title">index.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// function for Mock API</span>
<span class="hljs-keyword">const</span> sleep = <span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> setTimeout(r, m))
<span class="hljs-keyword">const</span> categories = [<font></font>
  {<font></font>
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'cats'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?cat,cats'</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'dogs'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?dog,dogs'</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'wolfs'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?wolf'</span><font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'bulls'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?bull'</span><font></font>
  }<font></font>
]<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> state = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
  <span class="hljs-attr">categoriesList</span>: [],
  <span class="hljs-attr">currentCategory</span>: {}<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mutations = {<font></font>
  SET_CATEGORIES_LIST (state, categories) {<font></font>
    state.categoriesList = categories<font></font>
  },<font></font>
  SET_CURRENT_CATEGORY (state, category) {<font></font>
    state.currentCategory = category<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> actions = {
  <span class="hljs-keyword">async</span> getCategoriesList ({ commit }) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
      <span class="hljs-keyword">await</span> commit(<span class="hljs-string">'SET_CATEGORIES_LIST'</span>, categories)<font></font>
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err)
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'  ,  '</span>)<font></font>
    }<font></font>
  },<font></font>
  <span class="hljs-keyword">async</span> getCurrentCategory ({ commit }, { route }) {
    <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
    <span class="hljs-keyword">const</span> category = categories.find(<span class="hljs-function">(<span class="hljs-params">cat</span>) =&gt;</span> cat.cSlug === route.params.CategorySlug)
    <span class="hljs-keyword">await</span> commit(<span class="hljs-string">'SET_CURRENT_CATEGORY'</span>, category)<font></font>
  }<font></font>
}<font></font>
</code></pre></div></div><br>
<p><strong>getCurrentCategory </strong>   action    route         state. </p><br>
<h3 id="zapuskaem"></h3><br>
<p>   .</p><br>
<h2 id="sozdayom-tovary-dlya-kategoriy">   </h2><br>
<p>     JSON   .<br>
<img src="https://habrastorage.org/webt/ch/sz/iq/chsziqoqu--7izb-ap86qp347k0.jpeg"><br>
    <strong>static/mock</strong>. Nuxt     ,     static.        Axios.</p><br>
<p>    Vuex   :</p><br>
<div class="spoiler"><b class="spoiler_title">index.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// function for Mock API</span>
<span class="hljs-keyword">const</span> sleep = <span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> setTimeout(r, m))
<span class="hljs-keyword">const</span> categories = [<font></font>
  {<font></font>
    <span class="hljs-attr">id</span>: <span class="hljs-string">'cats'</span>,
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'cats'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?cat,cats'</span>,
    <span class="hljs-attr">products</span>: []<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">id</span>: <span class="hljs-string">'dogs'</span>,
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'dogs'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?dog,dogs'</span>,
    <span class="hljs-attr">products</span>: []<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">id</span>: <span class="hljs-string">'wolfs'</span>,
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'wolfs'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?wolf'</span>,
    <span class="hljs-attr">products</span>: []<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">id</span>: <span class="hljs-string">'bulls'</span>,
    <span class="hljs-attr">cTitle</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cSlug</span>: <span class="hljs-string">'bulls'</span>,
    <span class="hljs-attr">cMetaDescription</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attr">cDesc</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">cImage</span>: <span class="hljs-string">'https://source.unsplash.com/300x300/?bull'</span>,
    <span class="hljs-attr">products</span>: []<font></font>
  }<font></font>
]<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addProductsToCategory</span> (<span class="hljs-params">products, category</span>) </span>{
  <span class="hljs-keyword">const</span> categoryInner = { ...category, <span class="hljs-attr">products</span>: [] }<font></font>
  products.map(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (p.category_id === category.id) {<font></font>
      categoryInner.products.push({<font></font>
        <span class="hljs-attr">id</span>: p.id,
        <span class="hljs-attr">pName</span>: p.pName,
        <span class="hljs-attr">pSlug</span>: p.pSlug,
        <span class="hljs-attr">pPrice</span>: p.pPrice,
        <span class="hljs-attr">image</span>: <span class="hljs-string">`https://source.unsplash.com/300x300/?<span class="hljs-subst">${p.pName}</span>`</span><font></font>
      })<font></font>
    }<font></font>
  })<font></font>
  <span class="hljs-keyword">return</span> categoryInner<font></font>
}<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> state = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
  <span class="hljs-attr">categoriesList</span>: [],
  <span class="hljs-attr">currentCategory</span>: {},
  <span class="hljs-attr">currentProduct</span>: {}<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mutations = {<font></font>
  SET_CATEGORIES_LIST (state, categories) {<font></font>
    state.categoriesList = categories<font></font>
  },<font></font>
  SET_CURRENT_CATEGORY (state, category) {<font></font>
    state.currentCategory = category<font></font>
  },<font></font>
  SET_CURRENT_PRODUCT (state, product) {<font></font>
    state.currentProduct = product<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> actions = {
  <span class="hljs-keyword">async</span> getCategoriesList ({ commit }) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
      <span class="hljs-keyword">await</span> commit(<span class="hljs-string">'SET_CATEGORIES_LIST'</span>, categories)<font></font>
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err)
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'  ,  '</span>)<font></font>
    }<font></font>
  },<font></font>
  <span class="hljs-keyword">async</span> getCurrentCategory ({ commit }, { route }) {
    <span class="hljs-keyword">await</span> sleep(<span class="hljs-number">1000</span>)
    <span class="hljs-keyword">const</span> category = categories.find(<span class="hljs-function">(<span class="hljs-params">cat</span>) =&gt;</span> cat.cSlug === route.params.CategorySlug)
    <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.$axios.$get(<span class="hljs-string">'/mock/products.json'</span>)<font></font>
<font></font>
    <span class="hljs-keyword">await</span> commit(<span class="hljs-string">'SET_CURRENT_CATEGORY'</span>, addProductsToCategory(products, category))<font></font>
  }<font></font>
}<font></font>
</code></pre></div></div><br>
<p>   action <strong>getCurrentCategory </strong>,    axios   products.json.               .</p><br>
<p>     <strong>ProductBrief.vue</strong> components/category.</p><br>
<div class="spoiler"><b class="spoiler_title">ProductBrief.vue</b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"$style.wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nuxt-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"`/product/${product.pSlug}`"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ product.pName }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"product.image"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nuxt-link</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> {{ product.pPrice }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&lt;/template&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">product</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {}
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">module</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.wrapper</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span></code></pre></div></div><br>
<p> dump ,     .</p><br>
<p>    </p><br>
<div class="spoiler"><b class="spoiler_title">_CategorySlug.vue</b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ category.cName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ category.cDesc }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"$style.productList"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"product in category.products"</span>
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"product.id"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ProductBrief</span> <span class="hljs-attr">:product</span>=<span class="hljs-string">"product"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&lt;/template&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> ProductBrief <span class="hljs-keyword">from</span> <span class="hljs-string">'~~/components/category/ProductBrief'</span>
<span class="hljs-keyword">import</span> { mapState } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    ProductBrief
  },
  <span class="hljs-keyword">async</span> asyncData ({ app, params, route, error }) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> app.store.dispatch(<span class="hljs-string">'getCurrentCategory'</span>, { route })
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err)
      <span class="hljs-keyword">return</span> error({
        <span class="hljs-attr">statusCode</span>: <span class="hljs-number">404</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'      '</span>
      })
    }
  },
  <span class="hljs-attr">computed</span>: {
    ...mapState({
      <span class="hljs-attr">category</span>: <span class="hljs-string">'currentCategory'</span>
    })
  },
  head () {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: <span class="hljs-keyword">this</span>.category.cTitle,
      <span class="hljs-attr">meta</span>: [
        {
          <span class="hljs-attr">hid</span>: <span class="hljs-string">'description'</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.category.cMetaDescription
        }
      ]
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">module</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.productList</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-wrap</span>: wrap;
  <span class="hljs-attribute">justify-content</span>: space-between;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre></div></div><br>
<p>          .</p><br>
<p><img src="https://habrastorage.org/webt/1y/hb/er/1yhberk0a4gytfnejtvnovkpbxs.jpeg"></p><br>
<p> ,    150       ,     .    .</p><br>
<p>   plugins  </p><br>
<div class="spoiler"><b class="spoiler_title">vue-lazy-load.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> VueLazyload <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-lazyload'</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> (context, inject) =&gt; {<font></font>
  Vue.use(VueLazyload, {<font></font>
    <span class="hljs-attr">preLoad</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-string">'https://via.placeholder.com/300'</span>,
    <span class="hljs-comment">// eslint-disable-next-line</span>
    <span class="hljs-attr">loading</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-string">'~~/assets/svg/download.svg'</span>}</span>`</span>),
    <span class="hljs-attr">attempt</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">lazyComponent</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">observer</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">throttleWait</span>: <span class="hljs-number">500</span><font></font>
  })<font></font>
}<font></font>
</code></pre></div></div><br>
<p>       placeholder  ,      .<br>
   <strong>nuxt.config.js</strong></p><br>
<pre><code class="javascript hljs">  plugins: [<font></font>
    { <span class="hljs-attr">src</span>: <span class="hljs-string">'~~/plugins/vue-lazy-load.js'</span> }<font></font>
  ],</code></pre><br>
<p>   <strong>img src</strong></p><br>
<pre><code class="javascript hljs">      &lt;img<font></font>
        v-lazy=<span class="hljs-string">"product.image"</span>
        :<span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"$style.image"</span>
      /&gt;</code></pre><br>
<p>    </p><br>
<pre><code class="css hljs"><span class="hljs-selector-class">.image</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;<font></font>
}</code></pre><br>
<p>  </p><br>
<p><img src="https://habrastorage.org/webt/v8/vq/td/v8vqtdleoduzc3oeni0qfgqomdc.jpeg"></p><br>
<p>     .   .</p><br>
<h3 id="itogi"></h3><br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛрдб</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреАрдердм рдЯрд╛рдпрдЯреНрд╕ рдкрд░</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╣рд╛рд░</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 рд╣рд┐рд╕реНрд╕рд╛</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 рднрд╛рдЧ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 рд╣рд┐рд╕реНрд╕рд╛</font></font></a></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦ рдкрдврд╝рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдХреЛ рдзрдиреНрдпрд╡рд╛рджред </font><font style="vertical-align: inherit;">рдпрд╣ Nuxt рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╕рд┐рд░реНрдл рдПрдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЙрджрд╛рд╣рд░рдг рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рдЖрдкрдХреЛ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ, рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛, рдЖрджрд┐ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝рдирд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЯреАрдкреА, рд▓реЗрдХрд┐рди рдпрд╣ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рд╕реЗ рдмрд╣реБрдд рджреВрд░ рд╣реИред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдЧрд▓реА рдХрдбрд╝реА рдореЗрдВ, рд╣рдо рд╕рд╛рдЗрдЯ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдмрдврд╝рд╛рдПрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рдЕрднреА рддрдХ рдпрд╣ рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд╣реИред</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi490480/index.html">2 рд╢рдмреНрджреЛрдВ рдореЗрдВ рдУ рдЯрд╛рдЗрд▓рд┐рдВрдЧ-рдбрдмреНрд▓реНрдпреВрдПрдо</a></li>
<li><a href="../hi490484/index.html">Google рд╕рд╣рд╛рдпрдХ рдХреЗ рд╕рд╛рде рд╕реНрдорд╛рд░реНрдЯ рд╣реЛрдо рд╕реЗрдВрд╕рд░ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛</a></li>
<li><a href="../hi490490/index.html">рд╕рдкреНрддрд╛рд╣рд╛рдВрдд рдкрдврд╝рдирд╛: рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкрд░ рдзреНрд╡рдирд┐ рдХреЗ рдкреНрд░рднрд╛рд╡ рдкрд░ 10 рд╕рд╛рдордЧреНрд░реА - "рд╢реЛрд░ рд╕реНрд╡рдЪреНрдЫрддрд╛" рд╕реЗ рдЕрдЪреНрдЫреА рдиреАрдВрдж рдФрд░ рдЬреАрдЯреАрдбреА</a></li>
<li><a href="../hi490492/index.html">рд╡реЗрдпрд░рд╣рд╛рдЙрд╕ рд░реЛрдмреЛрдЯ рдЧреИрд░-рдорд╛рдирдХ рдЪреАрдЬреЛрдВ рдХреЛ рд╕реЙрд░реНрдЯ рдХрд░рдирд╛ рд╕реАрдЦрддрд╛ рд╣реИ</a></li>
<li><a href="../hi490494/index.html">рд╢реЙрдк рдЪреВрд╣реЛрдВ, рд╡рд┐рдбрд┐рдпрдЯреНрд╕ рдФрд░ рдЧреЗрдорд░реНрд╕: 80 рдХреЗ рджрд╢рдХ рдореЗрдВ рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдХреЗ рдЦрддрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рдЪрд╛рд░</a></li>
<li><a href="../hi490498/index.html">рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ PHP рдореЗрдВ рдПрдХ рдЕрд░реНрдз-рд╡рд┐рдХреЗрдиреНрджреНрд░реАрдХреГрдд cryptocurrency рд▓рд┐рдЦрд╛ рд╣реИред (рднрд╛рдЧ 2 - рд╡рд┐рдХрд╛рд╕)</a></li>
<li><a href="../hi490502/index.html">Ansible рдмрдирд╛рдо рдХрдардкреБрддрд▓реА</a></li>
<li><a href="../hi490510/index.html">рдХрдВрдкрдирд┐рдпрд╛рдВ 8 рдЯреНрд░рд┐рд▓рд┐рдпрди рдорд╛рд░реНрдХреЗрдЯ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреНрд░реЛрди рдкрд░ 16 рдмрд┐рд▓рд┐рдпрди рдбреЙрд▓рд░ рдЦрд░реНрдЪ рдХрд░рддреА рд╣реИрдВ</a></li>
<li><a href="../hi490512/index.html">(рд▓рдЧрднрдЧ) рдСрдЯреЛ рдЙрддреНрдкрдиреНрди рд░рдВрдЧ</a></li>
<li><a href="../hi490516/index.html">AI рдореМрдЬреВрдж рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣рдордиреЗ рдРрд╕рд╛ рдирд╣реАрдВ рд╕реЛрдЪрд╛ рд╣реИ?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>