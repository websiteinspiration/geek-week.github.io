<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏼 🔂 🚠 Rostelecom Werbebanner und wie man damit umgeht 👮 ✍️ 🤵🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Viele wissen bereits, dass Rostelecom mit Unterstützung von Mail.ru mit der Einführung seiner Werbebanner auf Websites begonnen hat, die nicht durch d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rostelecom Werbebanner und wie man damit umgeht</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493402/"><img src="https://habrastorage.org/webt/tf/gs/ve/tfgsvevdniakse3ighqxm8mfdt4.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele wissen bereits, dass </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rostelecom mit Unterstützung von Mail.ru mit der Einführung seiner Werbebanner auf Websites begonnen hat, die nicht durch das HTTPS-Protokoll geschützt sind</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie können sich vor ihrem Auftreten auf Ihrer Website schützen, indem Sie es auf HTTPS übertragen. </font><font style="vertical-align: inherit;">Aber was ist, wenn Sie keine solche Gelegenheit haben oder es für Sie zu zeitaufwändig ist? </font><font style="vertical-align: inherit;">Ich habe meine kleinen Nachforschungen angestellt und möchte einen einfachen und dennoch wirksamen Weg gegen diese Infektion aufzeigen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu diesem Thema gab es bereits Untersuchungen zu Habré, auf die ich mich verlassen habe:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie sehen während der Entwicklung keine Anzeigen? </font><font style="vertical-align: inherit;">Störung</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPI: Deep Packet INJECTION oder Verschwörungstheorie der Verschwörung zwischen RTK und MRG</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist bekannt, dass Banner implementiert werden, indem die ursprüngliche JavaScript-Datei durch eine Umleitung durch eine böswillige ersetzt wird. Und schon fügt er ein Banner auf der Webseite ein und lädt die Originaldatei hoch. Daher ist es bei der Suche nach Viren unmöglich, sofort zu erkennen, wie Werbung auf der Website geschaltet wurde, weil Die Originaldateien werden nicht geändert, und die Umleitung wird in einem bestimmten Intervall durchgeführt, und es ist ziemlich schwierig, sie zu erkennen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Recherche benötigen Sie eine Site, die das HTTP-Protokoll verwendet und JS-Dateien enthält. Als Beispiel habe ich den Standort des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Museums von Kirow genommen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mit einiger Periodizität können Banner darauf beobachtet werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/fk/2f/lhfk2fknn2m77txskd39umbmoea.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe ein spezielles </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dienstprogramm geschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sie stellt in regelmäßigen Abständen eine Anfrage unter einer bestimmten URL und vergleicht den empfangenen Inhalt mit dem vorherigen. Wenn der Inhalt der Antwort unterschiedlich ist, wird sie für das Studium gespeichert. Bei der Analyse von Anforderungen für ein kleines Skript </font></font><code>http://muzey43.ru/js/script-eye.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wurde festgestellt, dass immer derselbe Inhalt zurückgegeben wird - es erfolgt keine Umleitung. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jn/lg/1d/jnlg1dha5akq_goqg_b8m1udp5a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie erscheint dann das Banner? Bei der Untersuchung des Quellcodes einer Site wurde eine andere JS-Datei entdeckt, die von HTTP heruntergeladen wird, jedoch mit einem anderen Host : </font></font><code>http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Bei der Analyse dieser Anfrage beobachten wir regelmäßig den Empfang des Inhalts einer schädlichen Datei.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dv/ud/zn/dvudznxszrrg9y1m_snwkvbomna.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Screenshot zeigt, dass schädliche Inhalte ungefähr zweimal pro Minute heruntergeladen werden, es jedoch zu kurzen Unterbrechungen bei der Weiterleitung kommen kann. Der Inhalt der Malware ändert sich jedes Mal durch Verschleierung des Codes und enthält einen Link zum ursprünglichen Skript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Höchstwahrscheinlich gibt es eine bestimmte „weiße Liste“ von Hosts, für die die JS-Umleitung verboten ist. Zum Beispiel der Standort </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des Kulturministeriums der Region Kirow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Trotz der Tatsache, dass es über das HTTP-Protokoll funktioniert, werden keine Banner darauf angezeigt. Auf der Kirov Museums-Website gibt es jedoch ein Banner, obwohl es keine Weiterleitung für seine Skripte gibt, aber durch die Weiterleitung eines Skripts von einem anderen Host wird ein Banner darin eingebettet. Um die Sicherheitsanfälligkeit in diesem Fall zu beseitigen, reicht es höchstwahrscheinlich aus, die Datei unter Verwendung des HTTPS-Protokolls anzufordern, d. H. Ersetzen Sie einfach die Skript-URL durch</font></font><br>
<br>
<pre><code class="plaintext hljs">https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber was ist, wenn Ihre Site nicht auf der „weißen Liste“ steht und Sie Ihre eigenen Skripte verwenden müssen? Ich habe einen einfachen Weg gefunden, um eine JS-Umleitung zu vermeiden. Es reicht aus, der Skript-URL einen beliebigen Parameter hinzuzufügen: </font></font><code>https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js?banner=off</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Umleitung wird nicht ausgeführt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tt/zu/va/ttzuvamwqxv6uagryx6rljnm6k0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies geschieht wahrscheinlich, damit die Umleitung den Betrieb komplexer dynamischer JS-Sites nicht beeinträchtigt oder die erforderlichen Dateien einfach durch die Erweiterung identifiziert werden </font></font><code>.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In jedem Fall reicht es jedoch aus, den URLs von Skripten auf den Seiten Ihrer Website zufällige Parameter und Werbebanner von Rostelecom hinzuzufügen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie aus den Kommentaren richtig hervorgeht, wird die am besten geeignete Lösung für Website-Besitzer die Umstellung auf HTTPS sein, zumal einige Hosting-Unternehmen jetzt die Installation eines kostenlosen Zertifikats direkt vom Panel mit einer Schaltfläche anbieten. </font><font style="vertical-align: inherit;">Schließlich kann Rostelecom morgen den Umleitungsalgorithmus problemlos straffen, und die oben angegebene Lösung funktioniert nicht mehr. </font><font style="vertical-align: inherit;">Das Blockieren einer Umleitung durch einen Filter auf dem Client kann, wie einige vermuten, nur das Problem des Clients lösen. Es wird kein Banner geben, aber das ersetzte Skript wird nicht ersetzt, und die Funktionalität der Site kann darunter leiden.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493392/index.html">Maschinelles Lernen in Kasan oder wie Fachkräfte für maschinelles Lernen in Tatarstan ausgebildet werden</a></li>
<li><a href="../de493394/index.html">Gottes Syndrom: Die Geschichte, wie sich der Hauptspezialist für Infektionskrankheiten des Coronavirus Stavropol Territory verbreitete (a) *</a></li>
<li><a href="../de493396/index.html">Zusammenfassung zu Prognosemethoden</a></li>
<li><a href="../de493398/index.html">Kostüm</a></li>
<li><a href="../de493400/index.html">Die Japaner haben einen Weg gefunden, die Nematodenneuronen zu markieren</a></li>
<li><a href="../de493404/index.html">Wie man einen Künstler findet, um eine Site zu entwickeln</a></li>
<li><a href="../de493406/index.html">Funktionsweise des Festplattensubsystems in OpenNebula</a></li>
<li><a href="../de493408/index.html">DJI Mavic Mini Copter fiel wie eine Brechstange</a></li>
<li><a href="../de493412/index.html">Spiele mit Wifi auf ESP32</a></li>
<li><a href="../de493416/index.html">IDA Pro und Reverse Engineering-Techniken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>