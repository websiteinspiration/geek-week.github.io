<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö¥üèæ üï∑Ô∏è üî∂ Rastrille caminando en un campo limpio o c√≥mo recopilar direcciones MAC de dispositivos Wi-Fi cercanos üÖæÔ∏è ‚ôèÔ∏è üßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comienzo todos mis discursos p√∫blicos (afortunadamente, no hay tantos) mencionando expl√≠cita o impl√≠citamente la tesis "Nuestra industria es compleja,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rastrille caminando en un campo limpio o c√≥mo recopilar direcciones MAC de dispositivos Wi-Fi cercanos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503382/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comienzo todos mis discursos p√∫blicos (afortunadamente, no hay tantos) mencionando expl√≠cita o impl√≠citamente la tesis "Nuestra industria es compleja, los problemas pueden revelarse en cualquier momento, incluso el paso m√°s obvio, y es optimista suponer que todo ser√° simple y f√°cil - ingenuo" . Por extra√±o que parezca, esta idea simple, obtenida por muchos a√±os de conos de relleno, a veces es una revelaci√≥n para especialistas m√°s experimentados, aunque parece que todo el entusiasmo fren√©tico y la creencia en la infalibilidad de sus propias ideas y pr√°cticas deber√≠an haberse resistido durante mucho tiempo. Te contar√© una historia sobre esto, un ejemplo de un proyecto simple, a primera vista.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ly/vd/fg/lyvdfgr98fqlrow-vtmumb4ucbw.jpeg"><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un buen d√≠a, un amigo me lanz√≥ un enlace a una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startup interesante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Los chicos sugirieron que los representantes de las peque√±as empresas de los sectores de servicios y ventas establezcan un punto de acceso (con un portal cautivo) para sus clientes con el fin de distribuir Internet, mientras recopilan las direcciones MAC de los tel√©fonos inteligentes de las personas que pasan. El prop√≥sito de esta acci√≥n es muy simple: una gran cantidad de redes publicitarias le permiten orientar la lista de direcciones de dispositivos, por lo tanto, dirigiendo la empresa publicitaria a los usuarios que pasan, lo m√°s probable es que recibamos nuevos visitantes (porque est√° cerca y "en alg√∫n lugar ya lo vi") . Aquellos. tal distribuci√≥n de volantes virtuales. Un amigo pregunt√≥ c√≥mo se hace esto y si podemos hacerlo nuevamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una b√∫squeda r√°pida en Google sobre el tema revel√≥ el mecanismo de dicha recopilaci√≥n de datos. El adaptador WiFi se lanz√≥ en modo de escucha de aire y recorri√≥ los canales, capturando paquetes, analiz√°ndolos y agregando los datos recibidos. Tambi√©n hab√≠a utilidades abiertas listas para esto, por ejemplo, airodump-ng de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aircrack-ng</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Aquellos. para la repetici√≥n, solo necesitamos ejecutar esta utilidad, preferiblemente en un dispositivo compacto y port√°til separado, y guardar los datos recibidos en la base de datos, de la cual luego obtenemos listas listas de direcciones MAC para redes publicitarias. Parece que la tarea es simple, resuelta en una, a lo sumo: dos noches de trabajo tranquilo, casi todo est√° listo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, este nunca fue el caso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sabes, lo que est√° permitido a J√∫piter no est√° permitido al toro. </font><font style="vertical-align: inherit;">Y cuando se utilizan pagadores √∫nicos, entonces hay que sacrificar, en primer lugar, los recursos inform√°ticos y la memoria. </font><font style="vertical-align: inherit;">Adem√°s, el sacrificio de recursos es seguido por el sacrificio de desarrollo y la conveniencia de depuraci√≥n: no todos los sistemas permitir√°n arrastrar herramientas de compilaci√≥n al dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, quer√≠amos tomar algo simple y barato, por ejemplo, cajas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orange Pi Zero</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, coloque airodump-ng all√≠ y env√≠e los datos escupidos por la utilidad al servidor, donde se pueden colocar de forma segura en la base de datos. </font><font style="vertical-align: inherit;">Ten√≠a experiencia trabajando con dichos sistemas distribuidos con un centro dedicado (aunque, all√≠, las m√°quinas virtuales actuaban como caballos de batalla, atravesaban la API de la nube a trav√©s del mismo centro seg√∫n fuera necesario, pero no el punto), por lo que parte del c√≥digo migr√≥ con √©xito a un nuevo proyecto .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La herramienta para reenviar datos al servidor fue la simple aplicaci√≥n Erlang escrita, que se supon√≠a que deb√≠a extraer datos del amortiguador de √©ter (an√°lisis), serializarlos (serializaci√≥n nativa de Erlang) y transferirlos a trav√©s del socket web al servidor a trav√©s de HTTPS (sin causar sospechas) Sistemas DPI y no inventando sus propios protocolos). Los procesadores Allwinner H2 + utilizados en el Orange Pi son lo suficientemente potentes como para ensamblar y depurar directamente en el dispositivo. De nuevo, en teor√≠a, todo est√° bien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pr√°ctica ha comenzado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Como result√≥, el WiFi incorporado en el Orange Pi solo era bueno para recoger un punto de acceso y arrojar datos al servidor. Bueno, m√°s precisamente, no el adaptador en s√≠, sino el soporte de su chipset en el n√∫cleo. Para la mayor√≠a de los proyectos de IoT, esto probablemente ser√≠a suficiente. Sin embargo, est√°bamos listos para este golpe, porque un estudio preliminar del sitio web de aircrack-ng dio un muy claro y ambiguo "no funcionar√° en todas partes, si eso no es culpa nuestra, adjuntaremos una lista de conjuntos de chips probados". Casi todos los dispositivos Atheros (comprados por Qualcomm) y Ralink (comprados por MediaTek) se encontraron en la lista, lo que inspir√≥ algunas perspectivas en el caso de una transici√≥n de ARM chinos voraces a MIPS m√°s asc√©ticos de conjuntos de chips para enrutadores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, aunque todo esto va de mocos y palos, es decir prototipo: debe resolver el problema aqu√≠ y ahora. Por lo tanto, aprovechamos tales caracter√≠sticas ex√≥ticas en nuestro tiempo tecnol√≥gico (cuando la comunicaci√≥n inal√°mbrica es m√°s ligera) como un adaptador USB Wi-Fi. Estudiar la lista de compatibilidad y compararla con la variedad de la tienda m√°s cercana le dio a la v√≠ctima: el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DLink DWA-160</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la revisi√≥n C1 (esto es importante porque otras revisiones de hardware usaron un chip diferente y causaron dolor de cabeza en t√©rminos de trabajo forzado). Doble banda, que no requiere bailar con el conductor, ya que el apoyo ha estado en el n√∫cleo durante mucho tiempo, este silbato fue √∫til m√°s adelante en otros proyectos, por lo que los compr√©, probablemente todos (cinco piezas) que estaban disponibles en nuestra ciudad provincial.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bl/7t/z7/bl7tz7yaohb2gfeh1ekkjha31us.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de asegurarme de que el dispositivo funcionaba, lo conect√© a un dispositivo de placa √∫nica y apagu√© el adaptador WiFi incorporado con la expectativa de que Internet estar√≠a disponible a trav√©s de la interfaz Ethernet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/em/nk/cyemnk-n5d2lzg1aximnuzddg4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo cerdo fue puesto por aircrack-ng. Este conjunto de utilidades fue creado con el objetivo de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hackear.</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprobaciones de penetraci√≥n de WiFi, es decir fue escrito por hackers para hackers. No s√©, gracias a qu√© l√≥gica prefirieron usar el dumper inal√°mbrico de ether no en forma de un enfoque tradicional de unix, para escupir texto estructurado para su posterior procesamiento, sino para crear una interfaz de t√©rmino completa en la que mostrar informaci√≥n en tiempo casi real (y teniendo en cuenta la configuraci√≥n del terminal) por redes y dispositivos descubiertos, pero hicieron exactamente eso. S√≠, encontr√© la API de Python de un grado desconocido de preparaci√≥n para todo esto, pero, nuevamente, la ara√±a de prototipos que viv√≠a en mi cabeza prohibi√≥ estrictamente arrastrar otro idioma, cambiar a otro (recordamos, la parte del servidor ya estaba parcialmente lista y escrita estaba lejos de Python-e) o, Dios no lo quiera, implemente airodump-ng sobre la base de tcpdump. Y consecuentemente,Tuve que buscar soluciones alternativas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, los piratas inform√°ticos inal√°mbricos comenzaron a sospechar que algo tan est√∫pido constantemente en la interfaz es tal actividad, por lo que implementaron la carga peri√≥dica de todo lo encontrado y agregado en forma de archivos CSV. Con un intervalo establecido. Ya puedes vivir con eso. Por supuesto, la opci√≥n ingenua - para ejecutar la utilidad y volver a leer el archivo en un temporizador - se dio inmediatamente a mano. Al trabajar en una computadora port√°til, cuando se transfiri√≥ a una sola placa, comenz√≥ a fallar en el proceso de lectura del archivo por razones obvias: a veces la utilidad simplemente no ten√≠a tiempo para descargar todo y algunos de los datos se perdieron irremediablemente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La soluci√≥n a esto fue el mecanismo de notificaci√≥n en el n√∫cleo, que notifica las operaciones del archivo: tan pronto como mi c√≥digo vio los cambios en el archivo de datos, inici√≥ su lectura con un ligero retraso (m√°s bien, teniendo un valor puramente psicol√≥gico, tranquilice a su autor). Los experimentos mostraron que, en este caso, no se producen errores de lectura y p√©rdida de datos. Bueno, agradable, CSV parsim, poner en estructuras internas y enviar al servidor. Lo guardamos en el servidor en PostgreSQL (gracias por jsonb) y despu√©s de eso ya es posible realizar consultas, descargas de formularios, etc. Agregaremos la autorizaci√≥n m√°s simple usando una clave sim√©trica, para que no acumulemos basura all√≠ y podamos vincular los datos al punto donde est√° instalado el dispositivo, y todo parece estar bien, puedes ir a la batalla.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√≠, ahora c√≥mo. El ensamblaje de prueba de esta cadena (y la escritura y depuraci√≥n de c√≥digos realmente tom√≥ un par de noches) revel√≥ un hecho curioso: la cantidad de direcciones capturadas por d√≠a en nuestra oficina, lo suficientemente lejos de los lugares p√∫blicos transitables, fluctuaba alrededor de un par de miles de piezas. S√≠, por supuesto, hab√≠a un peque√±o hotel cerca (estaba en tiempo de aislamiento previo a la cuarentena, no se sorprenda), pero a√∫n as√≠, hay mucho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Refrescando el conocimiento de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estructura de la direcci√≥n MAC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y recordando el hecho de que los dispositivos m√≥viles a menudo generan direcciones locales para ocultar sus verdaderas direcciones MAC, modifiqu√© la parte del servidor con un filtro simple que limpia todas las direcciones locales y de difusi√≥n en la entrada. La lista se redujo en un orden de magnitud y ya parec√≠a la verdad. Todo estaba listo para pruebas de campo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como saben, cuando se cambian las ubicaciones de una oficina c√°lida y c√≥moda a condiciones de combate despiadadas, los prototipos tienden a dejar de funcionar normalmente, por lo que el proceso de implementaci√≥n debe ir acompa√±ado del suministro de un ingeniero de bolsillo que corregir√° todos los problemas emergentes. Por otro lado, tambi√©n es bien sabido que un dispositivo que no requiere baile adicional con una pandereta al comienzo de la operaci√≥n es probable que se descomponga pronto e irrevocablemente. Esto, sin duda, se reflej√≥ en las leyes de Murphy, pero, por desgracia, el autor de estas l√≠neas es demasiado vago para comprobar cu√°l, por lo tanto, acordaremos el t√©rmino "ley de maldad". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera instalaci√≥n revel√≥ de inmediato un mont√≥n de fallas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, la mayor√≠a de las placas de creaci√≥n de prototipos chinas vienen con memoria microSD a largo plazo en comparaci√≥n con los chips flash NAND / NOR. Se hace una excepci√≥n solo para SoC potente, claramente redundante para esta tarea. Por desgracia, MicroSD es el dolor de cabeza inmediato del operador: la oxidaci√≥n de las almohadillas, la falla de las tarjetas SD, la dependencia de los contactos de la temperatura dentro de la carcasa (lo cual es considerable, los chips chinos no son muy eficientes energ√©ticamente, y las placas a menudo se calculan completamente en funci√≥n de consumo m√°ximo de energ√≠a, por lo que sin un radiador adicional, bueno, de ninguna manera). Por lo tanto, result√≥ que cuando se desconect√≥ la alimentaci√≥n del dispositivo, el sistema entr√≥ en un estado inoperable: los archivos con el c√≥digo de bytes ERTS se da√±aron, despu√©s del reinicio, la aplicaci√≥n se neg√≥ a funcionar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo momento desagradable: en el punto de instalaci√≥n, Internet fue proporcionado por un enrutador LTE y, por decirlo suavemente, de calidad mediocre, a diferencia de un cable de oficina. La red se encendi√≥ constantemente, la aplicaci√≥n a menudo se reconect√≥ o incluso muri√≥ por mensajes acumulados en las colas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, ambos problemas son superables, por ejemplo, la p√©rdida de datos se eliminar√≠a al buscar la combinaci√≥n √≥ptima de una buena tarjeta microSD y la configuraci√≥n del sistema de archivos, y la inestabilidad de la conexi√≥n podr√≠a compensarse mediante la agregaci√≥n de datos preliminares, sesiones de env√≠o cortas, tiempo de espera, etc. Pero los problemas que se han revelado son una ocasi√≥n para reflexionar sobre si se ha elegido el camino correcto. La necesidad de una conexi√≥n permanente al servidor pone fin a la recopilaci√≥n de datos de eventos, cuando el dispositivo se cuelga de una bater√≠a externa y se arroja a una mochila, cuyo propietario va a un evento masivo, donde, por supuesto, no puede esperar la estabilidad de la conexi√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consecuencia, el siguiente paso fue abandonar la parte del servidor y localizar el almac√©n de datos directamente en el dispositivo. Adem√°s, para evitar experimentos largos y muy tristes con tarjetas SD, se decidi√≥ utilizar modelos de placa de prueba con chips flash en la pr√≥xima iteraci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ese momento, record√© que en mi colecci√≥n hab√≠a una maravillosa tabla </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carambola 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de los camaradas lituanos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8Devices</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Y si va a su sitio, puede encontrar un dispositivo a√∫n m√°s compacto en el mismo chip llamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Centipede</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Experimentos previos con esta clase de dispositivos mostraron que Erlang encaja completamente en los 16 MB de memoria flash asignados (y queda un poco para la aplicaci√≥n). El √∫nico inconveniente (que es m√°s bien un plus) es el MIPS de baja potencia y la necesidad de compilaci√≥n cruzada, lo que hace que construir una aplicaci√≥n Erlang sea un poco m√°s trivial. Pero ya era una ruta conocida, as√≠ que ped√≠ un par de ciempi√©s, y hasta ahora he portado la versi√≥n existente que funciona con el servidor a Carambol.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ll/x6/sq/llx6sqtfo4vwd4bvbi8tvvcmzsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando llegaron los componentes, comenz√≥ una nueva fase. El chip AR9331 fue exitosamente soportado por aircrack-ng fuera de la caja, los datos se pueden tomar de la interfaz Ethernet, las √∫ltimas versiones de OpenWRT y ERTS se han recopilado y probado con √©xito. La aplicaci√≥n se reescribi√≥: parte del c√≥digo se movi√≥ al c√≥digo del dispositivo, los datos se acumularon en un proceso separado y se volcaron peri√≥dicamente a un archivo en forma de un t√©rmino de Erlang serializado. Para esto se dibuj√≥ la interfaz web m√°s simple que recibe datos a trav√©s de websocket. Los puertos para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inotify</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erlexec se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compilan de forma segura con OpenWRT.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo una cosa confundida: 300 kilobytes permanecieron en los datos. No es tan peque√±o si solo almacena las direcciones MAC de los dispositivos del cliente, pero airodump-ng le brinda informaci√≥n mucho m√°s interesante, incluidas las direcciones de los puntos de acceso, sus ESSID, etc., que tambi√©n ser√≠a bueno recordar. Por si acaso. Bien, actuaremos seg√∫n las circunstancias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recopilamos, verificamos. Un problema se revela sobre la marcha. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openwrt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como todos sabemos, esta es una compilaci√≥n de Linux tan minimalista que est√° dise√±ada espec√≠ficamente para dispositivos con memoria limitada. Como resultado, arroj√≥ desde all√≠ que era posible tirar sin dolor y simplific√≥ lo que podr√≠a simplificarse, incluido el modo multijugador. Aquellos. Es una pr√°ctica com√∫n cuando el c√≥digo comienza desde la ra√≠z y funciona con los m√°ximos privilegios, lo que, por supuesto, facilita los problemas relacionados con los grupos, los usuarios y el control de sus acciones. S√≠, s√≠, la letra S en la abreviatura IoT es responsable de la seguridad. El problema es que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erlexec</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que sol√≠a ejecutar y administrar airodump-ng, no puede realizar operaciones desde la ra√≠z; para esto, necesita un usuario adicional, en nombre del cual generar√° los procesos asignados a √©l. Y al crear un usuario adicional con un nivel de privilegio diferente ... correctamente, evita que airodump llegue al dispositivo de red. Desatornillar esta restricci√≥n de la biblioteca parec√≠a ser un proceso lento, por lo que erlexec fue reemplazado por puertos, el mecanismo incorporado para iniciar procesos de terceros en Erlang. Un poco, pero desagradable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, los dispositivos se reciben, se renuevan e incluso funcionan en condiciones de invernadero. Cogemos la bater√≠a, tiramos la caja en la mochila, vamos al centro comercial. Al d√≠a siguiente, observamos el resultado, un fiasco, un archivo de datos de longitud cero, o no hab√≠a suficiente espacio o una distorsi√≥n de la potencia no funcion√≥ en un muy buen momento. Corregimos el c√≥digo para que el guardado ocurra en dos etapas: primero se cre√≥ un archivo temporal y luego se reemplaz√≥ el actual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, las manos no pudieron comprobar la operatividad de esta opci√≥n, el pr√≥ximo juguete, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apareci√≥ Onion Omega2 +</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el Mediatek 7688. Al igual que sus hermanos, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el dise√±ador de LinkIt Smart 7688</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , hab√≠a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muchas cosas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero lo m√°s importante es el doble de memoria flash, lo que significa que ya no puede preocuparse por la falta de espacio para el almacenamiento de datos. Bueno </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosotros ordenamos, espera. Mes. Dos. Estalla la paciencia: escribimos a los estadounidenses sobre el tema ‚Äú¬øD√≥nde est√°n los productos, Zin?‚Äù. Silencio. Abrir una disputa en PayPal. Los estadounidenses est√°n despertando. Dicen: "Oh, nuestro sistema de aceptaci√≥n de pedidos ha fallado, ahora enviaremos todo". Env√≠an, esperamos tres semanas. Fuh, el dispositivo est√° disponible e incluso funciona.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yb/3a/ph/yb3aphpjdskqkkfcqlzw25pobuc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ tenemos que hacer una peque√±a digresi√≥n: a pesar del hecho de que ten√≠a varias placas LinkIt Smart a poca distancia, no las consideraba como una plataforma, porque al comienzo de la saga, un intento de usarlas como dispositivos de captura fall√≥. Luego, los controladores para el chip se suministraron en forma de m√≥dulos ensamblados para versiones espec√≠ficas del n√∫cleo y, aparentemente, esto se convirti√≥ en la causa de la inoperancia. En las √∫ltimas versiones de OpenWRT, aparecieron tanto el soporte nativo para 7688 como un controlador abierto, por lo que esta es una ocasi√≥n para reconsiderar el enfoque de estos dispositivos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, era habitual usar WiFi directamente en el chip para el prop√≥sito previsto; despu√©s de todo, el dispositivo necesita al menos alguna interfaz de control y tambi√©n en el campo, al menos para entender si funciona o no. Observar los datos obtenidos tambi√©n ser√≠a √∫til. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consecuencia, combinamos los enfoques anteriores: utilizamos la √∫nica interfaz USB que se muestra en el MiniDoc para un silbato WiFi para escanear el espacio, y el WiFi incorporado, para controlar el dispositivo como un punto de acceso de baja potencia. Recopilamos, verificamos, todo funciona.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el apetito viene con comer. Para empezar, el archivo de datos en forma de serializaci√≥n de Erlang es una gran cantidad de man√≠acos reales, y una gama ligeramente m√°s amplia de profesionales especialmente capacitados necesita algo m√°s simple. Una vez m√°s, adem√°s de agregar datos de airodump, tambi√©n me gustar√≠a el tiempo de medici√≥n exacto y, preferiblemente, al menos alg√∫n tipo de referencia a la ubicaci√≥n del dispositivo en el espacio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Incorporamos entre un silbato WiFi y un dispositivo concentrador USB. Los ajustes (y dependen de la posici√≥n del dispositivo en el bus en el caso de OpenWRT) son boscosos, pero estos son peque√±os detalles. Correcto. Sacamos el receptor USB-GPS de los escombros, afortunadamente, ya est√° probado y con el </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">c√≥digo</font></a><font style="vertical-align: inherit;"> escrito.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lisis NMEA-0183 (el c√≥digo, por supuesto, a√∫n ten√≠a que corregirse). Verificamos: el dispositivo no es detectado de manera segura por el sistema, claramente hay una falta de controladores. Recopilamos los controladores serie USB y los dejamos caer en el dispositivo, tambi√©n en silencio. Luego recordamos que en sistemas grandes el silbato GPS no se detect√≥ como ttyUSBx, sino como ttyACMx, es decir M√≥dem USB GSM. Bueno, bien, la segunda llamada para agregar controladores, √©xito.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tomamos el c√≥digo, lo integramos en la aplicaci√≥n. </font><font style="vertical-align: inherit;">Agregue sqlite3 a la aplicaci√≥n como almacenamiento. </font><font style="vertical-align: inherit;">Ahora no ser√° necesario verificar la disponibilidad del registro en el estado y, en general, el trabajo con datos se simplifica a un peque√±o n√∫mero de l√≠neas. </font><font style="vertical-align: inherit;">En conjunto, ense√±amos al agregar datos para tomar lecturas de GPS, corregimos el c√≥digo JS en la cara para mostrar en caso de un conjunto de datos incompleto (puede ocurrir cuando el GPS a√∫n no ha captado sat√©lites y los datos de escaneo a√©reo ya est√°n llegando). </font><font style="vertical-align: inherit;">Verificamos el trabajo, parece vivir. </font><font style="vertical-align: inherit;">Puedes declarar una victoria provisional.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ly/vd/fg/lyvdfgr98fqlrow-vtmumb4ucbw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante un par de semanas de trabajo ininterrumpido, muchos datos tanto en estaciones en el aire como en clientes. </font><font style="vertical-align: inherit;">Ahora estoy luchando con la tentaci√≥n de ofrecer este dispositivo a infobes para controlar la transmisi√≥n en los territorios encomendados y al estado para controlar el movimiento de los tel√©fonos de los ciudadanos. </font><font style="vertical-align: inherit;">Es una broma, por supuesto, ellos mismos ya lo saben todo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, todas las pruebas descritas anteriormente son solo un proyecto favorito con una complejidad muy baja (casi de inmediato qued√≥ claro qu√© hacer y c√≥mo), la falta de desarrollo de hardware (hola, f√≠sica) y acceso a un producto algo m√°s o menos completo. </font><font style="vertical-align: inherit;">No, por supuesto, no se puede descartar que el autor de estas l√≠neas sea un denso aficionado, y los verdaderos gur√∫s van as√≠ en una noche entre el t√© de la tarde y una copa de co√±ac, pero hasta ahora la experiencia ha demostrado solo una cosa: las TI son complicadas y el optimismo se castiga financiera y reputacionalmente. y motivacionalmente, y aquellos que dicen "todo es simple" son genios o delincuentes, y el segundo es m√°s probable.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es503364/index.html">HandsAppMVP: arquitectura iOS para la subcontrataci√≥n de desarrollo de estudio</a></li>
<li><a href="../es503366/index.html">¬øPor qu√© un gui√≥n se convierte en una pregunta? O problemas con la codificaci√≥n de datos en SQL</a></li>
<li><a href="../es503368/index.html">Gigantoman√≠a: ¬øpor qu√© los juegos modernos pesan tanto?</a></li>
<li><a href="../es503372/index.html">Ethereum 2.0 puede retrasarse nuevamente debido a errores, problemas y competidores</a></li>
<li><a href="../es503380/index.html">Empleos Asincr√≥nicos en Django con Apio</a></li>
<li><a href="../es503386/index.html">Entrenador √°gil persona sana</a></li>
<li><a href="../es503388/index.html">Digitalizaci√≥n del p√°nico: DIT de Mosc√∫ contra moscovitas - una mesa redonda el 23 de mayo</a></li>
<li><a href="../es503390/index.html">¬øPor qu√© Intel apuesta al desarrollo de chips para el genio de Jim Keller?</a></li>
<li><a href="../es503394/index.html">Experiencia de inversi√≥n en acciones</a></li>
<li><a href="../es503398/index.html">C√≥mo hacer un modelado tem√°tico de un foro r√°pidamente o qu√© molesta a las personas con enfermedad cel√≠aca</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>