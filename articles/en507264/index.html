<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📊 👨‍💻 🌮 New Features in Python 3.9 ⛄️ 👞 🍋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A review of the best features included in the latest Python iteration. 
 
 
 
 The time has come, the release of a new version of Python is inevitable...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>New Features in Python 3.9</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillfactory/blog/507264/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A review of the best features included in the latest Python iteration. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/32d/71f/08d/32d71f08df4e473dca09b4146a3a20db.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The time has come, the release of a new version of Python is inevitable. </font><font style="vertical-align: inherit;">It is now in beta (3.9.0b3), but soon we will see the full version of Python 3.9. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Some of the newest features are incredibly interesting, and it will be amazing to see their use after release. </font><font style="vertical-align: inherit;">We will consider the following:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dictionary Combination Operators</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type hinting</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two new string methods</font></font></b></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New Python Parser</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is very cool</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's first look at the new features and how we will use them.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dictionary Combination</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the new and already my favorite features with syntax. </font><font style="vertical-align: inherit;">If we have two dictionaries </font></font><code> a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that we need to combine, we now use the union operators. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have the merge operator “ </font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”:</font></font><br>
<br>
<pre><code class="python hljs">a = {<span class="hljs-number">1</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">2</span>: <span class="hljs-string">'b'</span>, <span class="hljs-number">3</span>: <span class="hljs-string">'c'</span>}<font></font>
b = {<span class="hljs-number">4</span>: <span class="hljs-string">'d'</span>, <span class="hljs-number">5</span>: <span class="hljs-string">'e'</span>}<font></font>
c = a | b<font></font>
print(c)</code></pre><br>
<pre><code class="python hljs">[Out]: {<span class="hljs-number">1</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">2</span>: <span class="hljs-string">'b'</span>, <span class="hljs-number">3</span>: <span class="hljs-string">'c'</span>, <span class="hljs-number">4</span>: <span class="hljs-string">'d'</span>, <span class="hljs-number">5</span>: <span class="hljs-string">'e'</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the update statement “ </font></font><code>|=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”, which updates the source dictionary:</font></font><br>
<br>
<pre><code class="python hljs">a = {<span class="hljs-number">1</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">2</span>: <span class="hljs-string">'b'</span>, <span class="hljs-number">3</span>: <span class="hljs-string">'c'</span>}<font></font>
b = {<span class="hljs-number">4</span>: <span class="hljs-string">'d'</span>, <span class="hljs-number">5</span>: <span class="hljs-string">'e'</span>}<font></font>
a |= b<font></font>
print(a)</code></pre><br>
<pre><code class="python hljs">[Out]: {<span class="hljs-number">1</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">2</span>: <span class="hljs-string">'b'</span>, <span class="hljs-number">3</span>: <span class="hljs-string">'c'</span>, <span class="hljs-number">4</span>: <span class="hljs-string">'d'</span>, <span class="hljs-number">5</span>: <span class="hljs-string">'e'</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If our dictionaries have a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a key-value pair from the second dictionary will be used:</font></font><br>
<br>
<pre><code class="python hljs">a = {<span class="hljs-number">1</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">2</span>: <span class="hljs-string">'b'</span>, <span class="hljs-number">3</span>: <span class="hljs-string">'c'</span>, <span class="hljs-number">6</span>: <span class="hljs-string">'in both'</span>}<font></font>
b = {<span class="hljs-number">4</span>: <span class="hljs-string">'d'</span>, <span class="hljs-number">5</span>: <span class="hljs-string">'e'</span>, <span class="hljs-number">6</span>: <span class="hljs-string">'but different'</span>}<font></font>
print(a | b)</code></pre><br>
<pre><code class="python hljs">[Out]: {<span class="hljs-number">1</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">2</span>: <span class="hljs-string">'b'</span>, <span class="hljs-number">3</span>: <span class="hljs-string">'c'</span>, <span class="hljs-number">6</span>: <span class="hljs-string">'but different'</span>, <span class="hljs-number">4</span>: <span class="hljs-string">'d'</span>, <span class="hljs-number">5</span>: <span class="hljs-string">'e'</span>}</code></pre><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dictionary update using iterations</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another interesting behavior of the “ </font></font><code>|=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">” </font><font style="vertical-align: inherit;">operator </font><font style="vertical-align: inherit;">is the ability to update the dictionary with new key-value pairs using an iterative object — for example, a list or generator:</font></font><br>
<br>
<pre><code class="python hljs">a = {<span class="hljs-string">'a'</span>: <span class="hljs-string">'one'</span>, <span class="hljs-string">'b'</span>: <span class="hljs-string">'two'</span>}<font></font>
b = ((i, i**<span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>))<font></font>
a |= b<font></font>
print(a)</code></pre><br>
<pre><code class="python hljs">[Out]: {<span class="hljs-string">'a'</span>: <span class="hljs-string">'one'</span>, <span class="hljs-string">'b'</span>: <span class="hljs-string">'two'</span>, <span class="hljs-number">0</span>: <span class="hljs-number">0</span>, <span class="hljs-number">1</span>: <span class="hljs-number">1</span>, <span class="hljs-number">2</span>: <span class="hljs-number">4</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we try to repeat the same with the standard union operator “ </font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">” we get </font></font><code>TypeError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, because it will only allow joins between types </font></font><code>dict</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6ae/9a9/448/6ae9a94487206239802252af5900ea9a.png" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type hinting</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Python is dynamically typed, that is, we do not need to specify data types in our code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is fine, but sometimes it can be confusing, and suddenly Python's flexibility becomes more unpleasant than anything else. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Starting with version 3.5, we could specify types, but it was rather cumbersome. The current update has really changed the approach, let's see an example: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7d0/158/e27/7d0158e27f37b61aaed456512ffc023f.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our function, </font></font><code>add_int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we clearly want to add two identical numbers (for some mysterious undefined reason). But our editor does not know this, and it is perfectly normal to connect two lines using “ </font></font><code>+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”, so we will not see any warning. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we can specify the expected type as </font></font><code> int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Using this, our editor immediately detects the problem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We can also get information about the expected types, for example: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/86c/fe8/ebe/86cfe8ebe10218feb8794836f05c55ed.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Type hinting can be used everywhere - and thanks to the new syntax it now looks much cleaner:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a15/9e3/525/a159e352582307b6260d7553dfd50dda.png" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String Methods</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Not as spectacular as the other new features, but still worth mentioning, as this can be useful. </font><font style="vertical-align: inherit;">Two new string methods have been added for removing prefixes and suffixes:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-string">"Hello world"</span>.removeprefix(<span class="hljs-string">"He"</span>)</code></pre><br>
<pre><code class="python hljs">[Out]: <span class="hljs-string">"llo world"</span></code></pre><br>
<pre><code class="python hljs">Hello world<span class="hljs-string">".removesuffix("</span>ld<span class="hljs-string">")</span></code></pre><br>
<pre><code class="python hljs">[Out]: <span class="hljs-string">"Hello wor"</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New parser</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is more of a hidden change, but it may be one of the most significant changes for the future development of Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Python currently uses a grammar based primarily on LL (1), which in turn can be parsed by the LL (1) parser, which parses the code from top to bottom, from left to right, with the ability to view only one token. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I have almost no idea how this works, but I can tell you about several actual problems in Python due to the use of this method:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python contains non-LL (1) grammar; </font><font style="vertical-align: inherit;">because of this, some parts of the current grammar use workarounds, creating unnecessary complexity.</font></font></li>
<li>LL(1)     Python (   ). <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a> ,              (  SyntaxError):<br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">with</span> (open(<span class="hljs-string">"a_really_long_foo"</span>) <span class="hljs-keyword">as</span> foo,<font></font>
      open(<span class="hljs-string">"a_really_long_bar"</span>) <span class="hljs-keyword">as</span> bar):
    <span class="hljs-keyword">pass</span>
</code></pre><br>
</li>
<li>-   (    )             .             ,   ,  Python, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All of these factors (and many others that I just can't understand) have one big impact on Python; </font><font style="vertical-align: inherit;">they limit the development of the language. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The new </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEG-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> based parser </font><font style="vertical-align: inherit;">will give Python developers much more flexibility - and we'll start to notice this starting with Python 3.10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is what we will see in future Python 3.9. </font><font style="vertical-align: inherit;">If you are impatient, the latest beta version - 3.9.0b3 - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is available here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/kl/lr/rdkllrbtrth_kdpceb-vxzrxl1o.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Learn the details of how to get a sought-after profession from scratch or Level Up in skills and salary by taking paid SkillFactory online courses:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Machine Learning Course (12 weeks)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Scientist Profession Course (24 months) </font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Profession Data Analyst Course (18 months)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python for Web Development Course (9 months)</font></font></a></li>
</ul> <br>
<br clear="left">
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read more</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Data Scientist     </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  Data Scientist  -</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">    Data Science</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Data Science  :   «data»</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Data Sciene  :   Decision Intelligence</a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en507250/index.html">Defining a winning poker hand using map / reduce in JavaScript</a></li>
<li><a href="../en507254/index.html">Zabbix - expanding macro borders</a></li>
<li><a href="../en507256/index.html">Peter Hinchens: Psychopath Source Code</a></li>
<li><a href="../en507258/index.html">Bonuses, benefits and bonuses in IT: the results of Habr Career research</a></li>
<li><a href="../en507260/index.html">Fast Lifehack for Application Growth - ASO in Other Languages</a></li>
<li><a href="../en507270/index.html">Selecting Dependencies for a Project</a></li>
<li><a href="../en507272/index.html">How the news affects the stock market: in the US, the shares of arms manufacturers rose amid protests</a></li>
<li><a href="../en507280/index.html">I dreamed of breaking out of Uzbekistan and becoming a cool developer. I don’t want anymore - but development doesn’t let go</a></li>
<li><a href="../en507288/index.html">A bit about the algorithms and protocols of safe and reliable communication of a user group</a></li>
<li><a href="../en507292/index.html">Admission to the Moscow Institute of Physics and Technology continues</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>