<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏼‍🤝‍🧑🏼 🅾️ 👩🏽‍🌾 Formentwicklung reagieren. KISS, YAGNI, DRY Prinzipien in der Praxis 👩‍❤️‍👩 🌫️ ◻️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, in diesem Tutorial werden wir uns ansehen, wie man in React eine sehr einfache, aber kontrollierte Form entwickelt, die sich auf die Qualität d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Formentwicklung reagieren. KISS, YAGNI, DRY Prinzipien in der Praxis</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495518/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo, in diesem Tutorial werden wir uns ansehen, wie man in React eine sehr einfache, aber kontrollierte Form entwickelt, die sich auf die Qualität des Codes konzentriert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Entwicklung unserer Form folgen wir den Prinzipien von „KISS“, „YAGNI“, „DRY“. </font><font style="vertical-align: inherit;">Um dieses Tutorial erfolgreich abzuschließen, müssen Sie diese Prinzipien nicht kennen, ich werde sie auf dem Weg erklären. </font><font style="vertical-align: inherit;">Ich glaube jedoch, dass Sie das moderne Javascript gut beherrschen und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in React denken</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können </font><font style="vertical-align: inherit;">.</font></font><a name="habracut"></a> <br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial Struktur:</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zur Sache! </font><font style="vertical-align: inherit;">Schreiben eines einfachen Formulars mit KISS und YAGNI</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring und TROCKEN</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was kann man noch tun?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh nein! </font><font style="vertical-align: inherit;">Bitte nicht!</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></a></li>
</ul><br>
<br>
<hr><br>
<a name="react-form-with-kiss-and-yagni"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zur Sache! </font><font style="vertical-align: inherit;">Schreiben eines einfachen Formulars mit KISS und YAGNI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen wir uns also vor, wir haben die Aufgabe, ein Autorisierungsformular zu implementieren:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> logInData = {
  <span class="hljs-attr">nickname</span>: <span class="hljs-string">'Vasya'</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">'pupkin@gmail.com'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'Reac5$$$'</span>,<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/um/1u/vm/um1uvmjncpnlgaabmaui6rscw0s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir beginnen unsere Entwicklung mit der Analyse der Prinzipien von KISS und YAGNI, wobei wir den Rest der Prinzipien vorübergehend vergessen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KISS - "Lass den Code einfach und dumm." Ich denke, Sie kennen das Konzept des einfachen Codes. Aber was bedeutet "dummer" Code? Nach meinem Verständnis ist dies Code, der das Problem mit der minimalen Anzahl von Abstraktionen löst, während die Verschachtelung dieser Abstraktionen ineinander ebenfalls minimal ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YAGNI - "Du wirst es nicht brauchen." Der Code sollte nur das tun können, wofür er geschrieben wurde. Wir erstellen keine Funktionen, die später benötigt werden oder die die Anwendung unserer Meinung nach verbessern. Wir tun nur das, was speziell für die Umsetzung der Aufgabe benötigt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Befolgen wir diese Grundsätze genau, aber berücksichtigen wir auch:</font></font><br>
<br>
<ul>
<li><code>initialData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>onSubmit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kommt von oben (dies ist eine nützliche Technik, insbesondere wenn das Formular verarbeitet werden kann </font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gleichzeitig)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muss für jedes Feld haben </font></font><code>label</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns außerdem die Stilisierung verpassen, da sie für uns nicht interessant und gültig ist, da dies ein Thema für ein separates Tutorial ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte implementieren Sie das Formular selbst nach den oben beschriebenen Grundsätzen.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meine Formularimplementierung</font></font></b><div class="spoiler_text"> <div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"> <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your nickname
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your email
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your password
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
    </code></pre><br>
 </div></div><br>
 <img src="https://habrastorage.org/webt/kv/i6/l0/kvi6l0hduiubopcittxuxczjqby.png"><br>
</div></div><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ihre Entscheidung ist höchstwahrscheinlich etwas anders, weil jeder Entwickler anders denkt. </font><font style="vertical-align: inherit;">Sie können für jedes Feld einen eigenen Status erstellen oder Handlerfunktionen in einer separaten Variablen platzieren. Dies ist in jedem Fall nicht wichtig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie jedoch sofort eine Handlerfunktion für alle Felder erstellt haben, ist dies nicht mehr die „dümmste“ Lösung für das Problem. </font><font style="vertical-align: inherit;">In dieser Phase ist es unser Ziel, den einfachsten und "dümmsten" Code zu erstellen, damit wir später das gesamte Bild betrachten und die beste Abstraktion auswählen können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie genau den gleichen Code haben, ist das cool und bedeutet, dass unser Denken konvergiert! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weiter werden wir mit diesem Code arbeiten. </font><font style="vertical-align: inherit;">Es ist einfach, aber alles andere als ideal.</font></font><br>
<br>
<hr><br>
<a name="refactoring-and-dry"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring und TROCKEN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist Zeit, sich mit dem DRY-Prinzip zu befassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DRY, vereinfachte Formulierung - "Duplizieren Sie Ihren Code nicht." </font><font style="vertical-align: inherit;">Das Prinzip scheint einfach zu sein, hat aber einen Haken: Um die Codeduplizierung zu beseitigen, müssen Sie Abstraktionen erstellen. </font><font style="vertical-align: inherit;">Wenn diese Abstraktionen nicht gut genug sind, werden wir das KISS-Prinzip verletzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist auch wichtig zu verstehen, dass DRY nicht benötigt wird, um Code schneller zu schreiben. </font><font style="vertical-align: inherit;">Ihre Aufgabe ist es, das Lesen und die Unterstützung unserer Lösung zu vereinfachen. </font><font style="vertical-align: inherit;">Beeilen Sie sich daher nicht, sofort Abstraktionen zu erstellen. </font><font style="vertical-align: inherit;">Es ist besser, einen Teil des Codes einfach zu implementieren und dann zu analysieren, welche Abstraktionen Sie erstellen müssen, um das Lesen des Codes zu vereinfachen und die Anzahl der Stellen für Änderungen zu verringern, wenn sie benötigt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Checkliste der korrekten Abstraktion:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Name der Abstraktion entspricht voll und ganz ihrem Zweck</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Abstraktion erfüllt eine bestimmte, verständliche Aufgabe</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Lesen des Codes, aus dem die Abstraktion extrahiert wurde, wurde verbessert</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommen wir also zum Refactoring. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wir haben doppelten Code ausgesprochen:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/sl/u5/1t/slu51tnyjsk5ki1kowgso6qx5mk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Code dupliziert eine Zusammensetzung von 2 Elementen: </font></font><code>label</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Lassen Sie uns sie zu einer neuen Abstraktion zusammenführen </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ff/wi/j5/ffwij5ors822a6fu8n7_ciuwe3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sieht </font><font style="vertical-align: inherit;">unsere so </font><font style="vertical-align: inherit;">aus:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ns/ah/yi/nsahyidxew9tz3tqub5mcz09184.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Lesen ist einfacher geworden. </font><font style="vertical-align: inherit;">Der Name der Abstraktion entspricht der Aufgabe, die sie löst. </font><font style="vertical-align: inherit;">Der Zweck der Komponente liegt auf der Hand. </font><font style="vertical-align: inherit;">Der Code ist weniger geworden. </font><font style="vertical-align: inherit;">Wir gehen also in die richtige Richtung! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt ist klar, dass die </font></font><code>InputField.onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logik dupliziert ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was dort passiert, kann in zwei Phasen unterteilt werden:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> stage1 = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.target.value;
<span class="hljs-keyword">const</span> stage2 = <span class="hljs-function"><span class="hljs-params">password</span> =&gt;</span> setLogInData({ ...logInData, password });
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/n-/_o/dq/n-_odqnut4_5zg9-48xvusajjlg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Funktion beschreibt die Details zum Abrufen des Werts aus dem Ereignis </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wir haben die Wahl zwischen zwei Abstraktionen, in denen wir diese Logik speichern können: </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um richtig zu bestimmen, auf welche der Abstraktionen wir unseren Code verweisen müssen, müssen wir uns der vollständigen Formulierung des DRY-Prinzips zuwenden: „Jeder Teil des Wissens sollte eine eindeutige, konsistente und maßgebliche Darstellung innerhalb des Systems haben.“ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Teil des Wissens im konkreten Beispiel besteht darin, zu wissen, wie der Wert des Ereignisses in ermittelt werden kann </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn wir dieses Wissen in unserem speichern </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann ist es offensichtlich, dass bei der Verwendung unserer</font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In einer anderen Form müssen wir unser Wissen duplizieren oder in eine separate Abstraktion bringen und von dort aus verwenden. </font><font style="vertical-align: inherit;">Und basierend auf dem KISS-Prinzip sollten wir die minimal mögliche Anzahl von Abstraktionen haben. </font><font style="vertical-align: inherit;">In der Tat, warum müssen wir eine weitere Abstraktion erstellen, wenn wir diese Logik einfach in unsere </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einfügen können und der externe Code nichts darüber weiß, wie die Eingabe im Inneren funktioniert </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es wird einfach eine vorgefertigte Bedeutung annehmen, genauso wie es nach innen geht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich nicht sicher sind, ob Sie in Zukunft eine Veranstaltung benötigen, denken Sie an das YAGNI-Prinzip. </font><font style="vertical-align: inherit;">Sie können </font></font><code>onChangeEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unserer Komponente </font><font style="vertical-align: inherit;">jederzeit eine zusätzliche Requisite hinzufügen </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bis dahin wird es </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so aussehen:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ label, type, value, onChange }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    {label}
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/cz/bc/bg/czbcbgp-xlbirtjno8_5enjc9lk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somit wird eine Einheitlichkeit des Typs während der Eingabe und Ausgabe in die Komponente beobachtet und die wahre Natur dessen, was für den externen Code geschieht, wird verborgen. </font><font style="vertical-align: inherit;">Wenn wir in Zukunft eine andere UI-Komponente benötigen, z. B. ein Kontrollkästchen oder eine Auswahl, werden wir auch die Typgleichmäßigkeit bei der Eingabe / Ausgabe beibehalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz bietet uns zusätzliche Flexibilität, da unser Formular mit allen Eingabe- / Ausgabequellen arbeiten kann, ohne dass für jede Quelle zusätzliche eindeutige Handler erstellt werden müssen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser heuristische Trick ist in vielen Frameworks standardmäßig integriert. </font><font style="vertical-align: inherit;">Zum Beispiel ist dies die Hauptidee </font></font><code>v-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>Vue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem viele Menschen für seine einfache Liebe mit Arbeitsformen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kehren wir zum Geschäft zurück und aktualisieren Sie unsere Komponente </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entsprechend den Änderungen in </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{nickname</span> =&gt;</span> setLogInData({ ...logInData, nickname })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{email</span> =&gt;</span> setLogInData({ ...logInData, email })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{password</span> =&gt;</span> setLogInData({ ...logInData, password })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/6b/cq/wb/6bcqwbfusg_fmw1pqbc8yxhxlsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sieht schon ziemlich gut aus, aber wir können es noch besser machen! </font></font><br>
<br>
<code>Callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das, was übergeben wird, macht </font></font><code>onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">immer das gleiche. </font><font style="vertical-align: inherit;">Darin wird nur der Schlüssel geändert: Passwort, E-Mail, Spitzname. </font><font style="vertical-align: inherit;">Wir können es also durch einen Aufruf der Funktion ersetzen : </font></font><code>handleChange('password')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns diese Funktion implementieren:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setLogInData({<font></font>
      ...logInData,<font></font>
      [fieldName]: fieldValue,<font></font>
    });<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/z7/po/o5/z7poo5vlkkdxtc939hzlt1gendk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, empfängt die Funktion das Argument und speichert es beim Schließen des Handlers, und der Handler kehrt sofort zum externen Code zurück. </font><font style="vertical-align: inherit;">Funktionen, die nacheinander Argumente für einen Aufruf annehmen, werden auch als Curry bezeichnet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns den resultierenden Code an:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
      setLogInData({<font></font>
        ...logInData,<font></font>
        [fieldName]: fieldValue,<font></font>
      });<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
  <font></font>
  <span class="hljs-comment">// InputField.js</span>
  <span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ type, label, value, onChange }</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
      {label}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/bm/nu/td/bmnutdzasqokociudliqjyhli_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Code ist eine kurze, präzise und mäßig deklarative Implementierung der Aufgabe. </font><font style="vertical-align: inherit;">Ein weiteres Refactoring im Rahmen der Aufgabe ist meiner Meinung nach nicht sinnvoll.</font></font><br>
<br>
<hr><br>
<a name="what-else-can-we-do"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was kann man noch tun?</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das Projekt viele Formulare enthält, können Sie die handleChange-Berechnung in einen separaten Hook einfügen </font></font><code>useFieldChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-comment">// hooks/useFieldChange.js</span>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: fieldValue,<font></font>
    }));<font></font>
  };<font></font>
  <span class="hljs-comment">// LogInForm.js</span>
  <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/eb/b8/eg/ebb8egvqobm-n27dn3tsuflcvly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da dies eine reine Funktion ist (dh beim ersten Aufruf, da immer dieselbe Funktion zurückgegeben wird), muss es sich nicht um einen Hook handeln. </font><font style="vertical-align: inherit;">Aber der Haken sieht konzeptionell nach einer korrekteren und natürlicheren Lösung für React aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auch hinzufügen , </font></font><code>callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in-Place - </font><font style="vertical-align: inherit;">Unterstützung </font></font><code>fieldValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vollständig das übliche Verhalten nachzubilden </font></font><code>setState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aus </font></font><code>React</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> isFunc = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"function"</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: isFunc(fieldValue) ? fieldValue(state[fieldName]) : fieldValue,<font></font>
    }));<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/fz/t5/pd/fzt5pdldmj5gdy7duoycglqqrfe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel für die Verwendung mit unserem Formular:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);
    <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/os/zb/ua/oszbuaygonezp9c2epw4st-msqy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihre Bewerbung jedoch nur ein Formular enthält, müssen Sie dies nicht alles tun! </font><font style="vertical-align: inherit;">Weil es dem YAGNI-Prinzip widerspricht, wonach wir nicht das tun sollten, was wir nicht brauchen, um ein bestimmtes Problem zu lösen. </font><font style="vertical-align: inherit;">Wenn Sie nur eine Form haben, reichen die tatsächlichen Vorteile solcher Bewegungen nicht aus. </font><font style="vertical-align: inherit;">Immerhin haben wir den Code unserer Komponente nur um 3 Zeilen reduziert, aber eine zusätzliche Abstraktion eingeführt, die bestimmte Logik der Form verbirgt, die besser auf der Oberfläche zu halten ist.</font></font><br>
<br>
<hr><br>
<a name="do-not-do-that-please"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh nein! </font><font style="vertical-align: inherit;">Bitte nicht!</font></font></h2><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geformte Konfigurationsformulare</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gesperrte Konfigurationen sind wie eine Webpack-Konfiguration, nur für Formulare. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen Sie sich diesen Code mit einem Beispiel an:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/0t/ro/cn/0trocndcco4vp8yld7cl6qfc0pa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einige scheinen der Meinung zu sein, dass der Code hier dupliziert wird, da wir dieselbe InputField-Komponente aufrufen und dort dieselben Label-, Wert- und onChange-Parameter übergeben. </font><font style="vertical-align: inherit;">Und sie fangen an, ihren eigenen Code zu trocknen, um imaginäre Duplikate zu vermeiden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oft machen sie das so:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> fields = [<font></font>
  {<font></font>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'nickname'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your nickname'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your email'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your password'</span>,<font></font>
  },<font></font>
];<font></font>
<font></font>
<span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
    {fields.map(({ type, name, label }) =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">{label}</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state[name]}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(name)}</span>
      /&gt;</span>
    ))}
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/qi/f4/b4/qif4b4hwl1wjsinh3d7pi5xtv74.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis erhalten wir mit 17 Zeilen jsx-Code 16 Zeilen der Konfiguration. </font><font style="vertical-align: inherit;">Bravo! </font><font style="vertical-align: inherit;">Das verstehe ich DRY. </font><font style="vertical-align: inherit;">Wenn wir hier 100 dieser Eingänge haben, erhalten wir 605 bzw. 506 Zeilen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen haben wir jedoch komplexeren Code erhalten, der gegen das KISS-Prinzip verstößt. </font><font style="vertical-align: inherit;">Immerhin besteht es jetzt aus 2 Abstraktionen: Feldern und einem Algorithmus (ja, ein Algorithmus ist auch eine Abstraktion), der ihn in einen Baum von React-Elementen verwandelt. </font><font style="vertical-align: inherit;">Wenn wir diesen Code lesen, müssen wir ständig zwischen diesen Abstraktionen wechseln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das größte Problem bei diesem Code ist jedoch die Unterstützung und Erweiterung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich vor, was mit ihm passieren wird, wenn:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige weitere Feldtypen mit unterschiedlichen möglichen Eigenschaften werden hinzugefügt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Felder werden basierend auf der Eingabe anderer Felder gerendert oder nicht gerendert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige Felder erfordern beim Ändern eine zusätzliche Verarbeitung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werte in Auswahlen hängen von vorherigen Auswahlen ab</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Liste kann für eine lange Zeit fortgesetzt werden ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dies zu implementieren, müssen Sie immer einige Funktionen in Ihrer Konfiguration speichern, und der Code, der die Konfiguration rendert, verwandelt sich allmählich in Frankenstein, nimmt eine Reihe verschiedener Requisiten und wirft sie über verschiedene Komponenten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zuvor geschriebene Code, der auf der Zusammensetzung der Komponenten basiert, wird leise erweitert, ändert sich nach Belieben und wird aufgrund der fehlenden Zwischenabstraktion nicht sehr kompliziert - ein Algorithmus, der einen Baum von React-Elementen aus unserer Konfiguration erstellt. </font><font style="vertical-align: inherit;">Dieser Code ist nicht doppelt vorhanden. </font><font style="vertical-align: inherit;">Es folgt nur einem bestimmten Entwurfsmuster und sieht daher "gemustert" aus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nutzlose Optimierung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem in React Hooks aufgetaucht waren, bestand die Tendenz, alle Handler und Komponenten wahllos in </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font><font style="vertical-align: inherit;">einzuwickeln </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bitte tue das nicht! </font><font style="vertical-align: inherit;">Diese Hooks wurden von React-Entwicklern nicht bereitgestellt, da React langsam ist und alles optimiert werden muss. </font><font style="vertical-align: inherit;">Sie bieten Raum für die Optimierung Ihrer Anwendung, falls Sie auf Leistungsprobleme stoßen. </font><font style="vertical-align: inherit;">Und selbst wenn Sie auf solche Probleme stoßen, müssen Sie nicht das gesamte Projekt in </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font><font style="vertical-align: inherit;">einbinden </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Verwenden Sie den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profiler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um Probleme zu identifizieren und erst dann an der richtigen Stelle zu speichern. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durch das Auswendiglernen wird Ihr Code immer komplizierter, aber nicht immer produktiver. </font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns den Code eines realen Projekts an. </font><font style="vertical-align: inherit;">Vergleichen Sie, wie die Funktion mit </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und ohne </font><font style="vertical-align: inherit;">aussieht </font><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> applyFilters = useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  }, [selectedMetricsStatus, onApplyFilterClick]);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> applyFilters = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/nh/iq/r1/nhiqr1y0yajlgo101b-dytdcq0u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Lesbarkeit des Codes wurde nach dem Entfernen des Wrappers deutlich erhöht, da der ideale Code sein Fehlen ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Leistung dieses Codes wurde nicht erhöht, da diese Funktion wie folgt verwendet wird:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code kopieren</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;RightFooterButton onClick={applyFilters}&gt;APPLY&lt;/RightFooterButton&gt;
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/wb/-7/a3/wb-7a33k1c2cjctumjl9wqi7ztu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wo </font></font><code>RightFooterButton</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- es ist nur </font></font><code>styled.button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>styled-components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, was sehr schnell aktualisiert wird. </font><font style="vertical-align: inherit;">Aber Speicherverbrauch unsere Anwendung erhöhen , </font><font style="vertical-align: inherit;">da reagiert immer in Erinnerung behalten </font></font><code>selectedMetricsStatus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>onApplyFilterClick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die Version der Funktion </font></font><code>applyFilters</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, relevant für diese Abhängigkeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihnen diese Argumente nicht ausreichen, lesen Sie den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in dem dieses Thema ausführlicher behandelt wird.</font></font><br>
<br>
<hr><br>
<a name="conclusions"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reaktionsformen sind einfach. </font><font style="vertical-align: inherit;">Probleme mit ihnen entstehen aufgrund der Entwickler selbst und der React-Dokumentation, in der dieses Thema nicht ausreichend detailliert behandelt wird.</font></font><br>
 </li>
<li>           aka value  onChange  .      useFieldChange,  ,     ,      <code>v-model</code>  <code>Vue</code>   .<br>
 </li>
<li>         KISS  YAGNI.    DRY,  ,      .</li>
<li>       ,         ,        React-    .<br>
 </li>
<li>  ,      .</li>
</ul><br>
<br>
<hr><br>
<h3>P.S.</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst wollte ich über die deklarative Validierung komplexer verschachtelter Formulare schreiben. </font><font style="vertical-align: inherit;">Aber am Ende habe ich beschlossen, das Publikum darauf vorzubereiten, damit das Bild so vollständig wie möglich ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Tutorial geht es darum, das in diesem Tutorial implementierte einfache Formular zu validieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank an alle, die bis zum Ende gelesen haben! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es spielt keine Rolle, wie Sie Code schreiben oder was Sie tun, die Hauptsache ist, ihn zu genießen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de495500/index.html">Alexey Klyanin: „Bis 2018 habe ich OSM nur als Substrat in meinem Blog verwendet.“</a></li>
<li><a href="../de495504/index.html">Kingston KC600 512 GB: Feststoffrakete</a></li>
<li><a href="../de495508/index.html">Benötigt der Browser eine Stimme?</a></li>
<li><a href="../de495512/index.html">Was ist der beste Weg, um Pizza aufzuwärmen?</a></li>
<li><a href="../de495516/index.html">Die Besuchervorlage ist für Kotlin veraltet, aber es lohnt sich zu wissen</a></li>
<li><a href="../de495520/index.html">Checkliste für einen Architekten</a></li>
<li><a href="../de495524/index.html">Welche Programmiersprache zu lernen, damit HR-Großunternehmen nach Ihnen suchen</a></li>
<li><a href="../de495526/index.html">Organisation des Fernzugriffs mit Fortinet</a></li>
<li><a href="../de495530/index.html">Hardware-Konverter HDMI-RGB (18/24-Bit)</a></li>
<li><a href="../de495532/index.html">Wie große IT-Unternehmen ihre Mitarbeiter auf Remote-Arbeit übertragen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>