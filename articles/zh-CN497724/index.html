<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ›¢ï¸ ğŸ’• ğŸ‘©â€ğŸ‘©â€ğŸ‘¦ å‡†å¤‡æœåŠ¡å™¨ä»¥ç”¨Pythonå‘å¸ƒWebåº”ç”¨ç¨‹åº â›¹ğŸ» âš“ï¸ ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¾å¥½çš„ä¸€å¤©ï¼Œå“ˆå¸ƒç½—å¤«æ–¯å…‹ï¼
 
 æœ‰ç©ºé—²æ—¶é—´ï¼Œå¹¶ä¸”æ¸´æœ›åˆ¶ä½œä¸€ä¸ªå°å‹Webåº”ç”¨ç¨‹åºã€‚æœ‰ä¸€ä¸ªæƒ³æ³•ï¼ˆä»å¤©æ°”ä¼ æ„Ÿå™¨æ¥æ”¶æ•°æ®ï¼Œå°†å…¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç„¶ååšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåœ¨centosä¸Šçš„å…è´¹æœåŠ¡å™¨ã€‚å…³äºè®¾ç½®çš„æ•™ç¨‹ä¼¼ä¹ä¹Ÿä¸€æ ·ã€‚ä½†æ˜¯åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨å¯ä»¥æ­£å¸¸å·¥ä½œçš„æ•™ç¨‹ã€‚å¦‚æœæ‚¨è¿˜æƒ³ä½¿ç”¨pyt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å‡†å¤‡æœåŠ¡å™¨ä»¥ç”¨Pythonå‘å¸ƒWebåº”ç”¨ç¨‹åº</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497724/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¾å¥½çš„ä¸€å¤©ï¼Œå“ˆå¸ƒç½—å¤«æ–¯å…‹ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰ç©ºé—²æ—¶é—´ï¼Œå¹¶ä¸”æ¸´æœ›åˆ¶ä½œä¸€ä¸ªå°å‹Webåº”ç”¨ç¨‹åºã€‚</font><font style="vertical-align: inherit;">æœ‰ä¸€ä¸ªæƒ³æ³•ï¼ˆä»å¤©æ°”ä¼ æ„Ÿå™¨æ¥æ”¶æ•°æ®ï¼Œå°†å…¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç„¶ååšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåœ¨centosä¸Šçš„å…è´¹æœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">å…³äºè®¾ç½®çš„æ•™ç¨‹ä¼¼ä¹ä¹Ÿä¸€æ ·ã€‚ä½†æ˜¯åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ª</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Œå…¨å¯ä»¥æ­£å¸¸å·¥ä½œçš„</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•™ç¨‹</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨è¿˜æƒ³</font><font style="vertical-align: inherit;">ä½¿ç”¨python3 </font><font style="vertical-align: inherit;">åœ¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CentOS 7.4æœåŠ¡å™¨</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åº</font><font style="vertical-align: inherit;">*æ†ç»‘åŒ…ï¼Œuwsgiå’Œnginxï¼Œæ¬¢è¿ä½¿ç”¨catã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæœ¬æ–‡åº”è¯¥å·²ç»æ¶µç›–äº†ä»€ä¹ˆï¼Œè€Œå°†ä¸ä¼šæ¶µç›–ä»€ä¹ˆï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿è¡ŒCentOS 7.4çš„ç‰©ç†æˆ–è™šæ‹ŸæœåŠ¡å™¨ï¼ˆä¸ä¿è¯å…¶ä»–æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬çš„æ€§èƒ½ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨è¶…çº§ç”¨æˆ·ç‰¹æƒè®¿é—®æœåŠ¡å™¨*å¦‚æœæœåŠ¡å™¨æ˜¯è™šæ‹Ÿçš„ï¼Œåˆ™å‡å®šå­˜åœ¨é€šè¿‡SSHè¿æ¥åˆ°æœåŠ¡å™¨çš„èƒ½åŠ›ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥rootç”¨æˆ·èº«ä»½è¿æ¥åï¼Œç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªå…·æœ‰ç®¡ç†å‘˜æƒé™çš„æ–°ç”¨æˆ·ï¼ˆè¿™ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†è‡³å°‘è¦æœ‰ä¸€ä¸ªè‰¯å¥½çš„åŸºè°ƒï¼‰ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">adduser developer<font></font>
passwd developer</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œæ‚¨éœ€è¦è¾“å…¥å¹¶ç¡®è®¤ç”¨æˆ·å¯†ç </font></font><br>
<br>
<pre><code class="plaintext hljs">usermod -aG wheel developer</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°†ç”¨æˆ·æ·»åŠ åˆ°æœ¬åœ°ç®¡ç†å‘˜ç»„</font></font><br>
<br>
<pre><code class="plaintext hljs">su - developer</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„ç”¨æˆ·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨å‡†å¤‡ç¯å¢ƒï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum install -y epel-release<font></font>
sudo yum install -y python3 python3-pip python3-devel nginx gcc<font></font>
sudo yum update -y python36 python2<font></font>
sudo yum groupinstall -y "Development Tools" "Development Libraries"<font></font>
sudo yum install -y python3-devel python36-virtualenv<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æƒ³æè¯·æ³¨æ„å€’æ•°ç¬¬äºŒè¡Œ- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå¼€å‘å·¥å…·â€</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œå¼€å‘åº“â€</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹äºæ­£ç¡®å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ</font><b><font style="vertical-align: inherit;">æ˜¯</font></b><font style="vertical-align: inherit;">å¿…éœ€çš„ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä½¿ç”¨æ ‡å¿—ï¼Œä»¥ä¾¿å›¢é˜Ÿå®Œæˆè€Œä¸è¦æ±‚ç¡®è®¤ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæ‚¨å¯ä»¥å¼€å§‹åˆ›å»ºå·¥ä½œç›®å½•ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo mkdir /opt/myproject &amp;&amp; cd /opt/myproject<font></font>
sudo chown -R developer /opt/<font></font>
python3 -m venv myprojectenv<font></font>
source myprojectenv/bin/activate</code></pre><br>
<pre><code class="plaintext hljs">pip3 install --upgrade pip<font></font>
pip3 install uwsgi flask<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬</font></font><br>
<br>
<code>vi /opt/myproject/wsgi.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†</font><font style="vertical-align: inherit;">å‡†å¤‡è¯¥Webåº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ï¼šï¼ˆ</font><font style="vertical-align: inherit;">ä»¥ä¸‹ï¼Œæˆ‘å°†ä½¿ç”¨viç¼–è¾‘å™¨ï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªé—®é¢˜ï¼‰</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">application</span>(<span class="hljs-params">environ, start_response</span>):</span>
    start_response(<span class="hljs-string">'200 OK'</span>, [(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html'</span>)])
    <span class="hljs-keyword">return</span> [<span class="hljs-string">"&lt;h1 style='color:blue'&gt;Testing Success!&lt;/h1&gt;"</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯åŠ¨åçš„è¿™æ®µä»£ç å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿç¡®ä¿ä¹‹å‰é‡‡å–çš„æ‰€æœ‰æ­¥éª¤å‡æˆåŠŸã€‚</font><font style="vertical-align: inherit;">è¦æµ‹è¯•ï¼Œè¯·è¿è¡Œè¯¥æœåŠ¡ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">uwsgi --socket 0.0.0.0:8080 --protocol=http -w wsgi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡ç‰©ç†ljcnegtæˆ–rdpè¿æ¥ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä»¥0.0.0.0:8080æ£€æŸ¥ç»“æœã€‚</font><font style="vertical-align: inherit;">é€šè¿‡SSHè¿æ¥ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°ä¼šè¯å¹¶ä½¿ç”¨curlæµ‹è¯•ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -v 0.0.0.0:8080</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-væ ‡å¿—ä½¿æ‚¨å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„è¾“å‡ºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æµ‹è¯•å®Œæˆåï¼Œæ‚¨åº”æŒ‰CTRL + Cç»ˆæ­¢æœåŠ¡ï¼ˆå¦åˆ™ï¼Œæ‚¨å¿…é¡»æŸ¥æ‰¾è¿›ç¨‹å¹¶ç”¨killæ€æ­»å®ƒã€‚è¿™ä¹Ÿæ˜¯é€€å‡ºï¼Œä½†ç»å¯¹ä¸å¤ªæ–¹ä¾¿ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæ‚¨å¯ä»¥åˆ¶ä½œä¸»è¦çš„Webåº”ç”¨ç¨‹åºï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">vi /opt/myproject/myproject.py</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<font></font>
application = Flask(__name__)<font></font>
<font></font>
<span class="hljs-meta">@application.route("/")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hello</span>():</span>
   <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;h1 style='color:blue'&gt;Hello There!&lt;/h1&gt;"</span><font></font>
<font></font>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
   application.run(host=<span class="hljs-string">'0.0.0.0'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æµ‹è¯•è¿‡ç¨‹ä¸ä¸Šä¸€ä¸ªéå¸¸ç›¸ä¼¼-æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤å¯åŠ¨åº”ç”¨ç¨‹åº</font></font><code>python3 /opt/myproject/myproject.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶è¿›è¡Œæ£€æŸ¥ã€‚</font><font style="vertical-align: inherit;">ç»“æœåº”è¯¥æ˜¯ç›¸åŒçš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ç¼–è¾‘å…¥å£ç‚¹ï¼Œä»¥ä¾¿åœ¨è°ƒç”¨è¯¥å…¥å£ç‚¹æ—¶ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯åŠ¨ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">vi /opt/myproject/wsgi.py</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> myproject <span class="hljs-keyword">import</span> application<font></font>
<font></font>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
   application.run()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æœ€å›°éš¾ä¹Ÿæœ€æœ‰è¶£ã€‚</font><font style="vertical-align: inherit;">æ˜¯æ—¶å€™ä½¿ç”¨æ­¤åº”ç”¨ç¨‹åºåˆ¶ä½œæœåŠ¡äº†ï¼Œè¯¥æœåŠ¡å°†åœ¨åå°è‡ªåŠ¨è¿è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œä¸ºuwsgiå‡†å¤‡iniæ–‡ä»¶ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">vi /opt/myproject/myproject.ini</code></pre> <br>
<pre><code class="plaintext hljs">[uwsgi]<font></font>
wsgi-file = myproject/wsgi.py<font></font>
<font></font>
master = true<font></font>
processes = 2<font></font>
<font></font>
uid = developer<font></font>
socket = /tmp/uwsgi/myproject.sock<font></font>
chown-socket = nginx:nginx<font></font>
chmod-socket = 666<font></font>
vacuum = true<font></font>
<font></font>
die-on-term = true<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæˆ‘è¦æ³¨æ„ä»¥ä¸‹å‡ è¡Œï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">socket = /tmp/uwsgi/myproject.sock-ä¸ºäº†åŠ å¿«æœåŠ¡é€Ÿåº¦ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨unix-socketï¼Œä¸ºäº†è®©nginxè¿æ¥åˆ°å®ƒï¼Œè¯·åœ¨ä¸´æ—¶æ–‡ä»¶å¤¹/ tmp / uwsgiä¸­åˆ›å»ºå®ƒ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown-socket = nginxï¼šnginxä¼šå°†å¥—æ¥å­—ä½¿ç”¨æƒè½¬è®©ç»™nginxç”¨æˆ·</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod-socket = 666-ä¸ä¸Šä¸€ä¸ªç›®çš„ç›¸åŒã€‚</font><font style="vertical-align: inherit;">ä¸åŒçš„æ‰‹å†Œå’ŒæŠ€å·§å…·æœ‰ä¸åŒçš„å‚æ•°å€¼-664ã€665ã€777-ä½†é€šè¿‡å®éªŒç¡®å®š666æ˜¯æœ€ä½å·¥ä½œæ°´å¹³ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæ‚¨å¯ä»¥ç›´æ¥ç»§ç»­åˆ›å»ºæœåŠ¡ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo vi /etc/systemd/system/myproject.service</code></pre><br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=uWSGI instance to serve myproject app<font></font>
After=network.target<font></font>
<font></font>
[Service]<font></font>
ExecStartPre=-/usr/bin/bash -c 'mkdir -p /tmp/uwsgi chown nginx:nginx /tmp/uwsgi'<font></font>
ExecStart=/usr/bin/bash -c 'cd /opt/myproject; source myprojectenv/bin/activate; uwsgi --ini myproject.ini'<font></font>
ExecStartPost=/usr/bin/bash -c 'setenforce 0'<font></font>
PrivateTmp=false<font></font>
[Install]<font></font>
WantedBy=multi-user.target</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æœ‰æœ‰è¶£çš„è¡Œéƒ½åœ¨Serviceå—ä¸­ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExecStartPreæ˜¯ç³»ç»Ÿç®¡ç†å‘˜åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰å°†æ‰§è¡Œçš„å‘½ä»¤ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-/ usr / bin / bash -cå®£å¸ƒä¸‹ä¸€ä¸ªå‘½ä»¤åºåˆ—çš„å¼€å§‹ï¼Œâ€œ mkdir -p / tmp / uwsgi chown nginxï¼šnginx / tmp / uwsgiâ€ä¸ºå¥—æ¥å­—åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶å°†æƒé™è½¬ç§»ç»™nginxç”¨æˆ·ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExecStartæ˜¯ç›´æ¥å¯åŠ¨æœåŠ¡çš„å‘½ä»¤ï¼Œåœ¨è¯¥å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬å°†ä¾æ¬¡è¿›å…¥å·¥ä½œç›®å½•ï¼Œæ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶ä»iniæ–‡ä»¶å¯åŠ¨uwsgi-serverã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExecStartPost-æœåŠ¡å¯åŠ¨åè¿è¡Œçš„å‘½ä»¤ã€‚</font><font style="vertical-align: inherit;">åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å°†è¯·æ±‚ä»NginxæœåŠ¡å™¨æ­£ç¡®ä¼ è¾“åˆ°uwsgiæœåŠ¡å™¨ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PrivateTmp = falseæ˜¯ä½¿åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶å¤¹å¯¹å…¶ä»–è¿›ç¨‹å¯è§çš„å‚æ•°ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨è¿è¡ŒæœåŠ¡ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">systemctl start myproject<font></font>
systemctl status myproject<font></font>
systemctl enable myproject</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœåŠ¡å™¨é‡å¯åï¼Œæœ€åä¸€æ¡å‘½ä»¤å°†ä½¿å…¶è‡ªåŠ¨å¯åŠ¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åä¸€ä¸ªé—®é¢˜-æˆ‘ä»¬å°†é…ç½®nginxæœåŠ¡å™¨ï¼Œå¹¶ä½¿æˆ‘ä»¬çš„Webåº”ç”¨ç¨‹åºå¯ç”¨äºå¤–éƒ¨ç½‘ç»œã€‚</font><font style="vertical-align: inherit;">å§‹ç»ˆå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä»–çš„å·¥ä½œæ—¥å¿—</font></font><br>
<br>
<pre><code class="plaintext hljs">journalctl -u  myproject</code></pre><br>
<pre><code class="plaintext hljs">sudo vi /usr/lib/systemd/system/nginx.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰¾åˆ°[Service]å—ï¼Œæœ€åæ·»åŠ PrivateTmp = falseã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹‹åï¼Œä½¿ç”¨å‘½ä»¤é‡æ–°å¯åŠ¨å®ˆæŠ¤ç¨‹åºï¼Œ</font></font><code>systemctl daemon-reload</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æˆ‘ä»¬ç›´æ¥è¿›è¡ŒæœåŠ¡å™¨é…ç½®ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">vi /etc/nginx/nginx.conf</code></pre><br>
<pre><code class="nginx hljs"><span class="hljs-section">http</span> {<font></font>
    . . .<font></font>
<font></font>
    <span class="hljs-attribute">include</span> /etc/nginx/conf.d/<span class="hljs-regexp">*.conf</span>;<font></font>
<font></font>
    <span class="hljs-section">server</span> {
        <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span> default_server;<font></font>
<font></font>
        . . .</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰¾åˆ°httpå—å¹¶æ·»åŠ æ–°æœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="nginx hljs"><span class="hljs-section">server</span> {
    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;
    <span class="hljs-attribute">server_name</span> server_domain_or_IP;<font></font>
<font></font>
    <span class="hljs-attribute">location</span> / {
        <span class="hljs-attribute">include</span> uwsgi_params;
        <span class="hljs-attribute">uwsgi_pass</span> unix:/tmp/uwsgi/myproject.sock;<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ä»ç„¶å¯ä»¥æ‰“å¼€æœåŠ¡å™¨å¹¶åœ¨é˜²ç«å¢™ä¸Šç¼–è¾‘è§„åˆ™ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">systemctl start nginx<font></font>
systemctl enable nginx<font></font>
<font></font>
firewall-cmd --zone=public --permanent --add-service=http<font></font>
firewall-cmd --zone=public --permanent --add-service=https<font></font>
<font></font>
firewall-cmd --reload</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œé€šè¿‡åŸŸåæˆ–IPåœ°å€è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°Flaskåº”ç”¨ç¨‹åºçš„å“åº”ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å¸Œæœ›è¿™äº›ææ–™ä¼šæœ‰ç”¨ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN497696/index.html">Ryukå‹’ç´¢è½¯ä»¶å¦‚ä½•æ”»å‡»ä¼ä¸š</a></li>
<li><a href="../zh-CN497700/index.html">ä»4æœˆ17æ—¥å¼€å§‹ï¼Œæ¯å‘¨åœ¨çº¿å¤‡ä»½ï¼Œå¼€å‘äººå‘˜ï¼Œå®‰å…¨å’Œæœºå™¨äºº</a></li>
<li><a href="../zh-CN497702/index.html">2020å¹´æ‚¨åº”æ³¨æ„çš„äº”ä¸ªæ•°æ®å­˜å‚¨è¶‹åŠ¿</a></li>
<li><a href="../zh-CN497708/index.html">æˆ‘ä»¬é‚€è¯·æ‚¨å‚åŠ 4æœˆå’Œ5æœˆçš„ä¸€ç³»åˆ—Fujitsuç½‘ç»œç ”è®¨ä¼š</a></li>
<li><a href="../zh-CN497714/index.html">å¦‚ä½•åœ¨macOSä¸Šä¿æŠ¤è¿›ç¨‹å’Œå†…æ ¸æ‰©å±•</a></li>
<li><a href="../zh-CN497726/index.html">åœ¨Odnoklassnikiæ‰©å±•Androidæµ‹è¯•</a></li>
<li><a href="../zh-CN497728/index.html">â€œç‡ƒçƒ§â€ç¢å±‘çš„å±é™©</a></li>
<li><a href="../zh-CN497730/index.html">æ–¹ä¾¿çš„BDDï¼šSpecFlow + TFS</a></li>
<li><a href="../zh-CN497736/index.html">å®¡æŸ¥10å°æ–°å†…ç‡ƒæœº</a></li>
<li><a href="../zh-CN497738/index.html">åœ¨Swiftä¸­æµ‹è¯•è‡ªå·±ï¼šæ‹¼å›¾è¿·çš„æ‹¼å›¾</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>