<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí≠ ü¶ó ü§© Remotezugriff auf VMs mit GPU √ºber Citrix üßïüèª üåº üé°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Handbuch werden die Schritte beschrieben, die Sie ausf√ºhren m√ºssen, um den Remotezugriff auf virtuelle Desktops mithilfe der von Citrix ange...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Remotezugriff auf VMs mit GPU √ºber Citrix</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497818/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Handbuch werden die Schritte beschrieben, die Sie ausf√ºhren m√ºssen, um den Remotezugriff auf virtuelle Desktops mithilfe der von Citrix angebotenen Technologie vorzubereiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist n√ºtzlich f√ºr diejenigen, die sich k√ºrzlich mit der Desktop-Virtualisierungstechnologie vertraut gemacht haben, da es sich um eine Sammlung n√ºtzlicher Befehle handelt, die aus ~ 10 Handb√ºchern zusammengestellt wurden, von denen viele nach der Autorisierung auf den Websites von Citrix, Nvidia und Microsoft verf√ºgbar sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Implementierung enth√§lt die Schritte zum Vorbereiten des Remotezugriffs auf virtuelle Maschinen (VMs) mit Nvidia Tesla M60-Grafikbeschleunigern und dem Centos 7-Betriebssystem.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also fangen wir an.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorbereiten eines Hypervisors zum Hosten virtueller Maschinen</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie kann ich XenServer 7.4 herunterladen und installieren? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie f√ºge ich XenServer zu Citrix XenCenter hinzu? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann ich den Nvidia-Treiber herunterladen und installieren? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie √§ndere ich den Nvidia Tesla M60-Modus? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie montiere ich Speicher?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XenServer 7.4</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XenServer 7.4-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Download-Link </font><font style="vertical-align: inherit;">ist nach der Autorisierung auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website verf√ºgbar </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eb/p2/kr/ebp2kr2edt_ktpzrhsimmkaofbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns XenServer.iso regelm√§√üig auf einem Server mit 4x NVIDIA Tesla M60 installieren. In meinem Fall wird ISO √ºber IPMI gemountet. Bei Dell-Servern wird der BMC √ºber IDRAC verwaltet. Die Installationsschritte sind fast identisch mit der Installation von Linux-√§hnlichen Betriebssystemen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meine XenServer c-GPU-Adresse lautet 192.168.1.100. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie XenCenter.msi auf dem lokalen Computer, von dem aus wir Hypervisoren und virtuelle Maschinen verwalten. F√ºgen Sie dort einen Server mit einer GPU und XenServer hinzu, indem Sie auf die Registerkarte "Server" und dann auf "Hinzuf√ºgen" klicken. Geben Sie den Benutzernamen und das Kennwort root ein, die w√§hrend der Installation von XenServer angegeben wurden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/qv/qw/yyqvqwxcbnxhwkj0ho3brs1lqom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In XenCenter ist nach dem Klicken auf den Namen des hinzugef√ºgten Hypervisors die Registerkarte Konsole verf√ºgbar. </font><font style="vertical-align: inherit;">W√§hlen Sie im Men√º "Remote Service Configuration" und aktivieren Sie die SSH-Autorisierung - "Enable / Disable Remote Shell".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nvidia-Fahrer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde den Emotionen freien Lauf lassen und sagen, dass ich w√§hrend der gesamten Zeit, in der ich mit vGPU gearbeitet habe, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">nvid.nvidia.com</font></a><font style="vertical-align: inherit;"> beim ersten Versuch </font><font style="vertical-align: inherit;">noch nie </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">besucht habe</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn die Autorisierung nicht funktioniert, empfehle ich Internet Explorer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie zip von der vGPU sowie das GPUMode Change Utility </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
herunter </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81.zip </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NVIDIA-gpumodeswitch-2020-01.zip </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/ia/ny/sjianylmppn9as35nnxtrwj-bhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir folgen den Versionen. </font><font style="vertical-align: inherit;">Der Name des heruntergeladenen Archivs zeigt die Version geeigneter NVIDIA-Treiber an, die in Zukunft auf virtuellen Maschinen installiert werden k√∂nnen. </font><font style="vertical-align: inherit;">In meinem Fall ist es 390,72. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wirf zip-s auf XenServer und entpacke es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ñndern Sie den GPU-Modus und installieren Sie den vGPU-Treiber</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">cd</span> NVIDIA-gpumodeswitch-2020-01<font></font>
$ gpumodeswitch --listgpumodes<font></font>
$ gpumodeswitch --gpumode graphics<font></font>
$ <span class="hljs-built_in">cd</span> ../NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81<font></font>
$ yum install NVIDIA-vGPU-xenserver-7.4-390.72.x86_64.rpm<font></font>
$ reboot</code></pre><br>
<img src="https://habrastorage.org/webt/qg/0m/lx/qg0mlxigfdyfvxvfpoijuh-sisa.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speicher montieren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Richten Sie mit NFS ein freigegebenes Verzeichnis auf einem beliebigen Computer im Netzwerk ein.</font></font><br>
<br>
<pre><code class="bash hljs">$ yum install epel-release<font></font>
$ yum install nfs-utils libnfs-utils<font></font>
$ systemctl <span class="hljs-built_in">enable</span> rpcbind<font></font>
$ systemctl <span class="hljs-built_in">enable</span> nfs-server<font></font>
$ systemctl <span class="hljs-built_in">enable</span> nfs-lock<font></font>
$ systemctl <span class="hljs-built_in">enable</span> nfs-idmap<font></font>
$ systemctl start rpcbind<font></font>
$ systemctl start nfs-server<font></font>
$ systemctl start nfs-lock<font></font>
$ systemctl start nfs-idmap<font></font>
$ firewall-cmd --permanent --zone=public --add-service=nfs<font></font>
$ firewall-cmd --permanent --zone=public --add-service=mountd<font></font>
$ firewall-cmd --permanent --zone=public --add-service=rpc-bind<font></font>
$ firewall-cmd --reload<font></font>
$ mkdir -p /nfs/store1<font></font>
$ chmod -R 777 /nfs/store1<font></font>
$ touch /nfs/store1/forcheck<font></font>
$ cat /etc/exports<font></font>
  ...<font></font>
  /nfs/store1 192.168.1.0/24(rw,async,crossmnt,no_root_squash,no_all_squash,no_subtree_check)<font></font>
$ systemctl restart nfs-server</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie in XenCenter XenServer aus und w√§hlen Sie auf der Registerkarte "Speicher" die Option "Neuer SR". </font><font style="vertical-align: inherit;">Geben Sie den Speichertyp an - NFS ISO. </font><font style="vertical-align: inherit;">Der Pfad muss auf das freigegebene NFS-Verzeichnis verweisen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Master Image Basierend auf Centos 7</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie erstelle ich eine virtuelle Maschine mit Centos 7? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bereite ich eine virtuelle Maschine zum Erstellen eines Verzeichnisses vor?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Bild von Centos 7</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit XenCenter erstellen wir eine virtuelle Maschine mit einer GPU. </font><font style="vertical-align: inherit;">Klicken Sie auf der Registerkarte "VM" auf "Neue VM". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/fs/9g/etfs9g7biwgmswos8eazlinr_ba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir w√§hlen die erforderlichen Parameter aus: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VM-Vorlage - Andere Installationsmedien </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Name - Vorlage </font><font style="vertical-align: inherit;">Installation </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aus ISO-Bibliothek - Centos 7 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), Auswahl aus dem </font><font style="vertical-align: inherit;">bereitgestellten </font><font style="vertical-align: inherit;">NFS-ISO-Speicher. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anzahl der vCPUs - 4 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topologie - 1 Socket mit 4 Kernen pro Socket </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speicher - 30-Gbit- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPU-Typ - GRID M60-4Q </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese virtuelle Festplatte verwenden - 80-Gbit- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Netzwerk </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Erstellung wird die virtuelle Maschine in der vertikalen Liste links </font><font style="vertical-align: inherit;">angezeigt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Klicken Sie darauf und gehen Sie zur Registerkarte "Konsole". </font><font style="vertical-align: inherit;">Wir warten, bis das Centos 7-Installationsprogramm geladen ist, und f√ºhren die erforderlichen Schritte aus, um das Betriebssystem mit der GNOME-Shell zu installieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bildvorbereitung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe viel Zeit gebraucht, um das Bild mit Centos 7 vorzubereiten. </font><font style="vertical-align: inherit;">Dies f√ºhrte zu einer Reihe von Skripten, die die Ersteinrichtung von Linux erleichtern und es Ihnen erm√∂glichen, einen Katalog f√ºr virtuelle Maschinen mit Citrix Machine Creation Services (MCS) zu erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der auf ws-ad installierte DHCP-Server hat der neuen virtuellen Maschine die IP-Adresse 192.168.1.129 zugewiesen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Folgenden sind die Grundeinstellungen aufgef√ºhrt.</font></font><br>
<br>
<pre><code class="bash hljs">$ hostnamectl <span class="hljs-built_in">set</span>-hostname template<font></font>
$ yum install -y epel-release<font></font>
$ yum install -y lsb mc gcc<font></font>
$ firewall-cmd --permanent --zone=dmz --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=external --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=mdns<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=samba-client<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=samba-client<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=mdns<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=public --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=public --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=work --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=work --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=public --add-service=ssh<font></font>
$ firewall-cmd --complete-reload</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mounten Sie in XenCenter auf der Registerkarte "Konsole" guest-tools.iso im DVD-Laufwerk der virtuellen Maschine und installieren Sie XenTools f√ºr Linux.</font></font><br>
<br>
<pre><code class="bash hljs">$ mount /dev/cdrom /mnt<font></font>
$ /mnt/Linux/install.sh<font></font>
$ reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Einrichten von XenServer haben wir das von der NVIDIA-Website heruntergeladene NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81.zip-Archiv verwendet, das neben dem NVIDIA-Treiber f√ºr XenServer den NVIDIA-Treiber enth√§lt, den wir f√ºr vGPU-Clients ben√∂tigen. </font><font style="vertical-align: inherit;">Laden Sie es herunter und installieren Sie es auf der VM.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat /etc/default/grub<font></font>
  GRUB_TIMEOUT=5<font></font>
  GRUB_DISTRIBUTOR=<span class="hljs-string">"<span class="hljs-subst">$(sed 's, release .*$,,g' /etc/system-release)</span>"</span><font></font>
  GRUB_DEFAULT=saved<font></font>
  GRUB_DISABLE_SUBMENU=<span class="hljs-literal">true</span>
  GRUB_TERMINAL_OUTPUT=<span class="hljs-string">"console"</span>
  GRUB_CMDLINE_LINUX=<span class="hljs-string">"rhgb quiet modprobe.blacklist=nouveau"</span>
  GRUB_DISABLE_RECOVERY=<span class="hljs-string">"true"</span><font></font>
$ grub2-mkconfig -o /boot/grub2/grub.cfg<font></font>
$ wget http://vault.centos.org/7.6.1810/os/x86_64/Packages/kernel-devel-3.10.0-957.el7.x86_64.rpm<font></font>
$ yum install kernel-devel-3.10.0-957.el7.x86_64.rpm<font></font>
$ reboot<font></font>
$ init 3<font></font>
$ NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81/NVIDIA-Linux-x86_64-390.75-grid.run<font></font>
$ cat /etc/nvidia/gridd.conf<font></font>
  ServerAddress=192.168.1.111<font></font>
  ServerPort=7070<font></font>
  FeatureType=1<font></font>
$ reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie den Linux Virtual Delivery Agent 1811 (VDA) f√ºr Centos 7 herunter. Der Download-Link f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux VDA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist nach der Autorisierung auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website verf√ºgbar </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ yum install -y LinuxVDA-1811.el7_x.rpm<font></font>
$ cat /var/xdl/mcs/mcs.conf<font></font>
  <span class="hljs-comment">#!/bin/bash</span><font></font>
  dns1=192.168.1.110<font></font>
  NTP_SERVER=some.ntp.ru<font></font>
  AD_INTEGRATION=winbind<font></font>
  SUPPORT_DDC_AS_CNAME=N<font></font>
  VDA_PORT=80<font></font>
  REGISTER_SERVICE=Y<font></font>
  ADD_FIREWALL_RULES=Y<font></font>
  HDX_3D_PRO=Y<font></font>
  VDI_MODE=Y<font></font>
  SITE_NAME=domain.ru<font></font>
  LDAP_LIST=ws-ad.domain.ru<font></font>
  SEARCH_BASE=DC=domain,DC=ru<font></font>
  START_SERVICE=Y<font></font>
$ /opt/Citrix/VDA/sbin/deploymcs.sh<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"exclude=kernel* xorg*"</span> &gt;&gt; /etc/yum.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie in Citrix Studio die Gruppe Computerkatalog und Lieferung. </font><font style="vertical-align: inherit;">Zuvor m√ºssen Sie Windows Server installieren und konfigurieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server mit Dom√§nencontroller</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie kann ich Windows Server 2016 herunterladen und installieren? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie installiere ich Windows Server-Komponenten? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie konfiguriere ich Active Directory, DHCP und DNS?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server 2016</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da eine virtuelle Maschine (VM) mit Windows Server keine GPU ben√∂tigt, verwenden wir einen Server ohne GPU als Hypervisor. Installieren Sie in Analogie zur obigen Beschreibung einen anderen XenServer zum Hosten von virtuellen Systemmaschinen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie anschlie√üend eine virtuelle Maschine f√ºr Windows Server mit Active Directory. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie Windows Server 2016 von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website herunter </font><font style="vertical-align: inherit;">. Es ist besser, dem Link mit dem Internet Explorer zu folgen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/u3/br/9tu3brk0d6qqy6k6drtf7gd2sig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit XenCenter erstellen wir eine virtuelle Maschine. Klicken Sie auf der Registerkarte "VM" auf "Neue VM". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/ea/yf/imeayf3rgvlrpaq4kqer_ofoei0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir w√§hlen die erforderlichen Parameter aus: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VM-Vorlage - Windows Server 2016 (64-Bit) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Name - ws-ad.domain.ru Installation </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aus ISO-Bibliothek - WindowsServer2016.iso, w√§hlen Sie aus dem bereitgestellten NFS-ISO-Speicher. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anzahl der vCPUs - 4</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topologie - 1 Socket mit 4 Kernen pro Socket </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speicher - 20-Gbit- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPU-Typ - keine </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie diese virtuelle Festplatte - 100-Gbit- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Netzwerk </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Erstellung wird die virtuelle Maschine in der vertikalen Liste links angezeigt. Klicken Sie darauf und gehen Sie zur Registerkarte "Konsole". Warten Sie, bis das Windows Server-Installationsprogramm geladen ist, und f√ºhren Sie die erforderlichen Schritte zur Installation des Betriebssystems aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In XenTools VM installieren. Klicken Sie mit der rechten Maustaste auf VM und dann auf "Citrix VM Tools installieren ...". Danach wird das Image bereitgestellt, das Sie zum Ausf√ºhren und Installieren von XenTools ben√∂tigen. Am Ende der Installation ist ein Neustart der VM erforderlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurieren Sie den Netzwerkadapter: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IP-Adresse - 192.168.1.110 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maske - 255.255.255.0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gateway - 192.168.1.1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS1 - 8.8.8.8 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS2 - 8.8.4.4</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Windows Server nicht aktiviert ist, aktivieren Sie. </font><font style="vertical-align: inherit;">Der Schl√ºssel kann an derselben Stelle abgenommen werden, an der das Bild heruntergeladen wurde.</font></font><br>
<br>
<pre><code class="bash hljs">[PowerShell]$ slmgr -ipk xxxxx-xxxxx-xxxxx-xxxxx-xxxxx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Richten Sie den Computernamen ein. </font><font style="vertical-align: inherit;">In meinem Fall ist dies ws-ad.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponenteninstallation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie im Server-Manager "Rollen und Funktionen hinzuf√ºgen". </font><font style="vertical-align: inherit;">Beachten Sie die Installation des DHCP-Servers, des DNC-Servers und der Active Directory-Dom√§nendienste. </font><font style="vertical-align: inherit;">Aktivieren Sie das Kontrollk√§stchen "Automatisch neu laden".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r2/5c/mk/r25cmkhjpon52zta-7ysbpffyig.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie Active Directoy</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie nach dem Neustart der VM auf "Diesen Server auf die Ebene des Dom√§nencontrollers erh√∂hen" und f√ºgen Sie eine neue Gesamtstruktur "domain.ru" hinzu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHCP-Server-Setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie im oberen Bereich des Server-Managers auf das Ausrufezeichen, um die √Ñnderungen bei der Installation des DHCP-Servers zu speichern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir mit den Einstellungen des DHCP-Servers fort. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wf/t6/pg/wft6pgjw4_lxdcvqa0rkphy4hhe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie einen neuen Bereich 192.168.1.120-130. </font><font style="vertical-align: inherit;">Den Rest √§ndern wir nicht. </font><font style="vertical-align: inherit;">W√§hlen Sie "Jetzt DHCP-Einstellungen konfigurieren" und geben Sie die ws-ad IP-Adresse (192.168.1.110) als Gateway und DNS ein, die in den Einstellungen der Netzwerkadapter virtueller Maschinen aus dem Verzeichnis angegeben werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS-Server-Setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir mit den DNS-Servereinstellungen fort. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sg/pc/kc/sgpckcwrrfz4z-6jy5pf0ibbnbo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen wir eine neue Zone f√ºr die direkte Anzeige - die prim√§re Zone f√ºr alle DNS-Server in der Dom√§ne domain.ru. </font><font style="vertical-align: inherit;">√Ñndern Sie nichts anderes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie eine neue Reverse-Lookup-Zone, indem Sie dieselben Optionen ausw√§hlen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktivieren Sie in den Eigenschaften des DNS-Servers auf der Registerkarte "Erweitert" das Kontrollk√§stchen "Rekursion deaktivieren".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie einen Testbenutzer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen wir zum "Active Directory-Verwaltungscenter". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tp/4s/si/tp4ssidqmpefwnpa1excc5oexii.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie rechts im Abschnitt "Benutzer" auf "Erstellen". </font><font style="vertical-align: inherit;">Geben Sie einen Namen ein, z. B. Test, und klicken Sie unten auf OK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b-/vd/pm/b-vdpmjw8osh9g0tor-ab0jl4sg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir w√§hlen den erstellten Benutzer aus und w√§hlen im vertikalen Men√º rechts "Passwort zur√ºcksetzen". </font><font style="vertical-align: inherit;">Lassen Sie das H√§kchen "Kennwort√§nderung erforderlich, wenn Sie sich das n√§chste Mal am System anmelden".</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server mit Citrix Delivery Controller</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie kann ich Windows Server 2016 herunterladen und installieren? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann ich Citrix Delivery Controller herunterladen und installieren? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie installiere und konfiguriere ich Citrix License Manager? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie installiere und konfiguriere ich NVIDIA License Manager?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server 2016</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da eine virtuelle Maschine (VM) mit Windows Server keine GPU ben√∂tigt, verwenden wir einen Server ohne GPU als Hypervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie Windows Server 2016 von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website herunter </font><font style="vertical-align: inherit;">. Es ist besser, dem Link mit dem Internet Explorer zu folgen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/u3/br/9tu3brk0d6qqy6k6drtf7gd2sig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit XenCenter erstellen wir eine virtuelle Maschine. Klicken Sie auf der Registerkarte "VM" auf "Neue VM". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/ea/yf/imeayf3rgvlrpaq4kqer_ofoei0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir w√§hlen die erforderlichen Parameter aus: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VM-Vorlage - Windows Server 2016 (64-Bit) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Name - ws-dc Installation </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aus ISO-Bibliothek - WindowsServer2016.iso, w√§hlen Sie aus dem bereitgestellten NFS-ISO-Speicher. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anzahl der vCPUs - 4 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topologie - 1 Socket mit 4 Kernen pro Socket </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speicher - 20-Gbit- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GPU-Typ - keine </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie diese virtuelle Festplatte - 100-Gbit- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Netzwerk</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Erstellung wird die virtuelle Maschine in der vertikalen Liste links angezeigt. Klicken Sie darauf und gehen Sie zur Registerkarte "Konsole". Wir warten, bis das Windows Server-Installationsprogramm geladen ist, und f√ºhren die erforderlichen Schritte zur Installation des Betriebssystems aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In XenTools VM installieren. Klicken Sie mit der rechten Maustaste auf VM und dann auf "Citrix VM Tools installieren ...". Danach wird das Image bereitgestellt, das Sie zum Ausf√ºhren und Installieren von XenTools ben√∂tigen. Am Ende der Installation ist ein Neustart der VM erforderlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurieren Sie den Netzwerkadapter: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IP-Adresse - 192.168.1.111 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maske - 255.255.255.0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gateway - 192.168.1.1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS1 - 8.8.8.8 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS2 - 8.8.4.4 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Windows Server nicht aktiviert ist, wird er aktiviert. Der Schl√ºssel kann an derselben Stelle abgenommen werden, an der das Bild heruntergeladen wurde.</font></font><br>
<br>
<pre><code class="bash hljs">[PowerShell]$ slmgr -ipk xxxxx-xxxxx-xxxxx-xxxxx-xxxxx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Richten Sie den Computernamen ein. </font><font style="vertical-align: inherit;">In meinem Fall ist dies ws-dc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie die VM zur Dom√§ne domen.ru hinzu, starten Sie sie neu und melden Sie sich unter dem Dom√§nenadministratorkonto DOMEN \ Administrator an.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Delivery Controller</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie Citrix Virtual Apps und Desktops 1811 unter ws-dc.domain.com herunter. </font><font style="vertical-align: inherit;">Der Download-Link f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">virtuelle Citrix Apps und Desktops</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist verf√ºgbar, nachdem Sie sich auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">angemeldet haben</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ik/wy/--/ikwy--onnx7q_qlpdy8jjrn9_qi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√§ngen Sie die heruntergeladene ISO ein und f√ºhren Sie sie aus. </font><font style="vertical-align: inherit;">W√§hlen Sie Citrix Virtual Apps und Desktops 7. </font><font style="vertical-align: inherit;">Klicken Sie anschlie√üend auf "Erste Schritte". </font><font style="vertical-align: inherit;">Ein Neustart k√∂nnte n√∂tig sein. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/-l/x5/po-lx5nd34-fuw7gibvgajcg42w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In meinem Fall ist es ausreichend , </font><font style="vertical-align: inherit;">die folgenden Komponenten f√ºr die </font><font style="vertical-align: inherit;">Installation auszuw√§hlen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Delivery Controller </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Studio </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
License Server </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Storefront </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚ÄûInstall‚Äú nicht √§ndern etwas anderes und klicken Sie auf </font><font style="vertical-align: inherit;">Ein Neustart ist mehrmals erforderlich, danach wird die Installation fortgesetzt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald die Installation abgeschlossen ist, wird Citrix Studio, die Citrix Farmverwaltungsumgebung, gestartet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tp/4q/_x/tp4q_xeo9tdviobu4zaannj-vfk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Site Setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie den ersten Abschnitt des Drei-Site-Setups. </font><font style="vertical-align: inherit;">Geben Sie beim Einstellen den Site-Namen - Dom√§ne an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Abschnitt ‚ÄûVerbindung‚Äú geben wir die Daten f√ºr die Verbindung des Hypervisors mit der GPU an: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verbindungsadresse - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.1.100</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Benutzername - Root- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passwort - Ihr Passwort </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verbindungsname - m60 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Speicherverwaltung - Verwenden Sie den lokalen Speicher f√ºr den Hypervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Name f√ºr diese Ressourcen - m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie Netzwerke aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie einen GPU-Typ und eine Gruppe aus - GRID M60-4Q.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimieren von Citrix Maschinenkatalogen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie beim Einrichten des zweiten Abschnitts - Computerkataloge die Option Einzelsitzungsbetriebssystem (Desktop-Betriebssystem). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Master-Image - </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen </font><font style="vertical-align: inherit;">Sie das vorbereitete Image der virtuellen Maschine und die Version von Citrix Virtual Apps and Desktops - 1811 aus. </font><font style="vertical-align: inherit;">W√§hlen Sie beispielsweise die Anzahl der virtuellen Maschinen im Verzeichnis. 4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie das Schema an, nach dem die virtuellen Maschinen benannt werden. In meinem Fall ist dies Desktop ##. </font><font style="vertical-align: inherit;">In diesem Fall werden 4 VMs mit den Namen desktop01-04 erstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Name des Maschinenkatalogs - m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beschreibung des Maschinenkatalogs - m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie den Maschinenkatalog mit vier VMs erstellt haben, finden Sie diese in der vertikalen XenCenter-Liste auf der linken Seite.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Delivery Group</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte Abschnitt beginnt mit der Auswahl der Anzahl der VMs, auf die der Zugriff gew√§hrt werden soll. </font><font style="vertical-align: inherit;">Ich werde alle vier angeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie im Abschnitt "Desktops" auf "Hinzuf√ºgen", um die VM-Gruppe hinzuzuf√ºgen, auf die wir Zugriff gew√§hren. </font><font style="vertical-align: inherit;">Anzeigename - m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liefergruppenname - m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Einrichten der drei Hauptabschnitte sieht das Hauptfenster von Citrix Studio ungef√§hr so ‚Äã‚Äãaus</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/s3/up/kbs3up5h_utcj8db_caznbwgo_i.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Lizenzmanager</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie die Lizenzdatei √ºber Ihr pers√∂nliches Konto auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website herunter </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie in der vertikalen Liste links Alle Lizenzierungswerkzeuge (Legacy) aus. Gehen Sie zur Registerkarte "Lizenzen aktivieren und zuweisen". W√§hlen Sie Citrix VDA-Lizenzen aus und klicken Sie auf Weiter. Geben Sie den Namen unserer Delivery Controller - ws-dc.domain.ru und die Anzahl der Lizenzen - 4 an. Klicken Sie auf "Weiter". Laden Sie die generierte Lizenzdatei f√ºr ws-dc.domain.ru herunter. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-f/6o/tg/-f6otgoimp8n0qh_xdcrfvf5hew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie in der linken vertikalen Liste von Citrix Studio den Abschnitt "Lizenzierung" aus. Klicken Sie in der rechten vertikalen Liste auf "License Management Console". Geben Sie im sich √∂ffnenden Browserfenster die Daten f√ºr die Autorisierung des Dom√§nenbenutzers DOMEN \ Administrator ein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wechseln Sie in Citrix Licensing Manager zur Registerkarte "Lizenz installieren". Um eine Lizenzdatei hinzuzuf√ºgen, w√§hlen Sie "Heruntergeladene Lizenzdatei verwenden".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bo/sy/rz/bosyrz3sj4ysmjs0vlwfhcp36ki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Installation von Citrix-Komponenten werden mehrere virtuelle Maschinen verwendet, eine Komponente - eine VM. </font><font style="vertical-align: inherit;">In meinem Fall arbeiten alle Citrix-Systemdienste auf derselben VM. </font><font style="vertical-align: inherit;">In diesem Zusammenhang stelle ich einen Fehler fest, dessen Korrektur f√ºr mich besonders schwierig war. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn nach dem Neustart von ws-dc andere Probleme auftreten, empfehle ich, zuerst die ausgef√ºhrten Dienste zu √ºberpr√ºfen. </font><font style="vertical-align: inherit;">Hier ist eine Liste der Citrix-Dienste, die nach einem Neustart der VM automatisch gestartet werden sollen:</font></font><br>
<br>
<pre><code class="plaintext hljs">SQL Server (SQLEXPRESS)<font></font>
Citrix Configuration Service<font></font>
Citrix Delegated Administration Service<font></font>
Citrix Analytics<font></font>
Citrix Broker Service<font></font>
Citrix Configuration Logging Service<font></font>
Citrix AD Identity Service<font></font>
Citrix Host Service<font></font>
Citrix App Library<font></font>
Citrix Machine Creation Service<font></font>
Citrix Monitor Service<font></font>
Citrix Storefront Service<font></font>
Citrix Trust Service<font></font>
Citrix Environment Test Service<font></font>
Citrix Orchestration Service<font></font>
FlexNet License Server -nvidia</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Installieren verschiedener Citrix-Dienste auf einer einzelnen VM ist ein Problem aufgetreten. </font><font style="vertical-align: inherit;">Nach einem Neustart werden nicht alle Dienste gestartet. </font><font style="vertical-align: inherit;">Einer nach dem anderen, um die gesamte Kette zu starten, war Faulheit. </font><font style="vertical-align: inherit;">Die L√∂sung wurde hart gegoogelt, deshalb bringe ich sie hierher - zwei Parameter sollten in der Registrierung ge√§ndert werden:</font></font><br>
<br>
<pre><code class="bash hljs">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control<font></font>
Name : ServicesPipeTimeout<font></font>
Value :240000<font></font>
<font></font>
Name : WaitToKillServiceTimeout<font></font>
Value : 20000</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nvidia Lizenzmanager</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie den NVIDIA License Manager f√ºr Windows √ºber Ihr pers√∂nliches Konto auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nvid.nvidia.com herunter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es ist besser, den Internet Explorer zu verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/au/hb/ih/auhbihphsv81hapm3cpgpxjbcmi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie es auf ws-dc. Dazu m√ºssen Sie zuerst </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAVA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> installieren </font><font style="vertical-align: inherit;">und die Umgebungsvariable JAVA_HOME hinzuf√ºgen. Danach k√∂nnen Sie setup.exe ausf√ºhren, um den NVIDIA License Manager zu installieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nv/bd/wu/nvbdwuyf4xtx-fsqqpa2qwzunke.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie einen Server, generieren Sie die Lizenzdatei und laden Sie sie in Ihrem pers√∂nlichen Konto auf der Website </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nvid.nvidia.com herunter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Lassen Sie uns die Lizenzdatei f√ºr ws-dc √ºbertragen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r-/ui/zb/r-uizbl706_p1w35j27fk0lv2wu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit einem Browser melden wir uns bei der NVIDIA License Manager-Weboberfl√§che an, die unter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8080 / licserver verf√ºgbar ist, und f√ºgen eine Lizenzdatei hinzu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/ut/oc/viutocj16sitn-q_diao-oehmfa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktive Sitzungen mit vGPU k√∂nnen im Abschnitt Lizenzierte Clients angezeigt werden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fernzugriff auf den Citrix-Computerkatalog</font></font></h2><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie installiere ich Citrix Receiver? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie verbinde ich mich mit einem virtuellen Desktop? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffnen Sie auf dem funktionierenden Computer einen Browser, in meinem Fall Chrome, und rufen Sie die Adresse der Weboberfl√§che von Citrix StoreWeb auf</font></font><br>
<br>
<pre><code class="bash hljs">http://192.168.1.111/Citrix/StoreWeb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Citrix Recever noch nicht installiert ist, klicken Sie auf "Discover Receiver". Wir </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/iv/nh/riivnhuygym-oivw0iaq0hghr_g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lesen die Lizenzvereinbarung sorgf√§ltig durch, laden Citrix Receiver herunter und installieren es. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r3/9b/cd/r39bcddyu-e57s9tpk6gj-o19vg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Installation </font><font style="vertical-align: inherit;">kehren Sie </font><font style="vertical-align: inherit;">zum Browser zur√ºck und klicken auf "Weiter". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/vw/dg/iavwdgrxnyukfifcb03b0gvbyf4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als N√§chstes wird im Chrome-Browser eine Benachrichtigung ge√∂ffnet und klicken Sie auf "Open Citrix Receiver Launcher-Anwendung". und dann "Erneut erkennen" oder "Bereits installiert". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7o/hs/bx/7ohsbxmdogzv7tvdwji5xwa1xam.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die erste Verbindung verwenden wir die Daten des Testbenutzertests. </font><font style="vertical-align: inherit;">√Ñndern Sie das tempor√§re Passwort in ein permanentes. </font><font style="vertical-align: inherit;">
Wechseln </font></font><br>
<br>
<img src="https://habrastorage.org/webt/as/9k/l0/as9kl0vlibg4fmhts2rjgrsupvw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie nach der Autorisierung zur Registerkarte "Anwendungen" und w√§hlen Sie das </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j9/fb/md/j9fbmdbevvo42-2su76ifsaisnk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verzeichnis </font><font style="vertical-align: inherit;">"M60" aus. </font><font style="vertical-align: inherit;">Laden Sie die vorgeschlagene Datei mit der Erweiterung .ica herunter. </font><font style="vertical-align: inherit;">Nach einem Doppelklick wird in Desktop Veiwer ein Fenster mit dem Centos 7-Desktop ge√∂ffnet</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/70/3p/n2703pzygelapwl6ixj7n5wcgfm.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497808/index.html">3D mach es selbst. Teil 2: Es ist dreidimensional</a></li>
<li><a href="../de497810/index.html">PVS Studio.VS. Statistische Analyse von GCC 10. Unabh√§ngiger Minitest</a></li>
<li><a href="../de497812/index.html">Wissenschaftler vom MIT entwickeln ein Ger√§t, mit dem sie ihre Tr√§ume zumindest teilweise kontrollieren k√∂nnen</a></li>
<li><a href="../de497814/index.html">F√ºnf Stufen, um das Unvermeidliche zu akzeptieren, oder wie wir ein Programm f√ºr die automatisierte Profilerstellung entwickelt haben</a></li>
<li><a href="../de497816/index.html">Die Russische Eisenbahn schickt mir die Tickets eines anderen</a></li>
<li><a href="../de497820/index.html">Statistische Regularisierung falscher inverser Probleme zu ihnen. Turchin (Teil 1)</a></li>
<li><a href="../de497822/index.html">Mann in einer Flasche</a></li>
<li><a href="../de497826/index.html">So erfassen Sie schnell die Welt oder verwalten ein Netzwerk von Windows-Computern mithilfe von OPSI</a></li>
<li><a href="../de497828/index.html">2 in 1: Verschl√ºsselung mit Sicherheitsschutz</a></li>
<li><a href="../de497830/index.html">OWASP Moskau 2020/1 Aufnahmen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>