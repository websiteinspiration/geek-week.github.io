<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç´ ü§° üñ®Ô∏è GSM telephone with disk dialer ‚ÜóÔ∏è üì© ‚¨úÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Surely, many radio enthusiasts had an idea to adapt a telephone with a disk dialer for mobile radio communications. 
 
 Wired communication is gradual...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>GSM telephone with disk dialer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489796/"><img src="https://habrastorage.org/webt/dn/3a/ch/dn3achv8ylmriosnw_nkwcveo4g.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Surely, many radio enthusiasts had an idea to adapt a telephone with a disk dialer for mobile radio communications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wired communication is gradually becoming a thing of the past, and such devices are gathering dust on a shelf. </font><font style="vertical-align: inherit;">I always liked the look of such devices. </font><font style="vertical-align: inherit;">I could not resist and two years ago I decided to remake the telephone, which still works, without failures.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the telephone, the following devices are needed:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any button mobile phone;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lithium-ion battery size 18650 and a device for charging it (Power bank);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB BF micro splitter cable (female) -2 x USB BM micro (male);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controller on the ATtiny2313 chip.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Electronics</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Microcontroller bundle diagram with a mobile phone and a dialer. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/wi/an/2swianzi_5w7dxx5ksereqrv0xc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, it is necessary to solder to the contacts of the buttons of the mobile phone, the cable loop and connect to the controller. </font><font style="vertical-align: inherit;">A controller to teach how to dial when dialing the corresponding numbers on the disk. </font><font style="vertical-align: inherit;">Most likely, the layout of the buttons on most mobile phones will be similar. </font><font style="vertical-align: inherit;">For my scheme, it is necessary: ‚Äã‚Äãone common wire for groups of buttons 1-4-7, 2-5-8-0 and 3-6-9 and a wire for each digit; </font><font style="vertical-align: inherit;">a pair of conductors to the call, cancel, and toggle buttons from one SIM card to the second.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9p/ak/od/9pakoda86qhnbxsuozdlz7qzsvu.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After soldering, we collect the mobile phone back into the case and fasten it inside the telephone with brackets. I mounted the mobile phone with the display facing down so that I could view the information through the existing window at the bottom of the telephone, as well as get to the other buttons that are not associated with the disk dialer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When dialing a number on a disk, a pair of contacts opens (normally closed NC contacts, green-yellow wire). The number of openings (P) corresponds to the set digit, for example, when dialing ‚Äú1‚Äù = --, ‚Äú2‚Äù = ----, etc. When the finger reaches the stop, another pair of contacts closes, briefly (white-brown). Using these two pairs of contacts, you can program the dialing process.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ss/ag/1i/ssag1ihyv-rvkpbyfakzxwk2d-a.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The controller board is made taking into account the shape of the device and the location of the contact group under the tube. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each contact under the button is switched by an optocoupler, the inclusion of which is controlled by the microcontroller.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/6p/_e/ze6p_ecgxsa75vegwsemeyzz-wo.jpeg" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/zz/bw/uz/zzbwuzpe4kgkgbeh3hqnqwofx7y.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Power bank (in the photo in the black case) continues to work as a source, starting with a load of about 20mA, if it is less, it will go into sleep mode. Therefore, a reed switch was mounted near the lever, which, when lifting the tube, supplies power to the LED through resistance (not shown on the circuit diagram). The LED, as a load, should be used more powerful, a small one will not work. You can also power the circuit directly from the battery contacts, but then you need to set the microcontroller's power to a low voltage when fuse bits are flashed. The battery is powered by the controller board and mobile phone. Power bank is charged via USB cable. Even without going into sleep mode, the battery capacity to power the controller board and mobile phone is enough for two weeks of battery life.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/7z/qm/gw7zqme_aiqmawjykp7grk4h80w.jpeg" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/ae/cf/ir/aecfirlszhxpof2ovpzqz3z2zgk.jpeg" alt="image"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can mount a mobile phone headset into the handset, instead of the microphone and speaker capsules. But I went the other way and redid the handset with capsules and the 3.5mm audio jack. Connection: the base of the connector - on the yellow and white wires (‚Äú-‚Äù of the microphone (360Œ©) and ‚Äú-‚Äù of the speaker (340 Œ©)); the second from the base of the ring - on brown (‚Äú+‚Äù microphone); the third from the base of the ring - to green (‚Äú+‚Äù speaker). The colors of the wires for each model of devices are different! Additional impedances were selected based on the resistance of the coils of the headset, microphone (2000Œ©) and speaker (45 Œ©). For other mobile phone models, the resistance should be different. Experiment with mobile phones that you have already said goodbye to, not the fact that they will survive after such manipulations!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the scheme, you should add a node for making a call, because the regular electronic call of a mobile phone turned out to be not so colorful as in the old device and quiet! </font><font style="vertical-align: inherit;">In my case, there were no extra conclusions on the microcontroller, so I had to refuse the electromechanical call, which I regretted later. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
During operation, I found out that you still need to duplicate the disk dialer with the buttons. </font><font style="vertical-align: inherit;">Since the disc will not work to write text, let's say send SMS during registration.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller Operation Algorithm</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will give only the algorithm (comments). The whole essence of the algorithm, in a cycle: enable, disable ports under certain conditions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
while (1) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 { </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Procedure for short-term pressing the ‚Äúcancel call‚Äù button from the button under the handset (when the handset is off-hook, the contact is constantly closed). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. If there is 0 on PA1 ( contact is closed, the receiver is off-hook), then go to the code below: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Turn on PD4 (mobile phone wakes up from sleep mode); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Turn off the PD4. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. If there is 1 on PA1 (NO contact is open, the button is pressed, the call is canceled when an incoming call is received), then go to the code below: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Start the button timer counter under the handset. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the button contacts under the handset were open for less than 3.1 seconds, then follow the code below:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Turn on PD2 (call cancellation for an incoming call); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Turn off PD2; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Zeroing the number, for a new set with an outgoing call. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the contacts of the button under the handset were open for more than 3.1 seconds, then the code below: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Resets the state of the contacts of the button under the handset to start the cycle again </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Resets the number for a new dialing with an outgoing call. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. The procedure for polling PD0 and PD1 contacts: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - If there is 0 on PD1 (NO contact closed) and 1 on PD0 (NC contact open), then go to the code below: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Counter of the dialed digit of the number (from 0 to 9); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - If there is 0 on PD0 (NC contact closed), then go to the code below; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - If there is 1 on PD1 (NO contact open), then go to the code below;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - The counter of the number of dialed digits (total 11: 87.XX.XXXXXXX). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. The procedure for automatically switching to a second SIM card (to another telecom operator, depending on the prefix of the number code, 3rd and 4th digits): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Highlight tens in the prefix p10 = n * 10; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - The allocation of units in the prefix p1 = n; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Formation of a prefix for the condition below; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - If operator prefix No. 1 is switched to SIM1. In the next set, if the prefix is ‚Äã‚Äãthe same, switching to SIM1 will not happen </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Turn on PD3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - </font><font style="vertical-align: inherit;">Turn off </font><font style="vertical-align: inherit;">PD3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - If operator prefix No. 2 switches to SIM2. In the next set, if the prefix is ‚Äã‚Äãthe same, switching to SIM2 will not happen </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Turn on PD3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - </font><font style="vertical-align: inherit;">Turn off </font><font style="vertical-align: inherit;">PD3</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. The procedure for turning on the LED "switching to SIM1": </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - so that the LED does not work in standby mode; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - switching. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Enable pins of PB and PD ports for buttons 0‚Äì9. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8. The procedure for calling the dialed number. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
} </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fifth point for automatically switching to another SIM card, someone will not need it, and you can exclude it. The code is quite primitive (if {} else {} in an infinite loop), which is why it works stably. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When designing, try not to damage the housing by drilling and sawing using standard openings and slots. Surely the GSM standard will be completely out of date, there will be new communication standards that can be used by implementing it in the same retro case.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I want to warn those designers who want to repeat the assembly of a similar device that after that there is always a desire to disassemble and update the filling, at the sight of rare telephone sets. </font><font style="vertical-align: inherit;">And yet, do not talk on such a device outdoors, eyewitnesses may think badly of you!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489784/index.html">February 27 - the start of the project for students of NX Bootcamp in Novosibirsk</a></li>
<li><a href="../en489786/index.html">Warm, tube and very dangerous</a></li>
<li><a href="../en489788/index.html">How to play on the Nintendo 64?</a></li>
<li><a href="../en489790/index.html">Touch terminal for harsh environments</a></li>
<li><a href="../en489794/index.html">Non-technical article about technical articles</a></li>
<li><a href="../en489798/index.html">Assembler in the aviation industry: Interview with ASM autopilot developer for aircraft and drones</a></li>
<li><a href="../en489800/index.html">The first computers in East Africa</a></li>
<li><a href="../en489802/index.html">Demolition of the tower and accurate calculation. April Fools NUC Intel contest</a></li>
<li><a href="../en489804/index.html">Do autotests think about electric bugs</a></li>
<li><a href="../en489806/index.html">How to remove the human factor from the hiring process and accelerate it by orders of magnitude</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>