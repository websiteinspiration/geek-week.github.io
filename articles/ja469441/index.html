<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¿ ğŸ§•ğŸ½ ğŸ’ƒğŸ» ã‚·ãƒ³ãƒ—ãƒ«ã•ã®è¤‡é›‘ã• âœï¸ ğŸŒ§ï¸ ğŸ†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‰å›ã®è¨˜äº‹ã®ã¾ãˆãŒãã§æ›¸ã„ãŸã‚ˆã†ã«ã€ç­†è¨˜ãŒå°‘ãªãå®‰å…¨æ€§ã®é«˜ã„è¨€èªã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚ç§ã®ä¸»ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯å¸¸ã«Cï¼ƒã§ã—ãŸã®ã§ã€è¤‡é›‘ã•ã®ç‚¹ã§ãã‚Œã¨å¯¾ç§°çš„ã«ç•°ãªã‚‹2ã¤ã®è¨€èªã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ä¸€æ–¹ã®è¨€èªã¯ã€Œçµ¶å¯¾ã«æˆåŠŸã—ãªã„ã§ãã ã•ã„ã€ã¨è¨€ã†ã“ã¨ã§çŸ¥ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚çµå±€ã€ç§ã¯ä½•ãŒã‚ˆã‚Šè‰¯ã...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ã‚·ãƒ³ãƒ—ãƒ«ã•ã®è¤‡é›‘ã•</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469441/"><p><img src="https://habrastorage.org/webt/4l/s7/kr/4ls7krf3m0xjrh7ediaeilkldpe.png"></p><br>
<p><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰å›ã®è¨˜äº‹ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ãˆãŒãã§æ›¸ã„ãŸã‚ˆã†ã«ã€</font><font style="vertical-align: inherit;">ç­†è¨˜ãŒå°‘ãªãå®‰å…¨æ€§ã®é«˜ã„è¨€èªã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚ç§ã®ä¸»ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯å¸¸ã«Cï¼ƒã§ã—ãŸã®ã§ã€è¤‡é›‘ã•ã®ç‚¹ã§ãã‚Œã¨å¯¾ç§°çš„ã«ç•°ãªã‚‹2ã¤ã®è¨€èªã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ä¸€æ–¹ã®è¨€èªã¯ã€Œçµ¶å¯¾ã«æˆåŠŸã—ãªã„ã§ãã ã•ã„ã€ã¨è¨€ã†ã“ã¨ã§çŸ¥ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚çµå±€ã€ç§ã¯ä½•ãŒã‚ˆã‚Šè‰¯ããªã‚‹ã‹ã‚’ç†è§£ã—ãŸã„ã¨æ€ã„ã¾ã—ãŸï¼šæ„å›³çš„ãªå˜ç´”ã•ã¾ãŸã¯æ„å›³çš„ãªå³å¯†ã•ï¼Ÿ</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§ã¯1ã¤ã®å•é¡Œã®è§£æ±ºç­–ã‚’æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚ä¸¡æ–¹ã®è¨€èªã§ã©ã‚Œã»ã©ç°¡å˜ã‹ã€çµŒé¨“ã®ã‚ã‚‹é–‹ç™ºè€…ã«ã¨ã£ã¦ã®å­¦ç¿’æ›²ç·šã¯ã©ã‚Œãã‚‰ã„ã‹ã€ã“ã‚Œã«ã¤ã„ã¦ã©ã‚Œã ã‘ç ”ç©¶ã™ã¹ãã‹ã€ãã—ã¦ã©ã¡ã‚‰ã‹ä¸€æ–¹ã®å ´åˆã®ã€Œåˆå¿ƒè€…ã€ã‚³ãƒ¼ãƒ‰ãŒæ…£ç”¨çš„ã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ã•ã‚‰ã«ã€Haskellã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼ã‚’æº€è¶³ã•ã›ã‚‹ãŸã‚ã«æœ€çµ‚çš„ã«æ”¯æ‰•ã†å¿…è¦ãŒã‚ã‚‹é‡‘é¡ã¨ã€æœ‰åãªgoroutineã®åˆ©ä¾¿æ€§ãŒã©ã‚Œã ã‘ã®æ™‚é–“ã‚’ç¯€ç´„ã§ãã‚‹ã‹ã‚’ç†è§£ã—ãŸã‹ã£ãŸã®ã§ã™ã€‚ã§ãã‚‹ã ã‘åã‚ŠãŒãªã„ã‚ˆã†ã«å¿ƒãŒã‘ã€è¨˜äº‹ã®æœ€å¾Œã«ä¸»è¦³çš„ãªæ„è¦‹ã‚’è¿°ã¹ã¾ã™ã€‚æœ€çµ‚çµæœã¯ç§ã‚’éå¸¸ã«é©šã‹ã›ãŸã®ã§ã€ç§ã¯ãƒãƒ–ãƒ­ãƒ•ã‚¹ã‚¯å¸‚æ°‘ãŒãã®ã‚ˆã†ãªæ¯”è¼ƒã«ã¤ã„ã¦èª­ã‚€ã“ã¨ã¯èˆˆå‘³æ·±ã„ã ã‚ã†ã¨æ±ºã‚ã¾ã—ãŸã€‚</font></font></p><a name="habracut"></a><br>
<hr><br>
<p>   .   ,   (*)   ,    ,     .     "Avoid (success) (at all costs)",   "   ,     ,    ",   -    "Avoid (success at all costs)",   "    ,         ". ,           :       ,    adhoc  ,     .  ,   ,  "    ,            ".</p><br>
<h2 id="metodika-sravneniya"> </h2><br>
<p>  ,   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">0xd34df00d</a>     :</p><br>
<p>      - , ,  ( ,   ).   :</p><br>
<pre><code class="plaintext">|- 1<font></font>
   |- 2<font></font>
   |- 3<font></font>
      |- 4<font></font>
      |- 5</code></pre><br>
<p>     API    <code>/api/{id}</code>  JSON-  . </p><br>
<p>   ,  ,         API,     . ,       ,           <code>IO</code>     .</p><br>
<p>      API,     ,     .   ,    ,      ,  ..</p><br>
<p>       :</p><br>
<pre><code class="plaintext">|- 1<font></font>
   |- 2<font></font>
   |- 3<font></font>
      |- 4<font></font>
      |- 5<font></font>
<font></font>
|- 1: <font></font>
   |- 2:   1<font></font>
   |- 3:   2<font></font>
      |- 4:   1<font></font>
      |- 5:   2</code></pre><br>
<p>            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://jsonplaceholder.typicode.com/todos/</a></p><br>
<p> ,  ,   ,   .</p><br>
<h2 id="otstuplenie-pro-haskell">  Haskell</h2><br>
<p><br>
<em>  ,   -, -    <code>do-</code>,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.    ,  .      C#</em></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/90e/d14/6ac/90ed146ac2ed677cf377915af7a99705.jpg"></p><br>
<p><em> -  .   </em></p><br>
<p>Disclaimer:          ,       Haskell    </p><br>
<p>   ,        ML .   ,   ,  Lingua Franca -  *   .     ,     ,      ,  .     .   ,         ,     .</p><br>
<p><em>*        /++/...,    â€” C++/C#/Java/Kotlin/Swift/...</em></p><br>
<p>  ,      Haskell.  Scala/F#/Idris/Elm/Elixir/â€¦    ,      â€”   ,  .        ,          ,    Haskell    .      Rust/C#,      ,   .  <code>Option</code>/<code>Maybe</code>, <code>Result</code>/<code>Either</code>  <code>Task</code>/<code>Promise</code>/<code>Future</code>/<code>IO</code>                .</p><br>
<h4 id="itak-esli-vy-vidite-pered-soboy">,     </h4><br>
<pre><code class="haskell">data Maybe a = Just a | Nothing  --  </code></pre><br>
<p>  </p><br>
<pre><code class="rust">//   <font></font>
enum Maybe&lt;T&gt; {<font></font>
   Just(T),<font></font>
   Nothing<font></font>
}</code></pre><br>
<p>   ,        .     Rust: -  -          T.   -     .         . ,  </p><br>
<pre><code class="haskell">data Either a b = Left a | Right b</code></pre><br>
<p>    ,     </p><br>
<pre><code class="rust">enum Either&lt;A,B&gt; {<font></font>
   Left(A),<font></font>
   Right(B)<font></font>
}</code></pre><br>
<p>   .   ,         (   -    ).</p><br>
<p>    -   -,   ,   :</p><br>
<pre><code class="haskell">data Comment = Comment {<font></font>
      title :: String<font></font>
    , id  :: Int<font></font>
    } deriving (Show) --     <font></font>
              --    (  ToString()  C#/Java)</code></pre><br>
<p>  :</p><br>
<pre><code class="rust">#[derive(Debug)]<font></font>
struct Comment {<font></font>
    title: String,<font></font>
    id: i32<font></font>
}</code></pre><br>
<p>   ,  .</p><br>
<h4 id="esli-zhe-vy-vidite-pered-soboy">     </h4><br>
<pre><code class="haskell">sqr :: Int -&gt; Int<font></font>
sqr x = x*x<font></font>
<font></font>
main :: IO () -- IO   ,     ,     <font></font>
main = print (sqr 3)</code></pre><br>
<p> </p><br>
<pre><code class="rust">fn sqr(x: i32) -&gt; i32 { x*x }<font></font>
fn main() {<font></font>
   println!("{}", sqr(3));<font></font>
}</code></pre><br>
<p>    ,  â€”    ,   â€”  <code>main</code>. </p><br>
<p> ,    :  -    ,  ML- â€” .   -   -   .    <code>(sqr 3)</code>  ,     ,        .       <code>print sqr</code>      ,  <code>sqr</code>   <code>Fn(i32) -&gt; i32</code> (<code>Func&lt;int, int&gt;</code>   C#),      <code>show</code> ( <code>ToString()</code>). </p><br>
<p> :        :  () â€”  ,   â€”   . -   (      )     <code>-&gt;</code>,      . ,     <code>foo :: Int -&gt; Double -&gt; String -&gt; Bool</code>,      <code>foo</code>    :  ,       ,    .</p><br>
<p>   ,      <code>bar :: (Int -&gt; Double) -&gt; Int -&gt; (String -&gt; Bool)</code>?</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>   <code>bar</code>   :  <code>Int -&gt; Double</code>    <code>Int</code>,    <code>String -&gt; bool</code>.</p><br>
<p>Rust-: <code>fn bar(f: impl Fn(i32) -&gt; f64, v: i32) -&gt; impl Fn(String) -&gt; bool</code></p><br>
<p>C#-: <code>Func&lt;string, bool&gt; Bar(Func&lt;int, double&gt; f, int v)</code> </p></div></div><br>
<p>   ,    (     ),       .     ,        ,        ,      .</p><br>
<h4 id="teper-zhe-esli-vy-vidite"> ,   </h4><br>
<pre><code class="haskell">sqr x = x*x     --     ,   <font></font>
add x y = x + y -- : FOR EXAMPLE PURPOSES ONLY!<font></font>
add5_long x = add 5 x<font></font>
add5 = add 5    --    ,       , <font></font>
                --  add5     add5_long. <font></font>
                --    Method Groups  C#<font></font>
                --     - <font></font>
<font></font>
main :: IO ()<font></font>
main = putStrLn (show (add 10 (add5 (sqr 3)))) </code></pre><br>
<p>   </p><br>
<pre><code class="rust">fn sqr(x: i32) -&gt; i32 { x*x }<font></font>
fn add(x: i32, y: i32) -&gt; i32 { x + y }<font></font>
fn add5(x: i32) -&gt; i32 { add(5, x) }<font></font>
<font></font>
fn main() {<font></font>
   println!("{}", ToString::to_string(add(10, add(5, sqr(3)))));                <font></font>
}</code></pre><br>
<p>,    .      $      .   <code>a $ b</code>    <code>a (b)</code>.      :</p><br>
<pre><code class="haskell">main = putStrLn $ show $ add 10 $ add5 $ sqr 3 -- !  </code></pre><br>
<p>              ,    -  .     .   â€”   ,     <code>f (g x) = (f . g) x</code>.  <code>print (sqr 3)</code>    <code>(print . sqr) 3</code>.   ""  "  "    "    ",      <code>3</code>.       :</p><br>
<pre><code class="haskell">main = putStrLn . show . add 10 . add5 $ sqr 3</code></pre><br>
<p>  ,        ?    ,  â€” ,           ,         - :</p><br>
<pre><code class="haskell">--     5,   10,    ,    <font></font>
putStrLnShowAdd10Add5 = putStrLn . show . add 10 . add5<font></font>
--   putStrLnShowAdd10Add5 x = putStrLn . show . add 10 . add5 x<font></font>
--      (, ,    )<font></font>
<font></font>
main :: IO ()<font></font>
main = putStrLnShowAdd10Add5 $ sqr 3</code></pre><br>
<p>    "24".             â€”       ,       ,   â€”        â€”    .</p><br>
<p>   ML   ,    Haskell ,       </p><br>
<h4 id="posledniy-ryvok"> </h4><br>
<pre><code class="haskell">main :: IO ()<font></font>
main = <font></font>
  let maybe15 = do<font></font>
      let just5 = Just 5    --    Maybe   Just (.  )   5<font></font>
      let just10 = Just 10  --     10<font></font>
      a &lt;- just5            --     ,   ,     `a`.           !<font></font>
      b &lt;- just10           --     `b`<font></font>
      return $ a + b        --      ,      (    Just)      a  b.<font></font>
  in <font></font>
    print maybe15</code></pre><br>
<p> ,    <code>do</code>-   <code>&lt;-</code> ,  <code>do-</code>,      ,   ( ,   ).       <code>Maybe</code>     - (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">"Null condition operator"</a>),   null-  ,   null,     -  . <code>do-</code> -  ,     .</p><br>
<p>,     ? ,    "" ,     (   <code>Maybe</code>,      ,  <code>Result&lt;T,Error&gt;</code>,        â€” <code>Either</code>),    ,   ?    ,  <code>&lt;-</code>    ,              .</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>     ,    <code>async/await</code> (   C# ..  Rust async-await   ):</p><br>
<pre><code class="cs">async ValueTask&lt;int&gt; Maybe15() {<font></font>
    var just5 = Task.FromResult(5);<font></font>
    var just10 = Task.FromResult(10);<font></font>
    int a = await just5; //         !<font></font>
    int b = await just10;<font></font>
    return a + b;<font></font>
}<font></font>
<font></font>
Console.WriteLine(Maybe15().ToString()) //   15</code></pre><br>
<p>    <code>Task</code>  <code>Maybe</code>,     ,   .<br>
 ,   <code>do-</code>   <code>async/await</code> (       <code>Task</code>)    ,  <code>do</code> â€”  " <code>async</code>-",  <code>&lt;-</code> â€”  "" (  ).      <code>Future</code>/<code>Option</code>/<code>Result</code>/ <code>List</code>,   . </p></div></div><br>
<div class="spoiler"><b class="spoiler_title"> C#</b><div class="spoiler_text"><p>    C#   <code>do-</code>,     <code>async/await</code>  <code>Task</code>.   , <em> </em>, LINQ-. ,     , -      ,          .         Nullable,     Haskell         (     Task). ,    ( ):</p><br>
<pre><code class="haskell">main :: IO ()<font></font>
main = <font></font>
  let maybe15 = do<font></font>
      a &lt;- Just 5<font></font>
      b &lt;- Just 10<font></font>
      return $ a + b <font></font>
  in <font></font>
    print maybe15</code></pre><br>
<p>   C#</p><br>
<pre><code class="cs">int? maybe15 = from a in new int?(5)<font></font>
               from b in new int?(10)<font></font>
               select a + b;<font></font>
<font></font>
Console.WriteLine(maybe15?.ToString() ?? "Nothing");</code></pre><br>
<p>  ?  â€” ,     haskell   Nothing   ,   C#    .</p><br>
<p>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  repl</a> (        ).        <code>Result</code>  <code>Task</code>.  ,     .  ,           (,      , ?).</p><br>
<p>           Haskell: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://repl.it/@Pzixel/ChiefLumpyDebugging</a></p></div></div><br>
<p>,    ,     </p><br>
<h2 id="haskell">Haskell</h2><br>
<p><img src="https://habrastorage.org/webt/yv/48/tc/yv48tcqlydoabxmt9zo0coqwcq4.png"></p><br>
<p><em>         ? , IDE   </em></p><br>
<p>                :  GHC (), Stack (   ,   <code>cargo</code>  <code>dotnet</code>), IntelliJ-Haskell,     .     ,         IDE  .</p><br>
<p>  ,      ,  ,  ,  ,       :</p><br>
<pre><code class="haskell">main :: IO ()<font></font>
main = putStrLn "Hello, World!"</code></pre><br>
<p>,  !     ,    .       <code>Data.Tree</code>    <code>drawTree</code>. , ,     :</p><br>
<pre><code class="haskell">import Data.Tree<font></font>
<font></font>
main :: IO ()<font></font>
main = do<font></font>
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]<font></font>
    putStrLn . drawTree $ tree --      ,     .<font></font>
                               --        </code></pre><br>
<p>    :</p><br>
<pre><code class="plaintext">    â€¢ No instance for (Num String) arising from the literal â€˜1â€™<font></font>
    â€¢ In the first argument of â€˜Nodeâ€™, namely â€˜1â€™<font></font>
      In the expression:<font></font>
        Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]</code></pre><br>
<p>-  30   ,   "   ?.. â€¦ ,       ",  "haskell map convert to string",        <code>map show</code>.   :     <code>putStrLn . drawTree . fmap show $ tree</code>, ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></p><br>
<p>,    ,       ?<br>
,   ,       .     ,    ,   -   -  . ..    -  Rust  ,            <code>Option</code> â€”  ,      - <code>Maybe</code> ( <code>Option</code>),  ,     HTTP ,    .       ,   .</p><br>
<p>    -:</p><br>
<pre><code class="haskell">import Data.Tree<font></font>
<font></font>
data Comment = Comment {<font></font>
      title :: String<font></font>
    , id  :: Int<font></font>
    } deriving (Show)<font></font>
<font></font>
getCommentById :: Int -&gt; Maybe Comment<font></font>
getCommentById i = Just $ Comment (show i) i<font></font>
<font></font>
main :: IO ()<font></font>
main = do<font></font>
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]<font></font>
    putStrLn . drawTree . fmap show $ tree</code></pre><br>
<p> ,     -   .      "haskell map maybe list" (    ,          ,    ),     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> "  <code>mapM</code>". :</p><br>
<pre><code class="haskell">import Data.Tree<font></font>
import Data.Maybe<font></font>
<font></font>
data Comment = Comment {<font></font>
      title :: String<font></font>
    , id  :: Int<font></font>
    } deriving (Show)<font></font>
<font></font>
getCommentById :: Int -&gt; Maybe Comment<font></font>
getCommentById i = Just $ Comment (show i) i<font></font>
<font></font>
main :: IO ()<font></font>
main = do<font></font>
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]<font></font>
    putStrLn . drawTree . fmap show $ tree<font></font>
    let commentsTree = mapM getCommentById tree<font></font>
    putStrLn . drawTree . fmap show $ fromJust commentsTree</code></pre><br>
<p>:</p><br>
<pre><code class="plaintext">1<font></font>
|<font></font>
+- 2<font></font>
|<font></font>
`- 3<font></font>
   |<font></font>
   +- 4<font></font>
   |<font></font>
   `- 5<font></font>
Comment {title = "1", id = 1}<font></font>
|<font></font>
+- Comment {title = "2", id = 2}<font></font>
|<font></font>
`- Comment {title = "3", id = 3}<font></font>
   |<font></font>
   +- Comment {title = "4", id = 4}<font></font>
   |<font></font>
   `- Comment {title = "5", id = 5}</code></pre><br>
<p>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.    <code>fromJust</code> ( <code>unwrap()</code>    <code>Nullable.Value</code>  C#,   ,   ,   ),     ,           .</p><br>
<p>    ,     ,       JSON'.<br>
 ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">wreq</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>.  15          :</p><br>
<pre><code class="haskell">{-# LANGUAGE DeriveGeneric #-}<font></font>
<font></font>
import Data.Tree<font></font>
import Data.Maybe<font></font>
import Network.Wreq<font></font>
import GHC.Generics<font></font>
import Data.Aeson<font></font>
import Control.Lens<font></font>
<font></font>
data Comment = Comment {<font></font>
      title :: String<font></font>
    , id  :: Int<font></font>
    } deriving (Generic, Show)<font></font>
<font></font>
instance FromJSON Comment -- `impl FromJson for Comment {}`   Rust<font></font>
<font></font>
getCommentById :: Int -&gt; IO Comment<font></font>
getCommentById i = do<font></font>
  response &lt;- get $ "https://jsonplaceholder.typicode.com/todos/" ++ show i<font></font>
  let comment = decode (response ^. responseBody) :: Maybe Comment<font></font>
  return $ fromJust comment<font></font>
<font></font>
main :: IO ()<font></font>
main = do<font></font>
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]<font></font>
    Prelude.putStrLn . drawTree . fmap show $ tree<font></font>
    let commentsTree = mapM getCommentById tree<font></font>
    Prelude.putStrLn . drawTree . fmap show $ fromJust commentsTree</code></pre><br>
<p>â€¦   20 ,       (,  <code>reqwest</code>  Rust),      :</p><br>
<pre><code class="plaintext">    * Couldn't match expected type `Maybe (Tree a0)'<font></font>
                  with actual type `IO (Tree Comment)'<font></font>
    * In the first argument of `fromJust', namely `commentsTree'<font></font>
      In the second argument of `($)', namely `fromJust commentsTree'<font></font>
      In a stmt of a 'do' block:<font></font>
        putStrLn . drawTree . fmap show $ fromJust commentsTree<font></font>
   |<font></font>
28 |     Prelude.putStrLn . drawTree . fmap show $ fromJust commentsTree<font></font>
   |                                                        ^^^^^^^^^^^^^</code></pre><br>
<p> ,    <code>fromJust</code>    <code>Maybe Tree</code> -&gt; <code>Tree</code>,         IO ,     <code>IO Tree</code>  <code>Maybe Tree</code>.    ?   ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> "  <code>&lt;-</code>"  . :</p><br>
<pre><code class="haskell">main :: IO ()<font></font>
main = do<font></font>
    let tree = Node 1 [Node 2 [], Node 3 [Node 4 [], Node 5 []]]<font></font>
    Prelude.putStrLn . drawTree . fmap show $ tree<font></font>
    commentsTree &lt;- mapM getCommentById tree<font></font>
    Prelude.putStrLn . drawTree . fmap show $ commentsTree</code></pre><br>
<p>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.  .  ,    .</p><br>
<p>  20  ,    .    Concurrent-, -  ,  -.    ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">async</a>.        ,     - :</p><br>
<pre><code class="haskell">commentsTree &lt;- mapConcurrently getCommentById tree</code></pre><br>
<p>.  <strong><em></em></strong> ,   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.       ,   â€”  .</p><br>
<p><em>:        ..   ,  HTTP ,  repl.it   .       </em></p><br>
<p>        .          C#  Rust        .         67  -.       ,  <code>reqwest</code>    100      ,     . ,                  . </p><br>
<p>     .     ,       ,    .        ,       :</p><br>
<pre><code class="haskell">main = do<font></font>
    let tree = [1,2,3,4,5]<font></font>
    print tree<font></font>
    commentsTree &lt;- mapConcurrently getCommentById tree<font></font>
    print commentsTree</code></pre><br>
<p></p><br>
<pre><code class="plaintext">[1,2,3,4,5]<font></font>
[Comment {title = "delectus aut autem", id = 1},Comment {title = "quis ut nam facilis et officia qui", id = 2},Comment {title = "fugiat veniam minus", id = 3},Comment {title = "et porro tempora", id = 4},Comment {title = "laboriosam mollitia et enim quasi adipisci quia provident illum", id = 5}]</code></pre><br>
<p>       ,     .        ,          <em> </em>,      . , ,           ( ,   ),  ,  ,  ,   <em></em> .  ,        ,            .</p><br>
<p>,    ,     , go.        ,           ( ,  go    )      .   ,       (,           ),           â€” !</p><br>
<h2 id="go">Go</h2><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/039/a3f/4cc/039a3f4cc229b1497864df0033839433.png"></p><br>
<p><em>  ,     </em></p><br>
<p>           ,     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://play.golang.org/</a>   .</p><br>
<p> ,     . ,   .      go :</p><br>
<pre><code class="go">package main<font></font>
<font></font>
type intTree struct {<font></font>
    id int<font></font>
    children []intTree<font></font>
}<font></font>
<font></font>
func main() {<font></font>
    tree := intTree{ //    gofmt <font></font>
        id: 1,<font></font>
        children: []intTree {<font></font>
            {<font></font>
                id: 2,<font></font>
                children: []intTree{<font></font>
<font></font>
                },<font></font>
            },<font></font>
            {<font></font>
                id: 3,<font></font>
                children: []intTree{<font></font>
                    {<font></font>
                        id: 4,<font></font>
                    },<font></font>
                    {<font></font>
                        id: 5,<font></font>
                    },<font></font>
                },<font></font>
            },<font></font>
        },<font></font>
    }<font></font>
}</code></pre><br>
<p>  â€” , <code>tree declared and not used</code>. ,     ,       ,  <code>tree</code>  <code>_</code>.  ,   <code>no new variables on left side of :=</code>. ,              ,        .      ,  ,          <code>foreach</code>     :</p><br>
<pre><code class="go">func showIntTree(tree intTree) {<font></font>
    showIntTreeInternal(tree, "")<font></font>
}<font></font>
<font></font>
func showIntTreeInternal(tree intTree, indent string) {<font></font>
    fmt.Printf("%v%v\n", indent, tree.id)<font></font>
    for _, child := range tree.children {<font></font>
        showIntTreeInternal(child, indent + "  ")<font></font>
    }<font></font>
}</code></pre><br>
<p>, ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> ,   </a>.      Haskell         ,          .</p><br>
<p> ,      .   ,    </p><br>
<pre><code class="go">type comment struct {<font></font>
    id int<font></font>
    title string<font></font>
}<font></font>
<font></font>
type commentTree struct {<font></font>
    value comment<font></font>
    children []commentTree<font></font>
}<font></font>
<font></font>
func loadComments(node intTree) commentTree {<font></font>
    result := commentTree{}<font></font>
    for _, c := range node.children {<font></font>
        result.children = append(result.children, loadComments(c))<font></font>
    }<font></font>
    result.value = getCommentById(node.id)<font></font>
    return result<font></font>
}<font></font>
<font></font>
func getCommentById(id int) comment { <font></font>
    return comment{id:id, title:"Hello"} //     go<font></font>
}</code></pre><br>
<p>           :</p><br>
<pre><code class="go">func showCommentsTree(tree commentTree) {<font></font>
    showCommentsTreeInternal(tree, "")<font></font>
}<font></font>
<font></font>
func showCommentsTreeInternal(tree commentTree, indent string) {<font></font>
    fmt.Printf("%v%v - %v\n", indent, tree.value.id, tree.value.title)<font></font>
    for _, child := range tree.children {<font></font>
        showCommentsTreeInternal(child, indent + "  ")<font></font>
    }<font></font>
}</code></pre><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>,        -,      . ,   http , ,   JSON,    5   :</p><br>
<pre><code class="go">func getCommentById(i int) comment {<font></font>
    result := &amp;comment{}<font></font>
    err := getJson("https://jsonplaceholder.typicode.com/todos/"+strconv.Itoa(i), result)<font></font>
    if err != nil {<font></font>
        panic(err) //    <font></font>
    }<font></font>
    return *result<font></font>
}<font></font>
<font></font>
func getJson(url string, target interface{}) error {<font></font>
    var myClient = &amp;http.Client{Timeout: 10 * time.Second}<font></font>
    r, err := myClient.Get(url)<font></font>
    if err != nil {<font></font>
        return err<font></font>
    }<font></font>
    defer r.Body.Close()<font></font>
<font></font>
    return json.NewDecoder(r.Body).Decode(target)<font></font>
}</code></pre><br>
<p>, </p><br>
<pre><code class="plaintext">1<font></font>
  2<font></font>
  3<font></font>
    4<font></font>
    5<font></font>
0 - <font></font>
  0 - <font></font>
  0 - <font></font>
    0 - <font></font>
    0 - </code></pre><br>
<p>     . ,   ,   .  .</p><br>
<p>  5     ,  ,     :  <code>{Title = "delectus aut autem", Id = 1}</code>  c <code>id, title</code>   .    ,       ,    â€” .  ,   :  â€”       ,  â€”      ,    .</p><br>
<p>      DTO,     , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.</p><br>
<p>  10    ,      !      â€”    . ,               , ,      ,    ,    .</p><br>
<p>   5,     <code>go</code>-.  </p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {<font></font>
    var wg sync.WaitGroup<font></font>
    result := loadCommentsInner(&amp;wg, root)<font></font>
    wg.Wait()<font></font>
    return result<font></font>
}<font></font>
<font></font>
func loadCommentsInner(wg *sync.WaitGroup, node intTree) commentTree {<font></font>
    result := commentTree{}<font></font>
    wg.Add(1)<font></font>
    for _, c := range node.children {<font></font>
        result.children = append(result.children, loadCommentsInner(wg, c))<font></font>
    }<font></font>
    go func() {<font></font>
        result.value = getCommentById(node.id)<font></font>
        wg.Done()<font></font>
    }()<font></font>
    return result<font></font>
}</code></pre><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> </p><br>
<pre><code class="plaintext">0 - <font></font>
  0 - <font></font>
  0 - <font></font>
    0 - <font></font>
    0 - </code></pre><br>
<p>,   - ?  ,     ,  .  ,        ,   <code>wg.Wait()</code>        ,         ,    .</p><br>
<p>,    -     ,   .    ,   ,    ,     10     :</p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {<font></font>
    ch := make(chan commentTree, 1)   //  <font></font>
    var wg sync.WaitGroup             //   <font></font>
    wg.Add(1)                         //     <font></font>
    loadCommentsInner(&amp;wg, ch, root)  //  <font></font>
    wg.Wait()                         //  <font></font>
    result := &lt;- ch                   //    <font></font>
    return result<font></font>
}<font></font>
<font></font>
func loadCommentsInner(wg *sync.WaitGroup, channel chan commentTree, node intTree) {<font></font>
    ch := make(chan commentTree, len(node.children))  //     <font></font>
    var childWg sync.WaitGroup                        //     <font></font>
    childWg.Add(len(node.children))<font></font>
    for _, c := range node.children {<font></font>
        go loadCommentsInner(&amp;childWg, ch, c)         //      ()<font></font>
    }<font></font>
    result := commentTree{<font></font>
        value: getCommentById(node.id),               //   <font></font>
    }<font></font>
    if len(node.children) &gt; 0 {                       //     ,   ,   <font></font>
        childWg.Wait()<font></font>
        for value := range ch {                       //      ,    <font></font>
            result.children = append(result.children, value)<font></font>
        }<font></font>
    }<font></font>
    channel &lt;- result                                 //     <font></font>
    wg.Done()                                         //     <font></font>
}</code></pre><br>
<p> â€¦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.   .  ,       .  ,      ,   ,    .   -  .  ?</p><br>
<p>  15   ,  , / ,  â€¦        HTTP    :</p><br>
<pre><code class="go">func getCommentById(id int) comment {<font></font>
    return comment{Id: id, Title: "Hello"}<font></font>
}</code></pre><br>
<p>   :</p><br>
<pre><code class="go">1<font></font>
  2<font></font>
  3<font></font>
    4<font></font>
    5<font></font>
fatal error: all Goroutines are asleep - deadlock!<font></font>
<font></font>
goroutine 1 [semacquire]:<font></font>
sync.runtime_Semacquire(0xc00006e228)<font></font>
    C:/go/src/runtime/sema.go:56 +0x49<font></font>
sync.(*WaitGroup).Wait(0xc00006e220)<font></font>
    C:/go/src/sync/waitgroup.go:130 +0x6b<font></font>
main.loadCommentsInner(0xc00006e210, 0xc0000ce120, 0x1, 0xc000095f10, 0x2, 0x2)<font></font>
    C:/Users/pzixe/go/src/hello/hello.go:47 +0x187<font></font>
main.loadComments(0x1, 0xc000095f10, 0x2, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)<font></font>
    C:/Users/pzixe/go/src/hello/hello.go:30 +0xec<font></font>
main.main()<font></font>
    C:/Users/pzixe/go/src/hello/hello.go:94 +0x14d</code></pre><br>
<p>,   -  . ,   -   ?     HTTP        ,      ...</p><br>
<p>             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">@gogolang</a>    ,       .      ,     :</p><br>
<ol>
<li>      .     ,        ,                <code>comment</code>    JSON</li>
<li>    .     ,   <code>Task</code>   <code>Task</code>    <code>WhenAny</code>/<code>WhenAll</code>    .  ,    ,   ,   .   ,     ,     .      â€”    - -<br>
<pre><code class="go">for httpRequest := range webserer.listen() {<font></font>
    go handle(httpRequest)<font></font>
} </code></pre></li>
<li><p>           go-way     printTree:</p><br>
<pre><code class="go">func printTree(tree interface{}) string {<font></font>
    b, err := json.MarshalIndent(tree, "", "  ")<font></font>
    if err != nil {<font></font>
        panic(err)<font></font>
    }<font></font>
    return string(b)<font></font>
}</code></pre><br>
<p> <code>interface {}</code> â€”    <code>dynamic</code>   <code>any</code>,       .         ,      .</p><br>
<p>   JSON         ,      .</p><br>
</li>
</ol><br>
<p>      ,      :     ,  ,      ?                 .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>:</p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {<font></font>
    result := commentTree{}<font></font>
    var wg sync.WaitGroup<font></font>
    loadCommentsInner(&amp;result, root, &amp;wg)<font></font>
    wg.Wait()<font></font>
    return result<font></font>
}<font></font>
<font></font>
func loadCommentsInner(resNode *commentTree, node intTree, wg *sync.WaitGroup) {<font></font>
    wg.Add(1)<font></font>
    for _, res := range node.children {<font></font>
        resNode.children = append(resNode.children, &amp;commentTree{})<font></font>
        loadCommentsInner(resNode.children[len(resNode.children)-1], res, wg)<font></font>
    }<font></font>
    resNode.value = getCommentById(node.id)<font></font>
    wg.Done()<font></font>
}</code></pre><br>
<p>  ? ,        "go-way":     ,        .         ,   ,     ,     .</p><br>
<p>    ,        .    ,    ,   ,    </p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>  ,        ,   . </p></div></div><br>
<p>       ,       ,   - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>   :</p><br>
<pre><code class="go">func loadComments(root intTree) commentTree {<font></font>
    result := commentTree{}<font></font>
    var wg sync.WaitGroup<font></font>
    loadCommentsInner(&amp;result, root, &amp;wg)<font></font>
    wg.Wait()<font></font>
    return result<font></font>
}<font></font>
<font></font>
func loadCommentsInner(resNode *commentTree, node intTree, wg *sync.WaitGroup) {<font></font>
    wg.Add(len(node.children))<font></font>
    for _, res := range node.children {<font></font>
        child := &amp;commentTree{}<font></font>
        resNode.children = append(resNode.children, child)<font></font>
        res := res<font></font>
        go func() {<font></font>
            defer wg.Done()<font></font>
            loadCommentsInner(child, res, wg)<font></font>
        }()<font></font>
    }<font></font>
    resNode.value = getCommentById(node.id)<font></font>
}</code></pre><br>
<p> ,   ,   .          ,  ,               . ,         (,   4         ,      ),  ,       .</p><br>
<p>       ,   ,         .         :</p><br>
<pre><code class="plaintext">1<font></font>
  2<font></font>
  3<font></font>
    4<font></font>
    5<font></font>
START 1<font></font>
START 3<font></font>
START 5<font></font>
DONE 5<font></font>
START 2<font></font>
DONE 2<font></font>
START 4<font></font>
DONE 4</code></pre><br>
<p>,   4  5 , 3  .  ,    ,       ,           . , Rust   ,        ,        ,          .</p><br>
<p>  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>,   ,     :</p><br>
<pre><code class="go">if len(node.children) &gt; 0 {<font></font>
    childWg.Wait()<font></font>
    for i := 0; i &lt; len(node.children); i++ { //      <font></font>
        result.children = append(result.children, &lt;-ch)<font></font>
    }<font></font>
}<font></font>
channel &lt;- result<font></font>
wg.Done()</code></pre><br>
<p> ,    ?    ,      ,     ,      ,       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>,      : </p><br>
<ol>
<li><code>func (n *IdTree) LoadComments(ctx context.Context) (*CommentTree, error)</code> â€”        tree</li>
<li><code>g, ctx := errgroup.WithContext(ctx)</code> â€”   </li>
<li><code>i, c := i, c // correct capturing by closure</code> â€”   ,    ,   .         </li>
<li><code>g.Go(func() error</code> â€”   ,    </li>
</ol><br>
<p> ,    ,    .</p><br>
<p>,         ? ,  .   (  ), ,       (-   ),     . ,         ,    .</p><br>
<p>  ,      ? ,         ,     ,    .      <code>getCommentById</code>.</p><br>
<p>     .</p><br>
<h2 id="c">Câ™¯</h2><br>
<p>C#   ,     6 ,         .           ,    ,  ,    8         :</p><br>
<pre><code class="cs">class Program<font></font>
{<font></font>
    class Comment<font></font>
    {<font></font>
        public int Id { get; set; }<font></font>
        public string Title { get; set; }<font></font>
<font></font>
        public override string ToString() =&gt; $"{Id} - {Title}";<font></font>
    }<font></font>
<font></font>
    private static readonly HttpClient HttpClient = new HttpClient();<font></font>
<font></font>
    private static Task&lt;Comment&gt; GetCommentById(int id) =&gt;<font></font>
        HttpClient.GetStringAsync($"https://jsonplaceholder.typicode.com/todos/{id}")<font></font>
            .ContinueWith(n =&gt; JsonConvert.DeserializeObject&lt;Comment&gt;(n.Result));<font></font>
<font></font>
    private static async Task&lt;Tree&lt;Comment&gt;&gt; GetCommentsTree(Tree&lt;int&gt; tree)<font></font>
    {<font></font>
        var children = Task.WhenAll(tree.Children.Select(GetCommentsTree));<font></font>
        var value = await GetCommentById(tree.Value);<font></font>
        var childrenResults = await children;<font></font>
        return new Tree&lt;Comment&gt; { Value = value, Children = childrenResults };<font></font>
    }<font></font>
<font></font>
    private static async Task Main()<font></font>
    {<font></font>
        var tree = Tr(1, new[] { Tr(2), Tr(3, new[] { Tr(4), Tr(5) }) });<font></font>
        PrintTree(tree);<font></font>
        var comment_tree = await GetCommentsTree(tree);<font></font>
        PrintTree(comment_tree);<font></font>
    }<font></font>
<font></font>
    class Tree&lt;T&gt;<font></font>
    {<font></font>
        public T Value { get; set; }<font></font>
        public Tree&lt;T&gt;[] Children { get; set; }<font></font>
    }<font></font>
<font></font>
    private static void PrintTree&lt;T&gt;(Tree&lt;T&gt; tree, string intendantion = "")<font></font>
    {<font></font>
        Console.WriteLine(intendantion + tree.Value);<font></font>
        foreach (var child in tree.Children)<font></font>
        {<font></font>
            PrintTree(child, intendantion + "  ");<font></font>
        }<font></font>
    }<font></font>
<font></font>
    static Tree&lt;T&gt; Tr&lt;T&gt;(T value, Tree&lt;T&gt;[] children = null) =&gt; new Tree&lt;T&gt; { Value = value, Children = children ?? Array.Empty&lt;Tree&lt;T&gt;&gt;() };<font></font>
}</code></pre><br>
<p>     ,    ? ,   ,   <code>Task.WhenAll</code>    <code>foreach</code>     .       .<br>
     ? ,              .          <code>GetCommentById</code>.    ,  <code>AsyncEnumerable</code> ,         ,          .</p><br>
<h2 id="vyvody"></h2><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/db8/2fc/0fd/db82fc0fd7312aaa872e335f823b2cd7.png"></p><br>
<p> ,      .          ,   ,    ,  ,       .       .  , <abbr title="ç°¡æ½”ã•ã¯ã‚¦ã‚£ãƒƒãƒˆã®é­‚ã§ã™"></abbr>.</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>Haskell</th>
<th>go</th>
<th>C#</th>
</tr>
</thead>
<tbody>
<tr>
<td>   *</td>
<td>17</td>
<td>76</td>
<td>28</td>
</tr>
<tr>
<td>   </td>
<td>2</td>
<td>4</td>
<td>-</td>
</tr>
<tr>
<td>     </td>
<td>30</td>
<td>10</td>
<td>-</td>
</tr>
<tr>
<td>     </td>
<td>15</td>
<td>50</td>
<td>-</td>
</tr>
<tr>
<td>   </td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
<tr>
<td>     </td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
</tr>
<tr>
<td>    **</td>
<td>âœ“âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
</tr>
<tr>
<td>  </td>
<td>~30</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>  </td>
<td>5c</td>
<td>1.9c***</td>
<td>1.6c</td>
</tr>
</tbody>
</table></div><br>
<p>*        ,     . ,         ,    Haskell   showTree       </p><br>
<p>** ,           42.  , ,     :</p><br>
<pre><code class="cs">async Task&lt;Tree&lt;Comment&gt;&gt; GetCommentsTree(Tree&lt;int&gt; tree)<font></font>
{<font></font>
    if (tree.Children.Sum(c =&gt; c.Value) == 42)<font></font>
    {<font></font>
        return new Tree&lt;Comment&gt; { Value = await GetCommentById(tree.Value), Children = Array.Empty&lt;Tree&lt;int&gt;&gt; };<font></font>
    }<font></font>
    ...         </code></pre><br>
<p>      .</p><br>
<p>         ,   ,      <code>mapParallel</code>.    ,    ,    go  C#. </p><br>
<p>***     ,      7 ,   1.9 ,     200.     ,           .</p><br>
<hr><br>
<p>    ,   :</p><br>
<blockquote>   ""  </blockquote><p>Haskell:     ,     . ,   ,        , ,   . , ,   17     ,        ,    .</p><br>
<p>Go:     -   , <strong><em></em></strong>     - ,        ,      .</p><br>
<blockquote>      </blockquote><p>Haskell:      ,   ,        .     ,       "   ", "    Rust",   .        ,            .   ,       .     :     . ,        ,       .</p><br>
<p>Go:      <strong></strong>.       10  .     .  ,       ,   .     , ,      ,          ,       â€” .    ,    .     - ,       ,   ,      .  , ,  ,   .           ,      .     ,   ,        .</p><br>
<blockquote>C        </blockquote><p>.  ,      ,      ,  ,     ,     <code>Maybe</code>  <code>IO</code>    ,    .</p><br>
<blockquote>C     </blockquote><p> ,     -      ,  .        <code>Task.Run(() =&gt; DoStuffAsyncInAnotherThread())</code>    ,   -  .   ,  <code>go DoAsyncStuff()</code>,        ,          (  -   ),      <code>Task.WhenAny</code>/<code>Task.WhenAll</code> (       ),    .</p><br>
<p>       .        ,  ,    .   . ,         ,     .</p><br>
<p>  - ,  , ,    .</p><br>
<h2 id="subektivnaya-chast"> </h2><br>
<p>   ,       .</p><br>
<p>      ,       .      :   ,     ,  ,    . ,    ,           ,       ,     "    ?",     <code>Maybe</code>  <code>IO</code>   "   <code>fromJust</code>     <code>Maybe</code>,   <code>IO</code>?". </p><br>
<p>      , ..      ,         .             , ,    , -      .   .     ,       "     ",     .          ,    .  ,               ,          .       ,      ,         . </p><br>
<hr><br>
<p>     ,      ,      ,       -  ,      .  ?   .  JSON?   .         .    ,         (,          <code>^.</code>),    ,       (-    HTTP  ),     .</p><br>
<p>           ,   -  ,       .     ,   ,   â€” .      .         :         ,  <em> </em>   .</p><br>
<hr><br>
<p>, .</p><br>
<p>       IDE//etc,     /   .</p><br>
<p>        . </p><br>
<p>-    ,   -     ,   â€”     .   ,          ,   //â€¦       ,     ...</p><br>
<p>-       ,       go 3      ,        . -  ,     8     ,            5,  -         .       ,        ,  ,     .   .</p><br>
<p>  -       ,       ( )    .          :</p><br>
<blockquote> â€”  go   ,   ,     <br>
<br>
 â€”  *sarcasm*<br>
<br>
 â€” <em>Sorry, this group is no longer accessible</em></blockquote><p>    ,         (    ),        ,   .</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/z8/ab/nj/z8abnjw1rn4oiupsnoozpu_5epq.png"><br>
<em>             </em></p></div></div><br>
<p>  ,         ?  ,      -              .    ,    -   ,      ,  ,   ,          â€¦ ,   .</p><br>
<p><strong><em>Upd.        ,   ,         .     ,          .       ,     .</em></strong></p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>     ?        ,     .      .      ,   ,     obj/bin     .     ,   .   ,   Go        ,       ,   -     .       ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>      .   -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">gorm</a>,      EF/Linq2Db/Hibernate/Dapper       API.</p><br>
<p>        ,   ,          ,     .     "" ,     ,    ,  , .      SQL ,   .     ,  .       ,     . ,    ,         ,    ,   ""    ,  -    .            ,    ,      ,    (   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>).  go        <code>Map</code>,           :     ,   â€”  .</p><br>
<p>          ,         :</p><br>
<p><img src="https://habrastorage.org/webt/pj/sd/wv/pjsdwv6xnhc57nc-hwvywaho8lk.jpeg"></p><br>
<p> â€”   ,        ?..</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469427/index.html">æœ¨è£½ãŠã‚‚ã¡ã‚ƒã€ãƒ‘ãƒ¼ãƒˆ4-1990</a></li>
<li><a href="../ja469429/index.html">ãƒãƒ–ãƒ©ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ¬²æœ›ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
<li><a href="../ja469433/index.html">åˆã‚ã¦ã€‚Scratchã‚’ãƒ­ãƒœãƒƒãƒˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¨ã—ã¦å°å…¥ã—ãŸçµŒç·¯</a></li>
<li><a href="../ja469435/index.html">Yandex.Stationã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°</a></li>
<li><a href="../ja469439/index.html">ARIES PLC110 [M02] -MS4ã€HMIã€OPCã€SCADAã€ã¾ãŸã¯äººãŒã‚«ãƒ¢ãƒŸãƒ¼ãƒ«ãƒ†ã‚£ãƒ¼ã‚’ã©ã‚Œã ã‘å¿…è¦ã¨ã™ã‚‹ã‹ã€‚ãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../ja469443/index.html">ç”Ÿãæ®‹ã£ãŸç´ æï¼šåœ°ä¸Šã®æ¡ä»¶ã«è€ãˆã‚‰ã‚Œã‚‹ã€Œä¸å¯èƒ½ã€ãªæ§‹é€ ãŒæœ€åˆã«å¾—ã‚‰ã‚ŒãŸ</a></li>
<li><a href="../ja469445/index.html">AngularConnect 2019ã®æ¦‚è¦ã€‚ãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../ja469447/index.html">ç´ æ™´ã‚‰ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‹ã‚‰ç§‘å­¦ç”£æ¥­ã¸ã®äººå·¥çŸ¥èƒ½ã®é“</a></li>
<li><a href="../ja469449/index.html">EV SSLè¨¼æ˜æ›¸ï¼šæ­»å¾Œã®äººç”Ÿã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja469451/index.html">ã‚¹ã‚¯ãƒ©ãƒƒãƒã®å“²å­¦</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>