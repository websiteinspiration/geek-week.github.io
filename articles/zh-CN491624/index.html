<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¸ ğŸ™ï¸ ğŸ› åœ¨Unity Universal Renderç®¡é“ä¸­åˆ›å»ºè½®å»“æ•ˆæœ âš¡ï¸ ğŸ™‹ ğŸ‘‹ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨é€šç”¨æ¸²æŸ“ç®¡é“ä¸­ï¼Œé€šè¿‡åˆ›å»ºè‡ªå·±çš„RendererFeatureï¼Œå¯ä»¥è½»æ¾æ‰©å±•æ¸²æŸ“åŠŸèƒ½ã€‚åœ¨æ¸²æŸ“ç®¡çº¿ä¸­æ·»åŠ æ–°çš„é€šé“å¯ä»¥åˆ›å»ºå„ç§æ•ˆæœã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ScriptableRendererFeatureå’ŒScriptableRenderPassåˆ›å»ºå¯¹è±¡çš„Outlineæ•ˆæœï¼Œå¹¶è€ƒè™‘å…¶å®ç°çš„ä¸€äº›åŠŸèƒ½ã€‚
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>åœ¨Unity Universal Renderç®¡é“ä¸­åˆ›å»ºè½®å»“æ•ˆæœ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491624/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨é€šç”¨æ¸²æŸ“ç®¡é“ä¸­ï¼Œé€šè¿‡åˆ›å»ºè‡ªå·±çš„RendererFeatureï¼Œå¯ä»¥è½»æ¾æ‰©å±•æ¸²æŸ“åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">åœ¨æ¸²æŸ“ç®¡çº¿ä¸­æ·»åŠ æ–°çš„é€šé“å¯ä»¥åˆ›å»ºå„ç§æ•ˆæœã€‚</font><font style="vertical-align: inherit;">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ScriptableRendererFeatureå’ŒScriptableRenderPassåˆ›å»ºå¯¹è±¡çš„Outlineæ•ˆæœï¼Œå¹¶è€ƒè™‘å…¶å®ç°çš„ä¸€äº›åŠŸèƒ½ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img alt="è½®å»“æ•ˆæœ" src="https://habrastorage.org/webt/dz/c-/gc/dzc-gcaaeprq3erss7ja7bj2kv8.gif"></div><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºæ¸²æŸ“ç®¡é“çš„ç®€ä»‹æˆ–å‡ å¥è¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯è„šæœ¬åŒ–çš„æ¸²æŸ“ç®¡çº¿å…è®¸æ‚¨é€šè¿‡Cï¼ƒä¸­çš„è„šæœ¬æ§åˆ¶å›¾å½¢çš„æ¸²æŸ“ï¼Œå¹¶æ§åˆ¶å¯¹è±¡ï¼Œç¯å…‰ï¼Œé˜´å½±ç­‰çš„å¤„ç†é¡ºåºã€‚</font><font style="vertical-align: inherit;">Universal Render Pipelineæ˜¯ç”±Unityå¼€å‘çš„ç°æˆçš„å¯ç¼–å†™è„šæœ¬çš„Render Pipelineï¼Œæ—¨åœ¨æ›¿ä»£æ—§çš„å†…ç½®RPã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯ä»¥é€šè¿‡åˆ›å»ºå’Œæ·»åŠ è‡ªå·±çš„å›¾å½¢ä¼ é€’ï¼ˆScriptableRendererFeatureå’ŒScriptableRenderPassï¼‰æ¥æ‰©å±•Universal RPçš„åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">è¿™å°†æ˜¯å½“å‰æ–‡ç« ã€‚</font><font style="vertical-align: inherit;">è¿™å°†å¯¹é‚£äº›æ‰“ç®—è½¬ç”¨Universal RPçš„äººå¾ˆæœ‰ç”¨ï¼Œä¹Ÿè®¸æœ‰åŠ©äºæ›´å¥½åœ°äº†è§£Universal RPä¸­ç°æœ‰ScriptableRenderPass'ovçš„å·¥ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡æ˜¯åœ¨Unity 2019.3å’ŒUniversal RP 7.1.8ä¸­ç¼–å†™çš„ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡ŒåŠ¨è®¡åˆ’</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†äº†è§£ScriptableRendererFeatureå’ŒScriptableRenderPasså¦‚ä½•åœ¨åˆ›å»ºä¸é€æ˜å¯¹è±¡çš„ç¬”è§¦æ•ˆæœçš„ç¤ºä¾‹ä¸­å·¥ä½œã€‚</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºæ­¤ï¼Œè¯·åˆ›å»ºä¸€ä¸ªScriptableRendererFeatureæ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»˜åˆ¶æŒ‡å®šå¯¹è±¡</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡ç³Šç»˜åˆ¶çš„å¯¹è±¡</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»å…ˆå‰é€šè¿‡çš„å›¾åƒä¸­è·å–ç‰©ä½“çš„è½®å»“</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æºæ¡†æ¶- </font></font><div style="text-align:center;"><img src="https://habrastorage.org/webt/km/n8/_y/kmn8_yaw20gq0mghleyyaf05zoe.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¿…é¡»è¾¾åˆ°çš„ç»“æœé¡ºåºæ˜¯ï¼š</font></font><br>
<br>
<div style="text-align:center;"><img height="240" width="720" src="https://habrastorage.org/webt/cf/04/s1/cf04s1fcjegfgj2c3frx1lfr_qu.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç€è‰²å™¨ï¼Œåœ¨è¯¥ç€è‰²å™¨çš„å…¨å±€å±æ€§ä¸­ï¼Œå°†ä¿å­˜ç¬¬ä¸€éå’Œç¬¬äºŒéçš„ç»“æœã€‚</font><font style="vertical-align: inherit;">æœ€åä¸€éå°†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºç€è‰²å™¨æœ¬èº«çš„ç»“æœã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¨å±€å±æ€§</font></font></b>
                        <div class="spoiler_text"> ,   ,       Properties.            â€”     .<br>
<br>
     â€”      .      .<br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºOutlineFeature</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ScriptableRendererFeatureç”¨äºå°†è‡ªå®šä¹‰æ¸²æŸ“æ®µè½ï¼ˆScriptableRenderPassï¼‰æ·»åŠ åˆ°Universal RPã€‚</font><font style="vertical-align: inherit;">åˆ›å»ºä»ScriptableRenderFeatureç»§æ‰¿çš„OutlineFeatureç±»ï¼Œå¹¶å®ç°å…¶æ–¹æ³•ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.Rendering.Universal;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OutlineFeature</span> : <span class="hljs-title">ScriptableRendererFeature</span><font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>(<span class="hljs-params"></span>)</span><font></font>
    { }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
    { }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Createï¼ˆï¼‰æ–¹æ³•ç”¨äºåˆ›å»ºå’Œé…ç½®è¿‡ç¨‹ã€‚</font><font style="vertical-align: inherit;">ç„¶åå°†ç”¨äºå°†åˆ›å»ºçš„é€šè¡Œè¯æ³¨å…¥æ¸²æŸ“é˜Ÿåˆ—çš„AddRenderPassesï¼ˆï¼‰æ–¹æ³•ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚æ•°AddRenderPassesï¼ˆï¼‰</font></font></b>
                        <div class="spoiler_text">ScriptableRenderer â€”       Universal RP.     Universal RP    Forward Rendering.<br>
<br>
RenderingData       â€”   , ,   .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨å¼€å§‹åˆ›å»ºæ¸²æŸ“è¿‡ç¨‹ï¼Œåœ¨å®ç°æ¯ä¸ªè¿‡ç¨‹ä¹‹åï¼Œæˆ‘ä»¬å°†è¿”å›å½“å‰ç±»ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¸²æŸ“å¯¹è±¡é€šè¿‡</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤æ®µè½çš„ä»»åŠ¡æ˜¯ä»ç‰¹å®šå›¾å±‚ç»˜åˆ¶å¯¹è±¡ï¼Œå¹¶æ›¿æ¢ç€è‰²å™¨çš„å…¨å±€çº¹ç†å±æ€§ä¸­çš„æè´¨ã€‚</font><font style="vertical-align: inherit;">è¿™å°†æ˜¯Universal RPä¸­å¯ç”¨çš„RenderObjectsPassé€šé“çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œåªæœ‰æ‰§è¡Œæ¸²æŸ“çš„ç›®æ ‡ï¼ˆRenderTargetï¼‰ä¸åŒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºä¸€ä¸ªä»ScriptableRenderPassç»§æ‰¿çš„MyRenderObjectsPassç±»ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å®ç°Executeï¼ˆï¼‰æ–¹æ³•ï¼Œå…¶ä¸­å°†åŒ…å«æ®µè½çš„æ‰€æœ‰é€»è¾‘ï¼Œå¹¶é‡æ–°å®šä¹‰Configureï¼ˆï¼‰æ–¹æ³•ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> UnityEngine.Rendering;
<span class="hljs-keyword">using</span> UnityEngine.Rendering.Universal;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyRenderObjectsPass</span> : <span class="hljs-title">ScriptableRenderPass</span><font></font>
{<font></font>
    {<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">CommandBuffer cmd, RenderTextureDescriptor cameraTextureDescriptor</span>)</span><font></font>
        { }<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
        { }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configureï¼ˆï¼‰æ–¹æ³•ç”¨äºæŒ‡å®šæ¸²æŸ“å’Œåˆ›å»ºä¸´æ—¶çº¹ç†çš„ç›®çš„ã€‚</font><font style="vertical-align: inherit;">é»˜è®¤æƒ…å†µä¸‹ï¼Œç›®æ ‡æ˜¯å½“å‰æ‘„åƒæœºçš„ç›®æ ‡ï¼Œå¹¶ä¸”åœ¨å®Œæˆä¼ é€’ä¹‹åï¼Œé»˜è®¤æƒ…å†µä¸‹å°†å†æ¬¡æŒ‡ç¤ºè¯¥ç›®æ ‡ã€‚</font><font style="vertical-align: inherit;">åœ¨åŸºæœ¬é€»è¾‘è¿è¡Œä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¸²æŸ“ç›®æ ‡æ›¿æ¢</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºæ–°çš„æ¸²æŸ“ç›®æ ‡å£°æ˜ä¸€ä¸ªRenderTargetHandleã€‚</font><font style="vertical-align: inherit;">ä½¿ç”¨å®ƒï¼Œåˆ›å»ºä¸€ä¸ªä¸´æ—¶çº¹ç†å¹¶å°†å…¶æŒ‡å®šä¸ºç›®æ ‡ã€‚</font><font style="vertical-align: inherit;">RenderTargetHandleåŒ…å«ä½¿ç”¨çš„ä¸´æ—¶RenderTextureçš„æ ‡è¯†ç¬¦ã€‚</font><font style="vertical-align: inherit;">å®ƒè¿˜å…è®¸æ‚¨è·å–RenderTargetIdentifierï¼Œè¯¥æ ‡è¯†ç¬¦ç”¨äºæ ‡è¯†å¯ä»¥è®¾ç½®çš„æ¸²æŸ“ç›®æ ‡ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®ä¸ºRenderTextureï¼ŒTextureå¯¹è±¡ï¼Œä¸´æ—¶RenderTextureæˆ–å†…ç½®ï¼ˆæ¸²æŸ“å¸§æ—¶ç”±ç›¸æœºä½¿ç”¨ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€ä¸ªRenderTargetHandleå¯¹è±¡å°†åœ¨OutlineFeatureä¸­åˆ›å»ºï¼Œå¹¶åœ¨åˆ›å»ºæ—¶ä¼ é€’ç»™æˆ‘ä»¬çš„é€šé“ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> RenderTargetHandle _destination;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyRenderObjectsPass</span>(<span class="hljs-params">RenderTargetHandle destination</span>)</span><font></font>
{<font></font>
    _destination = destination;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">CommandBuffer cmd, RenderTextureDescriptor cameraTextureDescriptor</span>)</span><font></font>
{  <font></font>
    cmd.GetTemporaryRT(_destination.id, cameraTextureDescriptor);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GetTemporaryRTï¼ˆï¼‰æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„å‚æ•°åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„RenderTextureï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºå…·æœ‰æŒ‡å®šåç§°çš„å…¨å±€ç€è‰²å™¨å±æ€§ï¼ˆåç§°å°†åœ¨åŠŸèƒ½éƒ¨ä»¶ä¸­è®¾ç½®ï¼‰ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ é™¤RenderTexture</font></font></b>
                        <div class="spoiler_text">ReleaseTemporaryRT()    RenderTexture.       Execute()     FrameCleanup.<br>
  ,   RenderTexture,     ,  .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦åˆ›å»ºä¸´æ—¶çš„RenderTextureï¼Œæˆ‘ä»¬ä½¿ç”¨å½“å‰æ‘„åƒæœºçš„æè¿°ç¬¦ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³æ‘„åƒæœºç›®æ ‡çš„å¤§å°ï¼Œæ ¼å¼å’Œå…¶ä»–å‚æ•°çš„ä¿¡æ¯ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">CommandBuffer cmd, RenderTextureDescriptor cameraTextureDescriptor</span>)</span><font></font>
{        <font></font>
    cmd.GetTemporaryRT(_destination.id, cameraTextureDescriptor);<font></font>
    ConfigureTarget(_destination.Identifier());<font></font>
    ConfigureClear(ClearFlag.All, Color.clear);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›®æ ‡çš„ç”¨é€”åŠå…¶æ¸…é™¤ä»…åº”åœ¨ä½¿ç”¨ConfigureTargetï¼ˆï¼‰å’ŒClearTargetï¼ˆï¼‰æ–¹æ³•çš„Configureï¼ˆï¼‰ä¸­å‘ç”Ÿã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¸²æŸ“</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†ä¸è€ƒè™‘è¯¦ç»†æ¸²æŸ“ï¼Œå› ä¸º </font><font style="vertical-align: inherit;">è¿™å¯ä»¥ä½¿æˆ‘ä»¬è¿œç¦»ä¸»è¦è¯é¢˜ã€‚</font><font style="vertical-align: inherit;">å¯¹äºæ¸²æŸ“ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ScriptableRenderContext.DrawRenderersï¼ˆï¼‰æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">åˆ›å»ºä»…ç”¨äºæ¸²æŸ“æ¥è‡ªæŒ‡å®šå›¾å±‚çš„ä¸é€æ˜å¯¹è±¡çš„è®¾ç½®ã€‚</font><font style="vertical-align: inherit;">å›¾å±‚è’™ç‰ˆå°†ä¼ é€’ç»™æ„é€ å‡½æ•°ã€‚</font></font><br>
<br>
<pre><code class="cs hljs">...
<span class="hljs-keyword">private</span> List&lt;ShaderTagId&gt; _shaderTagIdList = <span class="hljs-keyword">new</span> List&lt;ShaderTagId&gt;() { <span class="hljs-keyword">new</span> ShaderTagId(<span class="hljs-string">"UniversalForward"</span>) };
<span class="hljs-keyword">private</span> FilteringSettings _filteringSettings;
<span class="hljs-keyword">private</span> RenderStateBlock _renderStateBlock;<font></font>
...<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyRenderObjectsPass</span>(<span class="hljs-params">RenderTargetHandle destination, <span class="hljs-keyword">int</span> layerMask</span>)</span><font></font>
{<font></font>
    _destination = destination;<font></font>
<font></font>
    _filteringSettings = <span class="hljs-keyword">new</span> FilteringSettings(RenderQueueRange.opaque, layerMask);<font></font>
    _renderStateBlock = <span class="hljs-keyword">new</span> RenderStateBlock(RenderStateMask.Nothing);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
    SortingCriteria sortingCriteria = renderingData.cameraData.defaultOpaqueSortFlags;<font></font>
    DrawingSettings drawingSettings = CreateDrawingSettings(_shaderTagIdList, <span class="hljs-keyword">ref</span> renderingData, sortingCriteria);<font></font>
<font></font>
    context.DrawRenderers(renderingData.cullResults, <span class="hljs-keyword">ref</span> drawingSettings, <span class="hljs-keyword">ref</span> _filteringSettings, <span class="hljs-keyword">ref</span> _renderStateBlock);<font></font>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºå‚æ•°éå¸¸ç®€çŸ­</font></font></b>
                        <div class="spoiler_text">CullingResults â€”   (  RenderingData)<br>
FilteringSettings â€”      .<br>
DrawingSettings â€”  .<br>
RenderStateBlock â€”  ,      (,    ..)<br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºUniversalRPä¸­å®Œæˆçš„RenderObjectsPass</font></font></b>
                        <div class="spoiler_text">   , .    . RenderObjectsPass,   Universal RP,      .       RenderFeature   -   :)<br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ææ–™æ›´æ¢</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºæˆ‘ä»¬ä»…éœ€è¦å¯¹è±¡çš„è½®å»“ï¼Œå› æ­¤æˆ‘ä»¬é‡æ–°å®šä¹‰äº†ç”¨äºæ¸²æŸ“çš„ææ–™ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> Material _overrideMaterial;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyRenderObjectsPass</span>(<span class="hljs-params">RenderTargetHandle destination, <span class="hljs-keyword">int</span> layerMask,, Material overrideMaterial</span>)</span><font></font>
{<font></font>
...<font></font>
    _overrideMaterial = overrideMaterial;<font></font>
...<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
...<font></font>
    DrawingSettings drawingSettings = CreateDrawingSettings(_shaderTagIdList, <span class="hljs-keyword">ref</span> renderingData, sortingCriteria);<font></font>
    drawingSettings.overrideMaterial = _overrideMaterial;<font></font>
...<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¸²æŸ“ç€è‰²å™¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ShaderGraphä¸­åˆ›å»ºä¸€ä¸ªæè´¨ç€è‰²å™¨ï¼Œè¯¥ç€è‰²å™¨å°†åœ¨å½“å‰é€šé“ä¸­ç»˜åˆ¶å¯¹è±¡æ—¶ä½¿ç”¨ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yr/d3/c6/yrd3c6plbc9ll3v7u8ig32gtqys.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨OutlineFeatureä¸­æ·»åŠ ä¸€æ®µ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å›åˆ°OutlieFeatureã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œä¸ºæˆ‘ä»¬çš„æ®µè½è®¾ç½®åˆ›å»ºä¸€ä¸ªç±»ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OutlineFeature</span> : <span class="hljs-title">ScriptableRendererFeature</span><font></font>
{<font></font>
    [<span class="hljs-meta">Serializable</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RenderSettings</span><font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> Material OverrideMaterial = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">public</span> LayerMask LayerMask = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å£°æ˜MyRenderPassè®¾ç½®çš„å­—æ®µä»¥åŠæˆ‘ä»¬çš„éå†ç”¨ä½œæ¸²æŸ“ç›®æ ‡çš„å…¨å±€çº¹ç†å±æ€§çš„åç§°ã€‚</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> _renderTextureName;<font></font>
[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> RenderSettings _renderSettings;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºçº¹ç†å±æ€§çš„æ ‡è¯†ç¬¦å’ŒMyRenderPassçš„å®ä¾‹ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> RenderTargetHandle _renderTexture;
<span class="hljs-keyword">private</span> MyRenderObjectsPass _renderPass;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    _renderTexture.Init(_renderTextureName);<font></font>
<font></font>
    _renderPass = <span class="hljs-keyword">new</span> MyRenderObjectsPass(_renderTexture, _renderSettings.LayerMask, _renderSettings.OverrideMaterial);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨AddRendererPassæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¡Œè¯æ·»åŠ åˆ°æ‰§è¡Œé˜Ÿåˆ—ä¸­ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
    renderer.EnqueuePass(_renderPass);<font></font>
}<font></font>
</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±•æœ›æœªæ¥</font></font></b>
                        <div class="spoiler_text">      .     ,    .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æºåœºæ™¯çš„ä¼ é€’ç»“æœåº”å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mk/cw/9b/mkcw9bydf3ucfleyjuovlgckwew.jpeg"></div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°ƒè¯•</font></font></b>
                        <div class="spoiler_text">    Frame Debug      (Windows-Analysis-FrameDebugger). <br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡ç³Šé€šè¡Œè¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤æ®µè½çš„ç›®çš„æ˜¯ä½¿åœ¨ä¸Šä¸€æ­¥ä¸­è·å¾—çš„å›¾åƒæ¨¡ç³Šï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºglobal shaderå±æ€§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŸå§‹æè´¨ä¸Šçš„æ¨¡ç³Šç€è‰²å™¨å¤šæ¬¡å°†å…¶å¤åˆ¶åˆ°ä¸€ä¸ªä¸´æ—¶æè´¨ä¸Šã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç¼©å°åŸå§‹å›¾åƒçš„å°ºå¯¸ï¼ˆåˆ›å»ºç¼©å°çš„å‰¯æœ¬ï¼‰ï¼Œè¿™å°†åŠ å¿«è®¡ç®—é€Ÿåº¦ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“ç»“æœçš„è´¨é‡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬åˆ›å»ºä»ScriptableRenderPassç»§æ‰¿çš„BlurPassç±»ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> UnityEngine.Rendering;
<span class="hljs-keyword">using</span> UnityEngine.Rendering.Universal;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BlurPass</span> : <span class="hljs-title">ScriptableRenderPass</span><font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
    { }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬è·å–æºçº¹ç†ï¼Œç›®æ ‡çº¹ç†å’Œä¸´æ—¶çº¹ç†ï¼ˆåŠå…¶IDï¼‰çš„å˜é‡ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> _tmpBlurRTId1 = Shader.PropertyToID(<span class="hljs-string">"_TempBlurTexture1"</span>);
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> _tmpBlurRTId2 = Shader.PropertyToID(<span class="hljs-string">"_TempBlurTexture2"</span>);<font></font>
<font></font>
<span class="hljs-keyword">private</span> RenderTargetIdentifier _tmpBlurRT1;
<span class="hljs-keyword">private</span> RenderTargetIdentifier _tmpBlurRT2;<font></font>
<font></font>
<span class="hljs-keyword">private</span> RenderTargetIdentifier _source;
<span class="hljs-keyword">private</span> RenderTargetHandle _destination;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RenderTextureçš„æ‰€æœ‰IDéƒ½æ˜¯é€šè¿‡Shader.PropertyIDï¼ˆï¼‰è®¾ç½®çš„ã€‚</font><font style="vertical-align: inherit;">è¿™å¹¶ä¸æ„å‘³ç€å¿…é¡»åœ¨æŸäº›åœ°æ–¹å­˜åœ¨æ­¤ç±»ç€è‰²å™¨å±æ€§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºå…¶ä½™å‚æ•°æ·»åŠ å­—æ®µï¼Œæˆ‘ä»¬å°†ç«‹å³åœ¨æ„é€ å‡½æ•°ä¸­å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> _passesCount;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> _downSample;
<span class="hljs-keyword">private</span> Material _blurMaterial;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BlurPass</span>(<span class="hljs-params">Material blurMaterial, <span class="hljs-keyword">int</span> downSample, <span class="hljs-keyword">int</span> passesCount</span>)</span><font></font>
{<font></font>
    _blurMaterial = blurMaterial;<font></font>
    _downSample = downSample;<font></font>
    _passesCount = passesCount;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
_blurMaterial-å…·æœ‰æ¨¡ç³Šç€è‰²å™¨çš„æè´¨ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
_downSample-å‡å°‘çº¹ç†å¤§å°çš„ç³»æ•°</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
_passesCount-è¦åº”ç”¨çš„æ¨¡ç³Šéæ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦åˆ›å»ºä¸´æ—¶çº¹ç†ï¼Œè¯·åˆ›å»ºä¸€ä¸ªæè¿°ç¬¦ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³å®ƒçš„æ‰€æœ‰å¿…è¦ä¿¡æ¯-å¤§å°ï¼Œæ ¼å¼ç­‰ã€‚</font><font style="vertical-align: inherit;">é«˜åº¦å’Œå°ºå¯¸å°†ç›¸å¯¹äºæ‘„åƒæœºæè¿°ç¬¦ç¼©æ”¾ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">CommandBuffer cmd, RenderTextureDescriptor cameraTextureDescriptor</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> width = Mathf.Max(<span class="hljs-number">1</span>, cameraTextureDescriptor.width &gt;&gt; _downSample);
    <span class="hljs-keyword">var</span> height = Mathf.Max(<span class="hljs-number">1</span>, cameraTextureDescriptor.height &gt;&gt; _downSample);
    <span class="hljs-keyword">var</span> blurTextureDesc = <span class="hljs-keyword">new</span> RenderTextureDescriptor(width, height, RenderTextureFormat.ARGB32, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬è¿˜å°†è‡ªå·±åˆ›å»ºæ ‡è¯†ç¬¦å’Œä¸´æ—¶RenderTextureã€‚</font></font><br>
<pre><code class="cs hljs">    _tmpBlurRT1 = <span class="hljs-keyword">new</span> RenderTargetIdentifier(_tmpBlurRTId1);<font></font>
    _tmpBlurRT2 = <span class="hljs-keyword">new</span> RenderTargetIdentifier(_tmpBlurRTId2);<font></font>
<font></font>
    cmd.GetTemporaryRT(_tmpBlurRTId1, blurTextureDesc, FilterMode.Bilinear);<font></font>
    cmd.GetTemporaryRT(_tmpBlurRTId2, blurTextureDesc, FilterMode.Bilinear);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å†æ¬¡æ›´æ”¹æ¸²æŸ“ç›®æ ‡ï¼Œå› æ­¤åˆ›å»ºå¦ä¸€ä¸ªä¸´æ—¶çº¹ç†å¹¶å°†å…¶æŒ‡å®šä¸ºç›®æ ‡ã€‚</font></font><br>
<br>
<pre><code class="cs hljs">    cmd.GetTemporaryRT(_destination.id, blurTextureDesc, FilterMode.Bilinear);<font></font>
    ConfigureTarget(_destination.Identifier());<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡ç³Š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„ScriptableRenderContextæ–¹æ³•æ‰§è¡Œä¸€äº›æ¸²æŸ“ä»»åŠ¡ï¼Œè¿™äº›æ–¹æ³•é…ç½®å¹¶å‘å…¶ä¸­æ·»åŠ å‘½ä»¤ã€‚</font><font style="vertical-align: inherit;">è¦æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œæ‚¨å°†éœ€è¦ä½¿ç”¨CommandBufferï¼Œå¯ä»¥ä»æ± ä¸­è·å–ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ·»åŠ å‘½ä»¤å¹¶å°†å…¶å‘é€åˆ°ä¸Šä¸‹æ–‡åï¼Œéœ€è¦å°†ç¼“å†²åŒºè¿”å›åˆ°æ± ä¸­ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> cmd = CommandBufferPool.Get(<span class="hljs-string">"BlurPass"</span>);<font></font>
    ...<font></font>
    context.ExecuteCommandBuffer(cmd);<font></font>
    CommandBufferPool.Release(cmd);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Executeï¼ˆï¼‰æ–¹æ³•çš„æœ€ç»ˆå®ç°å¦‚ä¸‹ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> cmd = CommandBufferPool.Get(<span class="hljs-string">"BlurPass"</span>);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (_passesCount &gt; <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        cmd.Blit(_source, _tmpBlurRT1, _blurMaterial, <span class="hljs-number">0</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; _passesCount - <span class="hljs-number">1</span>; i++)<font></font>
        {<font></font>
            cmd.Blit(_tmpBlurRT1, _tmpBlurRT2, _blurMaterial, <span class="hljs-number">0</span>);
            <span class="hljs-keyword">var</span> t = _tmpBlurRT1;<font></font>
            _tmpBlurRT1 = _tmpBlurRT2;<font></font>
            _tmpBlurRT2 = t;<font></font>
        }<font></font>
        cmd.Blit(_tmpBlurRT1, _destination.Identifier());<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
        cmd.Blit(_source, _destination.Identifier());<font></font>
    context.ExecuteCommandBuffer(cmd);<font></font>
    CommandBufferPool.Release(cmd);<font></font>
}<font></font>
</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blit</font></font></b>
                        <div class="spoiler_text"> Blit()          .<br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç€è‰²å™¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦è¿›è¡Œæ¨¡ç³Šå¤„ç†ï¼Œè¯·åˆ›å»ºä¸€ä¸ªç®€å•çš„ç€è‰²å™¨ï¼Œè¯¥ç€è‰²å™¨å°†è€ƒè™‘åƒç´ çš„æœ€è¿‘é‚»å±…ï¼ˆäº”ä¸ªåƒç´ çš„å¹³å‡é¢œè‰²å€¼ï¼‰æ¥è®¡ç®—åƒç´ çš„é¢œè‰²ã€‚ </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡ç³Šç€è‰²å™¨</font></font></b>
                        <div class="spoiler_text"><code>Shader "Custom/Blur"<br>
{<br>
 Properties<br>
 {<br>
 _MainTex ("Texture", 2D) = "white" {}<br>
 }<br>
 <br>
 SubShader<br>
 { <br>
 HLSLINCLUDE<br>
 <br>
 #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"<br>
 <br>
 struct Attributes<br>
 {<br>
 float4 positionOS : POSITION;<br>
 float2 uv : TEXCOORD0; <br>
 };<br>
 <br>
 struct Varyings<br>
 {<br>
 float4 positionCS : SV_POSITION;<br>
 float2 uv : TEXCOORD0;<br>
 };<br>
 <br>
 TEXTURE2D_X(_MainTex);<br>
 SAMPLER(sampler_MainTex);<br>
 float4 _MainTex_TexelSize;<br>
 <br>
 Varyings Vert(Attributes input)<br>
 {<br>
 Varyings output;<br>
 output.positionCS = TransformObjectToHClip(input.positionOS.xyz);<br>
 output.uv = input.uv;<br>
 return output;<br>
 }<br>
 <br>
 half4 Frag(Varyings input) : SV_Target<br>
 {<br>
 float2 offset = _MainTex_TexelSize.xy;<br>
 float2 uv = UnityStereoTransformScreenSpaceTex(input.uv);<br>
 <br>
 half4 color = SAMPLE_TEXTURE2D_X(_MainTex, sampler_MainTex, input.uv);<br>
 color += SAMPLE_TEXTURE2D_X(_MainTex, sampler_MainTex, input.uv + float2(-1, 1) * offset);<br>
 color += SAMPLE_TEXTURE2D_X(_MainTex, sampler_MainTex, input.uv + float2( 1, 1) * offset); <br>
 color += SAMPLE_TEXTURE2D_X(_MainTex, sampler_MainTex, input.uv + float2( 1,-1) * offset);<br>
 color += SAMPLE_TEXTURE2D_X(_MainTex, sampler_MainTex, input.uv + float2(-1,-1) * offset);<br>
 <br>
 return color/5.0;<br>
 }<br>
 <br>
 ENDHLSL<br>
 <br>
 Pass<br>
 {<br>
 HLSLPROGRAM<br>
 <br>
 #pragma vertex Vert<br>
 #pragma fragment Frag<br>
 <br>
 ENDHLSL<br>
 }<br>
 }<br>
}<br>
</code><br>
</div>
                    </div><div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ShaderGraphï¼Ÿ</font></font></b>
                        <div class="spoiler_text">  ShaderGraph   ,        13      :)<br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨OutlineFeatureä¸­æ·»åŠ ä¸€æ®µ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥è¿‡ç¨‹å°†ç±»ä¼¼äºæ·»åŠ æˆ‘ä»¬çš„ç¬¬ä¸€éã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œåˆ›å»ºè®¾ç½®ã€‚</font></font><br>
<br>
<pre><code class="cs hljs">    [<span class="hljs-meta">Serializable</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BlurSettings</span><font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> Material BlurMaterial;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> DownSample = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> PassesCount = <span class="hljs-number">1</span>;<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åæ˜¯ç”°é‡ã€‚</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> _bluredTextureName;<font></font>
[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> BlurSettings _blurSettings;
<span class="hljs-keyword">private</span> RenderTargetHandle _bluredTexture;
<span class="hljs-keyword">private</span> BlurPass _blurPass;<font></font>
<font></font>
...<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    _bluredTexture.Init(_bluredTextureName);<font></font>
<font></font>
    _blurPass = <span class="hljs-keyword">new</span> BlurPass(_blurSettings.BlurMaterial, _blurSettings.DownSample, _blurSettings.PassesCount);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
    renderer.EnqueuePass(_renderPass);<font></font>
    renderer.EnqueuePass(_blurPass);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡ç»“æœï¼š</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/m4/ei/sg/m4eisgtx_lv66kej4urrcnyehck.jpeg"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½®å»“é€šè¡Œè¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¸¦æœ‰å¯¹è±¡ç¬”è§¦çš„æœ€ç»ˆå›¾åƒå°†ä½¿ç”¨ç€è‰²å™¨è·å¾—ã€‚</font><font style="vertical-align: inherit;">å¹¶ä¸”ä»–çš„å·¥ä½œç»“æœå°†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå½“å‰å›¾åƒçš„é¡¶éƒ¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸‹é¢æ˜¯ä¸€æ¬¡å®Œæ•´çš„å¯†ç ï¼Œå¦‚ä¸‹ </font><font style="vertical-align: inherit;">æ‰€æœ‰é€»è¾‘éƒ½åœ¨ä¸¤è¡Œä¸­ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OutlinePass</span> : <span class="hljs-title">ScriptableRenderPass</span><font></font>
{<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> _profilerTag = <span class="hljs-string">"Outline"</span>;
    <span class="hljs-keyword">private</span> Material _material;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">OutlinePass</span>(<span class="hljs-params">Material material</span>)</span><font></font>
    {<font></font>
        _material = material;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Execute</span>(<span class="hljs-params">ScriptableRenderContext context, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> cmd = CommandBufferPool.Get(_profilerTag);<font></font>
<font></font>
        <span class="hljs-keyword">using</span> (<span class="hljs-keyword">new</span> ProfilingSample(cmd, _profilerTag))<font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> mesh = RenderingUtils.fullscreenMesh;<font></font>
            cmd.DrawMesh(mesh, Matrix4x4.identity, _material, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
        }<font></font>
<font></font>
        context.ExecuteCommandBuffer(cmd);<font></font>
        CommandBufferPool.Release(cmd);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RenderingUtils.fullscreenMeshè¿”å›1 x 1ç½‘æ ¼ã€‚ </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç€è‰²å™¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºä¸€ä¸ªç€è‰²å™¨ä»¥è·å–è½®å»“ã€‚</font><font style="vertical-align: inherit;">å®ƒåº”è¯¥åŒ…å«ä¸¤ä¸ªå…¨å±€çº¹ç†å±æ€§ã€‚</font><font style="vertical-align: inherit;">_OutlineRenderTextureå’Œ_OutlineBluredTextureç”¨äºæŒ‡å®šå¯¹è±¡çš„å›¾åƒåŠå…¶æ¨¡ç³Šç‰ˆæœ¬ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç€è‰²å™¨ä»£ç </font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">Shader "Custom/Outline"<font></font>
{<font></font>
    Properties<font></font>
    {<font></font>
        _Color ("Glow Color", Color ) = ( 1, 1, 1, 1)<font></font>
        _Intensity ("Intensity", Float) = 2<font></font>
        [Enum(UnityEngine.Rendering.BlendMode)] _SrcBlend ("Src Blend", Float) = 1<font></font>
        [Enum(UnityEngine.Rendering.BlendMode)] _DstBlend ("Dst Blend", Float) = 0<font></font>
    }<font></font>
    <font></font>
    SubShader<font></font>
    {       <font></font>
        HLSLINCLUDE<font></font>
 <font></font>
        #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"<font></font>
        <font></font>
        struct Attributes<font></font>
        {<font></font>
            float4 positionOS   : POSITION;<font></font>
            float2 uv           : TEXCOORD0;<font></font>
        };<font></font>
        <font></font>
        struct Varyings<font></font>
        {<font></font>
            half4 positionCS    : SV_POSITION;<font></font>
            half2 uv            : TEXCOORD0;<font></font>
        };<font></font>
 <font></font>
        TEXTURE2D_X(_OutlineRenderTexture);<font></font>
        SAMPLER(sampler_OutlineRenderTexture);<font></font>
 <font></font>
        TEXTURE2D_X(_OutlineBluredTexture);<font></font>
        SAMPLER(sampler_OutlineBluredTexture);<font></font>
 <font></font>
        half4 _Color;<font></font>
        half _Intensity;<font></font>
 <font></font>
        Varyings Vertex(Attributes input)<font></font>
        {<font></font>
            Varyings output;<font></font>
            output.positionCS = float4(input.positionOS.xy, 0.0, 1.0); <font></font>
            output.uv = input.uv;<font></font>
            if (_ProjectionParams.x &lt; 0.0) <font></font>
                output.uv.y = 1.0 - output.uv.y;    <font></font>
            return output;      <font></font>
        }<font></font>
 <font></font>
        half4 Fragment(Varyings input) : SV_Target<font></font>
        {<font></font>
            float2 uv = UnityStereoTransformScreenSpaceTex(input.uv);<font></font>
            half4 prepassColor = SAMPLE_TEXTURE2D_X(_OutlineRenderTexture, sampler_OutlineRenderTexture, uv);<font></font>
            half4 bluredColor = SAMPLE_TEXTURE2D_X(_OutlineBluredTexture, sampler_OutlineBluredTexture,uv);<font></font>
            half4 difColor = max( 0, bluredColor - prepassColor);<font></font>
            half4 color = difColor* _Color * _Intensity;<font></font>
            color.a = 1;    <font></font>
            return color;<font></font>
        }<font></font>
        <font></font>
        ENDHLSL        <font></font>
     <font></font>
        Pass<font></font>
        {<font></font>
            Blend [_SrcBlend] [_DstBlend]<font></font>
            ZTest Always    //  ,      <font></font>
            ZWrite Off      //      <font></font>
            Cull Off        //    <font></font>
 <font></font>
            HLSLPROGRAM<font></font>
           <font></font>
            #pragma vertex Vertex<font></font>
            #pragma fragment Fragment        <font></font>
 <font></font>
            ENDHLSL         <font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
       ,      .    Unity    .   ,    _ProjectionParams..<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸¤ä¸ªå…ˆå‰è·å¾—çš„å›¾åƒçš„ç€è‰²å™¨ç»“æœï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bm/tw/vv/bmtwvvpjbniyrftffwl-udsb92m.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨OutlineFeatureä¸­æ·»åŠ ä¸€æ®µ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æœ‰æ“ä½œå‡ä¸ä¹‹å‰çš„æ“ä½œç›¸ä¼¼ã€‚ </font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> Material _outlineMaterial;
<span class="hljs-keyword">private</span> OutlinePass _outlinePass;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    ...<font></font>
    _outlinePass = <span class="hljs-keyword">new</span> OutlinePass(_outlineMaterial);<font></font>
    ....<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
{<font></font>
    renderer.EnqueuePass(_renderPass);<font></font>
    renderer.EnqueuePass(_blurPass);<font></font>
    renderer.EnqueuePass(_outlinePass);<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RenderPassEvent</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒä»ç„¶æŒ‡ç¤ºä½•æ—¶è°ƒç”¨åˆ›å»ºçš„é€šè¡Œè¯ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œä»–ä»¬æ¯ä¸ªäººéƒ½éœ€è¦æŒ‡å®šrenderPassEventå‚æ•°ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ´»åŠ¨åˆ—è¡¨</font></font></b>
                        <div class="spoiler_text">  Universal RP,     .<br>
 BeforeRendering<br>
 BeforeRenderingShadows<br>
 AfterRenderingShadows<br>
 BeforeRenderingPrepasses<br>
 AfterRenderingPrePasses<br>
 BeforeRenderingOpaques<br>
 AfterRenderingOpaques<br>
 BeforeRenderingSkybox<br>
 AfterRenderingSkybox <br>
 BeforeRenderingTransparents<br>
 AfterRenderingTransparents<br>
 BeforeRenderingPostProcessing<br>
 AfterRenderingPostProcessing<br>
 AfterRendering<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨OutlineFeatureä¸­åˆ›å»ºé€‚å½“çš„å­—æ®µã€‚</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>] <span class="hljs-keyword">private</span> RenderPassEvent _renderPassEvent;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†åœ¨æ‰€æœ‰å·²åˆ›å»ºçš„æ®µè½ä¸­æŒ‡å‡ºè¿™ä¸€ç‚¹ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Create</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    ...<font></font>
    _renderPass.renderPassEvent = _renderPassEvent;<font></font>
    _blurPass.renderPassEvent = _renderPassEvent;<font></font>
    _outlinePass.renderPassEvent = _renderPassEvent;<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®¢åˆ¶åŒ–</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ·»åŠ è½®å»“å±‚å¹¶å°†å…¶è®¾ç½®ä¸ºæˆ‘ä»¬è¦åœˆå‡ºçš„å¯¹è±¡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†åˆ›å»ºå¹¶é…ç½®æ‰€æœ‰å¿…éœ€çš„èµ„äº§ï¼šUniversalRendererPipelineAssetå’ŒForwardRendererDataã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hg/vc/xg/hgvcxgasp4ux5uc21zwz-bvlfm8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kt/yb/7z/ktyb7zxvnefyqiwtxs9cfjyo92m.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“æœ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬åŸå§‹æ¡†æ¶çš„ç»“æœå°†å¦‚ä¸‹æ‰€ç¤ºï¼</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/is/lj/koisljmbfoayfjyjwpgjmn5md6q.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Œæˆæ—¶é—´</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œå³ä½¿é€šè¿‡å…¶ä»–å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„è½®å»“ä¹Ÿå°†å§‹ç»ˆå¯è§ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†ä½¿æˆ‘ä»¬çš„æ•ˆæœè€ƒè™‘åœºæ™¯çš„æ·±åº¦ï¼Œå¿…é¡»è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RenderObjectsPass</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æŒ‡å®šæ¸²æŸ“ç›®çš„æ—¶ï¼Œæˆ‘ä»¬è¿˜åº”è¯¥æŒ‡å‡ºå½“å‰çš„æ·±åº¦ç¼“å†²åŒºã€‚</font><font style="vertical-align: inherit;">åˆ›å»ºé€‚å½“çš„å­—æ®µå’Œæ–¹æ³•ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyRenderObjectsPass</span> : <span class="hljs-title">ScriptableRenderPass</span><font></font>
{<font></font>
    ...<font></font>
    <span class="hljs-keyword">private</span> RenderTargetIdentifier _depth;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetDepthTexture</span>(<span class="hljs-params">RenderTargetIdentifier depth</span>)</span><font></font>
    { _depth = depth; }<font></font>
    ...<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨Configureï¼ˆï¼‰æ–¹æ³•ä¸­ï¼ŒæŒ‡å®šè®¾ç½®æ¸²æŸ“ç›®æ ‡çš„æ·±åº¦ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">CommandBuffer cmd, RenderTextureDescriptor cameraTextureDescriptor</span>)</span><font></font>
{<font></font>
    cmd.GetTemporaryRT(_destination.id, cameraTextureDescriptor);<font></font>
    ConfigureTarget(_destination.Identifier(), _depth);<font></font>
    ConfigureClear(ClearFlag.Color, Color.clear);<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½®å»“ç‰¹å¾</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨OutlineFeatureä¸­ï¼Œæˆ‘ä»¬å°†ä¼ é€’MyRenderObjectsPasså½“å‰åœºæ™¯æ·±åº¦ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OutlineFeature</span> : <span class="hljs-title">ScriptableRendererFeature</span><font></font>
{<font></font>
    ...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddRenderPasses</span>(<span class="hljs-params">ScriptableRenderer renderer, <span class="hljs-keyword">ref</span> RenderingData renderingData</span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> depthTexture = renderer.cameraDepth;<font></font>
        _renderPass.SetDepthTexture(depthTexture);<font></font>
<font></font>
        renderer.EnqueuePass(_renderPass);<font></font>
        renderer.EnqueuePass(_blurPass);<font></font>
        renderer.EnqueuePass(_outlinePass);<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UniversalRenderPipelineAsset</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ä½¿ç”¨çš„UniversalRenderPipelineAssetä¸­ï¼Œé€‰ä¸­â€œ DepthTextureâ€æ—è¾¹çš„æ¡†ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qv/7m/br/qv7mbrfblvusdr52qlkjeggsdrg.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“æœ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœä¸åŒ…æ‹¬æ·±åº¦ï¼š</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0f/4c/fy/0f4cfyylgt5ehnf7pjacna_mrbq.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸºäºæ·±åº¦çš„ç»“æœï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u_/k1/85/u_k185a4hmdyydzptmpb3q0qypq.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€»</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ScriptableRendererFeatureæ˜¯ç”¨äºå°†æ®µè½æ·»åŠ åˆ°RPçš„ä¾¿æ·å·¥å…·ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å…¶ä¸­ï¼Œæ‚¨å¯ä»¥è½»æ¾æ›¿æ¢RenderObjectsPassï¼Œå¹¶åœ¨å…¶ä»–ScriptableRendererFeatureä¸­ä½¿ç”¨å®ƒä»¬ã€‚</font><font style="vertical-align: inherit;">æ‚¨æ— éœ€æ·±å…¥ç ”ç©¶Universal RPçš„å®æ–½ï¼Œä¹Ÿæ— éœ€æ›´æ”¹å…¶ä»£ç å³å¯æ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èšè‹¯ä¹™çƒ¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ä½¿ä½¿ç”¨ScriptableRendererFeatureå’ŒScriptableRenderPassçš„é€šç”¨ç®—æ³•æ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”ä½¿æœ¬æ–‡ä¸ä¼šå¢åŠ å¤ªå¤šï¼Œæˆ‘ç‰¹æ„å°è¯•ç®€åŒ–å¯†ç ï¼Œç”šè‡³æŸå®³å…¶é€šç”¨æ€§å’Œæœ€ä½³æ€§ã€‚ </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚è€ƒæ–‡çŒ®</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æºä»£ç æ˜¯ä¸€ä¸ª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥gitlabé“¾æ¥æ—¶ï¼Œ</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ¨¡å‹å’Œåœºæ™¯æ˜¯ä»å…°å¾·ä»»åŠ¡é‡‡å–ï¼šåœ°çƒæ·±å¤„çš„æ¯”èµ›ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸‹é¢çš„è¡Œç¨‹å®æ–½è¢«ä½œä¸ºä¾‹å­çš„åŸºç¡€- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YouTubeçš„</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">é“¾æ¥</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å›¢ç»“è‡ªå·±çš„RenderFeatureå®ç°ç¤ºä¾‹- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°githubä¸Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰å…³åˆ›å»ºè‡ªå·±çš„ScriptableRenderPipelineçš„ä¸€ç³»åˆ—è¯¾ç¨‹ã€‚</font><font style="vertical-align: inherit;">é˜…è¯»RPå’Œç€è‰²å™¨çš„ä¸€èˆ¬é€»è¾‘åï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å‘æ•™ç¨‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">é“¾æ¥å°†</font></a><font style="vertical-align: inherit;">å˜å¾—æ¸…æ™°</font><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN491614/index.html">ä¸ºä»€ä¹ˆMasterhostæ³¨å®šè¦å¤±è´¥ï¼šå†…å¹•</a></li>
<li><a href="../zh-CN491616/index.html">ä½¿ç”¨PCé€šè¿‡Internetç®¡ç†Arduino-åˆå­¦è€…ä½“éªŒ</a></li>
<li><a href="../zh-CN491618/index.html">ä¸ºä»€ä¹ˆç§æ—å’Œç¼–ç¨‹è¯­è¨€ä¼šæ¶ˆå¤±ï¼Œå®ƒä»¬å¦‚ä½•å¸®åŠ©å°†å…¶ä¿å­˜åœ¨ç¤¾äº¤ç½‘ç»œä¸Š</a></li>
<li><a href="../zh-CN491620/index.html">æ˜¯ä»€ä¹ˆä½¿èµ›æ™®æ‹‰æ–¯éå¸¸é€‚åˆè‡ªåŠ¨åŒ–åˆå­¦è€…ï¼Ÿ</a></li>
<li><a href="../zh-CN491622/index.html">ä½¿ç”¨Pythoné¢„æµ‹é‡‘èå±æœº</a></li>
<li><a href="../zh-CN491628/index.html">Spelunkyæ˜¯ä¼˜ç§€æ¸¸æˆè®¾è®¡çš„ä¸€ä¸ªä¾‹å­</a></li>
<li><a href="../zh-CN491630/index.html">Firefoxæµè§ˆå™¨æ‰©å±•ç¨‹åºåº”ç”¨ç¨‹åºï¼ˆWebExtensionsï¼‰</a></li>
<li><a href="../zh-CN491632/index.html">æ•°å­—ä¸æœ½-åŒæ­¥äº’è”ç½‘</a></li>
<li><a href="../zh-CN491634/index.html">ä¿æŠ¤å’Œé»‘å®¢Xbox 360ï¼ˆç¬¬1éƒ¨åˆ†ï¼‰</a></li>
<li><a href="../zh-CN491636/index.html">GRASPæ¨¡æ¿ï¼šä¿¡æ¯ä¸“å®¶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>