<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥊 🗳️ 🤫 Menguasai pengembangan melalui pengujian di Android menggunakan tes UI 📲 🍾 👨🏼‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Untuk mengantisipasi peluncuran serangkaian kursus dasar dan lanjutan baru tentang pengembangan Android, kami menyiapkan terjemahan mat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Menguasai pengembangan melalui pengujian di Android menggunakan tes UI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492712/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo semuanya. </font><font style="vertical-align: inherit;">Untuk mengantisipasi peluncuran serangkaian </font><font style="vertical-align: inherit;">kursus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dasar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lanjutan baru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang pengembangan Android, kami menyiapkan terjemahan materi yang menarik.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/0i/ef/lj/0iefljfwnqnrpvgj9hizrlqeatg.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama tahun terakhir kerja tim pengembangan Android di Buffer, kami </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berbicara banyak tentang kebersihan proyek kami</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan meningkatkan stabilitasnya. </font><font style="vertical-align: inherit;">Salah satu faktor adalah pengenalan () pengujian, yang, seperti yang telah kami ketahui, membantu kami menghindari regresi dalam kode kami dan memberi kami lebih percaya diri pada fitur yang kami sediakan. </font><font style="vertical-align: inherit;">Dan sekarang, ketika kami </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meluncurkan produk baru di Buffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kami ingin memastikan bahwa pendekatan yang sama diterapkan ketika menyangkut mereka - hanya agar kita tidak berada dalam situasi yang sama seperti sebelumnya.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Latar Belakang</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menulis tes unit untuk aplikasi Buffer, kami selalu mematuhi praktik pengembangan melalui pengujian (Test-Driven-Development - selanjutnya TDD). </font><font style="vertical-align: inherit;">Ada banyak sumber daya tentang apa itu TDD, tentang kelebihannya, dan dari mana asalnya, tetapi kami tidak akan membahas topik ini, karena ada banyak informasi di Internet. </font><font style="vertical-align: inherit;">Pada level tinggi, saya pribadi mencatat beberapa di antaranya:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengurangi waktu pengembangan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode lebih sederhana, lebih bersih, dan lebih bisa dikelola</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode lebih andal dengan lebih percaya diri dalam pekerjaan kami.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cakupan tes yang lebih tinggi (ini terlihat agak jelas)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi sampai saat ini, kami hanya mengikuti prinsip-prinsip TDD hanya dalam bentuk unit test untuk implementasi kami yang tidak didasarkan pada antarmuka pengguna ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c8/df/_w/c8df_wzud2rosic5vw82xx1axyg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tahu, saya tahu ... Kami selalu memiliki kebiasaan menulis tes UI setelah apa yang dilaksanakan diselesaikan. - dan itu tidak masuk akal. Kami memantau TDD untuk backend sehingga kode yang kami tulis memenuhi persyaratan yang ditentukan oleh tes, tetapi ketika sampai pada tes antarmuka pengguna, kami menulis tes yang memenuhi penerapan fitur tertentu. Seperti yang Anda lihat, ini agak kontroversial, dan dalam beberapa hal ini adalah tentang mengapa TDD digunakan sejak awal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, di sini saya ingin mempertimbangkan mengapa demikian, dan bagaimana kita bereksperimen dengan perubahan. Tapi mengapa kita memperhatikan hal ini sejak awal?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu selalu sulit untuk bekerja dengan kegiatan yang ada dalam aplikasi kita karena cara mereka ditulis. </font><font style="vertical-align: inherit;">Ini bukan alasan yang lengkap, tetapi banyak ketergantungan, tanggung jawab, dan ikatan yang dekat membuat mereka sangat sulit untuk diuji. </font><font style="vertical-align: inherit;">Untuk kegiatan baru yang kami tambahkan, karena kebiasaan, saya sendiri selalu menulis tes UI setelah implementasi - selain kebiasaan, tidak ada alasan lain untuk ini. </font><font style="vertical-align: inherit;">Namun, ketika membuat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode templat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">, siap untuk proyek-proyek baru, saya berpikir tentang perubahan. </font><font style="vertical-align: inherit;">Dan Anda akan senang mengetahui bahwa kebiasaan ini telah rusak, dan sekarang kami sedang mengerjakan sendiri, menjelajahi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk </font><font style="vertical-align: inherit;">tes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI</font></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah pertama</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang akan kita jelajahi di sini adalah contoh yang cukup sederhana, sehingga konsepnya lebih mudah diikuti dan dipahami - saya harap ini cukup untuk melihat beberapa keuntungan dari pendekatan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita akan mulai dengan membuat aktivitas dasar. Kita perlu melakukan ini agar kita dapat menjalankan tes UI - bayangkan bahwa pengaturan ini adalah dasar untuk implementasi kita, dan bukan implementasi itu sendiri. Seperti apa aktivitas dasar kami:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginActivity</span>: <span class="hljs-title">AppCompatActivity</span>(), <span class="hljs-title">LoginContract</span>.<span class="hljs-title">View</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Inject</span> lateinit <span class="hljs-keyword">var</span> loginPresenter: LoginContract.<span class="hljs-function">Presenter

    override fun <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: Bundle?)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<font></font>
        setContentView(R.layout.activity_login)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">setPresenter</span><span class="hljs-params">(presenter: LoginContract.Presenter)</span> </span>{<font></font>
        loginPresenter = presenter<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showGeneralErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda mungkin memperhatikan bahwa aktivitas ini tidak melakukan apa-apa selain pengaturan awal, yang diperlukan untuk aktivitas tersebut. Dalam metode onCreate (), kami cukup mengatur tautan ke tata letak, kami juga memiliki tautan ke antarmuka Tampilan kami, yang diimplementasikan menggunakan aktivitas, tetapi mereka belum memiliki implementasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu hal paling umum yang kami temukan dalam tes Espresso adalah pandangan referensi dan string dengan ID sumber daya yang ditemukan dalam aplikasi kami. Dalam hal ini, kami sekali lagi perlu menyediakan file tata letak untuk digunakan dalam aktivitas kami. Ini disebabkan oleh fakta bahwa: a) aktivitas kami memerlukan file tata letak untuk menampilkan tata letak selama pengujian, dan b) kami memerlukan tampilan ID untuk tautan dalam pengujian kami. Mari kita lanjutkan dan buat tata letak yang sangat sederhana untuk aktivitas login kita:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_email"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_password"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/button_login"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda dapat melihat bahwa kami tidak khawatir tentang gaya atau posisi apa pun, ingat - saat kami membuat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fondasi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan bukan implementasinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan untuk bagian terakhir dari pengaturan, kita akan mendefinisikan garis-garis yang akan digunakan dalam latihan ini. </font><font style="vertical-align: inherit;">Sekali lagi, kita perlu referensi mereka dalam tes - sampai Anda menambahkannya ke tata letak XML atau kelas aktivitas Anda, cukup tentukan di file </font></font><code>strings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs">&lt;string name=<span class="hljs-string">"error_message_invalid_email”&gt;…&lt;/string&gt;
&lt;string name="</span>error_message_invalid_password”&gt;…&lt;/string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda mungkin memperhatikan bahwa dalam pengaturan ini kami menulis sesedikit mungkin, tetapi kami memberikan detail yang cukup tentang aktivitas kami dan tata letaknya untuk menulis tes untuk itu. </font><font style="vertical-align: inherit;">Aktivitas kami saat ini tidak berfungsi, tetapi terbuka dan memiliki tampilan yang dapat direferensikan. </font><font style="vertical-align: inherit;">Sekarang kita memiliki cukup minimum untuk bekerja, mari kita lanjutkan dan tambahkan beberapa tes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menambahkan Tes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kami memiliki tiga situasi yang harus kami laksanakan, jadi kami akan menulis beberapa tes untuk mereka.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika pengguna memasukkan alamat email yang tidak valid di bidang input email, kami perlu menampilkan pesan kesalahan. </font><font style="vertical-align: inherit;">Jadi, kami akan menulis tes yang memeriksa apakah pesan kesalahan ini ditampilkan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika pengguna mulai memasukkan data ke bidang input email lagi, pesan kesalahan di atas akan hilang - karena itu kita akan menulis tes untuk ini.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Akhirnya, ketika API mengembalikan pesan kesalahan, itu harus ditampilkan dalam kotak dialog peringatan - jadi kami juga akan menambahkan tes untuk ini.</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidEmailErrorHidesWhenUserTypes</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"j"</span>))<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_email))<font></font>
            .check(doesNotExist())<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidPasswordErrorDisplayed</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_password))<font></font>
            .check(matches(isDisplayed()))<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">serverErrorMessageDisplays</span><span class="hljs-params">()</span> </span>{<font></font>
    val response = ConnectResponseFactory.makeConnectResponseForError()<font></font>
    stubConnectRepositorySignIn(Single.just(response))<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"joe@example.com"</span>))<font></font>
<font></font>
    onView(withId(R.id.input_password))<font></font>
            .perform(typeText(DataFactory.randomUuid()))<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(response.message))<font></font>
            .check(matches(isDisplayed()))<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oke, sekarang kami memiliki tes tertulis - mari kita lanjutkan dan jalankan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/ac/bv/2xacbvdf2rumlv9asggjp9mwsp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tidak mengherankan bahwa mereka gagal - ini karena kami belum memiliki implementasi, jadi ini yang diharapkan. Dalam hal apa pun, kami seharusnya senang melihat tes merah sekarang! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi sekarang kita perlu menambahkan implementasi untuk aktivitas kita sampai tes lulus. Saat kami menulis tes terfokus yang menguji hanya satu konsep (atau setidaknya seharusnya!), Kami akan dapat menambahkan implementasi satu per satu dan juga menyaksikan pengujian kami berubah hijau satu per satu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, mari kita lihat salah satu tes yang gagal, mari kita mulai dengan tes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">invalidPasswordErrorDisplayed ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kami tahu beberapa hal:</font></font><br>
<br>
<ul>
<li>     ,    ,       ,          ,       :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupLoginButtonClickListener</span><span class="hljs-params">()</span> </span>{<font></font>
    button_login.setOnClickListener {<font></font>
        loginPresenter.performSignIn(input_email.text.toString(),<font></font>
                input_password.text.toString()) }<font></font>
}</code></pre><br>
<ul>
<li>       ,          .    TextInputLayout,             ,    :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    layout_input_password.error = getString(R.string.error_message_invalid_password)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kami telah menambahkan logika untuk situasi ini, mari lanjutkan dan jalankan pengujian kami lagi! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/4-/et/jq4-etd3rfq9tddsy4x0lusrti0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hebat, sepertinya ceknya </font></font><code>invalidPassworrdErrorDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berhasil. Tetapi kami belum selesai, kami masih memiliki dua tes yang belum dilewati untuk bagian-bagian dari fungsi login kami yang harus kami laksanakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami akan mempertimbangkan tes </font></font><code>serverErrorMessageDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini cukup sederhana, kita tahu bahwa ketika API mengembalikan respons kesalahan (dan bukan kesalahan umum dari perpustakaan jaringan kami), aplikasi akan menampilkan pesan kesalahan kepada pengguna di kotak dialog peringatan. Untuk melakukan ini, kita hanya perlu membuat instance dialog menggunakan pesan kesalahan server kami dalam teks dialog:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">(message: String)</span> </span>{<font></font>
    DialogFactory.createSimpleInfoDialog(<span class="hljs-keyword">this</span>, R.string.error_message_login_title, message, <font></font>
            R.string.error_message_login_ok).show()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lanjutkan dan jalankan tes kita lagi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/le/m2/tdlem2qq8vgtq9wcggplu-dra_0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hore! </font><font style="vertical-align: inherit;">Kami bergerak maju, sekarang kami hanya memiliki satu tes tersisa, ini adalah tes </font></font><code>invalidEmailErrorHidesWhenUserTypes()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sekali lagi, ini adalah kasus sederhana, tetapi mari kita lihat:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika pengguna mengklik tombol login dan alamat email tidak ada atau alamat email salah, kami menunjukkan pesan kesalahan kepada pengguna. </font><font style="vertical-align: inherit;">Kami sudah menerapkan ini, saya hanya mengesampingkannya untuk kesederhanaan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, ketika pengguna mulai memasukkan data ke dalam bidang lagi, pesan kesalahan harus dihapus dari tampilan. </font><font style="vertical-align: inherit;">Untuk melakukan ini, kita perlu mendengarkan ketika konten teks dari bidang input berubah:</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupOnEmailTextChangedListener</span><span class="hljs-params">()</span> </span>{<font></font>
    input_email.addTextChangedListener(object : TextWatcher {<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">afterTextChanged</span><span class="hljs-params">(s: Editable)</span> </span>{}<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">beforeTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                       count: Int, after: Int)</span> </span>{<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">onTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                   before: Int, count: Int)</span> </span>{<font></font>
            loginPresenter.handleEmailTextChanged(s)<font></font>
        }<font></font>
    })<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang ini sudah cukup untuk menjamin bahwa pesan kesalahan kami akan disembunyikan ketika mengubah isi kolom input. </font><font style="vertical-align: inherit;">Tetapi kami memiliki tes untuk mengonfirmasi perubahan kami: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/du/ni/aa/duniaa83g3b84ennz4ljp03uez8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hebat! </font><font style="vertical-align: inherit;">Persyaratan implementasi kami terpenuhi saat kami lulus tes kami - senang melihat lampu hijau</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penting untuk dicatat bahwa contoh penerapan TDD kami sangat primitif. Bayangkan bahwa kami sedang mengembangkan layar yang kompleks, seperti umpan konten, di mana Anda dapat melakukan beberapa tindakan dengan elemen umpan (misalnya, seperti dalam aplikasi Buffer untuk Android) - dalam kasus ini kami akan menggunakan banyak fungsi berbeda yang harus diimplementasikan dalam aktivitas yang diberikan / pecahan. Ini adalah situasi di mana TDD dalam tes UI akan terungkap lebih banyak, karena apa yang dapat mengarah pada kenyataan bahwa kita akan menulis kode yang terlalu rumit untuk fungsi-fungsi ini dapat dikurangi menjadi implementasi yang memenuhi tes yang diberikan yang kita tulis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai rangkuman, saya akan membagikan beberapa poin yang dipelajari dari pengalaman saya:</font></font><br>
<br>
<ul>
<li>  ,   ,  TDD  .   ,        .   ,  Espresso     (/,     ),         .       activity,  ,      ,        .                .</li>
<li>  ,   ,     ,   , ,  ,   ,       .  ,        , ,      ,  ,      ( ,      !). -         .           , , ,  - .</li>
<li> ,   Ui-              ,   ,          . ,   , ,   ,       ,      ,    .</li>
<li> ,      .       ,        —      ,      ,        ,     - .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sepertinya lebih alami. </font><font style="vertical-align: inherit;">Karena kenyataan bahwa TDD sudah digunakan untuk tes unit, Anda merasa sedikit terbelakang ketika Anda menulis tes unit, diikuti oleh implementasi, diikuti oleh tes UI. </font><font style="vertical-align: inherit;">Anda akan merasa lebih alami dengan melangkah penuh dengan TDD, bukan di tengah jalan.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah Anda sudah menggunakan TDD saat menulis tes antarmuka pengguna dan melakukan sesuatu yang serupa atau sangat berbeda? </font><font style="vertical-align: inherit;">Atau Anda ingin tahu lebih banyak dan mengajukan beberapa pertanyaan? </font><font style="vertical-align: inherit;">Jangan ragu untuk berkomentar di bawah ini atau menciak kami di </font></font><code>@bufferdevs</code> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu saja. </font><font style="vertical-align: inherit;">Kami menunggu Anda di kursus:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendasarkan</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maju</font></font></a></li>
</ul></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id492702/index.html">Mesin terjemahkan. Dari perang dingin hingga saat ini</a></li>
<li><a href="../id492704/index.html">Untuk meningkatkan efektivitas kelangsungan hidup implan sebanyak 5-7 kali - bagaimana mungkin?</a></li>
<li><a href="../id492706/index.html">Arsip memori: bagaimana otak menyandikan dan mereproduksi memori</a></li>
<li><a href="../id492708/index.html">Internet satelit global - apakah ada berita dari ladang?</a></li>
<li><a href="../id492710/index.html">Jalur kandidat yang berduri melalui berbagai sistem HRM</a></li>
<li><a href="../id492714/index.html">Kerja efektif dari rumah: umum dan pribadi</a></li>
<li><a href="../id492718/index.html">Keamanan melalui pembatasan pengguna atau cara membuat kerentanan</a></li>
<li><a href="../id492720/index.html">diskussion: layanan file proyek</a></li>
<li><a href="../id492724/index.html">Björn Straustrup Jawaban Top 5 C ++ Pertanyaan dengan Stack Overflow</a></li>
<li><a href="../id492726/index.html">OS Sivelkiriya: proses pengembangan perangkat lunak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>