<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧔🏽 🏥 🧑🏽‍🤝‍🧑🏻 PHP Composer：苦労せずに依存関係を修正 👊 🧘 🕺🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="あなたの多くはおそらく、あなたが使用しているライブラリまたはフレームワークにバグがあるか、必要な機能がないという状況に遭遇しました。怠惰ではなく、プルリクエストを作成したとします。しかし、彼らはすぐにそれを受け入れません、そして、製品の次のリリースは一般的に1年で起こるかもしれません。
 


 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PHP Composer：苦労せずに依存関係を修正</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/473654/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたの多くはおそらく、あなたが使用しているライブラリまたはフレームワークにバグがあるか、必要な機能がないという状況に遭遇しました。</font><font style="vertical-align: inherit;">怠惰ではなく、プルリクエストを作成したとします。</font><font style="vertical-align: inherit;">しかし、彼らはすぐにそれを受け入れません、そして、製品の次のリリースは一般的に1年で起こるかもしれません。</font></font></p><br>
<p><img src="https://habrastorage.org/webt/jv/ys/9h/jvys9h_dh2zmefozo_xhrosiipo.jpeg" alt="PHP Composer：苦労せずに依存関係を修正"></p><br>
<p>  ,        ?    —     .      .     ,   ,        .      Composer,    .</p><br>
<p>       ,   —  ,       Composer   :   ,        .         ,    . <a name="habracut"></a></p><br>
<p>     .  ,    -    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PHP Code Coverage</a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PHPUnit</a>      . ,      7.0.8 -  ( <code>myFix.patch</code>):</p><br>
<pre><code class="diff hljs">diff --git a/src/CodeCoverage.php b/src/CodeCoverage.php<font></font>
index 2c92ae2..514171e 100644<font></font>
<span class="hljs-comment">--- a/src/CodeCoverage.php</span>
<span class="hljs-comment">+++ b/src/CodeCoverage.php</span><font></font>
@@ -190,6 +190,7 @@ public function filter(): Filter<font></font>
      */<font></font>
     public function getData(bool $raw = false): array<font></font>
     {<font></font>
<span class="hljs-addition">+        // for example some changes here</span><font></font>
         if (!$raw &amp;&amp; $this-&gt;addUncoveredFilesFromWhitelist) {<font></font>
             $this-&gt;addUncoveredFilesFromWhitelist();<font></font>
         }</code></pre><br>
<p>  -.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">php-composer-patches-example</a>.     ,       ,     ,      .</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="plaintext hljs">$ git clone git@github.com:mougrim/php-composer-patches-example.git<font></font>
  «php-composer-patches-example»…<font></font>
remote: Enumerating objects: 3, done.<font></font>
remote: Counting objects: 100% (3/3), done.<font></font>
remote: Compressing objects: 100% (2/2), done.<font></font>
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0<font></font>
 : 100% (3/3), .<font></font>
$ cd php-composer-patches-example/<font></font>
$<font></font>
$ composer.phar init --name=mougrim/php-composer-patches-example --description="It's an example for article with using forks and patches for changing dependencies" --author='Mougrim &lt;rinat@mougrim.ru&gt;' --type=library --require='phpunit/phpunit:^8.4.2' --license=MIT --homepage='https://github.com/mougrim/php-composer-patches-example'    <font></font>
<font></font>
  Welcome to the Composer config generator  <font></font>
<font></font>
This command will guide you through creating your composer.json config.<font></font>
<font></font>
Package name (&lt;vendor&gt;/&lt;name&gt;) [mougrim/php-composer-patches-example]: <font></font>
Description [It's an example for article with using forks and patches for changing dependencies]: <font></font>
Author [Mougrim &lt;rinat@mougrim.ru&gt;, n to skip]: <font></font>
Minimum Stability []: <font></font>
Package Type (e.g. library, project, metapackage, composer-plugin) [library]: <font></font>
License [MIT]: <font></font>
<font></font>
Define your dependencies.<font></font>
<font></font>
Would you like to define your dev dependencies (require-dev) interactively [yes]? no<font></font>
<font></font>
{<font></font>
    "name": "mougrim/php-composer-patches-example",<font></font>
    "description": "It's an example for article with using forks and patches for changing dependencies",<font></font>
    "type": "library",<font></font>
    "homepage": "https://github.com/mougrim/php-composer-patches-example",<font></font>
    "require": {<font></font>
        "phpunit/phpunit": "^8.4.2"<font></font>
    },<font></font>
    "license": "MIT",<font></font>
    "authors": [<font></font>
        {<font></font>
            "name": "Mougrim",<font></font>
            "email": "rinat@mougrim.ru"<font></font>
        }<font></font>
    ]<font></font>
}<font></font>
<font></font>
Do you confirm generation [yes]? yes<font></font>
Would you like to install dependencies now [yes]? yes<font></font>
Loading composer repositories with package information<font></font>
Updating dependencies (including require-dev)<font></font>
Package operations: 29 installs, 0 updates, 0 removals<font></font>
  - Installing sebastian/version (2.0.1): Loading from cache<font></font>
  - Installing sebastian/type (1.1.3): Loading from cache<font></font>
  - Installing sebastian/resource-operations (2.0.1): Loading from cache<font></font>
  - Installing sebastian/recursion-context (3.0.0): Loading from cache<font></font>
  - Installing sebastian/object-reflector (1.1.1): Loading from cache<font></font>
  - Installing sebastian/object-enumerator (3.0.3): Loading from cache<font></font>
  - Installing sebastian/global-state (3.0.0): Loading from cache<font></font>
  - Installing sebastian/exporter (3.1.2): Loading from cache<font></font>
  - Installing sebastian/environment (4.2.2): Loading from cache<font></font>
  - Installing sebastian/diff (3.0.2): Loading from cache<font></font>
  - Installing sebastian/comparator (3.0.2): Loading from cache<font></font>
  - Installing phpunit/php-timer (2.1.2): Loading from cache<font></font>
  - Installing phpunit/php-text-template (1.2.1): Loading from cache<font></font>
  - Installing phpunit/php-file-iterator (2.0.2): Loading from cache<font></font>
  - Installing theseer/tokenizer (1.1.3): Loading from cache<font></font>
  - Installing sebastian/code-unit-reverse-lookup (1.0.1): Loading from cache<font></font>
  - Installing phpunit/php-token-stream (3.1.1): Loading from cache<font></font>
  - Installing phpunit/php-code-coverage (7.0.8): Loading from cache<font></font>
  - Installing doctrine/instantiator (1.2.0): Loading from cache<font></font>
  - Installing symfony/polyfill-ctype (v1.12.0): Loading from cache<font></font>
  - Installing webmozart/assert (1.5.0): Loading from cache<font></font>
  - Installing phpdocumentor/reflection-common (2.0.0): Loading from cache<font></font>
  - Installing phpdocumentor/type-resolver (1.0.1): Loading from cache<font></font>
  - Installing phpdocumentor/reflection-docblock (4.3.2): Loading from cache<font></font>
  - Installing phpspec/prophecy (1.9.0): Loading from cache<font></font>
  - Installing phar-io/version (2.0.1): Loading from cache<font></font>
  - Installing phar-io/manifest (1.0.3): Loading from cache<font></font>
  - Installing myclabs/deep-copy (1.9.3): Loading from cache<font></font>
  - Installing phpunit/phpunit (8.4.2): Loading from cache<font></font>
sebastian/global-state suggests installing ext-uopz (*)<font></font>
phpunit/phpunit suggests installing phpunit/php-invoker (^2.0.0)<font></font>
phpunit/phpunit suggests installing ext-soap (*)<font></font>
Writing lock file<font></font>
Generating autoload files<font></font>
$<font></font>
$ echo 'vendor/' &gt; .gitignore<font></font>
$ echo 'composer.lock' &gt;&gt; .gitignore<font></font>
$ git add .gitignore composer.json<font></font>
$<font></font>
$ git commit --gpg-sign --message='Init composer'<font></font>
[master ce800ae] Init composer<font></font>
 2 files changed, 18 insertions(+)<font></font>
 create mode 100644 .gitignore<font></font>
 create mode 100644 composer.json<font></font>
$ git push origin master<font></font>
 : 4, .<font></font>
Delta compression using up to 4 threads.<font></font>
 : 100% (3/3), .<font></font>
 : 100% (4/4), 1.21 KiB | 1.21 MiB/s, .<font></font>
Total 4 (delta 0), reused 0 (delta 0)<font></font>
To github.com:mougrim/php-composer-patches-example.git<font></font>
   f31c342..ce800ae  master -&gt; master</code></pre></div></div><br>
<h2 id="chto-ne-tak-s-forkom-zavisimosti">     </h2><br>
<p> ,    .   PHP Code Coverage.</p><br>
<ol>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> PHP Code Coverage  GitHub</a>.</li>
<li>   Fork <img src="https://habrastorage.org/webt/qj/ff/ta/qjfftaa4kurvcfu91mlrvr2twie.png" alt="フォークボタン"> ( :     ,  mougrim   user name).</li>
<li> :<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../<font></font>
git <span class="hljs-built_in">clone</span> git@github.com:mougrim/php-code-coverage.git
<span class="hljs-built_in">cd</span> php-code-coverage</code></pre></li>
<li>  ,    :<br>
<pre><code class="bash hljs">git checkout 7.0.8</code></pre></li>
<li>   :<br>
<pre><code class="bash hljs">git checkout -b 7.0.8-myFix</code></pre></li>
<li>  , , :<br>
<pre><code class="bash hljs">git apply ../myFix.patch<font></font>
git add src/CodeCoverage.php<font></font>
git commit --gpg-sign --message=<span class="hljs-string">'My fix'</span>
git push -u origin 7.0.8-myFix</code></pre></li>
<li>     composer.json    (   ,     <code>phpunit/php-code-coverage</code>    ,  ):<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../php-composer-patches-example<font></font>
git checkout -b useFork<font></font>
composer.phar config repositories.phpunit/php-code-coverage vcs https://github.com/mougrim/php-code-coverage.git</code></pre></li>
<li>     :<br>
<pre><code class="bash hljs">composer.phar require phpunit/php-code-coverage <span class="hljs-string">'dev-7.0.8-myFix'</span></code></pre></li>
</ol><br>
<p>      : Composer ,   ,   <code>phpunit/phpunit</code>  <code>phpunit/php-code-coverage</code>  <code>^7.0.7</code>,      <code>dev-7.0.8-myFix</code>:</p><br>
<pre><code class="plaintext hljs">$ composer.phar require phpunit/php-code-coverage 'dev-7.0.8-myFix'<font></font>
./composer.json has been updated<font></font>
Loading composer repositories with package information<font></font>
Updating dependencies (including require-dev)         <font></font>
Your requirements could not be resolved to an installable set of packages.<font></font>
<font></font>
  Problem 1<font></font>
    - phpunit/phpunit 8.4.2 requires phpunit/php-code-coverage ^7.0.7 -&gt; satisfiable by phpunit/php-code-coverage[7.0.x-dev].<font></font>
    - phpunit/phpunit 8.4.2 requires phpunit/php-code-coverage ^7.0.7 -&gt; satisfiable by phpunit/php-code-coverage[7.0.x-dev].<font></font>
    - phpunit/phpunit 8.4.2 requires phpunit/php-code-coverage ^7.0.7 -&gt; satisfiable by phpunit/php-code-coverage[7.0.x-dev].<font></font>
    - Can only install one of: phpunit/php-code-coverage[7.0.x-dev, dev-7.0.8-myFix].<font></font>
    - Installation request for phpunit/php-code-coverage dev-7.0.8-myFix -&gt; satisfiable by phpunit/php-code-coverage[dev-7.0.8-myFix].<font></font>
    - Installation request for phpunit/phpunit ^8.4.2 -&gt; satisfiable by phpunit/phpunit[8.4.2].<font></font>
<font></font>
Installation failed, reverting ./composer.json to its original content.</code></pre><br>
<p>   ?   :</p><br>
<ol>
<li>  <code>phpunit/php-code-coverage</code>,    PHPUnit     <code>phpunit/php-code-coverage</code>  <code>dev-7.0.8-myFix</code>.           ,      <code>phpunit/php-code-coverage</code>.</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>   <code>phpunit/php-code-coverage</code>.      ,  ,      .</li>
<li>    <code>phpunit/php-code-coverage</code>,   <code>7.0.8</code>    .    ,    —  Git    ,           .</li>
<li>   <code>phpunit/php-code-coverage</code>   -,  <code>7.0.8-a+myFix</code> (     -  ).</li>
</ol><br>
<p>     .       <code>7.0.8.1</code>,  Composer    .</p><br>
<p>       .      ,       — .   -:</p><br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../php-code-coverage<font></font>
git tag 7.0.8<span class="hljs-_">-a</span>+myFix<font></font>
git push origin 7.0.8<span class="hljs-_">-a</span>+myFix
<span class="hljs-built_in">cd</span> ../php-composer-patches-example<font></font>
composer.phar require phpunit/php-code-coverage <span class="hljs-string">'7.0.8-a+myFix'</span><font></font>
git add composer.json<font></font>
git commit --gpg-sign --message=<span class="hljs-string">'Use fork'</span>
git push -u origin useFork</code></pre><br>
<p>,      <code>mougrim/php-composer-patches-example</code>  ,    <code>phpunit/phpunit</code>.      ,     <code>https://github.com/mougrim/php-code-coverage.git</code>  <code>phpunit/php-code-coverage</code>,       <code>phpunit/php-code-coverage</code>  <code>7.0.8-a+myFix</code> (    ):</p><br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../<font></font>
mkdir php-project<font></font>
<span class="hljs-built_in">cd</span> php-project/<font></font>
composer.phar require phpunit/phpunit <span class="hljs-string">'^8.4.2'</span><font></font>
composer.phar config repositories.mougrim/php-composer-patches-example vcs https://github.com/mougrim/php-composer-patches-example.git<font></font>
composer.phar config repositories.phpunit/php-code-coverage vcs https://github.com/mougrim/php-code-coverage.git<font></font>
composer.phar require phpunit/php-code-coverage 7.0.8<span class="hljs-_">-a</span>+myFix<font></font>
composer.phar require mougrim/php-composer-patches-example dev-useFork</code></pre><br>
<p>    ,  php-composer-patches-example   ,             Packagist.     ,  ,  .</p><br>
<p>   .</p><br>
<p>  :</p><br>
<ul>
<li>     Composer.</li>
</ul><br>
<p>  :</p><br>
<ul>
<li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>roave/security-advisories</code></a>,       ,   ,     ,  ;</li>
<li>    ,      ;</li>
<li>     ,    ,  <code>dev-*</code>              ;</li>
<li>  ,     ,           ;</li>
<li>  ,     ,    <code>phpunit/php-code-coverage</code>   ,    ;</li>
<li> ,        PHP Code Coverage  -  ,     .</li>
</ul><br>
<p> ,   ,         .</p><br>
<h2 id="ispolzovanie-cweaganscomposer-patches"> cweagans/composer-patches</h2><br>
<p>         ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>cweagans/composer-patches</code></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PHP- № 101</a> (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">pronskiy</a>  ,  ).    Cmposer,      .  ,  ,    ,  .</p><br>
<p>  cweagans/composer-patches:</p><br>
<ol>
<li> PHP Code Coverage:<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../<font></font>
rm -rf php-code-coverage<font></font>
git <span class="hljs-built_in">clone</span> git@github.com:sebastianbergmann/php-code-coverage.git
<span class="hljs-built_in">cd</span> php-code-coverage</code></pre></li>
<li>  ,    :<br>
<pre><code class="bash hljs">git checkout 7.0.8</code></pre></li>
<li>  .</li>
<li> :<br>
<pre><code class="bash hljs">mkdir -p ../php-composer-patches-example/patches/phpunit/php-code-coverage<font></font>
git diff HEAD &gt; ../php-composer-patches-example/patches/phpunit/php-code-coverage/myFix.patch</code></pre></li>
<li>    <code>cweagans/composer-patches</code>:<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../php-composer-patches-example<font></font>
git checkout master<font></font>
composer.phar update<font></font>
git checkout -b cweagansComposerPatches<font></font>
composer.phar require cweagans/composer-patches <span class="hljs-string">'^1.6.7'</span></code></pre></li>
<li>  <code>cweagans/composer-patches</code>    <code>composer.json</code> (      ):<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"config"</span>: {
        <span class="hljs-attr">"preferred-install"</span>: <span class="hljs-string">"source"</span><font></font>
    },<font></font>
    <span class="hljs-attr">"extra"</span>: {
        <span class="hljs-attr">"patches"</span>: {
            <span class="hljs-attr">"phpunit/php-code-coverage"</span>: {
                <span class="hljs-attr">"My fix description"</span>: <span class="hljs-string">"patches/phpunit/php-code-coverage/myFix.patch"</span><font></font>
            }<font></font>
        },<font></font>
        <span class="hljs-attr">"enable-patching"</span>: <span class="hljs-literal">true</span><font></font>
    }<font></font>
}</code></pre></li>
<li> :<br>
<pre><code class="bash hljs">composer.phar update</code></pre></li>
<li> -   ,        ,      ,    :<br>
<pre><code class="plaintext hljs">$ grep example vendor/phpunit/php-code-coverage/src/CodeCoverage.php<font></font>
    // for example some changes here</code></pre></li>
<li>   :<br>
<pre><code class="bash hljs">git add composer.json patches/phpunit/php-code-coverage/myFix.patch<font></font>
git commit --gpg-sign --message=<span class="hljs-string">'Use cweagans/composer-patches'</span>
git push -u origin cweagansComposerPatches</code></pre></li>
</ol><br>
<p>,          .</p><br>
<p> :</p><br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../<font></font>
rm -rf php-project<font></font>
mkdir php-project<font></font>
<span class="hljs-built_in">cd</span> php-project<font></font>
composer.phar require phpunit/phpunit <span class="hljs-string">'^8.4.2'</span></code></pre><br>
<p>  <code>composer.json</code>  :</p><br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"extra"</span>: {
        <span class="hljs-attr">"enable-patching"</span>: <span class="hljs-literal">true</span><font></font>
    }<font></font>
}</code></pre><br>
<p> <code>mougrim/php-composer-patches-example</code>:</p><br>
<pre><code class="bash hljs">composer.phar config repositories.mougrim/php-composer-patches-example vcs https://github.com/mougrim/php-composer-patches-example.git<font></font>
composer.phar require mougrim/php-composer-patches-example dev-cweagansComposerPatches</code></pre><br>
<p> ,         ,  .<br>
 ,   ,    :</p><br>
<pre><code class="plaintext hljs">$ composer.phar update<font></font>
Removing package phpunit/php-code-coverage so that it can be re-installed and re-patched.<font></font>
  - Removing phpunit/php-code-coverage (7.0.8)<font></font>
Loading composer repositories with package information<font></font>
Updating dependencies (including require-dev)         <font></font>
Package operations: 1 install, 0 updates, 0 removals<font></font>
No patches supplied.<font></font>
Gathering patches for dependencies. This might take a minute.<font></font>
  - Installing phpunit/php-code-coverage (7.0.8): Loading from cache<font></font>
  - Applying patches for phpunit/php-code-coverage<font></font>
    patches/phpunit/php-code-coverage/myFix.patch (My fix description)<font></font>
   Could not apply patch! Skipping. The error was: The "patches/phpunit/php-code-coverage/myFix.patch" file could not be downloaded: failed to open stream: No such file or directory<font></font>
<font></font>
Writing lock file<font></font>
Generating autoload files</code></pre><br>
<p>  -,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">File based patches aren't resolved in dependencies</a>. ,    URL   ( ,   -),         ,    ,  .</p><br>
<p>   <code>cweagans/composer-patches</code>.</p><br>
<p>  :</p><br>
<ul>
<li>   ;</li>
<li><code>roave/security-advisories</code>   ;</li>
<li>    ,    ,   ,       (        ,   —   ,     );</li>
<li>  ,     ,    <code>phpunit/php-code-coverage</code>    ;</li>
<li> ,             PHP Code Coverage.</li>
</ul><br>
<p>:</p><br>
<ul>
<li>   Composer,  ,   Composer   ;</li>
<li>   <code>enable-patching=true</code>,     ;</li>
<li>      ,   ,  ,  ,  pull requests,      (,         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,       );</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">File based patches aren't resolved in dependencies</a>,           ;</li>
<li>       .</li>
</ul><br>
<p>     .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">feature request</a>.  ,         ,         (,     Composer).      ,     .       ,   .</p><br>
<p>     ,      —  -       .</p><br>
<h2 id="ispolzovanie-vaimo-composer-patches"> Vaimo Composer Patches</h2><br>
<p>          (   ?).      pull requests,       .  -    ,    , — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Vaimo Composer Patches</a>.         ,   , ,  pull requests  .  , ,       <code>vaimo/composer-patches</code>.    : issues  ,         .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Packagist</a>.</p><br>
<p>          .         issues     Packagist.         . :)</p><br>
<p> <code>vaimo/composer-patches</code>      ,        .</p><br>
<ol>
<li>   (  <code>vendor</code> ,    <code>cweagans/composer-patches</code>  <code>vaimo/composer-patches</code>     ):<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../php-composer-patches-example<font></font>
git checkout master<font></font>
rm -rf vendor/<font></font>
composer.phar update</code></pre></li>
<li>  1—4   .</li>
<li>    <code>vaimo/composer-patches</code>:<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../php-composer-patches-example<font></font>
git checkout -b vaimoComposerPatches<font></font>
composer.phar require vaimo/composer-patches <span class="hljs-string">'^4.20.2'</span></code></pre></li>
<li>  <code>vaimo/composer-patches</code>    <code>composer.json</code> (   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>):<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"extra"</span>: {
        <span class="hljs-attr">"patches"</span>: {
            <span class="hljs-attr">"phpunit/php-code-coverage"</span>: {
                <span class="hljs-attr">"My fix description"</span>: {
                    <span class="hljs-attr">"&lt; 7.0.0"</span>: <span class="hljs-string">"patches/phpunit/php-code-coverage/myFix-leagcy.patch"</span>,
                    <span class="hljs-attr">"&gt;= 7.0.0"</span>: <span class="hljs-string">"patches/phpunit/php-code-coverage/myFix.patch"</span><font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre></li>
<li> :<br>
<pre><code class="bash hljs">composer.phar update</code></pre></li>
<li> -   ,        ,      ,    :<br>
<pre><code class="plaintext hljs">$ grep example vendor/phpunit/php-code-coverage/src/CodeCoverage.php<font></font>
    // for example some changes here</code></pre></li>
<li>   :<br>
<pre><code class="bash hljs">git add composer.json patches/phpunit/php-code-coverage/myFix.patch<font></font>
git commit --gpg-sign --message=<span class="hljs-string">'Use vaimo/composer-patches'</span>
git push -u origin vaimoComposerPatches</code></pre></li>
</ol><br>
<p>,          .</p><br>
<p>    <code>mougrim/php-composer-patches-example</code>:</p><br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ../<font></font>
rm -rf php-project<font></font>
mkdir php-project<font></font>
<span class="hljs-built_in">cd</span> php-project<font></font>
composer.phar require phpunit/phpunit <span class="hljs-string">'^8.4.2'</span><font></font>
composer.phar config repositories.mougrim/php-composer-patches-example vcs https://github.com/mougrim/php-composer-patches-example.git<font></font>
composer.phar require mougrim/php-composer-patches-example dev-vaimoComposerPatches</code></pre><br>
<p>    ,    :</p><br>
<pre><code class="plaintext hljs">$ grep example vendor/phpunit/php-code-coverage/src/CodeCoverage.php<font></font>
    // for example some changes here</code></pre><br>
<p>   <code>vaimo/composer-patches</code>.</p><br>
<p>     ,   ,    :</p><br>
<ul>
<li>         ;</li>
<li>    ,     ;</li>
<li>       ;</li>
<li>    ,          ,     — ,     .</li>
</ul><br>
<p>:</p><br>
<ul>
<li>  ,    Composer,  ,   Composer   ;</li>
<li>    ,    .</li>
</ul><br>
<h2 id="vyvody"></h2><br>
<p>  :</p><br>
<ul>
<li>    -   ;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>cweagans/composer-patches</code></a> —  ,   ,     ;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Vaimo Composer Patches</a> —  ,     ,     ;</li>
<li> Vaimo Composer Patches  ,   ,     ;</li>
<li>       , , ,     (     ).</li>
</ul><br>
<p>    :  -     , , ,  ,       .</p><br>
<p> Badoo   Vaimo Composer Patches   :</p><br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">SoftMocks</a>   PHPUnit  PHP Code Coverage;</li>
<li>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Webmozart Assert</a>    SoftMocks    ( SoftMocks    <code>array_map(array('static', 'valueToString')</code>).</li>
</ul><br>
<p> , Sr. PHP Developer</p><br>
<p><strong>UPD1</strong>:  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">BoShurik</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>.      .</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja473640/index.html">ビッグデータの日没</a></li>
<li><a href="../ja473642/index.html">Cribble Crabble Gradle：自動ビルドマジック</a></li>
<li><a href="../ja473646/index.html">小さな会社でのハッカソン：一連のリソースを捨てずに配置する方法</a></li>
<li><a href="../ja473648/index.html">馬は死んだ-叫び：tslintからeslintへの移行</a></li>
<li><a href="../ja473652/index.html">Node.jsとOracleデータベースを使用したREST APIの作成。パート5</a></li>
<li><a href="../ja473656/index.html">Hugo Static Site Generatorエクスペリエンス</a></li>
<li><a href="../ja473658/index.html">Go 1.13のバグへの対処</a></li>
<li><a href="../ja473660/index.html">アーケードリバースエンジニアリング：NBAジャムでマイケルジョーダンを記録する</a></li>
<li><a href="../ja473664/index.html">直接の学習経験。Yandex.Practicum-データアナリスト</a></li>
<li><a href="../ja473666/index.html">サイエンスフィクションのライターとして、アーサークラークはジャーナルTech-Youthをほぼ閉じました</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>