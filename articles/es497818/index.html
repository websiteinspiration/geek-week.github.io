<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëí ‚¨õÔ∏è ü¶ê Acceso remoto a m√°quinas virtuales con GPU con Citrix üï≥Ô∏è üìá üëç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta gu√≠a detalla los pasos que debe seguir para prepararse para el acceso remoto a escritorios virtuales utilizando la tecnolog√≠a que ofrece Citrix. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Acceso remoto a m√°quinas virtuales con GPU con Citrix</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497818/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta gu√≠a detalla los pasos que debe seguir para prepararse para el acceso remoto a escritorios virtuales utilizando la tecnolog√≠a que ofrece Citrix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ser√° √∫til para aquellos que recientemente se hayan familiarizado con la tecnolog√≠a de virtualizaci√≥n de escritorio, ya que es una colecci√≥n de comandos √∫tiles reunidos a partir de ~ 10 manuales, muchos de los cuales est√°n disponibles en los sitios de Citrix, Nvidia, Microsoft, despu√©s de la autorizaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta implementaci√≥n contiene los pasos para preparar el acceso remoto a m√°quinas virtuales (VM) con aceleradores gr√°ficos Nvidia Tesla M60 y el sistema operativo Centos 7.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a empezar.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preparaci√≥n de un hipervisor para alojar m√°quinas virtuales.</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo descargar e instalar XenServer 7.4? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo agregar XenServer a Citrix XenCenter? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo descargar e instalar el controlador Nvidia? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo cambiar el modo Nvidia Tesla M60? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo montar el almacenamiento?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XenServer 7.4</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El enlace de descarga de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XenServer 7.4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° disponible despu√©s de la autorizaci√≥n en el sitio web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eb/p2/kr/ebp2kr2edt_ktpzrhsimmkaofbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalemos XenServer.iso en un servidor con 4x NVIDIA Tesla M60 de forma regular. En mi caso, iso se monta a trav√©s de IPMI. Para los servidores Dell, el BMC se administra a trav√©s de IDRAC. Los pasos de instalaci√≥n son casi id√©nticos a la instalaci√≥n de sistemas operativos similares a Linux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi direcci√≥n de GPU XenServer c es 192.168.1.100 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar XenCenter.msi en la computadora local desde la cual administraremos hipervisores y m√°quinas virtuales. Agregue un servidor con una GPU y XenServer haciendo clic en la pesta√±a "Servidor", luego "Agregar". Ingrese la ra√≠z de nombre de usuario y contrase√±a especificada durante la instalaci√≥n de XenServer.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/qv/qw/yyqvqwxcbnxhwkj0ho3brs1lqom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En XenCenter, despu√©s de hacer clic en el nombre del hipervisor agregado, la pesta√±a Consola estar√° disponible. </font><font style="vertical-align: inherit;">En el men√∫, seleccione "Configuraci√≥n de servicio remoto" y active la autorizaci√≥n SSH - "Activar / Desactivar Shell remoto".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conductor de Nvidia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√© rienda suelta a las emociones y dir√© que durante todo el tiempo que trabaj√© con vGPU nunca he </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visitado el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sitio </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">nvid.nvidia.com</font></a><font style="vertical-align: inherit;"> en el primer intento. </font><font style="vertical-align: inherit;">Si la autorizaci√≥n no funciona, entonces recomiendo Internet Explorer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue zip desde vGPU, as√≠ como GPUMode Change Utility: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81.zip </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NVIDIA-gpumodeswitch-2020-01.zip </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/ia/ny/sjianylmppn9as35nnxtrwj-bhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seguimos las versiones. </font><font style="vertical-align: inherit;">El nombre del archivo descargado muestra la versi√≥n de los controladores NVIDIA adecuados que se pueden instalar en m√°quinas virtuales en el futuro. </font><font style="vertical-align: inherit;">En mi caso, es 390.72. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lanza zip-s en XenServer y desempaqueta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cambie el modo GPU e instale el controlador vGPU</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">cd</span> NVIDIA-gpumodeswitch-2020-01<font></font>
$ gpumodeswitch --listgpumodes<font></font>
$ gpumodeswitch --gpumode graphics<font></font>
$ <span class="hljs-built_in">cd</span> ../NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81<font></font>
$ yum install NVIDIA-vGPU-xenserver-7.4-390.72.x86_64.rpm<font></font>
$ reboot</code></pre><br>
<img src="https://habrastorage.org/webt/qg/0m/lx/qg0mlxigfdyfvxvfpoijuh-sisa.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montaje de almacenamiento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure un directorio compartido usando NFS en cualquier computadora en la red.</font></font><br>
<br>
<pre><code class="bash hljs">$ yum install epel-release<font></font>
$ yum install nfs-utils libnfs-utils<font></font>
$ systemctl <span class="hljs-built_in">enable</span> rpcbind<font></font>
$ systemctl <span class="hljs-built_in">enable</span> nfs-server<font></font>
$ systemctl <span class="hljs-built_in">enable</span> nfs-lock<font></font>
$ systemctl <span class="hljs-built_in">enable</span> nfs-idmap<font></font>
$ systemctl start rpcbind<font></font>
$ systemctl start nfs-server<font></font>
$ systemctl start nfs-lock<font></font>
$ systemctl start nfs-idmap<font></font>
$ firewall-cmd --permanent --zone=public --add-service=nfs<font></font>
$ firewall-cmd --permanent --zone=public --add-service=mountd<font></font>
$ firewall-cmd --permanent --zone=public --add-service=rpc-bind<font></font>
$ firewall-cmd --reload<font></font>
$ mkdir -p /nfs/store1<font></font>
$ chmod -R 777 /nfs/store1<font></font>
$ touch /nfs/store1/forcheck<font></font>
$ cat /etc/exports<font></font>
  ...<font></font>
  /nfs/store1 192.168.1.0/24(rw,async,crossmnt,no_root_squash,no_all_squash,no_subtree_check)<font></font>
$ systemctl restart nfs-server</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En XenCenter, seleccione XenServer y seleccione "Nuevo SR" en la pesta√±a "Almacenamiento". </font><font style="vertical-align: inherit;">Especifique el tipo de almacenamiento: NFS ISO. </font><font style="vertical-align: inherit;">La ruta debe apuntar al directorio compartido NFS.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagen maestra de Citrix basada en Centos 7</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo crear una m√°quina virtual con Centos 7? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo preparar una m√°quina virtual para crear un directorio?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La imagen de Centos 7</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con XenCenter, crearemos una m√°quina virtual con una GPU. </font><font style="vertical-align: inherit;">En la pesta√±a "VM", haga clic en "Nueva VM". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/fs/9g/etfs9g7biwgmswos8eazlinr_ba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionamos los par√°metros necesarios: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
plantilla VM - Otros medios de instalaci√≥n </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre - plantilla </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar desde la biblioteca ISO - Centos 7 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descarga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), seleccione del almacenamiento ISO NFS montado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫mero de vCPU - 4 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topolog√≠a - 1 socket con 4 n√∫cleos por socket </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memoria - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipo de GPU de </font><font style="vertical-align: inherit;">30 Gb </font><font style="vertical-align: inherit;">- GRID M60-4Q </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Use este disco virtual - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red de </font><font style="vertical-align: inherit;">80 Gb </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la creaci√≥n, la m√°quina virtual aparecer√° en la lista vertical a la izquierda. </font><font style="vertical-align: inherit;">Haga clic en √©l y vaya a la pesta√±a "Consola". </font><font style="vertical-align: inherit;">Esperaremos a que se cargue el instalador de Centos 7 y completaremos los pasos necesarios para instalar el sistema operativo con el shell GNOME.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preparaci√≥n de la imagen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me llev√≥ mucho tiempo preparar la imagen con Centos 7. </font><font style="vertical-align: inherit;">Esto dio como resultado un conjunto de scripts que facilita la configuraci√≥n inicial de Linux y le permite crear un cat√°logo de m√°quinas virtuales utilizando Citrix Machine Creation Services (MCS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El servidor DHCP instalado en ws-ad asign√≥ la direcci√≥n IP 192.168.1.129 a la nueva m√°quina virtual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los siguientes son los ajustes b√°sicos.</font></font><br>
<br>
<pre><code class="bash hljs">$ hostnamectl <span class="hljs-built_in">set</span>-hostname template<font></font>
$ yum install -y epel-release<font></font>
$ yum install -y lsb mc gcc<font></font>
$ firewall-cmd --permanent --zone=dmz --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=external --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=mdns<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=samba-client<font></font>
$ firewall-cmd --permanent --zone=home --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=samba-client<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=mdns<font></font>
$ firewall-cmd --permanent --zone=internal --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=public --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=public --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=work --remove-service=dhcpv6-client<font></font>
$ firewall-cmd --permanent --zone=work --remove-service=ssh<font></font>
$ firewall-cmd --permanent --zone=public --add-service=ssh<font></font>
$ firewall-cmd --complete-reload</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En XenCenter, en la pesta√±a "Consola", monte guest-tools.iso en la unidad de DVD de la m√°quina virtual e instale XenTools para Linux.</font></font><br>
<br>
<pre><code class="bash hljs">$ mount /dev/cdrom /mnt<font></font>
$ /mnt/Linux/install.sh<font></font>
$ reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al configurar XenServer, utilizamos el archivo NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81.zip descargado del sitio web de NVIDIA, que, adem√°s del controlador NVIDIA para XenServer, contiene el controlador NVIDIA que necesitamos para los clientes vGPU. </font><font style="vertical-align: inherit;">Descargue e inst√°lelo en la VM.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat /etc/default/grub<font></font>
  GRUB_TIMEOUT=5<font></font>
  GRUB_DISTRIBUTOR=<span class="hljs-string">"<span class="hljs-subst">$(sed 's, release .*$,,g' /etc/system-release)</span>"</span><font></font>
  GRUB_DEFAULT=saved<font></font>
  GRUB_DISABLE_SUBMENU=<span class="hljs-literal">true</span>
  GRUB_TERMINAL_OUTPUT=<span class="hljs-string">"console"</span>
  GRUB_CMDLINE_LINUX=<span class="hljs-string">"rhgb quiet modprobe.blacklist=nouveau"</span>
  GRUB_DISABLE_RECOVERY=<span class="hljs-string">"true"</span><font></font>
$ grub2-mkconfig -o /boot/grub2/grub.cfg<font></font>
$ wget http://vault.centos.org/7.6.1810/os/x86_64/Packages/kernel-devel-3.10.0-957.el7.x86_64.rpm<font></font>
$ yum install kernel-devel-3.10.0-957.el7.x86_64.rpm<font></font>
$ reboot<font></font>
$ init 3<font></font>
$ NVIDIA-GRID-XenServer-7.4-390.72-390.75-391.81/NVIDIA-Linux-x86_64-390.75-grid.run<font></font>
$ cat /etc/nvidia/gridd.conf<font></font>
  ServerAddress=192.168.1.111<font></font>
  ServerPort=7070<font></font>
  FeatureType=1<font></font>
$ reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue Linux Virtual Delivery Agent 1811 (VDA) para Centos 7. El enlace de descarga para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux VDA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° disponible despu√©s de la autorizaci√≥n en el sitio web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs">$ yum install -y LinuxVDA-1811.el7_x.rpm<font></font>
$ cat /var/xdl/mcs/mcs.conf<font></font>
  <span class="hljs-comment">#!/bin/bash</span><font></font>
  dns1=192.168.1.110<font></font>
  NTP_SERVER=some.ntp.ru<font></font>
  AD_INTEGRATION=winbind<font></font>
  SUPPORT_DDC_AS_CNAME=N<font></font>
  VDA_PORT=80<font></font>
  REGISTER_SERVICE=Y<font></font>
  ADD_FIREWALL_RULES=Y<font></font>
  HDX_3D_PRO=Y<font></font>
  VDI_MODE=Y<font></font>
  SITE_NAME=domain.ru<font></font>
  LDAP_LIST=ws-ad.domain.ru<font></font>
  SEARCH_BASE=DC=domain,DC=ru<font></font>
  START_SERVICE=Y<font></font>
$ /opt/Citrix/VDA/sbin/deploymcs.sh<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"exclude=kernel* xorg*"</span> &gt;&gt; /etc/yum.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Citrix Studio, cree el cat√°logo de m√°quinas y el grupo de entrega. </font><font style="vertical-align: inherit;">Antes de esto, debe instalar y configurar Windows Server.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor Windows con controlador de dominio</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo descargar e instalar Windows Server 2016? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo instalar componentes de Windows Server? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo configurar Active Directory, DHCP y DNS?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows server 2016</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como una m√°quina virtual (VM) con Windows Server no necesita una GPU, utilizaremos un servidor sin GPU como hipervisor. Por analog√≠a con la descripci√≥n anterior, instale otro XenServer para alojar m√°quinas virtuales del sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, cree una m√°quina virtual para Windows Server con Active Directory. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue Windows Server 2016 del sitio web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es mejor seguir el enlace con Internet Explorer. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/u3/br/9tu3brk0d6qqy6k6drtf7gd2sig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando XenCenter, crearemos una m√°quina virtual. En la pesta√±a "VM", haga clic en "Nueva VM". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/ea/yf/imeayf3rgvlrpaq4kqer_ofoei0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionamos los par√°metros necesarios: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
plantilla VM - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre de </font><font style="vertical-align: inherit;">Windows Server 2016 (64 bits) </font><font style="vertical-align: inherit;">- ws-ad.domain.ru </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar desde la biblioteca ISO - WindowsServer2016.iso, seleccionar del almacenamiento ISO NFS montado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫mero de vCPU: 4</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topolog√≠a: 1 z√≥calo con 4 n√∫cleos por z√≥calo </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memoria: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tipo GPU de </font><font style="vertical-align: inherit;">20 Gb </font><font style="vertical-align: inherit;">: ninguno </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilice este disco virtual: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
red de </font><font style="vertical-align: inherit;">100 Gb </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la creaci√≥n, la m√°quina virtual aparecer√° en la lista vertical a la izquierda. Haga clic en √©l y vaya a la pesta√±a "Consola". Espere a que se cargue el instalador de Windows Server y complete los pasos necesarios para instalar el sistema operativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar en XenTools VM. Haga clic con el bot√≥n derecho en VM, luego "Instalar Citrix VM Tools ...". Despu√©s de eso, se montar√° la imagen que necesita para ejecutar e instalar XenTools. Al final de la instalaci√≥n, ser√° necesario reiniciar la VM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure el adaptador de red: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
direcci√≥n IP - 192.168.1.110 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°scara - 255.255.255.0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puerta de enlace - 192.168.1.1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS1 - 8.8.8.8 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS2 - 8.8.4.4</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si Windows Server no est√° activado, act√≠velo. </font><font style="vertical-align: inherit;">La clave se puede tomar en el mismo lugar donde se descarg√≥ la imagen.</font></font><br>
<br>
<pre><code class="bash hljs">[PowerShell]$ slmgr -ipk xxxxx-xxxxx-xxxxx-xxxxx-xxxxx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configura el nombre de la computadora. </font><font style="vertical-align: inherit;">En mi caso, esto es ws-ad.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalaci√≥n de componentes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el administrador del servidor, seleccione "Agregar roles y caracter√≠sticas". </font><font style="vertical-align: inherit;">Tenga en cuenta la instalaci√≥n del servidor DHCP, el servidor DNC y los Servicios de dominio de Active Directory. </font><font style="vertical-align: inherit;">Marque la casilla "Recargar autom√°ticamente".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r2/5c/mk/r25cmkhjpon52zta-7ysbpffyig.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar Active Directoy</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de reiniciar la VM, haga clic en "Elevar este servidor al nivel del controlador de dominio" y agregue un nuevo bosque domain.ru.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n del servidor DHCP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el panel superior del administrador del servidor, haga clic en el signo de exclamaci√≥n para guardar los cambios al instalar el servidor DHCP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasemos a la configuraci√≥n del servidor DHCP. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wf/t6/pg/wft6pgjw4_lxdcvqa0rkphy4hhe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crear una nueva √°rea 192.168.1.120-130. </font><font style="vertical-align: inherit;">No cambiamos el resto. </font><font style="vertical-align: inherit;">Seleccione "Configurar la configuraci√≥n de DHCP ahora" e ingrese la direcci√≥n IP ws-ad (192.168.1.110) como puerta de enlace y DNS, que se especificar√°n en la configuraci√≥n de los adaptadores de red de las m√°quinas virtuales desde el directorio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n del servidor DNS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasemos a la configuraci√≥n del servidor DNS. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sg/pc/kc/sgpckcwrrfz4z-6jy5pf0ibbnbo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creemos una nueva zona de visualizaci√≥n directa: zona primaria, para todos los servidores DNS en el dominio domain.ru. </font><font style="vertical-align: inherit;">No cambies nada m√°s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree una nueva zona de b√∫squeda inversa seleccionando las mismas opciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En las propiedades del servidor DNS, en la pesta√±a "Avanzado", marque la casilla de verificaci√≥n "Desactivar recursividad".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear un usuario de prueba</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vayamos al "Centro administrativo de Active Directory" </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tp/4s/si/tp4ssidqmpefwnpa1excc5oexii.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la secci√≥n "Usuarios" a la derecha, haga clic en "Crear". </font><font style="vertical-align: inherit;">Ingrese un nombre, por ejemplo prueba, y haga clic en Aceptar a continuaci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b-/vd/pm/b-vdpmjw8osh9g0tor-ab0jl4sg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionaremos el usuario creado y seleccionaremos "Restablecer contrase√±a" en el men√∫ vertical a la derecha. </font><font style="vertical-align: inherit;">Deje la marca de verificaci√≥n "Requerir cambio de contrase√±a la pr√≥xima vez que inicie sesi√≥n en el sistema".</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor de Windows con Citrix Delivery Controller</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo descargar e instalar Windows Server 2016? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo descargar e instalar Citrix Delivery Controller? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo instalar y configurar Citrix License Manager? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo instalar y configurar NVIDIA License Manager?</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows server 2016</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como una m√°quina virtual (VM) con Windows Server no necesita una GPU, utilizaremos un servidor sin GPU como hipervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue Windows Server 2016 del sitio web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es mejor seguir el enlace con Internet Explorer. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/u3/br/9tu3brk0d6qqy6k6drtf7gd2sig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando XenCenter, crearemos una m√°quina virtual. En la pesta√±a "VM", haga clic en "Nueva VM". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/ea/yf/imeayf3rgvlrpaq4kqer_ofoei0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccione los par√°metros necesarios: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
plantilla VM - Windows Server 2016 (64 bits) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre - ws-dc </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar desde la biblioteca ISO - WindowsServer2016.iso, seleccione del almacenamiento ISO NFS montado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√∫mero de vCPU - 4 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Topolog√≠a - 1 socket con 4 n√∫cleos por socket </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memoria - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipo de GPU de </font><font style="vertical-align: inherit;">20 Gb </font><font style="vertical-align: inherit;">- ninguno </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Use este disco virtual - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red de </font><font style="vertical-align: inherit;">100 Gb</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la creaci√≥n, la m√°quina virtual aparecer√° en la lista vertical a la izquierda. Haga clic en √©l y vaya a la pesta√±a "Consola". Esperaremos a que se cargue el instalador de Windows Server y completaremos los pasos necesarios para instalar el sistema operativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalar en XenTools VM. Haga clic con el bot√≥n derecho en VM, luego "Instalar Citrix VM Tools ...". Despu√©s de eso, se montar√° la imagen que necesita para ejecutar e instalar XenTools. Al final de la instalaci√≥n, ser√° necesario reiniciar la VM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure el adaptador de red: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
direcci√≥n IP - 192.168.1.111 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°scara - 255.255.255.0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puerta de enlace - 192.168.1.1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS1 - 8.8.8.8 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNS2 - 8.8.4.4 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si Windows Server no est√° activado, lo activaremos. La clave se puede tomar en el mismo lugar donde se descarg√≥ la imagen.</font></font><br>
<br>
<pre><code class="bash hljs">[PowerShell]$ slmgr -ipk xxxxx-xxxxx-xxxxx-xxxxx-xxxxx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configura el nombre de la computadora. </font><font style="vertical-align: inherit;">En mi caso, esto es ws-dc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue la m√°quina virtual al dominio domen.ru, reinicie e inicie sesi√≥n en la cuenta de administrador de dominio DOMEN \ Administrador.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controlador de entrega Citrix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue Citrix Virtual Apps and Desktops 1811 en ws-dc.domain.com. </font><font style="vertical-align: inherit;">El enlace de descarga de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Virtual Apps and Desktops</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° disponible despu√©s de iniciar sesi√≥n en el sitio web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ik/wy/--/ikwy--onnx7q_qlpdy8jjrn9_qi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Montar la iso descargada y ejecutar. </font><font style="vertical-align: inherit;">Elija Citrix Virtual Apps and Desktops 7. </font><font style="vertical-align: inherit;">Luego, haga clic en "Comenzar". </font><font style="vertical-align: inherit;">Puede ser necesario reiniciar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/-l/x5/po-lx5nd34-fuw7gibvgajcg42w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi caso, es suficiente seleccionar los siguientes componentes para la instalaci√≥n: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Delivery Controller </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Studio </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
License Server </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StoreFront </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No cambie nada m√°s y haga clic en "Instalar". </font><font style="vertical-align: inherit;">Ser√° necesario reiniciar m√°s de una vez, despu√©s de lo cual la instalaci√≥n continuar√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tan pronto como se complete la instalaci√≥n, se iniciar√° Citrix Studio, el entorno de administraci√≥n de granjas de Citrix.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tp/4q/_x/tp4q_xeo9tdviobu4zaannj-vfk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n del sitio de Citrix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elija la primera secci√≥n de los tres: configuraci√≥n del sitio. </font><font style="vertical-align: inherit;">Al configurar, especifique el Nombre del sitio - dominio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la secci√≥n "Conexi√≥n", especificamos los datos para conectar el hipervisor con la GPU: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Direcci√≥n de conexi√≥n - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.1.100</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nombre de usuario - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrase√±a </font><font style="vertical-align: inherit;">ra√≠z </font><font style="vertical-align: inherit;">- su contrase√±a </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre de conexi√≥n - Administraci√≥n de la </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tienda </font><font style="vertical-align: inherit;">m60 </font><font style="vertical-align: inherit;">- Use el almacenamiento local para el hipervisor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre de estos recursos: m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionar redes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccione un tipo y grupo de GPU: GRID M60-4Q.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajuste de cat√°logos de m√°quinas Citrix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al configurar la segunda secci√≥n - Cat√°logos de m√°quinas, seleccione SO de sesi√≥n √∫nica (SO de escritorio). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagen maestra: seleccionaremos la imagen de la m√°quina virtual preparada y la versi√≥n de Citrix Virtual Apps and Desktops - 1811. Seleccionaremos el </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√∫mero de m√°quinas virtuales en el directorio, por ejemplo 4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indicaremos el esquema por el cual se nombrar√°n las m√°quinas virtuales, en mi caso este es el escritorio ##. </font><font style="vertical-align: inherit;">En este caso, se crear√°n 4 m√°quinas virtuales con los nombres desktop01-04. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre del cat√°logo de la m√°quina: m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descripci√≥n del cat√°logo de m√°quinas - m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de crear el Cat√°logo de m√°quinas con cuatro m√°quinas virtuales, se pueden encontrar en la lista vertical de XenCenter a la izquierda.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix Delivery Group</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tercera secci√≥n comienza seleccionando el n√∫mero de m√°quinas virtuales a las que se debe otorgar acceso. </font><font style="vertical-align: inherit;">Voy a indicar los cuatro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la secci√≥n "Escritorios", haga clic en "Agregar" para agregar el grupo de VM al que proporcionaremos acceso. </font><font style="vertical-align: inherit;">Nombre para mostrar: m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre del grupo de entrega: m60. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de configurar las tres secciones principales, la ventana principal de Citrix Studio se ver√° as√≠</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/s3/up/kbs3up5h_utcj8db_caznbwgo_i.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administrador de licencias de Citrix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue el archivo de licencia a trav√©s de su cuenta personal en el sitio web de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la lista vertical de la izquierda, seleccione Todas las herramientas de licencia (Legacy). Vaya a la pesta√±a "Activar y asignar licencias". Seleccione las licencias de Citrix VDA y haga clic en Continuar. Especifique el nombre de nuestro Delivery Controllera - ws-dc.domain.ru y el n√∫mero de licencias - 4. Haga clic en "Continuar". Descargue el archivo de licencia generado para ws-dc.domain.ru. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-f/6o/tg/-f6otgoimp8n0qh_xdcrfvf5hew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la lista vertical izquierda de Citrix Studio, seleccione la secci√≥n "Licencias". En la lista vertical derecha, haga clic en "License Management Console". En la ventana del navegador que se abre, ingrese los datos para la autorizaci√≥n del usuario de dominio DOMEN \ Administrador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Citrix Licensing Manager, vaya a la pesta√±a "Instalar licencia". Para agregar un archivo de licencia, seleccione "Usar archivo de licencia descargado".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bo/sy/rz/bosyrz3sj4ysmjs0vlwfhcp36ki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La instalaci√≥n de componentes Citrix implica el uso de varias m√°quinas virtuales, un componente, una VM. </font><font style="vertical-align: inherit;">En mi caso, todos los servicios del sistema Citrix operan dentro de la misma VM. </font><font style="vertical-align: inherit;">En este sentido, noto un error, cuya correcci√≥n fue especialmente dif√≠cil para m√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si despu√©s de reiniciar ws-dc hay problemas de diferente naturaleza, le recomiendo que primero verifique los servicios en ejecuci√≥n. </font><font style="vertical-align: inherit;">Aqu√≠ hay una lista de los servicios de Citrix que deber√≠an iniciarse autom√°ticamente despu√©s de un reinicio de VM:</font></font><br>
<br>
<pre><code class="plaintext hljs">SQL Server (SQLEXPRESS)<font></font>
Citrix Configuration Service<font></font>
Citrix Delegated Administration Service<font></font>
Citrix Analytics<font></font>
Citrix Broker Service<font></font>
Citrix Configuration Logging Service<font></font>
Citrix AD Identity Service<font></font>
Citrix Host Service<font></font>
Citrix App Library<font></font>
Citrix Machine Creation Service<font></font>
Citrix Monitor Service<font></font>
Citrix Storefront Service<font></font>
Citrix Trust Service<font></font>
Citrix Environment Test Service<font></font>
Citrix Orchestration Service<font></font>
FlexNet License Server -nvidia</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontr√© un problema que ocurre al instalar varios servicios de Citrix en una sola VM. </font><font style="vertical-align: inherit;">Despu√©s de reiniciar, no se inician todos los servicios. </font><font style="vertical-align: inherit;">Uno por uno para lanzar toda la cadena fue la pereza. </font><font style="vertical-align: inherit;">La soluci√≥n se busc√≥ en Google, as√≠ que la traigo aqu√≠: se deben cambiar dos par√°metros en el registro:</font></font><br>
<br>
<pre><code class="bash hljs">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control<font></font>
Name : ServicesPipeTimeout<font></font>
Value :240000<font></font>
<font></font>
Name : WaitToKillServiceTimeout<font></font>
Value : 20000</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administrador de licencias de nvidia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue NVIDIA License Manager para Windows a trav√©s de su cuenta personal en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nvid.nvidia.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es mejor pasar por Internet Explorer. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/au/hb/ih/auhbihphsv81hapm3cpgpxjbcmi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inst√°lelo en ws-dc. Para hacer esto, primero debe instalar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAVA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y agregar la variable de entorno JAVA_HOME. Despu√©s de eso, puede ejecutar setup.exe para instalar NVIDIA License Manager. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Creemos</font></a></font><br>
<br>
<img src="https://habrastorage.org/webt/nv/bd/wu/nvbdwuyf4xtx-fsqqpa2qwzunke.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
un servidor, generemos y descarguemos el archivo de licencia en su cuenta personal en el sitio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nvid.nvidia.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Transfieramos el archivo de licencia para ws-dc. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r-/ui/zb/r-uizbl706_p1w35j27fk0lv2wu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con un navegador, iniciamos sesi√≥n en la interfaz web del administrador de licencias de NVIDIA, disponible en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8080 / licserver y agregamos un archivo de licencia. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/ut/oc/viutocj16sitn-q_diao-oehmfa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las sesiones activas que usan vGPU se pueden ver en la secci√≥n Clientes con licencia.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acceso remoto al cat√°logo de m√°quinas Citrix</font></font></h2><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo instalar Citrix Receiver? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo conectarse a un escritorio virtual? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la computadora que funciona, abra un navegador, en mi caso es Chrome, y vaya a la direcci√≥n de la interfaz web de Citrix StoreWeb</font></font><br>
<br>
<pre><code class="bash hljs">http://192.168.1.111/Citrix/StoreWeb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si Citrix Recever a√∫n no est√° instalado, haga clic en "Descubrir Receiver". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/iv/nh/riivnhuygym-oivw0iaq0hghr_g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leemos atentamente el acuerdo de licencia, descargamos e instalamos Citrix Receiver. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r3/9b/cd/r39bcddyu-e57s9tpk6gj-o19vg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la instalaci√≥n, vuelva al navegador y haga clic en "Continuar". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/vw/dg/iavwdgrxnyukfifcb03b0gvbyf4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, se abre una notificaci√≥n en el navegador Chrome, haga clic en "Abrir la aplicaci√≥n Citrix Receiver Launcher" y luego "Detectar de nuevo" o "Ya instalado". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7o/hs/bx/7ohsbxmdogzv7tvdwji5xwa1xam.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la primera conexi√≥n, utilizaremos los datos de la prueba de prueba del usuario. </font><font style="vertical-align: inherit;">Cambie la contrase√±a temporal a una permanente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/as/9k/l0/as9kl0vlibg4fmhts2rjgrsupvw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de la autorizaci√≥n, vaya a la pesta√±a "Aplicaciones" y seleccione el </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j9/fb/md/j9fbmdbevvo42-2su76ifsaisnk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
directorio </font><font style="vertical-align: inherit;">"M60". </font><font style="vertical-align: inherit;">Descargue el archivo propuesto con la extensi√≥n .ica. </font><font style="vertical-align: inherit;">Despu√©s de hacer doble clic en √©l, se abre una ventana en Desktop Veiwer con el escritorio Centos 7</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/70/3p/n2703pzygelapwl6ixj7n5wcgfm.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497808/index.html">3D h√°galo usted mismo. Parte 2: es tridimensional</a></li>
<li><a href="../es497810/index.html">PVS Studio.VS. An√°lisis estad√≠stico de GCC 10. Mini-test independiente</a></li>
<li><a href="../es497812/index.html">Los cient√≠ficos del MIT est√°n desarrollando un dispositivo que permitir√° controlar al menos parcialmente sus sue√±os.</a></li>
<li><a href="../es497814/index.html">Cinco etapas para aceptar lo inevitable, o c√≥mo desarrollamos un programa para la creaci√≥n de perfiles automatizada</a></li>
<li><a href="../es497816/index.html">Russian Railways me env√≠a los boletos de otra persona</a></li>
<li><a href="../es497820/index.html">Regularizaci√≥n estad√≠stica de problemas inversos incorrectos para ellos. Turchin (parte 1)</a></li>
<li><a href="../es497822/index.html">Hombre en una botella</a></li>
<li><a href="../es497826/index.html">C√≥mo capturar r√°pidamente el mundo o administrar una red de computadoras con Windows usando OPSI</a></li>
<li><a href="../es497828/index.html">2 en 1: cifrado con protecci√≥n de seguridad</a></li>
<li><a href="../es497830/index.html">OWASP Mosc√∫ 2020/1 Grabaciones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>