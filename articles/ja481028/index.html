<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🌾 🌞 🈷️ OpenVPNを使用して産業用PLCへのリモート接続を整理するためのガイド 👵🏾 🐁 ◻️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、KEENETIC 4Gインターネットセンターに基づく予算ソリューションを通じて、産業用プログラマブルロジックコントローラー（以降、PLC）へのリモートアクセスを組織化することで得られた経験についてお話します。
 
 この記事は、リモートアクセスの構成について尋ねたが、どこから始めればよ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>OpenVPNを使用して産業用PLCへのリモート接続を整理するためのガイド</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481028/"><img src="https://habrastorage.org/webt/3i/sk/nc/3isknctx60njaa-migvm12k3hli.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、KEENETIC 4Gインターネットセンターに基づく予算ソリューションを通じて、産業用プログラマブルロジックコントローラー（以降、PLC）へのリモートアクセスを組織化することで得られた経験についてお話します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、リモートアクセスの構成について尋ねたが、どこから始めればよいかわからなかったプロセス制御システムの分野の専門家にとって特に興味深いでしょう。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それでは始めましょう！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、最も一般的なオプションを検討します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLCプログラミング用にTIAポータルパッケージがインストールされたOpenVPNサーバーになるローカルコンピューター。</font><font style="vertical-align: inherit;">（LAN 192.168.1.0）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部のホワイトIPアドレス（217.196.58.128など）を持つエンタープライズルーター。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モバイル通信に接続されたOpenVPNクライアントがインストールされたKEENETIC 4Gインターネットセンター。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラマブルロジックコントローラーSIMATIC S7-1500（LAN 192.168.112.0）。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenVPNサーバーが機能するためには、片側に外部のホワイトIPアドレスが存在することが前提条件です（OpenVPNサーバーは、ホワイトIPアドレスの側に配置する必要があります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEENETICインターネットセンターとワークステーションの間にVPN接続を確立するには、次のソフトウェアをインストールする必要があります。</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVPN-安全な仮想プライベートネットワーク、サーバーへのリモート接続を作成するためのプログラム</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XCA-グラフィカルインターフェイスで証明書を簡単に作成するためのプログラム</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notepad ++-テキストエディタ（オプション）</font></font></a></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WindowsへのOpenVPNパッケージのインストール。</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EasyRSAコンポーネントをインストールします（組み込みツール（オプション）を使用して証明書を作成するため）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/7g/xa/bf7gxa6zvllo29oail2qstdg-co.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドライバーのインストールに関するメッセージが表示されたら、[インストール]をクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r2/s5/rh/r2s5rh8r8ornoxklsgxhfvaprg4.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複数の仮想アダプターをインストールする必要がある場合、または仮想アダプターが正しくインストールされていない場合は、以下のアドレスに移動して実行してください「Addtab.bat」スクリプト：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C：\ Program Files \ TAP-Windows \ bin</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/m0/dp/gem0dp_mchsh0vkis-bmlhzqboy.jpeg" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X.509証明書の作成</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. XCAをインストールする</font></font></h4><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XCA-グラフィカルインターフェイスで証明書を簡単に作成するためのプログラム</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.データベースを作成する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「ファイル」-&gt;「新規データベース」の場合、プログラムはパスワードを要求するか、パスワードを入力するか、フィールドを空白のままにして「OK」をクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/fl/3s/erfl3ss-uhrge4kzooky7r0998i.jpeg" alt="画像"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.証明機関（CA）の証明書を作成します</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、[証明書]タブに切り替えて[新しい証明書]ボタンをクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/dg/ex/azdgexomfppvs1tqbl9wqpro2ki.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、[件名]タブに切り替えて、必要なフィールドに入力します（赤で強調表示されているものは一意の名前を持つ必要があります）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fz/ko/lt/fzkoltel9co6savlmnvuyvgdcdc.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[新しいキーを生成]をクリックし、[作成]ボタンをクリックしてアクションを確認します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/xz/ce/jfxzceulmlnzxbwovjjm19d9ucw.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「拡張」タブに切り替えて、証明書のタイプ「認証局」を選択し、証明書の有効期間を構成します（CA証明書は、後で作成されるコンピューター証明書よりも有効期間が長くなければなりません。）</font></font><br>
<br>
<img src="https://habrastorage.org/webt/88/2n/zu/882nzumclm0gokjy8sfioql74jg.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「OK」をクリックすると、構成を続行できます。コンピュータ証明書。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.コンピューター証明書テンプレートの作成</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マシン証明書の作成を簡略化するために、事前に用意されたテンプレートを使用します。</font><font style="vertical-align: inherit;">「テンプレート」タブに切り替え、「新しいテンプレート」ボタンをクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cd/qh/xj/cdqhxjo7h1jhlf_ohhdm5fjgw2s.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「空のテンプレート」を選択し、テンプレートの編集に進みます。山かっこ内の名前は将来一意になるはずです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1j/0r/xm/1j0rxmktxgsn-2uuqbqqbkbx0ek.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[拡張]タブに移動し、タイプを[最終件名]に設定し、コンピュータ証明書の有効期間を設定します（証明書センターの証明書にすぎないはずです）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/ft/ms/pmftmsgb6zuerbm0jx9aekbrbxm.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[OK]をクリックしてテンプレートを作成します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このテンプレートは、認証センターによって署名されたマシン証明書を作成するための基本テンプレートとして使用できます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.テンプレートを使用してコンピューター証明書を作成する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[証明書]タブに切り替えて[新しい証明書]ボタンをクリックし、[署名にこの証明書を使用]オプションを選択して、テンプレートとして&lt;My_Machine&gt;テンプレートを選択し、[すべて適用]ボタンをクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r6/lj/i8/r6lji8nwfwn-0bjq8isxvtqt2nq.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、[件名]タブに移動し、「My_Server」などの一意の名前を入力して、キーを生成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xi/9z/jk/xi9zjkd6fblpi8zntftye3eqfco.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、サーバー証明書を作成しました。</font><font style="vertical-align: inherit;">クライアント証明書（My_Client）についても同じ手順を実行します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/xk/6c/laxk6cujtstogpz5cqwr0z5nmfc.jpeg" alt="画像"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.マシン証明書とキーのエクスポート</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenVPNクライアント（KEENETIC）とサーバー（Windows PC）の構成ファイルを作成するには、認証局の証明書、サーバー証明書、クライアント証明書、サーバー秘密鍵、クライアント秘密鍵をエクスポートする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、「証明書」タブに移動し、My_CA証明機関の証明書を選択し、「エクスポート」ボタンをクリックして、デスクトップにあるMy_Keysなどの以前に作成したフォルダーにアップロードします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kf/fv/_b/kffv_bjghn_sirpt851efwjnmag.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアント証明書（My_Client）とサーバー証明書（My_Server）についても同様です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[秘密キー]タブに切り替え、My_Clientキーを選択し、[エクスポート]をクリックして、フォルダーにアップロードします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t8/ns/ms/t8nsmsnb0szgsaenlfzmaxcrffi.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーキーについても同じ手順を実行します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Diffie-Hellmanパラメータを作成する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーパラメータを構成するには、Diffie-Hellman </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータ</font><font style="vertical-align: inherit;">も必要</font><font style="vertical-align: inherit;">です。パラメータを作成するには、[詳細設定]タブをクリックし、[Diffie-Hellmanパラメータの生成]を選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ij/54/gv/ij54gvdkpwzzlpi1edtkrk3udbu.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、パラメーターの長さ（2048など）を選択します。次に、パラメーターをキーを含むフォルダーにアップロードします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fp/pu/ax/fppuaxshiqd8gnsl-g1sueq_pye.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、次のファイルがフォルダーにあるはずです。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">認証局証明書My_CA.crt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアント証明書My_Client.crt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー証明書My_Server.crt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアント秘密鍵My_Client.pem</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーMy_Server.pemの秘密鍵</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diphia-Hellmanパラメータdh2048.pem</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/k4/k1/ng/k4k1ng5oqqcd_1fgzp_ub3frntg.jpeg" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントおよびサーバー構成ファイルの作成</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜなら </font><font style="vertical-align: inherit;">S7-1500産業用通信プロトコルはProfinetです。PLCへの接続を確立するには、L2接続（この場合はTAPインターフェイス）を構成する必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVPNサーバーの設定</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバー構成ファイルを作成するには、OpenVPN構成ファイルのあるフォルダー[C：\ Program Files \ OpenVPN \ config]に移動し、拡張子.ovpnのTAP_Serverファイルを作成します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l6/se/y8/l6sey8_ftv5zvrjj8lm7ccxu_ew.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。TAP_Server.ovpnファイルをテキストファイルビューアー（メモ帳++など）で開き、次のテキストをコピーします。</font></font><br>
<br>
<pre><code class="plaintext hljs">#    L2 <font></font>
dev tap<font></font>
# ,   Windows <font></font>
#    TAP-Windows <font></font>
dev-node MyTap<font></font>
#       TAP <font></font>
server-bridge<font></font>
#       IP<font></font>
proto udp4<font></font>
#   ,     OpenVPN<font></font>
port 50501<font></font>
#   10       120  <font></font>
#     ,  .<font></font>
keepalive 10 120<font></font>
#   <font></font>
cipher AES-256-CBC<font></font>
#   <font></font>
verb 3<font></font>
#      <font></font>
&lt;ca&gt;<font></font>
<font></font>
&lt;/ca&gt;<font></font>
#     <font></font>
&lt;cert&gt;<font></font>
<font></font>
&lt;/cert&gt;<font></font>
#     <font></font>
&lt;key&gt;<font></font>
<font></font>
&lt;/key&gt;<font></font>
#     () Diffie-Hellman (-).<font></font>
&lt;dh&gt;<font></font>
<font></font>
&lt;/dh&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、テキストファイルビューアMy_CA.crt、My_Server.crt、My_Server.pem、dh2048.pemを開き、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My_CA.crtから&lt;ca&gt; &lt;/ ca&gt; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My_Server.crtから&lt;cert&gt; &lt;/ cert&gt; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My_Serverに</font><font style="vertical-align: inherit;">テキストをコピーします</font><font style="vertical-align: inherit;">。 &lt;key&gt; &lt;/ key&gt;のpem </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;dh&gt; &lt;/ dh&gt;のdh2048.pem </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x5/tk/ow/x5tkowkf3whirnr8gfan-a8cola.jpeg" alt="画像"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果として、次のようになります。</font></font><br>
<pre><code class="plaintext hljs">dev tap<font></font>
dev-node MyTap<font></font>
server-bridge<font></font>
proto udp4<font></font>
port 50501<font></font>
keepalive 10 120<font></font>
cipher AES-256-CBC<font></font>
verb 3<font></font>
<font></font>
&lt;ca&gt;<font></font>
-----BEGIN CERTIFICATE-----<font></font>
MIIDqjCCApKgAwIBAgIIJJ8tf67Csf4wDQYJKoZIhvcNAQELBQAwgYsxCzAJBgNV<font></font>
BAYTAlJVMRQwEgYDVQQIEwtLUkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFS<font></font>
U0sxDjAMBgNVBAoTBU15T1JHMQ4wDAYDVQQLEwVNeU9SRzEOMAwGA1UEAwwFTXlf<font></font>
Q0ExIDAeBgkqhkiG9w0BCQEWEW15ZW1haWxAbXlob3N0Lnh4MB4XDTE5MTIxMzAw<font></font>
MDAwMFoXDTQ5MTIxMjIzNTk1OVowgYsxCzAJBgNVBAYTAlJVMRQwEgYDVQQIEwtL<font></font>
UkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFSU0sxDjAMBgNVBAoTBU15T1JH<font></font>
MQ4wDAYDVQQLEwVNeU9SRzEOMAwGA1UEAwwFTXlfQ0ExIDAeBgkqhkiG9w0BCQEW<font></font>
EW15ZW1haWxAbXlob3N0Lnh4MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC<font></font>
AQEA3dJoAVl7foXZMavZIr9RTB59h+El26OYll7KMBHritf+x8DEVjcg86uyDSf0<font></font>
yzLtAR+8J013W3SRDVpl3gqdk3t1qb7Paz1OUrV2Hu3N5Ws1s4elpENTQAe1HFZS<font></font>
u0NRhXBCxTTyToNdb1pKcIJziVNLXdTL+pud0T8FNs6q37t14XFkfDOw85m7y3py<font></font>
vU8+ucmQEd5vOKPjcY1jklVZkQJKcGTI77x/R2k6HK7ryul5uIepi/RrVrgTNe5W<font></font>
rYWuk6wlmmFLvgdzoVaBJO8edo89M7oJIQFMNN9x3cpbths6/3ZummBktfgVa7xy<font></font>
3fs//M5v1pjnYeJ5wd5tiCXkpQIDAQABoxAwDjAMBgNVHRMEBTADAQH/MA0GCSqG<font></font>
SIb3DQEBCwUAA4IBAQDbNhPy3IftjPVNyaUH/5AW6R0Fjqoct/55ZMDrdWlLY1mo<font></font>
iTTxhFPv1DbilUE/nr+SwGvZV2MQs4G1hi9PgGqY5a+lJCSios8BJ7zlrt/LLQQ/<font></font>
st0r2wzpCYROxoi+zu9YNGZJPP9GI3KdcVye9Rt3vbLbL8LQ8kKKwn3Ju5i1SUMy<font></font>
gzvGTNUPtqOKVJid39IIdva3iMUBspfMGv2EcaGaRWekW9Pni/gBS2eHkBH1/X6n<font></font>
KiopjtZw7A4RPHzC58jp+ypT/X63tPwf5+kWsMDeLG1XTKnLoPeAVNtszMhGsgzE<font></font>
DoZUuL4pb8XbpcnrPlgp0WSkrf1RJrJGuArvUDLu<font></font>
-----END CERTIFICATE-----<font></font>
<font></font>
&lt;/ca&gt;<font></font>
<font></font>
&lt;cert&gt;<font></font>
-----BEGIN CERTIFICATE-----<font></font>
MIIDyzCCArOgAwIBAgIIINPrUqBedY8wDQYJKoZIhvcNAQELBQAwgYsxCzAJBgNV<font></font>
BAYTAlJVMRQwEgYDVQQIEwtLUkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFS<font></font>
U0sxDjAMBgNVBAoTBU15T1JHMQ4wDAYDVQQLEwVNeU9SRzEOMAwGA1UEAwwFTXlf<font></font>
Q0ExIDAeBgkqhkiG9w0BCQEWEW15ZW1haWxAbXlob3N0Lnh4MB4XDTE5MTIxMzAw<font></font>
MDAwMFoXDTQ5MTIxMjIzNTk1OVowgY8xCzAJBgNVBAYTAlJVMRQwEgYDVQQIEwtL<font></font>
UkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFSU0sxDjAMBgNVBAoTBU15T1JH<font></font>
MQ4wDAYDVQQLEwVNeU9SRzESMBAGA1UEAwwJTXlfU2VydmVyMSAwHgYJKoZIhvcN<font></font>
AQkBFhFNeUVtYWlsQE15SG9zdC54eDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC<font></font>
AQoCggEBAJhJYVC8WJneQTTO9p7NJvS803W1lq/8Z78Vx8J5jejVhXXZa0NYfXX8<font></font>
iiXUr26vdhXN5htSNgktz9Tr5zUHwKhzpq+yYICPS44AmzMJByPBhjHUq7/HjnOA<font></font>
e78k80OTzqL5XH8olrQc7690K1GW3b0PduH+bYykDGijQ8vlkwBKQhgxeo7zkTrm<font></font>
VWsgmFJEbrdGoZPnwyHrStMHM0f6UMkEWqooughphaxtJWzS4GJES09z3VSN/3CV<font></font>
FuV2Jn3UGyoEHKrZUa/kFgRx9j9AqRx3//WFusm2KPUim+IA4SLoXP5M6pZXaxvA<font></font>
Z4y5b2xIc/OFFX5DfaCSpAMFwzZFYXkCAwEAAaMtMCswCQYDVR0TBAIwADAeBglg<font></font>
hkgBhvhCAQ0EERYPeGNhIGNlcnRpZmljYXRlMA0GCSqGSIb3DQEBCwUAA4IBAQAZ<font></font>
EXHnqu9Ilz6+w4SB/wfl5HG3UyS2n8oNpTHbFkX1Sn2+2FFuSCZlxhQYyhZKUjRq<font></font>
NsbWMMcwRDST9V6cPw6iaTPfz2G8zaBFjsemnyYD6YttNmdqXgv5wiik3btP2Jk2<font></font>
3msmg8MlA/EgeZWSFe0ee4yE+L145JgtEQeg0xb7t8J9OOt3W1GVnoX1hQa2GePH<font></font>
PlKqc5ooPAuzIW4kWzxQefqcV5j1Rof98/dQJwJwCatRYgFciOZe26rcsu0R1iKF<font></font>
yS6NB+HwJxZY1ExPcSDmiVu5cyeasSLp1bxcqb9V7a3e9YxNZ8AVmjh/NfOcb2a/<font></font>
/Mx8QxPEP7g+B6tWfF/Q<font></font>
-----END CERTIFICATE-----<font></font>
<font></font>
&lt;/cert&gt;<font></font>
<font></font>
&lt;key&gt;<font></font>
-----BEGIN RSA PRIVATE KEY-----<font></font>
MIIEpAIBAAKCAQEAmElhULxYmd5BNM72ns0m9LzTdbWWr/xnvxXHwnmN6NWFddlr<font></font>
Q1h9dfyKJdSvbq92Fc3mG1I2CS3P1OvnNQfAqHOmr7JggI9LjgCbMwkHI8GGMdSr<font></font>
v8eOc4B7vyTzQ5POovlcfyiWtBzvr3QrUZbdvQ924f5tjKQMaKNDy+WTAEpCGDF6<font></font>
jvOROuZVayCYUkRut0ahk+fDIetK0wczR/pQyQRaqii6CGmFrG0lbNLgYkRLT3Pd<font></font>
VI3/cJUW5XYmfdQbKgQcqtlRr+QWBHH2P0CpHHf/9YW6ybYo9SKb4gDhIuhc/kzq<font></font>
lldrG8BnjLlvbEhz84UVfkN9oJKkAwXDNkVheQIDAQABAoIBAGZFmapr4yDqx2Xc<font></font>
vHmnk0r3aRf7LMjhvRbyXKZ5ldlRVIDx0/x1eER9ppWDgZHXGnnIPooIqyt87b+z<font></font>
8iGGJFe826vRIsgT9AzY0WHz5SyZMjNS/Ukdjsh4+CJFgW3X3QVMbFclfhhV+o4d<font></font>
eV4g8KegtBlQEmhKX98CDmznr9KYAxBtiMODkG3gi523+8qgOH5Nqgr+0CGxwcJU<font></font>
4fDHadjbSj7+12ZrY3TVZm451fEzgh2nPAseyAoNYe0CM9hExmq4jeNxjZFQHNBv<font></font>
refghZaPmyuRWSOfzNbEwRsLCZeLUHDdrNvsPRnFvmLcFhtFKwctngvkGK5lPs1w<font></font>
dCgs8pUCgYEAyJOsi+ZTAWTjJC1pCr3FRJEjoqfqZGw/OLCKV7PBF8Yf2DIB+LDD<font></font>
gfgoMi39sK/HkaH1H6CqD1Gter8WE67gAURvo5UjK4vFAGhmQSbiwhRUCRKRljwT<font></font>
zB4k649XpD8fiOzd9S12uKyr8EvvDbOz9x1XcxQELcqURIunTuDH4CsCgYEAwl3F<font></font>
twSkSOPYG2AeLnuwf8sYtFbcvSYL/8cGovOuZ0GlSLpHO2k1qhUzl6HrpIhEyVom<font></font>
IQRJW9S5lB7z5lU/CVcbGmYLwu4y5/tl4MeG8NOEj1o8FR9RzUw92dSSKoMfCMad<font></font>
lz/RmOrBnX4pwqICs7r7h7VsnOsr/AYn5H04zusCgYEAwHHv+8rhmVTTGsL3Jfcu<font></font>
brtTFZ1Gp1O01Q+NrNgrTEQsCaLxgUsYSntvFbZK0lvVf0WFivL8N/aGHF97Lyd6<font></font>
hbzD4JAXTpCsU9fXRGuq5cvbVVkblqnN1OqXQewmitCF0TpzO+qDHm2OCuDQXLUu<font></font>
1sqwPRnXaJgV6i6UOHozTEECgYEAgmguFqxrmWgdf8iOl3tvoV5f1eeNtO7JEDS1<font></font>
1DEQ68CUp+YrksX1NoeBFRSTqNGw7TOp728T1SQ12xalZ/38DEVALwcWjxQIXbND<font></font>
2HumowAXqaLOOxHHbangub0w0IsnEFlKNMeh1ipz+zpBxI+0pmgnCReFpwb2fOKY<font></font>
c2o86j8CgYAWTWn/Y1/bNgtStzya6fbxpc4Mc2nCZu6bTQpAgA44r+nRJuHpVm0T<font></font>
cGDKj4NZ8H4wqMmk58GoOreAVsX4qXeN9QkdfAR5dA8eWVz42faC328W3G4VA5cc<font></font>
GvTqDMzq0j3bz+4csHMn3BHatHymjgsg0sgc8FshuD6dQk0NNruk9A==<font></font>
-----END RSA PRIVATE KEY-----<font></font>
<font></font>
&lt;/key&gt;<font></font>
<font></font>
&lt;dh&gt;<font></font>
-----BEGIN DH PARAMETERS-----<font></font>
MIIBCAKCAQEAlpVUnvCTJ1XF9mnwhf+P+QZhVWsNyRaqEgLuO2a/fGUqPESU9KRo<font></font>
bDa489awzJs6j/JCKh1xR5H5JLE+Ho6XdgIXH9LTr03BV3PsPQiA28ZiluekBGGY<font></font>
ps7dTLr0Ex4V6Ae3+E+Z7lM/Yhsa4w6fl+GNRkastD42Nx4g4iN+cIerLMFCRPl1<font></font>
P7Go36VbEtO/aNX/zNExmcDsYSqiLkBeGrNxXen2Loqex5AlwE9WOliUbak6Ra/W<font></font>
vf21Wi03TvBBfjEDKtM/Bsyo8Ar2lgBYIrANvylU/0Gg8OyRWqcIoQjwPyjavAHd<font></font>
v14V1igYDa1xP9WQ262DMHfHLhqwjOW2GwIBAg==<font></font>
-----END DH PARAMETERS-----<font></font>
<font></font>
&lt;/dh&gt;<font></font>
</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVPNクライアント構成の構成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアント構成ファイルを作成するには、OpenVPN構成ファイルのあるフォルダー[C：\ Program Files \ OpenVPN \ config]に移動し、拡張子.ovpn </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
のTAP_Clientファイルを作成します。テキストファイルビューアー（メモ帳++など）でTAP_Server.ovpnファイルを開き、次のテキストをコピーします。</font></font><br>
<br>
<pre><code class="plaintext hljs"># ,     <font></font>
client<font></font>
#    L2 <font></font>
dev tap0<font></font>
#       IP<font></font>
proto udp4<font></font>
#   ,     OpenVPN<font></font>
port 50501<font></font>
#  ,     <font></font>
#    IP  DNS.<font></font>
remote 217.196.58.128<font></font>
#   <font></font>
cipher AES-256-CBC<font></font>
#   <font></font>
verb 3<font></font>
#      <font></font>
&lt;ca&gt;<font></font>
<font></font>
&lt;/ca&gt;<font></font>
#     <font></font>
&lt;cert&gt;<font></font>
<font></font>
&lt;/cert&gt;<font></font>
#      <font></font>
&lt;key&gt;<font></font>
<font></font>
&lt;/key&gt;<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、テキストファイルビューアMy_CA.crt、My_Client.crt、My_Client.pemを開き、My_CA.crt </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
から&lt;ca&gt; &lt;/ ca&gt; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My_Client.crtに&lt;cert&gt; &lt;/ cert&gt; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My_Client.pemに&lt;key &gt; &lt;/ key&gt; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lk/pr/yy/lkpryyecjvigt-pko17zttdl9pu.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果、次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">client<font></font>
dev tap0<font></font>
proto udp4<font></font>
port 50501<font></font>
remote 217.196.58.128<font></font>
cipher AES-256-CBC<font></font>
verb 3<font></font>
<font></font>
&lt;ca&gt;<font></font>
-----BEGIN CERTIFICATE-----<font></font>
MIIDqjCCApKgAwIBAgIIJJ8tf67Csf4wDQYJKoZIhvcNAQELBQAwgYsxCzAJBgNV<font></font>
BAYTAlJVMRQwEgYDVQQIEwtLUkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFS<font></font>
U0sxDjAMBgNVBAoTBU15T1JHMQ4wDAYDVQQLEwVNeU9SRzEOMAwGA1UEAwwFTXlf<font></font>
Q0ExIDAeBgkqhkiG9w0BCQEWEW15ZW1haWxAbXlob3N0Lnh4MB4XDTE5MTIxMzAw<font></font>
MDAwMFoXDTQ5MTIxMjIzNTk1OVowgYsxCzAJBgNVBAYTAlJVMRQwEgYDVQQIEwtL<font></font>
UkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFSU0sxDjAMBgNVBAoTBU15T1JH<font></font>
MQ4wDAYDVQQLEwVNeU9SRzEOMAwGA1UEAwwFTXlfQ0ExIDAeBgkqhkiG9w0BCQEW<font></font>
EW15ZW1haWxAbXlob3N0Lnh4MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC<font></font>
AQEA3dJoAVl7foXZMavZIr9RTB59h+El26OYll7KMBHritf+x8DEVjcg86uyDSf0<font></font>
yzLtAR+8J013W3SRDVpl3gqdk3t1qb7Paz1OUrV2Hu3N5Ws1s4elpENTQAe1HFZS<font></font>
u0NRhXBCxTTyToNdb1pKcIJziVNLXdTL+pud0T8FNs6q37t14XFkfDOw85m7y3py<font></font>
vU8+ucmQEd5vOKPjcY1jklVZkQJKcGTI77x/R2k6HK7ryul5uIepi/RrVrgTNe5W<font></font>
rYWuk6wlmmFLvgdzoVaBJO8edo89M7oJIQFMNN9x3cpbths6/3ZummBktfgVa7xy<font></font>
3fs//M5v1pjnYeJ5wd5tiCXkpQIDAQABoxAwDjAMBgNVHRMEBTADAQH/MA0GCSqG<font></font>
SIb3DQEBCwUAA4IBAQDbNhPy3IftjPVNyaUH/5AW6R0Fjqoct/55ZMDrdWlLY1mo<font></font>
iTTxhFPv1DbilUE/nr+SwGvZV2MQs4G1hi9PgGqY5a+lJCSios8BJ7zlrt/LLQQ/<font></font>
st0r2wzpCYROxoi+zu9YNGZJPP9GI3KdcVye9Rt3vbLbL8LQ8kKKwn3Ju5i1SUMy<font></font>
gzvGTNUPtqOKVJid39IIdva3iMUBspfMGv2EcaGaRWekW9Pni/gBS2eHkBH1/X6n<font></font>
KiopjtZw7A4RPHzC58jp+ypT/X63tPwf5+kWsMDeLG1XTKnLoPeAVNtszMhGsgzE<font></font>
DoZUuL4pb8XbpcnrPlgp0WSkrf1RJrJGuArvUDLu<font></font>
-----END CERTIFICATE-----<font></font>
<font></font>
&lt;/ca&gt;<font></font>
<font></font>
&lt;cert&gt;<font></font>
-----BEGIN CERTIFICATE-----<font></font>
MIIDyzCCArOgAwIBAgIII6a7Y3h+sS0wDQYJKoZIhvcNAQELBQAwgYsxCzAJBgNV<font></font>
BAYTAlJVMRQwEgYDVQQIEwtLUkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFS<font></font>
U0sxDjAMBgNVBAoTBU15T1JHMQ4wDAYDVQQLEwVNeU9SRzEOMAwGA1UEAwwFTXlf<font></font>
Q0ExIDAeBgkqhkiG9w0BCQEWEW15ZW1haWxAbXlob3N0Lnh4MB4XDTE5MTIxMzAw<font></font>
MDAwMFoXDTQ5MTIxMjIzNTk1OVowgY8xCzAJBgNVBAYTAlJVMRQwEgYDVQQIEwtL<font></font>
UkFTTk9ZQVJTSzEUMBIGA1UEBxMLS1JBU05PWUFSU0sxDjAMBgNVBAoTBU15T1JH<font></font>
MQ4wDAYDVQQLEwVNeU9SRzESMBAGA1UEAwwJTXlfQ2xpZW50MSAwHgYJKoZIhvcN<font></font>
AQkBFhFNeUVtYWlsQE15SG9zdC54eDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC<font></font>
AQoCggEBAM1xGkTl0fTge3jacEgSkrMoN3wgIr94Y1uD574XqxKYdH11hEdldTLa<font></font>
gx8MGLIYaXN/HQTEYuhxpk+EX0Mqns9TazGouvE2/poP4KiO8iSHVO9PaaKO0OKq<font></font>
Y7ctt4TVBdnD2UjiHCq5DfQ/T6UGv4bOR61RCqymyBnnVQ/KyR0DX4/U+jLx9wxS<font></font>
d5OLD0SSqOjdLTnI1gBpEphRuPo6705I+eM7cATyoL17GMgAQ1W4zLzq3ojNPCo3<font></font>
U/P0tPvQi6hHoJv5Rj8EfgK7eID7kUqvCrG4Vvg+iKjC7m1ABweOjBXVpk7UsKin<font></font>
97I/Gz0PGOwnsh3a3J/WNZu1DuPfw9UCAwEAAaMtMCswCQYDVR0TBAIwADAeBglg<font></font>
hkgBhvhCAQ0EERYPeGNhIGNlcnRpZmljYXRlMA0GCSqGSIb3DQEBCwUAA4IBAQDd<font></font>
v4iq13jCqRI6yeFlB8ouMVtuVpI+p7w6KBYyc+phbDuzqI4iFkMyhj0H+cx/760M<font></font>
ziQMuLR/pRrSPKPI03JgFI5dFh1txnNFkelQutZ+6qe4c1y9OhKhwg3n6jS2PevG<font></font>
Tvlrl1utoiNOVXhcvH0CxuD5AJEyQa9SH/vO3TRQC9g5zbfULTgOhpUmaVPYBkX/<font></font>
tBnvnKFdmsLqwgrKvdqfJF3WqJuQSdHtyp4MVZN1d/T+HoQ5YfN5nGXpLLgLdGaq<font></font>
KvtAtFACkltO0A7R2WeLw1WNiXGHNxd3OFuVedapub1zXCSiYZNC+8MX7PkQnV9e<font></font>
p1JB/AWXg/Z7uQSua3+c<font></font>
-----END CERTIFICATE-----<font></font>
<font></font>
&lt;/cert&gt;<font></font>
<font></font>
&lt;key&gt;<font></font>
-----BEGIN RSA PRIVATE KEY-----<font></font>
MIIEpAIBAAKCAQEAzXEaROXR9OB7eNpwSBKSsyg3fCAiv3hjW4PnvherEph0fXWE<font></font>
R2V1MtqDHwwYshhpc38dBMRi6HGmT4RfQyqez1NrMai68Tb+mg/gqI7yJIdU709p<font></font>
oo7Q4qpjty23hNUF2cPZSOIcKrkN9D9PpQa/hs5HrVEKrKbIGedVD8rJHQNfj9T6<font></font>
MvH3DFJ3k4sPRJKo6N0tOcjWAGkSmFG4+jrvTkj54ztwBPKgvXsYyABDVbjMvOre<font></font>
iM08KjdT8/S0+9CLqEegm/lGPwR+Art4gPuRSq8KsbhW+D6IqMLubUAHB46MFdWm<font></font>
TtSwqKf3sj8bPQ8Y7CeyHdrcn9Y1m7UO49/D1QIDAQABAoIBAQC6dsyL+jf9VX5b<font></font>
6497qvfhikAJ9jTzqjYsCuXcwCiygRNCB9ae4rRkCrZ2CImlo8iaXqYc/I51QSnd<font></font>
BF1eXiG0NZeWg/nhE7Q0avLSqqOWigqKBn7vX0ayZEqLKQBnnN1pkHv3zdoY4MuM<font></font>
g6YrN5vApBukcGkK2XnHIRMweTLek9/qAeDgcE4ZVXIgHkNjqAc9y/kd5Sx+fL+N<font></font>
k/dGQeTne2xgzJZsiu4uoS9jnBE7g1hQpfLpbyoREaRjWob/KP2IDFIjInjnHrb9<font></font>
mO5Xuqsv8mHp4+67Ium8IN5jDldoObayEd8giE6x3r/3x60RSmV8IDHKPIs507qD<font></font>
2hoCXz8hAoGBAObhKqowjp5TuqPt9Nrm+cVZKroDvz8bXb8ejOMn22Wj171cdNy3<font></font>
gxbt5ksLXsHmjPWm9fK5ZL8m33U+uMwcgqIUbHILo40AQK9FtwkjyeTQne1OBjJa<font></font>
2tjCc3ySo0icEswRFJrCu9Rcszehj56WlJzmvE0CiM2QGG3ExOxl8LNtAoGBAOPL<font></font>
Zv5nkG0RAuOg5w+tLi2H14BcD1ICpPcq232mXdqzEeeXSysvgpwDaOWPGXtgWvIK<font></font>
ScIw9xqW7tonk5EjKnsgPajV8OvG+vAqC2liHy00IxZ+YB+vzE66uUEpYXUpzI2n<font></font>
F+pb+rQDSQo3beyamjeL1wYEjntDyWqfRmQfQSkJAoGAMP1CIk6fVHULu1D4jaJJ<font></font>
CVj8OfAlmmxiHfWLi3+fjBeR5XpCybqetDTSksXc22PiMRW2RkSUXgMPkz810wmR<font></font>
pnaS9DgIAhk1oHs4dVYEtuqVOA9APVsN6MSJ4Lr0rql/S5GsP5JmbI8m7/z2Dn6B<font></font>
FjHXbrfE82lJ5bDE4CxZQJkCgYAvmtJrWDlWkbeI2pdvL0H3QexHZvXMrcDL5qj4<font></font>
GUyD5+hV/cg3vjYNZKkHUGCC6CAZdQz1CEabx+8iqCKusiqukI5SOmOe4naOujqo<font></font>
S1k4mSy8Bq0P8i1ARsVwWLWFRrb443KcB5zdAdLBz9OpHqYb9Z16JHmiSQhOv/p1<font></font>
8hIsAQKBgQCvHQu6NKsdNDogXCiwEt52jlqBRs4NEjspupOKzV+HlEfek6ijKMce<font></font>
P9o4U+vpiG5ZmIYPzgTfAlaWxoMi5ynRZhiMA8dFzX53uyJiYJetXm+zb71l9BW8<font></font>
kmsch0B5z5yAjEA+CWIqDJ05O7QTLMLC69QU4UICswbyJy1MFUfrbg==<font></font>
-----END RSA PRIVATE KEY-----<font></font>
<font></font>
&lt;/key&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、クライアントとサーバーの構成ファイルの作成は完了したと見なされます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンタープライズルーターのセットアップ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜなら </font><font style="vertical-align: inherit;">私たちのパソコンは外部ホワイトIPの回線に直接接続されているのではなく、エンタープライズルーターを介して接続されているため、外部ネットワークからローカルIPアドレスのコンピューターにアクセスするには、サーバー構成で指定したポート（50501）を転送する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポート転送手順は、ルーターのモデルによって異なる場合があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のスクリーンショットは、エンタープライズルーター（KEENETIC 4Gではありません）の設定例を示しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/sz/1j/vjsz1j1gklcppxcucvsndpuwiui.png" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パソコンでOpenVPNサーバーを実行する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成ファイルの準備ができました。WindowsベースのシステムでOpenVPNを設定するニュアンスについてはまだ説明していません。これを見て、アダプター設定を構成し、TAP-WindowsアダプターV9の名前を（dev-nodeの名前に従って）MyTapに変更します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e5/gl/yz/e5glyzs2wksvc55oaceguxsisne.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、アダプターのローカルアドレスを構成します（これ</font><font style="vertical-align: inherit;">は、コントローラーのローカルネットワークの</font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空いているIPアドレス（</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 192.168.112.230など）</font><font style="vertical-align: inherit;">に割り当てる必要があります</font><font style="vertical-align: inherit;">）</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3o/jq/lu/3ojqlus9g_e1elkqinnswm8l1rs.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、OpenVPNサーバーを起動します</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。1. C：\ Program Files \ OpenVPN \ binにあるアプリケーションを起動します。 \ openvpn-gui.exe（またはデスクトップのショートカットをクリック）</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/dr/6q/mhdr6q3rhquwfqrkfzwig-ph42s.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.トレイに移動し、作成した構成ファイル「TAP_Server」を選択して「接続」をクリックします</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/xt/_y/ylxt_yc5yhzg44stx5pkilyftkc.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.サーバーが機能していることを確認し、KEENETIC 4Gインターネットセンターの設定に進みます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/y1/ta/scy1taywqsvhcn9y3lavnfvll_u.jpeg" alt="画像"><br>
<br>
<h2> - KEENETIC 4G</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、KEENETIC 4GにはOpenVPNクライアントが含まれていないため、最初にインストールする必要があります。これを行うには、KEENETIC 4Gをさまざまな方法で（ケーブル、Wi-Fi、または4Gモデムを使用して）インターネットに接続し、「一般設定」に移動して「コンポーネントセットの変更」ボタンをクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/g0/qs/skg0qsorsk9yqnb3aqslphvnbm8.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なコンポーネントを選択し（この場合、OpenVPNクライアントはすでにインストールされているため、たとえば別のコンポーネントが表示されています）、[更新のインストール]ボタンをクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iy/xq/tl/iyxqtlsyavy1on1ki9geari-5k0.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ネットワークのセットアップに移りましょう。このために、「ホームネットワーク」を選択し、ルーターのIPアドレス（192.168.112.101など）を構成します（これも無料である必要があります）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/jl/vc/5qjlvc-edpe_n4io3ey_nvd3t-c.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、OpenVPN接続を構成する必要があります。このために「その他の接続」を選択し、「接続の追加」ボタンをクリックします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接続名（任意、たとえばTAP_Client_PLC）を入力し、接続タイプ（OpenVPN）を選択して、クライアント用に作成したファイルからOpenVPN構成（TAP_Client.ovpn）にテキストをコピーし、保存ボタンをクリックして変更を適用します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nb/lz/vz/nblzvzf-cr3x9_2uf3qsozjpdeq.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、OpenVPNインターフェイスをメインブリッジに含める必要がありますが、この手順を実行する前に、Telnetクライアントをインストールする必要があります。これを行うには、コントロールパネルに移動し、[Windowsコンポーネントをオンまたはオフにする]に移動し、Telnetクライアントを選択して[OK]をクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/va/al/fa/vaalfa3q9qrsd395ea2r2fiapwa.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Telnetクライアントをインストールしたら、KEENETIC 4Gに接続します。キーボードで、WIN + Rキーの組み合わせを押し、cmdと入力して、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hp/st/ua/hpstuakyh_1nmtscsbtznc5jt78.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドtelnet [IP_our_KEENETIC]を</font><font style="vertical-align: inherit;">入力し</font><font style="vertical-align: inherit;">ます（たとえば、telnet 192.168.112.101）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/bd/yw/gwbdywgl0qlvpi9zw4cjjs9ocpg.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
承認プロセス（ユーザー名とパスワード（構成されている場合）を入力）を実行し、次のコマンドを入力します。</font></font><br>
<br>
<pre><code class="plaintext hljs">interface Bridge0<font></font>
include OpenVPN0<font></font>
system configuration save<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定が正しいことを確認します。</font></font><br>
<br>
<pre><code class="plaintext hljs">show<font></font>
running-config<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、同じようなものが表示されるはずです</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f7/uw/th/f7uwthmd7v0c5bdvjgyp6duoye0.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。OpenVPN0インターフェイスは、OpenVPN接続を作成した後にのみ作成されることに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenVPNクライアントが含まれています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fz/of/qg/fzofqgta_w1xth5a1lldhf9eawm.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEENETIC 4Gがサーバーに接続されていることがわかり、S7-1500コントローラーの構成に進みます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bt/ye/ex/btyeexdlihyf-06asr7viqhjea0.jpeg" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S7-1500プログラマブルロジックコントローラーの構成</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラーの設定では、ルーターのローカルアドレスを設定するだけで十分です。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ルーターを使用する」チェックボックスを設定します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KEENETIC 4G（192.168.112.101）のホームネットワークのアドレスをドライブします。</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/0h/vb/cd/0hvbcdeyy8ttar8t0qykw4zkugi.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定を読み込んだ後、コントローラはリモート接続を介してアクセスできるようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/s_/wv/xds_wvc2mq1_q8ga5mfuusnaklc.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、リモート接続の構成が完了しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
清聴ありがとうございました！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja481014/index.html">私/ WEはAyhorホスティングを行っていません。または業界に直面して唾を吐く方法</a></li>
<li><a href="../ja481016/index.html">VonmoTradeの実験。パート1：交換と最新テクノロジー</a></li>
<li><a href="../ja481018/index.html">また、仮想インフラストラクチャの保護について</a></li>
<li><a href="../ja481020/index.html">純粋なJavaScriptを使用したタッチタイピングシミュレーターの作成：パート2</a></li>
<li><a href="../ja481024/index.html">Google Maps APIをやめた理由</a></li>
<li><a href="../ja481030/index.html">自分のためにどんなサイバーデックをやりたいですか</a></li>
<li><a href="../ja481032/index.html">なぜハッキングが可能だったのですか？おそらく攻撃者が</a></li>
<li><a href="../ja481034/index.html">NATプロバイダーを介したコンピューター間の直接VPNトンネル（VPSなし、STUNサーバーとYandex.Diskを使用）</a></li>
<li><a href="../ja481036/index.html">30 Firefox開発ツールのユーティリティ</a></li>
<li><a href="../ja481038/index.html">デザイン中毒の告白。1か月でゲーム「IT Alchemy」を作成した方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>