<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàÅ ü§∏ ‚òùüèæ Postbote - AutoMetrica-Metriken in AppMetrica üÜò üë®üèº‚Äçüî¨ üëºüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Einleitung
 Vor kurzem wurde die Aufgabe gestellt, regelm√§√üig zu √ºberpr√ºfen, ob alle Ereignisse in der mobilen Anwendung ordnungsgem√§√ü funktioniere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Postbote - AutoMetrica-Metriken in AppMetrica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498516/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Einleitung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor kurzem wurde die Aufgabe gestellt, regelm√§√üig zu √ºberpr√ºfen, ob alle Ereignisse in der mobilen Anwendung ordnungsgem√§√ü funktionieren und ob sie an AppMetrica √ºbertragen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde die Details der Integration weglassen, was bedeutet, dass sie bereits im MP enthalten ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe zwei Optionen zur √úberpr√ºfung gefunden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºber das Webinterface</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºber API</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ein oder zwei Ereignisse auf der Weboberfl√§che angezeigt werden k√∂nnen, k√∂nnen Sie bei Dutzenden und Hunderten von Ereignissen nicht auf eine API verzichten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nur f√ºr den Fall, ich werde erkl√§ren, dass Sie nat√ºrlich Ihren R√ºcken kehren k√∂nnen und alles schnell und zuverl√§ssig funktionieren wird, aber dies ist in Bezug auf Entwicklung und Support in der Zukunft teuer. In diesem Artikel werde ich versuchen zu beschreiben, wie Sie ein solches System mit minimalem Aufwand und mit minimaler Codierung erstellen k√∂nnen .</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Einrichten von Umgebungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ben√∂tigen Felder mit variablen Daten, die in unserer GET-Anfrage verwendet werden. </font><font style="vertical-align: inherit;">F√ºr die aktuelle Aufgabe ben√∂tigen wir folgende Felder:</font></font><br>
<br>
<pre><code class="plaintext hljs">FirstData<font></font>
LastData<font></font>
OperationSystem<font></font>
event<font></font>
MinUsers<font></font>
Params<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht Postbote aus:</font></font><br>
<br>
<img src="https://i.postimg.cc/G35pjzqV/postman-2.png" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Sammlungen einrichten</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie nun eine Sammlung mit einer GET-Anforderung und testen Sie. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/pf/_c/hupf_cmeidifenfanmldelmxgjs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.1. Abrufen von Links von AppMetrica </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.1.1. Wir konfigurieren den Filter nach dem Datum des Ereignisses. Normalerweise w√§hle ich gestern, weil Die t√§gliche Anforderungsmetrik wird vollst√§ndig kompiliert und steht am n√§chsten Tag zur Verf√ºgung. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/il/zq/huilzq4gxwjkonk64mucds3ponm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.1.2. Richten Sie den Ereignisfilter ein: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bn/cz/53/bncz53prddx0_qpgvmmkqydqhhu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.1.3. Insgesamt erhielten wir: Die </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anzahl der Benutzer, die die mobile Anwendung ge√∂ffnet und gleichzeitig das damit verbundene Ereignis app_launch mit dem App-Parameter aktiviert haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das Ereignis nicht funktioniert h√§tte (in der mobilen Anwendung an diesem Tag), w√§ren keine Benutzer vorhanden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.1.4. Exportieren Sie den Link zur Verwendung √ºber die API: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q1/1u/86/q11u86m7wqw5xe9cj77xh8r32ng.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.2. F√ºgen Sie den resultierenden Link in Postman in die erstellten Sammlungen ein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.3. Params Abschnitt</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die notwendigen Felder f√ºr die GET-Anfrage wurden bereits darauf √ºbertragen. </font><font style="vertical-align: inherit;">Jetzt werden wir sie variabel machen, damit sich die Daten in der Anfrage √§ndern k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suchen Sie den Namen des Ereignisses und √§ndern Sie es in eine Formel, um es an unsere Umgebungen zu binden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √ºbernehmen den Namen der Formel aus dem Feldnamen im Abschnitt "Umgebungen": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o-/ms/rc/o-msrchsuhfh8i004fljgtxyjms.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir handeln auch mit allen Feldern des Abschnitts "Parameter":</font></font><br>
<br>
<pre><code class="plaintext hljs">FirstData<font></font>
LastData<font></font>
OperationSystem<font></font>
Event<font></font>
params</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispiel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8g/rd/eg/8grdegvjfelu0qamdc4vberjvrc.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.4. </font><font style="vertical-align: inherit;">Header-Bereich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Abschnitt melden wir uns bei AppMetrica an, damit der Server unsere Anforderungen √ºberspringt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Moment reicht es aus, dass wir es ausf√ºllen</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feldname: Autorisierung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feldwert: OAuth ***** (Sie m√ºssen das Token Ihrer Anwendung erhalten)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.5. </font><font style="vertical-align: inherit;">Sie k√∂nnen versuchen, die erste Anfrage zu stellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein K√∂rper mit Statistiken sollte kommen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rq/nf/th/rqnfthnw4xvef-czad2r1vnwmka.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vergleichen Sie es mit der Weboberfl√§che. </font><font style="vertical-align: inherit;">Passt es zusammen? </font><font style="vertical-align: inherit;">Wir sind also auf dem richtigen Weg! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.6. </font><font style="vertical-align: inherit;">Skript vor der Anforderung Abschnitt </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.6.1. </font><font style="vertical-align: inherit;">In diesem Abschnitt h√§ngen wir Daten in Umgebungen an eine Datei mit Daten im CSV-Format an.</font></font><br>
<br>
<pre><code class="plaintext hljs">console.log("event = " + data.event)
</code></pre><br>
<img src="https://habrastorage.org/webt/zf/v6/df/zfv6df_tgtzgozc-jobydg8lm_i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.7. </font><font style="vertical-align: inherit;">Testabschnitt </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Er enth√§lt das Allerheiligste des gesamten Ereignisses, n√§mlich den Testfallcode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unten ist der Code f√ºr die aktuelle Aufgabe mit Kommentaren:</font></font><br>
<br>
<pre><code class="plaintext hljs">pm.test(" ", function () {<font></font>
    pm.response.to.have.status(200); //  ,   <font></font>
});<font></font>
<font></font>
const jsonData = pm.response.json();  //,    .<font></font>
pm.test('   data - ' //   <font></font>
+ pm.iterationData.get("event")+  // ,      CSV   -<font></font>
'.' //     .<font></font>
+pm.iterationData.get("params"), //   ,      CSV   -<font></font>
() =&gt; {<font></font>
    pm.expect(jsonData.totals[0] &gt;= 1) //     <font></font>
    .to.be.true; // ,    PASS  FAIL<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.8. </font><font style="vertical-align: inherit;">√úberpr√ºfen Sie: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie die Abfrage aus und sehen Sie sich die Testergebnisse an: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qo/dr/8k/qodr8ktyi2yxpx87a6tuv3icb9g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Tatsache, dass die Namen von Ereignissen und Parametern nicht sichtbar sind, ist kein Fehler, die CSV-Datei ist noch nicht verbunden. </font><font style="vertical-align: inherit;">Dazu sp√§ter mehr. Hauptsache, alles funktioniert. </font><font style="vertical-align: inherit;">Anstatt auf eine Datei zu verlinken, k√∂nnen Sie einfach Text oder einen Link zur Umgebung hinzuf√ºgen. </font><font style="vertical-align: inherit;">Der Kreativit√§t sind keine Grenzen gesetzt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Konfigurieren Sie Runner</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen wir den ersten Schritt machen, um sicherzustellen, dass es sich um einen automatischen Test handelt, n√§mlich eine Datendatei damit zu verbinden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.1. </font><font style="vertical-align: inherit;">Hinzuf√ºgen einer Ereignislistendatei f√ºr Tests </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen eine einfache CSV-Datendatei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Zeile ist der Name des Felds f√ºr die Umgebung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als N√§chstes werden Zeilen mit dem Wert des Umgebungsfelds angezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8j/tg/m8/8jtgm82ymwrmkurp052k1fg3xu0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2. </font><font style="vertical-align: inherit;">Runner Run </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/5c/5u/bw5c5ualaqpdcsisjsl6reocago.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hlen Sie den Ordner mit der Sammlung aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2.1. </font><font style="vertical-align: inherit;">W√§hlen Sie die gew√ºnschte Anfrage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2.2. </font><font style="vertical-align: inherit;">W√§hlen Sie die gew√ºnschte Umgebung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2.3. </font><font style="vertical-align: inherit;">Wir sehen die Anzahl der F√§lle, die der heruntergeladenen Datei entsprechen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2.4. </font><font style="vertical-align: inherit;">Wir f√ºhren eine Verz√∂gerung zwischen den F√§llen ein, um den Server nicht zu laden. </font><font style="vertical-align: inherit;">Ich habe f√ºr alle F√§lle 100 ms eingegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2.5. </font><font style="vertical-align: inherit;">Wir laden die CSV-Datei mit einer Liste von Ereignissen und Parametern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.2.6. </font><font style="vertical-align: inherit;">Wir pr√ºfen, ob die Postman-Datei korrekt erkannt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.3. </font><font style="vertical-align: inherit;">Klicken Sie auf RUN, um das Ergebnis zu genie√üen. </font><font style="vertical-align: inherit;">Der Soldat schl√§ft, Tests laufen!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/ve/ey/rlveeyxwqtbs-e1dj36xuujlvls.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Bericht exportieren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist schon Geschmackssache. </font><font style="vertical-align: inherit;">Sie k√∂nnen mit dem Bericht in JSON arbeiten. </font><font style="vertical-align: inherit;">Bisher habe ich alles von VSON nach Excel kopiert und verstanden, wo Verkehr ist und wo nicht: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0z/al/ig/0zaligyf7t79io7pzdr52wmla0y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwendete Materialien: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postman </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppMetrica</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de498498/index.html">Untersuchung: Was ist h√∂her als die Thread-Priorit√§ten in Windows?</a></li>
<li><a href="../de498500/index.html">Was gibt es in Quarant√§ne zu sehen? Eine Auswahl von Materialien aus Technostream (Teil 1)</a></li>
<li><a href="../de498504/index.html">Neujahrsgr√º√üe und COVID-19: Wie Hacker die Nachrichten nutzen</a></li>
<li><a href="../de498510/index.html">X. X. Eine √úbersicht √ºber die Box-Version von Telefonie und Verbindung zu einem Remote-Standort</a></li>
<li><a href="../de498512/index.html">Staus in einer kleinen Stadt f√ºr ein kleines Budget bek√§mpfen: Ergebnisse von 6 Monaten des Projekts</a></li>
<li><a href="../de498518/index.html">Ein vereinfachter Ansatz zur Berechnung des Datums der Verf√ºgbarkeit von Sonderanfertigungen</a></li>
<li><a href="../de498520/index.html">Algorithmen zur Nachbearbeitung von Textfelderkennungsergebnissen</a></li>
<li><a href="../de498524/index.html">AppCode 2020.1: Leistungsverbesserungen, automatische Vervollst√§ndigung bis zum Ende der Indizierung, Dokumentationserstellung und vieles mehr</a></li>
<li><a href="../de498526/index.html">Was ist neu in Ubuntu 20.04</a></li>
<li><a href="../de498528/index.html">Zwischen Zuhause und B√ºro. So organisieren Sie die Arbeit eines verteilten Teams</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>