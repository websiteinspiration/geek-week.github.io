<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèΩ üëáüèΩ üëÉüèª Theoretical data structures and their application in JavaScript. P1. Couples ‚õ∞Ô∏è üÜì üëÇüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúBad programmers think about code. Good programmers think about data structures and their relationships, ‚ÄùLinus Torvalds, creator of Linux.We take as ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Theoretical data structures and their application in JavaScript. P1. Couples</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493692/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúBad programmers think about code. </font><font style="vertical-align: inherit;">Good programmers think about data structures and their relationships, ‚ÄùLinus Torvalds, creator of Linux.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We take as an axiom that very often the solution to any problem in programming comes down to choosing the right data structure. </font><font style="vertical-align: inherit;">This axiom can be proved, but it is a long time and the article is a little about another. </font><font style="vertical-align: inherit;">Today we will talk about one of the simplest theoretical structures, about the pair. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pair is a data structure that stores any two data elements in itself, implying that we want to somehow logically combine them into one. </font><font style="vertical-align: inherit;">It solves precisely this problem, i.e. </font><font style="vertical-align: inherit;">if there are some data elements </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we need to present them in the form </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then we can implement this design in pairs.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you think that you have never encountered or will not encounter something like this, then this is not so. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the simplest example of a computed property from the VUE documentation:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue({<font></font>
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#demo'</span>,<font></font>
  <span class="hljs-attr">data</span>: {<font></font>
    <span class="hljs-attr">firstName</span>: <span class="hljs-string">'Foo'</span>,<font></font>
    <span class="hljs-attr">lastName</span>: <span class="hljs-string">'Bar'</span><font></font>
  },<font></font>
  <span class="hljs-attr">computed</span>: {<font></font>
    <span class="hljs-attr">fullName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firstName + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.lastName<font></font>
    }<font></font>
  }<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the point of view of theory, </font></font><code>fullName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this is a couple. And there are countless such examples in technology and the real world, which we often model with program code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can rightly notice that we can logically combine any number of elements and you will be right. This brings us to a more complex structural concept of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">composite data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , one of which is a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couple</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . We will deal with the composite data a little later, now we will focus on the pair. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The theory tells us that pairs have the following properties:</font></font><br>
<br>
<ul>
<li><b></b>, ..    -    ,        ,     .      ,    (     -  .           ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>)</li>
<li><b>          </b>.     .          .      ,   ,     ,     ,    ,     .<br>
<br>
    :<br>
<br>
<pre><code class="plaintext hljs">pair = { a, b }
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If in the calling code we will work with the pair directly in this style: </font></font><code>pair.a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">then changing the implementation of the pair we will be forced to rewrite the calling code wherever the call to the pair appears. </font><font style="vertical-align: inherit;">This is not great! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A couple is an abstraction (even a low level), so it would be wrong to work directly with its components. </font><font style="vertical-align: inherit;">When working with the constituent parts of any abstraction, we must use the abstraction interface, otherwise the code will turn into chaos (it will become harder to read, easier to make a mistake, but most importantly more difficult to change, because one change will have to be made in different parts of the code).</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pairs can be implemented in very different ways. </font><font style="vertical-align: inherit;">In any programming language, there is more than one opportunity to implement this data structure. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, you can implement a pair for arbitrary data types:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span><font></font>
<span class="hljs-comment">//      </span><font></font>
<span class="hljs-keyword">const</span> pair = <span class="hljs-function">(<span class="hljs-params">first, second</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">elementType</span>) =&gt;</span> {<font></font>
  <span class="hljs-keyword">switch</span>(elementType) {<font></font>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'first'</span>:<font></font>
     <span class="hljs-keyword">return</span> first;<font></font>
   <span class="hljs-keyword">case</span> <span class="hljs-string">'second'</span>:<font></font>
     <span class="hljs-keyword">return</span> second;<font></font>
  }<font></font>
};<font></font>
<span class="hljs-comment">//    ,      ,</span><font></font>
<span class="hljs-comment">//    </span><font></font>
<span class="hljs-keyword">const</span> getFirstElement = <span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> (pair(<span class="hljs-string">'first'</span>));<font></font>
<span class="hljs-keyword">const</span> getSecondElement = <span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> (pair(<span class="hljs-string">'second'</span>));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This way of working is called sending messages. Oddly enough, but it was this way of interaction between entities that was once called OOP before C / C ++. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do we have to use the design </font></font><code>switch </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Of course, not necessarily. These are the details of the technical implementation, and there can be a great many implementations! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most important thing is to make the couple mutable! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, you can implement the same functionality using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Map</font></font></a><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//     </span><font></font>
<span class="hljs-comment">//  ,       </span><font></font>
<span class="hljs-keyword">const</span> pair = <span class="hljs-function">(<span class="hljs-params">first, second</span>) =&gt;</span> (<font></font>
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([<font></font>
    [<span class="hljs-string">'first'</span>, first],<font></font>
    [<span class="hljs-string">'second'</span>, second],<font></font>
  ])<font></font>
);<font></font>
<span class="hljs-comment">//    </span><font></font>
<span class="hljs-keyword">const</span> getFirst = <span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> (pair.get(<span class="hljs-string">'first'</span>));<font></font>
<span class="hljs-keyword">const</span> getSecond = <span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> (pair.get(<span class="hljs-string">'second'</span>));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note that the first implementation can easily be replaced with the second. and the second to the first! The calling code will not change. This is an important advantage of abstractions. We can easily change the implementation of abstraction in the program, but the code working with this abstraction will not know about these changes. We will not need to edit the code that works with these abstractions if we want to change the implementation of the abstractions themselves. This is very important because saves customer money and raises developer bonuses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, let's say we don‚Äôt know about the existence of Mapov in js, but we can work with objects.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span><font></font>
<span class="hljs-comment">//   </span><font></font>
<span class="hljs-keyword">const</span> pair = <span class="hljs-function">(<span class="hljs-params">first, second</span>) =&gt;</span> (<font></font>
  <span class="hljs-built_in">Object</span>.freeze({<font></font>
    <span class="hljs-string">'first'</span>: first,<font></font>
    <span class="hljs-string">'second'</span>: second,<font></font>
  })<font></font>
);<font></font>
<span class="hljs-comment">//    ,       </span><font></font>
<span class="hljs-keyword">const</span> getFirst = <span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> (pair.first);<font></font>
<span class="hljs-keyword">const</span> getSecond = <span class="hljs-function">(<span class="hljs-params">pair</span>) =&gt;</span> (pair.second);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can easily guess, both previous implementations can also be replaced by a third one and nothing will change from this ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actually, there is some difference. Maps do not throw exceptions when trying to change properties directly, but they throw ‚Äúfrozen objects‚Äù </font></font><code>TypeError: Cannot assign to read only property</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. However, in the context of the article, this is not important.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why do we need knowledge of theoretical data structures?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we look at the work of a programmer from a bird's eye view, we will see that in essence he is engaged in that. which creates tools that manipulate certain data sets. Therefore, we constantly have to select some kind of storage structure for the data and come up with ways to work with them or give the chaotic data set a specific structure. Understanding the typical data structures allows us to own a set of ready-made solutions for different typical tasks and simply choose the most convenient way for a specific task. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
's analyze </font><font style="vertical-align: inherit;">an example: </font><font style="vertical-align: inherit;">‚ÄúImplement a mechanism for working with fractions. Fractions should be stored in the usual format. those. in the form of 1/2. It is also necessary to implement basic operations (addition, subtraction, multiplication, division). Normalization needs to be provided. ‚Äù</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's make sense of the condition of the problem! We need to implement an abstraction for some mathematical entity, therefore it is reasonable to refer to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Of course, if experienced programmers read this text, then they must have immediately imagined the solution in code without reading the article on fractions in mathematics, but we will assume. that we faintly imagine how fractions work and illustrate the whole course of reasoning. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wikipedia material tells us that fractions are ordinary (1/4) and decimal (0.1). Obviously, by the condition of the problem, we need to work with fractions in the usual presentation format. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also see that the ordinary fraction is a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logical union of two</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">numbers (numerator and denominator), this is the surest signal about the need to use a pair as a data structure for this task. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the code, we could describe this structure as follows:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//        ,</span><font></font>
<span class="hljs-comment">//  ,    </span><font></font>
<span class="hljs-comment">//          ,</span><font></font>
<span class="hljs-comment">//     </span><font></font>
<span class="hljs-keyword">const</span> makeRational = <span class="hljs-function">(<span class="hljs-params">num, denom</span>) =&gt;</span> (<font></font>
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([<font></font>
    [<span class="hljs-string">'num'</span>, num],<font></font>
    [<span class="hljs-string">'denom'</span>, denom],<font></font>
  ])<font></font>
);<font></font>
<font></font>
<span class="hljs-comment">//  ,    </span><font></font>
<span class="hljs-comment">//   ,      ,    </span><font></font>
<span class="hljs-comment">//    </span><font></font>
<span class="hljs-keyword">const</span> getNumer = <span class="hljs-function">(<span class="hljs-params">rat</span>) =&gt;</span> (rat.get(<span class="hljs-string">'num'</span>));<font></font>
<span class="hljs-keyword">const</span> getDenom = <span class="hljs-function">(<span class="hljs-params">rat</span>) =&gt;</span> (rat.get(<span class="hljs-string">'denom'</span>));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we should analyze the situation with fractions of such a plan 8/4, 6/9. </font><font style="vertical-align: inherit;">The condition of the task says about the need to provide for normalization. </font><font style="vertical-align: inherit;">The normalization of a fraction is the removal of the largest common divisor (GCD) from it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We implement a function to search for GCD two numbers:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//Gcd     </span><font></font>
<span class="hljs-keyword">const</span> getGcd = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> ((a % b) ? getGcd(b, a % b) : <span class="hljs-built_in">Math</span>.abs(b));<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the text of the function is not clear to you, then I advise you to read about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recursion</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To normalize the fraction, we need to divide its numerator and denominator by GCD. </font><font style="vertical-align: inherit;">We write the normalization function:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> normalize = <span class="hljs-function">(<span class="hljs-params">n1, n2</span>) =&gt;</span> {<font></font>
  <span class="hljs-keyword">const</span> commonDivisor = getGcd(n1, n2);<font></font>
  <span class="hljs-keyword">return</span> [n1 / commonDivisor, n2 / commonDivisor];<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would be logical to put normalization in the makeRational constructor to always normalize the data when creating the fraction. </font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> makeRational = <span class="hljs-function">(<span class="hljs-params">num, denom</span>) =&gt;</span> {<font></font>
  <span class="hljs-keyword">const</span> [normalizeNum, normalizeDenom] = normalize(num, denom);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([<font></font>
    [<span class="hljs-string">'num'</span>, normalizeNum],<font></font>
    [<span class="hljs-string">'denom'</span>, normalizeDenom],<font></font>
  ]);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we‚Äôll work on the operations interface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) Addition </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To add two ordinary fractions, you should bring them to a common denominator. </font><font style="vertical-align: inherit;">Then add the numerators and leave the denominator unchanged.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//..       ,</span><font></font>
<span class="hljs-comment">//       ,</span><font></font>
<span class="hljs-comment">//         </span><font></font>
<span class="hljs-keyword">const</span> add = <span class="hljs-function">(<span class="hljs-params">rat1, rat2</span>) =&gt;</span> (<font></font>
  makeRational(<font></font>
    getNumer(rat1) * getDenom(rat2) + getNumer(rat2) * getDenom(rat1),<font></font>
    getDenom(rat1) * getDenom(rat2),<font></font>
  ));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) Subtraction </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to get the difference of fractions, they also need to be reduced to a common denominator, and then the numerators should be subtracted, the denominator should be left unchanged.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    </span><font></font>
<span class="hljs-comment">//     </span><font></font>
<span class="hljs-keyword">const</span> sub = <span class="hljs-function">(<span class="hljs-params">rat1, rat2</span>) =&gt;</span> (<font></font>
  makeRational(<font></font>
    getNumer(rat1) * getDenom(rat2) - getNumer(rat2) * getDenom(rat1),<font></font>
    getDenom(rat1) * getDenom(rat2),<font></font>
  ));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) Multiplication </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To multiply two ordinary fractions, you need to multiply their numerators and denominators.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> multi = <span class="hljs-function">(<span class="hljs-params">rat1, rat2</span>) =&gt;</span> (<font></font>
  makeRational(<font></font>
    getNumer(rat1) * getNumer(rat2),<font></font>
    getDenom(rat1) * getDenom(rat2),<font></font>
  ));<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4) Division </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to divide one ordinary fraction into another, you need to multiply the first fraction by the fraction inverse of the second. </font><font style="vertical-align: inherit;">The inverse is called a fraction whose numerator is equal to the denominator of the original, and the denominator is the numerator of the original.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> div = <span class="hljs-function">(<span class="hljs-params">rat1, rat2</span>) =&gt;</span> (<font></font>
  makeRational(<font></font>
    getNumer(rat1) * getDenom(rat2),<font></font>
    getDenom(rat1) * getNumer(rat2),<font></font>
  ));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, in each operation we create a new entity. </font><font style="vertical-align: inherit;">This is a consequence of the immutability rule. </font><font style="vertical-align: inherit;">Note that in math operations do not change the original number of numbers, and create new: </font></font><code>1 + 2 = 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Should pay attention. </font><font style="vertical-align: inherit;">that we can change the implementation </font></font><code>makeRational</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to any other, but the calling code will not know about it and will continue to work. </font><font style="vertical-align: inherit;">This is a consequence of the fact that we correctly implemented the abstraction and work with its components through the interface, and not directly. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is also important that the user can get their data in the usual way, so we introduce one additional function.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> ratToString = <span class="hljs-function">(<span class="hljs-params">rat</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${getNumer(rat)}</span>/<span class="hljs-subst">${getDenom(rat)}</span>`</span>;
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will enclose a listing of tests:</font></font><br>
<br>
<pre><code class="javascript hljs">describe(<span class="hljs-string">'normalize'</span>, () =&gt; {<font></font>
  test(<span class="hljs-string">'should work'</span>, () =&gt; {<font></font>
    expect(normalize(<span class="hljs-number">21</span>, <span class="hljs-number">6</span>)).toEqual([<span class="hljs-number">7</span>, <span class="hljs-number">2</span>]);<font></font>
    expect(normalize(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)).toEqual([<span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);<font></font>
  });<font></font>
});<font></font>
<font></font>
<font></font>
describe(<span class="hljs-string">'rational'</span>, () =&gt; {<font></font>
  test(<span class="hljs-string">'getters'</span>, () =&gt; {<font></font>
    <span class="hljs-keyword">const</span> rat1 = makeRational(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>);<font></font>
    expect(getNumer(rat1)).toBe(<span class="hljs-number">1</span>);<font></font>
    expect(getDenom(rat1)).toBe(<span class="hljs-number">3</span>);<font></font>
<font></font>
    <span class="hljs-keyword">const</span> rat3 = makeRational(<span class="hljs-number">-4</span>, <span class="hljs-number">16</span>);<font></font>
    expect(getNumer(rat3)).toBe(<span class="hljs-number">-1</span>);<font></font>
    expect(getDenom(rat3)).toBe(<span class="hljs-number">4</span>);<font></font>
  });<font></font>
<font></font>
  test(<span class="hljs-string">'add&amp;sub'</span>, () =&gt; {<font></font>
    <span class="hljs-keyword">const</span> rat1 = makeRational(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>);<font></font>
    <span class="hljs-keyword">const</span> rat2 = makeRational(<span class="hljs-number">10</span>, <span class="hljs-number">3</span>);<font></font>
    expect(add(rat1, rat2)).toEqual(makeRational(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<font></font>
    expect(sub(rat1, rat2)).toEqual(makeRational(<span class="hljs-number">-3</span>, <span class="hljs-number">1</span>));<font></font>
<font></font>
    <span class="hljs-keyword">const</span> rat4 = makeRational(<span class="hljs-number">12</span>, <span class="hljs-number">5</span>);<font></font>
    <span class="hljs-keyword">const</span> rat3 = makeRational(<span class="hljs-number">-4</span>, <span class="hljs-number">16</span>);<font></font>
    expect(add(rat3, rat4)).toEqual(makeRational(<span class="hljs-number">43</span>, <span class="hljs-number">20</span>));<font></font>
    expect(sub(rat3, rat4)).toEqual(makeRational(<span class="hljs-number">-53</span>, <span class="hljs-number">20</span>));<font></font>
<font></font>
    <span class="hljs-keyword">const</span> rat5 = makeRational(<span class="hljs-number">1</span>, <span class="hljs-number">15</span>);<font></font>
    <span class="hljs-keyword">const</span> rat6 = makeRational(<span class="hljs-number">4</span>, <span class="hljs-number">25</span>);<font></font>
    expect(add(rat5, rat6)).toEqual(makeRational(<span class="hljs-number">17</span>, <span class="hljs-number">75</span>));<font></font>
    expect(sub(rat5, rat6)).toEqual(makeRational(<span class="hljs-number">-7</span>, <span class="hljs-number">75</span>));<font></font>
  });<font></font>
<font></font>
  test(<span class="hljs-string">'multi&amp;div'</span>, () =&gt; {<font></font>
    <span class="hljs-keyword">const</span> rat1 = makeRational(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<font></font>
    <span class="hljs-keyword">const</span> rat2 = makeRational(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<font></font>
    expect(multi(rat1, rat2)).toEqual(makeRational(<span class="hljs-number">2</span>, <span class="hljs-number">6</span>));<font></font>
<font></font>
    <span class="hljs-keyword">const</span> rat3 = makeRational(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<font></font>
    <span class="hljs-keyword">const</span> rat4 = makeRational(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<font></font>
    expect(div(rat3, rat4)).toEqual(makeRational(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));<font></font>
  });<font></font>
<font></font>
  test(<span class="hljs-string">'ratToString'</span>, () =&gt; {<font></font>
    <span class="hljs-keyword">const</span> rat1 = makeRational(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>);<font></font>
    <span class="hljs-keyword">const</span> rat3 = makeRational(<span class="hljs-number">-4</span>, <span class="hljs-number">16</span>);<font></font>
    expect(ratToString(rat1)).toBe(<span class="hljs-string">'1/3'</span>);<font></font>
    expect(ratToString(rat3)).toBe(<span class="hljs-string">'-1/4'</span>);<font></font>
  });<font></font>
});<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The text turned out to be quite voluminous, but I hope it is clear. </font><font style="vertical-align: inherit;">To summarize:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can use the steam data structure whenever we need to logically combine two unrelated values </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The couple must be immune</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The couple must provide an interface for working with their components</font></font></li>
</ol> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I apologize in advance if the article seemed overloaded to someone. </font><font style="vertical-align: inherit;">I mainly focus on not very experienced developers, so I try to write in such a way that the logic of my reasoning and the choice of this or that solution are extremely clear. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the article is of interest to the community. </font><font style="vertical-align: inherit;">then the direction of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typical data structures</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will continue. </font><font style="vertical-align: inherit;">The next topic is related lists.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493680/index.html">10 tricks how not to merge online konfu</a></li>
<li><a href="../en493682/index.html">How to choose long-term investments: 6 shares from the portfolio of Warren Buffett</a></li>
<li><a href="../en493686/index.html">The mysterious origin of the board game about hacking codes Mastermind</a></li>
<li><a href="../en493688/index.html">We make Microsoft Teams free - stay in touch with colleagues at this difficult time</a></li>
<li><a href="../en493690/index.html">20 tips for pilot DJI Mavic Mini to protect your drone from crash and loss</a></li>
<li><a href="../en493696/index.html">Accelerating the Qemu KVM disk subsystem on Linux</a></li>
<li><a href="../en493700/index.html">Using malware in Azure to gain access to Microsoft 365 tenants</a></li>
<li><a href="../en493702/index.html">Massive transition to remote work: technical problems and threats to security</a></li>
<li><a href="../en493704/index.html">Using TypeScript in JavaScript without writing TypeScript</a></li>
<li><a href="../en493706/index.html">Know your enemy: create a Node.js backdoor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>