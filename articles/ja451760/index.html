<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🎤 🧚 🧓 Golangを使用してエコノミストでマイクロサービスを作成する：回顧 👐🏾 🕤 🎩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！5月28日には、Golang Developerコースで最初のグループを開始します。そして本日、このコースの立ち上げに向けた最初の出版物を皆さんと共有します。行け。
 
 
 
 主な抜粋
 
 

- エコノミストは、ますます多様化するデジタルチャネルにコンテンツを配信するた...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Golangを使用してエコノミストでマイクロサービスを作成する：回顧</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/451760/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは！</font><font style="vertical-align: inherit;">5月28日には、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Golang Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コースで最初のグループを開始し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">そして本日、このコースの立ち上げに向けた最初の出版物を皆さんと共有します。</font><font style="vertical-align: inherit;">行け。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3r/wa/jy/3rwajyps3se5vmahtiv_ioninq0.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主な抜粋</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エコノミストは、ますます多様化するデジタルチャネルにコンテンツを配信するためにより多くの柔軟性を必要としていました。</font><font style="vertical-align: inherit;">この目標を達成し、高いレベルのパフォーマンスと信頼性を維持するために、プラットフォームはモノリシックアーキテクチャからマイクロサービスアーキテクチャに移行しました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goで記述されたツールは、The Economistがスケーラブルで高性能なサービスを提供し、新しい製品をすばやく作成できるようにする新しいシステムの主要なコンポーネントでした。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">並行性とAPIサポートを目的としたGoは、静的コンパイルされた言語の構築とともに、拡張可能な分散型イベント処理システムの開発を促進しました。</font><font style="vertical-align: inherit;">テストのサポートもプラスでした。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全体的に見て、エコノミストのGoに関するチームの経験はポジティブであり、コンテンツプラットフォームの拡張に役立つ決定的な要因の1つでした。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goは常に適切なツールとは限りません。これは正常な動作です。</font><font style="vertical-align: inherit;">エコノミストはポリグロットプラットフォームを備えており、意味のある場所でさまざまな言語を使用しています。</font></font></li>
</ul><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は</font><font style="vertical-align: inherit;">Drupal開発者として</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Economistの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発チームに参加</font><font style="vertical-align: inherit;">しました。</font><font style="vertical-align: inherit;">しかし、私の本当の仕事は、エコノミストのコンテンツ配信テクノロジーを根本的に変えるプロジェクトに参加することでした。</font><font style="vertical-align: inherit;">最初の数か月はGoの学習に費やし、数か月は外部コンサルタントと協力してMVP（実行可能な最低限の製品）を作成し、その後再びチームに参加してGoへの没入を監督しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ニュースの消費が印刷メディアから離れたため、テクノロジーのこの変化は、デジタル視聴者を拡大するというエコノミストの使命によって引き起こされました。</font><font style="vertical-align: inherit;">エコノミストは、コンテンツをより多様なデジタルチャネルに配信するために、より高い柔軟性を必要としていました。</font><font style="vertical-align: inherit;">この目標を達成し、高いレベルのパフォーマンスと信頼性を維持するために、プラットフォームはモノリシックアーキテクチャからマイクロサービスアーキテクチャに移行しました。</font><font style="vertical-align: inherit;">Goで記述されたツールは、The Economistがスケーラブルで高性能なサービスを提供し、新しい製品をすばやく作成できるようにする新しいシステムの主要なコンポーネントでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エコノミストにGoを実装する：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンジニアが新しい機能をすばやく開発して実装できるようになりました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インテリジェントなエラー処理を備えた、迅速に失敗するサービスの承認されたベストプラクティス。</font></font></li>
<li>          .</li>
<li>       ,     .</li>
<li> ,       .</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エコノミストはなぜGoを選んだのですか？</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この質問に答えるには、新しいプラットフォームの全体的なアーキテクチャを強調することが役立ちます。 Content Platformと呼ばれるプラットフォームは、イベント処理システムです。異なるコンテンツオーサリングプラットフォームからのイベントに応答し、個別に動作するマイクロサービスで実行されるプロセスのストリームを起動します。これらのサービスは、データの標準化、セマンティックタグの分析、ElasticSearchでのインデックス作成、Apple NewsやFacebookなどの外部プラットフォームへのコンテンツの送信などの機能を実行します。プラットフォームにはRESTful APIもあり、これはGraphQLと組み合わせて、フロントエンドクライアントおよび製品の主要なエントリポイントです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
共通のアーキテクチャを開発する際、チームはプラットフォームのニーズに合う言語を調査しました。 Goは、Python、Ruby、Node、PHP、Javaと比較されています。各言語には独自の長所がありますが、Goはプラットフォームアーキテクチャに最適です。並行性とAPIサポートを目的としたGoは、静的コンパイルされた言語の構築とともに、拡張可能な分散型イベント処理システムの開発を促進しました。さらに、Goの比較的単純な構文により、開発に参加し、実際に機能するコードを書き始めることが容易になりました。一般に、Goは分散クラウドシステムの使いやすさと効率に最も適した言語であると判断されました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3年後：Goはこれらの野心的な目標を達成しましたか？</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
一部のプラットフォーム設計要素は、Goとうまく連携していました。 Failing Fastは分散型の独立したサービスで構成されていたため、システムの重要な部分でした。 Twelve-Factor App（ "12-factor application"）の原則に従って、アプリケーションは迅速に実行され、すぐに失敗する（fast fail）必要がありました。静的なコンパイル済み言語としてのGoの設計は、起動時間を短縮し、コンパイラーのパフォーマンスは絶えず向上しており、設計やデプロイメントの問題になりませんでした。さらに、Goのエラー処理設計により、アプリケーションの障害がより速くなるだけでなく、よりスマートになりました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー処理</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goでエンジニアがすぐに気づく機能は、例外システムではなくエラータイプであることです。</font><font style="vertical-align: inherit;">Goでは、すべてのエラーは値です。</font><font style="vertical-align: inherit;">エラータイプは事前定義されており、インターフェースです。</font><font style="vertical-align: inherit;">Goのインターフェースは基本的にメソッドの名前付きコレクションであり、同じメソッドがあれば他のユーザータイプもインターフェースを満たすことができます。</font><font style="vertical-align: inherit;">Error型は、それ自体を文字列として説明できるインターフェースです。</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> error <span class="hljs-keyword">interface</span> {<font></font>
    Error() <span class="hljs-keyword">string</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、エンジニアはエラー処理の制御と機能を強化できます。</font><font style="vertical-align: inherit;">任意のユーザーモジュールで文字列を返すErrorメソッドを追加することにより、独自のエラーを作成して生成できます。たとえば、Errorsパッケージにある以下のNew関数を使用します。</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> errorString <span class="hljs-keyword">struct</span> {<font></font>
    s <span class="hljs-keyword">string</span><font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *errorString)</span> <span class="hljs-title">Error</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> {
    <span class="hljs-keyword">return</span> e.s<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは実際にはどういう意味ですか？ Goでは、関数は複数の戻り値を許可するため、関数が機能しない場合、エラー値が返される可能性が高くなります。この言語では、（例外をスローしてキャッチするのではなく）エラーが発生した場所を明示的にチェックすることを推奨しているため、コードには通常、「if err！ =なし。 "最初、この頻繁なエラー処理は単調に見えるかもしれません。ただし、値としてエラーを使用すると、エラーを使用してエラー処理を簡略化できます。たとえば、分散システムでは、エラーをラップしてクエリを再試行する試みを簡単に実装できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の内部サービスにデータを送信する場合でも、サードパーティのツールにデータを転送する場合でも、ネットワークの問題は常にシステムで発生します。このネットパケットの例は、エラーをタイプとして使用して、一時的なネットワークエラーと永続的なエラーを区別する方法を示しています。エコノミストチームは、同様のエラーラッパーを使用して、コンテンツを外部APIに送信するときに増分再試行を作成しました。</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> net<font></font>
<font></font>
<span class="hljs-keyword">type</span> Error <span class="hljs-keyword">interface</span> {<font></font>
    error<font></font>
    Timeout() <span class="hljs-keyword">bool</span>   <span class="hljs-comment">// Is the error a timeout?</span>
    Temporary() <span class="hljs-keyword">bool</span> <span class="hljs-comment">// Is the error temporary?</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> nerr, ok := err.(net.Error); ok &amp;&amp; nerr.Temporary() {<font></font>
    time.Sleep(<span class="hljs-number">1e9</span>)
    <span class="hljs-keyword">continue</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
    log.Fatal(err)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goの作者は、すべての例外が例外的であるとは限らないと考えています。エンジニアは、アプリケーションをクラッシュさせるよりも、エラーからインテリジェントに回復する可能性が高くなります。さらに、Goエラー処理を使用すると、エラーをより適切に制御できるため、エラーのデバッグや使いやすさなどの側面を改善できます。コンテンツプラットフォーム内では、Goのこの設計機能により、開発者はエラーに関する情報に基づいた決定を行うことができ、システム全体の信頼性が向上しました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データの整合性</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データの一貫性は、コンテンツプラットフォームの重要な要素です。エコノミストでは、コンテンツはビジネスの基盤であり、コンテンツプラットフォームの目標は、コンテンツを1回公開して、どこでも利用できるようにすることです。したがって、各製品および消費者がコンテンツプラットフォームAPIとデータの整合性を保つことが重要です。製品は主にAPIリクエストにGraphQLを使用します。これには、消費者とプラットフォーム間の一種の契約として機能する静的スキームが必要です。プラットフォームによって処理されるコンテンツは、このスキームと一致している必要があります。静的言語はこれを実装するのに役立ち、データの一貫性を容易に実現しました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goを使用したテスト</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一貫性を促進するもう1つの機能は、Goテストスイートです。 Goの高速なコンパイル時間と、言語の機能としてのファーストクラスのテストを組み合わせることで、チームは効果的なテスト方法を設計ワークフローに実装し、アセンブリパイプラインでの迅速な失敗を可能にしました。 Goのテストツールを使用すると、セットアップと実行が簡単になります。 「go test」を実行すると、現在のディレクトリですべてのテストが実行され、testコマンドにはいくつかの便利なフラグがあります。カバーフラグは、詳細なコードカバレッジレポートを提供します。 「ベンチ」テストはベンチマークテストを実行します。これは、「テスト」ではなく「ベンチ」という単語でテスト関数の名前を実行することによって示されます。 TestMain関数は、ダミー認証サーバーなど、追加のテストセットアップ用のメソッドを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、Goには、匿名の構造を持つ表形式のテストとインターフェースを持つスタブを作成する機能があり、テストのカバレッジが向上します。言語機能の点でテストは新しいものではありませんが、Goを使用すると、堅牢なテストを簡単に作成し、ワークフローに簡単に統合できます。 Economistのエンジニアは当初から、特別な構成なしでアセンブリパイプラインの一部としてテストを実行でき、GitHooksを追加して、コードをGithubにプッシュする前にテストを実行することもできました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、プロジェクトにはデータの一貫性を達成するための努力が欠かせませんでした。プラットフォームの最初の大きな問題は、予測不可能なバックエンドからの動的コンテンツの管理でした。プラットフォームは、主にJSONエンドポイントを介して元のCMSシステムのコンテンツを使用しますが、構造とデータタイプは保証されません。これは、プラットフォームが標準のGoパッケージを使用してJSONを解釈できないことを意味します。これは、構造へのJSON逆シリアル化をサポートしますが、構造体と入力データフィールドの型が一致しない場合、警告音を鳴らします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を克服するために、サーバー部分を標準形式にマップするための特別な方法が必要でした。選択したアプローチを数回繰り返した後、チームは独自の逆シリアル化プロセスを導入しました。このアプローチは標準ライブラリパッケージの作り直しに少し似ていますが、エンジニアはソースデータの処理を完全に制御できます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークサポート</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スケーラビリティは新しいプラットフォームの最前線にあり、これはネットワーキングおよびAPI用の標準のGoライブラリによって提供されました。 Goでは、フレームワークを必要とせずに、スケーラブルなHTTPエンドポイントをすばやく実装できます。以下の例では、net / http標準ライブラリパッケージを使用して、要求および応答ライターを受け入れるハンドラーを構成しています。コンテンツプラットフォームAPIが最初に実装されたときは、APIフレームワークを使用していました。チームは、追加の不要な妥協なしにすべてのネットワークニーズを満たしていることをチームが認めたため、最終的に標準ライブラリに置き換えられました。 Golang HTTPハンドラーはスケーラブルです。これは、ハンドラーへのすべての要求が、カスタマイズの必要がない軽量スレッドであるGoroutineで並列に実行されるためです。</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"net/http"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
    fmt.Fprintf(w, <span class="hljs-string">"Hello World!"</span>)<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    http.HandleFunc(<span class="hljs-string">"/"</span>, handler)<font></font>
    log.Fatal(http.ListenAndServe(<span class="hljs-string">":8080"</span>, <span class="hljs-literal">nil</span>))<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">並行性</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
モデルGo </font><b><font style="vertical-align: inherit;">並行性</font></b><font style="vertical-align: inherit;">モデルは、プラットフォーム全体のパフォーマンスを向上させる上で複数の利点をもたらしました。分散データでの作業には、消費者に約束された保証の混乱が伴います。 CAPの定理によれば、次の3つの保証のうち2つ以上を同時に提供することはできません。データの一貫性。可用性。分離に強い。エコノミストプラットフォームでは、最終的に一貫性が採用されました。つまり、データソースからの読み取りは最終的に一貫し、一貫した状態に達するすべてのデータソースの適度な遅延は許容されます。このギャップを最小化する1つの方法は、Goroutinesを使用することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GoroutineはGoランタイムによって制御される軽量スレッドで、スレッドが不足するのを防ぎます。 Goroutinesは、プラットフォームで非同期タスクを最適化することを許可しました。たとえば、プラットフォームのデータリポジトリの1つはElasticsearchです。システムでコンテンツが更新されると、Elasticsearchでこのアイテムを参照するコンテンツが更新され、インデックスが再作成されます。 Goroutinesの実装のおかげで、処理時間が短縮され、要素の迅速な一貫性が保証されました。この例は、再処理に適したアイテムがGoroutineで再処理される方法を示しています。</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reprocess</span><span class="hljs-params">(searchResult *http.Response)</span> <span class="hljs-params">(<span class="hljs-keyword">int</span>, error)</span></span> {<font></font>
	responses := <span class="hljs-built_in">make</span>([]response, <span class="hljs-built_in">len</span>(searchResult.Hits))	
	<span class="hljs-keyword">var</span> wg sync.WaitGroup<font></font>
	wg.Add(<span class="hljs-built_in">len</span>(responses))<font></font>
	<font></font>
	<span class="hljs-keyword">for</span> i, hit := <span class="hljs-keyword">range</span> searchResult.Hits {<font></font>
		wg.Add(<span class="hljs-number">1</span>)
		<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-keyword">int</span>, item elastic.SearchHit)</span></span> {
			<span class="hljs-keyword">defer</span> wg.Done()<font></font>
			code, err := reprocessItem(item)<font></font>
			responses[i].code = code<font></font>
			responses[i].err = err<font></font>
		}(i, *hit)<font></font>
	}<font></font>
	wg.Wait<font></font>
<font></font>
	<span class="hljs-keyword">return</span> http.StatusOK, <span class="hljs-literal">nil</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの設計は、単なるプログラミングではありません。エンジニアは、適切な場所とタイミングで、どのツールを理解する必要があります。 GoはThe Economistのコンテンツプラットフォームのほとんどのニーズにとって強力なツールでしたが、いくつかの制限により他のソリューションが必要でした。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存関係管理</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goがリリースされたばかりの時点では、依存関係管理システムはありませんでした。コミュニティ内では、このニーズを満たすためにいくつかのツールが開発されています。エコノミストはGitサブモジュールを使用しました。これは、コミュニティが標準の依存関係管理ツールを積極的に宣伝しているときに意味をなしました。今日、コミュニティはすでに依存関係管理への一貫したアプローチにかなり近づいていますが、それはありません。サブモジュールを使用したエコノミストアプローチでは深刻な問題は発生しませんでしたが、他のGo開発者にとっては困難でした。Goに切り替える際には、これを考慮する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goの機能やデザインが最適なソリューションではないプラットフォーム要件もありました。プラットフォームがオーディオ処理のサポートを追加したため、メタの抽出のためのGoのツールは当時は制限されていたため、チームは代わりにExiftool Pythonを選択しました。プラットフォームサービスはDockerコンテナーで機能します。これにより、ExiftoolをインストールしてGoアプリケーションから起動できます。</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">runExif</span><span class="hljs-params">(args []<span class="hljs-keyword">string</span>)</span> <span class="hljs-params">([]<span class="hljs-keyword">byte</span>, error)</span></span> {<font></font>
	cmdOut, err := exec.Command(<span class="hljs-string">"exiftool"</span>, args...).Output()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> cmdOut, <span class="hljs-literal">nil</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラットフォームのもう1つの一般的なシナリオは、ソースCMSシステムからの機能していないHTMLコードの受信、HTMLコードの正確性の分析、およびHTMLコードの健全化です。最初はこのプロセスにGoが使用されていましたが、Goの標準HTMLライブラリには正しいHTMLが必要であるため、処理前にHTMLを解析するには大量のカスタムコードが必要でした。このコードはすぐに脆弱になり、境界線のケースを見逃していたため、新しいソリューションがJavaScriptに実装されました。 JavaScriptは、HTMLのチェックとサニタイズのプロセスを制御するための優れた柔軟性と適応性を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptは、プラットフォームでのイベントのフィルタリングとルーティングにもよく使用されています。イベントはAWS Lambdaを使用してフィルタリングされます。これは、呼び出されたときにのみ実行される軽量の関数です。 1つの使用例は、高速や低速など、さまざまな帯域でイベントをフィルタリングすることです。このフィルタリングは、イベントハンドラーシェルJSONオブジェクトの単一のメタデータフィールドに基づいています。フィルタリングの実装では、JSON Javascriptポインターパッケージを使用して、JSONオブジェクトの要素をキャプチャしました。このアプローチは、Goが必要とするJSONを完全に分解するよりもはるかに効率的でした。このタイプの機能はGoで実現できますが、Javascriptを使用する方がエンジニアにとっては簡単であり、単純なラムダが提供されました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goの振り返り</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Contact Platformを実装して本番環境でサポートした後、Goとコンテンツプラットフォームの振り返りを行うと、私のレビューは次のようになり</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分散システムの主要な言語設計要素。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装が比較的簡単な並行性モデル。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">素敵なコーディングと楽しいコミュニティ。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何を改善できますか？</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン管理と自動販売の標準によるさらなる進歩。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部の地域では十分な成熟度がありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のユーザー事例の詳細。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、これは前向きな経験でした。Goは、コンテンツプラットフォームのスケーリングを可能にする最も重要な要素の1つです。</font><font style="vertical-align: inherit;">Goは常に適切なツールとは限りません。これは正常な動作です。</font><font style="vertical-align: inherit;">エコノミストはポリグロットプラットフォームを備えており、意味のある場所でさまざまな言語を使用しています。</font><font style="vertical-align: inherit;">テキストオブジェクトと動的コンテンツをいじる必要がある場合、Goがおそらく最良の選択になることはないでしょう。そのため、JavaScriptはまだツールボックスにあります。</font><font style="vertical-align: inherit;">ただし、Goの強みは、システムのスケーリングと進化を可能にする基盤です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goが適切かどうかを検討するときは、システム設計の重要な問題を考慮してください。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムのタスクは何ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消費者にどのような保証を提供しますか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムに適したアーキテクチャとパターンは何ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムはどのように拡張すべきですか？</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分散データ、非同期ワークフロー、および高いパフォーマンスとスケーラビリティの課題に対処するシステムを開発している場合は、システムの目標を加速するためのGoとその機能を検討することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
皆さん、コメントをお待ちしております。</font><font style="vertical-align: inherit;">16日にはYandexの上級開発者と、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Dmitry Smalと一緒に</font></a><font style="vertical-align: inherit;">開催される</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンウェビナーに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">皆を招待します</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja451746/index.html">エンジニアと建築家のためのMegaSlerm Kubernetes</a></li>
<li><a href="../ja451748/index.html">QsanアレイでのSSDステータスの監視</a></li>
<li><a href="../ja451750/index.html">本「Elasticsearch、Kibana、Logstash、および次世代検索エンジン」</a></li>
<li><a href="../ja451752/index.html">蔓延する不安の30周年</a></li>
<li><a href="../ja451758/index.html">Intel C620システムロジックアーキテクチャの追加のアップリンク</a></li>
<li><a href="../ja451766/index.html">Heisenbug 2019 Piter：無料放送で何が起こり、イベントでのみ何が起こるか</a></li>
<li><a href="../ja451768/index.html">Wi-Fiの作業を改善します。一般原則と役立つもの</a></li>
<li><a href="../ja451770/index.html">Veeam Backup＆Replication：バックアップとレプリカを実行可能にするための便利なヒント</a></li>
<li><a href="../ja451772/index.html">Clouderaの特別な点とその調理方法</a></li>
<li><a href="../ja451776/index.html">Googleスプレッドシートでロールプレイングエンジンをプログラムする方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>