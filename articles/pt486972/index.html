<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÖ±Ô∏è üñêüèø üåª √Årvores de express√£o em C # usando um exemplo de localiza√ß√£o de uma derivada (Expression Tree Visitor vs Pattern matching) üë®‚Äçüë©‚Äçüë¶ üå•Ô∏è ‚úã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dia bom. As √°rvores de express√£o, especialmente quando combinadas com o padr√£o Visitor, sempre foram um t√≥pico bastante confuso. Portanto, quanto mais...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>√Årvores de express√£o em C # usando um exemplo de localiza√ß√£o de uma derivada (Expression Tree Visitor vs Pattern matching)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486972/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dia bom. </font><font style="vertical-align: inherit;">As √°rvores de express√£o, especialmente quando combinadas com o padr√£o Visitor, sempre foram um t√≥pico bastante confuso. </font><font style="vertical-align: inherit;">Portanto, quanto mais informa√ß√µes diversas sobre esse t√≥pico, mais exemplos, mais f√°cil ser√° para aqueles que est√£o interessados ‚Äã‚Äãem encontrar algo que seja claro e √∫til para eles.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xt/6c/bf/xt6cbf1-gfkv4-64zs250n_-7pa.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O artigo foi criado como de costume - come√ßa com a estrutura conceitual e as defini√ß√µes e termina com exemplos e formas de uso. </font><font style="vertical-align: inherit;">Sum√°rio abaixo. </font></font><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No√ß√µes b√°sicas sobre √°rvores de express√£o </font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaxe das √°rvores de express√£o </font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de </font></font></a></b><font style="vertical-align: inherit;"><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">express√£o </font></a></b></font><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correspond√™ncia de </font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visitantes ing√™nuos Visitante </font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cl√°ssico</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bem, o objetivo n√£o √© impor uma solu√ß√£o espec√≠fica ou dizer que uma √© melhor que a outra. </font><font style="vertical-align: inherit;">Proponho tirar conclus√µes, levando em conta todas as nuances do seu caso. </font><font style="vertical-align: inherit;">Vou expressar minha opini√£o no meu exemplo.</font></font><br>
<br>
<a name="basic"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årvores de express√£o</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O b√°sico</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro voc√™ precisa lidar com √°rvores de express√£o. Eles significam o tipo de express√£o ou qualquer um de seus herdeiros (ser√£o discutidos mais adiante). No cen√°rio usual, a express√£o / algoritmos s√£o apresentados na forma de c√≥digo / instru√ß√µes execut√°veis ‚Äã‚Äãcom as quais o usu√°rio pode n√£o ter muito o que fazer (principalmente executar). O tipo Express√£o permite representar uma express√£o / algoritmo (geralmente lambdas, mas n√£o necess√°rio) como dados organizados em uma estrutura de √°rvore √† qual o usu√°rio tem acesso. A maneira semelhante a uma √°rvore de organizar informa√ß√µes sobre o algoritmo e o nome da classe nos fornece "√°rvores de express√£o". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para maior clareza, analisaremos um exemplo simples. Suponha que tenhamos lambda </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(x) =&gt; Console.WriteLine (x + 5)</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Isso pode ser representado como a seguinte √°rvore</font></font><br>
<br>
<div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/yv/wy/sq/yvwysqugbtttw-gvz07tipuq-oy.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A raiz da √°rvore √© a parte superior do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MethodCall</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , os par√¢metros do m√©todo tamb√©m s√£o express√µes, portanto, pode ter qualquer n√∫mero de filhos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No nosso caso, existe apenas um descendente - o pico da " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opera√ß√£o Aritm√©tica</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Ele cont√©m informa√ß√µes sobre que tipo de opera√ß√£o √© e os operandos esquerdo e direito tamb√©m s√£o express√µes. Esse v√©rtice sempre ter√° 2 descendentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os operandos s√£o representados por uma constante ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Constante</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) e um par√¢metro ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metro</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Tais express√µes n√£o t√™m descendentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estes s√£o exemplos muito simplificados, mas refletem completamente a ess√™ncia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A principal caracter√≠stica das √°rvores de express√£o √© que elas podem ser analisadas e ler todas as informa√ß√µes necess√°rias sobre o que o algoritmo deve fazer. De algum ponto de vista, isso √© o oposto de atributos. Os atributos s√£o um meio de descri√ß√£o declarativa do comportamento (muito condicional, mas o objetivo final √© aproximadamente o mesmo). Enquanto as √°rvores de express√£o est√£o usando uma fun√ß√£o / algoritmo para descrever dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles s√£o usados, por exemplo, em </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">provedores de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estrutura de entidade. A aplica√ß√£o √© √≥bvia - analisar a √°rvore de express√µes, entender o que deve ser executado l√° e criar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> partir dessa descri√ß√£o </font><font style="vertical-align: inherit;">. Menos exemplos bem conhecidos s√£o o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MOQ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> biblioteca para moking </font><font style="vertical-align: inherit;">. As √°rvores de express√£o tamb√©m s√£o usadas no </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DLR.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(tempo de execu√ß√£o din√¢mico do idioma). </font><font style="vertical-align: inherit;">Os desenvolvedores de compiladores os usam para garantir a compatibilidade entre a natureza din√¢mica e o dotnet, em vez de gerar o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MSIL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m vale ressaltar que as √°rvores de express√£o s√£o imut√°veis.</font></font><br>
<a name="syn"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaxe</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pr√≥xima coisa que vale a pena discutir √© a sintaxe. </font><font style="vertical-align: inherit;">Existem 2 maneiras principais:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando √°rvores de express√£o atrav√©s de m√©todos est√°ticos da classe Expression</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando express√µes lambda compiladas em Expression</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos est√°ticos da classe Expression</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criar √°rvores de express√£o atrav√©s de m√©todos est√°ticos da classe Expression √© menos usado (principalmente do ponto de vista do usu√°rio). Isso √© complicado, mas bastante simples, temos </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
muitos tijolos b√°sicos </font><font style="vertical-align: inherit;">√† nossa </font><font style="vertical-align: inherit;">disposi√ß√£o, dos quais √© poss√≠vel construir </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
coisas </font><font style="vertical-align: inherit;">bastante complexas </font><font style="vertical-align: inherit;">. A cria√ß√£o acontece atrav√©s de m√©todos est√°ticos, pois construtores de express√£o t√™m um modificador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interno</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . E isso n√£o significa que voc√™ precise descobrir a reflex√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como exemplo, vou criar uma express√£o a partir do exemplo acima: </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(x) =&gt; Console.WriteLine (x + 5)</font></font></i></b><br>
<br>
<pre><code class="cs hljs">ParameterExpression parameter = Expression.Parameter(<span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
ConstantExpression constant = Expression.Constant(<span class="hljs-number">5</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
BinaryExpression <span class="hljs-keyword">add</span> = Expression.Add(parameter, constant);<font></font>
MethodInfo writeLine = <span class="hljs-keyword">typeof</span>(Console).GetMethod(<span class="hljs-keyword">nameof</span>(Console.WriteLine), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });<font></font>
MethodCallExpression methodCall = Expression.Call(<span class="hljs-literal">null</span>, writeLine, <span class="hljs-keyword">add</span>);<font></font>
Expression&lt;Action&lt;<span class="hljs-keyword">double</span>&gt;&gt; expressionlambda = Expression.Lambda&lt;Action&lt;<span class="hljs-keyword">double</span>&gt;&gt;(methodCall, parameter);<font></font>
Action&lt;<span class="hljs-keyword">double</span>&gt; delegateLambda = expressionlambda.Compile();<font></font>
delegateLambda(<span class="hljs-number">123321</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso pode n√£o ser uma maneira muito conveniente, mas reflete completamente a estrutura interna das √°rvores de express√£o. </font><font style="vertical-align: inherit;">Al√©m disso, esse m√©todo fornece mais recursos e recursos que podem ser usados ‚Äã‚Äãem √°rvores de express√£o: de loops, condi√ß√µes, try-catch, goto, atribui√ß√£o, terminando com blocos de falha, informa√ß√µes de depura√ß√£o para pontos de interrup√ß√£o, din√¢mico, etc.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Express√£o lambda</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usar lambdas como express√µes √© uma maneira mais frequente. </font><font style="vertical-align: inherit;">Funciona de maneira muito simples - o compilador inteligente no est√°gio de compila√ß√£o examina para que o lambda √© usado. </font><font style="vertical-align: inherit;">E o compila em um delegado ou em uma express√£o. </font><font style="vertical-align: inherit;">Em um exemplo j√° dominado, tem a seguinte apar√™ncia</font></font><br>
<br>
<pre><code class="cs hljs">Expression&lt;Action&lt;<span class="hljs-keyword">double</span>&gt;&gt; write =  =&gt; Console.WriteLine( + <span class="hljs-number">5</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale a pena esclarecer isso - uma express√£o √© uma descri√ß√£o exaustiva. </font><font style="vertical-align: inherit;">E √© o suficiente para </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
obter o resultado. </font><font style="vertical-align: inherit;">√Årvores de express√£o como LambdaExpression ou seus descendentes podem ser </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
convertidas em uma IL execut√°vel. </font><font style="vertical-align: inherit;">Os demais tipos n√£o podem ser convertidos diretamente em c√≥digo execut√°vel (mas isso n√£o faz muito sentido). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, se algu√©m critica a compila√ß√£o r√°pida de uma express√£o, voc√™ pode dar uma olhada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projeto de terceiros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O inverso n√£o √© verdadeiro no caso geral. </font><font style="vertical-align: inherit;">Um delegado n√£o pode apenas busc√°-lo e se apresentar como uma express√£o (mas isso ainda √© poss√≠vel). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nem todas as lambdas podem ser convertidas em √°rvores de express√£o. </font><font style="vertical-align: inherit;">Esses incluem:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operador de atribui√ß√£o contendo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contribuindo din√¢mico</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ass√≠ncrono</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com corpo (aparelho)</font></font></li>
</ul><br>
<pre><code class="cs hljs"><span class="hljs-keyword">double</span> variable;
<span class="hljs-keyword">dynamic</span> <span class="hljs-keyword">dynamic</span>;<font></font>
Expression&lt;Action&gt; assignment = () =&gt; variable = <span class="hljs-number">5</span>; <span class="hljs-comment">//Compiler error: An expression tree may not contain an assignment operator</span>
Expression&lt;Func&lt;<span class="hljs-keyword">double</span>&gt;&gt; dynamically = () =&gt; <span class="hljs-keyword">dynamic</span>; <span class="hljs-comment">//Compiler error: An expression tree may not contain a dynamic operation</span>
Expression&lt;Func&lt;Task&gt;&gt; asynchon = <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">await</span> Task.CompletedTask; <span class="hljs-comment">//Compiler error: Async lambda cannot be converted to expresiion trees</span>
Expression&lt;Action&gt; body = () =&gt; { }; <span class="hljs-comment">//Compiler error: A lambda expression with a statement body cannot be converted to an expression tree</span>
</code></pre> <br>
<a name="types"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de express√µes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sugiro uma r√°pida olhada nos tipos dispon√≠veis para representar quais oportunidades temos. </font><font style="vertical-align: inherit;">Todos eles est√£o no espa√ßo de nome </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System.Linq.Expressions.Eu</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
sugiro que voc√™ se familiarize primeiro com v√°rios recursos realmente interessantes e incomuns. </font><font style="vertical-align: inherit;">Os tipos mais simples de express√µes que reuni em um tablet com uma breve descri√ß√£o.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Din√¢mico</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando DynamicExpression, √© poss√≠vel usar din√¢mico e todos os seus recursos em √°rvores de express√£o. </font><font style="vertical-align: inherit;">H√° uma API bastante confusa, fiquei neste exemplo por mais tempo do que em todos os outros combinados. </font><font style="vertical-align: inherit;">Toda a confus√£o √© fornecida por v√°rias bandeiras. </font><font style="vertical-align: inherit;">E alguns deles s√£o semelhantes aos que voc√™ est√° procurando, mas n√£o s√£o necessariamente. </font><font style="vertical-align: inherit;">E ao trabalhar com din√¢mico em √°rvores de express√£o, √© dif√≠cil obter um erro de fala. </font><font style="vertical-align: inherit;">Exemplo:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> parameter1 = Expression.Parameter(<span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">object</span>), <span class="hljs-string">"name1"</span>);
<span class="hljs-keyword">var</span> parameter2 = Expression.Parameter(<span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">object</span>), <span class="hljs-string">"name2"</span>); 
<span class="hljs-keyword">var</span> dynamicParam1 = CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, <span class="hljs-literal">null</span>);
<span class="hljs-keyword">var</span> dynamicParam2 = CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, <span class="hljs-literal">null</span>);<font></font>
CallSiteBinder csb = Microsoft.CSharp.RuntimeBinder.Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, <span class="hljs-keyword">typeof</span>(Program), <span class="hljs-keyword">new</span>[] { dynamicParam1, dynamicParam2 });
<span class="hljs-keyword">var</span> dyno = Expression.Dynamic(csb, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">object</span>), parameter1, parameter2);<font></font>
Expression&lt;Func&lt;<span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>&gt;&gt; expr = Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>&gt;&gt;(dyno, <span class="hljs-keyword">new</span>[] { parameter1, parameter2 });<font></font>
Func&lt;<span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>&gt; action = expr.Compile();
<span class="hljs-keyword">var</span> res = action(<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>);<font></font>
Console.WriteLine(res); <span class="hljs-comment">//12</span>
res = action(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<font></font>
Console.WriteLine(res); <span class="hljs-comment">//3</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu indiquei explicitamente de onde o Fich√°rio vem para evitar confus√£o com o Fich√°rio do System.Reflection. </font><font style="vertical-align: inherit;">Entre as coisas interessantes, podemos fazer par√¢metros ref e out, par√¢metros nomeados, opera√ß√µes un√°rias e basicamente tudo o que pode ser feito atrav√©s da din√¢mica, mas isso exigir√° alguma habilidade.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blocos de captura de exce√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda coisa na qual prestarei aten√ß√£o √© a funcionalidade try / catch / finalmente / fault, ou melhor, o fato de </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
termos acesso ao bloco de falhas. </font><font style="vertical-align: inherit;">Ele n√£o est√° dispon√≠vel em C #, mas est√° em MSIL.Este √© um tipo de </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
finalmente anal√≥gico que ser√° executado em caso de qualquer exce√ß√£o. </font><font style="vertical-align: inherit;">No exemplo abaixo, uma exce√ß√£o ser√° lan√ßada, ap√≥s a qual ‚ÄúHi‚Äù ser√° exibido e o programa aguardar√° a entrada. </font><font style="vertical-align: inherit;">Somente depois disso cair√° completamente. </font><font style="vertical-align: inherit;">Eu n√£o recomendo esta pr√°tica para uso.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> throwSmth = Expression.Throw(Expression.Constant(<span class="hljs-keyword">new</span> Exception(), <span class="hljs-keyword">typeof</span>(Exception)));
<span class="hljs-keyword">var</span> log = Expression.Call(<span class="hljs-literal">null</span>, <span class="hljs-keyword">typeof</span>(Console).GetMethod(<span class="hljs-keyword">nameof</span>(Console.WriteLine), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">string</span>) }), Expression.Constant(<span class="hljs-string">"Hi"</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">string</span>)));
<span class="hljs-keyword">var</span> read = Expression.Call(<span class="hljs-literal">null</span>, <span class="hljs-keyword">typeof</span>(Console).GetMethod(<span class="hljs-keyword">nameof</span>(Console.ReadLine)));
<span class="hljs-keyword">var</span> fault = Expression.TryFault(throwSmth, Expression.Block(<span class="hljs-keyword">new</span>[] { log, read }));<font></font>
Expression&lt;Action&gt; expr = Expression.Lambda&lt;Action&gt;(fault);<font></font>
Action compiledExpression = expr.Compile();<font></font>
compiledExpression();<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breve descri√ß√£o dos tipos de √°rvore de express√£o dispon√≠veis</font></font></b><div class="spoiler_text"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesa</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um tipo</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pequena descri√ß√£o</font></font></th>
</tr>
<tr>
<td colspan="2" align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O principal</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Express√£o</font></font></td>
<td> ,      .     ,      </td>
</tr>
<tr>
<td>Expression&lt;TDelegate&gt;</td>
<td>    </td>
</tr>
<tr>
<td colspan="2" align="center"><b> </b></td>
</tr>
<tr>
<td>BinaryExpression</td>
<td>     (+, ‚Äî  )</td>
</tr>
<tr>
<td>UnaryExpression</td>
<td> (+, -),    throw</td>
</tr>
<tr>
<td>ConstantExpression</td>
<td> ‚Äî   </td>
</tr>
<tr>
<td>ParameterExpression</td>
<td> </td>
</tr>
<tr>
<td>MethodCallExpression</td>
<td>  ,  MethodInfo</td>
</tr>
<tr>
<td>IndexExpression</td>
<td></td>
</tr>
<tr>
<td>BlockExpression</td>
<td>,   .      </td>
</tr>
<tr>
<td colspan="2" align="center"><b>  </b></td>
</tr>
<tr>
<td>ConditionalExpression </td>
<td>   ‚Äî if-else</td>
</tr>
<tr>
<td>LabelTarget</td>
<td>   goto</td>
</tr>
<tr>
<td>LabelExpression</td>
<td> ,            .    LabelTarget.    ,    GotoExpression,    ‚Äî   .    void,    .</td>
</tr>
<tr>
<td>GotoExpression</td>
<td>  .    . ( .. ¬´break¬ª)</td>
</tr>
<tr>
<td>LoopExpression</td>
<td> ,    ¬´break¬ª</td>
</tr>
<tr>
<td>SwitchCase</td>
<td>    SwitchExpression</td>
</tr>
<tr>
<td>SwitchExpression</td>
<td>  switch/case</td>
</tr>
<tr>
<td>TryExpression</td>
<td>    try/catch/finally/fault </td>
</tr>
<tr>
<td>CatchBlock</td>
<td>,   ,    </td>
</tr>
<tr>
<td colspan="2" align="center"><b></b></td>
</tr>
<tr>
<td>ElementInit</td>
<td>    IEnumerable.   ListInitExpression</td>
</tr>
<tr>
<td>ListInitExpression</td>
<td>  +   </td>
</tr>
<tr>
<td>DefaultExpression</td>
<td>       </td>
</tr>
<tr>
<td>NewArrayExpression</td>
<td>   +  </td>
</tr>
<tr>
<td>NewExpression</td>
<td> </td>
</tr>
<tr>
<td colspan="2" align="center"><b>  /</b></td>
</tr>
<tr>
<td>MemberAssignment</td>
<td>    </td>
</tr>
<tr>
<td>MemberBinding</td>
<td>  ,    ,  ,        </td>
</tr>
<tr>
<td>MemberExpression</td>
<td>  /</td>
</tr>
<tr>
<td>MemberInitExpression</td>
<td>      </td>
</tr>
<tr>
<td>MemberListBinding</td>
<td> /  </td>
</tr>
<tr>
<td>MemberMemberBinding</td>
<td> / ,    /</td>
</tr>
<tr>
<td colspan="2" align="center"><b></b></td>
</tr>
<tr>
<td>LambdaExpression</td>
<td></td>
</tr>
<tr>
<td>InvocationExpression</td>
<td>   -    </td>
</tr>
<tr>
<td>DebugInfoExpression</td>
<td>       .         </td>
</tr>
<tr>
<td>SymbolDocumentInfo</td>
<td>       ,        .</td>
</tr>
<tr>
<td>DynamicExpression</td>
<td>   ( )</td>
</tr>
<tr>
<td>RuntimeVariablesExpression</td>
<td>   /    </td>
</tr>
<tr>
<td>TypeBinaryExpression</td>
<td>,      (is)</td>
</tr>
</tbody></table></div><br>
      <br>
<br>
<ul>
<li>ExpressionVisitor ‚Äî     .  .</li>
<li>DynamicExpressionVisitor ‚Äî      DynamicExpression ( VisitDynamic)</li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta informa√ß√£o √© suficiente para come√ßar a comparar os m√©todos de trabalho com √°rvores de express√£o. </font><font style="vertical-align: inherit;">Decidi analisar tudo isso pelo exemplo de encontrar a derivada. </font><font style="vertical-align: inherit;">N√£o previ todas as op√ß√µes poss√≠veis - apenas b√°sicas. </font><font style="vertical-align: inherit;">Mas se, por algum motivo, algu√©m decidiu modific√°-lo e us√°-lo, ficarei feliz em compartilhar as melhorias atrav√©s da solicita√ß√£o ao meu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reposit√≥rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="pm"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correspond√™ncia de padr√µes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a tarefa √© fazer um c√°lculo de derivadas. </font><font style="vertical-align: inherit;">Voc√™ pode estimar o seguinte: existem algumas regras para encontrar a derivada para diferentes tipos de opera√ß√µes - multiplica√ß√£o, divis√£o etc. </font><font style="vertical-align: inherit;">Dependendo da opera√ß√£o, voc√™ deve selecionar uma f√≥rmula espec√≠fica. </font><font style="vertical-align: inherit;">Em uma formula√ß√£o t√£o banal, a tarefa √© idealmente colocada em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switch / case</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">E na vers√£o mais recente do idioma, fomos apresentados com switch / case 2.0 ou </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspond√™ncia de padr√µes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil discutir algo aqui. </font><font style="vertical-align: inherit;">Em um hub, essa quantidade de c√≥digo parece complicada e mal lida, por isso sugiro olhar para o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para um exemplo de derivado, ficou assim:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo</font></font></b><div class="spoiler_text"><pre><code class="cs hljs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PatterntMatchingDerivative</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _pow = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Pow));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _log = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Log), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _zero = Expression.Constant(<span class="hljs-number">0</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _one = Expression.Constant(<span class="hljs-number">1</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
		<font></font>
        <span class="hljs-keyword">public</span> Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; ParseDerivative(Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; function)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt;(ParseDerivative(function.Body), function.Parameters);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> Expression <span class="hljs-title">ParseDerivative</span>(<span class="hljs-params">Expression function</span>)</span> =&gt; function <span class="hljs-keyword">switch</span><font></font>
        {<font></font>
            BinaryExpression binaryExpr =&gt; function.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Add =&gt; Expression.Add(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
                ExpressionType.Subtract =&gt; Expression.Subtract(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
<font></font>
                ExpressionType.Multiply =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{	<font></font>
	  	    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression _) =&gt; constant,<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; constant,<font></font>
		    _ =&gt; Expression.Add(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right)))<font></font>
		},<font></font>
<font></font>
                ExpressionType.Divide =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{<font></font>
		    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression parameter) =&gt; Expression.Divide(constant, Expression.Multiply(parameter, parameter)),<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; Expression.Divide(_one, constant),<font></font>
		    _ =&gt; Expression.Divide(Expression.Subtract(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right))), Expression.Multiply(binaryExpr.Right, binaryExpr.Right))<font></font>
	        },<font></font>
            },<font></font>
            MethodCallExpression methodCall <span class="hljs-keyword">when</span> methodCall.Method == _pow =&gt; (methodCall.Arguments[<span class="hljs-number">0</span>], methodCall.Arguments[<span class="hljs-number">1</span>]) <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                (ConstantExpression constant, ParameterExpression _) =&gt; Expression.Multiply(methodCall, Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
                (ParameterExpression param, ConstantExpression constant) =&gt; Expression.Multiply(constant, Expression.Call(<span class="hljs-literal">null</span>, _pow, param, Expression.Constant((<span class="hljs-keyword">double</span>)constant.Value - <span class="hljs-number">1</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>)))),<font></font>
                (ConstantExpression constant, Expression expression) =&gt; Expression.Multiply(Expression.Multiply(ParseDerivative(expression), methodCall), Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
             },<font></font>
             _ =&gt; function.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Constant =&gt; _zero,<font></font>
                ExpressionType.Parameter =&gt; _one,<font></font>
                _ =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> OutOfMemoryException(<span class="hljs-string">"Bitmap best practice"</span>)<font></font>
             }<font></font>
        };<font></font>
    }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece um pouco incomum, mas interessante. </font><font style="vertical-align: inherit;">Foi um prazer escrever isso - todas as condi√ß√µes se encaixam organicamente em uma linha. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O exemplo fala por si, voc√™ n√£o pode descrev√™-lo melhor com palavras.</font></font><br>
<a name="nv"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitante ing√™nuo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em tal tarefa, um visitante da √°rvore de express√£o vem √† mente imediatamente, o que faz muito barulho </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e um pouco de p√¢nico entre os f√£s para discutir a agilidade na cozinha. </font><font style="vertical-align: inherit;">‚ÄúN√£o temas a ignor√¢ncia, mas o falso conhecimento. </font><font style="vertical-align: inherit;">√â melhor n√£o saber nada do que considerar a verdade aquilo que n√£o √© verdade. " </font><font style="vertical-align: inherit;">Lembrando-se desta maravilhosa frase de Tolstoi, reconhecendo a ignor√¢ncia e contando com o apoio do Google, voc√™ pode encontrar o seguinte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tenho esse link √© o primeiro (depois da Sib√©ria em 1949) para a consulta "Visitante da √°rvore de express√µes". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä primeira vista, √© exatamente disso que precisamos. </font><font style="vertical-align: inherit;">O t√≠tulo do artigo se encaixa no que queremos fazer, e as classes nos exemplos s√£o nomeadas com o sufixo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s revisar o artigo e fazer, por analogia ao nosso exemplo com derivativos, obtemos: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link para o github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo</font></font></b><div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomDerivativeExpressionTreeVisitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; Visit(Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; function)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt;(Visitor.CreateFromExpression(function.Body).Visit(), function.Parameters);<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> MethodInfo Pow = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Pow));
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> MethodInfo Log = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Log), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">readonly</span> ConstantExpression Zero = Expression.Constant(<span class="hljs-number">0</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">readonly</span> ConstantExpression One = Expression.Constant(<span class="hljs-number">1</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Visitor <span class="hljs-title">CreateFromExpression</span>(<span class="hljs-params">Expression node</span>)</span>
            =&gt; node <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                BinaryExpression be =&gt; <span class="hljs-keyword">new</span> BinaryVisitor(be),<font></font>
                MethodCallExpression mce <span class="hljs-keyword">when</span> mce.Method == Pow =&gt; <span class="hljs-keyword">new</span> PowMethodCallVisitor(mce),<font></font>
                _ =&gt; <span class="hljs-keyword">new</span> SimpleVisitor(node),<font></font>
            };<font></font>
        <font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BinaryVisitor</span> : <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> BinaryExpression _node;<font></font>
        <font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BinaryVisitor</span>(<span class="hljs-params">BinaryExpression node</span>)</span><font></font>
        {<font></font>
            _node = node;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>
            =&gt; _node.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Add =&gt; Expression.Add(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
                ExpressionType.Subtract =&gt; Expression.Subtract(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
<font></font>
                ExpressionType.Multiply =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{	<font></font>
	  	    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression _) =&gt; constant,<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; constant,<font></font>
		    _ =&gt; Expression.Add(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right)))<font></font>
		},<font></font>
<font></font>
                ExpressionType.Divide =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{<font></font>
		    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression parameter) =&gt; Expression.Divide(constant, Expression.Multiply(parameter, parameter)),<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; Expression.Divide(_one, constant),<font></font>
		    _ =&gt; Expression.Divide(Expression.Subtract(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right))), Expression.Multiply(binaryExpr.Right, binaryExpr.Right))<font></font>
	        },<font></font>
            };<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PowMethodCallVisitor</span> : <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodCallExpression _node;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PowMethodCallVisitor</span>(<span class="hljs-params">MethodCallExpression node</span>)</span><font></font>
        {<font></font>
            _node = node;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>
            =&gt; (_node.Arguments[<span class="hljs-number">0</span>], _node.Arguments[<span class="hljs-number">1</span>]) <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                (ConstantExpression constant, ParameterExpression _) =&gt; Expression.Multiply(_node, Expression.Call(<span class="hljs-literal">null</span>, Log, constant)),<font></font>
                (ParameterExpression param, ConstantExpression constant) =&gt; Expression.Multiply(constant, Expression.Call(<span class="hljs-literal">null</span>, Pow, param, Expression.Constant((<span class="hljs-keyword">double</span>)constant.Value - <span class="hljs-number">1</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>)))),<font></font>
                (ConstantExpression constant, Expression expression) =&gt; Expression.Multiply(Expression.Multiply(CreateFromExpression(expression).Visit(), _node), Expression.Call(<span class="hljs-literal">null</span>, Log, constant)),<font></font>
            };<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SimpleVisitor</span> : <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Expression _node;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SimpleVisitor</span>(<span class="hljs-params">Expression node</span>)</span><font></font>
        {<font></font>
            _node = node;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>
            =&gt; _node.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Constant =&gt; Zero,<font></font>
                ExpressionType.Parameter =&gt; One,<font></font>
            };<font></font>
    }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato - espalhamos os casos de troca para diferentes classes. </font><font style="vertical-align: inherit;">N√£o havia menos deles, a magia n√£o apareceu. </font><font style="vertical-align: inherit;">Nos mesmos casos, muito mais falas. </font><font style="vertical-align: inherit;">E onde est√° o prometido despacho de expedi√ß√£o dupla?</font></font><br>
<a name="cv"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitante cl√°ssico e expedi√ß√£o dupla</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui vale a pena falar sobre o pr√≥prio modelo do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visitante</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tamb√©m √© o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© a base do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visitante da √°rvore Expression</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Vamos analis√°-lo apenas no exemplo de √°rvores de express√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por um segundo, suponha que projetemos √°rvores de express√£o. Queremos oferecer aos usu√°rios a capacidade de iterar pela √°rvore de express√µes e, dependendo dos tipos de n√≥s (tipos de express√£o), executar determinadas a√ß√µes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira op√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© n√£o fazer nada. Ou seja, force os usu√°rios a usar switch / case. Esta n√£o √© uma op√ß√£o t√£o ruim. Mas aqui h√° uma nuance: espalhamos a l√≥gica respons√°vel por um tipo espec√≠fico. Simplificando, polimorfismo e desafios virtuais ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tamb√©m conhecido como encaderna√ß√£o tardia)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) tornam poss√≠vel mudar a defini√ß√£o de tipo para o tempo de execu√ß√£o e remover essas verifica√ß√µes do nosso c√≥digo. Basta que tenhamos uma l√≥gica que crie uma inst√¢ncia do tipo desejado, ent√£o tudo ser√° feito pelo tempo de execu√ß√£o para n√≥s. </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A segunda op√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A solu√ß√£o √≥bvia √© colocar a l√≥gica em m√©todos virtuais. Substituindo o m√©todo virtual em cada sucessor, podemos esquecer o switch / case. O mecanismo das chamadas polim√≥rficas vai decidir por n√≥s. A tabela de m√©todos funcionar√° aqui, os m√©todos ser√£o chamados pelo deslocamento nela. Mas este √© um t√≥pico para um artigo inteiro, ent√£o n√£o vamos nos deixar levar. M√©todos virtuais parecem resolver nosso problema. Mas, infelizmente, eles criam outro. Para nossa tarefa, poder√≠amos adicionar o m√©todo GetDeriviative (). Mas agora as pr√≥prias classes de express√£o parecem estranhas. Poder√≠amos adicionar esses m√©todos para todas as ocasi√µes, mas eles n√£o se encaixam na l√≥gica geral da classe. E ainda n√£o tivemos a oportunidade de fazer algo semelhante aos usu√°rios (de maneira adequada, √© claro). Precisamos permitir que o usu√°rio defina a l√≥gica para cada tipo espec√≠fico,mas mantenha o polimorfismo (que est√° dispon√≠vel para n√≥s).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somente os esfor√ßos do usu√°rio para fazer isso n√£o ter√£o √™xito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â aqui que o verdadeiro visitante se encontra. </font><font style="vertical-align: inherit;">No tipo b√°sico de hierarquia (Express√£o no nosso caso), definimos um m√©todo da forma</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">virtual</span> Expression <span class="hljs-title">Accept</span>(<span class="hljs-params">ExpressionVisitor visitor</span>)</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos herdeiros, esse m√©todo ser√° substitu√≠do. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pr√≥prio ExpressionVisitor √© uma classe base que cont√©m um m√©todo virtual com a mesma assinatura </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para cada tipo de hierarquia. </font><font style="vertical-align: inherit;">No exemplo da classe ExpressionVisitor - VisitBinary (...), VisitMethodCall (...), VisitConstant (...), VisitParameter (...). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses m√©todos s√£o chamados na classe correspondente da nossa hierarquia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa. </font><font style="vertical-align: inherit;">O m√©todo Accept na classe BinaryExpression ter√° a seguinte apar√™ncia:</font></font><br>
<br>
<pre><code class="cs hljs">	
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">internal</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Accept</span>(<span class="hljs-params">ExpressionVisitor visitor</span>)</span><font></font>
{<font></font>
        <span class="hljs-keyword">return</span> visitor.VisitBinary(<span class="hljs-keyword">this</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, para definir um novo comportamento, o usu√°rio precisa apenas criar um herdeiro da classe ExpressionVisitor, na qual os m√©todos correspondentes para resolver um problema ser√£o redefinidos. No nosso caso, um DerivativeExpressionVisitor √© criado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, temos alguns objetos dos sucessores da Express√£o, mas quais s√£o desconhecidos, mas n√£o necess√°rios.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chamamos o m√©todo Accept virtual com a implementa√ß√£o ExpressionVisitor de que precisamos, ou seja, com DerivativeExpressionVisitor. Gra√ßas ao envio din√¢mico, uma implementa√ß√£o substitu√≠da do Accept √© chamada, como um tempo de execu√ß√£o, digamos BinaryExpression. No corpo desse m√©todo, entendemos perfeitamente que estamos na BinaryExpression, mas n√£o sabemos qual sucessor do ExpressionVisitor veio at√© n√≥s. Mas desde O VisitBinary tamb√©m √© virtual, n√£o precisamos saber. Novamente, simplesmente chamamos a refer√™ncia para a classe base, a chamada √© enviada dinamicamente (em tempo de execu√ß√£o) e uma implementa√ß√£o VisitBinary substitu√≠da do tipo de tempo de execu√ß√£o √© chamada. Chega de expedi√ß√£o dupla - pingue-pongue no estilo de "voc√™ faz" - "n√£o, voc√™". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que isso nos d√°. De fato, isso permite ‚Äúadicionar‚Äù m√©todos virtuais de fora, n√£o de</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mudando de classe. </font><font style="vertical-align: inherit;">Parece √≥timo, mas tem suas desvantagens:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alguns esquerdistas na forma do m√©todo Accept, respons√°vel por tudo e por nada ao mesmo tempo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O efeito cascata de uma boa fun√ß√£o de hash √© que, se voc√™ adicionar apenas um herdeiro √† hierarquia, na pior das hip√≥teses, todos ter√£o que terminar seus visitantes</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas a natureza das √°rvores de express√£o permite esses custos devido √†s especificidades do trabalho com express√µes, porque esse tipo de solu√ß√£o alternativa √© um dos principais recursos. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voc√™ pode ver todos os m√©todos dispon√≠veis para sobrecarga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, vamos ver como fica no final. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link para o github.</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo</font></font></b><div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BuildinExpressionTreeVisitor</span> : <span class="hljs-title">ExpressionVisitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _pow = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Pow));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _log = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Log), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _zero = Expression.Constant(<span class="hljs-number">0</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _one = Expression.Constant(<span class="hljs-number">1</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
<font></font>
        <span class="hljs-keyword">public</span> Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; GetDerivative(Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; function)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt;(Visit(function.Body), function.Parameters);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitBinary</span>(<span class="hljs-params">BinaryExpression binaryExpr</span>)</span>
            =&gt; binaryExpr.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Add =&gt; Expression.Add(Visit(binaryExpr.Left), Visit(binaryExpr.Right)),<font></font>
                ExpressionType.Subtract =&gt; Expression.Subtract(Visit(binaryExpr.Left), Visit(binaryExpr.Right)),<font></font>
<font></font>
                ExpressionType.Multiply <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; _zero,<font></font>
                ExpressionType.Multiply <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ParameterExpression =&gt; binaryExpr.Left,<font></font>
                ExpressionType.Multiply <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ParameterExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; binaryExpr.Right,<font></font>
                ExpressionType.Multiply =&gt; Expression.Add(Expression.Multiply(Visit(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, Visit(binaryExpr.Right))),<font></font>
<font></font>
                ExpressionType.Divide <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; _zero,<font></font>
                ExpressionType.Divide <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ParameterExpression =&gt; Expression.Divide(binaryExpr.Left, Expression.Multiply(binaryExpr.Right, binaryExpr.Right)),<font></font>
                ExpressionType.Divide <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ParameterExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; Expression.Divide(_one, binaryExpr.Right),<font></font>
                ExpressionType.Divide =&gt; Expression.Divide(Expression.Subtract(Expression.Multiply(Visit(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, Visit(binaryExpr.Right))), Expression.Multiply(binaryExpr.Right, binaryExpr.Right)),<font></font>
            };<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitMethodCall</span>(<span class="hljs-params">MethodCallExpression methodCall</span>)</span>
            =&gt; (methodCall.Arguments[<span class="hljs-number">0</span>], methodCall.Arguments[<span class="hljs-number">1</span>]) <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                (ConstantExpression constant, ParameterExpression _) =&gt; Expression.Multiply(methodCall, Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
                (ParameterExpression param, ConstantExpression constant) =&gt; Expression.Multiply(constant, Expression.Call(<span class="hljs-literal">null</span>, _pow, param, Expression.Constant((<span class="hljs-keyword">double</span>)constant.Value - <span class="hljs-number">1</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>)))),<font></font>
                (ConstantExpression constant, Expression expression) =&gt; Expression.Multiply(Expression.Multiply(Visit(expression), methodCall), Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
            };<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitConstant</span>(<span class="hljs-params">ConstantExpression _</span>)</span> =&gt; _zero;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitParameter</span>(<span class="hljs-params">ParameterExpression b</span>)</span> =&gt; _one;<font></font>
    }<font></font>
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez, como na maioria das tarefas de programa√ß√£o, uma resposta definitiva n√£o possa ser dada. </font><font style="vertical-align: inherit;">Tudo, como sempre, depende da situa√ß√£o espec√≠fica. </font><font style="vertical-align: inherit;">Eu gosto da correspond√™ncia usual de padr√µes para o meu exemplo, porque </font><font style="vertical-align: inherit;">N√£o o desenvolvi na escala do desenvolvimento industrial. </font><font style="vertical-align: inherit;">Se essa express√£o aumentasse incontrolavelmente, valeria a pena pensar no visitante. </font><font style="vertical-align: inherit;">E mesmo um visitante ing√™nuo tem direito √† vida - afinal, essa √© uma boa maneira de espalhar uma grande quantidade de c√≥digo em classes, se a hierarquia n√£o fornecer suporte de sua parte. </font><font style="vertical-align: inherit;">E mesmo aqui h√° exce√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, o apoio do visitante da hierarquia √© uma coisa muito controversa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas espero que as informa√ß√µes fornecidas aqui sejam suficientes para fazer a escolha certa.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt486948/index.html">Como escolher um editor e por que escolher o NeoVim?</a></li>
<li><a href="../pt486950/index.html">Antiguidades: a atualiza√ß√£o implac√°vel do 386¬∫ computador</a></li>
<li><a href="../pt486962/index.html">Revis√£o de desenvolvimento de jogos de SMS</a></li>
<li><a href="../pt486964/index.html">Multitarefa e curioso. Campe√£o de Java Mitya Alexandrov sobre a cria√ß√£o da comunidade de TI, o "remoto" e a vida</a></li>
<li><a href="../pt486966/index.html">Por que conveni√™ncia versus seguran√ßa n√£o √© uma desvantagem</a></li>
<li><a href="../pt486974/index.html">Produ√ß√£o em massa de eletr√¥nicos na R√∫ssia. Automa√ß√£o de Teste</a></li>
<li><a href="../pt486976/index.html">Problemas da educa√ß√£o da informa√ß√£o russa e suas poss√≠veis solu√ß√µes</a></li>
<li><a href="../pt486978/index.html">Notas de campo: Uma das maiores confer√™ncias de c√≥digo aberto do FOSDEM 2020</a></li>
<li><a href="../pt486980/index.html">Kim Dotcom: Caught, a pessoa mais procurada online. Parte 1</a></li>
<li><a href="../pt486982/index.html">Como aprender o desenvolvimento front-end, encontrar seu primeiro emprego e n√£o ter problemas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>