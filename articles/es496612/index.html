<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☮️ 👠 👅 Sí, mi vieja computadora portátil es varias veces más potente que su servidor de producción 🧗 🖖 ⚠️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Estas son las afirmaciones que escuché de nuestros desarrolladores. Lo más interesante es que esto resultó ser cierto, dando lugar a una larga investi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sí, mi vieja computadora portátil es varias veces más potente que su servidor de producción</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estas son las afirmaciones que escuché de nuestros desarrolladores. </font><font style="vertical-align: inherit;">Lo más interesante es que esto resultó ser cierto, dando lugar a una larga investigación. </font><font style="vertical-align: inherit;">Se tratará de servidores SQL, que giran en nuestro VMware.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ja/cl/8y/jacl8ygi2_fl1yve83fuy1k6vyq.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, garantizar que el servidor de producción esté irremediablemente detrás del portátil es fácil. </font><font style="vertical-align: inherit;">Ejecute (no en tempdb y no en una base con la durabilidad retardada habilitada) el código:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">set</span> nocount <span class="hljs-keyword">on</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> _t (v <span class="hljs-built_in">varchar</span>(<span class="hljs-number">100</span>))
<span class="hljs-keyword">declare</span> @n <span class="hljs-built_in">int</span>=<span class="hljs-number">300000</span>
<span class="hljs-keyword">while</span> @n&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">begin</span> 
  <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> _t <span class="hljs-keyword">select</span> <span class="hljs-string">'What a slowpoke!'</span>
  <span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> _t
  <span class="hljs-keyword">set</span> @n=@n<span class="hljs-number">-1</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> _t
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi escritorio, se ejecuta durante 5 segundos y en el servidor de producción, 28 segundos. </font><font style="vertical-align: inherit;">Debido a que SQL debe esperar el final físico de la entrada del registro de transacciones, y aquí estamos haciendo transacciones muy cortas. </font><font style="vertical-align: inherit;">Hablando en términos generales, condujimos un camión grande y poderoso al tráfico de la ciudad, y vemos cómo es famoso por los repartidores de pizza en scooters: el rendimiento no es importante aquí, solo la latencia es importante. </font><font style="vertical-align: inherit;">Y ni un solo almacenamiento de red, sin importar cuántos ceros tenga en su precio, podrá ganar latencia frente al SSD local.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(en los comentarios resultó que mentí - tuve una durabilidad retrasada en ambos lugares. Sin durabilidad retrasada resulta: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escritorio - 39 segundos, 15K tr / seg, 0.065ms / io ida y vuelta </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PROD - 360 segundos, 1600 tr / seg, 0.6ms </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I debería haber prestado atención demasiado pronto)</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, en este caso, estamos tratando con los </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ceros triviales de la función zeta Riemann</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con un ejemplo trivial. En el ejemplo que me trajeron los desarrolladores, había otro. Me convencí de que tenían razón y comencé a aclarar del ejemplo todos sus detalles relacionados con la lógica empresarial. En algún momento, me di cuenta de que podía tirar por completo su código y escribir el mío, lo que demuestra el mismo problema, se ejecuta de 3 a 4 veces más lento en la producción:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> dbo.isPrime (@n <span class="hljs-built_in">bigint</span>)
<span class="hljs-keyword">returns</span> <span class="hljs-built_in">int</span>
<span class="hljs-keyword">as</span>
  <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> @n = <span class="hljs-number">1</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> @n = <span class="hljs-number">2</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> @n = <span class="hljs-number">3</span> <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> @n % <span class="hljs-number">2</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">declare</span> @sq <span class="hljs-built_in">int</span>
  <span class="hljs-keyword">set</span> @sq = <span class="hljs-keyword">sqrt</span>(@n)+<span class="hljs-number">1</span> <span class="hljs-comment">-- check odds up to sqrt</span>
  <span class="hljs-keyword">declare</span> @dv <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span>
  <span class="hljs-keyword">while</span> @dv &lt; @sq 
    <span class="hljs-keyword">begin</span>
	<span class="hljs-keyword">set</span> @dv=@dv+<span class="hljs-number">2</span>
	<span class="hljs-keyword">if</span> @n % @dv = <span class="hljs-number">0</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
	<span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">declare</span> @dt datetime <span class="hljs-keyword">set</span> @dt=<span class="hljs-keyword">getdate</span>()
<span class="hljs-keyword">select</span> dbo.isPrime(<span class="hljs-number">1000000000000037</span>)
<span class="hljs-keyword">select</span> <span class="hljs-keyword">datediff</span>(ms,@dt,<span class="hljs-keyword">getdate</span>()) <span class="hljs-keyword">as</span> ms
<span class="hljs-keyword">GO</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo está bien para usted, la verificación de la simplicidad del número se llevará a cabo durante 6-7-8 segundos. Así fue en varios servidores. Pero en algunos, el cheque tomó 25-40 segundos. Curiosamente, no había servidores en los que la ejecución llevaría, por ejemplo, 14 segundos: el código funcionó muy rápido o muy lento, es decir, el problema era, digamos, blanco y negro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué he hecho? Útil en las métricas de VMware. Todo estaba bien allí: había muchos recursos, Tiempo de preparación = 0, todo fue suficiente, durante la prueba tanto en servidores rápidos como lentos CPU = 100 en una vCPU. Hice una prueba para calcular la cantidad de Pi; la prueba mostró los mismos resultados en cualquier servidor. Olía a magia negra cada vez más.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habiendo salido a la granja DEV, comencé a jugar como servidores. Resultó que vMotion de host a host puede "curar" el servidor, pero puede y viceversa, convertir un servidor "rápido" en uno "lento". Parece así: algunos hosts tienen un problema ... pero ... no. Algunas máquinas virtuales disminuyeron la velocidad en el host, por ejemplo, A, pero funcionaron rápidamente en el host B. ¡Y la otra máquina virtual, por el contrario, funcionó rápidamente en A y redujo la velocidad en B! ¡Los autos "rápidos" y "lentos" a menudo giraban sobre el anfitrión!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A partir de ese momento, el aire olía claramente a azufre. Después de todo, el problema no puede atribuirse a ninguna máquina virtual (parches de Windows, por ejemplo), porque se convirtió en una "rápida" con vMotion. Pero el problema tampoco podría atribuirse al host, ya que podría tener máquinas "rápidas" y "lentas". Tampoco estaba conectado con la carga: logré obtener una máquina "lenta" en el host, donde no había nada más que eso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por desesperación, inicié Process Explorer desde Sysinternals y miré la pila SQL. En máquinas lentas, la línea me llamó la atención inmediatamente: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ntoskrnl.exe! KeSynchronizeExecution + 0x5bf6 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntoskrnl.exe! KeWaitForMultipleObjects + 0x109d </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntoskrnl.exe! KeWaitForMultipleObjects + 0xb3f </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntosKrnx3 0!</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ntoskrnl.exe! KeQuerySystemTimePrecise + 0x881 &lt;- !!!</font></font><br>
</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ntoskrnl.exe! ObDereferenceObjectDeferDelete + 0x28a </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntoskrnl.exe! KeSynchronizeExecution + 0x2de2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sqllang.dll! CDiagThreadSafe :: PxlvlReplace + 0x1a20 </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... saltó</font></font><br>
</i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sqldk.dll! SystemThread :: MakeMiniSOSThread + 0xa54 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KERNEL32.DLL! BaseThreadInitThunk + 0x14 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ntdll.dll! RtlUserThreadStart + 0x21</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ya era algo. El programa fue escrito:</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><font></font>
    {<font></font>
        [<span class="hljs-meta">DllImport(<span class="hljs-meta-string">"kernel32.dll"</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">extern</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GetSystemTimePreciseAsFileTime</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> FILE_TIME lpSystemTimeAsFileTime</span>)</span>;<font></font>
<font></font>
        [<span class="hljs-meta">StructLayout(LayoutKind.Sequential)</span>]
        <span class="hljs-keyword">struct</span> FILE_TIME<font></font>
        {<font></font>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> ftTimeLow;
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> ftTimeHigh;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++)<font></font>
            {<font></font>
                <span class="hljs-keyword">int</span> counter = <span class="hljs-number">0</span>;<font></font>
<font></font>
                <span class="hljs-keyword">var</span> stopwatch = Stopwatch.StartNew();<font></font>
<font></font>
                <span class="hljs-keyword">while</span> (stopwatch.ElapsedMilliseconds &lt; <span class="hljs-number">1000</span>)<font></font>
                {<font></font>
                    GetSystemTimePreciseAsFileTime(<span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> fileTime);<font></font>
                    counter++;<font></font>
                }<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    Console.WriteLine(<span class="hljs-string">"{0}"</span>, counter);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este programa mostró una desaceleración aún más brillante: en máquinas "rápidas" muestra 16-18 millones de ciclos por segundo, mientras que en máquinas lentas es un millón y medio, o incluso 700 mil. Es decir, la diferencia es de 10-20 veces (!!!). Esto ya era una pequeña victoria: en cualquier caso, no había ninguna amenaza de quedarse atascado entre el soporte de Microsoft y VMware para que se transfirieran flechas entre sí. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, el progreso se detuvo: vacaciones, asuntos importantes, histeria viral y un fuerte aumento de la carga. Muchas veces mencioné un problema mágico a mis colegas, pero a veces parecía que no siempre confiaban en mí: la afirmación de que VMware ralentizó el código 10-20 veces era demasiado monstruosa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traté de desenterrar lo que estaba disminuyendo. </font><font style="vertical-align: inherit;">A veces me pareció que había encontrado una solución: encender y apagar los enchufes en caliente, cambiar el tamaño de la memoria o la cantidad de procesadores que a menudo convertían la máquina en una "rápida". </font><font style="vertical-align: inherit;">Pero no para siempre. </font><font style="vertical-align: inherit;">Pero lo que resultó ser cierto es que es suficiente salir y tocar el volante, es decir, cambiar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cualquier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parámetro de la máquina virtual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, mis colegas estadounidenses de repente encontraron la causa raíz. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/qd/5b/msqd5bixfzwfkbmd1fuiptjnwvq.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡Los hosts diferían en frecuencia!</font></font></i><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto generalmente no da miedo. </font><font style="vertical-align: inherit;">Pero: al pasar de un host 'nativo' a un host con una frecuencia 'diferente', VMware debe ajustar el resultado de GetTimePrecise.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como regla, esto no da miedo, a menos que haya una aplicación que solicite el tiempo exacto millones de veces por segundo, como un servidor SQL.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero esto no da miedo, ya que el servidor SQL no siempre hace esto (vea la Conclusión)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero hay casos en que este rastrillo golpea dolorosamente. </font><font style="vertical-align: inherit;">Y, sin embargo, sí, tocando la rueda (cambiando algo en la configuración de VM) forcé a VMware a 'contar' la configuración, y la frecuencia del host actual se convirtió en la frecuencia 'nativa' de la máquina.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decisión</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.vmware.com/files/pdf/techpaper/Timekeeping-In-VirtualMachines.pdf</font></font></a><br>
<br>
<blockquote>When you disable virtualization of the TSC, reading the TSC from within the virtual machine returns the physical machine’s TSC value, and writing the TSC from within the virtual machine has no effect. Migrating the virtual machine to another host, resuming it from suspended state, or reverting to a snapshot causes the TSC to jump discontinuously. Some guest operating systems fail to boot, or exhibit other timekeeping problems, when TSC virtualization is disabled. <b>In the past, this feature has sometimes been recommended to improve performance of applications that read the TSC frequently</b>, but performance of the virtual TSC has been improved substantially in current products. The feature has also been recommended for use when performing measurements that require a precise source of real time in the virtual machine.</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En resumen, agregue el parámetro </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitor_control.virtual_rdtsc = FALSE</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusión</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablemente tengas una pregunta: ¿para qué llama SQL a GetTimePrecise con tanta frecuencia? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No tengo la fuente del servidor SQL, pero la lógica dice esto. SQL es casi un sistema operativo con concurrencia cooperativa, donde cada hilo tiene que ceder de vez en cuando. ¿Dónde es mejor hacerlo? Donde hay una expectativa natural: bloqueo o IO. Bueno, ¿y si giramos los ciclos computacionales? Entonces, lo obvio y casi el único lugar es en el intérprete (esto no es del todo un intérprete), después de la ejecución del siguiente operador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como regla general, el servidor SQL no se usa para </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clavar</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cálculos limpios y esto no es un problema. Pero los ciclos de trabajo con todo tipo de tabletas temporales (que se almacenan en caché de inmediato) convierten el código en una secuencia de declaraciones ejecutadas muy rápidamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, si ajusta la función en NATIVAMENTE COMPILADO, deja de pedir tiempo y su velocidad aumenta en un factor de 10. ¿Pero qué pasa con la multitarea cooperativa? </font><font style="vertical-align: inherit;">Pero para el código compilado de forma nativa, tuve que hacer MULTITASKING PREEMPTIVE en SQL.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496596/index.html">¿Qué es una pasarela de pago? Comparación de 5 pasarelas de pago 2020</a></li>
<li><a href="../es496598/index.html">48k a 10 líneas de código - historia de SDK de JavaScript de GitHub</a></li>
<li><a href="../es496600/index.html">Como parte de la sustitución de importaciones, Moscú compra software de Microsoft por 90 millones de rublos</a></li>
<li><a href="../es496608/index.html">Food Design Digest, marzo de 2020</a></li>
<li><a href="../es496610/index.html">Router Banana Pi R64 - Debian, Wireguard, ILV</a></li>
<li><a href="../es496614/index.html">¿Cómo han cambiado los habrachianos en 5 años? O "280 semanas después"</a></li>
<li><a href="../es496616/index.html">¿Cómo contamos a las personas que usan la visión por computadora?</a></li>
<li><a href="../es496620/index.html">Errores populares en inglés entre profesionales de TI</a></li>
<li><a href="../es496626/index.html">Journeyman and Dragons: cómo ayudar al interno a adaptarse como equipo</a></li>
<li><a href="../es496630/index.html">Interfaz Bicicletas Tóxico Abuelo. "¡Artefactos en mi trasero!" (t1 e5)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>