<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕺🏾 🤶🏽 👢 〜SMAK〜-MicroPythonのasyncioライブラリを使用したスマートホームステッド用のプログラマブルコントローラー 😗 🖐️ 🎿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前文
 農村部でのモノのインターネットの使用は、ホームオートメーションよりもはるかに広いですが、これはもちろん、これは用語の問題です-これが意味することは何ですか。それにもかかわらず、私はスマートホームステッドの概念を、不動産の領土にあるオブジェクトで発生するプロセスの合理的な自動化のプロジェクトと...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>〜SMAK〜-MicroPythonのasyncioライブラリを使用したスマートホームステッド用のプログラマブルコントローラー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486368/"><hr><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前文</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
農村部でのモノのインターネットの使用は、ホームオートメーションよりもはるかに広いですが、これはもちろん、これは用語の問題です-これが意味することは何ですか。それにもかかわらず、私はスマートホームステッドの概念を、不動産の領土にあるオブジェクトで発生するプロセスの合理的な自動化のプロジェクトとして考えました。時々、私がどこか別の場所からかなり離れている場合もありますが、同時に少なくともこれらのオブジェクトで発生していることが許可されているものの境界を超えないことを十分に確信しているため、必要に応じて、不動産全体の状況、特に各制御オブジェクトの状況をすばやく把握でき、必要に応じて介入することもできます私の懸念を引き起こしたオブジェクトへの進行中のプロセスに真っ向から突入することなく、現在、私は何か重要な事で忙しいのか、あるいは単に冷たくて怠惰すぎて家を出ることができないからです。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、このコンセプトを実装することで、MicroPythonの機能を使用したマイクロコントローラーの使用についての理解を深めることができます。これは、過去の生活の中で複雑さを変化させるプロジェクトを英雄的に実行し、アルゴリズムを実装するまで、C ++と比較して軽量であるという幻想と同じです。これは手に届かなかったか、まだ高級言語のライブラリに組み込まれていないかのどちらかです。実際、これは、同じXiaomyの有名なメーカーからEspHomeやフレームワークなどの特殊なアプリケーションまでの幅広いソリューションに頼ることなく、自分の実装に私の興味を正確に決定しました。コーンとカルスを詰めた自分のデザインの大きくてとげのある輪を走り抜け、かなりはがれたが確かに打ち負かされなかった可能性を排除しませんが、私は息を吐きます私は苦労して稼いだお金を、非常に市場価格で外国製およびロシア製の美しくパッケージ化および設計されたデバイスに費やし、MiHime、Domoticz、IFTTなどのモンスターではなく、既存の曇りで得られた経験を実装します。</font></font><br>
<cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まとめ-私は自転車の発明に喜びを感じたかったのですが、このため、ようやく夏が苦しむ前の時間があり、簡単に行うことができなくなったのですが、自分の不動産を整備している間、考える時間はありませんでした。</font><font style="vertical-align: inherit;">これは、自分が何を望んでいるかを正確に理解するために書きましたが、既存の明らかにより包括的なソリューションを示唆するコメントに応答しないように事前に自分に権利を与えるためです。</font><font style="vertical-align: inherit;">計画の実施に関連する特定の問題を解決するためのアルゴリズムは大歓迎ですが。</font></font><br>
<cut></cut><br>
<hr><br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的方法</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクトで発生するプロセスは、ローカル接続の問題を解決するために開発し、必要に応じて後で無線接続を形成することによってそれらを階層で結合する、プログラム可能なコントローラーによって制御されます。情報を交換するための最も単純なプロトコルを使用して、センサーとアクチュエーターとの有線接続または短い無線接続を提供できる場合、ローカルタスクが解決されます。空間的な解決策は、最大の意思決定の負担が、センサーとデバイスの形で方向付けられたグラフのリーフを制御するコントローラーにかかるという事実にあります。同時に、このような情報を要求したこの無線グラフのノードにパッケージ形式で要約情報を送信する機能を持っています。スマートフォンやその他のデバイスのインターネットでは、空白の画面が表示されれば十分です。つまり、すべてが通常どおり機能していますが、詳細をリクエストしたり、緊急時にファイナルコントローラーの操作に介入したりできることは、このスペースの作成者として私に属しているはずです。当分の間、私はセキュリティと外部の影響からの保護を後で延期します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラ自体はすでにより強力な通信チャネルを備えており、MQTTやZigBeeなどのより高度なプロトコルを使用して、安定したメッシュネットワークグラフを編成し、その後インターネットにアクセスできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、この概念は、スウォーム、つまりワイヤレス接続で接続されたグループに含まれる可能性を考慮して、プログラマブルコントローラーのロジックによって制限されています。</font><font style="vertical-align: inherit;">コントローラのスコープは、制御と管理の対象となるオブジェクトであり、以下に示す完全なリストではありません。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温室-温度、照明、土壌、空気の湿度</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">庭-散水、土壌水分</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インキュベーター-温度、湿度、トレイの回転、音</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブルーダー-温度、湿度、照明</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コープ-温度、照明</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蜂の巣-温度、湿度、重量、音（群れ）</font></font></li>
<li> – , ,    </li>
<li>  –      , </li>
<li>  –    , </li>
<li> –    , </li>
<li>  –  , </li>
<li> –   ( )   (, )</li>
<li> –  </li>
<li>  — </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題を説明、調査、解決するために、ソースとコンシューマーとして使用されるデバイスドライバー、情報の処理に関連する遅延、この情報が通過する通信チャネル、循環アクションを生成するためのスケジュールとタイマー、変数を簡単に説明できるメタ言語が開発されました。これには、施設で発生するプロセスの制御と管理に不可欠な情報が含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この部分では、メタ言語を使用すると、プロジェクトの説明を読みやすい形式で読むことができます。これは、ドキュメントの生成や、ハードウェアデバイスのリスト、およびこれらのハードウェアデバイスを接続する必要のあるプリント回路基板で表現されたロジックの生成に役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の部分では、メタ言語は、プロセスを制御するためのプリミティブを示し、コントローラーによって制御されるプロセスの状態の初期化とその後の分析で使用されます。使用するマイクロコントローラーに十分なリソースがある場合、この部分はインタープリターとして実装できます。その入力には、ドライバー、通信チャネル、変数、およびスクリプト自体の初期化を説明するテキストファイルが提供されます。コントローラー自体のロジックを説明し、シナリオが明確であれば縫製を変更する必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイデアを呼び出すと、それが浮かびます。そのため、スマートマナーはスマートホームステッドです。アイデアの発祥の地はアルタイですが、オートメーションも適しています。ただし、このコンテキストではスマートの定義に一種のトートロジーであり、もちろん、プログラム可能なコントローラーを使用します。大文字を組み合わせて英語とロシア語の単語を組み合わせると、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜〜SMAK〜</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですが、システム記述のメタ言語は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜MEAT〜</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。この料理の概念が出てきた-アプリケーション</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜MEAT〜を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ちなみに、あらかじめ独自のプロトコルが付与されていないコントローラーとデバイスとのやり取りのための原始的な無線プロトコルを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜JuJu〜</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼んでいました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハードウェアの実装は、ESP8266とArduinoの機能を使用してRF24 +またはその他のより近代的ですが、センサーやアクチュエーター（リレー、バルブ、スイッチなど）に何らかの理由で直接接続できない場合は、ロジック自体も安価です。 ESP32にコントローラーを配置し、失敗した場合はSTM32に配置してください。目標は鉄のコストを最小限に抑えることです。ヒステリシスを備えた温度コントローラや空気質測定器など、多くのプロセスのハードウェア実装の使用を認めていますが、私は電子工学エンジニアではないため、コンデンサ、抵抗、トランジスタを使用して回路を開発するのは面倒であり、ハードウェア実装とソフトウェア実装の合理的なバランスが決まります。直接参加したいという願望、または、少なくともコントローラーで何が起こっているのかを熟考します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソフトウェアの実装は、メタ言語の構文に基づいています</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜MEAT〜</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、asyncioライブラリーおよび関連するアルゴリズムは、一般的なロジック</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、以下に説明しました。施設で発生するプロセスを制御するタスクは、特定の動作条件を維持することと、逸脱が発生した場合にこれらの状態を回復すること、さらには、逸脱が強いほど、よりエネルギッシュなアクションと緊急事態への対応を目的としています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将来的には、次の用語が本文で使用されます：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソース（ソース）-センサー、着信通信チャネル</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンシューマー-エグゼクティブデバイス、発信通信チャネル</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソースとコンシューマーの相互作用は、ソースから受け取った値を分析することによってシナリオで説明されています。タイマーとコンシューマーのステータス。変数の値;どの制御コマンドがコンシューマに発行されるかに基づいて、スケジュール。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソースレジスタは、ソースの調査の結果として取得された最新のデータを格納するために使用されます。各ソースは、独自の頻度で問い合わせることができます。少なくとも1つのソースのデータを更新した後、分析ユニットを起動して、消費者の動作モードを明らかにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンシューマレジスタは、スクリプト実行の優先ロジックのメカニズムを実装するためにプログラムと物理データを分離するために使用されます。これは、スクリプトに記述された条件を分析するプロセスで、同じデバイスに対して競合するコマンドが発行され、最後のコマンドが考慮されるという事実からなります。これはスクリプトの最後に記録されました。したがって、デバイスの動作のシナリオで一連の条件チェックを形成することにより、それらの優先順位を形成することができます。物理的には、コマンドは分析ユニットの終了後にのみ実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソースの問い合わせとコンシューマーによるコマンドの実行は非同期モードで行われます。つまり、ドライバーは照会またはコマンドの瞬間、およびソースまたはコンシューマーがビジー状態であり、その後の要求が行われる操作の慣性の場合を見越して、システムプランナーに制御を転送します。順番。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスのタイプに応じて、ドライバーは複数の情報チャネルを使用できます。たとえば、DHT温度および湿度センサーは2つのチャネルを使用して温度と湿度を送信し、DS18B20デバイスは共通バスに接続されて暖かい床のコレクターを制御します-さらに、統合されたサーボドライブ、複数のモーターまたはバルブを同時に制御します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドライバーの特性には、デバイスに固有の要求とコマンドのセット、それらの実行の遅延時間、および信号が送信される通信のタイプが含まれます。これには、ハードウェア（1Wire、I2C、SPI、UARTなど）を使用できます。ワイヤレス（WiFi、RFラジオ、BTなど）。これは、要求とコマンドを送信する方法を補完します。さらに、ドライバーは、ロードされたときの自己診断モード、オフになったときのアクション、および非同期モードでの通常の動作中の予期しない状態の診断を提供します。たとえば、デバイスのステータスに関するフィードバックが必要な場合、ドライバーはいくつかの非同期タスクを実行できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分析ユニットから、ソースのレジスター、コンシューマー、タイマーと変数、システム定数、およびスケジュールにアクセスできます。</font><font style="vertical-align: inherit;">理想的には、分析ユニットはテキストファイルで表される単純なスクリプト記述言語のインタープリターと見なされますが、最初のバージョンでは、ファームウェアコードでスクリプトを作成するときに、この言語の基本的なプリミティブに準拠して、より簡潔な表現を生成します。</font><font style="vertical-align: inherit;">現在、スクリプト記述言語は、オブジェクト（インキュベーター、ブリーダー、鶏小屋、養蜂場、温室、庭、ボイラールーム、ホテルの部屋）の操作をシミュレートし、必要なデバイスの数とその特性を決定するために使用されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに計画では、すでに蓄積され作成された出版物があります：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜-一般的な機能アルゴリズムの説明</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜-メタ言語の説明〜MEAT〜</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜-プロトコルの説明〜JuJu〜</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜-デバイスドライバーを作成するための要件の説明〜SMAK〜</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜SMAK〜-アプリケーションの実践</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja486354/index.html">Georgy Potapov：「私はプロのOpenStreetMapデータコンシューマーです」</a></li>
<li><a href="../ja486356/index.html">The Ember Times-Issue 132</a></li>
<li><a href="../ja486358/index.html">写真の変圧器</a></li>
<li><a href="../ja486360/index.html">15の簡単なステップでモカから冗談に移行する方法とその理由</a></li>
<li><a href="../ja486362/index.html">Product Univercity MoreynisとChernyakでトレーニングした後、どのようにして製品マネージャーにならなかったのか</a></li>
<li><a href="../ja486372/index.html">チェコのプログラマーは、1600万ユーロ相当のサイトを無料で作成しましたか？真実？</a></li>
<li><a href="../ja486376/index.html">レベルデザイナーがアーキテクチャ理論を使用してゲームレベルを作成する方法</a></li>
<li><a href="../ja486378/index.html">太陽光発電のホームサーバーは15か月間稼働しました：稼働時間95.26％</a></li>
<li><a href="../ja486380/index.html">プロダクトマネージャーが実際に行うべきこと</a></li>
<li><a href="../ja486382/index.html">シールとスクラム</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>