<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•š ğŸ¤·ğŸ¼ ğŸ‹ IPv6 - vous vous trompez ğŸ—ƒï¸ ğŸ‘ŒğŸ¼ ğŸ™ƒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a beaucoup d'idÃ©es fausses et de mythes autour d'IPv6. Souvent, les hÃ©bergeurs comprennent mal comment l'utiliser et pensent des approches obsolÃ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>IPv6 - vous vous trompez</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/488406/"><img src="https://habrastorage.org/webt/gg/-1/kx/gg-1kxivqjrehg1_oidyoqkphos.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a beaucoup d'idÃ©es fausses et de mythes autour d'IPv6. Souvent, les hÃ©bergeurs comprennent mal comment l'utiliser et pensent des approches obsolÃ¨tes du monde de l'IPv4. Par exemple, ayant des octillions d'adresses IPv6, l'hÃ©bergeur vend des adresses aux clients individuellement, au lieu d'allouer un rÃ©seau Ã  part entiÃ¨re / 64, comme indiquÃ© dans les recommandations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il arrive que les hÃ©bergeurs attribuent des adresses IPv6 Ã  diffÃ©rents clients au sein du mÃªme rÃ©seau / 64. Dans le mÃªme temps, les grands services, tels que Google, perÃ§oivent toutes les adresses dans la plage / 64 comme un seul client. En consÃ©quence, les clients peuvent souffrir en raison des activitÃ©s d'un partenaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La disponibilitÃ© des adresses IPv6 vous permet d'attribuer des adresses externes complÃ¨tes Ã  des ressources internes, telles que des conteneurs ou des clients VPN. </font><font style="vertical-align: inherit;">Pour ce faire, l'hÃ´te doit fournir au client un rÃ©seau routÃ© distinct. </font><font style="vertical-align: inherit;">Malheureusement, presque personne ne peut le faire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous analyserons les principales erreurs dans l'utilisation des fournisseurs IPv6.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Histoire: RFC 3177</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 En 2001, les recommandations sur l'attribution des adresses recommandÃ©es (dÃ©solÃ© pour la tautologie, c'est important) pour mettre en Ã©vidence:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 48 en gÃ©nÃ©ral</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 64 si derriÃ¨re un et un seul sous-rÃ©seau</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ 128 si un et un seul appareil</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le document offensant RFC 2119, qui rÃ©git l'application de divers niveaux de respect obligatoire des instructions, dÃ©finit Â«recommandÃ©Â» comme suit: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
les mots Â«devraitÂ» ou Â«recommandÃ©Â» signifient qu'il peut y avoir des raisons raisonnables dans certaines circonstances de ne pas agir de cette maniÃ¨re, cependant, le choix d'une ligne de comportement diffÃ©rente doit Ãªtre une dÃ©cision Ã©quilibrÃ©e prise avec une pleine comprÃ©hension des consÃ©quences. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peut-Ãªtre que personne n'avait une comprÃ©hension complÃ¨te des consÃ©quences Ã  ce moment-lÃ , peut-Ãªtre que Â«certaines circonstancesÂ» n'Ã©taient pas dÃ©finies, mais, d'une maniÃ¨re ou d'une autre, tout le monde a suivi les recommandations.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En gÃ©nÃ©ral, au moment de la rÃ©daction du document, le trafic IPv6 Ã©tait extrÃªmement rare et se trouvait, pour la plupart, dans les instituts et les rÃ©seaux personnels de passionnÃ©s curieux. </font><font style="vertical-align: inherit;">Certains problÃ¨mes rÃ©els ont commencÃ© Ã  s'accumuler et Ã  Ãªtre analysÃ©s, mais cela a pris beaucoup de temps. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repenser a commencÃ© en 2005. </font><font style="vertical-align: inherit;">Enfin, ces recommandations ont Ã©tÃ© dÃ©prÃ©ciÃ©es en 2011.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conscience du problÃ¨me: RFC 6177</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nouvelle politique d'adressage indique explicitement que / 48 n'est qu'un souhait, pas une exigence. Aucune indication de nombres spÃ©cifiques n'est donnÃ©e, cependant, il est indiquÃ© que / 64 ou plus court fonctionne dans des conditions normales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La logique principale en recommandant la taille de l'Ã©mission du bloc / 48 au consommateur final poursuivait trois objectifs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PremiÃ¨rement, l'espace d'adressage attribuÃ© devrait Ãªtre suffisant pour les besoins des consommateurs et facilement extensible, sans squat d'haltÃ¨res. Oui, c'est exactement ce qu'il dit, uniquement dans la version anglaise - sautez Ã  travers des cerceaux. L'une des raisons importantes pour passer Ã  IPv6 est de changer la taille de destination existante de "adresse unique" en "sous-rÃ©seaux multiples".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DeuxiÃ¨mement, le changement de fournisseur aurait dÃ» se dÃ©rouler avec un minimum de problÃ¨mes. </font><font style="vertical-align: inherit;">Si vous pouvez enregistrer l'ancien schÃ©ma d'adresses de sous-rÃ©seau lors du dÃ©placement vers un nouvel espace d'adressage, cela Ã©conomisera beaucoup de travail </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
. TroisiÃ¨mement, l'allocation du bloc / 48 devrait couvrir l'augmentation des besoins de l'espace d'adressage d'un consommateur en dÃ©veloppement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que toutes ces conditions soient remplies, il est devenu Ã©vident que la recommandation / 48 Ã©tait, pour le moins, redondante.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pin / 64 comme unitÃ©s d'Ã©mission</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de l'ordre de distribution, il y avait d'autres points. </font><font style="vertical-align: inherit;">Il s'est avÃ©rÃ© que de nombreuses fonctionnalitÃ©s d'IPv6 ne fonctionnent pas si le prÃ©fixe rÃ©seau n'est pas / 64. </font><font style="vertical-align: inherit;">Ã€ savoir, ils ne fonctionnent pas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DÃ©couverte de voisins (ND)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DÃ©couverte du quartier sÃ©curisÃ© (SEND)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certaines parties de Mobile IPv6</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultihÃ©bergement de site par intermÃ©diation IPv6</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beaucoup de petites choses diffÃ©rentes</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un facteur supplÃ©mentaire Ã©tait le fait que de nombreuses technologies en cours de conception reposaient prÃ©cisÃ©ment sur un tel prÃ©fixe de rÃ©seau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non seulement la menace de briser la nouvelle norme a Ã©tÃ© la raison de la rÃ©daction de nouvelles recommandations. </font><font style="vertical-align: inherit;">Deux opinions de validitÃ© douteuse Ã©taient Ã©galement trÃ¨s populaires. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, de nombreux appareils implÃ©mentent le routage IPv6 par programme, avec des bÃ©quilles et des vÃ©los, et ne sont donc pas prÃªts pour une transition complÃ¨te vers celui-ci. </font><font style="vertical-align: inherit;">Une augmentation possible du retard due Ã  cela peut augmenter plusieurs fois, sinon un ordre de grandeur. </font><font style="vertical-align: inherit;">La dÃ©finition par dÃ©faut du sous-rÃ©seau / 64 rÃ©duirait considÃ©rablement ces dÃ©lais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DeuxiÃ¨mement, le passage Ã  une nouvelle norme est toujours pÃ©nible pour le support technique et les administrateurs systÃ¨me. </font><font style="vertical-align: inherit;">Un seul prÃ©fixe / 64 Ã©tait censÃ© rÃ©duire cette douleur Ã  une valeur acceptable.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La situation sur les fronts</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme cela s'est dÃ©jÃ  produit plus tÃ´t en 2001, la recommandation / 64 est perÃ§ue par de nombreux grands acteurs Internet comme une norme. D'une part, c'est bon, d'autre part, pas si bon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour de nombreux systÃ¨mes de classification, par exemple, pour la reconnaissance du spam, toutes les adresses d'un bloc seront considÃ©rÃ©es comme appartenant Ã  un spammeur. En thÃ©orie, cela devrait faciliter la vie de l'utilisateur, au contraire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Souvent, les prestataires ne se soucient pas de choses comme l'apprentissage des pratiques courantes. Les adresses peuvent Ãªtre Ã©mises selon n'importe quel principe, au moins mÃªme selon l'horoscope. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe plusieurs problÃ¨mes typiques, et tous dÃ©coulent de la violation des recommandations par le fournisseur d'une part, et de la stricte adhÃ©sion Ã  celles-ci par d'autres organisations d'autre part.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Ã©mission d'adresses d'un bloc Ã  plusieurs utilisateurs peut entraÃ®ner le fait qu'ils seront tous considÃ©rÃ©s comme un utilisateur rÃ©el, par exemple, des machines du rÃ©seau de l'organisation. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si plusieurs personnes de ce bloc commencent Ã  rechercher des chats en mÃªme temps, Google peut dÃ©cider que ce botnet enverra des demandes d'escroquerie de recherche ou d'autres choses pas trÃ¨s bonnes. De son point de vue, ce n'est qu'un utilisateur. Le rÃ©sultat logique est un captcha de plus en plus compliquÃ©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous le savez, c'est la rÃ©ponse la plus inoffensive Ã  une arnaque hypothÃ©tique.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La situation inverse est la dÃ©livrance Ã  un utilisateur d'adresses d'adresses provenant de diffÃ©rents blocs. </font><font style="vertical-align: inherit;">Si les utilisateurs de ces blocs tombent dans la liste noire de quelqu'un, alors les adresses d'un utilisateur honnÃªte tomberont avec eux. </font><font style="vertical-align: inherit;">Histoire particuliÃ¨rement intÃ©ressante: certaines de vos adresses ont Ã©tÃ© interdites par un rÃ©seau publicitaire, certaines ont Ã©tÃ© interdites par un autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, d'autres surprises dÃ©sagrÃ©ables sont possibles. </font><font style="vertical-align: inherit;">Par exemple, vous avez reÃ§u le bloc / 64, mais il s'agit d'un bloc dynamique, en tant qu'adresse dynamique - aujourd'hui 2001: DA8: 1D01: FA13 :: / 64, demain 2001: DA8: 1D01: FC15 :: / 64. </font><font style="vertical-align: inherit;">De nouvelles aventures chaque jour! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a une chance considÃ©rable de rencontrer diverses combinaisons de ces problÃ¨mes et d'autres rÃ¢teaux incurvÃ©s de maniÃ¨re fantaisiste dans l'appendice.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã‰mettez IPv6 depuis notre serveur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous avons des millions d'adresses IP, alors pourquoi ne pas donner de vraies adresses IP, par exemple, aux clients VPN afin qu'ils se rendent sur Internet sans NAT et puissent accepter les connexions entrantes du monde. </font><font style="vertical-align: inherit;">Cela semble gÃ©nial, mais dans la pratique, ce n'est pas si facile. </font><font style="vertical-align: inherit;">Cela nÃ©cessitera un rÃ©seau IPv6 distinct acheminÃ© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">via l'</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adresse IP attribuÃ©e Ã  l'interface du serveur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons qu'un serveur se voit attribuer une adresse </font></font><code>2a01:baba::c0fee:dead/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, alors les clients VPN auront besoin d'un rÃ©seau sÃ©parÃ©, tel </font></font><code>2a01:baba:fafa:0f0f::/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que routÃ© via l'adresse </font></font><code>2a01:baba::c0fee:dead/64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, trÃ¨s peu de fournisseurs d'hÃ©bergement ont les outils nÃ©cessaires pour Ã©mettre de tels rÃ©seaux aux clients, c'est pourquoi vous devez utiliser des bÃ©quilles comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ND Proxy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lecture des recommandations de l'IETF n'est pas l'activitÃ© la plus intÃ©ressante, mais elle est extrÃªmement utile. </font><font style="vertical-align: inherit;">Les remplir de longues soirÃ©es d'hiver ne vaut clairement pas la peine, mais aussi nÃ©gliger de lire des sections qui sont importantes pour vous est Ã©galement indÃ©sirable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous choisissez un fournisseur, assurez-vous qu'il partage ce point de vue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez comprendre que la mauvaise approche de l'attribution des adresses ne nuit pas au fournisseur et, pour la plupart des contrats, elle ne peut mÃªme pas Ãªtre la base d'une compensation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, cela peut s'avÃ©rer Ãªtre un facteur clÃ© pour vous, mÃªme si vous ne le soupÃ§onnez pas encore.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488386/index.html">Cas d'application des outils d'analyse d'anomalies de rÃ©seau: attaques via des plug-ins de navigateur</a></li>
<li><a href="../fr488388/index.html">Reconnexion et authentification HTTP de base</a></li>
<li><a href="../fr488390/index.html">Comment se faire des amis de Telegram Bot avec OpenId Connect</a></li>
<li><a href="../fr488392/index.html">Images prÃªtes pour la production pour k8s</a></li>
<li><a href="../fr488404/index.html">Des jeux Ã  attendre en 2020</a></li>
<li><a href="../fr488408/index.html">Passerelle IoT Ethernet-RS485 STM32</a></li>
<li><a href="../fr488410/index.html">7 leÃ§ons que j'ai apprises en dix ans de dÃ©veloppement</a></li>
<li><a href="../fr488412/index.html">CrÃ©ation d'un bot Discord basÃ© sur discord.js</a></li>
<li><a href="../fr488416/index.html">SLAE - Examen expert de sÃ©curitÃ© Linux Assembly</a></li>
<li><a href="../fr488418/index.html">Authentification de l'API REST avec Spring Security et MongoDB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>