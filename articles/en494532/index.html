<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèª üìä üî´ TTA processor. Part 2 üåò üèª üëèüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword
 This is the second part of the attempt to create a TTA processor in Logisim. In the process of creation, there was a need for additional mem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>TTA processor. Part 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494532/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foreword</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is the second part of the attempt to create a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processor in Logisim. </font><font style="vertical-align: inherit;">In the process of creation, there was a need for additional memory in which some intermediate values ‚Äã‚Äãcould be stored, and for this memory there was a need to change the control device.</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 1 </font></font></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 2</font></font></b><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional memory</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since commands and constants are difficult to store in memory, it will be difficult to make a fully addressable memory, so you need something simpler, a stack or a queue is good for this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The queue does not look very convenient, and the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> language was invented for the stack </font><font style="vertical-align: inherit;">, the compiler of which I would like to write. We implement the stack as a functional device:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dx/v5/cf/dxv5cfgmn88pgj4f4k-3gqfksre.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It looks confusing, but in fact, this device performs simple functions: the counter points to the next cell, when data arrives, they are written to the cell that the counter points to and it increases; when data is taken, they are given from the cell previous to the one indicated by the counter and the counter decreases. </font><font style="vertical-align: inherit;">Then another problem arises, how do you know what data was taken from the stack, you need a flag for this, then the control device (UU) will look like this:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/73/jj/da/73jjdamjes2njm364vsrorffq_c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For ease of connection, the outputs will be located on the left, and the inputs on the right, then the control unit and other functional devices (stack, adder, AND, OR, register, etc.):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/o7/5a/mm/o75ammymblanjtk5w50aglwe0_a.png"></div><div style="text-align:center;"><img src="https://habrastorage.org/webt/ah/jk/u4/ahjku4wydruir94wodt8c0qi5sq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's assemble a simple circuit with memory of commands, two stacks, two registers, an adder, a negator, And, Or and some constant (let it be 5):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cy/cy/ie/cycyiebthpbbwyn0btdeqvesarq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It remains to create memory for the constants and you can write the Forth compiler, but for now let's try to write some words from it directly in memory.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dup</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The word dup does a simple thing: duplicates the data of the top cell of the stack back onto the stack. </font><font style="vertical-align: inherit;">First you need to load, for example, our constant (in6 -&gt; o1) onto the stack, now we have data in the first cell of the stack, but when you take the data, it kind of disappears from the stack, how to be? </font><font style="vertical-align: inherit;">There are registers for this, load the stack cell into the register and save it there, after which we load it onto the stack twice, thereby duplicating it, the pseudocode looks like this: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. in6 -&gt; o1 // Loading the constant into the stack </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. in1 -&gt; o3 // Load a cell from the stack into register </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. in3 -&gt; o1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. in3 -&gt; o1 // Two times load the contents of the register onto the stack </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's all, in memory it looks like this:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/on/1q/qp/on1qqpaltn8e9dnchgakhprbucs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And after execution, the stack looks like this:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gq/sh/g5/gqshg5ozb0nvyzgzpa4xhqhrrf0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As expected, our two constants. </font><font style="vertical-align: inherit;">That's all, in a similar way you can do drop, swap, rot, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for your attention, I hope it was not boring! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Github Link: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en494512/index.html">What's in my White for you or Sodium hypochlorite (bleach) Reference Guide</a></li>
<li><a href="../en494514/index.html">My dashboard and analysis of the dynamics of the spread of COVID-19 infection</a></li>
<li><a href="../en494518/index.html">Atomic War in the era of the Great Combinator</a></li>
<li><a href="../en494520/index.html">Where, how and how to shoot video monologues</a></li>
<li><a href="../en494524/index.html">KleinComputer KC 85/4 - modularity from the past</a></li>
<li><a href="../en494534/index.html">No masks, but you hold 1/2</a></li>
<li><a href="../en494536/index.html">Epistemic standards of inventions</a></li>
<li><a href="../en494538/index.html">Twitch streamers earn thousands of dollars in a dream</a></li>
<li><a href="../en494542/index.html">Rainbow proof demonstrates the presence of standard components in graphs</a></li>
<li><a href="../en494544/index.html">Parsing photos from cian.ru using Selenium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>