<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçê ‚ö†Ô∏è ü§∑ R√©daction CTFZone Quals 2019: Poulet üõ©Ô∏è üèß üíÉüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Malgr√© le report de la conf√©rence OFFZONE 2020 , il y aura une finale CTFZone ! Cette ann√©e, il se tiendra pour la premi√®re fois en ligne et sera acti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>R√©daction CTFZone Quals 2019: Poulet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bizone/blog/492222/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Malgr√© le report de la conf√©rence </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OFFZONE 2020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aura</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> une </font><font style="vertical-align: inherit;">finale </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">CTFZone</font></a><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">Cette ann√©e, il se tiendra pour la premi√®re fois en ligne et sera activement diffus√© sur les r√©seaux sociaux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous annoncerons les d√©tails plus tard, mais pour l'instant, nous sugg√©rons d'explorer le d√©marrage de la t√¢che Web √† partir de la phase de qualification. </font><font style="vertical-align: inherit;">L'analyse de la solution nous a √©t√© envoy√©e par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devand MacLean</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du Canada. </font><font style="vertical-align: inherit;">Surtout pour Habr, nous avons traduit le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texte de la startup locale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et nous vous invitons √† d√©couvrir quelle cha√Æne de vuln√©rabilit√©s les participants ont rencontr√©e et qu'est-ce que le poulet a √† voir avec cela.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/kw/um/qqkwum4pqnrjnrgqxa9__wofqec.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informations g√©n√©rales</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auteur de la t√¢che:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pavel Sorokin </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Points:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 470 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre d'√©quipes ayant r√©solu la t√¢che:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2</font></font><br>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liens utiles:</font></font></b></p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://gchq.github.io/CyberChef/</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-3.0</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://jakeydocs.readthedocs.io/en/latest/tutorials/first-mvc-app/adding-view.html</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://blog.mindedsecurity.com/2018/10/from-path-traversal-to-source-code-in.html</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/0xd4d/dnSpy/releases</a></li>
</ul><br>
<h2> </h2><br>
<p>  , - :</p><br>
<ul>
<li>  <b><font color="#ff0000">(/Home/Index)</font></b>;</li>
<li>   <b><font color="#ff0000">(/Home/Hens)</font></b>;</li>
<li>   <b><font color="#ff0000">(/Home/Contact)</font></b>;</li>
<li>   <b><font color="#ff0000">(/Auth/Login)</font></b>.</li>
</ul><br>
<p>, &nbsp; ,   :</p><br>
<ul>
<li>    ;</li>
<li>  &nbsp;API  ,  &nbsp; .</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La page / Accueil / Poules contient des liens pour t√©l√©charger des ¬´passeports¬ª de poulet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7n/nc/1n/7nnc1nhfmbr0yfkok8ra-hqi1fo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir d√©cod√© Base64, nous trouvons le param√®tre nom de fichier: 1.txt. </font><font style="vertical-align: inherit;">En utilisant CyberChef, nous encodons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / passwd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans Base64 et suivons le lien: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://web-chicken.ctfz.one/File/Download?filename=L2V0Yy9wYXNzd2Q=</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le contenu du </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier / etc / passwd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur le serveur est </font><font style="vertical-align: inherit;">ouvert dans le navigateur </font><font style="vertical-align: inherit;">, ce qui signifie que nous avons le droit de lire des fichiers arbitraires dans le syst√®me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous essayez de trouver d'autres fichiers dans le syst√®me, vous pouvez remarquer une erreur qui appara√Æt √† chaque fois que vous demandez un fichier inexistant (ou un fichier qui ne peut pas √™tre lu avec les droits d'utilisateur de l'application):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/au/su/ocausuexy92ii3ackgqn2fnh-ta.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir vu que l'erreur fait r√©f√©rence √† la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable d'</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> environnement </font><b><font style="vertical-align: inherit;">ASPNETCORE_ENVIRONMENT</font></b><font style="vertical-align: inherit;"> , nous commen√ßons √† √©tudier les dispositions des applications Web ASP.NET Core. </font><font style="vertical-align: inherit;">Et nous voyons ce qui suit:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dr/oz/7s/droz7stwr6mkzt3buptphi6yt88.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour convertir les chemins et noms de fichiers n√©cessaires et les extraire en Base64, nous √©crivons un petit script Python ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fetch.py</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aq/nv/of/aqnvofypmm8iiotr8xq0koyybtg.png"></div><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En utilisant ces connaissances sur la structure de l'application Web MVC cr√©√©e dans ASP.NET Core, en utilisant fetch.py, nous obtenons le code source des fichiers suivants:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Shared/_Layout.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Home/Index.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Home/Contact.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Home/Hens.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Auth/Login.cshtml</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir fait cela et √©tudi√© le code source de chaque page, nous trouvons un d√©tail int√©ressant dans Hens.cshtml </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7w/kp/mq/7wkpmqusqncbmjsdigxelqxxy2c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La ligne 1 contient l'instruction d'inclusion @ utilisant StackHenneryMVCAppProject, qui dans ASP.NET signifie un lien vers un fichier DLL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ouvrons ../StackHenneryMVCAppProject.dll - mais pas via l'utilitaire Python dans Kali Linux, mais dans le navigateur sous Windows, car nous allons d√©compiler ce fichier sous Windows. Gr√¢ce √† </font><font style="vertical-align: inherit;">l'utilisation de tels l'URL: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://web-chicken.ctfz.one/File/Download?filename=Li4vU3RhY2tIZW5uZXJ5TVZDQXBwUHJvamVjdC5kbGw=</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ouverture fichier DLL dans dnSpy (d√©compilateur .NET), voir imm√©diatement que dans la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initialize ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Config. La configuration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui s'ex√©cute au d√©marrage de l'application Web, lit le contenu du fichier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chicken_domains_internal.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A l'aide d'un script Python, nous extrayons le contenu de ce fichier: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
web-chicken-flag</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
web-chicken-auth </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize () se</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> connecte √†&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web-chicken-flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> via le port 4321 et re√ßoit plusieurs param√®tres: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secret_token</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA_key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, il n'est pas possible d'√©tablir une connexion √† web-chicken-flag. Mais, lorsque nous d√©finissons l'enregistrement des h√¥tes DNS locaux pour traduire web-chicken-auth en l'adresse IP externe du serveur ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">34.89.232.240</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), nous parvenons √† ouvrir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth /</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface Swagger UI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilis√©e pour d√©crire et ex√©cuter des commandes via l'API REST.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zy/jq/he/zyjqherp-esnmlziil2jnubkram.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En creusant dans le fichier DLL d√©compil√©, vous pouvez remarquer que le contr√¥leur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthController</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avait non seulement la </font><font style="vertical-align: inherit;">m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais aussi la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tz/zb/1c/tzzb1cui_v-acwn19zzbvi-5kbq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous allons dans&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Auth / Change_Password_Test,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous voyons ce formulaire:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hx/-l/we/hx-lwesr4_cxhuu-ryjzb2ku76w.png"></div><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque nous √©tudions la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">nous comprenons qu'elle traite quatre param√®tres de type String via une requ√™te HTTP POST:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom d'utilisateur;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nouveau mot de passe;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ancien mot de passe;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_url.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/ik/qt/qxikqtcwxuiix9mslp_stalz9ea.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un peu plus bas dans la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">nous voyons: sans recevoir de valeur pour </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la m√©thode prend la valeur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conf.auth_server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web-chicken-auth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis ajoute </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† la fin de la valeur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en affectant la cha√Æne r√©sultante √† la variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/aa/uj/-daaujfp1ocf8i6l9gtf1rtvemi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la prochaine partie importante du code, les valeurs de cha√Æne des </font><b><font style="vertical-align: inherit;">param√®tres </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">username</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">old_password</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la requ√™te HTTP POST, et avec eux le&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secret_token</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la configuration, sont ins√©r√©s dans la cha√Æne JSON. Ensuite, un objet JSON </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StringContent</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est cr√©√© √† partir de ces donn√©es </font><font style="vertical-align: inherit;">, qui sont envoy√©es en tant que donn√©es HTTP POST √† ‚Äã‚Äãla variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestURI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cr√©√©e √† l'√©tape pr√©c√©dente.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/qd/5b/3wqd5b7hjj1ftppsvtcxvfdpdyi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, le serveur attend la requ√™te HTTP POST pour&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri pour</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> renvoyer l'objet JSON avec le param√®tre de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©gal √† 0. Si cela ne se produit pas, nous arrivons √† la branche de code qui commence √† partir de la ligne 6 et renvoie la vue </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Views / Auth / Login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec l'erreur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login non valide / mot de passe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la demande HTTP POST </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">renvoie</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> toujours </font><font style="vertical-align: inherit;">un objet JSON avec le param√®tre de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©gal √† 0, nous allons √† la branche de code √† partir de la ligne 11. Ensuite, la variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtient la valeur </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un autre objet JSON </font><b><font style="vertical-align: inherit;">StringContent</font></b><font style="vertical-align: inherit;"> est cr√©√©</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec les param√®tres de la requ√™te HTTP POST d'origine, comme dans la partie pr√©c√©dente, et ces donn√©es sont envoy√©es √† l'adresse </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;dans la requ√™te HTTP PUT. Enfin, le message </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de passe modifi√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est renvoy√© au client </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cj/8y/wh/cj8ywhk0pr5vmdm8uyabhg26cf0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En bref: tout le processus commence par une requ√™te HTTP POST √†&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Auth / Change_Password_Test</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui attend un certain nombre de param√®tres. Il prend ces valeurs et cr√©e un objet JSON pour l'envoyer √†&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;base_url&gt; / auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> via HTTP POST. Si en r√©ponse, il re√ßoit JSON avec le param√®tre de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©gal √† 0, il cr√©e un autre objet JSON et envoie une demande HTTP PUT √†&nbsp; </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / change_password</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'apprentissage de l'API REST dans l'interface utilisateur de Swagger, nous voyons que dans le fichier DLL d√©compil√©, il y avait non seulement les routes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;/ auth / change_password</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais √©galement la route pour </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oh/kn/3p/ohkn3pbbiptuoxndp_xxo-in92q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette route d'API attendait un objet JSON avec deux param√®tres: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">email</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secret_token</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . S'il l'a re√ßu, il a renvoy√© un objet JSON avec une propri√©t√© </font><font style="vertical-align: inherit;">de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de 0 </font><font style="vertical-align: inherit;">et </font><b><font style="vertical-align: inherit;">des</font></b><font style="vertical-align: inherit;"> cha√Ænes de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">message</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et de&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeton</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qw/a1/j3/qwa1j37cbbppj5gpzr8iz6vdl2q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'av√®re que si nous </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for√ßons d'une</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mani√®re ou d'une autre la m√©thode </font><b><font style="vertical-align: inherit;">Check_Password_Test ()</font></b><font style="vertical-align: inherit;"> √† </font><font style="vertical-align: inherit;">demander imm√©diatement l'itin√©raire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au lieu de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alors pour entrer dans la branche de changement de mot de passe, il suffira d'entrer une adresse e-mail valide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous √©tudions √† nouveau la partie du code dans laquelle la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Check_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attribue la valeur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans la requ√™te HTTP POST d'origine, et nous comprenons que nous devons envoyer la valeur </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / password_recovery # en</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tant que param√®tre base_url et requestUri dans la finale le r√©sultat sera </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / password_recovery # / auth / login</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le caract√®re # dans l'URL HTTP indique qu'une partie de l'adresse de demande est termin√©e. Par cons√©quent, le serveur qui re√ßoit la demande ignorera simplement la partie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/aa/uj/-daaujfp1ocf8i6l9gtf1rtvemi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, cela est bien, mais nous devons juste comprendre comment le point de terminaison REST, o√π nous redirigeons maintenant la demande, recevra la valeur de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><b><font style="vertical-align: inherit;">mail</font></b><font style="vertical-align: inherit;"> . Sans cette valeur, la demande √©chouera et nous n'irons pas plus loin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous examinons attentivement comment la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Check_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cr√©e des donn√©es JSON, et nous voyons que les donn√©es d'entr√©e ne sont pas effac√©es du tout, ce qui signifie que vous pouvez facilement impl√©menter vos param√®tres. Il suffit d'envoyer les param√®tres suivants dans la requ√™te HTTP POST: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
username = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">old_password</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
= </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pwned "," email ":" admin@chicken.ctf.zone "," lol ":"</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
new_password = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p0tat0</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
base_url = </font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">http: // web-chicken-auth</font></a></b><font style="vertical-align: inherit;"> = </font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">http: // web-chicken-auth</font></a></b><font style="vertical-align: inherit;"> = </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / password_recovery #</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'objet JSON r√©sultant est envoy√© √†&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/02/h8/4-/02h84-3pz0w1c7_bg2hlyqt4k7o.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec ces donn√©es JSON, nous avons satisfait aux exigences que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> doit renvoyer une r√©ponse, apr√®s quoi le serveur entrera dans la branche de changement de mot de passe (l'objet JSON contient la propri√©t√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">email</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Maintenant, </font><font style="vertical-align: inherit;">nous n'avons plus besoin de la </font><font style="vertical-align: inherit;">valeur de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">old_password</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans cette branche de code, nous avons fourni toutes les valeurs n√©cessaires pour changer le mot de passe (la propri√©t√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">username</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et la propri√©t√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">password</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p0tat0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">La demande est termin√©e et nous obtenons un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mot de passe modifi√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en r√©ponse.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dl/pa/nw/dlpanwrefhtrjpvetawk6ed2nva.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'√† entrer un nouveau nom d'utilisateur et mot de passe sur la page de connexion!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/zx/is/eezxiswaxjxezkq8cezfrbinggs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici notre drapeau:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/ge/iw/yygeiwxjauomdcsnyqp2pabdcou.png"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492212/index.html">D√©veloppement frontend de portails sur des logiciels open source: partager l'exp√©rience</a></li>
<li><a href="../fr492214/index.html">Pourquoi vaut-il la peine de faire des r√©unions en marchant? Prouv√© par la science, confirm√© par la mafia</a></li>
<li><a href="../fr492216/index.html">Enregistrement de valeurs dans une application .Net au stade de la cr√©ation</a></li>
<li><a href="../fr492218/index.html">R√®gles de conception d'ic√¥nes √† retenir</a></li>
<li><a href="../fr492220/index.html">5 secrets peu connus des Pandas</a></li>
<li><a href="../fr492226/index.html">Comparaison de prix sur les Kubernetes g√©r√©s (2020)</a></li>
<li><a href="../fr492228/index.html">Comme Sports.ru a √©crit son √©diteur WYSIWYG</a></li>
<li><a href="../fr492232/index.html">Comment les Smartcalls sont devenus le kit Voximplant - caract√©ristiques de rebranding et de tueur</a></li>
<li><a href="../fr492234/index.html">Recherche: pourquoi les gens sont pr√™ts √† recevoir moins dans les projets sociaux</a></li>
<li><a href="../fr492242/index.html">M5Stack et ses contacts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>