<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì§ ü¶ì ‚õèÔ∏è PyDERASN: como adicionei o suporte a big data üë© üìÜ üé£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuo o √∫ltimo artigo sobre PyDERASN - o codec ASN.1 DER / CER / BER gratuito em Python. Durante o ano passado, desde o momento em que foi escrito,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PyDERASN: como adicionei o suporte a big data</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498014/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuo o √∫ltimo artigo sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyDERASN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - o codec ASN.1 DER / CER / BER gratuito em Python. </font><font style="vertical-align: inherit;">Durante o ano passado, desde o momento em que foi escrito, al√©m de todas as pequenas coisas, pequenas corre√ß√µes e verifica√ß√£o de dados ainda mais rigorosa (embora antes j√° fosse o mais rigoroso dos codecs gratuitos conhecidos por mim), uma funcionalidade para trabalhar com grandes volumes de dados apareceu nesta biblioteca - n√£o rastejando para a RAM. </font><font style="vertical-align: inherit;">Eu quero falar sobre isso neste artigo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/241/bae/4fc/241bae4fcfb5d7f0c3a605bf5f3211cb.png" alt="Navegador ASN.1"></div><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas / Tarefas</font></font></h2><br>
<ul>
<li><strong> CRL</strong>:<br>
,      (CA)         X.509 .    ,    CRL (certificate revocation list). CRL  CACert.org,  8.72 MiB,   PyDERASN-  Python 3.6      (    <em>asn1crypto</em>  <em>pyasn1</em>   ).      416 .  .    ,           .  .<br>
</li>
<li><strong> CMS</strong>:<br>
CMS (Cryptographic Message Syntax)    <br>
// . ,<br>
<em>SignedData</em>     ,   ,<br>
  ,   - <em>EnvelopedData</em> <br>
 .<br>
<br>
                 CMS. , CMS   detached data,     - ,         .  10 GiB    20 GiB   :       10 GiB      . .<br>
</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quais objetos ASN.1 na pr√°tica podem consumir muitos recursos, ocupam muito espa√ßo na mem√≥ria? Somente </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contendo v√°rios objetos (centenas de milhares no caso do CACert.org) e todos os tipos de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRINGs</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (como no segundo caso problem√°tico). Como uma das virtudes de um programador √© a pregui√ßa (de acordo com Larry Wall), tentaremos superar os problemas do consumo de recursos com uma altera√ß√£o m√≠nima no c√≥digo da biblioteca. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Os</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> objetos </font><em><font style="vertical-align: inherit;">STRING</font></em><font style="vertical-align: inherit;"> , do ponto de vista do codec, quase n√£o diferem um do outro e s√£o implementados na biblioteca por uma classe comum. O que √© codifica√ß√£o no </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OCTET STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no DER?</font></font><br>
<br>
<pre><code class="plaintext hljs">return tag + len_encode(len(value)) + value
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o precisa estar na RAM esse tempo todo. </font><font style="vertical-align: inherit;">√â necess√°rio que seja um objeto semelhante a bytes a partir do qual voc√™ pode descobrir o comprimento. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> satisfaz essas condi√ß√µes. </font><font style="vertical-align: inherit;">No entanto, o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode ser feito pelo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em qualquer arquivo tempor√°rio que j√° esteja reduzido na mem√≥ria. Os requisitos de 20 GiB 10 GiB para o banco de dados CMS </font><font style="vertical-align: inherit;">s√£o </font><em><font style="vertical-align: inherit;">copiados</font></em><font style="vertical-align: inherit;"> pela </font><font style="vertical-align: inherit;">metade: basta especificar o valor de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OCTET STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s (ou qualquer outro </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s) semelhante ao </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para cri√°-lo, o PyDERASN possui uma fun√ß√£o auxiliar:</font></font><br>
<br>
<pre><code class="plaintext hljs">from pyderasn import file_mmaped<font></font>
with open("dump.sql.zst", "rb") as fd:<font></font>
    ... = OctetString(file_mmaped(fd))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se quisermos decodificar uma quantidade enorme de dados, o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memoryview tamb√©m</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> poder√° ser usado para decodificar:</font></font><br>
<br>
<pre><code class="plaintext hljs">from pyderasn import file_mmaped<font></font>
with open("dump.sql.zst", "rb") as fd:<font></font>
    obj = Schema.decode(file_mmaped(fd))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideramos que o problema com </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° parcialmente resolvido. </font><font style="vertical-align: inherit;">Voltar para criar uma CRL enorme. </font><font style="vertical-align: inherit;">Como √© a sua estrutura?</font></font><br>
<br>
<pre><code class="plaintext hljs">CertificateList SEQUENCE<font></font>
. tbsCertList: TBSCertList SEQUENCE<font></font>
. . version: Version INTEGER v2 (01) OPTIONAL<font></font>
. . signature: AlgorithmIdentifier SEQUENCE<font></font>
. . issuer: Name CHOICE rdnSequence<font></font>
. . thisUpdate: Time CHOICE utcTime<font></font>
. . nextUpdate: Time CHOICE utcTime OPTIONAL<font></font>
. . revokedCertificates: RevokedCertificates SEQUENCE OF OPTIONAL<font></font>
. . . 0: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 17 (11)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2003-04-01T14:25:08<font></font>
. . . 1: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 20 (14)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2002-10-01T02:18:01<font></font>
<font></font>
                                 [...]<font></font>
<font></font>
. . . 415753: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 1341859 (14:79:A3)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2020-02-08T06:51:56<font></font>
. . . 415754: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 1341860 (14:79:A4)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2020-02-08T06:53:01<font></font>
. . . 415755: RevokedCertificate SEQUENCE<font></font>
. . . . userCertificate: CertificateSerialNumber INTEGER 1341861 (14:79:A5)<font></font>
. . . . revocationDate: Time CHOICE utcTime UTCTime 2020-02-08T07:25:06<font></font>
. signatureAlgorithm: AlgorithmIdentifier SEQUENCE<font></font>
. signatureValue: BIT STRING 4096 bits<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma longa lista de pequenas </font><font style="vertical-align: inherit;">estruturas </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nesse caso, contendo apenas o n√∫mero de s√©rie do certificado e a hora de sua revoga√ß√£o. </font><font style="vertical-align: inherit;">Qual √© a sua codifica√ß√£o DER?</font></font><br>
<br>
<pre><code class="plaintext hljs">value = b"".join(revCert.encode() for revCert in revCerts)<font></font>
return tag + len_encode(len(value)) + value<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas concatena√ß√£o de representa√ß√µes DER de cada elemento individual desta lista. </font><font style="vertical-align: inherit;">Precisamos ter antecipadamente todas essas centenas de milhares de objetos no decorrer de apenas seriados em 15 bytes de representa√ß√£o do DER? </font><font style="vertical-align: inherit;">Obviamente n√£o. </font><font style="vertical-align: inherit;">Portanto, substitu√≠mos a lista de objetos por um iterador / gerador. </font><font style="vertical-align: inherit;">Provavelmente, a cria√ß√£o da CRL ser√° baseada nos dados do DBMS:</font></font><br>
<br>
<pre><code class="plaintext hljs">def revCertsGenerator(...):<font></font>
    for row in db.cursor:<font></font>
        yield RevokedCertificate((<font></font>
            ("userCertificate", CertificateSerialNumber(row.serial)),<font></font>
            ("revocationDate", Time(("utcTime", UTCTime(row.revdate)))),<font></font>
        ))<font></font>
<font></font>
crl["tbsCertList"]["revokedCertificates"] = revCertsGenerator()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, quase n√£o consumimos mem√≥ria ao criar uma CRL - precisamos apenas de um local para trabalhar com sua representa√ß√£o DER: nesse caso, estamos falando de algumas dezenas de megabytes (em oposi√ß√£o a uma lista de meio gigabyte de objetos RevokedCertificate). </font><font style="vertical-align: inherit;">Mas h√° uma diferen√ßa no comportamento: a verifica√ß√£o do tamanho </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ocorre somente depois que o iterador se esgota, e n√£o no momento de atribuir um valor.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codifica√ß√£o de streaming DER</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â imposs√≠vel. Afinal, esse √© o DER - os comprimentos de todos os elementos TLV (tag + length + value) devem ser conhecidos antecipadamente! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas eu gostaria muito! Afinal, ainda precisamos de 10 GiB de mem√≥ria para armazenar a representa√ß√£o DER da c√≥pia do banco de dados: </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raw = cms.encode ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Idealmente, quero transmitir a um certo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escritor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> onde a representa√ß√£o serializada seria escrita. Talvez transfira o descritor de arquivo, deixe espa√ßos reservados no arquivo no lugar dos comprimentos e preencha-os fazendo a busca? Infelizmente, o comprimento do comprimento (respectivamente e do espa√ßo reservado) tamb√©m n√£o √© conhecido antecipadamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O PyDERASN recebeu a possibilidade de codifica√ß√£o DER de duas passagens. Na primeira passagem, o conhecimento sobre os comprimentos dos objetos √© coletado, criando um estado tempor√°rio. O segundo √© </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streaming</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codifica√ß√£o DER em um determinado </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escritor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , j√° poss√≠vel devido ao conhecimento dos comprimentos. A implementa√ß√£o disso foi simples, basta adicionar alguns m√©todos de duas passagens a cada um dos tipos de base ASN.1. Como a travessia de objetos √© estritamente determinada (D - distinta!), Para armazenar os comprimentos necess√°rios, √© mantida uma lista simples, na qual, √† medida que toda a √°rvore de objetos √© atravessada, s√£o adicionados valores de comprimentos. Para alguns tipos, o comprimento √© fixo. Para alguns, √© necess√°rio apenas para relatar a um cont√™iner upstream ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXPLICIT TAG</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Por exemplo, o estado do comprimento de uma lista de dois certificados revogados √© semelhante a este:</font></font><br>
<br>
<pre><code class="plaintext hljs">revCert = RevokedCertificate((<font></font>
    ("userCertificate", CertificateSerialNumber(123)),<font></font>
    ("revocationDate", Time(("utcTime", UTCTime(datetime.utcnow())))),<font></font>
))<font></font>
revs = RevokedCertificates([revCert, revCert])<font></font>
<font></font>
(42, [40, 18, 18])<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, precisamos saber o tamanho do valor apenas para cada um dos </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e a lista inteira como um todo. A dura√ß√£o dos n√∫meros inteiros e o tempo codificado (no DER √© um comprimento fixo) no estado n√£o √© armazenado como desnecess√°rio. Como resultado, para nossa CRL do CACert.org, essa lista leva um pouco mais de 3,5 MiB, e para o CMS gigante, no qual quase todo o peso cai em um √∫nico campo com uma c√≥pia do banco de dados, leva cerca de 0,5 KiB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A codifica√ß√£o de duas passagens √© realizada por duas chamadas:</font></font><br>
<br>
<pre><code class="plaintext hljs">fulllen, state = obj.encode1st()<font></font>
with open("result", "wb") as fd:<font></font>
    obj.encode2nd(fd.write, iter(state))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira passagem tamb√©m relata o comprimento total dos dados, que podem ser usados ‚Äã‚Äãpara verificar o espa√ßo livre ou aloc√°-lo por alguma </font><font style="vertical-align: inherit;">chamada </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">posix_fallocate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando a fun√ß√£o auxiliar </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encode2pass (obj),</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voc√™ pode executar a codifica√ß√£o de duas passagens na mem√≥ria. Pelo que? Pode ser significativamente mais econ√¥mico no consumo de mem√≥ria, j√° que, no caso da CACert.org CRL, n√£o armazena 416k + pequenas linhas bin√°rias unidas por uma </font><font style="vertical-align: inherit;">chamada </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b "". Join ()</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No entanto, isso requer mais tempo do processador, porque todos os objetos ter√£o que ser percorridos duas vezes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora podemos codificar um CMS arbitrariamente grande no DER, praticamente sem consumir mem√≥ria. </font><font style="vertical-align: inherit;">Mas, no caso da CRL, usamos o gerador de revoga√ß√£o de certificado, que ser√° executado ap√≥s o final da primeira passagem. </font><font style="vertical-align: inherit;">O que fazer? </font><font style="vertical-align: inherit;">Apenas reinicialize novamente!</font></font><br>
<br>
<pre><code class="plaintext hljs">_, state = crl.encode1st()<font></font>
crl["tbsCertList"]["revokedCertificates"] = revCertsGenerator()<font></font>
crl.encode2nd(writer, iter(state))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, somos </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obrigados a</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> garantir que o resultado do iterador seja exatamente o mesmo, caso contr√°rio, obteremos um DER quebrado. </font><font style="vertical-align: inherit;">Se os dados forem obtidos do cursor DBMS, n√£o se esque√ßa do </font><font style="vertical-align: inherit;">n√≠vel e classifica√ß√£o de isolamento da transa√ß√£o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REPEATABLE READ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codifica√ß√£o de fluxo real: CER</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ sabe, o DER (regras de codifica√ß√£o distintas) √© um subconjunto do BER (regras b√°sicas de codifica√ß√£o) que regula estritamente as regras de codifica√ß√£o de uma e apenas uma maneira. Isso permite que ele seja usado em tarefas criptogr√°ficas. Mas h√° outro subconjunto digno de nota do BER: CER (regras de codifica√ß√£o can√¥nica). Como o DER, ele possui apenas uma representa√ß√£o poss√≠vel dos dados. O CER difere do DER em v√°rios detalhes, mas permite executar uma codifica√ß√£o de dados verdadeiramente em fluxo cont√≠nuo. Infelizmente, o CER n√£o se tornou t√£o popular quanto o DER. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Omitindo diferen√ßas n√£o t√£o percept√≠veis (como classificar tags no SET), o CER possui duas diferen√ßas fundamentais em rela√ß√£o ao DER:</font></font><br>
<br>
<ul>
<li>    (constructed,  )  indefinite  (<em>LENINDEF</em>   PyDERASN).  ,  <em>SEQUENCE</em>/<em>SET</em>, <em>SEQUENCE OF</em>/<em>SET OF</em>, <em>EXPLICIT TAG</em>-  :<br>
<br>
<pre><code class="plaintext hljs">TAG_CONSTRUCTED || LEN(VALUE) || VALUE
</code></pre><br>
 <em>LENINDEF</em> (0x80)  EOC ( ,  )   :<br>
<br>
<pre><code class="plaintext hljs">TAG_CONSTRUCTED || 80 || VALUE || 00 00
</code></pre><br>
</li>
<li><em>*STRING</em>-,    1000-,  chunk-  1000-. ,      ,   DER. , 512          DER:<br>
<br>
<pre><code class="plaintext hljs">TAG_PRIMITIVE || LEN(512) || 512B
</code></pre><br>
 2048  :<br>
<br>
<pre><code class="plaintext hljs">TAG_CONSTRUCTED || 80 ||<font></font>
    TAG_PRIMITIVE || LEN(1000) || 1000B ||<font></font>
    TAG_PRIMITIVE || LEN(1000) || 1000B ||<font></font>
    TAG_PRIMITIVE || LEN(48) || 48B || 00 00<font></font>
</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo isso (mais algumas coisinhas) permite que o streaming (com 1000 bytes de buffer para strings) codifique qualquer objeto. Da mesma forma, voc√™ pode usar </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e iteradores. A codifica√ß√£o CER √© feita simplesmente chamando o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©todo .encode_cer (writer)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Infelizmente, o PyDERASN ainda n√£o √© capaz de verificar a validade do CER durante a decodifica√ß√£o, portanto somos for√ßados a decodificar os dados como BER. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O padr√£o CMS, a prop√≥sito, requer codifica√ß√£o no BER (tanto o DER quanto o CER, autom√°ticos, s√£o BER). Portanto, podemos codificar nossa c√≥pia enorme do banco de dados no CER CMS sem um DER de duas passagens. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necess√°rio que </font><em><font style="vertical-align: inherit;">SignedData</font></em><font style="vertical-align: inherit;"> tenha um </font><font style="vertical-align: inherit;">elemento </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SignedAttributes</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> codificado no DER, assim como o </font><em><font style="vertical-align: inherit;">Certificado</font></em><font style="vertical-align: inherit;"> X.509</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificados. </font><font style="vertical-align: inherit;">PyDERASN permite for√ßar o uso de DER em determinadas estruturas, simplesmente adicionando o </font><font style="vertical-align: inherit;">atributo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der_forced = True</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decodifica√ß√£o de fluxo: modo evgen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aprendemos a codificar, mas apenas o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmap</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ajudar√° na decodifica√ß√£o </font><font style="vertical-align: inherit;">. Um decodificador de fluxo ‚Äúreal‚Äù, que possui bot√µes de controle na forma de ‚Äúme d√™ mais dados‚Äù, ‚Äúaqui est√° voc√™‚Äù, algum tipo de estado - exigiria uma altera√ß√£o radical do PyDERASN. E, pessoalmente, n√£o acho que seria mais conveniente do que a solu√ß√£o atual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E a solu√ß√£o atual √© extremamente simples. No processo de decodifica√ß√£o, temos em nossas m√£os v√°rios objetos primitivos decodificados em nossas m√£os, a partir deles s√£o montados componentes superiores (constru√≠dos), dos quais outros componentes, etc. ... Acumulamos objetos para torn√°-los compostos e, chegando ao topo. nos d√™ um grande objeto. Por que n√£o "distribuir" imediatamente todos os tipos de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decodificados</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objetos, assim que aparecem em nossas m√£os? </font><font style="vertical-align: inherit;">Ou seja, retornar n√£o um objeto final, mas um gerador que gera muitos objetos decodificados. </font><font style="vertical-align: inherit;">De fato, no PyDERASN agora todos os m√©todos de decodifica√ß√£o se tornaram geradores desses "eventos" (gera√ß√£o de eventos, evgen). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se habilitarmos o modo de decodifica√ß√£o evgen de nossa enorme CRL do CACert.org, veremos a seguinte figura:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ python -m pyderasn --schema tests.test_crl:CertificateList --evgen revoke.crl<font></font>
[][T,L,  V len]<font></font>
     10   [1,1,      1]   . . version: Version INTEGER v2 (01) OPTIONAL<font></font>
     15   [1,1,      9]   . . . algorithm: OBJECT IDENTIFIER 1.2.840.113549.1.1.13<font></font>
     26   [0,0,      2]   . . . parameters: [UNIV 5] ANY OPTIONAL<font></font>
     13   [1,1,     13]   . . signature: AlgorithmIdentifier SEQUENCE<font></font>
     34   [1,1,      3]   . . . . . . type: AttributeType OBJECT IDENTIFIER 2.5.4.10<font></font>
     39   [0,0,      9]   . . . . . . value: [UNIV 19] AttributeValue ANY<font></font>
     32   [1,1,     14]   . . . . . 0: AttributeTypeAndValue SEQUENCE<font></font>
     30   [1,1,     16]   . . . . 0: RelativeDistinguishedName SET OF<font></font>
<font></font>
                                 [...]<font></font>
<font></font>
    188   [1,1,      1]   . . . . userCertificate: CertificateSerialNumber INTEGER 17 (11)<font></font>
    191   [1,1,     13]   . . . . . utcTime: UTCTime UTCTime 2003-04-01T14:25:08<font></font>
    191   [0,0,     15]   . . . . revocationDate: Time CHOICE utcTime<font></font>
    191   [1,1,     13]   . . . . . utcTime: UTCTime UTCTime 2003-04-01T14:25:08<font></font>
    186   [1,1,     18]   . . . 0: RevokedCertificate SEQUENCE<font></font>
    208   [1,1,      1]   . . . . userCertificate: CertificateSerialNumber INTEGER 20 (14)<font></font>
    211   [1,1,     13]   . . . . . utcTime: UTCTime UTCTime 2002-10-01T02:18:01<font></font>
    211   [0,0,     15]   . . . . revocationDate: Time CHOICE utcTime<font></font>
    206   [1,1,     18]   . . . 1: RevokedCertificate SEQUENCE<font></font>
<font></font>
                                 [...]<font></font>
<font></font>
9144992   [0,0,     15]   . . . . revocationDate: Time CHOICE utcTime<font></font>
9144985   [1,1,     20]   . . . 415755: RevokedCertificate SEQUENCE<font></font>
    181   [1,4,9144821]   . . revokedCertificates: RevokedCertificates SEQUENCE OF OPTIONAL<font></font>
      5   [1,4,9144997]   . tbsCertList: TBSCertList SEQUENCE<font></font>
9145009   [1,1,      9]   . . algorithm: OBJECT IDENTIFIER 1.2.840.113549.1.1.13<font></font>
9145020   [0,0,      2]   . . parameters: [UNIV 5] ANY OPTIONAL<font></font>
9145007   [1,1,     13]   . signatureAlgorithm: AlgorithmIdentifier SEQUENCE<font></font>
9145022   [1,3,    513]   . signatureValue: BIT STRING 4096 bits<font></font>
      0   [1,4,9145534]  CertificateList SEQUENCE<font></font>
</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No in√≠cio da decodifica√ß√£o, vimos a </font><font style="vertical-align: inherit;">tag </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateList </font></font></em> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEQUENCE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o comprimento dos dados, mas ainda n√£o se sabe se o objeto pode ser decodificado at√© o final. </font><font style="vertical-align: inherit;">At√© agora, estamos apenas no processo de trabalhar nisso.</font></font></li>
<li>    <em>SEQUENCE</em>:  <em>version</em>,     <em>INTEGER</em>.   .   ,      . ( <strong>10</strong>)</li>
<li>   <em>signature</em>,  <em>SEQUENCE</em>-   : <em>algorithm</em>  <em>parameters</em>.   <em>OBJECT IDENTIFIER</em>  <em>ANY</em>     . ( <strong>15</strong>, <strong>26</strong>)</li>
<li>   ,  ,   <em>signature</em> <em>SEQUENCE</em>    ,    ,    :  . ( <strong>13</strong>)</li>
<li>,   <em>RevokedCertificate</em>        . ( <strong>186</strong>, <strong>206</strong>,  ..)</li>
<li> <em>tbsCertList</em>       . ( <strong>5</strong>)</li>
<li> <em>CertificateList</em>,   <em>SEQUENCE</em>,  ,        ,         . ( <strong>0</strong>)</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, todas as </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e listas ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) n√£o t√™m significado real. </font><font style="vertical-align: inherit;">No caso do DER, conhecendo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.offset</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.vlen,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voc√™ pode ler o valor de uma linha de um arquivo (um peda√ßo de mem√≥ria?). </font><font style="vertical-align: inherit;">Os objetos de sequ√™ncia podem ser coletados e agregados conforme necess√°rio, ao receber todos os eventos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caminho decodificado e evgen_mode_upto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como entender que tipo de objeto, que </font><font style="vertical-align: inherit;">tipo de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INTEGER</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> temos em m√£os? </font><font style="vertical-align: inherit;">Cada objeto possui seu pr√≥prio caminho de decodifica√ß√£o, que identifica exclusivamente um objeto espec√≠fico na estrutura. </font><font style="vertical-align: inherit;">Por exemplo, para eventos do caminho de decodifica√ß√£o da CACert.org CRL:</font></font><br>
<br>
<pre><code class="plaintext hljs">tbsCertList:version<font></font>
tbsCertList:signature:algorithm<font></font>
tbsCertList:signature:parameters<font></font>
tbsCertList:signature<font></font>
tbsCertList:issuer:rdnSequence:0:0:type<font></font>
                                 [...]<font></font>
tbsCertList:issuer:rdnSequence<font></font>
tbsCertList:issuer<font></font>
                                 [...]<font></font>
tbsCertList:revokedCertificates:0:userCertificate<font></font>
tbsCertList:revokedCertificates:0:revocationDate:utcTime<font></font>
tbsCertList:revokedCertificates:0:revocationDate<font></font>
tbsCertList:revokedCertificates:0<font></font>
tbsCertList:revokedCertificates:1:userCertificate<font></font>
tbsCertList:revokedCertificates:1:revocationDate:utcTime<font></font>
tbsCertList:revokedCertificates:1:revocationDate<font></font>
tbsCertList:revokedCertificates:1<font></font>
                                 [...]<font></font>
tbsCertList:revokedCertificates:415755:userCertificate<font></font>
tbsCertList:revokedCertificates:415755:revocationDate:utcTime<font></font>
tbsCertList:revokedCertificates:415755:revocationDate<font></font>
tbsCertList:revokedCertificates:415755<font></font>
tbsCertList:revokedCertificates<font></font>
tbsCertList<font></font>
signatureAlgorithm:algorithm<font></font>
signatureAlgorithm:parameters<font></font>
signatureAlgorithm<font></font>
signatureValue<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â assim que podemos imprimir a lista de n√∫meros de s√©rie da revoga√ß√£o de certificado a partir desta CRL:</font></font><br>
<br>
<pre><code class="plaintext hljs">raw = file_mmaped(open("....crl", "rb"))<font></font>
for decode_path, obj, tail in CertificateList().decode_evgen(raw):<font></font>
    if (len(decode_path) == 5) and (decode_path[-1] == "userCertificate"):<font></font>
        print(int(obj))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A estrutura </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode conter muitas informa√ß√µes, incluindo v√°rias extens√µes. </font><font style="vertical-align: inherit;">Tecnicamente, obtemos todos os dados sobre o certificado revogado no modo evgen, mas a agrega√ß√£o de eventos relacionados a um elemento </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revokedCertificates</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o </font><em><font style="vertical-align: inherit;">√©</font></em><font style="vertical-align: inherit;"> muito conveniente. </font><font style="vertical-align: inherit;">Como cada </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certificado Revoked</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> final </font><font style="vertical-align: inherit;">, na pr√°tica, n√£o ocupa muito espa√ßo, seria √≥timo ter tudo a mesma coisa, nem todos os objetos s√£o t√£o "ordenados" em eventos. </font><font style="vertical-align: inherit;">PyDERASN permite que a lista especifique caminhos de decodifica√ß√£o nos quais o modo evgen est√° desativado. </font><font style="vertical-align: inherit;">Portanto, podemos definir o caminho da decodifica√ß√£o (qualquer elemento da lista </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">("tbsCertList", "revokedCertificates")</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) no qual queremos obter o </font><font style="vertical-align: inherit;">objeto </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RevokedCertificate</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> completo </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">for decode_path, obj, _ in CertificateList().decode_evgen(raw, ctx={<font></font>
    "evgen_mode_upto": (<font></font>
        (("tbsCertList", "revokedCertificates", any), True),<font></font>
    ),<font></font>
}):<font></font>
    if (len(decode_path) == 3) and (decode_path[1] == "revokedCertificates"):<font></font>
        print(int(obj["userCertificate"]))<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strings agregadas: agg_octet_string</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora n√£o temos problemas para decodificar objetos de qualquer tamanho. N√£o h√° problema em decodificar um CMS codificado em DER com uma c√≥pia do banco de dados: estamos aguardando um evento com um caminho de decodifica√ß√£o apontando para dados assinados / criptografados no CMS e processando os dados do arquivo usando offset + vlen. Mas e se o CMS estivesse no formato CER? O deslocamento + vlen n√£o ajudar√°, pois todos os nossos 10 GiBs s√£o divididos em partes de 1000 bytes, entre os quais pelo cabe√ßalho DER. Mas e se tivermos um BER no qual o aninhamento de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRINGs</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> possa ser qualquer coisa?</font></font><br>
<br>
<pre><code class="plaintext hljs">SOME STRING[CONSTRUCTED]<font></font>
    OCTET STRING[CONSTRUCTED]<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
    OCTET STRING[PRIMITIVE]<font></font>
        DATA CHUNK<font></font>
    OCTET STRING[CONSTRUCTED]<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
        OCTET STRING[PRIMITIVE]<font></font>
            DATA CHUNK<font></font>
    OCTET STRING[CONSTRUCTED]<font></font>
        OCTET STRING[CONSTRUCTED]<font></font>
            OCTET STRING[PRIMITIVE]<font></font>
                DATA CHUNK<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao decodificar no modo evgen, para cada pe√ßa obtemos o evento correspondente e √© suficiente coletar apenas </font><font style="vertical-align: inherit;">eventos </font><font style="vertical-align: inherit;">primitivos (n√£o constru√≠dos) </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* STRING</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , em que offset + vlen cont√©m dados reais. O PyDERASN possui uma conveniente </font><font style="vertical-align: inherit;">fun√ß√£o </font><font style="vertical-align: inherit;">auxiliar </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agg_octet_string</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que executa isso. √â suficiente para ela passar um gerador de eventos, cujo caminho de decodifica√ß√£o "abaixo" √© necess√°rio para agregar uma string, dados bin√°rios (ou </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis√£o da mem√≥ria</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) e </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gravador</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - uma fun√ß√£o que √© chamada com cada dado recebido. Queremos calcular o hash SHA512 e, ao mesmo tempo, salvar o conte√∫do do </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encapContentInfo.eContent</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CMS? Encontre a localiza√ß√£o do </font><font style="vertical-align: inherit;">campo de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conte√∫do</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (no qual </font><em><font style="vertical-align: inherit;">SignedData</font></em><font style="vertical-align: inherit;"> estar√° localizado</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) e decodifique seu conte√∫do de CER, gravando simultaneamente no FS e hash:</font></font><br>
<br>
<pre><code class="plaintext hljs">fdIn = open("data.p7m", "rb")<font></font>
raw = file_mmaped(fdIn)<font></font>
for decode_path, obj, _ in ContentInfo().decode_evgen(raw, ctx={"bered": True}):<font></font>
    if decode_path == ("content",):<font></font>
        content = obj<font></font>
        break<font></font>
hasher_state = sha512()<font></font>
fdOut = open("dump.sql.zst", "wb")<font></font>
def hash_n_save(data):<font></font>
    write_full(fdOut, data)<font></font>
    hasher_state.update(data)<font></font>
    return len(data)<font></font>
evgens = SignedData().decode_evgen(<font></font>
    raw[content.offset:],<font></font>
    offset=content.offset,<font></font>
    ctx={"bered": True},<font></font>
)<font></font>
agg_octet_string(evgens, ("encapContentInfo", "eContent"), raw, hash_n_save)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, outro utilit√°rio </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">write_full</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© </font><em><font style="vertical-align: inherit;">usado</font></em><font style="vertical-align: inherit;"> , que chama o </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">writer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at√© que todos os dados sejam gravados, pois, em geral, ao gravar em um arquivo, o sistema operacional n√£o √© necess√°rio para processar todos os dados transferidos e voc√™ precisa continuar o processo at√© que ele seja completamente gravado.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um par de carinhoso sobre SET OF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tecnicamente, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o pode ser codificado em tempo real nas codifica√ß√µes DER e CER, pois as representa√ß√µes codificadas de todos os elementos devem ser classificadas. </font><font style="vertical-align: inherit;">Nem o CER nem o DER de duas passagens ajudar√£o aqui. </font><font style="vertical-align: inherit;">O padr√£o ASN.1 moderno, portanto, n√£o recomenda o uso de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (que exige classifica√ß√£o semelhante no DER) e </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET OF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E qual √© essa imagem no in√≠cio do artigo?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foi no PyDERASN que um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navegador ASN.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interativo e despretensioso </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">apareceu</font></a><font style="vertical-align: inherit;"> , o que pessoalmente me ajudou v√°rias vezes a escrever manipuladores para estruturas complexas. </font><font style="vertical-align: inherit;">Permite percorrer toda a estrutura decodificada, mostrando detalhes completos sobre cada objeto, sua localiza√ß√£o em dados bin√°rios, caminho de decodifica√ß√£o. </font><font style="vertical-align: inherit;">Al√©m disso, qualquer item pode ser salvo em um arquivo separado, como certificados ou CRLs inclu√≠dos no CMS. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergey Matveev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cipherpunk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , desenvolvedor Python / Go, especialista chefe do FSUE "Centro Cient√≠fico e T√©cnico" Atlas ".</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt498000/index.html">Coisas que eu gostaria de saber antes de desenvolver meu pr√≥prio jogo</a></li>
<li><a href="../pt498002/index.html">Guia de bolso para o Z3</a></li>
<li><a href="../pt498004/index.html">Esta√ß√£o de trabalho em um cont√™iner de docker</a></li>
<li><a href="../pt498006/index.html">Escolhendo um advogado de patentes</a></li>
<li><a href="../pt498012/index.html">Mikrotik RouterOS no Docker com Qemu</a></li>
<li><a href="../pt498018/index.html">An√°lise on-line na arquitetura de microsservi√ßos: ajude e sugira o Postgres FDW e o Post Post Ã∂–øÃ∂—ÄÃ∂–æÃ∂—ÅÃ∂—ÇÃ∂–∏Ã∂—Ç e o</a></li>
<li><a href="../pt498020/index.html">Cerca de um indicador aplic√°vel √† avalia√ß√£o visual de fun√ß√µes que crescem rapidamente</a></li>
<li><a href="../pt498022/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel 341 (de 13 a 19 de abril)</a></li>
<li><a href="../pt498024/index.html">Construindo cidades com um clique do mouse com Houdini e Python</a></li>
<li><a href="../pt498026/index.html">FOSS News No. 12 - revis√£o de not√≠cias gratuitas e de c√≥digo aberto de 13 a 19 de abril de 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>