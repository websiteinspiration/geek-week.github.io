<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✍🏾 🔶 🌪️ Azure Stack HCIとは何ですか？ 🕚 🥥 👨‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！今日は、Azure Stack HCIプラットフォームの概要について説明します。一般的なもの、組み立てられたハードウェア、ソフトウェアに含まれるもの、その機能、その他すべてが含まれます。今すぐ参加！
 
 
 
 これはAltaStorのメンバーからのゲスト投稿です。AltaSt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Azure Stack HCIとは何ですか？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/496766/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font><font style="vertical-align: inherit;">今日は、Azure Stack HCIプラットフォームの概要について説明します。</font><font style="vertical-align: inherit;">一般的なもの、組み立てられたハードウェア、ソフトウェアに含まれるもの、その機能、その他すべてが含まれます。</font><font style="vertical-align: inherit;">今すぐ参加！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/a8/ns/msa8nsszbolcqdqftfpzhmhkkci.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはAltaStorのメンバーからのゲスト投稿です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AltaStor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、信頼性の高いデータストレージのソリューション構築を専門とするシステムインテグレーターです。</font><font style="vertical-align: inherit;">フェールオーバークラスターとHCIの構築に関する蓄積された専門知識のおかげで、タスクに最適なクライアントごとに個別のソリューションが選択されます。</font></font></blockquote><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Stack HCIとは何ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、いくつかの製品を組み合わせたハイパーコンバージドソリューションです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロソフト認定OEMパートナーのハードウェア。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server 2019 Datacenterオペレーティングシステム。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows管理センターソフトウェア。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要に応じてMicrosoft Azureサービス。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションは長い間市場に存在しており、一部のお客様は長く成功して使用しています。</font><font style="vertical-align: inherit;">ただし、インストールのパフォーマンステスト結果は公開しません。</font><font style="vertical-align: inherit;">このギャップを埋めて、Azure Stack HCIを使用した経験について1つの具体例を挙げて説明しました。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Azure Stack HCIのドキュメントと一般情報については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここをクリックしてください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブースレイアウト</font></font></h2>&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/086/5d0/047/0865d0047d86f46f5e2999f9abac8409.jpg"><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">装置</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションを構築するには、マイクロソフトが推奨するハードウェアプラットフォームが必要です。サーバーハードウェアの主要メーカー-HPE、Dell EMC、Fujitsu、Hitachi、Lenovoなど-は、構成を開発し、互換性についてテストし、Azure Stack HCIの認定を受けました。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
対応機器の完全なリストが利用可能です</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用するドライブのタイプによって、プラットフォームコンポーネントは異なります。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows Server 2019 DatacenterオペレーティングシステムがプリインストールされたFujitsuサーバーに基づいて、このようなソリューションを構築することをお勧めします。販売後のこのメーカーは、ハードウェアだけでなく、複雑なソフトウェアとハ​​ードウェア全体を完全なソリューションとしてサポートします。これは、パートナーとしても、エンドカスタマーにとっても重要です。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、富士通では、さまざまな種類のドライブ、サーバーモデル、およびノー​​ド数に対して5つの構成を認定しています。 Azure Stack HCIのノードの最大数は16、最小は2ですが、一部の構成は4に制限されています。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
互換性のあるすべてのFujitsu構成は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールには、現在認定されているデータストレージ用SSDドライブを備えたFujitsu Primergyと、システムキャッシュとしてNVMeインターフェイスを介して接続されたIntel Optane超高速メモリモジュールから最も効率的な構成を選択しました。 SSDドライブとNVMeキャッシュを備えた従来のストレージに匹敵するパフォーマンスを備えた、ソフトウェア定義のオールフラッシュアレイが得られると期待しています。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
業界リーダーのオールフラッシュストレージシステムは、同様のメディアタイプ構成を持っています。</font><font style="vertical-align: inherit;">そのようなシステムから実際に取得できるIOPSと待機時間の指標はわかっており、選択したFujitsu構成に基づくAzure Stack HCIからの同様のパフォーマンスを期待しています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/097/a99/1f1/097a991f1f820647f030183802c834e3.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このFujitsuソリューションのアーキテクチャについては、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントで詳しく説明してい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールする前に、よく理解することをお勧めします。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/468/866/9ae/4688669aee12df9248e368a88c758af0.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このドキュメントでは、アーキテクチャの制限、一般的な接続方式、および実装段階で役立つその他の多くの情報について説明しています。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b5/f47/26c/9b5f4726c82a82d0d12d6dafd967e443.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチ</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
富士通のソリューションは、独自のPSWITCHイーサネットスイッチを使用します。</font><font style="vertical-align: inherit;">私たち自身にとって、次の利点に注意しました。&nbsp;</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このシリーズのスイッチは、低コストで非常に生産的です。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチは、CISCOのようなインターフェイスを設定して使用するのが非常に簡単です。</font><font style="vertical-align: inherit;">エンジニアはインストール中に問題に遭遇しませんでした。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理に独占的な超過はなく、有能な文書が利用可能です。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
富士通のスイッチング機器は、日本の業界をリードする企業の1つです。</font><font style="vertical-align: inherit;">最近ロシア市場で利用できるようになりましたが、すでに私たちの建築家や他の富士通パートナーによるプロジェクトで定期的に使用されています。</font><font style="vertical-align: inherit;">限られた数のモデルが現在入手可能です。&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
富士通のスイッチについて詳しくは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式Webサイトを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバー内部では、インテルOptaneメモリーカードがスペースの大部分を占めています。&nbsp; </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/895/742/c12/895742c127ddef9ed35f44ddbfc2b6fa.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5bb/1dd/77f/5bb1dd77f0079b9babe09973b132156b.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インテルは、高熱需要下でのパフォーマンスに多くの注意を払っています。一方では、最高品質の冷却のために、大型のラジエーターが使用されます。一方、これによりサーバー全体の冷却風の流れが制限されます。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、構成を認証する際に考慮される重要なポイントの1つです。冷却が不十分なためにサーバーがOptaneモジュールを過熱する可能性がある、またはその逆の可能性があるすべてのシナリオに備える必要があります。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバールームを移動する際、お客様は空調システムがまだ稼働していない状況に何度か直面しています。そのため、この設置が冷却システムにどれだけ要求されるかを確認し、冷却されたサーバールームの外の負荷がかかった状態でのプラットフォームの寿命を測定することにしました。&nbsp;&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストは室温で実施されましたが、温度制限、パフォーマンスの低下、過熱によるエラーの発生はありませんでした。私たち自身の経験から、テストされたサーバーは、摂氏+45度までの周囲温度で宣言された動作容量をサポートすることがわかりました。&nbsp; </font></font><br>
&nbsp;<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この実験は、高品質の換気を備えた特別なサーバールームの使用を放棄することを推奨するものではありません。</font><font style="vertical-align: inherit;">ハードウェアソリューションプロバイダーを選択するときは、最高温度のパッケージに注意してください。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハードウェアプラットフォームアセンブリ</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正面図：</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/53b/5eb/7b553b5eb67aaa8405b3aec5eb7ddfd7.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
背面図：</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1db/a71/be8/1dba71be8bf20b34a2874dfb64d2e758.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストではスイッチを1つだけ使用しました。</font><font style="vertical-align: inherit;">商用利用の場合は、少なくとも2つのスイッチを使用してアクセスパスを予約することを常にお勧めします。</font><font style="vertical-align: inherit;">統計によると、クラスターで最も一般的なハードウェア障害は、偶発的なケーブルの断線またはコネクターの接触不良です。&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
制御ソフトウェアを搭載したサーバーとして、富士通RX1330を使用しました。</font><font style="vertical-align: inherit;">また、アービターおよびクォーラムサーバーの機能も割り当てられました。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスタの導入</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の段階は、ハードウェアコンポーネントの物理的な設置、インターフェースケーブルの接続などで構成されていました。</font><font style="vertical-align: inherit;">その後、ソフトウェアのセットアップが続きました。</font><font style="vertical-align: inherit;">オペレーティングシステムはすでにプリインストールされています。</font><font style="vertical-align: inherit;">Storage Space Directを各サーバーに展開し、2ノードのクラスターとアービターを構築しました。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Fujitsuインフラストラクチャマネージャーユーティリティを使用しました。これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windowsアドミンセンターの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張機能</font><font style="vertical-align: inherit;">であり、Fujitsuサーバーハードウェアと緊密に統合されており、Azureの次のようなすべての管理ツールが含まれています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Site Recoveryは、高可用性とサービスとしての災害復旧（DRaaS）を提供します。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Monitorは、AIベースの詳細な分析でアプリケーション、ネットワーク、インフラストラクチャの運用を監視するための集中サイトです。</font></font><br>
</li>
<li>«-»   Azure          .<br>
</li>
<li> Azure Backup     ,      -.<br>
</li>
<li> «  Azure»          Windows,   Azure    .<br>
</li>
<li>  Azure          Azure  VPN-  « — ».<br>
</li>
<li> «  Azure»     .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
拡張機能を使用すると、アドミンセンターで直接実行できる多数のタスクを自動化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
収集されたストレージプール、その中にボリュームが作成されました。</font><font style="vertical-align: inherit;">これらのボリュームは、後でパフォーマンステストを実施した仮想マシンに配置されます。</font><font style="vertical-align: inherit;">ボリュームと仮想マシンの両方が単一のウィンドウから便利に管理されます。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f25/a14/7cf/f25a147cf1d43eb65ce7afab6c5f2e6a.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu Infrastructure Managerを使用すると、定期的なメンテナンスやファームウェアの更新について多くのことが簡単に行えます。</font><font style="vertical-align: inherit;">すべての機器のステータスが明確に表示され、多くを自動化できます。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/364/a36/bed/364a36bed36a81528668e7d705699c11.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu Infrastructure Managerユーティリティには、有料と無料の2つのバージョンがあります。</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自由。</font><font style="vertical-align: inherit;">製造元のWebサイトからダウンロードでき、サーバー管理には十分です。</font></font><br>
</li>
<li>.       Microsoft Azure HCI —      Windows Server     .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PrimergyとMicrosoft Azure Stack HCIの深い統合には、Windows Serverのサーバー管理プラグインが必要です。これは、有料バージョンでのみ利用できます。したがって、Microsoft Azure Stack HCIソリューション向けのFUJITSU Integrated System PRIMEFLEXもその一部です。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールが多いほど、ユーティリティが提供する自動化の価値が高くなります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタンドにはノードが2つしかなく、すべての作業を手動で行うことができます。 4つ以上のノードがある場合、ソフトウェアはインストールと管理の労力を大幅に削減します。光熱費はプロジェクトの1％未満ですが、設備の試運転を大幅にスピードアップします。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows管理センターの場合、Fujitsu Infrastructure Manager Orchestraは拡張パックです。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/03b/747/11d/03b74711d36cdbe8d7809619e3b38e6f.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じスクリーンショットは、サーバーディスクサブシステムの構成を示しています。2つのOptaneモジュールがキャッシュ拡張として使用され、5つのSSDディスクがTier-1ストレージプールとして使用されています。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要なポイント</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションを構築する際には、いくつかの微妙な違いがあります</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。MicrosoftAzure Stack HCIは、Windows管理センターまたはFujitsu Infrastructure Managerの2つの方法で管理できます。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アドミンセンターには、アドバンテージもあります。ラップトップを含め、何にでも展開できます。コマンドラインから制御する機能があります。これにより、管理者はほとんど何でもできます。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、クラスターに関する問題がある場合に不可欠なツールであるクラスターマネージャーもあります。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ウィットネス（クォーラムサーバー）を展開する場合、ウィットネスをActive Directoryに追加し、すべてのノードでその可用性を確認することが重要です。このタスクの要件は最小限であり、任意のベースサーバーに配置できます。</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/081/cfc/f9b/081cfcf9b862e035a65600f1138f5dfe.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows Serverから見ると、ディスクデバイスにはNVMe、SSD、HDDの3種類があります。作業のロジックは次のとおりです。NVMeデバイスは読み取り/書き込みキャッシュ、SSDはTier-1ストレージレベルです。 HDD-Tier-2ストレージレベル。次に、プール間でデータを移動するためのポリシーを構成できます。 NVDIMMはキャッシュとしても使用できます。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ティアリングのデフォルトのブロックサイズは4Kですが、仮想マシンのファイルシステムのタイプによって異なる場合があります。これはその後、パフォーマンスに影響を与えます。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NVMeモジュールをキャッシュとして使用しているため、データの読み取りと書き込みの速度は大きく異なります。これは、パフォーマンステストで明らかになります。</font></font><br>
&nbsp;<br>
<ul>
<li>                 ( ),    SSD (Tier-1,  ).<br>
</li>
<li>       NVMe    ,       ,       .    .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスターを作成する前に、フェールオーバークラスターマネージャーでの検証とすべてのテストを完了する必要があります。</font><font style="vertical-align: inherit;">レポートを保存する必要があります。これがないと、必要に応じてMicrosoftサポートでサービスコールを開くことができないためです。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいノードを既存のクラスターに追加すると、ノードは自動的にストレージプールに追加されます。</font><font style="vertical-align: inherit;">15分後、クラスターは自動的に再構築、再構築、ストレージプールのバランスをとります。</font><font style="vertical-align: inherit;">これは、再構築中のパフォーマンスに影響を与える可能性があります。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能試験</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、最も興味深い部分である負荷テストに移りましょう。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テスト構成：</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスタに組み込まれた2つのFujitsu PRIMERGY RX2540サーバー。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各サーバーには、読み取り/書き込みキャッシュを拡張するために使用される2つのIntel Optaneストレージクラスメモリモジュールがインストールされています。</font></font><br>
</li>
<li>      SSD,      ,<br>
</li>
<li>      erasure coding ( RAID-5).<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、これはWindows Server 2019 Azure Stack HCIを実行するソフトウェア定義のストレージシステムです。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のテストは、両方のノードで実行されている12台の仮想マシンで開始します。読み取り/書き込み負荷プロファイルは70:30、ブロックサイズ= 8kです。ブロックサイズは、最新のトランザクションデータベースとOLTPロードのほとんどがそのようなブロックサイズとほぼ同じ読み取り/書き込み比率を使用するという事実に基づいて選択されました。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6b2/d7c/9da/6b2d7c9dac708b1f4d5330e3f0742e00.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定常状態のクラスターパフォーマンスは428k IOPSで、遅延は0.487ミリ秒です。これは本当に価値のある結果です。これは、多くのメーカーが提供する専用のオールフラッシュストレージシステムで得られるものにかなり匹敵します。&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様の負荷プロファイルを持つ独立したテストがspcresults.orgリソースで提供されます-これはSPC-1テストです。私たちの設定との違いはブロックサイズのみです-それは4kです。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果を比較する方法を大幅に簡略化すると、オールフラッシュストレージシステムで取得した2つのIOPSインジケーターに分割して、同じ応答時間で受け取った数値と比較できます。 2つの中間レベルサーバーのクラスターで得られた結果は、ほとんどのストレージシステムとかなり匹敵します。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、そのような比較はあまり正確ではありません。私たちの場合、ディスク数の増加は、パフォーマンスと遅延に影響を与えるのは、専用のストレージシステムの場合とはまったく異なります。しかし、これらのすべての仮定を考慮に入れても、数年前のそのようなパフォーマンスの数値は、平均以上のレベルのマルチコントローラー外部ストレージシステムでしか見られなかったと言えます。今日、これはハイパーコンバージドソリューションで実現可能です。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のブロックサイズ= 8kで重複排除と測定をオンにすると、パフォーマンスの図が大幅に変化します。同じ負荷プロファイルで単に重複排除を有効にすると、パフォーマンスは300k IOPS未満になります。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのプロファイルが100％読み取りで、他の100％が書き込みである8KBブロックで2つの負荷プロファイルを実行する場合、以下は取得できた最高の数値です：</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ed8/e3d/5e3/ed8e3d5e3a387044eb8b52b8fa45ca41.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に12μsの遅延を考慮に入れると、優れた読み取り結果が得られます。</font><font style="vertical-align: inherit;">ここでOptaneは、キャッシュへの予測的なデータ転送のための予防的なアルゴリズムを備えた読み取りキャッシュとして本当に素晴らしい仕事をします。</font><font style="vertical-align: inherit;">はい、SSDにあるストレージプール自体も非常に優れた読み取り数を示しています。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、書き込み速度は大きく異なります。</font><font style="vertical-align: inherit;">ここにいくつかの深刻な要因があります：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリューションのアーキテクチャ。1つのノードのキャッシュに落ちたデータは、ネットワークを介して2番目のノードのキャッシュにコピーされます。</font></font><br>
</li>
<li>  :         —  ,         Optane.          . <br>
<br>
            45%,            ,      — ,     .       .<br>
</li>
<li>   SSD       SSD —    3D-NAND ,         3D-NAND.<br>
</li>
</ul><br>
<h2></h2><br>
<ul>
<li> OLTP-      –       8k    .&nbsp;&nbsp;<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重複排除はいつでも有効にできますが、パフォーマンスが大幅に低下します。</font><font style="vertical-align: inherit;">テストでの重複排除効率は45％で、パフォーマンスの低下は25％以上でした。&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、より高いストレージパフォーマンスまたはほぼ2倍の容量のいずれかを自由に選択できます。</font><font style="vertical-align: inherit;">また、多くは負荷プロファイルと記録されたデータを圧縮する機能に依存します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリューションのアーキテクチャーにより、順次書き込み操作は応答時間を大幅に増加させます。&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロソフトがOEMパートナーからの検証済みの構成に基づいてのみソリューションを構築することを要求することは無駄ではありません-これにより、初期インストール中およびその後の作業中の両方で多くの問題を回避できます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いつものように、富士通のハードウェアを使って作業することは、良い印象を残しました。</font><font style="vertical-align: inherit;">これは賢明なドキュメントであり、インフラストラクチャマネージャからの多くの便利な追加です。このソフトウェアパッケージは、システム管理を大幅に簡素化します。</font><font style="vertical-align: inherit;">これは、ノード数を増やすときに特に重要です。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">富士通のPRIMEFLEXソリューションには、展開プロセスをスピードアップする一連のスクリプトが含まれています。</font><font style="vertical-align: inherit;">一般的に、特にFujitsu PRIMERGYサーバーの起動と構成が簡単になります。</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdc/a11/060/fdca11060f83e478d5edd39134097dfa.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションのセルフチューニングに興味がない場合は、富士通とテクニカルソリューション契約を結ぶ機会があります。</font><font style="vertical-align: inherit;">この場合、ベンダーの技術スペシャリストがすべてをターンキーベースで展開し、さらにサポートを提供します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja496756/index.html">実際のAWS Lambda。パート2：開発およびテストツールについて理解する</a></li>
<li><a href="../ja496758/index.html">デジタル中世医療。COVID-19後のグローバルな技術転換</a></li>
<li><a href="../ja496760/index.html">ユーザーフロー：一般的なアプリケーションとサイトを作成する方法</a></li>
<li><a href="../ja496762/index.html">粒子ベースの表面侵食シミュレーション</a></li>
<li><a href="../ja496764/index.html">小さくても誇りに思う：DuckDuckGoと広告モンスター</a></li>
<li><a href="../ja496768/index.html">RGBとHEXを忘れる</a></li>
<li><a href="../ja496770/index.html">自動化されたエンジニアのアパート。パート1：問題の説明、鉄の選択</a></li>
<li><a href="../ja496772/index.html">無人車両は、最も過酷なドライバーが運転する自動車のブランドを「念頭に置いて」おくべきです</a></li>
<li><a href="../ja496774/index.html">ミニゲームで本格的なMinecraftゲームサーバーを開発します。パート3.ミニゲームのインストール</a></li>
<li><a href="../ja496776/index.html">無人車両のハッキング：誰が責任を持つのか（RAND Corporationの調査）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>