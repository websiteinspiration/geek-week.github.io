<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💬 📫 👎 PHPセキュリティ：パスワードを保存する場所と方法。パート1 🕊️ 👱 ♂️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="毎年、ますます多くのハッカー攻撃が世界中で行われています。クレジットカードの盗難から、オンラインストアのハッキングサイトまでです。スクリプトは本当に保護されていますか？「バックエンドPHP開発者」コースの開始を見越して、同僚はPHPのセキュリティに関する興味深い出版物を作成しました...
 
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PHPセキュリティ：パスワードを保存する場所と方法。パート1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/474754/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">毎年、ますます多くのハッカー攻撃が世界中で行われています。クレジットカードの盗難から、オンラインストアのハッキングサイトまでです。</font><font style="vertical-align: inherit;">スクリプトは本当に保護されていますか？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「バックエンドPHP開発者」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コースの開始を見越して、</font><font style="vertical-align: inherit;">同僚はPHPのセキュリティに関する興味深い出版物を作成しました...</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ej/zp/uq/ejzpuq65zlwmf5lvr9x1v8h6sak.png"><br>
<hr><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FacebookとケンブリッジAnalyticaスキャンダル、2016年の米国民主党の通信漏洩、2018年のGoogleのデータ侵害、2012年のYahoo Voiceハッキングは、過去数年間に記録された主要な漏洩のほんの一例です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
世界規模の情報が今までにないほど利用可能になりました。適切な注意を払わない場合、自分自身に関する情報（機密情報を含む）もパブリックドメインにある可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オープンソースの子供向けゲームや大企業からの注文の完了など、開発しているプロジェクトの種類は関係ありません。 Web開発者としてのあなたの責任は、すべてのプラットフォームにセキュリティを提供することです。セキュリティは非常に難しい側面です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP言語には、アプリケーションのセキュリティを確保するために使用できるいくつかのツールと関数が用意されています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3パスワードセキュリティルール</font></font></h2><br>
<img src="https://habrastorage.org/webt/xa/5c/jg/xa5cjgfsiv78usmjiivd9h5cyim.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーのパスワードは知らないままにする必要があります。</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP開発者としての最初のステップをまだ覚えています。</font><font style="vertical-align: inherit;">私が作成した最初のアプリケーションは、友達と一緒に超高層ビルビルダーの役割を果たすゲームでした。</font><font style="vertical-align: inherit;">私たちはそれぞれ、アカウントにログインし、ビルダーを購入して、毎週新しい建設現場にチームを送ることができました。</font><font style="vertical-align: inherit;">基本的なアカウントを作成しました。各ユーザーのユーザー名とパスワードを追加し、電子メールで送信しました。</font><font style="vertical-align: inherit;">そして数ヶ月後、私はそれがどれほど愚かであるかを理解しました。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的なルールは次のとおりです。ユーザーのパスワードを知らないだけでなく、ユーザーを認識できないようにする必要があります。</font><font style="vertical-align: inherit;">これは非常に深刻な側面であり、法的責任を伴う場合さえあります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
試行錯誤によって、パスワードはプレーンテキストで、または簡単に復号化できる方法で保存する必要がないという結論に達します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワード制限を入力しないでください</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのゲームをプレイしましょう。</font><font style="vertical-align: inherit;">パスワードを推測してみてください：</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">**********</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
難しいですか？</font><font style="vertical-align: inherit;">これを試してみましょう：</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P * r *** e ***</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これで、大文字といくつかの大文字があることがわかりました。</font><font style="vertical-align: inherit;">もしそうなら：</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P * r *** e911</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
大文字、大文字、数字が含まれていることがわかっているので、パスワードを推測するのがはるかに簡単になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーとユーザーのパスワードのマスクに制限を課すと、同じことが起こります。</font><font style="vertical-align: inherit;">アプリケーションが特定のパターンに従う必要がある場合は、侵入者にあなたに対して使用できるヒントを与えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パスワードの長さはそれを拾うのにかかる時間に影響を与えるため、特定の最小パスワード長を要求することは正常です。</font><font style="vertical-align: inherit;">ただし、その代わりに、アルゴリズムとハッシュがどのように機能するかを確認する方がはるかに便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、上の謎の正解は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Porsche911」です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワードを最も純粋な形式で電子メールで送信しないでください。</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web開発者としての最初の間違いの1つは、事前にパスワードを管理する方法を知らなかったことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたがクライアントであり、あなたのビジネスのための素晴らしいeコマースサイトを作成するために開発者を雇ったと想像してください。</font><font style="vertical-align: inherit;">この開発者から、サイトのパスワードを含むメールが送信されました。</font><font style="vertical-align: inherit;">これで、従業員について次の3つのことがわかります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼はあなたのパスワードを知っています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗号化を使用せずに、パスワードをそのままの形式で保存します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターネット経由でパスワードを送信するとき、彼は少しの心配も感じません。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それに応じて、そのような従業員を解雇するしかない。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web開発者がすべきことは次のとおりです。</font></font></i><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーがパスワードを忘れた場合に電子メールを入力できるようにWebアプリケーションでページを作成し、新しいパスワードを要求します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションは一意のアクセス権を生成し、それをリクエストを行ったユーザーにバインドします（私は個人的にはユニバーサル個人識別子を使用しています）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションは、アクセス権へのリンクを含む電子メールをユーザーに送信します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがリンクをクリックするとすぐに、アプリケーションは正しいアクセスを確認し、ユーザーがパスワードを変更できるようにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの簡単な手順でアプリのセキュリティがどのように成長したかをご覧ください。</font><font style="vertical-align: inherit;">必要に応じて、リクエストと新しいパスワードの設定の間に時間制限を追加することで、セキュリティのレベルをさらに高めることができます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーパスワードをハッシュする方法</font></font></h2><br>
<img src="https://habrastorage.org/webt/nu/v1/by/nuv1bycogzso930__eofqolixas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webアプリケーションのパスワードは、暗号化するのではなく、ハッシュする必要があります。</font><font style="vertical-align: inherit;">暗号化は双方向のアルゴリズムです。</font><font style="vertical-align: inherit;">シーケンスは暗号化され、復号化して再利用できます。</font><font style="vertical-align: inherit;">この方法は、同盟国から情報を取得するためにインテリジェンスでよく使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハッシュでは、シーケンスをプレーンテキストに戻すことができないと想定しています。</font><font style="vertical-align: inherit;">これがプロセス全体の最終目標です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さまざまな目標を達成するために、多くのアルゴリズムが開発されています。高速に特徴付けられるアルゴリズムもあれば、信頼性の高いアルゴリズムもあります。</font><font style="vertical-align: inherit;">このテクノロジーは常に進化しており、過去数年間で多くの変化がありました。</font><font style="vertical-align: inherit;">次に、最も人気のある3つの品種を時系列で検討します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHA-1</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは歴史的に最初のハッシュ関数でした。</font><font style="vertical-align: inherit;">頭字語SHA-1は、米国国家安全保障局によって開発された「Safe Hashing Algorithm」の略です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SHA-1はよく知られており、40文字の長さの20バイトの16進文字列を作成するためにPHPで広く使用されていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSL業界では、デジタル署名に数年前からSHA-1を使用しています。</font><font style="vertical-align: inherit;">次に、いくつかの弱点を特定した後、GoogleはSHA-2に切り替えるときだと判断しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アルゴリズムの最初のバージョンは2005年に廃止されました。</font><font style="vertical-align: inherit;">その後、SHA-2、SHA-2、SHA-256の新バージョンが開発され、採用されました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bcrypt</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BHAは、SHAの自然な発展の結果ではなく、そのセキュリティのレベルのために、幅広いオーディエンスを引き付けることができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この非常に遅いアルゴリズムは、最も安全なハッシュシーケンスを作成するために作成されました。</font><font style="vertical-align: inherit;">データをハッシュするプロセスでは、データがいくつかのサイクルを通過します。これは、コンピューターテクノロジーでは、人件費のインジケーターによって記述されます。</font><font style="vertical-align: inherit;">労働率が高いほど、ハッカーがパスワードを入手するのにかかる費用は高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
良いニュースがあります。将来的には、より多くのサイクルをより速く通過できる、より強力なマシンを使用できるようになります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴン2</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ルクセンブルク大学のAlex Biryukov、Daniel Dinu、Dmitry Hovratovichによって開発された新しいファッショナブルなハッシュアルゴリズムです。</font><font style="vertical-align: inherit;">2015年には、パスワードハッシュコンテストで優勝しました。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argon2には3つのバージョンがあります。</font></font></i><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argon2dはメモリの配列にアクセスするため、メモリと時間のオーバーヘッドが削減されます。</font><font style="vertical-align: inherit;">ただし、サードパーティのチャネルを介した攻撃のリスクがあります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argon2iはArgon 2dの反対です。</font><font style="vertical-align: inherit;">サードパーティチャネルへの攻撃用に最適化されており、パスワードに依存しない方法でメモリにアクセスします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argon2idは、2つの以前のバージョンの中間バージョンです。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 この関数には6つのパラメーターがあります。</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワードシーケンス、ソルト、メモリコスト、時間コスト、並列処理係数（並列スレッドの最大許容数）、ハッシュ長です。</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事の第2部では、組み込み関数を使用してこのハッシュをPHPで使用する方法を説明します。次に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無料のオンラインウェビナー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ServerLess PHP」に</font><font style="vertical-align: inherit;">皆を招待</font><font style="vertical-align: inherit;">して、サーバーレスの概念を理解し、AWSでの実装、適用性について説明します。価格。</font><font style="vertical-align: inherit;">アセンブリと起動の原理を分析し、AWS Lambdaに基づいたシンプルなTG-botを構築します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja474738/index.html">フィレットサーフェスの形状モデリング</a></li>
<li><a href="../ja474740/index.html">マウンテンビューのベストコンピュータ歴史博物館</a></li>
<li><a href="../ja474744/index.html">Uberが金融サービス市場に参入し、Uber Money部門を立ち上げる</a></li>
<li><a href="../ja474746/index.html">奥の部屋のオブジェクトストレージ、または独自のサービスプロバイダーになる方法</a></li>
<li><a href="../ja474748/index.html">サービスデスクシステムとその統合。請負業者や製造業者との連携プロセスを自動化する方法は？</a></li>
<li><a href="../ja474756/index.html">VMworld Europe 2019：主な発表と伝説のバックパックの開梱</a></li>
<li><a href="../ja474760/index.html">Angularアプリケーションでngx-translateを固定します。実践的なウォークスルー</a></li>
<li><a href="../ja474762/index.html">ワークショップ：ビジネス向けのハイブリッドITソリューション。11月14日、モスクワ</a></li>
<li><a href="../ja474768/index.html">メインホールHighLoad ++ 2019の公開放送</a></li>
<li><a href="../ja474770/index.html">SAP HCMでの給与回帰テストの実施方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>