<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🤝‍👩🏼 💷 🤘🏽 防衛QAの最後のフロンティア：自動エラー検出 👉🏾 👨🏿‍🔬 🤲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！私の名前はAskhat Nuryevです。DINSの主要な自動化エンジニアです。
 
 私は過去7年間Dino Systemsで働いています。この間、自動機能テストの作成からパフォーマンスと高可用性のテストまで、さまざまなタスクに対処する必要がありました。徐々に、私は一般的にテストの組織...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>防衛QAの最後のフロンティア：自動エラー検出</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dins/blog/473456/"><img src="https://habrastorage.org/webt/6g/16/7z/6g167zqsfurjcekgnb-vsvxauwm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんにちは！</font><font style="vertical-align: inherit;">私の名前はAskhat Nuryevです。DINSの主要な自動化エンジニアです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は過去7年間Dino Systemsで働いています。</font><font style="vertical-align: inherit;">この間、自動機能テストの作成からパフォーマンスと高可用性のテストまで、さまざまなタスクに対処する必要がありました。</font><font style="vertical-align: inherit;">徐々に、私は一般的にテストの組織化とプロセスの最適化にさらに関与するようになりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、次のように説明します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バグがすでに本番環境に漏れている場合はどうなりますか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 手でエラーを数えることができず、目を再考しない場合、システムの品質を競うにはどうすればよいですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 自動エラー処理の落とし穴は何ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> クエリ統計の分析からどのようなボーナスを得ることができますか？</font></font></li>
</ul><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DINSは、ユニファイドコミュニケーションクラウドプロバイダーの市場リーダーであるRingCentralの開発センターです。 Ringentralは、従来のテレフォニー、SMS、会議から、コンタクトセンターの機能や複雑なチームワーク（la Slack）の機能に至るまで、ビジネスコミュニケーションのすべてを提供します。このクラウドソリューションは独自のデータセンターにあり、クライアントはサイトにサブスクライブするだけで済みます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが参加している開発に参加しているこのシステムは、200万人のアクティブユーザーに対応し、1日あたり2億7,500万を超えるリクエストを処理します。私が取り組んでいるチームは、APIの開発です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムのAPIはかなり複雑です。これを使用すると、SMSの送信、電話の発信、ビデオ会議の収集、アカウントのセットアップ、さらにはFAXの送信まで行うことができます（こんにちは、2019）。簡略化した形式では、サービスの相互作用のスキームは次のようになります。私は冗談で言っているのではない。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yh/qv/fh/yhqvfhbzgk-qluiiymhsfgchl2o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような複雑で負荷の高いシステムでは、多数のエラーが発生することは明らかです。たとえば、1年前、1週間に数万のエラーが発生しました。これらはリクエストの総数に対して1000分の1パーセントですが、それでも多くのエラーは混乱します。開発したサポートサービスのお陰で捕まりましたが、これらのエラーはユーザーに影響を与えます。さらに、システムは常に進化しており、顧客数は増加しています。そして間違いの数も。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、古典的な方法で問題を解決しようとしました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
収集し、本番環境からログを要求し、何かを修正し、何かを忘れて、KibanaとSumologicでダッシュボードを作成しました。</font><font style="vertical-align: inherit;">しかし、全体的には役に立ちませんでした。</font><font style="vertical-align: inherit;">とにかくバグが漏れ、ユーザーは不満を言った。</font><font style="vertical-align: inherit;">何かがおかしいことが明らかになりました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オートメーション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、エラーの修正に費やされた時間の90％がその情報の収集に費やされていることを理解し始めました。</font><font style="vertical-align: inherit;">正確には次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の部門から不足している情報を取得します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーログを調べます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムの動作を調査します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これまたはそのシステム動作が誤っているかどうかを理解する。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、残りの10％だけが開発に直接費やされました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは考えましたが、それ自体がエラーを検出し、それらに優先順位を付け、それを修正するために必要なすべてのデータを表示するシステムを作成したらどうなるでしょうか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はそのようなサービスのまさにアイデアがいくつかの懸念を引き起こしたと言わなければなりません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「自分ですべてのバグを見つけたら、なぜQAが必要なのですか？」</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他は反対を言った：「あなたはこの虫の山に溺れるだろう！」。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、どれが正しいのかを理解するだけで、サービスを提供する価値がありました。</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネタバレ</font></font></b><div class="spoiler_text">(   )</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既製のソリューション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、類似のシステムのどれがすでに市場に出ているかを確認することにしました。</font><font style="vertical-align: inherit;">たくさんあることがわかりました。</font><font style="vertical-align: inherit;">あなたはレイガン、セントリー、エアブレーキを強調することができます、他のサービスがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、どれも私たちに適していませんでした。その理由は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部のサービスでは、サーバーの変更を含め、既存のインフラストラクチャに大きな変更を加える必要がありました。</font><font style="vertical-align: inherit;">Airbrake.ioは、数十、数百のシステムコンポーネントを改良する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の人たちは私たち自身の間違いについてのデータを収集し、それらをどこか脇に送った。</font><font style="vertical-align: inherit;">私たちのセキュリティポリシーはこれを許可していません-ユーザーとエラーデータは私たちに残すべきです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まあ、彼らはまた非常に高価です。</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に非常に優れたインフラストラクチャがすでに構築されているため、サービスを作成する必要があることが明らかになりました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのサービスはすでに単一のリポジトリ-Elasticにログを書き込んでいます。</font><font style="vertical-align: inherit;">ログでは、すべてのサービスを介したリクエストの統一識別子がスローされました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンス統計は、Hadoopでさらに記録されました。</font><font style="vertical-align: inherit;">Impalaとメタベースを使用してログを操作しました。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのサーバーエラー（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPステータスコードの分類による）の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">うち</font><font style="vertical-align: inherit;">、エラー分析の点で最も有望なのは500コードです。エラー502、503、504への応答として、ユーザーに答えを示すことなく、しばらくしてからリクエストを繰り返すことができる場合があります。また、RCプラットフォームAPIの推奨に従って、呼び出しに応答してステータスコード500を受け取った場合、ユーザーはサポートに連絡する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの最初のバージョンは、クエリ実行ログ、発生したすべてのスタックトレース、ユーザーデータを収集し、バグをトラッカーに入れました（この場合はJIRA）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストを実行した直後に、システムが多数の重複エラーを作成していることに気付きました。ただし、これらの重複のうち、多くのスタックトレースはほとんど同じでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じエラーを識別する方法を変更する必要がありました。純粋な統計データの分析から、エラーの根本原因の特定に進みます。スタックトレースは問題の特徴をよく表していますが、それらを相互に比較することはかなり困難です。バージョンごとに行番号が変化し、ユーザーデータやその他のノイズが混入します。さらに、それらは常にログに記録されるわけではありません-一部のドロップされたリクエストでは、それらは単に存在しません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も純粋な形式では、スタックトレースはエラーの追跡に使用するのに不便です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パターン、スタックトレースのテンプレートを選択し、頻繁に変更される情報をクリアする必要がありました。一連の実験の後、正規表現を使用してデータをクリアすることにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、スタックトレースが利用可能である場合、エラーがこれらの固有のテンプレートによって識別された新しいバージョンをリリースしました。</font><font style="vertical-align: inherit;">そして、それらが利用できなかった場合、古い方法では、httpメソッドとAPIグループによって行われていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、重複はほとんどありませんでした。</font><font style="vertical-align: inherit;">ただし、多くの固有のエラーが見つかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のステップは、エラーに優先順位を付ける方法を理解することです。</font><font style="vertical-align: inherit;">優先順位：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーの頻度。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼女が懸念しているユーザーの数。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
収集した統計に基づいて、週次レポートの発行を開始しました。</font><font style="vertical-align: inherit;">それらは次のようになります：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sg/gy/lj/sggyljismpvupxa43mcjkz_pkko.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、たとえば、週あたりの上位10件のエラー。</font><font style="vertical-align: inherit;">jiraのこれらの10個のバグがサービスエラーの90％を占めていたのは興味深いこと</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y8/hz/rm/y8hzrmloopmi_ncgweivbkvjfig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
です。そのようなレポートを開発者やチームリーダーに送信しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムを立ち上げてから数か月後に、問題の数は著しく少なくなりました。</font><font style="vertical-align: inherit;">私たちの小さなMVP（最低限実行可能な製品）でさえ、エラーをより適切に整理するのに役立ちました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もしかして偶然ではなかったら、おそらくここで立ち止まるでしょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が仕事に来て、システムがホットケーキのようなバグをリベットしていることに気づいたら、一つずつ。短い調査の結果、これらのエラーの数十が1つのサービスに起因することが明らかになりました。何が問題かを調べるために、私は展開チームのチャットルームに行きました。本番環境に新しいバージョンのサービスをインストールし、期待どおりに機能することを確認することに関与している人がいました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は尋ねました：「皆さん、このサービスで何が起こったのですか？」。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして彼らは答えます：「1時間前にそこに新しいバージョンをインストールしました。」</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
段階的に問題を特定し、一時的な解決策を見つけました。つまり、サーバーを再起動しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「誤った」システムは、品質に責任を持つ開発者やエンジニアだけでなく、必要とされることが明らかになりました。本番環境でのサーバーの状態を担当するエンジニアや、サーバーに新しいバージョンをインストールするエンジニアも、それに関心を持っています。私たちが開発しているサービスは、サーバーのインストール、新しい構成の適用など、システムの変更中に本番環境で発生するエラーを正確に示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、開発の別の反復を行うことにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラー処理プロセスでは、問題の再生統計の記録をGrafanaのデータベースとダッシュボードに追加しました。これは、1日あたりのエラーのグラフィカルな分布がシステム全体</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xj/q_/gk/xjq_gkdt72qdxqocv-rv7hmku_0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
でどのように</font><font style="vertical-align: inherit;">見える</font><font style="vertical-align: inherit;">か</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">そして、これは、個々のサービスのエラーがどのようであるかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x-/5t/kx/x-5tkxagwpv16lhfg2l0fvpzgeg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラーが多数発生した場合に備えて、エンジニアの責任チームにエスカレーションしてトリガーをねじ込みました。</font><font style="vertical-align: inherit;">また、30分ごとに1回（以前のように1日1回ではなく）データ収集を設定します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムのプロセスは次のようになりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pl/gz/qg/plgzqgh9rsamo-ztprr2zbgjxug.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">お客様の過ち</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、ユーザーはサーバーエラーだけでなく、</font><font style="vertical-align: inherit;">また、クライアントアプリケーションの実装が原因でエラーが発生することもありました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントエラーを処理するために、別の検索および分析プロセスを構築することにしました。</font><font style="vertical-align: inherit;">これを行うために、企業に影響を与える2種類のエラーを選択しました。承認エラーとスロットルエラーです。</font></font><br>
<br>
<blockquote> —      .        ,     429   Retry-After,     ,        .<br>
<br>
       ,      .         .        .</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸い、インフラストラクチャと統計システムにより、クライアントエラーも追跡できます。これを行うことができるのは、APIを使用するアプリケーションの開発者が事前登録し、固有のキーを受け取る必要があるためです。クライアントからの各リクエストには認証トークンが含まれている必要があります。そうでない場合、クライアントはエラーを受け取ります。このトークンを使用して、アプリケーションを計算します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、調整エラーの監視の様子です。エラーのピークは、平日と週末に対応しています-逆に、エラーはありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pd/xk/se/pdxksedgs0yum5fmcl5o1rjzosw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部エラーの場合と同様に、Hadoopからの統計に基づいて、不審なアプリケーションを発見しました。まず、成功したリクエストの数と、コード429で完了したリクエストの数との関係です。そのようなリクエストの半分以上を受け取った場合、アプリケーションが正しく機能していないと考えました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、特定のユーザーに対する個々のアプリケーションの動作を分析し始めました。疑わしいアプリケーションの中で、アプリケーションが実行されている特定のデバイスを見つけ、最初のスロットルエラーを受け取った後、それがリクエストを実行する頻度を監視しました。リクエストの頻度が減らなかった場合、アプリケーションは期待どおりにエラーを処理しませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションの一部は弊社で開発しました。</font><font style="vertical-align: inherit;">そのため、責任のあるエンジニアを即座に見つけ、迅速にエラーを修正することができました。</font><font style="vertical-align: inherit;">また、残りのエラーをチームに送信して、外部の開発者に連絡し、アプリケーションの修正を支援することにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなアプリケーションごとに、次のことを行います。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JIRAでタスクを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統計はInfluxに記録します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー数が急激に増加した場合の外科的介入のトリガーを準備しています。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントエラーを処理するためのシステムは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5j/yf/s8/5jyfs8mn48kpqhefrw3bnvyfynm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
週に1回、エラー数の上位10の最悪アプリケーションからレポートを収集します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッチしないで警告する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、本番システムでエラーを見つける方法、サーバーエラーとクライアントエラーの両方を処理する方法を学びました。すべては問題ないように見えますが、... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし実際には、対応が遅すぎます-バグはすでにユーザーに影響を与えています！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より早くエラーを見つけてみませんか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、テスト環境ですべてを見つけるのは素晴らしいことです。しかし、テスト環境はホワイトノイズの空間です。それらは活発に開発されており、毎日いくつかの異なるバージョンのサーバーが動作しています。エラーを集中的にキャッチするのは時期尚早です。それらにはエラーが多すぎ、すべてが頻繁に変更されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、会社には、パフォーマンスをチェックするためにすべての安定したアセンブリが統合された特別な環境があり、集中型の手動回帰と高可用性テストが行​​われています。原則として、そのような環境はまだ十分に安定していません。ただし、これらの環境の問題を解析することに関心があるチームがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、もう1つ障害があります。Hadoopはこれらの環境からデータを収集しません。同じ方法を使用してエラーを検出することはできません。別のデータソースを探す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
短い検索の後、統計のストリーミングを処理し、Hadoopへの転送のためにサービスが書き込むキューからデータを読み取ります。固有のエラーを蓄積して、たとえば30分に1回など、バッチで処理するだけで十分でした。データを配信するキューシステムを確立するのは簡単です。残ったのは、受信と処理を改善することだけでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検出されたエラーが検出後にどのように動作するかを観察し始めました。発見され、修正されなかったエラーのほとんどは、本番環境の後半で発生することがわかりました。したがって、それらを正しく検出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようにして、システム、機関、およびエラー追跡のプロトタイプを構築しました。</font><font style="vertical-align: inherit;">すでに現在の形で、システムの品質を向上させ、ユーザーが気づく前にエラーを認識して修正することができます。</font><font style="vertical-align: inherit;">以前は、1週間あたり数万の誤ったリクエストを処理していた場合、現在はわずか2〜3千です。</font><font style="vertical-align: inherit;">そして、私たちはそれらをより速く修正します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、私たちはそこで止まらず、エラーの検索と追跡のためのシステムを改善し続けます。</font><font style="vertical-align: inherit;">私たちは計画を持っています：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他のAPIエラーの分析。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能テストとの統合。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムのインシデントを調査するための追加機能。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、次回はそのことについてもっと。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja473442/index.html">何かが間違いなくうまくいくでしょう、それは結構です：3人のチームでハッカソンを勝つ方法</a></li>
<li><a href="../ja473444/index.html">非競争協定：恐れることはありません</a></li>
<li><a href="../ja473446/index.html">無料のDevOops 2019およびC ++ Russia 2019 Piter</a></li>
<li><a href="../ja473452/index.html">人工知能ロボティクスインターシステムズIRIS</a></li>
<li><a href="../ja473454/index.html">DockerコンテナーでSelenoidからSelenoidを使用したテストの自動化</a></li>
<li><a href="../ja473460/index.html">К вопросу о математике</a></li>
<li><a href="../ja473462/index.html">Security Week 44：NordVPN、TorGuard、Half Hack</a></li>
<li><a href="../ja473468/index.html">ベイズの定理を理解する</a></li>
<li><a href="../ja473470/index.html">マージ要求と監査APIの依存関係が改善されたGitLab 12.4</a></li>
<li><a href="../ja473476/index.html">PVS-Studioを使用したOpenCVでのOpenCvSharpラッパーの確認</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>