<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🎤 👇 🐆 Produksi Ikon Bahan untuk MacOSX Home Assistant on Electron 🍻 🚟 🕺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada seri pertama, saya membuat rumah pintar di Home Assistant. Dalam prosesnya, saya jatuh cinta dengan Asisten Rumah dan berpikir untuk menulis apli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Produksi Ikon Bahan untuk MacOSX Home Assistant on Electron</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497880/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seri pertama,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saya membuat rumah pintar di Home Assistant. Dalam prosesnya, saya jatuh cinta dengan Asisten Rumah dan berpikir untuk menulis aplikasi desktop untuk sistem ini. Home Assitant memiliki antarmuka berbasis web yang luar biasa dan sepertinya masuk akal untuk membungkusnya dalam Electron untuk mendapatkan ikon dok yang indah, pemberitahuan asli, bilah menu untuk akses cepat dan zeroconf lainnya. Home Assistant untuk semua yang dapat digunakan Ikon Bahan: untuk dasbor, untuk negara bagian, untuk tombol, untuk semuanya. Ini berarti bahwa Anda perlu menarik seluruh set ikon material ke dalam aplikasi Electron.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Electron menggunakan API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nativeImage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk bekerja dengan gambar </font><font style="vertical-align: inherit;">, yang pada tahun 2020 tidak menerima format vektor dan berkenan hanya menggunakan PNG dan JPG. JPG tidak cocok untuk kita karena artefak kompresi untuk ikonnya mematikan. Jadi Anda perlu tempat untuk mendapatkan format yang ditransfer ke PNG. Mendaki ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situs rumah dari ikon-ikon material selama</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sekitar 15 menit, saya sedang mencari paket ikon-ikon material siap pakai untuk MacOSX yang dipotong menjadi png dalam berbagai ukuran dan di bawah dpi yang berbeda ... Sulit untuk mengatakan mengapa, tetapi mereka tidak mempublikasikan hal seperti itu di sana. Harus memproduksi secara mandiri. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Home Assistant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menawarkan untuk mendeklarasikan ikon konfigurasi dalam format "mdi: home-cirlce" - nama ikon ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dengan penggantian karakter pertama '-' oleh ':'. </font><font style="vertical-align: inherit;">Ganti "-" =&gt; ":" yang secara terprogram kami konversi menjadi lebih dekat dengan aslinya dan tidak menggunakan karakter ":" dalam nama file. </font><font style="vertical-align: inherit;">Tempat pertama yang saya ingin sekrup pada ikon adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menu dashboard Home Assistant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Untuk menubar, macosx menggunakan gambar 16x16 piksel dan @ 2 untuk retina (mungkin lebih, @ 2 sudah cukup di poppy saya). </font><font style="vertical-align: inherit;">Jadi saya perlu mendapatkan dua file untuk setiap ikon dari set materi:</font></font><br>
<br>
<pre><code class="bash hljs">mdi-icon-name16.png<font></font>
mdi-icon-name16@2.png<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menambahkan ukuran pada nama sehingga menambahkan ukuran gambar baru tidak akan mengganggu jalan di masa depan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Font terakhir biasanya dikumpulkan dari gambar SVG, ini memunculkan dua tugas: 1 - menemukan ikon material svg, 2 - mengotomatiskan pengirisan mereka untuk&gt; 5000 file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Situs asli masih berguna, di sana saya menemukan perintah "npm install</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mdi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ font. " </font><font style="vertical-align: inherit;">Secara acak mengganti svg alih-alih font dengan perintah "npm install</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mdi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ svg ”kami mendapatkan seluruh set ikon material yang tertata rapi di direktori yang sama node_modules / @ mdi / svg / svg / dengan nama-nama seperti mdi-icon-name.svg. </font><font style="vertical-align: inherit;">ImageMagick yang sudah dikenalnya menunjukkan kualitas gambar yang sangat rendah, utilitas svg2png bekerja lebih buruk. </font><font style="vertical-align: inherit;">Tetapi stackoverflow yang bagus menyarankan bahwa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inkscape akan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengatasi tugas ini </font><font style="vertical-align: inherit;">dengan perintah seperti itu</font></font><br>
<br>
<pre><code class="bash hljs">inkscape -w 16 -h 16 node_modules/@mdi/svg/svg/ab-testing.svg \<font></font>
    -o images/mdi-ab-testing16.png</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya ternyata memuaskan.Tetapi </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h7/u5/3w/h7u53wlvlxmjfgh5gf8hdkcrajm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pemeriksaan yang lebih dekat menunjukkan bahwa dalam Mode Gelap ikon tersebut terlihat membosankan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ag/k_/tj/agk_tjmhekpylck8-0y9nv2w6fc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Situs web Apple mengatakan bahwa mereka menemukan format </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Templat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> khusus </font><font style="vertical-align: inherit;">sehingga gambar dapat dibalik tanpa banyak kesulitan, jika nasib membawa mereka ke Mode Gelap. </font><font style="vertical-align: inherit;">Peran file tersebut adalah gambar PNG di mana semua piksel berwarna hitam, dan ikon itu sendiri digambar dengan transparansi (pada saluran alfa). </font><font style="vertical-align: inherit;">Pada saat yang sama, Elektron dapat mengambil gambar seperti itu jika ada "Templat" di namanya. </font><font style="vertical-align: inherit;">Jadi, dua file lagi dengan ikon perlu ditambahkan dua lagi dengan ikon Templat, kita mendapatkan set ini untuk setiap ikon:</font></font><br>
<br>
<pre><code class="bash hljs">mdi-icon-name16.png<font></font>
mdi-icon-name16@2.png<font></font>
mdi-icon-name16Template.png<font></font>
mdi-icon-name16Template@2.png<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inkscape tidak akan dapat melakukan keajaiban dengan saluran alpha dari konsol, tetapi mudah untuk mengkonversi dari ImageMagick. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami melakukannya dalam tiga langkah:</font></font><br>
<br>
<pre><code class="bash hljs">inkscape -w 16 -h 16 \<font></font>
    node_modules/@mdi/svg/svg/ab-testing.svg \<font></font>
    -o images/mdi-ab-testing16.png<font></font>
convert -size 16x16 xc:none images/background16.png<font></font>
convert -verbose -composite images/background16.png \<font></font>
    images/mdi-ab-testing16.png -compose CopyAlpha \<font></font>
    menuicons/ab-testingTemplate16.png</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 - Membuat gambar bitmap dari vektor </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 - Membuat gambar transparan untuk langkah ketiga </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 - Membuat file dengan transfer gradasi abu-abu ke saluran alfa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sudah dengan ikon menu Templat dalam Mode Gelap mulai terlihat seperti ini </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mj/g4/w7/mjg4w7raoh9flq3szdvkgllte9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, tujuannya tercapai. </font><font style="vertical-align: inherit;">Script menyaring semua gambar dalam format yang diinginkan</font></font><br>
<br>
<pre><code class="bash hljs">
<span class="hljs-comment">#!/bin/sh -x</span><font></font>
<font></font>
<span class="hljs-built_in">set</span> -e<font></font>
<font></font>
<span class="hljs-comment"># Run 'npm install @mdi/svg' beforehead</span>
MDISVG_PATH=<span class="hljs-string">'node_modules/@mdi/svg/svg/'</span><font></font>
<font></font>
<span class="hljs-comment">#Put inkscape and convert into PATH</span>
PATH=<span class="hljs-variable">$PATH</span>:/Applications/Inkscape.app/Contents/MacOS/<font></font>
<font></font>
mkdir -p images<font></font>
convert -size 32x32 xc:none images/background16@2x.png<font></font>
convert -size 16x16 xc:none images/background16.png<font></font>
<font></font>
SIZES=<span class="hljs-string">"
16,16
32,16@2x
"</span>
FILES=`ls <span class="hljs-variable">${MDISVG_PATH}</span> |grep svg`
<span class="hljs-keyword">for</span> SVG <span class="hljs-keyword">in</span> <span class="hljs-variable">$FILES</span>; <span class="hljs-keyword">do</span>
    BASE=$(basename <span class="hljs-string">"<span class="hljs-variable">$SVG</span>"</span> | sed <span class="hljs-string">'s/\.[^\.]*$//'</span>)
    <span class="hljs-keyword">for</span> PARAMS <span class="hljs-keyword">in</span> <span class="hljs-variable">$SIZES</span>; <span class="hljs-keyword">do</span>
        SIZE=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$PARAMS</span> | cut -d, -f1)<font></font>
        LABEL=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$PARAMS</span> | cut -d, -f2)<font></font>
        inkscape -w <span class="hljs-variable">$SIZE</span> -h <span class="hljs-variable">$SIZE</span> <span class="hljs-string">"<span class="hljs-variable">$MDISVG_PATH</span>/<span class="hljs-variable">$SVG</span>"</span> \<font></font>
            -o <span class="hljs-string">"images/mdi-<span class="hljs-variable">${BASE}</span><span class="hljs-variable">${LABEL}</span>"</span>.png<font></font>
        convert -verbose \<font></font>
            -composite images/background<span class="hljs-variable">${LABEL}</span>.png <span class="hljs-string">"images/mdi-<span class="hljs-variable">${BASE}</span><span class="hljs-variable">${LABEL}</span>"</span>.png \<font></font>
            -compose CopyAlpha \<font></font>
            <span class="hljs-string">"images/<span class="hljs-variable">${BASE}</span>Template<span class="hljs-variable">${LABEL}</span>"</span>.png
    <span class="hljs-keyword">done</span>
<span class="hljs-keyword">done</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menunggu beberapa jam hingga&gt; 20.000 gambar keluar dari jalur perakitan ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Ini bukan satu-satunya petualangan ketika bekerja dengan Electron, saya akan menulis tentang petualangan selanjutnya saat mereka selesai ...</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id497870/index.html">Virus komputer: kisah dari mata-mata rumah yang tidak berbahaya hingga pencuri kartu bank</a></li>
<li><a href="../id497872/index.html">Faktor yang tidak biasa dan cukup jelas mempengaruhi lalu lintas jaringan perusahaan dan pekerjaan penyedia</a></li>
<li><a href="../id497874/index.html">David Heinemeyer Hansson (Basecamp, ReWork, Ruby on Rails) tentang cara kerjanya</a></li>
<li><a href="../id497876/index.html">[bookmark] Bekerja dengan gambar di web</a></li>
<li><a href="../id497878/index.html">Instal versi GPL HPL dengan OpenBLAS</a></li>
<li><a href="../id497882/index.html">Bagaimana cara mendapatkan wawancara atau mengapa Anda tidak dipekerjakan?</a></li>
<li><a href="../id497886/index.html">Validasi bidang iOS - cepat dan mudah</a></li>
<li><a href="../id497890/index.html">Hari Pelatihan Virtual Microsoft 365: Selami Tim Microsoft</a></li>
<li><a href="../id497894/index.html">Hari Pelatihan Virtual Microsoft Azure: Gudang Data Modern</a></li>
<li><a href="../id497896/index.html">Kami menjaga penglihatan di situs jarak jauh menggunakan proyektor alih-alih monitor - beberapa nuansa yang tidak terlihat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>