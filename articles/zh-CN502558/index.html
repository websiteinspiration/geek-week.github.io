<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐺 🤵🏾 👚 我如何在Unigine收集轮物理 🈚️ 🎹 ⛹🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="美好的一天。
 
 这次我们将讨论俄罗斯Unigine引擎，以及如何在其中组装简单的机器。该方案不是理想的，因为我在某些方面还没有弄清楚，但是至少我会分享我的经验。
 
 
 
 首先，要了解车轮的物理原理，我们去了官方文档并找到了这个例子。
 
 顺便说一下，请注意，这是车轮接头的示例，但由于某些...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>我如何在Unigine收集轮物理</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502558/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">美好的一天。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这次我们将讨论俄罗斯</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unigine引擎</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及如何在其中组装简单的机器。</font><font style="vertical-align: inherit;">该方案不是理想的，因为我在某些方面还没有弄清楚，但是至少我会分享我的经验。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c2/zw/ga/c2zwgaa8w_tvfzoalwi0twc8tpw.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，要了解车轮的物理原理，我们去了官方文档并找到了这个</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一下，请注意，这是车轮接头的示例，但由于某些原因，它位于地址/ car_suspension_joints /。您还需要确保文档不会跳到旧版本（即DOCS（2.11）已打开），并在文章顶部标记“ C＃”框。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过研究示例，我们可以看到它是用早期的C ++解决方案类推编写的。也就是说，一切都是通过代码创建的。对于可视化编程已经非常重要，我们已经到了。好吧，并不是所有的事情都那么令人难过，但是您可以在代码中看到所有这些是如何完成的。并在链接上运行后，全面了解了车轮关节装置和物理设置。</font></font><br>
<blockquote>           (               ).  ,   -,    UnigineScript,           .           LOD'.</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，我期望有一个关于视觉组装的现成的循序渐进指南，以便使某些东西滚动，而花费很少的血液。</font><font style="vertical-align: inherit;">结果，我仍然不得不全神贯注于所有这些，以便制定出一些近似的管道。</font><font style="vertical-align: inherit;">这部分获得了成功，但是在所有方面都还远未得到理解，并且仍然存在很多问题，例如，是否应将机壳和车轮节点构建到一定的层次结构中，这些点的轴是否正确定向等等。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，此说明将帮助您掌握基本原理，但是为了理解设置的复杂性，您仍然必须学习文档（或者也许它们会在注释中告诉您一些有用的信息）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框架组装</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个新项目。选择C＃选项。在编辑器中打开项目。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rk/tn/h7/rktnh7wpsyzisoq4ty669fphlse.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/-y/ap/5w/-yap5w7rp7hvkwcn5kvplalrl4y.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qo/i9/h5/qoi9h50sjmgnd8ffvr0j_0adgqg.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们创建机器的基础。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，请右键单击场景，然后选择“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原始”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。结果是一个</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长方体</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">。将其略微升高到“地板”上方。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cv/zv/wl/cvzvwl6izztpmcwchcizqgxtnok.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们制造轮子。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再次单击鼠标，然后选择“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原始”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">圆柱体”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这将需要4件。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/zl/qe/zmzlqe9puvjmazj1oqxx4vyouj4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了不与方向混淆，您可以转动相机，使-Y在立方体中从上方发光（也就是说，我们现在正在从后面看未来的机器），并将两个圆柱体放在长方体后面，另外两个圆柱体放在其前面。无需以某种方式旋转和自定义它们。为了方便起见，可以在背面和正面分配不同的颜色。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加物理基础。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择Cuboid，然后在左侧</font><font style="vertical-align: inherit;">的</font><b><font style="vertical-align: inherit;">Node</font></b><font style="vertical-align: inherit;">标签</font><font style="vertical-align: inherit;">的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameters</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窗口中</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">切换到</font><b><font style="vertical-align: inherit;">Physics</font></b><font style="vertical-align: inherit;">。在“主体”列中，选择“ </font><b><font style="vertical-align: inherit;">刚性</font></b><font style="vertical-align: inherit;">类型” </font><font style="vertical-align: inherit;">。之后，向下滚动并在打开的Shapes列中选择</font><b><font style="vertical-align: inherit;">Box</font></b><font style="vertical-align: inherit;">项</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
我们看到了出现的</font><b><font style="vertical-align: inherit;">ShapeBox</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/n3/if/mr/n3ifmrljrcf7hdti6jl1d_hkwzy.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ok/b7/bd/okb7bdarwhc9ecqndtxrv99_yvo.jpeg"><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。我们将进入其设置，并立即将基准设置为建议的质量（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）64千克。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/3b/xg/sc3bxgfko_smsb0azhe3cxe6ska.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向轮子添加物理特性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
依次选择圆柱体，然后将其</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设为“刚性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”标签。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他们不需要创建形状，因为车轮接头可以在rakcast上使用。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将车轮系到底座上。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
是时候分配车轮节了。为此，请正确选择长方体，然后向下滚动到“物理”选项卡中的“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关节”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">。在列表中，选择“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滚轮”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后单击“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮，将</font><b><font style="vertical-align: inherit;">出现</font></b><font style="vertical-align: inherit;"> “ </font><b><font style="vertical-align: inherit;">选择车身”</font></b><font style="vertical-align: inherit;">窗口。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在此处选择一个圆柱体，该圆柱体在场景中以白色网格突出显示，然后按“确定”。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WheelJoint</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定将出现在列表中</font><font style="vertical-align: inherit;">。在这里已经需要重命名它们（为此，您需要单击“ JointWheel”行并在“名称”列中写一个新名称）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/wc/55/xlwc55bh8sfeeycxgd_0g69bc4y.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/cy/tx/gu/cytxgutnev7f2dtruvcuxulb_di.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，将其余的圆柱体连接到长方体上。这样他的积分榜上最后就烧掉了4条线。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k9/w7/m0/k9w7m0xomsussfajdt7pfrma0bo.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果不重命名，则会有4行WheelJoint。</font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，您需要从</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">长方体</font></i><i><font style="vertical-align: inherit;">进行绑定，而不是从圆柱体本身的“物理”选项卡中进行绑定。尽管在此之后，如果您选择一个特定的圆柱体并转到其“物理”，则其创建的关节也会显示在此处，您可以编辑其参数。</font></i></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置绑定的配置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再次选择长方体，在物理学中找到其点的列表，然后选择其中之一。我们看到长方体内部的场景中出现了带有正方形的白色角。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在交界处的设置中，找到向量</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anchor 0的图</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并调整其三个字段的值，以使此角沿X轴移动，在长方体外部并沿Z轴稍微降低。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9r/qc/rq/9rqcrqrxixc4te5t044g7b6rgvc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k2/9w/bz/k29wbzbjz46oihwptmknnhs2vvk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后根据绑定，沿Y轴移动角当前选择哪个轮子。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们对其余的点重复该过程，沿Z轴设置完全相同的位移，并且沿其他轴设置相同的方向，但多方向设置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果一次选择所有点，则整个设计将变得可见。您还可以在场景上方的特殊面板上启用助手中的关节显示：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">助手</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关节</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hb/up/zc/hbupzcovchgweojafgbxklzpqag.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有辅助工具的框架后视图</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们看看发生了什么。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在编辑器中，有一个用于计算物理的按钮。如果启用它，则将开始物理模拟（脚本不起作用），您可以检查科学怪人的行为。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开始之前，请确保</font><b><font style="vertical-align: inherit;">已</font></b><font style="vertical-align: inherit;">在“楼层”设置</font><b><font style="vertical-align: inherit;">中选中</font></b><font style="vertical-align: inherit;">了“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">碰撞</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理相交”已</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用的复选框</font><font style="vertical-align: inherit;">。否则，我们的创作可能完全在地板下或仅在轮子下完全失败。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qb/tm/o8/qbtmo8bd8kf3-p_w6sh7im8g3p0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意，在开启仿真之前，最好保存一下，并且在其操作过程中更正的参数在断开连接后将恢复为它们的值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如我们所见，车轮在正确的位置被拾起，但结构落在圆柱体末端的表面上。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o1/fw/-1/o1fw-1vccn8ik64sqcdbuqy2ghg.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以先在“身体”列的“物理”选项卡上启用“不动”复选框，将长方体自身冻结在适当的位置。</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调整车轮的轮轴。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
禁用物理模拟。选择长方体，转到其“物理”选项卡，</font><font style="vertical-align: inherit;">并</font><font style="vertical-align: inherit;">为每个结点编辑轴</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">00</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轴10</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轴11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。请注意，在每个向量的字段总和中，取值从0到1，如果您首先将1放到新轴而不将向量清零，则编辑器将尝试自动更正值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显然，我还没有开发出矢量，助手显示左，右部分的方向相同，但是它们没有清楚地了解哪个轴在哪里，这使得调整变得很困难。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无论如何，这种布局或多或少地起作用。在这里，我设置轴矢量如下：轴00（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），轴线10（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），轴11（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t3/ag/gx/t3aggx5tphzit6yeuvzgwdlvaz0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果现在开始物理模拟，则设计应落在正确旋转的圆柱体上，圆柱体随后将沿着正确的轴旋转。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">车轮质量和行为，物理迭代。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最有可能的是，结构跌落到地面后现在部分失效。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，让我们进入物理学的一般设置。我们单击编辑器的第一行。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后在打开的设置选项卡中，找到</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font><font style="vertical-align: inherit;">（运行时/世界/）。我们在“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迭代次数”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">中至少</font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">了</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5个</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hz/rz/3a/hzrz3a_ss_pg09irawvrwz5i5tg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们再次进入每个关节的设置。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在列表的顶部，每个人都有一个</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iteration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">，设置为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线性恢复</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角度恢复</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线性自</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-0.15</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改</font><font style="vertical-align: inherit;">为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.15</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在底部，我们</font><font style="vertical-align: inherit;">在</font><b><font style="vertical-align: inherit;">车轮质量</font></b><font style="vertical-align: inherit;">字段中将其</font><font style="vertical-align: inherit;">重</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">千克</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
当模拟开始时，物理“机器”仍然必须部分失败/失败。</font><font style="vertical-align: inherit;">
将每个</font><b><font style="vertical-align: inherit;">线性阻尼</font></b><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为</font><b><font style="vertical-align: inherit;">50</font></b><font style="vertical-align: inherit;">。并将</font><b><font style="vertical-align: inherit;">线性弹簧</font></b><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为</font><b><font style="vertical-align: inherit;">10</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
现在，在模拟过程中，结构应掉落并在地板上轻微反弹。如果这不起作用，请尝试使用线性阻尼和线性弹簧值。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文档建议设置阻尼400和弹簧100，但就个人而言，“机器”同时开始像直升机一样旋转，弹跳并飞走。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框架的最终设置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保存并尝试单击“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">播放”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（包含物理模拟的旁边的上方的按钮），以第一人称视角浏览场景。 “机器”最有可能悬在空中，但如果将其推入中央立方体，则会滚动。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gc/rm/ph/gcrmph0gmkv8unsmjjihna9glio.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，您可以</font><font style="vertical-align: inherit;">在这些点上</font><font style="vertical-align: inherit;">调整“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">锚点0”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以使它们与中心大约等距（尽管不是必需的）。然后开始仿真，并在其间更改</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线性弹簧</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">以找到每个车轮正常接触地面的最佳值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完成所有这些操作后，您应该使“机器”正确掉落到地板上，在游戏模式下按下时，该机器会略微滚动，默认情况下，您在具有第一人称视角的单独控制器上运行。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/tx/mp/gztxmpwohsuj6xw3pcwosvommj4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写控制脚本</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们有一个空白的“打字机”，现在我们将在C＃中为其编写控制代码。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，请在场景下的窗口中单击鼠标右键，然后选择“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建C＃组件”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在出现的窗口中输入脚本的名称。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7m/wt/tc/7mwttcgrd3_7ugr6w-9frtohwqo.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/o3/ha/x_/o3hax_u0jcam5wcbhrqwk4uwpiq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
双击出现的脚本文件，开发环境开始。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_i/ak/6t/_iak6tyajkyxwcwsharicq44s7o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择图片中用蓝色填充的行，将其删除，然后添加以下代码，我在其中编辑了文档中建议的脚本：</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本片段</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs">	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel"</span>)]
	<span class="hljs-keyword">private</span> Node targetWheelL = <span class="hljs-literal">null</span>;<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel"</span>)]
	<span class="hljs-keyword">private</span> Node targetWheelR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel F"</span>)]
	<span class="hljs-keyword">private</span> Node targetFWL = <span class="hljs-literal">null</span>;<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel F"</span>)]
	<span class="hljs-keyword">private</span> Node targetFWR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
	[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"theCar"</span>)]
	<span class="hljs-keyword">private</span> Node targetCar = <span class="hljs-literal">null</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> JointWheel my_jointL;
    <span class="hljs-keyword">private</span> JointWheel my_jointR;
    <span class="hljs-keyword">private</span> JointWheel my_jointFL;
    <span class="hljs-keyword">private</span> JointWheel my_jointFR;<font></font>
<font></font>
	Controls controls = <span class="hljs-literal">null</span>;
	<span class="hljs-keyword">float</span> angle = <span class="hljs-number">0.0f</span>;
	<span class="hljs-keyword">float</span> velocity = <span class="hljs-number">0.0f</span>;
	<span class="hljs-keyword">float</span> torque = <span class="hljs-number">0.0f</span>;<font></font>
<font></font>
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> ifps;<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>(<span class="hljs-params"></span>)</span><font></font>
	{<font></font>
	my_jointL = targetWheelL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
	my_jointR = targetWheelR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
	my_jointFL = targetFWL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
	my_jointFR = targetFWR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
<font></font>
	PlayerPersecutor player = <span class="hljs-keyword">new</span> PlayerPersecutor();<font></font>
	controls = player.Controls;<font></font>
	}<font></font>
	<font></font>
	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><font></font>
	{<font></font>
			ifps = Game.IFps;<font></font>
<font></font>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_FORWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_UP) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Max(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity += ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_BACKWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_DOWN) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Min(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity -= ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				velocity *= MathLib.Exp(-ifps);<font></font>
			}<font></font>
			velocity = MathLib.Clamp(velocity, <span class="hljs-number">-90.0f</span>, <span class="hljs-number">90.0f</span>);<font></font>
<font></font>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_LEFT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_LEFT) == <span class="hljs-number">1</span>))<font></font>
				angle += ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_RIGHT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_RIGHT) == <span class="hljs-number">1</span>))<font></font>
				angle -= ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &lt; <span class="hljs-number">0.25f</span>) angle = <span class="hljs-number">0.0f</span>;
				<span class="hljs-keyword">else</span> angle -= MathLib.Sign(angle) * ifps * <span class="hljs-number">45.0f</span>;<font></font>
			}<font></font>
	<font></font>
			angle = MathLib.Clamp(angle, <span class="hljs-number">-10.0f</span>, <span class="hljs-number">10.0f</span>);<font></font>
<font></font>
			<span class="hljs-keyword">float</span> base_a = <span class="hljs-number">3.3f</span>;
			<span class="hljs-keyword">float</span> width = <span class="hljs-number">3.0f</span>;
			<span class="hljs-keyword">float</span> angle_0 = angle;
			<span class="hljs-keyword">float</span> angle_1 = angle;
			<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &gt; MathLib.EPSILON)<font></font>
			{<font></font>
				<span class="hljs-keyword">float</span> radius = base_a / MathLib.Tan(angle * MathLib.DEG2RAD);<font></font>
				angle_0 = MathLib.Atan(base_a / (radius + width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
				angle_1 = MathLib.Atan(base_a / (radius - width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
			}<font></font>
<font></font>
			my_jointFL.Axis10 = MathLib.RotateZ(angle_0).GetColumn3(<span class="hljs-number">0</span>);<font></font>
			my_jointFR.Axis10 = MathLib.RotateZ(angle_1).GetColumn3(<span class="hljs-number">0</span>);<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (controls.GetState(Controls.STATE_USE) == <span class="hljs-number">1</span>)<font></font>
			{<font></font>
				velocity = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
					my_jointR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
					my_jointFL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
					my_jointFR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
					my_jointL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointFL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
					my_jointFR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
			}<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.Q))<font></font>
			{<font></font>
				targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.UP*<span class="hljs-number">1000f</span>);<font></font>
			}<font></font>
			<span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.E))<font></font>
			{<font></font>
				targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.DOWN*<span class="hljs-number">1000f</span>);<font></font>
			}<font></font>
<font></font>
	}<font></font>
<font></font>
		<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdatePhysics</span>(<span class="hljs-params"></span>)</span><font></font>
		{<font></font>
			my_jointL.AngularVelocity = velocity;<font></font>
			my_jointR.AngularVelocity = velocity;<font></font>
			<font></font>
			my_jointL.AngularTorque = torque;<font></font>
			my_jointR.AngularTorque = torque;<font></font>
		}<font></font>
</code></pre><br>
</div>
                    </div><br>
<br>
<i>      :</i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">   TheVehicle.cs</b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Unigine;<font></font>
<font></font>
[<span class="hljs-meta">Component(PropertyGuid = <span class="hljs-meta-string">"ca695c8787d5703a22a6c2516a3c177cddf38cab"</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TheVehicle</span> : <span class="hljs-title">Component</span><font></font>
{<font></font>
</code></pre><br>
,    ,       .     ,      .<br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel"</span>)]
<span class="hljs-keyword">private</span> Node targetWheelL = <span class="hljs-literal">null</span>;<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel"</span>)]
<span class="hljs-keyword">private</span> Node targetWheelR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Left Wheel F"</span>)]
<span class="hljs-keyword">private</span> Node targetFWL = <span class="hljs-literal">null</span>;<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"Right Wheel F"</span>)]
<span class="hljs-keyword">private</span> Node targetFWR = <span class="hljs-literal">null</span>;<font></font>
<font></font>
[<span class="hljs-meta">ShowInEditor</span>][Parameter(Tooltip = <span class="hljs-string">"theCar"</span>)]
<span class="hljs-keyword">private</span> Node targetCar = <span class="hljs-literal">null</span>;
</code></pre><br>
       .          tooltip     ,    .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> JointWheel my_jointL;
<span class="hljs-keyword">private</span> JointWheel my_jointR;
<span class="hljs-keyword">private</span> JointWheel my_jointFL;
<span class="hljs-keyword">private</span> JointWheel my_jointFR;
</code></pre><br>
   . <br>
<br>
<pre><code class="cs hljs">Controls controls = <span class="hljs-literal">null</span>;<font></font>
<font></font>
<span class="hljs-keyword">float</span> angle = <span class="hljs-number">0.0f</span>;
<span class="hljs-keyword">float</span> velocity = <span class="hljs-number">0.0f</span>;
<span class="hljs-keyword">float</span> torque = <span class="hljs-number">0.0f</span>;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> ifps;
</code></pre><br>
   .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
my_jointL = targetWheelL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
my_jointR = targetWheelR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
my_jointFL = targetFWL.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;<font></font>
my_jointFR = targetFWR.ObjectBodyRigid.GetJoint(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> JointWheel;
</code></pre><br>
   ,               JointWheel.<br>
        , ,    (    ).<br>
<br>
<pre><code class="cs hljs">			
<span class="hljs-comment">// setting up player and controls</span>
PlayerPersecutor player = <span class="hljs-keyword">new</span> PlayerPersecutor();<font></font>
controls = player.Controls;<font></font>
}<font></font>
</code></pre><br>
    ,  PlayerPresecutor,     Controls       player  .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
ifps = Game.IFps;<font></font>
<font></font>
<span class="hljs-comment">// forward and backward movement by setting joint motor's velocity and torque</span>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_FORWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_UP) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Max(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity += ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<span class="hljs-comment">//Input.IsKeyDown(Input.KEY.DOWN)</span>
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_BACKWARD) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_DOWN) == <span class="hljs-number">1</span>))<font></font>
			{<font></font>
				velocity = MathLib.Min(velocity, <span class="hljs-number">0.0f</span>);<font></font>
				velocity -= ifps * <span class="hljs-number">50.0f</span>;<font></font>
				torque = <span class="hljs-number">5.0f</span>;<font></font>
			}<font></font>
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				velocity *= MathLib.Exp(-ifps);<font></font>
			}<font></font>
			velocity = MathLib.Clamp(velocity, <span class="hljs-number">-90.0f</span>, <span class="hljs-number">90.0f</span>);<font></font>
<font></font>
			<span class="hljs-comment">// steering left and right by changing Axis01 for front wheel joints</span>
			<span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_LEFT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_LEFT) == <span class="hljs-number">1</span>))<font></font>
				angle += ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((controls.GetState(Controls.STATE_MOVE_RIGHT) == <span class="hljs-number">1</span>) || (controls.GetState(Controls.STATE_TURN_RIGHT) == <span class="hljs-number">1</span>))<font></font>
				angle -= ifps * <span class="hljs-number">100.0f</span>;
			<span class="hljs-keyword">else</span><font></font>
			{<font></font>
				<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &lt; <span class="hljs-number">0.25f</span>) angle = <span class="hljs-number">0.0f</span>;
				<span class="hljs-keyword">else</span> angle -= MathLib.Sign(angle) * ifps * <span class="hljs-number">45.0f</span>;<font></font>
			}<font></font>
<font></font>
			angle = MathLib.Clamp(angle, <span class="hljs-number">-10.0f</span>, <span class="hljs-number">10.0f</span>);<span class="hljs-comment">//      30  (angle, -30.0f, 30.0f)</span><font></font>
<font></font>
			<span class="hljs-comment">// calculating steering angles for front joints (angle_0 and angle_1)</span>
			<span class="hljs-keyword">float</span> base_a = <span class="hljs-number">3.3f</span>;
			<span class="hljs-keyword">float</span> width = <span class="hljs-number">3.0f</span>;
			<span class="hljs-keyword">float</span> angle_0 = angle;
			<span class="hljs-keyword">float</span> angle_1 = angle;
			<span class="hljs-keyword">if</span> (MathLib.Abs(angle) &gt; MathLib.EPSILON)<font></font>
			{<font></font>
				<span class="hljs-keyword">float</span> radius = base_a / MathLib.Tan(angle * MathLib.DEG2RAD);<font></font>
				angle_0 = MathLib.Atan(base_a / (radius + width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
				angle_1 = MathLib.Atan(base_a / (radius - width / <span class="hljs-number">2.0f</span>)) * MathLib.RAD2DEG;<font></font>
			}<font></font>
</code></pre><br>
  Update,           ,     .<br>
<br>
<pre><code class="cs hljs">my_jointFL.Axis10 = MathLib.RotateZ(angle_0).GetColumn3(<span class="hljs-number">0</span>);<font></font>
my_jointFR.Axis10 = MathLib.RotateZ(angle_1).GetColumn3(<span class="hljs-number">0</span>);<font></font>
<font></font>
<span class="hljs-comment">// enabling or disabling a brake</span>
<span class="hljs-keyword">if</span> (controls.GetState(Controls.STATE_USE) == <span class="hljs-number">1</span>)<font></font>
{<font></font>
velocity = <span class="hljs-number">0.0f</span>;<font></font>
my_jointL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
my_jointR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
my_jointFL.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
my_jointFR.AngularDamping = <span class="hljs-number">20000.0f</span>;<font></font>
}<font></font>
<span class="hljs-keyword">else</span><font></font>
{<font></font>
my_jointL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
my_jointR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
my_jointFL.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
my_jointFR.AngularDamping = <span class="hljs-number">0.0f</span>;<font></font>
}<font></font>
</code></pre><br>
      ,  ,    .        ,     4 .     ,              ,         10 .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.Q))<font></font>
{<font></font>
targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.UP*<span class="hljs-number">1000f</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (Input.IsKeyDown(Input.KEY.E))<font></font>
{<font></font>
targetCar.ObjectBodyRigid.AddLinearImpulse(vec3.DOWN*<span class="hljs-number">1000f</span>);<font></font>
}<font></font>
<font></font>
}<font></font>
</code></pre><br>
  Update   ,     .         ,            —    «this.»    .<br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdatePhysics</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
<span class="hljs-comment">// set angular velocity for rear joints</span><font></font>
my_jointL.AngularVelocity = velocity;<font></font>
my_jointR.AngularVelocity = velocity;<font></font>
<font></font>
<span class="hljs-comment">// set torque for rear joints</span><font></font>
my_jointL.AngularTorque = torque;<font></font>
my_jointR.AngularTorque = torque;<font></font>
<font></font>
}<font></font>
<font></font>
}<font></font>
</code></pre><br>
  Update Physics  ,     velocity  torque.<br>
</div>
                    </div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，保存脚本文件并返回到编辑器窗口。 Unigine将检查程序是否有错误，如果一切正常，则绿色的矩形应显示在右下角，并通知项目构建成功。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在选择Cuboid，向其添加component字段并将我们的脚本拖到那里。出现一些字段，需要填写。在目标车轮L字段中，轻轻拖动左后轮（即表示它的圆柱体），目标Whell R-右后轮，目标FWL-左前，目标FWR-右前，以及长方体本身在目标车字段中。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/pw/hw/3fpwhwurb0yggyc7bob0_uvmjom.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要添加一个组件，我们在长方体属性中找到该字段并单击它，</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">将出现</font></i><i><font style="vertical-align: inherit;">一个</font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/08/9q/kt/089qktyx8mxlma6h0p-lm4ecf4s.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空行，您可以在其中拖动脚本文件（或通过文件夹图标找到其路径）。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/r8/tt/pj/r8ttpj5o5c76lgobt8l5qkq4cys.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填写“</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
运行播放</font><i><font style="vertical-align: inherit;">”字段</font></i><font style="vertical-align: inherit;"> -现在机器开始移动。没错，与此同时，您正在代表这个角色去看世界。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
她的控制如下：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向前滚动，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向后滚动，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别左右旋转前轮。一个</font><font style="vertical-align: inherit;">冲动放弃了</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，机器，因为它是，跳跃。</font><font style="vertical-align: inherit;">相反，</font><font style="vertical-align: inherit;">在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上，脉冲向下移动。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可能会注意到机器像月亮一样缓慢下落。为了改善这一时刻，有两种选择。该文档建议对AppWorldLogic.cs文件进行更改。但是我们不需要这样做，因为我在打字机脚本中进行了初始化。除了统治全球物理学的几条线之外。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事实是您可以独立输入这些设置并进行更改。为此，请单击编辑器的顶行。 Windows&gt;设置，在打开的窗口中，找到物理列，并将冻结线速度的值设置为0.1，冻结角速度的值也设置为0.1，并将最低重力向量从（0,0，-9,8）更改为（0,0，- 19.6）。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过在Init中添加以下行，可以在代码中完成相同的操作：</font></font><br>
<br>
<pre><code class="cs hljs">Physics.Gravity = <span class="hljs-keyword">new</span> vec3(<span class="hljs-number">0.0f</span>, <span class="hljs-number">0.0f</span>, <span class="hljs-number">-9.8f</span> * <span class="hljs-number">2.0f</span>);<font></font>
Physics.FrozenLinearVelocity = <span class="hljs-number">0.1f</span>;<font></font>
Physics.FrozenAngularVelocity = <span class="hljs-number">0.1f</span>;
</code></pre></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果立即开始播放，则“机器”可能会再次变质并开始出现故障。要解决此问题，请尝试在每个车轮上旋转线性弹簧。提高两次以开始。设置好后，您会注意到跳跃过程中的重力更强（尽管默认情况下我将跳跃动量设置为很高）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既然您在设置此喜怒无常的购物车时已经弄湿了，是时候放下firts_person_controller的束缚，并使用第三人称视角从机器本身的侧面观察发生了什么。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
已下载，禁用first_person_controller（单击他的名字旁边的框，使其变为空）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建一个相机。</font><font style="vertical-align: inherit;">为此，请右键单击场景，然后选择“创建”&gt;“相机”&gt;“ Presecutor”。</font><font style="vertical-align: inherit;">将显示PlayerPresecutor摄像机本身及其虚拟目标Presecutor_Target。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假人可以关闭。</font><font style="vertical-align: inherit;">我们单击相机本身，请确保选中其属性中的Main Player复选框（以免启动时出现黑屏）。</font><font style="vertical-align: inherit;">在目标节点字段中，我们在下拉列表中找到长方体。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保存并单击播放。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在您可以完全骑车了。</font><font style="vertical-align: inherit;">没错，相机可以飞很远。</font><font style="vertical-align: inherit;">要解决此问题，您需要调整其限制。</font><font style="vertical-align: inherit;">我们返回到编辑器并在摄影机属性中进行设置，例如，最小距离10和最大距离30。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unigine引擎中的Neungers</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
学会了收集近似的车轮物理知识后，我使用Nevanger项目中的生物回声模型制作了一个测试场景。</font><font style="vertical-align: inherit;">这是现在的样子：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2LRuL-i9MF8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕截图</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/0u/-i/hp/0u-ihp26nyuwqnqhxxmd2pkicdu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bu/z4/oa/buz4oajcy-reimur3him3_wn-ya.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5a/wy/dp/5awydpmdbzfbmjisfxveew-g2nw.jpeg"><br>
</div>
                    </div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前的主要问题是设计的不稳定。这又是由于我尚未完全了解设置的所有方面和细微差别。有时，机器偶然发现某些东西并开始剧烈旋转。虽然我还没有扭曲或配置过一些东西，但是减少线性阻尼似乎也无济于事，也可以扭曲其他参数，但这并不全面。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个错误-在某些情况下，前车轮粘在地板上，而后车轮在地面下，总卡在地板上。或高速穿过景观本身，然后在其下方飞走。所有这些显然都可以通过设置公差和迭代进行校正，但是到目前为止，尚未找到最佳值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，在相当平坦的表面上，运动已经足够了。</font><font style="vertical-align: inherit;">正如我在过时的汽车视频演示中（似乎）所了解的那样，尚不清楚车轮接头在理想的情况下在不平整表面上的性能如何，但实际上是“诚实的”悬挂接头（顺便说一句，我没有尝试在它们上组装机器） ，那里的一切都稍微容易一些）。</font><font style="vertical-align: inherit;">“车轮节”是否考虑了地形的摩擦参数，还是只对是否打开了物理标记感兴趣。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎的一般印象</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
至于使用编辑器，发生的事情使我最想起使用CryEngine的过程。尽管在某些地方更方便。就像有人一样，在同一个CryEngine中，可以直接在编辑器中建模。这对我而言无关紧要，因为为此，我使用Blender，在这里您可以对模型进行更多的控制，而对于某些人来说，这可能很重要。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在下面的图片中，左侧显示材料清单。网格是通过一组基于网格的材料绘制的，您可以从中克隆您的材料选项。用纹理喷涂地形已经很困难，但是蒙版已被完全使用-如果您了解设备，则可以混合纹理，高度图等。对于相同的水，有其自己的单独的材料组，只需单击一下就可以将其逐字添加，并且看起来还不错。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
右边是场景对象和属性窗口的层次结构。</font><font style="vertical-align: inherit;">快速操作数值有点不方便-您需要使用小箭头进入图标。</font><font style="vertical-align: inherit;">某些滑块最初会产生误导，因为它们没有显示参数的整个可能范围，而是仅显示从0到1的间隔。摄像机的飞行速度是在田野里有个奔跑的人的情况下进行调节的，默认情况下，它会以某种感觉缓慢地移动。</font><font style="vertical-align: inherit;">实际使用模型时，这可能更方便。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s0/1o/v1/s01ov1bzrei4oabsjfjequkpzvo.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN502518/index.html">如何爬树</a></li>
<li><a href="../zh-CN502520/index.html">有关产品分析的mitap报告的视频报告</a></li>
<li><a href="../zh-CN502522/index.html">我们打开内部带有微小变压器的电流隔离芯片</a></li>
<li><a href="../zh-CN502554/index.html">中间信息技术是摆脱危机的出路</a></li>
<li><a href="../zh-CN502556/index.html">Microsoft Build 2020会议-今天完全在线（直接在Habré看）</a></li>
<li><a href="../zh-CN502560/index.html">对End-2-End测试只说不</a></li>
<li><a href="../zh-CN502562/index.html">不寻常的工业路由器应用</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>