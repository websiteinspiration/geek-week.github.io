<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüéì üÜò üê® Comment impl√©menter ignorer les utilisateurs bloqu√©s dans les groupes Telegram? ü§ú üë®üèæ‚Äçüé® ‚è¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD: merci pour l'aide Tkachovcet article est toujours pass√© d'une demande d'aide √† une instruction de travail. Dans les commentaires, il a donn√© un c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment impl√©menter ignorer les utilisateurs bloqu√©s dans les groupes Telegram?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487512/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/n8/lx/it/n8lxiti0sdes3qvykd6fxu5smas.png" alt="image alt"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: merci pour l'aide </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tkachov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet article est toujours pass√© d'une demande d'aide √† une instruction de travail. Dans les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commentaires,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> il a donn√© un code de travail pour cr√©er un ignorer dans le client de bureau Telegram. Au cas o√π, je mettrai une explication √† la fin de l'article. En outre, l'article se poursuit sous la m√™me forme dans laquelle il a √©t√© r√©dig√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* * * </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais demander de l'aide √† la communaut√©, car j'ai compl√®tement √©puis√© toutes mes possibilit√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On pourrait poser une question sur le service Q&amp;A (alias l'ancien grille-pain) - seulement je l'ai d√©j√† fait, et peu de choses en sont sorties. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√©anmoins, le simple fait de poser une question sous couvert d'un article ne me semble pas tr√®s correct. Par cons√©quent, je vais essayer d'ajouter le contexte de l'ensemble du processus au texte et de dire quelles mesures ont d√©j√† √©t√© prises.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez de la chance, quelqu'un dans les commentaires vous expliquera la solution. </font><font style="vertical-align: inherit;">Et puis, ceux qui trouveront cet article dans les moteurs de recherche pourront √©galement r√©soudre ce probl√®me.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me et contexte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme tous les utilisateurs de Telegram le savent bien, dans les discussions de groupe de ce messager, il n'y a pas de fonction d'ignorer l'utilisateur. Vous pouvez bloquer un utilisateur qui vous d√©pla√Æt, mais cela lui interdit simplement de vous √©crire des messages priv√©s. Dans le chat de groupe - et maintenant les chats de groupe semblent accueillir jusqu'√† 10 000 utilisateurs - il vous suffit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voir tout ce que les autres membres du groupe ont rejet√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le ¬´Black Mirror¬ª, il y avait m√™me une s√©rie √† ce sujet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/9h/lk/zr9hlk0liyhnvaexdinjwkpsgna.png"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuer de regarder! Continuer de regarder! Continuer de regarder!</font></font></i></sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si nous essayons de trouver une solution √† ce probl√®me sur Internet, nous rencontrerons une histoire de guerre typique d'une grande entreprise et d'un petit groupe de gens m√©contents. Les √©tapes de cette guerre sont clairement visibles sur Github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">premi√®re demande pour cette fonctionnalit√© depuis 2015.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez trouver des liens vers les sujets suivants dans ce fil, les gens ont constamment demand√© cette fonctionnalit√© dans les ann√©es suivantes, mais chaque appel s'est av√©r√© √™tre ferm√© avec une r√©ponse plut√¥t stupide "Ce n'est pas un probl√®me client, mais un probl√®me API". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'est m√™me pas clair pour le programmeur que les donn√©es sont montr√©es √† l'utilisateur avec l'aide du client. Et m√™me si l'API vous envoie tous les messages du serveur - il n'y a aucun probl√®me √† en cacher certains c√¥t√© client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais depuis cinq ans maintenant, chaque ann√©e, et parfois plusieurs fois par an, les gens arrivent √† Github avec une demande d'introduire ignorer dans les groupes - et chaque fois qu'ils sont refus√©s et le sujet ferm√©. Il y a plus de six mois, apparemment fatigu√©s des exigences constantes, les d√©veloppeurs ont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">affich√© une excuse non contraignante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ils disent, oui, oui, nous ferons tout, un jour dans un avenir lointain.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o8/vg/u7/o8vgu7sadj-sdregj1scnma6lz8.png"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je vous ai entendu! Je viens de l'exprimer jusqu'√† ce que je sois pr√™t √† vous r√©pondre, disons, je comprends votre position. Allez, appelle, ne te perds pas!</font></font></i></sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il y a exactement un avantage √† cette excuse - maintenant les administrateurs de tdesktop sur Github se r√©f√®rent √† ce message pour toutes les plaintes. Dites - regardez, ils savent tout, ils feront tout, je suis d√©sol√©, la succursale est ferm√©e. Au cours des six derniers mois, de nombreux changements chronophages ont eu lieu dans le t√©l√©gramme, par exemple, des autocollants anim√©s et de BELLES formes d'agitation pour les sondages ont √©t√© ajout√©s aux chats. Mais aucun ignorer n'est venu de pr√®s. Je pense que cela n'appara√Ætra pas dans un an.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le m√™me temps, la situation semble m√™me un peu sinistre - on a le sentiment qu'il est interdit d'introduire cette fonction avec des instructions sp√©ciales pour les fourches officielles. Telegram poss√®de au moins une douzaine de fourches bien connues (comme Unigram) et une centaine de fourches peu connues, mais aucune d'entre elles n'a cette fonctionnalit√©. J'ai √©crit √† l'appui des fourches les plus populaires, mais je n'ai re√ßu aucune r√©ponse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le m√™me temps, g√©rer avec les utilisateurs bloqu√©s les messages c√¥t√© client </font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peuvent √™tre</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ceci est confirm√© par l'existence de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegreat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il s'agit d'un fork de Telegram, dans lequel l'option d'ignorer les utilisateurs bloqu√©s a √©t√© d√©clar√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√©las, cette ignorance n'est pas r√©elle. L'option ¬´Ignorer les utilisateurs bloqu√©s¬ª ne fait que coloriser le texte des messages des utilisateurs bloqu√©s en gris. Les photos, vid√©os, musique ou autocollants d'utilisateurs bloqu√©s sont toujours visibles; De plus, la couleur grise sur les sujets sombres est parfaitement lisible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les gens viennent r√©guli√®rement discuter avec le d√©veloppeur, o√π je me suis assis pendant un certain temps, et demandent de faire un ¬´vrai ignorer¬ª. Auparavant, il avait simplement refus√©; au cours des six derniers mois, il a compl√®tement abandonn√© son projet, car il "n'a pas le temps". Eh bien, c'est une chose courante pour les projets open source gratuits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je mentionne ce projet pour deux raisons.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premi√®rement, il est annonc√© pr√©cis√©ment comme un ¬´client avec une fonction ignorer¬ª et il est conseill√© par des personnes qui ne lisent que la description, ne sachant pas comment cet ¬´ignorer¬ª y est r√©ellement impl√©ment√©. </font><font style="vertical-align: inherit;">Comme mentionn√© ci-dessus, cette fonction ne fonctionne pas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deuxi√®mement, c'est une confirmation vivante que dans le client Telegram, il est possible de d√©terminer le message d'un utilisateur bloqu√© et de le modifier. </font><font style="vertical-align: inherit;">Autrement dit, ignorer du c√¥t√© client est possible.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, personne ne le fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mieux encore, mes sentiments sont exprim√©s dans un commentaire sur un </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">sujet</font></a><font style="vertical-align: inherit;"> similaire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur Reddit il y a quatre ans:</font></font></a><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je suis choqu√© que vous ne puissiez pas le faire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√©rieusement? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si je ne veux pas lire quoi que ce soit √©crit par certains utilisateurs, je devrais pouvoir le faire ... c'est comme, l'une des caract√©ristiques tr√®s basiques de tous les protocoles de communication JAMAIS! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez le faire dans les ann√©es 90 avec des e-mails et des groupes de discussion!</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, partout o√π nous parlons des raisons de l'absence d'un joueur, les m√™mes choses se r√©p√®tent: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Vous ne verrez pas tous les messages et √† cause de cela vous ne comprendrez pas ce qui se passe dans le chat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Vous dupliquerez les messages. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - La fonctionnalit√© du syst√®me de ¬´r√©ponses¬ª sera viol√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et, encore une fois, j'utilise une citation, juste pour vous montrer - ce ne sont pas mes pens√©es personnelles, c'est notre position commune, les gens qui veulent introduire cette fonction:</font></font><br>
<blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">I can assure you 100.00% of people asking for this feature, are fully aware of the side effects it has, and could not care less about those.<br>
<br>
Yes just not show it at all. Yes including if it's a reply. Yes if the admin needs to see everything to moderate, then they don't have the luxury of using ignore. And most certainly we can compare TG groups to IRC, because they are both a mechanism for accomplishing the same thing, namely multi-user communication.</a></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici juste un exemple de vie concernant la duplication - Je participe √† plusieurs chats de t√©l√©grammes et pendant la journ√©e, </font><font style="vertical-align: inherit;">plusieurs utilisateurs jettent </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toujours</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la m√™me actualit√© / capture d'√©cran dr√¥le / m√®me populaire frais dans le chat. Malgr√© le fait qu'avant eux c'√©tait d√©j√†. Malgr√© le fait qu'il n'y a pas d'ignorance, ils ne lisent toujours pas l'historique de discussion et les messages en double. √Ä propos de la fa√ßon dont les gens ne savent pas comment utiliser la recherche sur les forums et r√©p√®tent √† plusieurs reprises les m√™mes questions - je ne le mentionnerai m√™me pas, la plupart des lecteurs l'ont probablement rencontr√©. Encore une fois, sans aucune ignorance, ce probl√®me existe d√©j√†. Et l'ignorer n'aggravera pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors , </font><font style="vertical-align: inherit;">pourquoi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cette fonction existe vraiment pas?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, la th√®se du complot dit que l'objectif principal du t√©l√©gramme est de collecter des donn√©es personnelles et des graphiques d'interaction avec les utilisateurs. En ce sens, chaque groupe de t√©l√©grammes vous permet de fixer un petit groupe typique auquel l'utilisateur peut au moins r√©sister et qui peut le supporter. Sinon, soit il est expuls√© du groupe, soit il se quitte. L'introduction d'ignorer violera la puret√© de l'exp√©rience. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version marketing est un peu plus simple.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque Khaled Mardam Bay a cr√©√© mIRC en 1995, il a √©crit un programme pour les gens. Je veux dire, pour les personnes ind√©pendantes qui savent ce qu'elles veulent, elles choisissent ce qu'elles pensent √™tre juste et sont responsables des cons√©quences de leurs actions. D'une part, cela a caus√© des probl√®mes, par exemple, avec des vuln√©rabilit√©s script√©es - vous ex√©cutez une ligne avec des commandes et c'est tout, vous √™tes pirat√©. D'un autre c√¥t√©, c'√©tait un messager utilis√© par les adultes et les personnes responsables. Et ils savaient comment exister dans un chat avec ignore, o√π certains des messages ne sont tout simplement pas visibles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quand en 2013 Pasha Durov a fait Telegram, il a fait le programme ¬´pour les femmes au foyer¬ª. Pour un utilisateur de masse stupide qui a besoin d'un bon tuteur. Par cons√©quent, tout cet enregistrement par num√©ro de t√©l√©phone, l'envoi de messages √† tout le monde sur l'annuaire t√©l√©phonique, les drapeaux et les interdictions de tous les c√¥t√©s. Apr√®s tout, ils "pressent quelque chose et tout dispara√Æt!". Et puis ils √©criront des plaintes √† l'appui! D'o√π de telles excuses stupides - "parce que si vous activez Ignorer, alors vous ne verrez pas les messages des autres." Lorsque vous cr√©ez un produit de masse - vous √™tes oblig√© de limiter toute fonctionnalit√©. Le produit pour le fou doit avoir une protection contre le fou.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici l'argument de la couronne, qui est toujours donn√© √† la fin: "Ne l'aimez pas - ne l'utilisez pas comme √ßa." </font><font style="vertical-align: inherit;">Je ne vais pas expliquer ce qui ne va pas chez lui, c'est une question √©thique du format ¬´pourquoi les gens ne devraient pas √™tre mang√©s¬ª - celui qui lui demande n'a pas de sens √† expliquer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais dans le cas de Telegram, cet argument est l√©g√®rement modifi√©: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Je n'aime pas √ßa - faites-le comme vous voulez, c'est open source</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">"</font></b></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenter de r√©soudre</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fatigu√© de nombreuses ann√©es de recherche, j'ai d√©cid√© d'essayer vraiment de changer quelque chose par moi-m√™me. </font><font style="vertical-align: inherit;">Cela m'a sembl√© une bonne id√©e de faire ma propre assembl√©e du T√©l√©gramme. </font><font style="vertical-align: inherit;">Pas dans le sens d'une assembl√©e publique, avec un site Web et un placement dans le magasin d'applications, mais simplement en compilant l'application pour vous-m√™me et en l'utilisant vous-m√™me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ce sens, je ne serais pas d√©rang√© par d'√©ventuels "freins" √† cacher des messages, ni par le "probl√®me de perte de contexte dans la conversation", ni le probl√®me de "comment administrer le chat si vous ne voyez pas une partie des messages". </font><font style="vertical-align: inherit;">Tout cela ne m'int√©ressait pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il m'a sembl√© √©vident que le simple fait d'ajouter une ligne comme celle-ci:</font></font><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si message.author.isBlocked == true alors message.value = 'Le message de l'utilisateur bloqu√©'</font></font></b></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sol√© pour le pseudo-code, mais il me semble qu'il transmet correctement l'id√©e. Je voulais juste attraper n'importe quel message au tout d√©but, quand il ne vient que du serveur, et le remplacer par une ligne sur le blocage. Ainsi, le probl√®me serait r√©solu avec des images / autocollants / gifs - ils seraient √©galement remplac√©s par un tel message et ils ne seraient pas visibles. Et m√™me si quelqu'un r√©pondait ou citait un message, il serait toujours remplac√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais par o√π commencer? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir demand√© aux amis des programmeurs, j'ai d√©couvert qu'il y avait deux fa√ßons. La premi√®re consiste √† utiliser le client Telegram natif, et la seconde √† utiliser un client tiers qui est √©crit √† l'aide de la biblioth√®que TDLib plus r√©cente. Je suis all√© au service de questions mentionn√© au d√©but de l'article et y ai pos√© une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">question</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Comme vous pouvez le voir, la liste des r√©pondants n'est pas align√©e. Le seul fil a conduit au messager Kotatogram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai parl√© avec le cr√©ateur de ce messager, et il m'a donn√© deux conseils utiles. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premi√®rement, il a dit que les messages dans le client natif sont affich√©s de la mani√®re habituelle et ne sont pas g√©n√©r√©s (je le soup√ßonnais cependant avec l'exemple de Telegreat) - par cons√©quent, vous pouvez utiliser le client natif comme source. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxi√®mement, il a dit o√π chercher le message lui-m√™me - dans le bloc history_message. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, lui, comme le cr√©ateur de Telegreat, n'a pas non plus eu de temps libre pour ajouter ind√©pendamment la fonction ignorer, qui est √† son client, qui est pour moi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment ai-je proc√©d√© ensuite? </font><font style="vertical-align: inherit;">Les instructions de montage existent sur Github, mais elles ne refl√®tent pas toutes les √©tapes du travail. </font><font style="vertical-align: inherit;">Je vais les d√©crire ici, au cas o√π quelqu'un d'autre viendrait √† l'article qui n'est pas particuli√®rement familier avec la programmation, mais qui veut faire le m√™me client avec ignorer pour lui-m√™me:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai d√©cid√© de tout faire dans une machine virtuelle. </font><font style="vertical-align: inherit;">Pour ce faire, j'ai install√© Oracle VM Virtual Box pour moi-m√™me et t√©l√©charg√© </font><font style="vertical-align: inherit;">leur machine virtuelle officielle avec Windows 10 et Visual Studio 2019 pr√©install√©s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le site officiel de Microsoft</font></font></a><font style="vertical-align: inherit;"></font></li>
<li>      Visual Studio.  ,       C++,    Visual Studio Installer   .    Modify     C++,     .           QT <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>.</li>
<li>    Git c <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">git-scm.com</a></li>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">  </a>. <b>  !</b> </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a 2 sections d'√©quipes. </font><font style="vertical-align: inherit;">Et si la premi√®re section contient une douzaine de commandes faciles √† copier et coller dans la ligne de commande, alors pour la deuxi√®me section de plusieurs dizaines de commandes, il semble naturel de copier tout le code dans un fichier bat et de l'ex√©cuter. </font><font style="vertical-align: inherit;">Il s'agit d'une erreur, car le processus s'arr√™te au moins deux fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier arr√™t se produit apr√®s la ligne:</font></font><br>
<br>
<pre><code class="plaintext hljs">gyp --no-circular-check breakpad_client.gyp --format=ninja</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La seconde est apr√®s la quatri√®me ligne de la fin, la longue instruction de configuration QT:</font></font><br>
<br>
<pre><code class="plaintext hljs">configure -prefix "%LibrariesPath%\Qt-5.12.5" ....... </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme mes amis me l'ont dit, cela est d√ª au fait que pendant l'ex√©cution de ces commandes, d'autres fichiers bat sont lanc√©s, dans lesquels une sortie directe du processus est d√©j√† enregistr√©e. </font><font style="vertical-align: inherit;">Par cons√©quent, vous devez simplement copier et coller les commandes, ou diviser l'instruction en 3 fichiers bat (mais dans ce cas, n'oubliez pas que les commandes doivent continuer √† √™tre ex√©cut√©es √† partir du m√™me r√©pertoire dans lequel le processus s'est arr√™t√©!). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenir votre propre api_id est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©galement d√©crit sur Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, j'ai compil√© un fichier exe Telegram pleinement fonctionnel. </font><font style="vertical-align: inherit;">Au total, l'assemblage prend environ trois heures (sans compter les t√©l√©chargements et installations pr√©liminaires), ce temps d√©pend peut-√™tre de la puissance de l'ordinateur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aide Hall (et solution trouv√©e)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici enfin ma demande √† la habrasociety appara√Æt. Comme les lecteurs l'ont d√©j√† devin√©, je ne sais pas quoi et comment changer. Il me semble que j'ai trouv√© un endroit o√π le message est affich√©, mais je ne suis pas s√ªr, car je ne connais pas le C ++. Sans oublier que (peut-√™tre) il serait correct de changer quelque chose non pas dans history_message, mais quelque part dans history_item. </font><sub><i><font style="vertical-align: inherit;">"Quelque chose en elfique, je ne peux pas lire"</font></i></sub><font style="vertical-align: inherit;"> 
Peut-√™tre que quelqu'un ici a d√©j√† rencontr√© le code Telegram ou a juste une comp√©tence tr√®s d√©velopp√©e et peut √©crire la m√™me ligne avec le remplacement de tout message d'un utilisateur bloqu√©, et aussi dire o√π le mettre ce code.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/wx/r6/el/wxr6el7uy7ed5dhp2fexr-9yhli.png"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suppose que le m√©canisme de retrait du t√©l√©gramme lui-m√™me ne changera pas soudainement. </font><font style="vertical-align: inherit;">Donc, lors de la mise √† jour du client, je vais simplement t√©l√©charger la version mise √† jour depuis le github et ajouter √† nouveau cette ligne avec un verrou avant de compiler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: Comme je l'ai mentionn√© au d√©but de l'article, </font><font style="vertical-align: inherit;">une version de travail du code est apparue </font><font style="vertical-align: inherit;">dans les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commentaires</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Je l'apporte directement √† l'article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re partie du code remplace le texte par un autre message. </font><font style="vertical-align: inherit;">Ceci est n√©cessaire car </font><font style="vertical-align: inherit;">ce texte est visible entre guillemets si un autre utilisateur r√©pond au bloqu√©, ou √† gauche dans la fen√™tre de discussion, o√π les derniers messages des discussions de groupe sont affich√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le fichier History_Message.cpp, nous trouvons la fonction juste au m√™me endroit que dans la capture d'√©cran ci-dessus:</font></font><br>
<br>
<pre><code class="cpp hljs">HistoryMessage::HistoryMessage(<font></font>
	not_null&lt;History*&gt; history,<font></font>
	<span class="hljs-keyword">const</span> MTPDmessage &amp;data,<font></font>
	MTPDmessage_ClientFlags clientFlags)<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et √† l'int√©rieur, nous rempla√ßons le texte original:</font></font><br>
<br>
<pre><code class="cpp hljs">	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> media = data.vmedia()) {<font></font>
		setMedia(*media);<font></font>
	}<font></font>
	setText({<font></font>
		TextUtilities::Clean(qs(data.vmessage())),<font></font>
		Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
	});</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur avanc√©:</font></font><br>
<br>
<pre><code class="cpp hljs"><font></font>
	UserId from = data.vfrom_id().value_or_empty();<font></font>
	PeerData* pd = from ? history-&gt;owner().user(from) : history-&gt;peer;<font></font>
	<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) {<font></font>
		setText({<font></font>
			TextUtilities::Clean(qs(<span class="hljs-string">"The message from blocked user"</span>)),<font></font>
			Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
			});<font></font>
	}<font></font>
	<span class="hljs-keyword">else</span> {
		<span class="hljs-comment">//   442-448:</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> media = data.vmedia()) {<font></font>
			setMedia(*media);<font></font>
		}<font></font>
		setText({<font></font>
			TextUtilities::Clean(qs(data.vmessage())),<font></font>
			Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
			});<font></font>
	}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez uniquement ce code, les anciens messages des utilisateurs bloqu√©s seront visibles, mais les nouveaux ne le seront plus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, la deuxi√®me partie de la solution mentionn√©e dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commentaire </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ajoute le code suivant au fichier history_view_message.cpp:</font></font><br>
<br>
<pre><code class="cpp hljs">PeerData* pd = item-&gt;from();
<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) <span class="hljs-keyword">return</span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: dans la nouvelle version, le compilateur jure sur un retour vide, j'ai donc ajout√© la sortie de QSize (0,0)</font></font><br>
<pre><code class="cpp hljs">PeerData* pd = item-&gt;from();
<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) <span class="hljs-keyword">return</span> QSize(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imm√©diatement apr√®s avoir d√©clar√© la variable item dans les fonctions </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
QSize Message :: performCountOptimalSize () </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
void Message :: draw ( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Painter &amp; p, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 QRect clip, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 TextSelection selection, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 crl :: time ms) </font><font style="vertical-align: inherit;">, </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cela vous permettra de voir compl√®tement les messages des utilisateurs bloqu√©s dans le journal de discussion. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout important:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si tout √† coup les messages de l'utilisateur bloqu√© sont toujours visibles - il vous suffit de cliquer sur son profil, les informations qu'il est bloqu√© seront mises √† jour, et tous ses messages dispara√Ætront du journal de chat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui le souhaitent, il a ajout√© une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application compil√©e</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† Dropbox </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">cr√©ation d'</font></a><font style="vertical-align: inherit;"> un ¬´site¬ª pour la distribution de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sites.google.com/view/ignoram</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487498/index.html">Choisir une base de donn√©es pour l'analyse</a></li>
<li><a href="../fr487502/index.html">Interrogation des p√©riph√©riques d'impression √† l'aide de SNMP pendant que l'imprimante imprime</a></li>
<li><a href="../fr487504/index.html">Au Jour de la science russe, les meilleures r√©alisations des scientifiques nationaux de 2019 sont nomm√©es</a></li>
<li><a href="../fr487508/index.html">Mesurer la distance aux objets √† l'aide de RealSense D435</a></li>
<li><a href="../fr487510/index.html">Produits radioactifs. Spectrom√®tre gamma. Partie 1</a></li>
<li><a href="../fr487514/index.html">Rapport annuel sur la s√©curit√© et la disponibilit√© du r√©seau de Qrator Labs</a></li>
<li><a href="../fr487516/index.html">Techniques et tactiques de chasse des attaquants utilisant des fichiers Prefetch</a></li>
<li><a href="../fr487518/index.html">Produits radioactifs. Spectrom√®tre gamma. Partie 2</a></li>
<li><a href="../fr487522/index.html">Nous faisons voler le terminal (partie 1)</a></li>
<li><a href="../fr487524/index.html">Pourquoi un hackathon de d√©marrage mat√©riel a-t-il besoin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>