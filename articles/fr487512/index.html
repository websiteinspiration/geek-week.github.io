<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🎓 🆘 🐨 Comment implémenter ignorer les utilisateurs bloqués dans les groupes Telegram? 🤜 👨🏾‍🎨 ⏬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD: merci pour l'aide Tkachovcet article est toujours passé d'une demande d'aide à une instruction de travail. Dans les commentaires, il a donné un c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment implémenter ignorer les utilisateurs bloqués dans les groupes Telegram?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487512/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/n8/lx/it/n8lxiti0sdes3qvykd6fxu5smas.png" alt="image alt"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: merci pour l'aide </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tkachov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet article est toujours passé d'une demande d'aide à une instruction de travail. Dans les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commentaires,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> il a donné un code de travail pour créer un ignorer dans le client de bureau Telegram. Au cas où, je mettrai une explication à la fin de l'article. En outre, l'article se poursuit sous la même forme dans laquelle il a été rédigé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* * * </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais demander de l'aide à la communauté, car j'ai complètement épuisé toutes mes possibilités. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On pourrait poser une question sur le service Q&amp;A (alias l'ancien grille-pain) - seulement je l'ai déjà fait, et peu de choses en sont sorties. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Néanmoins, le simple fait de poser une question sous couvert d'un article ne me semble pas très correct. Par conséquent, je vais essayer d'ajouter le contexte de l'ensemble du processus au texte et de dire quelles mesures ont déjà été prises.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez de la chance, quelqu'un dans les commentaires vous expliquera la solution. </font><font style="vertical-align: inherit;">Et puis, ceux qui trouveront cet article dans les moteurs de recherche pourront également résoudre ce problème.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème et contexte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme tous les utilisateurs de Telegram le savent bien, dans les discussions de groupe de ce messager, il n'y a pas de fonction d'ignorer l'utilisateur. Vous pouvez bloquer un utilisateur qui vous déplaît, mais cela lui interdit simplement de vous écrire des messages privés. Dans le chat de groupe - et maintenant les chats de groupe semblent accueillir jusqu'à 10 000 utilisateurs - il vous suffit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voir tout ce que les autres membres du groupe ont rejeté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le «Black Mirror», il y avait même une série à ce sujet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/9h/lk/zr9hlk0liyhnvaexdinjwkpsgna.png"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuer de regarder! Continuer de regarder! Continuer de regarder!</font></font></i></sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si nous essayons de trouver une solution à ce problème sur Internet, nous rencontrerons une histoire de guerre typique d'une grande entreprise et d'un petit groupe de gens mécontents. Les étapes de cette guerre sont clairement visibles sur Github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">première demande pour cette fonctionnalité depuis 2015.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez trouver des liens vers les sujets suivants dans ce fil, les gens ont constamment demandé cette fonctionnalité dans les années suivantes, mais chaque appel s'est avéré être fermé avec une réponse plutôt stupide "Ce n'est pas un problème client, mais un problème API". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'est même pas clair pour le programmeur que les données sont montrées à l'utilisateur avec l'aide du client. Et même si l'API vous envoie tous les messages du serveur - il n'y a aucun problème à en cacher certains côté client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais depuis cinq ans maintenant, chaque année, et parfois plusieurs fois par an, les gens arrivent à Github avec une demande d'introduire ignorer dans les groupes - et chaque fois qu'ils sont refusés et le sujet fermé. Il y a plus de six mois, apparemment fatigués des exigences constantes, les développeurs ont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">affiché une excuse non contraignante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ils disent, oui, oui, nous ferons tout, un jour dans un avenir lointain.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o8/vg/u7/o8vgu7sadj-sdregj1scnma6lz8.png"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je vous ai entendu! Je viens de l'exprimer jusqu'à ce que je sois prêt à vous répondre, disons, je comprends votre position. Allez, appelle, ne te perds pas!</font></font></i></sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il y a exactement un avantage à cette excuse - maintenant les administrateurs de tdesktop sur Github se réfèrent à ce message pour toutes les plaintes. Dites - regardez, ils savent tout, ils feront tout, je suis désolé, la succursale est fermée. Au cours des six derniers mois, de nombreux changements chronophages ont eu lieu dans le télégramme, par exemple, des autocollants animés et de BELLES formes d'agitation pour les sondages ont été ajoutés aux chats. Mais aucun ignorer n'est venu de près. Je pense que cela n'apparaîtra pas dans un an.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, la situation semble même un peu sinistre - on a le sentiment qu'il est interdit d'introduire cette fonction avec des instructions spéciales pour les fourches officielles. Telegram possède au moins une douzaine de fourches bien connues (comme Unigram) et une centaine de fourches peu connues, mais aucune d'entre elles n'a cette fonctionnalité. J'ai écrit à l'appui des fourches les plus populaires, mais je n'ai reçu aucune réponse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, gérer avec les utilisateurs bloqués les messages côté client </font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peuvent être</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ceci est confirmé par l'existence de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegreat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il s'agit d'un fork de Telegram, dans lequel l'option d'ignorer les utilisateurs bloqués a été déclarée.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hélas, cette ignorance n'est pas réelle. L'option «Ignorer les utilisateurs bloqués» ne fait que coloriser le texte des messages des utilisateurs bloqués en gris. Les photos, vidéos, musique ou autocollants d'utilisateurs bloqués sont toujours visibles; De plus, la couleur grise sur les sujets sombres est parfaitement lisible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les gens viennent régulièrement discuter avec le développeur, où je me suis assis pendant un certain temps, et demandent de faire un «vrai ignorer». Auparavant, il avait simplement refusé; au cours des six derniers mois, il a complètement abandonné son projet, car il "n'a pas le temps". Eh bien, c'est une chose courante pour les projets open source gratuits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je mentionne ce projet pour deux raisons.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premièrement, il est annoncé précisément comme un «client avec une fonction ignorer» et il est conseillé par des personnes qui ne lisent que la description, ne sachant pas comment cet «ignorer» y est réellement implémenté. </font><font style="vertical-align: inherit;">Comme mentionné ci-dessus, cette fonction ne fonctionne pas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deuxièmement, c'est une confirmation vivante que dans le client Telegram, il est possible de déterminer le message d'un utilisateur bloqué et de le modifier. </font><font style="vertical-align: inherit;">Autrement dit, ignorer du côté client est possible.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, personne ne le fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mieux encore, mes sentiments sont exprimés dans un commentaire sur un </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">sujet</font></a><font style="vertical-align: inherit;"> similaire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur Reddit il y a quatre ans:</font></font></a><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je suis choqué que vous ne puissiez pas le faire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sérieusement? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si je ne veux pas lire quoi que ce soit écrit par certains utilisateurs, je devrais pouvoir le faire ... c'est comme, l'une des caractéristiques très basiques de tous les protocoles de communication JAMAIS! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez le faire dans les années 90 avec des e-mails et des groupes de discussion!</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, partout où nous parlons des raisons de l'absence d'un joueur, les mêmes choses se répètent: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Vous ne verrez pas tous les messages et à cause de cela vous ne comprendrez pas ce qui se passe dans le chat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Vous dupliquerez les messages. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - La fonctionnalité du système de «réponses» sera violée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et, encore une fois, j'utilise une citation, juste pour vous montrer - ce ne sont pas mes pensées personnelles, c'est notre position commune, les gens qui veulent introduire cette fonction:</font></font><br>
<blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">I can assure you 100.00% of people asking for this feature, are fully aware of the side effects it has, and could not care less about those.<br>
<br>
Yes just not show it at all. Yes including if it's a reply. Yes if the admin needs to see everything to moderate, then they don't have the luxury of using ignore. And most certainly we can compare TG groups to IRC, because they are both a mechanism for accomplishing the same thing, namely multi-user communication.</a></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici juste un exemple de vie concernant la duplication - Je participe à plusieurs chats de télégrammes et pendant la journée, </font><font style="vertical-align: inherit;">plusieurs utilisateurs jettent </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toujours</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la même actualité / capture d'écran drôle / mème populaire frais dans le chat. Malgré le fait qu'avant eux c'était déjà. Malgré le fait qu'il n'y a pas d'ignorance, ils ne lisent toujours pas l'historique de discussion et les messages en double. À propos de la façon dont les gens ne savent pas comment utiliser la recherche sur les forums et répètent à plusieurs reprises les mêmes questions - je ne le mentionnerai même pas, la plupart des lecteurs l'ont probablement rencontré. Encore une fois, sans aucune ignorance, ce problème existe déjà. Et l'ignorer n'aggravera pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors , </font><font style="vertical-align: inherit;">pourquoi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cette fonction existe vraiment pas?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, la thèse du complot dit que l'objectif principal du télégramme est de collecter des données personnelles et des graphiques d'interaction avec les utilisateurs. En ce sens, chaque groupe de télégrammes vous permet de fixer un petit groupe typique auquel l'utilisateur peut au moins résister et qui peut le supporter. Sinon, soit il est expulsé du groupe, soit il se quitte. L'introduction d'ignorer violera la pureté de l'expérience. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version marketing est un peu plus simple.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque Khaled Mardam Bay a créé mIRC en 1995, il a écrit un programme pour les gens. Je veux dire, pour les personnes indépendantes qui savent ce qu'elles veulent, elles choisissent ce qu'elles pensent être juste et sont responsables des conséquences de leurs actions. D'une part, cela a causé des problèmes, par exemple, avec des vulnérabilités scriptées - vous exécutez une ligne avec des commandes et c'est tout, vous êtes piraté. D'un autre côté, c'était un messager utilisé par les adultes et les personnes responsables. Et ils savaient comment exister dans un chat avec ignore, où certains des messages ne sont tout simplement pas visibles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quand en 2013 Pasha Durov a fait Telegram, il a fait le programme «pour les femmes au foyer». Pour un utilisateur de masse stupide qui a besoin d'un bon tuteur. Par conséquent, tout cet enregistrement par numéro de téléphone, l'envoi de messages à tout le monde sur l'annuaire téléphonique, les drapeaux et les interdictions de tous les côtés. Après tout, ils "pressent quelque chose et tout disparaît!". Et puis ils écriront des plaintes à l'appui! D'où de telles excuses stupides - "parce que si vous activez Ignorer, alors vous ne verrez pas les messages des autres." Lorsque vous créez un produit de masse - vous êtes obligé de limiter toute fonctionnalité. Le produit pour le fou doit avoir une protection contre le fou.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici l'argument de la couronne, qui est toujours donné à la fin: "Ne l'aimez pas - ne l'utilisez pas comme ça." </font><font style="vertical-align: inherit;">Je ne vais pas expliquer ce qui ne va pas chez lui, c'est une question éthique du format «pourquoi les gens ne devraient pas être mangés» - celui qui lui demande n'a pas de sens à expliquer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais dans le cas de Telegram, cet argument est légèrement modifié: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Je n'aime pas ça - faites-le comme vous voulez, c'est open source</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">"</font></b></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenter de résoudre</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fatigué de nombreuses années de recherche, j'ai décidé d'essayer vraiment de changer quelque chose par moi-même. </font><font style="vertical-align: inherit;">Cela m'a semblé une bonne idée de faire ma propre assemblée du Télégramme. </font><font style="vertical-align: inherit;">Pas dans le sens d'une assemblée publique, avec un site Web et un placement dans le magasin d'applications, mais simplement en compilant l'application pour vous-même et en l'utilisant vous-même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ce sens, je ne serais pas dérangé par d'éventuels "freins" à cacher des messages, ni par le "problème de perte de contexte dans la conversation", ni le problème de "comment administrer le chat si vous ne voyez pas une partie des messages". </font><font style="vertical-align: inherit;">Tout cela ne m'intéressait pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il m'a semblé évident que le simple fait d'ajouter une ligne comme celle-ci:</font></font><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si message.author.isBlocked == true alors message.value = 'Le message de l'utilisateur bloqué'</font></font></b></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désolé pour le pseudo-code, mais il me semble qu'il transmet correctement l'idée. Je voulais juste attraper n'importe quel message au tout début, quand il ne vient que du serveur, et le remplacer par une ligne sur le blocage. Ainsi, le problème serait résolu avec des images / autocollants / gifs - ils seraient également remplacés par un tel message et ils ne seraient pas visibles. Et même si quelqu'un répondait ou citait un message, il serait toujours remplacé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais par où commencer? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir demandé aux amis des programmeurs, j'ai découvert qu'il y avait deux façons. La première consiste à utiliser le client Telegram natif, et la seconde à utiliser un client tiers qui est écrit à l'aide de la bibliothèque TDLib plus récente. Je suis allé au service de questions mentionné au début de l'article et y ai posé une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">question</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Comme vous pouvez le voir, la liste des répondants n'est pas alignée. Le seul fil a conduit au messager Kotatogram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai parlé avec le créateur de ce messager, et il m'a donné deux conseils utiles. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premièrement, il a dit que les messages dans le client natif sont affichés de la manière habituelle et ne sont pas générés (je le soupçonnais cependant avec l'exemple de Telegreat) - par conséquent, vous pouvez utiliser le client natif comme source. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxièmement, il a dit où chercher le message lui-même - dans le bloc history_message. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, lui, comme le créateur de Telegreat, n'a pas non plus eu de temps libre pour ajouter indépendamment la fonction ignorer, qui est à son client, qui est pour moi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment ai-je procédé ensuite? </font><font style="vertical-align: inherit;">Les instructions de montage existent sur Github, mais elles ne reflètent pas toutes les étapes du travail. </font><font style="vertical-align: inherit;">Je vais les décrire ici, au cas où quelqu'un d'autre viendrait à l'article qui n'est pas particulièrement familier avec la programmation, mais qui veut faire le même client avec ignorer pour lui-même:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai décidé de tout faire dans une machine virtuelle. </font><font style="vertical-align: inherit;">Pour ce faire, j'ai installé Oracle VM Virtual Box pour moi-même et téléchargé </font><font style="vertical-align: inherit;">leur machine virtuelle officielle avec Windows 10 et Visual Studio 2019 préinstallés </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le site officiel de Microsoft</font></font></a><font style="vertical-align: inherit;"></font></li>
<li>      Visual Studio.  ,       C++,    Visual Studio Installer   .    Modify     C++,     .           QT <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>.</li>
<li>    Git c <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">git-scm.com</a></li>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">  </a>. <b>  !</b> </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a 2 sections d'équipes. </font><font style="vertical-align: inherit;">Et si la première section contient une douzaine de commandes faciles à copier et coller dans la ligne de commande, alors pour la deuxième section de plusieurs dizaines de commandes, il semble naturel de copier tout le code dans un fichier bat et de l'exécuter. </font><font style="vertical-align: inherit;">Il s'agit d'une erreur, car le processus s'arrête au moins deux fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier arrêt se produit après la ligne:</font></font><br>
<br>
<pre><code class="plaintext hljs">gyp --no-circular-check breakpad_client.gyp --format=ninja</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La seconde est après la quatrième ligne de la fin, la longue instruction de configuration QT:</font></font><br>
<br>
<pre><code class="plaintext hljs">configure -prefix "%LibrariesPath%\Qt-5.12.5" ....... </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme mes amis me l'ont dit, cela est dû au fait que pendant l'exécution de ces commandes, d'autres fichiers bat sont lancés, dans lesquels une sortie directe du processus est déjà enregistrée. </font><font style="vertical-align: inherit;">Par conséquent, vous devez simplement copier et coller les commandes, ou diviser l'instruction en 3 fichiers bat (mais dans ce cas, n'oubliez pas que les commandes doivent continuer à être exécutées à partir du même répertoire dans lequel le processus s'est arrêté!). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenir votre propre api_id est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">également décrit sur Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, j'ai compilé un fichier exe Telegram pleinement fonctionnel. </font><font style="vertical-align: inherit;">Au total, l'assemblage prend environ trois heures (sans compter les téléchargements et installations préliminaires), ce temps dépend peut-être de la puissance de l'ordinateur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aide Hall (et solution trouvée)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici enfin ma demande à la habrasociety apparaît. Comme les lecteurs l'ont déjà deviné, je ne sais pas quoi et comment changer. Il me semble que j'ai trouvé un endroit où le message est affiché, mais je ne suis pas sûr, car je ne connais pas le C ++. Sans oublier que (peut-être) il serait correct de changer quelque chose non pas dans history_message, mais quelque part dans history_item. </font><sub><i><font style="vertical-align: inherit;">"Quelque chose en elfique, je ne peux pas lire"</font></i></sub><font style="vertical-align: inherit;"> 
Peut-être que quelqu'un ici a déjà rencontré le code Telegram ou a juste une compétence très développée et peut écrire la même ligne avec le remplacement de tout message d'un utilisateur bloqué, et aussi dire où le mettre ce code.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/wx/r6/el/wxr6el7uy7ed5dhp2fexr-9yhli.png"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suppose que le mécanisme de retrait du télégramme lui-même ne changera pas soudainement. </font><font style="vertical-align: inherit;">Donc, lors de la mise à jour du client, je vais simplement télécharger la version mise à jour depuis le github et ajouter à nouveau cette ligne avec un verrou avant de compiler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: Comme je l'ai mentionné au début de l'article, </font><font style="vertical-align: inherit;">une version de travail du code est apparue </font><font style="vertical-align: inherit;">dans les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commentaires</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Je l'apporte directement à l'article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La première partie du code remplace le texte par un autre message. </font><font style="vertical-align: inherit;">Ceci est nécessaire car </font><font style="vertical-align: inherit;">ce texte est visible entre guillemets si un autre utilisateur répond au bloqué, ou à gauche dans la fenêtre de discussion, où les derniers messages des discussions de groupe sont affichés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le fichier History_Message.cpp, nous trouvons la fonction juste au même endroit que dans la capture d'écran ci-dessus:</font></font><br>
<br>
<pre><code class="cpp hljs">HistoryMessage::HistoryMessage(<font></font>
	not_null&lt;History*&gt; history,<font></font>
	<span class="hljs-keyword">const</span> MTPDmessage &amp;data,<font></font>
	MTPDmessage_ClientFlags clientFlags)<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et à l'intérieur, nous remplaçons le texte original:</font></font><br>
<br>
<pre><code class="cpp hljs">	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> media = data.vmedia()) {<font></font>
		setMedia(*media);<font></font>
	}<font></font>
	setText({<font></font>
		TextUtilities::Clean(qs(data.vmessage())),<font></font>
		Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
	});</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur avancé:</font></font><br>
<br>
<pre><code class="cpp hljs"><font></font>
	UserId from = data.vfrom_id().value_or_empty();<font></font>
	PeerData* pd = from ? history-&gt;owner().user(from) : history-&gt;peer;<font></font>
	<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) {<font></font>
		setText({<font></font>
			TextUtilities::Clean(qs(<span class="hljs-string">"The message from blocked user"</span>)),<font></font>
			Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
			});<font></font>
	}<font></font>
	<span class="hljs-keyword">else</span> {
		<span class="hljs-comment">//   442-448:</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> media = data.vmedia()) {<font></font>
			setMedia(*media);<font></font>
		}<font></font>
		setText({<font></font>
			TextUtilities::Clean(qs(data.vmessage())),<font></font>
			Api::EntitiesFromMTP(data.ventities().value_or_empty())<font></font>
			});<font></font>
	}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez uniquement ce code, les anciens messages des utilisateurs bloqués seront visibles, mais les nouveaux ne le seront plus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, la deuxième partie de la solution mentionnée dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commentaire </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ajoute le code suivant au fichier history_view_message.cpp:</font></font><br>
<br>
<pre><code class="cpp hljs">PeerData* pd = item-&gt;from();
<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) <span class="hljs-keyword">return</span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: dans la nouvelle version, le compilateur jure sur un retour vide, j'ai donc ajouté la sortie de QSize (0,0)</font></font><br>
<pre><code class="cpp hljs">PeerData* pd = item-&gt;from();
<span class="hljs-keyword">if</span> (pd-&gt;isUser() &amp;&amp; pd-&gt;asUser()-&gt;isBlocked()) <span class="hljs-keyword">return</span> QSize(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Immédiatement après avoir déclaré la variable item dans les fonctions </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
QSize Message :: performCountOptimalSize () </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
void Message :: draw ( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Painter &amp; p, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 QRect clip, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 TextSelection selection, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 crl :: time ms) </font><font style="vertical-align: inherit;">, </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cela vous permettra de voir complètement les messages des utilisateurs bloqués dans le journal de discussion. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout important:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si tout à coup les messages de l'utilisateur bloqué sont toujours visibles - il vous suffit de cliquer sur son profil, les informations qu'il est bloqué seront mises à jour, et tous ses messages disparaîtront du journal de chat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui le souhaitent, il a ajouté une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application compilée</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à Dropbox </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">création d'</font></a><font style="vertical-align: inherit;"> un «site» pour la distribution de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sites.google.com/view/ignoram</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487498/index.html">Choisir une base de données pour l'analyse</a></li>
<li><a href="../fr487502/index.html">Interrogation des périphériques d'impression à l'aide de SNMP pendant que l'imprimante imprime</a></li>
<li><a href="../fr487504/index.html">Au Jour de la science russe, les meilleures réalisations des scientifiques nationaux de 2019 sont nommées</a></li>
<li><a href="../fr487508/index.html">Mesurer la distance aux objets à l'aide de RealSense D435</a></li>
<li><a href="../fr487510/index.html">Produits radioactifs. Spectromètre gamma. Partie 1</a></li>
<li><a href="../fr487514/index.html">Rapport annuel sur la sécurité et la disponibilité du réseau de Qrator Labs</a></li>
<li><a href="../fr487516/index.html">Techniques et tactiques de chasse des attaquants utilisant des fichiers Prefetch</a></li>
<li><a href="../fr487518/index.html">Produits radioactifs. Spectromètre gamma. Partie 2</a></li>
<li><a href="../fr487522/index.html">Nous faisons voler le terminal (partie 1)</a></li>
<li><a href="../fr487524/index.html">Pourquoi un hackathon de démarrage matériel a-t-il besoin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>