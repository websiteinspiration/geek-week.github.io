<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏾 👨‍👨‍👦 👨🏼‍🎓 Version Werf 1.1: améliorations du collecteur aujourd'hui et plans pour l'avenir 🕢 👩🏻‍🍳 🤲🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="werf est notre utilitaire CLI GitOps open source pour la création et la livraison d'applications à Kubernetes. Comme promis, la sortie de la v1.0 a ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Version Werf 1.1: améliorations du collecteur aujourd'hui et plans pour l'avenir</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/493170/"><img src="https://habrastorage.org/webt/rv/bh/ky/rvbhkysbvfjn8ykkze1srkpmsha.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est notre utilitaire CLI GitOps open source pour la création et la livraison d'applications à Kubernetes. Comme promis, la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortie de la v1.0 a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> marqué le début de l'ajout de nouvelles fonctionnalités à werf et de la révision des approches familières. Nous sommes maintenant heureux de publier la v1.1, qui est une grande étape dans le développement et l'avenir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du collecteur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werf. La version est actuellement disponible dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canal 1.1 ea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La base de la sortie est la nouvelle architecture du stockage de scène et l'optimisation du travail des deux collectionneurs (pour Stapel et Dockerfile). La nouvelle architecture de stockage ouvre la possibilité de mettre en œuvre des assemblys distribués à partir de plusieurs hôtes et des assemblages parallèles sur un seul hôte.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'optimisation du travail comprend la suppression des calculs inutiles au stade du calcul des signatures de stade et la modification des mécanismes de calcul des sommes de contrôle des fichiers par des mécanismes plus efficaces. Cette optimisation réduit le temps de construction moyen d'un projet utilisant werf. Et les versions inactives, lorsque toutes les étapes existent dans le cache de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stockage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des </font><i><font style="vertical-align: inherit;">étapes</font></i><font style="vertical-align: inherit;"> , sont désormais très rapides. Dans la plupart des cas, le redémarrage de l'assemblage sera plus rapide qu'en 1 seconde! Cela vaut également pour les procédures de vérification des étapes du travail des équipes </font></font><code>werf deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>werf run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette version également, il y avait une stratégie pour le balisage des images par contenu - le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balisage basé sur le contenu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est maintenant activé par défaut et est le seul recommandé.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons de plus près les principales innovations de werf v1.1 et parlons en même temps des plans pour l'avenir.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qui a changé dans werf v1.1?</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouveau format de dénomination d'étape et algorithme de sélection d'étape de cache</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nouvelle règle de génération de nom d'étape. </font><font style="vertical-align: inherit;">Désormais, chaque assemblage d'étape génère un nom d'étape unique, qui se compose de 2 parties: une signature (comme dans la version 1.0) plus un identifiant temporaire unique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, le nom complet de l'image de la scène peut ressembler à ceci: </font></font><br>
<br>
<code>werf-stages-storage/myproject:d2c5ad3d2c9fcd9e57b50edd9cb26c32d156165eb355318cebc3412b-1582656767835</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ou sous une forme générale: </font></font><br>
<br>
<code>werf-stages-storage/PROJECT:SIGNATURE-TIMESTAMP_MILLISEC</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ici:</font></font><br>
<br>
<ul>
<li> <code>SIGNATURE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - il s'agit de la signature de l'étape, qui représente l'identifiant du contenu de l'étape et dépend de l'historique des modifications dans Git qui ont conduit à ce contenu;</font></font></li>
<li> <code>TIMESTAMP_MILLISEC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ceci est garanti un identifiant unique pour l'image qui est générée lors de l'assemblage de la nouvelle image.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme de sélection des étapes dans le cache est basé sur la vérification de la relation des validations Git:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Werf calcule la signature d'une étape.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stockage par étapes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il peut y avoir plusieurs étapes pour une signature donnée. </font><font style="vertical-align: inherit;">Werf sélectionne toutes les étapes qui conviennent à la signature.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si l'étape actuelle est associée à Git (git-archive, utilisateur étape c Git-patches: </font></font><code>install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>beforeSetup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>setup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou git-dernière-patch), puis Werf sélectionne uniquement les étapes qui se </font><font style="vertical-align: inherit;">rapportent à commettre, qui est l'ancêtre de l'engagement en </font><font style="vertical-align: inherit;">cours (pour ce </font><font style="vertical-align: inherit;">qui a </font><font style="vertical-align: inherit;">provoqué l' </font><font style="vertical-align: inherit;">assemblage )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parmi les étapes appropriées restantes, une est sélectionnée - la plus ancienne par date de création.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une scène pour différentes branches Git peut avoir la même signature. </font><font style="vertical-align: inherit;">Mais werf empêchera l'utilisation d'un cache associé à différentes branches entre ces branches, même si les signatures correspondent. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ Documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouvel algorithme de création et d'enregistrement d'étapes dans le stockage d'étapes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si werf ne trouve pas d'étape appropriée lors de la sélection d'étapes dans le cache, le processus d'assemblage d'une nouvelle étape est lancé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que plusieurs processus (sur un ou plusieurs hôtes) peuvent commencer à assembler la même étape à peu près au même moment. </font><font style="vertical-align: inherit;">Werf utilise l'algorithme de verrouillage optimiste des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">étapes de stockage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lorsqu'une image fraîchement collectée est stockée dans les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">étapes de stockage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ainsi, lorsque l'assemblage de la nouvelle étape est prêt, werf bloque le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stockage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des </font><i><font style="vertical-align: inherit;">étapes</font></i><font style="vertical-align: inherit;"> et n'y enregistre l'image fraîchement collectée que s'il n'y a pas d'image appropriée </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour la signature et d'autres paramètres - voir le nouvel algorithme de sélection des étapes dans le cache)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une image fraîchement sélectionnée est garantie d'avoir un identifiant unique par </font></font><code>TIMESTAMP_MILLISEC</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(voir le nouveau format de dénomination de la scène)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si </font><font style="vertical-align: inherit;">une image appropriée est trouvée </font><font style="vertical-align: inherit;">dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stades-stockage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , werf supprimera l'image fraîchement collectée et utilisera l'image du cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes: le premier processus qui termine la collecte de l'image (le plus rapide) recevra le droit de l'enregistrer dans les étapes de stockage (puis cette image particulière sera utilisée pour tous les assemblages). </font><font style="vertical-align: inherit;">Un processus d'assemblage lent n'empêchera jamais un processus plus rapide d'enregistrer les résultats d'assemblage de l'étape en cours et de passer à l'assemblage suivant. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ Documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amélioration des performances du collecteur Dockerfile</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'heure actuelle, le pipeline des étapes pour une image compilée à partir du Dockerfile se compose d'une étape - </font></font><code>dockerfile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Lors du calcul de la signature, la somme de contrôle des fichiers est prise en compte </font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui sera utilisée lors de l'assemblage. Avant cette amélioration, werf traversait récursivement tous les fichiers et recevait une somme de contrôle, résumant le contexte et le mode de chaque fichier. À partir de la version 1.1, werf peut utiliser les sommes de contrôle calculées stockées dans le référentiel Git. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme est basé sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git ls-tree</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . L'algorithme prend en compte les entrées dans </font></font><code>.dockerignore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et passe récursivement dans l'arborescence de fichiers uniquement si nécessaire. Ainsi, nous nous sommes débarrassés de la lecture du système de fichiers, et la dépendance de l'algorithme sur la taille n'est </font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas significative.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme vérifie également les fichiers non suivis et, si nécessaire, les prend en compte dans la somme de contrôle.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amélioration des performances lors de l'importation de fichiers</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werf v1.1 utilise le serveur rsync lors de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">importation de fichiers à partir d'artefacts et d'images</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Auparavant, l'importation se faisait en deux étapes à l'aide du montage du répertoire à partir du système hôte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les performances d'importation sur macOS ne se limitent plus aux volumes Docker et les importations se font en même temps que Linux et Windows.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Balisage basé sur le contenu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werf v1.1 prend en charge ce que l'on appelle le balisage par </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contenu d'</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> image - </font><i><font style="vertical-align: inherit;">balisage basé sur le contenu</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les balises des images Docker résultantes dépendent du contenu de ces images. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous exécutez la </font><font style="vertical-align: inherit;">commande </font></font><code>werf publish --tags-by-stages-signature</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>werf ci-env --tagging-strategy=stages-signature</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, les images publiées de la soi-disant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signature de l'étape d'</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> image </font><font style="vertical-align: inherit;">seront testées </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Chaque image est étiquetée avec sa propre signature des étapes de cette image, qui est calculée selon les mêmes règles que la signature régulière de chaque étape séparément, mais est un identifiant généralisé de l'image. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La signature des étapes de l'image dépend:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le contenu de cette image;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Historique des révisions Git qui ont conduit à ce contenu.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les référentiels Git ont toujours des validations inactives qui ne modifient pas le contenu des fichiers image. Par exemple, les validations avec des commentaires uniquement, ou les validations de fusion, ou les validations qui modifient les fichiers dans Git qui ne seront pas importés dans l'image. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation du balisage basé sur le contenu résout le problème des redémarrages inutiles des modules d'application dans Kubernetes en raison des changements de nom d'image, même si le contenu de l'image n'a pas changé. Soit dit en passant, c'est l'une des raisons qui rend difficile le stockage de nombreux microservices d'une application dans un seul référentiel Git. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En outre, le balisage basé sur le contenu est une méthode de balisage plus fiable que le balisage par les branches Git, car le contenu des images résultantes ne dépend pas de l'ordre d'exécution des pipelines dans le système CI pour assembler plusieurs validations de la même branche. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Important</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Désormais, la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signature d'étapes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seule stratégie de balisage recommandée</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il sera utilisé par défaut dans l'équipe </font></font><code>werf ci-env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(sauf si vous spécifiez explicitement un schéma de balisage différent). </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ Documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une publication séparée sera également consacrée à cette fonctionnalité. </font></font></s> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MISE À JOUR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (3 avril): Un article avec des détails a été </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publié</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveaux de journalisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisateur a la possibilité de contrôler la sortie, de définir le niveau de journalisation et de travailler avec les informations de débogage. </font><font style="vertical-align: inherit;">Ajout d' </font><font style="vertical-align: inherit;">options </font></font><code>--log-quiet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>--log-verbose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>--log-debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par défaut, la sortie contient un minimum d'informations: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/s6/6c/hhs66c1shzadu5wbrfbnhnqiio8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous utilisez la sortie détaillée ( </font></font><code>--log-verbose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), vous pouvez suivre le fonctionnement de werf: La </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e0/su/ja/e0sujatvuptepfutttg0jqsy-vg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sortie détaillée ( </font></font><code>--log-debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), en plus des informations de débogage de werf, contient également les journaux des bibliothèques utilisées. </font><font style="vertical-align: inherit;">Par exemple, vous pouvez voir comment l'interaction avec le Docker Registry se produit, et également corriger les endroits où un temps important est passé:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/ca/rs/dkcarso11r4ghi5s1lyfwkbmczo.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans futurs</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attention! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fonctionnalités décrites ci-dessous marquées </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seront disponibles dans cette version, beaucoup d'entre elles dans un avenir proche. </font><font style="vertical-align: inherit;">Les mises à jour proviendront </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mises </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">à</font></a><font style="vertical-align: inherit;"> jour </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">automatiques lors de l'utilisation de multiwerf</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ces fonctionnalités n'affectent pas la partie stable des fonctions v1.1; leur apparence ne nécessitera pas d'intervention manuelle de l'utilisateur dans les configurations existantes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prise en charge complète de diverses implémentations de Docker Registry (NOUVEAU)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.1</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: mars</font></font></i></li>
<li> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème</font></font></a></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le but est que l'utilisateur utilise une implémentation arbitraire sans restrictions lors de l'utilisation de werf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce jour, nous avons identifié l'ensemble de solutions suivant pour lequel nous allons garantir un support complet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Par défaut (bibliothèque / registre) *,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AWS ECR,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Azur *,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Docker hub</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GCR *,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Forfaits Github</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Registre GitLab *,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Port *,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quai.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un astérisque indique les solutions qui sont actuellement entièrement prises en charge par werf. </font><font style="vertical-align: inherit;">Pour le reste, il y a du support, mais avec des limitations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut distinguer deux problèmes principaux:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certaines solutions ne prennent pas en charge la suppression des balises à l'aide de l'API Docker Registry, qui ne permet pas aux utilisateurs d'utiliser le nettoyage automatique implémenté dans werf. </font><font style="vertical-align: inherit;">Cela est vrai pour AWS ECR, Docker Hub et GitHub Packages.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Certaines solutions ne prennent pas en charge les soi-disant référentiels imbriqués (Docker Hub, GitHub Packages et Quay) ou la prise en charge, mais l'utilisateur doit les créer manuellement à l'aide de l'interface utilisateur ou de l'API (AWS ECR).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons résoudre ces problèmes et d'autres en utilisant des API de solutions natives. </font><font style="vertical-align: inherit;">Cette tâche comprend également la couverture du cycle werf complet avec des tests pour chacun d'eux.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assemblage d'images distribuées (↑)</font></font></h3><br>
<ul>
<li> <i>: <s>v1.2</s> v1.1 (      )</i></li>
<li> <i>: <s>-</s> </i></li>
<li> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Issue</a></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le moment, werf v1.0 et v1.1 ne peut être utilisé que sur un seul hôte dédié pour l'assemblage et la publication d'images et déployer des applications dans Kubernetes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'ouvrir les possibilités du travail distribué werf, lorsque l'assemblage et le déploiement d'applications dans Kubernetes est démarré sur plusieurs hôtes arbitraires et que ces hôtes ne maintiennent pas leur état entre les assemblys (coureurs temporaires), werf doit implémenter la possibilité d'utiliser le Docker Registry comme référentiel d'étape. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auparavant, lorsque le projet werf s'appelait encore dapp, il avait une telle opportunité. Cependant, nous avons rencontré un certain nombre de problèmes qui doivent être pris en compte lors de l'implémentation de cette fonction dans werf. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cette fonctionnalité n'implique pas le travail du collecteur à l'intérieur des pods Kubernetes, car </font><font style="vertical-align: inherit;">pour ce faire, débarrassez-vous de la dépendance à l'égard du serveur Docker local (dans le module Kubernetes, il n'y a pas d'accès au serveur Docker local, car le processus lui-même s'exécute dans le conteneur, et werf ne prend pas en charge et ne prend pas en charge le travail avec le serveur Docker sur le réseau). </font><font style="vertical-align: inherit;">La prise en charge du travail dans Kubernetes sera mise en œuvre séparément.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support officiel des actions GitHub (NOUVEAU)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.1</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: mars</font></font></i></li>
<li> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème</font></font></a></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comprend la documentation werf ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">références</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><font style="vertical-align: inherit;">sections de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guide</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), ainsi que l'action officielle GitHub pour travailler avec werf. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, cela permettra à werf de travailler sur des coureurs éphémères. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mécanique de l'interaction des utilisateurs avec le système CI sera basée sur la mise en place d'étiquettes sur les demandes d'extraction pour lancer certaines actions de création / déploiement de l'application.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Développement et déploiement d'applications locales avec werf (↓)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.1</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">janvier-février</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avril</font></font></i></li>
<li> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème</font></font></a></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'objectif principal est de réaliser une configuration unifiée unique pour déployer des applications à la fois localement et en production, sans actions complexes, hors de la boîte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werf a également besoin d'un mode de fonctionnement dans lequel il sera commode de modifier le code de l'application et de recevoir instantanément les commentaires d'une application qui fonctionne pour le débogage.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouvel algorithme de nettoyage (NOUVEAU)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.1</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: avril</font></font></i></li>
<li> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problème</font></font></a></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la version actuelle de werf v1.1, la procédure </font></font><code>cleanup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne prévoit pas de nettoyer les images pour le schéma de balisage basé sur le contenu - ces images s'accumuleront. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, dans la version actuelle de werf (v1.0 et v1.1), différentes politiques de nettoyage sont utilisées pour les images publiées par les schémas de balisage: branche Git, balise Git ou validation Git. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un nouvel algorithme de nettoyage d'image unifié pour tous les schémas de marquage a été inventé sur la base de l'historique des validations dans Git:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ne stockez pas plus de N1 images associées aux N2 dernières validations pour chacun des git HEAD (branches et balises).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ne stockez pas plus de N1 images-étapes associées aux N2 dernières validations pour chacun des git HEAD (branches et balises).</font></font></li>
<li>   ,    -   Kubernetes (  kube-    namespace';      ).</li>
<li>   ,      ,   Helm-.</li>
<li>    ,        HEAD  git (,     HEAD  )           Kubernetes    Helm.</li>
</ul><br>
<h3>   (↓)</h3><br>
<ul>
<li> <i>: v1.1</i></li>
<li> <i>: <s>-</s> *</i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version actuelle de werf collecte les images et les artefacts décrits dans </font></font><code>werf.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, séquentiellement. </font><font style="vertical-align: inherit;">Il est nécessaire de paralléliser le processus d'assemblage d'étapes indépendantes d'images et d'artefacts, ainsi que de fournir une conclusion pratique et informative. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Remarque: la date limite est décalée en raison de la priorité accrue pour la mise en œuvre d'un assemblage distribué, qui ajoutera plus de fonctionnalités pour la mise à l'échelle horizontale, ainsi que l'utilisation de werf avec les actions GitHub. </font><font style="vertical-align: inherit;">L'assemblage parallèle est la prochaine étape d'optimisation, offrant une évolutivité verticale lors de l'assemblage d'un seul projet.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passer à la barre 3 (↓)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.2</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">février-mars</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mai *</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il comprend la transition vers la nouvelle base de code </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et un moyen éprouvé et pratique de migrer les installations existantes. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Remarque: le passage à Helm 3 n'ajoutera pas de fonctionnalités importantes à werf, car toutes les fonctionnalités clés de Helm 3 (fusion à 3 voies et manque de barre) sont déjà implémentées dans werf. </font><font style="vertical-align: inherit;">De plus, werf possède </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des fonctionnalités supplémentaires en</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus de celles indiquées. </font><font style="vertical-align: inherit;">Cependant, cette transition reste dans nos plans et sera mise en œuvre.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description de la configuration de Jsonnet pour Kubernetes (↓)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.2</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">janvier-février</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avril-mai</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werf prendra en charge la description de la configuration de Kubernetes au format Jsonnet. </font><font style="vertical-align: inherit;">Dans le même temps, werf restera compatible avec Helm et il sera possible de sélectionner un format de description. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raison en est que les modèles de langage Go, selon de nombreuses personnes, ont un seuil d'entrée important, et l'intelligibilité du code de ces modèles souffre également. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'autres options pour l'implémentation de systèmes de description de configuration Kubernetes (comme Kustomize) sont également envisagées.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Travailler à l'intérieur de Kubernetes (↓)</font></font></h3><br>
<ul>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version: v1.2</font></font></i></li>
<li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dates: </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avril-mai</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mai-juin</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Objectif: Assurer l'assemblage des images et la livraison des applications à l'aide de coureurs dans Kubernetes. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">l'assemblage de nouvelles images, leur publication, leur nettoyage et leur déploiement peuvent se faire directement à partir des modules Kubernetes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour réaliser cette fonctionnalité, vous devez d'abord pouvoir créer des images de manière distribuée </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(voir le paragraphe ci-dessus)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il nécessite également la prise en charge du mode de fonctionnement de génération sans le serveur Docker (c'est-à-dire une construction de type Kaniko ou une construction dans l'espace utilisateur). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werf prendra en charge les versions de Kubernetes non seulement avec le Dockerfile, mais aussi avec son générateur Stapel avec reconstructions incrémentielles et Ansible.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un pas vers le développement open source</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aimons notre communauté ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et nous voulons que de plus en plus de personnes contribuent à améliorer notre situation, à comprendre dans quelle direction nous allons et à participer au développement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus récemment, il a été décidé de passer aux </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cartes de projet GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> afin d'ouvrir le flux de travail de notre équipe. </font><font style="vertical-align: inherit;">Vous pouvez maintenant voir les plans immédiats, ainsi que les travaux en cours dans les domaines suivants:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation et site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bugs et Bad UX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de travail a été fait sur les problèmes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Supprimé non pertinent.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Les existants sont réduits à un seul format, un nombre suffisant de détails et de détails.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ajout de nouveaux problèmes avec des idées et des suggestions.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment activer la version v1.1</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version est actuellement disponible dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canal 1.1 ea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (les </font><font style="vertical-align: inherit;">versions </font><font style="vertical-align: inherit;">dans </font><i><font style="vertical-align: inherit;">les</font></i><font style="vertical-align: inherit;"> canaux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stables</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solides</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apparaîtront au fur et à mesure de leur stabilisation, mais </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ea</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lui-même est déjà suffisamment stable pour être utilisé, car il est passé par </font><i><font style="vertical-align: inherit;">les</font></i><font style="vertical-align: inherit;"> canaux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alpha</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bêta</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Il est activé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">via multiwerf de la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> manière suivante:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">source</span> $(multiwerf use 1.1 ea)<font></font>
werf COMMAND ...</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nouvelle architecture du magasin de scène et les performances optimisées du collecteur pour les collecteurs Stapel et Dockerfile ouvrent la possibilité de mettre en œuvre des assemblages distribués et parallèles dans werf. Ces fonctionnalités apparaîtront bientôt dans la même version v1.1 et deviendront automatiquement disponibles via le mécanisme de mise à jour automatique (pour les utilisateurs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multiwerf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette version, une stratégie de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balisage basée sur le contenu a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été ajoutée </font><font style="vertical-align: inherit;">, qui est devenue la stratégie par défaut. Un journal a également été repensé les commandes de </font><font style="vertical-align: inherit;">base: </font></font><code>werf build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>werf publish</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>werf deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>werf dismiss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>werf cleanup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prochaine étape importante consistera à ajouter des assemblys distribués. </font><font style="vertical-align: inherit;">Les assemblys distribués depuis la version 1.0 sont devenus une priorité plus élevée que les assemblages parallèles, car ils ajoutent plus de valeur werf: mise à l'échelle verticale des collecteurs et prise en charge des collecteurs éphémères dans divers systèmes CI / CD, ainsi que la possibilité de prendre officiellement en charge les actions GitHub. </font><font style="vertical-align: inherit;">Par conséquent, le calendrier de mise en œuvre des assemblages parallèles a été décalé. </font><font style="vertical-align: inherit;">Cependant, nous travaillons pour réaliser rapidement les deux possibilités. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suivez l'actualité! </font><font style="vertical-align: inherit;">Et n'oubliez pas de passer par notre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour créer un problème, en trouver un existant et mettre un plus, créer un PR ou simplement regarder le développement du projet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez aussi dans notre blog:</font></font><br>
<br>
<ul>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> werf 1.0 stable:    GitOps,   </a>»</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">werf —    CI/CD  Kubernetes (   )</a>»;</li>
<li>      werf:<br>
<ul>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">3-way merge  werf:   Kubernetes  Helm „ “</a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> werf    Helm-</a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> monorepo  multirepo  werf     Docker Registry</a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Docker-  werf      Dockerfile</a>».</li>
</ul></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493160/index.html">Comment nous avons amélioré la recherche intelligente sur hh.ru en 2019: infographie</a></li>
<li><a href="../fr493162/index.html">Une liste ouverte de réunions et conférences en ligne</a></li>
<li><a href="../fr493164/index.html">Il s'avère que le commerce en ligne survit dans l'environnement actuel. Pourquoi? ADN supprimé</a></li>
<li><a href="../fr493166/index.html">Ontol: une sélection d'articles sur le "burnout" [100+]</a></li>
<li><a href="../fr493168/index.html">Calculatrice Pipipax</a></li>
<li><a href="../fr493172/index.html">Le plus gros, le pire ou pourquoi la boucle de jeu est importante</a></li>
<li><a href="../fr493178/index.html">Tout est incroyable dans les logiciels, mais tout le monde est mécontent</a></li>
<li><a href="../fr493184/index.html">Contrat de développement de l'électronique. Calcul de projet</a></li>
<li><a href="../fr493186/index.html">Les meilleurs articles liés à l'automobile pour les développeurs sur Habré [170+]</a></li>
<li><a href="../fr493190/index.html">Comment nous avons créé la galerie d'art des réseaux de neurones et pourquoi nous ne donnons pas d'images à copier</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>