<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§üüèΩ üè≥Ô∏è üÜò PCI Express em FPGAs da s√©rie V da Intel: recursos b√°sicos de interface e recursos principais de hardware ü¶ó üôèüèΩ üë©üèº‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introdu√ß√£o
 A interface PCI Express ou PCIe, familiar a muitos, j√° estava dispon√≠vel para desenvolvedores de sistemas FPGA quando estava come√ßando a s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PCI Express em FPGAs da s√©rie V da Intel: recursos b√°sicos de interface e recursos principais de hardware</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496702/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdu√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A interface PCI Express ou PCIe, familiar a muitos, j√° estava dispon√≠vel para desenvolvedores de sistemas FPGA quando estava come√ßando a se espalhar na tecnologia digital. Nesse momento, havia uma solu√ß√£o na qual o n√∫cleo do software era conectado a um microcircuito externo de n√≠vel f√≠sico [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]. Isso possibilitou a cria√ß√£o de uma linha PCIe de pista √∫nica a uma velocidade de 2,5 gigatransa√ß√µes por segundo. Al√©m disso, gra√ßas ao desenvolvimento de tecnologias, a camada f√≠sica da interface migrou para os blocos de hardware PCIe dentro dos pr√≥prios FPGAs; o n√∫mero de canais poss√≠veis aumentou para 8 e, em v√°rios novos microcircuitos - para 16; Seguindo padr√µes modernos, as poss√≠veis taxas de transfer√™ncia de dados aumentaram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, ainda √© dif√≠cil encontrar materiais auxiliares para trabalhar com os n√∫cleos de hardware dos FPGAs modernos em fontes no idioma russo; n√£o h√° muita informa√ß√£o dispon√≠vel na pr√≥pria interface PCIe. O guia para n√∫cleos de hardware PCI Express implica que o desenvolvedor j√° se familiarizou com o padr√£o e entende os conceitos b√°sicos da transfer√™ncia de dados entre o dispositivo e um computador pessoal (PC). No entanto, a abund√¢ncia de informa√ß√µes no pr√≥prio padr√£o PCIe n√£o entende imediatamente quais etapas devem ser tomadas para transferir com √™xito os dados do dispositivo para a mem√≥ria do PC ou vice-versa. Para obter uma imagem mais completa, uma parte consider√°vel da informa√ß√£o deve ser coletada pouco a pouco de v√°rias fontes. Para desenvolvedores de sistemas Intel FPGA, a dificuldade tamb√©m √©que a maioria dos materiais e artigos dispon√≠veis descreve o trabalho com n√∫cleos de hardware Xilinx FPGA.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, o autor tentar√° falar sobre o que o designer do sistema FPGA precisa saber para trabalhar com a interface PCI Express; </font><font style="vertical-align: inherit;">considerar√° os recursos do trabalho com os n√∫cleos de hardware PCI Express FPGAs da s√©rie V da Intel na vers√£o Avalon-ST.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≠veis PCIe e tipos de pacotes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de o PCI Express ser frequentemente chamado de barramento, essa interface √© uma rede de dispositivos conectados por grupos de canais duplex serial. A rede PCI Express em si consiste em v√°rios n√≥s principais: a raiz (raiz), o ponto final (ponto final) e o roteador (comutador) (Figura 1). Para transferir dados apenas entre dois dispositivos, basta ter uma raiz e um terminal. No caso de PCs modernos, a raiz da rede est√° localizada em um substrato junto com os n√∫cleos do processador central. Independentemente de onde a raiz do PCIe esteja localizada, ela est√° associada √† mem√≥ria do sistema. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_c/hp/8v/_chp8va2uvyrgrc_pt0irj-wnrk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 1 - Rede PCIe</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O protocolo de transfer√™ncia de dados PCIe √© dividido em tr√™s camadas: a camada de transa√ß√£o, a camada de enlace de dados e a camada f√≠sica. </font><font style="vertical-align: inherit;">Os dados da interface s√£o transmitidos na forma de pacotes. </font><font style="vertical-align: inherit;">Uma vis√£o generalizada dos pacotes √© mostrada na Figura 2. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pe/eg/sa/peegsa43-ji_l00myvwxe8kt6tg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 2 - Uma vis√£o generalizada dos pacotes PCIe</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
No n√≠vel da transa√ß√£o, qualquer pacote (TLP) consiste em pelo menos um cabe√ßalho. </font><font style="vertical-align: inherit;">Dependendo do tipo de pacote, o cabe√ßalho pode ser seguido por dados - o conte√∫do √∫til do pacote. </font><font style="vertical-align: inherit;">Uma soma de verifica√ß√£o adicional tamb√©m pode ser adicionada no final do pacote. </font><font style="vertical-align: inherit;">Existem os seguintes tipos principais de pacotes no n√≠vel da transa√ß√£o (tabela 1): </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 1 - Tipos de pacotes no n√≠vel da transa√ß√£o</font></font></i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o. P.</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vista do pacote</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do tipo de embalagem de acordo com a especifica√ß√£o</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de leitura de mem√≥ria </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de leitura de mem√≥ria</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de Grava√ß√£o de Mem√≥ria</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de grava√ß√£o na mem√≥ria</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de leitura de espa√ßo de E / S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de Leitura de E / S</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de grava√ß√£o de espa√ßo de E / S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicita√ß√£o de grava√ß√£o de E / S</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ler solicita√ß√£o de configura√ß√£o</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicita√ß√£o de leitura de configura√ß√£o</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gravar solicita√ß√£o de configura√ß√£o</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de Grava√ß√£o de Configura√ß√£o</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resposta de leitura</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensagem</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensagem</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na camada de link, um n√∫mero de sequ√™ncia de pacotes e uma soma de verifica√ß√£o de link s√£o adicionados a cada pacote no n√≠vel da transa√ß√£o. </font><font style="vertical-align: inherit;">A camada de enlace de dados tamb√©m forma seus pr√≥prios tipos de pacotes (DLLP), que incluem (tabela 2): </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 2 - Tipos de pacotes de enlace de dados</font></font></i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o. P.</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vista do pacote</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do tipo de embalagem de acordo com a especifica√ß√£o</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confirma√ß√£o de pacote no n√≠vel de transa√ß√£o</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TLP Ack</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rejei√ß√£o de pacote no n√≠vel de transa√ß√£o</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TLP Nack</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciamento de energia</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciamento de energia</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de fluxo de dados</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de fluxo</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, a camada f√≠sica complementa os pacotes com s√≠mbolos do in√≠cio e do fim dos pacotes, que s√£o emprestados do padr√£o IEEE 802.3. </font><font style="vertical-align: inherit;">Para pacotes no n√≠vel da transa√ß√£o, os s√≠mbolos K27.7 e K29.7 s√£o usados, respectivamente; </font><font style="vertical-align: inherit;">para pacotes de enlace de dados, s√≠mbolos K28.2 e K29.7. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com n√∫cleos de hardware FPGA, o desenvolvedor precisa formar apenas pacotes no n√≠vel da transa√ß√£o; </font><font style="vertical-align: inherit;">pacotes de camada f√≠sica e de canal s√£o formados por blocos de kernel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roteamento de pacotes em n√≠vel de transa√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, diferentes tipos de pacotes podem chegar do remetente ao destinat√°rio de tr√™s maneiras:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">roteamento para o endere√ßo; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Roteamento de ID</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> roteamento indireto.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O relacionamento entre o m√©todo de roteamento e o tipo de pacote no n√≠vel da transa√ß√£o √© apresentado na Tabela 3. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 3 - Correspond√™ncia do m√©todo de roteamento e tipo de pacote</font></font></i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Ññp</font></font></th>
<th> </th>
<th> </th>
</tr>
<tr>
<td>1</td>
<td>  </td>
<td>       . <br>
    I/O     I/O<br>
</td>
</tr>
<tr>
<td>2</td>
<td>  </td>
<td>     . <br>
    ID.<br>
  <br>
</td>
</tr>
<tr>
<td>3</td>
<td> </td>
<td>    ID</td>
</tr>
</tbody></table></div><br>
<h2>   .        </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada n√≥ de extremidade possui seu pr√≥prio espa√ßo de configura√ß√£o, onde est√£o localizados v√°rios registros de instru√ß√µes e status. Entre eles est√£o o Base Address Register ou BAR. Ao inicializar os terminais, o BIOS ou sistema operacional varre a BAR dos terminais para determinar quanta mem√≥ria e espa√ßo s√£o necess√°rios para cada terminal. Em seguida, em cada BAR ativa, o endere√ßo inicial da parte alocada da mem√≥ria do sistema √© gravado. Como resultado, o terminal adquire um endere√ßo para o qual as solicita√ß√µes apropriadas podem ser enviadas. Normalmente, no ponto final, um mapa de registro √© formado, vinculado √†s √°reas de mem√≥ria alocadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, cada n√≥ de extremidade, ou melhor, o dispositivo l√≥gico interno, obt√©m seu identificador exclusivo, que consiste em tr√™s partes: n√∫mero do barramento, n√∫mero do dispositivo, n√∫mero do dispositivo l√≥gico (fun√ß√£o).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dessa maneira, o sistema possui informa√ß√µes suficientes para se comunicar com o terminal. No entanto, a transmiss√£o de dados usando consultas na BAR apresenta baixo desempenho. Em primeiro lugar, para uma BAR de 32 bits de largura, o tamanho da solicita√ß√£o utiliz√°vel √© limitado a uma palavra dupla (DWORD); para uma BAR de 64 bits, duas palavras duplas. Em segundo lugar, cada solicita√ß√£o ocorre com a participa√ß√£o do processador central. Para reduzir a carga no processador central e aumentar o tamanho de cada pacote, √© necess√°rio que o n√≥ de extremidade mova os dados independentemente para ou da mem√≥ria do sistema. Para fazer isso, o terminal deve saber em quais endere√ßos de mem√≥ria do sistema ele pode gravar ou ler dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado o exposto, o esquema geral de transfer√™ncia de dados entre o terminal e a mem√≥ria do sistema pode ser representado da seguinte maneira:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o driver do terminal aloca buffers na mem√≥ria do sistema para gravar dados; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o driver forma na mem√≥ria do sistema um conjunto de endere√ßos e tamanhos de buffer - descritores de buffer para grava√ß√£o de dados;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o driver do terminal grava o endere√ßo do conjunto de descritores nos registros do dispositivo associados √†s √°reas BAR;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o driver do terminal programa os registros de controle de transfer√™ncia de dados associados √†s √°reas BAR; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o terminal envia uma solicita√ß√£o para ler a mem√≥ria do sistema para obter um conjunto de descritores para gravar na mem√≥ria do sistema;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o terminal envia solicita√ß√µes de grava√ß√£o para a mem√≥ria do sistema e preenche os buffers de armazenamento;</font></font></li>
<li>      /   ,    ,        ,  ;</li>
<li>                   PCIe. </li>
</ol><br>
<h2>   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No est√°gio em que o driver configura os registros do terminal, dependendo do tipo de espa√ßo de endere√ßo associado √† BAR, o terminal receber√° uma solicita√ß√£o de grava√ß√£o na mem√≥ria (Figura 3) ou uma solicita√ß√£o de grava√ß√£o no espa√ßo de E / S. Se o driver ler um registro durante a configura√ß√£o do registro, o terminal tamb√©m receber√° as solicita√ß√µes de leitura correspondentes (Figura 4). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w0/_e/5o/w0_e5oqkd6yfw7uyv9vewkmokw4.png" alt="imagem"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 3 - Exemplo de uma solicita√ß√£o para gravar na mem√≥ria 1 DW de comprimento </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">Figura 4 </font></i><i><font style="vertical-align: inherit;">- Exemplo de uma solicita√ß√£o para gravar </font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/by/yk/cabyyk_ju4inqbsdevo3b-z3pma.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na mem√≥ria 1 DW de comprimento</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diferentemente das solicita√ß√µes de grava√ß√£o ou leitura, as solicita√ß√µes de E / S t√™m v√°rias limita√ß√µes. Primeiro, as solicita√ß√µes de grava√ß√£o e leitura exigem uma resposta do destinat√°rio. Isso leva ao fato de que a taxa de transfer√™ncia de dados usando solicita√ß√µes para o espa√ßo de E / S se torna muito menor do que a largura de banda PCIe te√≥rica permite. Em segundo lugar, o endere√ßo das solicita√ß√µes de espa√ßo de E / S √© limitado a 32 bits, o que n√£o permite o acesso a fragmentos da mem√≥ria do sistema al√©m de 4 GB. Terceiro, as solicita√ß√µes de espa√ßo de E / S n√£o podem exceder uma palavra dupla e n√£o podem usar v√°rios canais virtuais para transporte. Por esses motivos, os pedidos de grava√ß√£o e leitura no espa√ßo de E / S n√£o ser√£o mais considerados. N√£o obstante,o conte√∫do dos cabe√ßalhos da mem√≥ria de grava√ß√£o / leitura e do espa√ßo de E / S diferem apenas em v√°rios campos; portanto, as estruturas de pacotes mostradas nas Figuras 3 e 4 tamb√©m s√£o aplic√°veis ‚Äã‚Äãa solicita√ß√µes no espa√ßo de E / S.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando um n√≥ de extremidade ou raiz do PCIe recebe uma solicita√ß√£o para ler mem√≥ria ou espa√ßo de E / S, o dispositivo deve enviar uma resposta. Se o remetente da solicita√ß√£o n√£o receber uma resposta dentro de um determinado per√≠odo, isso levar√° a um erro ao aguardar uma resposta. Se, por algum motivo, o dispositivo n√£o puder enviar os dados solicitados, ele dever√° gerar uma resposta de erro. Os poss√≠veis motivos podem ser: o destinat√°rio n√£o suporta esta solicita√ß√£o (solicita√ß√£o n√£o suportada); o destinat√°rio n√£o est√° pronto para aceitar a solicita√ß√£o de configura√ß√£o e solicita sua repeti√ß√£o mais tarde (Status de Nova Tentativa da Solicita√ß√£o de Configura√ß√£o), ocorreu um erro interno, devido ao qual o destinat√°rio n√£o pode responder e rejeita a solicita√ß√£o (Interrup√ß√£o Completa). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Formatos para uma resposta bem-sucedida a uma solicita√ß√£o de leitura e uma resposta de erro para uma solicita√ß√£o n√£o suportada s√£o mostrados nas Figuras 5, 6.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gp/pl/y4/gpply4dawc8olvy6iyeipyeraos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 5 - Exemplo de uma resposta bem-sucedida para leitura </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/3s/uw/bv/3suwbvjqkiqpoaogl9ewbnbixjq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 6‚Äî Exemplo de uma resposta sobre uma solicita√ß√£o n√£o suportada</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Enquanto o terminal est√° acessando uma √°rea de mem√≥ria com 4 GB, o formato dos cabe√ßalhos de pacotes n√£o difere dos cabe√ßalhos mostrados nas Figuras 3, 4. Para solicita√ß√µes de grava√ß√£o ou lendo a mem√≥ria al√©m de 4 GB, uma palavra dupla adicional com bits de ordem superior do endere√ßo de destino √© usada no cabe√ßalho (Figura 7). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rr/1o/w6/rr1ow6yxljdhqffy9gguw6v-3os.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 7 - Um exemplo de cabe√ßalho de solicita√ß√£o de grava√ß√£o de 128</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
bytes.Explica√ß√µes de nomes abreviados de campos de cabe√ßalho de pacote s√£o apresentadas na Tabela 4. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 4 - Lista de abrevia√ß√µes para campos de cabe√ßalho</font></font></i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o. P.</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Designa√ß√£o de campo</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome do campo</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compromisso</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TC</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Categoria de tr√°fego - classe de tr√°fego</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Define a associa√ß√£o ao canal virtual</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atr</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atributos</font></font></td>
<td>   : , ,    ID,       ID.</td>
</tr>
<tr>
<td>3</td>
<td>TH</td>
<td>    ‚Äí TLP Processing Hint</td>
<td>,         [1..0]      .</td>
</tr>
<tr>
<td>4</td>
<td>TD</td>
<td>       ‚Äí TLP Digest</td>
<td>,          .</td>
</tr>
<tr>
<td>5</td>
<td>EP</td>
<td>    </td>
<td>,      .</td>
</tr>
<tr>
<td>6</td>
<td>AT</td>
<td>  ‚Äí Address Translation</td>
<td>,     :   ,  ,  </td>
</tr>
<tr>
<td>7</td>
<td>BE</td>
<td>        ‚Äí Byte Enable</td>
<td>         </td>
</tr>
<tr>
<td>8</td>
<td>PH</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dica de processamento de pacotes - Dica de processamento</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dicas ao destinat√°rio do pacote como o pacote deve ser usado, bem como a estrutura de dados</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BCM</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A presen√ßa de uma altera√ß√£o no n√∫mero de bytes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indica se o n√∫mero de bytes no pacote foi alterado. </font><font style="vertical-align: inherit;">Somente um remetente em face de um dispositivo PCI-X pode definir um sinalizador</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se um terminal usa interrup√ß√µes para relatar um evento, tamb√©m deve formar um pacote apropriado. </font><font style="vertical-align: inherit;">No total, o PCIe pode usar tr√™s tipos de interrup√ß√µes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interrup√ß√µes herdadas (interrup√ß√µes herdadas ou INT);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interrup√ß√µes na forma de mensagens (interrup√ß√µes sinalizadas por mensagem ou MSI);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensagem estendida interrompe (mensagem sinalizada interrompe estendida ou MSI-X).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As interrup√ß√µes INT herdadas s√£o usadas para compatibilidade com sistemas que n√£o suportam interrup√ß√µes de mensagens. De fato, esse tipo de interrup√ß√£o √© uma mensagem (um pacote do tipo Message) que simula a opera√ß√£o de uma linha de interrup√ß√£o f√≠sica. Em um evento especificado, o terminal envia uma mensagem para a raiz do PCIe de que a interrup√ß√£o INT foi ativada e aguarda a a√ß√£o do manipulador de interrup√ß√µes. At√© que o manipulador de interrup√ß√£o execute a a√ß√£o especificada, a interrup√ß√£o INT estar√° no estado ativado. As interrup√ß√µes herdadas n√£o permitem determinar a origem do evento, o que for√ßa o manipulador de interrup√ß√µes a varrer sequencialmente todos os pontos de extremidade na √°rvore do PCIe para atender a essa interrup√ß√£o. Quando a interrup√ß√£o √© atendida, o terminal envia uma mensagem informando queque a interrup√ß√£o INT √© mais inativa. Os n√∫cleos de hardware FPGA, em um sinal da l√≥gica do usu√°rio, geram independentemente as mensagens necess√°rias para interrup√ß√µes do INT, para que a estrutura de pacotes n√£o seja considerada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As interrup√ß√µes de mensagens, juntamente com sua vers√£o estendida, s√£o o tipo principal e obrigat√≥rio de interrup√ß√£o no PCIe. Na verdade, ambos os tipos de interrup√ß√µes s√£o uma solicita√ß√£o para gravar na mem√≥ria do sistema com o comprimento de uma palavra dupla. A diferen√ßa de uma solicita√ß√£o regular √© que o endere√ßo de grava√ß√£o e o conte√∫do do pacote sejam alocados para cada dispositivo no est√°gio de configura√ß√£o do sistema. Nesse caso, o LAPIC (Advanced Programmable Interrupt Controller) local dentro do processador central se torna o destino. Ao usar esse tipo de interrup√ß√£o, n√£o √© necess√°rio pesquisar sequencialmente todos os dispositivos na √°rvore PCIe. Al√©m disso, se o sistema permitir que o dispositivo use v√°rios vetores de interrup√ß√£o, cada vetor poder√° ser associado ao seu pr√≥prio evento.Juntos, isso reduz o tempo do processador para processar interrup√ß√µes e aumenta o desempenho geral do sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As interrup√ß√µes MSI permitem a forma√ß√£o de at√© 32 vetores separados. O n√∫mero exato depende dos recursos do terminal. Nesse caso, o sistema pode permitir o uso de apenas parte dos vetores. No est√°gio de configura√ß√£o, o sistema grava o endere√ßo de interrup√ß√£o e os dados iniciais para grava√ß√£o nos registros especiais do espa√ßo de configura√ß√£o do n√≥ de extremidade. Todas as interrup√ß√µes ativas usam o mesmo endere√ßo. Mas para cada vetor, o ponto final altera os bits dos dados iniciais. Por exemplo, permita que um n√≥ de extremidade suporte no m√°ximo 4 vetores de interrup√ß√£o, todos os 4 vetores s√£o permitidos no sistema e os dados iniciais para grava√ß√£o s√£o 0x4970. Ent√£o, para formar o primeiro vetor, o ponto final passa os dados iniciais inalterados. Para o segundo vetor, o dispositivo altera o primeiro bit e transmite o n√∫mero 0x4971.Para o terceiro e quarto vetores, o dispositivo transmitir√° os n√∫meros 0x4972 e 0x4973, respectivamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os n√∫cleos de hardware FPGA formam independentemente um pacote com uma interrup√ß√£o MSI por um sinal da l√≥gica do usu√°rio. Entretanto, antes de comandar o kernel para enviar uma interrup√ß√£o, a l√≥gica do usu√°rio tamb√©m deve fornecer o conte√∫do do pacote para o vetor necess√°rio a uma interface especial do kernel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As interrup√ß√µes do MSI-X permitem a forma√ß√£o de at√© 2048 vetores individuais. Nos registros correspondentes do espa√ßo de Configura√ß√£o, o terminal indica em quais espa√ßos de endere√ßo BAR e com que deslocamento do endere√ßo base est√£o localizadas a tabela de interrup√ß√£o (Figura 8) e a tabela de sinalizadores de interrup√ß√£o pendentes (Pending Bit Array - PBA, Figura 9), bem como os tamanhos de ambos tabelas. O sistema grava um endere√ßo e dados separados para gravar em cada linha da tabela de interrup√ß√£o e tamb√©m permite ou pro√≠be o uso de um vetor espec√≠fico atrav√©s do primeiro bit do campo Controle de vetor. Para um determinado evento, o terminal define um sinalizador na tabela de sinalizadores de interrup√ß√µes pendentes. Se nenhuma m√°scara for configurada para essa interrup√ß√£o no campo Controle de vetor, o n√≥ de extremidade enviar√° uma interrup√ß√£o para o endere√ßo da tabela de interrup√ß√µes com o conte√∫do especificado do pacote.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/6q/el/zl6qelezf6aixg5qjw-rbeotwkc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 8 - Tabela de vetores de interrup√ß√£o do MSI-X </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/q8/ms/as/q8msasscf-ytecdpefn-ohdjc1q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 9 - Tabela de sinalizadores para interrup√ß√µes pendentes Os</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
n√∫cleos de hardware do FPGA n√£o possuem uma interface especializada para interrup√ß√µes do MSI-X. </font><font style="vertical-align: inherit;">O pr√≥prio desenvolvedor deve criar uma tabela de interrup√ß√£o na l√≥gica do usu√°rio e uma tabela de sinalizadores de interrup√ß√µes pendentes. </font><font style="vertical-align: inherit;">Um pacote de interrup√ß√£o tamb√©m √© completamente gerado pelo usu√°rio e transmitido atrav√©s da interface geral do kernel, juntamente com outros tipos de pacotes. </font><font style="vertical-align: inherit;">O formato do pacote, neste caso, como j√° mencionado acima, corresponde a uma solicita√ß√£o de grava√ß√£o na mem√≥ria do sistema com o comprimento de uma palavra dupla.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos dos n√∫cleos de hardware PCI Express FPGA s√©rie V da Intel na vers√£o Avalon-ST</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar do fato de que os n√∫cleos de hardware dos FPGAs PCI Express de diferentes fabricantes implementam funcionalidades semelhantes, as interfaces principais individuais ou a ordem de opera√ß√£o podem diferir. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os n√∫cleos de hardware PCI Express FPGA da s√©rie V da Intel est√£o dispon√≠veis em duas vers√µes: com Avalon-MM e Avalon-ST. Este √∫ltimo, embora exija mais esfor√ßo do desenvolvedor, permite que voc√™ obtenha o m√°ximo de largura de banda. Por esse motivo, um kernel com uma interface Avalon-MM n√£o ser√° considerado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A documenta√ß√£o do n√∫cleo do PCI Express com a interface Avalon-ST descreve em detalhes suficientes os par√¢metros do kernel, sinais de entrada e sa√≠da. No entanto, o kernel possui v√°rios recursos aos quais um desenvolvedor deve prestar aten√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro grupo de recursos refere-se a m√©todos que permitem configurar FPGAs dentro de 100 ms, de acordo com os requisitos do PCIe. Al√©m do carregamento paralelo do tipo FPP, o desenvolvedor oferece m√©todos como Configura√ß√£o via Protocolo (CvP) e o modo aut√¥nomo do kernel (modo aut√¥nomo). O desenvolvedor deve garantir que a configura√ß√£o via protocolo ou modo de kernel independente seja suportada para a velocidade PCIe selecionada (par√¢metro "Taxa de faixa"). Para configura√ß√£o atrav√©s do protocolo, informa√ß√µes relevantes podem ser encontradas na documenta√ß√£o do kernel. No caso do modo offline, n√£o existe essa informa√ß√£o, ent√£o voc√™ precisa compilar o projeto. Se o modo independente do kernel n√£o for suportado para a velocidade atual do kernel, o Quartus gerar√° um erro correspondente (Figura 10).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xj/hy/ok/xjhyokbx1mvolf2dweiawoytyzk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 10 - Erro ao compilar um kernel PCIe para o modo offline</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se um desenvolvedor planeja usar a configura√ß√£o por meio de um protocolo, ele tamb√©m deve prestar aten√ß√£o em qual n√∫cleo FPGA o conector PCIe est√° conectado. Isto √© especialmente verdade se o desenvolvedor n√£o usar uma placa pronta, mas seu pr√≥prio dispositivo. Nos FPGAs com v√°rios n√∫cleos de hardware PCIe, apenas um n√∫cleo permite que o CvP seja ativado. A localiza√ß√£o do n√∫cleo com suporte ao CvP √© indicada na documenta√ß√£o do FPGA. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo grupo de recursos est√° relacionado √† pr√≥pria interface de transfer√™ncia de dados Avalon-ST. √â essa interface usada para transferir pacotes no n√≠vel da transa√ß√£o entre a l√≥gica do usu√°rio e o kernel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No lado de recebimento, o kernel possui dois sinais que permitem ao usu√°rio pausar o recebimento de pacotes recebidos: o sinal rx_st_mask e o sinal rx_st_ready. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o sinal rx_st_ready, o desenvolvedor pode pausar a sa√≠da de todos os tipos de pacotes. No entanto, se voc√™ ativar esse sinal, o kernel interromper√° a sa√≠da de pacotes ap√≥s apenas dois ciclos de clock da freq√º√™ncia de opera√ß√£o. Portanto, durante a ativa√ß√£o do sinal, a l√≥gica do usu√°rio deve estar pronta para receber uma quantidade adicional de dados. Se, por exemplo, um desenvolvedor usa um buffer na forma de um FIFO, ele deve evitar estouros de buffer. Caso contr√°rio, parte do conte√∫do do pacote ser√° perdida.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando o sinal "rx_st_mask", o desenvolvedor suspende a emiss√£o de solicita√ß√µes cujas respostas devem ser enviadas. Este sinal tamb√©m n√£o interrompe imediatamente a sa√≠da de pacotes. De acordo com a documenta√ß√£o, ap√≥s ativar o sinal, o kernel pode emitir at√© 10 solicita√ß√µes. Se a l√≥gica do usu√°rio ativar "rx_st_mask" e n√£o houver espa√ßo suficiente no buffer para processar pacotes recebidos, isso tamb√©m poder√° ativar o sinal "rx_st_ready". Nessa situa√ß√£o, a l√≥gica do usu√°rio para de ler todos os pacotes do buffer interno do kernel do hardware. Isso n√£o s√≥ substitui os buffers do kernel de hardware, como tamb√©m viola os requisitos de pedido de pacotes. O dispositivo deve ignorar solicita√ß√µes que n√£o exigem resposta e ler respostas. Caso contr√°rio, o canal de dados ser√° firmemente bloqueado.Por esse motivo, o desenvolvedor deve usar um buffer adicional para processar solicita√ß√µes com respostas e n√£o permitir que a l√≥gica bloqueie pacotes de prioridade mais alta.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No lado da transmiss√£o, os sinais tx_st_valid e tx_st_ready podem causar problemas. Se o sinal tx_st_ready estiver ativo, √© proibido que a l√≥gica do usu√°rio redefina o tx_st_valid no meio do pacote de sa√≠da. Isso significa que, durante a transfer√™ncia, o desenvolvedor deve fornecer todo o conte√∫do do pacote. Se a fonte de dados for mais lenta que a interface do kernel, a l√≥gica do usu√°rio dever√° acumular a quantidade necess√°ria de dados antes do in√≠cio do pacote. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tanto no lado de recebimento quanto no de transmiss√£o, o desenvolvedor deve prestar aten√ß√£o √† ordem dos bytes no cabe√ßalho e no conte√∫do do pacote, bem como no alinhamento dos dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pacote Avalon-ST do n√∫cleo do hardware, em cada palavra dupla dentro do cabe√ßalho do pacote PCIe, os bytes seguem de baixo para alto; dentro do conte√∫do da embalagem - do mais antigo para o mais novo. O desenvolvedor deve usar uma ordem semelhante nos pacotes de sa√≠da para transferir com √™xito dados do terminal para a raiz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A interface Avalon-ST do n√∫cleo do hardware alinha os dados em m√∫ltiplos de 64 bits. Dependendo da largura da interface Avalon-ST, do comprimento do cabe√ßalho do pacote no n√≠vel da transa√ß√£o e do endere√ßo do pacote, o kernel pode adicionar uma palavra dupla vazia entre o cabe√ßalho do pacote e seu conte√∫do. Por sua vez, ao transmitir dados, a l√≥gica do usu√°rio deve adicionar uma palavra dupla vazia antecipadamente, por analogia com o kernel. Essa palavra dupla vazia n√£o √© levada em considera√ß√£o no tamanho do pacote e √© necess√°ria apenas para a opera√ß√£o correta do kernel de hardware.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pr√≥ximo recurso est√° relacionado √†s respostas de leitura recebidas. A descri√ß√£o do kernel diz que n√£o perde as respostas recebidas cujo identificador n√£o corresponde √† solicita√ß√£o de sa√≠da. Ao mesmo tempo, a l√≥gica do usu√°rio deve seguir o tempo de espera pelas respostas. Se o tempo de espera for excedido, a l√≥gica do usu√°rio dever√° elevar o sinalizador ‚Äúcpl_err [0]‚Äù ou ‚Äúcpl_err [1]‚Äù. N√£o est√° claro na documenta√ß√£o como a filtragem funcionar√° quando o terminal enviar v√°rias solicita√ß√µes de leitura. A l√≥gica do usu√°rio informa apenas ao kernel que o tempo limite expirou para uma das solicita√ß√µes, mas n√£o pode passar o identificador dessa solicita√ß√£o para o kernel. Existe a possibilidade de o kernel transmitir √†s respostas do lado do usu√°rio uma solicita√ß√£o com um tempo limite expirado. Portanto, o desenvolvedor deve criar seu pr√≥prio filtro para respostas recebidas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, os desenvolvedores s√£o fortemente encorajados a usar as informa√ß√µes sobre empr√©stimos dispon√≠veis para pacotes de sa√≠da. </font><font style="vertical-align: inherit;">A documenta√ß√£o principal diz que isso n√£o √© necess√°rio, pois o kernel verifica empr√©stimos e bloqueia pacotes quando n√£o h√° empr√©stimos suficientes. </font><font style="vertical-align: inherit;">No entanto, todos os tipos de pacotes chegam ao kernel atrav√©s de uma √∫nica interface. </font><font style="vertical-align: inherit;">Se o buffer do pacote do kernel exceder, o kernel baixar√° o sinal tx_st_ready para zero. </font><font style="vertical-align: inherit;">At√© que o sinal tx_st_ready seja definido como um, a l√≥gica do usu√°rio, em princ√≠pio, n√£o poder√° enviar nenhum pacote. </font><font style="vertical-align: inherit;">O n√∫mero de empr√©stimos dispon√≠veis √© atualizado por meio de pacotes de um dispositivo parceiro. </font><font style="vertical-align: inherit;">Se a l√≥gica do usu√°rio n√£o apenas escreve, mas tamb√©m l√™, a velocidade com que o kernel atualiza os contadores de limites diminui. </font><font style="vertical-align: inherit;">No final, o desempenho geral do sistema sofre.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O artigo descreveu os princ√≠pios gerais da transfer√™ncia de dados via PCI Express, os formatos dos principais pacotes de dados. </font><font style="vertical-align: inherit;">No entanto, o autor omitiu componentes da interface como canais virtuais, o controle do volume de respostas recebidas para leitura e a ordem dos pacotes n√£o √© rigorosa. </font><font style="vertical-align: inherit;">Esses t√≥picos s√£o discutidos em detalhes em v√°rias fontes estrangeiras [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O artigo tamb√©m inclui os recursos dos n√∫cleos de hardware FPGA FPGA Intel Express da s√©rie V que o autor encontrou ao trabalhar no controlador de interface. </font><font style="vertical-align: inherit;">Essa experi√™ncia pode ser √∫til para outros desenvolvedores.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de fontes utilizadas</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma arquitetura PCIe DMA para transmiss√£o de dados de v√°rios gigabytes por segundo / L. Rota, M. Caselle, et. </font><font style="vertical-align: inherit;">al. </font><font style="vertical-align: inherit;">// TRANSA√á√ïES IEEE EM CI√äNCIA NUCLEAR, VOL. </font><font style="vertical-align: inherit;">62, NO. </font><font style="vertical-align: inherit;">3 de junho de 2015.</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">An Efficient and Flexible Host-FPGA PCIe Communication Library / Jian Gong, Tao Wang, Jiahua Chen et. al. // 2014 24th International Conference on Field Programmable Logic and Applications.</a></li>
<li>Design and Implementation of a High-Speed Data Acquisition Card Based on PCIe Bus / Li Mu-guo, Huang Ying, Liu Yu-zhi // „ÄäÊµãÊéßÊäÄÊúØ„Äã2013Âπ¥Á¨¨32Âç∑Á¨¨7Êúü„ÄÇ</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Down to the TLP: How PCI express devices talk (Part I) / Eli Billauer</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Low-Cost FPGA Solution for PCI Express Implementation / Intel Corporation.</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Managing Receive-Buffer Space for Inbound Completions / Xilinx // Virtex-7 FPGA Gen3 Integrated Block for PCI Express v4.3, Appendix B</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">PCIe Completion Timeout / Altera Forum</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">PCIe packet in cyclone VI GX / Altera Forum</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">PCIe simple transaction / Altera Forum</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">PCIe w/ Avalon ST: Equivalent of ko_cpl_spc_vc0? / Altera Forum</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Point me in the right Direction ‚Äì PCIe / Altera Forum</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicitar tempos limite no f√≥rum PCIE / Altera</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Design de interface de alta velocidade baseado no PCIe da plataforma n√£o cooperativa de verifica√ß√£o de receptores / Li Xiao-ning, Yao Yuan-cheng e Qin Ming-wei // Confer√™ncia Internacional de 2016 sobre Mec√¢nica, Controle, El√©trica, Mecatr√¥nica, Informa√ß√£o e Computador</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revis√£o 3.0 da especifica√ß√£o b√°sica do PCI Express / PCI-SIG</font></font></a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface Stratix V Avalon-ST para solu√ß√µes PCIe / Intel Corporation </font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface Avalon-ST do ciclone V para solu√ß√µes PCIe / Intel Corporation</font></font></a></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496680/index.html">Setor 4.1: Propriedade de rob√¥s, redes neurais e monetiza√ß√£o de c√≥digo aberto</a></li>
<li><a href="../pt496682/index.html">Como permanecer profissional sob demanda</a></li>
<li><a href="../pt496686/index.html">Como os sistemas de an√°lise de tr√°fego detectam t√°ticas de hackers por MITRE ATT & CK, parte 4</a></li>
<li><a href="../pt496690/index.html">Tecnologias de controle de coronav√≠rus</a></li>
<li><a href="../pt496692/index.html"># 06 - E um byte inteiro n√£o √© suficiente ... | Clima plano</a></li>
<li><a href="../pt496704/index.html">PCB do foguete Saturn-5 - engenharia reversa com explica√ß√µes</a></li>
<li><a href="../pt496706/index.html">Leitura de fim de semana: uma hist√≥ria dos formatos de √°udio - a era das cassetes e o desenvolvimento das tecnologias de s√≠ntese de fala</a></li>
<li><a href="../pt496708/index.html">Pistola espacial, foguete a vapor e espelho orbital</a></li>
<li><a href="../pt496710/index.html">Informa√ß√µes sobre o computador: simples e r√°pido</a></li>
<li><a href="../pt496712/index.html">Uma vez em um pentest, ou Como quebrar tudo com a ajuda de um urologista e Roskomnadzor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>