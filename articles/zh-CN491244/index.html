<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¼â€ğŸŒ¾ ğŸ‘¨ğŸ½â€âš•ï¸ ğŸ“£ ä¸éœ€è¦Abletonï¼šå°†Ableton Push 2è¿æ¥åˆ°VCVæœºæ¶ ğŸ—’ï¸ ğŸ”© ğŸ’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ€è¿‘ï¼ŒéŸ³ä¹åˆ›ä½œä¸åå¹´å‰çš„ç…§ç‰‡å¤§è‡´ç›¸åŒï¼šæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„DSLRå’Œinstagramå¸æˆ·ã€‚éŸ³ä¹ç•Œå¯¹æ­¤å¾ˆé«˜å…´ï¼Œå› ä¸ºè¿™ç§å…´è¶£å¸¦æ¥äº†å¾ˆå¤šé’±ã€‚æ¯å¤©éƒ½æœ‰æ–°çš„VSTæ’ä»¶å’Œæ¨¡æ‹Ÿè®¾å¤‡å‡ºç°ï¼Œä¸»é¢˜è¯¾ç¨‹çš„æ•°é‡åœ¨è¿…é€Ÿå¢é•¿ï¼Œè‡´åŠ›äºéŸ³ä¹åˆ¶ä½œçš„åšå®¢åœ¨YouTubeä¸Šæ’åç¬¬ä¸€ã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œå¼€æºé¡¹ç›®çœ‹èµ·æ¥éå¸¸æœ‰è¶£ï¼Œå…è®¸ä»»ä½•æƒ³è¦å°è¯•è‡ª...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ä¸éœ€è¦Abletonï¼šå°†Ableton Push 2è¿æ¥åˆ°VCVæœºæ¶</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491244/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qk/vm/8j/qkvm8jnnid3kb_8kybxztptlbfu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€è¿‘ï¼ŒéŸ³ä¹åˆ›ä½œä¸åå¹´å‰çš„ç…§ç‰‡å¤§è‡´ç›¸åŒï¼šæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„DSLRå’Œinstagramå¸æˆ·ã€‚éŸ³ä¹ç•Œå¯¹æ­¤å¾ˆé«˜å…´ï¼Œå› ä¸ºè¿™ç§å…´è¶£å¸¦æ¥äº†å¾ˆå¤šé’±ã€‚æ¯å¤©éƒ½æœ‰æ–°çš„VSTæ’ä»¶å’Œæ¨¡æ‹Ÿè®¾å¤‡å‡ºç°ï¼Œä¸»é¢˜è¯¾ç¨‹çš„æ•°é‡åœ¨è¿…é€Ÿå¢é•¿ï¼Œè‡´åŠ›äºéŸ³ä¹åˆ¶ä½œçš„åšå®¢åœ¨YouTubeä¸Šæ’åç¬¬ä¸€ã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œå¼€æºé¡¹ç›®çœ‹èµ·æ¥éå¸¸æœ‰è¶£ï¼Œå…è®¸ä»»ä½•æƒ³è¦å°è¯•è‡ªå·±ä½œä¸ºç”Ÿäº§è€…çš„äººéƒ½ä¸å¿…ä¸ºæ­¤èŠ±å¾ˆå¤šé’±ã€‚ VCV Rackæ˜¯è¿™æ ·çš„ä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ—¨åœ¨ä½¿æ‰€æœ‰äººéƒ½èƒ½ä½¿ç”¨æœ€æ˜‚è´µçš„ä¸€ç±»ä¹å™¨-æ¨¡æ‹Ÿæ¨¡å—åŒ–åˆæˆå™¨ã€‚æœ€è¿‘ï¼Œå½“æˆ‘æƒ³åˆ°ä¸€ä¸ªæ›²ç›®çš„æƒ³æ³•æ—¶ï¼Œå½“æ—¶åªæœ‰ä¸€å°linuxç¬”è®°æœ¬ç”µè„‘ï¼Œæˆ‘æƒ³ç”¨VCVè¿›è¡Œæ•´ä¸ªå¼€å‘ã€‚ä¸€ç›´ä»¥æ¥ï¼Œéƒ½å¸Œæœ›ä½¿ç”¨midiæ§åˆ¶å™¨ä»¥æ— æ³•ä½¿ç”¨å¯ç”¨æ¨¡å—çš„æ–¹å¼æ¥æ§åˆ¶åˆæˆå™¨ã€‚æœ€åï¼Œæˆ‘å†³å®šç¼–å†™ä¸€ä¸ªæ’ä»¶ä»¥å°†Ableton Push 2è¿æ¥åˆ°VCV Rackã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå®ƒçš„æ¥é¾™å»è„‰ï¼Œä»¥åŠå¦‚ä½•ç¼–å†™è‡ªå·±çš„VCVæ¨¡å—ã€‚</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿«é€Ÿå‚è€ƒ</font></font></b><div class="spoiler_text">VCV Rack â€” open source ,   .  VCV  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">    </a>.<br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
Ableton Push 2 â€”    midi-  Ableton,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> DAW</a>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">API    </a>.<br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0CdMvkBOUgs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VCVæœºæ¶API</font></font></b></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VCVä¸­çš„æ¯ä¸ªæ¨¡å—éƒ½åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†-éŸ³é¢‘å’Œå›¾å½¢ã€‚</font><font style="vertical-align: inherit;">éŸ³é¢‘éƒ¨åˆ†ä»</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ç»§æ‰¿</font><font style="vertical-align: inherit;">äº†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">process</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">ï¼Œ</font><font style="vertical-align: inherit;">è¯¥</font><i><font style="vertical-align: inherit;">è¿‡ç¨‹</font></i><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">é’ˆå¯¹æ¯ä¸ªæ ·æœ¬è¿›è¡Œè°ƒç”¨ï¼Œå³å…·æœ‰é‡‡æ ·é¢‘ç‡ã€‚</font><font style="vertical-align: inherit;">é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒVCVä¸­çš„é‡‡æ ·é¢‘ç‡å¯ä»¥ä»æ ‡å‡†çš„44.1 kHzåˆ°é«˜è¾¾768 kHzä¸ç­‰ï¼Œè¿™å…è®¸å…·æœ‰è¶³å¤Ÿè®¡ç®—èƒ½åŠ›çš„æ¨¡å—åŒ–åˆæˆå™¨æ›´ç²¾ç¡®åœ°ä»¿çœŸã€‚</font><i><font style="vertical-align: inherit;">ModuleWidget</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç±»å‹çš„å¯¹è±¡è´Ÿè´£å›¾å½¢</font><font style="vertical-align: inherit;">ï¼Œè¿™äº›</font><font style="vertical-align: inherit;">å›¾å½¢</font><font style="vertical-align: inherit;">ä»åŸºæœ¬ç»“æ„ç»§æ‰¿äº†</font><i><font style="vertical-align: inherit;">draw</font></i><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">VCVä½¿ç”¨nanovgçŸ¢é‡å›¾å½¢åº“ã€‚</font><font style="vertical-align: inherit;">åœ¨</font><i><font style="vertical-align: inherit;">draw</font></i><font style="vertical-align: inherit;">æ–¹æ³•å†…</font><i><font style="vertical-align: inherit;">ç»˜å›¾</font></i></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒæ—¢å¯ä»¥åœ¨æ¨¡å—è¾¹ç•Œå†…å‘ç”Ÿï¼ˆå¤šä½™çš„è¢«å¼•æ“åˆ‡æ–­ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨ä¾‹å¦‚æˆ‘ä»¬ä»ç„¶ä½¿ç”¨çš„å¸§ç¼“å†²åŒºå†…å‘ç”Ÿã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‚£ä¹ˆï¼Œä¸ºVCVç¼–å†™æ¨¡å—åˆéœ€è¦ä»€ä¹ˆå‘¢ï¼Ÿ</font></font><br>
<br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®ç¯å¢ƒå¹¶å®‰è£…Rack SDK</font></font></b></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¬¬ä¸€æ­¥</font><font style="vertical-align: inherit;">åœ¨æ–‡æ¡£ä¸­</font><font style="vertical-align: inherit;">å·²å¾—åˆ°</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾ˆå¥½çš„æè¿°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”ä¸ä¼šé€ æˆä»»ä½•å›°éš¾ï¼ˆè‡³å°‘åœ¨linuxä¸‹ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä¸å†èµ˜è¿°ã€‚</font></font><br>
<br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”Ÿæˆæ’ä»¶æ¨¡æ¿</font></font></b></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨Rack SDKä¸­æœ‰ä¸€ä¸ªhelper.pyè„šæœ¬ã€‚</font><font style="vertical-align: inherit;">ä»–éœ€è¦è¯´å‡ºcreatepluginï¼Œç„¶åæŒ‡å®šæ’ä»¶çš„åç§°ä»¥åŠæœ‰å…³å®ƒçš„ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">&lt;Rack SDK folder&gt;/helper.py createplugin MyPlugin</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºæ’ä»¶æ¨¡æ¿åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¹å…¶è¿›è¡Œç¼–è¯‘å’Œå®‰è£…</font></font><br>
<br>
<pre><code class="bash hljs">RACK_DIR=&lt;Rack SDK folder&gt; make install</code></pre><br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»˜åˆ¶æ¨¡å—çš„å‰ç«¯</font></font></b></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¯ä¸ªæ’ä»¶å¯ä»¥åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œå¹¶ä¸”å¯¹äºæ¯ä¸ªæ¨¡å—ï¼Œæ‚¨éƒ½éœ€è¦ç»˜åˆ¶ä¸€ä¸ªä¸»é¢æ¿ã€‚ä¸ºæ­¤ï¼ŒVCVæ–‡æ¡£ä¸ºæˆ‘ä»¬æä¾›äº†ä½¿ç”¨Inkscapeæˆ–ä»»ä½•å…¶ä»–çŸ¢é‡ç¼–è¾‘å™¨çš„åŠŸèƒ½ã€‚ç”±äºVCVä¸­çš„æ¨¡å—å®‰è£…åœ¨è™šæ‹ŸEurorackæ”¯æ¶ä¸Šï¼Œå› æ­¤å®ƒä»¬çš„é«˜åº¦å§‹ç»ˆä¸º128.5 mmï¼Œå®½åº¦åº”ä¸º5.08 mmçš„å€æ•°ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸºæœ¬æ¥å£å…ƒç´ ï¼Œä¾‹å¦‚CV /é—¨æ’åº§ï¼ŒæŒ‰é’®å’Œç¯æ³¡ï¼Œå¯ä»¥çŸ¢é‡å½¢å¼æ ‡è®°ã€‚ä¸ºæ­¤ï¼Œè¯·ç»˜åˆ¶å…¶ç›¸åº”é¢œè‰²çš„ä½ç½®åœ†ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤å¤„æ›´å¤šè¯¦ç»†ä¿¡æ¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œä»¥ä¾¿</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">helper.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºè¯¥æ ‡è®°</font><i><font style="vertical-align: inherit;">ç”Ÿæˆ</font></i><font style="vertical-align: inherit;">ä»£ç ã€‚å°±ä¸ªäººè€Œè¨€ï¼Œåœ¨æˆ‘çœ‹æ¥è¿™ä¸æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„åŠŸèƒ½ï¼Œç›´æ¥ä»ä»£ç ä¸­æ”¾ç½®å…ƒç´ æ›´å®¹æ˜“ã€‚å›¾ç‰‡å’Œå¸ƒå±€å‡†å¤‡å°±ç»ªåï¼Œæ‚¨éœ€è¦å†æ¬¡è¿è¡Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">helper.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åˆ›å»ºæ¨¡å—æ¨¡æ¿å¹¶å°†å…¶ä¸å‰é¢æ¿å…³è”ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">helper.py createmodule MyModule res/MyModule.svg src/MyModule.cpp</code></pre><br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬è¿æ¥æŒ‰é’®å’Œæ›²æŠ˜</font></font></b></h2><br>
<img src="https://habrastorage.org/webt/oz/wq/z_/ozwqz_ss4sqqdci_q7dxbarbfve.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é™¤äº†æ˜¾ç¤ºå±ä¹‹å¤–ï¼ŒAbleton Push 2åœ¨è®¡ç®—æœºä¸Šè¿˜è¢«è§†ä¸ºæ™®é€šçš„USB-MIDIè®¾å¤‡ï¼Œå› æ­¤å¯ä»¥è½»æ¾åœ°åœ¨å…¶ä¸VCVæœºæ¶ä¹‹é—´å»ºç«‹è¿æ¥ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œè¯·åœ¨æ¨¡å—ç±»å†…åˆ›å»ºä¸€ä¸ªè¾“å…¥Midié˜Ÿåˆ—å’Œä¸€ä¸ªè¾“å‡ºMidiç«¯å£ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹åŒ–ä»£ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AbletonPush2</span> :</span> Module {<font></font>
    midi::Output midiOutput;<font></font>
    midi::InputQueue midiInput;<font></font>
<font></font>
    <span class="hljs-keyword">bool</span> inputConnected;
    <span class="hljs-keyword">bool</span> outputConnected;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬å°è¯•åœ¨è¿æ¥çš„Midiè®¾å¤‡ä¸­æŸ¥æ‰¾Ableton Pushå¹¶å°†å…¶è¿æ¥ã€‚</font><font style="vertical-align: inherit;">ç”±äºè¯¥æ¨¡å—ä¸“ç”¨äºAbleton Pushï¼Œå› æ­¤æˆ‘ä»¬æ— éœ€ä¸ºç”¨æˆ·é€‰æ‹©è®¾å¤‡è´Ÿæ‹…ï¼Œæ‚¨åªéœ€æŒ‰åç§°æŸ¥æ‰¾å³å¯ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§åˆ¶å™¨è¿æ¥ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">connectPush</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> in_devs = midiInput.getDeviceIds();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; in_devs.size(); i++){
        <span class="hljs-keyword">if</span> (midiInput.getDeviceName(in_devs[i]).find(<span class="hljs-string">"Ableton"</span>) != <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) {<font></font>
            midiInput.setDeviceId(in_devs[i]);<font></font>
            inputConnected = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
    }<font></font>
		<font></font>
    <span class="hljs-keyword">auto</span> out_devs = midiOutput.getDeviceIds();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; out_devs.size(); i++){
        <span class="hljs-keyword">if</span> (midiOutput.getDeviceName(out_devs[i]).find(<span class="hljs-string">"Ableton"</span>) != <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) {<font></font>
            midiOutput.setDeviceId(out_devs[i]);<font></font>
            outputConnected = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œåœ¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤„ç†</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•ä¸­ï¼Œ</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥å®šæœŸæ£€æŸ¥æ§åˆ¶å™¨æ˜¯å¦å·²è¿æ¥ï¼Œå¹¶è¯¢é—®Midié˜Ÿåˆ—æ˜¯å¦æœ‰ä»»ä½•æ¶ˆæ¯åˆ°è¾¾ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMIDIæ ‡å‡†ä¸­é€šå¸¸ç¼–ç ä»€ä¹ˆä»¥åŠå¦‚ä½•ç¼–ç ã€‚</font><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œæ¶ˆæ¯æœ‰ä¸¤ç§ä¸»è¦ç±»å‹ï¼Œå®ƒä»¬æ˜¯â€œéŸ³ç¬¦å¼€/å…³â€ï¼Œä¼ è¾“éŸ³ç¬¦ç¼–å·å’ŒæŒ‰å‹åŠ›ï¼Œä»¥åŠâ€œ CC-å‘½ä»¤æ§åˆ¶â€ï¼Œä¼ è¾“æŸäº›å¯å˜å‚æ•°çš„æ•°å€¼ã€‚</font><font style="vertical-align: inherit;">æœ‰å…³midiçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤å¤„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIDIé˜Ÿåˆ—è½®è¯¢ä»£ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ProcessArgs &amp;args)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-keyword">if</span> (sampleCounter &gt; args.sampleRate / updateFrequency) {<font></font>
<font></font>
        <span class="hljs-keyword">if</span> ((!inputConnected) &amp;&amp; (!outputConnected)) {<font></font>
            connectPush();<font></font>
        }<font></font>
<font></font>
	midi::Message msg;<font></font>
	<span class="hljs-keyword">while</span> (midiInput.shift(&amp;msg)) {<font></font>
	    processMidi(msg);<font></font>
	}<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘è¦æ•™æ§åˆ¶å™¨å«ä»¥ä¸åŒçš„é¢œè‰²å‘å…‰ï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°æµè§ˆå®ƒä»¬ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å‘ä»–å‘é€é€‚å½“çš„midiå‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘æ‰“å‡»å«ç¼–å·36ï¼ˆè¿™æ˜¯æœ€ä½çš„å·¦ä¾§æ‰“å‡»å«ï¼‰ã€‚å¦‚æœå•å‡»å®ƒï¼Œæ§åˆ¶å™¨å°†å‘é€å‘½ä»¤0x90ï¼ˆæ³¨è§£å¼€ï¼‰ï¼Œåè·Ÿæ³¨è§£å·ï¼ˆ36ï¼‰å’Œ0åˆ°127ä¹‹é—´çš„æ•°å­—ï¼Œè¿™è¡¨ç¤ºå‹æœºçš„å¼ºåº¦ã€‚ç›¸åï¼Œå½“è®¡ç®—æœºå‘æ§åˆ¶å™¨å‘é€ç›¸åŒçš„0x90å‘½ä»¤å’Œç›¸åŒçš„éŸ³ç¬¦ç¼–å·36æ—¶ï¼Œåˆ™ç¬¬ä¸‰ä¸ªæ•°å­—å°†æŒ‡ç¤ºå·¦ä¸‹å«å‘å…‰çš„é¢œè‰²ã€‚æŒ‰é”®å’Œæ‰“å‡»å«çš„ç¼–å·å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ Pushå…·æœ‰ä½¿ç”¨é¢œè‰²ï¼Œè°ƒè‰²æ¿ï¼ŒåŠ¨ç”»å’Œå…¶ä»–èƒŒå…‰å‚æ•°çš„å¤šç§å¯èƒ½æ€§ã€‚æˆ‘æ²¡æœ‰è¯¦ç»†ä»‹ç»ï¼Œåªæ˜¯å°†é»˜è®¤è°ƒè‰²æ¿çš„æ‰€æœ‰å¯èƒ½çš„é¢œè‰²å¸¦åˆ°äº†å«æ¿ä¸Šï¼Œç„¶åé€‰æ‹©äº†æˆ‘å–œæ¬¢çš„é¢œè‰²ã€‚ä½†æ˜¯åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ ¹æ®æ–‡æ¡£å°†midiå‘½ä»¤è½¬æ¢ä¸ºLEDä¸Šçš„PWMå€¼çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8o/at/zq/8oatzqvwy_gwqvgu4cmjgjpbknm.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èƒŒå…‰æ§åˆ¶ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lightOn</span><span class="hljs-params">(<span class="hljs-keyword">int</span> note, <span class="hljs-keyword">int</span> color)</span></span>{<font></font>
    midi::Message msg;<font></font>
    msg.setNote(note);<font></font>
    msg.setValue(color);<font></font>
    msg.setChannel(<span class="hljs-number">1</span>);<font></font>
    msg.setStatus(<span class="hljs-number">0x9</span>);<font></font>
    midiOutput.sendMessage(msg);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lightOff</span><span class="hljs-params">(<span class="hljs-keyword">int</span> note)</span></span>{<font></font>
    midi::Message msg;<font></font>
    msg.setNote(note);<font></font>
    msg.setValue(<span class="hljs-number">0</span>);<font></font>
    msg.setChannel(<span class="hljs-number">1</span>);<font></font>
    msg.setStatus(<span class="hljs-number">0x8</span>);<font></font>
    midiOutput.sendMessage(msg);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬è¿æ¥æ˜¾ç¤ºå™¨</font></font></b></h2><br>
<img src="https://habrastorage.org/webt/os/yl/kv/osylkvou5ba8_aoa3rwhst94uiu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦è¿æ¥æ˜¾ç¤ºå™¨ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨USBã€‚</font><font style="vertical-align: inherit;">æ§åˆ¶å™¨æœ¬èº«ä¸çŸ¥é“å¦‚ä½•ç»˜åˆ¶ä»»ä½•å†…å®¹ï¼Œä¹Ÿä¸äº†è§£å›¾å½¢ã€‚</font><font style="vertical-align: inherit;">ä»–åªå¸Œæœ›è‡³å°‘æ¯2ç§’å‘é€ä¸€ä¸ª160x960åƒç´ çš„å¸§ã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰æ¸²æŸ“éƒ½åœ¨è®¡ç®—æœºä¾§é¢è¿›è¡Œã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‰ç…§æ–‡æ¡£ä¸­çš„è¯´æ˜</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿æ¥å¹¶æ‰“å¼€USBè®¾å¤‡</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¾ç¤ºè¿æ¥ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> _MSC_VER</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> _WIN32</span><font></font>
<font></font>
<span class="hljs-comment">// see following link for a discussion of the</span>
<span class="hljs-comment">// warning suppression:</span>
<span class="hljs-comment">// http://sourceforge.net/mailarchive/forum.php?</span>
<span class="hljs-comment">// thread_name=50F6011C.2020000%40akeo.ie&amp;forum_name=libusbx-devel</span><font></font>
<font></font>
<span class="hljs-comment">// Disable: warning C4200: nonstandard extension used:</span>
<span class="hljs-comment">// zero-sized array in struct/union</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> <span class="hljs-meta-keyword">warning</span>(disable:4200)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;windows.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> __linux__</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libusb-1.0/libusb.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"libusb.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ABLETON_VENDOR_ID 0x2982</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PUSH2_PRODUCT_ID  0x1967</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> libusb_device_handle* <span class="hljs-title">open_push2_device</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">int</span> result;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> ((result = libusb_init(<span class="hljs-literal">NULL</span>)) &lt; <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"error: [%d] could not initilialize usblib\n"</span>, result);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
  }<font></font>
<font></font>
  libusb_set_debug(<span class="hljs-literal">NULL</span>, LIBUSB_LOG_LEVEL_ERROR);<font></font>
<font></font>
  libusb_device** devices;<font></font>
  <span class="hljs-keyword">ssize_t</span> count;<font></font>
  count = libusb_get_device_list(<span class="hljs-literal">NULL</span>, &amp;devices);
  <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"error: [%ld] could not get usb device list\n"</span>, count);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<font></font>
  }<font></font>
<font></font>
  libusb_device* device;<font></font>
  libusb_device_handle* device_handle = <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
  <span class="hljs-keyword">char</span> ErrorMsg[<span class="hljs-number">128</span>];<font></font>
<font></font>
  <span class="hljs-comment">// set message in case we get to the end of the list w/o finding a device</span>
  <span class="hljs-built_in">sprintf</span>(ErrorMsg, <span class="hljs-string">"error: Ableton Push 2 device not found\n"</span>);<font></font>
<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; (device = devices[i]) != <span class="hljs-literal">NULL</span>; i++)<font></font>
  {<font></font>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">libusb_device_descriptor</span> <span class="hljs-title">descriptor</span>;</span>
    <span class="hljs-keyword">if</span> ((result = libusb_get_device_descriptor(device, &amp;descriptor)) &lt; <span class="hljs-number">0</span>)<font></font>
    {<font></font>
      <span class="hljs-built_in">sprintf</span>(ErrorMsg,
        <span class="hljs-string">"error: [%d] could not get usb device descriptor\n"</span>, result);
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (descriptor.bDeviceClass == LIBUSB_CLASS_PER_INTERFACE<font></font>
      &amp;&amp; descriptor.idVendor == ABLETON_VENDOR_ID<font></font>
      &amp;&amp; descriptor.idProduct == PUSH2_PRODUCT_ID)<font></font>
    {<font></font>
      <span class="hljs-keyword">if</span> ((result = libusb_open(device, &amp;device_handle)) &lt; <span class="hljs-number">0</span>)<font></font>
      {<font></font>
        <span class="hljs-built_in">sprintf</span>(ErrorMsg,
          <span class="hljs-string">"error: [%d] could not open Ableton Push 2 device\n"</span>, result);<font></font>
      }<font></font>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((result = libusb_claim_interface(device_handle, <span class="hljs-number">0</span>)) &lt; <span class="hljs-number">0</span>)<font></font>
      {<font></font>
        <span class="hljs-built_in">sprintf</span>(ErrorMsg,
          <span class="hljs-string">"error: [%d] could not claim interface 0 of Push 2 device\n"</span>, result);<font></font>
        libusb_close(device_handle);<font></font>
        device_handle = <span class="hljs-literal">NULL</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">else</span><font></font>
      {<font></font>
        <span class="hljs-keyword">break</span>; <span class="hljs-comment">// successfully opened</span><font></font>
      }<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (device_handle == <span class="hljs-literal">NULL</span>)<font></font>
  {<font></font>
    <span class="hljs-built_in">printf</span>(ErrorMsg);<font></font>
  }<font></font>
<font></font>
  libusb_free_device_list(devices, <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> device_handle;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">close_push2_device</span><span class="hljs-params">(libusb_device_handle* device_handle)</span>
</span>{<font></font>
  libusb_release_interface(device_handle, <span class="hljs-number">0</span>);<font></font>
  libusb_close(device_handle);<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦å‘é€å¸§ï¼Œå¿…é¡»é¦–å…ˆå‘é€ä¸€ä¸ª16å­—èŠ‚çš„æ ‡å¤´ï¼Œç„¶åå‘é€160è¡Œï¼Œæ¯è¡Œ960ä¸ª16ä½æ•°å­—ã€‚</font><font style="vertical-align: inherit;">åŒæ—¶ï¼Œæ ¹æ®æ–‡æ¡£ï¼Œå­—ç¬¦ä¸²ä¸åº”è¯¥ä»¥1920å­—èŠ‚ä¼ è¾“ï¼Œè€Œåº”è¯¥ä»¥2048å­—èŠ‚çš„æ•°æ®åŒ…ä¼ è¾“ï¼Œå¹¶ä»¥é›¶è¿›è¡Œè¡¥å……ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸§ä¼ è¾“ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Push2Display</span> :</span> FramebufferWidget {<font></font>
<font></font>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> frame_header[<span class="hljs-number">16</span>] = {
          <span class="hljs-number">0xFF</span>, <span class="hljs-number">0xCC</span>, <span class="hljs-number">0xAA</span>, <span class="hljs-number">0x88</span>,
          <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>,
          <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>,
          <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span> <font></font>
    };<font></font>
<font></font>
    libusb_device_handle* device_handle;<font></font>
<font></font>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>* image;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sendDisplay</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> * image)</span> </span>{
        <span class="hljs-keyword">int</span> actual_length;<font></font>
     <font></font>
        libusb_bulk_transfer(device_handle, PUSH2_BULK_EP_OUT, frame_header, <span class="hljs-keyword">sizeof</span>(frame_header), &amp;actual_length, TRANSFER_TIMEOUT);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">160</span>; i++)<font></font>
            libusb_bulk_transfer(device_handle, PUSH2_BULK_EP_OUT, &amp;image[(<span class="hljs-number">159</span> - i)*<span class="hljs-number">1920</span>], <span class="hljs-number">2048</span>, &amp;actual_length, TRANSFER_TIMEOUT);<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨åªå‰©ä¸‹ç»˜åˆ¶å¸§å¹¶å°†å…¶å†™å…¥ç¼“å†²åŒºã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨</font><font style="vertical-align: inherit;">å®ç°</font><i><font style="vertical-align: inherit;">drawFramebuffer</font></i><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FramebufferWidget</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¼€ç®±å³ç”¨çš„VCV Rackä½¿ç”¨</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">nanovg</font></a><font style="vertical-align: inherit;">åº“</font><font style="vertical-align: inherit;">ï¼Œå› æ­¤åœ¨æ­¤å¤„ç¼–å†™å›¾å½¢éå¸¸å®¹æ˜“ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä»å…¨å±€å˜é‡APPä¸­äº†è§£å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡å¹¶ä¿å­˜å…¶çŠ¶æ€ã€‚</font><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„160x960æ¡†æ¶ï¼Œå¹¶ä½¿ç”¨</font><i><font style="vertical-align: inherit;">draw</font></i><font style="vertical-align: inherit;">æ–¹æ³•è¿›è¡Œ</font><i><font style="vertical-align: inherit;">ç»˜åˆ¶</font></i><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¹‹åï¼Œå°†å¸§ç¼“å†²åŒºå¤åˆ¶åˆ°å°†é€šè¿‡USBå‘é€çš„é˜µåˆ—ï¼Œç„¶åè¿”å›ä¸Šä¸‹æ–‡çŠ¶æ€ã€‚</font><font style="vertical-align: inherit;">æœ€åï¼Œè®¾ç½®</font><i><font style="vertical-align: inherit;">dirty</font></i><font style="vertical-align: inherit;">æ ‡å¿—ï¼Œ</font><font style="vertical-align: inherit;">ä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ¸²æŸ“æ—¶ï¼ŒVCVå¼•æ“ä¸ä¼šå¿˜è®°æ›´æ–°æˆ‘ä»¬çš„å°éƒ¨ä»¶ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸§æ¸²æŸ“ä»£ç </font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">drawFramebuffer</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{<font></font>
<font></font>
    NVGcontext* vg = APP-&gt;window-&gt;vg;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (display_connected) {<font></font>
        nvgSave(vg);<font></font>
	glViewport(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">960</span>, <span class="hljs-number">160</span>);<font></font>
        glClearColor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
        glClear(GL_COLOR_BUFFER_BIT|GL_STENCIL_BUFFER_BIT);<font></font>
<font></font>
	nvgBeginFrame(vg, <span class="hljs-number">960</span>,  <span class="hljs-number">160</span>, <span class="hljs-number">1</span>);<font></font>
        draw(vg);<font></font>
        nvgEndFrame(vg);<font></font>
<font></font>
        glReadPixels(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">960</span>, <span class="hljs-number">160</span>, GL_RGB, GL_UNSIGNED_SHORT_5_6_5, image); <font></font>
<font></font>
        <span class="hljs-comment">//  XOR   ,  </span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80</span>*<span class="hljs-number">960</span>; i ++){<font></font>
            image[i * <span class="hljs-number">4</span>] ^= <span class="hljs-number">0xE7</span>;<font></font>
	    image[i * <span class="hljs-number">4</span> + <span class="hljs-number">1</span>] ^= <span class="hljs-number">0xF3</span>;<font></font>
            image[i * <span class="hljs-number">4</span> + <span class="hljs-number">2</span>] ^= <span class="hljs-number">0xE7</span>;<font></font>
	    image[i * <span class="hljs-number">4</span> + <span class="hljs-number">3</span>] ^= <span class="hljs-number">0xFF</span>;<font></font>
        }<font></font>
	    	<font></font>
	sendDisplay(image);<font></font>
<font></font>
	nvgRestore(vg);<font></font>
    }<font></font>
<font></font>
    dirty = <span class="hljs-literal">true</span>;<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº¤äº’é€»è¾‘å’Œå‚æ•°æ˜ å°„</font></font></b></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºæˆ‘çš„ä»»åŠ¡ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿåˆ‡æ¢å®šåºå™¨ä¸­è®°å½•çš„æ¨¡å¼ï¼Œå¹¶åŒæ—¶æ§åˆ¶æ¯ç»„æ¨¡å¼è‡ªå·±çš„ä¸€ç»„ç‰¹å®šå‚æ•°ã€‚</font><font style="vertical-align: inherit;">é€šè¿‡æ˜ å°„ï¼Œæˆ‘äº†è§£äº†ä¸€ä¸ªæ¨¡å—çš„å‚æ•°ä¸å¦ä¸€æ¨¡å—æˆ–Midiæ§åˆ¶å™¨çš„å‚æ•°çš„ç»‘å®šã€‚</font><font style="vertical-align: inherit;">æˆ‘å‘ç°å¾ˆå°‘æœ‰å…³äºå¦‚ä½•è¿›è¡Œç²¾ç¾æ˜ å°„çš„ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»VCVå†…ç½®çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIDI Map</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å—ä¸­è·å–äº†å®ç°è¯¥æ˜ å°„çš„å¤§éƒ¨åˆ†ä»£ç </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç®€è€Œè¨€ä¹‹ï¼Œå¯¹äºæ¯ç»„å‚æ•°ï¼Œéƒ½ä¼š</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä¸­</font><i><font style="vertical-align: inherit;">åˆ›å»º</font></i><font style="vertical-align: inherit;">ä¸€ä¸ªç‰¹æ®Šçš„</font><i><font style="vertical-align: inherit;">ParamHandle</font></i><font style="vertical-align: inherit;">å¯¹è±¡</font><font style="vertical-align: inherit;">ï¼Œè¯¥</font><font style="vertical-align: inherit;">å¯¹è±¡</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡æ‹æ–</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘Šè¯‰å¼•æ“ä»€ä¹ˆä¸ä»€ä¹ˆç›¸å…³ã€‚</font></font><br>
<br>
<h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></b></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯æˆ‘æœ€åå¾—åˆ°çš„ä¸€ä¸ªæ¨¡å—ã€‚</font><font style="vertical-align: inherit;">é™¤äº†å°†midiè½¬æ¢ä¸ºCVçš„æ ‡å‡†æ–¹æ³•å¤–ï¼Œå®ƒè¿˜å…è®¸æ‚¨å¯¹æ‰“å‡»å«è¿›è¡Œåˆ†ç»„ï¼Œä¸ºå…¶åˆ†é…é¢œè‰²ï¼Œä»¥åŠå°†ä»»æ„æ¨¡å—å‚æ•°ä¸Pushç¼–ç å™¨ç›¸å…³è”ï¼Œåœ¨æ§åˆ¶å™¨æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºå…¶åç§°å’Œå€¼ã€‚</font><font style="vertical-align: inherit;">åœ¨ä¸‹é¢çš„è§†é¢‘ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ä»–çš„æ¦‚è¿°ï¼Œåœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤è§†é¢‘ä¸­ï¼Œæ‚¨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥çœ‹åˆ°å®é™…æ“ä½œã€‚</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OhdxXv6uHF0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Œæ•´ä»£ç å¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ­¤å¤„è·å¾—</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬è®¾æ³•ä»…åœ¨Linuxï¼ˆUbuntu 18.04ï¼‰ä¸‹å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œåœ¨MacOSä¸Šï¼Œç”±äºlibusbçš„ç‰¹æ€§å¯¼è‡´æ˜¾ç¤ºå™¨æ— æ³•è¿æ¥ï¼Œå¹¶ä¸”midiç•Œé¢å‡ºç°äº†å¥‡æ€ªçš„å»¶è¿Ÿã€‚</font><font style="vertical-align: inherit;">å°½ç®¡å¦‚æ­¤ï¼ŒVCV Rackä½œä¸ºæ¡†æ¶å’Œæ¨¡å—åŒ–DAWéƒ½ç»™äººç•™ä¸‹äº†å¾ˆå¥½çš„å°è±¡ï¼Œæˆ‘å¸Œæœ›VCVèƒ½å¤Ÿç»§ç»­å‘å±•ï¼Œå¹¶ä¸”æœ¬æ–‡å°†å¸®åŠ©å…¶ä»–äººä¸ºæ­¤ç¼–å†™è‡ªå·±çš„æ¨¡å—ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN491232/index.html">RPA +æœºå™¨å­¦ä¹ =æ™ºèƒ½è‡ªåŠ¨åŒ–</a></li>
<li><a href="../zh-CN491234/index.html">ä½¿ç”¨SOLIDWORKSè¿›è¡Œ3Dæ‰“å°é›¶ä»¶å»ºæ¨¡çš„ä¸‰ä¸ªæŠ€å·§</a></li>
<li><a href="../zh-CN491236/index.html">.NETä¸­çš„å¼‚æ­¥ç¼–ç¨‹ï¼šæœ€ä½³å®è·µ</a></li>
<li><a href="../zh-CN491238/index.html">é—ä¼ å¯†ç åˆ†æII</a></li>
<li><a href="../zh-CN491240/index.html">é€šå¾€äº‘ç«¯çš„é“è·¯ï¼šæ˜¨å¤©å’Œä»Šå¤©</a></li>
<li><a href="../zh-CN491246/index.html">DEFCONä¼šè®®27.æ‚¨çš„è½¦æ˜¯æˆ‘çš„è½¦ã€‚ç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN491250/index.html">LEDç¯é«˜æ–¯åŸºæœ¬</a></li>
<li><a href="../zh-CN491252/index.html">JSON.stringifyï¼ˆï¼‰çš„5ä¸ªé²œä¸ºäººçŸ¥çš„åŠŸèƒ½</a></li>
<li><a href="../zh-CN491256/index.html">åœ¨NXPçš„iMX8ä¸Šå¼€å‘æ¨¡å—ã€‚DDRè·Ÿè¸ªä¼ è¾“çš„åŠŸèƒ½</a></li>
<li><a href="../zh-CN491258/index.html">ITå¥³å­©ï¼Œä½ æ¥è‡ªå“ªé‡Œï¼Ÿå»ºç«‹åœ°å›¾</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>