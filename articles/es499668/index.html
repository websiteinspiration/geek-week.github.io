<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏽 ✍🏻 🤟 Road to Hell Dependencias de JavaScript 👨🏼‍🔧 🎽 👳🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada proyecto de JavaScript comienza con buenas intenciones, es decir, que sus creadores se prometen a sí mismos no usar demasiados paquetes NPM duran...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Road to Hell Dependencias de JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499668/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada proyecto de JavaScript comienza con buenas intenciones, es decir, que sus creadores se prometen a sí mismos no usar demasiados paquetes NPM durante su desarrollo. Pero incluso si los desarrolladores hacen esfuerzos considerables para cumplir esta promesa, los paquetes de NPM penetran gradualmente en sus proyectos. El tamaño del archivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crece con el tiempo. Y con la </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalación de dependencias, se produce un verdadero horror, expresado en adiciones y eliminaciones de paquetes, especialmente notable con el próximo PR ... </font><font style="vertical-align: inherit;">
"Todo está bien", dice el líder del equipo. El resto del equipo asiente de acuerdo. ¿Qué otra cosa hacer? Todos disfrutamos el hecho de que el ecosistema de JavaScript está vivo y bien. No necesitamos reinventar la rueda cada vez e intentar resolver los problemas que ya han sido resueltos por la comunidad de código abierto.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/be/cf/ky/becfkyhkcfavrlygimyyrliz9t4.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponga que va a hacer un blog y quiere usar Gatsby.js. </font><font style="vertical-align: inherit;">Intente agregar este generador de sitio basado en su proyecto. </font><font style="vertical-align: inherit;">Ahora felicidades. </font><font style="vertical-align: inherit;">Su proyecto solo tenía 19,000 dependencias adicionales. </font><font style="vertical-align: inherit;">¿Esto es normal? </font><font style="vertical-align: inherit;">¿Qué tan complejo puede volverse un árbol de dependencia de JavaScript? </font><font style="vertical-align: inherit;">¿Cómo se convierte un árbol de dependencias en un infierno? </font><font style="vertical-align: inherit;">Vamos a resolverlo.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué es un paquete de JavaScript?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NPM (Node Package Manager, Node Package Manager) almacena el registro de paquetes más grande del mundo. </font><font style="vertical-align: inherit;">Estos son paquetes de JavaScript. </font><font style="vertical-align: inherit;">NPM es más que RubyGems, PyPi y Maven combinados. </font><font style="vertical-align: inherit;">Esta conclusión se puede hacer sobre la base del análisis de los datos del proyecto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module Counts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que monitorea el número de paquetes en los registros populares.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/d83/158/259d831584b0a9a5d1fd6226e3f799b0.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datos sobre la cantidad de paquetes en los registros populares</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Puede pensar que en este gráfico se representan cantidades muy grandes de código. </font><font style="vertical-align: inherit;">De la manera que es. </font><font style="vertical-align: inherit;">Para convertir un proyecto en un paquete NPM, este paquete debe tener un archivo</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dicho paquete puede enviarse al registro NPM.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué es package.json?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas son las tareas que resuelve </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enumera los paquetes de los que depende su proyecto (esta es una lista de dependencias del proyecto).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En él, usando las reglas de versiones semánticas, se establecen versiones de paquetes de dependencia que su proyecto puede usar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le permite reproducir el entorno necesario para que el paquete funcione y, como resultado, simplifica la transferencia del proyecto a otros desarrolladores.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un archivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede considerarse como un archivo </font></font><code>README</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bombeado con esteroides. </font><font style="vertical-align: inherit;">Aquí puede describir las dependencias de su paquete, aquí puede escribir scripts que se ejecutan durante el ensamblaje y las pruebas del proyecto. </font><font style="vertical-align: inherit;">El mismo archivo contiene información sobre la versión del proyecto especificada por su desarrollador y una descripción del proyecto. </font><font style="vertical-align: inherit;">Estamos particularmente interesados ​​en la posibilidad </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de especificar dependencias del proyecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quizás el hecho de que las dependencias del proyecto estén indicadas en este archivo parece algo alarmante. </font><font style="vertical-align: inherit;">Imagine que hay un paquete que depende de otro paquete, y este otro paquete depende de otro paquete. </font><font style="vertical-align: inherit;">Tal cadena de dependencias puede ser arbitrariamente larga. </font><font style="vertical-align: inherit;">Por esta razón, instalar el único paquete, Gatsby.js, significa equipar el proyecto con 19,000 dependencias adicionales.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de dependencia en package.json</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender mejor cómo crecen las listas de dependencias del proyecto con el tiempo, hablemos sobre los diferentes tipos de dependencias que puede tener un proyecto. </font><font style="vertical-align: inherit;">A saber, </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se pueden encontrar </font><font style="vertical-align: inherit;">las </font><font style="vertical-align: inherit;">siguientes secciones que describen varias dependencias:</font></font><br>
<br>
<ul>
<li><code>dependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - estas son dependencias ordinarias, cuya funcionalidad se utiliza en el proyecto y a las que se accede desde su código.</font></font></li>
<li><code>devDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Estas son dependencias de desarrollo. </font><font style="vertical-align: inherit;">Por ejemplo, la biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">más bonita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilizada para formatear código.</font></font></li>
<li><code>peerDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - si las dependencias se escriben en esta sección, el desarrollador del paquete informa al que lo instalará que necesitará una versión específica del paquete especificado en esta sección.</font></font></li>
<li><code>optionalDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - enumeran dependencias opcionales, como la imposibilidad de instalación que no violará el proceso de instalación del paquete.</font></font></li>
<li><code>bundledDependencies</code> —    ,    .     ,    NPM,    ,             .</li>
</ul><br>
<h2><font color="#3AC1EF">   package-lock.json</font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos sabemos que el archivo </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en el curso del trabajo en el proyecto, sufre cambios constantemente. Se le quita algo, se le agrega algo. Esto es especialmente notable cuando se ve PR que contiene una versión actualizada de este archivo. A menudo lo damos por sentado. Un archivo se </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">genera automáticamente cada vez que cambia un archivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o carpeta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esto le permite mantener el contenido del árbol de dependencias exactamente como estaba cuando instaló las dependencias del proyecto. Esto permite, al instalar el proyecto, reproducir el árbol de dependencias. Esto resuelve el problema de tener diferentes versiones del mismo paquete de diferentes desarrolladores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere un proyecto cuyas dependencias incluyen React. La entrada correspondiente está disponible en </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si miras el archivo</font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de este proyecto, entonces puede ver algo como lo siguiente:</font></font><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"react"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"version"</span>: <span class="hljs-string">"16.13.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"resolved"</span>: <span class="hljs-string">"https://registry.npmjs.org/react/-/react-16.13.0.tgz"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"integrity"</span>: <span class="hljs-string">"sha512-TSavZz2iSLkq5/oiE7gnFzmURKZMltmi193rm5HEoUDAXpzT9Kzw6oNZnGoai/4+fUnm7FqS5dwgUL34TujcWQ=="</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"requires"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"loose-envify"</span>: <span class="hljs-string">"^1.1.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"object-assign"</span>: <span class="hljs-string">"^4.1.1"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"prop-types"</span>: <span class="hljs-string">"^15.6.2"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un archivo </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es una lista grande de dependencias del proyecto. </font><font style="vertical-align: inherit;">Aquí están las versiones de dependencia, las rutas (URI) a los módulos, los hashes utilizados para verificar la integridad del módulo y los paquetes necesarios para este módulo. </font><font style="vertical-align: inherit;">Si lee este archivo, puede encontrar registros de todos los paquetes que React necesita. </font><font style="vertical-align: inherit;">Aquí es donde reside el verdadero infierno de las dependencias. </font><font style="vertical-align: inherit;">Todo lo que necesita el proyecto se describe aquí.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprender las dependencias de Gatsby.js</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cómo es que, habiendo establecido solo una dependencia, agregamos hasta 19,000 dependencias al proyecto? </font><font style="vertical-align: inherit;">Se trata de dependencias de dependencia. </font><font style="vertical-align: inherit;">Por eso tenemos lo que tenemos:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm install --save gatsby<font></font>
<font></font>
...<font></font>
<font></font>
+ gatsby@2.19.28<font></font>
added 1 package from 1 contributor, removed 9 packages, updated 10 packages and audited 19001 packages <span class="hljs-keyword">in</span> 40.382s
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si observa </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, allí solo puede encontrar una dependencia. Pero si lo miras </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, resulta que frente a nosotros hay un monstruo de casi 14 kilobytes. Una respuesta más detallada sobre el significado de todas esas líneas de código significa lo que </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se puede encontrar en el archivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el repositorio de Gatsby.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Hay muchas dependencias directas, a saber, de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acuerdo con los cálculos de npm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , 132. Si cada una de estas dependencias tiene al menos una dependencia más, entonces el número total de dependencias del proyecto se duplicará, y tendrá 264 dependencias. Por supuesto, en el mundo real esto no es así. Cada dependencia directa del proyecto tiene más de 1 dependencia inherente. Como resultado, la lista de dependencias del proyecto es muy larga.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, nos interesaremos cuántas veces se </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usa la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> biblioteca </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">lodash</font></a><font style="vertical-align: inherit;"> como dependencia para otros paquetes </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm ls lodash<font></font>
example-js-package@1.0.0<font></font>
└─┬ gatsby@2.19.28<font></font>
&nbsp;&nbsp;├─┬ @babel/core@7.8.6<font></font>
&nbsp;&nbsp;│ ├─┬ @babel/generator@7.8.6<font></font>
&nbsp;&nbsp;│ │ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ ├─┬ @babel/types@7.8.6<font></font>
&nbsp;&nbsp;│ │ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;├─┬ @babel/traverse@7.8.6<font></font>
&nbsp;&nbsp;│ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;├─┬ @typescript-eslint/parser@2.22.0<font></font>
&nbsp;&nbsp;│ └─┬ @typescript-eslint/typescript-estree@2.22.0<font></font>
&nbsp;&nbsp;│ &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;├─┬ babel-preset-gatsby@0.2.29<font></font>
&nbsp;&nbsp;│ └─┬ @babel/preset-env@7.8.6<font></font>
&nbsp;&nbsp;│ &nbsp; ├─┬ @babel/plugin-transform-block-scoping@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; │ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ &nbsp; ├─┬ @babel/plugin-transform-classes@7.8.6<font></font>
&nbsp;&nbsp;│ &nbsp; │ └─┬ @babel/helper-define-map@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; │ &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ &nbsp; ├─┬ @babel/plugin-transform-modules-amd@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; │ └─┬ @babel/helper-module-transforms@7.8.6<font></font>
&nbsp;&nbsp;│ &nbsp; │ &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ &nbsp; └─┬ @babel/plugin-transform-sticky-regex@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; &nbsp; └─┬ @babel/helper-regex@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; &nbsp; &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, la mayoría de estas dependencias están representadas por la misma versión de lodash. </font><font style="vertical-align: inherit;">Y con este enfoque, </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solo habrá una carpeta de biblioteca lodash. </font><font style="vertical-align: inherit;">Es cierto que este no suele ser el caso. </font><font style="vertical-align: inherit;">A veces, diferentes paquetes necesitan diferentes versiones del mismo paquete. </font><font style="vertical-align: inherit;">Es por eso que aparecieron muchos chistes sobre el gran tamaño de la carpeta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En nuestro caso, sin embargo, no todo es tan malo:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh node_modules<font></font>
200M&nbsp; &nbsp; node_modules<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
200 megabytes no es tan malo. </font><font style="vertical-align: inherit;">Vi cómo el tamaño de esta carpeta alcanza fácilmente los 700 MB. </font><font style="vertical-align: inherit;">Si está interesado en aprender qué módulos ocupan más espacio, puede ejecutar el siguiente comando:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh ./node_modules/* | sort -nr | grep <span class="hljs-string">'\dM.*'</span><font></font>
&nbsp;17M&nbsp; &nbsp; ./node_modules/rxjs<font></font>
8.4M&nbsp; &nbsp; ./node_modules/@types<font></font>
7.4M&nbsp; &nbsp; ./node_modules/core-js<font></font>
6.8M&nbsp; &nbsp; ./node_modules/@babel<font></font>
5.4M&nbsp; &nbsp; ./node_modules/gatsby<font></font>
5.2M&nbsp; &nbsp; ./node_modules/eslint<font></font>
4.8M&nbsp; &nbsp; ./node_modules/lodash<font></font>
3.6M&nbsp; &nbsp; ./node_modules/graphql-compose<font></font>
3.6M&nbsp; &nbsp; ./node_modules/@typescript-eslint<font></font>
3.5M&nbsp; &nbsp; ./node_modules/webpack<font></font>
3.4M&nbsp; &nbsp; ./node_modules/moment<font></font>
3.3M&nbsp; &nbsp; ./node_modules/webpack-dev-server<font></font>
3.2M&nbsp; &nbsp; ./node_modules/caniuse-lite<font></font>
3.1M&nbsp; &nbsp; ./node_modules/graphql<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sí, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rxjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un paquete insidioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay un comando simple que ayuda a reducir el tamaño de la carpeta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y simplificar su estructura:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm dedup<font></font>
moved 1 package and audited 18701 packages <span class="hljs-keyword">in</span> 4.622s<font></font>
<font></font>
51 packages are looking <span class="hljs-keyword">for</span> funding<font></font>
&nbsp;&nbsp;run `npm fund` <span class="hljs-keyword">for</span> details<font></font>
<font></font>
found 0 vulnerabilities<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deduplicación,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm intenta simplificar la estructura del árbol de dependencias al encontrar las dependencias utilizadas por otras dependencias y moverlas para que puedan compartirse. Esto se aplica a nuestro ejemplo lodash. </font></font><code>lodash @4.17.15</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, </font><font style="vertical-align: inherit;">se utilizan muchos paquetes </font><font style="vertical-align: inherit;">para garantizar su operatividad, es suficiente instalar esta versión de la biblioteca solo una vez. Por supuesto, esta es la situación en la que nos encontramos desde el principio, solo estableciendo dependencias. Si en el proceso de trabajar en un proyecto </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agrega nuevas dependencias, a veces se recomienda recordar al equipo </font></font><code>npm dedup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si usa el administrador de paquetes de hilo, hay un comando similar que parece </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deducir hilo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero, de hecho, no es necesario, ya que la optimización de dependencia se realiza automáticamente cuando se ejecuta el comando </font></font><code>yarn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualización de dependencia</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Interesado en una representación gráfica de las dependencias de su proyecto? </font><font style="vertical-align: inherit;">Si es así, puede crear dicha presentación utilizando herramientas especiales. </font><font style="vertical-align: inherit;">Consideremos algunos de ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente es un resultado de visualización de dependencia obtenido usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm.anvaka.com/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/f5d/373/dfbf5d37377bd62f4ea5cf422de62c74.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualización de dependencias usando npm.anvaka.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aquí puede ver las dependencias de las dependencias del paquete de proyecto Gatsby.js. El resultado es similar a una gran web. El proyecto Gatsby.js tiene tantas dependencias que esta "web" casi "colgó" mi navegador.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ahora</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , si está interesado, un enlace a este diagrama. Se puede presentar en forma 3D.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay una visualización hecha usando</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm.broofa.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/285/cd6/c52/285cd6c52a00d9e87a7bc2095df6023f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un fragmento de una visualización de dependencia realizada con npm.broofa.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esto es similar a un diagrama de flujo. </font><font style="vertical-align: inherit;">Ella, para Gatsby.js, resulta ser muy complicada. </font><font style="vertical-align: inherit;">Puedes echarle un vistazo</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Elementos del circuito pueden ser de color basado en estimaciones de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npms.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Puedes subir tu propio archivo al sitio</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La herramienta</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Package Phobia le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permite saber cuánto espacio necesita antes de instalar un paquete.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25c/d26/ae4/25cd26ae4fc708f0c6900c5ad3a5dead.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Información del paquete recibida utilizando la fobia del paquete</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aquí puede averiguar sobre el tamaño del paquete publicado y cuánto espacio en disco ocupará después de la instalación.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En pocas palabras: con un gran poder viene una gran responsabilidad</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, quiero decir que JavaScript y NPM son excelentes herramientas. </font><font style="vertical-align: inherit;">Lo bueno es que los desarrolladores modernos tienen la oportunidad de usar un gran conjunto de dependencias. </font><font style="vertical-align: inherit;">Ejecutar el comando </font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para evitar escribir un par de líneas de código es tan fácil que a veces nos olvidamos de las consecuencias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que ha leído hasta este punto, debe tener una comprensión más completa de las características de la estructura de árbol de dependencia npm-project. </font><font style="vertical-align: inherit;">Si agrega una biblioteca al proyecto que es muy grande, o si simplemente explora las dependencias de su proyecto, siempre puede aprovechar lo que hemos discutido aquí y analizar las dependencias. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡Queridos lectores!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¿Desea utilizar la menor cantidad de dependencias posible en sus proyectos npm?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es499656/index.html">Simulación de controlador de temperatura PID</a></li>
<li><a href="../es499658/index.html">¿Un hombre trabajador en lugar de un probador? ¿Vale la pena estudiar Selenium en 2020?</a></li>
<li><a href="../es499662/index.html">Raíz de confianza para IoT y otras tendencias de seguridad de IoT</a></li>
<li><a href="../es499664/index.html">Portar APIs a TypeScript como un solucionador de problemas</a></li>
<li><a href="../es499666/index.html">PEP 572 (expresiones de asignación en python 3.8)</a></li>
<li><a href="../es499670/index.html">Я перехожу на JavaScript</a></li>
<li><a href="../es499674/index.html">Otro paso para las computadoras ópticas</a></li>
<li><a href="../es499676/index.html">Más de 90 herramientas útiles para Kubernetes: implementación, administración, monitoreo, seguridad y más</a></li>
<li><a href="../es499680/index.html">Learning Kubernetes: Básico 14-16 de mayo, Avanzado 18-20 de mayo</a></li>
<li><a href="../es499682/index.html">¿Qué puedo obtener en el hackathon, excepto un premio en efectivo?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>