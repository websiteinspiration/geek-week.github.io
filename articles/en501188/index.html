<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº üë©üèΩ‚Äç‚úàÔ∏è ü§üüèº How to process satellite imagery with Sen2Cor üê® üëâüèº üë™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sen2Cor - a program for processing images taken from the Sentinel-2 satellite. The article describes how to install, run, and configure it.
 
 
 In th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to process satellite imagery with Sen2Cor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501188/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sen2Cor - a program for processing images taken from the Sentinel-2 satellite. </font><font style="vertical-align: inherit;">The article describes how to install, run, and configure it.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/51/cd/2o/51cd2oxaws3nq4wtevldzstck-e.jpeg" alt="Satellite imagery before and after processing with Sen2Cor"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the magistracy, I needed to make atmospheric correction of images from the Sentinel-2 satellite. </font><font style="vertical-align: inherit;">Master in ecology, so it was possible not to delve into physics and mathematics, but to use a ready-made tool. </font><font style="vertical-align: inherit;">Such a tool was found - Sen2Cor.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is Sentinel-2</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">Sentinel-2</a> ‚Äî  ,     (ESA)  2015 .   13 ,           .   ‚Äî  ,     .     100  100 .    ‚Äî 10   .    ‚Äî       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">Copernicus Open Access Hub</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">USGS Earth Explorer</a>.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The problem is that there is no clear instruction for Sen2Cor. The authors of geoinformatics textbooks do not crawl into such jungles as working with specific programs, and the authors of scientific articles, on the contrary, believe that image correction is too simple a part of the technique, therefore they do not describe it in detail. On sites "for dummies" (and not quite for dummies), Sen2Cor is also not written about. The official documentation is confusing: suffice it to say that the ‚ÄúInstallation‚Äù section on the 26th page of the ‚ÄúUser Guide‚Äù immediately refers to the 60th page of Release Notes. It took me a while to figure it out.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I decided to write an understandable guide to installing, starting and configuring Sen2Cor. The manual is aimed at biologists, ecologists, agricultural specialists, and all those who may need satellite image processing, but for whom it is not the main task. In fact, I share my own experience. I do not guarantee absolute correctness and completeness. Geoinformatics specialists, I think, will advise me something. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Strictly speaking, Sen2Cor makes not only an atmospheric correction, but also a correction for the angle of the Sun and the terrain, as well as a thematic classification (scene classification), but for me the most important thing was the atmospheric correction. Therefore, for simplicity, I sometimes write ‚Äúatmospheric correction‚Äù instead of ‚Äúprocessing‚Äù, although this is inaccurate.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sen2Cor works in three modes: as a standalone console application, as a plugin in the Sentinel-2 Toolbox and as a console application used in PDGS (Payload Data Ground Segment). PDGS is a ground-based data center received from satellites. He is in Italy at a research institute. Theoretically, you can run Sen2Cor in the same mode in which it is launched in the data center, but to run you need data that just can not be downloaded on the Internet, so we will not consider this option. Sentinel-2 Tolobox is also bypassed, because I did not work with this program. It has a graphical interface, so I believe that understanding her work is not difficult. So, this article describes how to use Sen2Cor in console mode.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sen2Cor runs on 64-bit Windows, MacOS, and Linux. </font><font style="vertical-align: inherit;">I have Linux, so I will show the commands using Linux as an example. </font><font style="vertical-align: inherit;">However, the only difference is in the installers and in the file paths. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sen2Cor requires 4 GB of RAM. </font><font style="vertical-align: inherit;">If less, it will start, but may crash in the middle of processing. </font><font style="vertical-align: inherit;">The consumption of RAM depends on the resolution of the images taken, so if the memory is small and the program gives an error because of this, then you can start processing with a lower resolution. </font><font style="vertical-align: inherit;">How to do this is described below. </font><font style="vertical-align: inherit;">There are no similar strict requirements for the processor, but the weaker the processor, the more time the processing will take.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You need to download the installer and run it. Sen2Cor is written in Python, however, the interpreter and all necessary packages are in the installer, so you do not need to install Python yourself and configure the environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose we have a user user with a home directory </font></font><code>/home/user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Create a folder in the home directory </font></font><code>spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in which we will work with the pictures. The full path to the folder will be </font></font><code>/home/user/spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, download and run the installer. Open </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Sen2Cor page</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on the instrument site of the European Space Agency. There are two versions of the program: 2.5.5 and 2.8. Installing 2.8 is better: it consumes less RAM and contains less errors. Version 2.5.5 may be needed if you need to process pictures taken according to the old specifications. Click on "Sen2Cor v2.8". At the end of the page in the ‚ÄúStandalone Installers‚Äù section are links for downloading installers. Download the one that suits our operating system. In this case, it is ‚ÄúLinux installer: Sen2Cor-02.08.00-Linux64.run‚Äù. Save the file to </font></font><code>/home/user/spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, open the console, move to the directory </font></font><code>spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and run the installer.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">cd</span> ~/spaceshots<font></font>
$ ./Sen2Cor-02.08.00-Linux64.run<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By default, the program is installed in the current directory. </font><font style="vertical-align: inherit;">A folder is created in it </font></font><code>Sen2Cor-02.08.00-Linux64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, where all the program files are extracted. </font><font style="vertical-align: inherit;">By and large, the installation comes down to unpacking the archive. </font><font style="vertical-align: inherit;">In addition, in the home directory is created a folder for configuration files and logs: </font></font><code>/home/user/sen2cor/2.8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there are no errors, then a message should appear in the console </font></font><code>¬´Congratulations, Installation successful...¬ª</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and a suggestion to test the installation. </font><font style="vertical-align: inherit;">Let's make a test run:</font></font><br>
<br>
<pre><code class="bash hljs">$ /home/user/spaceshots/Sen2Cor-02.08.00-Linux64/bin/L2A_Process -h </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This command </font></font><code>/home/user/spaceshots/Sen2Cor-02.08.00-Linux64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains the directory where Sen2Cor was installed. </font><font style="vertical-align: inherit;">The folder </font></font><code>bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains the main executable files of the program, including the main file </font></font><code>L2A_Process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The option </font></font><code>-h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">says that you need to show the help page. </font><font style="vertical-align: inherit;">As a result of the command execution, the following should appear in the console:</font></font><br>
<br>
<pre><code class="bash hljs">usage: L2A_Process.py [-h] [--mode MODE] [--resolution {10,20,60}]<font></font>
                      [--datastrip DATASTRIP] [--tile TILE]<font></font>
                      [--output_dir OUTPUT_DIR] [--work_dir WORK_DIR]<font></font>
                      [--img_database_dir IMG_DATABASE_DIR]<font></font>
                      [--res_database_dir RES_DATABASE_DIR]<font></font>
                      [--processing_centre PROCESSING_CENTRE]<font></font>
                      [--archiving_centre ARCHIVING_CENTRE]<font></font>
                      [--processing_baseline PROCESSING_BASELINE] [--raw]<font></font>
                      [--tif] [--sc_only] [--cr_only] [--debug]<font></font>
                      [--GIP_L2A GIP_L2A] [--GIP_L2A_SC GIP_L2A_SC]<font></font>
                      [--GIP_L2A_AC GIP_L2A_AC] [--GIP_L2A_PB GIP_L2A_PB]<font></font>
                      input_dir<font></font>
<font></font>
Sentinel-2 Level 2A Processor (Sen2Cor). Version: 2.8.0, created: 2019.02.20,<font></font>
supporting Level-1C product version 14.2 - 14.5.<font></font>
<font></font>
‚Ä¶<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If it appeared, the installation went fine and the program is ready for use. </font><font style="vertical-align: inherit;">The only thing that still does not hurt to do is to simplify the launch of the program. </font><font style="vertical-align: inherit;">While you need to specify the full path of the file: </font></font><code>/home/user/spaceshots/Sen2Cor-02.08.00-Linux64/bin/L2A_Process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It is not comfortable. </font><font style="vertical-align: inherit;">It is much easier to write simply </font></font><code>L2A_Process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">However, if you do this right now, an error will appear:</font></font><br>
<br>
<pre><code class="bash hljs">$ L2A_Process<font></font>
bash: L2A_Process:   <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To fix the error and run Sen2Cor on command </font></font><code>L2A_Process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you need to add one command to the file </font></font><code>.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which is located in the home directory (in our case, at the address </font></font><code>/home/user/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">This is a hidden file, so before you open it, you need to enable the display of hidden files in the file manager. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Add the </font></font><code>.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">following lines to the </font><font style="vertical-align: inherit;">end of the file </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># Sen2Cor processor (v. 2.8.0)</span>
<span class="hljs-built_in">source</span> /home/user/spaceshots/Sen2Cor-02.08.00-Linux64/L2A_Bashrc
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first line is a comment to remember why the second is needed. </font><font style="vertical-align: inherit;">Each time the system starts, the second line executes the script contained in the file </font></font><code>L2A_Bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This script changes some environment variables so that the command </font></font><code>L2A_Process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">becomes accessible from everywhere, and you do not need to specify the full path to it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the changes to </font></font><code>.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">take effect, you need to return to the console and run the command</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">source</span> ~/.bashrc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can also change the place where the program will be installed. </font><font style="vertical-align: inherit;">To do this, you must specify the option when starting the installer </font></font><code>--target</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">For example, the command</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># ./Sen2Cor-02.08.00-Linux64.run --target /usr/share/sen2cor</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
will install Sen2Cor in </font></font><code>/usr/share/sen2cor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We run the command from the superuser, because an ordinary user, as a rule, cannot write files to </font></font><code>/usr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">However, in this case, then you will have to run Sen2Cor with superuser rights or change the access rights to </font></font><code>/usr/share/sen2cor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to install on MacOS and Windows</font></font></b>
                        <div class="spoiler_text"> MacOS    ,   Linux.<br>
<br>
 Windows  ‚Äî  zip-,   .    <code>L2A_Process</code>  <code>L2A_Process.bat</code>,       <code>bin</code>,     ,    :<br>
<br>
<pre><code class="bash hljs">C:\Users\user\spaceshots\Sen2Cor-02.08.00-Linux64/L2A_Process.bat -h</code></pre><br>
      Windows       : <code>:\Users\user\sen2cor\2.8</code>.      .<br>
<br>
       ,    <code>L2A_Process.bat</code>,  Windows      <code>L2A_Bashrc.bat</code>  <code>PATH</code>.<br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image processing</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we installed Sen2Cor and made it run on command </font></font><code>L2A_Process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Now make an atmospheric correction. Suppose that we have already downloaded and unpacked a satellite image into </font></font><code>/home/user/spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. I took a picture of the area west of Yekaterinburg on July 27, 2018. The snapshot file is called </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L1C_T40VFJ_A016162_20180727T071939.zip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . After unpacking, the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2A_MSIL1C_20180727T071621_N0206_R006_T40VFJ_20180727T092607.SAFE</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folder </font><i><font style="vertical-align: inherit;">appeared</font></i><font style="vertical-align: inherit;"> . Then for atmospheric correction you need to run the following command:</font></font><br>
<br>
<pre><code class="bash hljs">$ L2A_Process S2A_MSIL1C_20180727T071621_N0206_R006_T40VFJ_20180727T092607.SAFE/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After pressing Enter, you can relax, because the processing takes a lot of time (on Yandex.Cloud with Intel Cascade Lake and a guaranteed share of 5% CPU - about an hour). </font><font style="vertical-align: inherit;">Sen2Cor displays information about the progress in the console, so that you will roughly understand what the program is doing at the moment.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Log start in console</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs">Sentinel-2 Level 2A Processor (Sen2Cor). Version: 2.8.0, created: 2019.02.20, supporting Level-1C product version 14.2 - 14.5 started ...<font></font>
Product version: 14.5<font></font>
Operation mode: TOOLBOX<font></font>
Processing baseline: 99.99<font></font>
Progress[%]:  0.00 : Generating datastrip metadata<font></font>
L1C datastrip found, L2A datastrip successfully generated<font></font>
Selected resolution: 60 m<font></font>
Progress[%]: 1.13 : PID-4202, L2A_ProcessTile: processing with resolution 60 m, elapsed time[s]: 2.299, total: 0:00:10.789933<font></font>
Progress[%]: 1.13 : PID-4202, L2A_ProcessTile: start of pre processing, elapsed time[s]: 0.000, total: 0:00:10.790432<font></font>
Progress[%]: 1.27 : PID-4202, L2A_Tables: start import, elapsed time[s]: 0.278, total: 0:00:11.068694<font></font>
Progress[%]: 1.69 : PID-4202, L2A_Tables: band B01 imported, elapsed time[s]: 0.851, total: 0:00:11.919562<font></font>
Progress[%]: 9.39 : PID-4202, L2A_Tables: band B02 imported, elapsed time[s]: 15.618, total: 0:00:27.537532<font></font>
Progress[%]: 17.16 : PID-4202, L2A_Tables: band B03 imported, elapsed time[s]: 15.743, total: 0:00:43.280800<font></font>
‚Ä¶</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When the program finishes working, </font></font><code>/home/user/spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">next to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2A_MSIL1C_20180727T071621_N0206_R006_T40VFJ_20180727T092607.SAFE/</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , another folder with a very similar name should appear - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2A_MSIL2A_20180727T071621_N9999_R006_T40VF08</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
that we got the program for now. To do this, consider the structure of the Sentinel-2 images. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Sentinel-2 satellite image is a zip archive of several hundred megabytes in size. In our case, the archive is called </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L1C_T40VFJ_A016162_20180727T071939.zip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Information is encoded in the name: processing level ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L1C</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), territory code ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T40VFJ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), orbit number ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A016162</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), date and time of shooting. Inside this archive there is a folder with a long name that ends with .SAFE. In the * .SAFE folder there is a GRANULE folder, in it there is another folder with a long name, inside which is the IMG_DATA folder, and in it there are 14 images in jp2 format. Among them there are 13 numbered - their names end in B01-B12 (plus one more with the number B8A). These are tiles - images of the earth‚Äôs surface, taken at specific wavelengths. For example, B04 is a picture in the red range, and B08 is in the near infrared, and together these two pictures can be used to calculate such a well-known index as </font></font><abbr title="Normalized Difference Vegetation Index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDVI</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The name of the 14th image ends with TCI, which means True Color Image - this is a full-color picture, that is, approximately the same as it would have turned out on a regular camera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sen2Cor receives the * .SAFE folder as source data - it is it that is specified as the only required parameter when starting the program. If instead of the * .SAFE folder you specify something else, for example, the source archive with a snapshot or a specific tile, the program will not start.</font></font><br>
<br>
<pre><code class="bash hljs">$ L2A_Process T40VFJ_20180727T071621_B04.jp2 <font></font>
Product metadata file cannot be <span class="hljs-built_in">read</span>.</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fact is that not only the tiles themselves are used for atmospheric correction, but also metadata, and they are in the files inside the * .SAFE folder, and not in the tiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result of the program‚Äôs work is also a * .SAFE folder with a similar structure: inside there is a GRANULE folder, inside it is another folder in which the IMG_DATA folder is located, and there are corrected tiles in it. Tiles are grouped by spatial resolution: those with a spatial resolution of 10 meters are located in the R10m folder, those with a resolution of 20 meters in R20m and 60 meters in R60m. With certain settings, some permissions are not processed and the corresponding folders are not created - more on that below. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The name of the * .SAFE folder resulting from it differs from the original name only in one: at the beginning instead of _MSI </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L1C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ indicated _MSI </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L2A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> _. L1C and L2A are processing level codes. The L1C level means that the image is processed to the Top-of-Atmosphere reflectance level, that is, the pixel values ‚Äã‚Äãin the image correspond to the reflection recorded at the upper boundary of the atmosphere - where the satellite flies. The L2A level is processing to the Bottom-of-Atmoshpere reflectance level, that is, to the reflection values ‚Äã‚Äãat the surface of the Earth - as if the atmosphere is absolutely transparent. In reality, of course, this is not so, and atmospheric correction allows you to remove only part of the distortions that occur when light passes through the atmosphere, but in general, the Bottom-of-Atmosphere reflectance values ‚Äã‚Äãare more consistent with the actual reflection from the earth's surface than the Top-of-Atmosphere values reflectance.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to adjusted tiles, Sen2Cor produces several more images: full color (TCI), maps of aerosol optical density of the atmosphere (AOT - Aerosol Optical Thickness) and water vapor content (WV - Water Vapor), a map of thematic classification of surface types (SC - Scene Classification). They are also located in the IMG_DATA folder in directories for the corresponding spatial resolution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want the folder with the result of the program to be called not * .SAFE, but in a different way, then you can specify the name yourself using the option </font></font><code>--output_dir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Suppose we run Sen2Cor three times with different settings and want to save the results to the folders test1, test2 and test3. Then we indicate </font></font><code>--output_dir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at startup:</font></font><br>
<br>
<pre><code class="bash hljs">
$ L2A_Process --output_dir /home/user/spaceshots/test1 S2A_MSIL1C_20180727T071621_N0206_R006_T40VFJ_20180727T092607.SAFE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- and the corrected image will appear in the catalog </font></font><code>/home/user/spaceshots/test1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. At the second and third start, we indicate </font></font><code>--output_dir /home/user/spaceshots/test2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and, </font><font style="vertical-align: inherit;">respectively </font></font><code>--output_dir /home/user/spaceshots/test3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another useful option is this </font></font><code>--resolution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. It allows you to set the spatial resolution of the tiles that will be obtained as a result of the program. Sen2Cor can create images with different spatial resolutions - 10, 20 or 60 meters per pixel. By default, 10 and 20 meters are made. Suppose we have enough tiles with a resolution of 60 meters per pixel for exploratory analysis. Then you can specify the target resolution using the option </font></font><code>--resolution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ L2A_Process --resolution 60 S2A_MSIL1C_20180727T071621_N0206_R006_T40VFJ_20180727T092607.SAFE
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When launched with these parameters, Sen2Cor will process the image and create adjusted tiles with a resolution of 60 meters. </font><font style="vertical-align: inherit;">Unlike a standard launch, processing takes much less time - a little more than four minutes. </font><font style="vertical-align: inherit;">The memory consumption is also less, so if the start with a standard resolution ended in an error due to lack of memory, then you can specify a resolution of 60 meters. </font><font style="vertical-align: inherit;">Only the R60m folder will be located in the IMG_DATA folder, and inside it there will be tiles with a resolution of 60 meters and some other images: a full-color, thematic map and a map of the content of water vapor.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration file</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We processed the satellite image using Sen2Cor using the default settings. The resolution and folder for saving work results can be changed using the </font></font><code>--resolution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">options </font></font><code>--output_dir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. There are a few more command line options, however, not all can be configured with them. There are many other parameters that are important in processing, for example: whether to take into account the topography, whether to remove clouds, how to assess the state of the atmosphere. In Sen2Cor, they are configured using the configuration file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you run Sen2Cor and do not specify the path to the configuration file, as we did before, then the standard configuration file will be used. The standard configuration file is in the home directory - in our case, in the / folder </font></font><code>home/user/sen2cor/2.8/cfg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The file is called</font></font><code>L2A_GIPP.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. L2A stands for processing level, GIPP stands for Ground Image Processing Parameters - parameters for ground processing of the image. This is a regular xml file, inside which there are several sections, and in sections there are elements for different settings. An explanation is written directly in the file for each setting. In addition, a detailed description of the settings is contained in the documentation - however, it is not easy to understand it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can edit the standard configuration file directly, but it is better to copy it and explicitly indicate when you start the program that you need to use a different configuration file. Copy L2A_GIPP.xml to </font></font><code>/home/user/spaceshots</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, rename it to custom.xml and run the program with this configuration file:</font></font><br>
<br>
<pre><code class="bash hljs">$ L2A_Process --GIP_L2A /home/user/spaceshots/custom.xml --resolution 60 S2A_MSIL1C_20180727T071621_N0206_R006_T40VFJ_20180727T092607.SAFE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that the option for the configuration file is called </font></font><code>--GIP_L2A</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- with one letter "P". </font><font style="vertical-align: inherit;">Since we did not edit the configuration file, the process and the result of the program are no different from starting with the default configuration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many different parameters in the configuration file. </font><font style="vertical-align: inherit;">Let's consider some of them.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logs</font></font></h3><br>
<code>Log_Level</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- a parameter that determines how detailed the log of the program will be. </font><font style="vertical-align: inherit;">The log is displayed in the console during operation and is additionally stored in the log folder (in our case - </font></font><code>/home/user/sen2cor/2.8/log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">The default value is INFO. </font><font style="vertical-align: inherit;">Usually there is no need to change this setting if you have not encountered errors in the program.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accounting for the relief and angle of the sun</font></font></h3><br>
<code>DEM_Directory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the folder in which the digital elevation map is located (DEM - Digital Elevetion Model). </font><font style="vertical-align: inherit;">Processing results using a digital elevation map are usually more accurate. </font><font style="vertical-align: inherit;">The default is NONE, i.e. the terrain is not taken into account. </font><font style="vertical-align: inherit;">If you have your own digital elevation map, then indicate the path to it. </font><font style="vertical-align: inherit;">The folder for DEM should be in the same place as the folders </font></font><code>cfg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, in our case, in the directory </font></font><code>/home/user/sen2cor/2.8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Therefore, if you have a digital elevation map, you need to put it in </font></font><code>/home/user/sen2cor/2.8/dem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and specify dem in DEM_Directory. </font><font style="vertical-align: inherit;">If it is not there, but you still want to use it, you can specify any path (for example, write dem too) and configure the next parameter.</font></font><br>
<br>
<code>DEM_Reference</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- URL from which to download the digital elevation model, if it is not in the folder specified in the previous paragraph. </font><font style="vertical-align: inherit;">Sen2Cor developers suggest using</font></font><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // data_public: GDdci@data.cgiar-csi.org/srtm/tiles/GeoTIFF/</font></font></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- This is a link to STRM DEM, a freely distributed digital elevation map with 90-meter spatial resolution. </font><font style="vertical-align: inherit;">Given that the scale is not much smaller than the satellite images themselves, this model should give a good result. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If Sen2Cor sees </font></font><code>DEM_Directory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that a value other than NONE </font><font style="vertical-align: inherit;">is </font><font style="vertical-align: inherit;">specified, it will try to open files with a bump map from the specified directory. </font><font style="vertical-align: inherit;">If the files cannot be opened, he will try to download them at the URL specified in </font></font><code>DEM_Reference</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">If it fails to download, an error message will appear in the log and processing will continue without taking into account the terrain. </font><font style="vertical-align: inherit;">Files downloaded from the URL are saved in</font></font><code>DEM_Directory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and are not deleted after the program terminates. Therefore, if you want to process the same image again with the same elevation map (for example, by changing other correction settings), Sen2Cor will not download the digital elevation map again, but will use its offline copy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The option </font></font><code>Generate_DEM_Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allows you to get a separate tile with a digital elevation map as a result of the program. The default is FALSE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The option </font></font><code>DEM_Terrain_Correction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partially disables the use of a digital elevation map: the elevation will continue to be taken into account in thematic classification (SC) and the construction of the AOT map, but not when adjusting reflection values ‚Äã‚Äãfrom the surface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If DEM is not used, then specify the parameter</font></font><code>Altitude</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- This is the average height above sea level in the area captured in the picture. </font><font style="vertical-align: inherit;">Height is indicated in kilometers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Two other parameters related to elevation accounting are </font></font><code>BRDF_Correction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>BRDF_Lower_Bound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">BRDF stands for </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bidirectional reflectance distribution function</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and means an equation that simulates the reflection of light from an opaque surface. </font><font style="vertical-align: inherit;">Different values </font></font><code>BRDF_Correction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corresponds to different values ‚Äã‚Äãof one of the coefficients in this equation. </font><font style="vertical-align: inherit;">In the official documentation, it is recommended in most cases to use 21. It </font></font><code>BRDF_Lower_Bound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is responsible for another coefficient in the equation, and it can be left by default, unless you know exactly why and why you need to change it.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beautiful picture</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The option </font></font><code>Generate_TCI_Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">turns on and off the creation of a full-color image. </font><font style="vertical-align: inherit;">The default is TRUE, but if a beautiful picture is not needed, then you can select FALSE.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accounting for the state of the atmosphere</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The parameters </font></font><code>Aerosol_Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Mid_Latitude</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Ozone_Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicate the state of the atmosphere at the time of the shooting. </font></font><code>Aerosol_Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be set on the territory: if the continent, then RURAL, if the ocean, then MARINE. </font></font><code>Mid_Latitude</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">similarly determined by the season: if in the summer, then SUMMER, if in the winter, then WINTER. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The parameter </font></font><code>Ozone_Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicates the ozone content. </font><font style="vertical-align: inherit;">Ozone content can be found on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the World Archive of Ozone and UV Light Online Archive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. On the map you can find the station closest to the survey area, then download the data set for the right time and see the measurement results on the day of shooting. However, it is impossible to establish the actual measurement result in the configuration file - you need to select one value from the list for the corresponding time of the year. Therefore, you must first find out the actually measured value, and then choose the closest available. For example, according to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">station in Yekaterinburg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , on June 27, 2018 (time taken), the ozone content was 316 </font></font><abbr title="Dobson unit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DU</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The explanation in the configuration file states: for summer in the middle latitudes, the available options are 250, 290, 331 (default), 370, 410, 450. The closest to 316 is 331. It comes by default, so in this case nothing can be done do not change. </font><font style="vertical-align: inherit;">If the picture was taken a few days earlier, when the ozone concentration decreased to 302 DU, should be set </font></font><code>Ozone_Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to 290. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In principle, all three parameters - </font></font><code>Aerosol_Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Mid_Latitude</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Ozone_Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- in most cases can be set by default - for the AUTO </font></font><code>Aerosol_Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>Mid_Latitude</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and 0 for </font></font><code>Ozone_Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In this case, Sen2Cor will determine the most suitable values ‚Äã‚Äãfrom the image metadata.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud removal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The parameter </font></font><code>Cirrus_Correction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">says whether or not cirrus clouds are removed from the image. </font><font style="vertical-align: inherit;">Works in conjunction with </font></font><code>WV_Threshold_Cirrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- this is the water vapor content threshold below which cloud removal is automatically disabled, even if </font></font><code>Cirrus_Correction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set to TRUE. </font><font style="vertical-align: inherit;">Therefore, if there is reason to believe that the water vapor content in the atmosphere at the time of shooting was low, but there are still small clouds, and they need to be removed, then it is better to reduce the value </font></font><code>WV_Threshold_Cirrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>WV_Threshold_Cirrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be from 0.1 to 1.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, in this article we examined the following issues: how to install Sen2Cor, how to start it with the default settings, how to change some parameters of the program using the command line and configuration file options. </font><font style="vertical-align: inherit;">For a more in-depth study of Sen2Cor, you can refer to the official documentation, which is available on the same page as the installers. </font><font style="vertical-align: inherit;">The official documentation includes four documents: the simpler and clearer Release Note and Software User Manual, and the rather sophisticated technical Product Definition and Input Output Data Definition. </font><font style="vertical-align: inherit;">The latter file also includes ‚ÄúThe full reference of GIPP‚Äù as an attached pdf file. </font><font style="vertical-align: inherit;">I believe that technical experts will find much more useful in these documents.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501172/index.html">My Mikrosh computer: continue the week of nostalgia</a></li>
<li><a href="../en501178/index.html">How watching porn affects the productivity of work and study</a></li>
<li><a href="../en501180/index.html">[Post-Question] Do you need an IT movement for FACTS about coronavirus and ‚Äúside effects‚Äù</a></li>
<li><a href="../en501182/index.html">oVirt in 2 hours. Part 2. Installing the manager and hosts</a></li>
<li><a href="../en501184/index.html">How to configure Apollo to work with GraphQL in Android</a></li>
<li><a href="../en501190/index.html">How to start a startup, enter the Chinese market and get 15 million investment</a></li>
<li><a href="../en501192/index.html">Top 5 Tips for Improving Soft Skills in English</a></li>
<li><a href="../en501194/index.html">In the wake of the hot particles. Wilson's Chamber</a></li>
<li><a href="../en501198/index.html">Understanding (all) ‚Äúmodular‚Äù JavaScript formats and tools</a></li>
<li><a href="../en501200/index.html">Discussion: 172 Tbit / s - a new record for data transmission speed for multicore optics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>