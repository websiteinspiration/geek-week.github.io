<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüíª üëπ üëÇüèª Automa√ß√£o de rede. Caso da vida ‚ôëÔ∏è üõÄüèΩ üë©‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 
 
 Neste artigo, gostar√≠amos de falar sobre automa√ß√£o da infraestrutura de rede. Um diagrama de rede em funcionamento ser√° apresentado, que...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Automa√ß√£o de rede. Caso da vida</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496152/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, gostar√≠amos de falar sobre automa√ß√£o da infraestrutura de rede. </font><font style="vertical-align: inherit;">Um diagrama de rede em funcionamento ser√° apresentado, que opera em uma empresa pequena, mas muito orgulhosa. </font><font style="vertical-align: inherit;">Todas as correspond√™ncias com o hardware de rede real s√£o aleat√≥rias. </font><font style="vertical-align: inherit;">Consideraremos um caso que ocorreu nesta rede, o que pode levar a um desligamento dos neg√≥cios por um longo tempo e a graves perdas financeiras. </font><font style="vertical-align: inherit;">A solu√ß√£o deste caso se encaixa muito bem no conceito de "Automa√ß√£o da infraestrutura de rede". </font><font style="vertical-align: inherit;">Usando ferramentas de automa√ß√£o, mostraremos como voc√™ pode efetivamente resolver problemas complexos em um curto espa√ßo de tempo e refletiremos sobre o motivo pelo qual essas tarefas s√£o mais promissoras para serem resolvidas dessa maneira e n√£o de outra forma </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(atrav√©s do console)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aviso Legal</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossas principais ferramentas de automa√ß√£o s√£o o Ansible (como uma ferramenta de automa√ß√£o) e o Git (como um reposit√≥rio do Ansible playbook). Quero imediatamente fazer uma reserva de que este n√£o √© um artigo de apura√ß√£o de fatos, em que falamos sobre a l√≥gica do Ansible ou do Git e explico coisas b√°sicas (por exemplo, o que s√£o fun√ß√µes \ tarefas \ m√≥dulos \ arquivos de invent√°rio \ vari√°veis ‚Äã‚Äãno Ansible ou o que acontece quando voc√™ insere comandos git push ou git commit). Esta hist√≥ria n√£o √© sobre como voc√™ pode praticar no Ansible, configur√°-lo em equipamentos NTP ou SMTP. Esta √© uma hist√≥ria sobre como voc√™ pode rapidamente e de prefer√™ncia sem erros resolver um problema de rede. Tamb√©m √© desej√°vel ter uma boa id√©ia de como a rede funciona, em particular, qual √© a pilha de protocolos TCP / IP, OSPF, BGP. A escolha de Ansible e Git tamb√©m est√° fora de quest√£o. Se voc√™ ainda tem a op√ß√£o de escolher uma solu√ß√£o espec√≠fica,√© altamente recomend√°vel ler o livro Programabilidade e automa√ß√£o de rede. Habilidades para o engenheiro de rede de √∫ltima gera√ß√£o ‚Äùde Jason Edelman, Scott S. Lowe e Matt Oswalt.</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora ao ponto.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formula√ß√£o do problema</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine uma situa√ß√£o: √†s 3 da manh√£, voc√™ dorme profundamente e sonha. </font><font style="vertical-align: inherit;">A liga√ß√£o para o telefone. </font><font style="vertical-align: inherit;">O diretor t√©cnico </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 est√° </font><font style="vertical-align: inherit;">ligando: </font><font style="vertical-align: inherit;">- Sim? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - ###, ####, #####, o cluster de firewalls caiu e n√£o aumenta !!! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ esfrega os olhos, tenta perceber o que est√° acontecendo e imagina como isso poderia ter acontecido. </font><font style="vertical-align: inherit;">No tubo, voc√™ pode ouvir os cabelos arrancando a cabe√ßa do diretor, e ele pede para ligar de volta, porque o general liga para ele na segunda linha. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de meia hora, voc√™ coletou as primeiras notas introdut√≥rias do turno de plant√£o e acordou todo mundo com quem podia acordar. </font><font style="vertical-align: inherit;">Como resultado, o diretor t√©cnico n√£o mentiu, tudo est√° correto, o principal cluster de firewalls caiu e nenhum gesto b√°sico o levou a um ju√≠zo. </font><font style="vertical-align: inherit;">Todos os servi√ßos que a empresa oferece n√£o funcionam.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escolha um problema para o seu gosto, todos se lembrar√£o de algo diferente. </font><font style="vertical-align: inherit;">Por exemplo, ap√≥s uma atualiza√ß√£o noturna, na aus√™ncia de uma carga pesada, tudo funcionou bem e todos os satisfeitos foram para a cama. </font><font style="vertical-align: inherit;">O tr√°fego foi passando e os buffers da interface come√ßaram a transbordar devido a um erro no driver da placa de rede. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A situa√ß√£o pode muito bem descrever Jackie Chan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/nm/20/ltnm203hcpvq05tb8uq3ke6e1qm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado, Jackie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A situa√ß√£o n√£o √© muito agrad√°vel, √©? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos sair para o tempo da nossa rede mano com seus pensamentos tristes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Discutiremos como os eventos se desenvolver√£o ainda mais. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oferecemos a seguinte ordem de apresenta√ß√£o do material</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considere o diagrama de rede e analise como ele funciona;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos descrever como transferimos as configura√ß√µes de um roteador para outro usando o Ansible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos falar sobre a automa√ß√£o da infraestrutura de TI em geral.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagrama de rede e sua descri√ß√£o</font></font></h4><br>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema</font></font></b></p><br>
<br>
<img src="https://habrastorage.org/webt/wp/0f/zp/wp0fzp8bvlwmylrn-pl7knbplga.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere a l√≥gica da nossa organiza√ß√£o. </font><font style="vertical-align: inherit;">N√£o nomearemos fabricantes espec√≠ficos de equipamentos, isso n√£o importa no artigo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(o pr√≥prio leitor atento vai adivinhar que</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tipo de </font><i><font style="vertical-align: inherit;">equipamento √© usado)</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Essa √© apenas uma das boas vantagens de trabalhar com a Ansible, ao configurar, em geral, n√£o nos importamos com o tipo de equipamento. </font><font style="vertical-align: inherit;">S√≥ para entender, este equipamento √© conhecido por fornecedores como Cisco, Juniper, Check Point, Fortinet, Palo Alto ... voc√™ pode substituir sua pr√≥pria vers√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos duas tarefas principais para mover o tr√°fego:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garantir a publica√ß√£o de nossos servi√ßos, que s√£o os neg√≥cios da empresa;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forne√ßa comunica√ß√£o com filiais, um data center remoto e organiza√ß√µes de terceiros (parceiros e clientes), bem como acesso √† Internet atrav√©s do escrit√≥rio central.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar com os elementos b√°sicos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dois roteadores de borda (BRD-01, BRD-02);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cluster de firewall (FW-CLUSTER);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chave do Kernel (L3-CORE);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um roteador que se tornar√° uma t√°bua de salva√ß√£o (no processo de solu√ß√£o do problema, transferiremos as configura√ß√µes de rede do FW-CLUSTER para EMERGENCY) (EMERGENCY);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Switches para gerenciamento de infraestrutura de rede (L2-MGMT);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√°quina virtual com Git e Ansible (VM-AUTOMATION);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um laptop que testa e desenvolve manuais para o Ansible (automa√ß√£o de laptops).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um protocolo de roteamento OSPF din√¢mico √© configurado na rede com as seguintes √°reas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årea 0 - a √°rea na qual est√£o inclu√≠dos os roteadores respons√°veis ‚Äã‚Äãpela movimenta√ß√£o de tr√°fego na zona de INTERC√ÇMBIO;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årea 1 - a √°rea na qual est√£o inclu√≠dos os roteadores respons√°veis ‚Äã‚Äãpelo trabalho dos servi√ßos da empresa;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årea 2 - a √°rea na qual os roteadores respons√°veis ‚Äã‚Äãpelo roteamento do tr√°fego de gerenciamento est√£o inclu√≠dos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årea N - √°reas da rede de ag√™ncias.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos roteadores de borda, ele √© criado em um roteador virtual (VRF-INTERNET), no qual a visualiza√ß√£o completa do eBGP com o AS atribu√≠do correspondente √© aumentada. Entre os VRFs, o iBGP est√° configurado. A empresa possui um conjunto de endere√ßos brancos publicados nessas VRF-INTERNETs. Alguns dos endere√ßos brancos s√£o roteados diretamente para o FW-CLUSTER (endere√ßos nos quais os servi√ßos da empresa operam), outros s√£o roteados pela zona EXCHANGE (servi√ßos internos da empresa que exigem endere√ßos IP externos e endere√ßos NAT externos para escrit√≥rios). Al√©m disso, o tr√°fego chega aos roteadores virtuais criados no L3-CORE com endere√ßos branco e cinza (zonas de seguran√ßa). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As redes de gerenciamento usam comutadores dedicados e s√£o uma rede fisicamente dedicada. A rede de gerenciamento tamb√©m √© dividida em zonas de seguran√ßa.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O roteador de EMERG√äNCIA duplica f√≠sica e logicamente o FW-CLUSTER. </font><font style="vertical-align: inherit;">Todas as interfaces est√£o desabilitadas, exceto aquelas que examinam a rede de gerenciamento.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automa√ß√£o e sua descri√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s descobrimos como a rede funciona. </font><font style="vertical-align: inherit;">Agora, vamos dar uma olhada nas etapas, o que faremos para transferir o tr√°fego do FW-CLUSTER para EMERGENCY:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desative as interfaces no comutador do kernel (L3-CORE) que o conectam ao FW-CLUSTER;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desative as interfaces no switch principal L2-MGMT que o conectam ao FW-CLUSTER;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o roteador EMERGENCY (por padr√£o, todas as interfaces est√£o desabilitadas nele, exceto aquelas associadas ao L2-MGMT):</font></font></li>
</ol><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≥s inclu√≠mos interfaces em EMERG√äNCIA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o endere√ßo IP externo (para NAT), que estava no FW-Cluster;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geramos solicita√ß√µes de gARP para que, nas tabelas arp L3-CORE, os endere√ßos de papoula mudem de FW-Cluster para EMERGENCY;</font></font></li>
<li>      BRD-01, BRD-02;</li>
<li>  NAT;</li>
<li>  EMERGENCY OSPF Area 1;</li>
<li>  EMERGENCY OSPF Area 2;</li>
<li>    Area 1  10;</li>
<li>     Area 1  10;</li>
<li> ip-,   L2-MGMT ( ,    FW-CLUSTER);</li>
<li> gARP ,   arp- L2-MGMT  -  FW-CLUSTER  EMERGENCY.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, voltamos √† formula√ß√£o original do problema. Tr√™s da manh√£, um estresse enorme, um erro em qualquer est√°gio pode levar a novos problemas. Pronto para digitar comandos atrav√©s da CLI? Sim? Ok, v√° pelo menos lavar o rosto, tomar caf√© e reunir sua vontade em um punho. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bruce, por favor ajude os caras. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0v/sh/qe/0vshqe7g7ngkcgdjrl4lxvdif4g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, continuamos cortando nossa automa√ß√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo est√° um diagrama da pasta de trabalho em termos de Ansible. Este diagrama reflete o que descrevemos logo acima, apenas uma implementa√ß√£o concreta no Ansible. </font></font><br>
<img src="https://habrastorage.org/webt/yg/oa/hu/ygoahutrkrtb-q7qqteifyuejp0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse est√°gio, percebemos o que precisava ser feito, desenvolvemos um manual, realizamos testes, agora estamos prontos para lan√ß√°-lo.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outra pequena digress√£o. A facilidade da narra√ß√£o n√£o deve engan√°-lo. O processo de escrever playbooks n√£o foi t√£o simples e r√°pido quanto parece. Os testes levaram bastante tempo, um suporte virtual foi criado, a solu√ß√£o foi lan√ßada v√°rias vezes e foram realizados cerca de 100 testes.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Come√ßamos ... H√° uma sensa√ß√£o de que tudo acontece muito lentamente, em algum lugar h√° um erro, algo n√£o funcionar√° no final. A sensa√ß√£o de um salto de p√°ra-quedas, e o p√°ra-quedas n√£o quer abrir de uma vez ... isso √© normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, lemos o resultado das opera√ß√µes do manual do Ansible (substitu√≠mos os endere√ßos IP para fins de conspira√ß√£o):</font></font><br>
<br>
<pre><code class="plaintext hljs">[xxx@emergency ansible]$ ansible-playbook -i /etc/ansible/inventories/prod_inventory.ini /etc/ansible/playbooks/emergency_on.yml <font></font>
<font></font>
PLAY [-------&gt;Emergency on VCF] ********************************************************<font></font>
<font></font>
TASK [vcf_junos_emergency_on : Disable PROD interfaces to FW-CLUSTER] *********************<font></font>
changed: [vcf]<font></font>
<font></font>
PLAY [-------&gt;Emergency on MGMT-CORE] ************************************************<font></font>
<font></font>
TASK [mgmt_junos_emergency_on : Disable MGMT interfaces to FW-CLUSTER] ******************<font></font>
changed: [m9-03-sw-03-mgmt-core]<font></font>
<font></font>
PLAY [-------&gt;Emergency on] ****************************************************<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable EXT-INTERNET interface] **************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Generate gARP for EXT-INTERNET interface] ****************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable static default route to EXT-INTERNET] ****************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change NAT rule to EXT-INTERNET interface] ****************<font></font>
changed: [m9-04-r-04] =&gt; (item=12)<font></font>
changed: [m9-04-r-04] =&gt; (item=14)<font></font>
changed: [m9-04-r-04] =&gt; (item=15)<font></font>
changed: [m9-04-r-04] =&gt; (item=16)<font></font>
changed: [m9-04-r-04] =&gt; (item=17)<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable OSPF Area 1 PROD] ******************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable OSPF Area 2 MGMT] *****************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change OSPF Area 1 interfaces costs to 10] *****************<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1001)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1002)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1003)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1004)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1005)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1006)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1007)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1008)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1009)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1010)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1011)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1012)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1013)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1100)<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change OSPF area1 default cost for to 10] ******************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change MGMT interfaces ip addresses] ********************<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n.254', u'name': u'VLAN-803'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+1.254', u'name': u'VLAN-805'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+2.254', u'name': u'VLAN-807'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+3.254', u'name': u'VLAN-809'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+4.254', u'name': u'VLAN-820'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+5.254', u'name': u'VLAN-822'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+6.254', u'name': u'VLAN-823'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+7.254', u'name': u'VLAN-824'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+8.254', u'name': u'VLAN-850'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+9.254', u'name': u'VLAN-851'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+10.254', u'name': u'VLAN-852'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+11.254', u'name': u'VLAN-853'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+12.254', u'name': u'VLAN-870'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+13.254', u'name': u'VLAN-898'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+14.254', u'name': u'VLAN-899'})<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Generate gARPs for MGMT interfaces] *********************<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n.254', u'name': u'VLAN-803'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+1.254', u'name': u'VLAN-805'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+2.254', u'name': u'VLAN-807'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+3.254', u'name': u'VLAN-809'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+4.254', u'name': u'VLAN-820'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+5.254', u'name': u'VLAN-822'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+6.254', u'name': u'VLAN-823'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+7.254', u'name': u'VLAN-824'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+8.254', u'name': u'VLAN-850'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+9.254', u'name': u'VLAN-851'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+10.254', u'name': u'VLAN-852'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+11.254', u'name': u'VLAN-853'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+12.254', u'name': u'VLAN-870'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+13.254', u'name': u'VLAN-898'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+14.254', u'name': u'VLAN-899'})<font></font>
<font></font>
PLAY RECAP ************************************************************************</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Feito! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, ele n√£o est√° totalmente pronto, n√£o se esque√ßa da converg√™ncia de protocolos de roteamento din√¢mico e do carregamento de um grande n√∫mero de rotas no FIB. N√£o podemos influenciar isso de forma alguma. N√≥s esperamos. Isso veio junto. Agora est√° pronto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E na vila de Vilabaggio (que n√£o deseja automatizar a configura√ß√£o da rede), eles continuam lavando a lou√ßa. Bruce (embora j√° seja diferente, mas n√£o menos legal) est√° tentando descobrir quanto mais deve reconfigurar manualmente o equipamento. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/4y/hc/zr4yhcq2zpqmjjbjp7lx37rxibg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tamb√©m gostaria de me debru√ßar sobre um ponto importante. Como recuperamos tudo? Depois de algum tempo, daremos vida ao nosso FW-CLUSTER. Este √© o equipamento principal, n√£o o backup, a rede deve trabalhar nele.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sinta-se como come√ßar a queimar em redes? O diretor t√©cnico ouvir√° mil argumentos por que isso n√£o √© necess√°rio, por que isso pode ser feito posteriormente. Infelizmente, √© assim que a rede funciona com um monte de patches, pe√ßas e restos de ex-luxo. Acontece uma colcha. Nossa tarefa como um todo, n√£o nessa situa√ß√£o espec√≠fica, mas geralmente, em princ√≠pio, como especialistas em TI, √© levar a rede √† bela palavra em ingl√™s "consist√™ncia", √© muito multifacetada, pode ser traduzida como: consist√™ncia, consist√™ncia, consist√™ncia, coer√™ncia, consist√™ncia, comparabilidade, conectividade. Isso √© tudo sobre ele. Somente nesse estado a rede √© gerenci√°vel, entendemos claramente o que e como funciona, entendemos claramente o que precisa ser alterado, se necess√°rio, sabemos claramente onde procurar em caso de problemas.E somente nessa rede voc√™ pode fazer truques como os que acabamos de descrever.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, outro manual foi preparado, que retornou as configura√ß√µes ao seu estado original. </font><font style="vertical-align: inherit;">A l√≥gica de seu trabalho √© a mesma (√© importante lembrar, a ordem das tarefas √© muito importante). Para n√£o estender o artigo j√° extenso, decidimos n√£o publicar a listagem do manual. </font><font style="vertical-align: inherit;">Ap√≥s a realiza√ß√£o desses exerc√≠cios, voc√™ se sentir√° muito mais calmo e confiante no futuro; al√©m disso, todas as muletas que voc√™ empilhou l√° se encontrar√£o imediatamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos podem escrever para n√≥s e obter o c√≥digo fonte de todo o c√≥digo escrito, junto com todos os livros da paly. </font><font style="vertical-align: inherit;">Contatos no perfil.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em nossa opini√£o, processos que podem ser automatizados ainda n√£o se cristalizaram. </font><font style="vertical-align: inherit;">Com base no que encontramos e no que nossos colegas ocidentais est√£o discutindo, os seguintes t√≥picos ainda s√£o vis√≠veis:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Provisionamento de dispositivos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cole√ß√£o de dados;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comunicando</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Solu√ß√£o de problemas;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conformidade</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se houver interesse, podemos continuar a discuss√£o sobre um dos t√≥picos indicados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tamb√©m quero especular um pouco sobre automa√ß√£o. </font><font style="vertical-align: inherit;">O que deveria ser em nosso entendimento:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sistema deve viver sem um homem, enquanto melhora o homem. </font><font style="vertical-align: inherit;">O sistema n√£o deve depender da pessoa;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A opera√ß√£o deve ser especialista. </font><font style="vertical-align: inherit;">N√£o h√° classe de especialistas que realizam tarefas de rotina. </font><font style="vertical-align: inherit;">Existem especialistas que automatizaram toda a rotina e resolvem apenas problemas complexos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotina \ tarefas padr√£o s√£o feitas automaticamente "por bot√£o", os recursos n√£o s√£o desperdi√ßados. </font><font style="vertical-align: inherit;">O resultado de tais tarefas √© sempre previs√≠vel e compreens√≠vel.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o que esses pontos devem levar a:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transpar√™ncia da infraestrutura de TI (menos riscos de opera√ß√£o, moderniza√ß√£o, implementa√ß√£o. Menos tempo de inatividade por ano);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A capacidade de planejar recursos de TI (sistema de planejamento de capacidade - voc√™ pode ver quanto √© consumido, pode ver quantos recursos s√£o necess√°rios em um √∫nico sistema, e n√£o por cartas e visitas aos principais departamentos);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Capacidade de reduzir o n√∫mero de funcion√°rios de TI.</font></font></li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autores do artigo: Alexander Manov (CCIE RS, CCIE SP) e Pavel Kirillov. </font><font style="vertical-align: inherit;">Estamos interessados ‚Äã‚Äãem discutir e propor solu√ß√µes sobre o t√≥pico de automa√ß√£o da infraestrutura de TI.</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496136/index.html">Usando a biblioteca ColorPicker no Android para implementar a sele√ß√£o de cores flex√≠vel</a></li>
<li><a href="../pt496138/index.html">Participe da programa√ß√£o musical - idiomas que ajudar√£o a fazer isso</a></li>
<li><a href="../pt496144/index.html">Os frutos do isolamento: Mapa interativo COVID-19 com gr√°ficos hist√≥ricos e restri√ß√µes de migra√ß√£o</a></li>
<li><a href="../pt496146/index.html">Lua no STM32</a></li>
<li><a href="../pt496148/index.html">Padr√µes de design estrutural no ES6 + no exemplo de Game of Thrones</a></li>
<li><a href="../pt496154/index.html">Automa√ß√£o de atendimento ao cliente: uma solu√ß√£o completa da DeepPavlov</a></li>
<li><a href="../pt496156/index.html">Como os sistemas de an√°lise de tr√°fego detectam t√°ticas de hackers por MITRE ATT & CK, parte 3</a></li>
<li><a href="../pt496160/index.html">Estudamos o mecanismo VoIP do Mediastreamer2. Parte 5</a></li>
<li><a href="../pt496162/index.html">Terraform, reposit√≥rios mono e conformidade como c√≥digo</a></li>
<li><a href="../pt496164/index.html">Durante a crise, perdi meu emprego e agora tenho medo de escrever um c√≥digo inteligente para n√£o assustar as √∫ltimas vagas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>