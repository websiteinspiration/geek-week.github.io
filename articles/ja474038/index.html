<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–ï¸ ğŸ–ğŸ¼ âœŠ å®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿æ›´æ–° â€¼ï¸ ğŸ” ğŸ‘¨ğŸ¼â€ğŸ­</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç§ã®ã‚³ãƒ¼ãƒ‰ãŒ.NET Frameworkã®ä»®æƒ³ç’°å¢ƒï¼ˆãƒã‚·ãƒ³ï¼‰ã§å®Ÿè¡Œã•ã‚Œã€ãã®çµæœã€æ±ç”¨ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ã™ãã«ç¢ºèªã—ãŸã„ã®ã§ã€1ã€œ2ãƒŸãƒªç§’ä»¥å†…ã§ã‚‚ç²¾åº¦ã«ã¤ã„ã¦ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€æ™‚é–“çš„ãªæ­£ç¢ºã•ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ç§ãŸã¡ã¯è‡ªåˆ†ã®åŠ›ã§ã‚ã‚‰ã‚†ã‚‹ã“ã¨ã‚’ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿æ›´æ–°</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474038/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§ã®ã‚³ãƒ¼ãƒ‰ãŒ.NET Frameworkã®ä»®æƒ³ç’°å¢ƒï¼ˆãƒã‚·ãƒ³ï¼‰ã§å®Ÿè¡Œã•ã‚Œã€ãã®çµæœã€æ±ç”¨ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ã™ãã«ç¢ºèªã—ãŸã„ã®ã§ã€1ã€œ2ãƒŸãƒªç§’ä»¥å†…ã§ã‚‚ç²¾åº¦ã«ã¤ã„ã¦ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€æ™‚é–“çš„ãªæ­£ç¢ºã•ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ç§ãŸã¡ã¯è‡ªåˆ†ã®åŠ›ã§ã‚ã‚‰ã‚†ã‚‹ã“ã¨ã‚’ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤šãã®å ´åˆã€ç§ãŸã¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€ç‰¹å®šã®æ™‚é–“é–“éš”ã§ä¸€éƒ¨ã®æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§ã®å ´åˆã€ãã‚Œã¯IPã‚«ãƒ¡ãƒ©ã‹ã‚‰ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼ˆç”»åƒï¼‰ã®æ›´æ–°ã§ã—ãŸã€‚å¤šãã®å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®é »åº¦ã«ç‰¹å®šã®åˆ¶é™ã‚’è¨­å®šã—ã¾ã™ã€‚ä»Šå›ã¯1ç§’ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ã®è§£æ±ºç­–ã¯ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆè¦æ±‚ã®å¾Œã«Thread.Sleepï¼ˆ1000ï¼‰/Task.Awaitï¼ˆ1000ï¼‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Getsnapshot</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> rnd = <span class="hljs-keyword">new</span> Random()
  <span class="hljs-keyword">var</span> sleepMs = rnd.Next(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>);<font></font>
  Console.WriteLine(<span class="hljs-string">$"[<span class="hljs-subst">{DateTime.Now.ToString(<span class="hljs-string">"mm:ss.ff"</span>)}</span>] DoSomethink <span class="hljs-subst">{sleepMs}</span> ms"</span>);<font></font>
  Thread.Sleep(sleepMs);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
{<font></font>
  Getsnapshot();<font></font>
  Thread.Sleep(<span class="hljs-number">1000</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ã‹ã—ã€ç§ãŸã¡ã®æ“ä½œã®æœŸé–“ã¯éæ±ºå®šçš„ãªé‡ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®æ¨¡å€£ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦å‡ºåŠ›ã‚’å®Ÿè¡Œã—ã¾ã™</font></font><br>
<br>
<pre><code class="plaintext hljs">[15:10.39] DoSomethink 974 ms<font></font>
[15:12.39] DoSomethink 383 ms<font></font>
[15:13.78] DoSomethink 99 ms<font></font>
[15:14.88] DoSomethink 454 ms<font></font>
[15:16.33] DoSomethink 315 ms<font></font>
[15:17.65] DoSomethink 498 ms<font></font>
[15:19.15] DoSomethink 708 ms<font></font>
[15:20.86] DoSomethink 64 ms<font></font>
[15:21.92] DoSomethink 776 ms<font></font>
[15:23.70] DoSomethink 762 ms<font></font>
[15:25.46] DoSomethink 123 ms<font></font>
[15:26.59] DoSomethink 36 ms<font></font>
[15:27.62] DoSomethink 650 ms<font></font>
[15:29.28] DoSomethink 510 ms<font></font>
[15:30.79] DoSomethink 257 ms<font></font>
[15:32.04] DoSomethink 602 ms<font></font>
[15:33.65] DoSomethink 542 ms<font></font>
[15:35.19] DoSomethink 286 ms<font></font>
[15:36.48] DoSomethink 673 ms<font></font>
[15:38.16] DoSomethink 749 ms<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦‹ã¦ã‚ã‹ã‚‹ã‚ˆã†ã«ã€ãƒ©ã‚°ãŒè“„ç©ã™ã‚‹ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«é•åã—ã¾ã™ã€‚ </font></font><br>
<br>
<pre><code class="plaintext hljs">,      60   1      49.</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹³å‡åå·®ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã€å¹³å‡ãƒ©ã‚°ã‚’æ¸¬å®šã—ã€ã‚¹ãƒªãƒ¼ãƒ—æ™‚é–“ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ãŒã€ã“ã®å ´åˆã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ã¨ã™ã‚‹ã‚ˆã‚Šã‚‚å¤šãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å–å¾—ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¦æ±‚ãŒæœ€å¤§1ç§’ã¾ã§å®Œäº†ã™ã‚‹ã“ã¨ã€ã¤ã¾ã‚Šå¿…è¦ãªæ›´æ–°æœŸé–“ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ä½•ãƒŸãƒªç§’å¾…ã¤å¿…è¦ãŒã‚ã‚‹ã‹ã‚’çŸ¥ã£ã¦ã„ã‚‹ãŸã‚ã€äºˆæ¸¬ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">,      60   1     62.
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ˜ç™½ãªè§£æ±ºç­–ã¯ãã‚Œè‡ªä½“ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ‰‹è¡“å‰å¾Œã®æ™‚é–“ã‚’æ¸¬å®šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãã‚Œã‚‰ã®é•ã„ã‚’è¨ˆç®—ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
{<font></font>
   <span class="hljs-keyword">int</span> sleepMs = <span class="hljs-number">1000</span>; 
   <span class="hljs-keyword">var</span> watch = Stopwatch.StartNew();<font></font>
   watch.Start();<font></font>
   Getsnapshot();<font></font>
   watch.Stop();<font></font>
   <span class="hljs-keyword">int</span> needSleepMs = (<span class="hljs-keyword">int</span>)(sleepMs - watch.ElapsedMilliseconds);<font></font>
   Thread.Sleep(needSleepMs);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šã™ããƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">é‹ãŒè‰¯ã‘ã‚Œã°ã€æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">[16:57.25] DoSomethink 789 ms<font></font>
[16:58.05] Need sleep 192 ms<font></font>
<font></font>
[16:58.25] DoSomethink 436 ms<font></font>
[16:58.68] Need sleep 564 ms<font></font>
<font></font>
[16:59.25] DoSomethink 810 ms<font></font>
[17:00.06] Need sleep 190 ms<font></font>
<font></font>
[17:00.25] DoSomethink 302 ms<font></font>
[17:00.55] Need sleep 697 ms<font></font>
<font></font>
[17:01.25] DoSomethink 819 ms<font></font>
[17:02.07] Need sleep 181 ms<font></font>
<font></font>
[17:02.25] DoSomethink 872 ms<font></font>
[17:03.13] Need sleep 128 ms<font></font>
<font></font>
[17:03.25] DoSomethink 902 ms<font></font>
[17:04.16] Need sleep 98 ms<font></font>
<font></font>
[17:04.26] DoSomethink 717 ms<font></font>
[17:04.97] Need sleep 282 ms<font></font>
<font></font>
[17:05.26] DoSomethink 14 ms<font></font>
[17:05.27] Need sleep 985 ms<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãªãœç§ã¯é‹ãŒè‰¯ã‹ã£ãŸã®ã§ã™ã‹ï¼Ÿ Watch.Startï¼ˆï¼‰ã¯DoSomethinkï¼ˆï¼‰ã®å‰ã«å®Ÿè¡Œã•ã‚Œã€watch.Stopï¼ˆï¼‰ã¯DoSomethinkï¼ˆï¼‰ã®å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚ã“ã‚Œã‚‰ã®æ“ä½œã¯ç¬é–“çš„ãªã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“+ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒè‡ªä½“ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œæ™‚é–“ï¼ˆxï¼‰ã®æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã—ã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒç™ºç”Ÿã—ã¾ã™ã€‚ DoSomethinkï¼ˆï¼‰é–¢æ•°ã¯0ã€œ1000ãƒŸãƒªç§’ï¼ˆyï¼‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãã®ã‚ˆã†ãªå ´åˆã«x + y&gt; 1000ã®å ´åˆã«çŠ¶æ³ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</font></font><br>
<br>
<pre><code class="plaintext hljs"> int needSleepMs = (int)(sleepMs - watch.ElapsedMilliseconds);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thread.Sleepï¼ˆï¼‰ãƒ¡ã‚½ãƒƒãƒ‰ã¯è² ã®å€¤ã‚’ã¨ã£ã¦ã¯ãªã‚‰ãªã„ã®ã§ã€è² ã®å€¤ã‚’å–ã‚Šã€ArgumentOutOfRangeExceptionã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®ã‚ˆã†ãªå ´åˆã€needSleepMsæ™‚é–“ã‚’0ã«è¨­å®šã™ã‚‹ã“ã¨ã¯ç†ã«ã‹ãªã£ã¦ã„ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€å®Ÿéš›ã«ã¯ã€DoSomethinkï¼ˆï¼‰é–¢æ•°ã¯å¿…è¦ãªã ã‘å®Ÿè¡Œã§ãã€intã«ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ã¨å¤‰æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚æ¬¡ã«ã€ç¡çœ æ™‚é–“</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŒsleepMsã‚’è¶…ãˆã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> needSleepMs = sleepMs - watch.ElapsedMilliseconds;
<span class="hljs-keyword">if</span> (needSleepMs &gt; <span class="hljs-number">0</span> &amp;&amp; watch.ElapsedMilliseconds &lt;= sleepMs)<font></font>
{<font></font>
   needSleepMs = (<span class="hljs-keyword">int</span>)needSleepMs;<font></font>
}<font></font>
<span class="hljs-keyword">else</span><font></font>
{<font></font>
  needSleepMs = <span class="hljs-number">0</span>; <font></font>
}<font></font>
Thread.Sleep(needSleepMs);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸå‰‡ã¨ã—ã¦ã€ã™ã¹ã¦ã®æº–å‚™ãŒæ•´ã£ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’1ã‹æ‰€ã§ã‚‚ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ç›®ã«ä¸å¿«æ„Ÿã‚’ä¸ãˆã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ãã®ã‚ˆã†ãªå ´æ‰€ãŒæ•°åã‚ã‚‹å ´åˆã€ã‚³ãƒ¼ãƒ‰ã¯èª­ã¿å–ã‚Šä¸å¯èƒ½ãªãƒ’ãƒ¼ãƒ—ã«ãªã‚Šã¾ã™... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®çŠ¶æ³ã‚’ä¿®æ­£ã™ã‚‹ãŸã‚ã«ã€ã‚³ãƒ¼ãƒ‰ã‚’é–¢æ•°ã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã¯ã€åˆ¥ã®ã‚¯ãƒ©ã‚¹ã«é…ç½®ã™ã‚‹ã‹ã€ã‚¯ãƒ©ã‚¹ã®é€šå¸¸ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦Globalã‚’ä½¿ç”¨ã—ã¦é™çš„ï¼ˆãƒã‚¤ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ä¾‹ã§ã¯ã€ç°¡å˜ã«ã™ã‚‹ãŸã‚ã«ãã®ã¾ã¾ã«ã—ã¦ã€Programã‚¯ãƒ©ã‚¹ã«æ®‹ã—ã¾ã™</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">NeedWaitMs</span>(<span class="hljs-params">Action before, <span class="hljs-keyword">int</span> sleepMs</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> watch = Stopwatch.StartNew();<font></font>
  watch.Start();<font></font>
  before();<font></font>
  watch.Stop();<font></font>
  <span class="hljs-keyword">var</span> needSleepMs = sleepMs - watch.ElapsedMilliseconds;
  <span class="hljs-keyword">if</span> (needSleepMs &gt; <span class="hljs-number">0</span> &amp;&amp; watch.ElapsedMilliseconds &lt;= sleepMs) 
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) needSleepMs;
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…¥åŠ›é–¢æ•°ã¯ã€å®Ÿè¡Œã™ã‚‹é–¢æ•°ã¸ã®ãƒªãƒ³ã‚¯ã¨ã€å¾…æ©Ÿæ™‚é–“ã‚’å—ã‘å…¥ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚¹ãƒªãƒ¼ãƒ—ã™ã‚‹æ™‚é–“ã‚’è¿”ã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€åŒ¿åã®ãƒ©ãƒ ãƒ€é–¢æ•°ã‚’é–¢æ•°ã«æ¸¡ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Œå…¨ãªãƒªã‚¹ãƒˆã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚</font></font><br>
 <br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Diagnostics;
<span class="hljs-keyword">using</span> System.Threading;<font></font>
<font></font>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp2</span><font></font>
{<font></font>
    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span><font></font>
    {<font></font>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Getsnapshot</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> rnd = <span class="hljs-keyword">new</span> Random();
            <span class="hljs-keyword">var</span> sleepMs = rnd.Next(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>);<font></font>
            Console.WriteLine(<span class="hljs-string">$"[<span class="hljs-subst">{DateTime.Now.ToString(<span class="hljs-string">"mm:ss.ff"</span>)}</span>] DoSomethink <span class="hljs-subst">{sleepMs}</span> ms"</span>);<font></font>
            Thread.Sleep(sleepMs);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">var</span> sleepMs = NeedWaitMs(Getsnapshot, <span class="hljs-number">1000</span>);<font></font>
                Console.WriteLine(<span class="hljs-string">$"[<span class="hljs-subst">{DateTime.Now.ToString(<span class="hljs-string">"mm:ss.ff"</span>)}</span>] Need sleep <span class="hljs-subst">{sleepMs}</span> ms <span class="hljs-subst">{Environment.NewLine}</span>"</span>);<font></font>
                Thread.Sleep(sleepMs);<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">NeedWaitMs</span>(<span class="hljs-params">Action before, <span class="hljs-keyword">int</span> sleepMs</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> watch = Stopwatch.StartNew();<font></font>
            before();<font></font>
            watch.Stop();<font></font>
            <span class="hljs-keyword">var</span> needSleepMs = sleepMs - watch.ElapsedMilliseconds;
            <span class="hljs-keyword">return</span> needSleepMs &gt; <span class="hljs-number">0</span> ? (<span class="hljs-keyword">int</span>) needSleepMs : <span class="hljs-number">0</span>;<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja474024/index.html">ç§ãŸã¡ã¯ãƒ­ãƒœãƒƒãƒˆæƒé™¤æ©Ÿã‚’æ™®éçš„ãªå…µå£«ã«å¤‰ãˆã¾ã™</a></li>
<li><a href="../ja474026/index.html">æ¶ˆè²»è€…ç‰©èªã€ã‚¢ã‚½ã‚¹ã¯é›‘èªŒã¨TikTokã‚’æ”¾æ£„</a></li>
<li><a href="../ja474028/index.html">é–‹ç™ºè€…ã«ã¯ã©ã®ã‚ˆã†ãªã‚½ãƒ•ãƒˆã‚¹ã‚­ãƒ«ãŒå¿…è¦ã§ã™ã‹ï¼ŸYandexã‹ã‚‰ã®æ„è¦‹</a></li>
<li><a href="../ja474032/index.html">æ¨™æº–ã‚»ãƒ«ã®é…ç½®ï¼ˆéƒ¨å¤–è€…ã‹ã‚‰ã®ãƒ¡ãƒ¢ï¼‰</a></li>
<li><a href="../ja474036/index.html">ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ã‚‚å«Œã„</a></li>
<li><a href="../ja474040/index.html">ãƒ—ãƒ¬ã‚¤ãƒœãƒ¼ã‚¤ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼šã‚¹ãƒ†ã‚£ãƒ¼ãƒ–ã‚¸ãƒ§ãƒ–ã‚ºã€ãƒ‘ãƒ¼ãƒˆ1</a></li>
<li><a href="../ja474042/index.html">ã‚³ãƒ³ãƒ†ã‚¹ãƒˆï¼ã‚µãƒ¼ãƒãƒ¼ã®ã¡ã‚‰ã¤ãã«ç…§ã‚‰ã—ãŸã‚¹ãƒˆãƒ¼ãƒªãƒ¼...</a></li>
<li><a href="../ja474046/index.html">ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã€AIã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã€ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ï¼šç¾åœ¨ãƒ¢ã‚¹ã‚¯ãƒ¯ã¨ã‚µãƒ³ã‚¯ãƒˆãƒšãƒ†ãƒ«ãƒ–ãƒ«ã‚¯ã§</a></li>
<li><a href="../ja474048/index.html">HILDACRYPTï¼šæ–°ã—ã„ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢ãŒãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚¢ãƒ³ãƒã‚¦ã‚¤ãƒ«ã‚¹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ”»æ’ƒã—ã¾ã™</a></li>
<li><a href="../ja474050/index.html">éŸ³æ¥½æ¥­ç•Œã®ã‚¹ã‚¿ãƒ¼ã§ã‚ã‚‹å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>