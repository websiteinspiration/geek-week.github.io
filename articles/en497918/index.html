<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÉ üí™üèæ üôè DevOps tools are not just for DevOps. The process of building a test automation infrastructure from scratch üéÜ üôáüèº üê™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1: Web / Android
 Note : this article is a translation into Russian of the original article¬† ‚ÄúDevOps tools are not only for DevOps. Building test...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DevOps tools are not just for DevOps. The process of building a test automation infrastructure from scratch</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497918/"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 1: Web / Android</font></font></h1><br>
 <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this article is a translation into Russian of the original article&nbsp; </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúDevOps tools are not only for DevOps. Building test automation infrastructure from scratch. "</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> However, all illustrations, links, quotes and terms are stored in the original language to avoid distortion of meaning when translated into Russian. I wish you a pleasant study!</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://lh4.googleusercontent.com/vpUkT9-xpCl5ddQD_jiK-hUPsVrYkTPxKZaayS8ILqDOfY4_ThTHDN0E-HBfpXClwZtYMBjv3Kx68xYLl3jo2R1tAAl2oEXaUGCTdyJnBQIFtNoBLmO-JanhSzUqU4ri_eeI7NM3"></div><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Currently, the DevOps specialty is one of the most popular in the IT industry. If you open popular job search sites and set a salary filter, you will see that jobs related to DevOps are at the top of the list. However, it is important to understand that this mainly refers to the position of 'Senior', which implies that the candidate has a high level of skills, knowledge of technologies and tools. It also comes with a high degree of responsibility associated with the smooth operation of production. However, we began to forget what DevOps is. Initially, it was not a specific person or department. If we look for the definitions of this term, we will find many beautiful and correct nouns, such as methodology, practices, cultural philosophy, a group of concepts and so on.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My specialization is a QA automation engineer, but I believe that it should not be only related to writing auto-tests or developing an architecture for a test framework. In 2020, knowledge of automation infrastructure is also needed. This allows you to organize the automation process yourself, from the launch of tests to the provision of results to all interested parties in accordance with the goals. As a result, DevOps skills are a must for this job. And all this is good, but, unfortunately, there is a problem ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spoiler: this article makes attempts to simplify this problem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">It lies in the fact that DevOps is complicated. </font><font style="vertical-align: inherit;">And this is obvious, because companies will not pay much for what is easy to do ... In the world of DevOps there are a large number of tools, terms, practices that need to be mastered. </font><font style="vertical-align: inherit;">This is especially difficult at the beginning of a career and depends on the accumulated technical experience.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://lh4.googleusercontent.com/RDKJHmWlFy3NH7ycmsBDAx0e4NIeHtgwfZsodNF_a4V1NSiWA7Y7lxXnZJJkryMv4EEQHtZ3CEBI_Wc95GFPggMczOXcBTO0va9dCZFBrtPnqZEZJyJeEUFL1WyWrItrRfMPv5S6"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Source: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://maximelanciauxbi.blogspot.com/2017/04/devops-tools.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Here, we will probably complete with the introductory part and focus on the purpose of this article.&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is this article about</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article I am going to share my experience in building a test automation infrastructure. On the Internet you can find many sources of information about various tools and how to use them, but I would like to consider them exclusively in the context of automation. I believe that many automation engineers are familiar with a situation where no one runs the developed tests, except for yourself, and does not care about their support. As a result, the tests become obsolete and you have to spend time updating them. Again, at the beginning of a career, this can be quite a difficult task: to correctly decide which tools should help solve this problem, how to choose, configure and maintain them. Some testers ask for help from DevOps (people) and, to be honest, this approach works.In many cases, this may be the only option, since we do not have the visibility of all the dependencies. But, as we know, DevOps are very busy guys, because they should think about the infrastructure of the entire company, deployment, monitoring, microservices and other similar tasks depending on the organization / team. As it usually happens, automation is not a priority. In this case, we should try to do our best from the beginning to the end. This will reduce addictions, speed up the workflow, improve our skills and allow us to see a wider picture of what is happening.microservices and other similar tasks depending on the organization / team. As it usually happens, automation is not a priority. In this case, we should try to do our best from the beginning to the end. This will reduce addictions, speed up the workflow, improve our skills and allow us to see a wider picture of what is happening.microservices and other similar tasks depending on the organization / team. As it usually happens, automation is not a priority. In this case, we should try to do our best from the beginning to the end. This will reduce addictions, speed up the workflow, improve our skills and allow us to see a wider picture of what is happening.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The article presents the most popular and popular tools and shows how to use them for step-by-step construction of automation infrastructure. </font><font style="vertical-align: inherit;">Each group is represented by tools that have been tested on personal experience. </font><font style="vertical-align: inherit;">But this does not mean that you should use the same. </font><font style="vertical-align: inherit;">The tools themselves are not important, they appear and become obsolete. </font><font style="vertical-align: inherit;">Our engineering task is to understand the basic principles: why do we need this group of tools and what work tasks can we solve with their help. </font><font style="vertical-align: inherit;">Therefore, at the end of each section, I leave links to similar tools that may be used in your organization.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is not in this article</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Once again, the article is not about specific tools, so there will be no code insertions from the documentation and descriptions of specific commands. </font><font style="vertical-align: inherit;">But at the end of each section I leave links for a detailed study. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is due to the fact that:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this material is very easy to find in various sources (documentation, books, video courses);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if we begin to delve deeper, we will have to write 10, 20, 30 parts of this article (whereas plans 2-3);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I just don‚Äôt want to waste your time, because maybe you want to use other tools to achieve the same goals.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Practice</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would really like this material to be useful to every reader, and not just be read and forgotten. </font><font style="vertical-align: inherit;">In any study, practice is a very important component. </font><font style="vertical-align: inherit;">To do this, I prepared a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub repository with a step-by-step guide on how to do everything from scratch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">You will also be waiting for homework to be sure that you have not thoughtlessly copied lines of executed commands</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plan</font></font></h3><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technology</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tools</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local running (prepare web / android demo tests and run it locally)&nbsp;</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js, Selenium, Appium</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version control systems&nbsp;</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Containerization</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker, Selenium grid, Selenoid (Web, Android)</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitlab ci</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud platforms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google cloud platform</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orchestration</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastructure as a code (IaC)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform, ansible</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The structure of each section</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To maintain the narrative in a visual form, each section is described as follows:</font></font><br>
<br>
<ul>
<li>  ,</li>
<li>   ,</li>
<li>   ,</li>
<li>  ,</li>
<li> .</li>
</ul><br>
<h2>1.   </h2><br>
<h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is just a preparatory step to run the demo tests locally and to verify that they pass successfully. In the practical part, Node.js is used, but the programming language and platform are also not important and you can use the ones that are used in your company.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, as an automation tool, I recommend using Selenium WebDriver for web platforms and Appium for the Android platform, respectively, since in the next steps we will use Docker images that are tailored to work specifically with these tools. Moreover, referring to the requirements in vacancies, these tools are most in demand on the market.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you may have noticed, we only consider web and Android tests. </font><font style="vertical-align: inherit;">Unfortunately, iOS is a completely different story (thanks to Apple). </font><font style="vertical-align: inherit;">I plan to demonstrate the solutions and practices related to iOS in the following parts.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From an infrastructure point of view, a local launch does not carry any value. </font><font style="vertical-align: inherit;">You only verify that the tests run on the local machine in local browsers and simulators. </font><font style="vertical-align: inherit;">But in any case, this is a necessary starting point.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Illustration of the current state of infrastructure</font></font></h3><br>
<div style="text-align:center;"><img src="https://lh3.googleusercontent.com/MCN635HHU81zCP581L8ZjF89XJsXC09zbzJIwuRh7JOLaNWNZ6OpSsLUVBuDYRmXPZLcJqyctZrLdgiCOK54ZFfnwD2EMX4Oq8AfzaeuvRc1kvG80mD7pfZJB-UY3k01E9PGUYJ5"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learning Links</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appium</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android Emulator</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium JS GitHub examples</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appium JS GitHub examples</font></font></a></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similar tools</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any programming language that you like in conjunction with Selenium / Appium - tests;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any tests;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any test runner.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Version control systems (Git)</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technology Brief</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 It will not be a big discovery for anyone if I say that the version control system is an extremely important part of development both as a team and individually. </font><font style="vertical-align: inherit;">Based on various sources, we can confidently say that Git is the most popular representative. </font><font style="vertical-align: inherit;">Version control system provides many advantages, such as code exchange, version storage, restoration to previous branches, monitoring of project history, backups. </font><font style="vertical-align: inherit;">We will not discuss each item in detail, as I am sure that you are familiar with this and use it in everyday work. </font><font style="vertical-align: inherit;">But if suddenly not, then I recommend pausing the reading of this article and filling in this gap as soon as possible.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 And here you can ask a reasonable question: ‚ÄúWhy does he tell us about Git? </font><font style="vertical-align: inherit;">Everyone knows and uses this for both development code and auto-test code. ‚Äù </font><font style="vertical-align: inherit;">You will be absolutely right, but in this article we are talking about infrastructure and this section plays the role of a preview for section 7: ‚ÄúInfrastructure as code (IaC)‚Äù. </font><font style="vertical-align: inherit;">For us, this means that the entire infrastructure, including the test one, is described in the form of code, so we can also apply versioning systems to it and get similar advantages for both development and automation code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We'll look at IaC in more detail in step 7, but even now you can start using Git locally by creating a local repository. </font><font style="vertical-align: inherit;">The big picture will be expanded when we add a remote repository to the infrastructure.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Illustration of the current state of infrastructure</font></font></h3><br>
<div style="text-align:center;"><img src="https://lh3.googleusercontent.com/TkTnMjzZE4c8Hm5Z9LnrWHGqLxs8rMQToI2Q5fzWk-bs_pqOUi02FQQmoKsQMs0u-pSHlnciwz_1Dgjso3VQWO87zHS0oFNjAJVlBoIVPH_2Ox7ba2RurG4b_vwFfExaPkczXx7w"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learning Links</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is version control</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting Started - About Version Control</font></font></a></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similar tools</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Svn</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mercurial</font></font></a>&nbsp;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft TFS (now is part of Azure DevOps Services)</font></font></a></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Containerization (Docker)</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technology Brief</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 To demonstrate how containerization changed the rules of the game, let's go back several decades. </font><font style="vertical-align: inherit;">In those days, people purchased and used server machines to run applications. </font><font style="vertical-align: inherit;">But in most cases, the required required resources for launch were not known in advance. </font><font style="vertical-align: inherit;">As a result, companies spent money on the purchase of expensive powerful servers, but some of these capacities were not completely utilized.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next stage of evolution was virtual machines (VMs), which solved the problem of spending money on unused resources. This technology made it possible to run applications independently of each other within the same server, allocating completely isolated space. But, unfortunately, any technology has its drawbacks. Starting a VM requires a full-fledged operating system that consumes CPU, RAM, storage and, depending on the OS, you need to consider the cost of a license. These factors affect download speed and complicate portability. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And so we came to containerization. And again, this technology solved the previous problem, since the containers do not use a full-fledged OS, which allows you to free up a large number of resources and provides a quick and flexible solution for portability.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, containerization technology is not new and was first introduced in the late 70s. In those days, there was a lot of research, groundwork, and attempts. But it was Docker who adapted this technology and made it easily accessible to the masses. Nowadays, when we talk about containers, in most cases we mean Docker. When we talk about Docker containers, we mean Linux containers. We can use Windows and macOS systems to run containers, but it‚Äôs important to understand that in this case an additional layer appears. For example, Docker on a Mac silently launches containers inside a lightweight Linux VM. We will return to this topic when we discuss the launch of Android emulators inside containers, and this is where a very important nuance appears, which needs to be analyzed in more detail.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 We found out that containerization and Docker are cool. </font><font style="vertical-align: inherit;">Let's look at this in the context of automation, because every tool or technology should solve a problem. </font><font style="vertical-align: inherit;">Let us denote the obvious problems of testing automation in the context of UI tests:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a huge number of dependencies when installing Selenium and especially Appium;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compatibility issues between versions of browsers, simulators and drivers;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lack of isolated space for browsers / simulators, which is especially critical for parallel launch;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It‚Äôs hard to manage and maintain if you need to run 10, 50, 100 or even 1000 browsers at the same time.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But since Selenium is the most popular automation tool, and Docker is the most popular containerization tool, it should not be a surprise to anyone that someone tried to combine them to get a powerful tool to solve the above problems. Let's consider such solutions in more detail.&nbsp; </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium grid in docker</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This tool is the most popular in the world of Selenium for launching and managing multiple browsers on multiple machines from a central site. To start, you must register at least 2 parts: Hub and Node (s). A hub is a central site that receives all requests from tests and distributes them to the appropriate Nodes. For each Node, we can configure a specific configuration, for example, specifying the desired browser and its version. However, we still need to take care of compatible browser drivers ourselves and install them on the necessary Nodes. For this reason, the Selenium grid is not used in its pure form, except when we need to work with browsers that cannot be installed on Linux OS.For all other cases, using a Docker image to run the Selenium grid Hub and Nodes is a much flexible and correct solution. This approach greatly simplifies the management of nodes, since we can choose the image we need with already installed compatible versions of browsers and drivers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despite the negative feedback on stability, especially when running a large number of Nodes in parallel, Selenium grid is still the most popular tool for running Selenium tests in parallel. It is important to note that in open-source various improvements and modifications of this tool constantly appear that struggle with various bottlenecks. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid for web</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This tool is a breakthrough in the Selenium world, since it works right out of the box and has made the lives of many automation engineers much easier. First of all, this is not another modification of the Selenium grid. Instead, the developers created a completely new version of Selenium Hub in the Golang language, which, in conjunction with lightweight Docker images for various browsers, gave impetus to the development of test automation. Moreover, in the case of Selenium Grid, we must determine all the required browsers and their versions in advance, which is not a problem when working with only one browser. But when it comes to several supported browsers, Selenoid is the number one solution, thanks to the 'browser on demand' feature. All that is required of us is to preload the necessary images with browsers and update the configuration file,with which Selenoid interacts. After Selenoid receives a request from the tests, it will automatically launch the right container with the right browser. When the test completes, Selenoid will drop the container, thereby freeing up resources for the following queries. This approach completely eliminates the well-known problem of 'node degradation', which we often see in the Selenium grid.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But alas, Selenoid is still not a silver bullet. We've got the on-demand browser feature, but the on-demand resources feature is still not available. To use Selenoid, we need to deploy it on a physical hardware or VM, which means that we need to know in advance how much resources need to be allocated. I believe this is not a problem for small projects that run 10, 20, or even 30 browsers in parallel. But what if we need 100, 500, 1000 and more? It makes no sense to maintain and pay for so many resources all the time. In sections 5 and 6 of this article, we will discuss solutions that allow you to scale, thereby significantly reducing company costs. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid for Android</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the success of Selenoid as a tool for web automation, people wanted to get something similar for Android. And it happened - Selenoid was released with Android support. From a high-level user perspective, the principle of operation is similar to web automation. The only difference is that instead of containers with browsers, Selenoid launches containers with Android emulators. In my opinion, today it is the most powerful free tool for running Android tests in parallel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would really not like to talk about the negative aspects of this tool, since I really like it very much. </font><font style="vertical-align: inherit;">But still there are the same drawbacks related to web automation related to scaling. </font><font style="vertical-align: inherit;">In addition to this, we need to talk about another limitation, which may come as a surprise if we tune the instrument for the first time. </font><font style="vertical-align: inherit;">To run Android images, we need a physical machine or VM with nested virtualization support. </font><font style="vertical-align: inherit;">In the practical guide, I demonstrate how to activate this on a Linux VM. </font><font style="vertical-align: inherit;">However, if you are a macOS user and want to deploy Selenoid locally, this will not be possible to run Android tests. </font><font style="vertical-align: inherit;">But you can always start the Linux VM locally with the configured 'nested virtualization' and deploy Selenoid inside.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Illustration of the current state of infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In the context of this article, we will add 2 tools to illustrate the infrastructure. </font><font style="vertical-align: inherit;">These are Selenium grid for web tests and Selenoid for Android tests. </font><font style="vertical-align: inherit;">In the GitHub manual, I will also show how to use Selenoid to run web tests.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://lh6.googleusercontent.com/tw5bAvomtVL4M4VGM3CnyZmUsDR7Xlow_b1_9feYVPSRnStMiPiyfn3Jct7FyjzHJK385pxsCbpgNAKRRDdvUjS1gcJcNWu2wGub9zMxvyKmscqxIE4waiTAk5iYpkIjSQ193D0F"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learning Links</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker: what container is</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker: get started</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 Container Alternatives to Docker</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium grid</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium docker</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid github</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KVM setup for Android emulators</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker deep dive book</font></font></a></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similar tools</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Other containerization tools exist, but Docker is the most popular. </font><font style="vertical-align: inherit;">If you want to try something else, keep in mind that the tools that we reviewed for running Selenium tests in parallel will not work out of the box.&nbsp;&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As already mentioned, there are many modifications of the Selenium grid, for example, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zalenium</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. CI / CD</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technology Brief</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 The practice of continuous integration is quite popular in development and is on a par with version control systems. Despite this, I feel that there is confusion in the terminology. In this section, I would like to describe 3 modifications of this technology from my point of view. On the Internet you can find many articles with different interpretations, and it is absolutely normal if your opinion is different. The most important thing is that you are on the same wavelength as your colleagues. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, there are 3 terms: CI - Continuous Integration (CD), CD - Continuous Delivery (CD) and again CD - Continuous Deployment (CD). ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further I will use these terms in English</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Each modification adds a few extra steps to your development pipeline. </font><font style="vertical-align: inherit;">But the word </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">continuous</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the most important. </font><font style="vertical-align: inherit;">In this context, we mean something that happens from beginning to end, without interruption or manual exposure. </font><font style="vertical-align: inherit;">Let's take a look at CI &amp; CD and CD in this context.</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuous Integration is</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the initial step in evolution. </font><font style="vertical-align: inherit;">After sending the new code to the server, we expect to get a quick feedback that everything is in order with our changes. </font><font style="vertical-align: inherit;">Typically, CI includes the launch of static code analysis tools and unit / internal API tests. This allows you to get information about our code a few seconds / minutes later.</font></font></li>
<li><strong>Continuous Delivery</strong>    ,     /UI-.           ,     CI. -,        . -,         test/staging ‚Äî .  ,      ,         .</li>
<li><strong>Continuous Deployment</strong> ,     (release)    production,         .       release    ,    smoke ‚Äî   production    . Continuous Deployment       .   -  ,     ,     <u>Continuous</u> ().    ,       Continuous Delivery.</li>
</ul><br>
<h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In this section, I must clarify that when we talk about end-to-end UI tests, this implies that we must deploy our changes and related services to test environments. Continuous Integration - the process is not applicable for this task and we must take care to implement at least Continuous Deliver practices. Continuous Deployment also makes sense in the context of UI tests if we are going to run them on production.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And before we look at the illustration of the architecture change, I want to say a few words about GitLab CI. </font><font style="vertical-align: inherit;">Unlike other CI / CD tools, GitLab provides a remote repository and many other advanced features. </font><font style="vertical-align: inherit;">So GitLab is more than CI. </font><font style="vertical-align: inherit;">It includes out of the box source control, Agile management, CI / CD pipelines, logging tools, and metrics collection. </font><font style="vertical-align: inherit;">GitLab architecture consists of Gitlab CI / CD and GitLab Runner. </font><font style="vertical-align: inherit;">I give a brief description from the official site:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitlab CI / CD is a web application with an API that stores its state in a database, manages projects / builds and provides a user interface. </font><font style="vertical-align: inherit;">GitLab Runner is an application which processes builds. </font><font style="vertical-align: inherit;">It can be deployed separately and works with GitLab CI / CD through an API. </font><font style="vertical-align: inherit;">For tests running you need both Gitlab instance and Runner.</font></font></blockquote><br>
<h3>   </h3><br>
<div style="text-align:center;"><img src="https://lh3.googleusercontent.com/UIsLQbXrT_y6aYssPP6VEhVbmyssY3E-UyuTxeNOHGwLa5LVBJFG0wmFBGDLNZw9YD26H7D7ncclkoxBPQKFsyhmVdq-nBFJt2MMVNcCMFDGY3hFATc-XmthyabtcfZstUonm4Cp"></div><br>
<br>
<h3>  </h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Martin Fowler: Continuous Integration</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">GitLab CI/CD</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Continuous Integration book</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Continuous Delivery book</a></li>
</ul><br>
<h3> </h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Jenkins</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">TeamCity</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Travis</a>&nbsp;</li>
<li>  </li>
</ul><br>
<h2>5.  </h2><br>
<h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In this section, we will talk about a popular trend called 'public clouds'. Despite the enormous benefits that the virtualization and containerization technologies described above provide, we still need computing resources. Companies purchase expensive servers or rent data centers, but in this case it is necessary to make calculations (sometimes unrealistic) of how many resources we will need, whether we will use them 24/7 and for what purposes. For example, production requires a server running around the clock, but do we need similar resources for testing after hours? It also depends on the type of testing being performed. An example would be stress / stress tests, which we plan to run after hours to get results the next day. But definitely24-hour server availability is not required for end-to-end auto-tests, and especially for manual testing environments. For such situations, it would be good to receive as many resources as needed on demand, use them and stop paying when they are no longer needed. Moreover, it would be nice to receive them instantly by making a few clicks of the mouse or by running a couple of scripts. For this, public clouds are used. Let's look at the definition:For this, public clouds are used. Let's look at the definition:For this, public clouds are used. Let's look at the definition:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúThe public cloud is defined as computing services offered by third-party providers over the public Internet, making them available to anyone who wants to use or purchase them. </font><font style="vertical-align: inherit;">"They may be free or sold on-demand, allowing customers to pay only per usage for the CPU cycles, storage, or bandwidth they consume."</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 There is an opinion that public clouds are expensive. </font><font style="vertical-align: inherit;">But their key idea is to reduce company costs. </font><font style="vertical-align: inherit;">As mentioned earlier, public clouds allow you to get resources on demand and pay only for the time they are used. </font><font style="vertical-align: inherit;">Also, sometimes we forget that employees get paid, and specialists are also an expensive resource. </font><font style="vertical-align: inherit;">Keep in mind that public clouds greatly facilitate infrastructure support, which allows engineers to focus on more important tasks.&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 What specific resources do we need for end-to-end UI tests? These are mainly virtual machines or clusters (we will talk about Kubernetes in the next section) to launch browsers and emulators. The more browsers and emulators we want to run at the same time, the more CPU and memory are required and the more money we will have to pay for it. Thus, public clouds in the context of test automation allow us to launch a large number (100, 200, 1000 ...) of browsers / emulators on demand, get test results as quickly as possible and stop paying for such insanely resource-intensive capacities.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most popular cloud providers are Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP). The practical guide provides examples of using GCP, but in general it doesn‚Äôt matter what you will use for automation tasks. All of them provide approximately the same functionality. Typically, to select a provider, management focuses on the company's entire infrastructure and business requirements, which are beyond the scope of this article. It will be more interesting for automation engineers to compare the use of cloud providers using cloud platforms specifically for testing purposes such as Sauce Labs, BrowserStack, BitBar and so on. So let's do the same! In my opinion, Sauce Labs is the most famous cloud testing farm, so I took it for comparison.&nbsp;</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCP vs. Sauce Labs for Automation:</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Imagine that we need to run 8 web tests and 8 Android tests at the same time. </font><font style="vertical-align: inherit;">To do this, we will use GCP and run 2 virtual machines with Selenoid. </font><font style="vertical-align: inherit;">On the first we will raise 8 containers with browsers. </font><font style="vertical-align: inherit;">On the second - 8 containers with emulators. </font><font style="vertical-align: inherit;">Let's take a look at the prices:&nbsp;&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://lh6.googleusercontent.com/6-OKgNVZrBU-hNDRqV6vHE-ToAx8b5qqQQjZkJJeH-askdF20lmtBGfh4jkt9GE4ttPZhNDgNraCZvxFJtVy7f8Ay0pK2OqXS2Zl4tZMsAVZO-5Iy5uXdtAa-rYtUNhHUsfSUdCW"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 To run one container with Chrome, we need an </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n1-standard-1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> machine. </font><font style="vertical-align: inherit;">In the case of Android, this will be </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n1-standard-4</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for one emulator. </font><font style="vertical-align: inherit;">In fact, a more flexible and cheaper way is to set specific user values ‚Äã‚Äãfor CPU / Memory, but at the moment it is not important for comparison with Sauce Labs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And here are the rates for using Sauce Labs:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://lh3.googleusercontent.com/Z68bKh4NNL0UU0ZkH_RjFqXl6DwFHspJI2B7lBPhKZIzwZ0HrqO3d1iQkz0Tk-15mLGy0KYyILZpvX8FSwaIIsIwsHJVCDvEXa84l47JQELredmhGhcKn3ZRAnhMofgD3laRuz6R"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I suppose you have already noticed the difference, but still I will give a table with the calculations for our task:</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Required resources</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montly</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Working hours </font></font></strong><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(8 am - 8 pm)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Working hours </font></font></strong><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ Preemptible</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gcp for web</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n1-standard-1 x 8 = n1-standard-8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 194.18</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23 days * 12h * 0.38 = 104.88 $&nbsp;</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23 days * 12h * 0.08 = 22.08 $</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauce Labs for Web</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Virtual Cloud8 parallel tests</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 1.559</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCP for Android</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n1-standard-4 x 8: n1-standard-16</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 776.72</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23 days * 12h * 1.52 = $ 419.52&nbsp;</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23 days * 12h * 0.32 = 88.32 $</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauce Labs for Android</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real Device Cloud 8 parallel tests</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 1.999</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, the difference in cost is huge, especially if you run the tests only in the working twelve-hour period. </font><font style="vertical-align: inherit;">But you can further reduce costs by using preemptible machines. </font><font style="vertical-align: inherit;">What is it?</font></font><br>
<blockquote>A preemptible VM is an instance that you can create and run at a muchower price than normal instances. However, Compute Engine might terminate (preempt) these instances if it requires access to those resources for other tasks. Preemptible instances are excess Compute Engine capacity, so their availability varies with usage.<br>
<br>
If your apps are fault-tolerant and can withstand possible instance preemptions, then preemptible instances can reduce your Compute Engine costs significantly. For example, batch processing jobs can run on preemptible instances. If some of those instances terminate during processing, the job slows but does not completely stop. Preemptible instances complete your batch processing tasks without placing additional workload on your existing instances and without requiring you to pay full price for additional normal instances.</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 And this is still not the end! In fact, I‚Äôm sure that no one runs tests for 12 hours without a break. And if so, then you can automatically start and stop virtual machines when they are not needed. Actual usage time may drop to 6 hours per day. Then payment in the context of our task will decrease as much as $ 11 per month for 8 browsers. Isn't that perfect? But with preemptible machines, we must be careful and prepared for interruptions and unstable operation, although these situations can be provided and processed programmatically. It's worth it!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But by no means do I say 'never use cloud test farms'. </font><font style="vertical-align: inherit;">They have several advantages. </font><font style="vertical-align: inherit;">First of all, this is not just a virtual machine, but a complete solution for testing automation with a set of functionality out of the box: remote access, logs, screenshots, video recording, various browsers and physical mobile devices. </font><font style="vertical-align: inherit;">In many situations, this can be an indispensable chic alternative. </font><font style="vertical-align: inherit;">Especially test platforms are useful for IOS automation when public clouds can only offer Linux / Windows systems. </font><font style="vertical-align: inherit;">But talk about iOS will be in future articles. </font><font style="vertical-align: inherit;">I recommend always looking at the situation and starting from tasks: in some it‚Äôs cheaper and more efficient to use public clouds, and in some test platforms it‚Äôs definitely worth the money spent.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Illustration of the current state of infrastructure</font></font></h3><br>
<div style="text-align:center;"><img src="https://lh6.googleusercontent.com/_We1DvOQ_6vEvaYmCoQB8AlBO7SS4I6chyMC_TOglXRJPqrtJVx8EHIbXwFg0TjKgjvJjj-_LVbpqIIB5apPLoV4q0lJTKLlQeN4-XyT8WOo6Z4l6HNXMULbC-UcDIHdoYWedqHl"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learning Links</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gcp</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCP: Preemptible</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCP: VM pricing</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saucelabs</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparing cloud providers</font></font></a></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similar tools:</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aws</font></font></a>&nbsp;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure</font></font></a></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Orchestration</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technology Brief</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 I have good news - we have almost reached the end of the article! </font><font style="vertical-align: inherit;">At the moment, our automation infrastructure consists of web and Android tests, which we run through GitLab CI in parallel, using tools with Docker support: Selenium grid and Selenoid. </font><font style="vertical-align: inherit;">Moreover, we use virtual machines created through GCP to lift containers with browsers and emulators in them. </font><font style="vertical-align: inherit;">To reduce costs, we start these virtual machines only on demand and stop when testing is not performed. </font><font style="vertical-align: inherit;">Is there anything else that can improve our infrastructure? </font><font style="vertical-align: inherit;">The answer is yes! </font><font style="vertical-align: inherit;">Meet Kubernetes (K8s)!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get started, consider how the words orchestration, cluster, and Kubernetes are related. At a high level, orchestration is a system that deploys and manages applications. To automate testing, such containerized applications are Selenium grid and Selenoid. Docker and K8s complement each other. The first is used to deploy applications, the second for orchestration. In turn, K8s is a cluster. The cluster‚Äôs task is to use VMs as Nodes, which allows you to install various functionalities, programs and services within one server (cluster). If any of the Node crashes, then other Nodes will pick up, which ensures our application runs smoothly. In addition to this, K8s has important functionality related to scaling,thanks to which we automatically get the optimal amount of resources, based on the load and established restrictions.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In truth, manually deploying Kubernetes from scratch is a completely non-trivial task. </font><font style="vertical-align: inherit;">I will leave a link to Kubernetes The Hard Way, a well-known practical guide, and if you are interested, you can practice. </font><font style="vertical-align: inherit;">But, fortunately, there are alternative ways and tools. </font><font style="vertical-align: inherit;">The easiest of them is to use the Google Kubernetes Engine (GKE) in GCP, which will allow you to get a ready-made cluster after a few clicks. </font><font style="vertical-align: inherit;">To start the study, I recommend that you use this approach, as it will allow you to focus on learning how to use K8s for your tasks, instead of exploring how the internal components should be integrated.&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider some of the significant features that K8s provides:</font></font><br>
<br>
<ul>
<li> :  multi-nodes ,  VMs;</li>
<li> :    ,     ;</li>
<li> (Self-healing):   pods (     );</li>
<li>      :  ,        </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 But the K8s are still not a silver bullet. To understand all the advantages and limitations in the context of the tools we are considering (Selenium grid, Selenoid), we briefly discuss the structure of K8s. Cluster contains two types of Nodes: Master Nodes and Workers Nodes. Master Nodes are responsible for managing, deploying, and scheduling decisions. Workers nodes is where the applications are running. Nodes also contains a container launch environment. In our case, this is Docker, which is responsible for operations related to containers. But there are alternative solutions like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">containerd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. It is important to understand that scaling or self-healing does not apply to containers directly. This is done by adding / decreasing the number of pods, which in turn contain containers (usually one container per pod, but there may be more depending on the task). The high-level hierarchy is worker nodes, inside which are pods, inside which containers are raised.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The scaling function is key and can be applied both to nodes inside a cluster node-pool, and to pods inside a node. There are 2 types of scaling that apply to both nodes and pods. The first type - horizontal - scaling occurs due to an increase in the number of nodes / pods. This type is more preferred. The second type, respectively, is vertical. Scaling is done by increasing the size of nodes / pods, not their number. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now consider our tools in the context of the above terms. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenium grid</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As mentioned earlier, Selenium grid is a very popular tool, and it is not a surprise that it was containerised. Therefore, it is not surprising that Selenium grid can be deployed in K8s. An example of how to do this can be found in the official K8s repository. As usual, I attach links at the end of the section. In addition to this, the practical guide shows how to do this in the Terraform series. There is also an instruction on how to scale the number of pods that contain containers with browsers. But the auto-scaling feature in the context of K8s is still not an obvious task. When I started the study, I did not find any practical guidance or recommendations.After several studies and experiments with the support of the DevOps team, we chose the approach of raising containers with the desired browsers inside one pod, which is located inside one worker node. This method allows us to apply the strategy of horizontal scaling of nodes by increasing their number. I hope that in the future the situation will change, and we will see more and more descriptions of the best approaches and turnkey solutions, especially after the release of Selenium grid 4 with a modified internal architecture.especially after the release of Selenium grid 4 with a redesigned internal architecture.especially after the release of Selenium grid 4 with a redesigned internal architecture.</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selenoid</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Currently, deploying Selenoid in K8s is the biggest disappointment. They are not compatible. Theoretically, we can raise a Selenoid container inside a pod, but when Selenoid starts launching containers with browsers, they will still be inside the same pod. This makes scaling impossible and, as a result, the work of Selenoid inside the cluster will not be different from the work inside the virtual machine. The end of the story. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moon</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Knowing this bottleneck while working with Selenoid, the developers released a more powerful tool called Moon. This tool was originally conceived for working with Kubernetes and, as a result, you can and should use the autoscale function. Moreover, I would say that at the moment it is the </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">only</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a tool in the Selenium world, which out of the box has native K8s cluster support ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no longer available, see the next tool</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">A key feature of Moon that provides this support is:&nbsp;</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Completely stateless. </font><font style="vertical-align: inherit;">Selenoid stores in memory information about currently running browser sessions. </font><font style="vertical-align: inherit;">If for some reason its process crashes - then all running sessions are lost. </font><font style="vertical-align: inherit;">Moon contrarily has no internal state and can be replicated across data centers. </font><font style="vertical-align: inherit;">Browser sessions remain alive even if one or more replicas go down.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, Moon is a great solution, but with one problem, it is not free. The price depends on the number of sessions. Only 0-4 sessions can be launched for free, which is not particularly useful. But, starting from the fifth session, you will have to pay $ 5 for each. The situation may differ from company to company, but in our case, using Moon is pointless. As I described above, we can start VMs with Selenium Grid on demand or increase the number of Nodes in the cluster. For approximately one pipeline, we launch 500 browsers and stop all resources after the tests are completed. If we used Moon, we would have to pay an extra 500 x 5 = $ 2500 per month and it doesn‚Äôt matter how often we run the tests. And again, I do not say "do not use Moon." For your tasks, this can be an indispensable solution, for example,if you have a lot of projects / teams in your organization and you need a huge common cluster for everyone. As always, I leave a link at the end and recommend making all the necessary calculations in the context of your task.</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Callisto</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ( </font></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attention! This is not in the original article and is contained only in the Russian translation</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I said, Selenium is a very popular tool, and the IT industry is developing very quickly. While I was working on the translation, a new promising Callisto tool appeared on the network (hello Cypress and other Selenium killers). It works natively with K8s and allows you to run Selenoid containers in pods, distributed by Nodes. Everything works right out of the box, including autoscaling. Fiction, but it is necessary to test. I have already managed to deploy this tool and put in some experiments. But it‚Äôs too early to draw conclusions, after receiving the results at a long distance, perhaps I will review in the following articles. So far I leave only links for independent research.&nbsp;&nbsp;</font></font><br>
<br>
<h3>   </h3><h3><div style="text-align:center;"><img src="https://lh5.googleusercontent.com/tuWunH1efwy0EVB3Tp0r_TMa8U2FQVqn4rvnB7vtGT_5TT-_xzWtgSEN7LQRNc_7_6Y2EopB_rMJbNHJGh5ZYw1dwcaFk1GFyMzck4smoluPlFlwedFB_ba4PZNRoIL3G7HVcrLF"></div><br>
<br>
</h3><h3>  </h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Kubernetes: setup</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Kubernetes: the hard way</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Kubernetes: Selenium</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">GCP: Kubernetes engine</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Moon</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">The Kubernetes Book</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Distributed Automation using Kubernetes</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Selenium Grid 4</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Callisto GitHub</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Wrike TechClub (Callisto)</a></li>
</ul><br>
<h3> </h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Docker swarm</a>&nbsp;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Marathon</a>&nbsp;</li>
</ul><br>
<h2>7.    (IaC)</h2><br>
<h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 And so we got to the last section. Usually, this technology and related tasks are not included in the area of ‚Äã‚Äãresponsibility of automation engineers. And there are reasons for this. Firstly, in many organizations, infrastructure issues are under the control of the DevOps department and development teams do not really care about what the pipeline works with and how to support everything related to it. Secondly, let's be honest, the practice of "Infrastructure as a Code (IaC)" is still not applied in many companies. But it has definitely become a popular trend, and it‚Äôs important to try to be involved in related processes, approaches and tools. Or at least keep abreast of developments.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with the motivation for using this approach. We have already discussed that to run the tests in GitlabCI we need at least the resources to run the Gitlab Runner. And to run containers with browsers / emulators, we need to reserve a VM or cluster. In addition to testing resources, we need a significant number of capacities to support development environments, staging, production, which also includes databases, automatic schedules, network configurations, load balancers, user rights, and so on. A key issue is the effort required to support this all. There are several ways in which we can make changes and roll out updates. For example, in the context of GCP, we can use the UI console in the browser and perform all actions by clicking buttons.An alternative way would be to use API calls to interact with cloud entities or use the gcloud command line utility to perform the necessary manipulations. But with a really large number of different entities and infrastructure elements, it becomes difficult or even impossible to perform all operations manually. Moreover, all these manual actions are uncontrollable. We cannot send them for review before execution, use the version control system and quickly roll back the edits that led to the incident. To solve such problems, engineers created and are creating automatic bash / shell scripts, which is not much better than the previous methods, since they are not so easy to read, understand, maintain and modify in a procedural style.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article and how-to, I use 2 tools related to IaC practice. These are Terraform and Ansible. Some believe that it makes no sense to use them simultaneously, since their functionality is similar and they are interchangeable. But the fact is that initially they are faced with completely different tasks. And the fact that these tools should complement each other was confirmed at a joint presentation by developers representing HashiCorp and RedHat. The conceptual difference is that Terraform is a provisioning tool for managing the servers themselves. While Ansible is a configuration management tool whose task is to install, configure and manage software on these servers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another key distinguishing feature of these tools is the style of writing code. Unlike bash and Ansible, Terraform uses a declarative style based on the description of the desired final state, which must be achieved as a result of execution. For example, if we are going to create 10 VMs and apply the changes through Terraform, then we get 10 VMs. If you apply the script again, nothing will happen, since we already have 10 VMs, and Terraform knows about it, because it stores the current state of the infrastructure in a state file. But Ansible uses a procedural approach, and if you ask him to create 10 VMs, then on the first run we get 10 VMs, similarly to Terraform. But after restarting, we will already have 20 VMs. This is an important difference.In procedural style, we do not store the current state and simply describe the sequence of steps that must be completed. Of course, we can handle various situations, add several checks for the existence of resources and the current state, but there is no point in wasting our time and making efforts to control this logic. In addition, this increases the risk of making mistakes.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Summarizing all of the above, we can conclude that for provisioning servers, Terraform and declarative notation are a more suitable tool. </font><font style="vertical-align: inherit;">But the work of configuration management is better delegated to Ansible. </font><font style="vertical-align: inherit;">Having dealt with this, let's look at examples of use in the context of automation.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 It is important to understand only that the test automation infrastructure should be considered as part of the entire infrastructure of the company. This means that all IaC practices must be applied globally to the resources of the entire organization. Who is responsible for this depends on your processes. DevOps-team is more experienced in these matters, they see the whole picture of what is happening. However, QA engineers are more involved in the process of building automation and the structure of the pipeline, which allows them to better see all the required changes and opportunities for improvement. The best option is to work together, share knowledge and ideas to achieve the expected result.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here are some examples of using Terraform and Ansible in the context of testing automation and the tools we discussed before:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Describe through Terraform the necessary characteristics and parameters of VMs and clusters. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Install with Ansible the necessary tools for testing: docker, Selenoid, Selenium Grid and download the necessary versions of browsers / emulators. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Describe through Terraform the characteristics of the VM in which the GitLab Runner will be launched. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Install with Ansible GitLab Runner and the necessary related tools, set the settings and configurations.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Illustration of the current state of infrastructure</font></font></h3><br>
<div style="text-align:center;"><img src="https://lh3.googleusercontent.com/NCHILxUR9vhkkh1bDYWbgPnJubeDWA0iP_qsp-cZ2TFYE0EI4-htAJHErR20zwDv-XTmy2nS6X4H_G19uJTKRbNYrgQCyC2j3xlVUiZxCAvlWTS9AF3y3moEWCDCmqiWqhtSRVo-"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Study links:</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible and Terraform better together</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A Comprehensive Guide to Terraform</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why we use Terraform and not Chef, Puppet, Ansible, SaltStack, or CloudFormation</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCP: IaC</font></font></a></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similar tools</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chef</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puppet</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saltstack</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vagrant</font></font></a></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To summarize!</font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technology</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tools</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value for automation infrastructure</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></strong></td>
<td>Local running</td>
<td>Node.js, Selenium, Appium</td>
<td><ul>
<li>    web  mobile</li>
<li>     ( Node.js)</li>
</ul><br>
</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td>Version control systems&nbsp;</td>
<td>Git</td>
<td><ul>
<li>    </li>
</ul><br>
</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td>Containerisation</td>
<td>Docker, Selenium grid, Selenoid (Web, Android)</td>
<td><ul>
<li>  </li>
<li> </li>
<li>,   </li>
<li>   </li>
<li> </li>
</ul><br>
</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td>CI / CD</td>
<td>Gitlab CI</td>
<td><ul>
<li>  </li>
<li>  </li>
<li>    / </li>
</ul><br>
</td>
</tr>
<tr>
<td><strong>5</strong></td>
<td>Cloud platforms</td>
<td>Google Cloud Platform</td>
<td><ul>
<li>   (   )</li>
<li>   </li>
<li>    </li>
</ul><br>
</td>
</tr>
<tr>
<td><strong>6</strong></td>
<td>Orchestration</td>
<td>Kubernetes</td>
<td>    /  pods:<br>
<ul>
<li> / </li>
<li></li>
<li>    </li>
</ul><br>
</td>
</tr>
<tr>
<td><strong>7</strong></td>
<td>Infrastructure as a code&nbsp; (IaC)</td>
<td>Terraform, Ansible</td>
<td><ul>
<li>    </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All the benefits of code versioning</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Easy to make changes and maintain</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fully automated</font></font></li>
</ul><br>
</td>
</tr>
</tbody></table></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mind map diagrams: evolution of infrastructure</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step1: Local</font></font><br>
<div style="text-align:center;"><img src="https://lh5.googleusercontent.com/u-8-vu2FwTIoi9cuPDrbO95aGe-ErqPZIiE3ld1xFF_JaG99fJ2Lj51Ot-_vlNnKBoe-YzwecmtPF9o9VYyDkjGnLWyh6_0sEN1rKX-lU9scn-VHrFfeKomywPeuwaZSirh0C0rS"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step2: vcs</font></font><br>
<div style="text-align:center;"><img src="https://lh6.googleusercontent.com/0V8nBmmk8OMUOJvjQqyMqZi0nsoCCkGyG-5hz18Z5cOL8lfEF8W57Umc6uhf0NUHF_GqswYn6aACf8YzJfZTHfGHlpPuQyWibkvv_AOYzEJnlhK7UF3rN1lv0mHlF_FTsKZbXcDm"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step3: Containerisation&nbsp;</font></font><br>
<div style="text-align:center;"><img src="https://lh4.googleusercontent.com/qM3lIOafPuzAEoyYLuZD07Jo9XAJN7vP_ECKwWwvadye8ZXEweCmwpwCBqa8MM4ThTtkWUw6v3z6A9hf5TCLtYZ8YE09-_xobYGHPj2yDkFNQ3I80ZmoEoC-2DdYckkFY4ToPArx"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step4: CI / CD&nbsp;</font></font><br>
<div style="text-align:center;"><img src="https://lh4.googleusercontent.com/0FKjxQxtkeZsKPnivPD_XpC-x_fd0GZGgbGaNxgpG-fWVaZIsr75SNTAE3qrexpnNxlOtQayUvM0uuKZ0AhnhEvvuQR_ijTGgnCn8lHoy1OR8f-6yklU1VV_xca4gRK972mkNfhO"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step5: Cloud Platforms</font></font><br>
<div style="text-align:center;"><img src="https://lh4.googleusercontent.com/ELGgk705LaZ7kwxrvJ-4mpbY16dNa4bpIP2ETzrkTaFS3V99IbqCWhs_P8TGfSfH8S0cagIzsuS5eI16kjWs8YDt-2WUIpsVfx0gh7MUrks11ZaIygQA5V5Oziwi7zgHtwCWGTab"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step6: orchestration</font></font><br>
<div style="text-align:center;"><img src="https://lh6.googleusercontent.com/Rc8Pon4oj6mOPPGqLacl3393gjR3L2UbjBu7iaZNQ6XF6cL7sC9K5AhX49FpnBiuXGrAmrfsiIgcW87Ao4eMp8VwuD2ByJXd1K4U0_-H9WSZNfWY6_j-UI2i2x4EIB6ISDXKKGM8"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
step7: IaC</font></font><br>
<div style="text-align:center;"><img src="https://lh4.googleusercontent.com/SnovcNaAoHySsX3MPe9yYv_3bTZ-zovfmp8slhiYASScgCeUF4gdIkd5bov06iMcVz6zxwvGbCbxVdi5Zdi1CVo7dBdpISn3iYLaJYHnqLVxeMKp9feMY0eApPOmiEzIZU9Y3DGz"></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's next?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So this is the end of the article. But in conclusion, I would like to establish some agreements with you. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On your part</font></font></u><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 As was said at the beginning, I would like the article to be of practical use and help you apply the knowledge you have gained in real work. I add again a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link to a practical guide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But even after that, don‚Äôt stop, practice, study the relevant links and books, find out how it works in your company, find places that can be improved and take part in it. Good luck </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From my side</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the heading it is clear that this was only the first part. Despite the fact that it turned out to be quite large, important topics are still not disclosed here. In the second part, I plan to consider the automation infrastructure in the context of IOS. Due to Apple‚Äôs limitations regarding running iOS simulations only on macOS systems, our set of solutions has been narrowed down. For example, we are unable to use Docker to run a simulator or public clouds to run virtual machines. But this does not mean that there are no other alternatives. I will try to keep you up to date with advanced solutions and modern tools! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, I did not mention quite large topics related to monitoring. In Part 3, I am going to consider the most popular tools for monitoring infrastructure, as well as what data and metrics to consider.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And finally. </font><font style="vertical-align: inherit;">In the future I plan to release a video course on building a test infrastructure and popular tools. </font><font style="vertical-align: inherit;">Currently, there are quite a few courses and lectures on DevOps on the Internet, but all the materials are presented in the context of development, but not testing automation. </font><font style="vertical-align: inherit;">In this matter, I really need feedback if this course will be interesting and valuable for the community of testers and automation engineers. </font><font style="vertical-align: inherit;">Thanks in advance!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497904/index.html">UX-research of RBS: our experience, mistakes and discoveries</a></li>
<li><a href="../en497908/index.html">The end of the hype: What awaits the Scala language next</a></li>
<li><a href="../en497910/index.html">Voice assistants will help drivers not get distracted while driving: in fact - not always and not for everyone</a></li>
<li><a href="../en497912/index.html">HackTheBox. Walkthrough Mango. NoSQL injection and LPE via JJS</a></li>
<li><a href="../en497916/index.html">Extending procedural macros with WASM</a></li>
<li><a href="../en497920/index.html">Reuters: 5 possible scenarios for economic recovery after a coronavirus pandemic</a></li>
<li><a href="../en497922/index.html">The only sure way to upload and download files in Selenium tests</a></li>
<li><a href="../en497928/index.html">OData babel plugin</a></li>
<li><a href="../en497930/index.html">Sinclair zx80 / ‚Äã‚Äãzx81 emulation</a></li>
<li><a href="../en497932/index.html">We study the Mediastreamer2 VoIP engine. Part 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>