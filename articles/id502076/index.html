<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕖 🍝 👩🏾‍🤝‍👩🏽 Robot Troli 2.0. Bagian 1. Navigasi otonom dari robot rumahan berdasarkan ROS 🛄 🕚 🤢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Proyek ini dibangun atas dasar proyek terkenal lainnya di lingkarannya - linorobot (linorobot.org), menggunakan komponen yang tersedia untuk orang awa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Robot Troli 2.0. Bagian 1. Navigasi otonom dari robot rumahan berdasarkan ROS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502076/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proyek ini dibangun atas dasar proyek terkenal lainnya di lingkarannya - linorobot (linorobot.org), menggunakan komponen yang tersedia untuk orang awam yang sederhana. </font><font style="vertical-align: inherit;">Tujuan yang ditetapkan: untuk mencapai gerakan otonom robot di rumah menggunakan komponen biaya rendah, untuk mengevaluasi kinerja mini-PC untuk tujuan yang dinyatakan, untuk mengkonfigurasi tumpukan navigasi untuk bergerak di ruang sempit Khrushchev.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OGxB34-heds" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Besi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daftar komponen dalam padatan adalah sebagai berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raspberry pi 3b - 2800 r .;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lidar rplidar a1 - 7500 p .;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jembatan daya l298n -2pcs - 400 gosok;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wheelset dengan encoders tipe A dan B - 2000 r. </font><font style="vertical-align: inherit;">(210 rpm - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teenzy 3.2 - 2100 r.;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imu 9250 (baik 9150 atau 6050) - 240 p .;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bank daya pada 10000mH - 1500 r.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 baterai 18650 dan dudukan -600 p.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konverter step-down dc-dc c 5V ke 3.3V - 20p.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sepotong kayu lapis, parket -? </font><font style="vertical-align: inherit;">menggosok.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total: 17160 p. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Biaya dapat dikurangi dengan mengganti teenzy dengan arduino mega 2560 (600 p.), Dan Lidar dengan mengganti kinect v.1 (1000 p.): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ec/vb/v4/ecvbv42ipnldzd5vhureodavsqi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, perlu dicatat bahwa kinect pertama memiliki visibilitas minimum (area buta) 0,5 m, yang dapat mempengaruhi navigasi secara negatif dalam kondisi sempit dan agak besar. </font><font style="vertical-align: inherit;">Lidar memiliki zona buta kurang dari 0,2 m. Kinect v.2 tidak akan cocok dengan raspberry 3b (tidak ada usb 3.0). </font><font style="vertical-align: inherit;">Arduino mega lebih rendah dari ukuran teenzy (dan beberapa karakteristik), selain itu, Anda harus sedikit mengolah kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, "desain" terlihat seperti ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ou/ru/x9/ourux9icibrxsh4ruai61e3wkx4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/yg/bh/0h/ygbh0hlvz8juq6qi4e9tarrhznq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada keindahan di sini, tentu saja, tetapi ini bukan tentang itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain robot itu sendiri, sangat diinginkan untuk memiliki PC eksternal di mana cangkang grafis untuk memvisualisasikan tindakan robot (rviz, gazebo) akan diluncurkan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perakitan robot</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu dilukis secara rinci di situs web proyek - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jadi mari kita membahas poin-poin yang menyebabkan kesulitan. </font><font style="vertical-align: inherit;">Pertama, Anda perlu mempertimbangkan bahwa enkoder pada wheelset didukung oleh 3.3V dan, ketika 5V diterapkan, gagal dengan sempurna. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skrip instalasi linorobot berhasil diinstal di ubuntu 16.04, ubuntu 18.04. </font><font style="vertical-align: inherit;">Versi ROS: ROS kinetic atau ROS melodic. </font><font style="vertical-align: inherit;">Pada raspberry 3b, Anda harus terlebih dahulu membuat file swap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode teenzy utama ada di sepanjang jalan:</font></font><br>
<br>
<pre><code class="bash hljs">roscd linorobot/teensy/firmware/lib/config<font></font>
nano lino_base_config.h<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan dituangkan ke dalamnya dengan perintah:</font></font><br>
<br>
<pre><code class="bash hljs">roscd linorobot/teensy/firmware<font></font>
platformio run --target upload<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kumpulan perintah di atas akan digunakan cukup sering, jadi masuk akal untuk menambahkannya ke alias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena kesulitan dalam merakit robot, korelasi yang benar dari kontak yang terhubung dari l298n ke teenzy bisa menyusahkan. </font><font style="vertical-align: inherit;">Meskipun diagram koneksi sangat jelas, roda dapat berperilaku berbeda dan harus bereksperimen, memilih penugasan pin yang benar dalam kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus saya, ternyata seperti ini:</font></font><br>
<br>
<pre><code class="bash hljs">/// ENCODER PINS
<span class="hljs-comment">#define MOTOR1_ENCODER_A 14</span>
<span class="hljs-comment">#define MOTOR1_ENCODER_B 15 </span><font></font>
<font></font>
<span class="hljs-comment">#define MOTOR2_ENCODER_A 11</span>
<span class="hljs-comment">#define MOTOR2_ENCODER_B 12 </span><font></font>
//MOTOR PINS<font></font>
<span class="hljs-comment">#ifdef USE_L298_DRIVER</span>
  <span class="hljs-comment">#define MOTOR_DRIVER L298</span><font></font>
<font></font>
  <span class="hljs-comment">#define MOTOR1_PWM 21</span>
  <span class="hljs-comment">#define MOTOR1_IN_A 1</span>
  <span class="hljs-comment">#define MOTOR1_IN_B 20</span><font></font>
<font></font>
  <span class="hljs-comment">#define MOTOR2_PWM 5</span>
  <span class="hljs-comment">#define MOTOR2_IN_A 8</span>
  <span class="hljs-comment">#define MOTOR2_IN_B 6</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin kedua adalah menentukan spesifikasi roda robot:</font></font><br>
<br>
<pre><code class="bash hljs">//define your robot<span class="hljs-string">' specs here
#define MAX_RPM 210               // motor'</span>s maximum RPM
<span class="hljs-comment">#define COUNTS_PER_REV 1365       // wheel encoder's no of ticks per rev</span>
<span class="hljs-comment">#define WHEEL_DIAMETER 0.065       // wheel's diameter in meters</span>
<span class="hljs-comment">#define PWM_BITS 8                // PWM Resolution of the microcontroller</span>
<span class="hljs-comment">#define LR_WHEELS_DISTANCE 0.235  // distance between left and right wheels</span>
<span class="hljs-comment">#define FR_WHEELS_DISTANCE 0.30   // distance between front and rear wheels. Ignore this if you're on 2WD/ACKERMANN</span>
<span class="hljs-comment">#define MAX_STEERING_ANGLE 0.415  // max steering angle. This only applies to Ackermann st</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RPM dapat ditemukan dalam spesifikasi roda, tetapi CPR (COUNTS_PER_REV) adalah nilai yang dihitung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CPR = PPR x 4. PPR roda kami 341. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* PPR dapat dilihat dalam spesifikasi atau menjalankan kode pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linorobot roslaunch robot minimal. Jalankan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan putar roda 360 derajat. PPR akan sama dengan nilai numerik yang akan ditampilkan di layar setelah rotasi roda: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/7z/ks/be7zksecqhlyuyv-e_dkxqdyrwe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* PPR = abs (RECENT_COUNT - INITIAL_COUNT). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi CPR = 1364. Anda juga perlu mengatur WHEEL_DIAMETER dan LR_WHEELS_DISTANCE dalam meter. Selain itu, LR_WHEELS_DISTANCE adalah jarak antara poros tengah roda, dan bukan dari ujung ke ujung. Indikator lain dapat diabaikan jika robot itu roda dua, diferensial (bukan omni). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin ketiga yang dapat menyebabkan kesulitan - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imu kalibrasi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Untuk melakukan ini, dengan mengikuti instruksi, perlu untuk memperbaiki robot di posisi tertentu. Petunjuk akan berada dalam kode ketika mengeksekusi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skrip do_calib imu_calib rosrun</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/fj/9e/ggfj9eg71ilp0baj7rvshjl-fmw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
setelah selesai imu_calib.yaml dengan pengaturan akan dihasilkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih baik melakukan kalibrasi, meskipun ada file default dengan pengaturan imu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Selain itu, ternyata kalibrasi imu dapat mempengaruhi arah pergerakan robot melalui teleop (kiri bukan kanan dan sebaliknya, sedangkan gerakan bolak-balik itu benar). Situasi tidak diselesaikan dengan penataan ulang pin dalam kode. Imu sendiri telah diperbaiki dan dikalibrasi dengan kurung terbalik, seperti diperbaiki di bagian belakang pangkalan robot. (Imu) lanjutnya flip tanpa kalibrasi ulang menyelesaikan masalah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin keempat - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kal pid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di situs web proyek, prosedur untuk bagaimana menerapkan penyesuaian dijelaskan secara rinci - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, akan sulit bagi pemula untuk mencari tahu apa itu dan bagaimana bekerja dengannya. </font><font style="vertical-align: inherit;">Secara umum, regulasi pid diperlukan untuk memastikan bahwa robot bergerak secara seragam, tanpa menyentak / mendadak pengereman. </font><font style="vertical-align: inherit;">Tiga parameter bertanggung jawab untuk ini: p, i, d. </font><font style="vertical-align: inherit;">Nilai-nilainya terkandung dalam kode utama yang diunggah ke teenzy:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#define K_P 2.0 // P constant angle</span>
<span class="hljs-comment">#define K_I 0.3 // I constant</span>
<span class="hljs-comment">#define K_D 0.1 // D constant</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat bereksperimen dengan mereka dengan menjalankan robot:</font></font><br>
<br>
<pre><code class="bash hljs">roslaunch linorobot minimal.launch
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya pada PC eksternal di tiga terminal berbeda:</font></font><br>
<br>
<pre><code class="bash hljs">rosrun lino_pid pid_configure<font></font>
rosrun teleop_twist_keyboard teleop_twist_keyboard.py<font></font>
rqt<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan memindahkan slider p, d, i di terminal rqt, dan kemudian mengendalikan robot di terminal teleop_twist_keyboard, Anda dapat mencapai hasil yang diperlukan tanpa harus mengunduh kode dengan parameter pid baru setiap kali di teenzy: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/9m/ef/qr9mefipf7mqz9vwqqyqkktkeug.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yaitu, semuanya terjadi dengan cepat dan saat itu di firmware teenzy mungkin memiliki arti yang sangat berbeda. </font><font style="vertical-align: inherit;">* Anda tidak dapat fokus pada grafik, karena </font><font style="vertical-align: inherit;">secara visual, dan itu akan dipahami BAGAIMANA robot bepergian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka merekomendasikan untuk memulai dengan mengatur nilai p = 1.0, d = 0.1, i = 0.1. </font><font style="vertical-align: inherit;">Dalam kasus kami, nilainya adalah sebagai berikut (diperoleh secara eksperimental) p = 2.0, i = 0,3, d = 0,1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, nilai-nilai ini harus ditetapkan dalam kode dan diisi teenzy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, jangan lupa untuk mengatur kode (DEBUG 0 dan bukannya DEBUG 1):</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#define DEBUG 0</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Odometri</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk orientasi robot dan navigasi selanjutnya, data lidar, imu dan data enkoder digunakan. Jika kalibrasi imu dilakukan dengan benar, lidar dipasang dengan benar, dan nilai-nilai encoder sudah benar, maka seharusnya tidak ada masalah dengan odometri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memastikan odometry benar, Anda perlu sedikit naik robot melalui teleop dan melihat nilai-nilai dalam topik odom, ini ditulis pada halaman proyek - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan juga melihat ke dalam shell visual rviz: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rr/td/si/rrtdsilkdlggf3ifjhk1uhl8bz0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satu sel di rviz adalah 1 m, jadi disarankan bagi robot untuk melewati meteran ini baik dalam editor visual dan juga dalam bentuk barang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, jarak yang ditempuh ditampilkan dalam indikator w: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i1/oj/l6/i1ojl6vg5jyugymjwgk-5cfsrlm.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini juga harus cenderung 1 m. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal yang sama berlaku untuk sudut rotasi robot:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l0/uf/bv/l0ufbvhsko99na50frablnrvsc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Di rviz dan hidup, robot harus berputar pada sudut yang sama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Odometry dari lidar didefinisikan dengan cara yang sama - sebuah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jarak dari lidar ke dinding terdekat baik hidup dan di rviz harus cocok.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam ROS, perhatian khusus diberikan pada transformasi - tf. </font><font style="vertical-align: inherit;">Secara umum, konsep ini menggambarkan korelasi objek relatif satu sama lain dalam ruang. </font><font style="vertical-align: inherit;">Agar objek tidak menggantung di udara, dan program memahami bagaimana mereka disajikan relatif satu sama lain, perlu memperhatikan pengaturan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proyek ini, semua koneksi sudah dikonfigurasi relatif satu sama lain dan Anda hanya perlu menyesuaikan indikator, misalnya, menunjukkan bagaimana Lidar berada. </font><font style="vertical-align: inherit;">Ini perlu bagi robot untuk memahami bahwa hambatan tidak muncul langsung di depannya, tetapi di depan lidar, yang dipisahkan dari pusat robot pada jarak tertentu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita pergi ke direktori yang sesuai:</font></font><br>
<br>
<pre><code class="bash hljs">roscd linorobot/launch<font></font>
nano bringup.launch<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pangkalan itu sendiri terletak pada jarak 0,065 m dari lantai:</font></font><br>
<br>
<pre><code class="bash hljs">&lt;node pkg=<span class="hljs-string">"tf_ros"</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">"static_transform_publisher"</span> name=<span class="hljs-string">"base_footprint_to_base_link"</span> args=<span class="hljs-string">"0 0 0.065 0 0 0  /base_footprint /base_link "</span>/&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di laser.launch, Anda perlu mengatur lokasi lidar relatif terhadap pusat basis robot:</font></font><br>
<br>
<pre><code class="bash hljs">roscd linorobot/launch/include<font></font>
nano laser.launch<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus saya, LIDAR digeser sepanjang sumbu x: -0,08, y: 0,04 dan "naik" di atas basis (sumbu z): 0,08m:</font></font><br>
<br>
<pre><code class="bash hljs">&lt;node pkg=<span class="hljs-string">"tf2_ros"</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">"static_transform_publisher"</span> name=<span class="hljs-string">"base_link_to_laser"</span>
args=<span class="hljs-string">"-0.08 0.04 0.08 0 0 0  /base_link /laser "</span>/&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di rviz, lokasi ini dapat diamati secara visual: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1v/rz/gj/1vrzgjmhx-gf-jar7jxfbhcovte.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun tidak jauh dari Lidar, </font><font style="vertical-align: inherit;">kami akan menyesuaikan </font><font style="vertical-align: inherit;">frekuensinya sehingga memberikan lebih banyak poin (secara default memberi 4k), ini akan membantu dalam membangun peta:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> linorobot/launch/include/lidar<font></font>
nano rplidar.launch<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan parameter:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"scan_mode"</span>  <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Boost"</span>/&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan berubah </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"angle_compensate"</span>    <span class="hljs-attr">type</span>=<span class="hljs-string">"bool"</span>   <span class="hljs-attr">value</span>=<span class="hljs-string">"false"</span>/&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang 8k siap membantu kami: Lokasi </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/u0/fq/zfu0fqd4d7nwmuv50am1qhwqxbm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fisik Lidar pada robot juga penting:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/mw/vq/46mwvqq3kj7nxpskvoadm7xe738.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membangun peta ruang 2d</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di situs web proyek diusulkan untuk membangun peta ruang dengan meluncurkan di dua terminal:</font></font><br>
<br>
<pre><code class="bash hljs">roslaunch linorobot bringup.launch<font></font>
roslaunch linorobot slam.launch<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, praktik telah menunjukkan bahwa slam, yang datang dengan proyek secara default, menolak untuk bekerja ketika mode lidar adalah 8k: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/xa/a5/zexaa5f_1byvgcvvvkvcr7cowbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sementara dalam mode 4k, kartunya tidak terlalu sukses, mereka sangat berisik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena itu, lebih baik menggunakan slam lain - hector-slam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara menginstalnya ditunjukkan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah instalasi, prosedur untuk membuat peta akan sama, tetapi alih-alih roslaunch linorobot slam.launch, jalankan roslaunch my_hector_mapping my_launch.launch </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maps lebih bersih, tetapi kemudian mereka lebih baik untuk memodifikasi dalam editor grafis, menghapus yang tidak perlu, terutama jika tutup bertabrakan dengan cermin ketika membangun peta. : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cn/zo/jv/cnzojvfwpkwgldoo3mylfwwh-yg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jangan lupa untuk menyimpan peta kamar:</font></font><br>
<br>
<pre><code class="bash hljs">rosrun map_server map_saver -f my-map
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Peta lebih baik diperoleh di senja yang menyenangkan, ini akan memeras maksimal dari anggaran Lidar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bersambung.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502054/index.html">Jaringan saraf convolutional dan integrasinya di iOS (bagian 2)</a></li>
<li><a href="../id502066/index.html">Perintah konsol sederhana yang harus diketahui semua orang</a></li>
<li><a href="../id502068/index.html">110 volt di komputer Anda</a></li>
<li><a href="../id502070/index.html">Sejarah Pentax (artikel plus video)</a></li>
<li><a href="../id502072/index.html">Docking ISS menggunakan JavaScript dan kompas</a></li>
<li><a href="../id502080/index.html">Metode Kanban: Contoh PNZ No. 1, proses studi-pengukuran dalam startup</a></li>
<li><a href="../id502084/index.html">Memeriksa portal layanan publik regional yang dimuat melalui dalang</a></li>
<li><a href="../id502086/index.html">Menyiapkan Minio sehingga pengguna hanya dapat bekerja dengan embernya</a></li>
<li><a href="../id502088/index.html">Kisah kelebihan dan waktu yang hilang. Menurut py3</a></li>
<li><a href="../id502092/index.html">Dukungan teknologi dan peraturan untuk layanan kepercayaan digital di Federasi Rusia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>