<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴🏿 🈯️ 👩🏾‍🔧 ROSトラックトロリー。パート7.ロボットのローカリゼーション：gmapping、AMCL、ルームマップ上の参照ポイント 💗 😘 🔟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="シリーズの投稿：
 8. ROS制御電話、GPSノードから制御します
 。7.ロボットのローカリゼーション：マッピング、AMCL、ルームマップ上の基準点
 6.ホイールエンコーダー、ルームマップ、ライダーによる
 オドメトリ5. rvizとガゼボで作業します：xacro、新しいセンサー。 
 4. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROSトラックトロリー。パート7.ロボットのローカリゼーション：gmapping、AMCL、ルームマップ上の参照ポイント</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472984/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズの投稿：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. ROS制御電話、GPSノードから制御します</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。7.ロボットのローカリゼーション：マッピング、AMCL、ルームマップ上の基準点</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.ホイールエンコーダー、ルームマップ、ライダーによる</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オドメトリ5. rvizとガゼボで作業します：xacro、新しいセンサー。</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. rvizおよびgazeboエディターを使用してロボットシミュレーションを作成します。</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.加速し、カメラを変更し、歩行を修正し</font></font></a> <font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。2.ソフトウェア</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.アイロン</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
前回、予算のLIDAR RPlidar-A1をインストールした後、ルームマップを作成し、オドメトリを操作しました。しかし、ロボットは、カードを持っていて、光学センサーからのオドメトリを調整しているにもかかわらず、環境の中で不安を感じています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
むしろ、彼はまったく彼女に会いません。</font><font style="vertical-align: inherit;">そして、彼は完成したマップに沿って遠くに乗ります、障害物は彼のためではありません。</font><font style="vertical-align: inherit;">これは楽しいと同時に悲惨なことでもあります。</font><font style="vertical-align: inherit;">一方では、障害物を気にせず、心が好きなところへ移動します。他方では、別の部屋やキッチンに行くことはほとんどありません。</font><font style="vertical-align: inherit;">したがって、ROSが提供するアルゴリズムと、紳士のライダーとエンコーダーのセットを使用して、ロボットを空間に配置する方法について説明します。</font><font style="vertical-align: inherit;">ただし、ローカリゼーションに直接進む前に、別のROSパッケージについて説明します。これにより、部屋の2Dマップを作成することもでき、前の投稿のROSパッケージよりも優れている場合もあります。</font><font style="vertical-align: inherit;">gmappingについて理解してください。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rmクランgmapping</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはオリジナルではなく、このトピックに関する既存のHabr記事の開発を使用しますが、それに含まれる情報を拡張、更新、および深化します。</font><font style="vertical-align: inherit;">この記事は、「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laser_scan_matcherを使用したオドメトリなしのROSでの地図の作成と移動ロボットのローカライズ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」と呼ばれてい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
操作の一部（高負荷アプリケーション-rviz）は、コンピューター（ロボットの外）、残り（モーションドライバー、LIDAR起動ノード）-ロボットで実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、上記の記事のシナリオに従って、ROSキネティック用のlaser_scan_matcherをコンピューターにインストールします（記事はインディゴでした）。</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo apt-get install ros-kinetic-laser-scan-matcher</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットのライダーでうなずく：</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rplidar_ros rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターで：</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch laser_scan_matcher demo.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*ロボットが読み込まれるたびにマスターノードが起動するため、roscoreを実行する必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行中のrvizでは、部屋の輪郭とその中のゴミが表示</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/th/fi/n6thfijzochqx9o6kdsj92uxb-w.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
されます。gmappingROSパッケージを操作するには、laser_scan_matcherが必要です。</font><font style="vertical-align: inherit;">gmapping自体をインストールする必要はありません。それは、ROS Kineticの一部としてすでに仮想マシンにあります。</font><font style="vertical-align: inherit;">システム内のパッケージの可用性を確認してみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7o/ad/og/7oadogk379bwds6ytfwb4mxywlc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、上記の記事のように、コンピューター（ロボットではない）でgmappingを使用して起動ファイルを作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roscd roscd rosbots_description/launch<font></font>
nano my_gmapping_launch.launch<font></font>
     <font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">launch</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"tf"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"static_transform_publisher"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"base_link_to_laser"</span>
           <span class="hljs-attr">args</span>=<span class="hljs-string">"0.0 0.0 0.0 0.0 0.0 0.0 /base_link /laser 40"</span> /&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"laser_scan_matcher"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"laser_scan_matcher_node"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_scan_matcher_node"</span> <span class="hljs-attr">output</span>=<span class="hljs-string">"screen"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fixed_frame"</span> <span class="hljs-attr">value</span> = <span class="hljs-string">"odom"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"use_odom"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"publish_odom"</span> <span class="hljs-attr">value</span> = <span class="hljs-string">"true"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"use_alpha_beta"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"max_iterations"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">node</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"gmapping"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"slam_gmapping"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"slam_gmapping"</span> <span class="hljs-attr">output</span>=<span class="hljs-string">"screen"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"map_udpate_interval"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1.0"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delta"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.02"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">node</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">launch</span>&gt;</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードからわかるように、作成者はtf、laser_scan_matcher、gmappingの3つのノードを開始します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再びロボットでLIDARを実行してみましょう。</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rplidar_ros rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターで、新しくベイクされた起動ファイルとrvizエディター：</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description my_gmapping_launch.launch</code></pre><br>
<pre><code class="plaintext hljs">rosrun rviz rviz</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rvizでは、ロボットカートに関する以前の投稿でマップを作成したときに取得したものと同様の画像が表示されます。</font><font style="vertical-align: inherit;">今回のみgmappingパッケージが機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私は認めざるを得ません、それはひどく働きません。</font><font style="vertical-align: inherit;">LIDARがその軸を中心に回転したときにhector_slamが多数のアーティファクトをマップに残した場合、今回はほとんどアーティファクトがありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/au/ol/enauol33xcvfn9-xmaxq1tgzoog.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
部屋を移動した後、構築されたマップも保存されます。</font></font><br>
<code>rosrun map_server map_saver -f map-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで、map-1は保存するマップの名前です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amclによるローカリゼーション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップ上のロボットの位置を決定するために使用されるアルゴリズムはAMCLと呼ばれます。</font><font style="vertical-align: inherit;">AMCLはマルチパーティクルフィルターを使用して、マップ上のロボットの位置を追跡します。</font><font style="vertical-align: inherit;">私たちのロボットでは、ROSパッケージ（http://wiki.ros.org/amcl）を使用してAMCLを実装しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットに対してAMCLを実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、コンピューターのプロジェクトフォルダーで、別の起動ファイルを作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼に電話しましょう</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amcl-2.launch</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">launch</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"/use_sim_time"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"false"</span>/&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"tf"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"static_transform_publisher"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"base_link_to_laser"</span> 
    <span class="hljs-attr">args</span>=<span class="hljs-string">"0.0 0.0 0.0 0.0 0.0 0.0 /base_link /laser 40"</span> /&gt;</span><font></font>
<font></font>
 <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"laser_scan_matcher"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"laser_scan_matcher_node"</span> 
    <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_scan_matcher_node"</span> <span class="hljs-attr">output</span>=<span class="hljs-string">"screen"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"fixed_frame"</span> <span class="hljs-attr">value</span> = <span class="hljs-string">"odom"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"use_alpha_beta"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"max_iterations"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">node</span>&gt;</span><font></font>
<font></font>
 <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"map_server"</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"map_server"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"map_server"</span> <span class="hljs-attr">args</span>=<span class="hljs-string">"/home/pi/catkin_ws/src/rosbots_description/maps/map-3.yaml"</span>/&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"amcl"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"amcl"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"amcl"</span> <span class="hljs-attr">output</span>=<span class="hljs-string">"screen"</span> &gt;</span>
  <span class="hljs-comment">&lt;!-- Publish scans from best pose at a max of 10 Hz --&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_model_type"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"diff"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_alpha5"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"transform_tolerance"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.2"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gui_publish_rate"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10.0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_max_beams"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"30"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"min_particles"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"500"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"max_particles"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"5000"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"kld_err"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.05"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"kld_z"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.99"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_alpha1"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_alpha2"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.2"</span>/&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!-- laser, translation std dev, m --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_min_range"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"-1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_max_range"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"-1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_alpha3"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.8"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_alpha4"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_z_hit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.5"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_z_short"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.05"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_z_max"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.05"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_z_rand"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.5"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_sigma_hit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_lambda_short"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_lambda_short"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_model_type"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"likelihood_field"</span>/&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!-- &lt;param name="laser_model_type" value="beam"/&gt; --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"laser_likelihood_max_dist"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2.0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"update_min_d"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"update_min_a"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.5"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"odom_frame_id"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"odom"</span>/&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"base_frame_id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"str"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"base_link"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"global_frame_id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"str"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"map"</span> /&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"resample_interval"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"transform_tolerance"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"recovery_alpha_slow"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"recovery_alpha_fast"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0.0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"use_map_topic"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"first_map_only"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">node</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">launch</span>&gt;</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードはを除いて、すでに言及した記事と完全に同一である：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -北陽ライダーを（それがロボット上で実行されます）を開始したノードは除外された</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -部屋のマップのパスと名前が（マップ-3.yaml）異なっている</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第四のノードはコードで発売されています</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - TF </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - map_server </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - laser_scan_matcher </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -amcl amcl </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ノードは、以降のロボットのローカライズのためにmap_serverが公開するマップを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
起動ファイルを実行し、結果を確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかしロボットへ：</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rplidar_ros rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューター上：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1番目のターミナル：</font></font><code>roslaunch rosbots_description amcl-2.launch</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のターミナル：</font></font><code>roslaunch rosbots_description rviz.launch</code><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rvizの起動後、このエディターの次の手順は次のようになります。</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 -rvizにディスプレイを追加します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•LaserScan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•マップ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•PoseArray- </font></font><br>
<img src="https://habrastorage.org/webt/6_/cr/wx/6_crwxijh3m_4f603mfbh50rtgy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 起動時から、ロボットを初期段階でローカライズし</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">amclは、ロボットがどこで開始され、どこに配置されているかを認識していません。 「初期初期化」が必要です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、rvizに「2Dは、姿勢推定を」と、ロボットがその位置を示すために示されているウィンドウに緑色の矢印の右側を使用して選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yw/0m/ld/yw0mldfltefrfanxznd67szgcos.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この操作はrvizにフレーム「マップ」を選択して実行する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/ou/cp/edoucptrqqypqtuz6v8zc01t6_8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ターミナルでは、我々はロボットの座標を取得します。</font></font><br>
<br>
<pre><code class="plaintext hljs">[ INFO] [1572374324.454855505]: Setting pose (1572374324.454806): -0.014 -0.012 0.655</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地図上の緑の矢印を繰り返し使用して、地図上のロボットの位置を設定できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、マップ上</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hp/2i/az/hp2iazhcse99yrqokt6hjwi0_y4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
のLIDAR </font><font style="vertical-align: inherit;">（赤い枠）からのデータが部屋の壁の実際の位置に一致するか近いことが望ましい：</font><font style="vertical-align: inherit;">rviz可視化ウィンドウでは、ロボットの周りに特徴的な赤い矢印が表示されます*：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y0/tp/ej/y0tpejzuv5yh_dxsksqqrsbbvf8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*ロボットとして、可視化のための軸があります（ペイントされたrviz全体）モデルはまだ非表示です）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
**矢印が表示されない場合は、rvizに追加されたPoseArrayディスプレイを削除して再確認してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットが配置されている地図上に直接示したという事実にもかかわらず、システムは、赤い矢印が描かれている場所にある可能性があると想定しています。</font><font style="vertical-align: inherit;">これは、マップ上のロボットのありそうな位置です。</font><font style="vertical-align: inherit;">多数の矢印とマップ上のそれらの散布は、システムがまだロボットの正確な位置を認識していないことを示しています。</font><font style="vertical-align: inherit;">ただし、シューターが密集している場所ほど、ロボットの可能性が高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムがロボットの正確な位置をより正確に理解するためには、ロボットの位置を決定するノードが実行されている地図に乗る必要があります。</font><font style="vertical-align: inherit;">このセットには、ライダーとエンコーダーがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、起動したLIDARだけを使用して地図上を移動すると同時に、その（LIDAR）ヘルプだけでロボットを確実にローカライズできるかどうかを確認します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地図上でロボットに乗る</font></font></b><div class="spoiler_text"> :<br>
<br>
<pre><code class="plaintext hljs">rosrun rosbots_driver part2_cmr.py</code></pre><br>
 :<br>
<br>
<pre><code class="plaintext hljs">rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
旅行中、amclはトピック/スキャン、/マップ、/ tfの読み取りを開始し、トピック/ amcl_poseおよび/ particlecloudでロボットの場所を公開します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移動すると、矢印の数が減少し、矢印がロボットの実際の位置にある点でますます凝縮されることがわかります。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7tRcW7K5D5c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写真は、モデルがどのように移動するかを示しています（リンクのツリーの形で）。</font><font style="vertical-align: inherit;">また、LIDARはあいまいな部屋の境界でのローカリゼーションに十分に対応できていないこともわかります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amclノードコードの他のパラメーターは何を意味しますか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
従来、これらは基本（一般）、フィルターパラメーター（フィルター）、レーザーパラメーター（ライダー）（レーザーパラメーター）に分かれています。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主なパラメータ：</font></font></b><div class="spoiler_text"><ul>
<li>odom_model_type (default: «diff»):     .   diff,   .     «omni,» «diff-corrected,»  «omni-corrected.» </li>
<li>odom_frame_id (default: «odom»):  frame ( ),     .      odom.</li>
<li>base_frame_id (default: «base_link»): frame   .</li>
<li>global_frame_id (default: «map»): frame ,   map-server     map </li>
<li>use_map_topic (default: false):            ( ,     ROS   (services)   (actions).</li>
</ul><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィルターパラメーター</font></font></b><div class="spoiler_text">        .<br>
<br>
<ul>
<li>min_particles (default: 100):       .   500.</li>
<li>max_particles (default: 5000):       .</li>
<li>kld_err (default: 0.01):          .   0.05</li>
<li>update_min_d (default: 0.2):    ( ),    ,    .</li>
<li>update_min_a (default: /6.0):    ( ),    ,    .   0.5</li>
<li>resample_interval (default: 2):    ,    .   1.</li>
<li>transform_tolerance (default: 0.1):  ( ),       ,  ,      .</li>
<li>gui_publish_rate (default: -1.0):   ( ),        .    -1.0,   .   10.</li>
</ul><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レーザーのパラメーター（LIDAR）（レーザーパラメーター）</font></font></b><div class="spoiler_text">      amcl   .<br>
<br>
<ul>
<li>laser_min_range (default: -1.0):   ,   ; -1.0     ,    .</li>
<li>laser_max_range (default: -1.0):   ,   ; -1.0      .</li>
<li>laser_max_beams (default: 30):            .</li>
<li>laser_z_hit (default: 0.95):  z_hit   .</li>
<li>laser_z_short (default: 0.1):  z_short   .</li>
<li>laser_z_max (default: 0.05):  z_max   .</li>
<li>laser_z_rand (default: 0.05):  z_rand   .</li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
min_particlesパラメータとmax_particlesパラメータが何に影響するか見てみましょう。</font><font style="vertical-align: inherit;">それらの値を減らすと、起動ファイルを起動したときに、ビジュアルエディター内のパーティクルの数が明らかに少なくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのパラメーターはセマンティックロードを実行しますが、記事のフレームワーク内で各パラメーターを変更した場合の影響を解析することは困難です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルームマップの基準点</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名前はキャッチーで、この特定の瞬間におけるマップ上のロボットの位置を意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らは何のために必要ですか？</font><font style="vertical-align: inherit;">ロボットが部屋のポイントAからキッチンのポイントBに移動したことを理解するため。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットの（ポーズ）の位置に関するデータは、amcl作業ノード（上記の記事で開始したもの）で取得できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、トピック/ amcl_poseを見てください：</font></font><br>
<br>
<pre><code class="plaintext hljs">rostopic echo -n1 /amcl_pose</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*キーn1-トピック内のメッセージのフローを「修正」します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pd/jm/s7/pdjms7pgfkl7olfe12ypehy14ka.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
呼び出されたときに、ロボットがトピックを調べないようにロボットの位置（座標）を提供するサービスを作成してみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.新しいrosパッケージを作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">cd  catkin_ws/src<font></font>
catkin_create_pkg get_pose rospy<font></font>
cd get_pose/src</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.フォルダーにファイルを作成します。</font></font><br>
 <br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_pose_service.py</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#! /usr/bin/env python</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> rospy
<span class="hljs-keyword">from</span> std_srvs.srv <span class="hljs-keyword">import</span> Empty, EmptyResponse <span class="hljs-comment"># Import the service message python classes generated from Empty.srv.</span>
<span class="hljs-keyword">from</span> geometry_msgs.msg <span class="hljs-keyword">import</span> PoseWithCovarianceStamped, Pose<font></font>
<font></font>
robot_pose = Pose()<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">service_callback</span>(<span class="hljs-params">request</span>):</span>
    <span class="hljs-keyword">print</span> <span class="hljs-string">"Robot Pose:"</span>
    <span class="hljs-keyword">print</span> robot_pose
    <span class="hljs-keyword">return</span> EmptyResponse() <span class="hljs-comment"># the service Response class, in this case EmptyResponse</span><font></font>
    <font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sub_callback</span>(<span class="hljs-params">msg</span>):</span>
    <span class="hljs-keyword">global</span> robot_pose<font></font>
    robot_pose = msg.pose.pose<font></font>
    <font></font>
<font></font>
rospy.init_node(<span class="hljs-string">'service_server'</span>) <font></font>
my_service = rospy.Service(<span class="hljs-string">'/get_pose_service'</span>, Empty , service_callback) <span class="hljs-comment"># create the Service called get_pose_service with the defined callback</span>
sub_pose = rospy.Subscriber(<span class="hljs-string">'/amcl_pose'</span>, PoseWithCovarianceStamped, sub_callback)<font></font>
rospy.spin() <span class="hljs-comment"># mantain the service open.</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*実行可能にすることを忘れないでくださいchmod + x get_pose_service.py </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.ノードコードでファイルの起動を作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ..<font></font>
mkdir launch &amp;&amp; cd launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ナノ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_pose_service.launch</font></font></b><div class="spoiler_text"><pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">launch</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"get_pose"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"get_pose_service.py"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"service_server"</span> <span class="hljs-attr">output</span>=<span class="hljs-string">"screen"</span>&gt;</span>       
    <span class="hljs-tag">&lt;/<span class="hljs-name">node</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">launch</span>&gt;</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.キャットキンを再構築することを忘れないでください：</font></font><br>
<br>
<pre><code class="plaintext hljs">cd catkin_ws<font></font>
catkin_make</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、新しい起動ファイルを含むすべてを再起動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかしロボットへ：</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rplidar_ros rplidar.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターで：</font></font><br>
<br>
<pre><code class="plaintext hljs">1- : roslaunch rosbots_description amcl-2.launch<font></font>
2- : roslaunch rosbots_description rviz.launch<font></font>
3- : roslaunch get_pose get_pose_service.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいサービスに目を向けると、マップ上のロボットの現在の位置がわかります（ROSサービスを呼び出します）。</font></font><br>
<br>
<pre><code class="plaintext hljs">rosservice call /get_pose_service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
起動get_poseを実行しているターミナルで、マップ上のロボットの座標を取得します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/2r/sg/hg2rsg_svikphbuyrvkv-iwzqj4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。考えられるエラー。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[rviz.launch]は、パッケージ[rosbots_description]の起動ファイルでも、[rosbots_description]も起動ファイル名</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションで</font><font style="vertical-align: inherit;">はありません</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">cd  catkin_ws<font></font>
source devel/setup.bash</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472970/index.html">Telegramプロトコルと組織的アプローチに対する批判。パート1、技術：クライアントをゼロから作成した経験-TL、MT</a></li>
<li><a href="../ja472972/index.html">私たちは、JavaScriptクラスとしてCookieを使用します</a></li>
<li><a href="../ja472978/index.html">彼自身の息子のためのArduinoオーサリングコース</a></li>
<li><a href="../ja472980/index.html">ショーツBelokamentseva</a></li>
<li><a href="../ja472982/index.html">「故障を見つけるために聞いてください」：故障した産業機械のオーディオ録音が公開されました</a></li>
<li><a href="../ja472988/index.html">Fast.aiを使用してテキストの調性を分析します</a></li>
<li><a href="../ja472994/index.html">春の何が悪いの？</a></li>
<li><a href="../ja472996/index.html">ペンタゴンは兵士の思考でドローン制御技術を開発</a></li>
<li><a href="../ja473000/index.html">外国人のための短い数学ガイド</a></li>
<li><a href="../ja473002/index.html">宇宙社会学の劉Qixinの枠組みにおけるフェルミパラドックスの説明</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>