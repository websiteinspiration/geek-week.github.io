<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìû ü•† üï¥üèº Zabbix: network topology is clear and automatic ü§¥üèø üî§ ‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Manage a larger network than a localhost? Do not control, but want to learn? We invite you to the course ‚ÄúLinux. Level 5. Zabbix. Monitoring IT infras...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zabbix: network topology is clear and automatic</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/486814/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manage a larger network than a localhost? Do not control, but want to learn? We invite you to the course </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúLinux. Level 5. Zabbix. Monitoring IT infrastructure of an enterprise</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">‚Äù</font></a><font style="vertical-align: inherit;"> At the free seminar of the Specialist training center at Bauman Moscow State Technical University, you will learn how to teach Zabbix to monitor the network automatically: find existing and add new nodes, draw and update the topology. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iv/1c/ut/iv1cutamccowubgbjxpirduuwwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The seminar will be held by the leading teacher of the "Specialist" center at Bauman MSTU, the main system administrator of the network of MSTU. N.E.Bauman Vyacheslav Aleksandrovich Lokhturov. Sign up (or look at the recordings) for our </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">free seminars</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hello everyone! </font><font style="vertical-align: inherit;">My name is Vyacheslav Lokhturov. </font><font style="vertical-align: inherit;">I work as an engineer at Bauman Moscow State Technical University. </font><font style="vertical-align: inherit;">Since graduating in 1997, I have been working as an engineer. </font><font style="vertical-align: inherit;">At the same time I teach at the training center No. 1 "Specialist" - a company that is friendly MSTU. </font><font style="vertical-align: inherit;">Many other teachers and staff work there. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The theme of the webinar will be part of my work as an engineer - a wonderful monitoring system ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network topology: background, Baumanka Wikipedia, sources</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The webinar recording can be viewed at this link: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://wiki.val.bmstu.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a wiki format. My email addresses are: val@bmstu.ru, val@specialist.ru. This </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I use as an engineer. There are a lot of different materials. If you don‚Äôt like it, there are a lot of materials on the Internet on your topic with us (‚ÄúZabbix‚Äù). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the point of view of teaching material and teaching, I use the section "Materials on the methodology of reading courses": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/xt/bc/dxxtbcel7fbzpfzncdnohifiopy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And there is a section with webinars. For each of the readings by me there is a record here: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y9/sy/on/y9syon5yqio6tinrekmuwju2qec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I immediately said: ‚ÄúIf we do, let's do the coolest! Let's show how the network topology is automatically built in Zabbix. In 45 minutes I have to tell this.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regarding the network topology: at Bauman MSTU a huge network; accordingly, the network topology is what we really needed for a long time. Historically, Zabbix was not the system that we used at the initial stage. Like all people from departments like computer science, management, computer system, complex and network, we all liked to program ourselves, and now we programmed ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have a small Wikipedia that is used for work. And among the elements of this Wikipedia there is a section devoted to network switching. Access to this Wikipedia is still closed by a small VPN: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/th/kw/nwthkwj2jsj-srqt6xkqrvgpps0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôll now show you what the network topology looks like at our university. It is worth it to see; and then compare with the result:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ma/a2/7h/maa27hc-e9fct-_lqqkig-pn6gs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It seems to me that everything is clear: all the switches and their path to the root switch; </font><font style="vertical-align: inherit;">if something is missing, we will quickly recover from this text file. </font><font style="vertical-align: inherit;">The network topology is built on a daily basis. </font><font style="vertical-align: inherit;">All is well, but not spectacular, of course. </font><font style="vertical-align: inherit;">It‚Äôs hard to sell. </font><font style="vertical-align: inherit;">Therefore, we have such a scheme at the university.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The network topology is needed when some switch has disappeared. </font><font style="vertical-align: inherit;">To understand where he was connected</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will try to see something more spectacular. And a certain reference to what we will do is this article on the forum: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kj/an/rq/kjanrq-tf4gagfaq3sclcshi7ji.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5r/uw/v-/5ruwv-zvi6w7keseask1zaxrctm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It tells that there is some kind of wonderful script written in my former favorite Perl language, which the network equipment polls for, makes some conclusions and somehow miraculously feeds the results to Zabbix. But we will not use Perl, but we will use something else. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We say goodbye to what we have. Let's move on to practice. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/jf/vx/fujfvxfzwxeijmvenkvnsghzxzs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will be happy if you can reproduce all this at home and try to prepare for this all that is possible. After the webinar, you will want to repeat everything and start with the fact that you need to deploy Zabbix, a virtual machine, a network. How to do this?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At home, you type the ipconfig command and you see that you have such an IP network at home (maybe a different one, but most often this one): I have the </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/0m/sd/nw0msdf_bqqc1rbf2v9poyhvd8m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fifth address (192.168.1.5) here, and you can have the 20th or 30th ... Surely there is a Wi-Fi router that issues these addresses. </font><font style="vertical-align: inherit;">Therefore, I will now draw a topology based on what may be in your home so that you can reproduce it:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/il/pv/z_ilpvbesmx9x8x0ntvfyvgz6by.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You have a WIFI router.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The system in which you want to play the webinar.</font></font></li>
<li>  192.168.1/24 ‚Äì 1-  WI-FI-,  5-, , ‚Äì   .<br>
   .   ,    ‚Äì   ,     2, 10, 20 ,     .  ,   linux-,    ¬´¬ª.            ,     100. ,       192.168.1.100.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Where to get a car? </font><font style="vertical-align: inherit;">Nothing prevents to take the Linux distribution. </font><font style="vertical-align: inherit;">I am a big fan of this distribution. </font><font style="vertical-align: inherit;">We will not breed holivars - I love him, I choose him, I use him in courses. </font><font style="vertical-align: inherit;">You can take and install from this site: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/0p/7_/fw0p7_zevdd2b-hy4_myzkofi78.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So that we do not spend 45 minutes installing Debian, I will take a ready-made pre-installed image. </font><font style="vertical-align: inherit;">Who needs it - write to the mail, I will send you this image, although there is nothing particularly outstanding in it (just so as not to waste time installing): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hd/sv/ju/hdsvju1d3xv2tlcppgmw7ze0fhk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
While it is installed, you can see the section in the manual ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Booth deployment</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a story about the ipconfig command: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/3m/a3/uz3ma3gdidyrxl4ni-foi1xerse.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then, when the machine turns around: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1r/by/6n/1rby6nfa4-ie37px_jgo2gzdmsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can give a name in the settings, give it more RAM: There </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yb/ru/el/ybruel8q66rozvw0tlyjxg3gaxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
are different virtualizations - VirtualBox is good for home use. At the enterprise, we and my friends use VSphere (we are very pleased with the product from VMware), but there are more than enough courses for VirtualBox. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Network: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9s/ie/ao/9sieaok8u0wwjefjyo8fgmze0y4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since we are saying that this machine will be connected to our network, we can work with it - it must be connected by a bridge to a physical adapter. I‚Äôll regenerate the Mac address. I launch our virtual machine:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/tu/vw/jxtuvw-er7hyjbhh8de-zowhqcg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And after starting, I make a configuration. </font><font style="vertical-align: inherit;">The manual lists the files that need to be edited: assign a name to the machine, it is desirable to edit the hosts file, resolv.conf (responsible for the DNS client) and the ip-address chosen by us - these four files must be edited. </font><font style="vertical-align: inherit;">I will try to do it as quickly as possible.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix deployment</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The password of this user (root) is immediately set in the image - never use it in practice! Just to save time, I use a privileged account: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cf/dk/mt/cfdkmtiq3gditwh0q8d5obxhqyw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The manual lists the files that need to be edited. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ou/ww/7a/ouww7abmkynaldx0c53orqbq1fi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, I give the name to our machine (Zabbix monitoring server): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o7/aw/ey/o7aweyooy2otoditfxa76k4g6dw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hosts file: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/zu/m3/xkzum3abl5tgowzag-aq0eew_us.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Change the address to the 100th and the name of our invented domain (each listener on our courses has his own, individual, like a network with a domain): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/sk/g3/imskg32tktggjcqyi-ue7phl_ww.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What else remains? Resolv.conf (DNS client): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/_d/pb/dj_dpbav7eoi7w59gjgnaclace4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Corp1.un will dock to short names, and your WIFI router will usually work as a DNS server: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nc/ao/mv/ncaomvyveyk93fjj6zklqzpvfni.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is left? The most important, large file is network / interfaces. Here is a template for different courses, many interfaces:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/yw/ak/dmywakkly3qdswu_mkrpp1dxy0u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But our car will have one interface. </font><font style="vertical-align: inherit;">It will be a monitoring server with the 100th address and go to the Internet through the 1st: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2h/og/jv/2hogjvlx7gd5uxfxlvgmbalopdq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps, it is not necessary, but faster to use all the files - restart the machine.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installing and starting a service in Debian</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbiks can be installed in various ways. According to Zabbix, there is an excellent website with documentation (by the way, in Russian the active section is supported). Accordingly, various options are offered here. I am a big proponent of installing software from a regular repository. It is no coincidence that is why I chose Debian: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-9/eu/2c/-9eu2cfgrndehx_bvjyjxo_gjwg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/pk/ha/la/pkhalax-z8jy1_vivipznmnozem.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, if everything is done well, now I should be able to connect to my system. Let's try to do it. I take my favorite SSH client and connect to the 192.168.1.100 system: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sf/me/tr/sfmetrwaaftvvrjxe9jetdjpv3a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lucky: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/qe/zb/reqezbzkzbnynazdnxp9blstocq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, it is not very correct that root is allowed here: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/5j/_e/bu5j_eloihgsp4_8heomyuedskc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Never do this in an enterprise! Here is only time saving.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/kr/k6/enkrk6smoeftphgdxai8xooemcu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we have to install Zabbix. </font><font style="vertical-align: inherit;">Being a great lover and supporter of the use of basic software and an opponent of connecting any third-party repositories, I will put the version that is in this Debian. </font><font style="vertical-align: inherit;">Again, thanks to the authors of "Debian" - just dial the installation of such a package: I </font></font><br>
<br>
<img src="https://habrastorage.org/webt/id/ad/4z/idad4z6qgksfxjtpl0zh8z6wu3c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
remembered one more thing! </font><font style="vertical-align: inherit;">We just installed the system - we need to synchronize the repository (apt update): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/ho/1w/suho1w8zayqwukaczax17o2acgo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, it is enough to type the zabbix-server installation command with support for the database (DB) of your information in SQL, as many components will be installed (it should take a couple of minutes to install) :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/1y/ok/hj1yokti8khkpotcwlzkfu-lnji.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What does Zabbix consist of</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix consists of the following components:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Zabbix" server;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">He is actively working with the configuration, which we will configure manually and automatically;</font></font></li>
<li>      ,       ;        MySQL (   ‚Äì   ),    ( ¬´¬ª      ‚Äì PostgreSQL,  Oracle ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order for us to work with Zabbix, the so-called frontend is used. Frontend Zabbix is ‚Äã‚Äãan application written probably in PHP (maybe not everything, but most). Accordingly, the application itself uses a web server. So far, only this part has been put (now we will wait for its installation): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-p/f7/x1/-pf7x13a5ap9clor_mxdrs3nj2i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finished. Now, since Zabbix uses the database, we need to create it by following the documentation. To create a database, I will use a simple script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/7j/lz/az7jlzl5ymcajcp1lkhebgv1nxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will not detail what commands mean what. If someone worked with the DBMS, they will see something familiar - the name of the database and so on ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/bd/kk/6vbdkkjydgvlkrnslc9_6s5xvr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, using this script, I create the database:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9-/ds/v2/9-dsv2o62nrjbkpzx6jevg4ax_q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And fill this database with metadata. There are several files that describe which tables should be, which attributes, parameters, and so on (all this is done, again, according to the documentation): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/31/sd/zj31sdartmnaavfhghqy7im32bq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That is, now in MySQL we are piling metadata that Zabbix will use to store the configuration and results: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ro/1p/0b/ro1p0baiwev54t9ttf1k-36zyj4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Not I will spend time looking at what he will create there (there will be a huge number of tables created). Zabbix as a product has been developing for more than ten years and is constantly striving to become better and better, therefore the data structure there is quite heavy. But all this is "under the hood." We, as administrators, will work with an external front-end application, with which everything will be simple, clear and accessible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
According to the documentation, for some reason, several files. But since they did so, that means they know what they need! The database is ready: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/sf/pg/qlsfpgwecdjkq43bvi7-ddnbr4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, according to the documentation, this component needs to be explained: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u-/n0/vl/u-n0vlfpaz12mtjtdkvjekaf1za.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Explain that it should work with the database, connecting under a specific login and password. This is done through the configuration file: </font><font style="vertical-align: inherit;">
Insert at the </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5x/pm/aa/5xpmaappvlhi6dtjmzb90m8dbb4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
very end of the file: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/89/gh/ul/89ghulcpbzbzw913qbznnaecsjm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n8/oo/_y/n8oo_yuz-elzo7w8scuvnwsjxo8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we describe that the database server is here under our account: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u5/vt/wi/u5vtwiauap-aibs5mbmgersdnji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúDebian‚Äù -package for ‚ÄúZabbix‚Äù does not mean auto-start. Here is a team of the great and terrible SystemD, about which there are a great many holivars: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4t/mw/_9/4tmw_9on0khv1_i8flmuoufthkm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It makes the launch of Zabbix automatic after the server boots. Launch Zabbix: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/66/kt/aj/66ktajsilnljqvtg8rff03vw5ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These two components are running:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/pp/ih/jfppihb3mhcy6oc9ma6rzmxhqsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can already monitor, fill out the configuration. </font><font style="vertical-align: inherit;">But it‚Äôs hard to do something good until the frontend is set ... However, at first - the missed stage ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix deployment </font><font style="vertical-align: inherit;">Time Zone Localization</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I unfolded the image, and the wrong time in it: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/mw/-r/xumw-rual8waq_g1bs36hd660g8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
date is correct. </font><font style="vertical-align: inherit;">Our time zone is wrong, so I corrected it in such a swoop:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/if/st/aq/ifstaqnjg4rrepsxshjhw_4o9p0.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting to the frontend. </font><font style="vertical-align: inherit;">Installing and launching the web interface</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian should install such a package (after the Apache web server is installed): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/pt/i5/alpti55pbgnyvxlkwg6cusjayje.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP, a library for connecting programs written in PHP with MySQL, will be installed. In general, I‚Äôm launching: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/fx/ow/ohfxown1obtvst8-eqn988l5kjy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You don‚Äôt need to perform any actions for a long time, everything will be done automatically: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/gr/6q/fdgr6qma4k3n_ii43xiia9xpkmc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we are putting this component here - the Zabbix frontend; a web server, and we will explain to him that he needs to work with the Zabbix server and DBMS: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/xo/by/vuxobykpvrchotjwrd6locuvp7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Through the web server we will manage the Zabbix and through it we will see what he monitored there.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is almost established, and now we will see that it has a close relationship with our country. </font><font style="vertical-align: inherit;">It was developed as an application of some person who worked in a bank. </font><font style="vertical-align: inherit;">He decided to set up monitoring and took it and wrote his program instead of using the finished one. </font><font style="vertical-align: inherit;">He worked in Riga, and you and I are in Moscow: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/p-/uu/rdp-uuppjegozljjxljdvkcyctk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this file ‚Üë PHP initialization is necessary ‚Üì to do this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/zd/w6/afzdw6duwvdchcizhxre6pg-owm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n9/uv/11/n9uv119oq-21nip3nyevkey0c50.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I won‚Äôt go deeper about how the web application is configured in Debian. </font><font style="vertical-align: inherit;">It‚Äôs enough to connect the configuration that came from the Zabbix package and restart the Apache web server:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/wq/dw/cjwqdwnivhxabf6kbey1qs3yyso.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect to frontend to configure Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Almost ready to connect to the frontend. </font><font style="vertical-align: inherit;">It remains only to explain to him where the database server is located. </font><font style="vertical-align: inherit;">There are two options, and we will do it through the Wizard. </font><font style="vertical-align: inherit;">For it, you need a file where the configurations will be written: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/hh/1i/nphh1imvszjdktstdx-insdzihs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A web server must have write permissions to this file: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x7/dj/_o/x7dj_oz6sci-rbq_xqem-hyt_sg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After which you can try to connect in a browser. </font><font style="vertical-align: inherit;">You can by IP address. </font><font style="vertical-align: inherit;">My DNS is configured, so I will take this opportunity: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0n/1h/lf/0n1hlfvvisfesceo4d-rv2mra7g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have the Zabbix Wizard, where I will click Next, since most have already installed it: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5m/co/dc/5mcodckrskfsyf0rlu0omicrlnc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qo/qt/o_/qoqto_wcxr0gc_kwsr3ia12muhw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5w/1r/pu/5w1rpu_jvw5veghgbvrjltn722g.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zg/jw/ng/zgjwngenwdojjj-jkx6um7kfnaa.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/li/i7/t2/lii7t2ybvosn2l1dg0wc4tf2exm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lz/gv/va/lzgvvams559x1iofedcqifizxy0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our Zabbix is ‚Äã‚Äãready to connect. </font><font style="vertical-align: inherit;">We enter the username and password: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/tf/53/jxtf53atwbmrcyx9pjsiaqauffy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuration, hosts ... Does not monitor any hosts - ‚ÄúZabbix‚Äù is so far only ready to monitor itself, if we install the Zabbix Agent:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/58/97/zv/5897zvb2kgkutggf-ccxvkpqlsy.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expand the cloud of switches</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But there will be no Zabbix agents for our webinar. It is too simple and uninteresting! You and I will be monitoring a distributed network, chains of communication switches, so we need this chain of switches. Where to get them? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I suggested using Virtual Box virtualization. It allows you to emulate PCs (computers), and now I will introduce you to another emulator, also used in our courses. A great product is called Graphical Network Simulator (GNS): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/f8/d_/bef8d_bgqsw6r8xweossqbswqp8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This emulator allows you to emulate Cisco equipment. Here we will deploy our cloud of switches. It will be necessary to come up with the name of the project again (let's save the configuration, what if tomorrow is needed):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vr/cw/xi/vrcwxiidkq-rt6rlkrw3bohkee8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to learn how to work with Cisco equipment at home, install this GNS for yourself and do as we do at the seminar, namely, we will now deploy a cloud of switches. The problem is that GNS does not have switches (there is no emulation here) - only router emulation. Therefore, we have to put the router (drag with the mouse cursor): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3q/kf/w9/3qkfw98g1cll_antal4ffvb3j8e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And somehow make it a switch. How to make switch emulation in GNS? We need to take the router of the 36th series. You can call it a switch (right-click on the switch): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/hg/zr/dshgzra7cwuo96scx-s5vzxxgmc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can draw a switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dw/zb/xk/dwzbxklfnlvwgmewwyagg9ax61s.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/kh/ht/zl/khhtzlj_kwjdmmgofbbzrs1yove.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/v8/ly/wa/v8lywaans322t7f3vnrllvhidic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Looks like? But it will become a real switch only when you add such a board there:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/x9/qk/cix9qkmxc6ow8v5iwqk-atxl_fu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this line of Cisco routers, you can put a 16-port Ethernet-board. And for a large number of laboratory work related to switches, this board is quite suitable. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We must have a cloud of switches, so now I‚Äôll make this cloud (change the name, picture and insert the board). Let's start with three switches, and if we have time, then we </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/ti/rv/bftirv6azk16f-do5lt1uqntz4m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Äôll </font><font style="vertical-align: inherit;">add a fourth one: </font><font style="vertical-align: inherit;">We‚Äôll connect, not particularly aiming where. Our topology will have to be automatically built: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/4d/uf/n24dufxk_bsi44_xj95nvga6afi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/mq/9b/lq/mq9blquvwehjkbmvt5pjlplgsjs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Done: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wj/gt/f8/wjgtf8aqoy1vnx-h2-kiaw8oa7q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I am starting this business: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/e6/f1/pwe6f1uu9h0idchwsfqj6xpu_ae.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Congratulations to those who are watching for the first time how Cisco works - so you can quickly configure the Cisco switch. In the meantime, they start up with us ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is our Windows-system (Windows 7) and Debian: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i6/ve/uk/i6veukk0v9begz_gtkanjnx5sme.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here GNS3 virtualization and the cloud of switches:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/jw/6t/xujw6t_eaje5nbl_56akrkthhwk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now it‚Äôs clear what is happening: two virtualization systems are used within the framework of one machine. Virtualization of PC-systems (on the right) and virtualization of Cisco-systems (on the left): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/66/hx/m2/66hxm25qeoexjawmjhhqpxy0yqa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is necessary to make the server monitor the equipment: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/ek/fz/yoekfz41z6ls3l72ik5yv6hltps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And so that it can monitor it, this equipment should have addresses in the same network: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/rk/8x/verk8xxlqj_ldywe8dgkr7nw974.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, without thinking for a long time, I I decided to give these switches addresses (points 101, 102, 103 for the 1st, 2nd and 3rd switches, respectively). 100th is our Linux: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/xr/nf/fhxrnfp__tatacrxnf0i1egxato.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can configure this as follows: go to an authorized Cisco course and they will tell you for inexpensive.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order for the switch to be accessible for administration, you need to make the following settings - go into configuration mode, give a suitable name, assign an IP address to the interface and copy the result to long-term memory: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xr/hs/of/xrhsof2vqmanjxahxyeeuwkitwy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will prepare the fish so as not to spend a lot of time on it. The first switch will be called switch1, the IP address is the 101st. I copy this configuration to the switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/4q/tc/he4qtcdsyugl9n7zlbsuvv1vdfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Double-click on the desired switch (now - switch1): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/ga/d5/uxgad5fmtc4q8xsr5tiry-yhkma.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gc/mn/75/gcmn75v8xtwb9icgrakorfvo_o4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Set up switch1. Now - the configuration for the second switch: called switch2, IP - 102: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/h_/g6/rzh_g6y2i_5c3jxkrm2e3flbu-i.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/w3/5a/p6/w35ap6gewzm3zpsggptzpljb6xc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, we act with the third switch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, it will be very cool if not only our server is available from our Windows computer, but also what we have configured now:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/va/jr/4yvajrk9agiaacpycpxs6ojp6gq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GNS3 is a good system. </font><font style="vertical-align: inherit;">I make such an emphasis because there are enough problems with it: it‚Äôs a bit buggy, a little ... But in order to learn, it‚Äôs enough. </font><font style="vertical-align: inherit;">This pause is alarming for me - I hope everything will work out, and our switch will answer after some time: But </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/3q/sl/gq3qslehu1-r-_skqokqhowkvqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no, it will not answer, no matter how much I wait! </font><font style="vertical-align: inherit;">Communication is not enough between our computer and GNS. </font><font style="vertical-align: inherit;">GNS itself, so one more element is missing:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/14/vf/v914vfcq1mexkh_tyr96b_b4qe4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect Cloud</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order for these switches to become available, you must use the Cloud object: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/uw/wq/riuwwqk1kguxglmtswubooqglas.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Today, Cloud uses it in a completely different sense. GNS authors as an internet service provider. In the settings of this object, I can connect it to my network card: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ri/r-/gwrir-quzcq745winbjfqhdry88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It looks scary, but this is the same network card: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/zq/ux/ylzquxupsoni1diu2tm2zuwbbwc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lb/pl/sk/lbplskyzgznkrrla6utigrs0qr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I put Cloud. Now you need to connect one of the switches to the Cloud (only then a connection may appear): I </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e9/kz/40/e9kz40sqnsx0avn3qmpijjuc7lu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
suspect that in our case it is faster to reboot the switch so that everything is up. The only thing I want to make sure that its configuration is saved. By the way, inside the ping switches should already go: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/dl/hw/v6dlhwwha_rpetf4u-mvds8sqkg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Real Cisco! The first package disappears, everything else is there:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ju/nm/dz/junmdzk7lnakhvcrpzjmmkydkgm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, not natural emulation is used here, but iOS. Therefore, I stop the 1st switch and start again: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nq/vf/vo/nqvfvonfdf78rrmvlfy2bti50t4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/e-/hl/jo/e-hljocq_u863hcwtqwuoy7ulzi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If everything is in order, then we should see the connection through the cloud - my Windows 7 will be connected to this equipment through a network card (the equipment has IP addresses on the same network as Windows) . In general, this is the point of connection between GNS and Windows. Let </font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/vo/dh/dbvodhj8-wdkwxqf4iycwymwheu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
's check </font><font style="vertical-align: inherit;">that there is a connection: </font><font style="vertical-align: inherit;">Let's see how he feels ... From here he responds: Fuck </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/zm/or/lrzmorkfuglvex1hz7ir5togsti.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
! You see, the connection has appeared: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/hr/gh/-chrghapsw8pu8kmycxcjyixida.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I love GNS because it is free, it works ... But not everything is simple! Here's a funny situation: our Linux responds to the Windows system, our switch responds to Windows, but the switch does not respond to the Linux system:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1f/wu/re/1fwureh4q3tz4quhdcm7nybwwh8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So the teacher can turn gray! You are conducting a lesson, but the stand doesn‚Äôt work for people ... Well, nothing, we will convince! Free, cheap and cheerful. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Experience has shown: in order for the connection to be between all three elements (from Windows - to Linux, from Linux - to GNS), you need to go to the network card settings and select the strange option - ‚ÄúInaudible mode‚Äù (‚ÄúAllow all‚Äù): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fp/w8/op/fpw8opcow_frnq3ph1ksbtivq6w.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/jr/jv/ve/jrjvveot5clomchekaw9_xmyxc0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come to Virtualization! This indiscriminate mode is in all decisions (and in the "Sphere" too). It is associated with the passage of Ethernet packets, mac addresses, and so on. Come on course on virtualization, the details are there. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start our system again in the hope that the connectivity will be restored: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/8t/cy/my8tcyvvejsf5bt-cb5sh-va_lu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Only now will it be possible to configure the monitoring of our switches from Zabbix. Let's see how this happens:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/ku/6m/geku6mzbdiqubhvfjx4pevfuiau.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The foundation is laid. </font><font style="vertical-align: inherit;">If we have a connection now, then everything will be ready. </font><font style="vertical-align: inherit;">In "Zabbix" a lot of "Tsiska", cleverly connected to each other - you can start monitoring. </font><font style="vertical-align: inherit;">We connect to the root user with a password and check the ping: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/ln/pc/wqlnpckl6msf6vp_rmiyt_q2a5s.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/g7/9y/8z/g79y8z6hx_bix4mvyje3ju34uia.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything is ready: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4m/qw/1q/4mqw1qfbb61ytex0d4ldrwaklee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As the administrator of the local DNS, I also made it possible to send by ping names.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How can Zabbix monitor Cisco equipment?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agent cannot be installed on Cisco equipment. Many of you know that Cisco equipment is perfectly monitored using SNMP. Now we will set the stage for this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we will set the stage for this. To monitor equipment using the SNMP protocol, firstly, you need to install SNMP support on the monitoring server itself: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/pj/d_/rxpjd_oqrxzg3kyshufud5ydoik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix does not include this support, it uses external libraries included in these packages: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y7/6r/v4/y76rv4b1ulvxexqwi69yhhqld1u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I won‚Äôt tell you what management information base is - come to courses on interaction of Lunux and Cisco, there it is in detail described. And now we just put the packages necessary for monitoring on Linux: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0x/ze/ed/0xzeedg4nazeeohex3hvh-zqjho.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/yn/lo/pr/ynloprjiladptnptxhd2nowybrc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we put configuration elements on our Cisco that will allow us to monitor them in turn.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/yj/yt/u6yjyteqwobo-tckmhdnhm8clt4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here, the SNMP server simply starts with the following password: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/ie/zo/9tiezomf0b9sk_r6tqf3a9hg8zw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we do it on all three of our switches: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k-/cu/-v/k-cu-vr3kzxuq3fcelvdhwyuo3e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After these steps, we will check whether our monitoring server can access Cisco equipment (any of these switches) via SNMP and, for example, find out something. </font><font style="vertical-align: inherit;">There are test options here: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/yj/yt/u6yjyteqwobo-tckmhdnhm8clt4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can poll our switches using the so-called OIDs (object identifiers). </font><font style="vertical-align: inherit;">Here we interrogate the switch (we request the values ‚Äã‚Äãof switch1 parameter): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dh/qr/ek/dhqreksw-lbhj1_ky-kitwkcbdu.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we see that this Oid refers to the name of the switch, that is, we can pull its name from each switch (it‚Äôs very useful for the topology): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8e/ro/de/8erodew0gy2koqyma4o2k5xo5qi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And you can use more human, textual ones - we request sysName from the switch (the same can be asked from switch2, etc.):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/rk/ih/tirkihmj9zh3mbtljm-8mzuuva4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install SNMP Console</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another action is not obvious: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9l/bh/if/9lbhif1jx-4eees2yl4g2n6sse4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/rf/xs/2f/rfxs2forhqzmhx1vb1pxzyecjzi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5r/c6/qi/5rc6qi5sesktvgwhchqnlk14hwy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
According to the license agreement, you need to comment out the lines in this file ... This is a wonderful woodpecker command that cleared the contents of the file, which said: ‚ÄúTo confirm the license, comment out everything that is there‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, the Zabbix server must be rebooted because we have installed the libraries that will be used by it: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nh/n2/rv/nhn2rvgejooztpw-t-6iyqigdjw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/8u/j9/dw/8uj9dwokqg4-byvjdxbp59fhwdc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many people know that now it‚Äôs enough to enter the Host section, create a host and select the SNMP protocol. </font><font style="vertical-align: inherit;">Specify IP Address:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/cs/ug/gzcsuga-vjjumzjitkwe0zvy2ak.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bi/gv/kc/bigvkcnw1ji20omf739p434dzaa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But we are not here for that. </font><font style="vertical-align: inherit;">Let's try to get Zabbix to automatically find all of our switches. </font><font style="vertical-align: inherit;">We have three of them, and in Baumanka there are more than a hundred of them (120, it seems). </font><font style="vertical-align: inherit;">It would not be so fun to add 100 switches, so it‚Äôs a bonus: we will see how Zabbix finds our switches.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatically add devices to Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Page "Automatically adding devices to Zabbix": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/4h/3a/op4h3abcnttdjkx_h-zzpzb0zge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To do this, we will go to the "Configuration" section (Discovery subsection) and we will not create a new rule there, but we will use the existing one:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This correctly says that you need to scan this network ... Do you recognize ours? </font><font style="vertical-align: inherit;">In order not to wait long, I will indicate a limited range of 100-110 (enough for me).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scanning once an hour is a bit much; </font><font style="vertical-align: inherit;">put - every 60 seconds.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On scanned devices, our Zabbix is ‚Äã‚Äãnow looking for a Zabbix agent. </font><font style="vertical-align: inherit;">I promised that you and I will not have any agents, so I delete it.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And I say that in fact, our device is accessible via SNMPv2, community - public; </font><font style="vertical-align: inherit;">we requested such an OID:</font></font></li>
<li>       ,     . ,    .       (   ):</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now every minute Zabbix runs through these IP addresses and asks for the device‚Äôs name via SNMP. If there is a device and supports the SNMP protocol, then it will answer: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/xg/-o/haxg-ohyxs1bfr23wjr10quhgoa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is not enough for our devices to appear in this list: You </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1f/qq/ij/1fqqijogq1obsqxxxnqmd06l6l8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
need to configure actions. We will create a new one (I‚Äôll name it, copying from the training manual): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/ds/hi/zjdshidzytis9o614hr8ebunnsi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qb/vr/7g/qbvr7grb1zx-e375rrkrndjtf0y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Condition: the request must return information that this is a switch. By ‚Äúlucky coincidence‚Äù, we have all the switches called switch (switch1, switch2, switch3), so the Received value should look like (like) on switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/-q/ww/jo-qwwjs6zrndbxbnzinyj2gxog.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All this is in the training manual. It remains to indicate what to do with it - ‚ÄúOperations‚Äù: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/q2/bo/z_q2boros4ugh7rmz9gkmg9uico.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, you need to add it to some group. I will use the ready-made Discovered hosts group:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t-/na/jf/t-najf0u9b3jw2js5xuu0mb0gfg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gk/lj/7h/gklj7honujvnwncitifax5zcrfy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following, most important, we must explain what to monitor on this equipment. </font><font style="vertical-align: inherit;">In this case, we will use a ready-made template that is suitable for a large number of various SNMP devices: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/lw/1n/zelw1nlbpyv9fnu82tieuv7klh0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7v/a4/fe/7va4fejt0_p6_m83ru9xsdnr80o.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/km/ca/om/kmcaomawjtebabjjgaofcz1irls.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2v/ma/et/2vmaet5v9zmyfx-gtmgbzpcyypw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bd/_7/4_/bd_74_jpcajgez4osptj4gswxqy.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/j8/x6/jw/j8x6jwcwob9zgdcu4qexixn2kk8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/6h/do/_o/6hdo_oq76rh6esxpq-yc2hep0s8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If everything is done correctly, then after some time 3 switches will miraculously appear in our Zabbix. </font><font style="vertical-align: inherit;">We wait. </font><font style="vertical-align: inherit;">They will appear in the Hosts section. </font><font style="vertical-align: inherit;">There is a connection (checked just in case): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/d9/o9/mpd9o9nieg8be0a1nkw_nwjenkq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Appeared: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/eb/zc/9oebzchr5zpdmq9wux7pjfiih28.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we had 100 switches, 100 switches would appear. </font><font style="vertical-align: inherit;">Now we can talk about the main topic - the automatic construction of the network topology.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a network map</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In "Zabbix" in the "Monitoring" section - subsection "Network maps". You can create your own map with any arbitrary name (I‚Äôll call it, as in the manuals - Switches map): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/fo/pi/djfopijhurrskrzaa1vdz2xqb7w.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/91/u6/2n/91u62nyrphdsb1u2ypo1rsnjrx8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n3/6d/m_/n36dm_svkvrglkplk7fl345msr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can add devices to this map: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/t1/df/tyt1df6wfkeq4j2amt9evassz88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have a rather boring operation to add our entire hundred switches here: I add a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w9/g7/ih/w9g7ihwj13mcrzevcdh4xbu1seo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
new element and tell the system that it‚Äôs on actually the host you are monitoring; host switch1:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/uw/7x/npuw7xcetykmgf0mzoo_wf84obe.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/iw/kf/7o/iwkf7on2ppl3_k6pbqtp7ddwgxo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
People often ask if this process can be done automatically. Answer: ‚ÄúIt is possible!‚Äù. But then we need to solve the fascinating problem: "How do we understand where to put which switches?" That is the geometry. A potential solution: you can specify a geolocation mark in the switch (a parameter such as ‚Äúyou are standing on the 6th floor, AZLK building, 666th auditorium), draw the educational laboratory building, all of its audiences ... In general, this is a good student for the 4th student Computing course. We have no plans for this!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will now add all 3 switches manually, but I promise that I will not draw communication lines between them. You add the 101st switch, we automatically add it to Zabbix - if you please draw it in the map with pens. An unpleasant moment, but there is a place to be. There is no simple solution to this problem, for 45 minutes for sure. And what we get will seem interesting to me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I quickly add 3 switches: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/q4/5m/htq45ms1qrynn5vv6rbfltivtag.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I said that I will not add lines? I‚Äôll, but only so that later we can understand how to draw them. I will connect these two switches (we do not </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/yy/3v/huyy3v7rbnxbz-vcvvcfscrc3nu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
connect the </font><font style="vertical-align: inherit;">1st to the 3rd): </font><font style="vertical-align: inherit;">I will connect them (switch1 and switch3 are highlighted): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/xx/4w/ygxx4wbqysq3gqcuqbdb8h7vdlo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our system will have to fix this matter: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/p1/da/1op1danyvogme8oxdl5mjy_c_sg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important not to forget to save the result:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wb/gg/wk/wbggwkhsx0s5v1n-2rximlephs0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/fu/vp/ld/fuvpldfvuoweq4md4vtd9tzpmgi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, about GNS - you can beautifully do it ... Hide its hostname, make it a switch and put it under one another, making a cloud of switches:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ne/uz/f7/neuzf7ylh_eb46psuqp7sq0nsp8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/fa/uh/iy/fauhiyblbluxal-l8g7mbu5gws4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3l/cl/0o/3lcl0ofm4pg0qh8weeshyayu1pg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/oh/is/fv/ohisfv9b9hvxjtax_u2l73ysmfw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ua/1c/px/ua1cpxoki5x5akr4imn0wakcvxi.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How do we build a topology? </font><font style="vertical-align: inherit;">Configure automatic creation and updating of communication lines</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order for the topology to be built automatically, we need to receive information about it automatically. At the university, we use Cisco equipment, so we fell in love with the protocol called the Cisco discovery protocol - just type show cdp neighbors on any device and it will tell you that switch1 is connected to the 5th interface: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u8/yg/vu/u8ygvuncowttw3o0nn6tjjzhep8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lj/vo/rh/ljvorhmvhikkk-3r8ykhwgc2zoi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alternative to cdp is lldp (we have a segment switches of the "scary" company Nortel - there lldp). You see, there are two switches: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/qq/vf/-hqqvfloaxvhgsplf-dz87zfr1y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
the Zabbix server must somehow pull out this information (I see it on Cisco itself). There are many ways. One of the fastest, but dumbest is to use the RSH protocol. A very dense protocol, and I know about it only because of my age:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/44/xz/y-/44xzy-rmyoe9q-yl1c-pxipc61c.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ed/hq/o5/edhqo5l9mzpdzkgydqpi9hvrm4c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normal RSH people do not know, but you can quickly use it to remotely do something with Cisco. </font><font style="vertical-align: inherit;">Or, if we are talking about some kind of management network where there is no stranger, then you can use it in production. </font><font style="vertical-align: inherit;">However, safety points are still a complete seam! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, I set up support for accessing the RSH protocol to my Cisco servers from this IP address: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/fi/tt/_rfittxipjyhnofewteuvyojncu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I can install the RSH client on the server ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-i/ji/ns/-ijinsihdodtgzniujj7ps7iv-q.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k4/zm/yj/k4zmyjbq64rg_kuh5vzd7eovoyu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... and demonstrate how easy it is now to follow the instructions that we just followed by connecting directly to Cisco equipment from the management station - on switch1 I will follow this instruction: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/87/nr/vn/87nrvnudd8y_alfjxwsbusezjdw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k7/kh/fz/k7khfzefhkhfbfip2whrfe7yick.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, it should appear on switch2:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/tk/3x/_ktk3xdve_dtksfm1aj50nanqfa.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connection from the monitoring server</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further. Managers write to me: ‚ÄúVyacheslav, a request has arrived from the listener. He wants to go deep into Bash, Csh, Sed and Awk. ‚Äù These are dense Unix utilities that people knew in a shaggy year. Right now there will be a bit of a dense Unix. We will install this package (we need to format the output so that it is better structured): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/db/fg/zmdbfgngl98kq1y3gyimzhhl5u8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the whole team will look like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/wg/5b/vxwg5buzmtotxsyuz45_tkjmuj8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will not tell how the return code in Dos differs from Unix. Next, I will filter out only the lines that contain the switch, delete the extra spaces and cut the necessary fields through the spaces:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/97/gz/dc/97gzdcixffxvpmffvo8nyjfo2t8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ck/oh/-o/ckoh-o4tmxqmak6u8yitnf3rv9a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see the result, and you will see how it differs from the previous one. A little more ‚Äúmagic‚Äù Unix. Processing the transformation of information into structured (for example, switch2). Instead of this unstructured information (a lot of spaces, some strange keys): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/ph/pu/lhphpuqqnrpivefwhm3r-26culq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The output appears: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/j6/wr/myj6wrr8s8yjn1xt5xduyuww43k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switch2 is connected to switch3 through the interfaces Fas 0/6 (from switch2) and Fas 0/5 (from switch3). The table turns out: some kind of switch with which through which interfaces it is connected. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
While on this protocol RSH and CDP leave. Now we, having received this information, draw these links on all switches. To do this, we need information on which switches to connect to. You can get a text file, where to list all the switches ... But it's not sports!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We only need to add the switch physically, and it should automatically be detected by the Zabbix. </font><font style="vertical-align: inherit;">We already have a database of switches in Zabbix. </font><font style="vertical-align: inherit;">How can an application get information about switches from Zabbix?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Zabbix API is written using the "wonderful" JSON protocol. I finished programming in those days when JSON was not yet, therefore for me, as for the administrator ... Nowadays, there was no such garbage! Here is a text file for me - this is normal, but JSON ... ( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
just kidding </font><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">JSON is so JSON! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSON is the format used for exchanging data with the web server, and the cURL utility is one of those handy utilities that allow you to send any request to the web server: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/xy/fh/xkxyfhqtn9p-kllijsbwfda5pus.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/po/g0/qt/pog0qtpuciskhncsbhfespkg1n0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will not </font><font style="vertical-align: inherit;">go into </font><font style="vertical-align: inherit;">depth about what a POST request, GET request, and I will say briefly. In Zabbix, which works here: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/5x/bb/xb5xbbtwehskdqcmeygzyqczwfs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This application comes in: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/jf/gu/tijfguw4winkqmkpfbjusomxmbw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Which is ready to accept such a request in ‚Äúscary‚Äù curly braces (this is JSON):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/an/cs/ezancsh3w2vyw6byftum-vjaoye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This request indicates what I want to do with Zabbix, the parameters are indicated: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/h8/e-/46h8e-jkhyzj4dljmuo-rd3i1g8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Zabbix gives an answer. </font><font style="vertical-align: inherit;">Here is an example that says: ‚ÄúZabbix,‚Äù please give me an authentication string so that I can send you further requests. ‚Äù </font><font style="vertical-align: inherit;">I confirm my credentials with login and password: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/8b/5n/ti8b5n7de63oqwt3emjs8wzf45u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such a JSON request will now return a JSON response to us: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/zw/af/orzwaf9ssguutgd98_tf0qk-yyy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And in this JSON response there will be such a line: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/fw/qa/dmfwqa_ulb9csqhjwlaw8vuphd8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is an authenticator that can be used for the remaining requests.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Work with host objects</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We recall why we began to study JSON: we want to get the switch database from Zabbix. Which switches to interrogate? Let's get it out! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Get to know: the Zabbix-API includes, among other things, the host.get: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/9s/i9/6h9si95adtk44qyqujquhvjbkru.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Host </font><font style="vertical-align: inherit;">method </font><font style="vertical-align: inherit;">- these are our hosts. Get is a give. Then I point out: give me host information! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/jv/_hqhjvdgxtsbtlypqmjkrdbdndo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the parameters I say: output everything you know about hosts: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g2/jp/as/g2jpasm8v_0jb59cmy2kcjgdcty.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But I must accompany my request with this line: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/os/jj/qyosjjbate8nm6rcazxw_rz-bwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's demonstrate. To make it convenient for me, I will </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/xl/lr/foxllrj0twd3dauxqpkdgt3key8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
copy </font><font style="vertical-align: inherit;">this request: </font><font style="vertical-align: inherit;">And I will insert the authenticator that Zabbix returned to me: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/ve/mu/cqvemull9ck4ohbobg57x99mbuw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, Zabbix Api: we looked at how to ask the Zabbix for an authenticator for access. And then I demonstrate how to use this authenticator to get some kind of answer:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/c1/pn/dfc1pnn8ohqpvdto28ls6glrskg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I think everything is clear. You can even see if you take a magnifying glass. Do you recognize switch1? Somewhere there is a switch2 ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/2h/ev/702hevhmrlcdiegys1ae9dh6ndc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I broke my eyes for a long time, and then decided to read how to work with this JSON on the command line. And one of the recommendations was: use JSON Query. She is very healthy, brightens up the answer, see: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9a/ei/jz/9aeijz-slee1ekq2iu1tq86cqle.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ha/jz/26/hajz26f3jvrfymevvidztnzizl8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firstly, everything has become colored - it‚Äôs already good; secondly, switch2, switch1 are clearly visible here:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/84/tp/qv84tptvurpqfkfqtmdbkfvh_wa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further, a little tinkering with JSON Query, we will see a lot of interesting things. </font><font style="vertical-align: inherit;">And in order not to copy these ‚Äúcrocodiles‚Äù from the notebook every time, I propose to determine what we will program work with our ‚ÄúZabbix‚Äù on. </font><font style="vertical-align: inherit;">There is a Zabbix API - this is JSON, there are a bunch of programming languages. </font><font style="vertical-align: inherit;">JSON seems to refer to a Java script, but in fact, other languages ‚Äã‚Äãare most often used to work with Zabbix - for example, Perl, a Perl script that does something.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Making requests in the form of Bash scripts</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perl is not a fashionable language today, obsolete. If I started life all over again, I would probably start learning Pyton. And it is definitely known that under "Python" there is a convenient library for working with "Zabbix". But, since we have gathered here and will not give preference to any languages, I use this language: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/fv/xp/skfvxpn5j9scrpc3evf7eyrvnj0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The language of the system administrator, that is, me - Bash! Therefore, I will make these requests to Zabbix: </font><font style="vertical-align: inherit;">
I will </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/3i/mb/zh3imb6ja0rkpyvy7bl-gpospwc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
issue them in the form of scripts: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i0/fk/rg/i0fkrgjljz1l8gdq20zzqirqmno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scripts are ready, I will copy them. They look like hell. I think good Python code will be much more readable. But, since I myself do not know "Python" and do not want to give any preference, I will write on what is close to the heart of the system administrator:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/01/qj/z2/01qjz2tstbcljo7hlnjbiq-ri7m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will not tell you what these backslashes are (and God bless them). But the authentication string will be framed in the form of a variable that we need to export before: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ni/uc/xf/niucxfqzrmv1ouy4jrin3lrs7mg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/tt/wa/37/ttwa37gjveh9lxyfbqgnkoxhg-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What value did it have for us? And now, instead of copying the long lines, I can simply run the script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/b0/xb/ggb0xbiuppm37ndovdlqev-81_u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The script returns a complete seam. Using JSON Query, you can get this beautiful: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lq/0r/ai/lq0raiqvp0e8ant2sj7ww2ruxkg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wh/k7/qg/whk7qgnjyn8amh0goeai98e05ne.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remember the task: get the database of switches that are in Zabbix! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will immediately draw the result. I won‚Äôt be talking about what is here and how for a long time. We have a daunting task: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/ku/f9/uokuf9cd68jhy4n_3tke1cc9bge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is such a result, see what it contains. It says here that we have such switches in Zabbix, and this (10105, 10106, 10107) is the internal ‚ÄúZabbiksk‚Äù switch identifier:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/l0/ub/hxl0ubkxevyy-ngfijnfw3k3vsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result was a flat file. </font><font style="vertical-align: inherit;">When you add each new switch, you must run this script to create a file. </font><font style="vertical-align: inherit;">So that we don‚Äôt have such ‚Äúcrocodiles‚Äù, I will include this line in the script itself: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/em/jh/l1emjhywmibe_ehavajfptgx4r0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/kq/el/r6/kqelr6wblri6snfkbwk0jfvuhtc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And it will return a neat table view with us. </font><font style="vertical-align: inherit;">Now I will show. </font><font style="vertical-align: inherit;">I run the script, it displays and immediately saves this file: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/u0/dz/-hu0dz2hoymtx7eepiys0v4grhi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The tee utility is a good utility that writes the result to a file and passes the result out. </font><font style="vertical-align: inherit;">We now have 3 switches and we have a text file in which all the switches are listed: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/bu/fz/urbufz8s11mczfb2uld8b_oxo8k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you can query each of these switches through RSH and find out who is connected with what. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we got the switch database. </font><font style="vertical-align: inherit;">Our ultimate goal is maps!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting a list of maps and their elements from Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to work with cards? Let's learn how to read information about cards from Zabbix. I‚Äôll copy this script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6t/9_/mb/6t9_mbgxpoyrttupz3cf-zsrmeg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/pz/g0/gw/pzg0gw6tel-pjkfgzxcqrsy0lf4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Whoever likes it, you can take all these scripts. I tried to simplify them as much as possible - it doesn‚Äôt work easier. If you find how to simplify it, write, I will correct it: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/ex/kt/ojexktdpilhdilffqxopetdrgws.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This script ‚Üë turns to Zabbix with a map.get request and says: ‚ÄúTell me about the links and tell me about the elements that these links connect to each other.‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I run this script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/96/us/zf96uszqpiityn1vqaezvxj2odc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And I show the result: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/nn/ep/fdnnepoivtufayskrat49ak6nu4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Just like information about hosts, it is very easy to get information about cards from Zabbix. Each card has its name: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5n/wl/jt/5nwljtoelbudy0igqcrclgo6_v0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
following are the elements in this card. Do you recognize the number? This is the internal element of Zabbix:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/yk/cz/myykczkfzf6iev4s2s_vz-co5nk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most unpleasant thing is that in Zabbix the elements are numbered again. </font><font style="vertical-align: inherit;">On the left is the id element, on the right is the numbering of the element inside the map: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/ek/xi/wzekxi5xnw70eazz4fswo75s9-a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That is, in Zabbix each host has a number, and on the map there is another number - this chain is obtained. </font><font style="vertical-align: inherit;">That is, the switch1 switch is called 10105 in the Zabbix, and 2 on the map (a slight complication of the task is obtained).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We bring everything together through CDP and RSH, find out the connection of switches with interfaces</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The final part of this script is that I have to get information which identifiers of Zabbix are associated with which identifiers on the map. Look, in ‚ÄúZabbix‚Äù here is this identifier (10105, 10106, etc.), and on the map - 2, 3, etc.: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/e2/kq/tde2kqrnxxq8mw2xvrmckzu-cr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traditionally, I will save this in a text file: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o6/ts/wi/o6tswi34dpttupdmkapyier25ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we have almost everything. There is information about which switches are in this file (which identifiers inside Zabbix are used): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/uh/jn/yruhjnqamivzhfuufaefldqm-ya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we have information which identifier on the card is associated with which Zabbix identifier (for example, switch1 has number 10105 in Zabbix, and on card number 10105 has the identifier 2):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/uh/jn/yruhjnqamivzhfuufaefldqm-ya.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2e/ug/7s/2eug7srj1krpadc4iasvh1mtdye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's not my fault! The guys wrote this in Zabbix. But I'm sure there is a reason why they do not use direct identifiers on the map. Perhaps because the same object can be displayed on the map several times, and it must have a unique identifier. Therefore, the chain is longer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And here, I‚Äôll probably comment on this hellish little. Play it: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/rs/tq/g8rstq6pvpa0xqgrofdazuk_txm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the loop, I read the lines that describe which switch with which identifier "Zabbiks" </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/nh/eq/iinhequuyybluby-ybxdu7lkghw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/8h/xa/er8hxamulabcynmqppzokznfl-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I </font><font style="vertical-align: inherit;">connect to each switch from "Zabbiks" via RSH: </font><font style="vertical-align: inherit;">I read which hosts it is connected to. I redirect this result to another cycle: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/hr/pl/olhrpl7refin5zcmakahdqgec4a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Which, in turn, reads the identifiers and finds out who is connected with whom: I will </font></font><br>
<br>
<img src="https://habrastorage.org/webt/98/wz/ww/98wzwwnjkx3qp65cl3iqlzfxlza.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
show the results of this script (chmod + x):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oi/qb/qy/oiqbqymkxfur8kd-i7xqglyxqd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the map, the second switch is connected to the third (remember that the identifiers on the map) through the corresponding interfaces (Fas 0/5 - for the second, Fas 0/6 - for the third ‚Üë). </font><font style="vertical-align: inherit;">We must draw these names on the links, create. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If until this moment we only read information from Zabbix (hosts, cards were read, etc.), now we will have to write information to Zabbix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's save the result:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/uh/wt/gsuhwt_0qiojiuheizaq3gt3wcg.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drawing communication lines in Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I decided to write a simple script that will change something in Zabbix. Honestly, I studied the API this way - it was important for me that something simple worked: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/ke/s0/ygkes0eksoonvbajier32-c0dw4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gz/5g/_a/gz5g_anpr_docgcrlaxfm0jn-mw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first script will not be related to tasks - it will change the name of the map (to see how it is done). If we want to change something in Zabbix, then we must also apply through the POST request and describe it in JSON, but using the map.update method. Among the parameters, we must explicitly indicate: MAPID, which will find the desired map, and MAPNAME, which will change the name of the map: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/ms/3p/kkms3p-ixoafs4ifvpccikv1nd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is the minimum set of parameters. These parameters themselves: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/fw/yv/imfwyviqvbgelp9gjmoeelpedic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pass through the variables the script arguments. I make the script executable (chmod + x): I run it </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/xj/uz/hxxjuzo5h4galmyprunx1ftd7so.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, as written in the training manual. If everything is correct, the card should be called Super MAP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/va/qd/ervaqdxvi_h0twak7rxcz9zjh8u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Monitoring - Maps - voila: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/vf/yq/68vfyqjmwq8mlq6pacsj_c7mbnc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Easy to change - Super MAP2: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/xi/zx/yfxizx_w2ycib6jifb9cw_2qh5u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything works: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/eh/7o/vxeh7o3axqtxzzggktfy1g1hqqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But our task is complicated - to change communication lines! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/j2/pb/vej2pbmp87qsuylhj6vx7sw5doo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is necessary to generate JSON, which will describe our map and all communication lines. To do this, I make another script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vc/aj/fd/vcajfdntlvggtwxr0qffvjyb-de.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/o6/o_/p5/o6o_p5msbpvhw27e-jo0xjfi6lg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fact that I have many scripts does not mean that this should be done in the enterprise. At the enterprise, you need to take a normal language that you know ("Python", "Pearl" or something else), and program what is here using a normal language. These bricks, each of which is simple, make it possible to understand what, why, and how to do it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another script that serves more to understand what needs to be done, and not to copy (I will not sell the finished product to you here): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v7/l8/uw/v7l8uwgwtmqbfuacxtnuqg89ery.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/cw/yn/ud/cwynudseywryxw-gkcajcp9vdua.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This script reads this file:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/gj/bt/iugjbtn5qbfhwnjw3ednxvxnqea.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Which states which element on the map with which element on the map through which interfaces it is connected. More precisely, we will take an element on the map, an element on the map and a label. This is an element on the map: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/yf/ae/fdyfaeounbojncqky7ionmzjaa0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And this signature should be: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9z/ge/lp/9zgelpwjnjlu_bvsxbvwmkqgkzc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am reading this file. I sort through all the elements on the map: I </font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/th/ls/lathlszamnf7drlctykzoe7rmlc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
program links - description of links in the form of JASON. The final request looks like this: update the map (card number ‚Üì): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sr/bp/ga/srbpgaaeocsxrerwasxiw4eww-o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Links will be described in this variable: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_s/jv/sb/_sjvsbsea4dfxn8xdhxu6wvq61s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Which was formed in this cycle (all elements and signatures of the cards were enumerated): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/tr/le/tmtrleu4iz3hj-tpihsmg60ai6m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, we have a daunting task, and describe it in detail on Shell ... Surely many of you did not program on Shell. You just need to look at these texts and program on whatever is convenient for you.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I have an expectation that now everything should happen. Launched a script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z6/ku/aj/z6kuajchdcyhzdsafzrgdwxrhbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reload the Maps page: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/36/6p/j_366pbhfsxwdf6r6-ptm-ajfqc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, how? At least it works! Let's add another switch and run the script again. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We take the switch, call it switch4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/w6/2w/kiw62wjjoudkeqlbyqpwi8w_rum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We draw that it is the switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/1f/jv/4c1fjvsupwx_ujkfykki_nlytbk.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/4k/qe/qu/4kqequ32eiap57vjw0ntpguworm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">We </font><font style="vertical-align: inherit;">connect </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3y/vg/51/3yvg51etfkdm13nua1ricw7hkge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
it as we want (with an asterisk, you can draw a sausage): </font><font style="vertical-align: inherit;">We </font><font style="vertical-align: inherit;">configure the </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_e/-z/3e/_e-z3ebtugz-banoljrocvnnhkc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
switch. I launch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/cm/vm/focmvm2m5meqrgmfpbrstofgpsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything that we previously did (just change to switch4 and the address is 104): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/jh/hu/qrjhhudyhklwds0vqvel8bl7oxq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Double-click on the switch (paste what you copied): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0b/ng/ga/0bnggamteyi65nog6igvrnzbw3s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, it will be faster to restart the third switch (switch3), saving the configuration:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dv/k2/mr/dvk2mrpw11vgl6jraypfd1t7vva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the meantime, it reboots, check to see if it is available on our new switch via SNMP. When Zabbik finds it, the first thing to ask is the hostname SNMP. Therefore, we add this design to our new switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fb/yo/t2/fbyot2e9x1ugheuhu-du6jrf5gg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wx/ft/by/wxftbyv_y5abyoswch-ctg9cp3y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we are waiting for the switch to be available. The 101st, 102nd are available, the 103rd reboots: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/kq/q-/udkqq-alaw8aoldd5re6a0wgoow.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The 103rd </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/fr/ox/ftfroxxsep7orgxpyqhghouetsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
responded </font><font style="vertical-align: inherit;">: the </font><font style="vertical-align: inherit;">104th responded. Check if SNMP is available via SNMP4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/ts/rd/mxtsrdsg1tvvdd6y_cjuigbnhxi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Available! We have every chance to see it in the list of hosts. Let's wait a minute (every minute we have a network scanned): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/3c/ff/kb3cffka032ra7i5is9ayhewjya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Once it has appeared, we return to the first script. He unloaded information from us which switches in general are:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/ea/zo/npeazo2te4hbnfd2ncdm0vsr32y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Your cable men ran, they stuck a new switch, you lifted the link and it appeared automatically in Zabbix. </font><font style="vertical-align: inherit;">Accordingly, here we should see that the fourth switch has appeared: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v2/q-/kt/v2q-ktdybfjkhgn_sz0vee3toum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our database is automatically populated.</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We fix the material (add switch4), execute the final script</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then, unfortunately, you have to run away and display our switch on the map: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/4a/5k/ux4a5kwj5gpfzmxbxnsqvncarpc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Not only did your cable men run, not only did you configure the link - you still have to go here and say: ‚ÄúWe are adding a new switch‚Äù. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/iz/nf/g-iznfb3qf_fillb6w40lmetgxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Locate where it should be and indicate that we have the host, switch4, and also draw what this switch is: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y3/bp/pm/y3bppmrcdmfoaerjlafxilst_gk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And update (we are not drawing the communication line yet!): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/fa/fk/gsfafkqzwjjpiwihul-lfc1nzfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we recall that our communication line scripts are built on the basis of the CDP protocol. And to get CDP information from the switch, you need to configure RSH access to it. Remember, I decided to use this method?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/84/q5/df/84q5dfhi0d4spzqawa1uumbn9gm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wq/kl/xn/wqklxnrebbym3uce1hrsg-izdmy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If all is well, then I can try, then I can try RSH - request information about its connection from the 4th switch. Here he says: "I‚Äôm connected to the third, on my side - the 10th, on the other hand - the 8th interface." </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/_a/ug/cy_augy2yrbswanujdpjpdkcwqc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
They added it to the card, and we have a table of correspondence between the identifiers in the Zabbix and the identifiers in the card (see, it‚Äôs the 5th on the map): they </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-i/t8/vs/-it8vsr54h_fnue2-srk6zxcwzs.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/je/j5/at/jej5atlnmnnazwy6aga4k8n5sfi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
raised RSH. Now we can build a connection: which switches are connected via which links (we got the text file): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/hl/zm/abhlzmj1mez4py4iecfw4e0mgs8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/g7/st/qm/g7stqmpv_mu4qsylijjuxwwibac.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's try to run the final script, which will read this text file and generate a JASON request for updating the maps, redrawing all the links on the map: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/aq/iy/ctaqiy_1gdpvipgk4t3pzzc86os.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/dq/ld/ue/dqldueagtxz_ap1rbmxphccytba.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/c3/6v/fp/c36vfphix1om8_etfenkvo9oeco.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, how? Impressive? I didn‚Äôt manage in 45 planned minutes, but still quickly (about 75 minutes) - probably, it will not work faster.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All! </font><font style="vertical-align: inherit;">I am very happy friends - it worked out. </font><font style="vertical-align: inherit;">The training manual is here: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://wiki.val.bmstu.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">If you do not find it, write to the mail: val@bmstu.ru, val@specialist.ru - I will send it with pleasure. </font><font style="vertical-align: inherit;">A webinar will appear on specialist.ru - I will check this for sure. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And most importantly, my friends, that all this was not in vain, but with the cunning purpose of persuading you or your colleagues to our 2-day course, which understands a large number of tasks related to Zabbix: low-level detection and tuning ... Not at the top, as it is now, but in detail, with laboratory ones - you will do it: until you do it, I will not let you out. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will be glad to see you, your colleagues! </font><font style="vertical-align: inherit;">Write letters. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
See you soon!</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZrNScBG9TnU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit of advertising :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for staying with us. Do you like our articles? Want to see more interesting materials? Support us by placing an order or recommending to your friends, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud VPS for developers from $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unique analog of entry-level servers that was invented by us for you: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The whole truth about VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps from $ 19 or how to divide the server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (options are available with RAID1 and RAID10, up to 24 cores and up to 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 times cheaper at the Equinix Tier IV data center in Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Only we have </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV from $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the Netherlands!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - from $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read about</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> How to Build Infrastructure Bldg. </font><font style="vertical-align: inherit;">class c using Dell R730xd E5-2650 v4 servers costing 9,000 euros per penny?</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/en486814/">https://habr.com/ru/post/en486814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en486800/index.html">Cassandra. How not to die if you know only Oracle</a></li>
<li><a href="../en486802/index.html">People meet recommender systems. Factorization</a></li>
<li><a href="../en486804/index.html">Global Health Informatics: Cloud Technologies</a></li>
<li><a href="../en486808/index.html">Electronic pregnancy test from a pharmacy: how it works</a></li>
<li><a href="../en486810/index.html">New Odnoklassniki frontend: launching React in Java. Part II</a></li>
<li><a href="../en486818/index.html">Porting Quake to iPod Classic</a></li>
<li><a href="../en486820/index.html">70 Javascript Interview Questions</a></li>
<li><a href="../en486822/index.html">[By the docks] Flutter. Part 4. For web developers</a></li>
<li><a href="../en486824/index.html">Bad advice when working with ANTLR</a></li>
<li><a href="../en486826/index.html">Creating a full-fledged Viberbot on Django 2 and the Viber REST API. Part One - Webhook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>