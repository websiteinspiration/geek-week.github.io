<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🤝‍👨🏻 👨🏾‍🔧 🙉 ¿Cómo hice ABP para el generador? 🔆 🥞 ✊🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace unos años, me hice un interruptor de transferencia automática (entrada de reserva automática) para trabajar en el país desde un generador. Ahora ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¿Cómo hice ABP para el generador?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/507764/"><img src="https://habrastorage.org/webt/k7/ts/fd/k7tsfdbxvx2m-t8icgh6ryzqwbo.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace unos años, me hice un interruptor de transferencia automática (entrada de reserva automática) para trabajar en el país desde un generador. </font><font style="vertical-align: inherit;">Ahora muchos trabajadores de TI se están mudando a una ubicación remota, trabajando desde casas de campo, donde la calidad de la fuente de alimentación puede dejar lo mejor. </font><font style="vertical-align: inherit;">Por lo tanto, decidí escribir sobre mi experiencia con ABP casero en el microcontrolador ATmega8A. </font><font style="vertical-align: inherit;">Si el tema es interesante, bienvenido a Kat, habrá muchas letras y código.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acerca de la puesta a tierra</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de hacer algo con electricidad, debe asegurarse de tener una buena conexión a tierra en su hogar. Simplemente no es posible tomar y conectar un generador doméstico de gas / diesel / gas a la fuente de alimentación en el hogar. Se deben tener precauciones. La primera es que su generador debe estar bien conectado a tierra. Entonces tiene una buena posibilidad de no recibir una descarga eléctrica cuando la estática de su suéter favorito rompe el aislamiento del devanado del generador. En general, un generador en funcionamiento no debe tocarse innecesariamente.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale la pena recordar que la red no siempre es de 220V. </font><font style="vertical-align: inherit;">Al encender las líneas, las descargas de rayos en la distancia, las descargas estáticas dan tales captaciones que pulsos cortos de varios kilovoltios a menudo están en la red. </font><font style="vertical-align: inherit;">Están luchando con esto instalando pararrayos y SPD en la entrada de la casa, pero esta es una práctica muy rara en la Federación de Rusia. </font><font style="vertical-align: inherit;">Así que deja que la chispa entre en la tierra, y no a través de ti, haz una buena conexión a tierra en toda la casa. </font><font style="vertical-align: inherit;">¡Sin esto, no puedes hacer nada más!</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre generadores</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, para muchos generadores de gasolina domésticos, los devanados no están conectados a la tierra. Y esto es bastante normal cuando está utilizando una herramienta eléctrica del generador. Pero cuando necesita conectar el generador a la casa, necesita hacer un cable neutro (N) y un cable de fase (L). Para hacer esto, uno de los cables del generador está conectado a tierra y, desde este punto de conexión a tierra, dos cables ya deben ser conducidos independientemente a la casa: uno será neutro N y el segundo, tierra de protección (PE). Al elegir un generador, debe prestar atención a si es posible conectar a tierra su salida, a veces está prohibido en las instrucciones para el generador, entonces dicho generador no será adecuado para usted.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo, en la red, puede ver los diagramas de conexión del generador sin conexión a tierra y separación de las líneas N y PE. </font><font style="vertical-align: inherit;">No hagas esto, vivirás más tiempo. </font><font style="vertical-align: inherit;">Tales esquemas funcionan bien hasta el primer conjunto desafortunado de circunstancias. </font><font style="vertical-align: inherit;">Las fuentes de alimentación típicas para dispositivos electrónicos modernos incluyen condensadores de líneas L, N a tierra. </font><font style="vertical-align: inherit;">Si N no está conectado a tierra en el generador, entonces, debido a estos condensadores en la línea N, habrá, si tiene suerte, 110 voltios en relación con el suelo. </font><font style="vertical-align: inherit;">Por cierto, muchas calderas de gas en este modo generalmente dejan de funcionar. </font><font style="vertical-align: inherit;">Sobre la influencia de la estática sin la presencia de conexión a tierra, ya escribí anteriormente.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acerca de los esquemas ABP</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen varios esquemas diferentes para implementar ATS. Además, escribiré sobre el circuito más seguro de ATS monofásico desde mi punto de vista. No recomiendo hacer ABP con moderación en un contactor o cambiar solo un cable de fase. Solo con neutral. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/vh/v-/rl/vhv-rllrb28jayf15egb9xgltua.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el diagrama anterior, la energía de la red y del generador se suministra a través de las entradas 1 y 2. Están protegidas por máquinas emparejadas. A través de máquinas adicionales, se alimentan circuitos de conmutación e indicación. Se puede ver que las bobinas del relé están mutuamente enclavadas eléctricamente. Para simplificar esta o aquella entrada, el microcontrolador, que no se muestra en el diagrama, es responsable de la simplificación, que cierra el circuito en el punto de conmutación TK1 o TK2.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El punto fundamental es la presencia en los esquemas de bloqueo ATS 2x: bloqueo mecánico mutuo de las entradas de conmutación de los contactores y bloqueo eléctrico mutuo de los contactores. </font><font style="vertical-align: inherit;">Hecho a sí mismo por el bien de la economía, sucede, en sus diseños descuidan estas cerraduras, pero en vano. </font><font style="vertical-align: inherit;">El circuito sin bloqueo puede funcionar durante algún tiempo, pero en algún momento los contactos se quemarán, los resortes de retorno se debilitarán y se producirá un cortocircuito entre las entradas. </font><font style="vertical-align: inherit;">En primer lugar, amenaza una gran variedad si ambas líneas están energizadas, pero este no es el mayor problema. </font><font style="vertical-align: inherit;">Es mucho más importante que su generador, inesperadamente para los electricistas que reparan el cableado, pueda suministrar voltaje a la red común; en una combinación desfavorable de circunstancias, los electricistas que reparan la línea pueden morir. </font><font style="vertical-align: inherit;">Este ya es un artículo criminal para ti.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre contactores</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, el uso de relés convencionales desaparece para nosotros, solo son adecuados los contactores especializados. Para grandes capacidades, todavía existe una opción con unidades motorizadas, pero es costosa y redundante para el uso doméstico típico. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer un enclavamiento mecánico, debe seleccionar contactores que puedan funcionar en pares. El bloqueo mutuo generalmente se logra instalando los mismos contactores uno al lado del otro e instalando una opción adicional: un enclavamiento mecánico. Se vende por separado de los contactores y cuesta un centavo. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El enclavamiento eléctrico mutuo es posible si el contactor tiene contactos de señalización adicionales que funcionan en la apertura. A veces se incorporan inmediatamente al contactor, a veces se pueden comprar e instalar como opción.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los principales fabricantes de contactores tienen dicho equipo en sus líneas. Por lo tanto, encontrar y comprar un kit no es difícil. Es cierto que los precios de los contactores de marca son mucho más altos que los nuestros / chinos. Dado que no se espera que el número de ciclos de conmutación sea grande, la elección de contactores chinos está justificada. Las desventajas se pueden atribuir solo al hecho de que las bobinas del contactor durante la operación producen mucho zumbido.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Más acerca de la energía conmutada. </font><font style="vertical-align: inherit;">Los contactos del contactor deben soportar la potencia máxima que se le permite consumir en la casa. </font><font style="vertical-align: inherit;">Tengo 10 kW, así que elegí los contactores para la corriente permitida a través de un contacto a aproximadamente 50 amperios. </font><font style="vertical-align: inherit;">Vale la pena señalar que, por alguna razón, la potencia conmutada para un contactor trifásico típico se indica en el total del pasaporte para las tres fases, por lo que debe observar cuidadosamente qué corriente permisible es a través de un contacto.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre el esquema de control</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando participé en la creación de ABP, tenía varios requisitos especiales para su trabajo:</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<ul>
<li>      ,   ,      ,          :   ,      ,      ,     </li>
<li>              . ..           </li>
<li>            ,     ,                </li>
<li>, ,       .        </li>
</ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, surgió la imagen de que necesitaba un controlador con varios temporizadores. En esos días, me gustaba codificar en AVR, así que decidí hacer un controlador de este tipo en Atmega 8a. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sería bueno si el controlador funcionó durante mucho tiempo y de manera confiable. Además, para hacer un aislamiento galvánico completo y equipar el controlador con un temporizador de vigilancia, no se me ocurrió nada más. Bueno, haga que el esquema y el programa sean lo más simples posible. Como todo se hizo por mí mismo, decidí dejar todas las configuraciones y calibraciones en el código: toda la interfaz de usuario se redujo a un LED) </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tarea principal del controlador es monitorear el voltaje en las entradas y, si es necesario, cambiar las entradas. Al mismo tiempo, la entrada de la red de la aldea es una prioridad.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale la pena señalar aquí que la calidad de la red es tal que las fluctuaciones de 150 a 250 son bastante comunes. Por lo tanto, el concepto de que hay un buen poder de la red es muy borroso. Después de un tiempo, resolví este problema cuando puse en toda la casa un potente regulador de voltaje de tiristores para 11 kW. Pero, lo que es más importante, el estabilizador solo se puede configurar antes del ABP, ¡y no después! No se recomienda encender el estabilizador del generador. Existe el peligro de que con una cierta combinación de cargas, especialmente cualquier bomba potente, el sistema del generador y el estabilizador se vuelva inestable y entre en auto-oscilaciones. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de pensarlo un poco, dibujé tal esquema en Eagle.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/3s/nr/v9/3snrv9ux0nbon6t1wf1vslf9h-c.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El circuito tiene dos fuentes de alimentación de transformador idénticas, si hay voltaje en alguna de las entradas, el circuito recibe alimentación. Es posible un voltaje de 600 V entre las entradas, por lo que el aislamiento de los transformadores debe ser bueno. Las comidas se toman después de los paquetes QF3 y QF4, respectivamente. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada fuente tiene un divisor de voltaje resistivo, que está protegido contra sobrevoltaje por un diodo zener; se usa para calcular el voltaje de la red usando un microcontrolador ADC usando cálculos simples. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para cambiar las bobinas de contactor, se utiliza un circuito de hoja de datos estándar para controlar las siete celdas. 2 piezas ). Las bobinas son una carga inductiva, por lo que se requieren circuitos amortiguadores a la salida de la resistencia y el condensador.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenía un módulo de relé con ali, que se usa para detener el generador. </font><font style="vertical-align: inherit;">En el diagrama, es solo un rectángulo con tres pines. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De las características, TL431 también se utiliza como generador de voltaje de referencia. </font><font style="vertical-align: inherit;">De lo contrario, todo está incluido como estándar para Atmega 8. Hay LED para indicar la presencia de voltaje de alimentación en las entradas y un LED de estado del dispositivo. </font><font style="vertical-align: inherit;">El circuito se sincroniza con cuarzo externo de 16 MHz. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eagle me dio una placa de circuito impreso de ese tipo. </font><font style="vertical-align: inherit;">Sin SMD, triacs o estabilizadores con radiadores livianos. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<img src="https://habrastorage.org/webt/48/c6/iw/48c6iwzgd0ea_4r-hua23bfriz4.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos transformadores toroidales están instalados directamente en el tablero. </font><font style="vertical-align: inherit;">La placa de circuito se fabricó a la manera tradicional de la radioafición utilizando una fotorresistencia. </font><font style="vertical-align: inherit;">Después de la instalación, cubierto con tres capas de barniz acrílico. </font><font style="vertical-align: inherit;">Espero que su alto voltaje no se rompa.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre el programa de gestión</font></font></h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El código del programa es bastante largo, lo siento.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código de programa</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">/*
 * ABP -    "  "
 *              -
 *       ,  - 
 *     -    .
 *      RS232   ,  SPI  
 *    3 .    
 *         .  
 *      .
 *
 *         printf
 *     -Wl,-u,vfprintf -lprintf_flt
 */</span>
 <span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> F_CPU</span>
 <span class="hljs-meta">#  <span class="hljs-meta-keyword">define</span> F_CPU 16000000UL</span>
 <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BAUD 9600</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/io.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;util/delay.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/interrupt.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/wdt.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;avr/sleep.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">//       </span>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">uint8_t</span> mcusr_mirror __attribute__ ((section (<span class="hljs-string">".noinit"</span>)));<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">get_mcusr</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> \
__<span class="hljs-title">attribute__</span><span class="hljs-params">((naked))</span> \
__<span class="hljs-title">attribute__</span><span class="hljs-params">((section(<span class="hljs-string">".init3"</span>)))</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">get_mcusr</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
   mcusr_mirror = MCUSR;<font></font>
   MCUSR = <span class="hljs-number">0</span>;<font></font>
   wdt_disable();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// UART      RS232</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">uart_init</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{
<span class="hljs-comment">/* //  
   UBRRH = 0;
   UBRRL = 103; //9600   16  */</span>
    <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;util/setbaud.h&gt;</span></span><font></font>
    UBRRH = UBRRH_VALUE;<font></font>
    UBRRL = UBRRL_VALUE;   <font></font>
    <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> USE_2X</span>
      UCSRA |= (<span class="hljs-number">1</span> &lt;&lt; U2X);
    <span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
      UCSRA &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; U2X);
   <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
   <span class="hljs-comment">//8  , 1  ,   </span>
   UCSRC = ( <span class="hljs-number">1</span> &lt;&lt; URSEL ) | ( <span class="hljs-number">1</span> &lt;&lt; UCSZ1 ) | ( <span class="hljs-number">1</span> &lt;&lt; UCSZ0 );
   <span class="hljs-comment">//    </span>
   UCSRB = ( <span class="hljs-number">1</span> &lt;&lt; TXEN ) | ( <span class="hljs-number">1</span> &lt;&lt;RXEN );<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">uart_putc</span><span class="hljs-params">(  <span class="hljs-keyword">char</span> c, FILE *file )</span>
</span>{
   <span class="hljs-comment">//    </span>
   <span class="hljs-keyword">while</span>( ( UCSRA &amp; ( <span class="hljs-number">1</span> &lt;&lt; UDRE ) ) == <span class="hljs-number">0</span> );<font></font>
   UDR = c;<font></font>
   wdt_reset();<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
FILE uart_stream = FDEV_SETUP_STREAM( uart_putc, <span class="hljs-literal">NULL</span>, _FDEV_SETUP_WRITE );<font></font>
<font></font>
<span class="hljs-comment">//   1    -    </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">timer1_init</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{<font></font>
   TCCR1A = <span class="hljs-number">0</span>; <span class="hljs-comment">//    1 -  </span>
   <span class="hljs-comment">/* 16000000 / 1024 = 15625 ,     15625      1  */</span>
   <span class="hljs-comment">//  CTC, ICP1 interrupt sense (falling)(not used) + prescale /1024 +    (not used) </span>
   TCCR1B = (<span class="hljs-number">0</span> &lt;&lt; WGM13) | (<span class="hljs-number">1</span> &lt;&lt; WGM12) | (<span class="hljs-number">0</span> &lt;&lt; ICES1) | ((<span class="hljs-number">1</span> &lt;&lt; CS12) | (<span class="hljs-number">0</span> &lt;&lt; CS11) | (<span class="hljs-number">1</span> &lt;&lt; CS10)) | (<span class="hljs-number">0</span> &lt;&lt; ICNC1); <font></font>
   OCR1A = <span class="hljs-number">15625</span>;  <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   TIMSK |= (<span class="hljs-number">1</span> &lt;&lt; OCIE1A);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> _ABP_RLY_STATES {<font></font>
   RLY_OFF = <span class="hljs-number">0</span>, <span class="hljs-comment">//  </span>
   RLY_ON <span class="hljs-comment">//  </span><font></font>
} ABP_RLY_STATES;<font></font>
<font></font>
<span class="hljs-comment">//     </span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> _ABP_RLY {<font></font>
   RLY_220N = <span class="hljs-number">0</span>,<font></font>
   RLY_220G,<font></font>
   RLY_GEN<font></font>
} ABP_RLY;<font></font>
<font></font>
<span class="hljs-keyword">volatile</span> ABP_RLY_STATES contactors[RLY_GEN+<span class="hljs-number">1</span>]; <span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> _ABP_TMR_STATES {<font></font>
   TMR_OFF = <span class="hljs-number">0</span>, <span class="hljs-comment">//  </span>
   TMR_ON <span class="hljs-comment">//  </span><font></font>
} ABP_TMR_STATES;<font></font>
<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
   ABP_TMR_STATES state; <span class="hljs-comment">//   </span>
   <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> passed_secs; <span class="hljs-comment">//    (  255!!!)</span>
   <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> set_secs; <span class="hljs-comment">//     </span><font></font>
} TMR_INSTANCE;<font></font>
<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> _ABP_TMRS {<font></font>
   TMR_220N_ON = <span class="hljs-number">0</span>,  <span class="hljs-comment">//      220  </span>
   TMR_220G_ON, <span class="hljs-comment">//      220  </span>
   TMR_220N_OFF, <span class="hljs-comment">//      220  </span>
   TMR_220G_OFF, <span class="hljs-comment">//      220   </span>
   TMR_PRINT, <span class="hljs-comment">//      </span>
   TMR_GEN_OFF <span class="hljs-comment">//        220  </span><font></font>
} ABP_TMRS;<font></font>
<font></font>
<span class="hljs-keyword">volatile</span> TMR_INSTANCE abp_timers[TMR_GEN_OFF+<span class="hljs-number">1</span>]; <span class="hljs-comment">//    ABP_TMRS</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">abp_timers_init</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span> </span>{
   <span class="hljs-comment">//     </span>
   abp_timers[TMR_220N_ON].set_secs = <span class="hljs-number">10</span>; <span class="hljs-comment">//     </span>
   abp_timers[TMR_220G_ON].set_secs = <span class="hljs-number">60</span>; <span class="hljs-comment">//        </span>
   abp_timers[TMR_220N_OFF].set_secs = <span class="hljs-number">5</span>; <span class="hljs-comment">//     </span>
   abp_timers[TMR_220G_OFF].set_secs = <span class="hljs-number">5</span>; <span class="hljs-comment">//     </span>
   abp_timers[TMR_GEN_OFF].set_secs = <span class="hljs-number">60</span>; <span class="hljs-comment">//      </span>
   abp_timers[TMR_PRINT].set_secs = <span class="hljs-number">2</span>; <span class="hljs-comment">//  </span><font></font>
   <font></font>
   <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> i;
   <span class="hljs-keyword">for</span>(i=TMR_220N_ON; i&lt;=TMR_GEN_OFF; i++ ) {<font></font>
      abp_timers[i].state = TMR_OFF;<font></font>
      abp_timers[i].passed_secs = <span class="hljs-number">0</span>;<font></font>
   }<font></font>
   <span class="hljs-keyword">for</span>(i=RLY_220N; i&lt;=RLY_GEN; i++ ) {<font></font>
      contactors[i] = RLY_OFF;<font></font>
   }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">abp_timer_start</span><span class="hljs-params">( ABP_TMRS tmr )</span> </span>{<font></font>
   abp_timers[tmr].passed_secs = <span class="hljs-number">0</span>;<font></font>
   abp_timers[tmr].state = TMR_ON;    <font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">abp_timer_stop</span><span class="hljs-params">( ABP_TMRS tmr )</span> </span>{<font></font>
   abp_timers[tmr].state = TMR_OFF;<font></font>
   abp_timers[tmr].passed_secs = <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> <span class="hljs-title">abp_timer_check</span><span class="hljs-params">( ABP_TMRS tmr )</span> </span>{
   <span class="hljs-keyword">if</span> (abp_timers[tmr].passed_secs &gt;= abp_timers[tmr].set_secs) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <font></font>
   } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
   }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
ISR(TIMER1_COMPA_vect)<font></font>
{<font></font>
   <span class="hljs-comment">//       /</span>
   <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> i;
   <span class="hljs-keyword">for</span>(i=TMR_220N_ON; i&lt;=TMR_GEN_OFF; i++ ) {
      <span class="hljs-keyword">if</span> (abp_timers[i].state) {<font></font>
         abp_timers[i].passed_secs++;   <font></font>
      }<font></font>
   }<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">// COUNTER2      led_State</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">counter2_init</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{<font></font>
   ASSR = <span class="hljs-number">0</span>;  <span class="hljs-comment">/* AS0 = 0 */</span>  <span class="hljs-comment">/* disable asynchronous mode */</span>
   <span class="hljs-keyword">while</span> (ASSR); <span class="hljs-comment">/*EMPTY*/</span><font></font>
<font></font>
   OCR2 = <span class="hljs-number">223</span>;             <span class="hljs-comment">/* 70    */</span><font></font>
<font></font>
   TCCR2 |= (<span class="hljs-number">1</span> &lt;&lt; CS22) | (<span class="hljs-number">1</span> &lt;&lt; CS21) | (<span class="hljs-number">1</span> &lt;&lt; CS20);  <span class="hljs-comment">/* prescale /1024 */</span><font></font>
   <font></font>
   TCCR2 |= (<span class="hljs-number">1</span> &lt;&lt; WGM21);                <span class="hljs-comment">/* mode CTC */</span>
   TCCR2 &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; WGM20);<font></font>
   <font></font>
   TCCR2 &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; COM21);              <span class="hljs-comment">/*    OC2 */</span>
   TCCR2 &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; COM20);<font></font>
   <font></font>
   TIMSK |= (<span class="hljs-number">1</span> &lt;&lt; OCIE2);          <span class="hljs-comment">/* enable compare interrupt */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> _ABP_LED_STATES {<font></font>
   ABP_UNDEF = <span class="hljs-number">0</span>, <span class="hljs-comment">//  </span>
   ABP_1RELAY, <span class="hljs-comment">//  1 </span>
   ABP_2RELAY  <span class="hljs-comment">//  2 </span><font></font>
} ABP_LED_STATES;<font></font>
ABP_LED_STATES led_State = ABP_UNDEF;<font></font>
<font></font>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> led_pattern[<span class="hljs-number">3</span>][<span class="hljs-number">10</span>] =<font></font>
{ { <span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span> }, <span class="hljs-comment">//   </span>
  { <span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span> }, <span class="hljs-comment">//  1 </span>
  { <span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span> } }; <span class="hljs-comment">//  2 </span><font></font>
<font></font>
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> timer2_count = <span class="hljs-number">0</span>;         
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> led_cycle = <span class="hljs-number">0</span>; <span class="hljs-comment">//  0  9</span><font></font>
<font></font>
ISR(TIMER2_COMP_vect)  <span class="hljs-comment">//    70   </span><font></font>
{<font></font>
   <span class="hljs-keyword">if</span> (++timer2_count &gt; <span class="hljs-number">6</span>)       <span class="hljs-comment">//    0.1 .    </span><font></font>
   {<font></font>
      timer2_count = <span class="hljs-number">0</span>;           <span class="hljs-comment">//  </span>
      <span class="hljs-keyword">if</span> (led_pattern[led_State][led_cycle]) {<font></font>
         PORTB &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PB0); <span class="hljs-comment">//         </span>
      } <span class="hljs-keyword">else</span> {<font></font>
         PORTB |=  (<span class="hljs-number">1</span> &lt;&lt; PB0); <span class="hljs-comment">// </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span> (++led_cycle &gt;= <span class="hljs-number">10</span>)<font></font>
         led_cycle = <span class="hljs-number">0</span>;<font></font>
   }  <font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//       </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SAMPLES 2500</span>
<span class="hljs-comment">//    TL431</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> REFERENCEV 2.479</span>
<span class="hljs-comment">//      </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DIVIDER1 (12.3/2.13)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DIVIDER2 (12.4/2.03)</span><font></font>
<font></font>
<span class="hljs-keyword">double</span> realV1 = <span class="hljs-number">0</span>; <span class="hljs-comment">//     V0</span>
<span class="hljs-keyword">double</span> realV2 = <span class="hljs-number">0</span>; <span class="hljs-comment">//     V1</span><font></font>
<font></font>
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> sampleCount = <span class="hljs-number">0</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> tempVoltage1 = <span class="hljs-number">0</span>; <span class="hljs-comment">//    </span>
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> tempVoltage2 = <span class="hljs-number">0</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> sumVoltage1 = <span class="hljs-number">0</span>; <span class="hljs-comment">//         </span>
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> sumVoltage2 = <span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ADC_init</span><span class="hljs-params">()</span> <span class="hljs-comment">// ADC1,0</span>
</span>{
   <span class="hljs-comment">//   2,5, 10 bit </span>
   ADMUX = (<span class="hljs-number">0</span> &lt;&lt; REFS0) | (<span class="hljs-number">0</span> &lt;&lt; REFS1) | (<span class="hljs-number">0</span> &lt;&lt; ADLAR) |<font></font>
   (<span class="hljs-number">0</span> &lt;&lt; MUX3) | (<span class="hljs-number">0</span> &lt;&lt; MUX2) | (<span class="hljs-number">0</span> &lt;&lt; MUX1) | (<span class="hljs-number">0</span> &lt;&lt; MUX0); <span class="hljs-comment">// ADC0</span>
   <span class="hljs-comment">// , free running,  </span>
   ADCSRA = (<span class="hljs-number">1</span> &lt;&lt; ADEN) | (<span class="hljs-number">1</span> &lt;&lt; ADFR) | (<span class="hljs-number">1</span> &lt;&lt; ADIE) |<font></font>
   (<span class="hljs-number">1</span> &lt;&lt; ADPS2) | (<span class="hljs-number">1</span> &lt;&lt; ADPS1) | (<span class="hljs-number">1</span> &lt;&lt; ADPS0); <span class="hljs-comment">//  128</span><font></font>
   <font></font>
   ADCSRA |= (<span class="hljs-number">1</span> &lt;&lt; ADSC);             <span class="hljs-comment">// Start ADC Conversion</span><font></font>
}<font></font>
<font></font>
ISR(ADC_vect) <span class="hljs-comment">//     2500    </span><font></font>
{<font></font>
   <span class="hljs-keyword">if</span> ((ADMUX &amp; (<span class="hljs-number">1</span> &lt;&lt; MUX0))) { <span class="hljs-comment">//    ADC1</span>
      <span class="hljs-keyword">if</span> (sampleCount++) <span class="hljs-comment">//   </span><font></font>
         tempVoltage1 += ADC;<font></font>
      <span class="hljs-keyword">if</span> (sampleCount &gt;= SAMPLES) {<font></font>
         sampleCount = <span class="hljs-number">0</span>;<font></font>
         sumVoltage1 = tempVoltage1;<font></font>
         tempVoltage2 = <span class="hljs-number">0</span>;<font></font>
         tempVoltage1 = <span class="hljs-number">0</span>;<font></font>
         ADMUX &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; MUX0); <span class="hljs-comment">//   ADC0</span><font></font>
      }        <font></font>
   } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//    ADC0</span>
      <span class="hljs-keyword">if</span> (sampleCount++) <span class="hljs-comment">//   </span><font></font>
         tempVoltage2 += ADC;<font></font>
      <span class="hljs-keyword">if</span> (sampleCount &gt;= SAMPLES) {<font></font>
         sampleCount = <span class="hljs-number">0</span>;<font></font>
         sumVoltage2 = tempVoltage2;<font></font>
         tempVoltage2 = <span class="hljs-number">0</span>;<font></font>
         tempVoltage1 = <span class="hljs-number">0</span>;<font></font>
         ADMUX |= (<span class="hljs-number">1</span> &lt;&lt; MUX0); <span class="hljs-comment">//   ADC1</span><font></font>
      }  <font></font>
   }<font></font>
   ADCSRA |=(<span class="hljs-number">1</span> &lt;&lt; ADIF);              <span class="hljs-comment">// Acknowledge the ADC Interrupt Flag</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//      </span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> _ABP_U_STATES {<font></font>
   U_INVALID = <span class="hljs-number">0</span>, <span class="hljs-comment">//    </span>
   U_VALID <span class="hljs-comment">//   </span><font></font>
} ABP_U_STATES;<font></font>
<font></font>
ABP_U_STATES u220n, u220g; <span class="hljs-comment">//     </span><font></font>
<font></font>
<span class="hljs-comment">//         </span>
<span class="hljs-comment">//        ,   </span>
<span class="hljs-comment">//    ( ),   </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_V 14.0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MIN_V 7.5</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ports_init</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-comment">//    </span>
   PORTB &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PB0);<font></font>
   DDRB  |=  (<span class="hljs-number">1</span> &lt;&lt; PB0); <span class="hljs-comment">// output</span>
   PORTB &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PB0); <span class="hljs-comment">// </span><font></font>
   <font></font>
   <span class="hljs-comment">//    1</span>
   PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD4);<font></font>
   DDRD  |=  (<span class="hljs-number">1</span> &lt;&lt; PD4); <span class="hljs-comment">// output</span>
   PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD4); <span class="hljs-comment">//   - </span>
   <span class="hljs-comment">//    2</span>
   PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD3);<font></font>
   DDRD  |=  (<span class="hljs-number">1</span> &lt;&lt; PD3); <span class="hljs-comment">// output</span>
   PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD3); <span class="hljs-comment">//   - </span>
   <span class="hljs-comment">//     </span>
   PORTD &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PD2);<font></font>
   DDRD  |=  (<span class="hljs-number">1</span> &lt;&lt; PD2); <span class="hljs-comment">// output</span>
   PORTD &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PD2); <span class="hljs-comment">//   - </span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">validate220</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-comment">//       </span>
   realV1 = DIVIDER1 * ((sumVoltage1 * REFERENCEV) / <span class="hljs-number">1024</span>) / SAMPLES;<font></font>
   realV2 = DIVIDER2 * ((sumVoltage2 * REFERENCEV) / <span class="hljs-number">1024</span>) / SAMPLES;<font></font>
   <font></font>
   <span class="hljs-keyword">if</span>( realV1 &gt; MAX_V || realV1 &lt; MIN_V ) { <span class="hljs-comment">//    </span><font></font>
      u220g = U_INVALID;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
      u220g = U_VALID;<font></font>
   }<font></font>
   <span class="hljs-keyword">if</span>( realV2 &gt; MAX_V || realV2 &lt; MIN_V ) { <span class="hljs-comment">//    </span><font></font>
      u220n = U_INVALID;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
      u220n = U_VALID;<font></font>
   }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">validate_contactors</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-comment">//      220 </span>
      <span class="hljs-comment">//   RLY_220N = RLY_ON  RLY_OFF</span>
      <span class="hljs-keyword">if</span>( u220n == U_VALID &amp;&amp; contactors[RLY_220N] == RLY_OFF<font></font>
      &amp;&amp; abp_timers[TMR_220N_ON].state == TMR_OFF) { <span class="hljs-comment">//  ,   ,    </span>
         abp_timer_stop( TMR_220N_OFF ); <span class="hljs-comment">//    220</span>
         abp_timer_start( TMR_220N_ON ); <span class="hljs-comment">//    220</span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220n == U_VALID &amp;&amp; contactors[RLY_220N] == RLY_OFF<font></font>
      &amp;&amp; abp_timers[TMR_220N_ON].state == TMR_ON &amp;&amp; abp_timer_check(TMR_220N_ON)) { <span class="hljs-comment">//  ,   ,  </span>
         abp_timer_stop( TMR_220N_OFF ); <span class="hljs-comment">//    220</span>
         abp_timer_stop( TMR_220N_ON ); <span class="hljs-comment">//    220</span>
         contactors[RLY_220N] = RLY_ON; <span class="hljs-comment">//    220</span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220n == U_VALID &amp;&amp; contactors[RLY_220N] == RLY_ON<font></font>
      &amp;&amp; abp_timers[TMR_220N_OFF].state == TMR_ON) { <span class="hljs-comment">//  ,  ,    </span>
         abp_timer_stop( TMR_220N_OFF ); <span class="hljs-comment">//    220</span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220n == U_INVALID &amp;&amp; contactors[RLY_220N] == RLY_ON<font></font>
      &amp;&amp; abp_timers[TMR_220N_OFF].state == TMR_OFF) { <span class="hljs-comment">//  ,   ,    </span>
         abp_timer_stop( TMR_220N_ON ); <span class="hljs-comment">//    220</span>
         abp_timer_start( TMR_220N_OFF ); <span class="hljs-comment">//    220</span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220n == U_INVALID &amp;&amp; contactors[RLY_220N] == RLY_ON<font></font>
      &amp;&amp; abp_timers[TMR_220N_OFF].state == TMR_ON &amp;&amp; abp_timer_check(TMR_220N_OFF)) { <span class="hljs-comment">//  ,   ,  </span>
         abp_timer_stop( TMR_220N_OFF ); <span class="hljs-comment">//    220</span>
         abp_timer_stop( TMR_220N_ON ); <span class="hljs-comment">//    220</span>
         contactors[RLY_220N] = RLY_OFF; <span class="hljs-comment">//    220</span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220n == U_INVALID &amp;&amp; contactors[RLY_220N] == RLY_OFF<font></font>
      &amp;&amp; abp_timers[TMR_220N_ON].state == TMR_ON) { <span class="hljs-comment">//  ,  ,    </span>
         abp_timer_stop( TMR_220N_ON ); <span class="hljs-comment">//    220</span><font></font>
      }<font></font>
      <font></font>
      <span class="hljs-comment">//     </span>
      <span class="hljs-comment">//   RLY_220G = RLY_ON  RLY_OFF</span>
      <span class="hljs-keyword">if</span>( u220g == U_VALID &amp;&amp; contactors[RLY_220G] == RLY_OFF<font></font>
      &amp;&amp; abp_timers[TMR_220G_ON].state == TMR_OFF) { <span class="hljs-comment">//  ,   ,    </span>
         abp_timer_stop( TMR_220G_OFF ); <span class="hljs-comment">//    </span>
         abp_timer_start( TMR_220G_ON ); <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220g == U_VALID &amp;&amp; contactors[RLY_220G] == RLY_OFF<font></font>
      &amp;&amp; abp_timers[TMR_220G_ON].state == TMR_ON &amp;&amp; abp_timer_check(TMR_220G_ON)) { <span class="hljs-comment">//  ,   ,  </span>
         abp_timer_stop( TMR_220G_OFF ); <span class="hljs-comment">//    </span>
         abp_timer_stop( TMR_220G_ON ); <span class="hljs-comment">//    </span>
         contactors[RLY_220G] = RLY_ON; <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220g == U_VALID &amp;&amp; contactors[RLY_220G] == RLY_ON<font></font>
      &amp;&amp; abp_timers[TMR_220G_OFF].state == TMR_ON) { <span class="hljs-comment">//  ,  ,    </span>
         abp_timer_stop( TMR_220G_OFF ); <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220g == U_INVALID &amp;&amp; contactors[RLY_220G] == RLY_ON<font></font>
      &amp;&amp; abp_timers[TMR_220G_OFF].state == TMR_OFF) { <span class="hljs-comment">//  ,   ,    </span>
         abp_timer_stop( TMR_220G_ON ); <span class="hljs-comment">//    </span>
         abp_timer_start( TMR_220G_OFF ); <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220g == U_INVALID &amp;&amp; contactors[RLY_220G] == RLY_ON<font></font>
      &amp;&amp; abp_timers[TMR_220G_OFF].state == TMR_ON &amp;&amp; abp_timer_check(TMR_220G_OFF)) { <span class="hljs-comment">//  ,   ,  </span>
         abp_timer_stop( TMR_220G_OFF ); <span class="hljs-comment">//    </span>
         abp_timer_stop( TMR_220G_ON ); <span class="hljs-comment">//    </span>
         contactors[RLY_220G] = RLY_OFF; <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( u220g == U_INVALID &amp;&amp; contactors[RLY_220G] == RLY_OFF<font></font>
      &amp;&amp; abp_timers[TMR_220G_ON].state == TMR_ON) { <span class="hljs-comment">//  ,  ,    </span>
         abp_timer_stop( TMR_220G_ON ); <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <font></font>
      <span class="hljs-comment">//      </span>
      <span class="hljs-keyword">if</span>( contactors[RLY_220N] == RLY_OFF &amp;&amp; contactors[RLY_GEN] == RLY_OFF) { <span class="hljs-comment">//  ,  </span>
         abp_timer_stop( TMR_GEN_OFF ); <span class="hljs-comment">//    </span>
         contactors[RLY_GEN] = RLY_ON; <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( contactors[RLY_220N] == RLY_ON &amp;&amp; abp_timers[TMR_GEN_OFF].state == TMR_OFF <font></font>
      &amp;&amp; u220g == U_VALID) { <span class="hljs-comment">//  220      </span>
         abp_timer_start( TMR_GEN_OFF ); <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( contactors[RLY_220N] == RLY_ON &amp;&amp; abp_timers[TMR_GEN_OFF].state == TMR_OFF<font></font>
      &amp;&amp; u220g == U_INVALID) { <span class="hljs-comment">//  220      </span>
         abp_timer_stop( TMR_GEN_OFF ); <span class="hljs-comment">//    </span>
         contactors[RLY_GEN] = RLY_OFF; <span class="hljs-comment">//    </span><font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>( contactors[RLY_220N] == RLY_ON &amp;&amp; abp_timers[TMR_GEN_OFF].state == TMR_ON<font></font>
      &amp;&amp;  abp_timer_check(TMR_GEN_OFF) ) { <span class="hljs-comment">//  220      </span>
         abp_timer_stop( TMR_GEN_OFF ); <span class="hljs-comment">//    </span>
         contactors[RLY_GEN] = RLY_OFF; <span class="hljs-comment">//    </span><font></font>
      }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">switch_contactors</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-comment">//   </span>
   <span class="hljs-keyword">if</span>( contactors[RLY_220N] == RLY_ON ) {<font></font>
      PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD4); <span class="hljs-comment">//   -   1 </span>
       _delay_ms(<span class="hljs-number">50</span>); <span class="hljs-comment">//      </span>
      PORTD &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PD3); <span class="hljs-comment">//   -   2 220</span><font></font>
      led_State = ABP_2RELAY;<font></font>
   } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span>( contactors[RLY_220G] == RLY_ON ) {<font></font>
         PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD3); <span class="hljs-comment">//   -   2 220</span>
         PORTD &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PD4); <span class="hljs-comment">//   -   1 </span><font></font>
         led_State = ABP_1RELAY;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
         PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD3); <span class="hljs-comment">//   -   2 220</span>
         PORTD |=  (<span class="hljs-number">1</span> &lt;&lt; PD4); <span class="hljs-comment">//   -   1 </span><font></font>
         led_State = ABP_UNDEF;<font></font>
      }<font></font>
   }<font></font>
   <span class="hljs-keyword">if</span>( contactors[RLY_GEN] != RLY_ON ) { <span class="hljs-comment">// v2       -     </span>
      PORTD &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; PD2); <span class="hljs-comment">//   -   -     -  </span>
   } <span class="hljs-keyword">else</span> {<font></font>
      PORTD |= (<span class="hljs-number">1</span> &lt;&lt; PD2); <span class="hljs-comment">//   -   -    </span><font></font>
   }<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
   ports_init(); <span class="hljs-comment">//   ,   </span><font></font>
   <font></font>
   uart_init(); <span class="hljs-comment">// uart</span>
   <span class="hljs-built_in">stdout</span> =  &amp;uart_stream;<font></font>
   <font></font>
   counter2_init(); <span class="hljs-comment">//    </span>
   ADC_init(); <span class="hljs-comment">//    220</span>
   abp_timers_init(); <span class="hljs-comment">//      </span>
   timer1_init(); <span class="hljs-comment">//       1</span><font></font>
<font></font>
    set_sleep_mode(SLEEP_MODE_IDLE);  <span class="hljs-comment">//     IDLE</span><font></font>
    sleep_enable();<font></font>
<font></font>
    wdt_enable(WDTO_2S); <span class="hljs-comment">//       2 </span><font></font>
<font></font>
   sei(); <span class="hljs-comment">//   </span><font></font>
   <font></font>
   _delay_ms(<span class="hljs-number">1000</span>); <span class="hljs-comment">//    ,   0</span><font></font>
   wdt_reset();<font></font>
   <span class="hljs-built_in">printf</span>( <span class="hljs-string">"Start flag after reset = %u\r\n"</span>, mcusr_mirror );<font></font>
   abp_timer_start(TMR_PRINT);<font></font>
   <font></font>
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<font></font>
    {<font></font>
      wdt_reset(); <span class="hljs-comment">//   </span><font></font>
      <font></font>
      validate220(); <span class="hljs-comment">//   220    </span><font></font>
   <font></font>
      validate_contactors(); <span class="hljs-comment">//      </span><font></font>
      <font></font>
      switch_contactors(); <span class="hljs-comment">//    </span><font></font>
      <font></font>
      <span class="hljs-comment">//     2 </span>
      <span class="hljs-keyword">if</span> (abp_timer_check(TMR_PRINT)) {
         <span class="hljs-built_in">printf</span>( <span class="hljs-string">"V220 = %4.2f VG = %4.2f\r\n"</span>, realV2, realV1 );
         <span class="hljs-built_in">printf</span>( <span class="hljs-string">"valid = %u %u \r\n"</span>, u220n, u220g );
         <span class="hljs-built_in">printf</span>( <span class="hljs-string">"rly = %u %u %u\r\n"</span>, contactors[RLY_220N], contactors[RLY_220G], contactors[RLY_GEN] );<font></font>
         abp_timer_start(TMR_PRINT);<font></font>
      }<font></font>
      <font></font>
        sleep_cpu(); <span class="hljs-comment">//      </span><font></font>
    }<font></font>
}<font></font>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
</div>
                    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El programa fue desarrollado utilizando el AVR Studio gratuito y utiliza bibliotecas AVR estándar. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el bucle principal, el programa verifica el voltaje en las entradas de las entradas, evalúa el estado de encendido de los contactores, tiene en cuenta el funcionamiento de los temporizadores del programa, realiza los ajustes necesarios encendiendo o apagando los relés y contactores, y luego entra en hibernación. </font><font style="vertical-align: inherit;">Para la depuración, se realiza la conclusión de la impresión de depuración en el puerto serie del microcontrolador. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controlar las heladas, se proporciona un temporizador de vigilancia. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los ciclos de medición se realizan en interrupciones y utilizando temporizadores de hardware. </font><font style="vertical-align: inherit;">El segundo contador se configura en el temporizador 1. Tras la interrupción del temporizador 1, se actualizan los temporizadores de software, que son responsables de la demora de encendido y apagado de contactores y relés del generador.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo temporizador se usa para crear el efecto intermitente del LED de estado. Hay tres patrones intermitentes. Los valores del patrón de parpadeo se toman en la interrupción del temporizador 2. Al parpadear, puede juzgar el estado del controlador. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dos ADC también funcionan en temporizadores y promedian 2500 muestras de mediciones de voltaje. Para convertir las mediciones a voltios reales, se proporcionan constantes de calibración. Sus valores deben corregirse durante la configuración del ATS. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, hay una serie de constantes que deben determinarse durante la puesta en marcha.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<pre><code class="cpp hljs">abp_timers[TMR_220N_ON].set_secs = <span class="hljs-number">10</span>; <span class="hljs-comment">//     </span>
abp_timers[TMR_220G_ON].set_secs = <span class="hljs-number">60</span>; <span class="hljs-comment">//        </span>
abp_timers[TMR_220N_OFF].set_secs = <span class="hljs-number">5</span>; <span class="hljs-comment">//     </span>
abp_timers[TMR_220G_OFF].set_secs = <span class="hljs-number">5</span>; <span class="hljs-comment">//     </span>
abp_timers[TMR_GEN_OFF].set_secs = <span class="hljs-number">60</span>; <span class="hljs-comment">//      </span>
</code>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
    </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El relé de parada del generador durante la operación desde el generador se mantiene encendido, bloqueando el suministro de voltaje al circuito de parada del generador. Una vez que se completa el temporizador de inactividad del generador, el relé se apaga y la corriente fluye al circuito de parada del generador a través de este relé. En el generador en sí hay una unidad especial que, después de que aparece un voltaje, con cierto retraso cierra el circuito de encendido a tierra, lo que lleva a la parada del generador. El mismo bloque contiene un circuito de carga del generador. Si alguien está interesado en los detalles, escriba los comentarios, haré una publicación separada sobre este bloque. No hay código, todo es hardware. </font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si alguien decide repetir el ABP, entonces vale la pena ajustar la configuración. No publico el firmware terminado, ya que el programa aún debe corregirse durante la configuración del ATS.</font></font>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    

      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debo decir que mi ABP ha estado funcionando durante 4 años sin problemas, por lo que el circuito puede considerarse verificado como el código.</font></font></div>
      
    </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es507746/index.html">¿Por qué y cómo verificar la velocidad de carga del sitio?</a></li>
<li><a href="../es507748/index.html">HMI basado en Node-red y Scadavis.io</a></li>
<li><a href="../es507750/index.html">FlexCube: implementación de la revolucionaria plataforma de back-office en Rosbank</a></li>
<li><a href="../es507752/index.html">¿Por qué la carga lenta del sitio web mata al SEO? ¿Y cómo no se pueden dejar las chinchillas sin casas?</a></li>
<li><a href="../es507758/index.html">Memoria JavaScript: sin fugas</a></li>
<li><a href="../es507772/index.html">Lo más importante de la Conferencia WWDC'20 de Apple</a></li>
<li><a href="../es507780/index.html">La recursión de la conciencia es una trampa de pensamiento y una barrera para el progreso. Ensayo historico</a></li>
<li><a href="../fr486176/index.html">Mémo de correspondance par e-mail d'entreprise</a></li>
<li><a href="../fr486178/index.html">FOSS News No. 1 - revue des nouvelles gratuites et open source du 27 janvier au 2 février 2020</a></li>
<li><a href="../fr486180/index.html">Conseils et sources pour créer des applications sans serveur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>