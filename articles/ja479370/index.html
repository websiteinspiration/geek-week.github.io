<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏽 🔝 💠 Mifare暗号鍵のDIYキャプチャとIronLogicドアホン鍵のDIYコピー 🤞 🏂🏿 🕴🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="インターコムの暗号鍵をかろうじてつかみ、Mifare鍵リングをコピーすることはもちろん不可能ですが、これを実行するデバイスを組み立てることは非常に現実的です。ここではMifareについては触れず、技術的な詳細については説明しません。このテクノロジーは現在、たとえばインターコムで使用されているとだけ述...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mifare暗号鍵のDIYキャプチャとIronLogicドアホン鍵のDIYコピー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479370/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターコムの暗号鍵をかろうじてつかみ、Mifare鍵リングをコピーすることはもちろん不可能ですが、これを実行するデバイスを組み立てることは非常に現実的です。</font><font style="vertical-align: inherit;">ここではMifareについては触れず、技術的な詳細については説明しません。このテクノロジーは現在、たとえばインターコムで使用されているとだけ述べます。インターコムキーチェーンをコピーするには、閉じられた暗号化キーを知る必要があります。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意！</font><font style="vertical-align: inherit;">この記事は、教育のみを目的としています。</font><font style="vertical-align: inherit;">情報システムへの侵入は法律で訴追される可能性があることを思い出してください。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIfareテクノロジーに関心のある多くの人々は、PN532モジュールとUSB-UARTアダプターで構成される、読み取りと書き込み用のシンプルなMifareカード/キーリーダーを持っている可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/05/xq/ra/05xqrajis6urtbznevn5vfgy8xi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シンプルで安価な変更により、このデバイスは、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算</font><font style="vertical-align: inherit;">に使用できる</font><font style="vertical-align: inherit;">リーダー</font><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">認証データ</font><font style="vertical-align: inherit;">をキャプチャするように作成できます。</font><font style="vertical-align: inherit;">暗号通貨なので、読み取りとコピーに必要です。</font><font style="vertical-align: inherit;">この目的のために市販されているデバイスもあります-SMKey、Proxmark3、Chameleonなど。</font><font style="vertical-align: inherit;">これらは多くの機能を備えたデバイスで、便利ですが安価ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PN532モジュールとUSB-UARTアダプターからの同様の「小さな紳士のセット」に基づくより予算のオプションに注目します。これにより、インターコムなどのMifareリーダーからデータをキャプチャし、リーダーがタグを参照する暗号化キーを計算できます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 開発されたデバイスは基本的に、STM32F103C8T6プロセッサに基づいた安価な「人気のある」デバッグボードを備えており、PN532モジュールとそれに接続されたUSB-UARTアダプタを備えた「BluePill」とも呼ばれます。本機はUSB-OTGケーブルでAndroidのスマートフォンに接続されています。それはジャンパにより、はんだ付けすることなく、すべてのプロトタイピングの実施形態であり、そして外観について持っている、不様しかし、それが働いている：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/91/je/bh/91jebhmz4putgxatntmyldqvnas.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スキームは、アセンブリは非常に簡単で、表形式で表されます</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PN532 ___________________STM32F103C8T6 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SCKは_____________________ PA5（SPI1_SCK）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 MISO ____________________ PA6（SPI1_MISO）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 MOSI ____________________ PA7（SPI1_MOSI）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SS ______________________ PB0（GPIO_OUTPUT）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SIGIN ___________________ PB11（TIM2_CH4）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SIGOUT __________________ PA12（TIM1_ETR）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SIGOUT __________________ PA0（TIM2_ETR）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 VCC _____________________ + 5V </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GND_____________________GND </font></font><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
USB、UART ________________ STM32F103C8T6 </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 RX ______________________ PA9（USART1_TX）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 TX ______________________ PA10（USART1_RD </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 + </font><font style="vertical-align: inherit;">5_________________________________________________ </font><font style="vertical-align: inherit;">+ _________________ + </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 5 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
） PN532インターフェーススイッチはSPIモードに設定する必要があります！既存のUSB-UARTアダプタを介してFlashLoaderDemonstratorユーティリティを使用してSTM32をフラッシュできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ドアホンリーダーシミュレーター（Arduino + PN532）から暗号キーをキャプチャするデモです。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aUDXUIzN1kc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このデバイスが開発されたIronLogic（IL）リーダーは、このタグのUIDに基づいて計算された暗号キーでタグを読み取ろうとするため、このUIDを最初に設定する必要があります。これは、手動で行うか、タグから読み取るという2つの方法で実行できます。その後、キャプチャを作成し、暗号鍵の計算を待ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「クラシックに記録」プログラムの次のタブでは、以前のバージョンのILリーダーの機能を使用して、安価なMifareクラシックブランクにコピーを書き込みます。この方法は、承認後のILリーダーがインターコムにタグの元のUIDではなく、最初のブロックに記録された情報を送信するという事実に基づいています（一般的に、元のUIDと同じです）。これを行うには、空白として機能するラベルの暗号キーをキャプチャして計算し、それでゼロセクターを閉じ、プロトタイプとして機能するラベルのUIDの4バイトをこのラベルの最初のブロックに書き込む必要があります。これを行うには、元の暗号通貨キーを取得してそのダンプを削除する必要さえありません。そのUIDを確認するだけで十分ですが、これは、元のものが「元の」ものでコピーではない場合にのみ当てはまります。最初のブロックを読み取って、すでにコピーに書き込みます。より明確にするために、この例を検討してください-UID 0xEBD52AC5を持つ元のキーのコピーを作成するとします。これは、元の最初のブロックにも記録され、UIDを持つ通常のMifare Classicラベル、たとえば0x12345678にコピーします。これを行うには、提示されたデバイスの助けを借りて、1つの同志Shaitan-Mashinaによって適切に呼び出され、このUIDと、必要な特定のオブジェクト（入り口、ホーム...）の暗号鍵を見つけます。暗号キーを0xABCDEF098765にして、コピーダンプのゼロセクターを次のように編集します。このUIDと、必要な特定のオブジェクト（入り口、ホームなど）の暗号通貨を見つけます。暗号鍵を0xABCDEF098765にして、コピーダンプのゼロセクターを次のように編集します。このUIDと、必要な特定のオブジェクト（入り口、ホームなど）の暗号通貨を見つけます。暗号キーを0xABCDEF098765にして、コピーダンプのゼロセクターを次のように編集します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rc/sh/lb/rcshlbqwctujngjr0dkvnhlb8zk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のブロックでは、元の0xEBD52AC5のUIDを書き込みます。3番目のブロックでは、このワークピースで見つかった暗号キーの6バイトは0xABCDEF098765です。ダンプをブランクに書き込み、インターコムキーのコピーを取得します。このSMKeyのようなものが、IronLogicのコピーを通常のMifare Classicに作成します。これが、このレコーディングプログラムが行うことです。 「コード」フィールドに、元のキーから4バイトのUIDを手動で入力または読み取ります。これは、コピーの最初のブロックに記録されます。プログラムを開始して、その指示に従います。最初にワークピースのUIDを読み取り、次にデバイスをインターコムに持ち込んで認証データを取得します。計算が完了すると、プログラムはデータ記録用のブランクを持参することを提案します。複数の暗号化キーが見つかった場合、最初のオプションを記録した後、受信したコピーを検証する機会が与えられます。コピーが収まらない場合、次に、次の計算されたキーを試すか、将来使用するためにブランクを消去（復元）する必要があります。コピーの最初のブロックに記述されているコードが正しく定義されていないため、コピーが機能しない可能性もあります。たとえば、元のキーフォブではなく、上記の方法を使用して作成されたコピーの実際のUIDを書き込もうとした場合。この場合、UIDを使用しないでください。ラベル、および「セクターのコピー」セクションで取得できる最初のブロックからのデータ。この場合、UIDタグではなく、「セクターのコピー」セクションで取得できる最初のブロックのデータを使用する必要があります。この場合、UIDタグではなく、「セクターのコピー」セクションで取得できる最初のブロックのデータを使用する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法は、ILリーダーソフトウェアの最新バージョンでも機能しません。この場合、0番目のセクター全体（4ブロック）をワークピースにコピーしてコピーを作成できます。これにより、アプリケーションの「セクターのコピー」セクションを使用して0番目のセクターを記録できます。ここでは、最初に元の暗号通貨キーを見つけ、そのゼロセクターを読み取ってから、空白に書き込みます。 OTPおよびOTP-2.0のブランクが手元にないため、この機能はこれまでのところZEROブランクでのみテストされていますが、新しいバージョンのリーダーではOTP-2.0を使用する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、「UIDレコード」アプリケーションセクションでは、UIDを変更し、破損した0番目のブロックを復元し、ZERO暗号キーをデフォルトにリセットできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから-簡単にまとめます。</font><font style="vertical-align: inherit;">このようなデバイスを作成するには、PN532モジュール、USB-UARTアダプターFTDI、PL2303、CH340またはCP2102のいずれか、デバッグボードSTM32F103C8T6、1ダースと6ダースのジャンパー、USB-OTGアダプター、およびOTGを搭載したAndroid上のスマートフォン（タブレット）を購入または探します。</font><font style="vertical-align: inherit;">上記の図に従ってデバイス自体を組み立て、STM32ファイルで* .binをフラッシュし、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">アーカイブ</font></a><font style="vertical-align: inherit;">から* .apkアプリケーションをインストールし</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><br>
<cut></cut><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートフォンで。</font><font style="vertical-align: inherit;">正しく動作させるには、デフォルトで、または手動でUSB-UARTアダプターが接続されているときにスマートフォンのアプリケーションを起動する必要があります。そうしないと、アプリケーションがアダプターにアクセスできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PN532モジュールについて少しお話ししたいと思います。これらのモジュールのすべてが「同等に役立つ」とは限りません。私が購入した3つのモジュール（上記の写真など）のうち、1つはタグの読み取りと書き込みを行いませんでした。特にZEROとOTP-2.0はインターコムリーダーを備えたパッシブモードで正常に機能し、もう1つはまったく逆の動作をし、3つ目だけが動作しました-タグやインターコムに対応する能力が低くなります（最初の2つよりも劣ります）。多分私は不運で、この特定のモジュールのバッチは最高の品質ではないことが判明しましたが、他の人々はそれらについて不満を言っています。しかし-幸運な人に。何言ってるんだ俺は？ PN532モジュールは少し高価なレイアウトで販売されているように見えましたが、レビューによると、そのような問題はありません：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jr/vi/9s/jrvi9sfl-57ao-v8t0otqa0mm8a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰かがラベルを読んで、悪い書き込みであるPN532を、秋になる場合は、次のように、私は、単なるペニーの価値があるデバイスRC522モジュールに追加することをお勧めしますが、完全にその機能を果たすことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RC522____________________STM32F103C8T6 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RST ______________________ PB12（GPIO_OUTPUT）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SCK ______________________ PB13（SPI2_SCK）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 MISO _____________________ PB14（SPI2_MISO ）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 MOSI _____________________ PB15（SPI2_MOSI）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 SDA ______________________ PA8（GPIO_OUTPUT）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 VCC ______________________ + 3.3V </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 GND______________________GND</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、PN532はリーダーからデータをキャプチャするときにのみ機能し、タグを操作する全体の負担はRC522の肩にかかります。特に注意してください-RC522は3.3Vにのみ接続する必要があります！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、実際の条件でのデバイスのパフォーマンスは、ZERO、OTP、OTP-2.0フィルターなしの、非常に第1世代のIronLogicリーダーでのみテストされたと言いたいです。他のバージョンは単にアクセスできないため、より現代的なILリーダーの場合、ソフトウェア開発が必要になります。もちろん、これらのリーダーの存在も必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS更新されたデバイスソフトウェア-Mifare Classic 1Kをエミュレートし、古いIronLogicドアホンのいくつかのオブジェクトのタグデータベースを作成する機能が追加されました。</font><font style="vertical-align: inherit;">エミュレータに1Kのバイナリダンプファイルをロードし、[ラベルデータベース]タブで空の空白のUIDの数を入力して、それらの暗号鍵を別のアドレスで取得し、オブジェクトに移動せずにそれらを書き留めます。</font><font style="vertical-align: inherit;">記録されたラベルの0セクターのUIDと暗号キーAはデータベースに保存されます。これにより、必要に応じて、このデバイスに記録されたラベルを簡単に消去できます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">GitHub </font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーカイブ</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja479356/index.html">背景：新しい「プラグ」AirPods Proの主なもの</a></li>
<li><a href="../ja479360/index.html">数回クリックするだけで、Angularでオープンソースのプロジェクトを作成できます</a></li>
<li><a href="../ja479364/index.html">2019年のゲームPC向けの最高のCPUの評価</a></li>
<li><a href="../ja479366/index.html">金曜日のモバイル投票結果</a></li>
<li><a href="../ja479368/index.html">CMMレベル5 QAおよびテストを達成する方法</a></li>
<li><a href="../ja479374/index.html">ドングルの世話をする：Logicoolキーボードレシーバーのセキュリティ調査</a></li>
<li><a href="../ja479376/index.html">Knoxで保護-Samsungモバイルセキュリティメカニズム</a></li>
<li><a href="../ja479378/index.html">SREを考える：SREエンジニアの目を通してプロジェクトを見る</a></li>
<li><a href="../ja479382/index.html">Spring Boot DevToolsによる開発の加速</a></li>
<li><a href="../ja479384/index.html">MegaFonでビッグデータはどのように機能し、そこに到達する方法を教えてください。</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>