<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💇 🈶 🧑‍🤝‍🧑 タイルレベルを生成し、プレーヤーから正方形を非表示にします 🌏 🤲 💆🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="未踏2のレベル生成
 私たちはUnexplored 2ゲームレベルジェネレーターを非常に誇りに思っています。これは、すべての現代的な要件を満たすプログラムです。投稿では、ゲームレベルの作成方法について説明します。
 
 車輪を再発明する必要はありませんでした。 Unexplored 1では、最初のゲ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>タイルレベルを生成し、プレーヤーから正方形を非表示にします</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457766/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y7/gx/lz/y7gxlziwifqpjitd5m4rqtp-x8a.gif"></div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未踏2のレベル生成</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはUnexplored 2ゲームレベルジェネレーターを非常に誇りに思っています。これは、すべての現代的な要件を満たすプログラムです。投稿では、ゲームレベルの作成方法について説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
車輪を再発明する必要はありませんでした。 Unexplored 1では、最初のゲームの成功に大きな影響を与えるテクニックをすでに作成しました。未踏2は始まったばかりを続けた。私たちのテクノロジーの基礎は2つの部分で構成されています。私たちはマルチステージ生成を使用します。これは、生きているレベルのデザイナーの作業と非常によく似たプロセスをほとんど模倣しています。その上に、「</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">サイクリックダンジョンジェネレーション</font></a><font style="vertical-align: inherit;">」と呼ばれる手法を使用します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「これは、ほとんどの標準的な生成コンテンツ作成アプリケーションよりも自然に見えるレベルの生成に優れています。この投稿では、最初の側面について説明します。Unexplored2にサイクリックダンジョン生成を適応させることは、今後の投稿のトピックになります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「人間」レベルのデザインの模倣</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レベルジェネレーターは、レベル生成のプロセスを制御されたステージのセット全体に分解します。</font><font style="vertical-align: inherit;">それは、高レベルの計画から低レベルの詳細レベルのマップへと進みます。</font><font style="vertical-align: inherit;">実際、彼は最初にレベルのスケッチを作成し、次にレベルが完成して塗りつぶされるまで詳細を追加し始めます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロセスの各段階で、生成文法を使用して、前の段階で生成されたレベルを変換します。特に、タイル文法とグラフ文法を使用します。タイル文法は、正規表現と同様に、文字列の一部を検索して他の文字列で置き換えるだけの、より一般的な文字列文法の一種です。生成文法と正規表現の概念に慣れていない場合は、インターネットで例を検索することをお勧めします（またはそのまま読み続けることもできます。この投稿の意味を理解するのに深い知識は必要ありません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レベルの最初の段階は比較的単純です。</font><font style="vertical-align: inherit;">レベルの基本を見つけるために、低解像度のビットマップを使用します。</font><font style="vertical-align: inherit;">以下の例では、レベルは最初は非常に単純です。レベルは左側の入口（e）、右側の入口のみで構成され、直接パスを接続しています。</font><font style="vertical-align: inherit;">他のほとんどのタイルは、レベルの端にあるため、未定義（u）またはブロック（B）です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a03/aa5/2fa/a03aa52fae0cb45e82425c4c95e38214.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図1：レベルの簡単なスケッチ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次の手順では、詳細が追加されます。特定の方向に通過するように設計された、ゲートで接続された部屋のグループが表示されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b9/7cd/1e4/2b97cd1e4732bab984f5181a37ba71f7.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図2：追加された構造</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
タイルマップはレベルジオメトリを作成するのに最適ですが、グラフを操作して構造とゲームプレイロジックを生成する方が実用的です。</font><font style="vertical-align: inherit;">これはジェネレーターが次に行うことです：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b3/da0/5c5/2b3da05c5967229d8d14816df5bf80ce.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図3：基本グラフ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
グラフでは、一部のノードにサブノードが含まれています。この例では、ほとんどのゲートが危険（H）とマークされており、一部のゲートは開いている（O）とマークされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
かなり単純な分析と生成ルールに基づいて、新しい要素がグラフに追加されます。</font><font style="vertical-align: inherit;">たとえば、終点（G）は入り口から十分離れた場所にあります。</font><font style="vertical-align: inherit;">さらに、レベルをより脅威にするために、小さな危険がグラフに追加されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/784/3a5/6e0/7843a56e0fb89b3a1350076657c212c5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図4：グラフに追加された新しいアイテム </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方、低解像度のタイルマップは、いくつかのノイズ関数を使用して高解像度のタイルマップに変換され、より自然な外観になります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/465/e65/18e/465e6518e606b4eb70e4d04b2b3ca8c1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図5：高解像度の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイルマップ次に、グラフの情報を使用してタイルマップを装飾し、新しい要素を追加します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/722/9b7/140/7229b7140304bb1f8302586b2dfb6c16.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図6：装飾されたタイルカード。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
マップは、ゲームプレイでのプレゼンテーション専用に生成されます。白いタイルはオープンスペースを示し、他のほとんどすべてのタイルは非常に特定のゲームプレイ要素を示します。たとえば、茂みを通る秘密の通路（緑の円）、「茂みの中の門」（緑の四角とライラックの縞）、または木を結ぶための産卵場所（赤い円と文字s）。レベルの主要部分はまだ定義されていません。この段階では、ジェネレーターは、プレーヤーの動きをブロックするためにこれらの領域を塗りつぶす必要があると想定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼はこのタスクをいくつかのレイヤーで実行します。下のレイヤーは高さのレベルと表面のタイプを示し、2番目のレイヤーは特定の場所に水を追加し、3番目のレイヤーは植生とその他の装飾を追加します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e37/6b6/f11/e376b6f11b4e4e526986238c4d0c50cc.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図7：地表面のタイプ（草、土、石）</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d7/898/9ac/2d78989ac691225d306a3319c2f7e111.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図8：水</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/021/ade/799/021ade7992212c857d6e4101e31273e0.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図9：植生とその他の装飾</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、これらのレイヤーが最終レベルのデータファイルに追加され、さらに詳細が追加されます。</font><font style="vertical-align: inherit;">ゲームはこのデータを使用してアセットを配置し、表示されているレベルを構築します。</font><font style="vertical-align: inherit;">この段階では多くのトリックがあります。</font><font style="vertical-align: inherit;">たとえば、上の図の土地タイルが奇妙な形になっていることに気付くかもしれません。</font><font style="vertical-align: inherit;">これらのフォームは、ソースデータがタイルマップであることにプレーヤーが気付かないような方法で地球の「タイル」を作成するために使用されます。</font><font style="vertical-align: inherit;">これについては、記事の後半で説明します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc9/b89/75c/bc9b8975c9b0704266c5786af53834eb.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図10：準備レベル</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲームプレイを追加する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このレベル生成方法には多くの利点があります。レベルをグラフに変換する段階は、ジェネレーターに対するゲームプレイの「推論」を単純化するために特に重要です。上記の例では、レベルターゲットが入力からある距離に作成されていることを確認する以外は何もしませんでした。しかし、これらの段階の他のレベルでは、より多くのタスクが実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、よりクラシックなダンジョンスタイルの洞窟マップを考えてみましょう（上記の例の森林レベルと比較して）。このレベルの基本グラフには、入口が1つと新しいゲートタイプがいくつかあります。それらのペアは閉じています（L）：一部のゲートはプレイヤーを片側（T）でトラップし、濃い緑色は「バルブ」と呼びます。このタイプのゲートは、プレイヤーが一方向のみに進むことを可能にします。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45d/72c/52a/45d72c52a99a84d42541b602c84b7806.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図11：洞窟の基本グラフ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このレベルの構造により、発電機はより複雑なミッションを作成できます。たとえば、このレベルに到達する唯一の方法は、プレーヤーに別の方法を探すように強制する「バルブ」を使用することです。出口を開くための鍵（左下）は左上の危険の後ろにあり、ターゲットはプレイヤーをトラップするゲートの後ろにあります。このようなゴールの例としては、プレーヤーの背後で崩壊するパッセージがあります。一般に、これは自分で探索するのが興味深い洞窟を作成しますが、Unexplored 2には実行時に溶け込むクリーチャーやイベントを追加する機能もあります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45d/72c/52a/45d72c52a99a84d42541b602c84b7806.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図12：ロックとキーが洞窟に追加されました</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
上記のプロセスを使用して、グラフを使用して、完全に詳細なタイルマップを生成および入力します。</font><font style="vertical-align: inherit;">このレベルの洞窟の性質を反映するさまざまなパラメーターの適用は、破壊された地下構造物（文字cでマークされた青い四角）とスパイクのある広い深淵（ライラックサークル）で非常に多様な結果をもたらします。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fca/65c/c79/fca65cc79406fa4ba471d763f8ab6539.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図13：洞窟レベルの詳細</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まとめる</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私がUnexplored 2でレベル生成にどのように取り組むかについておおまかに理解していただければ幸いです。これは複雑な多段階プロセスであり、近い将来に詳しく説明する予定です。</font><font style="vertical-align: inherit;">少なくとも私は、サイクリックダンジョンジェネレーションの使用について書くことをすでに約束しました。</font><font style="vertical-align: inherit;">しかし、生成的なストーリーテリングテクニック、レンダリングライン、シェーディングメソッドから、運システムを作成するために使用した長い設計プロセスなど、他の側面まで、もっと多くのことがわかります。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2.タイルから曲線へ、またはボロノイカウントで楽しい</font></font></h1><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a15/895/3a8/a158953a829bff67da8a242686b2675b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unexplored 2 Content Generatorはタイルカードを生成します。</font><font style="vertical-align: inherit;">典型的な結果は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e2/f20/fff/0e2f20fff2077a7259c639e8aa5bdda8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのタイルカードは互いに積み重ねられ、さまざまなタイルを使用して地面の種類（この例では、草や土）やさまざまな装飾を示します。この場合、いくつかの茂み（大きな緑色の円）、石（黒い円）、植物（小さな緑色の円）、花（白い円）、装飾的なテクスチャ（灰色の四角）があります。 「s」という文字でマークされたスポーンポイントなど、ゲームプレイデータを示す特別なタイルもあります。さらに、タイルには、高さレベルや特別なサブタイプなどの追加情報をマークすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイルマップは、ジェネレーターにとって便利なデータ構造です。しかし、同時に、それは非常に簡単であり、グリッドはゲームでしばしば目立ちます。ただし、データをゲームにロードしてアセットを配置すると、結果は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/51a/40f/76051a40f79ffbbb15a3054536893003.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはタイルをかなりうまく隠したと思います、そしてそれが私たちがそれを手に入れた方法です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボロノイマジック</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トリックは、個々のタイルがボロノイ図のセルに対応することです。</font><font style="vertical-align: inherit;">このグラフを使用すると、より自然な形の図形を生成できます。</font><font style="vertical-align: inherit;">ボロノイ図は、平面にランダムな点を播種し、平面上の各点が最も近い開始点に対応するセルに属するようにセルに分割することによって作成されます。</font><font style="vertical-align: inherit;">手続き型コンテンツ生成では、ボロノイ図をいくつかの興味深い方法で使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
典型的なボロノイ図は、ランダムであるが生成点のかなり均一な分布から作成され、次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fd/15a/338/5fd15a3382b48d74706d5f5458c4f7cb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unexplored 2では、生成ポイントの異なる種類の分布を使用します。</font><font style="vertical-align: inherit;">まず、タイルごとに1つのポイントを生成します。</font><font style="vertical-align: inherit;">したがって、タイルマップの各タイルがボロノイ図の1つのセルに対応することを確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各セルの中央に生成ポイントを配置すると、タイルマップのように見えるまっすぐなグリッドが得られます（以下の画像と他の画像では、タイルの半分が黄色にレンダリングされるチェスバージョンを作成しました。パターンを参照）：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0dd/a26/a2f/0dda26a2fa9d01ea045c1219d0a3c999.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8eb/451/15b/8eb45115b429cbb8b612f46ce3fad524.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も簡単な方法は、各生成ポイントの位置をランダム化するだけでチャートを改善することです。</font><font style="vertical-align: inherit;">ポイントを移動するときは、ポイントが元のタイルを超えないことを確認する価値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a3/33a/043/4a333a043cf9caadc0a09ff606c046ca.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab6/c25/031/ab6c250312ab2f4e4efec42788c129d5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでにより良いですが、非常に騒々しいため、美しいワインディングラインは得られません。ボロノイ図の「緩和」を実行することにより、画像を改善できます（これはそれらの標準的な手法です。ここでは説明しません）。しかし、それでも常に少し騒々しいままであり、個々のタイルのスケールを超えるスケールで数値を効果的に予測することは困難です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を解決するには、ランダムに移動するだけでなく、よりスマートにアプローチする必要があります。動きの種類が異なれば、効果も大きく異なります。たとえば、Perlinノイズを使用すると、面白いツイスティタイルカードが得られます。または、生成ポイントの2行ごとに左に移動するだけで、グリッド全体を六角形のタイルに変えることができます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b1/ccb/69e/6b1ccb69e7e6ca475e6c62c56f52b56c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/787/b2f/b06787b2f08c28d84f009caffd76ff14.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成ポイントを特定のパターンで移動し、丸みを帯びたコーナーを作成し始めたとき、私たちは真の進歩を遂げました。このプロセスの最初の段階は、レベルジェネレーター内で既に実行されています。さまざまな種類の地表面間の角度が認識され、コーナータイルにはさまざまな数字が付けられ、より美しい環境を生成するために変形される方法を示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/822/1fb/21a8221fb1d87fec480db9cc2c95425e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、標高レベルの違いにより、タイルマップに角度が表示されます。傾斜が生成された右上と左下の芝生に追加の丸みを帯びたコーナーが表示されるのはそのためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲームはこの情報を使用して、ボロノイグラフの生成ポイントをシフトします。丸みを帯びた各コーナーは、元のポイントの位置をシフトします（下の画像を参照）。さらに、4つの直交する近傍の生成点もシフトします。このプロセスは累積的です。生成ポイントは、いくつかの角度に近い場合、数回移動する可能性があります。ただし、すべてのオフセットを処理した後、生成ポイントは少しランダム化され（各方向のタイル幅の約10％）、最終的なオフセットはタイル幅の最大40％に制限されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a94/9b9/3f5/a949b93f5e2e724a95658f75af6a50c4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果はすでにかなり高品質になっています：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ccc/830/f24/ccc830f24c201bd4e519ca0407f77c18.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8b/d27/edb/b8bd27edb8a753ee92e9d2d5551e6a05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、まだ終わっていません...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">賢く飾る</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体的な形状は良くなりましたが、エッジはまだ非常にまっすぐで、ギザギザに見えます。</font><font style="vertical-align: inherit;">色が異なるエッジにカーブしたアセットを配置して、これを非表示にします。</font><font style="vertical-align: inherit;">ただし、実際のトリックは、1つの曲線が2つのエッジに配置されることが多く、互いの角度を使用して曲線の方向を決定することです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d27/4ef/fc6/d274effc6224874373a8c8c355dcb209.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e97/591/baa/e97591baad40e954f3c4b164f2b91739.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、3Dアセットを使用してテクスチャクリッピングを追加しました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/711/70a/6b0/71170a6b0ea154c6974e8787be8c0680.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、レベルを満たすために別のアセットを追加します。</font><font style="vertical-align: inherit;">これらのアセットの場所は、以前に生成されたレベルデータによって決定され、一般に単純な原則に従います。</font><font style="vertical-align: inherit;">大きなアセットを囲む小さなアセットを使用して、自然で美しいトランジションを作成します。</font><font style="vertical-align: inherit;">特に、石が崖のふもとに追加され、変化を生み出し、ゲームプレイに必要な垂直の傾斜を視覚的に柔らかくすることに注意する価値があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/51a/40f/76051a40f79ffbbb15a3054536893003.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカルバリエーション</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用する変位のタイプは角度だけではありません。</font><font style="vertical-align: inherit;">特に、人工構造物（たとえば、下に表示されている破壊された壁）の横でエッジをまっすぐにする必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/839/9f5/127/8399f5127ae11017b243716b075c3324.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのシステムでは、この効果は簡単に達成できます。</font><font style="vertical-align: inherit;">人工構造のタイルの変位を禁止する別の変位ルールを追加するだけです。</font><font style="vertical-align: inherit;">ジェネレーターは小さな正方形を使用してそのようなタイルをマークし、ゲームはすべてのオフセットが単に無視されることを保証します：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b84/5b1/372/b845b1372a6623d931eb30ed29fe5bcc.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09e/2c4/f64/09e2c4f64fad5ee474fcbfa21e607c73.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地面を見ると、特定の領域がまっすぐに作られている一方で、他の領域はより自然に曲がっていることがはっきりとわかります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c60/5e3/635/c605e363554553121d8c70c61ebaa5b2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
美しくないですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この手法を使用して簡単に追加できる他のルールがあります。</font><font style="vertical-align: inherit;">たとえば、タイルを六角形のパターンにして、狭いパスが十分に広く移動できるようにすることがあります。</font><font style="vertical-align: inherit;">私は他のパターンの他の用途を見つけると確信しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、私がボロノイ図を愛する多くの理由の1つです。</font><font style="vertical-align: inherit;">別の機会に、私はそれらを使って未探索の2つの世界地図を生成および装飾する方法について書きます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457756/index.html">アクションの本カフカストリーム。リアルタイムアプリケーションとマイクロサービス»</a></li>
<li><a href="../ja457758/index.html">エンジニアは森で失われた人々を救うが、森はまだ降伏していない</a></li>
<li><a href="../ja457760/index.html">コンテナーをさらに分離する方法：コンテナーサンドボックステクノロジーのレビュー</a></li>
<li><a href="../ja457762/index.html">CCDルーラー：一緒に食べるもの</a></li>
<li><a href="../ja457764/index.html">若いPOの10の間違い（パートII）</a></li>
<li><a href="../ja457768/index.html">脆弱になった経緯：QualysでITインフラストラクチャをスキャンする</a></li>
<li><a href="../ja457770/index.html">TypeScriptにカスタムトランスフォーマASTを記述します</a></li>
<li><a href="../ja457774/index.html">中つ国でプライベートパイロットとして勉強する：ニュージーランドの村に引っ越して生活する</a></li>
<li><a href="../ja457776/index.html">性能の低い鉱山が翼で待っています：パート2</a></li>
<li><a href="../ja457784/index.html">カスタムアイトラッカーキャリブレーション</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>