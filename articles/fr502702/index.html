<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆🏾 🧑🏿‍🤝‍🧑🏽 ⛹🏾 À propos du stockage des jetons JWT dans les navigateurs 👩🏾‍🤝‍👨🏽 🙃 🚷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le standard ouvert JWT est officiellement apparu en 2015 ( rfc7519 ) promettant des fonctionnalités intéressantes et de larges perspectives. Le stocka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>À propos du stockage des jetons JWT dans les navigateurs</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502702/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/a6/oz/ut/a6ozutnu2esctapau7wo8-htm78.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le standard ouvert JWT est officiellement apparu en 2015 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rfc7519</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) promettant des fonctionnalités intéressantes et de larges perspectives. </font><font style="vertical-align: inherit;">Le stockage approprié du jeton Access est vital pour la construction d'un système d'autorisation et d'authentification sur le Web moderne, où les sites construits à l'aide de la technologie SPA deviennent de plus en plus populaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un stockage incorrect des jetons entraîne leur vol et leur réutilisation par les attaquants.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alors, où stocker?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considérez les principales options de stockage du jeton d'accès JWT dans un navigateur:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage local / stockage de session</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la méthode n'est pas sûre et est susceptible aux attaques comme XSS, en particulier si vous connectez des scripts à partir de CDN tiers (l'ajout de l'attribut d'intégrité ne peut pas garantir une sécurité à 100%), ou si vous n'êtes pas sûr que les scripts que vous connectez n'ont pas la capacité de «fusionner» les données de rangements sur le côté. </font><font style="vertical-align: inherit;">De plus, si le stockage local est disponible entre les onglets, le stockage de session n'est disponible que dans un seul onglet et l'ouverture d'un site dans un nouvel onglet ne provoquera qu'un nouveau cycle de jeton d'accès / autorisation.</font></font></li>
<li>               , ,   fetch      .         –          .</li>
<li><b>Cookies</b>.      «»     cookie sessions.   Access   cookie   CSRF.       XSS .    CSRF    Cookie <b>SameSite </b>  <b>Strict</b>–       ,     ,     credentials,       CSRF . <br>
          – Access     JS    <b>httpOnly</b>,  <b>Secure</b>      . <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un point important est de définir un cookie uniquement pour l'api de domaine / chemin afin que les demandes aux statistiques publiques ne contiennent pas de surcharge dans l'en-tête.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le résultat?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les cookies, lorsqu'ils sont utilisés correctement, sont la solution appropriée et la plus sûre pour stocker le jeton d'accès JWT pour le moment et doivent suivre les règles suivantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Être installé pour l'API domaine / chemin pour éviter les frais généraux lors de la demande de fichiers statiques (images publiques / styles / fichiers js).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avoir un drapeau </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sécurisé</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pour le transfert uniquement via https).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avoir le drapeau </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">httpOnly</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pour l'impossibilité d'accéder à partir de JavaScript).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'attribut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SameSite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> doit être </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strict</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour protéger contre les attaques CSRF, interdire le transfert de cookies si la transition vers votre API ne provient pas du domaine défini dans le cookie.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Côté serveur, il doit également être configuré:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Content-Security-Policy</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - restreindre les domaines approuvés pour empêcher d'éventuelles attaques XSS</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En-</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tête </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;">X-Frame-Options</font></b></a><font style="vertical-align: inherit;"> pour se protéger contre les attaques de détournement de clics.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X-XSS-Protection</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - force le mécanisme de protection intégré du navigateur contre les attaques XSS.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X-Content-Type-Options</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pour se protéger contre la substitution des types MIME.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le respect de ces mesures, couplé à une rotation fréquente des jetons Accès / Rafraîchissement, devrait permettre d'assurer un haut niveau de sécurité sur le site.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limites</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgré le fait que l'attribut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SameSite est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pris en charge dans de nombreux </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navigateurs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> populaires </font><font style="vertical-align: inherit;">, il existe également des navigateurs qui ne le prennent pas en charge ou le prennent en charge partiellement (bonjour IE et Safari pour Mac). </font><font style="vertical-align: inherit;">Pour ces cas, vous avez besoin d'un retour aux jetons CSRF. </font><font style="vertical-align: inherit;">Dans ce cas, avec les demandes à l'API, le jeton CSRF doit également être transmis. </font><font style="vertical-align: inherit;">Le jeton CSRF correct doit être généré par le serveur en tenant compte de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">empreinte digitale de</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l' </font><font style="vertical-align: inherit;">utilisateur afin de minimiser la probabilité de sa substitution.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502682/index.html">Vision par ordinateur sur le serveur Intel OWT WebRTC avec accélération matérielle</a></li>
<li><a href="../fr502684/index.html">Pourquoi il: 5 questions pour les enseignants d'Ozon Go</a></li>
<li><a href="../fr502686/index.html">RIT ++ 2020: consultations avec les ingénieurs Avito chez Zuma</a></li>
<li><a href="../fr502696/index.html">Comment les fournisseurs de services Internet évitent le black-out mondial pendant les épidémies</a></li>
<li><a href="../fr502700/index.html">Créateur de Stack Overflow: «Les développeurs sont ceux qui écrivent le script pour le futur»</a></li>
<li><a href="../fr502704/index.html">Comment nous avons recyclé le soutien pour parler humainement et ce qui s'est passé</a></li>
<li><a href="../fr502706/index.html">L'état des compétences générales</a></li>
<li><a href="../fr502712/index.html">Comment fonctionne une bande d'adresse LED?</a></li>
<li><a href="../fr502714/index.html">Exportez les données OpenStreetMap à l'aide de l'éditeur visuel sur rete.js</a></li>
<li><a href="../fr502716/index.html">Vous ne pouvez pas partager votre ordinateur personnel? Faites un sur deux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>