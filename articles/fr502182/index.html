<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🏫 ⏪ 🙎🏼 Encore une fois à propos de MikroTik ou du SOCKS5 tant attendu 🕊️ 🖇️ ⬛️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je comprends très bien que tu t'en lasses de l'omniprésent Mikrotik, mais c'est vraiment intéressant. En fait, l'article a été écrit avec un retard de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Encore une fois à propos de MikroTik ou du SOCKS5 tant attendu</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502182/"><img src="https://habrastorage.org/getpro/habr/post_images/fdd/53e/b70/fdd53eb702a16a56d3f6d528a2c760e1.png" alt="mikrotik + chaussettes5"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je comprends très bien que tu t'en lasses de l'omniprésent Mikrotik, mais c'est vraiment intéressant. </font><font style="vertical-align: inherit;">En fait, l'article a été écrit avec un retard de 4 mois (le support de SOCKS5 est apparu en janvier 2020), mais mieux vaut tard que jamais, d'autant plus qu'il n'y a pas beaucoup d'informations à ce sujet et que peu de gens sont au courant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, commençons!</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contexte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mikrotik est un outil très puissant qui (à mon humble avis) devrait être à la ferme de tout ingénieur réseau. </font><font style="vertical-align: inherit;">D'énormes fonctionnalités et un ensemble d'outils, constamment renouvelés avec chaque version. </font><font style="vertical-align: inherit;">Le journal des modifications pour RouterOS 6.47 (bêta) a remarqué le support SOCKS5, que j'attendais personnellement depuis plusieurs années (et bien d'autres, à en juger par les nombreuses «Feature Request» sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forum.mikrotik.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): à en </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9f2/66f/0ed/9f266f0ed3a35eba3d20b678f6d3e4cb.png" alt="changelog"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
juger par l'une des branches du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> susmentionné </font><font style="vertical-align: inherit;">, le support du intégré Le serveur SOCKS5 a démarré avec la version 6.47beta19.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personnalisation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuration, comme toujours avec MikroTik, est assez simple et s'inscrit dans quatre lignes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un serveur virtuel avec CHR (Cloud Hosted Router), mis à jour en 6.47beta53, a fait office de sujet de test. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le préfixe bêta dans la version RouterOS signifie qu'il est uniquement destiné à tester et envoyer des rapports de bogues pour prendre en charge [at] mikrotik.com. </font><font style="vertical-align: inherit;">Je recommande fortement de ne pas se précipiter pour mettre à niveau le matériel sous charge et d'attendre la version à long terme ou au moins stable. </font><font style="vertical-align: inherit;">Si vous décidez de mettre à niveau, lisez attentivement le journal des modifications pour être au courant de tous les changements et problèmes possibles. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous configurons le serveur SOCKS5, sélectionnons l'autorisation par mot de passe (il est possible de l'ouvrir), 3327 (autre que le standard 1080) sont spécifiés comme port afin de ne pas entrer dans les listes de scan botnet:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip socks set enabled=yes version=5 port=3327 auth-method=password</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, ajoutez l'utilisateur:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip socks users add name=test_socks5 password=Str0nGP@SSw0RD</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Créez une règle d'exception dans le pare-feu:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip firewall filter add chain=input protocol=tcp dst-port=3327 action=accept comment="SOCKS5 TCP"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et nous déplaçons notre règle avant la règle du type "drop":</font></font><br>
<br>
<pre><code class="plaintext hljs">ip firewall filter move [/ip firewall filter find comment="SOCKS5 TCP"] 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminé! </font><font style="vertical-align: inherit;">Sur notre Mikrotik, un serveur proxy SOCKS5 a été créé.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifier</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme tout résident de la Fédération de Russie, ayant un serveur proxy en Europe, je me souviens immédiatement des télégrammes, et l'opérabilité du serveur SOCKS5 fraîchement configuré a été vérifiée: les </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/771/c0c/7bf/771c0c7bfd04958157e06635d665ec23.png" alt="télégramme"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
appels fonctionnent également bien, malgré la limitation de la version Free CHR à 1Mbps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, il est devenu intéressant de voir à quoi ressemblera POF (Passive OS Fingerprint) introduit par Mikrotik (vérifié sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WhatLeaks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec SOCKS5 désactivé</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec SOCKS5 activé</font></font></th>
</tr>
<tr>
<td><img src="https://habrastorage.org/getpro/habr/post_images/a2f/cdf/2c8/a2fcdf2c89fc5f25086393794c1ecb4c.png" alt="socks_down"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/0a6/704/a18/0a6704a18fbc46d5c9637cc5559e7e0e.png" alt="socks_up"></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut voir que le système est défini comme Linux, ce qui est logique (car c'est précisément son noyau qui sous-tend ROS) et ne peut que se réjouir. </font><font style="vertical-align: inherit;">Oui, il a été possible de remplacer user-agent, mais nous avons une tâche légèrement différente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, sur Mikrotik lui-même, comme cela devrait être le cas pour un vrai serveur, des statistiques sur les connexions et le trafic sont affichées:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5c5/8d9/99b/5c58d999b37aa09230eb434ff7891a54.png" alt="stat"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il manque beaucoup (par exemple, la prise en charge de l'authentification via RADIUS), mais je crois sincèrement que cette option sera développée davantage. </font><font style="vertical-align: inherit;">Il est important de noter qu'il s'agit toujours d'un routeur et que sa tâche principale est le transfert de trafic, et le reste des «fonctionnalités» sont probablement très bien. </font><font style="vertical-align: inherit;">En tout cas, la réalisation qu'un morceau de fer pour 50 $ peut faire tellement excite l'imagination. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout, merci d'avoir regardé :)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502160/index.html">Le développement d'applications mobiles personnalisées est peu coûteux: réalité ou illusion</a></li>
<li><a href="../fr502166/index.html">Fantômes Windows 3.1</a></li>
<li><a href="../fr502176/index.html">Aller: Désérialisation JSON avec une saisie incorrecte, ou comment contourner les erreurs de développeur d'API</a></li>
<li><a href="../fr502178/index.html">oVirt en 2 heures. Partie 3. Paramètres avancés</a></li>
<li><a href="../fr502180/index.html">Le jour où le périmètre a disparu. Solutions de sécurité de Microsoft et partenaires</a></li>
<li><a href="../fr502186/index.html">Séminaire en ligne. Sécurité de l'information: SOC mis en quarantaine</a></li>
<li><a href="../fr502196/index.html">Dans l'approche des mathématiques il y a un siècle, on trouve de nouvelles clés pour démêler la nature du temps</a></li>
<li><a href="../fr502200/index.html">Entropie: comment les arbres de décision prennent des décisions</a></li>
<li><a href="../fr502202/index.html">Le développement de la technologie sans pilote dans le transport ferroviaire</a></li>
<li><a href="../fr502204/index.html">Écriture de tests @SpringBootTest lors de l'utilisation de Spring Shell dans une application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>