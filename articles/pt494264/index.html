<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèª üë©üèø‚Äçü§ù‚Äçüë®üèΩ üõ≥Ô∏è Cluster de dois n√≥s - o diabo em detalhes üë∏üèΩ ü§∏ üì∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Apresento a voc√™ a tradu√ß√£o do artigo "Dois n√≥s - o diabo est√° nos detalhes", de Andrew Beekhof. 
 
 Muitas pessoas preferem clusters de doi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cluster de dois n√≥s - o diabo em detalhes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494264/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° Habr! Apresento a voc√™ a tradu√ß√£o do artigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dois n√≥s - o diabo est√° nos detalhes",</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Andrew Beekhof. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitas pessoas preferem clusters de dois n√≥s porque parecem conceitualmente mais simples e tamb√©m 33% mais baratos que seus colegas de tr√™s n√≥s. Embora seja poss√≠vel montar um bom cluster de dois n√≥s, na maioria dos casos, devido a cen√°rios n√£o contabilizados, essa configura√ß√£o criar√° muitos problemas n√£o √≥bvios.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro passo para criar qualquer sistema de alta disponibilidade √© procurar e tentar eliminar pontos individuais de falha, frequentemente abreviados como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPoF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ponto √∫nico de falha). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deve-se ter em mente que em qualquer sistema √© imposs√≠vel eliminar todos os riscos poss√≠veis de tempo de inatividade. Isso decorre pelo menos do fato de que uma prote√ß√£o de risco t√≠pica √© a introdu√ß√£o de alguma redund√¢ncia, o que leva a um aumento na complexidade do sistema e ao surgimento de novos pontos de falha. Portanto, inicialmente comprometemos e focamos em eventos relacionados a pontos individuais de falha, em vez de em cadeias de eventos relacionados e, portanto, cada vez menos prov√°veis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dadas as compensa√ß√µes, n√£o estamos apenas buscando o SPoF, mas tamb√©m equilibrando os riscos e as conseq√º√™ncias, como resultado, a conclus√£o √© o que √© cr√≠tico e o que n√£o pode ser diferente para cada implanta√ß√£o.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nem todo mundo precisa de fornecedores alternativos de eletricidade com linhas de energia independentes. </font><font style="vertical-align: inherit;">Embora a paran√≥ia tenha compensado pelo menos um cliente quando o monitoramento detectou um transformador com defeito. </font><font style="vertical-align: inherit;">O cliente ligou por telefone, tentando avisar a empresa de energia, at√© que um transformador com defeito explodisse.</font></font></blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ponto de partida natural √© a presen√ßa de mais de um n√≥ no sistema. </font><font style="vertical-align: inherit;">No entanto, antes que o sistema possa mover os servi√ßos para o n√≥ sobrevivente ap√≥s a falha, em geral, √© necess√°rio garantir que os servi√ßos que est√£o sendo movidos n√£o estejam ativos em nenhum outro local. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um cluster de dois n√≥s n√£o possui desvantagens se, como resultado de uma falha, os dois n√≥s atendem ao mesmo site est√°tico. </font><font style="vertical-align: inherit;">No entanto, tudo muda se, como resultado, ambas as partes gerenciam independentemente a fila de tarefas compartilhadas ou fornecem acesso de grava√ß√£o descoordenado ao banco de dados replicado ou ao sistema de arquivos compartilhados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, para evitar a corrup√ß√£o de dados devido √† falha de um n√≥ - contamos com o que √© chamado de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"dissocia√ß√£o¬ª</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (esgrima).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Princ√≠pio da separa√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O princ√≠pio da separa√ß√£o √© baseado na pergunta: um n√≥ concorrente pode causar corrup√ß√£o de dados? Caso a corrup√ß√£o de dados seja um cen√°rio prov√°vel, isolar o n√≥ das solicita√ß√µes recebidas e do armazenamento persistente √© uma boa solu√ß√£o. A abordagem mais comum para desengatar √© desabilitar n√≥s defeituosos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem duas categorias de m√©todos de separa√ß√£o que chamarei de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diretos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indiretos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas igualmente podem ser chamados de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ativos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passivos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Os m√©todos diretos incluem a√ß√µes de colegas sobreviventes, como interagir com um dispositivo IPMI (Intelligent Platform Management Interface - uma interface para monitorar e gerenciar remotamente o estado f√≠sico de um servidor) ou iLO (um mecanismo de gerenciamento de servidor na aus√™ncia de acesso f√≠sico a eles), enquanto os m√©todos indiretos confiam no n√≥ com falha para reconhecer de alguma forma que ele est√° em estado insalubre (ou pelo menos impedir que o restante dos membros se recupere) e sinalizar ao </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">watchdog de hardware</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre a necessidade de desconectar o n√≥ com falha. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um quorum ajuda no caso de usar m√©todos diretos e indiretos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dissocia√ß√£o direta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caso de dissocia√ß√£o direta, podemos usar um quorum para evitar corridas de exclus√£o no caso de uma falha na rede. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo o conceito de quorum, o sistema possui informa√ß√µes suficientes (mesmo sem conectar-se a seus parceiros) para que os n√≥s saibam automaticamente se devem iniciar a separa√ß√£o e / ou recupera√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sem quorum, os dois lados do compartilhamento de rede assumem, com raz√£o, que o outro lado est√° morto e procurar√£o dissoci√°-lo. Na pior das hip√≥teses, os dois lados conseguem desconectar o cluster inteiro. Um cen√°rio alternativo √© o deathmatch, um loop intermin√°vel de n√≥s aparecendo, sem ver seus pares, recarregando-os e iniciando a recupera√ß√£o apenas para uma reinicializa√ß√£o quando seus pares seguem a mesma l√≥gica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema da exclus√£o √© que os dispositivos usados ‚Äã‚Äãcom mais freq√º√™ncia se tornam inacess√≠veis devido aos mesmos eventos de falha nos quais queremos nos concentrar na recupera√ß√£o. </font><font style="vertical-align: inherit;">A maioria das placas IPMI e iLO √© instalada nos hosts que eles controlam e, por padr√£o, usam a mesma rede, por causa da qual os n√≥s de destino assumem que os outros n√≥s est√£o offline. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, os recursos da opera√ß√£o dos dispositivos IPMI e iLo raramente s√£o considerados no momento da compra do equipamento.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Separa√ß√£o Indireta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um quorum tamb√©m √© importante para gerenciar a exclus√£o indireta; se tudo for feito corretamente, um quorum poder√° permitir que os sobreviventes suponham que os n√≥s perdidos entrem em um estado seguro ap√≥s um certo per√≠odo de tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com essa configura√ß√£o, o timer do watchdog de hardware √© redefinido a cada N segundos se o quorum n√£o for perdido. Se o cron√¥metro (geralmente um m√∫ltiplo de N) expirar, o dispositivo executar√° um desligamento sem for√ßa da energia (n√£o desligamento). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa abordagem √© muito eficaz, mas sem quorum, n√£o h√° informa√ß√µes suficientes dentro do cluster para gerenci√°-las. N√£o √© f√°cil determinar a diferen√ßa entre uma interrup√ß√£o na rede e uma falha no host do parceiro. A raz√£o pela qual isso importa √© que, sem a capacidade de distinguir entre dois casos, voc√™ √© for√ßado a escolher o mesmo comportamento nos dois casos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema com a escolha de um modo √© que n√£o h√° maneira de a√ß√£o que maximize a acessibilidade e evite a perda de dados.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ decidir assumir que o n√≥ do parceiro est√° ativo, mas, de fato, houve uma falha, o cluster interromper√° desnecessariamente os servi√ßos que precisariam trabalhar para compensar a perda de servi√ßos do n√≥ do parceiro que caiu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ decidir assumir que o n√≥ n√£o est√° funcionando, mas foi apenas uma falha de rede e o n√≥ remoto est√° realmente funcionando, na melhor das hip√≥teses, voc√™ se inscreve em alguma reconcilia√ß√£o manual futura dos conjuntos de dados resultantes.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o importa qual heur√≠stica voc√™ use, √© trivial criar uma falha que for√ßa ambos os lados a trabalhar ou for√ßa o cluster a desconectar os n√≥s sobreviventes. </font><font style="vertical-align: inherit;">N√£o usar o quorum realmente rouba o conjunto de uma das ferramentas mais poderosas em seu arsenal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se n√£o houver outra alternativa, a melhor abordagem seria sacrificar a acessibilidade (aqui o autor se refere ao teorema da PAC). </font><font style="vertical-align: inherit;">A alta disponibilidade de dados corrompidos n√£o ajuda ningu√©m e a reconcilia√ß√£o manual de v√°rios conjuntos de dados tamb√©m n√£o √© um prazer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quorum</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quorum parece √≥timo, certo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √∫nica desvantagem √© que, para t√™-lo em um cluster com N membros, voc√™ precisa manter a conex√£o entre N / 2 + 1 de seus n√≥s. O que √© imposs√≠vel em um cluster com dois n√≥s ap√≥s a falha de um n√≥. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em √∫ltima an√°lise, o que nos leva a um problema fundamental com dois n√≥s: um </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quorum n√£o faz sentido em dois grupos de n√≥s e, sem isso, √© imposs√≠vel determinar com seguran√ßa o curso de a√ß√£o que maximiza a acessibilidade e evita a perda de dados.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesmo em um sistema de dois n√≥s conectados por um cabo cruzado, √© imposs√≠vel finalmente distinguir entre desconectar a rede e a falha de outro n√≥. </font><font style="vertical-align: inherit;">Desconectar uma extremidade (cuja probabilidade √©, obviamente, proporcional √† dist√¢ncia entre os n√≥s) ser√° suficiente para refutar qualquer suposi√ß√£o de que o canal esteja funcionando igual √† integridade do n√≥ parceiro.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazendo o Cluster de Dois N√≥s Trabalhar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Äs vezes, o cliente n√£o pode ou n√£o deseja comprar um terceiro n√≥, e somos for√ßados a procurar uma alternativa.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o 1 - M√©todo de separa√ß√£o duplicada</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O dispositivo iLO ou IPMI do n√≥ √© um ponto de falha porque, no caso de uma falha, os sobreviventes n√£o podem us√°-lo para colocar o n√≥ em um estado seguro. Em um cluster de 3 ou mais n√≥s, podemos atenuar isso calculando o quorum e usando o watchdog de hardware (um mecanismo de desativa√ß√£o indireto, conforme discutido anteriormente). No caso de dois n√≥s, devemos usar os interruptores de energia da rede (unidades de distribui√ß√£o de energia ou PDUs). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s a falha, o sobrevivente tenta primeiro entrar em contato com o dispositivo de separa√ß√£o principal (iLO ou IPMI interno). Se isso der certo, a recupera√ß√£o continua como de costume. Somente no caso de uma falha do dispositivo iLO / IPMI, a chamada para a PDU ocorre, se a chamada for bem-sucedida, a recupera√ß√£o poder√° continuar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coloque a PDU em uma rede que n√£o seja o tr√°fego do cluster; caso contr√°rio, uma √∫nica falha na rede bloquear√° o acesso aos dispositivos de isolamento e a recupera√ß√£o do servi√ßo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui voc√™ pode perguntar - a PDU n√£o √© um ponto √∫nico de falha? </font><font style="vertical-align: inherit;">Para qual a resposta √© claro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se esse risco for significativo para voc√™, voc√™ n√£o est√° sozinho: conecte os dois n√≥s a duas PDUs e instrua o software de cluster a usar os dois ao ativar e desativar os n√≥s. </font><font style="vertical-align: inherit;">Agora, o cluster permanece ativo se uma PDU morrer e uma segunda falha de outro dispositivo PDU ou IPMI for necess√°ria para bloquear a recupera√ß√£o.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o 2 - Adicionando um √°rbitro</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em alguns cen√°rios, embora o m√©todo de separa√ß√£o duplicada seja tecnicamente poss√≠vel, √© politicamente complexo. Muitas empresas gostam de ter uma certa separa√ß√£o entre administradores e propriet√°rios de aplicativos, e os administradores de rede preocupados com a seguran√ßa nem sempre est√£o entusiasmados em passar o acesso √†s PDUs a qualquer pessoa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, a alternativa recomendada √© criar um terceiro neutro que possa complementar o c√°lculo do quorum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caso de uma falha, o n√≥ deve poder ver a transmiss√£o de seu parceiro ou √°rbitro para restaurar os servi√ßos. O √°rbitro tamb√©m inclui a fun√ß√£o de interromper a conex√£o, se os dois n√≥s puderem v√™-lo, mas n√£o se verem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa op√ß√£o deve ser usada em conjunto com um m√©todo indireto de dissocia√ß√£o, como um cron√¥metro de vigil√¢ncia de hardware, configurado para desligar a m√°quina se ela perder a conex√£o com seu n√≥ parceiro e o √°rbitro. </font><font style="vertical-align: inherit;">Portanto, o sobrevivente pode assumir com confian√ßa que seu n√≥ parceiro estar√° em um estado seguro ap√≥s a expira√ß√£o do cron√¥metro do watchdog de hardware. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferen√ßa pr√°tica entre o √°rbitro e o terceiro n√≥ √© que o √°rbitro requer muito menos recursos para seu trabalho e, potencialmente, pode servir a mais de um cluster.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o 3 - O fator humano</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √∫ltima abordagem √© que os sobreviventes continuem executando os servi√ßos que j√° executaram, mas n√£o iniciem novos, at√© que o problema seja resolvido (restaura√ß√£o da rede, reinicializa√ß√£o do n√≥) ou a pessoa n√£o se responsabilize por confirmar manualmente que o outro lado est√° morto.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o de b√¥nus</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu mencionei que voc√™ pode adicionar um terceiro n√≥?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duas prateleiras</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por uma quest√£o de argumento, vamos imaginar que eu os convenci dos m√©ritos do terceiro n√≥, agora devemos considerar a localiza√ß√£o f√≠sica dos n√≥s. Se eles s√£o colocados (e alimentados) no mesmo rack, isso tamb√©m representa o SPoF e um que n√£o pode ser resolvido com a adi√ß√£o de um segundo rack. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se isso for surpreendente, considere o que acontecer√° se o rack com dois n√≥s ficar inativo e como o n√≥ sobrevivente far√° a distin√ß√£o entre esse caso e a falha na rede. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resposta curta: isso n√£o √© poss√≠vel e, novamente, estamos lidando com todos os problemas no caso de dois n√≥s. Ou sobrevivente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ignora o quorum e tenta incorretamente iniciar a recupera√ß√£o durante quedas de rede (a possibilidade de concluir a separa√ß√£o √© uma hist√≥ria separada e depende se as PDUs est√£o envolvidas e se compartilham energia de qualquer um dos racks) ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">respeita o quorum e se desconecta prematuramente quando seu n√≥ parceiro falha</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De qualquer forma, dois racks n√£o s√£o melhores que um e os n√≥s devem receber fontes de energia independentes ou distribu√≠dos entre tr√™s (ou mais, dependendo de quantos n√≥s voc√™ possui) racks.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dois data centers</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste ponto, os leitores que n√£o s√£o mais avessos ao risco podem considerar se recuperar de um acidente. O que acontece quando um aster√≥ide entra em um √∫nico datacenter com nossos tr√™s n√≥s distribu√≠dos em tr√™s racks diferentes? Obviamente, coisas ruins, mas dependendo de suas necessidades, a adi√ß√£o de um segundo data center pode n√£o ser suficiente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tudo for feito corretamente, o segundo datacenter fornecer√° (e isso √© razo√°vel) uma c√≥pia atualizada e consistente dos seus servi√ßos e dos dados deles. No entanto, como nos cen√°rios com dois n√≥s e dois racks, o sistema n√£o possui informa√ß√µes suficientes para garantir a m√°xima disponibilidade e evitar danos (ou diverg√™ncia dos conjuntos de dados). Mesmo se houver tr√™s n√≥s (ou racks), sua distribui√ß√£o em apenas dois data centers deixa o sistema incapaz de tomar com seguran√ßa a decis√£o certa no caso de um evento (agora muito mais prov√°vel) que os dois lados n√£o podem conectar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o significa que uma solu√ß√£o com dois data centers nunca se encaixe. </font><font style="vertical-align: inherit;">As empresas geralmente querem que as pessoas estejam cientes antes de dar um passo excepcional ao mudar para um data center de backup. </font><font style="vertical-align: inherit;">Lembre-se de que, se voc√™ deseja automatizar a falha, precisar√° de um terceiro datacenter para que o quorum fa√ßa sentido (diretamente ou atrav√©s de um √°rbitro) ou voc√™ encontrar√° uma maneira de desativar com seguran√ßa todo o datacenter.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494252/index.html">Impress√£o 3D: tr√™s casas e meia em quatro dias</a></li>
<li><a href="../pt494254/index.html">OpenShift como uma vers√£o corporativa do Kubernetes</a></li>
<li><a href="../pt494256/index.html">Quem mais precisa de sel√™nio? Algu√©m usa o BDD em 2020? Aprendizado de m√°quina no Selenium</a></li>
<li><a href="../pt494258/index.html">Materiais abertos do Centro de Ci√™ncia da Computa√ß√£o, Parte 1</a></li>
<li><a href="../pt494260/index.html">Cluster Elasticsearch de 200 TB +</a></li>
<li><a href="../pt494266/index.html">Sobre udalenka, RDP desprotegido e o aumento no n√∫mero de servidores dispon√≠veis na Internet</a></li>
<li><a href="../pt494270/index.html">Antiguidades: Trabalho remoto em dispositivos de 1998</a></li>
<li><a href="../pt494272/index.html">Criando um plano de neg√≥cios de inicializa√ß√£o de TI: estrutura detalhada passo a passo</a></li>
<li><a href="../pt494274/index.html">Sistema de autoteste de com√©rcio eletr√¥nico</a></li>
<li><a href="../pt494278/index.html">EF Core + Oracle: como tornar as migra√ß√µes idempotentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>