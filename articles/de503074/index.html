<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👙 📇 🏊 Details zum Provider-Paket für Flutter 🦇 〰️ 👨‍👩‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! 
 
 Unsere mittelfristigen Pläne beinhalten die Veröffentlichung des Flutter-Buches. In Bezug auf die Sprache von Dart als Thema nehmen wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Details zum Provider-Paket für Flutter</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/503074/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere mittelfristigen Pläne beinhalten die Veröffentlichung des Flutter-Buches. </font><font style="vertical-align: inherit;">In Bezug auf die Sprache von Dart als Thema nehmen wir immer noch eine vorsichtigere Position ein, daher werden wir versuchen, ihre Relevanz anhand der Ergebnisse dieses Artikels zu bewerten. </font><font style="vertical-align: inherit;">Es wird sich auf das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provider-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paket </font><font style="vertical-align: inherit;">und damit auf das State Management in Flutter konzentrieren.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Provider ist ein State-Management-Paket, das von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remy Rusle geschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und von Google und der Flutter-Community übernommen wurde. </font><font style="vertical-align: inherit;">Aber was ist Staatsverwaltung? </font><font style="vertical-align: inherit;">Was ist für den Anfang eine Bedingung? </font><font style="vertical-align: inherit;">Ich möchte Sie daran erinnern, dass der Status nur Daten zur Darstellung der Benutzeroberfläche in Ihrer Anwendung sind. </font><font style="vertical-align: inherit;">Das staatliche Management ist ein Ansatz zur Erstellung, zum Zugriff, zur Verarbeitung und zur Entsorgung dieser Daten. </font><font style="vertical-align: inherit;">Um das Provider-Paket besser zu verstehen, skizzieren wir kurz die Geschichte der staatlichen Verwaltung in Flutter.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. StatefulWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine einfache UI-Komponente, die nur angezeigt wird, wenn sie Daten enthält. Es gibt </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keine "Erinnerung"; es wird nach Bedarf erstellt und zerstört. Flutter hat auch ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatefulWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in dem sich ein Speicher befindet, dank dessen ein langlebiger Satellit - das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Objekt </font><font style="vertical-align: inherit;">. Diese Klasse verfügt über eine Methode </font></font><code>setState()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn sie aufgerufen wird, wird ein Widget gestartet, das den Status neu erstellt und in einer neuen Form anzeigt. Dies ist die einfachste Form der sofort verfügbaren Flatter-Statusverwaltung. Hier ist ein Beispiel mit einer Schaltfläche, die immer die Uhrzeit anzeigt, zu der sie zuletzt gedrückt wurde:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyWidgetState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyWidget</span>&gt; </span>{
  <span class="hljs-built_in">DateTime</span> _time = <span class="hljs-built_in">DateTime</span>.now();  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(_time.toString()),<font></font>
      onPressed: () {<font></font>
        setState(() =&gt; _time = <span class="hljs-built_in">DateTime</span>.now());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist das Problem bei diesem Ansatz? </font><font style="vertical-align: inherit;">Angenommen, in Ihrer Anwendung ist ein globaler Status im Stammverzeichnis gespeichert </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es enthält Daten, die zur Verwendung in verschiedenen Teilen der Benutzeroberfläche vorgesehen sind. </font><font style="vertical-align: inherit;">Diese Daten werden gemeinsam genutzt und in Form von Parametern an jedes untergeordnete Widget übergeben. </font><font style="vertical-align: inherit;">Alle Ereignisse, bei denen geplant ist, diese Daten zu ändern, werden in Form von Rückrufen angezeigt. </font><font style="vertical-align: inherit;">Somit werden über alle Zwischen-Widgets viele Parameter und Rückrufe übertragen, was bald zu Verwirrung führen kann. </font><font style="vertical-align: inherit;">Schlimmer noch, alle Aktualisierungen des oben genannten Stammverzeichnisses führen zu einer Neuerstellung des gesamten Widget-Baums, was ineffizient ist.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. InheritedWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InheritedWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein spezielles Widget, auf dessen Nachkommen ohne direkten Link zugegriffen werden kann. </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie sich </font><font style="vertical-align: inherit;">an wenden, </font><font style="vertical-align: inherit;">kann sich ein konsumierendes Widget für eine automatische Neuerstellung registrieren, die beim Neuerstellen eines Ahnen-Widgets auftritt. </font><font style="vertical-align: inherit;">Mit dieser Technik können Sie die Aktualisierung der Benutzeroberfläche effizienter organisieren. </font><font style="vertical-align: inherit;">Anstatt große Teile der Anwendung als Reaktion auf eine kleine Statusänderung neu zu erstellen, können Sie selektiv nur die spezifischen Widgets auswählen, die neu erstellt werden müssen. </font><font style="vertical-align: inherit;">Sie haben bereits mit gearbeitet, </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wann immer Sie </font></font><code>MediaQuery.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder verwendet haben </font></font><code>Theme.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es ist zwar weniger wahrscheinlich, dass Sie Ihr eigenes InheritedWidget mit Statuserhaltung implementiert haben. </font><font style="vertical-align: inherit;">Tatsache ist, dass die korrekte Implementierung nicht einfach ist.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ScopedModel</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein 2017 von Brian Egan erstelltes Paket, mit dem sich der </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsstatus </font><font style="vertical-align: inherit;">einfach </font><font style="vertical-align: inherit;">speichern lässt. </font><font style="vertical-align: inherit;">Zuerst müssen Sie ein Statusobjekt erstellen, das von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erbt </font><font style="vertical-align: inherit;">, und es dann aufrufen </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wenn sich seine Eigenschaften ändern. </font><font style="vertical-align: inherit;">Die Situation erinnert an die Implementierung der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PropertyChangeListener-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schnittstelle </font><font style="vertical-align: inherit;">in Java.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{<font></font>
  String _foo;  String get foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> set <span class="hljs-title">foo</span><span class="hljs-params">(String value)</span> </span>{<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um unser Statusobjekt bereitzustellen, verpacken wir dieses Objekt in ein Widget </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Stammverzeichnis unserer Anwendung:</font></font><br>
<br>
<pre><code class="java hljs">ScopedModel&lt;MyModel&gt;(<font></font>
  model: MyModel(),<font></font>
  child: MyApp(...)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können alle Nachkommen-Widgets </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">über das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModelDescendant-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Widget darauf </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">zugreifen</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Modellinstanz wird an den Parameter übergeben </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> ScopedModelDescendant&lt;MyModel&gt;(<font></font>
      builder: (context, child, model) =&gt; Text(model.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes untergeordnete Widget kann das Modell auch aktualisieren, wodurch automatisch eine Neuerstellung eines </font></font><code>ScopedModelDescendants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modells ausgelöst wird (vorausgesetzt, unser Modell ruft es korrekt auf </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = ScopedModel.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hat in Flutter als Werkzeug für die Zustandsverwaltung an Popularität gewonnen, seine Verwendung beschränkt sich jedoch auf die Bereitstellung von Objekten, die die Klasse erben </font></font><code>Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und dieses Muster der Benachrichtigung über Änderungen verwenden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. BLoC</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google I / O '18</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Konferenz wurde das </font><font style="vertical-align: inherit;">BLoC- </font><font style="vertical-align: inherit;">Muster </font><font style="vertical-align: inherit;">( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Business Logic Component</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">vorgestellt </font><font style="vertical-align: inherit;">, das als weiteres Tool zum Abrufen des Status von Widgets dient. BLoC-Klassen sind langlebige Nicht-UI-Komponenten, die den Status beibehalten und als Streams und Empfänger verfügbar machen. Wenn Sie </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Status-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Geschäftslogik über die Benutzeroberfläche hinaus verwenden, können Sie das Widget so einfach </font><font style="vertical-align: inherit;">wie möglich </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">implementieren</font></a><font style="vertical-align: inherit;"> und </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">StreamBuilder</font></a><font style="vertical-align: inherit;"> für die automatische </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Neuerstellung verwenden</font></a><font style="vertical-align: inherit;"> . Infolgedessen wird das Widget "dumm" und es wird einfacher zu testen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispiel BLoC-Klasse:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBloc</span> </span>{
  <span class="hljs-keyword">final</span> _controller = StreamController&lt;MyType&gt;();  Stream&lt;MyType&gt; <span class="hljs-keyword">get</span> stream =&gt; _controller.stream;<font></font>
  StreamSink&lt;MyType&gt; <span class="hljs-keyword">get</span> sink =&gt; _controller.sink;<font></font>
  <font></font>
  myMethod() {<font></font>
    <span class="hljs-comment">//  </span><font></font>
    sink.add(foo);<font></font>
  }  dispose() {<font></font>
    _controller.close();<font></font>
  }<font></font>
}<font></font>
 ,   BLoC:<font></font>
<span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
 <span class="hljs-keyword">return</span> StreamBuilder&lt;MyType&gt;(<font></font>
  stream: myBloc.stream,<font></font>
  builder: (context, asyncSnapshot) {<font></font>
    <span class="hljs-comment">//  </span><font></font>
 });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem mit dem BLoC-Muster ist, dass es nicht offensichtlich ist, wie BLoC-Objekte erstellt und zerstört werden. </font><font style="vertical-align: inherit;">Wie wurde die Instanz </font></font><code>myBloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im obigen Beispiel erstellt? </font><font style="vertical-align: inherit;">Wie rufen wir </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an, um ihn loszuwerden? </font><font style="vertical-align: inherit;">Streams müssen verwendet </font></font><code>StreamController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden. </font></font><code>closed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies sollte geschehen, sobald dies nicht mehr </font><font style="vertical-align: inherit;">erforderlich </font><font style="vertical-align: inherit;">ist. Dies geschieht, um Speicherverluste zu vermeiden. </font><font style="vertical-align: inherit;">(In Dart gibt es keinen Klassendestruktor; nur eine Klasse </font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hat eine Methode </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Darüber hinaus ist nicht klar, wie dieses BLoC für mehrere Widgets freigegeben werden soll. </font><font style="vertical-align: inherit;">Für Entwickler ist es oft schwierig, BLoC zu beherrschen. </font><font style="vertical-align: inherit;">Es gibt mehrere Pakete, die versuchen, dies zu vereinfachen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Anbieter</font></font></h4><br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ist ein Paket, das 2018 von Remy Rusle geschrieben wurde, ähnlich </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber dessen Funktionen nicht darauf beschränkt sind, eine Unterklasse von Model bereitzustellen. Dies ist auch ein abschließender Wrapper </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber der Anbieter kann alle Statusobjekte bereitstellen, einschließlich BLoC, Streams, Futures und andere. Da der Anbieter so einfach und flexibel ist, gab Google auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google I / O '19 -Konferenz bekannt,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dass er in Zukunft </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das bevorzugte Paket für die Verwaltung des Status sein wird. Natürlich sind auch andere Pakete zulässig. Wenn Sie jedoch Zweifel haben, empfiehlt Google, einen Zwischenstopp einzulegen </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gebaut "mit Widgets, für Widgets."</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit dieser Option können Sie jedes Objekt mit einem Status in den Widget-Baum einfügen und den Zugriff darauf für jedes andere Widget (untergeordnetes Element) öffnen. </font><font style="vertical-align: inherit;">Außerdem können Sie </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Lebensdauer von Statusobjekten verwalten, indem Sie sie mit Daten initialisieren und eine Bereinigung durchführen, nachdem sie aus dem Widget-Baum entfernt wurden. </font><font style="vertical-align: inherit;">Daher </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eignet es sich auch zur Implementierung von BLoC-Komponenten oder kann als Basis für andere State-Management-Lösungen dienen! </font><font style="vertical-align: inherit;">Oder einfach zum </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementieren von Abhängigkeiten verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ein ausgefallener Begriff, bei dem Daten auf eine Weise an Widgets übertragen werden, mit der Sie die Verbindung lösen und die Testbarkeit des Codes verbessern können. </font><font style="vertical-align: inherit;">Schließlich,</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kommt mit einer Reihe von speziellen Klassen, dank denen es noch bequemer zu bedienen ist. </font><font style="vertical-align: inherit;">Als nächstes werden wir uns jede dieser Klassen genauer ansehen.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basisanbieter</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zukunftsanbieter</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxyprovider</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um es zu verwenden </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, fügen </font><font style="vertical-align: inherit;">Sie </font><font style="vertical-align: inherit;">zuerst eine Abhängigkeit zu unserer Datei hinzu </font></font><code>pubspec.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<code>provider: ^3.0.0</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann importieren wir das Paket dort, </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wo es benötigt wird: </font></font><br>
<br>
<code>import 'package:provider/provider.dart';</code><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basisanbieter</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Erstellen Sie die Basis </font></font><code>Provide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r im Stammverzeichnis unserer Anwendung; </font><font style="vertical-align: inherit;">Dies wird eine Instanz unseres Modells enthalten:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Parameter </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erstellt eine Instanz </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn Sie eine vorhandene Instanz an diese übergeben möchten, verwenden Sie hier den Konstruktor </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Provider.value</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anschließend können Sie diese Instanz des Modells </font></font><code>MyApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mithilfe des Widgets an einer </font><font style="vertical-align: inherit;">beliebigen Stelle </font><font style="vertical-align: inherit;">verwenden </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;MyModel&gt;(<font></font>
      builder: (context, value, child) =&gt; Text(value.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im obigen Beispiel </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erhält </font><font style="vertical-align: inherit;">die Klasse </font><font style="vertical-align: inherit;">eine Instanz </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mithilfe des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consumer-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Widgets </font><font style="vertical-align: inherit;">. Dieses Widget gibt uns </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die </font><font style="vertical-align: inherit;">Möglichkeit </font><font style="vertical-align: inherit;">, unser Objekt im Parameter zu enthalten </font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was sollen wir nun tun, wenn wir die Daten in unserem Modell aktualisieren möchten? Angenommen, wir haben ein anderes Widget, bei dem beim Klicken auf eine Schaltfläche die Eigenschaft aktualisiert werden sollte </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie die spezifische Syntax für den Zugriff auf die Instanz </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Funktionell entspricht dies dem Zugriff auf das Widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Das Widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist nützlich, wenn der Code den Link nicht einfach abrufen kann </font></font><code>BuildContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was wird Ihrer Meinung nach mit dem ursprünglichen Widget passieren, das </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir zuvor erstellt haben? Wird darin eine neue Bedeutung angezeigt </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leider nein</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es ist nicht möglich, Änderungen an alten traditionellen Dart-Objekten zu hören (zumindest ohne Reflexion, die in Flutter nicht vorgesehen ist). Daher kann </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es nicht "sehen", dass wir die Eigenschaft ordnungsgemäß aktualisiert </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und angeordnet haben, dass das Widget als </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antwort aktualisiert wird. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber es gibt Hoffnung! </font><font style="vertical-align: inherit;">Sie können unsere Klasse dazu bringen </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, eine Verunreinigung zu implementieren </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es wird einige Zeit dauern, die Implementierung unseres Modells zu ändern und eine spezielle Methode aufzurufen, </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn sich eine unserer Eigenschaften ändert. </font><font style="vertical-align: inherit;">Es funktioniert ungefähr genauso </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber in diesem Fall ist es schön, dass Sie nicht von einer bestimmten Klasse des Modells erben müssen. </font><font style="vertical-align: inherit;">Es reicht aus, die Beimischung zu realisieren </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">So sieht es aus:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-title">with</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  <span class="hljs-built_in">String</span> _foo;  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-keyword">void</span> <span class="hljs-keyword">set</span> foo(<span class="hljs-built_in">String</span> value) {<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, haben wir unsere Eigenschaft </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">durch </font></font><code>getter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und ersetzt </font></font><code>setter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, unterstützt durch die private Variable _foo. </font><font style="vertical-align: inherit;">Auf diese Weise können wir alle an der foo-Eigenschaft vorgenommenen Änderungen „abfangen“ und unseren Listenern mitteilen, dass sich unser Objekt geändert hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können wir unsere Implementierung </font><font style="vertical-align: inherit;">von außen </font><font style="vertical-align: inherit;">so ändern, dass eine andere Klasse namens </font></font><code> ChangeNotifierProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs">ChangeNotifierProvider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So! </font><font style="vertical-align: inherit;">Wenn nun unsere </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Updates Eigentum </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Instanz </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird automatisch aktualisiert , um </font><font style="vertical-align: inherit;">diese Änderung widerzuspiegeln. </font><font style="vertical-align: inherit;">Cool, oder? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apropos. </font><font style="vertical-align: inherit;">Sie haben wahrscheinlich einen Button-Handler bemerkt, </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit dem wir die folgende Syntax verwendet haben:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig führt diese Syntax automatisch zu einer Neuerstellung der Instanz, </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobald sich das Modell ändert </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Vielleicht brauchen wir das nicht. </font><font style="vertical-align: inherit;">Am Ende </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enthält </font><font style="vertical-align: inherit;">es </font><font style="vertical-align: inherit;">einfach eine Schaltfläche, die sich überhaupt nicht ändert, wenn sich der Wert ändert </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Um eine Neuerstellung zu vermeiden, können Sie die folgende Syntax verwenden, um auf unser Modell zuzugreifen, ohne sich für eine Neuerstellung zu registrieren:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context, listen: <span class="hljs-keyword">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist ein weiterer Charme, der </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einfach so </font><font style="vertical-align: inherit;">im Paket enthalten ist </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Auf den ersten Blick ist nicht klar, warum es benötigt wird </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Am Ende können Sie nur das Übliche verwenden, </font></font><code>StreamBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn Sie einen Stream in Flutter verbrauchen müssen. </font><font style="vertical-align: inherit;">Hier hören wir zum Beispiel den Stream </font></font><code>onAuthStateChanged</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>FirebaseAuth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context {<font></font>
  <span class="hljs-keyword">return</span> StreamBuilder(<font></font>
   stream: FirebaseAuth.instance.onAuthStateChanged, <font></font>
   builder: (BuildContext context, AsyncSnapshot snapshot){ <font></font>
     ...<font></font>
   });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dasselbe mit Hilfe zu tun </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, können wir unseren Stream </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Stammverzeichnis unserer Anwendung bereitstellen:</font></font><br>
<br>
<pre><code class="dart hljs">StreamProvider&lt;FirebaseUser&gt;.value(<font></font>
  stream: FirebaseAuth.instance.onAuthStateChanged,<font></font>
  child: MyApp(...),<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie dann das untergeordnete Widget, wie dies normalerweise der Fall ist </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
  <span class="hljs-keyword">return</span> Consumer&lt;FirebaseUser&gt;(<font></font>
    builder: (context, value, child) =&gt; Text(value.displayName),<font></font>
  );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Widget-Code ist nicht nur viel sauberer geworden, sondern abstrahiert auch die Tatsache, dass die Daten aus dem Stream stammen. Wenn wir uns jemals dazu entschließen, die Basisimplementierung beispielsweise auf zu ändern </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sind keine Änderungen am Widget-Code erforderlich. Wie Sie sehen werden, gilt dies für alle anderen unten aufgeführten Anbieter. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FutureProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ähnlich wie im obigen Beispiel ist es </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine Alternative zum Standard, </font></font><code> FutureBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn Sie mit Widgets arbeiten. Hier ist ein Beispiel:</font></font><br>
<br>
<pre><code class="plaintext hljs">FutureProvider&lt;FirebaseUser&gt;.value(<font></font>
  value: FirebaseAuth.instance.currentUser(),<font></font>
  child: MyApp(...),<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um diesen Wert im untergeordneten Widget zu verwenden, verwenden wir dieselbe Implementierung </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wie im </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obigen </font><font style="vertical-align: inherit;">Beispiel </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider </font></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueNotifier-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse implementierte Dart-Schnittstelle </font><font style="vertical-align: inherit;">, die einen Wert annimmt und Listener benachrichtigt, wenn sie zu einem anderen Wert wechselt. </font><font style="vertical-align: inherit;">Es ist beispielsweise möglich, einen Ganzzahlzähler in eine einfache Modellklasse zu verpacken:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> </span>{
  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">int</span>&gt; counter = ValueNotifier(<span class="hljs-number">0</span>);  <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Arbeit mit komplexen Typen </font></font><code>ValueNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird der Operator des darin </font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gespeicherten Objekts verwendet, um festzustellen, ob sich der Wert geändert hat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen wir das einfachste </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, das unser Hauptmodell enthält, und es folgt eine </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verschachtelte </font></font><code>ValueListenableProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listening-Eigenschaft </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: Consumer&lt;MyModel&gt;(builder: (context, value, child) {<font></font>
    <span class="hljs-keyword">return</span> ValueListenableProvider&lt;<span class="hljs-built_in">int</span>&gt;.value(<font></font>
      value: value.counter,<font></font>
      child: MyApp(...)<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass dieser verschachtelte Anbieter vom Typ ist </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es kann andere geben. </font><font style="vertical-align: inherit;">Wenn Sie mehrere Anbieter desselben Typs registriert haben, gibt der Anbieter den "nächsten" (nächsten Vorfahren) zurück. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So hören Sie eine Eigenschaft </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von einem untergeordneten Widget aus:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;<span class="hljs-built_in">int</span>&gt;(<font></font>
      builder: (context, value, child) {<font></font>
        <span class="hljs-keyword">return</span> Text(value.toString());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier erfahren Sie, wie Sie eine Eigenschaft </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von einem anderen Widget aus </font><font style="vertical-align: inherit;">aktualisieren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bitte beachten Sie: Wir benötigen Zugriff auf die Originalkopie </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.counter.value++;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn Sie viele Widgets verwenden</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, erhalten Sie im Stammverzeichnis der Anwendung eine hässliche Struktur aus vielen Anhängen:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;Foo&gt;.value( <font></font>
  value: foo, <font></font>
  child: Provider&lt;Bar&gt;.value( <font></font>
    value: bar, <font></font>
    child: Provider&lt;Baz&gt;.value( <font></font>
      value: baz , <font></font>
      child: MyApp(...)<font></font>
    ) <font></font>
  ) <font></font>
)</code></pre><br>
<code>MultiProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ermöglicht es Ihnen, sie alle auf derselben Ebene zu deklarieren. </font><font style="vertical-align: inherit;">Es ist nur syntaktischer Zucker: Auf systeminterner Ebene bleiben sie sowieso alle verschachtelt.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt;.value(value: foo), <font></font>
    Provider&lt;Bar&gt;.value(value: bar), <font></font>
    Provider&lt;Baz&gt;.value(value: baz), <font></font>
  ], <font></font>
  child: MyApp(...), <font></font>
)<font></font>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyProvider</font></font></i></a><br>
<br>
<code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine interessante Klasse, die in der dritten Paketversion hinzugefügt wurde</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie können Anbieter deklarieren, die selbst von anderen Anbietern abhängig sein können, bis zu sechs von einem. </font><font style="vertical-align: inherit;">In diesem Beispiel ist die Bar-Klasse instanzspezifisch</font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dies ist nützlich, wenn Sie einen Stammsatz von Diensten kompilieren, die selbst voneinander abhängig sind.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider ( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt; ( <font></font>
      builder: (context) =&gt; Foo(),<font></font>
    ), <font></font>
    ProxyProvider&lt;Foo, Bar&gt;(<font></font>
      builder: (context, value, previous) =&gt; Bar(value),<font></font>
    ), <font></font>
  ], <font></font>
  child: MyApp(...),<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste generische Typargument ist der Typ, von dem Ihr Typ abhängt </font></font><code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und das zweite ist der Typ, den es zurückgibt.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie man viele Anbieter gleichzeitig hört</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist, wenn ein einzelnes Widget viele Anbieter abhören und neu erstellen soll, wenn sich einer von ihnen ändert? </font><font style="vertical-align: inherit;">Mit den Widget-Optionen können Sie bis zu 6 Anbieter gleichzeitig anhören </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir erhalten Instanzen als zusätzliche Methodenparameter </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs">Consumer2&lt;MyModel, <span class="hljs-built_in">int</span>&gt;(<font></font>
  builder: (context, value, value2, child) {<font></font>
    <span class="hljs-comment">//value  MyModel</span>
    <span class="hljs-comment">//value2  int</span><font></font>
  },<font></font>
);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Verwendung </font></font><code>InheritedWidget</code> <code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können </font><font style="vertical-align: inherit;">Sie </font><font style="vertical-align: inherit;">den Status wie in Flutter üblich verwalten. </font><font style="vertical-align: inherit;">Widgets können auf Statusobjekte zugreifen und diese so abhören, dass der zugrunde liegende Benachrichtigungsmechanismus abstrahiert wird. </font><font style="vertical-align: inherit;">Es ist einfacher, die Lebensdauer von Statusobjekten zu verwalten, indem Sie Ankerpunkte erstellen, um diese Objekte nach Bedarf zu erstellen und sie bei Bedarf zu entfernen. </font><font style="vertical-align: inherit;">Dieser Mechanismus kann verwendet werden, um Abhängigkeiten einfach zu implementieren und sogar als Grundlage für erweiterte Statusverwaltungsoptionen. </font><font style="vertical-align: inherit;">Mit dem Segen von Google und der wachsenden Unterstützung in der Flutter-Community ist es </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu einem Paket geworden </font><font style="vertical-align: inherit;">, das es </font><font style="vertical-align: inherit;">wert ist, unverzüglich ausprobiert zu werden!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de503062/index.html">Реальная стоимость жизни в Кремниевой Долине для разработчика</a></li>
<li><a href="../de503064/index.html">IoT, wo Sie nicht gewartet haben (Teil 3). Erstellen eines Simulationsmodells</a></li>
<li><a href="../de503068/index.html">An der Schnittstelle von Technologie und Wirtschaft: IT-Verantwortliche eröffnen eine neue Universität in der Schweiz</a></li>
<li><a href="../de503070/index.html">Elektrischer Becher. Bau eines verrückten Elektrorollers / Elektrofahrrads</a></li>
<li><a href="../de503072/index.html">Nur ein weiteres Tool: Kennenlernen der Dienstkonfiguration mit Desired State Configuration </a></li>
<li><a href="../de503082/index.html">Telegramm als NAS / FTP</a></li>
<li><a href="../de503084/index.html">Lightbend Academy Course Review - Reaktive Architektur</a></li>
<li><a href="../de503086/index.html">Sind Online-Transkriptionsdienste sicher und vertraulich?</a></li>
<li><a href="../de503088/index.html">Wie wir Fracht für Spediteure ausgewählt haben</a></li>
<li><a href="../de503096/index.html">Warum möchten Manager, dass Mitarbeiter recyceln?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>