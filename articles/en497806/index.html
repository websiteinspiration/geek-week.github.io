<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏼 👨🏽‍🚒 🤮 How I rented OSCP 🖖🏻 🍉 🙎🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My colleagues and I took the OSCP course and passed the exam. In this article I will describe in detail how the exam passes, what are the pitfalls and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How I rented OSCP</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/497806/"><img src="https://habrastorage.org/webt/xu/c1/b3/xuc1b3o751swqrwezdo2zazw_hy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My colleagues and I took the OSCP course and passed the exam. </font><font style="vertical-align: inherit;">In this article I will describe in detail how the exam passes, what are the pitfalls and whether the game is worth the candle at all.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How it all began</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My colleague </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c4n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">two years ago he said that we should pass the OSCP and I agreed, but as is often the case with good ideas, we </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scored</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> put off this good idea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A year later, our company had the opportunity to free training on useful things for employees (alas, my understanding doesn’t coincide with the management and the sommelier courses still refuse to pay me). </font><font style="vertical-align: inherit;">By the glorious undertaking to pass OSCP pulled</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GolovnyaD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, said that our excuses about employment are so-so and that we need to proceed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we started.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What did we know about OSCP</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We knew that OSCP consists, in fact, of 3 parts: theoretical material (hereinafter I will call it pdf), access to a laboratory with virtual machines (hereinafter I will call lab) and an exam. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The beginning of the way</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As it turned out, access to the lab can be purchased for 30, 60 or 90 days, it costs $ 999, $ 1199, $ 1349. Since we did not want to devote all our free time only to OSCP, and the difference between 30 days and 90 is only $ 350), we chose access for 90 days. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On October 9, 2019, I paid for the course, expecting to get fun for 3 months, how wrong I was, I got fun for 5 months. And here's why: the </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first setup:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> you can’t start training tomorrow. In my case, the nearest start date was October 20 (as they say on the forums, the average time to start after payment is 2 weeks).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then on October 9th they sent a test package (Connectivity Pack) for connecting to a VPN. </font><font style="vertical-align: inherit;">Judging by their tests, I had no problems with the VPN connection (as it turned out then they had a so-called test, I'll tell you later). </font><font style="vertical-align: inherit;">Then they sent a link to their assembly Kali (in appearance is no different from the usual), which is specially prepared for the passage.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Course start</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Formally, the course began at 3:00 AM on October 20, but a letter with the course materials arrived at 03:09 (I noticed this discrepancy only now when I was writing the article). </font><font style="vertical-align: inherit;">The letter with the course materials contains links to:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">380 pages pdfku</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video footage to this pdfk</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN Connectivity Pack</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And here we are faced with a second setup:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> download links are valid for 72 hours and if they didn’t have time to download, they will ask for an additional $ 100, after which they carefully say make a backup and insert a joke: “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember the wise saying:“ There are two types of people. </font><font style="vertical-align: inherit;">Those who backup and those who have yet to lose everything to a system crash. </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">» </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, in all forums it is recommended to begin the course with the tasks from pdfk. </font><font style="vertical-align: inherit;">We all did just that.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tasks from PDF</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tasks from pdfk need to be done in order to learn new tools and techniques, to remember how to use tools and, possibly, to get 5 additional points in the exam. From the surprising: in pdfk there is not a word about Burp Suite and PowerShell Empire (should have been added in the February update). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 conducts its story from the basics: we are taught to google, use nc.exe (netcat), tcpdump and wireshark and other tools that are more likely to be related to systems engineering, rather than security. Only on page 113 of 380 do we get acquainted with nmap!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are also taught to use tools such as OpenVAS, which can not be used in the exam. Also, examples often use meterpreter, which is also prohibited (can be used only on one machine). In general, I still did not understand what caused this ban on meterpreter as it went, it is clear that you can forbid it to increase with its help, but it would be convenient to keep the reverse going with several consoles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It becomes interesting from page 148 where the buffer overflow begins, and here I caught the problem with the VPN connection. As it turned out, my ISP cuts the size of the packets, and the VPN in the lab is built using UDP and my packets with buffer overflows simply did not crawl through and disappear. The solution is simple - fix the config by adding the lines:</font></font><br>
<br>
<pre><code class="php hljs">tun-mtu <span class="hljs-number">1492</span>
mssfix <span class="hljs-number">1370</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But it’s very unfortunate that such checks are not done by the OSCP organizers, because on their forum many complain. I lost 5 hours and a lot of nerves on this (reaching the solution myself, then I found a bunch of branches on the forum about this). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to write buffer overflows and do all sorts of experiments with windows, they give us a virtual machine inside the lab, this is quite convenient. For the entire course, I did not install a single virtual machine of my own (once I tried to install Windows XP SP2, but did not find a working torrent). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, tasks for buffer overflows are very well written out (for both Windows and Linux), it would be cool to do this in steps, taught in universities. The OSCP course obviously says that bypassing DEP and ASLR is not included in the course.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then they tell us how to prepare exploits, transfer files, talk about privilege escalation, but with that we still play enough in the lab, so that's okay. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next comes the block on attacks on users (Client Side Attacks), where I caught the problem with a “specially prepared” Kali machine, it had a newer version of Java, and my Java Appet did not work on the test machine. Another 5 hours of googling and solving the problem on your own and, of course, there is a thread on the forum about this) </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generally, everything can be found on the forum, this is a very useful place if you are stuck in a dead end, but I understood this only at the end of the course.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next come the attacks on the web - XSS, LFI, RFI, SQL injection and more. It is written clearly and well, give examples of poking. They talk about sqlmap, which also can not be used in the exam, but, of course, it is useful to know. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further attacks on passwords (brute force and obtaining hashes for Windows and Linux) are very extended for me, I left some of the tasks for later (and did them already inside the lab). At the end there is a story about the metasplit and how to use it, in great detail, with writing your own module. It also provides an example of hacking into a fictitious company that uses many of the techniques described (takes 34 pages). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, out of all the pdfs on the case of 100 pages (and there are a huge number of screenshots). It took me 2 weeks to read it and complete the tasks (but I was in no hurry).</font></font><br>
<br>
<b>   -     ,     ,    ,  .</b><br>
<br>
<b><h3></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solving the lab, it was decided not to use Metasploit and Meterpreter, because they cannot be (only possible once) used in the exam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laba consists of approximately 60 virtual machines, all machines are divided into 4 subnets (public network, network of developers, network of IT departments, network of administrators). Initially, access is only in the public network (in fact, access is in all networks, we just can’t reverse the machines from a non-public network). In the lab (I write about events before the February update), all the machines are quite old, the most recent Windows is Windows server 2012R2 (quite a lot of Windows XP), Linux machines are Ubuntu 14 (Ubuntu 8 were also in the lab), Centos 7 (Centos 5 also met ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In theory, the whole lab should be solved using vulnerabilities published before 2016, but I did not set myself such restrictions.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laba (non privileged access was on)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, the lab well corresponds to what was stated in pdfk. </font><font style="vertical-align: inherit;">In terms of obtaining unprivileged access, you need to use various techniques (including attacks on clients), collect passwords from broken machines and reuse them, launch brutes and so on. </font><font style="vertical-align: inherit;">Probably the worst topic is SQL injection and blind injection - they have never been seen before. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The algorithm for access initialization went everywhere as in life:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enumeration of ports and services</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">brute directories for the web</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defining products and versions</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exploit search and modification</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A couple of machines require writing your own exploits with a blackbox, but nothing complicated - LFI / RFI. </font><font style="vertical-align: inherit;">Most of all, I was glad that there are almost no cars from the CTF category, where there is a picture inside which there is also a picture hidden, inside which a zip archive is hidden, and so on.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laba (privilege escalation)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For me it was the most interesting part and it took me most of the time (at first). </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For windows machines, I used these </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sets of splits.</font></font></a> <br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
But on some Windows machines all vulnerabilities of the “kernel” were specially patched and I had to figure out how to get up. </font><font style="vertical-align: inherit;">There are cars for every taste, services, startups, sheduled tasks, installed software. </font><font style="vertical-align: inherit;">Installed software is of course a big failure, because </font><font style="vertical-align: inherit;">it’s obvious that the cars are prepared and if only one application is installed on the system, then you can climb through it.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For Linux, of course, you can always use kernel vulnerabilities, everyone’s beloved dirty cow works on half the machines, I used </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this version</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , although it hangs on almost all the machines in the lab, it successfully creates a user with ssh access. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But almost everywhere you can get up through vulnerabilities in the configuration, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinEnum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> helps </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">here</font></a><font style="vertical-align: inherit;"> , and for lazy </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linux-smart-enumeration</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In general, it is not worth abusing kernel vulnerabilities in the lab, if you want to prepare for the exam, it is better to use configuration vulnerabilities, because </font><font style="vertical-align: inherit;">all machines in the exam will be with fresh kernels and installed updates (at least I got these).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postexplotation in the lab</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I left part of the post-exploitation for later, but after collecting all the passwords and viewing all the databases, configuration files and logs, you can easily access many machines (especially in a non-public network). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many machines break down the chain, it is important to understand this, especially for attacks on clients, if the car is called mail, then maybe someone will cling to it as an email client), and if HELPDESK, then go to open tickets.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The big four</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are 4 cars in the lab that are considered the most complex and some recommend leaving them at the end, these are: Pain, Sufferance, Gh0st and Humble. </font><font style="vertical-align: inherit;">I knew about their presence from the very beginning, but I did not specifically run away from them or did not seek them. </font><font style="vertical-align: inherit;">By the time I decided to return to them, two of the four I had already broken. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">My impression of them:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pain is a cool car, complicated both in getting the initializing shell and in raising.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sufferance - a complex initializing walk, in several stages, I got something similar on the exam. </font><font style="vertical-align: inherit;">Simple boost.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gh0st - the beginning and initializing was like CTF machines, but one of the most beautiful enhancements in the entire lab.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Humble - arguably the most complex initializing walk in the lab, but a simple boost.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, these are cool cars, and I’m almost sure that if you broke them in your lab, then you will pass the exam without any problems, I broke the Humble one longer than I did the exam. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">My top would include:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sherlock - proof turns out in a couple of minutes, and you can sit for a long time to get a reverse.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beta is a very vital machine, both in obtaining primary access and in upgrades (limited bash).</font></font></li>
</ul><br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lab results</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, the lab made a good impression, I broke all the cars that I took (about 45 cars). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, I remembered a lot of things that are not often used.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exam preparation</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A few days before the end of access to the lab, I decided it was time to sign up for the exam. </font><font style="vertical-align: inherit;">Here I was wrong, it is better to do this in advance. </font><font style="vertical-align: inherit;">The nearest date on the day off was only a month later on February 23 (and then at 9 a.m.). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The conclusion and the setup are three - if you want to take the exam at a convenient time and sign up for the weekend in advance. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I also started writing a report on the lab (I need to describe 10 cars, if you want to get 5 extra points), the standard example of the report is too smart, so I started using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this one. </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For a detailed description, I chose either interesting cars or cases where you immediately get the root. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I needed to take 10-15 additional screenshots, so I recommend having access to the lab while writing this report.</font></font></b><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exam preparation. </font><font style="vertical-align: inherit;">Training. </font><font style="vertical-align: inherit;">Binarism</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the exam, one of the components is writing an exploit to overflow the buffer, it gives 25 points, and, not knowing how to do it quickly and well, going to the exam doesn’t make much sense, it’s worth getting a hand in it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good people have already put together a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set of software on which to practice. </font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I decided about 7 pieces, and if I spent 2 hours on the first, then I decided the seventh in 20 minutes, in fact, with the speed of writing code and entering commands. </font><font style="vertical-align: inherit;">An algorithm that did not fail me:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we are phasing the fall with the letters A (in the exam this step will already be done for us)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">looking for offset, standardly through pattern_create.rb and pattern_offset.rb</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">check the length, standardly change A to B in the right place, and after B insert a lot of C to see the possible size of the payload without jumping into our buffer</font></font></li>
<li>   (   \x00,       99% )</li>
<li> “jmp esp” (  ,     )</li>
<li>   ,    </li>
<li>     (   20  — \x90)</li>
<li></li>
</ol><br>
<b><h3>  . . </h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In one of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exams</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> procedure </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">vraytaps</font></a><font style="vertical-align: inherit;"> , I found this picture: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yn/by/pd/ynbypdxr9-sk8bgkqybmghrs26i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This picture shows which cars on hackthebox.eu it looks like cars from the exam (the brainfuck car doesn’t look like it at all, I recommend not training it). </font><font style="vertical-align: inherit;">To activate the wheelbarrows, a paid subscription is required (10 bucks per month, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do not forget to cancel it</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> right away </font><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I spent 8 hours and decided on 10 machines, alternating between Windows and Linux. </font><font style="vertical-align: inherit;">And he decided that it’s enough for me, but, probably, here, like with buffer overflow, it is necessary to bring to automatism. </font><font style="vertical-align: inherit;">These cars are simpler than cars in the exam, at least in terms of privilege escalation (some copies of cars from the lab, I don’t know who I borrowed from anyone).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exam preparation. </font><font style="vertical-align: inherit;">Training. </font><font style="vertical-align: inherit;">Privilege escalation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can train on the same machines with hackthebox.eu, but in general it will be enough to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">read vraytapy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to understand what techniques are there, there are examples of all the techniques that you may need in the exam.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exam preparation. </font><font style="vertical-align: inherit;">Organizational part</font></font></h3></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To pass the exam you will need:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foreign passport (your name and surname must be written in English)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webcam</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stable internet</font></font></li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It’s good to have extra:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">backup internet (I used mobile)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a spare computer (I had a spare laptop next to me that was fully configured to take an exam)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VM snapshot with Kali</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy of VM with Kali (I put one copy on the hard drive, the second on the external hard drive)</font></font></li>
</ol><br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exam!</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The exam is considered full-time (Proctored Exam) so it starts 15 minutes before the selected time. </font><font style="vertical-align: inherit;">You connect to a special web platform, rummage your screens, in a text chat they start asking you tasks and questions:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">show passport by webcam</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">show that nobody is in the room</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">give test script results for connection</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then I had a file and when I tried to copy a new end-user pack to a virtual machine with Kali, it fell. </font><font style="vertical-align: inherit;">I was ready for this, rolled back the virtual machine, copied the pack, launched it and started to wait for 9 in the morning. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I got access at 9:01. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I had a simple action plan:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start numbering of services</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make a car for buffer overflow in 1 hour</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make a car for 10 points in 1 hour</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make the first car for 20 points in 2 hours</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make a second car for 20 points in 2 hours</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make a car for 25 points in 3 hours</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see from my plan, it took me 9 hours to pass the exam, but it didn’t go according to plan from the very beginning :) I forgot to take into account an important inhibitory factor - to write down in steps everything that was done with all screenshots for the report. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The final result I got is the following:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffer overflow - 2.5 hours. </font><font style="vertical-align: inherit;">I lost an hour, because </font><font style="vertical-align: inherit;">did not notice a couple of bad characters, another 30 minutes for reports</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">car in 10 - 30 minutes: 10 minutes hacking, 20 minutes screenshots</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first car in 20 - 2.5 hours: 1.5 hours hacking, 40 minutes screenshots and report, 20 minutes break</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">second car in 20 - 2 hours: 1.5 hours hacking, 30 minutes screenshots and report.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">car for 25 - 3.5 hours: 3 hours hacking (with two breaks), 30 minutes screenshots and report</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, the exam is much more interesting than labs, the vulnerabilities are all quite recent - 2018-2019. </font><font style="vertical-align: inherit;">Enhancements are not everywhere through kernel vulnerabilities. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I sat for the longest time, waiting for privilege escalation, all unprivileged shells were received in 10-30 minutes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The exam has done many false paths that will not lead to success. </font><font style="vertical-align: inherit;">If everything is easily discarded for the initializing shell (for example, an exploit for buffer overflow on Windows XP SP2, although the service itself is running on Windows 10), then in the upgrade I got stuck in these false paths a couple of times. </font><font style="vertical-align: inherit;">The main thing here is to tell yourself in time that this vector is worth changing and choosing a new one. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After 11 hours, I finished the exam, breaking everything and went to drink a couple of pints of beer (just a couple, since the next day we still have to write a formal beautiful report).</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Writing and sending a report</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I took the template from the same repository where the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template for the labs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and filled it in 4 hours. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then the fun began with where to send it and how. First you need to encrypt it using 7z with a password, the password is not random, and your ID is in the system (5 digits, it flies in 0.3 seconds on the CPU). Then I searched for information for a long time where to put the report on the lab in the same archive or in another (Answer: you need to put it in the same archive). Then I ran into the fact that the format for setting the password in the 7z archive, the -p flag, after which the password must be written together, i.e. something like -pPassword. In fact, all the steps are described in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , you just need to be able to look for them.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The resulting archive must be uploaded to the site, get a link and send this link to special mail! </font><font style="vertical-align: inherit;">Why such difficulties in 2020 is a mystery to me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After a couple of hours, you will receive a response letter that: “We received your link, but did not verify that it has a normal archive, that it is decrypted and that it contains the necessary data. </font><font style="vertical-align: inherit;">And that we will report the results of the exam within 10 working days. "</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exactly a week after the exam, on Sunday March 1, I received a joyful letter that I had compiled the archive correctly: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/ks/2t/1sks2t-sibr4csu0vrrgb-ygnry.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that I filled in the data for sending me a physical certificate and an OSCP certification card.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Who needs this certification?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I got the following list (sorted by the meaningfulness of receipt and the requirements of this certificate):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4-5 year students. </font><font style="vertical-align: inherit;">For them, this is a very cool practice.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">those who decided to move to safety from related industries. </font><font style="vertical-align: inherit;">Everything is described at a good level, a lot of examples, there is something to learn.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employer. </font><font style="vertical-align: inherit;">The certificate shows that a person knows something and knows how to do something with his hands (in our vacancies we indicate this as a plus).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">people in the industry who want to refresh / test their knowledge</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">experienced pentesters. </font><font style="vertical-align: inherit;">Perhaps a beautiful crust will allow them to become more interesting for employers.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further plans to pass OSWE (Offensive Security Web Expert). </font><font style="vertical-align: inherit;">As for me, he is more interesting than the OSCE (Offensive Security Certified Expert). </font><font style="vertical-align: inherit;">And for those who are interested in reading about the various types of certification in the field of information security, we wrote a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separate article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497792/index.html">Tools of a novice stock investor: test access, start tariff, trading terminal</a></li>
<li><a href="../en497794/index.html">Evaluation Criteria for Russian BI Systems</a></li>
<li><a href="../en497796/index.html">The trend for isolation and pasta is more popular than buckwheat: April Fools quest results for IT people</a></li>
<li><a href="../en497800/index.html">The fight against piracy and counterfeiting online without the help of courts</a></li>
<li><a href="../en497804/index.html">Increased sensitivity of A / B tests with Cuped. Report in Yandex</a></li>
<li><a href="../en497808/index.html">3D do it yourself. Part 2: it is three-dimensional</a></li>
<li><a href="../en497810/index.html">PVS Studio.VS. Statistical analysis of GCC 10. Independent mini-test</a></li>
<li><a href="../en497812/index.html">Scientists from MIT are developing a device that will allow at least partially control their dreams</a></li>
<li><a href="../en497814/index.html">Five stages of accepting the inevitable, or How we developed a program for automated profiling</a></li>
<li><a href="../en497816/index.html">Russian Railways sends me someone else's tickets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>