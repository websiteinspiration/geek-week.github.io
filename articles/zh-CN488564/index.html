<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¹ğŸ¿ ğŸ¦‹ ğŸ™ï¸ æ‚¨åœ¨å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰ä¸Šçš„ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œã€‚åˆå­¦è€…æŒ‡å— ğŸ’‚ğŸ¼ ğŸ§œğŸ¼ ğŸ’–</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨å¦‚ä½•åœ¨30åˆ†é’Ÿå†…è®¾ç½®æœºå™¨å­¦ä¹ ç¯å¢ƒï¼Œåˆ›å»ºç”¨äºå›¾åƒè¯†åˆ«çš„ç¥ç»ç½‘ç»œï¼Œç„¶ååœ¨å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰ä¸Šè¿è¡Œç›¸åŒçš„ç½‘ç»œã€‚
 
 é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œã€‚
 
 åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°å­¦æ¨¡å‹åŠå…¶è½¯ä»¶æˆ–ç¡¬ä»¶å®ç°ï¼Œå»ºç«‹åœ¨ç”Ÿç‰©ç¥ç»ç½‘ç»œï¼ˆæ´»ç”Ÿç‰©ä½“ç¥ç»ç»†èƒç½‘ç»œï¼‰çš„ç»„ç»‡å’ŒåŠŸèƒ½åŸç†ä¹‹ä¸Šã€‚è¿™ä¸ªæ¦‚å¿µ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æ‚¨åœ¨å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰ä¸Šçš„ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œã€‚åˆå­¦è€…æŒ‡å—</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488564/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/wg/sv/g2/wgsvg24lytktztdczee_4rteb28.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨å¦‚ä½•åœ¨30åˆ†é’Ÿå†…è®¾ç½®æœºå™¨å­¦ä¹ ç¯å¢ƒï¼Œåˆ›å»ºç”¨äºå›¾åƒè¯†åˆ«çš„ç¥ç»ç½‘ç»œï¼Œç„¶ååœ¨å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰ä¸Šè¿è¡Œç›¸åŒçš„ç½‘ç»œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°å­¦æ¨¡å‹åŠå…¶è½¯ä»¶æˆ–ç¡¬ä»¶å®ç°ï¼Œå»ºç«‹åœ¨ç”Ÿç‰©ç¥ç»ç½‘ç»œï¼ˆæ´»ç”Ÿç‰©ä½“ç¥ç»ç»†èƒç½‘ç»œï¼‰çš„ç»„ç»‡å’ŒåŠŸèƒ½åŸç†ä¹‹ä¸Šã€‚è¿™ä¸ªæ¦‚å¿µäº§ç”Ÿäºç ”ç©¶å¤§è„‘ä¸­å‘ç”Ÿçš„è¿‡ç¨‹ï¼Œå¹¶è¯•å›¾æ¨¡æ‹Ÿè¿™äº›è¿‡ç¨‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¥ç»ç½‘ç»œä¸æ˜¯æŒ‰ç…§é€šå¸¸çš„å«ä¹‰ç¼–ç¨‹çš„ï¼Œè€Œæ˜¯ç»è¿‡è®­ç»ƒçš„ã€‚</font><font style="vertical-align: inherit;">ä¸ä¼ ç»Ÿç®—æ³•ç›¸æ¯”ï¼Œå­¦ä¹ èƒ½åŠ›æ˜¯ç¥ç»ç½‘ç»œçš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€ã€‚</font><font style="vertical-align: inherit;">ä»æŠ€æœ¯ä¸Šè®²ï¼Œè®­ç»ƒåœ¨äºæ‰¾åˆ°ç¥ç»å…ƒä¹‹é—´çš„è¿æ¥ç³»æ•°ã€‚</font><font style="vertical-align: inherit;">åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œç¥ç»ç½‘ç»œèƒ½å¤Ÿè¯†åˆ«è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å¤æ‚å…³ç³»ï¼Œå¹¶è¿›è¡Œæ¦‚æ‹¬ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»æœºå™¨å­¦ä¹ çš„è§’åº¦æ¥çœ‹ï¼Œç¥ç»ç½‘ç»œæ˜¯æ¨¡å¼è¯†åˆ«æ–¹æ³•ï¼Œåˆ¤åˆ«åˆ†æï¼Œèšç±»æ–¹æ³•å’Œå…¶ä»–æ–¹æ³•çš„ç‰¹ä¾‹ã€‚</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾å¤‡</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œè®©æˆ‘ä»¬å¤„ç†è®¾å¤‡ã€‚æˆ‘ä»¬éœ€è¦ä¸€å°è£…æœ‰Linuxæ“ä½œç³»ç»Ÿçš„æœåŠ¡å™¨ã€‚ç”¨äºæœºå™¨å­¦ä¹ ç³»ç»Ÿçš„æ“ä½œçš„è®¾å¤‡éœ€è¦è¶³å¤Ÿå¼ºå¤§å¹¶ä¸”å› æ­¤å¾ˆæ˜‚è´µã€‚å¯¹äºé‚£äº›æ²¡æœ‰å¥½çš„æ±½è½¦çš„äººï¼Œæˆ‘å»ºè®®æ‚¨æ³¨æ„äº‘æä¾›å•†çš„æœåŠ¡ã€‚å¯ä»¥å¿«é€Ÿç§Ÿç”¨å¿…è¦çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”åªéœ€ä¸ºä½¿ç”¨æ—¶é—´ä»˜è´¹ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨éœ€è¦åˆ›å»ºç¥ç»ç½‘ç»œçš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨ä¿„ç½—æ–¯ä¸€å®¶äº‘æä¾›å•†çš„æœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">è¯¥å…¬å¸é€šè¿‡NVIDIAæä¾›çš„å¼ºå¤§çš„Tesla V100å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰æä¾›ä¸“é—¨ç”¨äºæœºå™¨å­¦ä¹ çš„ç§Ÿèµäº‘æœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">ç®€è€Œè¨€ä¹‹ï¼šä¸å…·æœ‰ç±»ä¼¼æˆæœ¬å¹¶ä¸”ä½¿ç”¨CPUï¼ˆä¼—æ‰€å‘¨çŸ¥çš„ä¸­å¤®å¤„ç†å™¨ï¼‰çš„æœåŠ¡å™¨ç›¸æ¯”ï¼Œå°†å…·æœ‰GPUçš„æœåŠ¡å™¨ä½¿ç”¨èµ·æ¥æ•ˆç‡ï¼ˆé€Ÿåº¦ï¼‰æé«˜æ•°åå€ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ç”±äºGPUæ¶æ„çš„ç»†èŠ‚è€Œå®ç°çš„ï¼Œå®ƒå¯ä»¥æ›´å¿«åœ°å¤„ç†è®¡ç®—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ‰§è¡Œä»¥ä¸‹ç¤ºä¾‹ï¼Œæˆ‘ä»¬èŠ±äº†å‡ å¤©æ—¶é—´è´­ä¹°äº†ä»¥ä¸‹æœåŠ¡å™¨ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">150 GBå›ºæ€ç¡¬ç›˜</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…å­˜32 GB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰4æ ¸çš„Tesla V100 16 Gbå¤„ç†å™¨</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu 18.04å·²å®‰è£…åœ¨è®¡ç®—æœºä¸Šã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®ç¯å¢ƒ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…æ‚¨éœ€è¦å·¥ä½œçš„æ‰€æœ‰å†…å®¹ã€‚</font><font style="vertical-align: inherit;">ç”±äºæˆ‘ä»¬çš„æ–‡ç« ä¸»è¦æ˜¯é’ˆå¯¹åˆå­¦è€…çš„ï¼Œå› æ­¤æˆ‘å°†åœ¨å…¶ä¸­è®¨è®ºä¸€äº›å¯¹ä»–ä»¬æœ‰ç”¨çš„è§‚ç‚¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¾ç½®ç¯å¢ƒæ—¶ï¼Œè®¸å¤šå·¥ä½œéƒ½æ˜¯é€šè¿‡å‘½ä»¤è¡Œå®Œæˆçš„ã€‚</font><font style="vertical-align: inherit;">å¤§å¤šæ•°ç”¨æˆ·å°†Windowsç”¨ä½œå·¥ä½œæ“ä½œç³»ç»Ÿã€‚</font><font style="vertical-align: inherit;">è¿™ä¸ªæ“ä½œç³»ç»Ÿä¸­çš„æ ‡å‡†æ§åˆ¶å°è¿˜æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ–¹ä¾¿çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cmder /</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å·¥å…·</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¸‹è½½è¿·ä½ ç‰ˆæœ¬å¹¶è¿è¡ŒCmder.exeã€‚</font><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦é€šè¿‡SSHè¿æ¥åˆ°æœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">ssh root@server-ip-or-hostname</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŒ‡å®šæœåŠ¡å™¨çš„IPåœ°å€æˆ–DNSåç§°è€Œä¸æ˜¯server-ip-or-hostnameã€‚</font><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œè¾“å…¥å¯†ç ï¼ŒæˆåŠŸè¿æ¥åï¼Œæˆ‘ä»¬åº”è¯¥ä¼šå¾—åˆ°ç±»ä¼¼çš„ä¿¡æ¯ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-74-generic x86_64)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼€å‘MLæ¨¡å‹çš„ä¸»è¦è¯­è¨€æ˜¯Pythonã€‚</font><font style="vertical-align: inherit;">åœ¨Linuxä¸Šä½¿ç”¨å®ƒçš„æœ€å—æ¬¢è¿çš„å¹³å°æ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anaconda</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°†å…¶å®‰è£…åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬é¦–å…ˆæ›´æ–°æœ¬åœ°è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®‰è£…curlï¼ˆå‘½ä»¤è¡Œå®ç”¨ç¨‹åºï¼‰ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install curl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„Anacondaå‘è¡Œç‰ˆï¼š</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /tmp<font></font>
curl â€“O https://repo.anaconda.com/archive/Anaconda3-2019.10-Linux-x86_64.sh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¼€å§‹å®‰è£…ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">bash Anaconda3-2019.10-Linux-x86_64.sh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæ‚¨éœ€è¦ç¡®è®¤è®¸å¯åè®®ã€‚</font><font style="vertical-align: inherit;">æˆåŠŸå®‰è£…åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">Thank you <span class="hljs-keyword">for</span> installing Anaconda3!</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†å¼€å‘MLæ¨¡å‹ï¼Œç°åœ¨åˆ›å»ºäº†è®¸å¤šæ¡†æ¶ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€å—æ¬¢è¿çš„æ¡†æ¶ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyTorch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensorflow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨è¯¥æ¡†æ¶å¯ä»¥æé«˜å¼€å‘é€Ÿåº¦ï¼Œå¹¶å¯ä»¥å°†ç°æˆçš„å·¥å…·ç”¨äºæ ‡å‡†ä»»åŠ¡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨PyTorchã€‚</font><font style="vertical-align: inherit;">å®‰è£…å®ƒï¼š</font></font><br>
<br>
<pre><code class="bash hljs">conda install pytorch torchvision cudatoolkit=10.1 -c pytorch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æˆ‘ä»¬éœ€è¦å¯åŠ¨Jupyter Notebook-MLä¸“å®¶ä¸­æµè¡Œçš„å¼€å‘å·¥å…·ã€‚</font><font style="vertical-align: inherit;">å®ƒå…è®¸æ‚¨ç¼–å†™ä»£ç å¹¶ç«‹å³æŸ¥çœ‹å…¶æ‰§è¡Œç»“æœã€‚</font><font style="vertical-align: inherit;">Jupyter Notebookæ˜¯Anacondaçš„ä¸€éƒ¨åˆ†ï¼Œå·²ç»å®‰è£…åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šã€‚</font><font style="vertical-align: inherit;">æ‚¨éœ€è¦ä»æˆ‘ä»¬çš„æ¡Œé¢ç³»ç»Ÿè¿æ¥åˆ°å®ƒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡æŒ‡å®šç«¯å£8080åœ¨æœåŠ¡å™¨ä¸Šè¿è¡ŒJupyterï¼š</font></font><br>
<br>
<pre><code class="bash hljs">jupyter notebook --no-browser --port=8080 --allow-root</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œåœ¨æˆ‘ä»¬çš„Cmderæ§åˆ¶å°ä¸­æ‰“å¼€å¦ä¸€ä¸ªé€‰é¡¹å¡ï¼ˆé¡¶éƒ¨èœå•æ˜¯â€œæ–°å»ºâ€æ§åˆ¶å°å¯¹è¯æ¡†ï¼‰ï¼Œé€šè¿‡SSHå°†ç«¯å£8080è¿æ¥åˆ°æœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh -L 8080:localhost:8080 root@server-ip-or-hostname</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“æ‚¨è¾“å…¥ç¬¬ä¸€ä¸ªå‘½ä»¤æ—¶ï¼Œå°†ä¸ºæˆ‘ä»¬æä¾›åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€Jupyterçš„é“¾æ¥ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">To access the notebook, open this file <span class="hljs-keyword">in</span> a browser:<font></font>
        file:///root/.<span class="hljs-built_in">local</span>/share/jupyter/runtime/nbserver-18788-open.html<font></font>
    Or copy and paste one of these URLs:<font></font>
        http://localhost:8080/?token=cca0bd0b30857821194b9018a5394a4ed2322236f116d311<font></font>
     or http://127.0.0.1:8080/?token=cca0bd0b30857821194b9018a5394a4ed2322236f116d311<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨æœ¬åœ°ä¸»æœºçš„é“¾æ¥ï¼š8080ã€‚</font><font style="vertical-align: inherit;">å¤åˆ¶å®Œæ•´è·¯å¾„ï¼Œç„¶åç²˜è´´åˆ°PCæœ¬åœ°æµè§ˆå™¨çš„åœ°å€æ ä¸­ã€‚</font><font style="vertical-align: inherit;">Jupyterç¬”è®°æœ¬æ‰“å¼€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç¬”è®°æœ¬ç”µè„‘ï¼šæ–°å»º-ç¬”è®°æœ¬ç”µè„‘-Python 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ£€æŸ¥æˆ‘ä»¬å®‰è£…çš„æ‰€æœ‰ç»„ä»¶çš„æ­£ç¡®æ“ä½œã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬åœ¨Jupyterä¸­å¼•å…¥äº†ä¸€ä¸ªPyTorchä»£ç ç¤ºä¾‹ï¼Œå¹¶å¼€å§‹æ‰§è¡Œï¼ˆè¿è¡ŒæŒ‰é’®ï¼‰ï¼š</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> print_function
<span class="hljs-keyword">import</span> torch<font></font>
x = torch.rand(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)<font></font>
print(x)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ps/o8/su/pso8sugii4txi_beqrbx13nsry8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨æœ‰ç±»ä¼¼çš„ç»“æœï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰€æœ‰äººéƒ½æ­£ç¡®è®¾ç½®äº†ï¼Œå°±å¯ä»¥å¼€å§‹å¼€å‘ç¥ç»ç½‘ç»œäº†ï¼</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªç¥ç»ç½‘ç»œ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç”¨äºå›¾åƒè¯†åˆ«çš„ç¥ç»ç½‘ç»œã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä»¥æœ¬</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å—ä¸º</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºç¡€</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†è®­ç»ƒç½‘ç»œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å…¬å…±å¯ç”¨çš„CIFAR10æ•°æ®é›†ã€‚</font><font style="vertical-align: inherit;">ä»–ä¸Šè¿‡è¯¾ï¼šâ€œé£æœºâ€ï¼Œâ€œæ±½è½¦â€ï¼Œâ€œé¸Ÿâ€ï¼Œâ€œçŒ«â€ï¼Œâ€œé¹¿â€ï¼Œâ€œç‹—â€ï¼Œâ€œé’è›™â€ï¼Œâ€œé©¬â€ï¼Œâ€œèˆ¹â€ï¼Œâ€œå¡è½¦â€ã€‚</font><font style="vertical-align: inherit;">CIFAR10ä¸­çš„å›¾åƒå°ºå¯¸ä¸º3x32x32ï¼Œå³32x32åƒç´ çš„3é€šé“å½©è‰²å›¾åƒã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wg/sv/g2/wgsvg24lytktztdczee_4rteb28.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºå·¥ä½œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åˆ›å»ºçš„PyTorchè½¯ä»¶åŒ…æ¥å¤„ç†å›¾åƒ-torchvisionã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½å¹¶æ ‡å‡†åŒ–åŸ¹è®­å’Œæµ‹è¯•æ•°æ®é›†</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¥ç»ç½‘ç»œå®šä¹‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸ¹è®­æ•°æ®ç½‘ç»œåŸ¹è®­</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æµ‹è¯•æ•°æ®æµ‹è¯•ç½‘ç»œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é‡å¤è¿›è¡ŒGPUåŸ¹è®­å’Œæµ‹è¯•</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸‹é¢çš„æ‰€æœ‰ä»£ç æˆ‘ä»¬éƒ½å°†åœ¨Jupyter Notebookä¸­æ‰§è¡Œã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½å¹¶æ ‡å‡†åŒ–CIFAR10</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨Jupyterä¸­å¤åˆ¶å¹¶æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="python hljs">
<span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torchvision
<span class="hljs-keyword">import</span> torchvision.transforms <span class="hljs-keyword">as</span> transforms<font></font>
<font></font>
transform = transforms.Compose(<font></font>
    [transforms.ToTensor(),<font></font>
     transforms.Normalize((<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>), (<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>))])<font></font>
<font></font>
trainset = torchvision.datasets.CIFAR10(root=<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">True</span>,<font></font>
                                        download=<span class="hljs-literal">True</span>, transform=transform)<font></font>
trainloader = torch.utils.data.DataLoader(trainset, batch_size=<span class="hljs-number">4</span>,<font></font>
                                          shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">2</span>)<font></font>
<font></font>
testset = torchvision.datasets.CIFAR10(root=<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">False</span>,<font></font>
                                       download=<span class="hljs-literal">True</span>, transform=transform)<font></font>
testloader = torch.utils.data.DataLoader(testset, batch_size=<span class="hljs-number">4</span>,<font></font>
                                         shuffle=<span class="hljs-literal">False</span>, num_workers=<span class="hljs-number">2</span>)<font></font>
<font></font>
classes = (<span class="hljs-string">'plane'</span>, <span class="hljs-string">'car'</span>, <span class="hljs-string">'bird'</span>, <span class="hljs-string">'cat'</span>,
           <span class="hljs-string">'deer'</span>, <span class="hljs-string">'dog'</span>, <span class="hljs-string">'frog'</span>, <span class="hljs-string">'horse'</span>, <span class="hljs-string">'ship'</span>, <span class="hljs-string">'truck'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç­”æ¡ˆåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</font></font><br>
<br>
<pre><code class="python hljs">Downloading https://www.cs.toronto.edu/~kriz/cifar<span class="hljs-number">-10</span>-python.tar.gz to ./data/cifar<span class="hljs-number">-10</span>-python.tar.gz<font></font>
Extracting ./data/cifar<span class="hljs-number">-10</span>-python.tar.gz to ./data<font></font>
Files already downloaded <span class="hljs-keyword">and</span> verified</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†å¯¼å‡ºå‡ ä¸ªè®­ç»ƒå›¾åƒè¿›è¡Œæ£€æŸ¥ï¼š</font></font><br>
<br>
<pre><code class="python hljs">
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<font></font>
<font></font>
<span class="hljs-comment"># functions to show an image</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">imshow</span>(<span class="hljs-params">img</span>):</span>
    img = img / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>     <span class="hljs-comment"># unnormalize</span><font></font>
    npimg = img.numpy()<font></font>
    plt.imshow(np.transpose(npimg, (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)))<font></font>
    plt.show()<font></font>
<font></font>
<span class="hljs-comment"># get some random training images</span><font></font>
dataiter = iter(trainloader)<font></font>
images, labels = dataiter.next()<font></font>
<font></font>
<span class="hljs-comment"># show images</span><font></font>
imshow(torchvision.utils.make_grid(images))<font></font>
<span class="hljs-comment"># print labels</span>
print(<span class="hljs-string">' '</span>.join(<span class="hljs-string">'%5s'</span> % classes[labels[j]] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">4</span>)))
</code></pre><br>
<img src="https://habrastorage.org/webt/yy/w4/xw/yyw4xwjhaa6kfy41fvnylvz6qdy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¥ç»ç½‘ç»œå®šä¹‰</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬é¦–å…ˆæ£€æŸ¥ä¸€ä¸‹ç”¨äºå›¾åƒè¯†åˆ«çš„ç¥ç»ç½‘ç»œå¦‚ä½•å·¥ä½œã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç›´æ¥è¿æ¥ç½‘ç»œã€‚</font><font style="vertical-align: inherit;">å®ƒè·å–è¾“å…¥ï¼Œå°†å…¶ä¸€å±‚ä¸€å±‚åœ°ä¼ é€’ç»™å¤šå±‚ï¼Œç„¶åæœ€ç»ˆç»™å‡ºè¾“å‡ºã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t8/4m/yg/t84mygi1sjuzssoezguistupmeo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬åœ¨ç¯å¢ƒä¸­åˆ›å»ºä¸€ä¸ªç±»ä¼¼çš„ç½‘ç»œï¼š</font></font><br>
<br>
<pre><code class="python hljs">
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Net</span>(<span class="hljs-params">nn.Module</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
        super(Net, self).__init__()<font></font>
        self.conv1 = nn.Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>)<font></font>
        self.pool = nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<font></font>
        self.conv2 = nn.Conv2d(<span class="hljs-number">6</span>, <span class="hljs-number">16</span>, <span class="hljs-number">5</span>)<font></font>
        self.fc1 = nn.Linear(<span class="hljs-number">16</span> * <span class="hljs-number">5</span> * <span class="hljs-number">5</span>, <span class="hljs-number">120</span>)<font></font>
        self.fc2 = nn.Linear(<span class="hljs-number">120</span>, <span class="hljs-number">84</span>)<font></font>
        self.fc3 = nn.Linear(<span class="hljs-number">84</span>, <span class="hljs-number">10</span>)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span><font></font>
        x = self.pool(F.relu(self.conv1(x)))<font></font>
        x = self.pool(F.relu(self.conv2(x)))<font></font>
        x = x.view(<span class="hljs-number">-1</span>, <span class="hljs-number">16</span> * <span class="hljs-number">5</span> * <span class="hljs-number">5</span>)<font></font>
        x = F.relu(self.fc1(x))<font></font>
        x = F.relu(self.fc2(x))<font></font>
        x = self.fc3(x)<font></font>
        <span class="hljs-keyword">return</span> x<font></font>
<font></font>
net = Net()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬è¿˜å®šä¹‰äº†æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ </font></font><br>
<br>
<pre><code class="python hljs">
<span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim<font></font>
<font></font>
criterion = nn.CrossEntropyLoss()<font></font>
optimizer = optim.SGD(net.parameters(), lr=<span class="hljs-number">0.001</span>, momentum=<span class="hljs-number">0.9</span>)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸ¹è®­æ•°æ®ç½‘ç»œåŸ¹è®­</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¼€å§‹è®­ç»ƒæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œã€‚</font><font style="vertical-align: inherit;">æˆ‘æè¯·æ‚¨æ³¨æ„ï¼Œåœ¨æ­¤ä¹‹åï¼Œåœ¨è¿è¡Œæ­¤ä»£ç æ—¶ï¼Œæ‚¨å°†éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆå·¥ä½œã€‚</font><font style="vertical-align: inherit;">æˆ‘èŠ±äº†5åˆ†é’Ÿã€‚</font><font style="vertical-align: inherit;">è”ç½‘éœ€è¦æ—¶é—´ã€‚</font></font><br>
<br>
<pre><code class="python hljs"> <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> range(<span class="hljs-number">2</span>):  <span class="hljs-comment"># loop over the dataset multiple times</span><font></font>
<font></font>
    running_loss = <span class="hljs-number">0.0</span>
    <span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> enumerate(trainloader, <span class="hljs-number">0</span>):
        <span class="hljs-comment"># get the inputs; data is a list of [inputs, labels]</span><font></font>
        inputs, labels = data<font></font>
<font></font>
        <span class="hljs-comment"># zero the parameter gradients</span><font></font>
        optimizer.zero_grad()<font></font>
<font></font>
        <span class="hljs-comment"># forward + backward + optimize</span><font></font>
        outputs = net(inputs)<font></font>
        loss = criterion(outputs, labels)<font></font>
        loss.backward()<font></font>
        optimizer.step()<font></font>
<font></font>
        <span class="hljs-comment"># print statistics</span><font></font>
        running_loss += loss.item()<font></font>
        <span class="hljs-keyword">if</span> i % <span class="hljs-number">2000</span> == <span class="hljs-number">1999</span>:    <span class="hljs-comment"># print every 2000 mini-batches</span>
            print(<span class="hljs-string">'[%d, %5d] loss: %.3f'</span> %<font></font>
                  (epoch + <span class="hljs-number">1</span>, i + <span class="hljs-number">1</span>, running_loss / <span class="hljs-number">2000</span>))<font></font>
            running_loss = <span class="hljs-number">0.0</span><font></font>
<font></font>
print(<span class="hljs-string">'Finished Training'</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ç»“æœï¼šæˆ‘ä»¬</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sw/05/k2/sw05k2ewk-gu9fiyrv3xncxjaki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¿å­˜è®­ç»ƒæœ‰ç´ çš„æ¨¡å‹ï¼š</font></font><br>
<br>
<pre><code class="python hljs">PATH = <span class="hljs-string">'./cifar_net.pth'</span>
torch.save(net.state_dict(), PATH)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨æµ‹è¯•æ•°æ®æµ‹è¯•ç½‘ç»œ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ç»„è®­ç»ƒæ•°æ®æ¥è®­ç»ƒç½‘ç»œã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ£€æŸ¥ç½‘ç»œæ˜¯å¦å­¦åˆ°äº†ä»€ä¹ˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†é€šè¿‡é¢„æµ‹ç¥ç»ç½‘ç»œè¾“å‡ºçš„ç±»åˆ«æ ‡ç­¾å¹¶æ£€æŸ¥çœŸç›¸æ¥éªŒè¯è¿™ä¸€ç‚¹ã€‚</font><font style="vertical-align: inherit;">å¦‚æœé¢„æµ‹æ­£ç¡®ï¼Œåˆ™å°†æ ·æœ¬æ·»åŠ åˆ°æ­£ç¡®é¢„æµ‹åˆ—è¡¨ä¸­ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬æ˜¾ç¤ºæµ‹è¯•å¥—ä»¶ä¸­çš„å›¾åƒï¼š</font></font><br>
<br>
<pre><code class="python hljs">dataiter = iter(testloader)<font></font>
images, labels = dataiter.next()<font></font>
<font></font>
<span class="hljs-comment"># print images</span><font></font>
imshow(torchvision.utils.make_grid(images))<font></font>
print(<span class="hljs-string">'GroundTruth: '</span>, <span class="hljs-string">' '</span>.join(<span class="hljs-string">'%5s'</span> % classes[labels[j]] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">4</span>)))</code></pre><br>
<img src="https://habrastorage.org/webt/hp/ph/zm/hpphzma6rus04gw-edxsowf1ifu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨è®©ç¥ç»ç½‘ç»œå‘Šè¯‰æˆ‘ä»¬è¿™äº›å›¾ç‰‡æ˜¯ä»€ä¹ˆï¼š</font></font><br>
<br>
<pre><code class="python hljs"><font></font>
net = Net()<font></font>
net.load_state_dict(torch.load(PATH))<font></font>
<font></font>
outputs = net(images)<font></font>
<font></font>
_, predicted = torch.max(outputs, <span class="hljs-number">1</span>)<font></font>
<font></font>
print(<span class="hljs-string">'Predicted: '</span>, <span class="hljs-string">' '</span>.join(<span class="hljs-string">'%5s'</span> % classes[predicted[j]]
                              <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">4</span>)))
</code></pre><br>
<img src="https://habrastorage.org/webt/j2/vp/uc/j2vpucdaps0fuci2yg38ip2fbdo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœä¼¼ä¹è¿˜ä¸é”™ï¼šç½‘ç»œæ­£ç¡®è¯†åˆ«äº†å››å¼ å›¾ç‰‡ä¸­çš„ä¸‰å¼ ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬çœ‹çœ‹ç½‘ç»œå¦‚ä½•åœ¨æ•´ä¸ªæ•°æ®é›†ä¸­å·¥ä½œã€‚</font></font><br>
<br>
<pre><code class="python hljs">
correct = <span class="hljs-number">0</span>
total = <span class="hljs-number">0</span>
<span class="hljs-keyword">with</span> torch.no_grad():
    <span class="hljs-keyword">for</span> data <span class="hljs-keyword">in</span> testloader:<font></font>
        images, labels = data<font></font>
        outputs = net(images)<font></font>
        _, predicted = torch.max(outputs.data, <span class="hljs-number">1</span>)<font></font>
        total += labels.size(<span class="hljs-number">0</span>)<font></font>
        correct += (predicted == labels).sum().item()<font></font>
<font></font>
print(<span class="hljs-string">'Accuracy of the network on the 10000 test images: %d %%'</span> % (
    <span class="hljs-number">100</span> * correct / total))</code></pre><br>
<img src="https://habrastorage.org/webt/fy/i4/cn/fyi4cnkjgimshkhhbsva4udixhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœ‹èµ·æ¥ç½‘ç»œçŸ¥é“å¹¶ä¸”å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</font><font style="vertical-align: inherit;">å¦‚æœä»–éšæœºå®šä¹‰ç­çº§ï¼Œé‚£ä¹ˆå‡†ç¡®æ€§å°†æ˜¯10ï¼…ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ç½‘ç»œå®šä¹‰çš„æ›´å¥½çš„ç±»ï¼š</font></font><br>
<br>
<pre><code class="python hljs">class_correct = list(<span class="hljs-number">0.</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>))<font></font>
class_total = list(<span class="hljs-number">0.</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>))
<span class="hljs-keyword">with</span> torch.no_grad():
    <span class="hljs-keyword">for</span> data <span class="hljs-keyword">in</span> testloader:<font></font>
        images, labels = data<font></font>
        outputs = net(images)<font></font>
        _, predicted = torch.max(outputs, <span class="hljs-number">1</span>)<font></font>
        c = (predicted == labels).squeeze()<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">4</span>):<font></font>
            label = labels[i]<font></font>
            class_correct[label] += c[i].item()<font></font>
            class_total[label] += <span class="hljs-number">1</span><font></font>
<font></font>
<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>):<font></font>
    print(<span class="hljs-string">'Accuracy of %5s : %2d %%'</span> % (<font></font>
        classes[i], <span class="hljs-number">100</span> * class_correct[i] / class_total[i]))</code></pre><br>
<img src="https://habrastorage.org/webt/l9/s9/qu/l9s9quxd-lzx2kh7wphxe9-2qzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç½‘ç»œä¼¼ä¹ç¡®å®šäº†æ±½è½¦å’Œèˆ¹èˆ¶çš„æœ€ä½³çŠ¶æ€ï¼šå‡†ç¡®æ€§ä¸º71ï¼…ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ç½‘ç»œæ­£åœ¨è¿è¡Œã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°è¯•å°†å…¶å·¥ä½œè½¬ç§»åˆ°å›¾å½¢å¤„ç†å™¨ï¼ˆGPUï¼‰ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆå˜åŒ–ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPUç¥ç»ç½‘ç»œè®­ç»ƒ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘å°†ç®€è¦è¯´æ˜ä»€ä¹ˆæ˜¯CUDAã€‚</font><font style="vertical-align: inherit;">CUDAï¼ˆè®¡ç®—ç»Ÿä¸€è®¾å¤‡ä½“ç³»ç»“æ„ï¼‰æ˜¯NVIDIAå¼€å‘çš„ä¸€ç§å¹¶è¡Œè®¡ç®—å¹³å°ï¼Œç”¨äºGPUä¸Šçš„å¸¸è§„è®¡ç®—ã€‚</font><font style="vertical-align: inherit;">å€ŸåŠ©CUDAï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨GPUçš„åŠŸèƒ½æå¤§åœ°åŠ é€Ÿè®¡ç®—åº”ç”¨ç¨‹åºã€‚</font><font style="vertical-align: inherit;">åœ¨æˆ‘ä»¬è´­ä¹°çš„æœåŠ¡å™¨ä¸Šï¼Œå·²ç»å®‰è£…äº†è¯¥å¹³å°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆè®©æˆ‘ä»¬å°†GPUå®šä¹‰ä¸ºç¬¬ä¸€ä¸ªå¯è§çš„cudaè®¾å¤‡ã€‚</font></font><br>
<br>
<pre><code class="python hljs">device = torch . device ( <span class="hljs-string">"cuda:0"</span> <span class="hljs-keyword">if</span> torch . cuda . is_available () <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span> )
<span class="hljs-comment"># Assuming that we are on a CUDA machine, this should print a CUDA device:</span>
<span class="hljs-keyword">print</span> ( device )</code></pre><br>
<img src="https://habrastorage.org/webt/n2/2k/bf/n22kbfvilr6kn30eel6dfhaose4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°†ç½‘ç»œå‘é€åˆ°GPUï¼š</font></font><br>
 <br>
<pre><code class="python hljs">net.to(device)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬è¿˜å¿…é¡»åœ¨æ¯ä¸€æ­¥å°†è¾“å…¥å’Œç›®æ ‡å‘é€åˆ°GPUï¼š</font></font><br>
<br>
<pre><code class="python hljs">inputs, labels = data[<span class="hljs-number">0</span>].to(device), data[<span class="hljs-number">1</span>].to(device)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨GPUä¸Šè¿è¡Œç½‘ç»œé‡æ–°è®­ç»ƒï¼š </font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim<font></font>
<font></font>
criterion = nn.CrossEntropyLoss()<font></font>
optimizer = optim.SGD(net.parameters(), lr=<span class="hljs-number">0.001</span>, momentum=<span class="hljs-number">0.9</span>)
<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> range(<span class="hljs-number">2</span>):  <span class="hljs-comment"># loop over the dataset multiple times</span><font></font>
<font></font>
    running_loss = <span class="hljs-number">0.0</span>
    <span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> enumerate(trainloader, <span class="hljs-number">0</span>):
        <span class="hljs-comment"># get the inputs; data is a list of [inputs, labels]</span>
    inputs, labels = data[<span class="hljs-number">0</span>].to(device), data[<span class="hljs-number">1</span>].to(device)<font></font>
<font></font>
        <span class="hljs-comment"># zero the parameter gradients</span><font></font>
        optimizer.zero_grad()<font></font>
<font></font>
        <span class="hljs-comment"># forward + backward + optimize</span><font></font>
        outputs = net(inputs)<font></font>
        loss = criterion(outputs, labels)<font></font>
        loss.backward()<font></font>
        optimizer.step()<font></font>
<font></font>
        <span class="hljs-comment"># print statistics</span><font></font>
        running_loss += loss.item()<font></font>
        <span class="hljs-keyword">if</span> i % <span class="hljs-number">2000</span> == <span class="hljs-number">1999</span>:    <span class="hljs-comment"># print every 2000 mini-batches</span>
            print(<span class="hljs-string">'[%d, %5d] loss: %.3f'</span> %<font></font>
                  (epoch + <span class="hljs-number">1</span>, i + <span class="hljs-number">1</span>, running_loss / <span class="hljs-number">2000</span>))<font></font>
            running_loss = <span class="hljs-number">0.0</span><font></font>
<font></font>
print(<span class="hljs-string">'Finished Training'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ¬¡ï¼Œç½‘ç»œåŸ¹è®­æŒç»­äº†å¤§çº¦3åˆ†é’Ÿã€‚</font><font style="vertical-align: inherit;">å›æƒ³ä¸€ä¸‹ï¼Œåœ¨å¸¸è§„å¤„ç†å™¨ä¸Šçš„åŒä¸€é˜¶æ®µæŒç»­äº†5åˆ†é’Ÿã€‚</font><font style="vertical-align: inherit;">å·®å¼‚ä¸å¤§ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„ç½‘ç»œä¸æ˜¯å¾ˆå¤§ã€‚</font><font style="vertical-align: inherit;">å½“ä½¿ç”¨å¤§å‹é˜µåˆ—è¿›è¡Œè®­ç»ƒæ—¶ï¼ŒGPUå’Œä¼ ç»Ÿå¤„ç†å™¨ä¹‹é—´çš„é€Ÿåº¦å·®å¼‚å°†å¢å¤§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¥½åƒå°±è¿™äº›äº†ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬è®¾æ³•åšåˆ°çš„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬æ£€æŸ¥äº†GPUæ˜¯ä»€ä¹ˆï¼Œå¹¶é€‰æ‹©äº†å®‰è£…GPUçš„æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªç”¨äºåˆ›å»ºç¥ç»ç½‘ç»œçš„è½¯ä»¶ç¯å¢ƒï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”¨äºå›¾åƒè¯†åˆ«çš„ç¥ç»ç½‘ç»œå¹¶å¯¹å…¶è¿›è¡Œäº†è®­ç»ƒã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬ä½¿ç”¨GPUé‡å¤äº†ç½‘ç»œè®­ç»ƒï¼Œå¹¶æé«˜äº†é€Ÿåº¦ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å¾ˆé«˜å…´åœ¨è¯„è®ºä¸­å›ç­”é—®é¢˜ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN488548/index.html">å®éªŒï¼šå¦‚ä½•å­¦ä¹ åˆ›å»ºæµè¡Œçš„è‹±è¯­æ–‡æœ¬ï¼ˆä»¥åŠä¸ºä»€ä¹ˆè¯´è‹±è¯­çš„å“ˆä¼¯æ—äººè¯»å¾—è¿™ä¹ˆå°‘ï¼‰</a></li>
<li><a href="../zh-CN488550/index.html">è°æƒ³è¦ä½¿åˆä½œä¼™ä¼´è„±ç¦»ITå·¨å¤´</a></li>
<li><a href="../zh-CN488552/index.html">Apple FASå’Œå®¶é•¿æ§åˆ¶å¼€å‘äººå‘˜</a></li>
<li><a href="../zh-CN488558/index.html">ä½¿ç”¨Kafka Streamsç¡®ä¿åº”ç”¨ç¨‹åºçš„é«˜å¯ç”¨æ€§</a></li>
<li><a href="../zh-CN488560/index.html">åœ¨Google Cloud Platformä¸Šæ‰˜ç®¡çš„å…è´¹Telegramæœºå™¨äºº</a></li>
<li><a href="../zh-CN488566/index.html">è´¨é‡æ£€æŸ¥å·¥ç¨‹å¸ˆå¦‚ä½•é€šè¿‡é“¾æ¥Visual Studioä¸­çš„è‡ªåŠ¨æµ‹è¯•å’Œæµ‹è¯•ITæ¥èŠ‚çœä¸€æ•´å¤©</a></li>
<li><a href="../zh-CN488568/index.html">ç¥ç»ç½‘ç»œæ˜¯å¦æ¢¦æƒ³ç€ç”¨ç”µé’±ï¼Ÿ</a></li>
<li><a href="../zh-CN488570/index.html">ç¾å›½ç‰¹å‹¤å±€å¦‚ä½•å°†ç½‘ç»œæœ‹å…‹RPGä¸é»‘å®¢æ•™ç§‘ä¹¦æ··æ·†</a></li>
<li><a href="../zh-CN488572/index.html">Unityåˆ†æä»ªç°å·²å¼€æº</a></li>
<li><a href="../zh-CN488574/index.html">å­¦ç”Ÿä¸ºSTM32F411å†™Uarté©±åŠ¨ç¨‹åº</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>