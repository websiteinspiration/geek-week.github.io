<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👇🏼 🧕🏼 🛂 クリプトを使用して投資家へのリスクなしに「公共財」を作成する方法 💵 🗞️ 🤱🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="記事では、保証契約とは何かについて説明します。これは、公共およびグループの利益を提供するためのメカニズムとしても知られています。また、Obyteプラットフォームの自律エージェントに基づく独自のクラウドファンディング実装を一緒に作成します。
 
 保証契約は、新しい公共財を創出するための組織的な資金調...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>クリプトを使用して投資家へのリスクなしに「公共財」を作成する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/obyte/blog/475100/"><img src="https://habrastorage.org/webt/0w/dj/zj/0wdjzjdbzig68hpnpunqbd6nsao.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事では、保証契約とは何かについて説明します。これは、公共およびグループの利益を提供するためのメカニズムとしても知られています。また、Obyteプラットフォームの自律エージェントに基づく独自のクラウドファンディング実装を一緒に作成します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保証契約は、新しい公共財を創出するための組織的な資金調達メカニズムです。このような契約の典型的な使用例は、次のような状況です。夏のコテージ協同組合の参加者は、夏のコテージへの便利なアクセスのための道路を建設することに決めました。これを行うには、Nの金額を収集し、それを道路建設の請負業者に転送します。多くの質問が発生します。誰もが信頼してコレクションに請求する人をどこで見つけるか、道路のすべての潜在的なユーザーにその建設に投資させる方法、十分なお金が集まらない場合はどうなるかなどです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保証契約はクラウドファンディングと意味が非常に似ており、リスクのある企業に投資する投資家の場合のように、リスクにさらされるのは投資家だけです。このような契約は、クラウドファンディングと同様に、収集した金額の目標の達成に応じて、成功と失敗の2つの結果をもたらす可能性があります。回収が成功すると、投資家は新しい公共財を受け取ることができますが、投資家だけではない場合もあります。失敗した場合、お金は預金者に返却されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、まず、基本的な条件を繰り返します。クラウドファンディングの本質は、所定の最終金額（必ずしも固定されている必要はなく、動的である場合もあります）と終了日（常にではないが通常）を使用して、所定の目標のために「群集の中で」資金を調達することです。この金額に達すると、資金調達のラウンドが成功したと見なされ、収集が停止し、すべての資金が目標を達成するために割り当てられます。失敗した場合、つまり、期限に達し、資金が不足した場合、すべての資金はドナーに返還されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仮想通貨のクラウドファンディングはどのような問題を解決しますか？第一に、投資家がお金を送金する相手を信頼して確認する必要がないようにします。資金調達のための自律エージェントのコードはオープンであり、各投資家は、最終的な金額に達するまでいつでも自分の拠出金を引き出すことができ、すべての資金が事前に選択されたアドレスに送信されて財を作成することを確認できます。第二に、調達されたすべての資金の透明な会計は、行われた貢献に比例して目標の達成か​​らの将来の利益を分配するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保証契約で解決できるもう1つの問題は、調整の問題です。今日は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ゲーム「攻撃51％」</font></a><font style="vertical-align: inherit;">に関する前回の記事を補足します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そして私たちはこのまさにこの問題を解決します。 AAを使用しない場合、ゲームの参加者は調整が不足しているため、収集された金額が「不足」するリスクがあります。そうすれば、投資に成功した人は、興味を示さなかった、または単にそれを行う時間がなかった他の参加者が原因でお金を失うだけです（反対のチームが現在のリーダーに挑戦するのにちょうど24時間かかることを思い出してください）。保証契約を通じてお金を集めることにより、プレーヤーは必要な量が集められるまでいつでも自分のお金を引き出すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのケースでは適用されませんが、そのような契約のもう1つの便利な機能は、「フリーライダーの影響」または「フリーライダーの問題」の影響を軽減することです。</font><font style="vertical-align: inherit;">公共財、つまりそれを譲ることができない、またはそのアクセスを制御するのが難しいので、フリーライダーの問題は公共財の組織における主要な問題です。</font><font style="vertical-align: inherit;">人々は、他の人が無料で使用できるものに投資したくない、または投資家自身が絶対的に合理的な経済行動に固執し、収集が成功した場合に「非投資」戦略を選択すると、作成された財を使用できるようになる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
資金調達の成功の可能性を高める最適化された保証契約のオプションについても説明します。</font><font style="vertical-align: inherit;">参加者の合理的な行動は、無視するのではなく、すでに投資戦略の選択になります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まとめてゲームする</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前回の記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですでに知られている</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ゲーム「攻撃51％」</font></a><font style="vertical-align: inherit;">を取り上げ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます。</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の実装では、ゲーム参加者はゲームのAAアドレスに送金します。</font><font style="vertical-align: inherit;">しかし、アルゴリズムを改善することができ、チームを失う場合に参加者がお金を失う可能性を減らすことができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このため、チームメンバーは、ゲームの総プールの少なくとも51％に等しい動的ターゲットを使用してクラウドファンディングを編成できます。</font><font style="vertical-align: inherit;">プールが増えると、最終的なクラウドファンディングターゲットも変化します。</font><font style="vertical-align: inherit;">そして成功した場合のみ、お金はAAゲームのアドレスに送られ、チームはすぐに現在のリーダーになります。</font><font style="vertical-align: inherit;">そのようなイベントが発生しない場合、参加者はお金を失うことはなく、ゲームのプールを無駄にせず、AAのクラウドファンディングからお金を引き出すだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
両方のスタンドアロンエージェントのオリジナルは、常に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oscriptオンラインコードエディター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でテンプレートの形で</font><font style="vertical-align: inherit;">利用でき</font><font style="vertical-align: inherit;">ます。ドロップダウンメニューから「51％攻撃ゲーム」と「資金調達プロキシ」を選択するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OscriptでAAを書き始める前</font><font style="vertical-align: inherit;">に、ドキュメントの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Getting Started Guide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（eng）</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">」を</font></a><font style="vertical-align: inherit;">読んで、</font><font style="vertical-align: inherit;">AAを書く基本原則にすぐに慣れる</font><font style="vertical-align: inherit;">ことを強くお勧め</font><font style="vertical-align: inherit;">します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードを書く</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、アルゴリズムを記述します。ドナーはバイトをAAアドレスに送信し、1対1の比率でクラウドファンディングトークンを受け取ります。いつでも、彼はこれらのトークンをバイトに交換できます。バイトを受け取った後、AAは資金調達の目標に到達したことを確認し、そうであれば、すべてのバイトをゲームのAAのアドレスに送信し、代わりにゲームトークン（チームトークン）を受け取ります。ドナーはクラウドファンディングトークンをゲームトークンに交換できるようになりました。将来的には、チームが勝った場合、AAゲームを通じてバイトに交換でき、元のトークンから最大x2バイトを受け取ることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは始めましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい資金調達期間の開始処理単位。</font><font style="vertical-align: inherit;">AAのアドレスへの着信データメッセージの「開始」フィールドを受信すると、クラウドファンディングトークンを発行して状態で書き込み、呼び出し側への応答としてそれも返します。</font></font><br>
<br>
<pre><code class="javascript hljs">{ <span class="hljs-comment">// start a new fundraising period</span>
    <span class="hljs-attr">if</span>: <span class="hljs-string">`{trigger.data.start AND !$asset}`</span>,
    <span class="hljs-attr">messages</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'asset'</span>,
            <span class="hljs-attr">payload</span>: {
                <span class="hljs-attr">is_private</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">is_transferrable</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">auto_destroy</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">fixed_denominations</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">issued_by_definer_only</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">cosigned_by_definer</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">spender_attested</span>: <span class="hljs-literal">false</span><font></font>
            }<font></font>
        },<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
            <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                var[response_unit || '_status'] = 'open';
                var['asset'] = response_unit;
                response['asset'] = response_unit;
            }`</span><font></font>
        }<font></font>
    ]<font></font>
},</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドナーからの預金の処理。</font><font style="vertical-align: inherit;">最初に、手数料でも十分ではない非常に少量のジャンク取引を除外します。</font><font style="vertical-align: inherit;">次に、ゲームが完了しておらず、収集が可能であるという基本条件を確認してください。</font><font style="vertical-align: inherit;">完全なブロックリスト：</font></font><br>
<br>
<pre><code class="javascript hljs">{ <span class="hljs-comment">// contribute</span>
    <span class="hljs-attr">if</span>: <span class="hljs-string">`{trigger.output[[asset=base]] &gt;= 1e5 AND $asset}`</span>,
    <span class="hljs-attr">init</span>: <span class="hljs-string">`{
        if (var[$destination_aa]['finished'])
            bounce('game over');
        $amount = trigger.output[[asset=base]] - 2000; // to account for fees we need to respond now and to refund bytes or pay shares later
        $total_raised = var['total_raised'] + $amount;
        $missing_amount = ceil((balance[$destination_aa][base] + $total_raised)*0.51) - var[$destination_aa]['team_' || $team || '_amount'];
        $bDone = ($total_raised &gt; $missing_amount);
    }`</span>,
    <span class="hljs-attr">messages</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
            <span class="hljs-attr">payload</span>: {
                <span class="hljs-attr">asset</span>: <span class="hljs-string">"{$asset}"</span>,
                <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{trigger.address}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{$amount}"</span>}]<font></font>
            }<font></font>
        },<font></font>
        {<font></font>
            <span class="hljs-attr">if</span>: <span class="hljs-string">`{$bDone}`</span>,
            <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
            <span class="hljs-attr">payload</span>: {
                <span class="hljs-attr">asset</span>: <span class="hljs-string">"base"</span>,
                <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{$destination_aa}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{$total_raised}"</span>}]<font></font>
            }<font></font>
        },<font></font>
        {<font></font>
            <span class="hljs-attr">if</span>: <span class="hljs-string">`{$bDone}`</span>,
            <span class="hljs-attr">app</span>: <span class="hljs-string">'data'</span>,
            <span class="hljs-attr">payload</span>: {
                <span class="hljs-attr">team</span>: <span class="hljs-string">"{$team}"</span><font></font>
            }<font></font>
        },<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
            <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                if ($bDone)
                    var[$asset || '_status'] = 'raised';
                else
                    var['total_raised'] = $total_raised;
            }`</span><font></font>
        }<font></font>
    ]<font></font>
},</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のチェックの直後に、AAのメインロジックは次のようになります。- </font></font><br>
<br>
<code>$total_raised = var['total_raised'] + $amount;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは、受け取った金額をエージェントの資金の合計額に要約します。</font></font><br>
<br>
<code>$missing_amount = ceil((balance[$destination_aa][base] + $total_raised)*0.51) - var[$destination_aa]['team_' || $team || '_amount'];</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-新しい資金がゲームに勝つために十分であることを確認してください。バランスと別のAAの変数の状態を基準に注意してください：</font></font><code>balance[$destination_aa][base]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>var[$destination_aa]['team_' || $team || '_amount']</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてを、</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションメッセージを処理する前に毎回呼び出される</font><font style="vertical-align: inherit;">ブロック</font><font style="vertical-align: inherit;">で実行します。着信トランザクションに対する答えは、明らかに、受信したバイト（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メッセージ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列の最初のブロック</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">に対して1対1の比率でAAトークンを送信すること</font><font style="vertical-align: inherit;">です。 2番目と3番目のブロックは、ローカル変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ bDoneが</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trueに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定</font><font style="vertical-align: inherit;">されている場合にのみ実行</font><font style="vertical-align: inherit;">され</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">（ブロックで設定されます）</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">init</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">それらの中で、私たちはこのAAのアドレスからAAゲームのアドレスにすべての資金を送り、代わりにゲームトークンを受け取ります。</font><font style="vertical-align: inherit;">メッセージの最後のブロックでは、ステータスを更新し、必要なステータスと収集される量を設定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AAゲームから受け取ったトークンを処理します。トークンはすでにAAのバランスにあり、エージェントの状態を変更するだけで済みます。</font></font><br>
<br>
<pre><code class="javascript hljs">{ <span class="hljs-comment">// received team asset</span>
    <span class="hljs-attr">if</span>: <span class="hljs-string">`{trigger.output[[asset=var[$destination_aa]['team_' || $team || '_asset']]] AND $asset}`</span>,
    <span class="hljs-attr">messages</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
            <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                var[$asset || '_status'] = 'done';
                var['asset'] = false;
                var['total_raised'] = false;
            }`</span><font></font>
        }<font></font>
    ]<font></font>
},</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プレイヤーによる投資の払い戻し。</font><font style="vertical-align: inherit;">いつでも参加を拒否し、バイトを取り戻すことができます。</font><font style="vertical-align: inherit;">これを行うには、プレーヤーはこのAAのトークンを送信し、リターントランザクションで同じバイトを送信します。</font></font><br>
<br>
<pre><code class="javascript hljs">{ <span class="hljs-comment">// refund</span>
    <span class="hljs-attr">if</span>: <span class="hljs-string">`{$asset AND trigger.output[[asset=$asset]] &gt; 0}`</span>,
    <span class="hljs-attr">init</span>: <span class="hljs-string">`{
        $amount = trigger.output[[asset=$asset]];
    }`</span>,
    <span class="hljs-attr">messages</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
            <span class="hljs-attr">payload</span>: {
                <span class="hljs-attr">asset</span>: <span class="hljs-string">"base"</span>,
                <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{trigger.address}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{$amount}"</span>}]<font></font>
            }<font></font>
        },<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
            <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                var['total_raised'] -= $amount;
            }`</span><font></font>
        }<font></font>
    ]<font></font>
},</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AAトークンとゲームトークンの交換。</font><font style="vertical-align: inherit;">受け取った「私たちの」トークンの数に等しい量のAA（ifブロックを通過する場合）の残高にあるゲームトークンを送信するだけです。</font></font><br>
<br>
<pre><code class="javascript hljs">{ <span class="hljs-comment">// pay the obtained team asset in exchange for the issued asset</span>
    <span class="hljs-attr">if</span>: <span class="hljs-string">`{
        $in_asset = trigger.output[[asset!=base]].asset;
        var[$in_asset || '_status'] == 'done'
    }`</span>,
    <span class="hljs-attr">messages</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
            <span class="hljs-attr">payload</span>: {
                <span class="hljs-attr">asset</span>: <span class="hljs-string">"{var[$destination_aa]['team_' || $team || '_asset']}"</span>,
                <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{trigger.address}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{trigger.output[[asset=$in_asset]]}"</span>}]<font></font>
            }<font></font>
        },<font></font>
    ]<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エージェントコードの準備が整いました。これが完全なリストです。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全なエージェントコード</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">{
    <span class="hljs-comment">/*
    This is a fundraising proxy AA.

    It allows to raise money up to a specific target.  If the target is reached, the money is forwarded to another AA, otherwise the money is refunded.

    This specific example raises money for challenging the current candidate winner in 51% attack game.  The target is a moving target as other teams may be adding contributions at the same time.

    Contributors get shares of the proxy in exchange for Bytes.  They can exchange the shares back to the same amount of Bytes any time before the target is reached.  As soon as the target is reached, the raised funds are forwarded to the game and the proxy receives the shares of the team in exchange.  Then, the contributors can exchange the shares of the proxy for the shares of the team.
    */</span><font></font>
<font></font>
    <span class="hljs-attr">init</span>: <span class="hljs-string">`{
        $asset = var['asset'];
        $destination_aa = 'WWHEN5NDHBI2UF4CLJ7LQ7VAW2QELMD7';
        $team = 'VF5UVKDSOXPMITMDGYXEIGUJSQBRAMMN';
    }`</span>,
    <span class="hljs-attr">messages</span>: {
        <span class="hljs-attr">cases</span>: [<font></font>
            { <span class="hljs-comment">// start a new fundraising period</span>
                <span class="hljs-attr">if</span>: <span class="hljs-string">`{trigger.data.start AND !$asset}`</span>,
                <span class="hljs-attr">messages</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'asset'</span>,
                        <span class="hljs-attr">payload</span>: {
                            <span class="hljs-attr">is_private</span>: <span class="hljs-literal">false</span>,
                            <span class="hljs-attr">is_transferrable</span>: <span class="hljs-literal">true</span>,
                            <span class="hljs-attr">auto_destroy</span>: <span class="hljs-literal">false</span>,
                            <span class="hljs-attr">fixed_denominations</span>: <span class="hljs-literal">false</span>,
                            <span class="hljs-attr">issued_by_definer_only</span>: <span class="hljs-literal">true</span>,
                            <span class="hljs-attr">cosigned_by_definer</span>: <span class="hljs-literal">false</span>,
                            <span class="hljs-attr">spender_attested</span>: <span class="hljs-literal">false</span><font></font>
                        }<font></font>
                    },<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
                        <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                            var[response_unit || '_status'] = 'open';
                            var['asset'] = response_unit;
                            response['asset'] = response_unit;
                        }`</span><font></font>
                    }<font></font>
                ]<font></font>
            },<font></font>
            { <span class="hljs-comment">// contribute</span>
                <span class="hljs-attr">if</span>: <span class="hljs-string">`{trigger.output[[asset=base]] &gt;= 1e5 AND $asset}`</span>,
                <span class="hljs-attr">init</span>: <span class="hljs-string">`{
                    if (var[$destination_aa]['finished'])
                        bounce('game over');
                    $amount = trigger.output[[asset=base]] - 2000; // to account for fees we need to respond now and to refund bytes or pay shares later
                    $total_raised = var['total_raised'] + $amount;
                    $missing_amount = ceil((balance[$destination_aa][base] + $total_raised)*0.51) - var[$destination_aa]['team_' || $team || '_amount'];
                    $bDone = ($total_raised &gt; $missing_amount);
                }`</span>,
                <span class="hljs-attr">messages</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
                        <span class="hljs-attr">payload</span>: {
                            <span class="hljs-attr">asset</span>: <span class="hljs-string">"{$asset}"</span>,
                            <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{trigger.address}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{$amount}"</span>}]<font></font>
                        }<font></font>
                    },<font></font>
                    {<font></font>
                        <span class="hljs-attr">if</span>: <span class="hljs-string">`{$bDone}`</span>,
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
                        <span class="hljs-attr">payload</span>: {
                            <span class="hljs-attr">asset</span>: <span class="hljs-string">"base"</span>,
                            <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{$destination_aa}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{$total_raised}"</span>}]<font></font>
                        }<font></font>
                    },<font></font>
                    {<font></font>
                        <span class="hljs-attr">if</span>: <span class="hljs-string">`{$bDone}`</span>,
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'data'</span>,
                        <span class="hljs-attr">payload</span>: {
                            <span class="hljs-attr">team</span>: <span class="hljs-string">"{$team}"</span><font></font>
                        }<font></font>
                    },<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
                        <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                            if ($bDone)
                                var[$asset || '_status'] = 'raised';
                            else
                                var['total_raised'] = $total_raised;
                        }`</span><font></font>
                    }<font></font>
                ]<font></font>
            },<font></font>
            { <span class="hljs-comment">// received team asset</span>
                <span class="hljs-attr">if</span>: <span class="hljs-string">`{trigger.output[[asset=var[$destination_aa]['team_' || $team || '_asset']]] AND $asset}`</span>,
                <span class="hljs-attr">messages</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
                        <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                            var[$asset || '_status'] = 'done';
                            var['asset'] = false;
                            var['total_raised'] = false;
                        }`</span><font></font>
                    }<font></font>
                ]<font></font>
            },<font></font>
            { <span class="hljs-comment">// refund</span>
                <span class="hljs-attr">if</span>: <span class="hljs-string">`{$asset AND trigger.output[[asset=$asset]] &gt; 0}`</span>,
                <span class="hljs-attr">init</span>: <span class="hljs-string">`{
                    $amount = trigger.output[[asset=$asset]];
                }`</span>,
                <span class="hljs-attr">messages</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
                        <span class="hljs-attr">payload</span>: {
                            <span class="hljs-attr">asset</span>: <span class="hljs-string">"base"</span>,
                            <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{trigger.address}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{$amount}"</span>}]<font></font>
                        }<font></font>
                    },<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'state'</span>,
                        <span class="hljs-attr">state</span>: <span class="hljs-string">`{
                            var['total_raised'] -= $amount;
                        }`</span><font></font>
                    }<font></font>
                ]<font></font>
            },<font></font>
            { <span class="hljs-comment">// pay the obtained team asset in exchange for the issued asset</span>
                <span class="hljs-attr">if</span>: <span class="hljs-string">`{
                    $in_asset = trigger.output[[asset!=base]].asset;
                    var[$in_asset || '_status'] == 'done'
                }`</span>,
                <span class="hljs-attr">messages</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">app</span>: <span class="hljs-string">'payment'</span>,
                        <span class="hljs-attr">payload</span>: {
                            <span class="hljs-attr">asset</span>: <span class="hljs-string">"{var[$destination_aa]['team_' || $team || '_asset']}"</span>,
                            <span class="hljs-attr">outputs</span>: [{<span class="hljs-attr">address</span>: <span class="hljs-string">"{trigger.address}"</span>, <span class="hljs-attr">amount</span>: <span class="hljs-string">"{trigger.output[[asset=$in_asset]]}"</span>}]<font></font>
                        }<font></font>
                    },<font></font>
                ]<font></font>
            }<font></font>
        ]<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も簡単なアルゴリズムは実装しませんでした。</font><font style="vertical-align: inherit;">私たちの目標は動的であり、典型的な保証契約では典型的ではありません。</font><font style="vertical-align: inherit;">それらでは、ほとんどの場合、目標量が固定されているだけでなく、期限も固定されています。</font><font style="vertical-align: inherit;">これはコードに大きな変更を加える必要がないので、読者のための演習として残しておきましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最善の戦略は投資することです！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして今、フリーライダーの問題に戻りましょう。ゲームの場合、そのような問題はありません。クラウドファンディングトークンホルダーのみが勝つことができます。しかし、フリーライダーの問題を解決すると、ゲームの場合に役立ちます。私たちは人々に投資を「刺激する」ことができます。このため、AAの作成者でもある資金調達主催者は、わずかな報酬を支払うことができます。コレクションの目的が達成されない場合、彼はポケットから支払います。コレクションが成功した場合、主催者は小さな割合をピックアップします。つまり、利益を得るために収集が失敗するリスクをカバーするサードパーティを紹介します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような「最適化されたクラウドファンディング」を適用すると、以前は「非投資」の合理的行動（一般に、公共財がフリーライダーになることが常に最も経済的に収益性の高い戦略である）は、投資よりも合理的でなくなる可能性があります。</font><font style="vertical-align: inherit;">これは、特定の人の輪が関わっているグループ商品を作成する場合に特に関係があります。</font><font style="vertical-align: inherit;">これは密航問題を完全に排除するものではありませんが、参加を合理的な行動にします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「最適化された保証契約」を実装するコードも、希望する人のための興味深い演習として残されます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja475078/index.html">SwiftUIのプロパティラッパーについて</a></li>
<li><a href="../ja475082/index.html">Habr Weekly＃26/4日間の稼働週、GitLabが政治に参加、Yandexがローバー配信ロボットをテスト中</a></li>
<li><a href="../ja475086/index.html">フロントエンド開発者向けのREST APIタイピング</a></li>
<li><a href="../ja475092/index.html">「後で読む」：Webページのオフラインコレクションの困難な運命</a></li>
<li><a href="../ja475098/index.html">ポスターオンラインシネマの調達の自動化</a></li>
<li><a href="../ja475104/index.html">モジュールで飛ぶ：Jetpackを使用したマルチモジュールアプリケーションでのナビゲーション</a></li>
<li><a href="../ja475106/index.html">Microsoft Ignite 2019カンファレンスの主な発表</a></li>
<li><a href="../ja475110/index.html">Jupyter Notebooksを使用した.NET Core-プレビュー1</a></li>
<li><a href="../ja475114/index.html">.NET Core 3.1 Preview 2の紹介</a></li>
<li><a href="../ja475116/index.html">Windowsデスクトップ用.NET Core 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>