<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏯 😗 🕡 ウェーブレット分析。パート3 🚾 🍕 👲🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前書き
 PyWaveletsライブラリ（MITライセンスでリリースされた無料のオープンソースソフトウェア）を使用してCWT分析を実行する場合、結果の視覚化に問題があります。開発者が提案した可視化テストプログラムを次のリストに示します。
 
 上場

 import pywt import nump...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ウェーブレット分析。パート3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454240/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyWaveletsライブラリ（MITライセンスでリリースされた無料のオープンソースソフトウェア）を使用してCWT分析を実行する場合、結果の視覚化に問題があります。</font><font style="vertical-align: inherit;">開発者が提案した</font><font style="vertical-align: inherit;">可視化</font><font style="vertical-align: inherit;">テスト</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のリストに示します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"> <span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<font></font>
t = np.linspace(<span class="hljs-number">-1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">200</span>, endpoint=<span class="hljs-literal">False</span>)<font></font>
sig  = np.cos(<span class="hljs-number">2</span> * np.pi * <span class="hljs-number">7</span> * t) + np.real(np.exp(<span class="hljs-number">-7</span>*(t<span class="hljs-number">-0.4</span>)**<span class="hljs-number">2</span>)*np.exp(<span class="hljs-number">1j</span>*<span class="hljs-number">2</span>*np.pi*<span class="hljs-number">2</span>*(t<span class="hljs-number">-0.4</span>)))<font></font>
widths = np.arange(<span class="hljs-number">1</span>, <span class="hljs-number">31</span>)<font></font>
cwtmatr, freqs = pywt.cwt(sig, widths, <span class="hljs-string">'cmor1-1.5'</span>)<font></font>
plt.imshow(cwtmatr, extent=[<span class="hljs-number">-1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">31</span>], cmap=<span class="hljs-string">'PRGn'</span>, aspect=<span class="hljs-string">'auto'</span>,<font></font>
             vmax=abs(cwtmatr).max(), vmin=-abs(cwtmatr).max())  <span class="hljs-comment"># doctest: +SKIP</span>
plt.show() <span class="hljs-comment"># doctest: +SKIP</span></code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば 'cmor1-1.5'などの複雑なウェーブレットを使用すると、プログラムはエラーを生成します。</font></font><br>
<br>
<pre><code class="python hljs">File<span class="hljs-string">"C:\Users\User\AppData\Local\Programs\Python\Python36\lib\site-packages\matplotlib\image.py"</span>, line <span class="hljs-number">642</span>, <span class="hljs-keyword">in</span> set_data
    <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">"Image data cannot be converted to float"</span>)<font></font>
TypeError: Image data cannot be converted to float</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このエラーと、必要な時間分解能を提供するためにスケール（幅）を選択するのが難しいため、特に初心者ユーザーにとって、CWT分析を研究することが困難になり、教育的な性質のこの記事を書くようになりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパブリケーションの目的は</font><font style="vertical-align: inherit;">、単純な信号と特殊な信号の分析、および時系列の分析に追加情報を提供する正規化方法、対数スケーリングと合成を</font><font style="vertical-align: inherit;">使用する場合の新しい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケールグラム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視覚化</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">モジュールの</font></a><font style="vertical-align: inherit;">使用を検討することです</font><font style="vertical-align: inherit;">。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「データ分析のためのウェーブレットの穏やかな紹介」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という出版物からの情報を使用しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この資料に示されている例のリストでは、エラーが修正されており、例の各リストは完成した形式になっているため、以前のバージョンに慣れることなく使用できます。</font><font style="vertical-align: inherit;">特別な信号のウェーブレット分析には、</font><font style="vertical-align: inherit;">PyWavelets </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースのデータを</font><font style="vertical-align: inherit;">使用しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ウェーブレットスカログラムは、1次元データの2次元表現です。</font><font style="vertical-align: inherit;">時間はX軸にプロットされ、Y軸のスケールは、時間Xの信号振幅に対応する信号のウェーブレット変換の結果です。このような信号のグラフィック表示の分析値は、時間分解能がY軸に表示され、追加情報を提供します。信号の動的プロパティについて。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェーブレット-単純な信号スカログラム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.ガウスエンベロープの余弦波（ウェーブレットの置き換え。時間分解能のスケール依存性を調べることができます）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> numpy <span class="hljs-keyword">import</span>* 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">import</span> pywt
<span class="hljs-comment">#  ,       </span>
<span class="hljs-comment">#       'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
<span class="hljs-comment">#    1  / </span>
ns   = <span class="hljs-number">1024</span><font></font>
time =arange(ns)<font></font>
scales = scg.periods2scales( arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>) )<font></font>
p1=<span class="hljs-number">10</span>;<font></font>
periodic1 = cos(<span class="hljs-number">2</span>*pi/p1*time) * exp(-((time-ns/<span class="hljs-number">2</span>)/<span class="hljs-number">200</span>)**<span class="hljs-number">2</span>)<font></font>
fig1, ax1 = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">6.9</span>,<span class="hljs-number">2.9</span>));  <font></font>
lines = ax1.plot(periodic1); <font></font>
ax1.set_xlim(<span class="hljs-number">0</span>, len(time))<font></font>
ax1.set_title(<span class="hljs-string">"   "</span>)<font></font>
fig1.tight_layout()<font></font>
ax2 = scg.cws(periodic1, scales=scales, figsize=(<span class="hljs-number">6.9</span>,<span class="hljs-number">2.9</span>)); <font></font>
txt = ax2.annotate(<span class="hljs-string">"p1=%s"</span>%p1, xy=(<span class="hljs-number">100</span>, <span class="hljs-number">10</span>), bbox=dict(boxstyle=<span class="hljs-string">"round4"</span>, fc=<span class="hljs-string">"w"</span>))<font></font>
tight_layout()<font></font>
print(<span class="hljs-string">"    :"</span>, scg.get_default_wavelet(), <span class="hljs-string">"("</span>,<font></font>
      pywt.ContinuousWavelet(scg.get_default_wavelet()).family_name, <span class="hljs-string">")"</span>)<font></font>
show()</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
信号変換のウェーブレット関数：cmor1-1.5（複素Morletウェーブレット）</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hs/p1/yt/hsp1ytatqsrowio0ybi4hocti9i.png"><br>
<br>
<img src="https://habrastorage.org/webt/xw/di/hq/xwdihq6dkqpofxc6ucw8oq7h6zu.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
周期信号は、点Y = p1で水平連続ストリップとして表示され、その強度は周期信号の振幅に応じて変化します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
帯域幅がゼロではないため、検出にあいまいさがいくつかあります。これは、ウェーブレットが1つの周波数ではなく帯域を検出するためです。</font><font style="vertical-align: inherit;">この効果は、ウェーブレット帯域幅に関連付けられています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. 3つのパルスが増加する周期で順次追加されます（異なるスケールでの周期的変動を考慮するため：多重解像度分析）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span>  numpy <span class="hljs-keyword">import</span>* 
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#       'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
<span class="hljs-comment">##    1  / </span>
ns   = <span class="hljs-number">1024</span><font></font>
time = arange(ns)<font></font>
scales = scg.periods2scales(arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>))<font></font>
pulses = zeros(ns, dtype=float32)<font></font>
steps  = linspace(<span class="hljs-number">0</span>, ns, <span class="hljs-number">8</span>)<font></font>
periods = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">40</span>]
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>):<font></font>
    step_mask = (time &gt; steps[i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>]) &amp; (time &lt; steps[i*<span class="hljs-number">2</span>+<span class="hljs-number">2</span>])<font></font>
    pulses += cos(<span class="hljs-number">2</span>*pi/periods[i]*time) * step_mask<font></font>
<font></font>
fig1, ax1 = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">7</span>,<span class="hljs-number">3</span>));  <font></font>
lines = ax1.plot(pulses); ax1.set_xlim(<span class="hljs-number">0</span>, len(time)); <font></font>
ax1.set_title(<span class="hljs-string">"     "</span>); ax1.set_xlabel(<span class="hljs-string">"Time"</span>)<font></font>
fig1.tight_layout()<font></font>
<font></font>
ax2 = scg.cws(pulses, scales=scales, figsize=(<span class="hljs-number">7</span>,<span class="hljs-number">3</span>))<font></font>
<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>):<font></font>
    txt = ax2.annotate(<span class="hljs-string">"p%d=%ds"</span>%(i+<span class="hljs-number">1</span>,periods[i]), xy=(steps[i*<span class="hljs-number">2</span>]+<span class="hljs-number">20</span>, periods[i]), <font></font>
                       bbox=dict(boxstyle=<span class="hljs-string">"round4"</span>, fc=<span class="hljs-string">"w"</span>))<font></font>
    ax2.plot(steps[i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>]*np.ones(<span class="hljs-number">2</span>), ax2.get_ylim(), <span class="hljs-string">'-w'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
    ax2.plot(steps[i*<span class="hljs-number">2</span>+<span class="hljs-number">2</span>]*np.ones(<span class="hljs-number">2</span>),   ax2.get_ylim(), <span class="hljs-string">'-w'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
tight_layout()<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/df/nm/l7/dfnml7k3umgnlv4vati1jgp_pd8.png"><br>
<br>
<img src="https://habrastorage.org/webt/hu/6b/wd/hu6bwdexuagw8otjcaogaecreba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パルスは、その周期性に対応して、予想される位置Yに表示され、周波​​数と時間に局所化されます。</font><font style="vertical-align: inherit;">ストリップの始まりと終わりは勢いに対応します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
帯域幅は、期間の長さに応じて変化します。</font><font style="vertical-align: inherit;">これは、ウェーブレット変換のよく知られた特性です。スケールが大きくなると、時間分解能が低下します。</font><font style="vertical-align: inherit;">これは、時間と周波数のトレードオフとしても知られています。</font><font style="vertical-align: inherit;">このタイプのスペクトログラムを見ると、多くの解像度分析が行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.異なる周波数の3つの周期的な振動を同時に発生させます（ウェーブレット分析では、信号のコンポーネントが周波数によって区別できます（差異が大きい場合）。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span>  numpy <span class="hljs-keyword">import</span>* 
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg <font></font>
scg.set_default_wavelet(<span class="hljs-string">'cmor1-1.5'</span>)
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
<span class="hljs-comment">##    1  / </span>
ns   = <span class="hljs-number">1024</span><font></font>
time = arange(ns)<font></font>
scales = scg.periods2scales(arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>))<font></font>
allwaves = np.zeros(ns, dtype=np.float32)<font></font>
periods = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">40</span>]
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>):<font></font>
    allwaves += cos(<span class="hljs-number">2</span>*np.pi/periods[i]*time)<font></font>
<font></font>
fig1, ax1 = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">6.5</span>,<span class="hljs-number">2</span>));  <font></font>
lines = ax1.plot(allwaves); ax1.set_title(<span class="hljs-string">"  "</span>) <font></font>
ax1.set_xlim(<span class="hljs-number">0</span>, len(time)); ax1.set_xlabel(<span class="hljs-string">""</span>)<font></font>
fig1.tight_layout()<font></font>
<font></font>
ax2 = scg.cws(allwaves, scales=scales, figsize=(<span class="hljs-number">7</span>,<span class="hljs-number">2</span>))<font></font>
tight_layout()<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/pr/uo/gr/pruogrwxqhvs0flrmlcfydqsquq.png"><br>
<br>
<img src="https://habrastorage.org/webt/fw/a1/18/fwa118pra6k0_mckusb8sn0vbmq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.非正弦波の周期的な信号（周期が30秒の三角波信号のウェーブレット変換と、以前に考慮されたものとの差が考慮されます）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span>  numpy <span class="hljs-keyword">import</span>* 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scipy.signal
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg <font></font>
scg.set_default_wavelet(<span class="hljs-string">'cmor1-1.5'</span>)
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
<span class="hljs-comment">##    1  / </span>
ns   = <span class="hljs-number">1024</span><font></font>
time = arange(ns)<font></font>
scales = scg.periods2scales(arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>))<font></font>
ptri    = <span class="hljs-number">30.0</span> <span class="hljs-comment"># period in samples</span>
raising = <span class="hljs-number">0.8</span>  <span class="hljs-comment"># fraction of the period raising</span>
triangle = scipy.signal.sawtooth(time/ptri*<span class="hljs-number">2</span>*pi, raising)<font></font>
<font></font>
<span class="hljs-comment"># plot the signal </span>
fig1, ax1 = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">7</span>,<span class="hljs-number">3</span>));  <font></font>
lines = ax1.plot(triangle); <font></font>
ax1.set_xlim(<span class="hljs-number">0</span>, len(time))<font></font>
ax1.set_title(<span class="hljs-string">"triangle wave increasing 80% of the time with a 30s period"</span>)<font></font>
fig1.tight_layout()<font></font>
<font></font>
<span class="hljs-comment"># and the scaleogram</span>
ax2 = scg.cws(triangle, scales=scales, figsize=(<span class="hljs-number">7</span>,<span class="hljs-number">3</span>)); <font></font>
txt = ax2.annotate(<span class="hljs-string">"first harmonic"</span>, xy=(<span class="hljs-number">100</span>, <span class="hljs-number">30</span>), bbox=dict(boxstyle=<span class="hljs-string">"round4"</span>, fc=<span class="hljs-string">"w"</span>))<font></font>
txt = ax2.annotate(<span class="hljs-string">"second harmonic"</span>, xy=(<span class="hljs-number">100</span>, <span class="hljs-number">15</span>), bbox=dict(boxstyle=<span class="hljs-string">"round4"</span>, fc=<span class="hljs-string">"w"</span>))<font></font>
tight_layout()<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/y7/2z/rk/y72zrke6shecx3nb5drpkrqdepq.png"><br>
<br>
<img src="https://habrastorage.org/webt/dk/rs/bp/dkrsbphqpqk9ceoiehga4re3mhy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大きな帯域は最初の高調波です。</font><font style="vertical-align: inherit;">第2高調波は、第1高調波の周期の半分の値で正確に表示されます。</font><font style="vertical-align: inherit;">これは、周期的な非正弦波信号の予想される結果です。</font><font style="vertical-align: inherit;">ファジー垂直要素は、第2高調波の周囲に表示されます。これは、第2高調波の強度が低く、三角波の場合、第1高調波の1/4の振幅を持ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.滑らかなパルス（ガウス）は、実際のデータ構造に似ています。</font><font style="vertical-align: inherit;">（この例は、ウェーブレット分析を使用して、信号の局所的な変化を経時的に検出する方法を示しています）：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
異なるシグマ値を持つ一連の滑らかなパルス：</font></font><br>
<br>
<ul>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x22C5;</mo><msub><mi>&amp;#x03C3;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo>=</mo><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.484ex" height="2.259ex" viewBox="0 -755.5 4083.4 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-22C5" x="722" y="0"></use><g transform="translate(1223,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMATHI-3C3" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-31" x="808" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-3D" x="2526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="3582" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">σ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-1">2\cdot \sigma _{1}=2</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x22C5;</mo><msub><mi>&amp;#x03C3;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>=</mo><mn>10</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.647ex" height="2.259ex" viewBox="0 -755.5 4583.9 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-22C5" x="722" y="0"></use><g transform="translate(1223,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMATHI-3C3" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="808" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-3D" x="2526" y="0"></use><g transform="translate(3582,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-30" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">σ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-2">2\cdot \sigma _{2}=10</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x22C5;</mo><msub><mi>&amp;#x03C3;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn></mrow></msub><mo>=</mo><mn>20</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.647ex" height="2.384ex" viewBox="0 -755.5 4583.9 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-22C5" x="722" y="0"></use><g transform="translate(1223,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMATHI-3C3" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-33" x="808" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-3D" x="2526" y="0"></use><g transform="translate(3582,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-30" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">σ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">３</font></font></mn></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二十</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-3">2\cdot \sigma _{3}=20</script></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パルス幅：</font></font><br>
<br>
<ul>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>&amp;#x03C9;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo>=</mo><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.761ex" height="2.259ex" viewBox="0 -755.5 2911 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-31" x="880" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-3D" x="1354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="2410" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ω</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-4">\omega _{1}=2</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>&amp;#x03C9;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>=</mo><mn>20</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.923ex" height="2.259ex" viewBox="0 -755.5 3411.5 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32" x="880" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-3D" x="1354" y="0"></use><g transform="translate(2410,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-30" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ω</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></mn></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二十</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-5">\omega _{2}=20</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>&amp;#x03C9;</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn></mrow></msub><mo>=</mo><mn>100</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.086ex" height="2.384ex" viewBox="0 -755.5 3912 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMATHI-3C9" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-33" x="880" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-3D" x="1354" y="0"></use><g transform="translate(2410,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/454240/&amp;usg=ALkJrhgWOWc99C_au8a91uQjWJqLD3roGA#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ω</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">３</font></font></mn></mrow></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-6">\omega _{3}=100</script></li>
</ul><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span>  numpy <span class="hljs-keyword">import</span>* 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg <font></font>
scg.set_default_wavelet(<span class="hljs-string">'cmor1-1.5'</span>)
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
<span class="hljs-comment">##    1  / </span>
ns   = <span class="hljs-number">1024</span><font></font>
time = arange(ns)<font></font>
scales = scg.periods2scales(arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>))
<span class="hljs-comment">#      </span>
s1=<span class="hljs-number">1</span>; s2=<span class="hljs-number">5</span>; s3=<span class="hljs-number">10</span>
events = [ns*<span class="hljs-number">0.1</span>, ns*<span class="hljs-number">0.3</span>, ns*<span class="hljs-number">0.7</span>]<font></font>
bumps = exp(-((time-events[<span class="hljs-number">0</span>])/s1)**<span class="hljs-number">2</span>) + exp(-((time-events[<span class="hljs-number">1</span>])/s2)**<span class="hljs-number">2</span>) + \<font></font>
        exp(-((time-events[<span class="hljs-number">2</span>])/s3)**<span class="hljs-number">2</span>) <font></font>
<font></font>
<span class="hljs-comment">#     </span>
w1=<span class="hljs-number">1</span>; w2=<span class="hljs-number">5</span>; w3= <span class="hljs-number">50</span>
steps = ((time &gt; events[<span class="hljs-number">0</span>]-w1) &amp; (time &lt; events[<span class="hljs-number">0</span>]+w1)) + \<font></font>
    ((time &gt; events[<span class="hljs-number">1</span>]-w2) &amp; (time &lt; events[<span class="hljs-number">1</span>]+w2)) + \<font></font>
    ((time &gt; events[<span class="hljs-number">2</span>]-w3) &amp; (time &lt; events[<span class="hljs-number">2</span>]+w3))<font></font>
<font></font>
<span class="hljs-comment">#  </span>
fig1, (ax1, ax2) = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">11</span>, <span class="hljs-number">2</span>)); <font></font>
ax1.set_title(<span class="hljs-string">"Bumps"</span>); ax2.set_title(<span class="hljs-string">"Steps"</span>)<font></font>
lines = ax1.plot(bumps); ax1.set_xlim(<span class="hljs-number">0</span>, len(time))<font></font>
lines = ax2.plot(steps); ax2.set_xlim(<span class="hljs-number">0</span>, len(time))<font></font>
fig1.tight_layout()<font></font>
<font></font>
<span class="hljs-comment">#  </span>
scales_bumps = scg.periods2scales(arange(<span class="hljs-number">1</span>, <span class="hljs-number">120</span>, <span class="hljs-number">2</span>) )<font></font>
fig2, (ax3, ax4) = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">3</span>));  <font></font>
ax3 = scg.cws(bumps, scales=scales_bumps, ax=ax3)<font></font>
ax4 = scg.cws(steps, scales=scales_bumps, ax=ax4)<font></font>
<span class="hljs-keyword">for</span> bmpw, stepw <span class="hljs-keyword">in</span> [(<span class="hljs-number">2</span>*s1, <span class="hljs-number">2</span>*w1), (<span class="hljs-number">2</span>*s2,<span class="hljs-number">2</span>*w2), (<span class="hljs-number">2</span>*s3, <span class="hljs-number">2</span>*w3)]:<font></font>
    ax3.plot(ax3.get_xlim(), bmpw*ones(<span class="hljs-number">2</span>), <span class="hljs-string">'w-'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
    ax4.plot(ax4.get_xlim(), stepw*ones(<span class="hljs-number">2</span>), <span class="hljs-string">'w-'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
fig2.tight_layout()<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/3l/ga/ke/3lgakegkiip9e9nxwyrdwcmkfsi.png"><br>
<br>
<img src="https://habrastorage.org/webt/lz/1z/n8/lz1zn8m1yjsy5pjkveiwc70oecc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
離散インパルスは、シアログラム上に円錐形の構造を作成します。これは、インフルエンスコーンとも呼ばれます。</font><font style="vertical-align: inherit;">滑らかなインパルス（ガウス）は実際のデータ構造に似ており、大規模に向かって広がる円錐を作成します。</font><font style="vertical-align: inherit;">水平方向のガイドラインは、ほぼ期間（2秒、10秒、20秒）に対応しています。</font><font style="vertical-align: inherit;">したがって、パルスは1周期の周期信号に似ています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6.ノイズ（サイアログラムにノイズを表示）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> numpy <span class="hljs-keyword">import</span>* 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">import</span> random<font></font>
scg.set_default_wavelet(<span class="hljs-string">'cmor1-1.5'</span>)
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
<span class="hljs-comment">#    1  / </span>
ns   = <span class="hljs-number">1024</span><font></font>
time =arange(ns)<font></font>
scales = scg.periods2scales( arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>) )<font></font>
noise =random.sample(range(ns), ns)<font></font>
<font></font>
<font></font>
fig1, ax1 = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">6.2</span>,<span class="hljs-number">2</span>));  <font></font>
ax1.set_title(<span class="hljs-string">"  "</span>)<font></font>
lines = ax1.plot(time, noise) <font></font>
ax1.set_xlim(<span class="hljs-number">0</span>, ns)<font></font>
fig1.tight_layout()<font></font>
<font></font>
ax2 = scg.cws(noise, scales=scales, figsize=(<span class="hljs-number">7</span>,<span class="hljs-number">2</span>))<font></font>
tight_layout()<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/qy/hu/lq/qyhulqiqtynyjwdfbakadzh4eog.png"><br>
<br>
<img src="https://habrastorage.org/webt/ad/gp/cl/adgpclbvaolajsneosnady6kr5a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、ノイズは要素のセットとして表示され、一部の不規則性は実際のデータのオブジェクトのように見える場合があるため、実際のデータを使用する場合は、注意して、必要に応じてノイズレベルを確認する必要があります。</font><font style="vertical-align: inherit;">プログラムが開始されるたびに、上のスケジュールは異なります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別な信号のウェーブレットスカログラム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyWaveletsデータベースには、研究と開発の両方に役立つ20の特別なウェーブレット変換信号が含まれています。</font><font style="vertical-align: inherit;">したがって、20個すべての信号のウェーブレット分析を実行できるリストを提供します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/env python</span>
<span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">import</span> pywt<font></font>
signals = pywt.data.demo_signal(<span class="hljs-string">'list'</span>)<font></font>
signal_length=<span class="hljs-number">1024</span>
<span class="hljs-keyword">for</span> signal <span class="hljs-keyword">in</span> signals:
    <span class="hljs-keyword">if</span> signal <span class="hljs-keyword">in</span> [<span class="hljs-string">'Gabor'</span>, <span class="hljs-string">'sineoneoverx'</span>]:<font></font>
        x = pywt.data.demo_signal(signal)<font></font>
    <span class="hljs-keyword">else</span>:<font></font>
        x = pywt.data.demo_signal(signal, signal_length)   <font></font>
    times=[]<font></font>
    signals=[]<font></font>
    <span class="hljs-keyword">for</span> time, sig <span class="hljs-keyword">in</span> enumerate(x.real):<font></font>
        times.append(time)<font></font>
        signals.append(sig)<font></font>
    scg.set_default_wavelet(<span class="hljs-string">'cmor1-1.5'</span>)<font></font>
    scales = scg.periods2scales( arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>) )<font></font>
    fig1, ax1 = subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">6.9</span>,<span class="hljs-number">2.9</span>));  <font></font>
    lines = ax1.plot(signals); <font></font>
    ax1.set_xlim(<span class="hljs-number">0</span>, len(times))<font></font>
    ax1.set_title(<span class="hljs-string">"%s"</span>%signal)<font></font>
    fig1.tight_layout()<font></font>
    ax2 = scg.cws(signals, scales=scales, figsize=(<span class="hljs-number">6.9</span>,<span class="hljs-number">2.9</span>)); <font></font>
    tight_layout()<font></font>
    show()</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドップラー信号のウェーブレット変換の結果を1つだけ示します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/bs/wo/prbsworf8jztubjhss5cq47bwzo.png"><br>
<br>
<img src="https://habrastorage.org/webt/ig/ry/ih/igryiht55ky8h-ne4pf4cgpvrf8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。最も一般的な種類の単純な信号と特殊な信号が考慮されるため、時系列分析のいくつかの問題を解決するためにスカログラムの使用に切り替えることができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウェーブレット時系列スカログラム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.米国1969-2008年のCDC出生率データ（出生率データには、年次スケールとそれより小さいスケールの両方の定期的な特徴が含まれています）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span><font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
fig = figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">2</span>))<font></font>
lines = plot(births.index, births.values/<span class="hljs-number">1000</span>, <span class="hljs-string">'-'</span>)<font></font>
xlim(datetime_lim)<font></font>
<font></font>
ylabel(<span class="hljs-string">"Nb of birthes [k]"</span>); title(<span class="hljs-string">"Total births per day in the US (CDC)"</span>);<font></font>
xlim = xlim()<font></font>
<font></font>
ax = scg.cws(births, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/f3/fh/1f/f3fh1fip-zi3iahsrcrsujbw6io.png"><br>
<br>
<img src="https://habrastorage.org/webt/ys/t-/76/yst-76_hoeaxymf8bkry0jy411i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
約7日の頻度で横線が表示されます。</font><font style="vertical-align: inherit;">高い値は、スケールの境界の近くに表示されます。これは、ウェーブレット処理の通常の動作です。</font><font style="vertical-align: inherit;">これらの効果は円錐形の影響としてよく知られているため、（オプションの）マスクがこの領域にオーバーレイされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.正規化（平均値の削除</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-births_normed = births-births.mean（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は必須です。それ以外の場合、データ境界は、多数の誤った円錐形の検出を作成するステージと見なされます）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span><font></font>
<font></font>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
ax = scg.cws(births_normed, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/83/0w/7v/830w7vhmgd4pnuwczktltgbhuq0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.振幅のスケールの変更（年次オブジェクトを表示するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">period2scales（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><font style="vertical-align: inherit;">て、Y軸に沿ったスケールを指定します）。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
scales = scg.periods2scales(np.arange(<span class="hljs-number">1</span>, <span class="hljs-number">365</span>+<span class="hljs-number">100</span>, <span class="hljs-number">3</span>))<font></font>
ax = scg.cws(births_normed, scales=scales, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">5</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>,<font></font>
            clim=(<span class="hljs-number">0</span>, <span class="hljs-number">2500</span>))<font></font>
set_x_yearly(ax, len(births))<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/40/jj/lv/40jjlvzp8zjkx9xgghb_5pj6h-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カラーマップ（Y軸）の振幅範囲は、clim =（0.2500）で設定されます。</font><font style="vertical-align: inherit;">振動振幅の正確な値はウェーブレットに依存しますが、実際の値のオーダーに近いままです。</font><font style="vertical-align: inherit;">これははるかに良く、今では年間の変動だけでなく、約6か月もよく見えます！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.対数目盛を使用する（小さい期間と大きい期間を同時に表示できるようにするには、Y軸で対数目盛を使用することをお勧めします。これは、xscale = logオプションを使用して実現されます。）</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
scales = scg.periods2scales(np.arange(<span class="hljs-number">1</span>, <span class="hljs-number">365</span>+<span class="hljs-number">100</span>, <span class="hljs-number">3</span>))<font></font>
ax = scg.cws(births_normed, scales=scales, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>, <font></font>
             clim=(<span class="hljs-number">0</span>,<span class="hljs-number">2500</span>), yscale=<span class="hljs-string">'log'</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
print(<span class="hljs-string">"Number of available days:"</span>, len(births_normed))<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/8d/fe/uc/8dfeuc1vt4flkoyih6glx9ss7e4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果ははるかに良いが、今周期の低い値の画素がYに沿って伸長される軸である。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スケールで均一な分布を得るために、対数目盛上の5均一な分布を（以下に示すように、期間値が均等に分散し、次いでスケール値に変換されなければならない:) ：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg 
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span><font></font>
<font></font>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
<span class="hljs-comment">#        log-Y-axis :-)</span>
scales = scg.periods2scales(np.logspace(np.log10(<span class="hljs-number">2</span>), np.log10(<span class="hljs-number">365</span>*<span class="hljs-number">3</span>), <span class="hljs-number">200</span>))<font></font>
<font></font>
<span class="hljs-comment">#  CWT  ,      </span><font></font>
cwt = scg.CWT(births_normed, scales=scales) <font></font>
<font></font>
ax  = scg.cws(cwt, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>, <font></font>
             clim=(<span class="hljs-number">0</span>,<span class="hljs-number">2500</span>), yscale=<span class="hljs-string">'log'</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
<font></font>
bboxf = dict(boxstyle=<span class="hljs-string">"round"</span>, facecolor=<span class="hljs-string">"y"</span>, edgecolor=<span class="hljs-string">"0.5"</span>)<font></font>
arrowpropsf = dict(facecolor=<span class="hljs-string">'yellow'</span>, shrink=<span class="hljs-number">0.05</span>)<font></font>
text = ax.annotate(<span class="hljs-string">"unusual\nfeature"</span>, xy=(<span class="hljs-number">365</span>*<span class="hljs-number">6</span>, <span class="hljs-number">15</span>), xytext=(<span class="hljs-number">365</span>*<span class="hljs-number">3</span>, <span class="hljs-number">50</span>), <font></font>
                   bbox=bboxf, arrowprops=arrowpropsf)<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/nn/sc/qi/nnscqiixwxx1vbxcbv7mir8lgrs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのスケールで信号の変化を確認できます。</font><font style="vertical-align: inherit;">サイアログラムは、同じ年の各年を示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6.タイムラインの一部を強調表示します（アーチファクトまたは欠落データを検索するためにタイムラインマーク間の中間データを確認します）。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg
<span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span><font></font>
<font></font>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
<span class="hljs-comment">#        log-Y-axis :-)</span>
scales = scg.periods2scales(np.logspace(np.log10(<span class="hljs-number">2</span>), np.log10(<span class="hljs-number">365</span>*<span class="hljs-number">3</span>), <span class="hljs-number">200</span>))
<span class="hljs-comment">#        log-Y-axis :-)</span><font></font>
cwt = scg.CWT(births_normed, scales=scales) <font></font>
<span class="hljs-comment">#    : 1974-1976</span><font></font>
<font></font>
fig = figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">4</span>))<font></font>
lines =plot(births.index, births.values/<span class="hljs-number">1000</span>, <span class="hljs-string">'-'</span>)<font></font>
xlim(pd.to_datetime(<span class="hljs-string">"1974-01-01"</span>), pd.to_datetime(<span class="hljs-string">"1976-01-01"</span>))<font></font>
ylabel(<span class="hljs-string">"Nb of birthes [k]"</span>); title(<span class="hljs-string">"Total births per day bw 1974 and 1976"</span>);<font></font>
<font></font>
<span class="hljs-comment">#     </span>
ax  = scg.cws(cwt, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>, <font></font>
             clim=(<span class="hljs-number">0</span>,<span class="hljs-number">2500</span>), yscale=<span class="hljs-string">'log'</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
xlim = ax.set_xlim( (<span class="hljs-number">1974</span><span class="hljs-number">-1969</span>)*<span class="hljs-number">365</span>, (<span class="hljs-number">1976</span><span class="hljs-number">-1969</span>)*<span class="hljs-number">365</span> )<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/i-/wd/uc/i-wducpridcu1ycejwjntcdcebk.png"><br>
<img src="https://habrastorage.org/webt/dj/zj/cz/djzjcz5rdiiw0t-uvyfzowcibve.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見すると、毎週のパターンは非常に均一に見えますが、クリスマスの日に何かが起こります。この期間をもう一度見てみましょう。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg
<span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
<span class="hljs-comment">#        log-Y-axis :-)</span>
scales = scg.periods2scales(np.logspace(np.log10(<span class="hljs-number">2</span>), np.log10(<span class="hljs-number">365</span>*<span class="hljs-number">3</span>), <span class="hljs-number">200</span>))
<span class="hljs-comment">#        log-Y-axis :-)</span><font></font>
cwt = scg.CWT(births_normed, scales=scales) <font></font>
<span class="hljs-comment"># :  1975    1976 </span>
fig = figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">4</span>))<font></font>
lines = plot(births.index, births.values/<span class="hljs-number">1000</span>, <span class="hljs-string">'.-'</span>)<font></font>
xlim(pd.to_datetime(<span class="hljs-string">"1974-12-01"</span>), pd.to_datetime(<span class="hljs-string">"1975-02-01"</span>))<font></font>
ylabel(<span class="hljs-string">"Nb of birthes [k]"</span>); title(<span class="hljs-string">"Total births per day : 2 monthes zoom"</span>);<font></font>
<font></font>
<span class="hljs-comment">#     </span>
ax  = scg.cws(cwt, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>, <font></font>
             clim=(<span class="hljs-number">0</span>,<span class="hljs-number">2500</span>), yscale=<span class="hljs-string">'log'</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
xlim = ax.set_xlim( (<span class="hljs-number">1975</span><span class="hljs-number">-1969</span>)*<span class="hljs-number">365</span><span class="hljs-number">-30</span>, (<span class="hljs-number">1975</span><span class="hljs-number">-1969</span>)*<span class="hljs-number">365</span>+<span class="hljs-number">30</span> )<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/fx/ks/kp/fxkskpcbci6rcfbfta9ibyltg3w.png"><br>
<br>
<img src="https://habrastorage.org/webt/2w/bo/jp/2wbojp4_gv7rebff34gmej_37qc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが年末の影響であることは明らかです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クリスマス：25年12月23日、25日は出産数が異常に少なく、今日は週次スケジュールから外れています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12月のデータがあります。これは、1月1日と2日に影響を受けた日付に何らかの値が存在することと一致しています。これらの日付では、通常、個人的なイベントは少なくなります。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7.合成（シアログラムは正規化されたデータから構築され、すべてのスケールで読みやすくなります）：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np 
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg
<span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()<font></font>
<font></font>
<span class="hljs-comment">#         </span>
<span class="hljs-comment">#    'cmor1-1.5'</span>
<span class="hljs-comment">#scg.set_default_wavelet('cmor1-1.5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau5')</span>
<span class="hljs-comment">#scg.set_default_wavelet('cgau1')</span>
<span class="hljs-comment">#scg.set_default_wavelet('shan0.5-2')</span>
<span class="hljs-comment">#scg.set_default_wavelet('mexh')</span>
df = pd.read_csv(<span class="hljs-string">"births.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
df = df[(df.day&gt;=<span class="hljs-number">1</span>) &amp; (df.day&lt;=<span class="hljs-number">31</span>) &amp; (df.births.values &gt; <span class="hljs-number">1000</span>)]<font></font>
<font></font>
<span class="hljs-comment">#  </span>
datetime = pd.to_datetime(df[[<span class="hljs-string">'year'</span>, <span class="hljs-string">'month'</span>, <span class="hljs-string">'day'</span>]], errors=<span class="hljs-string">'coerce'</span>)<font></font>
df.insert(<span class="hljs-number">0</span>, <span class="hljs-string">'datetime'</span>, datetime)<font></font>
<font></font>
datetime_lim = [ df.datetime.min(), df.datetime.max() ] <font></font>
years_lim = [ df.datetime.min().year, df.datetime.max().year ]<font></font>
births = df[[<span class="hljs-string">'datetime'</span>, <span class="hljs-string">'births'</span>]].groupby(<span class="hljs-string">'datetime'</span>).sum().squeeze()
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_x_yearly</span>(<span class="hljs-params">ax, days, start_year=<span class="hljs-number">1969</span></span>):</span>
    xlim  = (np.round([<span class="hljs-number">0</span>, days]) / <span class="hljs-number">365</span>).astype(np.int32)<font></font>
    ticks = np.arange(xlim[<span class="hljs-number">0</span>], xlim[<span class="hljs-number">1</span>])<font></font>
    ax.set_xticks(ticks*<span class="hljs-number">365</span>)<font></font>
    ax.set_xticklabels(start_year + ticks)<font></font>
<font></font>
<font></font>
births_normed = births-births.mean()<font></font>
<span class="hljs-comment">#        log-Y-axis :-)</span>
scales = scg.periods2scales(np.logspace(np.log10(<span class="hljs-number">2</span>), np.log10(<span class="hljs-number">365</span>*<span class="hljs-number">3</span>), <span class="hljs-number">200</span>))
<span class="hljs-comment">#        log-Y-axis :-)</span><font></font>
cwt = scg.CWT(births_normed, scales=scales) <font></font>
ax  = scg.cws(cwt, figsize=(<span class="hljs-number">13.2</span>, <span class="hljs-number">4</span>), xlabel=<span class="hljs-string">"Year"</span>, ylabel=<span class="hljs-string">"Nb of Day"</span>, <font></font>
             clim=(<span class="hljs-number">0</span>,<span class="hljs-number">2500</span>), yscale=<span class="hljs-string">'log'</span>)<font></font>
set_x_yearly(ax, len(births))<font></font>
<font></font>
bbox = dict(boxstyle=<span class="hljs-string">"round"</span>, facecolor=<span class="hljs-string">"w"</span>, edgecolor=<span class="hljs-string">"0.5"</span>)<font></font>
bbox2 = dict(boxstyle=<span class="hljs-string">"round"</span>, facecolor=<span class="hljs-string">"y"</span>, edgecolor=<span class="hljs-string">"0.5"</span>)<font></font>
arrowprops = dict(facecolor=<span class="hljs-string">'white'</span>, shrink=<span class="hljs-number">0.05</span>)<font></font>
arrowprops2 = dict(facecolor=<span class="hljs-string">'yellow'</span>, shrink=<span class="hljs-number">0.05</span>)
<span class="hljs-keyword">for</span> period, label <span class="hljs-keyword">in</span> [ (<span class="hljs-number">3.5</span>, <span class="hljs-string">"half a week"</span>), (<span class="hljs-number">7</span>, <span class="hljs-string">"one week"</span>), (<span class="hljs-number">365</span>/<span class="hljs-number">2</span>, <span class="hljs-string">"half a year"</span>), <font></font>
                      (<span class="hljs-number">365</span>, <span class="hljs-string">"one year"</span>), (<span class="hljs-number">365</span>*<span class="hljs-number">2.8</span>, <span class="hljs-string">"long trends"</span>)]:<font></font>
    text = ax.annotate(label, xy=(<span class="hljs-number">365</span>*<span class="hljs-number">5.5</span>, period), xytext=(<span class="hljs-number">365</span>*<span class="hljs-number">2</span>, period), <font></font>
                       bbox=bbox, arrowprops=arrowprops)<font></font>
text = ax.annotate(<span class="hljs-string">"end of year\neffect"</span>, xy=(<span class="hljs-number">365</span>*<span class="hljs-number">6</span>, <span class="hljs-number">15</span>), xytext=(<span class="hljs-number">365</span>*<span class="hljs-number">3</span>, <span class="hljs-number">50</span>), <font></font>
                   bbox=bbox2, arrowprops=arrowprops2)<font></font>
text = ax.annotate(<span class="hljs-string">"increase in\nvariations *amplitude*"</span>, xy=(<span class="hljs-number">365</span>*<span class="hljs-number">18.5</span>, <span class="hljs-number">7</span>), xytext=(<span class="hljs-number">365</span>*<span class="hljs-number">14</span>, <span class="hljs-number">50</span>), <font></font>
                   bbox=bbox2, arrowprops=arrowprops2)<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/96/w4/of/96w4oftizpwwzk0ltfek2jdnm64.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CWTは、短期間に多くの情報を明らかにし</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。病院の習慣を示す週ごとの変動は、数十年にわたって存在しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
80年代には、病院の労働習慣の変化、出生率の変化、または単純な人口の変化によって引き起こされる可能性のある週次指標の増加がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
後半の半年バンドは明らかに第2高調波です。</font><font style="vertical-align: inherit;">年間の変動が非常に強いため、3か月から1か月のゾーンにファジーパターンが表示されます。これは、3次高調波が原因である可能性があります。</font><font style="vertical-align: inherit;">また、休暇が出生率に及ぼす影響によって引き起こされる可能性があり、さらに調査が必要になる場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
年末の影響はクリスマスと1月1日に認められた。</font><font style="vertical-align: inherit;">これは、別の周波数方法では見えないままであった可能性があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果：</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この出版物では、信号の変化の基本的な形式がスカログラムにどのように変換されるかを見ました。次に、時間順のデータセットの例を使用して、CWTが標準データにどのように適用されるかを段階的に説明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の手法は、ネットワークトラフィックを分析し、オブジェクトの異常な動作を検出するために拡張できます。 CWTは、ニューラルネットワークへの入力としてますます使用される強力なツールであり、異常を分類または検出する新しい関数を作成するために使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各例は独立したプログラムとして実装されているため、前の例と次の例を深く掘り下げることなく、タスクの例を選択できます。</font><font style="vertical-align: inherit;">ユーザーは、任意のウェーブレットを試すことができます。たとえば、mexhやgaus5など、各プログラムの最初に指定されたリストからの機能です。</font><font style="vertical-align: inherit;">例1、それぞれ：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wm/eq/-c/wmeq-co9bi_nfpvrrbncf5bridw.png"><br>
<br>
<img src="https://habrastorage.org/webt/qv/mi/ca/qvmicaco6aoj4bi5zmfwyo9pydm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PSリストの実用的な使用のために、それらで使用されているモジュールのバージョンを示します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> scaleogram; print(scaleogram .__version__)
<span class="hljs-number">0.9</span><span class="hljs-number">.5</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pandas; print(pandas .__version__)
<span class="hljs-number">0.24</span><span class="hljs-number">.1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> numpy; print(numpy .__version__)
<span class="hljs-number">1.16</span><span class="hljs-number">.1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span>  matplotlib; print(matplotlib .__version__)
<span class="hljs-number">3.0</span><span class="hljs-number">.2</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* .csvファイル内の独立したデータセットの場合、データ構造（1つの列）を示します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
年、月、日、性別、出生</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1969,1,1、F、4046 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1969,1,1、M、4440 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1969,1,2 、F、4454 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1969、1、2、M、4548 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン0.24.1パンダの場合、matplotlibコンバーターを明示的に登録する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンバーターを登録するには：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> register_matplotlib_converters<font></font>
register_matplotlib_converters()</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454224/index.html">Okkoでの推奨事項：いくつかの行列を掛け合わせて数億ドルを稼ぐ方法</a></li>
<li><a href="../ja454226/index.html">円筒磁区の記憶。パート1.仕事の原則</a></li>
<li><a href="../ja454232/index.html">グラフィカルプログラミング言語でのOOP。パート2 MOSとOOP</a></li>
<li><a href="../ja454236/index.html">ANKIが外国語の学習と面接の準備にどのように役立つかについての2つのストーリー</a></li>
<li><a href="../ja454238/index.html">マーヴィン・ミンスキー「The Emotion Machine」（ハブラ訳、第2ラウンド）</a></li>
<li><a href="../ja454242/index.html">「ほら、なんてジェットパックなんだ！」「あ、なんてロケットだ！」（ロケット選手権からのメモ）</a></li>
<li><a href="../ja454246/index.html">Unity3d GUIで使用されるさまざまな座標</a></li>
<li><a href="../ja454248/index.html">人工知能の時代の農奴</a></li>
<li><a href="../ja454252/index.html">有名な組織のWebリソースでさえ、子供の過ちから保護されていません。</a></li>
<li><a href="../ja454254/index.html">PowerShellでReverse socks5プロキシを作成します。パート3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>