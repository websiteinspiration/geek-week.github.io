<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>❓ 🔧 🌙 CarGISの下で2GISをどのように起動したのか 👨🏽‍🏫 👨🏻‍⚖️ 🧝🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！私の名前はヴァンヤです。iOS用の2GISモバイルアプリケーションを書いています。今日は、ナビゲーターがCarPlayにどのように登場したかについてのストーリーがあります。このようなドキュメントと未完成のツールを使用して、実用的な製品を作成し、AppStoreに配置した方法を説明します。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CarGISの下で2GISをどのように起動したのか</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/452638/"><p><img src="https://habrastorage.org/webt/tt/jg/a3/ttjga3qmefdwknrbj1i351exs3m.jpeg"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは！</font><font style="vertical-align: inherit;">私の名前はヴァンヤです。iOS用の2GISモバイルアプリケーションを書いています。</font><font style="vertical-align: inherit;">今日は、ナビゲーターがCarPlayにどのように登場したかについてのストーリーがあります。</font><font style="vertical-align: inherit;">このようなドキュメントと未完成のツールを使用して、実用的な製品を作成し、AppStoreに配置した方法を説明します。</font></font></p><a name="habracut"></a><br>
<h2 id="para-slov-o-carplay"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CarPlayについて一言</font></font></h2><br>
<p><img src="https://habrastorage.org/webt/hq/vu/xw/hqvuxwo3ms1ivfppuaojrfscvh0.jpeg"></p><br>
<p>        CarPlay  ,        .</p><br>
<p>CarPlay —      ,        .  ,  CarPlay —          ;    ; -, -,     .</p><br>
<p>          (    extension’!)   :    ,       ,    iOS.</p><br>
<p> WWDC 2018 Keynote        CarPlay,    .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>     CarPlay.     ,      .</p><br>
<p>     Apple,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,     sample- CountryRoads     CarPlay.framework.             CarPlay,  ,     CarPlay-      background. </p><br>
<h2 id="pervaya-palka-v-kolyosa">   </h2><br>
<p>   background’  .     :</p><br>
<ol>
<li>    background’. -         .</li>
<li>    OpenGL (, deprecated, ,  Metal,    ),  OpenGL  background state’  .       ,    — .</li>
</ol><br>
<p>   background’    ,       - . -        MKMapView.             Apple, :    MKMapView,    Apple.</p><br>
<p>  ,  MKMapView     .  —      .      ,    .  GitHub <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>  .</p><br>
<h2 id="otvet-ot-apple">  Apple</h2><br>
<p>    Apple,  ,    ,      « »,  sample- CountryRoads (    WWDC) ,  ,  capability- <code>com.apple.developer.carplay-maps</code>.     entitlements-   YES,   ,       CarPlay    .</p><br>
<p>       ,    Xcode Beta.    2  .   sample- CoutryRoads    . </p><br>
<p>     CarPlay,        :</p><br>
<p><img src="https://habrastorage.org/webt/3p/xn/rf/3pxnrf5dlvtq7n8qkuovquqgbbi.png"></p><br>
<p>       : <code>defaults write com.apple.iphonesimulator CarPlayExtraOptions -bool YES</code></p><br>
<p> -     —          800×480    ×2.         .</p><br>
<p>  sample-   ,   ,   .<br>
,   :    CarPlay    base view  templates. </p><br>
<p><img src="https://habrastorage.org/webt/hf/t2/rw/hft2rwp8m2d71popp3tus4dif20.jpeg"></p><br>
<p>Base view —   .       ,     .</p><br>
<p>Templates —       UI-   , ,     .</p><br>
<h2 id="razrabotka-bety"> </h2><br>
<p>    . ,   , —     CPApplicationDelegate   ApplicationDelegate.</p><br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(
   <span class="hljs-number">_</span> application: UIApplication,
   didConnectCarInterfaceController controller: CPInterfaceController,
   to window: CPWindow
)</span></span> {}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(
  <span class="hljs-number">_</span> application: UIApplication,
  didDisconnectCarInterfaceController controller: CPInterfaceController,
  from window: CPWindow
)</span></span> {}</code></pre><br>
<p>  :</p><br>
<p> UIApplication  .<br>
CPWindow —  UIWindow,       .<br>
CPInterfaceController — -   UINavigationController’,   CarPlay.framework.</p><br>
<p>     .</p><br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(
   <span class="hljs-number">_</span> application: UIApplication,
   didConnectCarInterfaceController controller: CPInterfaceController,
   to window: CPWindow
)</span></span> {
  <span class="hljs-keyword">let</span> carMapViewController = <span class="hljs-type">CarMapViewController</span>(<font></font>
    interfaceController: controller<font></font>
  )<font></font>
  <span class="hljs-keyword">let</span> navigationController = <span class="hljs-type">UINavigationController</span>(<font></font>
    rootViewController: carMapViewController<font></font>
  )<font></font>
  window.rootViewController = navigationController<font></font>
}</code></pre><br>
<p> didConnect   ,   ,      didFinishLaunching. CarMapViewController —  base view (   ,  ),   .</p><br>
<p>      :</p><br>
<p><img src="https://habrastorage.org/webt/vv/l1/xx/vvl1xxebjbdb9ahiuucw1db_rzg.png"></p><br>
<p>-      ,    Xcode new build system    ,  , -  2  .</p><br>
<p>  Xcode,  legacy (  stable,     ) build system,    : 2 .</p><br>
<p>   capability-,   2  CarPlay          background.   ,   Apple     background-, ,   ,   contentView  UIAlertView,    UIAlertView  deprecated.</p><br>
<p>,     ,      MKMapView.           .</p><br>
<h2 id="problema-odnoy-karty">  </h2><br>
<p>      ,   CarPlay   ,      : -       .<br>
    ,     .</p><br>
<p>    2  CarPlay     -  .          -   (   , ).        CarPlay           CarPlay .   , ,      .</p><br>
<p>,   ,   ,           ,   MVP.</p><br>
<h2 id="kontroly-na-karte">  </h2><br>
<p>,       .           :  ,     .</p><br>
<p><img src="https://habrastorage.org/webt/c2/ql/u8/c2qlu8wi-sbkh5zizb7mjab-n7w.png"></p><br>
<p>     ,            UIControl.    ,  base view   .</p><br>
<p> ,       ,       sample-.       — CPMapTemplate.</p><br>
<p><img src="https://habrastorage.org/webt/5d/xn/26/5dxn263mlspdif8eqhxgc8wjgmc.png"></p><br>
<p>CPMapTemplate —           navigationBar’.     :</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> mapTemplate = <span class="hljs-type">CPMapTemplate</span>()
<span class="hljs-keyword">self</span>.interfaceController.setRootTemplate(mapTemplate, animated: <span class="hljs-literal">false</span>)</code></pre><br>
<p>         .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> zoomInButton = <span class="hljs-type">CPMapButton</span>(…)
<span class="hljs-keyword">let</span> zoomOutButton = <span class="hljs-type">CPMapButton</span>(…)
<span class="hljs-keyword">let</span> myLocationButton = <span class="hljs-type">CPMapButton</span>(…)<font></font>
<font></font>
<span class="hljs-keyword">self</span>.mapTemplate.mapButtons = [<font></font>
  zoomInButton, <font></font>
  zoomOutButton, <font></font>
  myLocationButton<font></font>
]</code></pre><br>
<p>  mapButtons   ,       ,           .    ,     .</p><br>
<p>   ,     ,      : </p><br>
<pre><code class="plaintext hljs">Navigation apps are designed to work with a variety of car input devices, and CarPlay does not support direct user interaction in the base view (apps do not directly receive tap or drag events). </code></pre><br>
<p>,  ,   ,     sample- CountryRoads.  —    :</p><br>
<p><img src="https://habrastorage.org/webt/o0/wa/v6/o0wav6ogb8ofbx7-xqxsamjd6g4.png"></p><br>
<p>  ,  - ,     , ?</p><br>
<p>        ,          «»    navigationBar’.</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> panButton = <span class="hljs-type">CPBarButton</span>(…)
<span class="hljs-keyword">self</span>.mapTemplate.leadingNavigationBarButtons = [panButton]
<span class="hljs-keyword">self</span>.mapTemplate.trailingNavigationBarButtons = []</code></pre><br>
<p>   leadingNavigationBarButtons  trailingNavigationBarButtons     :      ,     .       .</p><br>
<p>         :</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">self</span>.mapTemplate.showPanningInterface(animated: <span class="hljs-literal">true</span>)
<span class="hljs-keyword">self</span>.mapTemplate.dismissPanningInterface(animated: <span class="hljs-literal">true</span>)</code></pre><br>
<h2 id="postroenie-i-otobrazhenie-marshrutov-na-karte">     </h2><br>
<p>    ,     API    .</p><br>
<p>    ,    ,         .     ,    —     .</p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><pre><code class="swift hljs"><span class="hljs-keyword">let</span> choice0 = <span class="hljs-type">CPRouteChoice</span>(<font></font>
  summaryVariants: [<span class="hljs-string">"46 "</span>],<font></font>
  additionalInformationVariants: [<span class="hljs-string">"  "</span>],<font></font>
  selectionSummaryVariants: [<span class="hljs-string">"1  7 "</span>]<font></font>
)<font></font>
<span class="hljs-keyword">let</span> choice1 = <span class="hljs-type">CPRouteChoice</span>(<font></font>
   summaryVariants: [<span class="hljs-string">"46 "</span>],<font></font>
   additionalInformationVariants: [<span class="hljs-string">"  "</span>],<font></font>
   selectionSummaryVariants: [“<span class="hljs-number">1</span>  <span class="hljs-number">11</span> <span class="hljs-string">"]
)

let startItem = MKMapItem(…)
let endItem = MKMapItem(…)
endItem.name = "</span>,  ”<font></font>
<font></font>
<span class="hljs-keyword">let</span> trip = <span class="hljs-type">CPTrip</span>(<font></font>
   origin: startItem,<font></font>
   destination: endItem,<font></font>
   routeChoices: [choice0, choice1]<font></font>
)<font></font>
<font></font>
<span class="hljs-keyword">let</span> tripPreviewTextConfiguration = <span class="hljs-type">CPTripPreviewTextConfiguration</span>(<font></font>
   startButtonTitle: <span class="hljs-string">" ”,
   additionalRoutesButtonTitle: “”,
   overviewButtonTitle: "</span><span class="hljs-string">"
)

self.mapTemplate.showTripPreviews(
  [trip],
  textConfiguration: tripPreviewTextConfiguration
)</span></code></pre></div></div><br>
<p>       :</p><br>
<p><img src="https://habrastorage.org/webt/wi/on/5r/wion5rbc8wx75tqwxzn-x72zsqw.png"></p><br>
<h2 id="rezhim-navigacii"> </h2><br>
<p> —  ,        .   ,   :</p><br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mapTemplate</span><span class="hljs-params">(
  <span class="hljs-number">_</span> mapTemplate: CPMapTemplate,
  startedTrip trip: CPTrip,
  using routeChoice: CPRouteChoice
)</span></span> {
   <span class="hljs-keyword">self</span>.navigationSession = 
       <span class="hljs-keyword">self</span>.mapTemplate.startNavigationSession(<span class="hljs-keyword">for</span>: trip)<font></font>
}</code></pre><br>
<p>CPNavigationSession — ,       UI-,     .</p><br>
<p>  , :</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> maneuver = <span class="hljs-type">CPManeuver</span>()<font></font>
maneuver.symbolSet = <span class="hljs-type">CPImageSet</span>(<font></font>
  lightContentImage: icon, <font></font>
  darkContentImage: darkIcon<font></font>
)<font></font>
maneuver.instructionVariants = [<span class="hljs-string">". "</span>]<font></font>
maneuver.initialTravelEstimates = <span class="hljs-type">CPTravelEstimates</span>(…)<font></font>
<font></font>
<span class="hljs-keyword">self</span>.navigationSession?.upcomingManeuvers = [maneuver]</code></pre><br>
<p>        :</p><br>
<p><img src="https://habrastorage.org/webt/30/uj/tp/30ujtpqhaaqkgx1oon7mjxpxiq8.png"></p><br>
<p>    , :</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> estimates = <span class="hljs-type">CPTravelEstimates</span>(…)
<span class="hljs-keyword">self</span>.navigationSession?.updateEstimates(estimates, <span class="hljs-keyword">for</span>: maneuver)</code></pre><br>
<h2 id="it-just-works">It just works!</h2><br>
<p>      ,        .  :    ,       .</p><br>
<p>         CarPlay.  ,  ,  .</p><br>
<p><img src="https://habrastorage.org/webt/wz/2-/cj/wz2-cjj1rusmnd270gkr5h8tdj0.jpeg" alt="パイオニアAVH-Z500BT"></p><br>
<h3 id="provision-profiles">Provision Profiles</h3><br>
<p>-   capability-   .        ,  Xcode   .       .</p><br>
<pre><code class="plaintext hljs">Code Signing Error: Automatic signing is unable to resolve an issue with the "v4ios" target's entitlements. Automatic signing can't add the com.apple.developer.carplay-maps entitlement to your provisioning profile. Switch to manual signing and resolve the issue by downloading a matching provisioning profile from the developer website.</code></pre><br>
<p>     CI,          enterprise-,           CarPlay.      </p><br>
<h3 id="debugging">Debugging</h3><br>
<p>  CarPlay   Bluetooth  Lightning.  ,     .    Bluetooth  ,       Wi-Fi .       ,  hello world,   ,   .</p><br>
<div class="spoiler"><b class="spoiler_title">  ,   , :</b><div class="spoiler_text"><p>      ,   ,    CarPlay,  Wi-Fi,        .<br>
      3 ,                  15. </p></div></div><br>
<p>     ,  Apple    DevKit ( Apple-way, it just works    ).         .        -  —    ,   . ,       ,   .</p><br>
<h2 id="the-best-framework-we-ever-made">The best framework we ever made</h2><br>
<p>  ,      ,  ,   «2  CarPlay»  .     .</p><br>
<h3 id="problemy-s-vyuportom">  </h3><br>
<p>    ,        ,    .  ,     :</p><br>
<p><img src="https://habrastorage.org/webt/ns/-k/gw/ns-kgwhubcu9cdqybc4nierpkqe.png"></p><br>
<p> :</p><br>
<p><img src="https://habrastorage.org/webt/tl/sg/i3/tlsgi347mdeagljpg7i8ojxcjxc.png"></p><br>
<p> ,   - layoutGuide    .     navigationBar,    ,    .      .    ,   ,        :</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> routeControlsWidth = <span class="hljs-keyword">self</span>.view.frame.width * <span class="hljs-number">0.48</span> 
<span class="hljs-keyword">let</span> zoomControlWidth = <span class="hljs-keyword">self</span>.view.frame.width * <span class="hljs-number">0.15</span></code></pre><br>
<h3 id="postroenie-proezda-ne-tolko-mezhdu-dvumya-tochkami">      </h3><br>
<p>       ,   CPGridTemplate: </p><br>
<p><img src="https://habrastorage.org/webt/co/ri/ec/coriec6zvpz0pg5uy72kontsmc8.png"></p><br>
<p>  /  CPListTemplate. </p><br>
<p><img src="https://habrastorage.org/webt/mh/iu/le/mhiulexz-l0j4snzfhdx8pvx8pa.png"></p><br>
<p>    CPSearchTemplate: </p><br>
<p><img src="https://habrastorage.org/webt/gj/jp/co/gjjpcobjxxf3q_u3gdcoscfclda.png"></p><br>
<p>      ,           (  -).</p><br>
<div class="spoiler"><b class="spoiler_title">  ,        .</b><div class="spoiler_text"><p>CPInterfaceController   ,   UIKit. . .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">self</span>.interfaceController.pushTemplate(listTemplate, animated: <span class="hljs-literal">true</span>)
<span class="hljs-keyword">self</span>.interfaceController.presentTemplate(alertTemplate, animated: <span class="hljs-literal">true</span>)</code></pre><br>
<p>    ,  CPAlertTemplate,     ,  CPAlertTemplate     .</p><br>
<p>,  Apple      ,     :</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">self</span>.interfaceController.showTemplate(listTemplate, animated: <span class="hljs-literal">true</span>)</code></pre><br>
<p>      CPTemplate,    UIKit.</p><br>
<p> , ,      ,    :</p><br>
<pre><code class="plaintext hljs">Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unsupported object &lt;YourAwesomeGridTemplate: 0x60000060dce0&gt; &lt;identifier: 6CAC7E3B-FE70-43FC-A8B1-8FC39334A61D, userInfo: (null)&gt; passed to pushTemplate:animated:. Allowed classes: {(<font></font>
    CPListTemplate,<font></font>
    CPGridTemplate,<font></font>
    CPSearchTemplate,<font></font>
    CPMapTemplate<font></font>
)}’</code></pre></div></div><br>
<h3 id="testirovanie-i-bagi">  </h3><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">artemenko-a-a</a>.    ,   ,       .</p><br>
<p>  ,      CarPlay-    Watchdog —   .  syslogs ,   .     ,     ,    .</p><br>
<p>      ,    .   ,   didDisconnect  CPApplicationDelegate       CarPlay.              .  ,     ,           .</p><br>
<p> ,    iOS,     ,     ,     CarPlay. </p><br>
<p><img src="https://habrastorage.org/webt/nh/3v/tc/nh3vtc2h-zlu5jutajc6-oyoca4.jpeg"></p><br>
<p>     radar (    ).      - ,          ,    radar.</p><br>
<p> Apple    ,    ,      .</p><br>
<p>   ,      CarPlay   Lightning.  ,      ,      .   ,         ,        CarPlay.</p><br>
<p> ,      .    ,   ! </p><br>
<p><img src="https://habrastorage.org/webt/ql/1h/j0/ql1hj02fnqottbo5fstubt65pss.jpeg"></p><br>
<p> ,       :  Apple       iOS.</p><br>
<h2 id="istoriya-dvuh-redzhektov">  </h2><br>
<p><strong> </strong>    .    ,      ( release notes)    ,    CarPlay.    ,   review guideline’,     Google Maps   .     (    ,   ),    Release Notes  Description     .</p><br>
<p><strong> </strong>  -  .  2     —  - .      .</p><br>
<p>       CarPlay,    ,    .     .   :   ,   ,    . </p><br>
<p><img src="https://habrastorage.org/webt/uf/t7/rx/uft7rxuuaqu7ape9ehifdi6r6ki.png"></p><br>
<h2 id="to-o-chyom-nelzya-govorit">,    </h2><br>
<h3 id="peremeschenie-karty-zhestami">  </h3><br>
<p>        CarPlay  Google Maps —         .  API,  ,  !   Google       ,   .   :</p><br>
<pre><code class="plaintext hljs">Navigation apps are designed to work with a variety of car input devices, and CarPlay does not support direct user interaction in the base view (apps do not directly receive tap or drag events). </code></pre><br>
<p>  -     ,      ,      CarPlay Navigation Apps  .     -  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Apple</a>.</p><br>
<p>    ,  ,    .   ,   -   .  ,    ,  ,   , —  CarPlay.framework    .h .</p><br>
<p>  !    CPMapTemplate’   CPMapTemplateDelegate,    3 ,      ,    ,       .</p><br>
<div class="spoiler"><b class="spoiler_title">3 </b><div class="spoiler_text"><p>/*<em>Called when a pan gesture begins. May not be called when connected to some CarPlay systems.<br>
</em>/<br>
optional public func mapTemplateDidBeginPanGesture(_ mapTemplate: CPMapTemplate)</p><br>
<p>/*<em>Called when a pan gesture changes. May not be called when connected to some CarPlay systems.<br>
</em>/<br>
optional public func mapTemplate(_ mapTemplate: CPMapTemplate, didUpdatePanGestureWithTranslation translation: CGPoint, velocity: CGPoint)</p><br>
<p>/*<em>Called when a pan gesture ends. May not be called when connected to some CarPlay systems.<br>
</em>/<br>
optional public func mapTemplate(_ mapTemplate: CPMapTemplate, didEndPanGestureWithVelocity velocity: CGPoint<br>
)</p></div></div><br>
<p>        —   .   ,  ,       ,   ,    .  ,    !</p><br>
<p> : CarPlay-   ,  ,   pan-.  ,  UIPanGestureRecognizer’   10 .</p><br>
<h3 id="neodinakovost-ui-na-raznyh-magnitolah"> UI   </h3><br>
<p>    :        ,      . ,  ,        .  :</p><br>
<p><img src="https://habrastorage.org/webt/_t/k7/u6/_tk7u6wbcv55zig2n-b1dlbm9hu.png"></p><br>
<p>     UI CPSearchTemplate,    .      ,     ,         .</p><br>
<h3 id="kontrol-ogranicheniya-skorosti">  </h3><br>
<p>     ,    CarPlay             .        .  , ,  . </p><br>
<p>  :  ? </p><br>
<p>   .h   CPWindow,    layoutGuide:<br>
var mapButtonSafeAreaLayoutGuide: UILayoutGuide</p><br>
<p>   ,  .     :</p><br>
<p><img src="https://habrastorage.org/webt/vo/m7/qw/vom7qwpkpnxqf9a7wk6arc8-gtm.png"></p><br>
<p><img src="https://habrastorage.org/webt/q7/kq/fh/q7kqfhk7rrtwdzmergpd9yobbz0.png"></p><br>
<p>  : , , ?</p><br>
<p>  ,      base view.  base view        ,  :</p><br>
<pre><code class="plaintext hljs">The base view is where the map is drawn. The base view must be used exclusively to draw a map, and may not be used to display other UI elements. Instead, navigation apps overlay UI elements such as the navigation bar and map buttons using the provided templates. </code></pre><br>
<p>     AppStore,   ,   ,  - .</p><br>
<h3 id="golosovoy-poisk"> </h3><br>
<p><img src="https://habrastorage.org/webt/di/tt/ov/dittovwssqwrbku8rfd7fxpqlqo.png"></p><br>
<p><img src="https://habrastorage.org/webt/td/co/z-/tdcoz-1fk1-x880os0muqc_2iso.png"></p><br>
<p>-,        ,        ,       CarPlay.       ,  .</p><br>
<p><strong> : .</strong>   ,   CPVoiceControlTemplate     .             ,     .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>...<span class="hljs-number">12</span> {
   <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> image = <span class="hljs-type">UIImage</span>(named: <span class="hljs-string">"carplay_searching_\(i)"</span>) {<font></font>
      images.append(image)<font></font>
   }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">let</span> image = <span class="hljs-type">UIImage</span>.animatedImage(with: images, duration: <span class="hljs-number">0.96</span>)</code></pre><br>
<p>,   ,  ,       .</p><br>
<p><strong> : .</strong>            .     ,       ,         .  !</p><br>
<h3 id="pravorulnye-avtomobili"> .</h3><br>
<p>  ,   UI    !</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/e5c/b97/dc2/e5cb97dc248ebb9ffa0ff46147c290d7.jpg"></p><br>
<p>, ,    ,    ,    ,       .  «»  ,   ,  , ,        layoutGuide’   ,     . </p><br>
<p>    .  ,   .</p><br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> isLeftWheelCar = <span class="hljs-keyword">self</span>.speedControlViewController.view.frame.origin.x &gt; <span class="hljs-keyword">self</span>.view.frame.size.width / <span class="hljs-number">2.0</span></code></pre><br>
<p> ,    ,     .</p><br>
<p>    .        CarPlay, ,     .   ,    ,  Apple    .</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja452620/index.html">Typescriptを使用してアクションタイプを派生させる</a></li>
<li><a href="../ja452622/index.html">プログラマーのためのゲノミクス入門</a></li>
<li><a href="../ja452624/index.html">スプリングブートアクチュエータの概要</a></li>
<li><a href="../ja452628/index.html">カスタムボトムシート：仕組み</a></li>
<li><a href="../ja452630/index.html">バックアップ、パート2：rsyncベースのバックアップツールの概要とテスト</a></li>
<li><a href="../ja452642/index.html">群衆の強さ。シカゴがゴミを食べるロボットを開発した方法-川の掃除</a></li>
<li><a href="../ja452644/index.html">DevConf X Web開発者会議-6月21日</a></li>
<li><a href="../ja452646/index.html">ニューラルネットワークがブラックホールの最初の写真で見たもの</a></li>
<li><a href="../ja452648/index.html">PHP：複雑なXMLファイルを解析し、ネイティブコードで溺れさせない方法</a></li>
<li><a href="../ja452652/index.html">セキュリティウィーク21：Whatsappの穴、Intelプロセッサの新しい脆弱性、Windowsのゼロデイ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>