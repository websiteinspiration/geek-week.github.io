<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฎ ๐ด ๐ค๐พ VXLAN ูู NSX-V - ุทุจูุฉ ุณูููุฉ ูุถุทุฑุจุฉ ๐ถ ๐ ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุญูุฉ ุทูุจุฉ ูุฃููุง ูููุงุช ุตุบูุฑุฉ. ุฃุญุณุฏ ุงูุฒููุงุก ุฃุญูุงููุง ุนูู ุงูุนูู ุนู ุจูุนุฏ - ูู ุงูุฑุงุฆุน ุฃู ุฃููู ูุงุฏุฑูุง ุนูู ุงูุนูู ูู ุฃู ููุงู ูู ุงูุนุงูู ูุชุตู ุจุงูุฅูุชุฑูุช ุ ูุงูุนุทูุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>VXLAN ูู NSX-V - ุทุจูุฉ ุณูููุฉ ูุถุทุฑุจุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490792/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญูุฉ ุทูุจุฉ ูุฃููุง ูููุงุช ุตุบูุฑุฉ. ุฃุญุณุฏ ุงูุฒููุงุก ุฃุญูุงููุง ุนูู ุงูุนูู ุนู ุจูุนุฏ - ูู ุงูุฑุงุฆุน ุฃู ุฃููู ูุงุฏุฑูุง ุนูู ุงูุนูู ูู ุฃู ููุงู ูู ุงูุนุงูู ูุชุตู ุจุงูุฅูุชุฑูุช ุ ูุงูุนุทูุงุช ูู ุฃู ููุช ุ ูุงููุณุคูููุฉ ุนู ุงููุดุงุฑูุน ูุงูููุงุนูุฏ ุงูููุงุฆูุฉ ุ ูุนุฏู ุงูุชูุงุฌุฏ ูู ุงูููุชุจ ูู 8 ุฅูู 17. ูุณุชุจุนุฏ ุนููู ููุณุคูููุงุชู ุนููููุง ุฅููุงููุฉ ุงูุบูุงุจ ุงูุทููู ูู ูุฑูุฒ ุงูุจูุงูุงุช. ููุน ุฐูู - ุชุญุฏุซ ุญุงูุงุช ูุซูุฑุฉ ููุงูุชูุงู ูุซู ุงูุญุงูุฉ ุงูููุถุญุฉ ุฃุฏูุงู ูู ุญูู ูุขุฎุฑ ุ ูุฃูุง ุฃููู ุฃู ููุงู ููุงูู ููููุฉ ุญูุซ ููุฌุฏ ูุซู ูุฐุง ุงููุทุงู ููุชุนุจูุฑ ุงูุฅุจุฏุงุนู ุนู ุฃุฏุงุฉ ุญู ุงููุดููุงุช ุงูุฏุงุฎููุฉ.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฎูุงุก ูุณุคูููุฉ ุตุบูุฑ - ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุชูุฑูุฑ ุ ูู ูุชู ุญู ุงููุถูุฉ ุชูุงููุง ุ ูููู ูุธุฑูุง ูุณุฑุนุฉ ุงุณุชุฌุงุจุฉ ุงูุจุงุฆุนูู ุ ููุฏ ูุณุชุบุฑู ุงูุญู ุงููุงูู ุฃุดูุฑูุง ุ ูุฃุฑูุฏ ูุดุงุฑูุฉ ูุชุงุฆุฌู ุงูุขู. ุขูู ุ ุฃููุง ุงููุฑุงุก ุงูุฃุนุฒุงุก ุ ุฃู ุชุบูุฑ ูู ูุฐุง ุงูุชุณุฑุน. ููู ูุง ูููู ูู ุงููุงุก - ูุงุฐุง ุนู ุงูุญุงูุฉุ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุฏูุฉ ุงูุฃููู: ููุงู ุดุฑูุฉ (ุญูุซ ุฃุนูู ููููุฏุณ ุดุจูุงุช) ุชุณุชุถูู ุญููู ุงูุนููู ูู ุงูุณุญุงุจุฉ ุงูุฎุงุตุฉ ูู VMWare. ุชุชุตู ูุนุธู ุงูุญููู ุงูุฌุฏูุฏุฉ ุจูุทุงุนุงุช VXLAN ุงูุชู ูุชู ุงูุชุญูู ูููุง ุจูุงุณุทุฉ NSX-V - ูู ุฃููู ุจุชูููู ููุฏุงุฑ ุงูููุช ุงูุฐู ููุญูู ุฅูุงู ูุฐุง ุงูุญู ุ ุจุงุฎุชุตุงุฑ - ูุซูุฑูุง. ุญุชู ุฃููู ุชูููุช ูู ุชุฏุฑูุจ ุฒููุงุฆู ุนูู ุชูููู NSX ESG ููุชู ูุดุฑ ุญููู ุงูุนููุงุก ุงูุตุบูุฑุฉ ุฏูู ูุดุงุฑูุชู. ููุงุญุธุฉ ูููุฉ ูู ูุณุชูู ุงูุชุญูู ูุน ุงููุณุฎ ุงููุชูุงุซู ุฃุญุงุฏู ุงูุฅุฑุณุงู. ูุชู ุชูุตูู Hypervisors ุจุดูู ูุจูุฑ ูู ุฎูุงู ูุงุฌูุชูู ุจูุจุฏูุงุช Juniper QFX5100 ุงููุงุฏูุฉ ุงููุฎุชููุฉ (ูุฌูุนุฉ ูู ุงููููู ุงูุธุงูุฑู) ููุณุงุฑ ุณูุงุณุฉ ุงูุชูููุช ุงููุณุชูุฏ ุฅูู ุงููููุฐ ุงูุธุงูุฑู ุงูุฃุตูู ูู ูู ุฃุฌู ุงูุงูุชูุงู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญููู ุงูุนููู ุบูุฑ ูุชุฌุงูุณุฉ ููุบุงูุฉ: ูู Windows IIS ุ ุญูุซ ูุชู ุชุซุจูุช ุฌููุน ููููุงุช ุฎุงุฏู ุงูููุจ ุนูู ุฌูุงุฒ ูุงุญุฏ ุฅูู ุงูุฃุฌูุฒุฉ ุงููุจูุฑุฉ ุฌุฏูุง - ุนูู ุณุจูู ุงููุซุงู ุ ูุงุฌูุงุช ุงูููุจ Apache ูุชูุงุฒูุฉ ุงูุชุญููู + LB MariaDB ูู Galera + ุจุงูููุงุช ุงูุฎุงุฏู ุงููุชุฒุงููุฉ ุจุงุณุชุฎุฏุงู GlusterFS. ูุญุชุงุฌ ูู ุฎุงุฏู ุชูุฑูุจูุง ุฅูู ุงููุฑุงูุจุฉ ุจุดูู ูููุตู ุ ููุง ุชุญุชูู ุฌููุน ุงูููููุงุช ุนูู ุนูุงููู ุนุงูุฉ - ุฅุฐุง ูุงุฌูุช ูุฐู ุงููุดููุฉ ููุฏูู ุญู ุฃูุซุฑ ุฃูุงูุฉ ุ ูุณูู ูุณุนุฏูู ุชูุฏูู ุงููุดูุฑุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชููู ุญู ุงููุฑุงูุจุฉ ุงูุฎุงุต ุจู ูู "ุฑุจุท" ุฌุฏุงุฑ ุงูุญูุงูุฉ (Fortigate) ุจูู ุดุจูุฉ ุนููู ุฏุงุฎููุฉ (+ SNAT ุ ูุจุงูุทุจุน ุ ูููุฏ ุตุงุฑูุฉ ุนูู ููุน ุญุฑูุฉ ุงููุฑูุฑ ุงููุณููุญ ุจูุง) ููุฑุงูุจุฉ ุงูุนูุงููู ุงูุฏุงุฎููุฉ - ูุจูุฐู ุงูุทุฑููุฉ ูุชู ุชุญููู ุชูุญูุฏ ูุชุจุณูุท ูุนูู ูููุฑุงูุจุฉ. ุชุฃุชู ุงููุฑุงูุจุฉ ููุณูุง ูู ูุฌููุนุฉ ูู ุฎูุงุฏู PRTG. ูุฎุทุท ุงููุฑุงูุจุฉ ุดูุก ูู ูุฐุง ุงููุจูู:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_m/tf/gb/_mtfgbp-yj4608pxce0zj9ktzrw.jpeg" alt="ุตูุฑุฉ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูููุง ููุง ูุนูู ููุท ูุน VLAN ุ ูุงู ูู ุดูุก ูุนุชุงุฏูุง ูุนูู ุจุดูู ูุชููุน ูุซู ุงูุณุงุนุฉ. ุจุนุฏ ุงูุชูููุฐ ุ ูุงุฌูุช NSX-V ู VXLAN ุงูุณุคุงู - ูู ูู ุงููููู ููุงุตูุฉ ุงููุฑุงูุจุฉ ุจุงูุทุฑููุฉ ุงููุฏููุฉุ ูู ููุช ูุฐุง ุงูุณุคุงู ุ ูุงู ุงูุญู ุงูุฃุณุฑุน ูู ูุดุฑ NSX ESG ูุฑุจุท ูุงุฌูุฉ ุตูุฏูู VXLAN ุจุดุจูุฉ VTEP. ุณุฑูุน ูู ุงูุงูุชุจุงุณุงุช - ูุธุฑูุง ูุงุณุชุฎุฏุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ูุชูููู ุดุจูุงุช ุงูุนููุงุก ุ ูููู ูููุงุนุฏ SNAT ูุฌุฏุงุฑ ุงูุญูุงูุฉ ุฃู ุชูุญุฏ ุงูุฅุฏุงุฑุฉ ูุชูุญุฏูุง ูู ูุงุฌูุฉ vSphere ูุงุญุฏุฉ ุ ูููููุง ูู ุฑุฃูู ูุนูุฏุฉ ุฅูู ุญุฏ ูุง ุ ูุชุญุฏ ูู ูุฌููุนุฉ ูู ุงูุฃุฏูุงุช ูุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง. ุฃุนุชูุฏ ุฃู ุฃููุฆู ุงูุฐูู ุงุณุชุฎุฏููุง NSX ESG ูุจุฏูู ูุฌุฏุงุฑ ุญูุงูุฉ "ุญูููู" ุณููุงูููู. ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุญู ุ ุนูู ุงูุฃุฑุฌุญ ุ ุณูููู ุฃูุซุฑ ุงุณุชูุฑุงุฑูุง - ุจุนุฏ ูู ุดูุก ุ ูุญุฏุซ ูู ุดูุก ูู ุฅุทุงุฑ ุจุงุฆุน ูุงุญุฏ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญู ุขุฎุฑ ูู ุงุณุชุฎุฏุงู NSX DLR ูู ูุถุน ุงูุฌุณุฑ ุจูู VLAN ู VXLAN. ููุง ุ ุฃุนุชูุฏ ุฃู ูู ุดูุก ูุงุถุญ - ูุงุฆุฏุฉ ุงุณุชุฎุฏุงู VXLAN ูุชููุจุฉ - ูุฃูู ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูุฒุงู ุนููู ุณุญุจ VLAN ุฅูู ุชุซุจูุช ุงููุฑุงูุจุฉ. ุจุงูููุงุณุจุฉ ุ ูู ุนูููุฉ ุญู ูุฐุง ุงูุญู ุ ูุงุฌูุช ูุดููุฉ ุนูุฏูุง ูู ูุฑุณู ุฌุณุฑ DLR ุญุฒููุง ุฅูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุงูุฐู ูุงู ุนููู ุนูู ููุณ ุงููุถูู. ุฃุนูู ุ ุฃุนูู - ูู ุงููุชุจ ูุงูุฃุฏูุฉ ุนูู NSX-V ุ ููุฐูุฑ ุตุฑุงุญุฉ ุฃูู ูุฌุจ ุชุฎุตูุต ูุฌููุนุฉ ูููุตูุฉ ูู NSX Edge ุ ูููู ูุฐุง ูู ุงููุชุจ ... ุนูู ุฃู ุญุงู ุ ุจุนุฏ ุดูุฑูู ูู ุงูุฏุนู ูู ูุญู ุงููุดููุฉ. ูู ุญูุซ ุงููุจุฏุฃ ุ ูููุช ููุทู ุงูุฅุฌุฑุงุก - ูู ูุชู ุชูุดูุท ุงููุญุฏุฉ ุงูุฃุณุงุณูุฉ ูุจุฑูุงูุฌ Hypervisor ุงููุณุคูู ุนู ุชุบููู VXLAN ุฅุฐุง ูุงู DLR ูุงูุฎุงุฏู ุงูุฐู ุชู ูุฑุงูุจุชู ุนูู ููุณ ุงููุถูู ุ ูุธุฑูุง ูุฃู ุญุฑูุฉ ุงููุฑูุฑ ูุง ุชุบุงุฏุฑ ุงููุถูู ุ ููู ุงูููุทูู ุ ูุฌุจ ุฃู ุชููู ูุชุตูุฉ ุจุฌุฒุก VXLAN - ูุง ุญุงุฌุฉ ุฅูู ุงูุชุบููู.ูุน ุงูุฏุนู ุ ุงุณุชูุฑูุง ุนูู ุงููุงุฌูุฉ ุงูุธุงูุฑูุฉ vdrPort ุ ุงูุชู ุชุฌูุน ููุทูููุง ุงูุฑูุงุจุท ุงูุตุงุนุฏุฉ ูุชููู ุฃูุถูุง ุจุนูู ุงูุฌุณูุฑ / ุงูุชุบููู - ููุงู ููุญุธ ุนุฏู ุชุทุงุจู ูู ุญุฑูุฉ ุงููุฑูุฑ ุงููุงุฑุฏุฉ ุ ูุงูุชู ุฃุฎุฐุชูุง ูุญููุง ูู ุงูุญุงูุฉ ุงูุญุงููุฉ. ูููู ููุง ููู ุ ูู ุฃููู ูุฐู ุงููุถูุฉ ุญุชู ุงูููุงูุฉ ุ ุญูุซ ุชู ููููุง ุฅูู ูุดุฑูุน ุขุฎุฑ ููุงู ุงููุฑุน ูู ุงูุจุฏุงูุฉ ูุณุฏูุฏูุง ููู ุชูู ููุงู ุฑุบุจุฉ ุฎุงุตุฉ ูู ุชุทููุฑู. ุฅุฐุง ูู ุฃูู ูุฎุทุฆูุง ุ ููุฏ ููุญุธุช ุงููุดููุฉ ูู ุงูุฅุตุฏุงุฑุงุช NSX ู 6.1.4 ู 6.2.ุญูุซ ุชู ุชุญูููู ุฅูู ูุดุฑูุน ุขุฎุฑ ููุงู ุงููุฑุน ูู ุงูุจุฏุงูุฉ ูุณุฏูุฏูุง ููู ุชูู ููุงู ุฑุบุจุฉ ุฎุงุตุฉ ูู ุชุทููุฑู. ุฅุฐุง ูู ุฃูู ูุฎุทุฆูุง ุ ููุฏ ููุญุธุช ุงููุดููุฉ ูู ุงูุฅุตุฏุงุฑุงุช NSX ู 6.1.4 ู 6.2.ุญูุซ ุชู ุชุญูููู ุฅูู ูุดุฑูุน ุขุฎุฑ ููุงู ุงููุฑุน ูู ุงูุจุฏุงูุฉ ูุณุฏูุฏูุง ููู ุชูู ููุงู ุฑุบุจุฉ ุฎุงุตุฉ ูู ุชุทููุฑู. ุฅุฐุง ูู ุฃูู ูุฎุทุฆูุง ุ ููุฏ ููุญุธุช ุงููุดููุฉ ูู ุงูุฅุตุฏุงุฑุงุช NSX ู 6.1.4 ู 6.2.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง - ุจูุบู! </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุตูู Fortinet annonsiruet </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">VXLAN</font></a><font style="vertical-align: inherit;"> . ูููุณ ููุท ูู ููุทุฉ ุฅูู ููุทุฉ ุฃู VXLAN over-IPSec ุ ูููุณ ุฌุณุฑ VLAN-VXLAN ุงููุณุชูุฏ ุฅูู ุงูุจุฑุงูุฌ - ููุฏ ุจุฏุฃูุง ูู ุชูููุฐ ูู ูุฐุง ููุฐ ุงูุฅุตุฏุงุฑ 5.4 (ูููุฏูู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ุจุงุฆุนูู</font></a><font style="vertical-align: inherit;"> ุขุฎุฑูู</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูููู ุฏุนู ุญูููู ููุณุชูู ุชุญูู ุฃุญุงุฏู ุงูุฅุฑุณุงู. ุนูุฏ ุชูููุฐ ุงูุญู ุ ูุงุฌูุช ูุดููุฉ ุฃุฎุฑู - ููุฏ "ุงุฎุชูุช" ุงูุฎูุงุฏู ุงูุชู ุชู ูุญุตูุง ุจุดูู ุฏูุฑู ุฃู ุธูุฑุช ูู ุงููุฑุงูุจุฉ ุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุฌูุงุฒ ุงูุงูุชุฑุงุถู ููุณู ูุงู ูุง ูุฒุงู ุนูู ููุฏ ุงูุญูุงุฉ. ูุงูุณุจุจ ูู ุฐูู ูู ุฃููู ูุณูุช ุชูููู Ping ุนูู ูุงุฌูุฉ VXLAN. ูู ุนูููุฉ ุฅุนุงุฏุฉ ุชูุงุฒู ุงููุฌููุนุงุช ุ ุงูุชููุช ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุ ูุงูุชูุช vMotion ุจู Ping ููุฅุดุงุฑุฉ ุฅูู ูุถูู ESXI ุงูุฌุฏูุฏ ุงูุฐู ุงูุชููุช ุฅููู ุงูุขูุฉ. ุบุจู ุ ูููู ูุฐู ุงููุดููุฉ ูุฑุฉ ุฃุฎุฑู ููุถุช ูุตุฏุงููุฉ ุงูุฏุนู - ูู ูุฐู ุงูุญุงูุฉ Fortinet. ุฃูุง ูุง ุฃููู ุฃู ูู ุญุงูุฉ ุชุชุนูู ุจุดุจูุฉ VXLAN ุชุจุฏุฃ ุจุงูุณุคุงู "ุฃูู VLAN-VXLAN ุณููุช ุณููุชุด ูู ุฅุนุฏุงุฏุงุชูุ" ูุฐู ุงููุฑุฉ ูุตุญุช ุจุชุบููุฑ MTU - ูุฐุง ูู Ping ุ ููู 32 ุจุงูุช. ุซู "ุงูุนุจ ุญูู" ุจุงุณุชุฎุฏุงู tcp-send-mss ู tcp-receiver-mss ูู ุงูุณูุงุณุฉ - ูู VXLAN ุููู ูุบูู ูู UDP. ููู ุ ุฃูุง ุขุณู - ุฅููุง ุชุบูู. ุจุดูู ุนุงู ุ ููุช ุจุญู ูุฐู ุงููุดููุฉ ุจููุฑุฏู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงูุชุฑุงุฌุน ุจูุฌุงุญ ุนู ุญุฑูุฉ ุงููุฑูุฑ ุงูุงุฎุชุจุงุฑูุฉ ุ ุชูุฑุฑ ุชูููุฐ ูุฐุง ุงูุญู. </font><font style="vertical-align: inherit;">ููู ุงูุฅูุชุงุฌ ุงุชุถุญ ุฃูู ุจุนุฏ ููู ุฃู ููููู ุ ูู ุดูุก ูุชู ูุฑุงูุจุชู ุนุจุฑ VXLAN ูุชุฏุงุนู ุชูุงููุง. </font><font style="vertical-align: inherit;">ุณุงุนุฏ ุฅูุบุงุก ุชูุดูุท / ุชูุดูุท ุงููุงุฌูุฉ ุ ูููู ูุคูุชูุง ููุท. </font><font style="vertical-align: inherit;">ูุน ูุฑุงุนุงุฉ ุงูุฏุนู ุงูุจุทูุก ุ ุฐูุจุช ุฅูู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง ูู ุฌูุชู - ูู ุงูููุงูุฉ ุ ุดุฑูุชู ุ ูุดุจูุชู ูู ูุณุคูููุชู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุช ุงูููุณุฏ ูู ูุณุงุฑ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง. </font><font style="vertical-align: inherit;">ุงูุฐู ุณุฆู ูู ุงูุญุฑูู ูุงูููุงุฎุฑุฉ - ุชุฎุทู ูุงูุฐูุงุจ ุฅูู ุชุญููู ูุง ุจุนุฏ ุงูููุงุฏุฉ.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง</font></font></b><div class="spoiler_text">,    โ !<br>
<br>
,    ,    .        . ,           Fortigate  5.6+,    ยซdiagnose debug flowยป โ              .     . ,  ,      RFC1918,        .   VXLAN   ...15,   ...254,       VTEP.<br>
<br>
   VXLAN-        .  overlay  ARP  OVSDB,  underlay  ARP  CAM.   Fortigate VXLAN FDB   OVSDB.   :<br>
<br>
<pre><code class="plaintext hljs"> fortigate (root) #diag sys vxlan fdb list vxlan-LS<font></font>
mac=00:50:56:8f:3f:5a state=0x0002 flags=0x00 remote_ip=...47 port=4789 vni=5008 ifindex=7<font></font>
</code></pre><br>
    โ MAC      VTEP   ...47.     ESXI ,  ,  MAC  ,  VTEP .  CAM/ARP    โ      ESXI :<br>
<br>
<pre><code class="plaintext hljs">fortigate (root) #get sys arp | grep ...47<font></font>
...47 0 00:50:56:65:f6:2c dmz<font></font>
</code></pre><br>
     โ     ?        Juniper' โ          ,      โ   VLAN  VTEP     .     DLR-, VDR    โ    ESXI ,      VMWare.  MAC ยซ97:6eยป  , vmnic1 โ  ,   VTEP   ...47     "--dir 2":<br>
<br>
<pre><code class="plaintext hljs">pktcap-uw --uplink vmnic1 --vni 5008  --mac 90:6c:ac:a9:97:6e --dir 2 -o /tmp/monitor.pcap
</code></pre><br>
<img src="https://habrastorage.org/webt/cb/km/gq/cbkmgqv0xd3fidrang8xwmhzzwi.png" alt="image"><br>
<br>
 โ    ARP    .   ARP     .   ,         ...15 โ   ICMP ? ,     .     ,         ( teaming policy),        vNIC       ,      ,     :<br>
<br>
<pre><code class="plaintext hljs">pktcap-uw --uplink vmnic4 --vni 5008  --mac 90:6c:ac:a9:97:6e --dir 2 -o /tmp/monitor.pcap
</code></pre><br>
<img src="https://habrastorage.org/webt/yi/w2/ei/yiw2eiaz43lr7-zfnybmxbsk4rk.png" alt="image"><br>
<br>
   ,   .      .   โ   โ         VDR,        .    ,      ,      ,   .   ยซยป     Ethernet  underlay. -    MAC  VTEP     IP.   , ,  โ ,   .  ARP  ,    .     Ethernet    :<br>
<br>
<pre><code class="plaintext hljs">fortigate (root) #get sys arp | grep ...47<font></font>
...47 0 00:50:56:65:f6:2c dmz<font></font>
fortigate (root) #get sys arp | grep ...42<font></font>
...42 0 00:50:56:6a:78:86 dmz<font></font>
</code></pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูุงุฐุง ูุฏููุง ูู ุงูููุงูุฉ - ุจุนุฏ ุชุฑุญูู ุงูุฌูุงุฒ ุงูุงูุชุฑุงุถู ุ ูุญุงูู ุงูุญุตู ุฅุฑุณุงู ุญุฑูุฉ ุงููุฑูุฑ ุฅูู VTEP ูู VXLAN FDB (ุงูุตุญูุญ) ุ ููููู ูุณุชุฎุฏู MAC DST ุฎุงุทุฆ ููู ุงููุชููุน ุฃู ูุชู ุชุฌุงูู ุญุฑูุฉ ุงููุฑูุฑ ูู ุฎูุงู ูุงุฌูุฉ ุงููุชููู ุงููุชููู. ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุญุงูุฉ ูุงุญุฏุฉ ูู ุฃุตู ุฃุฑุจุนุฉ ุ ููุชูู MAC ูุฐุง ุฅูู ุจุฑูุงูุฌ ูุฑุงูุจุฉ ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุฃุตูู ุ ุงูุฐู ุจุฏุฃ ููู ุชุฑุญูู ุงูุฌูุงุฒ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูููุช ุฃูุณ ุฑุณุงูุฉ ูู ุงูุฏุนู ุงูููู Fortinet - ูุชุญูุง ุฎุทุฃ 615586 ูู ุญุงูุชู. ูุง ุฃุนุฑู ููู ุฃูุฑุญ ุฃู ุฃุญุฒู: ูู ูุงุญูุฉ ุ ุงููุดููุฉ ููุณุช ูู ุงูุฅุนุฏุงุฏุงุช ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุณูุฃุชู ุงูุฅุตูุงุญ ููุท ูุน ุชุญุฏูุซ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุ ุงูุชุงูู ุ ูู ุฃูุถู ุงูุฃุญูุงู. ุชุณุงูู ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ ุฃูุถูุง ูู ุชุณุฑูุน ุฎุทุฃ ุขุฎุฑ ุงูุชุดูุชู ุงูุดูุฑ ุงููุงุถู ุ ุนูู ุงูุฑุบู ูู ุฐูู ูู ุฐูู ุงูููุช ูู HTML5 GUI vSphere. ุญุณููุง ุ ูุณู ุถูุงู ุงูุฌูุฏุฉ ุงููุญูู ููุจุงุฆุนูู ูุจุงุดุฑ ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฃุฌุฑุค ุนูู ุงูุชุฑุงุญ ูุง ููู:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 - ุนูู ุงูุฃุฑุฌุญ ูู ุชุฎุถุน ุทุงุฆุฑุฉ ุงูุชุญูู ูู ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ูููุดููุฉ ุงูููุตููุฉ - ุจุนุฏ ูู ุดูุก ุ ูุชู ุงูุญุตูู ุนูู ุนูุงููู MAC VTEP ูู ุนููุงู IP ูููุฌููุนุฉ ุงูุชู ุชุดุชุฑู ูููุง ุงููุงุฌูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 - ุนูู ุงูุฃุฑุฌุญ ูุดููุฉ ุงูุนููุจ ูู ุฌูุณุงุช ุงูุชูุฑูุบ ุนูู ูุนุงูุฌ ุงูุดุจูุฉ (ููุงุซู ุชูุฑูุจูุง ูู CEF) - ุฅุฐุง ุชู ุชูุฑูุฑ ูู ุญุฒูุฉ ูู ุฎูุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุณูุชู ุงุณุชุฎุฏุงู ุงูุฌุฏุงูู ุงูุชู ุชุญุชูู ุนูู ุงููุนูููุงุช ุงูุตุญูุญุฉ - ุนูู ุงูุฃูู ุจุตุฑููุง -. ูุตุงูุญ ูุฐุง ุงูุงูุชุฑุงุถ ูู ูุง ูุณุงุนุฏ ุนูู ุฅุบูุงู / ูุชุญ ุงููุงุฌูุฉ ุฃู ุงูุงูุชุธุงุฑ ููุชุฑุฉ - ุฃูุซุฑ ูู 5 ุฏูุงุฆู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 - ูู ูุคุฏู ุชุบููุฑ ุณูุงุณุฉ ุงููุฑูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู ุชุฌุงูุฒ ุงููุดู ุงููุงุถุญ ุ ุฃู ุฅุฏุฎุงู LAG ุฅูู ุญู ุงููุดููุฉ ุ ูุธุฑูุง ูุฃู MAC ุนุงูู ูู ุจุฑูุงูุฌ Hypervisor ุงูุฃุตูู ูู ุงูุญุฒู ุงููุบููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุถูุก ุฐูู ุ ูููููู ูุดุงุฑูุฉ ูุง ุงูุชุดูุชู ูุคุฎุฑูุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุซ ูุฑุฏ ูู ุฅุญุฏู ุงูููุงูุงุช ุฃู ุฌุฏุฑุงู ุงูุญูุงูุฉ ุงูุซุงุจุชุฉ ูุงูุฃุณุงููุจ ุงููุฎุจุฃุฉ ูููู ุงูุจูุงูุงุช ูู ุนูุงุฒุงุช. </font><font style="vertical-align: inherit;">ุญุณููุง ุ ูุณุช ูู ุฐูู ุงูุฎุจุฑุฉ ูู ูุฌุงู ุชูููููุฌูุง ุงููุนูููุงุช ูุฃููู ุฐูู ุ ููุง ุฃุชูู ูุน ุฌููุน ุงูุนุจุงุฑุงุช ูู ููุงูุงุช ุงููุฏููุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฎุจุฑูู ุดูุก ูุง ุฃู ููุงู ุจุนุถ ุงูุญูููุฉ ูู ูููุงุช ุฅููุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดูุฑุข ูู ุนูู ุฃูุชูุงูู! </font><font style="vertical-align: inherit;">ุณุฃููู ุณุนูุฏูุง ููุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ูุณูุงุน ุงูููุฏ ุงูุจูุงุก.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar490782/index.html">ูุคุชูุฑ AnalogBytes: Roskomnadzor ุ ูุณุงุฆุท ุ ุญูููุฉ ุนุงููุฉ ููู ุดูุก ุงููู</a></li>
<li><a href="../ar490784/index.html">ุฃูุง ูุทูุฑ Android ููุง ุฃุฑุบุจ ูู ุงูุนูู ุงููุฏูู.</a></li>
<li><a href="../ar490786/index.html">ุชุญููู ุงูุชุณุฑุจ ูู ุงูุฏุฑุฌุฉ ุงูุซุงููุฉ: ุนูุฏูุง ูุชุณุฑุจ ูู ุฃููุฆู ุงูุฐูู ูุณุฑููู ุงูุจูุงูุงุช ูู ุงูุจูู</a></li>
<li><a href="../ar490788/index.html">REPL ุนุฏูู ุงูุฌุฏูู. ุชูุฑูุฑ ูุงูุฏูุณ</a></li>
<li><a href="../ar490790/index.html">ูููุงุช ูุถุบูุทุฉ: ุงูุชุงุฑูุฎ ูุงูุดุฑุญ ูุงูุชูููุฐ</a></li>
<li><a href="../ar490796/index.html">ููููุฉ ุฃุชูุชุฉ ุฃูู ุงูุญุงููุงุช ุจุฃุณููุจ ุงูุณูุงุณุฉ ูุฑูุฒ ุจุงุณุชุฎุฏุงู CRD</a></li>
<li><a href="../ar490804/index.html">ููู ุฏุฎูุช ูุงูุฏุฉ ุงููุฑุงุตูุฉ ุฅูู ุงูุณุฌู ูุฃุตุงุจุช ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจุงูุฑุฆูุณ</a></li>
<li><a href="../ar490808/index.html">ุงูุฑูุงุถูุงุช ูู ุนูู ุงููุถุงุก: ูุญุฑู ุงูุชูุฌูุฑ ุงูุฏูุฑุงูู</a></li>
<li><a href="../ar490812/index.html">ุงูุดูุงุฏุงุช ุงูููููุฉ ุงูุฑุจูุน 5 ุชุฌุฑุจุฉ ุชูุฏูู</a></li>
<li><a href="../ar490816/index.html">ููู ุชูุงูู ููุงูุน ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ุงูุฑูุจูุชุงุช AuthBotsุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>