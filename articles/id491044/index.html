<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ† ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ» ğŸ’ªğŸ¾ Orchestrator dan VIP sebagai solusi HA untuk cluster MySQL ğŸ“• ğŸ¾ ğŸš£ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di CityMobile, kami menggunakan database MySQL sebagai penyimpanan utama untuk data persisten. Kami memiliki beberapa cluster basis data untuk berbaga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Orchestrator dan VIP sebagai solusi HA untuk cluster MySQL</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/citymobil/blog/491044/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di CityMobile, kami menggunakan database MySQL sebagai penyimpanan utama untuk data persisten. </font><font style="vertical-align: inherit;">Kami memiliki beberapa cluster basis data untuk berbagai layanan dan keperluan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketersediaan wizard yang konstan adalah indikator penting kesehatan seluruh sistem dan bagian-bagiannya masing-masing. </font><font style="vertical-align: inherit;">Pemulihan gugus otomatis jika terjadi kegagalan penyihir sangat mengurangi waktu respons kejadian dan waktu henti sistem. </font><font style="vertical-align: inherit;">Pada artikel ini, saya akan melihat cluster HA </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berdasarkan pada </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">MySQL Orchestrator</font></a><font style="vertical-align: inherit;"> dan alamat IP virtual (VIP).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/78/bb/dn78bbg_qvozrgufsyzr0joysuw.png"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solusi VIP HA</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, saya akan berbicara singkat tentang seperti apa sistem penyimpanan data kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggunakan skema replikasi klasik dengan satu wisaya hanya-tulis dan banyak replika hanya-baca. Cluster dapat berisi master perantara - simpul yang merupakan replika dan master untuk orang lain. Klien mengakses replika melalui HAProxy, yang memungkinkan distribusi muatan merata dan skalabilitas mudah. Penggunaan HAProxy adalah karena alasan historis, dan sekarang kami sedang dalam proses migrasi ke ProxySQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replikasi semi-sinkron berdasarkan</font></font><code>GTID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ini berarti bahwa setidaknya satu replika harus menulis transaksi ke log sebelum dianggap berhasil. Mode replikasi ini memberikan keseimbangan optimal antara kinerja dan keamanan data jika terjadi kegagalan pada simpul utama. Pada dasarnya, semua perubahan ditransfer dari master ke replika menggunakan </font></font><code>Row Based Replication (RBR)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi beberapa node mungkin memiliki </font></font><code>mixed binlog format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orkestrator secara berkala memperbarui keadaan topologi klaster, menganalisis informasi yang diterima dan, jika ada masalah, dapat memulai prosedur pemulihan otomatis. Pengembang bertanggung jawab atas prosedur itu sendiri, karena dapat diimplementasikan dengan berbagai cara: berdasarkan VIP, DNS, menggunakan layanan penemuan layanan atau mekanisme mandiri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu cara termudah untuk memulihkan penyihir jika gagal adalah dengan menggunakan alamat VIP mengambang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang perlu Anda ketahui tentang solusi ini sebelum melanjutkan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VIP adalah alamat IP yang tidak terikat dengan antarmuka jaringan fisik tertentu. </font><font style="vertical-align: inherit;">Ketika sebuah node gagal atau selama pekerjaan yang dijadwalkan, kita dapat mengganti VIP ke sumber daya lain dengan downtime minimal.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melepaskan dan mengeluarkan alamat IP virtual adalah operasi yang murah dan cepat.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk bekerja dengan VIP memerlukan akses ke server melalui SSH, atau penggunaan alat khusus, misalnya </font></font><code>keepalived</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan mempertimbangkan kemungkinan masalah dengan master kami dan membayangkan bagaimana mekanisme pemulihan otomatis seharusnya bekerja.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konektivitas jaringan ke master telah hilang, atau masalah telah terjadi pada tingkat perangkat keras, dan server tidak tersedia</font></font></h4><br>
<ol>
<li>   ,      .     ,     ,   .<br>
</li>
<li>  VIP    â€” .<br>
</li>
<li>    .  .<br>
</li>
<li>     VIP.   VIP  ,        <b>gratuitous ARP</b>.   /        IP-  MAC-,       VIP.    <code>split brain</code>    . <br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua koneksi baru segera dialihkan ke master baru. </font><font style="vertical-align: inherit;">Koneksi lama gagal, panggilan berulang dilakukan ke basis data di tingkat aplikasi.</font></font><br>
</li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server beroperasi dalam mode normal, kegagalan terjadi pada level DBMS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritma ini mirip dengan kasus sebelumnya: memperbarui topologi dan memulai proses pemulihan. </font><font style="vertical-align: inherit;">Karena server tersedia, kami berhasil merilis VIP pada master lama, mentransfernya ke yang baru dan mengirim beberapa permintaan ARP. </font><font style="vertical-align: inherit;">Kemungkinan kembalinya wizard lama tidak akan memengaruhi cluster yang dibangun kembali dan pengoperasian aplikasi.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah lainnya</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kegagalan replika atau master perantara </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak mengarah</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke tindakan otomatis dan memerlukan intervensi manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antarmuka jaringan virtual selalu ditambahkan sementara, yaitu, setelah me-reboot server VIP tidak secara otomatis ditetapkan. </font><font style="vertical-align: inherit;">Setiap instance dari database diluncurkan secara default dalam mode read-only, orkestrator secara otomatis beralih master baru untuk merekam dan mencoba untuk menginstal </font></font><code>read only</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada master lama. </font><font style="vertical-align: inherit;">Tindakan-tindakan ini bertujuan mengurangi kemungkinan </font></font><code>split brain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama proses pemulihan, masalah mungkin timbul, yang juga harus diberitahukan melalui UI orkestra selain alat pemantauan standar. </font><font style="vertical-align: inherit;">Kami telah memperluas REST API dengan menambahkan fitur ini ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> saat ini sedang dipertimbangkan).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skema umum dari solusi HA disajikan di bawah ini.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/pk/gk/ylpkgksjn1cfj0wdbil7dje9qss.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memilih Wizard Baru</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orkestra cukup pintar dan mencoba untuk memilih </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replika yang paling cocok</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai master baru sesuai dengan kriteria berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lag replika dari master;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panduan MySQL dan versi replika;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jenis replikasi (RBR, SBR, atau campuran);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lokasi di satu atau beberapa pusat data;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketersediaan </font></font><code>errant GTID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- transaksi yang dilakukan pada replika dan tidak ada pada master;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aturan pemilihan khusus juga diperhitungkan.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak setiap replika adalah kandidat ideal untuk peran master. </font><font style="vertical-align: inherit;">Misalnya, replika dapat digunakan untuk membuat cadangan data, atau server memiliki konfigurasi perangkat keras yang lebih lemah. </font><font style="vertical-align: inherit;">Orkestrator </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendukung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aturan manual yang dengannya Anda dapat menyesuaikan preferensi Anda untuk memilih kandidat dari yang paling disukai untuk diabaikan.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waktu Respons dan Pemulihan</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal terjadi insiden, penting untuk meminimalkan waktu henti sistem, oleh karena itu, kami mempertimbangkan parameter MySQL yang memengaruhi konstruksi dan pemutakhiran topologi klaster oleh orkestra:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>slave_net_timeout</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- jumlah detik selama replika menunggu data baru atau sinyal detak jantung dari master sebelum koneksi dikenali hilang dan koneksi kembali dilakukan. </font><font style="vertical-align: inherit;">Semakin rendah nilainya, semakin cepat replika akan dapat menentukan bahwa koneksi dengan master terputus. </font><font style="vertical-align: inherit;">Kami menetapkan nilai ini ke 5 detik.</font></font><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>MASTER_CONNECT_RETRY</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- jumlah detik antara upaya koneksi ulang. </font><font style="vertical-align: inherit;">Jika terjadi masalah jaringan, nilai rendah dari parameter ini akan memungkinkan Anda untuk menyambung kembali dengan cepat dan mencegah dimulainya proses pemulihan cluster. </font><font style="vertical-align: inherit;">Nilai yang disarankan adalah 1 detik.</font></font><br>
</li>
<li><code>MASTER_RETRY_COUNT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jumlah upaya maksimum untuk menyambung kembali. </font></font><br>
</li>
<li><code>MASTER_HEARTBEAT_PERIOD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Interval dalam detik setelah mana master mengirimkan sinyal detak jantung. </font><font style="vertical-align: inherit;">Standarnya adalah setengah dari nilai </font></font><code>slave_net_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opsi orkestra:</font></font><br>
<br>
<ul>
<li><code>DelayMasterPromotionIfSQLThreadNotUpToDate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- jika sama </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka peran wizard tidak akan diterapkan pada kandidat replika sampai aliran SQL replika menyelesaikan semua transaksi yang belum diterapkan dari Relay Log. </font><font style="vertical-align: inherit;">Kami menggunakan opsi ini agar tidak kehilangan transaksi ketika semua calon kandidat ketinggalan.</font></font><br>
</li>
<li><code>InstancePollSeconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - frekuensi membangun dan memperbarui topologi.</font></font><br>
</li>
<li><code>RecoveryPollSeconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- frekuensi analisis topologi. </font><font style="vertical-align: inherit;">Jika masalah terdeteksi, pemulihan topologi dimulai. </font><font style="vertical-align: inherit;">Ini adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konstan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sama dengan 1 detik.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap node cluster disurvei oleh orkestrator sekali setiap </font></font><code>InstancePollSeconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detik. </font><font style="vertical-align: inherit;">Ketika masalah terdeteksi, keadaan klaster </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diperbarui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> secara paksa </font><font style="vertical-align: inherit;">, dan kemudian keputusan akhir dibuat untuk melakukan pemulihan. </font><font style="vertical-align: inherit;">Dengan bereksperimen dengan berbagai parameter dari basis data dan orkestra, kami dapat mengurangi durasi respons dan pemulihan hingga 30 detik.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test stand</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mulai menguji skema HA dengan mengembangkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bangku tes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lokal </font><font style="vertical-align: inherit;">dan selanjutnya menerapkannya dalam lingkungan uji dan pertempuran. </font><font style="vertical-align: inherit;">Stand lokal sepenuhnya otomatis berdasarkan Docker dan memungkinkan Anda untuk bereksperimen dengan konfigurasi orkestra dan jaringan, skala cluster dari 2-3 server menjadi beberapa puluhan dan melakukan latihan di lingkungan yang aman. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama latihan, kami memilih salah satu metode untuk meniru masalah: langsung memotret wizard </font></font><code>kill -9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, selesaikan proses dan hentikan server ( </font></font><code>docker-compose stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), simulasikan masalah jaringan dengan </font></font><code>iptables -j REJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>iptables -j DROP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kami mengharapkan hasil ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orkestra akan mendeteksi masalah dengan master dan memperbarui topologi dalam waktu tidak lebih dari 10 detik;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosedur pemulihan akan secara otomatis dimulai: konfigurasi jaringan akan berubah, peran wizard akan pergi ke replika, topologi akan dibangun kembali;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">master baru akan tersedia untuk direkam, replika langsung tidak akan hilang dalam proses pembangunan kembali;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data akan mulai ditulis ke master baru dan direplikasi;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">total waktu pemulihan tidak akan lebih dari 30 detik.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda ketahui, suatu sistem dapat berperilaku berbeda dalam lingkungan pengujian dan produksi karena konfigurasi perangkat keras dan jaringan yang berbeda, perbedaan dalam beban sintetis dan nyata, dll. </font><font style="vertical-align: inherit;">Oleh karena itu, kami secara berkala melakukan latihan dalam kondisi nyata, memeriksa bagaimana sistem berperilaku jika kehilangan konektivitas jaringan atau degradasi bagian-bagian individualnya. </font><font style="vertical-align: inherit;">Di masa depan, kami ingin membangun infrastruktur yang benar-benar identik untuk lingkungan dan mengotomatiskan pengujiannya.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temuan</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operabilitas simpul utama sistem penyimpanan adalah salah satu tugas utama tim dan operasi SRE. </font><font style="vertical-align: inherit;">Pengenalan orkestra dan solusi HA berdasarkan VIP memungkinkan untuk mencapai hasil berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deteksi andal masalah dengan topologi cluster database;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">respons otomatis dan cepat terhadap insiden yang terkait dengan master, yang mengurangi waktu henti sistem.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, solusinya memiliki keterbatasan dan kelemahan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penskalaan skema HA ke beberapa pusat data akan membutuhkan jaringan L2 tunggal di antara mereka;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebelum Anda menetapkan VIP ke master baru, kita perlu membebaskannya pada yang lama. </font><font style="vertical-align: inherit;">Prosesnya berurutan, yang meningkatkan waktu pemulihan;</font></font><br>
</li>
<li> VIP  SSH-  ,       .      ,   ,     ,   VIP  .            IP-   <code>split brain</code>.<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghindarinya </font></font><code>split brain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Anda dapat menggunakan metode </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STONITH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ("Shoot The Other Node In The Head"), yang sepenuhnya mengisolasi atau memutus simpul masalah. </font><font style="vertical-align: inherit;">Ada cara lain untuk mengimplementasikan ketersediaan tinggi dari kluster: kombinasi VIP dan DNS, penemuan layanan dan layanan proxy, replikasi sinkron, dan metode lain yang memiliki kelemahan dan kelebihannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya berbicara tentang pendekatan kami untuk membuat cluster failover MySQL. </font><font style="vertical-align: inherit;">Mudah diimplementasikan dan memberikan tingkat keandalan yang dapat diterima di lingkungan saat ini. </font><font style="vertical-align: inherit;">Dengan pengembangan seluruh sistem secara keseluruhan dan infrastruktur khususnya, pendekatan ini tidak diragukan lagi akan berkembang.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id491032/index.html">"RTFM, kawan!", Atau berapa harga keju gratis untuk saya $ 5. Dan bisa jadi $ 80 +</a></li>
<li><a href="../id491034/index.html">WireGuard - VPN Cepat dan Aman di Kernel Linux</a></li>
<li><a href="../id491036/index.html">Ketika kerangka kerja JavaScript tidak diperlukan</a></li>
<li><a href="../id491038/index.html">Yandex membuka Testsuite</a></li>
<li><a href="../id491040/index.html">QA Meetup di Nizhny - seperti apa adanya dan bahan-bahan dari acara tersebut</a></li>
<li><a href="../id491050/index.html">Pendaftaran untuk NeoQUEST-2020: World Open Pasca-Apokaliptik</a></li>
<li><a href="../id491052/index.html">Bagaimana dan mengapa kurator di St. Petersburg HSE membantu mahasiswa baru</a></li>
<li><a href="../id491054/index.html">Cara menandatangani korespondensi email dengan kunci GPG menggunakan token PKCS # 11</a></li>
<li><a href="../id491056/index.html">Ampere Altra - prosesor ARM 80-core pertama di dunia</a></li>
<li><a href="../id491058/index.html">Kematian, kematian, coronavirus dan matan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>