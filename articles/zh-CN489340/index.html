<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖨️ 👩‍👩‍👧 🗂️ 由于在Internet上传输信息的最大单位变为1500字节 🏇🏼 👟 👌🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="以太网无处不在，成千上万的制造商在其支持下生产设备。但是，几乎所有这些设备都有一个通用编号-MTU：
 
 

$ ip l 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 state UNKNOWN link/loopback 00:00:00:00:00:00 b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>由于在Internet上传输信息的最大单位变为1500字节</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489340/"><img src="https://habrastorage.org/getpro/habr/post_images/e03/a1c/027/e03a1c027a2b0fee98e0474792712a88.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以太网无处不在，成千上万的制造商在其支持下生产设备。</font><font style="vertical-align: inherit;">但是，几乎所有这些设备都有一个通用编号</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-MTU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="bash hljs">$ ip l<font></font>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 state UNKNOWN<font></font>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<font></font>
2: enp5s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 state UP <font></font>
    link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MTU（最大传输单元）定义单个数据包的最大大小。在一般情况下，当您与LAN上的设备交换消息时，MTU的大小约为1500字节，整个Internet几乎也将完全以1500 B的大小工作。但是，这并不意味着这些通信技术无法传输更大的数据包。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，在802.11（更广泛地称为WiFi）中，MTU为2304 bps，如果您的网络使用FDDI，则MTU为4352 bps。</font><font style="vertical-align: inherit;">以太网本身具有“巨型帧”的概念，可以为MTU分配最大9000 bps的大小（支持NIC，交换机和路由器的这种模式）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，在Internet上这不是特别必要。</font><font style="vertical-align: inherit;">由于主要的Internet干线主要是以太网连接，因此实际上非官方的最大数据包大小设置为1500 B，以避免其他设备上的数据包分段。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数字1500本身很奇怪-例如，人们希望计算机世界中的常数将基于2的幂。</font><font style="vertical-align: inherit;">那么1500 B是从哪里来的，为什么我们仍在使用它们呢？</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幻数</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以太网进入世界的第一个重大突破是以标准</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10BASE-2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（薄）和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10BASE-5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（厚）的形式出现的，其中的数字表示单个网段可以覆盖数百米。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于当时存在许多竞争协议，并且Iron具有其自身的局限性，因此该格式的创建者承认，数据包缓冲存储器的要求在魔术数字1500的出现中起作用：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回顾一下，很明显，可能会有更大的最大值。最好的解决方案是，如果我们在早期阶段增加了NIC（网络控制器）的成本，这将阻止以太网如此广泛地传播。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，这还不是全部。在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“以太网：本地计算机网络中的分布式数据包交换”，1980，对在网络中使用大型数据包的效率进行的最早分析之一。那时，这对于以太网尤为重要，因为它们可以通过一根同轴电缆连接所有系统，或者由能够一次向一个网段的所有节点发送一个数据包的集线器组成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有必要选择一个数字，该数字在分段传输消息时（有时很忙）不会造成太大的延迟，同时又不会增加太多的数据包数量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显然，当时的工程师选择了1500 B（约12000位）作为最“安全”的选择。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从那时起，各种其他消息传递系统出现并消失了，但是其中以太网具有自1500 B以来的最低MTU值。要超过网络中的最小MTU值，可能会导致数据包碎片或参与PMTUD [寻找最大的MTU值。选择的路径]。</font><font style="vertical-align: inherit;">两种选择都有其自身的特殊问题。</font><font style="vertical-align: inherit;">即使有时主要的OS制造商忽略了更低的MTU值。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绩效因素</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，我们知道Internet上的MTU限制为1,500 B，这在很大程度上是由于旧的延迟和硬件限制所致。这对互联网性能有多大影响？</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/abc/7a7/252/abc7a725277cc8cea3fcd7ef2031d8f3.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果查看来自大型Internet流量交换点AMS-IX的数据，我们将看到至少20％的传输数据包具有最大大小。您还可以查看一般的LAN流量：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/781/958/d18/781958d18d8acef10c22a90468d9a13a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果将这两个图组合在一起，则会得到以下内容（每个数据包大小范围的流量估计）：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/582/396/30b/58239630b238bc207cb768753d6211d4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
或者，如果查看所有这些标头和其他服务信息的流量，我们将获得与另一个图相同的图规模：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/3a8/bdb/a77/3a8bdba77bc55077fe2eb5095454a4d8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
带宽的很大一部分用于最大大小类的数据包的报头。</font><font style="vertical-align: inherit;">由于在流量高峰时，最大的开销成本为246 Gb / s，因此可以假设，如果在这种可能性仍然存在的情况下我们全部切换到“巨型帧”，则这些开销将仅为41 Gb / s。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，我认为，今天这列火车已经离开了互联网的大部分。</font><font style="vertical-align: inherit;">而且，尽管某些提供商使用的MTU等于9000，但大多数提供商不支持它，并且不时尝试在Internet上进行全局更改已变得非常困难。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN489314/index.html">以太网四重奏：旧的速度，新的功能</a></li>
<li><a href="../zh-CN489326/index.html">关于有效企业测试的思考</a></li>
<li><a href="../zh-CN489328/index.html">Null悄悄溜走：使用Java破坏Scala Option</a></li>
<li><a href="../zh-CN489332/index.html">世界上最有效的情报服务情报中的基本助手（第3部分）</a></li>
<li><a href="../zh-CN489336/index.html">接口自行车有毒的祖父。“再次学习，学习和研究”（s1 e3）</a></li>
<li><a href="../zh-CN489342/index.html">创建容错IT基础架构。第4部分。部署Cisco 3850交换机进行网关路由</a></li>
<li><a href="../zh-CN489344/index.html">不留痕迹</a></li>
<li><a href="../zh-CN489352/index.html">我可以在10分钟内从域驱动设计中学到什么？</a></li>
<li><a href="../zh-CN489354/index.html">IdentityServer4。基本概念。OpenID Connect，OAuth 2.0和JWT</a></li>
<li><a href="../zh-CN489356/index.html">AWS，Azure和Gitlab上的CI / CD。OTUS开设的新课程</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>