<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☘️ 🤞 🤾 Geo-tracking en React Native 🐎 👿 🕗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una aplicación móvil puede actuar como el "lugar de trabajo" de un empleado, mientras que puede ser necesario transferir coordenadas geográficas y otr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Geo-tracking en React Native</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/493312/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una aplicación móvil puede actuar como el "lugar de trabajo" de un empleado, mientras que puede ser necesario transferir coordenadas geográficas y otros datos. En el desarrollo de aplicaciones multiplataforma en iOS y Android, a menudo se utilizan marcos como Flutter o React Native para esta tarea. En este artículo, hablamos sobre las características de trabajar con geolocalización en React Native usando el ejemplo de nuestro caso.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/d8/av/bqd8avprg_s7gfc5vohsywtdptg.png"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La confiabilidad, la velocidad y la madurez de React Native a veces son criticadas por los desarrolladores, y hace aproximadamente tres años tales dudas podrían llamarse justificadas. Sin embargo, durante este tiempo, la tecnología se ha vuelto más avanzada, y React Native ha sido reconocido como una herramienta práctica para crear una amplia gama de aplicaciones. En particular, React Native es adecuado para aplicaciones que utilizan coordenadas geográficas, por ejemplo, varios rastreadores, aplicaciones para correos, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También en las tiendas se desarrollan aplicaciones React Native de tiendas en línea, menús de restaurantes, canales de noticias, aplicaciones de entrega, clientes para redes sociales, por lo tanto, una gran cantidad de React Native usa constantemente, sin siquiera pensarlo. Ejemplos simples son Facebook, Instagram, Skype, Uber Eats, Wallmart. Según las previsiones, Microsoft puede reponer esta lista y transferir sus aplicaciones móviles a React Native, especialmente después de que haya implementado el soporte para la plataforma Windows. Existe soporte de React Native para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aplicaciones </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">weechat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">incorporadas</font></a><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">, aunque el soporte y la documentación para estas plataformas sigue siendo bastante escasa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
React Native puede hacer casi todo lo mismo que una aplicación nativa. Por ejemplo, reciba información de los sensores del dispositivo, como lo hacen las aplicaciones Java / Kotlin u ObjC / Swift, o envíe datos en segundo plano mediante el Servicio en primer plano o la búsqueda en segundo plano. La única diferencia es que en React Native necesita implementar una interfaz para la interacción entre la parte nativa y Javascript. Para las tareas cotidianas, estas interfaces a menudo ya están implementadas. Esto también se aplica al seguimiento de la ubicación y el funcionamiento de Javascript en segundo plano: ya existen soluciones en forma de bibliotecas independientes de código abierto. Dio la casualidad de que la comunidad "jala" JavaScript de forma independiente, tanto los programadores como las empresas están utilizando activamente soluciones de código abierto. Pocas comunidades lingüísticas cuentan con el mismo número de bibliotecas, marcos,Utilidades de calidad. Y, sin embargo, en React Native, algunas características que existen en el desarrollo nativo siguen siendo limitadas, y esto debe recordarse.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabaja con React Native</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere varios factores clave que aseguran la velocidad de desarrollo de aplicaciones multiplataforma en React Native:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Código base común</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez escrita la lógica, las pantallas de diseño y los componentes en diferentes plataformas funcionan y tienen el mismo aspecto posible (por ejemplo, en Android, en lugar de las sombras habituales, utilizan la noción de euforia). </font><font style="vertical-align: inherit;">Prácticamente no hay dolor de cabeza eterno para un desarrollador con versiones antiguas; por ejemplo, es fácil agregar soporte incluso para Android 4.4, aunque en la práctica la implementación de esta tarea también depende del uso de módulos nativos adicionales.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flujo de trabajo óptimo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo, React proporciona un flujo de trabajo óptimo que hace que el desarrollo de nuevas funciones sea varias veces más rápido que en los idiomas nativos. </font><font style="vertical-align: inherit;">Esto se aplica al diseño, enfoque de componentes, instalación de dependencia, soluciones arquitectónicas comunes para React.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recarga en caliente</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El desarrollador no necesita reconstruir la aplicación cada vez para ver los cambios. </font><font style="vertical-align: inherit;">Gracias a Hot Reload, lleva solo un par de segundos actualizar la aplicación al estado actual. </font><font style="vertical-align: inherit;">Y en la versión 0.61, Live Reload (ahora es Fast Refresh) también se trajo a la mente, ahora cuando se editan los cambios de composición tipográfica "al vuelo", sin restablecer el estado actual de los componentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al crear una aplicación, varias áreas clave requieren atención especial: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Javascript</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
React Native tiene como objetivo trabajar con Javascript, lo que le permite describir rápidamente la lógica y las interfaces. Hay muchos módulos listos para usar del mundo de Web y Node.js que se pueden usar de la manera habitual (naturalmente, si no están conectados al DOM o al lado del servidor). A pesar de su alta velocidad, Javascript a veces es inferior a los idiomas nativos. No hay multihilo. En React Native, no podemos acceder directamente a la API nativa, aunque esta restricción puede eliminarse pronto. Javascript describe principalmente lo que debe hacerse y representarse en la parte nativa. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) puente</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un bus que acepta llamadas Javascript a través de interfaces especiales proporcionadas por la biblioteca react-native. Las llamadas son mensajes serializados regulares. Para cada componente, una vista simple, un campo de entrada o una llamada al cuadro de diálogo del sistema, hay una interfaz descrita en Javascript con la lógica implementada en la parte nativa. El bus es la parte más lenta, es asíncrono, la transferencia de datos entre Javascript y el nativo lleva tiempo (aparentemente, Facebook puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deshacerse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de él). A menudo, los problemas de rendimiento de las aplicaciones en React Native son causados ​​precisamente por la operación del puente, pero si lo usa correctamente (reduzca la transferencia de datos de un lado a otro al mínimo necesario), el rendimiento en las aplicaciones de React Native no diferirá significativamente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) La parte nativa</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una aplicación en React Native es inicialmente una aplicación nativa ordinaria. </font><font style="vertical-align: inherit;">La peculiaridad es que todas las bibliotecas necesarias ya están conectadas en él para que pueda escribir toda la lógica en React JS. </font><font style="vertical-align: inherit;">Aquí podemos escribir nuestra propia lógica nativa para usarla (o no usarla) en JS, agregar bibliotecas nativas comunes (por ejemplo, para admitir TLS v1.2 en KitKat y versiones anteriores). </font><font style="vertical-align: inherit;">En aplicaciones nativas listas para usar, puede agregar soporte para React Native.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajar con seguimiento geográfico en React Native</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En uno de los proyectos, necesitábamos desarrollar un "lugar de trabajo móvil" para los empleados de nuestros clientes, en particular, para garantizar la transferencia de sus coordenadas geográficas en segundo plano. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay varias herramientas para trabajar con geolocalización en React Native. Por ejemplo, este es un paquete de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comunidad</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> React Native </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">@ react-native-community / geolocation</font></a><font style="vertical-align: inherit;"> , que cubre la mayoría de los </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">casos de</font></a><font style="vertical-align: inherit;"> uso, sin embargo, no funciona en segundo plano. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar nuestra tarea, utilizamos varias soluciones, incluida una biblioteca con el nombre de habla </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ mauron85 / react-native-background-geolocation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Inicialmente, esta biblioteca era un complemento para Cordova, pero luego el autor separó la base e hizo envoltorios separados para React Native. También hay una biblioteca paga del mismo nombre de transistorsoft, pero en el momento de nuestro trabajo en el proyecto, solo ganó con su documentación.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioteca nos permitió establecer configuraciones flexibles para el seguimiento de la ubicación. Por ejemplo, con qué frecuencia interrogar a un servicio del sistema, cómo trabajar en segundo plano, en qué radio la posición se considerará inmóvil. La configuración y los métodos para enviar estas coordenadas al servidor podrían usarse "fuera de la caja", pero decidimos no enviar solicitudes de spam, sino agregar las coordenadas recibidas en el repositorio y enviarlas con un intervalo grande. Al mismo tiempo, la biblioteca nos permitió lanzar nuestra aplicación como actividad en primer plano, lo que nos salvó de dolores de cabeza innecesarios, ya que en muchos dispositivos Android las aplicaciones en segundo plano solo pueden funcionar con configuraciones adicionales ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei, MIUI, Samsung recientemente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de la instalación, puede crear un componente o simplemente un ayudante que administre el servicio. </font><font style="vertical-align: inherit;">Decidimos usar el componente para montarlo con las condiciones del enrutador y conectarlo fácilmente a redux. </font><font style="vertical-align: inherit;">Configura nuestro servicio:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> BackgroundGeolocation, {<font></font>
  Location,<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@mauron85/react-native-background-geolocation'</span>;<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForegroundService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
<span class="hljs-comment">//...</span>
startBackgroundService = <span class="hljs-function">(<span class="hljs-params">config: GeotrackerConfig</span>) =&gt;</span> {
     <span class="hljs-comment">//    </span><font></font>
	BackgroundGeolocation.configure({<font></font>
  	<span class="hljs-attr">desiredAccuracy</span>: BackgroundGeolocation.HIGH_ACCURACY,
  	<span class="hljs-attr">stationaryRadius</span>: <span class="hljs-number">50</span>,
  	<span class="hljs-attr">distanceFilter</span>: config.distance,
  	<span class="hljs-attr">notificationTitle</span>: Strings.Geolocation.NOTIFICATION_TITLE,
  	<span class="hljs-attr">notificationText</span>: Strings.Geolocation.NOTIFICATION_DESCRIPTION,
  	<span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>,
  	<span class="hljs-attr">startOnBoot</span>: <span class="hljs-literal">false</span>,
  	<span class="hljs-attr">stopOnTerminate</span>: <span class="hljs-literal">true</span>,
  	<span class="hljs-attr">locationProvider</span>: BackgroundGeolocation.ACTIVITY_PROVIDER,
  	<span class="hljs-attr">interval</span>: <span class="hljs-keyword">this</span>.runnerInterval,
  	<span class="hljs-attr">fastestInterval</span>: <span class="hljs-number">10000</span>,
  	<span class="hljs-attr">activitiesInterval</span>: <span class="hljs-number">30000</span>,
  	<span class="hljs-attr">stopOnStillActivity</span>: <span class="hljs-literal">false</span>,
  	<span class="hljs-attr">notificationIconColor</span>: Colors.primary,
  	<span class="hljs-attr">notificationIconSmall</span>: <span class="hljs-string">'notification_icon'</span>,<font></font>
	});<font></font>
 <font></font>
     <span class="hljs-comment">//    start()      </span>
                    	BackgroundGeolocation.on(<span class="hljs-string">'authorization'</span>, status =&gt; {
  	<span class="hljs-keyword">if</span> (status !== BackgroundGeolocation.AUTHORIZED) {
    	<span class="hljs-comment">//   </span>
  	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status.hasPermissions) {
        <span class="hljs-comment">// hasPermission -  ,    </span><font></font>
  	}<font></font>
	});<font></font>
 <font></font>
     <span class="hljs-comment">//  </span><font></font>
                    	BackgroundGeolocation.start();<font></font>
};<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos que aquí también puede establecer configuraciones para la notificación, un ícono (de activos nativos). </font><font style="vertical-align: inherit;">¿Qué pasa con los permisos? </font><font style="vertical-align: inherit;">Para Android, después de instalar el paquete, no se requiere nada, la biblioteca se hará cargo de las solicitudes de acceso a la geolocalización del sistema. </font><font style="vertical-align: inherit;">Pero para el funcionamiento normal en iOS en Xcode, también debe habilitar el procesamiento en segundo plano y las actualizaciones de ubicación en la pestaña Firma y capacidades del proyecto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vn/q9/yw/vnq9ywwhisotkblbxko5g3je3he.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementamos el método principal para guardar y enviar coordenadas en el evento on ('ubicación') en el mismo método. </font><font style="vertical-align: inherit;">Funcionará tanto con la aplicación activa como en el estado minimizado:</font></font><br>
<br>
<pre><code class="javascript hljs">BackgroundGeolocation.on(<span class="hljs-string">'location'</span>, location =&gt; {<font></font>
    BackgroundGeolocation.startTask(<span class="hljs-keyword">async</span> taskKey =&gt; {
     <span class="hljs-comment">//       ,</span>
     <span class="hljs-comment">//     iOS-</span>
      <span class="hljs-keyword">const</span> batteryLevel = <span class="hljs-keyword">this</span>.isSimulator<font></font>
        ? <span class="hljs-number">100</span>
        : (<span class="hljs-keyword">await</span> DeviceInfo.getBatteryLevel()) * <span class="hljs-number">100</span>;
      <span class="hljs-keyword">const</span> updateDelta = location.time - <span class="hljs-keyword">this</span>.lastUpdateAt;<font></font>
<font></font>
     <span class="hljs-comment">//      </span>
      <span class="hljs-keyword">this</span>.props.locationUpdate(location);
      <span class="hljs-keyword">this</span>.props.locationAddTrackerData({
        <span class="hljs-attr">altitude</span>: location.altitude,
        <span class="hljs-attr">batteryChargeLevel</span>: batteryLevel,
        <span class="hljs-attr">latitude</span>: location.latitude,
        <span class="hljs-attr">longitude</span>: location.longitude,
        <span class="hljs-attr">course</span>: location.bearing,
        <span class="hljs-attr">accuracy</span>: location.accuracy,
        <span class="hljs-attr">speed</span>: location.speed,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">Number</span>(<span class="hljs-built_in">String</span>(location.time).substr(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)),
        <span class="hljs-attr">isAlertOn</span>: <span class="hljs-literal">false</span>,<font></font>
      });<font></font>
<font></font>
     <span class="hljs-comment">//  ?</span>
      <span class="hljs-keyword">if</span> (updateDelta / <span class="hljs-number">1000</span> &gt; config.sendInterval) {
        <span class="hljs-keyword">this</span>.syncDataWithInterval();
        <span class="hljs-keyword">this</span>.lastUpdateAt = location.time;<font></font>
      }<font></font>
<font></font>
     <span class="hljs-comment">//    AsyncStorage,    </span><font></font>
      Storage.setLastKnownLocation(location);<font></font>
      BackgroundGeolocation.endTask(taskKey);  <span class="hljs-comment">//   !</span><font></font>
    });<font></font>
});<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí llamamos a la acción desde la tienda, donde transferimos los datos de coordenadas en un formato personalizado, almacenando adicionalmente datos en las lecturas de la batería, usando la biblioteca react-native-device-info. </font><font style="vertical-align: inherit;">Todo esto funciona igualmente bien en Android e iOS cuando la aplicación está activa o en segundo plano. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, existen métodos para obtener la ubicación actual (pero esto solo funciona cuando el servicio se está ejecutando), suscribiéndose a las transiciones del estado de la aplicación de activo a segundo plano, cambiando a la configuración del sistema de la aplicación. </font><font style="vertical-align: inherit;">Sin embargo, en general, lo más necesario se da en estos ejemplos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado es un componente que se puede montar, por ejemplo, solo para la parte autorizada:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForegroundService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
	<span class="hljs-comment">//...</span><font></font>
	componentDidMount() {<font></font>
		<span class="hljs-keyword">this</span>.startBackgroundService(<span class="hljs-keyword">this</span>.props.config);<font></font>
	}<font></font>
<font></font>
	componentWillUnmount() {<font></font>
    BackgroundGeolocation.stop();<font></font>
    BackgroundGeolocation.removeAllListeners();<font></font>
  }<font></font>
<font></font>
	startBackgroundService = <span class="hljs-function">(<span class="hljs-params">config: GeotrackerConfig</span>) =&gt;</span> {<font></font>
    BackgroundGeolocation.configure({<font></font>
		<span class="hljs-comment">// ...</span><font></font>
	};<font></font>
<font></font>
	render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
  }<font></font>
} </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si se utiliza react-navigation, puede crear navegación para la parte autorizada de la siguiente manera:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  StackNavigator   </span>
<span class="hljs-keyword">const</span> Navigator = createStackNavigator(RouteConfigs, NavigatorConfig);<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppNavigator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span>&lt;<span class="hljs-title">Props</span>&gt; </span>{
  <span class="hljs-keyword">static</span> router: NavigationRouter = Navigator.router;<font></font>
<font></font>
  componentDidMount(): <span class="hljs-keyword">void</span> {<font></font>
    SplashScreen &amp;&amp; SplashScreen.hide();<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ForegroundService</span> <span class="hljs-attr">navigation</span>=<span class="hljs-string">{this.props.navigation}</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Navigator</span> {<span class="hljs-attr">...this.props</span>} /&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> AppNavigator;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, este navegador se puede usar de la manera habitual en el navegador raíz:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> RootNavigator = createSwitchNavigator(<font></font>
  {<font></font>
    <span class="hljs-attr">Auth</span>: AuthNavigator,
    <span class="hljs-attr">App</span>: AppNavigator,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">initialRouteName</span>: <span class="hljs-string">'Auth'</span>,<font></font>
  },<font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> createAppContainer(RootNavigator);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, el servicio de geolocalización e intercambio de datos solo funcionará en la parte autorizada de la aplicación.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para resumir</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este artículo, examinamos las características del uso de React Native en aplicaciones de geolocalización. </font><font style="vertical-align: inherit;">Como descubrimos, utilizando este marco, los desarrolladores ahora pueden rastrear fácilmente las coordenadas geográficas del dispositivo, por ejemplo, en rastreadores de bicicletas, aplicaciones para correos y reenviadores, aplicaciones para elegir bienes raíces, etc. </font><font style="vertical-align: inherit;">La biblioteca cubre la mayoría de los casos relacionados con el geotracking, en particular, le permite ajustar los intervalos y guardar la carga del dispositivo, funciona de manera estable en segundo plano en ambas plataformas y admite la ejecución automática en Android. </font><font style="vertical-align: inherit;">Al mismo tiempo, para aplicaciones complejas, por regla general, el desarrollo nativo es más adecuado (por ejemplo, para trabajar con cálculos y widgets, como ya escribimos en el </font><font style="vertical-align: inherit;">artículo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gracias por su atención, ¡esperamos que el artículo le haya sido útil!</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es493302/index.html">¿Qué tecnologías ya se han solicitado para luchar contra el coronavirus?</a></li>
<li><a href="../es493304/index.html">Desarrollar un hexápodo desde cero (parte 8): movimiento matemático mejorado</a></li>
<li><a href="../es493306/index.html">Uso de API de puerta de enlace como punto de entrada único para aplicaciones web y API</a></li>
<li><a href="../es493308/index.html">Experiencia real de transferir a casi todos los empleados a un sitio remoto</a></li>
<li><a href="../es493310/index.html">Juego de Dios: organismos artificiales</a></li>
<li><a href="../es493320/index.html">Extienda Laravel con nuestros propios componentes.</a></li>
<li><a href="../es493322/index.html">IT GRAD: primeras impresiones del formato de trabajo remoto</a></li>
<li><a href="../es493332/index.html">¿Por qué las cámaras termográficas no pueden medir la temperatura corporal de una persona?</a></li>
<li><a href="../es493334/index.html">52 mil millones de ataques: amenazas de Trend Micro 2019</a></li>
<li><a href="../es493336/index.html">Cómo el Centro de Informática tradujo el aprendizaje en línea</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>