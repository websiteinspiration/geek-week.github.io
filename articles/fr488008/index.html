<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔒 😰 🤶 Dompter la bête: code hérité, tests et vous 👨🏽‍💻 👰🏻 👵🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le code hérité est un «ancien» code, dont l'âge peut être à la fois de 2 mois et 10 ans. Souvent, les développeurs ont écrit à ce sujet, ce dont l'ent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dompter la bête: code hérité, tests et vous</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/488008/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code hérité est un «ancien» code, dont l'âge peut être à la fois de 2 mois et 10 ans. Souvent, les développeurs ont écrit à ce sujet, ce dont l'entreprise se souvient vaguement. Peut-être qu'ils n'existaient pas du tout, et le code hérité est né avec l'Univers pendant le Big Bang. Depuis lors, les exigences ont changé à plusieurs reprises, le code a été corrigé dans le mode «c'était nécessaire hier», et personne n'a écrit la documentation, comme les tests. Le code hérité est déroutant et fragile, il ne montre ni le début ni la fin. Comment l'approcher? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/zu/jj/zuzujjdvta2gaqnnj8mp1isqcoa.jpeg"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ci-après des clichés de la série "Rick et Morty". Auteurs Justin Royland et Dan Harmon.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez le consulter avec des tests, mais préparez-vous à la douleur. Les problèmes commenceront déjà à partir du moment où vous décidez d'entreprendre un tel projet. Vous devez comprendre pourquoi vous souhaitez le faire, convaincre la direction d'approuver les tests du code hérité et aider vos collègues. Après cela, des questions se posent, par où commencer l'étude, quels tests exécuter en premier et comment ne pas tout casser? Mais l'essentiel est de ne pas tomber dans le désespoir quand on se rend compte qu'il n'y a pas de fin au travail. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kirill Borisov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 12 ans dans l'industrie, au fil des ans, il a parcouru un long chemin dans les béquilles, le code cassé et les cadres pourris des anciens systèmes: des systèmes comptables monolithiques aux microservices d'autorisation. Le voyage lui a valu de l'expérience et des histoires qu'il partagera sous forme de précieux conseils.</font></font><a name="habracut"></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/H4Mp2BSffSM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai un rêve - un jour, travailler sur un nouveau projet. </font><font style="vertical-align: inherit;">Tout ira bien dès le début et aussi frais que la première neige: tests, architecture et sens. </font><font style="vertical-align: inherit;">Mais ce n'est qu'un rêve, car depuis 10 ans, je vends mon talent pour de l'argent et je passe d'un projet hérité à un autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant ce temps, je n'ai plus de nerfs, mais je peux sauver le vôtre en partageant mon expérience d'interaction avec l'héritage. </font><font style="vertical-align: inherit;">Je vais vous dire comment apprivoiser la bête (code hérité): travailler avec le code et les gens, implémenter les tests, si cela doit être fait et comment les développeurs s'y rapportent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui ne sera pas ici:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseils pour la rédaction des tests. </font><font style="vertical-align: inherit;">De nombreux livres, articles et vidéos diverses couvrent cette question.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Méthodologies de discussion. </font><font style="vertical-align: inherit;">BDD, TDD, ATDD - le tout à votre discrétion.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout cela peut violer la NDA. </font><font style="vertical-align: inherit;">Les gens ont une longue mémoire et les avocats ont les bras longs.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que le code hérité</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe de nombreuses définitions. </font><font style="vertical-align: inherit;">Je crois que c'est un </font><font style="vertical-align: inherit;">code </font><font style="vertical-align: inherit;">" </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assez ancien</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " de 2 mois à 10 ans. </font><font style="vertical-align: inherit;">Le code hérité est déroutant et fragile, mais comme un serpent géant dévore sa queue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est ce qui ne vous permet pas de commencer à le tester sereinement. </font><font style="vertical-align: inherit;">Tous les développeurs, des débutants aux plus expérimentés, lorsqu'ils arrivent à un projet hérité, saisissent une lance de tests et se précipitent pour tuer ce monstre. </font><font style="vertical-align: inherit;">La lance se brise et avec elle les gens. </font><font style="vertical-align: inherit;">En conséquence, il reste un développeur sans signes de vie, qui travaille sur un projet hérité depuis des décennies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est-il possible de vaincre cette bête? </font><font style="vertical-align: inherit;">Oui, mais une préparation est nécessaire.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entraînement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lutte contre la bête n'est pas aussi importante que la phase préparatoire. </font><font style="vertical-align: inherit;">Il commence par trois questions pour soi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ja/dj/1f/jadj1f74fzzsrj1lieox-i0i4pk.jpeg"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pourquoi est-ce que je fais cela?" </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sérieusement, pourquoi? </font><font style="vertical-align: inherit;">Après tout, il n'y a que deux options.</font></font><br>
<br>
<ul>
<li>  ,   ,   ,    .</li>
<li>   ,   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voulez-vous travailler pour le confort des autres ou pour votre propre gloire? </font><font style="vertical-align: inherit;">Si pour ce dernier, alors avec le premier succès l'intérêt se dissipera, vous disparaîtrez, tout disparaîtra. </font><font style="vertical-align: inherit;">Vous passerez à autre chose, et les restes pourris de vos efforts obstrueront le projet pour longtemps. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Est-ce que je sais ce que je fais?" </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous avez écrit des tests, vous savez. </font><font style="vertical-align: inherit;">Sinon, avant de vous précipiter sur le monstre, maîtrisez les bases: écrivez 3-4 tests, couvrez une petite partie du code, remplissez votre main et ressentez la puissance. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ai-je le temps pour ça?" </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est formidable d'intervenir dans le code avec de bonnes impulsions et de l'améliorer, en travaillant pour l'avenir. </font><font style="vertical-align: inherit;">Mais il n'y a peut-être pas de temps pour cela lorsque le présent brûle. </font><font style="vertical-align: inherit;">Si c'est le cas, alors le projet a besoin de vous, pas d'une image lumineuse de l'avenir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous répondez à toutes les questions par l'affirmative, passez à l'étape suivante.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reconnaissance</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Examinez la structure du projet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Avez-vous une idée de la structure du projet, des composants et du principe de travail? </font><font style="vertical-align: inherit;">Sûrement oui, mais peut-être que cela ne coïncide pas avec la réalité. </font><font style="vertical-align: inherit;">Il est important de comprendre à quoi vous devez faire face avant de commencer à travailler. </font><font style="vertical-align: inherit;">Consacrez du temps à parcourir le projet et à l'étudier en profondeur. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faites un diagramme de dépendance</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aucun projet ne vit dans le vide. </font><font style="vertical-align: inherit;">Bases de données, services externes, bibliothèques - tout cela peut être utilisé dans le projet. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qui vous a été fait? </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous n'êtes peut-être pas le premier à combattre la bête. </font><font style="vertical-align: inherit;">Examinez les pratiques des «ancêtres» qui ont brûlé et quitté le projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après la reconnaissance, nous passons aux hostilités.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combattez avec l'organisation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier tour est un combat avec votre organisation. L'essentiel est votre manager, patron direct. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manager</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il n'est pas aussi effrayant qu'il n'y paraît. C'est une personne ordinaire avec des besoins ordinaires: livrer le projet à temps et sans problèmes inutiles, obtenir de l'argent et des bonus pour lui et vivre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le chef n'est pas contre vos engagements. Il est contre vous qui vous précipitez vers le projet avec des cris: «Des tests! Des tests! Tests! " Si vous le faites, il vous considérera comme la personne qui passe son temps et ralentit le reste. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montrez l'avantage.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le manager parle la langue du bien, du temps et de l'argent. Comprenez qu'ils sont motivés par le désir de clore le projet à temps et d'obtenir plus de résultats pour moins de ressources. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le test ne doit pas être soumis comme ceci: </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Oh, ce sera cool!</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos idées devraient être promues comme suit: </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Au cours du dernier trimestre, nous avons eu 50 plantages qui pourraient être corrigés au stade du développement de produit. Vous pouvez le corriger à l'aide de tests. Ils confirmeront que les changements n'ont pas changé la fonctionnalité, si nous ne nous y attendons pas. Nous économiserons les heures passées à résoudre ces problèmes et réduirons le montant de la pénalité qui a été payée en raison d'un système défectueux.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dire "optimisation, argent, gain de temps", vous parlez la langue du manager. Quand il entend ces mots, il est imprégné de l'idée. Il ne voit pas en vous le prochain programmeur enragé passionné par les nouvelles technologies, mais une personne qui souhaite améliorer le produit. Il n'approuvera pas toutes vos idées à la fois, mais il est très susceptible de proposer Proof Of Concept. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La preuve de concept augmente les chances.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fournissez au gestionnaire un morceau de code isolé distinct, un sous-système couvert par des tests, démarre et s'exécute. Cela peut être fait si vous prenez l'un des bogues douloureux qui apparaît à une certaine fréquence et essayez de l'attraper et de le corriger avec un test. PoC confirmera vos intentions, montrera que vous avez un plan et que votre travail porte ses fruits. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne promets pas grand-chose.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour le manager, les chiffres sont importants: quels sont les résultats, le timing et par quelles forces. Mais le manager est une créature avide de résultats. Ne promettez pas trop dès le départ. Si vous vous engagez à résoudre tous les problèmes en même temps, le gestionnaire ira aux autorités avec cela. Les autorités diront: "Génial!", Mais réduiront le financement et les délais dans l'espoir que nous remettrons le système beaucoup plus tôt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous sommes d'accord avec le manager, nous nous tournons vers ceux avec qui nous devons travailler tous les jours.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collègues</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ils n'aiment pas le changement.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Un collègue typique d'un projet hérité typique est une personne qui a perdu confiance en la vie et en l'avenir. Il n'est pas enclin à changer et s'est résigné au destin: "Je suis là pour toujours, il n'y a pas moyen de sortir du marais". Le problème est que vous commencez à remuer de l'eau dans ce marais. Vous exigez qu'il écrive et passe des tests, mais il veut faire son travail, terminer la tâche et rentrer chez lui. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kl/ir/d_/klird_9bboxmh81w81c9nvc2gz0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Engagez vos collègues avec des avantages - expliquez pourquoi ils se sentiront mieux. Par exemple, ils passent constamment du temps et des efforts, restant après le travail pour guérir certains bugs. Appuyez dessus: «Si vous ne déployez pas un code cassé pour la production, vous n'aurez pas à passer du temps à le réparer. Nous allons écrire des tests, nous attraperons un tel code, il se cassera moins. " </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faites preuve de patience et d'empathie.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous communiquez avec les gens - demandez pourquoi ils sont préoccupés par votre idée? Suggérez de trouver un terrain d'entente pour vous comprendre. C'est la principale tactique pour travailler avec les gens: ne vous querellez pas, ne vous heurtez pas le front, soyez plus amical. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pourriez être empêché de présenter l'idée avant la réunion des collègues lors du prochain stand-up de l'équipe. Le mécanisme de la «pensée de groupe» fonctionne dans l'équipe: personne ne veut prendre de décision, tout le monde se regarde et voit que personne ne brûle d'enthousiasme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a une sale astuce pour résoudre ce problème. Malheureusement, dans ma vie, je l'ai utilisé plus d'une fois. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diviser pour régner.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rendez-vous chez l'un de vos collègues au déjeuner ou dans le coin et dites: «Toute l'équipe est déjà inscrite, vous êtes la seule à ralentir le processus. Peut-être pouvons-nous trouver une langue commune? »</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir parcouru tout cela tour à tour, vous signez tout le monde. </font><font style="vertical-align: inherit;">Tout le monde aura honte d'admettre qu'il pensait que tout le monde s'était déjà inscrit. </font><font style="vertical-align: inherit;">C'est déshonorant et terrible, mais ça marche. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez cette technique de manière responsable et en dernier recours. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N'oubliez pas - vous devez toujours travailler avec ces personnes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous avons réglé avec nos collègues, nous attendons une autre bête gourmande.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combattez avec la voiture</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est l'astuce du code appelé produit. Commençons par les bases. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démontez la poubelle.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Il est nécessaire de tester afin qu'avec un impact minimal sur le système pour obtenir un résultat vérifiable. Mais tout système hérité est plein de données: elles ont été ajoutées pendant des années depuis le lancement et affectent le comportement du système. Par conséquent, il est nécessaire de tester "à partir de zéro". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Préparez un «système sphérique dans le vide»: videz les sources de données, effectuez le minimum de configurations que le système lance, désactivez tous les «hacks» et «fonctionnalités» possibles. Faites démarrer le système. S'il démarre, vous disposez de l'ensemble de données minimum nécessaire au fonctionnement. C'est déjà un bon point de départ - une "table rase".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant certains effets mesurables, par exemple, en appuyant sur un certain bouton, vous obtiendrez un résultat de travail mesurable. Avec cela, vous pouvez passer à l'étape suivante. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démêlez les données.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tout projet hérité fonctionne sur le principe «doit être livré hier». Tout ce que vous avez fait à l'université ou lu dans des livres ne fonctionne pas ici. Lorsque vous commencez à tester, vous rencontrerez, par exemple, une dépendance cyclique, impossible à recréer dans le programme, mais nécessaire au fonctionnement. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commencez par «l'objet principal».</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour gérer la forêt de dépendances, essayez de penser à quel objet est le principal. Par exemple, pour le système de comptabilité d'entrepôt, l'objet principal est la «boîte». Un objet "étagère" lui est associé, et un objet "ligne" est associé à une "étagère". </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recréez le minimum requis.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous examinez les liens entre les objets et approfondissez l'arborescence des dépendances, vous pouvez déterminer le minimum de données nécessaire pour les objets dépendants. </font><font style="vertical-align: inherit;">Vous devez le recréer pour que le système fonctionne et puisse fonctionner pour tester vos fonctionnalités. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N'ayez pas peur de changer de liens. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous devrez peut-être retrousser vos manches et plonger profondément dans ce gâchis: supprimer et modifier les liens, changer la structure de la base de données. </font><font style="vertical-align: inherit;">Vous êtes venu pour améliorer le système, alors n'ayez pas peur de faire des changements. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons aux tests. </font><font style="vertical-align: inherit;">Pour confondre les anciens produits, une bonne stratégie consiste à tester la fumée.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests de fumée</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le concept de "test de fumée" nous est venu du monde de l'électronique. Un ingénieur a assemblé un circuit géant avec un tas d'ampoules et de fils. Mais avant de commencer les tests, je viens de brancher le circuit sur une prise de courant. Si la fumée a commencé, alors quelque chose s'est mal passé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les systèmes d'information, le concept des tests de fumée est assez simple. Imaginez un service Web, il a un point final. Essayons de lui envoyer une requête GET sans paramètres. Si, pour une raison quelconque, le produit se cassait soudainement (erreur 500), quelque chose s'est mal passé. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le test de fumée est un bon début</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il s'agit d'un test qui teste certaines fonctionnalités et indique clairement que le système fonctionne ou est en panne. Même une simple demande au point de terminaison le plus simple affecte déjà plus de 1% du code. Avec de si petits tests, nous préparons un tremplin pour de nouveaux tests.</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le test de fumée révèle de nombreux problèmes. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est possible que pendant toute la durée du fonctionnement du service personne n'ait deviné envoyer une demande sans paramètres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilisez cette tactique pour couvrir plusieurs points d'entrée principaux dans votre programme: formulaire de saisie de login / mot de passe, services Web de base, boutons. </font><font style="vertical-align: inherit;">C'est quelque chose que vous pouvez déjà montrer au manager et à ses collègues.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests de fonctionnement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce ne sont pas des tests de classes individuelles ou d'une méthode, mais le plus haut niveau possible de test d'une certaine partie de la fonction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez la fonctionnalité pour «générer un rapport dans le service». Au lieu de vérifier des pièces individuelles, nous testons la situation de la demande pour créer un rapport avec certains paramètres et obtenir un fichier de données. Il n'est pas nécessaire de connaître le mécanisme de génération du rapport, mais si le service donne certaines données de sortie avec certaines données d'entrée, alors cette boîte noire avec une certaine probabilité fonctionne comme il se doit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La couverture de la fonctionnalité principale avec de tels tests </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous permet de démarrer rapidement et couvre immédiatement de grandes zones.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vous serez sûr que le code fonctionne au moins approximativement comme vous l'imaginez, gagnez en confiance, remplissez votre main et révélez encore plus de problèmes.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tests fonctionnels sont un moyen et non une fin.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est facile de devenir accro à l'aiguille de test fonctionnel: "Je teste de vraies fonctionnalités! </font><font style="vertical-align: inherit;">C'est à cela que les utilisateurs sont confrontés. » </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un test fonctionnel implique de gros morceaux de code qui peuvent interagir avec des quantités gigantesques de données. </font><font style="vertical-align: inherit;">Par conséquent, 3-4 tests fonctionnels sont bons, 10 sont pires et des milliers de tests qui prennent 9 heures sont trop. </font><font style="vertical-align: inherit;">Malheureusement, cela se produit également. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après les tests fonctionnels, faites des tests unitaires. </font><font style="vertical-align: inherit;">Mais je n'en parlerai pas - vous savez déjà tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes passés par les bases du test des machines et revenons au sujet principal. </font><font style="vertical-align: inherit;">Les collègues et le manager ne sont pas le pire ennemi dans une bataille avec l'héritage. </font><font style="vertical-align: inherit;">Le pire ennemi est vous-même.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combattez avec vous-même</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soyez prêt pour le fait que le chemin vous semblera sans fin</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Travailler pendant une semaine dans votre plan prendra six mois sans perspective de terminer le projet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ua/mi/sy/uamisylmtgmnjteqw7m0iv2wpia.jpeg"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La résistance est inévitable</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tous les alliés finiront par douter, tenteront de s'écarter, les persuaderont de quitter les tests et de passer aux fonctionnalités. Soyez prêt pour cela. Rappelez à chacun pourquoi vous vous êtes impliqué dans tout cela, combien d'efforts et de temps ont été investis. Argument faible, mais pourrait fonctionner. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personne ne garantit le succès</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Même si vous montrez des efforts héroïques, vous mettez tous au travail, votre projet peut encore s'épuiser et la croisade avec les tests ne se terminera en rien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est normal, ce n'est pas la fin de la vie et de la carrière. </font><font style="vertical-align: inherit;">Ce n'est même pas la confirmation que vous êtes un pauvre professionnel. </font><font style="vertical-align: inherit;">La seule conclusion ici est que ce projet particulier a échoué. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais alors vous avez de l'expérience et des connaissances. </font><font style="vertical-align: inherit;">La prochaine fois, lorsque vous prendrez une nouvelle lance dans votre main et que votre cheval accélérera vers un autre moulin à vent, vous serez également prêt à casser cette lance, mais plus tard, par une méthode différente et avec moins de dégâts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Désormais offensant, amer et éternel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mots de séparation</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N'ayez pas peur des commentaires.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> J'ai dû entrer dans ce piège et voir comment les autres y tombaient. J'ai fait quelque chose et amené des collègues à se vanter: "Je l'ai fait!" Mais soudain, il s'avère que mon mécanisme pratique ne convient pas aux collègues, et je n'ai pas demandé. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écrivez des tests, essayez ce que vous implémentez</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Souvent, l'introduction d'un nouveau cadre de test est fascinante, mais vous n'écrivez pas les tests eux-mêmes. Ensuite, il peut arriver que dès que vous les écrivez, vous comprendrez que vous ne pouvez pas utiliser les tests. Peut-être que des collègues le voient également, mais sont silencieux, ou n'écrivent tout simplement pas de tests. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aidez vos collègues en difficulté</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">même s'ils ne le demandent pas. L'aide ne signifie pas prendre tout le travail sur vous-même - elle détend les collègues et les décharge de leurs responsabilités, et le nombre de "bus" tombe à l'unité. Ensuite, vous devenez un testeur humain: quelque chose s'est cassé, CI rouge, guide de test. Aide dans le cadre du raisonnable. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le numéro "bus" n'est pas une blague.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vous ne pouvez pas toujours faire glisser le projet sur vous-même. Tout le monde peut s'épuiser, partir en vacances ou arrêter de fumer. Par conséquent, transmettez à vos collègues vos connaissances et votre responsabilité, ce qui est nécessaire pour faire face à vous. Cela vous aidera à éviter les appels désagréables lorsque vous vous détendrez sur la plage, et CI redevient rouge. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Améliorer les mécanismes de test</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">De nombreux problèmes peuvent être évités simplement parce que les tests lents sont devenus soudainement rapides. </font><font style="vertical-align: inherit;">Auparavant, ils occupaient 20 lignes de code, mais maintenant une. </font><font style="vertical-align: inherit;">Vous ne l'avez pas remarqué, car une fois que vous avez écrit quelque chose et que vous avez oublié: "Ça marche - ne le touchez pas!" </font><font style="vertical-align: inherit;">Mais cette règle n'est pas toujours applicable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous n'êtes pas le centre de l'univers. </font><font style="vertical-align: inherit;">Encore une fois, je répète que le numéro "bus" n'est pas une blague. </font><font style="vertical-align: inherit;">Plus d'une fois, je suis tombé sur une situation où une personne a commencé à tester, puis a reçu une offre pour le projet plus frais: il a tout quitté, s'est enfui, mais n'a pas laissé de commentaires et de documentation. </font><font style="vertical-align: inherit;">Tout fonctionne jusqu'à un nouveau commit, mais il est impossible de le corriger - personne ne comprend comment tout fonctionne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne veux pas que tu sois cette personne. </font><font style="vertical-align: inherit;">Ne vous transformez pas en facteur limitant.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écrivez la documentation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mener des formations.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partagez votre expérience.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque tous les collègues sont au même niveau que vous (plus ou moins), le processus passera d'une course d'une personne à une course de relais par équipe avec le passage du drapeau. Ce n'est que grâce au soutien de vos collègues que vous réussirez. Si vous êtes seul sur le projet, pensez que quelqu'un d'autre après vous souffrira également seul. Donnez à votre disciple un ami sous forme de documentation, ne laissez pas mourir seul.</font></font><br>
<br>
<blockquote>27   Moscow Python Conf++  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>       Python 2  Python 3 —      2020 . <br>
<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a>    (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fb</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vk</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">twitter</a>)  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">telegram-</a> .  ! </blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487990/index.html">Cybermenaces. Prédiction pour 2020: intelligence artificielle, lacunes dans les nuages, informatique quantique</a></li>
<li><a href="../fr487996/index.html">Comment les pilotes de script et les mères de serveurs prennent le contrôle de l'informatique</a></li>
<li><a href="../fr488000/index.html">Tesla Plaid. Deux options pour une configuration d'entraînement à trois moteurs</a></li>
<li><a href="../fr488002/index.html">Le cas d'un geek</a></li>
<li><a href="../fr488006/index.html">À Moscou Python Conf ++, venez parler aux développeurs de langage</a></li>
<li><a href="../fr488010/index.html">Outils de conception pilotés par domaine</a></li>
<li><a href="../fr488012/index.html">Parking pour vos inconvénients</a></li>
<li><a href="../fr488014/index.html">9. Mise en route de Fortinet v6.0. Journalisation et rapports</a></li>
<li><a href="../fr488018/index.html">CAPTCHA, cas particulier: on casse un réseau neuronal avec trente lignes de code</a></li>
<li><a href="../fr488020/index.html">Vivaldi 2.11 - One Touch Beauty</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>