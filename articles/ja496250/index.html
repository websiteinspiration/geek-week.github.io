<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧒🏽 🛫 🥥 どのように奇妙なコードがエラーを隠すのですか？TensorFlow.NET分析 👩‍👦 ➡️ 🧓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="静的分析は、エラーだけでなく、将来彼と一緒に作業しなければならないプログラマーを困惑させる可能性のある疑わしい奇妙なコードを時間内に見つけるのに役立つため、開発者にとって非常に便利なツールです。このアイデアは、人気のあるTensorFlow機械学習ライブラリと連携するように開発されているTensor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>どのように奇妙なコードがエラーを隠すのですか？TensorFlow.NET分析</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/496250/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/765/bb4/d84/765bb4d84187d986358a301bbeed082f.png" alt="TensorFlow.NETとPVS-Studio"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
静的分析は、エラーだけでなく、将来彼と一緒に作業しなければならないプログラマーを困惑させる可能性のある疑わしい奇妙なコードを時間内に見つけるのに役立つため、開発者にとって非常に便利なツールです。このアイデアは、人気のあるTensorFlow機械学習ライブラリと連携するように開発されているTensorFlow.NETオープンC＃プロジェクトの分析によって示されます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の名前はニキータリピリンです。</font><font style="vertical-align: inherit;">少し前に、PVS-StudioのC＃プログラマー部門に参加しました。</font><font style="vertical-align: inherit;">従来、チームのすべての新規参入者は、PVS-Studio静的アナライザーを使用してさまざまな開いているプロジェクトをチェックした結果について説明する記事を書いています。</font><font style="vertical-align: inherit;">このような記事は、新入社員が製品をよりよく理解するのに役立ち、同時に静的分析手法の普及という点で追加の利点を提供します。</font><font style="vertical-align: inherit;">オープンプロジェクトの分析に関する私の最初の作業に慣れることをお勧めします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムコードで発生する可能性のあるさまざまなエラーは驚くべきものです。すぐに明らかになるものもあれば、作成されたアプリケーションの表面を調べると、経験豊富な開発者のチームがコードレビューを行っても気づきにくいものもあります。ただし、不注意やその他の理由により、プログラマーが奇妙で非論理的なコードを作成することもありますが、それでも（機能しそうに）機能します。しかし、さらに、書かれたものに戻るとき、または他の人がこのコードを研究するとき、答えられない質問が起こり始めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古いプログラムをリファクタリングすると、特にプログラムの他の部分がそれに依存している場合に問題が発生する可能性があります。そのため、率直に湾曲した構造でさえ見つけた場合、「動作しますか？」触らないで！ ″。その結果、ソースの調査が困難になり、使用可能な機能を拡張することが困難になります。コードベースが詰まっているため、小さく見えないものの、非常に不快な可能性のある内部の問題が時間内に修正されない可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ある時点で、このエラーの影響が感じられますが、開発者の疑いが一度にリファクタリングされなかった多数の奇妙なコードフラグメントに当てはまるため、検索には時間がかかります。このことから、特定のフラグメントのさまざまな問題と奇妙さは、その作成直後に修正する必要があります。すべてをそのままにしておく合理的な理由がある場合（たとえば、コードが「後で″のためにある種のブランクとして書き込まれる場合」）、そのようなフラグメントには説明コメントを伴う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、開発者の資格に関係なく、問題のある単純に失敗した瞬間が彼の視線から外れる可能性があり、「一時的な解決策」がどこかで適用され、すぐに忘れられて「永続的」になることにも注意してください。その後、そのようなコードの分析（おそらく、別の開発者がこれに従事することになります）は、許容できないほどの労力を費やします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような場合、コードレビューが役立ちます。ただし、タスクが非常に深刻な場合、このオプションには多くの時間が必要になります。さらに、小さなエラーや欠陥がたくさんある場合、その後ろで審査官は高レベルのエラーに気付かないかもしれません。コードのチェックは退屈な作業になり、レビューの効果は徐々に低下します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、日常業務は人からコンピュータへとはるかに効率的に移行されます。このアプローチは、現代の多くの分野で使用されています。さまざまなプロセスの自動化が繁栄の鍵です。このトピックのコンテキストでの自動化とは何ですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合理的で安定した作業コードを作成する問題を解決するための信頼できるアシスタントは、静的分析です。アクティビティの結果をレビューに送信する前に、プログラマーは自動チェックを実行でき、他の開発者（および自分自身）に不要な作業の負担をかけません。コードは、すべてのアナライザー警告が考慮に入れられた後にのみ検証のために送信されます。エラーが修正され、奇妙な瞬間が書き直されたか、少なくともコメントで説明されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、コードレビューの必要性はなくなりませんが、静的分析はその実装を補完し、大幅に簡素化します。</font><font style="vertical-align: inherit;">エラーの十分に大きな部分はアナライザーのおかげで修正され、奇妙な瞬間は間違いなく忘れられず、それに応じてマークされます。</font><font style="vertical-align: inherit;">したがって、コードレビューを使用すると、複雑な論理的相互作用の実装の正しさを検証し、残念ながらアナライザー（これまでのところ）で検出できない根本的な問題を見つけることに集中できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TensorFlow.NET</font></font></h2><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d02/39d/72d/d0239d72ded7154a696d5c975a0555d1.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事はTensorFlow.NETプロジェクトに触発されました。これは、人気のあるTensorFlow機械学習ライブラリの機能をC＃コードを介して操作する機能の実装を表します（ちなみに、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も行い</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ました</font></a><font style="vertical-align: inherit;">）。このアイデアは非常に興味深いように思われました。執筆時点では、ライブラリの操作はPython、Java、Goでしか利用できないためです。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">GitHub</font></a><font style="vertical-align: inherit;">で</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
利用可能なソースコード</font><font style="vertical-align: inherit;">は常に更新されており、現在のボリュームは10万行強です。表面的な調査の後、静的解析を使用して検証を実行したいという要望がありました。 PVS-Studioは特定のツールとして使用され、かなり多数の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">異なるプロジェクトで</font></a><font style="vertical-align: inherit;">その効果が証明されています</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/261/70b/247/26170b247e9b81a3643bd5682b7d5203.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TensorFlow.NETの場合、アナライザーはいくつかの警告を表示しました：高レベル39、中レベル227、低レベル154（警告レベルについて</font><font style="vertical-align: inherit;">は、「警告レベルと診断ルールのセット」のサブセクションを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">）。それぞれを詳細に分析すると、この記事は非常に巨大になるため、私にとって最も興味深いと思われるものだけを以下に説明します。発見された問題のいくつかはプロジェクトで数回発生し、そのようなコードの各部分の分析はこの記事の範囲を超えていることにも注意する価値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクト自体はかなり深刻なタスクを設定し、残念ながら、さまざまな種類の奇妙なコードフラグメントの出現は避けられません。</font><font style="vertical-align: inherit;">この記事では、静的分析を使用することで、プログラマーの作業を大幅に簡略化できることを示し、質問の原因となる可能性のある領域を指摘します。</font><font style="vertical-align: inherit;">警告は常にエラーを示すとは限りませんが、多くの場合、人に質問を引き起こすコードを示します。</font><font style="vertical-align: inherit;">したがって、奇妙なコードが再設計されるか、いずれにしてもそれに応じてコメントされる可能性が大幅に高まります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザーレポートの研究で注目を集めたフラグメント</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、このプロジェクトのかなり多数のアナライザー警告は、それほどエラーではなく、奇妙なコードと呼ばれることがあります。警告が出ている回線を見ると、少なくとも戸惑いが生じます。もちろん、以下の例のいくつかはおそらく「一時的な解決策」ですが、この問題についてはコメントしていません。つまり、将来このコードを使用する誰かが質問をして、その答えを検索することになります余分な時間がかかります。</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/263/3fc/e7c/2633fce7cba470cd8a0c16e6751b3513.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、いくつかの警告は明らかに奇妙なだけでなく間違っているコードを指しています。</font><font style="vertical-align: inherit;">これが「奇妙なコード」の主な危険です-奇妙な解決策をあちこちに見て、コードが間違っているように見えることに徐々に慣れると、実際の間違いに気づくのが非常に困難になります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">洗練されたコレクションツアー</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> _RemoveDefaultAttrs(....)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
  producer_op_list.Op.Select(op =&gt;<font></font>
  {<font></font>
    producer_op_dict[op.Name] = op;<font></font>
    <span class="hljs-keyword">return</span> op;<font></font>
  }).ToArray();           <font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数 'ToArray'の戻り値を使用する必要があります。 importer.cs 218 </font><font style="vertical-align: inherit;">この関数によって返された値は変数に割り当てられていないため、</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザー</font><font style="vertical-align: inherit;">はこの時点での</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の呼び出しを</font><font style="vertical-align: inherit;">疑わしい</font><font style="vertical-align: inherit;">と見なし</font><font style="vertical-align: inherit;">ます。ただし、そのようなコードはエラーではありません。この構成は</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">producer_op_list.Op</font></i><font style="vertical-align: inherit;">リストの要素に対応する値を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">producer_op_dict</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディクショナリに入力するために使用され</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コレクション内のすべての要素に対して</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">Select</font></i><font style="vertical-align: inherit;">メソッドの引数として渡された関数が</font><font style="vertical-align: inherit;">呼び出されるようにするに</font><i><font style="vertical-align: inherit;">は</font></i><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">ToArray</font></i><font style="vertical-align: inherit;">の呼び出し</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">必要</font><font style="vertical-align: inherit;">です。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の意見では、コードは最適に見えません。</font><font style="vertical-align: inherit;">ディクショナリーへの入力はいくぶん自明ではなく、開発者の中には</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArrayの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「不要な」呼び出しを削除したい場合があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ここで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foreachループ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すると、はるかに簡単で理解しやすくなります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
<font></font>
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> op <span class="hljs-keyword">in</span> producer_op_list.Op)<font></font>
{<font></font>
  producer_op_dict[op.Name] = op;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、コードはできるだけ単純に見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の同様の瞬間は次のようになります。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  inference_graph.Node.Select(x =&gt; map_name_to_node[x.Name] = x).ToArray();<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数 'ToArray'の戻り値を使用する必要があります。</font><font style="vertical-align: inherit;">graph_util_impl.cs 48 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
唯一の違いは、そのようなエントリはより簡潔に見えますが、</font><font style="vertical-align: inherit;">ここで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しを削除するという誘惑だけが</font><font style="vertical-align: inherit;">消えることはなく、それでも明らかではないように見えます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一時的な解決策</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">var</span> source_op_name = get_input_name(node);
  <span class="hljs-keyword">while</span>(map_name_to_node[source_op_name].Op == <span class="hljs-string">"Identity"</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException);<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ内の無条件の「スロー」。 graph_util_impl.cs 73 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検討中のプロジェクトでは、次のアプローチがよく使用されます。ある動作を後で実装する必要がある場合、適切な場所に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedExceptionが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スローされ</font><font style="vertical-align: inherit;">ます。アナライザは、この作品で可能なエラーを警告する理由は明らかである：使用して</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いる間</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本当にあまりにも合理的に見えません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、一時的な解決策の使用が原因で表示される唯一の警告ではありません。たとえば、メソッドがあります：</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _SoftmaxCrossEntropyWithLogitsGrad(<font></font>
  Operation op, Tensor[] grads<font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> grad_loss = grads[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> grad_grad = grads[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> softmax_grad = op.outputs[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> grad = _BroadcastMul(grad_loss, softmax_grad);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> logits = op.inputs[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span>(grad_grad != <span class="hljs-literal">null</span> &amp;&amp; !IsZero(grad_grad)) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"_SoftmaxCrossEntropyWithLogitsGrad"</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[] <font></font>
  {<font></font>
    grad,<font></font>
    _BroadcastMul(grad_loss, -nn_ops.log_softmax(logits))<font></font>
  };<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 'grad_grad！= Null &amp;&amp;！IsZero（grad_grad）'は常にfalseです。</font><font style="vertical-align: inherit;">nn_grad.cs 93 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、</font><font style="vertical-align: inherit;">このコードに到達できない</font><font style="vertical-align: inherit;">ため、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException（ "_ SoftmaxCrossEntropyWithLogitsGrad"）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がスローされることはありません。</font><font style="vertical-align: inherit;">その理由を解明するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsZero</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数のコードに移動する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsZero</span>(<span class="hljs-params">Tensor g</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[] { <span class="hljs-string">"ZerosLike"</span>, <span class="hljs-string">"Zeros"</span> }.Contains(g.op.type))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
<font></font>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"IsZero"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッドは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trueを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返す</font><font style="vertical-align: inherit;">か、例外をスローします。</font><font style="vertical-align: inherit;">このコードはエラーではありません-明らかに、ここでの実装は後で行うために残されています。</font><font style="vertical-align: inherit;">主なことは、「それから」が実際に到着したということです。</font><font style="vertical-align: inherit;">そうですね、PVS-Studioでは、ここにそのような欠陥があることを忘れないようにすることが非常にうまくいきました:)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TensorはTensorですか？</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Tensor[] _ExtractInputShapes(Tensor[] inputs)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> sizes = <span class="hljs-keyword">new</span> Tensor[inputs.Length];
  <span class="hljs-keyword">bool</span> fully_known = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; inputs.Length; i++)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> x = inputs[i];<font></font>
<font></font>
    <span class="hljs-keyword">var</span> input_shape = array_ops.shape(x);
    <span class="hljs-keyword">if</span> (!(input_shape <span class="hljs-keyword">is</span> Tensor) || input_shape.op.type != <span class="hljs-string">"Const"</span>)<font></font>
    {<font></font>
      fully_known = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    sizes[i] = input_shape;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">過剰な型チェック。</font><font style="vertical-align: inherit;">オブジェクトは既に「テンソル」タイプです。</font><font style="vertical-align: inherit;">array_grad.cs 154 </font><i><font style="vertical-align: inherit;">shape</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッドの戻り値の型</font><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">Tensor</font></i><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">したがって、</font><i><font style="vertical-align: inherit;">input_shapeはTensor</font></i><font style="vertical-align: inherit;">チェック</font><font style="vertical-align: inherit;">であり、少なくとも奇妙に見えます。</font><font style="vertical-align: inherit;">おそらく、メソッドが別のタイプの値を返し、検証が意味をなすようになると、Tensorの代わりに条件がこのクラスのある種の継承を指定する必要がある可能性もあります。</font><font style="vertical-align: inherit;">何らかの方法で、開発者はこのフラグメントに注意を払う必要があります。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">徹底的なチェック</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _BaseFusedBatchNormGrad(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> results = grad_fun(<span class="hljs-keyword">new</span> FusedBatchNormParams<font></font>
  {<font></font>
    YBackprop = grad_y,<font></font>
    X = x,<font></font>
    Scale = scale,<font></font>
    ReserveSpace1 = pop_mean,<font></font>
    ReserveSpace2 = pop_var,<font></font>
    ReserveSpace3 = version == <span class="hljs-number">2</span> ? op.outputs[<span class="hljs-number">5</span>] : <span class="hljs-literal">null</span>,<font></font>
    Epsilon = epsilon,<font></font>
    DataFormat = data_format,<font></font>
    IsTraining = is_training<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">var</span> (dx, dscale, doffset) = (results[<span class="hljs-number">0</span>], results[<span class="hljs-number">1</span>], results[<span class="hljs-number">2</span>]);
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3021</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じ条件式を持つ2つの「if」ステートメントがあります。</font><font style="vertical-align: inherit;">最初の「if」ステートメントには、メソッドの戻り値が含まれています。</font><font style="vertical-align: inherit;">これは、2番目の「if」ステートメントが意味のないnn_grad.csであることを意味します230</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 'data_format == "NCHW"'は常にfalseです。</font><font style="vertical-align: inherit;">nn_grad.cs 247</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のいくつかの例とは異なり、コードに明らかに問題があります。</font><font style="vertical-align: inherit;">2番目のチェックは意味がありません。条件がtrueの場合、プログラムの実行は条件にまったく到達しないためです。</font><font style="vertical-align: inherit;">おそらく、ここでタイプミスが許可されているか、チェックの1つが一般に不必要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選択の幻想</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> Tensor <span class="hljs-title">Activate</span>(<span class="hljs-params">Tensor x, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  ....<font></font>
  Tensor negative_part;<font></font>
  <span class="hljs-keyword">if</span> (Math.Abs(_threshold) &gt; <span class="hljs-number">0.000001f</span>)<font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  } <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「then」ステートメントは「else」ステートメントと同等です。 gen_nn_ops.activations.cs 156 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発で静的分析を使用することの有効性のかなり面白いデモ。開発者がこの特定のコードを書いた合理的な理由を考え出すことは困難です。おそらくこれは、典型的なコピー/ペーストエラーです（もちろん、これは別の「後で」になることもあります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様のプランには他にもフラグメントがあります。次に例を示します。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Operation _GroupControlDeps(
  <span class="hljs-keyword">string</span> dev, Operation[] deps, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span><font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">return</span> tf_with(ops.control_dependencies(deps), ctl =&gt;<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (dev == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
  });<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「then」ステートメントは「else」ステートメントと同等です。</font><font style="vertical-align: inherit;">control_flow_ops.cs 135 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一度チェックが理にかなっていたが、時間が経つとそれが消えるか、または将来さらにいくつかの変更が計画されています。</font><font style="vertical-align: inherit;">ただし、どちらか一方のオプションだけでは、この奇妙さを説明することなく、コードに同様のものを残す十分な正当性はないようです。</font><font style="vertical-align: inherit;">高い確率で、コピーと貼り付けのエラーがまったく同じ方法で行われました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遅ればせながらチェック</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] <span class="hljs-title">Input</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] batch_shape = <span class="hljs-literal">null</span>,
  TF_DataType dtype = TF_DataType.DtInvalid,
  <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>,
  <span class="hljs-keyword">bool</span> sparse = <span class="hljs-literal">false</span>,
  Tensor tensor = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> batch_size = batch_shape[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> shape = batch_shape.Skip(<span class="hljs-number">1</span>).ToArray(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
  InputLayer input_layer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span> (batch_shape != <span class="hljs-literal">null</span>)                   <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
  <span class="hljs-keyword">else</span><font></font>
    ....<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullに対して検証される前に、「batch_shape」オブジェクトが使用されました。</font><font style="vertical-align: inherit;">チェック行：39、42。keras.layers.cs 39 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数の潜在的な使用に関する古典的でかなり危険なエラー。どこにもリンクされていません。</font><font style="vertical-align: inherit;">この場合、コードは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batch_shape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なる</font><font style="vertical-align: inherit;">可能性を明示的に示唆してい</font><i><font style="vertical-align: inherit;">ます。</font></i><font style="vertical-align: inherit;">これは、引数のリストからも、同じ変数の後続の検証からも明らかです。</font><font style="vertical-align: inherit;">したがって、ここのアナライザーは明確なエラーを示します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別の「後で」のために？</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MnistDataSet</span>(<span class="hljs-params">
  NDArray images, NDArray labels, Type dataType, <span class="hljs-keyword">bool</span> reshape // &lt;=
</span>)</span> <font></font>
{<font></font>
  EpochsCompleted = <span class="hljs-number">0</span>;<font></font>
  IndexInEpoch = <span class="hljs-number">0</span>;<font></font>
<font></font>
  NumOfExamples = images.shape[<span class="hljs-number">0</span>];<font></font>
<font></font>
  images = images.reshape(<font></font>
    images.shape[<span class="hljs-number">0</span>], images.shape[<span class="hljs-number">1</span>] * images.shape[<span class="hljs-number">2</span>]<font></font>
  );<font></font>
  images = images.astype(dataType);<font></font>
  <span class="hljs-comment">// for debug np.multiply performance</span>
  <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> Stopwatch();<font></font>
  sw.Start();<font></font>
  images = np.multiply(images, <span class="hljs-number">1.0f</span> / <span class="hljs-number">255.0f</span>);<font></font>
  sw.Stop();<font></font>
  Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{sw.ElapsedMilliseconds}</span>ms"</span>);<font></font>
  Data = images;<font></font>
<font></font>
  labels = labels.astype(dataType);<font></font>
  Labels = labels;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3117</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクターパラメーター ' </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">reshape</font></a><font style="vertical-align: inherit;"> 'は使用されません。</font><font style="vertical-align: inherit;">MnistDataSet.cs 15 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の奇妙な点と同様に、これは機能が完全に実装</font><font style="vertical-align: inherit;">されているわけではなく、将来このコンストラクタで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reshape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font><font style="vertical-align: inherit;">が何らかの形で使用される</font><font style="vertical-align: inherit;">可能性が高いため</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">でも、とりあえずあんなにここに投げ込まれているようです。</font><font style="vertical-align: inherit;">これが実際に「後で」実行される場合は、これにコメントを付けることをお勧めします。</font><font style="vertical-align: inherit;">そうでない場合は、オブジェクトを構築するコードが追加のパラメーターをコンストラクターにスローする必要があることがわかります。これを行わない方が便利な場合もあります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とらえどころのないnull逆参照</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _GatherV2Grad(Operation op, Tensor[] grads)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span>((<span class="hljs-keyword">int</span>)axis_static == <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> params_tail_shape = params_shape.slice(<span class="hljs-keyword">new</span> NumSharp.Slice(start:<span class="hljs-number">1</span>));
    <span class="hljs-keyword">var</span> values_shape = array_ops.concat(
      <span class="hljs-keyword">new</span>[] { indices_size, params_tail_shape }, <span class="hljs-number">0</span><font></font>
    );<font></font>
    <span class="hljs-keyword">var</span> values = array_ops.reshape(grad, values_shape);<font></font>
    indices = array_ops.reshape(indices, indices_size);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[]<font></font>
    {<font></font>
      <span class="hljs-keyword">new</span> IndexedSlices(values, indices, params_shape), <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-literal">null</span>,
      <span class="hljs-literal">null</span><font></font>
    };<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3146</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド内の第1引数 'values'のnull逆参照の可能性があります。 '_outputs.FirstOrDefault（）'はデフォルトのnull値を返すことができます。 array_grad.cs 199 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題が何であるかを理解するには、最初に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexedSlices</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクター</font><i><font style="vertical-align: inherit;">コード</font></i><font style="vertical-align: inherit;">を参照する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IndexedSlices</span>(<span class="hljs-params">
  Tensor values, Tensor indices, Tensor dense_shape = <span class="hljs-literal">null</span>
</span>)</span><font></font>
{<font></font>
  _values = values;<font></font>
  _indices = indices;<font></font>
  _dense_shape = dense_shape;<font></font>
<font></font>
  _values.Tag = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// &lt;=</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、</font><font style="vertical-align: inherit;">このコンストラクタに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">渡す</font><font style="vertical-align: inherit;">と例外がスローされます。しかし、なぜアナライザは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が含まれている可能性がある</font><font style="vertical-align: inherit;">と見なすの</font><font style="vertical-align: inherit;">ですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioは、データフロー分析手法を使用して、コードのさまざまな部分で変数の可能な値のセットを見つけることができます。警告は、指定された変数のnullが次の行で返される可能性があることを示しています：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ただし、上記のコードを見ると、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">values</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数の</font><i><font style="vertical-align: inherit;">値</font></i><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape（grad、values_shape）を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出して取得されていることが</font><i><font style="vertical-align: inherit;">わかり</font></i><font style="vertical-align: inherit;">ます。では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault（）は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どこにあるのでしょうか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際のところ、データストリームを分析するときは、現在の関数だけでなく、すべての関数も考慮されます。</font><font style="vertical-align: inherit;">PVS-Studioは、任意の場所にある任意の変数の可能な値のセットに関する情報を取得します。</font><font style="vertical-align: inherit;">したがって、警告手段の実装こと</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape（卒業生、values_shapeは）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">への呼び出し含ま</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault（） </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">最終的に返される結果を。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを確認するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reshape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装に移動します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
            =&gt; gen_array_ops.reshape(tensor, shape, <span class="hljs-literal">null</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font><font style="vertical-align: inherit;">内部で呼び出さ</font><font style="vertical-align: inherit;">れた</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reshape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドに移動し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> _op = _op_def_lib._apply_op_helper(
    <span class="hljs-string">"Reshape"</span>, name, <span class="hljs-keyword">new</span> { tensor, shape }<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> _op.output;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_apply_op_helper</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数</font><font style="vertical-align: inherit;">は、</font><i><font style="vertical-align: inherit;">出力</font></i><font style="vertical-align: inherit;">プロパティを含む</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスのオブジェクトを返し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。警告で説明されているコードが呼び出されるのは、その値を受け取ったときです。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> Tensor output =&gt; _outputs.FirstOrDefault();</code></pre><br>
<i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もちろん、</font><i><font style="vertical-align: inherit;">Tensor</font></i><font style="vertical-align: inherit;">は参照型であるため、そのデフォルト値は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">になり</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらすべてから、PVS-Studioはコードの論理構造を綿密に分析し、呼び出しの構造に深く浸透していることがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分析装置は作業を完了し、潜在的に問題のある場所を示しています。</font><font style="vertical-align: inherit;">プログラマは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputsの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素</font><font style="vertical-align: inherit;">が存在しない</font><font style="vertical-align: inherit;">場合に状況が発生するかどうかを確認する必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、静的分析では、少なくとも疑わしいフラグメントに注意を払って、実際にエラーが実際に発生するかどうかを評価するよう開発者に強制します。</font><font style="vertical-align: inherit;">このアプローチにより、気付かれないエラーの数が急速に減少します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信頼できない待機？</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> (LoopVar&lt;TItem&gt;, Tensor[]) _BuildLoop&lt;TItem&gt;(<font></font>
  ....<font></font>
) <span class="hljs-keyword">where</span> ....<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// Finds the closest enclosing non-None control pivot.</span>
  <span class="hljs-keyword">var</span> outer_context = _outer_context;
  <span class="hljs-keyword">object</span> control_pivot = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">while</span> (outer_context != <span class="hljs-literal">null</span> &amp;&amp; control_pivot == <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (control_pivot != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザー警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3032</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイラーが一部の変数を最適化する可能性があるため、この式での待機は信頼できません。</font><font style="vertical-align: inherit;">これを回避するには、揮発性変数または同期プリミティブを使用します。</font><font style="vertical-align: inherit;">WhileContext.cs 212 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザは、このような期待の実装がコンパイラによって最適化できることを示していますが、実際にここで待機して実装しようとしたのではないかと思います。おそらく、コードが追加されておらず、今後さらに開発される予定です。</font><font style="vertical-align: inherit;">この</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がプロジェクトの他の場所で使用されていることを考えると、</font><i><font style="vertical-align: inherit;">ここ</font></i><font style="vertical-align: inherit;">で</font><i><font style="vertical-align: inherit;">NotImplementedExceptionを</font></i><font style="vertical-align: inherit;">スローする価値があるかもしれません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">どういうわけか、私はいくつかの説明コメントは明らかに害を及ぼさないと思います。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">境界を壊す</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TensorShape</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[][] dims</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span>(dims.Length == <span class="hljs-number">1</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">switch</span> (dims[<span class="hljs-number">0</span>].Length)<font></font>
    {<font></font>
      <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: shape = <span class="hljs-keyword">new</span> Shape(<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: shape = Shape.Vector((<span class="hljs-keyword">int</span>)dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: shape = Shape.Matrix(dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], dims[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]); <span class="hljs-keyword">break</span>; <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">default</span>: shape = <span class="hljs-keyword">new</span> Shape(dims[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"TensorShape int[][] dims"</span>);<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザの警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3106</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おそらくインデックスが範囲外です。 「1」インデックスは「薄暗い」境界を超えています。 TensorShape.cs 107 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が見た奇妙なコードスニペットの中に、本当の間違いがありました。次のフラグメントはここでは誤りです：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [1] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 1つの要素の配列からインデックス1の要素を取得するのは間違いです。同時に、フラグメントを</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [0] [2]に変更すると</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、別のエラーが表示されます</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-dims [0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列からインデックス2の要素を取得します</font><font style="vertical-align: inherit;">。この場合、ブランチの長さは2です。したがって、この問題は「ダブルボトム」のように。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いずれの場合も、このコードフラグメントは開発者が調査および修正する必要があります。</font><font style="vertical-align: inherit;">私の意見では、この例はPVS-Studioでのデータフロー分析のパフォーマンスの優れた例です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オレパトカ？</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> _init_from_args(<span class="hljs-keyword">object</span> initial_value = <span class="hljs-literal">null</span>, ....) <span class="hljs-comment">// &lt;=</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> init_from_fn = initial_value.GetType().Name == <span class="hljs-string">"Func`1"</span>; <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
  tf_with(...., scope =&gt;<font></font>
  {<font></font>
    ....<font></font>
    tf_with(...., <span class="hljs-keyword">delegate</span><font></font>
    {<font></font>
      initial_value = ops.convert_to_tensor(  <span class="hljs-comment">// &lt;=</span>
        init_from_fn ? (initial_value <span class="hljs-keyword">as</span> Func&lt;Tensor&gt;)():initial_value,<font></font>
        name: <span class="hljs-string">"initial_value"</span>,<font></font>
        dtype: dtype<font></font>
      );<font></font>
    });<font></font>
    _shape = shape ?? (initial_value <span class="hljs-keyword">as</span> Tensor).TensorShape;<font></font>
    _initial_value = initial_value <span class="hljs-keyword">as</span> Tensor; <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
    _dtype = _initial_value.dtype.as_base_dtype(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
    <span class="hljs-keyword">if</span> (_in_graph_mode)<font></font>
    {<font></font>
      ....<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (initial_value != <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
      {<font></font>
        ....<font></font>
      }<font></font>
<font></font>
      ....<font></font>
    }<font></font>
<font></font>
    ....<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードを理解するには、tf_with関数の実装を紹介することも価値があります。</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">DebuggerStepThrough</span>] <span class="hljs-comment">// with "Just My Code" enabled this lets the </span>
[<span class="hljs-meta">DebuggerNonUserCode()</span>]  <span class="hljs-comment">//debugger break at the origin of the exception</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> tf_with&lt;T&gt;(<font></font>
  T py, Action&lt;T&gt; action<font></font>
) <span class="hljs-keyword">where</span> T : ITensorFlowObject<font></font>
{<font></font>
  <span class="hljs-keyword">try</span><font></font>
  {<font></font>
    py.__enter__();<font></font>
    action(py);<font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span><font></font>
  {<font></font>
    py.__exit__();<font></font>
    py.Dispose();<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザの警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：V3019おそらく、「as」キーワードを使用して型変換した後、不正な変数がnullと比較されます。変数「initial_value」、「_ initial_value」を確認してください。 ResourceVariable.cs 137 </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_init_from_args</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はかなり大量の関数であるため、多くのフラグメントが省略されています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンクを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クリックすると完全に表示され</font><font style="vertical-align: inherit;">ます。最初は警告はそれほど深刻ではないように見えましたが、勉強した後、コードに間違いがあることに気付きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、このメソッドはパラメータを渡さなくても呼び出すことができ、デフォルトで</font><font style="vertical-align: inherit;">は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">なること</font><font style="vertical-align: inherit;">に注意してください</font><font style="vertical-align: inherit;">。この場合、最初の行で例外がスローされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二に、検証</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullへの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不等式</font><font style="vertical-align: inherit;">は奇妙に見え</font><i><font style="vertical-align: inherit;">ます</font></i><i><font style="vertical-align: inherit;">。ops.convert_to_tensor</font></i><font style="vertical-align: inherit;">を呼び出した後に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_valueが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">なった</font><font style="vertical-align: inherit;">場合</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">_initial_value</font></i><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">なり</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。つまり、</font><i><font style="vertical-align: inherit;">_initial_value.dtype.as_base_dtype（）</font></i><font style="vertical-align: inherit;">を呼び出すと</font><font style="vertical-align: inherit;">例外もスローされます。</font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;"> 
を確認する必要があるアナライザーのヒント</font><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">_initial_value</font></i><font style="vertical-align: inherit;">ですが、上記のように、この変数の参照はレビューの前でも行われるため、このオプションも無効になります。</font><font style="vertical-align: inherit;">
この小さな間違いは、PVS-Studioのないこのような巨大な機能で気づかれますか？</font><font style="vertical-align: inherit;">疑わしい。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
奇妙なコードの例がたくさんあるプロジェクトでは、多くの問題を隠すことができます。プログラマーは、理解できないことを理解することに慣れ、同時にエラーに気付くのをやめます。結果は非常に悲しいかもしれません。実際、アナライザーの警告には誤った警告もありますが、ほとんどの場合、警告は少なくとも人が見るときに質問を引き起こす可能性のあるコードの断片を示しています。奇妙なコードが意図的に書かれている場合は、説明を残しておく価値があります。そのフラグメントは、将来的にこのコードで作業する開発者に明確になります（たとえそれがコメントを残すことを意味する場合でも）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、PVS-Studioなどの静的分析ツールは、潜在的なエラーや奇妙さを見つけて忘れられないようにするのに非常に役立ちます。その後、すべての一時的なソリューションが洗練され、クリーンで構造化された安定した作業に変わりますコード。</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Nikita Lipilin。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">奇妙なコードはどのようにエラーを隠すのですか？</font><font style="vertical-align: inherit;">TensorFlow.NET分析</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja496236/index.html">外部委託テストをどのようにインポートしますか？ステップバイステップの説明</a></li>
<li><a href="../ja496238/index.html">危機で生き残り、成功するための28のステップ</a></li>
<li><a href="../ja496240/index.html">Product ManagerのProduct Discovery 101</a></li>
<li><a href="../ja496242/index.html">サイバーパンクはすでにここにあります：小学生はMinecraftで勉強し、学生はCSで身体テストを受けます：GO</a></li>
<li><a href="../ja496248/index.html">挑戦、はげ頭とワイン。HFLabsでの自己分離への対応</a></li>
<li><a href="../ja496252/index.html">空力的にオフセットされたセンタリング航空機</a></li>
<li><a href="../ja496254/index.html">Rostelecomがトラフィックを誤ってGoogle、AWS、Cloudflareなどにリダイレクトした方法</a></li>
<li><a href="../ja496256/index.html">Rでの機械学習：予測分析のための専門技術</a></li>
<li><a href="../ja496258/index.html">オンラインホリバー：経験を交換するための新しいフォーマット。今週の土曜日</a></li>
<li><a href="../ja496260/index.html">在宅勤務のためのサイバーセキュリティのヒント</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>