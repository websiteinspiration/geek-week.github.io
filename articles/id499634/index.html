<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìì ‚¨ÖÔ∏è üëÉüèΩ TypeScript Lanjutan üé∂ üê± ü§±üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Freediving - scuba diving tanpa scuba diving. Penyelam merasakan hukum Archimedes: ia memindahkan sejumlah air, yang mendorongnya kembali. Oleh karena...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>TypeScript Lanjutan</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/499634/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freediving - scuba diving tanpa scuba diving. </font><font style="vertical-align: inherit;">Penyelam merasakan hukum Archimedes: ia memindahkan sejumlah air, yang mendorongnya kembali. </font><font style="vertical-align: inherit;">Oleh karena itu, beberapa meter pertama diberikan yang paling sulit, tetapi kemudian kekuatan tekanan kolom air di atas Anda mulai membantu bergerak lebih dalam. </font><font style="vertical-align: inherit;">Proses ini mengingatkan pada pembelajaran dan menyelam ke dalam sistem tipe TypeScript - itu menjadi sedikit lebih mudah saat Anda menyelam. </font><font style="vertical-align: inherit;">Tetapi kita tidak boleh lupa untuk muncul tepat waktu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/eb/y9/sheby96u0qt6o3usirdpsc78hpg.jpeg"><br>
<font color="gray"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Ocean One Breath</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikhail Bashurov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saitonakamura</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) - Senior Frontend Engineer di WiseBits, penggemar TypeScript dan freediver amatir. </font><font style="vertical-align: inherit;">Analogi pembelajaran TypeScript dan menyelam dalam tidak disengaja. </font><font style="vertical-align: inherit;">Michael akan memberi tahu Anda apa serikat yang didiskriminasi, bagaimana menggunakan inferensi jenis, mengapa Anda memerlukan kompatibilitas nominal dan pencitraan merek. </font><font style="vertical-align: inherit;">Tahan napas dan selami.</font></font><a name="habracut"></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/m0uRxCCno00" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><font color="gray"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Presentasi dan tautan ke GitHub dengan kode sampel di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis pekerjaan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis-jenis jumlah terdengar aljabar - mari kita coba mencari tahu apa itu jumlah. </font><font style="vertical-align: inherit;">Mereka disebut varian dalam ReasonML, tagged union di Haskell, dan diskriminasi union dalam F # dan TypeScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wikipedia memberikan definisi berikut: "Jenis jumlah adalah jumlah dari jenis pekerjaan." </font></font><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Kapten terima kasih! </font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Definisi ini sepenuhnya benar, tetapi tidak berguna, jadi mari kita mengerti. </font><font style="vertical-align: inherit;">Mari kita pergi dari pribadi dan mulai dengan jenis pekerjaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan kita memiliki tipe </font></font><code>Task</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ini memiliki dua bidang: </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan siapa yang membuatnya.</font></font><br>
<br>
<pre><code class="javascript hljs">type Task = { <span class="hljs-attr">id</span>: number, <span class="hljs-attr">whoCreated</span>: number }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis pekerjaan ini adalah persimpangan atau </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">persimpangan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini berarti bahwa kita dapat menulis kode yang sama dengan setiap bidang secara individual.</font></font><br>
<br>
<pre><code class="javascript hljs">type Task = { <span class="hljs-attr">id</span>: number } &amp; { <span class="hljs-attr">whoCreated</span>: number }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam aljabar proposisi, ini disebut perkalian logis: ini adalah operasi "DAN" atau "DAN". </font><font style="vertical-align: inherit;">Jenis produk adalah produk logis dari dua elemen ini.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objek dengan seperangkat bidang dapat diekspresikan melalui produk logis.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis pekerjaan tidak terbatas pada bidang. </font><font style="vertical-align: inherit;">Bayangkan kita mencintai Prototipe dan memutuskan bahwa kita hilang </font></font><code>leftPad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">type RichString = string &amp; { <span class="hljs-attr">leftPad</span>: <span class="hljs-function">(<span class="hljs-params">toLength: number</span>) =&gt;</span> string }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan ke </font></font><code>String.prototype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Untuk mengekspresikan dalam tipe, kami mengambil string dan fungsi yang mengambil nilai yang diperlukan. </font><font style="vertical-align: inherit;">Metode dan string adalah persimpangan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah asosiasi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gabungan - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gabungan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - berguna, misalnya, untuk mewakili tipe variabel yang menetapkan lebar elemen dalam CSS: string 10 piksel atau nilai absolut. </font><font style="vertical-align: inherit;">Spesifikasi CSS sebenarnya jauh lebih rumit, tetapi untuk kesederhanaan, biarkan saja seperti itu.</font></font><br>
<br>
<pre><code class="javascript hljs">type Width = string | number</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contohnya lebih rumit. </font><font style="vertical-align: inherit;">Misalkan kita punya tugas. </font><font style="vertical-align: inherit;">Itu bisa di tiga negara: baru saja dibuat, diterima dalam pekerjaan dan selesai.</font></font><br>
<br>
<pre><code class="javascript hljs">type InitialTask = { <span class="hljs-attr">id</span>: number, <span class="hljs-attr">whoCreated</span>: number }<font></font>
type InWorkTask = { <span class="hljs-attr">id</span>: number, <span class="hljs-attr">whoCreated</span>: number }<font></font>
type FinishTask = { <span class="hljs-attr">id</span>: number, <span class="hljs-attr">whoCreated</span>: number, <span class="hljs-attr">finishDate</span>: <span class="hljs-built_in">Date</span> }<font></font>
<font></font>
type Task = InitialTask | InWorkTask | FinishedTask</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di negara bagian pertama dan kedua, tugas telah </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan siapa yang membuatnya, dan di negara ketiga, tanggal penyelesaian muncul. </font><font style="vertical-align: inherit;">Di sini serikat muncul - baik ini atau itu. </font></font><br>
<br>
<strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan</font></font></em></strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sebagai gantinya, </font></font></em><code>type</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda bisa menggunakannya </font></font></em><code>interface</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Namun ada nuansa. </font><font style="vertical-align: inherit;">Hasil gabungan dan persimpangan selalu merupakan tipe. </font><font style="vertical-align: inherit;">Anda dapat mengekspresikan persimpangan melalui </font></font></em><code>extends</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi penyatuan melalui </font></font></em><code>interface</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak bisa. </font><font style="vertical-align: inherit;">Hanya </font></font></em><code>type</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saja lebih pendek. </font></font><br>
<br>
</em><code>interface</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hanya membantu menggabungkan deklarasi. </font><font style="vertical-align: inherit;">Jenis perpustakaan selalu perlu diekspresikan melalui </font></font></em><code>interface</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena ini akan memungkinkan pengembang lain untuk memperluasnya dengan bidang mereka. </font><font style="vertical-align: inherit;">Jadi ditandai, misalnya, jQuery-plugins.</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik kompatibilitas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ada masalah - dalam TypeScript, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kompatibilitas tipe struktural</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini berarti bahwa jika tipe pertama dan kedua memiliki set bidang yang sama, maka ini adalah dua dari jenis yang sama. Misalnya, kami memiliki 10 jenis dengan nama yang berbeda, tetapi dengan struktur yang identik (dengan bidang yang sama). Jika kami menyediakan salah satu dari 10 jenis ke fungsi yang menerima salah satunya, TypeScript tidak akan keberatan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di Java atau C #, sebaliknya, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sistem kompatibilitas nominal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kami akan menulis 10 kelas yang sama dengan bidang yang identik dan fungsi yang mengambil salah satunya. Suatu fungsi tidak akan menerima kelas-kelas lain jika mereka bukan turunan langsung dari tipe yang dimaksudkan untuk fungsi tersebut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah kompatibilitas struktural ditangani dengan menambahkan status ke bidang: </font></font><code>enum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau</font></font><code>string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tetapi tipe penjumlahan adalah cara untuk mengekspresikan kode secara semantik daripada bagaimana kode itu disimpan dalam database. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, kami akan alamat ke ReasonML. Ini adalah bagaimana jenis ini terlihat di sana.</font></font><br>
<br>
<pre><code class="javascript hljs">type Task =<font></font>
| Initial({ <span class="hljs-attr">id</span>: int, <span class="hljs-attr">whoCreated</span>: int })<font></font>
| InWork({ <span class="hljs-attr">id</span>: int, <span class="hljs-attr">whoCreated</span>: int })<font></font>
| Finished({<font></font>
        <span class="hljs-attr">id</span>: int,
        <span class="hljs-attr">whoCreated</span>: int,
        <span class="hljs-attr">finshDate</span>: <span class="hljs-built_in">Date</span>
    })</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kolom yang sama, kecuali itu </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai gantinya </font></font><code>number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Jika Anda melihat dari dekat, kami perhatikan </font></font><code>Initial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>InWork</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>Finished</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Mereka tidak terletak di sebelah kiri, dalam nama tipe, tetapi di sebelah kanan dalam definisi. Ini bukan hanya satu baris dalam judul, tetapi bagian dari tipe yang terpisah, sehingga kita dapat membedakan yang pertama dari yang kedua. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retas seumur hidup</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk jenis umum (seperti entitas domain Anda) buat file </font></font><code>global.d.ts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan tambahkan semua jenis ke dalamnya. Mereka akan secara otomatis terlihat di seluruh basis kode TypeScript tanpa perlu impor eksplisit. Ini nyaman untuk migrasi karena Anda tidak perlu khawatir tentang di mana menempatkan jenis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat bagaimana melakukan ini, menggunakan contoh kode Redux primitif.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> taskReducer = (state, action) = &gt; {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FETCH"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_SUCCESS"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">task</span>: action.payload }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FAIL"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">erro</span>: action.payload }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tulis ulang kode dalam TypeScript. Mari kita mulai dengan mengganti nama file - dari </font></font><code>.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke </font></font><code>.ts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nyalakan semua opsi status dan opsi noImplicitAny. Opsi ini menemukan fungsi di mana tipe parameter tidak ditentukan, dan berguna pada tahap migrasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dapat diketik </font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: tambahkan bidang </font></font><code>isFetching</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Task</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(yang tidak bisa) dan </font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">type Task = { <span class="hljs-attr">title</span>: string }<font></font>
<font></font>
declare <span class="hljs-built_in">module</span> <span class="hljs-string">"*.jpg"</span> {
    <span class="hljs-keyword">const</span> url: string
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> url<font></font>
}<font></font>
<font></font>
declare <span class="hljs-built_in">module</span> <span class="hljs-string">"*.png"</span> {
    <span class="hljs-keyword">const</span> url: string
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> url<font></font>
}</code></pre><br>
<em><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lifehack mengintip dalam </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScript Deep Dive</font></font></em></a><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;"> karya </font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em><font style="vertical-align: inherit;">Basarat</font></em></a><em><font style="vertical-align: inherit;"> Ali Syed </font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Agak ketinggalan zaman, tetapi masih bermanfaat bagi mereka yang ingin terjun ke dalam TypeScript. Baca tentang keadaan TypeScript saat ini di </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Marius Schulz. Dia menulis tentang fitur dan trik baru. Pelajari juga </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log perubahan</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tidak hanya informasi tentang pembaruan, tetapi juga cara menggunakannya.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tindakan yang tersisa. Kami akan mengetik dan menyatakan masing-masing.</font></font><br>
<br>
<pre><code class="javascript hljs">type FetchAction = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span><font></font>
}<font></font>
<font></font>
type SuccessAction = {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_SUCCESS"</span>,
    <span class="hljs-attr">payload</span>: Task<font></font>
<font></font>
type FailAction = {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FAIL"</span>,
    <span class="hljs-attr">payload</span>: <span class="hljs-built_in">Error</span><font></font>
}<font></font>
<font></font>
type Actions = FetchAction | SuccessAction | FailAction</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bidang </font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk semua jenis berbeda, bukan hanya string, tetapi string spesifik - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string literal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini adalah </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diskriminator yang</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sangat </font><font style="vertical-align: inherit;">- tanda dimana kita membedakan semua kasus. </font><font style="vertical-align: inherit;">Kami mendapat serikat yang didiskriminasi dan, misalnya, kami bisa memahami apa yang ada di payload. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbarui kode Redux asli:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> taskReducer = (state: State, <span class="hljs-attr">action</span>: Actions): State = &gt; {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FETCH"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_SUCCESS"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">task</span>: action.payload }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FAIL"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: action.payload }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada bahaya di sini jika kita menulis </font></font><code>string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font><br>
<pre><code class="javascript hljs">type FetchAction = {
    <span class="hljs-attr">type</span>: string<font></font>
}</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... maka semuanya akan pecah, karena tidak lagi diskriminatif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam tindakan ini, ketik bisa berupa string apa pun, dan bukan diskriminator tertentu. </font><font style="vertical-align: inherit;">Setelah itu, TypeScript tidak akan dapat membedakan satu tindakan dari yang lain dan menemukan kesalahan. </font><font style="vertical-align: inherit;">Oleh karena itu, harus ada string literal. </font><font style="vertical-align: inherit;">Selain itu, kita dapat menambahkan desain ini: </font></font><code>type ActionType = Actions["type"]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tiga opsi kami akan muncul di prompt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uf/gm/si/ufgmsit8lx5zzmmd9tvot5ibg5u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menulis ...</font></font><br>
<pre><code class="javascript hljs">type FetchAction = {
    <span class="hljs-attr">type</span>: string<font></font>
}</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... maka petunjuknya akan sederhana </font></font><code>string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena semua baris lainnya tidak lagi penting. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z1/g1/qe/z1g1qecermtbhjq62vju5ujmwv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita semua telah mengetik dan mendapatkan jenis jumlahnya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemeriksaan menyeluruh</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bayangkan situasi hipotetis di mana penanganan kesalahan tidak ditambahkan ke kode.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> taskReducer = (state: State, <span class="hljs-attr">action</span>: Actions): State = &gt; {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FETCH"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_SUCCESS"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">task</span>: action.payload }
        <span class="hljs-comment">//case "TASK_FAIL":</span>
            <span class="hljs-comment">//return { isFetching: false, error: action.payload }</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemeriksaan menyeluruh di</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
sini akan membantu kami </font><font style="vertical-align: inherit;">- properti lain yang bermanfaat seperti jumlah </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah kesempatan untuk memverifikasi bahwa kami telah memproses semua kasus yang mungkin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menambahkan variabel setelah pernyataan switch: </font></font><code>const exhaustiveCheck: never = action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tidak pernah merupakan tipe yang menarik:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika itu adalah hasil dari suatu fungsi yang kembali, maka fungsi itu tidak pernah berakhir dengan benar (misalnya, ia selalu membuat kesalahan atau dieksekusi tanpa henti);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika ini adalah tipe, maka tipe ini tidak dapat dibuat tanpa usaha ekstra.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kompiler akan menunjukkan kesalahan "Ketik 'FailAction' tidak dapat ditugaskan untuk mengetik 'tidak pernah'". </font><font style="vertical-align: inherit;">Kami memiliki tiga jenis tindakan yang mungkin, yang belum kami proses </font></font><code>"TASK_FAIL"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ini </font></font><code>FailAction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Tetapi untuk tidak pernah, itu tidak "ditugaskan". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita tambahkan pemrosesan </font></font><code>"TASK_FAIL"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan tidak akan ada lagi kesalahan. </font><font style="vertical-align: inherit;">Diproses </font></font><code>"TASK_FETCH"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dikembalikan, diproses </font></font><code>"TASK_SUCCESS"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dikembalikan, diproses </font></font><code>"TASK_FAIL"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ketika kami memproses ketiga fungsi, apa yang bisa menjadi tindakan? </font><font style="vertical-align: inherit;">Tidak ada - </font></font><code>never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menambahkan tindakan lain, kompiler akan memberi tahu Anda mana yang tidak diproses. </font><font style="vertical-align: inherit;">Ini akan membantu jika Anda ingin merespons semua tindakan, dan jika hanya selektif, maka tidak.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kiat pertama</font></font></h2><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berusaha keras.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada awalnya akan sulit untuk menyelam: membaca tentang jenis penjumlahan, kemudian tentang produk, tipe data aljabar, dan seterusnya dalam rantai. </font><font style="vertical-align: inherit;">Harus berusaha. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kita menyelam lebih dalam, tekanan kolom air di atas kita meningkat. </font><font style="vertical-align: inherit;">Pada kedalaman tertentu, gaya apung dan tekanan air di atas kami seimbang. </font><font style="vertical-align: inherit;">Ini adalah zona "daya apung netral", di mana kita berada dalam kondisi tanpa bobot. </font><font style="vertical-align: inherit;">Dalam keadaan ini, kita dapat beralih ke sistem tipe lain atau bahasa.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistem Tipe Nominal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di Roma kuno, penduduk memiliki tiga komponen nama: nama keluarga, nama dan "nama panggilan". </font><font style="vertical-align: inherit;">Nama itu sendiri adalah "nomen." </font><font style="vertical-align: inherit;">Dari sinilah muncul sistem jenis nominal - "nominal". </font><font style="vertical-align: inherit;">Terkadang bermanfaat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, kami memiliki kode fungsi seperti itu.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> githubUrl = process.env.GITHUB_URL <span class="hljs-keyword">as</span> string
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> nodeEnv = process.env.NODE_ENV <span class="hljs-keyword">as</span> string<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchStarredRepos = (<font></font>
    nodeEnv: string,<font></font>
    <span class="hljs-attr">githubUrl</span>: string<font></font>
): <span class="hljs-built_in">Promise</span>&lt;GithubRepo[ ]&gt; =&gt; {
    <span class="hljs-keyword">if</span> (nodeEnv = <span class="hljs-string">"production"</span>) {
        <span class="hljs-comment">// log call</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// prettier-ignore</span>
    <span class="hljs-keyword">return</span> fetch(<span class="hljs-string">'$githubUrl}/users/saitonakamura/starred'</span>)<font></font>
        .then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.json());<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurasi datang pada API: </font></font><code>GITHUB_URL=https://api.github.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Metode </font></font><code>githubUrl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API mengeluarkan repositori tempat kami meletakkan tanda bintang. </font><font style="vertical-align: inherit;">Dan jika </font></font><code>nodeEnv = "production"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, maka ia mencatat panggilan ini, misalnya, untuk metrik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk fungsi yang ingin kita kembangkan (UI).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> StarredRepos = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> [starredRepos, setStarredRepos] = useState&lt;GithubRepo[ ] | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (!starredRepos) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading‚Ä¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
            {starredRepos.map(repo =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{repo.name}</span>&gt;</span>repo.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><font></font>
    )<font></font>
}<font></font>
<font></font>
type GithubRepo = {<font></font>
    <span class="hljs-attr">name</span>: string<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi sudah tahu cara menampilkan data, dan jika tidak ada, maka loader. </font><font style="vertical-align: inherit;">Tetap menambahkan panggilan API dan mengisi data.</font></font><br>
<br>
<pre><code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    fetchStarredRepos(githubUrl, nodeEnv).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> setStarredRepos(data))<font></font>
}, [ ])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi jika kita menjalankan kode ini, semuanya akan jatuh. </font><font style="vertical-align: inherit;">Di panel pengembang, kami menemukan bahwa ia </font></font><code>fetch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengakses alamat </font></font><code>'/users/saitonakamura/starred'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- githubUrl telah menghilang di suatu tempat. </font><font style="vertical-align: inherit;">Ternyata semua itu karena desain yang aneh - yang </font></font><code>nodeEnv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lebih dulu. </font><font style="vertical-align: inherit;">Tentu saja, mungkin tergoda untuk mengubah segalanya, tetapi fungsinya dapat digunakan di tempat lain dalam basis kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi bagaimana jika kompiler meminta ini sebelumnya? </font><font style="vertical-align: inherit;">Maka Anda tidak harus melalui seluruh siklus start-up, mendeteksi kesalahan, mencari alasannya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Branding</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TypeScript memiliki retasan untuk ini - tipe merek. </font><font style="vertical-align: inherit;">Buat </font></font><code>Brand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(string), </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan dua jenis. </font><font style="vertical-align: inherit;">Kami akan membuat jenis yang sama untuk </font></font><code>NodeEnv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">type Brand&lt;T, B extends string&gt; = T &amp; { readonly _brand: B }<font></font>
<font></font>
type GithubUrl = Brand&lt;string, <span class="hljs-string">"githubUrl"</span>&gt;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> githubUrl = process.env.GITHUB_URL <span class="hljs-keyword">as</span> GithubUrl<font></font>
<font></font>
type NodeEnv = Brand&lt;string, <span class="hljs-string">"nodeEnv"</span>&gt;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> nodeEnv = process.env.NODE_ENV <span class="hljs-keyword">as</span> NodeEnv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kami mendapat kesalahan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/_e/j-/qi_ej-yne7xhcj4qmozvbw6r7qc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang </font></font><code>githubUrl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak </font></font><code>nodeEnv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mungkin untuk menetapkan satu sama lain, karena ini adalah jenis nominal. </font><font style="vertical-align: inherit;">Tidak mengganggu, tetapi nominal. </font><font style="vertical-align: inherit;">Sekarang kita tidak dapat menukar mereka di sini - kita mengubahnya di bagian lain dari kode.</font></font><br>
<br>
<pre><code class="javascript hljs">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    fetchStarresRepos(nodeEnv, githubUrl).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> setStarredRepos(data))<font></font>
}, [ ])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang semuanya baik-baik saja - mereka mendapat </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primitif bermerek</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Branding berguna ketika beberapa argumen (string, angka) ditemukan. Mereka memiliki semantik tertentu (koordinat x, y), dan mereka tidak perlu bingung. Lebih mudah ketika kompiler memberi tahu Anda bahwa mereka bingung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun ada dua masalah. Pertama, TypeScript tidak memiliki tipe nominal asli. Tetapi ada harapan bahwa itu akan diselesaikan, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diskusi tentang masalah ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sedang berlangsung di repositori bahasa </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah kedua adalah "sebagai", tidak ada jaminan bahwa </font></font><code>GITHUB_URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan tersebut tidak rusak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Serta dengan </font></font><code>NODE_ENV</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Kemungkinan besar, kami ingin bukan hanya beberapa string, tetapi </font></font><code>"production"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><code>"development"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs">type NodeEnv = Brand&lt;<span class="hljs-string">"production"</span> | <span class="hljs-string">"development"</span> | <span class="hljs-string">"nodeEnv"</span>&gt;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> nodeEnv = process.env.NODE_ENV <span class="hljs-keyword">as</span> NodeEnv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua ini perlu diperiksa. </font><font style="vertical-align: inherit;">Saya merujuk Anda ke desainer cerdas dan laporan Sergey Cherepanov, " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merancang Domain dengan TypeScript dalam Gaya Fungsional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kiat kedua dan ketiga</font></font></h2><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hati-hati.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terkadang berhenti dan melihat-lihat: di bahasa lain, kerangka kerja, sistem ketik. </font><font style="vertical-align: inherit;">Pelajari prinsip-prinsip baru dan pelajari pelajaran. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kita melewati titik "daya apung netral", air menekan lebih keras dan menarik kita ke bawah.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bersantai.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selami lebih dalam dan biarkan TypeScript melakukan tugasnya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang dapat dilakukan TypeScript</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TypeScript dapat </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mencetak tipe</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFetch = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span><font></font>
})<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createSuccess = <span class="hljs-function">(<span class="hljs-params">task: Task</span>) =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_SUCCESS"</span>
    <span class="hljs-attr">payload</span>: Task<font></font>
})<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFail = <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FAIL"</span>
    <span class="hljs-attr">payload</span>: error<font></font>
})<font></font>
<font></font>
type FetchAction = {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span>,<font></font>
<font></font>
type SuccessAction = {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_SUCCESS"</span>,
    <span class="hljs-attr">payload</span>: Task<font></font>
<font></font>
type FailAction = {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FAIL"</span>,
    <span class="hljs-attr">payload</span>: <span class="hljs-built_in">Error</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada TypeScript untuk ini </font></font><code>ReturnType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ini mendapatkan nilai balik dari fungsi:</font></font><pre><code class="javascript hljs">type FetchAction = ReturnType&lt;<span class="hljs-keyword">typeof</span> createFetch&gt;</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di dalamnya kita melewati jenis fungsi. </font><font style="vertical-align: inherit;">Kita tidak bisa menulis fungsi: untuk mengambil tipe dari fungsi atau variabel, kita perlu menulis </font></font><code>typeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami lihat di tips </font></font><code>type: string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6w/n0/tq/6wn0tq3zjhnnoqvjrk0saubafak.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini buruk - pembeda akan pecah karena ada objek literal.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFetch = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kita membuat objek dalam JavaScript, itu bisa berubah secara default. </font><font style="vertical-align: inherit;">Ini berarti bahwa dalam objek dengan bidang dan string, kita nanti dapat mengubah string ke yang lain. </font><font style="vertical-align: inherit;">Oleh karena itu, TypeScript memperluas string tertentu ke string apa pun untuk objek yang bisa diubah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami perlu membantu TypeScript entah bagaimana. </font><font style="vertical-align: inherit;">Ada sebagai const untuk ini.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFetch = <span class="hljs-function"><span class="hljs-params">( )</span> =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambah - string akan segera menghilang di konfirmasi. </font><font style="vertical-align: inherit;">Kita dapat menulis ini tidak hanya melintasi garis, tetapi secara umum seluruh literal.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFetch = <span class="hljs-function"><span class="hljs-params">( )</span> =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span>
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maka tipe (dan semua bidang) akan menjadi hanya baca.</font></font><br>
<br>
<pre><code class="javascript hljs">type FetchAction = {<font></font>
    readonly type: <span class="hljs-string">"TASK_FETCH"</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berguna karena Anda tidak mungkin mengubah kebobolan tindakan Anda. </font><font style="vertical-align: inherit;">Karena itu, kami menambahkan sebagai const di mana-mana.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFetch = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FETCH"</span>
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>)<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createSuccess = <span class="hljs-function">(<span class="hljs-params">task: Task</span>) =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_SUCCESS"</span>
    <span class="hljs-attr">payload</span>: Task<font></font>
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>)<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFail = <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"TASK_FAIL"</span>
    <span class="hljs-attr">payload</span>: error<font></font>
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>)<font></font>
<font></font>
type Actions =<font></font>
    | ReturnType&lt;<span class="hljs-keyword">typeof</span> createFetch&gt;<font></font>
    | ReturnType&lt;<span class="hljs-keyword">typeof</span> createSuccess&gt;<font></font>
    | ReturnType&lt;<span class="hljs-keyword">typeof</span> createFail&gt;<font></font>
<font></font>
type State =<font></font>
    | { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }<font></font>
    | { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>; task: Task }<font></font>
    | { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>; error: <span class="hljs-built_in">Error</span> }<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> taskReducer = (state: State, <span class="hljs-attr">action</span>: Actions): State = &gt; {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FETCH"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_SUCCESS"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">task</span>: action.payload }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FAIL"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: action.payload }<font></font>
}<font></font>
<font></font>
  <span class="hljs-keyword">const</span> _exhaustiveCheck: never = action<font></font>
<font></font>
  <span class="hljs-keyword">return</span> state<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua tindakan mengetik kode telah dikurangi dan ditambahkan sebagai const. </font><font style="vertical-align: inherit;">TypeScript mengerti segalanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TypeScript dapat </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menampilkan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Status </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Itu diwakili oleh gabungan dalam kode di atas dengan tiga kemungkinan status isFetching: true, false, atau Task. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gunakan tipe State = ReturnType. </font><font style="vertical-align: inherit;">Petunjuk TypeScript menunjukkan bahwa ada ketergantungan melingkar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/jk/vu/vejkvuzbnzraxku1y7yfm5qefhu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mempersingkat.</font></font><br>
<br>
<pre><code class="javascript hljs">type State = ReturnType&lt;<span class="hljs-keyword">typeof</span> taskReducer&gt;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> taskReducer = <span class="hljs-function">(<span class="hljs-params">state, action: Actions</span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FETCH"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_SUCCESS"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">task</span>: action.payload }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FAIL"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: action.payload }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> _exhaustiveCheck: never = action<font></font>
<font></font>
<span class="hljs-keyword">return</span> state<font></font>
}</code></pre><br>
<code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berhenti mengutuk, tetapi sekarang dia </font></font><code>any</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena kita memiliki ketergantungan siklus. </font><font style="vertical-align: inherit;">Kami mengetik argumennya.</font></font><br>
<br>
<pre><code class="javascript hljs">type State = ReturnType&lt;<span class="hljs-keyword">typeof</span> taskReducer&gt;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> taskReducer = <span class="hljs-function">(<span class="hljs-params">state: { isFetching: <span class="hljs-literal">true</span> }, action: Actions</span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span> (action.type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FETCH"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">true</span> }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_SUCCESS"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">task</span>: action.payload }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"TASK_FAIL"</span>:
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">isFetching</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: action.payload }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> _exhaustiveCheck: never = action<font></font>
<font></font>
<span class="hljs-keyword">return</span> state<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulannya sudah siap. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i-/7f/mt/i-7fmtcvakp9l6ldfo98cqxfbwy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulan ini mirip dengan apa yang kita miliki awalnya: </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Task</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ada ladang sampah di sini </font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi dengan jenis </font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- bidang tampaknya ada di sana, tetapi sepertinya tidak.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tip keempat</font></font></h2><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan terlalu banyak bekerja.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda bersantai dan menyelam terlalu dalam, mungkin tidak ada cukup oksigen untuk kembali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelatihan juga: jika Anda terlalu tenggelam dalam teknologi dan memutuskan untuk menerapkannya di mana-mana, maka kemungkinan besar Anda akan menemukan kesalahan, alasan yang tidak Anda ketahui. </font><font style="vertical-align: inherit;">Ini akan menyebabkan penolakan dan tidak lagi ingin menggunakan tipe statis. </font><font style="vertical-align: inherit;">Cobalah untuk mengevaluasi kekuatan Anda.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana TypeScript Memperlambat Pengembangan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Butuh waktu untuk mendukung pengetikan. </font><font style="vertical-align: inherit;">Itu tidak memiliki UX terbaik - kadang-kadang memberikan kesalahan yang benar-benar tidak dapat dipahami, seperti sistem tipe lainnya, seperti di Flow atau Haskell.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semakin ekspresif sistem, semakin sulit kesalahannya.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai dari sistem tipe adalah bahwa ia memberikan umpan balik cepat ketika kesalahan terjadi. Sistem akan menampilkan kesalahan dan membutuhkan waktu lebih sedikit untuk menemukan dan memperbaikinya. Jika Anda menghabiskan lebih sedikit waktu untuk memperbaiki kesalahan, maka lebih banyak solusi arsitektur akan menerima lebih banyak perhatian. Tipe tidak memperlambat pengembangan jika Anda belajar untuk bekerja dengannya.</font></font><br>
<br>
<blockquote>              <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">++</a>.  -  ,   ,        (25  26 )  -      (27  ‚Äî 10 ). <br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a>   (5900  ),  ++            IT-,    . <br>
<br>
    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AvitoTech</a>  FrontendConf 2019    .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">youtube-</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>  telegram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@FrontendConfChannel</a>,       . </blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id499624/index.html">Ikhtisar Alat yang Mungkin Ada</a></li>
<li><a href="../id499626/index.html">SOA pada Laravel dan JSON-RPC 2.0</a></li>
<li><a href="../id499628/index.html">Wawancara pengembangan: pilih teman</a></li>
<li><a href="../id499630/index.html">Berdebar. Pembaruan Musim Semi 2020</a></li>
<li><a href="../id499632/index.html">Meningkatkan Kualitas Audio Google Duo dengan WaveNetEQ</a></li>
<li><a href="../id499636/index.html">Bereaksi Asli untuk anak kecil. Pengalaman Pengembangan Seluler</a></li>
<li><a href="../id499642/index.html">Pixockets: bagaimana kami menulis perpustakaan jaringan kami sendiri untuk server game</a></li>
<li><a href="../id499644/index.html">Pembuatan Robot (RPA) dengan Alat AutoTest</a></li>
<li><a href="../id499646/index.html">5 aturan untuk mengintegrasikan UX dalam Agile dan Scrum</a></li>
<li><a href="../id499648/index.html">‚ÄúSeorang desainer game selalu seorang gamer‚Äù: apa yang dilakukan spesialis, keterampilan apa yang penting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>