<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéüÔ∏è üî£ üëá Monitorear la temperatura en un sitio remoto por medios "improvisados" üë®üèª‚Äç‚öïÔ∏è üë®‚Äçüë©‚Äçüëß‚Äçüëß üëãüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En 2019, cuando era posible salir sin un pase, me pidieron que hiciera un monitoreo remoto de la temperatura en la casa del pueblo. Las condiciones fu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Monitorear la temperatura en un sitio remoto por medios "improvisados"</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503980/"><img src="https://habrastorage.org/webt/sz/sx/wa/szsxwal5ggvev3m8b6_gdflrqic.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2019, cuando era posible salir sin un pase, me pidieron que hiciera un monitoreo remoto de la temperatura en la casa del pueblo. Las condiciones fueron las siguientes. Hay una casa privada con internet, en la casa hay una caldera de gas para calefacci√≥n. La caldera mantiene una cierta temperatura en el sistema de calefacci√≥n, encendi√©ndola y apag√°ndola peri√≥dicamente. En el estado apagado, la mecha en espera est√° encendida. La campana se instala con errores, por lo que un fuerte viento del exterior sopla peri√≥dicamente la mecha y la calefacci√≥n deja de funcionar. Para que en invierno el agua en el sistema de calefacci√≥n no se congele, debe encender manualmente la mecha. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta casa, las personas aparecen una vez al mes, por lo que no puede prescindir de un sistema de monitoreo. A continuaci√≥n, la declaraci√≥n del problema y su implementaci√≥n de la manera m√°s "perezosa" que encontr√© en 2 meses.</font></font><br>
<a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enunciado del problema</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si la mecha se apaga, la temperatura en la casa comienza a disminuir gradualmente. Cuando cae por debajo de 15 grados, env√≠e una notificaci√≥n de "correo electr√≥nico" al "cliente". El "cliente" mismo toma una decisi√≥n, ya sea para ir solo o para llamar a los vecinos que encienden la mecha. Condici√≥n principal: ‚ÄúSin configuraci√≥n. Lo traje, lo encend√≠ y todo funciona ". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selecci√≥n de base de elemento</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ten√≠a 2 meses para el desarrollo (la tarea se estableci√≥ en el oto√±o, estaba lejos de las heladas). En esta situaci√≥n, el ESP8266 ruega por s√≠ mismo. Hay wifi en la casa, las bibliotecas para medir la temperatura est√°n escritas para varios sensores. Ten√≠a un sensor de temperatura ESP y un sensor de temperatura DS18b20, as√≠ que pospuse este proyecto por un tiempo debido al trabajo en el trabajo principal. Pasaron casi 2 meses y era hora de entregar una soluci√≥n preparada, pero no comenc√©. Mir√© a mi alrededor y decid√≠ usar una soluci√≥n preparada con algunas modificaciones. Ten√≠a un controlador dom√©stico inteligente basado en Z-Wave gratuito. Consiste en RaspberryPi y una placa de expansi√≥n para √©l, lo que lo convierte en un controlador dom√©stico inteligente. RaspberryPi comprado en Avito por 1500r. Hace medio a√±o, y ten√≠a una placa de expansi√≥n usada. Nuevos costos 6000r.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ak/gn/wx/akgnwxiuscrrzzz9vm1vwiuamle.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si compra todo en la tienda, entonces el precio es de aproximadamente 13000r. y se llama el "Controlador RaZberry". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No ten√≠a un sensor de temperatura listo compatible con la onda Z. </font></font><br>
<img src="https://habrastorage.org/webt/4w/bh/yj/4wbhyjjyjfqh1o89gr4ppmbkkt4.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo hice sobre la base de ZUNo (en la tienda alrededor de 3000r., Obtuve uno de los prototipos de forma gratuita) y un sensor de temperatura sellado DS18B20. </font></font><br>
<img src="https://habrastorage.org/webt/bg/un/da/bgundabhtaylxrckn99nicuoqt0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZUNo es una placa compatible con Arduino con un transceptor de radio incorporado. El boceto para ella se realiz√≥ sin cambios en el sitio web del fabricante ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://z-uno.z-wave.me/examples/1-wire-ds18b20-temperature-sensor/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) A partir de este boceto, ZUNo sondea el sensor de temperatura cada 30 segundos y env√≠a una notificaci√≥n al controlador por radio. ZUNo no duerme mientras espera. Soy yo que el boceto es primitivo, no ahorra recursos ni en el microcontrolador ni en la electricidad. ¬°Pero √©l hace exactamente lo que necesito! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZUNo "perfectamente" lleno de adhesivo termofusible en una caja de pl√°stico. </font></font><br>
<img src="https://habrastorage.org/webt/2g/3q/ts/2g3qtsd1dgzhkaxgjikfykhqsfg.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sac√≥ 2 cables de la caja: alimentado por USB y un sensor de temperatura. Result√≥ de manera confiable, por lo que no da miedo soltarlo y se ve decente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El controlador conectado a trav√©s del cable Ethernet al enrutador. El cable no pudo ser utilizado. RaspberryPi puede usar wifi. Pero dado que el requisito principal fue "activado y olvidado", no me arriesgu√© preconfigurando la red wi-fi en raspberryPi.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RaspberryPi se conect√≥ a una "carga" de 2 amperios desde el tel√©fono. El sensor de temperatura consume hasta 50 mA, por lo que est√° conectado al conector USB RaspberryPi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n de frambuesa</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 La imagen fue tomada de aqu√≠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storage.z-wave.me/z-way-server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> llama "razberry.img.zip". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instal√© la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> imagen en la tarjeta SD para RaspberryPi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si RaspberryPi ha comenzado, tambi√©n se lanzar√° el servidor Z-way (software para el hogar inteligente). Pero es una versi√≥n antigua, necesita ser actualizada. En la configuraci√≥n hay un bot√≥n para actualizar, pero nadie lo usa y no funciona. </font></font><br>
<img src="https://habrastorage.org/webt/oj/md/ob/ojmdobj0ypyg4f2rt59m0uqtvu0.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Es mucho m√°s "conveniente" utilizar las instrucciones para la actualizaci√≥n. Ella esta en esta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direccion</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para ingresar los comandos descritos en este manual, debe abrir un terminal en RaspberryPi. </font><font style="vertical-align: inherit;">Esto se puede hacer a trav√©s de ssh o conectando un monitor con un teclado. </font><font style="vertical-align: inherit;">El segundo monitor y el teclado siempre est√°n conmigo, a diferencia del enrutador, as√≠ que eleg√≠ la segunda opci√≥n. </font><font style="vertical-align: inherit;">Como estoy desarrollando un sistema integrado desatendido, debe proporcionar un temporizador de vigilancia para aumentar la confiabilidad. </font><font style="vertical-align: inherit;">De todos modos, RaspberryPi no es un controlador industrial y el sistema Z-wave, tampoco se recomienda usarlo en decisiones cr√≠ticas; contar√© con bloqueos peri√≥dicos, que solo pueden salir reiniciando el software o todo el sistema operativo en RaspberryPi. </font><font style="vertical-align: inherit;">Reiniciar√© todo el sistema operativo todos los d√≠as a las 12:00. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, agregu√© una l√≠nea al archivo ejecutado despu√©s del inicio del sistema operativo.</font></font><br>
<pre><code class="python hljs"><span class="hljs-comment">#sudo vi /etc/rc.local</span>
shutdown -r <span class="hljs-number">12</span>:<span class="hljs-number">00</span></code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comandos vi b√°sicos</font></font></b>
                        <div class="spoiler_text">    <br>
 ¬´i¬ª-   vi<br>
 ¬´:wq!¬ª ‚Äì     vi<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sensor de temperatura montado basado en ZUNo tampoco es ideal, si lo conecta al RaspberryPi, se reiniciar√° todos los d√≠as. Por lo tanto, mejora en gran medida la fiabilidad del sistema en su conjunto. El sistema operativo sigue siendo el punto d√©bil, si se congela y no se reinicia a las 12:00 no hay nada que hacer. Hay que llamar a un "especialista" para distorsionar la comida. Sin embargo, este sistema operativo ha sido probado y depurado mejor que los otros componentes de este proyecto (espero). Tienes que correr este riesgo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n del software del servidor Z-way</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para ingresar a la parte gr√°fica del software del servidor Z-way, energiz√≥ el equipo y despu√©s de unos minutos us√≥ el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servicio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Este servicio busca RaspberryPi con un servidor Z-way que se ejecuta en la red local y muestra sus direcciones IP. Tambi√©n puede conectarse a un RaspberryPi remoto aqu√≠. Para configurar esto, eleg√≠ un RaspberryPi local. Establezca un nombre de usuario y contrase√±a y record√≥ la identificaci√≥n de seis d√≠gitos. Esto es suficiente para una conexi√≥n remota. </font></font><br>
<img src="https://habrastorage.org/webt/rj/ag/bu/rjagbunwspmpbw10-zydr2hhfza.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ID para conexi√≥n remota. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) Se agreg√≥ un sensor de temperatura. Esta es una acci√≥n est√°ndar. </font></font><br>
<img src="https://habrastorage.org/webt/cl/fh/s2/clfhs2ni524ui0knrehemt9jbm4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) Aplicaciones agregadas-&gt; Aplicaciones locales-&gt; Correo electr√≥nico ME </font></font><br>
<img src="https://habrastorage.org/webt/8w/bp/sn/8wbpsnhpnnt3wbduvmo-mnothse.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) Especific√≥ el nombre del elemento y la direcci√≥n de correo electr√≥nico con el texto de la carta </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4) Agreg√≥ la condici√≥n bajo la cual se enviar√° la carta. Nada muy complicado </font></font><br>
<img src="https://habrastorage.org/webt/ya/gb/iy/yagbiy4qxnhipjy-ibhbjoxgily.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificaci√≥n final </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conect√≥ RaspberryPi a un enrutador a trav√©s de un cable, energ√≠a aplicada, conect√≥ un sensor t√©rmico.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfri√© el sensor de temperatura y recib√≠ una carta, luego una m√°s y otra. Mientras la temperatura sea inferior a 15 grados, el "cliente" recibir√° cartas. Est√° bien, no te lo puedes perder. (Mirando hacia el futuro, dir√© que el cliente tampoco ten√≠a correo, as√≠ que recib√≠ varios cientos de cartas de mi "creaci√≥n". Mi cliente de correo las apil√≥ convenientemente en cadenas y no caus√≥ ninguna molestia). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ver r√°pidamente la temperatura de la casa en el tel√©fono, instal√© la aplicaci√≥n Z-way. </font></font><br>
<img src="https://habrastorage.org/webt/ep/l7/-x/epl7-xz8vc3g2yfhvps2-jmnrda.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No puedo decir que sea r√°pido, conveniente, pero le permite conectarse de forma remota al servidor Z-way en RaspberryPi y observar la temperatura. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante 2 noches, mirando a mi alrededor, ensambl√© un sistema de monitoreo de temperatura para un objeto remoto. Anteriormente, ZUNo y el controlador Razberry se consideraban juguetes caros. Pero despu√©s de la retirada solemne de mi equipo del puesto de "combate", donde varias veces determin√≥ el mal funcionamiento del sistema de calefacci√≥n durante la temporada de invierno, estos productos me respetaron. Y hay algo que respetar. Internet y la luz desaparecieron peri√≥dicamente, pero despu√©s de la reanudaci√≥n de la presentaci√≥n, se restableci√≥ la comunicaci√≥n. Ahora desmantel√© este "complejo" en piezas de repuesto y entend√≠ su principal fortaleza. Con una placa controladora Razberry que se puede insertar en RaspberryPi, o mediante un adaptador UART a cualquier computadora, uno o dos ZUNo, un conjunto b√°sico de sensores y actuadores m√°s simples, puede resolver el problema r√°pidamente.No me gusta la palabra "f√°cil" y no tengo la experiencia de usar equipos "inteligentes" de otros fabricantes, pero en 2 d√≠as recib√≠ un conjunto de equipos ya listo que es suficiente para conectarse a la alimentaci√≥n, as√≠ como una aplicaci√≥n en un tel√©fono inteligente, una aplicaci√≥n web en una computadora y notificaciones por correo electr√≥nico.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es503964/index.html">DataStore - CRUD (Crear actualizaci√≥n de lectura Eliminar)</a></li>
<li><a href="../es503966/index.html">La aplicaci√≥n de Monitoreo Social se hizo desde un rastreador de camiones de basura</a></li>
<li><a href="../es503968/index.html">¬øC√≥mo hacer que el robot se mueva con precisi√≥n? Descripci√≥n y caracter√≠sticas de Studuino Platform Robotics</a></li>
<li><a href="../es503970/index.html">PuppetConf 2016. Kubernetes para administradores de sistemas. Parte 1</a></li>
<li><a href="../es503972/index.html">Prueba de streaming en 4 redes sociales y elegir la mejor opci√≥n</a></li>
<li><a href="../es503982/index.html">Sobre orcos y frameworks</a></li>
<li><a href="../es503988/index.html">C√≥mo la "luz giratoria" entr√≥ en las redes √≥pticas</a></li>
<li><a href="../es503990/index.html">Estoy cansado del hecho de que los programadores comunes se hacen pasar por desarrolladores y deshonran a la industria. Empeoran el mundo</a></li>
<li><a href="../es503992/index.html">C√≥mo dar una buena conferencia / seminario web: 16 consejos de tres profesores en serie. L√≠der-IT eventos # 2</a></li>
<li><a href="../es503994/index.html">Anuncio del seminario web de Quest Software para estaciones de trabajo remotas y gesti√≥n de ciberseguridad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>