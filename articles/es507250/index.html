<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüé® üÜï üë©üèº‚Äçü§ù‚Äçüë®üèø Definir una mano de p√≥quer ganadora usando map / reduce en JavaScript üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø üï∂Ô∏è ü§æüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Usted, como yo, a veces puede participar en mini competiciones en la programaci√≥n de Olimpiadas. Por lo general, no tengo tiempo para encontrar una so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Definir una mano de p√≥quer ganadora usando map / reduce en JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/507250/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img height="326" src="https://habrastorage.org/webt/mv/2r/o3/mv2ro3o7alphphi_pz-yzj_wdrg.png"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img align="right" width="355" height="445" src="https://habrastorage.org/webt/ba/-t/s7/ba-ts7ubl-bu6-dwxrnvbk6g8hw.jpeg"></a><br clear="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usted, como yo, a veces puede participar en mini competiciones en la programaci√≥n de Olimpiadas. Por lo general, no tengo tiempo para encontrar una soluci√≥n en la que m√°s de una o dos l√≠neas utilicen alguna funci√≥n no est√°ndar, pero esta vez la tarea era determinar las manos de p√≥ker senior (ganadoras), y me pareci√≥ que ¬°Esta es una de esas tareas que "deber√≠an" ser f√°ciles! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi resultado es correcto, conciso y legible (al menos mucho m√°s corto que las soluciones propuestas por otros participantes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, en este caso, puede usar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduce</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para obtener la informaci√≥n necesaria. Un muy buen ejemplo sali√≥ de c√≥mo usar estas herramientas para resolver problemas pr√°cticos en varios pasos.</font></font><a name="habracut"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" title="Software EDISON - desarrollo web"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="Software EDISON - desarrollo web"></a><br clear="right">
 EDISON      -.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img align="right" width="345" height="230" src="https://habrastorage.org/webt/lu/xa/zr/luxazrrwdkcxwu279m3mzlerbx8.png"></a><br clear="left">
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a>,          .<br>
<br>
    ,  ¬´ ¬ª.          - .<div style="text-align:center;"><img width="770" height="1" src="https://habrastorage.org/webt/mw/wy/cu/mwwycuqpta7m96dxifyx9if7mu8.gif"></div></blockquote><h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consiste en comparar dos manos de p√≥ker y determinar la ganadora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las manos de p√≥ker est√°n representadas por l√≠neas que contienen subcadenas (que denotan cartas individuales) de 2 caracteres, separadas por espacios. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un par de gusanos, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un cruce de diez, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer personaje significa ranking. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas las opciones posibles, ordenadas por antig√ºedad: </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 3 4 5 6 7 8 9 TJQKA</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con las designaciones num√©ricas, todo est√° claro con respecto a las letras: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es 10 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es el gato ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ack), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la reina ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ueen), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es el rey ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ing),</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - As ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ce). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo personaje define el traje. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Posibles opciones: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - gusanos ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> earts), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - cruces ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lubs), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - picos ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pades), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - panderetas ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iamonds). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, una l√≠nea tan completa para la mano "2C 5C 3C 4C 6C" - en este caso, esta es una escalera cruzada de dos a seis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La clasificaci√≥n de manos se toma como en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texas Hold'em</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debe comprender que existen dificultades ocultas: el uso de tarjetas adicionales para resolver situaciones de robo, el uso del valor nominal de pares, etc.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decisi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ¬øc√≥mo resolver este problema? </font><font style="vertical-align: inherit;">Primero debe determinar un m√©todo de comparaci√≥n que resuelva el problema de clasificar las manos, y luego, si la clasificaci√≥n coincide, el ganador se determina, si es posible, comparando cartas adicionales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como el enunciado del problema supone que los trajes son equivalentes, usamos un objeto simple para representar la clasificaci√≥n de manos:</font></font><br>
<br>
<pre><code class="javascript hljs">{ 
   <span class="hljs-attr">rank</span>: <span class="hljs-number">1</span>,       <span class="hljs-comment">//     1  9,   ,    </span>
   <span class="hljs-attr">value</span>: <span class="hljs-string">'ABCDE'</span> <span class="hljs-comment">//  ,        ,    ASCII-    </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora podemos escribir una funci√≥n simple para comparar dos manos representadas en la forma de esta estructura:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ que ahora todo lo que tenemos que hacer es crear un objeto de nuestras manos, ¬°y aqu√≠ comienza la diversi√≥n!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desmontamos la mano de p√≥ker en sus componentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tales casos, es necesario determinar los datos b√°sicos necesarios para resolver el problema. </font><font style="vertical-align: inherit;">Aqu√≠ nuestro primer problema es extender nuestras manos en la antig√ºedad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las manos de p√≥ker pueden ser una escalera, un color o una combinaci√≥n de varias cartas con el mismo valor nominal. </font><font style="vertical-align: inherit;">Nuestra tarea es primero recopilar esta informaci√≥n de nuestra cadena de entrada. </font><font style="vertical-align: inherit;">El primer paso es decidir c√≥mo analizar estos datos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analizar datos entrantes</font></font></h3><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> input = <span class="hljs-string">"AH KS TC 9D 3S"</span> <span class="hljs-comment">// -  </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos tanto el palo como el valor nominal de cada carta. </font><font style="vertical-align: inherit;">Sin embargo, dado que la √∫nica raz√≥n por la que estamos interesados ‚Äã‚Äãen el palo es que si el palo de todas las cartas en la mano es el mismo, entonces no hay necesidad de mantener la combinaci√≥n denominaci√≥n / palo. </font><font style="vertical-align: inherit;">Esto hace que el proceso de an√°lisis sea bastante simple:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convierta una l√≠nea entrante en una secuencia de tarjetas.</font></font></b></li>
<li><b> /   ,   .</b><br>
<br>
,      ,  ,        .  , A&gt; K (  ),    Q &gt; J (  ),   ,            . ,   :</li>
<li><b>     .</b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos 5 cartas en nuestra mano, al final necesitamos que los valores de la mano para resolver las colisiones de sorteo se comparen en una operaci√≥n, por lo que esta deber√≠a ser exactamente la l√≠nea. Por lo tanto, traduciremos el valor de nuestras tarjetas en caracteres, para que luego puedan devolverse a la cadena. En general, necesitamos hacer el as A, rey - B, reina - C, jota - D, diez - E, nueve - G, etc.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span> <span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>) <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort() 
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, aqu√≠ nos dividimos en tarjetas separadas y asignamos en cada una de ellas su valor nominal y su palo. </font><font style="vertical-align: inherit;">Al mismo tiempo, convertimos la denominaci√≥n en una representaci√≥n de cadena de una sola letra, comenzando con A (que es la designaci√≥n de un as, el resto de las siguientes letras corresponden en orden a las cartas m√°s peque√±as a la par). </font><font style="vertical-align: inherit;">Para hacer esto, espi√≥ el n√∫mero de la posici√≥n nominal en el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">orden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constante de la cadena </font><font style="vertical-align: inherit;">, rest√≥ este n√∫mero de 77 y volvi√≥ a convertirlo en cadena. </font><font style="vertical-align: inherit;">65 es el c√≥digo para A, por lo que obtenemos una l√≠nea comparable que comienza con A, que es la mejor opci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n clasificamos por valor nominal y traje, ¬°de modo que le permite dar el siguiente paso!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crea datos comparables.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Genial, pero ahora necesita generar m√°s datos para poder escribir c√≥digo para clasificar sus manos.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revisa el flash.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revisa la calle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Determinamos los duplicados a su valor nominal: son necesarios para todos los dem√°s tipos de manos.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprobar flash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es bastante simple, ya que analizamos la l√≠nea entrante y la clasificamos por trajes. </font><font style="vertical-align: inherit;">Si el palo de la √∫ltima carta coincide con el palo de la primera, tenemos un flash.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comprobar calle</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La calle no es mucho m√°s complicada: si todas las cartas (independientemente de su palo) tienen una denominaci√≥n consistente, entonces esta es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzamos con la primera carta en la mano y para cada siguiente chequeo si su valor nominal es consistente con la carta anterior. </font><font style="vertical-align: inherit;">Usando el √≠ndice pasado a trav√©s de la devoluci√≥n de llamada, de la siguiente manera:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir duplicados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este paso es un poco m√°s complicado. </font><font style="vertical-align: inherit;">Debemos calcular la cantidad para cada valor nominal en nuestra mano. </font><font style="vertical-align: inherit;">Y tambi√©n necesita alguna forma de determinar pares, triples, etc., para simplificar la clasificaci√≥n de sus manos de esta manera:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cantidad de conteo para cada valor nominal</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convertir una cuenta en una presentaci√≥n en la que pueda buscar.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es necesario asegurarse de que sea posible determinar la presencia de los "cuatro" (cuadrados) o tres en la mano, el n√∫mero de pares (no uno, uno o dos), etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, primero calculamos cu√°ntas veces se encuentran las tarjetas de cada valor:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
    c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> c<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego buscamos estos c√°lculos, en el sentido literal de "contar los c√°lculos".</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clasificaci√≥n de manos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora tenemos toda la informaci√≥n necesaria para clasificar las manos, hasta ahora sin tener en cuenta las posibles situaciones de sorteo.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, una escalera de color es la combinaci√≥n m√°s fuerte con un rango de 1 (para no complicarlo, consideramos que es posible un empate si alguien tiene una escalera real), luego cuatro de un tipo, casa llena, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, el operador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;&amp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se usa fant√°sticamente </font><font style="vertical-align: inherit;">, lo que escanea hasta el √∫ltimo valor si los valores entre par√©ntesis anteriores son correctos. </font><font style="vertical-align: inherit;">Por lo tanto, </font></font><nobr><code>(flush &amp;&amp; direct &amp;&amp; 1)</code> </nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devuelve 1 si flush y direct son verdaderos; de lo contrario, devuelve false.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situaci√≥n dibujada</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si dos manos tienen el mismo rango, el ganador se determina adicionalmente por el valor nominal de las cartas, si es posible. </font><font style="vertical-align: inherit;">Algunas reglas est√°n asociadas con esto.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pareja vs pareja. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un par con un valor nominal m√°s alto gana. </font><font style="vertical-align: inherit;">Si los valores coinciden, gana la siguiente carta m√°s alta. </font><font style="vertical-align: inherit;">(Para dos pares se resuelve de manera similar). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, si comparamos la mano ‚Äú2H 2D AH KC 3D‚Äù con la mano ‚Äú4H 4C JC TC 3H‚Äù, entonces los cuatro de la mano ganadora, aunque en la primera mano la carta m√°s alta tiene el valor nominal m√°s alto: un as.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Casa llena versus casa llena</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El tr√≠o con el valor nominal m√°s alto gana. </font><font style="vertical-align: inherit;">Si las denominaciones de triples en ambas manos son iguales, entonces miramos las denominaciones de dos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actuamos de manera similar al comparar cualquier mano con el mismo rango: decide el valor nominal de la carta m√°s alta en combinaci√≥n.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, primero debemos ordenar por cantidad y luego por valor nominal en nuestra l√≠nea saliente. </font><font style="vertical-align: inherit;">Recuerde, la cadena completa de cinco caracteres se usa para resolver casos con clasificaciones de manos coincidentes.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> value = faces.sort(byCountFirst).join(<span class="hljs-string">""</span>)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-comment">//    -  ,  </span>
    <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
    <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y es todo!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shebang entero</font></font></h2><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHandDetails</span>(<span class="hljs-params">hand</span>) </span>{
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>)
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort()
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()
    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})
    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})
    <span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]
    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)
    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> { rank, <span class="hljs-attr">value</span>: faces.sort(byCountFirst).join(<span class="hljs-string">""</span>) }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-comment">//    -  ,  </span>
        <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
        <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
        c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> c<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, si analizamos cuidadosamente todo en los estantes, podemos, usando el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reducir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , preparar f√°cilmente toda la informaci√≥n que necesitamos para resolver este problema.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es507226/index.html">OCR para PDF en .NET: c√≥mo extraer texto de documentos PDF inaccesibles</a></li>
<li><a href="../es507234/index.html">Snort o Suricata. Parte 2: instalaci√≥n y configuraci√≥n inicial de Suricata</a></li>
<li><a href="../es507236/index.html">Aumentamos la efectividad de la interacci√≥n entre dise√±adores y desarrolladores frontend</a></li>
<li><a href="../es507238/index.html">Utilizamos DS para procesar comentarios de clientes de sitios grandes</a></li>
<li><a href="../es507242/index.html">Lo que es interesante Wi-Fi 6 en el rendimiento de Huawei</a></li>
<li><a href="../es507254/index.html">Zabbix - expandiendo las fronteras macro</a></li>
<li><a href="../es507256/index.html">Peter Hinchens: C√≥digo fuente del psic√≥pata</a></li>
<li><a href="../es507258/index.html">Bonificaciones, beneficios y bonificaciones en TI: los resultados de la investigaci√≥n de Habr Career</a></li>
<li><a href="../es507260/index.html">Lifehack r√°pido para el crecimiento de aplicaciones - ASO en otros idiomas</a></li>
<li><a href="../es507264/index.html">Nuevas caracter√≠sticas en Python 3.9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>