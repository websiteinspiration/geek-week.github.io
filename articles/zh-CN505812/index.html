<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👁️ ♋️ 🚴🏿 4名工程师，7000台服务器和1次全球性大流行 🦖 🗿 ✊🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！我向您介绍了Adib Daw 撰写的文章“ 4名工程师，7000台服务器和一次全球大流行”。
 
 如果此标题未在脊椎造成轻微震动，则应转到下一段或转到我们公司的职业页面-我们想谈谈。
 
 我们是谁
 我们是一个由4只企鹅组成的团队，他们喜欢编写代码和使用设备。在我们的业余时间里，我们负责...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>4名工程师，7000台服务器和1次全球性大流行</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505812/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哈Ha！</font><font style="vertical-align: inherit;">我向您介绍了</font><font style="vertical-align: inherit;">Adib Daw </font><font style="vertical-align: inherit;">撰写的文章</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ 4名工程师，7000台服务器和一次全球大流行”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果此标题未在脊椎造成轻微震动，则应转到下一段或转到我们</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公司的职业</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font><font style="vertical-align: inherit;">-我们想谈谈。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们是谁</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们是一个由4只企鹅组成的团队，他们喜欢编写代码和使用设备。</font><font style="vertical-align: inherit;">在我们的业余时间里，我们负责部署，维护和运营由7,000多个基于Linux的物理服务器组成的团队，这些服务器分布在全美3个不同的数据中心。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们也有机会在距设施10,000公里的距离进行此操作，而无需离开我们自己的办公室，该办公室距离地中海海滩很近。</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规模问题</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管由于初期投资相对较小，对于初创公司而言，将其基础架构托管在云中是有意义的，但Outbrain还是决定使用我们自己的服务器。我们之所以这样做，是因为云基础架构的成本远远超过了开发到一定水平后运营位于数据中心的我们自己的设备的成本。此外，其服务器还提供最高程度的控制和故障排除功能。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
随着我们的进步，问题总是在附近。</font><font style="vertical-align: inherit;">他们通常成群结队。</font><font style="vertical-align: inherit;">服务器生命周期管理需要不断自我完善，以便能够在服务器数量迅速增加的情况下正常工作。</font><font style="vertical-align: inherit;">用于管理数据中心中的服务器组的软件方法很快变得繁琐。</font><font style="vertical-align: inherit;">在执行服务质量协议中规定的标准的同时，检测，故障排除和修复故障将变成操纵极其多样化的硬件阵列，各种负载，更新时间以及其他任何人都不想照顾的令人愉快的事情。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">掌握您的域名</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了解决许多此类问题，我们将Outbrain中的服务器生命周期分为主要组件，并将其命名为域。例如，一个领域涉及设备的需求，另一个领域涉及与库存生命周期相关的物流，第三个领域涉及与人员的现场通信。关于硬件的可观察性还有另一个问题，但我们不会一一列举。我们的目标是研究和定义域，以便可以使用代码对域进行抽象。一旦开发了一个有效的抽象，它将转化为一个手动过程，可以对其进行部署，测试和最终确定。最后，将域配置为通过API与其他域集成，从而创建可以部署，测试和监视的整体，动态且不断发展的设备生命周期系统。像我们所有其他生产系统一样。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种方法的采用使我们能够正确地解决许多问题-通过创建工具和自动化工具。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要领域</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管电子邮件和电子表格是在早期满足需求的一种可接受的方法，但是这不能称为一个好的解决方案，尤其是当服务器数量和传入请求的数量达到一定水平时。</font><font style="vertical-align: inherit;">为了在快速扩展的情况下更好地组织和优先处理传入的请求，我们必须使用票务系统，该系统可以提供：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能够自定义仅相关字段的表示形式（简单）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开放式API（可扩展）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对我们的团队很有名（可以理解）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与我们现有的工作流程集成（统一）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们使用Jira来管理冲刺和内部任务，因此我们决定创建另一个项目，该项目将帮助我们的客户发送应用程序并跟踪其结果。使用Jira处理传入请求和管理内部任务，使我们可以创建一个看板，从而使我们可以查看整个流程。我们内部的“客户”仅看到对设备的需求，而没有研究其他任务（例如改进工具，修复错误）的不太重要的细节。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f8/nf/t6/f8nft6jpgrc5s4g1njqeekuxdna.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吉拉看板</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另外，每个人现在都可以看到队列和优先级，这使得了解特定请求位于“队列中的何处”以及在其之前的内容成为可能。</font><font style="vertical-align: inherit;">这使所有者无需联系我们即可更改其请求中的优先级。</font><font style="vertical-align: inherit;">拖累-和所有业务。</font><font style="vertical-align: inherit;">它还使我们能够根据基于Jira中生成的指标的请求类型来监视和评估SLA。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设备生命周期域</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
试想一下管理每个服务器机架中使用的设备的复杂性。</font><font style="vertical-align: inherit;">更糟糕的是，许多铁块（RAM，ROM）可以从仓库移到服务器，反之亦然。</font><font style="vertical-align: inherit;">同样，它们也会失败或被注销并更换，然后退还给供应商进行更换/维修。</font><font style="vertical-align: inherit;">所有这些都必须报告给参与设备物理维护的托管服务人员。</font><font style="vertical-align: inherit;">为了解决这些问题，我们创建了一个内部工具Floppy。</font><font style="vertical-align: inherit;">他的任务是：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现场人力资源管理；所有信息的汇总；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每次完成并验证设备维护工作之后，更新“仓库”的数据。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
反过来，使用Grafana可视化仓库，我们用它来绘制所有指标。</font><font style="vertical-align: inherit;">因此，我们使用相同的工具来可视化仓库和满足其他生产需求。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/vb/oo/k1vboomvwvxxibrx78iyfffrbj8.png"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana仓库管理面板</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
对于受保修的服务器设备，我们使用另一种工具，称为Dispatcher。</font><font style="vertical-align: inherit;">是他：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集系统日志；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以供应商要求的格式生成报告；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过API与供应商一起启动应用程序；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取并存储应用程序标识符，以进一步跟踪其进度。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在我们的索赔被接受后（通常是在工作日发生），备件被发送到相应的数据中心并由员工接受。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gc/rm/ao/gcrmaoavgybge4e95dcikjuxamy.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkins控制台输出</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通讯领域</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了与需要不断增长的容量的业务的快速增长保持同步，我们必须调整与本地数据中心的技术专家合作的方法。</font><font style="vertical-align: inherit;">如果一开始规模扩大意味着要购买新服务器，那么在整合项目（基于向Kubernetes的过渡）之后，这将变得完全不同。</font><font style="vertical-align: inherit;">我们的发展已从“添加机架”发展到“服务器重新配置”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用新方法还需要新的工具，这些工具可以使与数据中心人员的交互非常舒适。</font><font style="vertical-align: inherit;">这些工具是必需的：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自治;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">效率;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可靠性。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们必须将自己排除在链条之外，并进行工作，以便技术人员可以直接使用服务器设备。</font><font style="vertical-align: inherit;">在没有我们干预的情况下，也没有定期提出所有与工作量，工作时间，设备可用性等有关的问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为此，我们在每个数据中心都安装了iPad。</font><font style="vertical-align: inherit;">连接到服务器后，将发生以下情况：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设备确认此服务器确实需要做一些工作；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器上运行的应用程序已关闭（如有必要）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Slack频道上发布了一套工作说明，解释了必要的步骤；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作完成后，设备将检查服务器最终状态的正确性。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如有必要，重新启动应用程序。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，我们还准备了Slack机器人，这将对技术专家有所帮助。</font><font style="vertical-align: inherit;">由于功能广泛（我们不断扩展功能），因此该机器人使他们的工作更轻松，并且使我们的生活更轻松。</font><font style="vertical-align: inherit;">因此，我们优化了服务器重新配置和服务的大多数过程，将自己排除在工作流程之外。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1e/4s/uw/1e4suwnlcau79zmjngs2am1ykxc.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iPad在我们的数据中心之一</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">硬件领域</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要可靠地扩展我们的数据中心基础架构，需要对每个组件具有良好的可见性，例如：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">铁故障检测</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器状态（活动，托管，僵尸等）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能量消耗</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固件版本</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在整个服务器场中进行分析</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的决定使我们可以决定如何，在何时何地购买设备，有时甚至在真正需要之前就做出决定。</font><font style="vertical-align: inherit;">此外，通过确定各种设备上的负载水平，我们能够实现资源分配的改善。</font><font style="vertical-align: inherit;">特别是能源消耗。</font><font style="vertical-align: inherit;">现在，我们可以在将服务器安装到机架中并连接到电源之前，以及在整个操作周期以及可能的停用期间，对服务器的位置做出明智的决定。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bs/jw/be/bsjwber4c6lrbovxkztwjdvt6c0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格拉法纳能源小组</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后出现了COVID-19 ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的团队创造的技术可以扩展网络上媒体公司和发行商的功能，帮助访问者找到他们可能感兴趣的相关内容，产品和服务。</font><font style="vertical-align: inherit;">我们的基础设施旨在服务某些突发新闻出现时产生的流量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
活跃的媒体报道与COVID-19相关的事件，再加上流量的增长，意味着我们需要紧急学习应对这种负担。</font><font style="vertical-align: inherit;">此外，所有这些都必须在全球危机的背景下完成，当时供应链断裂，大多数员工都在家中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，正如我们已经说过的，我们的模型已经假设：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在大多数情况下，我们数据中心中的设备在物理上是无法访问的；</font></font></li>
<li>&nbsp;      ;</li>
<li>  ,     ;</li>
<li>      «  »    ;</li>
<li>   ,    - ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，阻止许多公司无法物理访问其数据中心的全球限制对我们影响不大，对于备件和服务器，是的，我们试图确保设备的稳定运行。</font><font style="vertical-align: inherit;">但是这样做是为了防止可能发生的事件，当突然发现某种“铁片”不可用时。</font><font style="vertical-align: inherit;">我们确保满足我们的需求而没有满足我们的需求。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，我想说的是，我们在数据中心领域的工作方法证明，良好的代码设计原则可以应用于数据中心的物理控制过程。</font><font style="vertical-align: inherit;">您可能会发现这很有趣。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原文：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyts</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN505786/index.html">5种经典艺术技巧可打造出色的展示效果</a></li>
<li><a href="../zh-CN505788/index.html">臭氧去演示日</a></li>
<li><a href="../zh-CN505796/index.html">CO2，Sp02和COVID-19：为何需要更频繁地通风（很少测量）</a></li>
<li><a href="../zh-CN505798/index.html">PHP 25年：语言的简要历史，PhpStorm享有50％的折扣</a></li>
<li><a href="../zh-CN505802/index.html">托管和专用服务器：回答问题。第4部分</a></li>
<li><a href="../zh-CN505814/index.html">Radarr，Jackett和购物车中的机器人。以新方式下载种子</a></li>
<li><a href="../zh-CN505824/index.html">指南：您自己的L2TP VPN</a></li>
<li><a href="../zh-CN505826/index.html">如何获得100％甚至更多的视力</a></li>
<li><a href="../zh-CN505834/index.html">中位数样本。置信区间和比较</a></li>
<li><a href="../zh-CN505838/index.html">适用于数千种应用的FPGA技术</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>