<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🎓 🧕🏻 📜 ReddにインストールされたFPGA用の最も単純な「ファームウェア」の開発、および例としてメモリテストを使用したデバッグ ➕ 🌩️ 🔃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="どういうわけか、私の考えを簡単に表現することはできません。昨年の秋、私が習得したPSoCアーキテクチャについて詳しく説明したいという要望があり、それに関する一連の記事が掲載されました。現在、ここで説明した Reddリモートデバッグコンプレックスのハードウェアの準備に参加しており、蓄積された経験をテキ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ReddにインストールされたFPGA用の最も単純な「ファームウェア」の開発、および例としてメモリテストを使用したデバッグ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452656/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どういうわけか、私の考えを簡単に表現することはできません。昨年の秋、私が習得したPSoCアーキテクチャについて詳しく説明したいという要望があり、それに関する一連の記事が掲載されました。現在、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">説明し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">た</font></a><font style="vertical-align: inherit;"> Reddリモートデバッグコンプレックスのハードウェアの準備に参加して</font><font style="vertical-align: inherit;">おり、蓄積された経験をテキスト形式で破棄したいと思います。まだわかりませんが、やはり1つの記事ではなく、1つのサイクルであるように見えます。第一に、これは私が複合体を扱うときに、そして一般に両方に誰かに役立つかもしれない開発方法の開発を文書化する方法であり、第二に、概念はまだ新しく、まだ確立されていません。おそらく、記事のディスカッション中に、いくつかのコメントが表示され、そこから何かを描いて拡張（または変更）することができます。したがって、続行します。</font></font><br>
<img src="https://habrastorage.org/webt/lk/xe/c9/lkxec9ijefezvvydvjbmi49ahny.jpeg"><br>
<a name="habracut"></a><br>
<br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は理論化するのがあまり好きではなく、いくつかの実用的なものを一度にレイアウトすることを好みます。しかし、最初の記事の冒頭では、長い紹介はどこにもありませんでした。その中で、私は現在の開発アプローチを正当化します。そして、すべてが1つのことを中心に展開します。工数は非常に高価なリソースです。そして、問題はプロジェクトに割り当てられた条件だけではありません。彼は体が高い。それが最終製品の開発に費やされたら、まあ、どこにもそれなしで何ができるでしょうか。しかし、それが補助的な作業に費やされるとき、これは私の意見では悪いです。自分でプロトタイプを作ることで、彼は母国の会社のためにお金を節約するだろうと言った開発者との論争があったことを覚えています。私は彼が製造に約3日を費やすだろうと主張しました。それは24時間です。これらの時間に彼の給与を受け取り、「雇用主が支払う」社会税、およびこれらの時間のオフィスのレンタルを追加します。そして、サイドでボードを注文すると、コストを削減できることに驚いています。しかし、それは私です、私は誇張します。一般に、人件費を回避できる場合は、回避する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reddコンプレックス用の「ファームウェア」の開発は何ですか？これは補助的な仕事です。メインプロジェクトはその後も幸せに暮らします。優れた最適化など、可能な限り効率的に行う必要があります。しかし、開発後にアーカイブに移動する補助的なものに時間とエネルギーを費やすことは無駄です。 Reddのハードウェアが開発されたのは、この原則を念頭に置いていたからです。すべての機能は、可能であれば、標準のものとして実装されます。 SPI、I2C、およびUARTバスは、標準のFTDIチップに実装されており、標準のドライバーを介してプログラムされています。リールの管理は、仮想COMポートの形式で実装されます。変更は可能ですが、そのような欲求が生じないように、少なくともすべてが行われています。一般に、すべての標準は、可能であれば、標準的な方法で実装されます。プロジェクトごとに、開発者はPCがこれらのバスにアクセスするための一般的なコードをすばやく作成する必要があります。 C ++での開発手法は、マイクロコントローラー用のプログラムを開発する人には明らかです（技術的な詳細については別の記事で説明します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、FPGAは複合体の中で独立しています。</font><font style="vertical-align: inherit;">高いパフォーマンス要件を持つ非標準プロトコルを実装する必要がある場合に備えて、システムに追加されます。</font><font style="vertical-align: inherit;">それらが必要な場合は、そのための「ファームウェア」を実行する必要があります。</font><font style="vertical-align: inherit;">それはFPGAプログラミングについてであり、私は特に同じ目的のために、補助的なものの開発時間を短縮するために具体的に話したいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
読者を混乱させないために、私は考えをフレームにまとめます。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各プロジェクトでFPGAの開発を行う必要はありません。</font><font style="vertical-align: inherit;">中央処理装置に直接接続されているバスコントローラーがターゲットデバイスで動作するのに十分な場合は、それらを使用する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非標準プロトコルの実装のためにFPGAがコンプレックスに追加されました。</font></font></blockquote><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複合体のブロック図</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複合体のブロック図を見てみましょう</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/vf/hv/da/vfhvda1kmsax-zkxaue4xu_ysmk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回路の下部には「計算機」があります。実際、これはLinuxを搭載した標準的なPCです。開発者はC、C ++、Pythonなどで通常のプログラムを記述できます。プログラムはコンピューターで実行されます。右上は標準タイヤの標準ポートです。左側には、標準デバイス用のスイッチがあります（SPIフラッシュ、SDカード、いくつかの低電流ソリッドステートリレー。たとえば、ボタンの押下をシミュレートできます）。そして、中心にあるのはまさにその部分であり、このシリーズの記事で検討される予定の作業です。その中心はFPGAクラスFPGAであり、そこから直線がコネクタに出ます（差動ペアまたは通常のバッファなしラインとして使用できます）、構成可能なロジックレベルのGPIOライン、およびULPIチップを介して実装されたUSB 2.0バス。</font></font><br>
<br>
<h2>      </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FPGA向けの高性能制御ロジックを開発する場合、通常は陛下のステートマシンが最初のフィドルを果たします。高速だが複雑なロジックを実装できるのはマシン上です。しかし一方で、オートマトンはプロセッサ用のプログラムよりもゆっくりと開発されており、その修正は別のプロセスです。機械の開発とメンテナンスを簡素化するシステムがあります。そのうちの1つは当社によって開発されましたが、それでも複雑なロジックの設計プロセスは速くありません。開発されたシステムが最終製品である場合、適切な制御マシンを準備、設計し、その実装に時間を費やすことが理にかなっています。しかし、すでに述べたように、Reddの開発は補助的な仕事です。プロセスを複雑にするのではなく、プロセスを促進するように設計されています。したがって、それが決定されました主なものは、自動化されたものではなく、プロセッサシステムの開発になるでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかしその一方で、ハードウェアを開発する際、これまでで最もファッショナブルなオプションであるARMコアを備えたFPGAは拒否されました。まず、価格上の理由から。 Cyclone V SoCベースのプロトタイプボードは適度に高価ですが、奇妙なことに、独立したFPGAははるかに高価です。ほとんどの場合、プロトタイピングボードの価格は、FPGAデータを使用するよう開発者を誘惑するためにダンプされ、ボードは個別に販売されます。シリーズは、個々のチップを取る必要があります。しかし、さらに、「秒」もあります。次に、Cyclone V SoCを試してみたところ、このプロセッサシステムはそうではなく、ポートへのシングルアクセスに関しては生産性が高いことがわかりました。バッチ-はい、作業は速くなります。また、プロセッサコアのクロック周波数が925 MHzのシングルアクセスの場合、数メガヘルツの周波数でポートにアクセスできます。UARTの混雑をチェックするUARTブロックのFIFOにデータを入力する標準の関数を呼び出したいが、キューが明らかに空の場合、つまり操作に干渉しないものを呼び出すすべての人に提案します。私の生産性は1秒あたり100万回から50万回の呼び出しになりました（もちろん、メモリの操作は通常の速度で行われ、すべてのキャッシュが調整されました。FIFOの過密をチェックしなかった関数のバージョンでもより速く機能しました。議論中の関数だけが豊富に混在しています）ポートからの書き込みと読み取り）。これはFIFOです。実際、FIFOはそこにデータをドロップして忘れるために発明されました。やめろ！パフォーマンスではなく、925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...これはキューのオーバーフローをチェックしますが、キューが明らかに空のときにそれを呼び出す、つまり操作に何も干渉しません。私の生産性は1秒あたり100万回から50万回の呼び出しになりました（もちろん、メモリの操作は通常の速度で行われ、すべてのキャッシュが調整されました。FIFOの過密をチェックしなかった関数のバージョンでもより速く機能しました。議論中の関数だけが豊富に混在しています）ポートからの書き込みと読み取り）。これはFIFOです。実際、FIFOはそこにデータをドロップして忘れるために発明されました。やめろ！パフォーマンスではなく、925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...これはキューのオーバーフローをチェックしますが、キューが明らかに空のときにそれを呼び出す、つまり操作に何も干渉しません。私の生産性は1秒あたり100万回から50万回の呼び出しになりました（もちろん、メモリの操作は通常の速度で行われ、すべてのキャッシュが調整されました。FIFOの過密をチェックしなかった関数のバージョンでもより速く機能しました。議論中の関数だけが豊富に混在しています）ポートからの書き込みと読み取り）。これはFIFOです。実際、FIFOはそこにデータをドロップして忘れるために発明されました。やめろ！パフォーマンスではなく、925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...通常の速度でメモリを操作すると、すべてのキャッシュが構成され、FIFOの過密をチェックしなかった関数のバージョンでもより高速に動作しました。説明した関数では、ポートからの書き込みと読み取りが混在しています。これはFIFOです。実際、FIFOはそこにデータをドロップして忘れるために発明されました。やめろ！パフォーマンスではなく、925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...通常の速度でメモリを操作すると、すべてのキャッシュが構成され、FIFOの過密をチェックしなかった関数のバージョンでもより高速に動作しました。説明した関数では、ポートからの書き込みと読み取りが混在しています。これはFIFOです。実際、FIFOはそこにデータをドロップして忘れるために発明されました。やめろ！パフォーマンスではなく、925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...925 MHzのプロセッサ周波数で毎秒1メガオペレーション未満...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レイテンシーは非難することです。プロセッサコアと機器の間には、3つ以上のブリッジがあります。さらに、ポートへのアクセス速度はコンテキストに依存します（行のいくつかのレコードはすぐに進みますが、最初の読み取りは、キャッシュされたデータが完全にアンロードされるまでプロセスを停止します。書き込みバッファーが使い果たされるため、行の多くのレコードも遅くなります）。最後に、デバッグバッファーに蓄積されたトレースを調べる</font><font style="vertical-align: inherit;">と、複雑なキャッシュシステムが原因</font><font style="vertical-align: inherit;">で、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャ</font><font style="vertical-align: inherit;">が同じセクションを異なる数のクロックサイクルで実行できることが</font><b><font style="vertical-align: inherit;">わかりました</font></b><font style="vertical-align: inherit;">。要するに、これらすべての要因（価格、機器を操作するときのパフォーマンスの低下、機器へのアクセス速度の不安定性、コンテキストへの一般的な依存性）を見ると、このようなチップを複雑にしないことが決定されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイプレスのPSoCを使用した実験では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex M</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コア</font><font style="vertical-align: inherit;">がより予測可能で再現性のある結果をもたらす</font><font style="vertical-align: inherit;">ことを示しましたが、</font><font style="vertical-align: inherit;">これらのコントローラーの論理容量と最大動作周波数は技術仕様に対応していないため、それらも破棄されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
安価な一般的なCyclone IV FPGAをインストールし、合成されたNIOS IIプロセッサコアの使用を推奨することが決定されました。まあ、必要に応じて、他の方法（オートマトン、リジッドロジックなど）を使用して開発を行うこと。</font></font><br>
 <br>
<blockquote>  (    ),     —  x86 (x64).      .       .  ,     ,      , «»  .        ,      ,     . </blockquote><br>
<br>
<h2>    «»</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ReddコンプレックスがLinuxを実行している場合、これは、このOSで開発を実行する必要があることを意味するものではありません。 Reddはリモートエグゼキューターであり、OSに関係なく、コンピューター上で開発を実行する必要があります。 Linuxを持っている人は誰でも簡単ですが、Windowsに慣れている人（私はWIN 3.1を本当に嫌いでしたが、私は仕事をせざるを得ませんでしたが、WIN95 OSR2の頃のどこかで私はそれに慣れました、そして今では戦うのは役に立たず、受け入れるのが簡単です） 、それらはその開発をリードし続けることができます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linuxとの友情はうまくいかなかったので、その下の環境をセットアップするためのステップバイステップの説明はしませんが、一般的な言葉に限定します。このOSを使用するのはだれでも十分です。残りのOSについては十分です。私を信じて、システム管理者に連絡する方が簡単です。結局、私はそれをやった。しかし、それでもなお。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発環境と同じバージョンのQuartus Prime ProgrammerとToolsをダウンロードしてインストールする必要があります。バージョンが一致しない場合は、驚きが生じる可能性があります。私はこの事実を理解するために一晩中過ごしました。したがって、開発環境と同じバージョンのツールをダウンロードするだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストール後、プログラムがインストールされたディレクトリ、binサブディレクトリを入力します。一般的に、最も重要なファイルはjtagconfigです。引数なしで実行した場合（ちなみに、私は頑固に./jtagconfigと入力するように要求しました）、システムで利用可能なプログラマーとそれらに接続されているFPGAのリストが表示されます。 USB Blasterがあるはずです。そして、システムがスローする最初の問題は、USBを操作するための十分なアクセス権ではありません。 sudoに頼らずにそれを解決する方法をここで説明します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">radiotech.kz/threads/nastrojka-altera-usb-blaster-v-ubuntu-16-04.1244</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
しかし、ここに表示されるデバイスのリストがあります。</font><font style="vertical-align: inherit;">今あなたは書くべきです：</font></font><br>
<pre><code class="plaintext hljs">./jtagconfig --enableremote &lt;password&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、サーバーが起動し、ネットワーク上のどこからでもアクセスできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてうまくいきますが、システムのファイアウォールでは誰もこのサーバーを見ることができません。</font><font style="vertical-align: inherit;">Googleでのチェックでは、Linuxの種類（多くあります）ごとにファイアウォールのポートが独自の方法で開いていることが示されているため、管理者に連絡したいので、多くの呪文をキャストする必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、jtagdがautorunに登録されていなかった場合、リモートアクセスを開くと、パスワードを設定できないことが通知されます。</font><font style="vertical-align: inherit;">これが起こらないようにするには、jtagconfig自体ではなく、その前にjtagdを起動する必要があります。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、シャーマニズムはシャーマニズムに基づいています。</font><font style="vertical-align: inherit;">論文を修正しましょう。</font></font><br>
<ul>
<li>       1309.  ,     ,  ,    tcp,  udp;</li>
<li>  jtagconfig     USB Blaster     ,     ;</li>
<li>        jtagd   .     jtagd   ,       ,     ; </li>
<li>     <pre><code class="plaintext hljs">jtagconfig --enableremote &lt;password&gt;</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、GUIインターフェースを経由する同様のパスがありますが、すべてをバッチで実行する方がより論理的です。</font><font style="vertical-align: inherit;">したがって、私はバッチバージョンについて説明しました。</font><font style="vertical-align: inherit;">これらの論文がすべて完了すると（そしてシステム管理者がそれらを完了すると）、プログラマーをマシンで起動すると、機器の不足に関するメッセージが表示されます。</font><font style="vertical-align: inherit;">[ハードウェアのセットアップ</font></font><br>
<img src="https://habrastorage.org/webt/cj/bq/jh/cjbqjhzydanq__godqnyhq8_ah8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
]をクリックします。[JTAG設定]タブに移動し、[サーバーの追加]をクリックします</font></font><br>
<img src="https://habrastorage.org/webt/xn/36/8a/xn368ajq_d5kjx-nxyyvculmpus.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。Reddネットワークアドレス（192.168.1.100を持っています）とパスワードを入力します</font></font><br>
<img src="https://habrastorage.org/webt/kd/ro/7y/kdro7ya9kr8od0uwvcv6hycn0eu.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。接続が成功したことを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれを達成するために5月3日の休暇を過ごしました。</font></font><br>
<img src="https://habrastorage.org/webt/8h/gp/x0/8hgpx0r19klfwbp7fqd0atfesvq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[ハードウェア設定]タブに切り替えて、ドロップダウンリストを開き、そこでリモートプログラマーを選択します。</font></font><br>
<img src="https://habrastorage.org/webt/-2/cf/te/-2cfteubqycs6lr1h8bniz92epi.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、使用できるようになりました。</font><font style="vertical-align: inherit;">スタートボタンのロックが解除されます。</font></font><br>
<img src="https://habrastorage.org/webt/a_/9m/t9/a_9mt9509lhs8muotyfcxh9wwtw.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の「ファームウェア」</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上手。この記事が実際的な価値を持つために、上記の方法を使用して作成された最も単純な「ファームウェア」を分析してみましょう。コンプレックスに実際に実装した最も単純なことは、SDRAMチップのテストです。ここでは、この例と実践について説明します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDRAMをサポートする多くのアマチュアコアがありますが、すべてがどういうわけかトリッキーになります。そして、すべてのトリックを考慮することは労働です。 NIOS IIコンピューティングシステムに挿入できる既製のソリューションを使用するため、標準のSDRAMコントローラコアを使用します。コア自体は、</font><b><font style="vertical-align: inherit;">エンベデッドペリフェラルIPユーザーガイドに</font></b><font style="vertical-align: inherit;">記載されてい</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および説明の多くのスペースは、コアクロックに対するSDRAMのクロックシフトに費やされています。複雑な理論計算と公式が与えられていますが、特に報告されていないもの。何をすべきかについては、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verilog DesignsでのアルテラのDE0ボードでのSDRAMの使用を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照</font><b><font style="vertical-align: inherit;">して</font></b><font style="vertical-align: inherit;">ください</font><font style="vertical-align: inherit;">。分析の過程で、このドキュメントの知識を適用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quartus Prime 17.0の無料版で開発を行います。私はこれに焦点を合わせています。アセンブリ中に、彼らは将来、</font><b><font style="vertical-align: inherit;">SDRAMコントローラの</font></b><font style="vertical-align: inherit;">コアは</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無料版から追い出されます。これが開発環境で既に発生している場合、無料の17番目のバージョンをダウンロードして仮想マシンにインストールすることに煩わされることはありません。主な作業はどこにいても行われ、SDRAMを使用したReddのファームウェアは17番目のバージョンです。まあ、それはあなたが無料のオプションを使用する場合です。誰もそれを有料のものから捨てると脅したことはまだありません。しかし、私は気を取られました。新しいプロジェクトを作成します</font></font><br>
<img src="https://habrastorage.org/webt/qv/sw/eq/qvsweqv-lktrkcs5keaxu8q_5se.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。SDRAM_DEMOという名前を付けます。名前は覚えておく必要があります。私は超高速開発を実行するので、プロセッサシステム自体はVerilogレイヤーなしで最上位でなければなりません。そして、これを実現するには、プロセッサシステムの名前がプロジェクトの名前と一致する必要があります。覚えておいてください。</font></font><br>
<img src="https://habrastorage.org/webt/fv/yf/-p/fvyf-p3vwrjspjlvvd5tqdm2ndi.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数ステップでデフォルト値に同意すると、クリスタルの選択に行き着きます。コンプレックスで使用されているEP4CE10E22C7を選択します。</font></font><br>
<img src="https://habrastorage.org/webt/n6/du/8e/n6du8ejpw_xysdx7dui4f_rc2qi.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のステップでは、習慣から、ModelSim-Alteraでモデリングを選択します。今日は何もモデル化しませんが、すべてが役に立ちます。そのような習慣を身につけてそれに従うのが良いです：</font></font><br>
<img src="https://habrastorage.org/webt/ym/on/v2/ymonv28mmot9o4frulumjznujk8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトが作成されます。すぐにプロセッサシステムの作成に進みます（[ツール]-&gt; [プラットフォームデザイナー]）：</font></font><br>
<img src="https://habrastorage.org/webt/qv/tb/t8/qvtbt8vbulg78qybfcpdb1jqaja.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クロックとリセットモジュールを含むシステムを作成しました。</font></font><br>
<img src="https://habrastorage.org/webt/xg/bz/o3/xgbzo3yoi-jrtmaiqhd_fz1vp_q.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、前述したように、SDRAMカーネルには特別なクロックが必要です。したがって、通常のモジュールは容赦なく捨てられ</font></font><br>
<img src="https://habrastorage.org/webt/2e/yv/_0/2eyv_0ufhrwtnap8vdyryftspus.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、その代わりに、University Program-&gt; SystemおよびSD-RAM Clock for DE-series boardsブロックを追加します。</font></font><br>
<img src="https://habrastorage.org/webt/ho/tf/nd/hotfndwnreutxuoycv3rh-lhz_m.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDRAMスイッチング回路のインスピレーションがこのブレッドボードから引き出されたので、プロパティでDE0-Nanoを選択します</font></font><br>
<img src="https://habrastorage.org/webt/lc/0f/tl/lc0ftl82cyh0yjpj4baklxmyddc.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。プロセッサシステムの充填を開始します。もちろん、最初に追加するのはプロセッサコア自体です。それをプロセッサと周辺機器-&gt;組み込みプロセッサ-&gt; NIOS IIプロセッサとしましょう。</font></font><br>
<img src="https://habrastorage.org/webt/28/sl/n4/28sln4t0khej0gnfh9v9honohu4.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼のために、私達は特性をまだ記入していません。一連のエラーメッセージが表示されても、[完了]をクリックするだけです。これまでのところ、これらのエラーを解消する機器はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、実際のSDRAMを追加します。メモリインターフェイスとコントローラ-&gt; SDRAM-&gt; SDRAMコントローラ。</font></font><br>
<img src="https://habrastorage.org/webt/ov/ro/fk/ovrofkityrsnw3vcttpjnwcwhzw.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、プロパティの入力を続ける必要があります。リストから最も類似した組織のマイクロ回路をリストから選択し、「Apppy」をクリックします。そのプロパティは、メモリプロファイルフィールドに分類されます。</font></font><br>
<img src="https://habrastorage.org/webt/de/hv/e_/dehve_t_smpdsm3ailji3mhf0u8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、データバスのビット幅を16、アドレスラインの数を13、列を9 </font></font><br>
<img src="https://habrastorage.org/webt/2m/7h/0o/2m7h0otrg1pjp_jchcdmfa1uzvg.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ずつ変更します。まだ時刻を修正していません。将来的には、この推奨は変更される可能性があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセッサシステムはプログラムを意味します。プログラムはどこかに保存する必要があります。 SDRAMチップをテストします。今のところ、彼女を信用することはできません。したがって、プログラムを保存するには、ブロックRAM FPGAに基づいてメモリを追加します。基本機能-&gt;オンチップメモリ​​-&gt;オンチップメモリ​​（RAMまたはROM）：</font></font><br>
<img src="https://habrastorage.org/webt/ry/ot/-e/ryot-emahnalpamwnkyn1xwcihc.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボリューム...さて、32キロバイトにしましょう。</font></font><br>
<img src="https://habrastorage.org/webt/mk/jc/gb/mkjcgbjb57ibhy0xeob8mg84nfo.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメモリはどこかから読み込まれている必要があります。これを行うには、[デフォルト以外の初期化ファイルを有効にする]チェックボックスをオンにして、意味のあるファイル名を入力します。 firmware.hexとしましょう：</font></font><br>
<img src="https://habrastorage.org/webt/bh/mf/7a/bhmf7ajkwxp8gixms4bgvy9cp08.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事はすでに複雑なので、過負荷にしません。テストの物理的な結果を単にPASS / FAIL行の形式で出力します（お気に入りのJTAGデバッグで論理的な結果を確認します）。これを行うには、GPIOポートを追加します。プロセッサとペリフェラル-&gt;ペリフェラル-&gt; PIO（パラレルIO）：</font></font><br>
<img src="https://habrastorage.org/webt/_p/qn/tw/_pqntwmv-ivkyl3zkrwnxcb5wum.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロパティに2ビットを設定します。また、個々のビット制御のボックスをチェックします。また、ただの習慣です。</font></font><br>
<img src="https://habrastorage.org/webt/a7/bk/j4/a7bkj4ophwwlkeog2laba81emds.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たくさんのエラーがあるそのようなシステムを手に入れました：</font></font><br>
<img src="https://habrastorage.org/webt/w_/4p/o2/w_4po2omowqkf35ge_6-ygmdpl4.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはそれらを排除し始めます。まず、時計を止めてリセットします。クロックおよびリセットユニットでは、入力をスローする必要があります。これを行うには、「エクスポートするにはダブルクリックしてください」というフィールドがあります。クリックします</font></font><br>
<img src="https://habrastorage.org/webt/bw/gx/w1/bwgxw1cczmqvwzfy3iruazvzzn8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が、多少の短い名前を付けます。</font></font><br>
<img src="https://habrastorage.org/webt/be/xc/id/bexcidwci8wqdctpttm_uqnsgwo.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、SDRAMクロック出力を破棄する必要があります。</font></font><br>
<img src="https://habrastorage.org/webt/bs/bp/6j/bsbp6j_uz7vlmsnpwvg17cbcqko.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、sys_clkをすべてのクロック入力に分割し、reset_sourceをすべてのリセットラインに分割します。 「マウス」で対応する線を接続するポイントを軽くたたくか、対応する出口に移動し、マウスの右ボタンをクリックして、ドロップダウンメニューの[接続]サブメニューに移動し、そこで接続を選択します。</font></font><br>
<img src="https://habrastorage.org/webt/8t/2q/v4/8t2qv4btxo3ygqw6q3bjqa23hae.png"> <br>
<br>
<img src="https://habrastorage.org/webt/ag/as/sz/agasszsc45aobhbaephagupfwja.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、タイヤを接続します。 Data Masterをすべてのデバイスのすべてのバスに接続し、Inctruction Masterをほとんどすべてに接続します。 PIO_0バスに接続する必要はありません。そこから、指示は絶対に読まれないでしょう。</font></font><br>
<img src="https://habrastorage.org/webt/rb/fl/av/rbflavgwws5gsdpmtqrrqlp-v0s.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、アドレスの競合を解決できます。これを行うには、メニュー項目「システム」-&gt;「ベースアドレスの割り当て」を選択します。</font></font><br>
<img src="https://habrastorage.org/webt/ri/pk/te/ripkteta-ftnbrdgjtyj8cabtq8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、アドレスを取得したら、ベクトルを割り当てることもできます。これを行うには、プロセッサコアのプロパティに移動し（それをポイントし、マウスの右ボタンを押して[編集]メニュー項目を選択します）、そこでオンチップメモリ​​のベクトルを構成します。ドロップダウンリストでこのタイプのメモリを選択するだけで、数字が置き換えられます。</font></font><br>
<img src="https://habrastorage.org/webt/aj/om/nn/ajomnnjye5kuskwbtquacdxqbkw.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラーは残っていません。ただし、警告が2つ残っています。 SDRAMおよびPIOラインをエクスポートするのを忘れました。</font></font><br>
<img src="https://habrastorage.org/webt/gn/ux/2m/gnux2mk6ikcgsuzin6xbpmyoiwe.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リセットとクロックブロックについてはすでに行ったように、必要なレッグをダブルクリックして、それらに最短の（ただし理解できる）名前を付けます。</font></font><br>
<img src="https://habrastorage.org/webt/ea/bp/pq/eabppqnnarmd3fqbtytqbfoxteg.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべて、エラーや警告はありません。システムを保存します。さらに、プロセッサシステムがプロジェクトの最上位の要素になるように、名前はプロジェクトの名前と一致する必要があります。私たちがそれを何と呼んだかを忘れていませんか？</font></font><br>
<img src="https://habrastorage.org/webt/hc/gh/7v/hcgh7vmhtfvsziy7idu7pdgbbuo.png"> <br>
<br>
<img src="https://habrastorage.org/webt/3w/pl/rr/3wplrrqclfbkfquzndakoonrmdw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、そして最も重要なボタンを押してください-HDLを生成してください。</font></font><br>
<img src="https://habrastorage.org/webt/1t/hm/im/1thmimhmf_xc3taykvi8ct1t6ae.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべて、プロセッサー部分が作成されます。完了をクリックします。このプロセッサシステムをプロジェクトに追加すると良いと思います。</font></font><br>
<img src="https://habrastorage.org/webt/d1/cf/lv/d1cflvqskri1-jrh1ybgflbmglg.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加：</font></font><br>
<img src="https://habrastorage.org/webt/3n/yj/gl/3nyjglrcg5dxdngcghpufpgmot8.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、[追加]ボタンを使用して、次の図を</font></font><br>
<img src="https://habrastorage.org/webt/wm/jl/p8/wmjlp82jua7ilcvlosa65g98iqy.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行します。SIPファイルはまだ作成されていません。はい、この記事のフレームワークでは必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うふふ。最初のステップが実行されました。システムがプロジェクトの階層と使用されているレッグを検出できるように、プロジェクトをドラフトします。コンパイルエラーは怖くないです。無料バージョンの環境では、JTAGアダプターが接続されている間のみ機能するカーネルが作成されました。しかし、Reddコンプレックスでは、共通のボード上で離婚されているため、常に接続されています。つまり、何も心配する必要はありません。したがって、これらのエラーは無視します。</font></font><br>
<img src="https://habrastorage.org/webt/0b/hk/jo/0bhkjo904iqlqnjcpaf-iinssba.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDRAMカーネルの説明に戻ります。これは、CKEラインが使用されておらず、常にユニットに接続されていることを示しています。実際、複合体のフレームワークでは、FPGAレッグは高価であるだけでなく、貴重なリソースです。そして、常にユニット内にある脚を広げるのはばかげているでしょう（そしてDE0-NANOボード上でも離婚されません）。 Verilogレイヤーがあった場合、対応するチェーンがそこで切断される可能性がありますが、時間を節約できます（緊張し、既に取得したドキュメントのボリュームを見て、保存せずにそれがさらに判明することになります）。したがって、レイヤーはありません。になる方法割り当てエディターに移動します。それはその中にあります。PinPlannerでは、説明から判断すると、同様の機能はありません。</font></font><br>
<img src="https://habrastorage.org/webt/wa/mn/li/wamnlimpfzqz8n4xguihx3jciwe.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだ線はありません。良い。新しい</font></font><br>
<img src="https://habrastorage.org/webt/nd/hr/b_/ndhrb_1xgzvlhllnqj2zjrrq50i.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイコンを</font><font style="vertical-align: inherit;">作成します。</font><font style="vertical-align: inherit;">このアイコンを選択してください：</font></font><br>
<img src="https://habrastorage.org/webt/_c/mg/o5/_cmgo53jkcsq4z4i5lzfdvn_s-a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定した検索システムで[リスト]をクリックし、検索結果でCKEを見つけます。</font></font><br>
<img src="https://habrastorage.org/webt/s2/r8/9t/s2r89tiymksz4ohpxv_6mudnqoy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを右側の列に追加し、[OK]をクリックします。</font></font><br>
<img src="https://habrastorage.org/webt/xv/fd/jy/xvfdjyxtnasndf8a_xara0wzpom.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のリストが表示されます。</font></font><br>
<img src="https://habrastorage.org/webt/g7/qn/-k/g7qn-kbokf172_5s4o0gvyjk2fk.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
黄色のフィールドで、ドロップダウンリストをクリックして、仮想ピンを見つけます。我々が選択しました。黄色が別のセルに移動しました：</font></font><br>
<img src="https://habrastorage.org/webt/x0/1h/4a/x01h4aaksdrgol8_wyoe3cnwaji.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オンを選択します。オン：</font></font><br>
<img src="https://habrastorage.org/webt/qw/5b/bl/qw5bblpjq2fswujalhmvlcgpew0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それだけです。黄色はなくなりました。そして、チェーンは仮想としてマークされました。つまり、物理的な脚は必要ありません。したがって、それをFPGAの物理的な結論に割り当てることはできません。アサインメントエディターを閉じ、ピンプランナーを開きます。図を参照して脚を割り当てることも、プロジェクトの一部である* .qsfファイルからリストを取得することもできます。このファイルは、記事に添付します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wn/aj/kc/wnajkcjd97ko1cd7hmasi67ifq0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以上で、Pin Plannerを閉じます。プロジェクトの最終的なコンパイルを実行します。</font><font style="vertical-align: inherit;">ハードウェアの準備ができたら、結果として得られるプロセッサシステムのソフトウェアの開発に進みます。</font><font style="vertical-align: inherit;">しかし、記事は非常に大きいことが判明したので、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次回</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はそれを行います</font><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja452642/index.html">群衆の強さ。シカゴがゴミを食べるロボットを開発した方法-川の掃除</a></li>
<li><a href="../ja452644/index.html">DevConf X Web開発者会議-6月21日</a></li>
<li><a href="../ja452646/index.html">ニューラルネットワークがブラックホールの最初の写真で見たもの</a></li>
<li><a href="../ja452648/index.html">PHP：複雑なXMLファイルを解析し、ネイティブコードで溺れさせない方法</a></li>
<li><a href="../ja452652/index.html">セキュリティウィーク21：Whatsappの穴、Intelプロセッサの新しい脆弱性、Windowsのゼロデイ</a></li>
<li><a href="../ja452662/index.html">SelectelのHPEサーバー</a></li>
<li><a href="../ja452664/index.html">私は静的なWebページに対して18,000ドルを請求しました...そして私はそれを手に入れました</a></li>
<li><a href="../ja452668/index.html">GDPRコンプライアンスについてCookieを確認する方法-新しいオープンツールが役立ちます</a></li>
<li><a href="../ja452670/index.html">データエンジニアとは誰ですか？</a></li>
<li><a href="../ja452672/index.html">週刊ハーバート。Habrapodcastパイロットリリースに会う</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>