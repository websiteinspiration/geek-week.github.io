<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚋 🌱 🌕 Comment construire une maison intelligente et ne pas devenir fou 🚕 👧🏽 ⬛️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le mobilier intelligent, qui s'occupe lui-même de l'ordre dans la maison, est un incontournable pour presque toutes les images futuristes. En fait, un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment construire une maison intelligente et ne pas devenir fou</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bary_io/blog/502056/"><img src="https://habrastorage.org/webt/io/mx/xk/iomxxk5qmmqlguhptngp9zjlptu.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mobilier intelligent, qui s'occupe lui-même de l'ordre dans la maison, est un incontournable pour presque toutes les images futuristes. En fait, un climat autorégulé, des lumières automatiques allumées et éteintes et une commande vocale des appareils électroménagers - tout cela peut être configuré maintenant. Mais il faudra un peu d'expérience, des connaissances de base dans le domaine de la technologie et parfois de la programmation, ainsi que toute une mer de fantaisie. Dans mon cas, je l'ai fait pour que seul le fantasme soit suffisant, mais avant tout ...</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/bq/rp/k5/bqrpk5eo6zggo-delsghlgs7y1o.jpeg" width="300" height="200" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je me suis intéressé à l'idée d'une «maison intelligente» il y a environ cinq ans. Au début, j'ai fait le système le plus simple. Elle contrôlait la lumière dans le couloir et la salle de bain par le capteur de mouvement, la hotte par le capteur d'humidité et aussi la station météo - à cette époque, tout le monde en était fou. Chaque bricolage qui se respecte devait faire une station météo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, j'ai équipé l'appartement d'un relais contrôlé pour allumer automatiquement la lumière dans le couloir et la salle de bain. Cela ressemblait à ceci: un capteur se tenait dans le couloir, le second dans la salle de bain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelqu'un allait dans la salle de bain, le capteur du couloir a détecté son mouvement et a immédiatement allumé la lumière dans le couloir et dans la salle de bain. En même temps, si personne n'est entré dans la salle de bain, cela a déjà été corrigé par le capteur situé à l'intérieur de la salle de bain. Après 15 secondes, la lumière s'est éteinte là-bas. Si une personne entrait dans la salle de bain, la lumière dans le couloir s'éteignait après une minute.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai aussi pensé à de tels cas si quelqu'un réfléchissait trop en étant assis sur un «ami blanc» dans la salle de bain (j'avais une salle de bain combinée). Pour cela, la lumière dans la salle de bain a été divisée en deux groupes. L'un s'est éteint 3 minutes après que le capteur dans la salle de bain a cessé de détecter les mouvements, l'autre après 5 minutes. Donc, pendant plus de cinq minutes pour rester immobile dans la salle de bain à la lumière n'a pas fonctionné. Très discipliné. Cependant, vous pouvez toujours bouger votre main et continuer à penser à l'essentiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un capteur d'humidité a également fonctionné dans la salle de bain, qui a automatiquement démarré la hotte si l'humidité dépassait 50%. Dès que la pièce a été ventilée à 45% d'humidité, la hotte s'est éteinte.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La direction est passée - ou plutôt a essayé de passer - par la plate-forme Arduino.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a8/lo/0v/a8lo0valnq03awxxkgr-j2bvnxa.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Photo prise sur le site Web </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du fabricant</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presque immédiatement, il est devenu clair que cette plateforme ne visait pas uniquement à créer une maison intelligente. Le principal inconvénient de travailler avec Arduino était que la plate-forme fonctionnait sans réseau, et sans lui, aucun écosystème vraiment unifié ne pouvait être obtenu. Bien sûr, je pourrais refaire l'Arduino et ajouter un support réseau, mais pourquoi? J'ai choisi un chemin plus simple et j'ai changé cette plateforme en une autre.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant suffisamment joué avec Arduino, j'ai reconnecté la maison à la carte ESP-8266. En fait, c'est le même Arduino, mais avec Wi-Fi +, il est plus compact. Ce module est toujours populaire auprès des fabricants de gadgets pour les maisons intelligentes.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/kh/ql/uikhqljobo7gz8pz2tpcfcqhbvm.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Photo prise sur </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En parallèle, j'ai essayé de rendre la maison intelligente encore plus intelligente. Par exemple, résolvez le problème du chauffage au sol 24h / 24 ou d'un climatiseur toujours allumé. Pour cela, j'ai acheté des thermostats WiFi chinois Beok. Ils ont permis d'éteindre le chauffage au sol à distance, mais ont dû le faire via une application spéciale dans le téléphone.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai résolu le problème de la télécommande du climatiseur à l'aide de l'émulateur de signal infrarouge Broadlink RM Pro. Rien de compliqué: vous enregistrez un signal du panneau de contrôle de la climatisation vers l'émulateur (il peut y avoir n'importe quelle technique contrôlée par la télécommande), puis sur le téléphone, vous appuyez sur un bouton dans l'application, et l'émulateur lit le signal précédemment enregistré. Dans le cas du climatiseur, j'ai eu l'occasion de l'allumer et de l'éteindre, de régler le mode de fonctionnement et de définir d'autres paramètres à distance.&nbsp;&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commutateurs Livolo également installés. Avec leur aide, j'ai également pu allumer et éteindre les lumières par voie hertzienne.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/bz/s6/tobzs6u41nh4d_b_eq7tovpop8y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parmi les inconvénients: pour le contrôle, j'ai dû réinstaller une application distincte et il n'y a pas eu de retour, c'est-à-dire que je ne pouvais pas voir que la lumière était allumée si elle était allumée ou éteinte par quelqu'un manuellement à l'aide d'un interrupteur conventionnel.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Divers relais WiFi contrôlés tels que Sonoff ou Tuya et même le coûteux Danalock pour verrouiller l'appartement, qui nécessitait également une application séparée, sont également apparus dans la maison. Presque toutes ces petites choses (à l'exception de Danalock) que j'ai achetées sur le site chinois Aliexpress, où elles coûtaient un sou et me permettaient d'expérimenter sans investissements sérieux.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des premiers achats relativement sérieux a été le reniflard Tion. </font><font style="vertical-align: inherit;">Avec le contrôle automatique du CO2, il a plus ou moins fait face, mais la température du chauffage de l'air en hiver devait constamment être ajustée manuellement. </font><font style="vertical-align: inherit;">Et encore une fois - pour gérer, il était nécessaire d'installer une application distincte.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/pn/pd/8wpnpdu6oip9ck-a_qn8z6bv8i4.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La photo a été prise sur le site Web </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du fabricant.</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tous les capteurs et contrôleurs que j'ai essayés à l'époque, je ne m'en souviens même pas. </font><font style="vertical-align: inherit;">Mon smartphone était encombré d'applications pour les gérer. </font><font style="vertical-align: inherit;">C'était tout un zoo, qui devait constamment suivre. </font><font style="vertical-align: inherit;">J'ai essayé de combiner la gestion de ces applications à travers toutes sortes d'agrégateurs comme HomeBridge / MajorDomo, etc. </font><font style="vertical-align: inherit;">Mais tout le monde a montré ses lacunes importantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface peu conviviale, et parfois juste une interface terrible</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manque de support pour toutes les applications utilisées</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connexion complexe</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La recherche d'une application de gestion centralisée d'un tel volume de capteurs, contrôleurs et autres systèmes de contrôle n'a pas abouti. Ensuite, j'ai essayé de me rappeler de façon indépendante l'un des appareils «intelligents» - le reniflard très Tion. J'ai écrit un script pour contrôler automatiquement la température de chauffage en fonction de la température ambiante. Le fait est que le système de ventilation n'avait pas de réglage automatique de la température de chauffage de l'air. Il s'est avéré que la pièce était soit super chaude, soit super froide. Il n'y avait aucun moyen de parvenir à un terrain d'entente. Ici, à l'aide d'un script écrit et d'une pause, ce problème a été résolu.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le succès avec un script pour le reniflard m'a incité à créer ma propre application pour gérer une maison intelligente. L'objectif principal était de créer un programme avec une intégration pratique des appareils intelligents, des conditions d'automatisation à plusieurs niveaux et la capacité de gérer tous les appareils de la maison.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant environ un an, j'ai moi-même été engagé dans le développement d'applications back-end et front-end.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le côté serveur est écrit en NodeJS. Le choix en faveur de NodeJS a été fait en raison de la communauté développée, dans laquelle il existe des protocoles mis en œuvre pour presque tous les appareils sur le marché. La partie client est écrite en angulaire (ionique) et fonctionne sur Android / iOS. En général, l'architecture client-serveur classique. </font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur une note:</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au cours du travail sur l'application, j'ai eu un aperçu technique de l'utilisation des impuretés lors de l'écriture des pilotes de périphérique. </font><font style="vertical-align: inherit;">Je ne sais pas, peut-être pour certains, c'est élémentaire, mais il m'est vraiment devenu plus facile de respirer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai réécrit les pilotes de périphérique plusieurs fois jusqu'à ce que j'arrive à quelque chose comme ça:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de code d'un des appareils</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {XiaomiSubdeviceV2} <span class="hljs-keyword">from</span> <span class="hljs-string">'../xiaomi.subdevice.v2'</span>;
<span class="hljs-keyword">import</span> {load_power} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/load_power'</span>;
<span class="hljs-keyword">import</span> {power_plug} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/power_plug'</span>;
<span class="hljs-keyword">import</span> {PowerPurpose} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/PowerPurpose'</span>;
<span class="hljs-keyword">import</span> {Relay} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/types/Relay'</span>;
<span class="hljs-keyword">import</span> {HomeKitAccessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/HomeKitAccessory'</span>;
<span class="hljs-keyword">import</span> {Lightbulb2Accessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/Lightbulb2Accessory'</span>;
<span class="hljs-keyword">import</span> {Yandex} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/Yandex'</span>;
<span class="hljs-keyword">import</span> {YandexLightOrSwitch} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/YandexLightOrSwitch'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LumiPlug</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">XiaomiSubdeviceV2</span>.<span class="hljs-title">with</span>(<span class="hljs-title">Relay</span>, <span class="hljs-title">power_plug</span>, <span class="hljs-title">load_power</span>, <span class="hljs-title">PowerPurpose</span>,
  <span class="hljs-title">HomeKitAccessory</span>, <span class="hljs-title">Lightbulb2Accessory</span>,
  <span class="hljs-title">Yandex</span>, <span class="hljs-title">YandexLightOrSwitch</span>) </span>{<font></font>
<font></font>
  onCreate() {<font></font>
    <span class="hljs-keyword">super</span>.onCreate();
    <span class="hljs-keyword">this</span>.model = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.class_name = <span class="hljs-string">'lumi.plug'</span>;
    <span class="hljs-keyword">this</span>.driver_name = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.driver_type = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">this</span>.parent_class_name = <span class="hljs-string">'lumi.gateway'</span>;<font></font>
  }<font></font>
<font></font>
  getIcon() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'socket'</span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel est que, malgré l'abondance de différents appareils, ils font tous à peu près la même chose et fournissent environ les mêmes informations. </font><font style="vertical-align: inherit;">Par conséquent, toutes les capacités des appareils ont été placées dans des impuretés distinctes, dont le pilote final se compose finalement. </font><font style="vertical-align: inherit;">Par exemple, l'application prend en charge de nombreux appareils dotés de la fonction marche / arrêt. </font><font style="vertical-align: inherit;">Il est fabriqué dans une impureté distincte et est utilisé de manière identique pour tous les appareils. </font><font style="vertical-align: inherit;">Élémentaire, Watson!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que cela a donné: tout pilote d'un nouveau périphérique est écrit assez rapidement et facilement, car tout est standardisé et il n'est pas nécessaire de s'inquiéter du stockage ultérieur des informations reçues. Pour des protocoles complètement nouveaux (que je n'avais pas encore), des impuretés sont également écrites qui sont basées sur celles existantes. Ils reçoivent déjà des informations sur l'appareil et les transmettent plus loin dans la chaîne. Cette approche nous a permis de réduire la quantité de code de dizaines de fois (au départ, chaque pilote était une copie d'un pilote similaire). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, petit à petit, j'ai parcouru tous les cercles de l'enfer pour finir le support et le front. Lorsque l'application a acquis un aspect assez tolérable, je me suis dit: pourquoi ne pas partager votre développement avec le public? Des partenaires ont été trouvés pour le projet et des assistants pour évoquer la candidature.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, il fallait penser à la conception de l'application. Pour ce faire, j'ai dû me tourner vers des designers professionnels. Je croyais naïvement que cela prendrait de 3 à 4 mois, mais finalement le processus a traîné en longueur. Malgré le fait que la structure de l'application n'a pas beaucoup changé par rapport à la source d'origine, tout a dû être refait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En parallèle, j'ai - non pas seul, mais avec une équipe de partenaires de projet - acheté les appareils les plus populaires pour une maison intelligente et ajouté une application si elle ne supportait pas ces gadgets. Bientôt, cependant, il est devenu clair qu'il n'y aurait pas assez d'argent pour tous les appareils intelligents.Nous avons donc décidé de discuter avec les acteurs existants du marché et de convenir gratuitement d'échantillons de test d'équipements. Nous n'avons pas été refusés et Wirenboard et MiMiSmart sont devenus les premiers fournisseurs sérieux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, avec les gars, j'ai créé une nouvelle application pour la domotique intelligente avec une architecture client-serveur classique, qui est mise sur n'importe quelle plate-forme, et avec un design moderne et pratique. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rencontrez le BARY *. </font></font></a></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Le nom ne vient pas du nom de Bari Alibasov, mais du personnage du livre d'Arthur C. Doyle «Le chien des Baskerville» du majordome de Barrymore - votre «majordome intelligent» personnel.&nbsp;</font></font></i><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que s'est-il passé: description de l'application avec de belles images et des chats</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'écran principal est un tableau de bord pratique avec la possibilité de visualiser et de gérer les paramètres des salles automatisées. Pratique - c'est le mot clé, car les tableaux de bord des applications avec lesquelles j'ai essayé de travailler devaient être configurés manuellement. Pas le passe-temps le plus agréable, la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/dl/9k/gzdl9kdk2n5x2fjmlmfwtcnxjas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
maison peut être divisée en zones et les zones en pièces. Chaque pièce a différents paramètres: température, humidité, consommation électrique actuelle, etc., ainsi que des actions sélectionnées. Si nous cliquons sur la pièce, nous tomberons dans la liste des appareils qui y sont connectés: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/f-/22/ygf-224hyp7be9qrzf2ifh3plv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez allumer / éteindre l'appareil, et voir également son paramètre principal. Lors du passage à un appareil, un contrôle plus détaillé avec une liste complète des fonctions sera disponible.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les appareils sont connectés en utilisant les mêmes paramètres. Pour de nombreux appareils, il existe un assistant de connexion. Pas de configs pour ceux qui aiment plus chaud! Fondamentalement, il s'agit de spécifier l'adresse IP de l'appareil (pour de nombreux appareils, il existe une recherche automatique). Si l'adresse IP change soudainement, alors ça va, le serveur la trouvera automatiquement à la nouvelle adresse.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q1/2b/ee/q12beeqowea3lu7egovw_8y0yry.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a intégration avec Apple HomeKit, il est utilisé pour le contrôle vocal via Siri. Tous les appareils pris en charge dans BARY s'intègrent à Apple HomeKit en un seul clic (bonjour aux fans de HomeBridge). Pas sans le soutien de Yandex Alice. Elle était plus sympathique en termes de commandes d'interface. Par exemple, Siri ne veut pas fermer les rideaux avec la commande "fermer les rideaux", ne peut pas définir un certain niveau de volume sur le téléviseur et ainsi de suite. Yandex.Alice n'a pas de tels kookies.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la commodité de la gestion des terrains intelligents, l'automatisation a été mise en place: règles pour l'exécution de toutes les actions lors du respect d'un ensemble de conditions. Les automatisations sont logiques, à plusieurs niveaux, c'est-à-dire vous pouvez faire quelque chose comme: "Condition 1 et (Condition 2 ou Condition 3)." Le tout dans un bel éditeur d'automatisation logique:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c-/hg/bf/c-hgbflmqnmyu7ld7owltj5g5ao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Personnellement, j'avais déjà une centaine de programmes d'automatisation, et chacun d'entre eux peut être trouvé rapidement, car tout est regroupé par pièce et par appareil: les </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/xz/n9/xlxzn9o8tycbcxwnvtlw9w014ym.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
scripts sont également pris en charge dans l'application. Un scénario est un complexe d'actions qui est effectué sous certaines conditions de l'automatisation. Pour ma maison intelligente, j'utilise uniquement l'ensemble standard: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fy/62/_d/fy62_dwup-9j5zyhvj-b3jd0i-4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
j'ai quitté la maison / rentrer chez moi via l'Apple TV - il s'allume / s'éteint automatiquement lorsque tout le monde quitte la maison ou que quelqu'un rentre chez lui. Vous rentrez chez vous et l'annonceur aux yeux tristes de Channel 1 vous y rencontre déjà. Bien grande? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, quel genre de maison intelligente sans la possibilité de regarder un chat? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/4l/sj/cl4lsjn0wyslby9mavknwlmplts.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez connecter n'importe quelle caméra capable de fournir un flux RTSP.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Séparément, je veux parler du bloc des statistiques. Cela s'est avéré assez informatif: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8k/vh/g4/8kvhg4ixvnkduzunurcf-lputrg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans la légende, la barre rouge est l'écart par rapport aux valeurs moyennes des six derniers mois, la barre grise est le débit dans les valeurs moyennes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la photo, mes statistiques de septembre. Il faisait froid, le chauffage n'avait pas encore été fourni, donc le chauffage était constamment allumé à la ventilation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez également voir les statistiques de n'importe quel appareil connecté: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/iw/ju/atiwjujpwobznspvzjvidoc8g9m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fait, la disponibilité de l'automatisation et des statistiques a réduit les coûts d'électricité de plus de 2 fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les événements survenus sont stockés et peuvent être consultés: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/ss/kw/qhsskw7yzjbhg8vhfpj1bsohmdo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Également sur la page principale, il y a un onglet spécial qui recueille tous les principaux indicateurs sélectionnés par l'utilisateur:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lw/78/kc/lw78kcs-ca7xyq_uljlybmp5uqc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, la mesure de l'eau est mise en œuvre via le capteur d'ouverture de porte / fenêtre Xiaomi. </font><font style="vertical-align: inherit;">Pour ce faire, au lieu d'un commutateur à lames, la sortie du compteur d'impulsions est soudée à un contact spécial et un compteur virtuel est créé dans BARY, dans lequel vous pouvez spécifier ce capteur comme source d'impulsions.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture et sécurité</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'échange client-serveur est crypté à l'aide de la technologie AES et le serveur est situé directement à l'intérieur de la salle automatisée. </font><font style="vertical-align: inherit;">À mon avis, cela protège le système autant que possible contre les interventions indésirables de tiers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il n'y a pas d'adresse IP blanche, vous pouvez connecter le cloud. </font><font style="vertical-align: inherit;">Il agira comme un intermédiaire, sans possibilité de décrypter les commandes, car </font><font style="vertical-align: inherit;">les clés sont sur le serveur.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Où obtenir</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le côté serveur peut être exécuté sur presque toutes les plateformes existantes - merci NodeJS. </font><font style="vertical-align: inherit;">Pour les plates-formes les plus courantes, nous avons préparé des scripts qui feront tout le travail automatiquement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour Raspberry Pi basé sur Debian Stretch: </font></font><br>
<br>
<code>wget -qO- "http://bary.io/install?target=pi" | sudo bash</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
le paramètre cible est responsable de la plate-forme cible et peut avoir les valeurs suivantes:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Debian Buster)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi_buster</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tinker Board (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tb</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tableau Wiren (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wb</font></font><br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelqu'un veut installer sur une autre plateforme, écrivez-nous et nous mettrons à jour le script. </font><font style="vertical-align: inherit;">Si vous rencontrez des difficultés - écrivez également. </font><font style="vertical-align: inherit;">Nous avons vraiment besoin de commentaires.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'application est disponible gratuitement sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Peut-être qu'à la fin de l'année, la demande sera payée.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi ai-je écrit cet article? </font><font style="vertical-align: inherit;">L'objectif principal est d'obtenir des commentaires de votre part. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, le projet se développe rapidement et toute notre équipe essaie de maximiser la liste des équipements pris en charge disponibles sur le marché. </font><font style="vertical-align: inherit;">Bien que je ne sois pas seul à travailler sur le projet, les tâches sont restées les mêmes: créer l'application la plus pratique qui prend en compte les souhaits et résout les problèmes de tous ceux qui ont participé à l'installation indépendante de solutions intelligentes pour la maison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes ouverts au dialogue sur les intégrations possibles et sommes prêts à mettre en œuvre le plus rapidement possible le support matériel des entreprises intéressées par le partenariat. </font><font style="vertical-align: inherit;">Vous obtenez une application prête à l'emploi et ne perdez pas de temps à développer des logiciels. </font><font style="vertical-align: inherit;">Et nous proposons une large gamme d'appareils pris en charge pour tous les goûts et toutes les couleurs. </font><font style="vertical-align: inherit;">Tout est bien.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans immédiats et arc-en-ciel</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, mon équipe et moi sommes activement engagés dans le développement d'une unité de stockage vidéo. Il sera possible de placer la vidéo dans votre stockage à domicile ou dans un service cloud. Je pense qu'au début de l'année prochaine il sera possible de parler d'une nouvelle version. Doit-il être possible de passer en revue les meilleures perles d'un chat qui se divertit pendant que les propriétaires ne sont pas à la maison?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'année prochaine, nous prévoyons plus d'intégrations avec divers services: une liste d'achats et de choses à faire, un calendrier, etc. Il est venu, a regardé un écran - et tout était bien en vue. Plusieurs projets clés en main ont montré que cette tâche est pertinente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prévoyons également de démarrer la production de contrôleurs avec des logiciels préinstallés pour les solutions batch d'une maison intelligente (actuellement la solution batch "software + hardware" est disponible avec nos partenaires</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseil Wiren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la prise en charge de Google Home et d'Amazon Alexa. </font><font style="vertical-align: inherit;">Eh bien, l'expansion de la gamme d'équipements pris en charge, bien sûr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, peu importe, vous pouvez voir la liste des appareils pris en charge (non complète) sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notre site Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et si quelque chose ne se trouve pas dans la liste, alors demandez dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">groupe télégramme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous serons très reconnaissants si vous partagez ce qui vous manque dans les applications existantes et quelles fonctions vous ajouteriez à notre place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci à tous d'avoir lu. </font><font style="vertical-align: inherit;">Rendons nos maisons plus intelligentes ensemble!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502046/index.html">Cinq ans de rouille</a></li>
<li><a href="../fr502048/index.html">Comportement complexe sans réseaux neuronaux et sans entraînement. La base philosophique</a></li>
<li><a href="../fr502050/index.html">Quelques notes sur la culture</a></li>
<li><a href="../fr502052/index.html">Meilleures pratiques Kubernetes. Créer de petits conteneurs</a></li>
<li><a href="../fr502054/index.html">Réseau de neurones convolutifs et son intégration dans iOS (partie 2)</a></li>
<li><a href="../fr502062/index.html">Qui a créé Java: l'essentiel de James Gosling</a></li>
<li><a href="../fr502066/index.html">Commandes de console simples que tout le monde devrait connaître</a></li>
<li><a href="../fr502068/index.html">110 volts sur votre ordinateur</a></li>
<li><a href="../fr502070/index.html">L'histoire de Pentax (article plus vidéo)</a></li>
<li><a href="../fr502072/index.html">Amarrage de l'ISS à l'aide de JavaScript et d'une boussole</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>