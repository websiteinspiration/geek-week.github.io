<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöã üå± üåï Comment construire une maison intelligente et ne pas devenir fou üöï üëßüèΩ ‚¨õÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le mobilier intelligent, qui s'occupe lui-m√™me de l'ordre dans la maison, est un incontournable pour presque toutes les images futuristes. En fait, un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment construire une maison intelligente et ne pas devenir fou</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bary_io/blog/502056/"><img src="https://habrastorage.org/webt/io/mx/xk/iomxxk5qmmqlguhptngp9zjlptu.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mobilier intelligent, qui s'occupe lui-m√™me de l'ordre dans la maison, est un incontournable pour presque toutes les images futuristes. En fait, un climat autor√©gul√©, des lumi√®res automatiques allum√©es et √©teintes et une commande vocale des appareils √©lectrom√©nagers - tout cela peut √™tre configur√© maintenant. Mais il faudra un peu d'exp√©rience, des connaissances de base dans le domaine de la technologie et parfois de la programmation, ainsi que toute une mer de fantaisie. Dans mon cas, je l'ai fait pour que seul le fantasme soit suffisant, mais avant tout ...</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/bq/rp/k5/bqrpk5eo6zggo-delsghlgs7y1o.jpeg" width="300" height="200" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je me suis int√©ress√© √† l'id√©e d'une ¬´maison intelligente¬ª il y a environ cinq ans. Au d√©but, j'ai fait le syst√®me le plus simple. Elle contr√¥lait la lumi√®re dans le couloir et la salle de bain par le capteur de mouvement, la hotte par le capteur d'humidit√© et aussi la station m√©t√©o - √† cette √©poque, tout le monde en √©tait fou. Chaque bricolage qui se respecte devait faire une station m√©t√©o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, j'ai √©quip√© l'appartement d'un relais contr√¥l√© pour allumer automatiquement la lumi√®re dans le couloir et la salle de bain. Cela ressemblait √† ceci: un capteur se tenait dans le couloir, le second dans la salle de bain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelqu'un allait dans la salle de bain, le capteur du couloir a d√©tect√© son mouvement et a imm√©diatement allum√© la lumi√®re dans le couloir et dans la salle de bain. En m√™me temps, si personne n'est entr√© dans la salle de bain, cela a d√©j√† √©t√© corrig√© par le capteur situ√© √† l'int√©rieur de la salle de bain. Apr√®s 15 secondes, la lumi√®re s'est √©teinte l√†-bas. Si une personne entrait dans la salle de bain, la lumi√®re dans le couloir s'√©teignait apr√®s une minute.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai aussi pens√© √† de tels cas si quelqu'un r√©fl√©chissait trop en √©tant assis sur un ¬´ami blanc¬ª dans la salle de bain (j'avais une salle de bain combin√©e). Pour cela, la lumi√®re dans la salle de bain a √©t√© divis√©e en deux groupes. L'un s'est √©teint 3 minutes apr√®s que le capteur dans la salle de bain a cess√© de d√©tecter les mouvements, l'autre apr√®s 5 minutes. Donc, pendant plus de cinq minutes pour rester immobile dans la salle de bain √† la lumi√®re n'a pas fonctionn√©. Tr√®s disciplin√©. Cependant, vous pouvez toujours bouger votre main et continuer √† penser √† l'essentiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un capteur d'humidit√© a √©galement fonctionn√© dans la salle de bain, qui a automatiquement d√©marr√© la hotte si l'humidit√© d√©passait 50%. D√®s que la pi√®ce a √©t√© ventil√©e √† 45% d'humidit√©, la hotte s'est √©teinte.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La direction est pass√©e - ou plut√¥t a essay√© de passer - par la plate-forme Arduino.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a8/lo/0v/a8lo0valnq03awxxkgr-j2bvnxa.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Photo prise sur le site Web </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du fabricant</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presque imm√©diatement, il est devenu clair que cette plateforme ne visait pas uniquement √† cr√©er une maison intelligente. Le principal inconv√©nient de travailler avec Arduino √©tait que la plate-forme fonctionnait sans r√©seau, et sans lui, aucun √©cosyst√®me vraiment unifi√© ne pouvait √™tre obtenu. Bien s√ªr, je pourrais refaire l'Arduino et ajouter un support r√©seau, mais pourquoi? J'ai choisi un chemin plus simple et j'ai chang√© cette plateforme en une autre.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant suffisamment jou√© avec Arduino, j'ai reconnect√© la maison √† la carte ESP-8266. En fait, c'est le m√™me Arduino, mais avec Wi-Fi +, il est plus compact. Ce module est toujours populaire aupr√®s des fabricants de gadgets pour les maisons intelligentes.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/kh/ql/uikhqljobo7gz8pz2tpcfcqhbvm.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Photo prise sur </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En parall√®le, j'ai essay√© de rendre la maison intelligente encore plus intelligente. Par exemple, r√©solvez le probl√®me du chauffage au sol 24h / 24 ou d'un climatiseur toujours allum√©. Pour cela, j'ai achet√© des thermostats WiFi chinois Beok. Ils ont permis d'√©teindre le chauffage au sol √† distance, mais ont d√ª le faire via une application sp√©ciale dans le t√©l√©phone.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai r√©solu le probl√®me de la t√©l√©commande du climatiseur √† l'aide de l'√©mulateur de signal infrarouge Broadlink RM Pro. Rien de compliqu√©: vous enregistrez un signal du panneau de contr√¥le de la climatisation vers l'√©mulateur (il peut y avoir n'importe quelle technique contr√¥l√©e par la t√©l√©commande), puis sur le t√©l√©phone, vous appuyez sur un bouton dans l'application, et l'√©mulateur lit le signal pr√©c√©demment enregistr√©. Dans le cas du climatiseur, j'ai eu l'occasion de l'allumer et de l'√©teindre, de r√©gler le mode de fonctionnement et de d√©finir d'autres param√®tres √† distance.&nbsp;&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commutateurs Livolo √©galement install√©s. Avec leur aide, j'ai √©galement pu allumer et √©teindre les lumi√®res par voie hertzienne.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/bz/s6/tobzs6u41nh4d_b_eq7tovpop8y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parmi les inconv√©nients: pour le contr√¥le, j'ai d√ª r√©installer une application distincte et il n'y a pas eu de retour, c'est-√†-dire que je ne pouvais pas voir que la lumi√®re √©tait allum√©e si elle √©tait allum√©e ou √©teinte par quelqu'un manuellement √† l'aide d'un interrupteur conventionnel.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Divers relais WiFi contr√¥l√©s tels que Sonoff ou Tuya et m√™me le co√ªteux Danalock pour verrouiller l'appartement, qui n√©cessitait √©galement une application s√©par√©e, sont √©galement apparus dans la maison. Presque toutes ces petites choses (√† l'exception de Danalock) que j'ai achet√©es sur le site chinois Aliexpress, o√π elles co√ªtaient un sou et me permettaient d'exp√©rimenter sans investissements s√©rieux.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des premiers achats relativement s√©rieux a √©t√© le reniflard Tion. </font><font style="vertical-align: inherit;">Avec le contr√¥le automatique du CO2, il a plus ou moins fait face, mais la temp√©rature du chauffage de l'air en hiver devait constamment √™tre ajust√©e manuellement. </font><font style="vertical-align: inherit;">Et encore une fois - pour g√©rer, il √©tait n√©cessaire d'installer une application distincte.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/pn/pd/8wpnpdu6oip9ck-a_qn8z6bv8i4.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La photo a √©t√© prise sur le site Web </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du fabricant.</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tous les capteurs et contr√¥leurs que j'ai essay√©s √† l'√©poque, je ne m'en souviens m√™me pas. </font><font style="vertical-align: inherit;">Mon smartphone √©tait encombr√© d'applications pour les g√©rer. </font><font style="vertical-align: inherit;">C'√©tait tout un zoo, qui devait constamment suivre. </font><font style="vertical-align: inherit;">J'ai essay√© de combiner la gestion de ces applications √† travers toutes sortes d'agr√©gateurs comme HomeBridge / MajorDomo, etc. </font><font style="vertical-align: inherit;">Mais tout le monde a montr√© ses lacunes importantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface peu conviviale, et parfois juste une interface terrible</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manque de support pour toutes les applications utilis√©es</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connexion complexe</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La recherche d'une application de gestion centralis√©e d'un tel volume de capteurs, contr√¥leurs et autres syst√®mes de contr√¥le n'a pas abouti. Ensuite, j'ai essay√© de me rappeler de fa√ßon ind√©pendante l'un des appareils ¬´intelligents¬ª - le reniflard tr√®s Tion. J'ai √©crit un script pour contr√¥ler automatiquement la temp√©rature de chauffage en fonction de la temp√©rature ambiante. Le fait est que le syst√®me de ventilation n'avait pas de r√©glage automatique de la temp√©rature de chauffage de l'air. Il s'est av√©r√© que la pi√®ce √©tait soit super chaude, soit super froide. Il n'y avait aucun moyen de parvenir √† un terrain d'entente. Ici, √† l'aide d'un script √©crit et d'une pause, ce probl√®me a √©t√© r√©solu.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le succ√®s avec un script pour le reniflard m'a incit√© √† cr√©er ma propre application pour g√©rer une maison intelligente. L'objectif principal √©tait de cr√©er un programme avec une int√©gration pratique des appareils intelligents, des conditions d'automatisation √† plusieurs niveaux et la capacit√© de g√©rer tous les appareils de la maison.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant environ un an, j'ai moi-m√™me √©t√© engag√© dans le d√©veloppement d'applications back-end et front-end.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le c√¥t√© serveur est √©crit en NodeJS. Le choix en faveur de NodeJS a √©t√© fait en raison de la communaut√© d√©velopp√©e, dans laquelle il existe des protocoles mis en ≈ìuvre pour presque tous les appareils sur le march√©. La partie client est √©crite en angulaire (ionique) et fonctionne sur Android / iOS. En g√©n√©ral, l'architecture client-serveur classique. </font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur une note:</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au cours du travail sur l'application, j'ai eu un aper√ßu technique de l'utilisation des impuret√©s lors de l'√©criture des pilotes de p√©riph√©rique. </font><font style="vertical-align: inherit;">Je ne sais pas, peut-√™tre pour certains, c'est √©l√©mentaire, mais il m'est vraiment devenu plus facile de respirer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai r√©√©crit les pilotes de p√©riph√©rique plusieurs fois jusqu'√† ce que j'arrive √† quelque chose comme √ßa:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de code d'un des appareils</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {XiaomiSubdeviceV2} <span class="hljs-keyword">from</span> <span class="hljs-string">'../xiaomi.subdevice.v2'</span>;
<span class="hljs-keyword">import</span> {load_power} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/load_power'</span>;
<span class="hljs-keyword">import</span> {power_plug} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/power_plug'</span>;
<span class="hljs-keyword">import</span> {PowerPurpose} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/PowerPurpose'</span>;
<span class="hljs-keyword">import</span> {Relay} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/types/Relay'</span>;
<span class="hljs-keyword">import</span> {HomeKitAccessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/HomeKitAccessory'</span>;
<span class="hljs-keyword">import</span> {Lightbulb2Accessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/Lightbulb2Accessory'</span>;
<span class="hljs-keyword">import</span> {Yandex} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/Yandex'</span>;
<span class="hljs-keyword">import</span> {YandexLightOrSwitch} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/YandexLightOrSwitch'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LumiPlug</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">XiaomiSubdeviceV2</span>.<span class="hljs-title">with</span>(<span class="hljs-title">Relay</span>, <span class="hljs-title">power_plug</span>, <span class="hljs-title">load_power</span>, <span class="hljs-title">PowerPurpose</span>,
  <span class="hljs-title">HomeKitAccessory</span>, <span class="hljs-title">Lightbulb2Accessory</span>,
  <span class="hljs-title">Yandex</span>, <span class="hljs-title">YandexLightOrSwitch</span>) </span>{<font></font>
<font></font>
  onCreate() {<font></font>
    <span class="hljs-keyword">super</span>.onCreate();
    <span class="hljs-keyword">this</span>.model = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.class_name = <span class="hljs-string">'lumi.plug'</span>;
    <span class="hljs-keyword">this</span>.driver_name = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.driver_type = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">this</span>.parent_class_name = <span class="hljs-string">'lumi.gateway'</span>;<font></font>
  }<font></font>
<font></font>
  getIcon() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'socket'</span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel est que, malgr√© l'abondance de diff√©rents appareils, ils font tous √† peu pr√®s la m√™me chose et fournissent environ les m√™mes informations. </font><font style="vertical-align: inherit;">Par cons√©quent, toutes les capacit√©s des appareils ont √©t√© plac√©es dans des impuret√©s distinctes, dont le pilote final se compose finalement. </font><font style="vertical-align: inherit;">Par exemple, l'application prend en charge de nombreux appareils dot√©s de la fonction marche / arr√™t. </font><font style="vertical-align: inherit;">Il est fabriqu√© dans une impuret√© distincte et est utilis√© de mani√®re identique pour tous les appareils. </font><font style="vertical-align: inherit;">√âl√©mentaire, Watson!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que cela a donn√©: tout pilote d'un nouveau p√©riph√©rique est √©crit assez rapidement et facilement, car tout est standardis√© et il n'est pas n√©cessaire de s'inqui√©ter du stockage ult√©rieur des informations re√ßues. Pour des protocoles compl√®tement nouveaux (que je n'avais pas encore), des impuret√©s sont √©galement √©crites qui sont bas√©es sur celles existantes. Ils re√ßoivent d√©j√† des informations sur l'appareil et les transmettent plus loin dans la cha√Æne. Cette approche nous a permis de r√©duire la quantit√© de code de dizaines de fois (au d√©part, chaque pilote √©tait une copie d'un pilote similaire). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, petit √† petit, j'ai parcouru tous les cercles de l'enfer pour finir le support et le front. Lorsque l'application a acquis un aspect assez tol√©rable, je me suis dit: pourquoi ne pas partager votre d√©veloppement avec le public? Des partenaires ont √©t√© trouv√©s pour le projet et des assistants pour √©voquer la candidature.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, il fallait penser √† la conception de l'application. Pour ce faire, j'ai d√ª me tourner vers des designers professionnels. Je croyais na√Øvement que cela prendrait de 3 √† 4 mois, mais finalement le processus a tra√Æn√© en longueur. Malgr√© le fait que la structure de l'application n'a pas beaucoup chang√© par rapport √† la source d'origine, tout a d√ª √™tre refait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En parall√®le, j'ai - non pas seul, mais avec une √©quipe de partenaires de projet - achet√© les appareils les plus populaires pour une maison intelligente et ajout√© une application si elle ne supportait pas ces gadgets. Bient√¥t, cependant, il est devenu clair qu'il n'y aurait pas assez d'argent pour tous les appareils intelligents.Nous avons donc d√©cid√© de discuter avec les acteurs existants du march√© et de convenir gratuitement d'√©chantillons de test d'√©quipements. Nous n'avons pas √©t√© refus√©s et Wirenboard et MiMiSmart sont devenus les premiers fournisseurs s√©rieux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, avec les gars, j'ai cr√©√© une nouvelle application pour la domotique intelligente avec une architecture client-serveur classique, qui est mise sur n'importe quelle plate-forme, et avec un design moderne et pratique. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rencontrez le BARY *. </font></font></a></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Le nom ne vient pas du nom de Bari Alibasov, mais du personnage du livre d'Arthur C. Doyle ¬´Le chien des Baskerville¬ª du majordome de Barrymore - votre ¬´majordome intelligent¬ª personnel.&nbsp;</font></font></i><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que s'est-il pass√©: description de l'application avec de belles images et des chats</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©cran principal est un tableau de bord pratique avec la possibilit√© de visualiser et de g√©rer les param√®tres des salles automatis√©es. Pratique - c'est le mot cl√©, car les tableaux de bord des applications avec lesquelles j'ai essay√© de travailler devaient √™tre configur√©s manuellement. Pas le passe-temps le plus agr√©able, la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/dl/9k/gzdl9kdk2n5x2fjmlmfwtcnxjas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
maison peut √™tre divis√©e en zones et les zones en pi√®ces. Chaque pi√®ce a diff√©rents param√®tres: temp√©rature, humidit√©, consommation √©lectrique actuelle, etc., ainsi que des actions s√©lectionn√©es. Si nous cliquons sur la pi√®ce, nous tomberons dans la liste des appareils qui y sont connect√©s: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/f-/22/ygf-224hyp7be9qrzf2ifh3plv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez allumer / √©teindre l'appareil, et voir √©galement son param√®tre principal. Lors du passage √† un appareil, un contr√¥le plus d√©taill√© avec une liste compl√®te des fonctions sera disponible.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les appareils sont connect√©s en utilisant les m√™mes param√®tres. Pour de nombreux appareils, il existe un assistant de connexion. Pas de configs pour ceux qui aiment plus chaud! Fondamentalement, il s'agit de sp√©cifier l'adresse IP de l'appareil (pour de nombreux appareils, il existe une recherche automatique). Si l'adresse IP change soudainement, alors √ßa va, le serveur la trouvera automatiquement √† la nouvelle adresse.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q1/2b/ee/q12beeqowea3lu7egovw_8y0yry.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a int√©gration avec Apple HomeKit, il est utilis√© pour le contr√¥le vocal via Siri. Tous les appareils pris en charge dans BARY s'int√®grent √† Apple HomeKit en un seul clic (bonjour aux fans de HomeBridge). Pas sans le soutien de Yandex Alice. Elle √©tait plus sympathique en termes de commandes d'interface. Par exemple, Siri ne veut pas fermer les rideaux avec la commande "fermer les rideaux", ne peut pas d√©finir un certain niveau de volume sur le t√©l√©viseur et ainsi de suite. Yandex.Alice n'a pas de tels kookies.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la commodit√© de la gestion des terrains intelligents, l'automatisation a √©t√© mise en place: r√®gles pour l'ex√©cution de toutes les actions lors du respect d'un ensemble de conditions. Les automatisations sont logiques, √† plusieurs niveaux, c'est-√†-dire vous pouvez faire quelque chose comme: "Condition 1 et (Condition 2 ou Condition 3)." Le tout dans un bel √©diteur d'automatisation logique:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c-/hg/bf/c-hgbflmqnmyu7ld7owltj5g5ao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Personnellement, j'avais d√©j√† une centaine de programmes d'automatisation, et chacun d'entre eux peut √™tre trouv√© rapidement, car tout est regroup√© par pi√®ce et par appareil: les </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/xz/n9/xlxzn9o8tycbcxwnvtlw9w014ym.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
scripts sont √©galement pris en charge dans l'application. Un sc√©nario est un complexe d'actions qui est effectu√© sous certaines conditions de l'automatisation. Pour ma maison intelligente, j'utilise uniquement l'ensemble standard: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fy/62/_d/fy62_dwup-9j5zyhvj-b3jd0i-4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
j'ai quitt√© la maison / rentrer chez moi via l'Apple TV - il s'allume / s'√©teint automatiquement lorsque tout le monde quitte la maison ou que quelqu'un rentre chez lui. Vous rentrez chez vous et l'annonceur aux yeux tristes de Channel 1 vous y rencontre d√©j√†. Bien grande? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, quel genre de maison intelligente sans la possibilit√© de regarder un chat? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/4l/sj/cl4lsjn0wyslby9mavknwlmplts.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez connecter n'importe quelle cam√©ra capable de fournir un flux RTSP.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√©par√©ment, je veux parler du bloc des statistiques. Cela s'est av√©r√© assez informatif: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8k/vh/g4/8kvhg4ixvnkduzunurcf-lputrg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans la l√©gende, la barre rouge est l'√©cart par rapport aux valeurs moyennes des six derniers mois, la barre grise est le d√©bit dans les valeurs moyennes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la photo, mes statistiques de septembre. Il faisait froid, le chauffage n'avait pas encore √©t√© fourni, donc le chauffage √©tait constamment allum√© √† la ventilation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement voir les statistiques de n'importe quel appareil connect√©: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/iw/ju/atiwjujpwobznspvzjvidoc8g9m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fait, la disponibilit√© de l'automatisation et des statistiques a r√©duit les co√ªts d'√©lectricit√© de plus de 2 fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les √©v√©nements survenus sont stock√©s et peuvent √™tre consult√©s: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/ss/kw/qhsskw7yzjbhg8vhfpj1bsohmdo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âgalement sur la page principale, il y a un onglet sp√©cial qui recueille tous les principaux indicateurs s√©lectionn√©s par l'utilisateur:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lw/78/kc/lw78kcs-ca7xyq_uljlybmp5uqc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, la mesure de l'eau est mise en ≈ìuvre via le capteur d'ouverture de porte / fen√™tre Xiaomi. </font><font style="vertical-align: inherit;">Pour ce faire, au lieu d'un commutateur √† lames, la sortie du compteur d'impulsions est soud√©e √† un contact sp√©cial et un compteur virtuel est cr√©√© dans BARY, dans lequel vous pouvez sp√©cifier ce capteur comme source d'impulsions.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture et s√©curit√©</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©change client-serveur est crypt√© √† l'aide de la technologie AES et le serveur est situ√© directement √† l'int√©rieur de la salle automatis√©e. </font><font style="vertical-align: inherit;">√Ä mon avis, cela prot√®ge le syst√®me autant que possible contre les interventions ind√©sirables de tiers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il n'y a pas d'adresse IP blanche, vous pouvez connecter le cloud. </font><font style="vertical-align: inherit;">Il agira comme un interm√©diaire, sans possibilit√© de d√©crypter les commandes, car </font><font style="vertical-align: inherit;">les cl√©s sont sur le serveur.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O√π obtenir</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le c√¥t√© serveur peut √™tre ex√©cut√© sur presque toutes les plateformes existantes - merci NodeJS. </font><font style="vertical-align: inherit;">Pour les plates-formes les plus courantes, nous avons pr√©par√© des scripts qui feront tout le travail automatiquement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour Raspberry Pi bas√© sur Debian Stretch: </font></font><br>
<br>
<code>wget -qO- "http://bary.io/install?target=pi" | sudo bash</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
le param√®tre cible est responsable de la plate-forme cible et peut avoir les valeurs suivantes:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Debian Buster)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi_buster</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tinker Board (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tb</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tableau Wiren (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wb</font></font><br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelqu'un veut installer sur une autre plateforme, √©crivez-nous et nous mettrons √† jour le script. </font><font style="vertical-align: inherit;">Si vous rencontrez des difficult√©s - √©crivez √©galement. </font><font style="vertical-align: inherit;">Nous avons vraiment besoin de commentaires.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'application est disponible gratuitement sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Peut-√™tre qu'√† la fin de l'ann√©e, la demande sera pay√©e.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi ai-je √©crit cet article? </font><font style="vertical-align: inherit;">L'objectif principal est d'obtenir des commentaires de votre part. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, le projet se d√©veloppe rapidement et toute notre √©quipe essaie de maximiser la liste des √©quipements pris en charge disponibles sur le march√©. </font><font style="vertical-align: inherit;">Bien que je ne sois pas seul √† travailler sur le projet, les t√¢ches sont rest√©es les m√™mes: cr√©er l'application la plus pratique qui prend en compte les souhaits et r√©sout les probl√®mes de tous ceux qui ont particip√© √† l'installation ind√©pendante de solutions intelligentes pour la maison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes ouverts au dialogue sur les int√©grations possibles et sommes pr√™ts √† mettre en ≈ìuvre le plus rapidement possible le support mat√©riel des entreprises int√©ress√©es par le partenariat. </font><font style="vertical-align: inherit;">Vous obtenez une application pr√™te √† l'emploi et ne perdez pas de temps √† d√©velopper des logiciels. </font><font style="vertical-align: inherit;">Et nous proposons une large gamme d'appareils pris en charge pour tous les go√ªts et toutes les couleurs. </font><font style="vertical-align: inherit;">Tout est bien.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plans imm√©diats et arc-en-ciel</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, mon √©quipe et moi sommes activement engag√©s dans le d√©veloppement d'une unit√© de stockage vid√©o. Il sera possible de placer la vid√©o dans votre stockage √† domicile ou dans un service cloud. Je pense qu'au d√©but de l'ann√©e prochaine il sera possible de parler d'une nouvelle version. Doit-il √™tre possible de passer en revue les meilleures perles d'un chat qui se divertit pendant que les propri√©taires ne sont pas √† la maison?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ann√©e prochaine, nous pr√©voyons plus d'int√©grations avec divers services: une liste d'achats et de choses √† faire, un calendrier, etc. Il est venu, a regard√© un √©cran - et tout √©tait bien en vue. Plusieurs projets cl√©s en main ont montr√© que cette t√¢che est pertinente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pr√©voyons √©galement de d√©marrer la production de contr√¥leurs avec des logiciels pr√©install√©s pour les solutions batch d'une maison intelligente (actuellement la solution batch "software + hardware" est disponible avec nos partenaires</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseil Wiren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la prise en charge de Google Home et d'Amazon Alexa. </font><font style="vertical-align: inherit;">Eh bien, l'expansion de la gamme d'√©quipements pris en charge, bien s√ªr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, peu importe, vous pouvez voir la liste des appareils pris en charge (non compl√®te) sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notre site Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et si quelque chose ne se trouve pas dans la liste, alors demandez dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">groupe t√©l√©gramme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous serons tr√®s reconnaissants si vous partagez ce qui vous manque dans les applications existantes et quelles fonctions vous ajouteriez √† notre place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci √† tous d'avoir lu. </font><font style="vertical-align: inherit;">Rendons nos maisons plus intelligentes ensemble!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502046/index.html">Cinq ans de rouille</a></li>
<li><a href="../fr502048/index.html">Comportement complexe sans r√©seaux neuronaux et sans entra√Ænement. La base philosophique</a></li>
<li><a href="../fr502050/index.html">Quelques notes sur la culture</a></li>
<li><a href="../fr502052/index.html">Meilleures pratiques Kubernetes. Cr√©er de petits conteneurs</a></li>
<li><a href="../fr502054/index.html">R√©seau de neurones convolutifs et son int√©gration dans iOS (partie 2)</a></li>
<li><a href="../fr502062/index.html">Qui a cr√©√© Java: l'essentiel de James Gosling</a></li>
<li><a href="../fr502066/index.html">Commandes de console simples que tout le monde devrait conna√Ætre</a></li>
<li><a href="../fr502068/index.html">110 volts sur votre ordinateur</a></li>
<li><a href="../fr502070/index.html">L'histoire de Pentax (article plus vid√©o)</a></li>
<li><a href="../fr502072/index.html">Amarrage de l'ISS √† l'aide de JavaScript et d'une boussole</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>