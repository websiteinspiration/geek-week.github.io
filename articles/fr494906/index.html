<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕡 😗 🤶🏻 Modes de fonctionnement des serveurs de messagerie 👩🏿‍🎤 🛀🏿 🍖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lors de l'installation de Postfix sur des distributions basées sur Debian, une interface pseudo-graphique est lancée avec un ensemble de modèles pour ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modes de fonctionnement des serveurs de messagerie</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494906/"><img src="https://habrastorage.org/webt/be/i1/aj/bei1ajyzb92fj3gm59se_-3vgbs.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'installation de Postfix sur des distributions basées sur Debian, une interface pseudo-graphique est lancée avec un ensemble de modèles pour l'installation. </font><font style="vertical-align: inherit;">Ces modèles sont destinés à différents modes de fonctionnement du serveur de messagerie, qui dépendent de l'acceptation ou du transfert du courrier par le serveur de messagerie et des différentes variantes de ces deux modes. </font><font style="vertical-align: inherit;">Mais ce ne sont que des modèles faciles à modifier après l'installation du serveur. </font><font style="vertical-align: inherit;">Bien que j'utilise Postfix sur Debian comme exemple, ces modes sont universels pour tous les serveurs de messagerie.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vidéo</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/5SoT9XuT37E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Précédent &lt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionnement du courrier électronique</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Suivant&gt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À propos des ports et du chiffrement dans les serveurs de messagerie </font></font></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/gs/nq/kf/gsnqkfkaag7kki54t6cw-rh5zrm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
option </font><b><font style="vertical-align: inherit;">«Aucune configuration»</font></b><font style="vertical-align: inherit;"> La première option de la liste est Aucune configuration - si vous sélectionnez cette option, le serveur de messagerie ne créera pas le fichier de configuration principal, ce qui est pratique lorsque nous avons notre propre fichier de configuration prêt à l'emploi . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez redémarrer le script d'installation, vous avez besoin de la commande:</font></font><br>
<br>
<pre><code class="bash hljs">sudo dpkg-reconfigure postfix</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option «Site Internet» Le</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/qw/06/ly/qw06ly6bgwdfk0jqlmidtiplu1k.png"><br>
<br>
<img src="https://habrastorage.org/webt/eq/fz/cp/eqfzcpgtozivtmcnsazbyiap-zm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
deuxième mode - Site Internet - est un modèle pour un serveur de messagerie standard qui recevra et enverra le courrier directement, sans intermédiaires. Passons en revue les options de configuration. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/pf/56/dapf56wdickh-mi-vxhbpiwf15e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous devons spécifier le nom de l'e-mail, c'est-à-dire le domaine des adresses e-mail indiquées après le chien. Par défaut, postfix utilise les utilisateurs du système en tant qu'utilisateurs du serveur de messagerie. Ainsi, si vous avez un utilisateur utilisateur dans le système, il pourra recevoir et envoyer du courrier à user@example.org</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/q4/4_/cxq44_dwyn-wz8zb6v2vnlvkeqk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour des raisons de sécurité, il n'est pas recommandé d'utiliser le compte root pour travailler avec le courrier, nous sommes donc invités à indiquer l'utilisateur auquel tous les courriers arrivant aux adresses de postmaster, root et autres utilisateurs du système seront transférés. Souvent, diverses applications du système, telles que le planificateur de tâches cron, envoient des informations à ces adresses.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1g/81/y4/1g81y4pl9i43w9o3n9pmzv1a088.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, le programme d'installation nous demande de spécifier les domaines vers lesquels notre serveur de messagerie recevra le courrier. Ici, en plus de notre adresse de domaine principale, il existe également des entrées d'hôte local et diverses variantes de nom d'hôte. Cela est principalement nécessaire pour divers services internes qui envoient des notifications. De plus, en option, certains services envoient certaines notifications à l'adresse complète de votre serveur de messagerie, disons que votre serveur de messagerie a été répertorié dans les listes de spam, par exemple, à postmaster@mail.example.org.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ib/ox/2y/ibox2y2aq9y1ikesbhmrx7hfcxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, la question concerne les mises à jour synchrones. Cette question concerne davantage les services de courrier chargé et parle des éléments suivants. Si nous activons les mises à jour synchrones, le serveur de messagerie s'assurera que le message est écrit sur le disque chaque fois qu'un message est envoyé et reçu. Cela réduit les performances du serveur de messagerie, mais si le serveur s'arrête soudainement lors de la réception ou de l'envoi de courrier, aucun message ne sera perdu. Mais si nous utilisons un système de fichiers de journalisation, tel que ext3 ou ext4, notre système n'a pas peur d'un arrêt soudain. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g7/st/ua/g7stuahlikrpjkwf6azqjritwzw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela est dû au fait que dans un système de fichiers journalisé, toutes les modifications du système de fichiers sont préenregistrées dans un journal spécial qui applique ces modifications, puis les supprime du journal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-q/sb/kk/-qsbkkhd2px48wiszd0-zrbf4nu.png"><br>
<br>
<img src="https://habrastorage.org/webt/wb/wj/kl/wbwjklnmdisz-fmmi5rzwe4izp0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le serveur s'éteint soudainement au moment de l'enregistrement, puis lorsque vous l'allumez, le système de fichiers vérifie le journal, voit les modifications incomplètes et les écrit sur le disque. Par conséquent, si vous utilisez un système de fichiers de journalisation, n'hésitez pas à cliquer sur Non.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wf/if/ky/wfifkydq9w-f2_crusnqpfbb6ku.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il nous est maintenant proposé de spécifier les réseaux pour lesquels postfix agira comme hôte relais. Dans ce rôle, le serveur de messagerie accepte non seulement le courrier vers son domaine, mais peut également transférer des messages vers d'autres serveurs de messagerie. Supposons que vous puissiez envoyer un message à Gmail en spécifiant non smtp.gmail.com mais mail.examle.org comme serveur de messagerie sortant, votre serveur de messagerie se chargera de livrer votre message à smtp.gmail.com. Nous en parlerons plus en détail plus tard, lorsque nous discuterons d'autres modèles. En attendant, si vous ne prévoyez pas d'utiliser votre serveur comme relais hôte, vous ne pouvez laisser que l'hôte local sur le terrain. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/vi/8l/cqvi8lbs9atgnhuuatblmgjwbtg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est simple ici - la taille maximale par défaut de la boîte aux lettres de l'utilisateur, en octets. Si c'est 0, pas de limite. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/63/jy/wp63jyaih3-nnqdvsoc9tqld7ki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis quelque chose de plus intéressant -</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alias personnalisés</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En général, les alias des serveurs de messagerie sont utilisés pour qu'un seul utilisateur puisse recevoir du courrier à plusieurs adresses, sans créer d'utilisateurs, de boîtes aux lettres, etc. séparés. Supposons que si vous souhaitez que tous les messages à it@example.org soient envoyés à user@example.org, un alias est utilisé pour cela. De plus, en utilisant des alias, différents domaines sont liés à un seul utilisateur. Ces alias peuvent être créés par l'administrateur du serveur de messagerie. Mais, un administrateur peut permettre aux utilisateurs de créer quelque chose comme des alias pour faciliter la gestion de leur courrier par les utilisateurs. Mais ces alias d'utilisateur ne remplacent pas l'adresse complète, mais sont ajoutés avant le chien, après avoir utilisé le caractère spécial, disons, un plus. À titre d'exemple, gmail propose également cette fonctionnalité:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mw/cg/hz/mwcghzliwzwl9zepjrrpbns9bzg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, user+work@example.org ou user+social@example.org. L'utilisateur peut spécifier ces adresses sur différentes ressources lors de l'inscription, ce qui lui facilitera le tri des lettres et la gestion de son courrier. Si vous n'avez pas besoin de cette fonctionnalité, vous pouvez laisser ce champ vide. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/uy/dk/nzuydkjmn5sffso_vv-jxjtfsue.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, vous devez choisir si notre serveur de messagerie fonctionnera avec ipv4, ipv6 ou avec les deux protocoles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur cette configuration, le modèle de site Intenet est prêt, vous pouvez théoriquement vous mettre au travail. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option "Internet avec smarthost"</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/yr/mi/uw/yrmiuwgbx9j_jbmbx3i5a2bua_i.png"><br>
<br>
<img src="https://habrastorage.org/webt/rk/ue/h7/rkueh78h0qk6ycqaqsstwdziyri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisième option parmi les modes de fonctionnement du serveur de messagerie est Internet avec smarthost. Il s'agit d'un modèle de configuration pour un serveur qui acceptera le courrier directement, ou en utilisant des utilitaires tels que fetchmail, mais le serveur enverra du courrier à des adresses externes en utilisant d'autres serveurs de messagerie - des relais hôtes, également appelés hôtes intelligents. Cela peut être utilisé dans divers cas, par exemple, si l'adresse IP de votre serveur est sur liste noire, ou pour autoriser le courrier d'entreprise sortant via un service de prévention des fuites, etc.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pg/oo/a6/pgooa68lttnnhinjy9ivmwacmdw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, toutes les options de configuration de ce mode se ressemblent également, à l'exception du serveur relais. Un hôte intelligent peut être indiqué entre crochets et sans, selon que vous souhaitez envoyer des messages immédiatement ou après avoir fait une demande MX, ce qui vous permet d'équilibrer le trafic entre plusieurs hôtes intelligents. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/r2/0q/dlr20qquvluu7rhczwnuhnls19g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le modèle, nous pouvons spécifier le smarthost par défaut, et à l'avenir, nous pouvons configurer différents relais en fonction du domaine du destinataire. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option de système satellite</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/-5/gl/m0/-5glm0dvgiucq15rr-g9qzi3t8s.png"><br>
<br>
<img src="https://habrastorage.org/webt/nv/sc/yn/nvscynugnsuze6yadek_7rmeuv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre mode de fonctionnement du serveur de messagerie est le système Satellite. Dans ce mode, le serveur de messagerie n'accepte pas le courrier, mais redirige uniquement, c'est-à-dire qu'il fonctionne exclusivement en tant qu'hôte relais. D'après l'exemple précédent, cela peut être utile dans les grandes organisations pour les services internes, ainsi que pour filtrer le courrier pour le spam, les virus, etc. Dans ce cas, la configuration est presque identique aux options mentionnées précédemment, mais dans mydestionations, vous ne devez pas quitter les domaines afin que l'hôte redirige tout vers les serveurs de messagerie nécessaires. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option "Local uniquement"</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/7a/ej/z5/7aejz5t8_7rp6tjqmbw3s7dfqjo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Et le dernier modèle - Local uniquement - lorsque notre serveur de messagerie n'enverra pas et ne recevra pas de courrier provenant d'autres serveurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ce dont nous avons parlé plus tôt ne sont que des modèles de modes de fonctionnement du service de messagerie. </font><font style="vertical-align: inherit;">Les cas d'utilisateurs sont différents et ces paramètres de modèle ne sont souvent pas suffisants, et de nombreux points doivent être reconfigurés pour vos tâches.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494882/index.html">Que faire pour ne pas chercher de nouveaux yeux après la quarantaine</a></li>
<li><a href="../fr494884/index.html">Digital Dictation 2020 se tiendra en ligne du 28 mars au 11 avril</a></li>
<li><a href="../fr494890/index.html">Règles de discussion</a></li>
<li><a href="../fr494896/index.html">Coronavirus: une illusion dangereuse de mortalité</a></li>
<li><a href="../fr494904/index.html">Chat infecté par le virus COVID-19 de son propriétaire en Belgique</a></li>
<li><a href="../fr494908/index.html">Des pilotes aux testeurs: comment un ancien militaire a construit un aérodrome alternatif en informatique</a></li>
<li><a href="../fr494910/index.html">Le plasma sanguin des survivants du coronavirus peut être utilisé pour lutter contre l'infection</a></li>
<li><a href="../fr494912/index.html">Ma contribution à la protection contre Covid-19</a></li>
<li><a href="../fr494916/index.html">Comment vendre des comptes marchands et surfer sur une vague d'intérêt pour les affaires en ligne</a></li>
<li><a href="../fr494918/index.html">La troisième semaine du vol à distance - normal. Commentaires des gars de l'informatique QIWI sur le travail à temps plein à domicile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>