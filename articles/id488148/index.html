<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ• ğŸ˜ˆ ğŸ¦ HighLoad ++, Mikhail Raichenko (ManyChat): hampir tanpa sulap, atau betapa mudahnya mendistribusikan aliran video terabit ğŸ™‹ğŸ½ ğŸ—½ ğŸ—ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Konferensi HighLoad ++ berikutnya akan diadakan pada 6 dan 7 April 2020 di St. Petersburg. Detail dan tiket di sini . HighLoad ++ Moscow 2018. Hall "D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++, Mikhail Raichenko (ManyChat): hampir tanpa sulap, atau betapa mudahnya mendistribusikan aliran video terabit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/488148/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konferensi HighLoad ++ berikutnya akan diadakan pada 6 dan 7 April 2020 di St. Petersburg. </font><font style="vertical-align: inherit;">Detail dan tiket di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">HighLoad ++ Moscow 2018. Hall "Delhi + Calcutta". </font><font style="vertical-align: inherit;">8 November, 2 malam </font><font style="vertical-align: inherit;">Abstrak dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ym/ji/ba/ymjiba---vkcs5ibbqbk9kcz8ny.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya bekerja di tim VKontakte dan saya mengembangkan sistem penyiaran video. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam laporan tersebut, saya akan membagikan fitur-fitur pengembangan backend, bagaimana sistem kami telah berkembang, dan solusi teknis yang kami miliki:â€¨</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bagaimana kami melakukan backend siaran video, dan proses evolusi seperti itu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dampak persyaratan bisnis dan operasional pada arsitektur;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Tunggu" dan "coba lagi" akan gagal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bagaimana tugas yang paling sederhana menjadi rumit oleh jumlah pengguna;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cara mengurangi latensi tanpa UDP;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami melakukan tes stres 2 kali sehari, atau apa yang Clover bantu.</font></font></li>
</ul><a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikhail Raichenko (selanjutnya - MR):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sebuah perjalanan kecil. </font><font style="vertical-align: inherit;">Saya akan memberi tahu Anda tentang orang-orang yang mengalirkan kami, tentang siaran langsung (live), tentang platform mana kami menerima aliran video dan yang kami distribusikan. </font><font style="vertical-align: inherit;">Pada akhirnya, saya akan berbicara tentang arsitektur live saat ini, tentang keterbatasan dan kemampuannya, serta bagaimana arsitektur saat ini bertahan dari efek seperti "Clover".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/bm/lt/_hbmlt0c2ek74zfr89jdff3wtsw.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang siaran langsung. </font><font style="vertical-align: inherit;">Garis besar laporan</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertama, saya akan berbicara sedikit tentang siaran langsung dan streaming sendiri, mengirimkan kepada kami konten video yang kami tampilkan kepada pemirsa lain.</font></font></li>
<li>         .    ?     ,     , , ,   -  - , - , .   ,        :   ,  â€“ .</li>
<li>    . ,      .     .     ,      ,     .</li>
<li>  ,     ,   .   ,         .  ,   ,   ,  , ,   2014-2015 .     ,      .</li>
<li>       .  ,                    .</li>
<li>,    .          ,    . ,    .</li>
<li>    ,    .      .</li>
<li>  ,    ,      Â«Â»,    .</li>
</ul><br>
<img src="https://habrastorage.org/webt/lz/mm/jw/lzmmjwth6qvdlryupzhegpftal0.jpeg"><br>
<br>
<h3>     </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua layanan siaran terlihat seperti ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dt/2r/va/dt2rvaddozkmjrcp-1ojlaixmr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki beberapa streamer, ia mengirimkan aliran RTMP kepada kami, dan kami menunjukkan kepada audiens - tidak ada yang mengejutkan, tidak ada yang supernatural. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ee/fx/kq/eefxkq8vknyi57vz-y-_ekw5pd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari mana asal aliran video? Sumber lalu lintas yang signifikan bagi kami adalah aplikasi mobile kami VKlife. Apa bagusnya dia? Di dalamnya, kita dapat sepenuhnya mengontrol bagaimana kita menyandikan video. Kami dapat membuat banyak optimasi di sisi klien, sehingga nanti, dengan penundaan minimal, menunjukkannya kepada pemirsa kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kekurangannya: aplikasi seluler bekerja di atas jaringan. Itu bisa 3G ... Dalam hal apa pun, hampir selalu jaringan seluler, yang menyebabkan beberapa kelambatan - Anda juga perlu menyangga data di sisi aplikasi, sehingga aliran berjalan semulus mungkin.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber kedua adalah streamer dengan OBS, Wirecast atau mereka yang streaming dari aplikasi desktop lain. </font><font style="vertical-align: inherit;">Ini adalah audiens yang cukup besar. </font><font style="vertical-align: inherit;">Kadang-kadang ini adalah seminar, kadang-kadang - aliran permainan (ada banyak dari mereka dari aplikasi seperti itu). </font><font style="vertical-align: inherit;">Dari yang positif: ada beberapa aplikasi seperti itu, kami dapat memberikan rekomendasi tuning yang bagus untuk streamer kami. </font><font style="vertical-align: inherit;">Tetapi pada saat yang sama ada banyak pengaturan dan mengirim tidak cukup aliran yang kita inginkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kategori ketiga adalah aliran RTMP dari server media. </font><font style="vertical-align: inherit;">Ini bisa berupa server media yang sangat kecil, yaitu, format rumah: seseorang mengalirkan pandangan ke jalan atau sesuatu yang lain. </font><font style="vertical-align: inherit;">Atau siaran yang cukup serius dari mitra kami: bisa ada apa saja, tidak ada banyak aliran seperti itu, tetapi pada dasarnya mereka sangat penting bagi kami.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siapa yang memperhatikan?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekali lagi, ini adalah aplikasi seluler - semuanya jelas di sini. Masalah terbesar adalah latensi jaringan. Dari pro: kami dapat menyesuaikan pemain - nyaman bagi kami, bagus, tapi tidak di mana-mana ternyata 100%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pemain web di vk.com. Di sini juga, semuanya sederhana - ini adalah pemutar web biasa yang dapat Anda buka untuk ditonton. Pemirsa yang cukup besar di vk.com, banyak pemirsa di siaran. Beberapa siaran menggantung di bagian "Video" kami - mungkin ada puluhan ribu (kadang-kadang tanpa PR), terutama jika ini adalah konten yang menarik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, salurannya cukup besar untuk pemirsa yang duduk di pemutar web. Karena itu, ada banyak lalu lintas, termasuk untuk satu siaran.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang ketiga adalah pemutar web VKontakte di beberapa situs pihak ketiga. </font><font style="vertical-align: inherit;">Anda dapat mulai mengalirkan semua yang Anda inginkan, dan menggantung pemutar web VKontakte di situs web Anda. </font><font style="vertical-align: inherit;">Anda dapat menjadi mitra kami jika Anda memiliki konten yang menarik: Anda dapat menggantungnya sendiri, Anda dapat bergaul dengan kami - sesuai keinginan. </font><font style="vertical-align: inherit;">Anda dapat mengatur siaran Anda dengan cara ini, dan semuanya akan berfungsi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perbandingan dengan panggilan video</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam panggilan video, beberapa distorsi gambar akan dimaafkan. Panggilan video lebih sederhana: kita dapat secara signifikan menurunkan gambar, tetapi pada saat yang sama kita harus menjaga latensi yang sangat baik. Dengan penundaan yang lama, layanan ini sama sekali tidak mungkin digunakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam siaran dalam pengertian ini, ini agak sebaliknya: kita harus mempertahankan kualitas gambar yang tinggi, tetapi pada saat yang sama kita dapat meningkatkan latensi karena banyak faktor. Sebagai contoh, pemain buffer aliran dalam satu atau lain cara (itu bisa menjadi yang kedua, dua untuk bertahan dari degradasi jaringan, misalnya), oleh karena itu, tidak perlu kedua, penundaan milidetik dalam banyak kasus. Anda dapat berjuang untuk ini, tetapi makanan bukanlah prasyarat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j0/7o/o6/j07oo6ceqiizh_lzdgjsgvgfwtq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan video biasa, situasinya justru sebaliknya. </font><font style="vertical-align: inherit;">Kami membutuhkan kualitas yang sangat baik. </font><font style="vertical-align: inherit;">Pada saat yang sama, diinginkan untuk meminimalkan ukuran video, rasio bitrate dan kualitas, sehingga dengan aliran minimum, memberikan solusi terbaik. </font><font style="vertical-align: inherit;">Dari pro: kami tidak terbatas dalam waktu: pada saat mengunduh video, kami memiliki cukup waktu untuk mengoptimalkan video, melihat bagaimana mengompresnya dengan cara terbaik, melakukan sesuatu, menyeretnya ke cache, jika perlu - secara umum, semuanya sudah cukup BAIK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/r-/cc/jfr-cco9dozhxgqqnuw57opkqjk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam siaran langsung, situasinya, sekali lagi, kebalikannya: kami memiliki sedikit waktu untuk transcoding. </font><font style="vertical-align: inherit;">Pada saat yang sama, ada beberapa peluang, tetapi tidak ada harapan untuk siaran. </font><font style="vertical-align: inherit;">Penonton akan memaafkan kami jika kami memiliki dukungan atau kualitasnya tidak terlalu bagus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi pertama</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sangat diharapkan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/gt/bw/3fgtbwzvl3uf680sfzsf8kjette.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya, ini sedikit berbeda: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/9r/zu/vu9rzujgkidpvrb66qzgbvapljo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Streamer - server media - level cache - pemirsa". </font><font style="vertical-align: inherit;">Pada prinsipnya, versi ini memungkinkan Anda untuk skala cukup kuat. </font><font style="vertical-align: inherit;">Saya akan mengatakan bahwa itu seharusnya sudah menahan puluhan ribu penonton. </font><font style="vertical-align: inherit;">Ini memiliki kelemahan lain ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, jika Anda melihat sirkuit ini (slide sebelumnya), Anda dapat melihat bahwa itu tidak toleran terhadap kesalahan. </font><font style="vertical-align: inherit;">Kita harus menebak dengan server media untuk menyeimbangkan audiens dengan baik. </font><font style="vertical-align: inherit;">Kami tidak dapat menggantung banyak cache di setiap server - ini cukup mahal. </font><font style="vertical-align: inherit;">Oleh karena itu, kami melihat, menyadari bahwa itu sederhana dan jelas, ada beberapa kemungkinan penskalaan, tetapi jelas ada sesuatu yang hilang ... Dan kami mulai merumuskan persyaratan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persyaratan infrastruktur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang penting</font></font><br>
<br>
<ul>
<li> .     , ,    .            (       ).       (,  ).</li>
<li>.     : -,    (,    )      ; -,     â€“      ,    ,       .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengiriman ke daerah. </font><font style="vertical-align: inherit;">Juga poin penting! </font><font style="vertical-align: inherit;">Sangat bodoh untuk menyeret semua konten video dari Petersburg atau Moskow ke semacam Novosibirsk, Yekaterinburg, atau bahkan dari St. Petersburg ke Moskow. </font><font style="vertical-align: inherit;">Ini tidak terlalu baik, karena penundaan jaringan akan lama - akan ada kelambatan, semuanya akan ketinggalan, dan ini tidak baik. </font><font style="vertical-align: inherit;">Oleh karena itu, infrastruktur kami harus mempertimbangkan bahwa kami mengirimkan konten ke wilayah.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemudahan operasi dan pemantauan. </font><font style="vertical-align: inherit;">Properti penting. </font><font style="vertical-align: inherit;">Karena sistemnya besar, ada banyak pemirsa, penting untuk mengirimkan peringatan kepada administrator jika ada masalah, termasuk memantau metrik produk dan teknis.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/km/n1/e_/kmn1e_0ii74m9xilh_5rsic9l5a.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti apa infrastruktur penyiarannya sekarang?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, kami sampai pada infrastruktur yang cukup sederhana namun efektif ...</font></font><br>
<br>
<ul>
<li> â€“ ,       ( ,  ).   RTMP-,    .        ,  .</li>
<li> ,      ,     ,  ,   .       .  ,   ,   ,   â€“ : , -,  (. .       ); -,     .</li>
<li>      .     â€“    ,   .        ,    ,    .      ,         (    ,  ).</li>
<li>         ,         (edge-).     ,  .    !</li>
<li>   â€“  edge-,      ,   .   :      ,   â€“    .</li>
</ul><br>
<img src="https://habrastorage.org/webt/2e/cu/qp/2ecuqpdeldwtxd6qjyi-x4q0_ke.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menarik? </font><font style="vertical-align: inherit;">Seimbang! </font><font style="vertical-align: inherit;">Dalam skema ini, kami memilih menyeimbangkan, mencoba mengirim pemirsa yang menonton streaming yang sama ke setiap server tepi. </font><font style="vertical-align: inherit;">Cache locality sangat penting di sini, karena mungkin ada banyak server tepi; </font><font style="vertical-align: inherit;">dan jika kita tidak mengamati temporer dan lokalitas cache dari sudut pandang aliran, maka kita akan membebani lapisan dalam. </font><font style="vertical-align: inherit;">Kami juga tidak akan menyukainya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, kami menyeimbangkan dengan cara berikut: kami memilih server tepi tertentu untuk wilayah tempat kami mengirim pemirsa, dan mengirim hingga kami mulai memahami bahwa beberapa pengisian telah terjadi dan harus dikirim ke server lain. </font><font style="vertical-align: inherit;">Rangkaiannya sederhana dan bekerja sangat andal. </font><font style="vertical-align: inherit;">Secara alami, untuk aliran berbeda Anda memilih urutan berbeda dari server tepi (urutan di mana kami mengirimkan penonton). </font><font style="vertical-align: inherit;">Karenanya, menyeimbangkan bekerja cukup sederhana.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami juga memberikan klien tautan ke server tepi yang tersedia. </font><font style="vertical-align: inherit;">Hal ini dilakukan agar dalam kasus kegagalan edge-server, kita dapat mengarahkan penampil ke yang lain. </font><font style="vertical-align: inherit;">Yaitu, ketika pemirsa menonton siaran, ia menerima tautan ke server yang diinginkan setiap beberapa detik sekali. </font><font style="vertical-align: inherit;">Jika dia mengerti bahwa tautannya harus berbeda, dia beralih (pemutar beralih) dan terus menonton siaran dari server lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peran penting lain dari server tepi adalah perlindungan konten. </font><font style="vertical-align: inherit;">Semua perlindungan konten pada dasarnya terjadi di sana. </font><font style="vertical-align: inherit;">Kami memiliki modul nginx kami sendiri untuk ini. </font><font style="vertical-align: inherit;">Ini agak mirip dengan Tautan Keamanan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penskalaan dan penyeimbangan</font></font></h3><br>
<ul>
<li>   . ,        :     ,       .          edge-,        .     .     .    â€¦   ,     â€“    ,  --    â€“ ,  â€“ , , ,   â€“  !   â€“        .</li>
<li>      .  ,  ,         ,    ,       :     .       (   )    ,    â€“   ,   . ,    ,     ,      edge-.</li>
<li>   ,   ,       ,     .</li>
</ul><br>
<img src="https://habrastorage.org/webt/19/nj/i8/19nji8vwkh_kjrrsm9d698hf5ji.jpeg"><br>
<br>
<h3>   ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu protokol utama yang kami miliki adalah RTMP (tidak hanya untuk input, tetapi juga untuk distribusi konten). Keuntungan utama adalah latensi rendah. Itu bisa setengah detik, kedua, dua detik. Bahkan, manfaatnya berakhir di sana ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u7/fv/al/u7fvaloyunlxmyavp5rjemer4sw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Protokol streaming ini sulit dipantau - ditutup dalam arti tertentu, meskipun ada spesifikasi. Pemutar Flash tidak lagi berfungsi (sebenarnya, "sudah semuanya"). Butuh dukungan di tingkat CDN - Anda memerlukan modul nginx khusus atau perangkat lunak Anda sendiri untuk mentransfer aliran secara normal. Ada juga beberapa kesulitan dengan klien seluler. Di luar kotak di klien seluler didukung sangat buruk - perbaikan khusus diperlukan, dan semua ini sangat sulit.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Protokol kedua yang kami gunakan adalah HLS. </font><font style="vertical-align: inherit;">Itu terlihat cukup sederhana: itu adalah file teks, yang disebut file indeks. </font><font style="vertical-align: inherit;">Ini berisi tautan untuk mengindeks file dengan izin berbeda, dan file itu sendiri berisi tautan ke segmen media. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w-/hl/vf/w-hlvfylbcsu1n6ksqlv7uy5e5a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana dia baik? </font><font style="vertical-align: inherit;">Ini sangat sederhana, meski sudah agak tua. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk menggunakan CDN, yaitu, Anda hanya perlu nginx untuk mendistribusikan protokol HLS. </font><font style="vertical-align: inherit;">Dapat dipahami dalam hal pemantauan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah kelebihannya:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kemudahan operasi - nginx sebagai server proxy;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mudah untuk memantau dan mengambil metrik (cukup bagi Anda untuk memantau hampir sama dengan apa yang Anda pantau di situs web Anda);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang protokol ini adalah yang utama untuk pengiriman konten.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minus signifikan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">latensi tinggi.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/fa/ko/2_/fako2_ysvwvhaguijmddcna20eu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Latensi HLS sebenarnya bersarang dalam protokol itu sendiri; </font><font style="vertical-align: inherit;">karena waktu penyangga yang lama diperlukan, pemain dipaksa untuk menunggu setidaknya ketika satu bongkahan dimuat, tetapi dengan cara yang baik ia harus menunggu sampai dua bongkahan (dua segmen media) dimuat, jika tidak dalam kasus kelambatan klien akan memiliki beban pemain, dan ini tidak terlalu mempengaruhi pengalaman pengguna. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin kedua yang memberi penundaan pada HLS adalah caching. </font><font style="vertical-align: inherit;">Daftar main di-cache pada lapisan dalam dan di server tepi. </font><font style="vertical-align: inherit;">Bahkan jika kita melakukan cache, secara relatif, selama satu detik atau setengah detik, maka ini kira-kira ditambah 2-3 detik keterlambatan. </font><font style="vertical-align: inherit;">Secara total, ternyata dari 12 hingga 18 detik - ini tidak terlalu menyenangkan, jelas itu lebih baik.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meningkatkan HLS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan pemikiran ini, kami mulai meningkatkan HLS. Kami memperbaikinya dengan cara yang agak sederhana: mari kita beri segmen media terakhir dari daftar putar sedikit lebih awal. Artinya, segera setelah kami mulai menulis segmen media terakhir, kami segera mengumumkannya di daftar putar. Apa yang terjadi pada saat ini? .. Waktu </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
buffering di pemain berkurang. Pemain percaya bahwa dia telah mengunduh semuanya, dan dengan tenang mulai mengunduh segmen yang diinginkan. Dengan cara ini kami "menipu" pemain dengan cara ini, tetapi jika kami memantau "baja" (memuat pemain) dengan baik, itu tidak membuat kami takut - kami dapat berhenti memberikan segmen sebelumnya dan semuanya akan kembali normal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin kedua: kami memenangkan total sekitar 5-8 detik. Mereka berasal dari mana? Waktu segmen ini adalah 2 hingga 4 detik per segmen, ditambah waktu untuk menyimpan daftar putar (ini adalah 2-3 detik lainnya). Penundaan kami menurun, apalagi, secara signifikan. Penundaan dikurangi dari 12-15 detik menjadi 5-7. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa lagi yang baik dalam pendekatan ini? Ini sebenarnya gratis! Kami hanya perlu memeriksa apakah para pemain kompatibel dengan pendekatan ini. Yang tidak kompatibel, kami kirim ke URL lama, dan kami mengirim pemain yang kompatibel ke URL baru. Kami tidak perlu memutakhirkan klien lama yang mendukung ini, yang juga penting. Kami sebenarnya tidak perlu memodifikasi, melepaskan pemain di klien seluler. Kami tidak perlu mengembangkan pemain web. Terlihat cukup bagus!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/gm/tt/0fgmttjysv2w8rg8bmzdgzcdtz4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari minus - kebutuhan untuk mengontrol aliran video yang masuk. </font><font style="vertical-align: inherit;">Dalam kasus klien seluler, kita dapat melakukan ini dengan cukup mudah (ketika streaming berasal dari klien seluler), atau transcode tanpa gagal, karena pemain harus tahu berapa lama waktu yang dibutuhkan untuk satu segmen media. </font><font style="vertical-align: inherit;">Dan karena kita mengumumkannya sebelum benar-benar direkam, kita perlu tahu berapa banyak waktu yang diperlukan ketika kita merekamnya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metrik kualitas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, kami telah meningkatkan HLS. </font><font style="vertical-align: inherit;">Sekarang saya ingin memberi tahu bagaimana kami memantau dan metrik kualitas apa yang kami ambil: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3h/_y/iz/3h_yizx3clxbb18dzi-urr-oylq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu metrik kualitas utama adalah waktu mulai. </font><font style="vertical-align: inherit;">Idealnya, ini adalah saat Anda menelusuri klien seluler sebelum siaran, tekan tombol, dan segera dimulai. </font><font style="vertical-align: inherit;">Ini akan ideal jika dimulai sebelum Anda menekan tombol, tetapi, sayangnya, hanya ketika Anda menekan.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin kedua adalah penundaan sinyal. Kami percaya bahwa beberapa detik sangat baik, 10 detik dapat ditoleransi, 20-30 detik sangat buruk. Mengapa ini penting? Misalnya, untuk konser dan beberapa acara publik ini adalah metrik yang sama sekali tidak penting, tidak ada umpan balik; kami hanya menunjukkan aliran - lebih baik tidak ketinggalan daripada sedikit keterlambatan. Dan untuk aliran di mana semacam konferensi sedang berlangsung atau seseorang mengatakan sesuatu dan mereka mengajukan pertanyaan kepadanya, ini mulai menjadi penting, karena mereka mengajukan banyak pertanyaan di komentar dan saya ingin audiens mendapatkan umpan balik sesegera mungkin.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metrik penting lainnya adalah buffering dan lag. </font><font style="vertical-align: inherit;">Faktanya, metrik ini penting tidak hanya dari sudut pandang klien dan kualitas, tetapi dari sudut pandang seberapa banyak kita dapat "memperluas" pengiriman HLS, seberapa banyak kita dapat memeras data dari server kami. </font><font style="vertical-align: inherit;">Oleh karena itu, kami memantau waktu penyangga rata-rata di pemain dan "baja". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilihan kualitas di pemain bisa dimengerti: perubahan tak terduga selalu mengganggu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karenanya, ini juga merupakan metrik penting.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemantauan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki banyak metrik pemantauan, tetapi di sini saya memilih metrik yang selalu berfungsi jika terjadi kesalahan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ir/wy/me/irwymelifaedclj13razr83a85i.jpeg"><br>
<br>
<ul>
<li>-,    .   -   ,    .  ,  â€“ ,              ( ,  â€“  ).</li>
<li> /     .  , ,  ,      ,        ,    .     .</li>
<li>  edge-.  ,       ,     edge-       .</li>
</ul><br>
<br>
<h3>  Â«Â»,       ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang saya akan memberi tahu Anda bagaimana kami menangani aplikasi seperti "Player" ketika kami menggunakan infrastruktur kami untuk menyiarkan aliran video dengan pertanyaan dan jawaban. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clover adalah kuis online. Tuan rumah mengatakan sesuatu, bertanya: pertanyaan rontok - Anda menjawab. 12 pertanyaan, 10 menit pertandingan, pada akhirnya - semacam hadiah. Apa yang rumit? Ini pertumbuhan! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sebelah kanan adalah grafik ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/i8/_e/hwi8_er_sdcw_gxczrgk3z41en0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puncak [pada grafik] adalah beban pada server dalam hal API pada saat dimulainya "Semanggi". Sisa waktu adalah aliran siaran yang biasa. Ini tidak bisa disamakan dengan jumlah pemirsa. Mungkin ini jumlah permintaan dan bebannya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sulit: dalam 5 menit satu juta penonton mendatangi kami di puncak. </font><font style="vertical-align: inherit;">Mereka mulai menonton siaran, mendaftar, melakukan semacam aksi, meminta video ... Tampaknya ini adalah permainan yang sangat sederhana, tetapi ini terjadi dalam periode waktu yang sangat singkat (semua aksi, termasuk permainan terakhir) - ini memberikan beban yang cukup tinggi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaan dan tantangan apa yang kita hadapi?</font></font></h3><br>
<img src="https://habrastorage.org/webt/pd/ci/xh/pdcixhln_tmsracssi9qfy5ra5y.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertumbuhan yang cepat. </font><font style="vertical-align: inherit;">Terkadang +50% per minggu. </font><font style="vertical-align: inherit;">Jika, misalnya, Anda memiliki 200 ribu orang pada hari Rabu, maka pada hari Sabtu atau Minggu mungkin sudah ada 300. Itu banyak! </font><font style="vertical-align: inherit;">Masalah mulai muncul ke permukaan yang sebelumnya tidak terlihat.</font></font></li>
<li>    2   .       .      ,  .       ,  , ,          ,         ,    .<br>
 12         . ,    ,     ,    , ,    -      ,     ,  â€¦</li>
<li>      ,       .     , ,  200-300 ,         400-500.</li>
<li>- ,    ,   ,           3-5 .   ?    Â«Â»,    ,    ,         ,     .<br>
<br>
       (   3   ,   ),          ,       3-5 .    ?  â€“  ,  â€“     exponential backoff,        .<br>
<br>
  exponential on backoff:  â€“ ,       2 ,   4,  8.             backend-.</li>
</ul><br>
<h3>    Â«Â»?</h3><br>
<img src="https://habrastorage.org/webt/-h/c_/gn/-hc_gnjjd-m7ujstbxa9edwnoms.jpeg"><br>
<ul>
<li>-,         .      ,    â€“   .</li>
<li>   Â« Â».  ,     ,    ,      ,     Â«Â».      ,   , -,    ,  -,     .</li>
<li> ,         â€“   ,     Â«Â»    .      Â«Â».     ,  ,   ,    â€¦     â€“ . 10% Â«Â» â€“ , 10% Â«Â»  100  â€“  .</li>
<li> Â«Â»   ,     ,    Â«Â»      .       â€“     -  .    100    â€“  ,  1    15  â€“   .</li>
<li>   .  Â«Â»   , , ,  .   ,      ,     .</li>
<li>   .                   ,    .         ,   latency,    .</li>
<li>   .    â€“     ,       .</li>
<li>  Â«Â»       1           . ,  ,   .      .    ,     ,     .      .</li>
</ul><br>
<h3>  ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arsitektur sepenuhnya cocok untuk kita, dan saya dapat merekomendasikannya dengan aman. HLS akan tetap bersama kami protokol utama untuk setidaknya situs web dan setidaknya protokol cadangan untuk yang lainnya. Mungkin kita akan beralih ke MPEG-DASH. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RTMP yang ditinggalkan. Terlepas dari kenyataan bahwa itu memberikan penundaan yang lebih rendah, kami memutuskan bahwa kami akan menyetel HLS. Mungkin mempertimbangkan kendaraan pengiriman lain, termasuk DASH sebagai alternatif. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qz/ut/oq/qzutoqnu3adqhxx0rivblxx9izq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan meningkatkan saldo yang masuk. Kami juga ingin membuat failover mulus untuk penyeimbangan masuk, sehingga jika terjadi masalah pada salah satu server media untuk klien, peralihan akan benar-benar tidak terlihat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin kami akan mengembangkan sistem pengiriman dari server tepi ke klien. Kemungkinan besar, itu akan menjadi semacam UDP. Yang mana - yang sekarang kita pikirkan dan sedang dalam tahap penelitian.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya itu saja. </font><font style="vertical-align: inherit;">Terimakasih untuk semua!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertanyaan dari hadirin (selanjutnya - A): - Terima kasih banyak atas laporannya! </font><font style="vertical-align: inherit;">Hanya pembicara dari Odnoklassniki yang berbicara, dan dia berkata bahwa mereka harus menulis ulang streamer, encoder, encoder ... Apakah Anda menggunakan solusi seperti itu atau menggunakan stock yang ada di pasaran (seperti Harmonic, dll.)? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1_/mt/qb/1_mtqbmuiapdtajkn5at3emzwtm.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sekarang kami telah memutar solusi pihak ketiga. </font><font style="vertical-align: inherit;">Dari solusi open source yang kami gunakan, kami memiliki nginx, modul RTMP (untuk waktu yang lama). </font><font style="vertical-align: inherit;">Di satu sisi, dia senang kita karena dia bekerja, cukup sederhana. </font><font style="vertical-align: inherit;">Kami bertarung untuk waktu yang sangat lama sehingga ia akan bekerja dengan stabil. </font><font style="vertical-align: inherit;">Sekarang dia pindah dari Nginx-RTMP ke solusinya sendiri. </font><font style="vertical-align: inherit;">Kami berpikir dengan transcoder sekarang. </font><font style="vertical-align: inherit;">Penerima, yaitu bagian penerima, juga telah ditulis ulang dari Nginx-RTMP menjadi solusinya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Saya ingin mengajukan pertanyaan tentang mengiris RTMP pada HLS, tetapi seperti yang saya mengerti, Anda sudah menjawab ... Katakan padaku, apakah solusi Anda open-source? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami sedang mempertimbangkan untuk merilisnya di opensource. Kami lebih suka ingin merilisnya, tetapi pertanyaannya adalah waktu rilis di open source. Masukkan saja sumbernya di Internet - ini tidak cukup. Anda perlu berpikir, membuat beberapa contoh penyebaran. Dan untuk tujuan apa Anda bertanya? Ingin menggunakan? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Karena saya juga menemukan Nginx-RTMP! Singkatnya, tidak didukung untuk waktu yang sangat lama. Penulis bahkan tidak menjawab terutama pertanyaan ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jika Anda mau, Anda bisa menulis surat. Berikan untuk penggunaan sendiri? Kita bisa setuju. Kami benar-benar berencana untuk membukanya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Anda juga mengatakan bahwa Anda dapat pindah dari HLS ke DASH. HLS tidak cocok? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ini adalah pertanyaan tentang apa yang kita bisa, atau mungkin tidak. Ini sangat tergantung pada apa yang akan kita bahas dalam hal meneliti metode pengiriman alternatif (mis. UDP). Jika kami menemukan sesuatu yang "sepenuhnya" bagus, maka kami mungkin tidak akan menyentuh HLS. Jika tampaknya MPEG-DASH lebih nyaman - mungkin kita akan memindahkannya. Tampaknya tidak terlalu sulit, tetapi kami tidak yakin apakah itu perlu atau tidak. Sinkronisasi antara aliran, antara kualitas dan hal-hal lain jelas lebih baik di sana. Ada plusnya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mengenai peringatan. Anda berbicara tentang fakta bahwa jika streaming berhenti mengalir, maka ini segera peringatan. Dan Anda tidak menangkap sesuatu yang independen dari Anda: penyedia jatuh, Megafon jatuh, dan orang-orang berhenti mengalir? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Anggap saja sesuatu yang independen dari kita pada dasarnya adalah semua jenis liburan dan seterusnya. Ya mereka melakukannya. Ya, benar. Administrator melihat - hari ini adalah hari libur, karakteristik lainnya baik-baik saja - mereka tenang. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan tentang penskalaan. Pada tingkat apa skala itu? Misalnya, saya meminta aliran dari telepon - akankah saya segera menerima tautan tertentu dengan server-abu yang benar? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tautan akan segera datang dan, jika perlu, akan mengalihkan Anda (jika ada masalah pada server tertentu). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xz/tn/rq/xztnrqvvbr73gu61lqgpvdt5c-e.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Siapa yang akan beralih? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pemutar seluler atau pemutar web. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dia akan memulai kembali aliran atau apa? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tautan baru akan datang kepadanya di mana ia harus pergi siaran langsung. Dia akan pergi ke sana dan bertanya kembali sungai. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Di level apa Anda menyimpan cache? Dan daftar putar, dan potongan, atau hanya itu? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan daftar putar, potongan! Tembolok sedikit berbeda, baik dari segi waktu maupun dari pengembalian waktu, tetapi kami menyimpan keduanya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mengenai penciptaan ash-server? Apakah Anda memiliki situasi seperti itu sehingga Anda menonton 2 juta pemirsa di satu siaran, tidak punya waktu untuk sesuatu dan dengan cepat mengambil beberapa server ash? Atau apakah Anda menaikkan semuanya terlebih dahulu dengan margin? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pak:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Mungkin ini bukan. Pertama, stok selalu kecil atau besar - tidak masalah. Kedua, tidak terjadi siaran yang tiba-tiba menjadi sangat populer. Kami dapat memprediksi jumlah pemirsa dengan baik. Pada dasarnya, untuk memiliki banyak orang, kita harus berusaha. Dengan demikian, kita dapat menyesuaikan jumlah pemirsa siaran, tergantung pada upaya apa yang dilakukan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Anda mengatakan bahwa Anda mengukur keterlambatan instrumental di pihak pemain. Bagaimana? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sangat sederhana. Dalam potongan (di segmen media) kami memiliki stempel waktu, atas nama segmen media - di pemain kami hanya mengembalikannya. Jika dia tidak secara eksplisit sama sekali, dia kembali. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya ingat mencoba menjalankan peering di WebRTC. Kenapa ditolak? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pak:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Aku tidak bisa menjawab pertanyaan ini untukmu - itu terjadi tanpaku." Saya tidak bisa mengatakan mengapa saya mencobanya dan saya tidak bisa mengatakan mengapa saya menolak. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mengenai receiver dan server media. Seperti yang saya pahami, dulu Anda punya Nginx-RTMP, sekarang baik di sana maupun di sana Anda memiliki solusi buatan sendiri. Bahkan, ini adalah salah satu server media yang proksi server media lain, dan mereka sudah ada di cache dan di tepi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jadi, tidak juga. Ini adalah solusi buatan sendiri, tetapi berbeda dalam hal server media dan dalam hal penerima. Nginx-RTMP - itu semacam pemanen yang bisa melakukan keduanya. Interior penerima dan server media kami sangat berbeda - baik berdasarkan kode maupun keseluruhan. Satu-satunya hal yang menyatukan mereka adalah pemrosesan RTMP. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mengenai keseimbangan di antara ujung-ujungnya. Bagaimana ini bisa terjadi?</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami mengukur lalu lintas, mengirimkannya ke server yang diinginkan. Saya tidak mengerti sedikit pertanyaan ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya akan menjelaskan: pengguna meminta daftar putar melalui pemain - ia mengembalikan jalur relatif ke manifes dan potongan atau jalur absolut, misalnya, dengan IP atau domain? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jalur relatif. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Artinya, tidak ada penyeimbangan saat melihat aliran oleh satu pengguna? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Itu terjadi. Cukup rumit. Kita dapat menggunakan pengalihan 301 saat membebani server. Jika kami melihat semuanya benar-benar buruk di sana, untuk segmen kami dapat mengirimkannya ke server lain. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tapi itu harus ditransfer ke logika pemain? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pak:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Tidak, hanya bagian ini yang seharusnya tidak dijahit. Redirect 301! Sederhananya, pemain harus dapat keluar dari tautan 301. Kami dapat mengirimkannya ke server lain dari sisi server pada saat kelebihan beban. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Artinya, dia bertanya pada server, dan server memberikannya kepadanya? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya. Ini tidak terlalu bagus, oleh karena itu, logika pemain digunakan untuk me-retweet tautan ke kasus kegagalan salah satu server - ini sudah ada dalam logika pemain. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan Anda tidak mencoba untuk bekerja bukan secara relatif, tetapi secara absolut: ketika Anda meminta pemain untuk melakukan beberapa keajaiban, mencari tahu di mana ada sumber daya dan di mana tidak, dan sudah memberikan daftar putar yang menunjukkan server tertentu? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pak:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Sebenarnya, ini terlihat seperti solusi yang berfungsi. </font><font style="vertical-align: inherit;">Jika Anda datang saat itu, kami akan menimbang keduanya! </font><font style="vertical-align: inherit;">Tetapi solusi saat ini juga berfungsi, jadi saya tidak benar-benar ingin beralih dari satu ke yang lain, meskipun, mungkin, ini juga terlihat seperti solusi yang berfungsi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Katakan, apakah ini bersahabat dengan multicast? </font><font style="vertical-align: inherit;">HLS, seperti yang saya pahami, sama sekali tidak ada ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dalam implementasi saat ini, kami mungkin tidak memiliki apa pun dalam sistem dengan multicast yang aktif. </font><font style="vertical-align: inherit;">Kami tidak memasukkan konsep multicast di sana. </font><font style="vertical-align: inherit;">Mungkin di suatu tempat di kedalaman admin magic, ada sesuatu di dalam jaringan, tetapi tersembunyi dari semua orang dan tidak ada yang tahu ...</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/va/s2/qrvas2mhyryhgck9t6n8ffc1pai.jpeg"><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/bA-Y_BfTZZY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit iklan :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih untuk tetap bersama kami. Apakah Anda suka artikel kami? Ingin melihat materi yang lebih menarik? Dukung kami dengan melakukan pemesanan atau merekomendasikan kepada teman Anda, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud VPS untuk pengembang dari $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analog unik dari server entry-level yang diciptakan oleh kami untuk Anda: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seluruh kebenaran tentang VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps mulai dari $ 19 atau cara membagi server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (opsi tersedia dengan RAID1 dan RAID10, hingga 24 core dan hingga 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 kali lebih murah di pusat data Equinix Tier IV di Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hanya kami yang memiliki </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV dari $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di Belanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - mulai dari $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca tentang</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cara Membangun Infrastruktur Bldg. </font><font style="vertical-align: inherit;">kelas c menggunakan server Dell R730xd E5-2650 v4 seharga 9.000 euro untuk satu sen?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id488136/index.html">Bagaimana robot Atlas belajar melakukan aksi akrobatik, tak tertahankan bagi orang biasa?</a></li>
<li><a href="../id488138/index.html">Pengukuran Kapasitansi Kecil (sensor kapasitif analog)</a></li>
<li><a href="../id488140/index.html">Cara menyederhanakan hidup dengan bantuan hukum Pareto</a></li>
<li><a href="../id488142/index.html">Avalonia termenung</a></li>
<li><a href="../id488146/index.html">[Diskusi]: Apakah insinyur IT, apakah IT engineer?</a></li>
<li><a href="../id488150/index.html">Barang Antik: ThinkPad X200 dan sumber tertutup</a></li>
<li><a href="../id488152/index.html">Game multipemain prototipe untuk 3 sore?</a></li>
<li><a href="../id488154/index.html">Kami masuk ke sepatu manajer kantor. Algoritma Pasokan Dasar</a></li>
<li><a href="../id488160/index.html">Windows Server 2019 vs. VMware Snapshots with quiescing: solusi elegan untuk masalah ini</a></li>
<li><a href="../id488162/index.html">Semakin tinggi peringkat, semakin banyak uang dan sebaliknya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>