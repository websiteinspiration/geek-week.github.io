<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîó üë¨ üå°Ô∏è Create your own CRUD API on Express and MySQL: part one ‚úíÔ∏è üè£ „ÄΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone. In anticipation of the start of the ‚ÄúFullstack JavaScript Developer‚Äù course , we want to share a little material that was written by o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Create your own CRUD API on Express and MySQL: part one</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/491408/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello everyone. In anticipation of the start of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúFullstack JavaScript Developer‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> course </font><font style="vertical-align: inherit;">, we want to share a little material that was written by our freelance writer.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/9w/az/vb/9wazvb3h8u0o1gjvijjntbhrkgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Express is one of the most popular web frameworks that supports routing, middleweights and a template system. Doing a backend on Node.js without Express in 2020 is a rather strange activity, because Express is a de facto framework for building a web application on Node.js.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Today we will try to create a simple CRUD API using the MySQL database. </font><font style="vertical-align: inherit;">An experienced Node.js reader will ask, where is MongoDB, with which Node.js are usually used in tandem, but I‚Äôll say right away this article is more for PHP developers who want to touch Node.js a bit, and to mitigate the transition to a new ecosystem, we we will use MySQL. </font><font style="vertical-align: inherit;">We‚Äôll create an API for a simple Todo application, in case someone wants to attach to his todo (and it doesn‚Äôt matter whether it is written with React or not), attach a little back and play with it.</font></font><br>
<a name="habracut"></a><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Architecture" and the essence of our application</font></font></h5><br>
<img src="https://habrastorage.org/webt/jh/jh/si/jhjhsi1hno_tuosqmjuft3algig.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our application it will be possible to create, receive, update and delete Todo. </font><font style="vertical-align: inherit;">In general, we will have a minimal set of CRUD functions (create read update delete). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the end, we will combine the application with the application on React and we will test everything. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, I‚Äôll give the structure of the application files: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i_/ad/nq/i_adnqzj03nofwn7xqkgjki-ono.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, I‚Äôll give a table of actions and methods that are in our application:</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methods</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Url</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actions</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Get</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deals</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getting all the cases</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deals / 2</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting id with number 2</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Post</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deals </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adding a new case</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Put </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deals / 3 </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Update user with id = 3</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DELETE </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deals / 3 </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delete user with id = 3</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DELETE </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ deals </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remove all users</font></font></th>
</tr>
</tbody>
</table></div><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating Your Node.js Application </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go to your favorite directory, launch the terminal and create your application. </font><font style="vertical-align: inherit;">By the way, it‚Äôs probably clear from the title that Node.js should already be installed. </font><font style="vertical-align: inherit;">If you have not already done so, then </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this simply cannot be</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> downloaded from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from here.</font></font><br>
<br>
<pre><code class="plaintext hljs">    $ mkdir CRUD_API<font></font>
    $ cd CRUD_API<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Next, you need to initialize our application using </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm init</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Because </font><font style="vertical-align: inherit;">our application is more of a test and training one, I will use a command that will fill in all the default data so as not to waste time on small details:</font></font><br>
<br>
<pre><code class="plaintext hljs"> npm init -y
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If that, then with your hands in </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you can change the data to the one you need: the github repository, tags, author, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then we need to put all the packages necessary for the application to work:</font></font><br>
<br>
<pre><code class="plaintext hljs">  npm i express mysql body-parser --save
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you are going to send your development to github later, you should create a hidden file </font></font><code>.gitignore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so as not to drag the heaviest node_modules </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and disgrace</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yourself </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We write:</font></font><br>
<br>
<pre><code class="plaintext hljs">    touch .gitignore <font></font>
    code .gitignore <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We enter there </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, later in this file you can enter the names of folders and files that you want to see later on the remote server.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Basic Express setup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the root folder of the project, create a file </font></font><code>server.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
    <span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"body-parser"</span>);<font></font>
    <font></font>
    <span class="hljs-keyword">const</span> app = express();<font></font>
    <font></font>
    <span class="hljs-comment">//     json</span><font></font>
    app.use(bodyParser.json());<font></font>
    <font></font>
    <span class="hljs-comment">//    : application/x-www-form-urlencoded</span>
    app.use(bodyParser.urlencoded({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> }));<font></font>
    <font></font>
    <span class="hljs-comment">//   response - request</span>
    app.get(<span class="hljs-string">"/"</span>, (req, res) =&gt; {<font></font>
      res.json({ <span class="hljs-attr">message</span>: <span class="hljs-string">"    "</span> });<font></font>
    });<font></font>
    <font></font>
    <span class="hljs-comment">//  ,   </span>
    app.listen(<span class="hljs-number">3001</span>, () =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"   3001 "</span>);<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we can start the server with:</font></font><br>
<br>
<pre><code class="plaintext hljs">node server.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 We need Express to create our api, and the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">body-parser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">helps us parse </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and create </font></font><code>req.body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">one that is useful for routing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now our server can do the following:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create an Express app that renders body-parser a midlever using app.use ()</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we have a simple get, just to test the application</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Listen to port 3001 for all incoming changes</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, our application works, then you can do the database.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create your MySQL data table</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I really hope that the reader of this article has no problem downloading and installing MySQL and MySQLWorkBranch on their own. </font><font style="vertical-align: inherit;">Next, you yourself create a scheme (DB) with the name that you like best (in my case, TODO), and then select the lightning request and copy / type the following command:</font></font><br>
<br>
<pre><code class="sql hljs">    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">`todo`</span> (
        <span class="hljs-keyword">id</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span> AUTO_INCREMENT,
        <span class="hljs-built_in">text</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
      ) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our database, everything will be at a minimum: only id and the text of the case itself. </font><font style="vertical-align: inherit;">However, to add another column in which, for example, the urgency of your case can be described, I hope that it will not cause problems.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuration &amp; Connect with our database</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's establish and configure the connection to the database. </font><font style="vertical-align: inherit;">We will create a new app folder directly in our root folder, and there we will create a file </font></font><code>db.config.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the folder </font></font><code>config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, with approximately the same content, which depends on your settings in MySQLWorkBranch. </font><font style="vertical-align: inherit;">In my case, the file will look like this:</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">HOST</span>: <span class="hljs-string">"localhost"</span>,
    <span class="hljs-attr">USER</span>: <span class="hljs-string">"pavel"</span>,
    <span class="hljs-attr">PASSWORD</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">DB</span>: <span class="hljs-string">"TODO"</span><font></font>
  };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, create a folder to describe our </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / mode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> models </font><font style="vertical-align: inherit;">, in which we will then create a model:</font></font><br>
<br>
<pre><code class="plaintext hljs">  const mysql = require("mysql");<font></font>
  const dbConfig = require("../config/db.config.js");<font></font>
  <font></font>
  //      <font></font>
  const connection = mysql.createConnection({<font></font>
    host: dbConfig.HOST,<font></font>
    user: dbConfig.USER,<font></font>
    password: dbConfig.PASSWORD,<font></font>
    database: dbConfig.DB<font></font>
  });<font></font>
  <font></font>
  //      <font></font>
  connection.connect(err =&gt; {<font></font>
    if (err) throw error;<font></font>
    console.log("    ");<font></font>
  });<font></font>
<font></font>
  module.exports = connection;<font></font>
   //  <font></font>
</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create Model </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In the folder </font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we create a file called </font></font><code>deal.model.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">If you have a question, what is a model in general, you should read an article like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and familiarize yourself with the MVC design pattern. </font><font style="vertical-align: inherit;">I am going to create a constructor for a Deal object, and use connection for the following CRUD functions:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creation of a new business</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> finding case by id</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> getting all the cases</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ability to update our case by id</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Delete one case by id</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> complete deletion of all cases</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Total, we have to do the following things:</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">const</span> Deal = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">deal</span>) </span>{
    <span class="hljs-keyword">this</span>.text = deal.text;<font></font>
  };<font></font>
  <span class="hljs-comment">//    ,        CRUD,      :</span>
  Deal.create = <span class="hljs-function">(<span class="hljs-params">newDeal, result</span>) =&gt;</span> {<font></font>
    sql.query(<span class="hljs-string">"INSERT INTO TODO SET ?"</span>, newDeal, (err, res) =&gt; {
      <span class="hljs-comment">//   SQL</span>
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"error: "</span>, err);<font></font>
        result(err, <span class="hljs-literal">null</span>);
        <span class="hljs-comment">//   ,     </span>
        <span class="hljs-keyword">return</span>;<font></font>
      }<font></font>
  <font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">" "</span>, { <span class="hljs-attr">id</span>: res.insertId, ...newDeal });<font></font>
      result(<span class="hljs-literal">null</span>, { <span class="hljs-attr">id</span>: res.insertId, ...newDeal });<font></font>
    });<font></font>
  };<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will place the rest of the code in the spoiler, because I don‚Äôt see any reason to bring it all, because in fact the code pattern is repeated there, only the sql commands and arguments change:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the rest of the code</font></font></b><div class="spoiler_text"> Deal.findById = (dealId, result) =&gt; {<br>
 sql.query(`SELECT * FROM TODO WHERE id = ${dealId}`, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(¬´error: ¬ª, err);<br>
 result(err, null);<br>
 return;<br>
 }<br>
 <br>
 if (res.length) {<br>
 console.log(¬´ : ¬ª, res[0]);<br>
 result(null, res[0]);<br>
 return;<br>
 }<br>
 <br>
 //     <br>
 result({ kind: ¬´not_found¬ª }, null);<br>
 });<br>
 };<br>
 <br>
 Deal.getAll = result =&gt; {<br>
 sql.query(¬´SELECT * FROM TODO¬ª, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(¬´error: ¬ª, err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 console.log(¬´deals: ¬ª, res);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 Deal.updateById = (id, deal, result) =&gt; {<br>
 sql.query(<br>
 ¬´UPDATE TODO SET text =? WHERE id = ?¬ª,<br>
 [deal.text, id],<br>
 (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(¬´error: ¬ª, err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 if (res.affectedRows == 0) {<br>
 result({ kind: ¬´not_found¬ª }, null);<br>
 return;<br>
 }<br>
 <br>
 console.log(¬´  ¬ª, { id: id, ...deal });<br>
 result(null, { id: id, ...deal });<br>
 }<br>
 );<br>
 };<br>
 <br>
 Deal.remove = (id, result) =&gt; {<br>
 sql.query(¬´DELETE FROM TODO WHERE id = ?¬ª, id, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(¬´error: ¬ª, err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 if (res.affectedRows == 0) {<br>
 //       id<br>
 result({ kind: ¬´not_found¬ª }, null);<br>
 return;<br>
 }<br>
 console.log(¬´   ¬ª, id);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 Deal.removeAll = result =&gt; {<br>
 sql.query(¬´DELETE FROM TODO¬ª, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(¬´error: ¬ª, err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 console.log(`deleted ${res.affectedRows} deals`);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 </div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's all for now. </font><font style="vertical-align: inherit;">The next part of this article is approaching, in which we finish writing the back and start testing it. </font><font style="vertical-align: inherit;">And by tradition, a few useful links:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Features of work and internal device express.js</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic MySQL Commands</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A bit about the HTTP request / response loop</font></font></a> </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A little bit about arrow functions if you are a complete beginner</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en491388/index.html">Get away from jQuery to Svelte, as it were</a></li>
<li><a href="../en491390/index.html">Seven ITIL 4 Guidelines</a></li>
<li><a href="../en491398/index.html">Tests and comparisons of WS2813, WS2812B, WS2815 and similar digital LED strips</a></li>
<li><a href="../en491404/index.html">Evil at the service of good: Supervillain 3D-printed mask protects children from polluted air</a></li>
<li><a href="../en491406/index.html">STM32 Part 3: First Project</a></li>
<li><a href="../en491412/index.html">Salesforce Certification Guide</a></li>
<li><a href="../en491416/index.html">A selection of entertaining statistical facts # 5</a></li>
<li><a href="../en491422/index.html">Only volunteers are a step forward</a></li>
<li><a href="../en491426/index.html">Jinja2 in the C ++ world, part three. ‚ÄúNow you are in Conan‚Äù</a></li>
<li><a href="../en491428/index.html">Slurm Agile. Three days of responsibility, openness, courage and respect</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>