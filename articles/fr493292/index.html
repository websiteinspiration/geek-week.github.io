<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèª üë®üèø‚Äçüîß üåà R√©actif ou r√©actif? Analyse de la structure des composants React ü§õüèΩ üë©‚Äçüë©‚Äçüëß ü§°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous allons comprendre la complexit√© de l'√©criture de composants adaptatifs, parler de la division du code, envisager plusieurs fa√ßo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>R√©actif ou r√©actif? Analyse de la structure des composants React</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/youla/blog/493292/"><img src="https://habrastorage.org/webt/86/uj/wu/86ujwufflu-omcpppq0p9s0nnng.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous allons comprendre la complexit√© de l'√©criture de composants adaptatifs, parler de la division du code, envisager plusieurs fa√ßons d'organiser la structure du code, √©valuer leurs avantages et leurs inconv√©nients et essayer de choisir la meilleure (mais ce n'est pas exact).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons par la terminologie. Nous entendons souvent les termes </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptatif</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©actif</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Que signifient-ils? Quelle est la diff√©rence? Quel est le lien avec nos composants? </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptive</font></font></strong></a><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (adaptative)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un complexe d'interfaces visuelles cr√©√©es pour des tailles d'√©cran sp√©cifiques. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Responsive</font></font></strong></a><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Responsive)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une interface unique qui s'adapte √† toutes les tailles d'√©cran. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, lorsque l'interface est d√©compos√©e en petits fragments, la diff√©rence entre adaptatif et r√©actif devient de plus en plus floue, jusqu'√† dispara√Ætre compl√®tement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du d√©veloppement de mises en page, nos concepteurs, ainsi que les d√©veloppeurs, ne partagent g√©n√©ralement pas ces concepts et combinent une logique adaptative et r√©active.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, j'appellerai les composants qui contiennent une logique adaptative et r√©active comme </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simplement adaptatifs</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . D'abord parce que j'aime ce mot plus que ¬´r√©actif¬ª ou, pardonnez-moi, ¬´r√©actif¬ª. Et deuxi√®mement, je le trouve plus courant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais me concentrer sur deux domaines des interfaces d'affichage - mobile et de bureau. Par affichage mobile, nous entendons la largeur, par exemple, ‚â§ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">991 pixels</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(le nombre lui-m√™me n'est pas important, c'est juste une constante, qui d√©pend de votre syst√®me de conception et de votre application), et sous l'√©cran du bureau - la largeur est sup√©rieure au seuil s√©lectionn√©. </font><font style="vertical-align: inherit;">Je manquerai intentionnellement des √©crans pour tablettes et moniteurs √† √©cran large, car, premi√®rement, tout le monde n'en a pas besoin, et deuxi√®mement, il sera plus facile de le dire ainsi. </font><font style="vertical-align: inherit;">Mais les mod√®les dont nous allons parler s'√©tendent √©galement pour un certain nombre de ¬´mappages¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, je ne parlerai presque pas de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , principalement nous parlerons de la logique des composants.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frontend @youla </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais parler bri√®vement de notre pile √† Yulia afin de savoir clairement dans quelles conditions nous cr√©ons nos composants. Nous utilisons </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React / Redux</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous travaillons en monorep, nous utilisons </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typescript</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et nous √©crivons </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des composants de style</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . √Ä titre d'exemple, regardons nos trois packages (les packages dans le concept de monoreps sont des packages NPM qui sont interconnect√©s, qui peuvent √™tre des applications, des biblioth√®ques, des utilitaires ou des composants distincts - vous choisissez vous-m√™me le degr√© de d√©composition). Nous examinerons deux applications et une biblioth√®que d'interface utilisateur. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ youla / ui</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- biblioth√®que de composants. Ils sont utilis√©s non seulement par nous, mais aussi par d'autres √©quipes qui ont besoin d'interfaces "Yulian". La biblioth√®que a beaucoup de choses, commen√ßant par des boutons et des champs de saisie, et se terminant, par exemple, par un en-t√™te ou un formulaire d'autorisation (plus pr√©cis√©ment, sa partie interface utilisateur). Nous consid√©rons cette biblioth√®que comme une d√©pendance externe de notre application. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ youla-web / app-classified</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - l'application responsable des sections du catalogue / produit / autorisation. Selon les besoins de l'entreprise, toutes les interfaces doivent √™tre </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptatives</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ youla-web / app-b2b</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est l'application responsable des sections de votre compte personnel pour les utilisateurs professionnels. Les interfaces de cette application sont exclusivement de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bureau</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous envisagerons d'√©crire des composants adaptatifs en utilisant l'exemple de ces packages. </font><font style="vertical-align: inherit;">Mais vous devez d'abord y faire face </font></font><code>isMobile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©finition de mobilit√© isMobile &amp;&amp; &lt;Composant /&gt;</font></font></h2><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> App = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
     {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">HeaderMobile</span> /&gt;</span>}
     <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de commencer √† √©crire des composants adaptatifs, vous devez apprendre √† d√©finir la ¬´mobilit√©¬ª. </font><font style="vertical-align: inherit;">Il existe de nombreuses fa√ßons de mettre en ≈ìuvre la d√©finition de la mobilit√©. </font><font style="vertical-align: inherit;">Je veux m'attarder sur certains points cl√©s.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©terminer la mobilit√© en fonction de la largeur de l'√©cran et de l'agent utilisateur </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart d'entre vous savent comment mettre en ≈ìuvre les deux options, mais revenons bri√®vement sur les points principaux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous travaillez avec la largeur de l'√©cran, il est habituel de d√©finir des points limites, apr√®s quoi l'application doit se comporter comme mobile ou de bureau. </font><font style="vertical-align: inherit;">La proc√©dure est la suivante:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez des constantes avec des points limites et enregistrez-les dans le sujet (si votre solution CSS le permet). </font><font style="vertical-align: inherit;">Les valeurs elles-m√™mes peuvent √™tre celles que vos concepteurs trouvent les plus appropri√©es pour votre </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syst√®me d'interface utilisateur</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous enregistrons la</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> taille d'√©cran actuelle dans une </font><font style="vertical-align: inherit;">source de donn√©es </font><strong><font style="vertical-align: inherit;">redux / mobx / context / any</font></strong><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Partout, si seulement les composants et, de pr√©f√©rence, la logique d'application avaient acc√®s √† ces donn√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous souscrivons √† l'√©v√©nement resize et mettons √† jour la valeur de la largeur de l'√©cran √† celle qui d√©clenchera la cha√Æne de mises √† jour de l'arborescence des composants.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous cr√©ons des fonctions d'assistance simples qui, en utilisant des largeurs d'√©cran et des constantes, calculent l'√©tat actuel ( </font></font><code>isMobile</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></strong><code>isDesktop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le pseudo code qui impl√©mente ce mod√®le de travail:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> breakpoints = {
 <span class="hljs-attr">mobile</span>: <span class="hljs-number">991</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> state = {
 <span class="hljs-attr">ui</span>: {
   <span class="hljs-attr">width</span>: <span class="hljs-literal">null</span><font></font>
 }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> handleSubscribe = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
 state.ui.width = <span class="hljs-built_in">window</span>.innerWidth<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> onSubscribe = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
 <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, handleSubscribe)<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> offSubscribe = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span>
 <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">'resize'</span>, handleSubscribe)<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getIsMobile = <span class="hljs-function">(<span class="hljs-params">state: any</span>) =&gt;</span> {
 <span class="hljs-keyword">if</span> (state.ui.width &lt;= breakpoints.mobile) {
   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><font></font>
 }<font></font>
<font></font>
 <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getIsDesktop = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> !getIsMobile(state)<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
 React.useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
   onSubscribe()<font></font>
<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> offSubscribe()<font></font>
 }, [])<font></font>
<font></font>
 <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponentMounted</span> /&gt;</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> MyComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> isMobile ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MobileComponent</span> /&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DesktopComponent</span> /&gt;</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> MyComponentMounted = anyHocToConnectComponentWithState(
 <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({
   <span class="hljs-attr">isMobile</span>: getIsMobile(state)<font></font>
 })<font></font>
)(MyComponent)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque l'√©cran change, les valeurs dans </font></font><code>props</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour le composant seront mises √† jour et il sera correctement redessin√©. Il existe de nombreuses biblioth√®ques qui impl√©mentent cette fonctionnalit√©. Il sera plus pratique pour quelqu'un d'utiliser une solution pr√™te √† l'emploi, par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-media</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-responsive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc., et pour quelqu'un, il est plus facile d'√©crire la </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">v√¥tre</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement √† la taille de l'√©cran, </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il ne peut pas changer dynamiquement pendant que l'application est en cours d'ex√©cution (√† proprement parler, peut-√™tre via les outils du d√©veloppeur, mais ce n'est pas un sc√©nario utilisateur). Dans ce cas, nous n'avons pas besoin d'utiliser une logique complexe pour stocker la valeur et le recomptage, il suffit d'analyser la cha√Æne une fois </font></font><code>window.navigator.userAgent,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour enregistrer la valeur, et </font><font style="vertical-align: inherit;">vous avez </font><font style="vertical-align: inherit;">termin√©. Il existe un grand nombre de biblioth√®ques pour vous aider, par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la d√©tection mobile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-device-detect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'approche est </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus simple, mais son utilisation ne suffit pas. Quiconque a s√©rieusement d√©velopp√© des interfaces adaptatives conna√Æt la ¬´touche magique¬ª des iPads et des appareils similaires, qui en position verticale rel√®vent de la d√©finition de mobile, et en horizontal - bureau, mais en m√™me temps ont un </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appareil mobile. Il convient √©galement de noter que dans une application enti√®rement adaptative / r√©active, </font></font><code>user-agent </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il est impossible de d√©terminer la mobilit√© </font><font style="vertical-align: inherit;">sur la base d'informations uniquement </font><font style="vertical-align: inherit;">si l'utilisateur utilise, par exemple, un navigateur de bureau, mais r√©duit la fen√™tre √† la taille ¬´mobile¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aussi, ne n√©gligez pas les informations sur </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tr√®s souvent, dans le code, vous pouvez trouver des constantes telles que </font></font><code>isSafari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font><code>isIE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etc. qui g√®rent les ¬´fonctionnalit√©s¬ª de ces appareils et navigateurs. Il est pr√©f√©rable de combiner les deux approches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre base de code, nous utilisons une constante </font></font><code>isCheesySafari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui, comme son nom l'indique, d√©finit l'appartenance </font></font><code>user-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† la famille de navigateurs Safari. Mais en plus de cela, nous avons une constante </font></font><code>isSuperCheesySafari</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ce qui implique un Safari mobile correspondant √† la version 11 d'iOS, qui est devenu c√©l√®bre pour de nombreux bugs comme celui-ci: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://hackernoon.com/how-to-fix-the-ios-11-input-element -en-fixed-modals-bug-aaf66c7ba3f8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> isMobileUA = <span class="hljs-function">(<span class="hljs-params">(</span>) =&gt;</span> magicParser(<span class="hljs-built_in">window</span>.navigator.userAgent))()<font></font>
<font></font>
<span class="hljs-keyword">import</span> isMobileUA <span class="hljs-keyword">from</span> <span class="hljs-string">'./isMobileUA'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> MyComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (isMobile || isMobileUA) ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MobileComponent</span> /&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DesktopComponent</span> /&gt;</span></span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'en est-il des requ√™tes m√©diatiques? </font><font style="vertical-align: inherit;">Oui, en effet, CSS poss√®de des outils int√©gr√©s pour travailler avec l'adaptabilit√©: les requ√™tes multim√©dias et leur m√©thode analogique </font></font><code>window.matchMedia</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ils peuvent √™tre utilis√©s, mais la logique de ¬´mise √† jour¬ª des composants lors du redimensionnement devra encore √™tre mise en ≈ìuvre. </font><font style="vertical-align: inherit;">Bien que pour moi personnellement, l'utilisation de la syntaxe des requ√™tes multim√©dias au lieu des op√©rations de comparaison habituelles dans JS pour la logique d'application et les composants soit un avantage douteux.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisation de la structure des composants</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons trouv√© la d√©finition de la mobilit√©, r√©fl√©chissons maintenant √† l'utilisation des donn√©es que nous avons obtenues et √† l'organisation de la structure du code des composants. Dans notre code, en r√®gle g√©n√©rale, deux types de composants pr√©valent. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier type</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est les composants, aff√ªt√©s sous le t√©l√©phone portable ou sous le bureau. Dans ces composants, les noms contiennent souvent les mots Mobile / Desktop, qui indiquent clairement que le composant appartient √† l'un des types. √Ä titre d'exemple d'un tel composant peut √™tre consid√©r√© √† </font></font><code>&lt;MobileList /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir de </font></font><code>@youla/ui</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { Panel, Cell, Content, afterBorder } <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled'</span>
<span class="hljs-keyword">import</span> Group <span class="hljs-keyword">from</span> <span class="hljs-string">'./Group'</span>
<span class="hljs-keyword">import</span> Button, { IMobileListButtonProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button'</span>
<span class="hljs-keyword">import</span> ContentOrButton, { IMobileListContentOrButton } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ContentOrButton'</span>
<span class="hljs-keyword">import</span> Action, { IMobileListActionProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Action'</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { Panel, Group, Cell, Content, Button, ContentOrButton, Action }
<span class="hljs-keyword">export</span> {<font></font>
 afterBorder,<font></font>
 IMobileListButtonProps,<font></font>
 IMobileListContentOrButton,<font></font>
 IMobileListActionProps<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce composant, en plus de l'exportation tr√®s verbeuse, est une liste de donn√©es, s√©parateurs, regroupements par blocs, etc. Nos concepteurs sont tr√®s friands de ce composant et l'utilisent partout dans les interfaces Ula. Par exemple, dans la description sur la page produit ou dans notre nouvelle fonctionnalit√© tarifaire: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e5/m_/p-/e5m_p-fw1vefwo2330gmeh21kbw.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et dans N endroits autour du site. Nous avons √©galement un composant similaire </font></font><code>&lt;DesktopList /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui impl√©mente cette fonctionnalit√© de liste pour la r√©solution du bureau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les composants du </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deuxi√®me type</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contiennent la logique du bureau et du mobile. Regardons une version simplifi√©e du rendu de notre composant </font></font><code>&lt;HeaderBoard /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui vit dans @ youla / app-classified.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons trouv√© pour moi - </font><font style="vertical-align: inherit;">m√™me est tr√®s pratique pour faire toutes les </font><font style="vertical-align: inherit;">composantes pour un composant de </font><font style="vertical-align: inherit;">style dans un seul fichier et l' </font><font style="vertical-align: inherit;">importer dans les espaces de </font><font style="vertical-align: inherit;">noms S, de s√©parer le code des autres composants: </font></font><code>import * as S from ‚Äò./styled‚Äô</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Par cons√©quent, "S" est un objet dont les cl√©s sont les noms des composants stylis√©s et les valeurs sont les composants eux-m√™mes.</font></font><br>
<br>
<pre><code class="javascript hljs"> <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HeaderWrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> /&gt;</span>
     {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">S.Arrow</span> /&gt;</span>}
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Wraper</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{bgVideo}</span> /&gt;</span>
       {!isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Header</span>&gt;</span>{headerContent}<span class="hljs-tag">&lt;/<span class="hljs-name">Header</span>&gt;</span>}
       <span class="hljs-tag">&lt;<span class="hljs-name">S.WaveWrapper</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wraper</span>&gt;</span>
     {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">S.MobileHeader</span>&gt;</span>{headerContent}<span class="hljs-tag">&lt;/<span class="hljs-name">S.MobileHeader</span>&gt;</span>}
     <span class="hljs-tag">&lt;<span class="hljs-name">Info</span> <span class="hljs-attr">link</span>=<span class="hljs-string">{link}</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">PaintingInfo</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span> /&gt;</span>
     {isMobile ? <span class="hljs-tag">&lt;<span class="hljs-name">CardsMobile</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">CardsDesktop</span> /&gt;</span>}
     {isMobile ? <span class="hljs-tag">&lt;<span class="hljs-name">UserNavigation</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">UserInfoModal</span> /&gt;</span>}
   <span class="hljs-tag">&lt;/<span class="hljs-name">HeaderWrapper</span>&gt;</span></span><font></font>
 )<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici </font></font><code>isMobile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, c'est la d√©pendance du composant, sur la base de laquelle le composant lui-m√™me d√©cidera de l'interface √† restituer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une mise √† l'√©chelle plus pratique, nous utilisons souvent le mod√®le d'inversion de contr√¥le dans les parties r√©utilis√©es de notre code, mais veillez √† ne pas surcharger les abstractions de niveau sup√©rieur avec une logique inutile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abandonnons maintenant un peu les composants ¬´Yulian¬ª et regardons de plus pr√®s ces deux composants:</font></font><br>
<br>
<ul>
<li><code>&lt;ComponentA /&gt;</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec une s√©paration stricte de la logique de bureau et mobile.</font></font></li>
<li><code>&lt;ComponentB /&gt;</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> combin√©.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;ComponentA /&gt; vs &lt;ComponentB /&gt;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Structure des dossiers et fichier racine </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.ts</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="javascript hljs">./ComponentA<font></font>
- ComponentA.tsx<font></font>
- ComponentADesktop.tsx<font></font>
- ComponentAMobile.tsx<font></font>
- index.ts<font></font>
- styled.desktop.ts<font></font>
- styled.mobile.ts<font></font>
</code></pre><br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span> ComponentA  <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentA'</span>
<span class="hljs-keyword">import</span> ComponentAMobile  <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentAMobile'</span>
<span class="hljs-keyword">import</span> ComponentADesktop  <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentADesktop'</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">ComponentACombined</span>: ComponentA,<font></font>
 ComponentAMobile,<font></font>
 ComponentADesktop<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce au nouveau webpack secouant l'arborescence technologique (ou en utilisant tout autre collecteur), vous pouvez supprimer les modules inutilis√©s ( </font></font><code>ComponentADesktop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>ComponentACombined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), m√™me avec cette r√©exportation via le fichier racine:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> ComponentA <span class="hljs-keyword">from</span> ‚Äò@youla/ui‚Äô<font></font>
&lt;ComponentA.ComponentAMobile /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seul le code du fichier ./ComponentAMobile entre dans le bundle final. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le composant </font></font><code>&lt;ComponentA /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contient des importations asynchrones utilisant une </font></font><code>React.Lazy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">version sp√©cifique du composant </font></font><code>&lt;ComponentAMobile /&gt; || &lt;ComponentADesktop /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour une situation sp√©cifique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chez Yule, nous essayons d'adh√©rer au mod√®le d'un seul point d'entr√©e dans le composant via le fichier d'index. Cela facilite la recherche et la refactorisation de composants. Si le contenu du composant n'est pas r√©export√© via le fichier racine, nous pouvons le modifier en toute s√©curit√©, car nous savons qu'il n'est pas utilis√© en dehors du contexte de ce composant. Eh bien, Typescript se couvrira en un rien de temps. Le dossier avec le composant a sa propre ¬´interface¬ª: exporte au niveau du module dans le fichier racine, et ses d√©tails d'impl√©mentation ne sont pas divulgu√©s. Par cons√©quent, lors de la refactorisation, vous ne pouvez pas avoir peur d'enregistrer l'interface.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentADesktopLazy = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ComponentADesktop'</span>))
<span class="hljs-keyword">const</span> ComponentAMobileLazy = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ComponentAMobile'</span>))<font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentA = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { isMobile } = props<font></font>
<font></font>
<span class="hljs-comment">//    </span><font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{props.fallback}</span>&gt;</span>
     {isMobile ? (
       <span class="hljs-tag">&lt;<span class="hljs-name">ComponentAMobileLazy</span> {<span class="hljs-attr">...props</span>} /&gt;</span>
     ) : (
       <span class="hljs-tag">&lt;<span class="hljs-name">ComponentADesktopLazy</span> {<span class="hljs-attr">...props</span>} /&gt;</span>
     )}
   <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentA
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En outre, le composant </font></font><code>&lt;ComponentADesktop /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contient l'importation de composants de bureau:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> { DesktopList, UserAuthDesktop, UserInfo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@youla/ui'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> Banner <span class="hljs-keyword">from</span> <span class="hljs-string">'../Banner'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> S <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled.desktop'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentADesktop = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { user, items } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Banner</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">DesktopList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.SideBar</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthDesktop</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.SideBar</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentADesktop
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un composant </font></font><code>&lt;ComponentAMobile /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contient l'importation de composants mobiles:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> { MobileList, MobileTabs, UserAuthMobile } <span class="hljs-keyword">from</span> <span class="hljs-string">'@youla/ui'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> S <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled.mobile'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentAMobile = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { user, items, tabs } = props<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthMobile</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">MobileList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">MobileTabs</span> <span class="hljs-attr">tabs</span>=<span class="hljs-string">{tabs}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentAMobile
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le composant est </font></font><code>&lt;ComponentA /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adaptatif: par l'indicateur, il </font></font><code>isMobile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut d√©cider de la version √† dessiner, ne peut t√©l√©charger que les fichiers requis de mani√®re asynchrone, c'est-√†-dire que les versions mobile et de bureau peuvent √™tre utilis√©es s√©par√©ment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons maintenant le composant </font></font><code>&lt;ComponentB /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dans ce document, nous ne d√©composerons pas profond√©ment la logique mobile et de bureau, nous laisserons toutes les conditions dans le cadre d'une fonction. </font><font style="vertical-align: inherit;">De m√™me, nous ne s√©parerons pas les composants des styles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la structure des dossiers. </font><font style="vertical-align: inherit;">Le fichier racine index.ts r√©exporte simplement </font></font><code>./ComponentB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">./ComponentB<font></font>
- ComponentB.tsx<font></font>
- index.ts<font></font>
- styled.ts<font></font>
</code></pre><br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentB'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fichier ./ComponentB avec le composant lui-m√™me:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> {<font></font>
 DesktopList,<font></font>
 UserAuthDesktop,<font></font>
 UserInfo,<font></font>
 MobileList,<font></font>
 MobileTabs,<font></font>
 UserAuthMobile<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@youla/ui'</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> S <span class="hljs-keyword">from</span> <span class="hljs-string">'./styled'</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ComponentB = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
 <span class="hljs-keyword">const</span> { user, items, tabs, isMobile } = props<font></font>
<font></font>
 <span class="hljs-keyword">if</span> (isMobile) {
   <span class="hljs-keyword">return</span> (
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span> <span class="hljs-attr">isMobile</span>=<span class="hljs-string">{isMobile}</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthMobile</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">MobileList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">MobileTabs</span> <span class="hljs-attr">tabs</span>=<span class="hljs-string">{tabs}</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
   )<font></font>
 }<font></font>
<font></font>
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">S.Wrapper</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.Main</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Banner</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">DesktopList</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.Main</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">S.SideBar</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserAuthDesktop</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">S.SideBar</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">S.Wrapper</span>&gt;</span></span><font></font>
 )<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ComponentB
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons d'estimer les avantages et les inconv√©nients de ces composants. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/l-/px/jil-pxa15xccew0cgnm6zeauch8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, trois arguments pour et contre ont √©t√© aspir√©s du doigt pour chacun d'eux. </font><font style="vertical-align: inherit;">Oui, j'ai remarqu√© que certains crit√®res sont mentionn√©s imm√©diatement dans les avantages et les inconv√©nients: cela a √©t√© fait expr√®s, tout le monde les supprimera du mauvais groupe.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre exp√©rience avec @youla</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre biblioth√®que de composants @ youla / ui, nous essayons de ne pas m√©langer les composants de bureau et mobiles, car il s'agit d'une d√©pendance externe pour beaucoup de nos packages et d'autres. Le cycle de vie de ces composants est le plus long possible, je souhaite les garder aussi fins et l√©gers que possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deux points importants</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† noter </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premi√®rement, plus le fichier JS assembl√© est petit, plus il sera livr√© rapidement √† l'utilisateur, cela est √©vident et tout le monde le sait. Mais cette caract√©ristique n'est importante que pour le premier t√©l√©chargement du fichier, lors de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visites r√©p√©t√©es le</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fichier sera d√©livr√© depuis le cache, et il n'y aura pas de probl√®me de livraison de code.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons ici √† la deuxi√®me raison, qui pourrait bient√¥t devenir, ou est d√©j√† devenue, le principal probl√®me des grandes applications Web. Beaucoup ont d√©j√† devin√©: oui, nous parlons de la </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dur√©e de l'analyse.</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les moteurs modernes comme le V8 peuvent mettre en cache et le r√©sultat de l'analyse, mais jusqu'√† pr√©sent, il ne fonctionne pas tr√®s efficacement. Eddie Osmani a un excellent article sur ce sujet: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://v8.dev/blog/cost-of-javascript-2019 </font></font></a><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vous pouvez √©galement vous abonner au blog V8: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://twitter.com/v8js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est la dur√©e de l'analyse que nous allons r√©duire consid√©rablement, ce qui est particuli√®rement important pour </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les appareils mobiles avec des processeurs faibles</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les packages d'application @ youla-web / app- *, ‚Äã‚Äãle d√©veloppement est plus ¬´orient√© m√©tier¬ª. Et dans un souci de rapidit√© / simplicit√© / pr√©f√©rences personnelles, la d√©cision est choisie que le d√©veloppeur lui-m√™me consid√®re comme la plus correcte dans cette situation. Il arrive souvent que lors du d√©veloppement de petites fonctionnalit√©s MVP, il soit pr√©f√©rable d'√©crire d'abord une option plus simple et plus rapide (&lt;ComponentB /&gt;), dans un tel composant, il y a la moiti√© des lignes. Et, comme nous le savons, plus il y a de code - plus il y a d'erreurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir v√©rifi√© la pertinence de la fonctionnalit√©, il sera possible de remplacer le composant par une version &lt;ComponentA /&gt; plus optimis√©e et productive, si n√©cessaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous conseille √©galement de jeter un ≈ìil au composant. </font><font style="vertical-align: inherit;">Si les interfaces utilisateur des versions mobile et de bureau sont tr√®s diff√©rentes, alors elles devraient peut-√™tre √™tre s√©par√©es, en gardant une logique commune au m√™me endroit. </font><font style="vertical-align: inherit;">Cela vous permettra de vous d√©barrasser de la douleur lors de l'√©criture de CSS complexes, des probl√®mes d'erreurs dans l'un des √©crans lors de la refactorisation ou de la modification d'un autre. </font><font style="vertical-align: inherit;">Et vice versa, si l'interface utilisateur est aussi proche que possible, alors pourquoi faire le travail suppl√©mentaire?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©sumer. </font><font style="vertical-align: inherit;">Nous avons compris la terminologie de l'interface adaptative / r√©active, examin√© plusieurs fa√ßons de d√©terminer la mobilit√© et plusieurs options pour organiser la structure de code du composant adaptatif, et identifi√© les avantages et les inconv√©nients de chacun. </font><font style="vertical-align: inherit;">Certes, une grande partie de ce qui pr√©c√®de √©tait d√©j√† connue de vous, mais la r√©p√©tition est le meilleur moyen de consolider. </font><font style="vertical-align: inherit;">J'esp√®re que vous avez appris quelque chose de nouveau par vous-m√™me. </font><font style="vertical-align: inherit;">La prochaine fois, nous voulons publier une collection de recommandations pour l'√©criture d'applications Web progressives, avec des conseils sur l'organisation, la r√©utilisation et la maintenance du code.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493274/index.html">Plus de 30 recommandations professionnelles concises pour les d√©veloppeurs Android</a></li>
<li><a href="../fr493278/index.html">–ù—É–∂–Ω–æ –ª–∏ –∫—É—Ä–∏—Ç—å –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SARS-CoV-2</a></li>
<li><a href="../fr493282/index.html">Comprendre les strat√©gies r√©seau avec Calico</a></li>
<li><a href="../fr493284/index.html">Kubernetes 1.18: aper√ßu des principales innovations</a></li>
<li><a href="../fr493288/index.html">Cinq citations de programmation expliqu√©es c√©l√®bres</a></li>
<li><a href="../fr493294/index.html">Nous regardons √† l'int√©rieur du circuit int√©gr√© sovi√©tique avec TTL</a></li>
<li><a href="../fr493298/index.html">Registres C ++, m√©taprogrammation et microcontr√¥leur</a></li>
<li><a href="../fr493300/index.html">Calcul du centre de masse pour O (1) √† l'aide d'images int√©gr√©es</a></li>
<li><a href="../fr493302/index.html">Quelles technologies ont d√©j√† √©t√© sollicit√©es pour lutter contre les coronavirus?</a></li>
<li><a href="../fr493304/index.html">D√©velopper un hexapode √† partir de z√©ro (partie 8) - mouvement math√©matique am√©lior√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>