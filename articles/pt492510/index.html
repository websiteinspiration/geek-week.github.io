<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏼 🌤️ 🚁 Módulos ES6 no navegador: eles estão prontos ou não? 👨🏽‍🚀 👩🏽‍🤝‍👩🏻 🤲🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Você já ouviu falar sobre o uso dos módulos ES6 em um navegador? Na verdade, esses são módulos ES6 comuns. Eles se aplicam apenas ao código destinado ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Módulos ES6 no navegador: eles estão prontos ou não?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492510/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você já ouviu falar sobre o uso dos módulos ES6 em um navegador? </font><font style="vertical-align: inherit;">Na verdade, esses são módulos ES6 comuns. </font><font style="vertical-align: inherit;">Eles se aplicam apenas ao código destinado aos navegadores.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/yl/q1/wl/ylq1wlx8jeaaomnc9kwintirrma.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se alguém não sabe - é assim que parece. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há uma página </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">&lt;!--     "module" --&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há um arquivo </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representando um módulo conectado à página:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { doSomething } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.mjs'</span>;<font></font>
<font></font>
doSomething(<span class="hljs-string">'Make me a sandwich'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este módulo, por sua vez, importa a função </font></font><code>doSomething</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do módulo </font></font><code>utils.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> doSomething = <span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'No.'</span>);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os módulos ES6 existem há muitos anos. </font><font style="vertical-align: inherit;">E talvez você esteja pensando em experimentá-los. </font><font style="vertical-align: inherit;">Eu os usei por cerca de um mês em meu próprio projeto. </font><font style="vertical-align: inherit;">Ao mesmo tempo, cheguei à conclusão de que ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suspeita!</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre o suporte do navegador para módulos</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de falar sobre o que entendi, sugiro dar uma olhada no suporte ao navegador para módulos. </font><font style="vertical-align: inherit;">Como estou escrevendo este material no início de 2020, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nível de suporte dos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> módulos é impressionante em 90%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/484/cfd/9e6/484cfd9e669b731f483cfdd99a638777.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte para módulos com navegadores de acordo com caniuse.com,</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
estou muito satisfeito com esses 90% (não levo em consideração as necessidades de 10% dos usuários), embora você possa querer ser mais responsável. </font><font style="vertical-align: inherit;">Mas, mesmo considerando isso, se o seu projeto não foi projetado para o IE, UC ou Opera Mini, esse nível de suporte significa que quase 100% do seu público-alvo poderá trabalhar com o seu projeto sem problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É verdade que o suporte ao navegador para módulos é apenas o começo. </font><font style="vertical-align: inherit;">Aqui, quero encontrar a resposta para três perguntas que surgiram no início de minha jornada em direção aos módulos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O uso de módulos nos navegadores tem vantagens?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E os contras?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenho certeza de que tive uma terceira pergunta, mas agora não consigo me lembrar.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos descobrir ...</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais são as vantagens do uso de módulos nos navegadores?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso é puro JavaScript! </font><font style="vertical-align: inherit;">Sem pipeline de projeto de montagem, sem arquivo de configuração do Webpack de 400 linhas, sem Babel, sem plugins e presets e sem módulos adicionais de 45 npm. </font><font style="vertical-align: inherit;">Somente você e seu código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há algo refrescante na escrita de código que será executado no navegador exatamente na forma em que foi criado. </font><font style="vertical-align: inherit;">Isso pode exigir um pouco mais de esforço, mas o resultado é muito agradável. </font><font style="vertical-align: inherit;">Isto é como dirigir um carro com uma transmissão manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim. </font><font style="vertical-align: inherit;">As vantagens dos módulos ES6 são JavaScript puro, essa é a falta de montagem, configuração do projeto e a rejeição de dependências que se tornaram desnecessárias. </font><font style="vertical-align: inherit;">O quê mais? </font><font style="vertical-align: inherit;">Mais alguma coisa? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não, nada mais.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais são as desvantagens do uso de módulos nos navegadores?</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ParComparação de módulos e empacotadores</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao pensar em usar os módulos ES6 em um navegador, é necessário escolher entre usar módulos e bundlers como Webpack, Parcel ou Rollup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É possível (provavelmente) usar os dois, mas, na realidade, se você planeja executar o código por meio do empacotador, não há razão para usar o design </font></font><code>&lt;script type="module"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para carregar os arquivos do pacote. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, com base no pressuposto de que alguém está considerando a possibilidade de usar módulos ES6 em vez de um empacotador, eis o que ele terá que desistir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minificação do código finalizado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos avançados de JavaScript.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaxe diferente da sintaxe JavaScript (React, TypeScript, etc.).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Módulos Npm.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armazenamento em cache</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere os três primeiros parágrafos desta lista com mais detalhes.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Size Tamanho do arquivo</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tamanho do meu projeto, que usa módulos, é 34 Kb. Como eu não uso a etapa de construção do projeto, o código transmitido pela rede contém nomes de variáveis ​​muito longos; há muitos comentários nele. Além disso, representa um monte de arquivos pequenos, o que não é muito bom em termos de compactação de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se eu colocasse tudo isso em um pacote usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parcel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o tamanho do que sairia seria 18 Kb. Minha calculadora Casual Casio relata que essa é "cerca da metade" do código do projeto no qual o empacotador não é usado. Isso se deve em parte ao fato de o Parcel compactar arquivos, mas também porque os materiais com essa abordagem são melhor compactados usando o gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A compactação de dados chama nossa atenção para outro problema: a maneira como os arquivos são organizados (no sentido de conveniência do desenvolvimento) é diretamente transferida para a maneira como os arquivos são transferidos pela rede. E a maneira como os arquivos são organizados durante o desenvolvimento não corresponde necessariamente à forma como você deseja vê-los no site. Por exemplo, 150 módulos (arquivos) podem fazer sentido enquanto estiver trabalhando em um projeto. E os mesmos materiais transferidos para o navegador podem ser justificados para organizar em 12 pacotes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou explicar essa ideia. Não estou falando do fato de que usar módulos significa que os arquivos não podem ser agrupados e compactados (que isso não pode ser feito é uma ilusão). Só quero dizer que não faz sentido fazer as duas coisas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, aqui está uma observação engraçada. </font><font style="vertical-align: inherit;">No meu aplicativo, até escrever esta seção, foram utilizados módulos (enfatizo!). </font><font style="vertical-align: inherit;">Eu instalei o Parcel para calcular o tamanho correto da montagem. </font><font style="vertical-align: inherit;">E agora não vejo razão para voltar aos módulos normais. </font><font style="vertical-align: inherit;">Bem, isso não é interessante!</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IfeVida sem transpilação</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao longo dos anos, estou acostumado a usar as mais recentes construções de sintaxe JavaScript e a maravilhosa ferramenta Babel, que as transforma em código que todos os navegadores entendem. Eu me acostumei tanto que raramente pensava no suporte ao navegador (é claro, com exceção do DOM e CSS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando eu tentei </font></font><code>type=«module»</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, eu ia fazer tudo sozinho. Meu objetivo era navegadores novos, então achei que poderia usar o JavaScript moderno, ao qual estou acostumado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas a realidade não era tão rósea. Tente responder às seguintes perguntas rapidamente e sem procurar em nenhum lugar. O Edge suporta</font></font><code>flatMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? O Safari suporta atribuição destrutiva (objetos e matrizes)? O Chrome suporta vírgulas após os argumentos da última função? O Firefox suporta exponenciação? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, eu tive que procurar respostas para essas perguntas, realizar testes entre navegadores. Mas eu usei tudo isso por séculos. Em qualquer aplicativo grande o suficiente, isso provavelmente levaria a erros de produção. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso também significa que não poderei usar a inovação JavaScript mais notável desde o advento do método array </font></font><code>slice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- o chamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operador de sequência opcional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Eu usei desenhos mágicos como</font></font><code>prop?.value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aproximadamente um mês (a partir do momento em que a ferramenta Create React App começou a suportá-los sem nenhuma configuração adicional). </font><font style="vertical-align: inherit;">Mas já é inconveniente para mim trabalhar sem eles.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Cargas de armazenamento em cache</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O armazenamento em cache foi para mim o maior obstáculo. De fato, o fato de que a solução para o problema de armazenamento em cache se mostrou bastante interessante acabou sendo a principal razão pela qual decidi escrever este material. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como você tem certeza, quando os materiais são processados ​​usando um empacotador, cada um dos arquivos resultantes recebe um nome exclusivo - mais ou menos </font></font><code>index.38fd9e.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. O conteúdo de um arquivo com esse nome nunca (nunca) muda. Portanto, ele pode ser armazenado em cache pelo navegador por um período ilimitado. Se esse arquivo for baixado uma vez, você não precisará baixá-lo novamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este é um sistema incrível - a menos que você tente encontrar a resposta para a pergunta de como limpar o cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os módulos são carregados usando um design como</font></font><code>&lt;script type="module" src="index.mjs"&gt;&lt;/script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O hash no nome do arquivo não é usado. </font><font style="vertical-align: inherit;">Como, nessa situação, ele deve informar o navegador sobre onde baixá-lo </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- do cache ou da rede? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deve-se notar que é quase possível fazer o cache funcionar aceitável, mas será necessário algum esforço. </font><font style="vertical-align: inherit;">Aqui está o que você precisa para isso:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você deve definir o título de todas as respostas </font></font><code>cache-control</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para um valor </font></font><code>no-cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Incrivelmente, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sem cache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> não significa "não armazenar em cache". </font><font style="vertical-align: inherit;">Isso significa que o arquivo deve ser armazenado em cache, mas o arquivo não deve ser "usado para satisfazer uma solicitação subsequente sem verificação bem-sucedida no servidor de origem".</font></font></li>
<li>    ETag.    —  ()   , ,   ,    .  , <code>38fd9e</code>      .</li>
<li>   CDN-  ,   .     ETag       .     .   CDN-   .       (     ETag)      . (, ,     Firebase).</li>
<li>  -,    ,  «  »  .        ,     ,  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, quando um visitante visita novamente o site, o navegador diz: “Preciso fazer o download do arquivo </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Vejo que esse arquivo já existe no meu cache, é ETag </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Solicitarei esse arquivo do servidor, mas direi a ele para enviá-lo apenas se o ETag dele não for </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. " O responsável pelo serviço interceptará essa solicitação, ignorará a ETag e a retornará </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do cache (esse arquivo entrou no cache quando a página foi carregada pela última vez). Em seguida, o responsável pelo serviço redirecionará a solicitação para o servidor. O servidor retornará uma mensagem informando que o arquivo não foi alterado ou um arquivo que será armazenado no cache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na minha opinião, tudo isso é muito problemático. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, se você estiver interessado, o código do trabalhador do serviço:</font></font><br>
<br>
<pre><code class="javascript hljs">self.addEventListener(<span class="hljs-string">'fetch'</span>, e =&gt; {<font></font>
&nbsp;&nbsp;e.respondWith(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">async</span> (</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> cacheResponse = <span class="hljs-keyword">await</span> caches.match(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   (),   </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">// (ETag-    )</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(e.request).then(<span class="hljs-function"><span class="hljs-params">fetchResponse</span> =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;caches<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.open(CACHE_NAME)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.put(e.request, fetchResponse));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (cacheResponse) <span class="hljs-keyword">return</span> cacheResponse;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> fetch(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})()<font></font>
&nbsp;&nbsp;);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu estava com preguiça, então não estudei e não usei a propriedade </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FetchEvent.navigationPreload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mais </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">recente</font></a><font style="vertical-align: inherit;"> . O fato é que naquela época eu gastei mais tempo armazenando em cache do que escrevendo um aplicativo (para sua informação, gastei 10 e 11 horas nesses assuntos, respectivamente). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, quero observar que a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proposta do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "cartão de importação" visa solucionar alguns dos problemas descritos acima. Ele permite que você organize algo como mapeamento </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em </font></font><code>index.38fd9e.mj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s. Porém, para gerar um hash, você precisa de algum tipo de pipeline de montagem, os cartões de importação precisarão ser incorporados no arquivo HTML. Isso significa que um bundler é necessário aqui ... Na verdade, nessa situação, os módulos não são mais necessários no navegador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, embora tenha sido interessante entender tudo isso, ele pode ser comparado com a maneira como eu dirigi em todos os lugares em um monociclo por um ano inteiro. </font><font style="vertical-align: inherit;">Eu não vou mais fazer isso.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas provavelmente nem todo mundo usa empacotadores?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu escrevi este material na suposição de que todo mundo escreve código em módulos, usando construções </font></font><code>import/export</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e, em seguida, coleciona o código em pacotes de produção usando Webpack, Grunt, Gulp ou algo assim. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem desenvolvedores que não usam empacotadores? </font><font style="vertical-align: inherit;">Existe alguém que coloca seu código JavaScript em vários arquivos e os envia para produção sem agrupar? </font><font style="vertical-align: inherit;">Talvez uma dessas pessoas seja você? </font><font style="vertical-align: inherit;">Se assim for, eu gostaria de saber tudo sobre sua vida.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumário</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esforço-me para tomar todas as decisões sérias, como a escolha entre módulos e empacotadores, com base nos principais princípios do desenvolvimento efetivo. Isso é produtividade e qualidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, o uso de módulos nos navegadores não contribui para um ou outro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se amanhã eu começar a trabalhar em um novo projeto, então, na minha cabeça, não tenho dúvidas sobre a execução do bom e velho aplicativo create-react-app. Todas as configurações iniciais levarão cerca de trinta segundos e, embora o tamanho inicial do projeto de 40 Kb seja um pouco grande, para a maioria dos sites, isso não terá nenhum papel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui está uma situação diferente. Suponha que eu precise reunir um pouco de HTML / CSS e JavaScript para algum tipo de experimento, e esse experimento seria um projeto que incluísse um pouco mais de arquivos do que alguns. Se, enquanto trabalhava nesse projeto, não planejava gastar tempo configurando o sistema para construí-lo, provavelmente usaria os módulos no navegador. E então - se eu não me importava com o desempenho deste projeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gostaria de saber como o Webpack e suas ferramentas relacionadas funcionam com os módulos ES6 em um navegador. Acredito que no futuro, quando a proposta de "cartões de importação" receber suporte suficiente, os empacotadores provavelmente os usarão como um mecanismo para abstrair hashes desagradáveis ​​que são usados ​​hoje.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você já usou os módulos ES6 no seu navegador?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt492500/index.html">Science Garage em russo. Experiência na tradução de um programa americano</a></li>
<li><a href="../pt492502/index.html">MIP * = RE: evidências de época do campo da ciência da computação que causaram o efeito dominó na física e na matemática</a></li>
<li><a href="../pt492504/index.html">O que acontece quando um módulo JS é importado duas vezes?</a></li>
<li><a href="../pt492506/index.html">3 maneiras de renderizar grandes listas em Angular</a></li>
<li><a href="../pt492508/index.html">Livro Kubernetes para DevOps</a></li>
<li><a href="../pt492512/index.html">CSS: aventuras na terra da translucidez</a></li>
<li><a href="../pt492514/index.html">Como estabelecer um fluxo de documentos eletrônicos juridicamente significativo de contrapartes na Rússia e no Cazaquistão?</a></li>
<li><a href="../pt492518/index.html">O surto de vírus requer trabalho remoto, o que significa assinatura digital de documentos</a></li>
<li><a href="../pt492520/index.html">Modelagem 3D parametrizada do copo do rolamento no nanoCAD Plus 20</a></li>
<li><a href="../pt492522/index.html">Comunicação de equipe remota</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>