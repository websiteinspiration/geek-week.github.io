<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¼ ğŸ¢ ğŸ¤’ HighLoad ++, Mikhail Makurov, Maxim Chernetsov (Intersvyaz): Zabbix, 100kNVPS pada satu server ğŸ”® ğŸ‘³ğŸ¿ ğŸ¤¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Konferensi HighLoad ++ berikutnya akan diadakan pada 6 dan 7 April 2020 di St. Petersburg. Rincian dan tiket di sini . HighLoad ++ Moscow 2018. Moscow...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++, Mikhail Makurov, Maxim Chernetsov (Intersvyaz): Zabbix, 100kNVPS pada satu server</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/486540/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konferensi HighLoad ++ berikutnya akan diadakan pada 6 dan 7 April 2020 di St. Petersburg. Rincian dan tiket di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . HighLoad ++ Moscow 2018. Moscow Hall. 9 November, 3 malam Abstrak dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sa/dm/mu/sadmmupp8vt5l5vl5obukgut36a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Pemantauan - online dan analitik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Keterbatasan utama platform ZABBIX. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Solusi untuk meningkatkan penyimpanan analitik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Optimalisasi server ZABBIX. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Optimasi UI. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Pengalaman dalam mengoperasikan sistem dengan beban lebih dari 40k NVPS. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Kesimpulan singkat.</font></font><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikhail Makurov (selanjutnya - MM):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Halo semuanya! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maxim Chernetsov (selanjutnya - MCH):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Selamat siang! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Izinkan saya memperkenalkan Maxim. Max adalah insinyur yang berbakat, networker terbaik yang saya tahu. Maxim berurusan dengan jaringan dan layanan, pengembangan dan pengoperasian mereka. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uj/pn/q6/ujpnq61idhrrwq2dszdhb3hxjza.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan saya ingin berbicara tentang Michael. Michael adalah pengembang C. Dia menulis beberapa solusi pemrosesan lalu lintas yang sangat dimuat untuk perusahaan kami. Kami tinggal dan bekerja di Ural, di kota petani Chelyabinsk yang parah, di perusahaan Intersvyaz. Perusahaan kami adalah penyedia layanan Internet dan televisi kabel untuk satu juta orang di 16 kota. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dan patut dikatakan bahwa Intersvyaz jauh lebih dari sekedar penyedia, itu adalah perusahaan IT. </font><font style="vertical-align: inherit;">Sebagian besar keputusan kami dibuat oleh departemen TI kami. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari server yang memproses lalu lintas, ke pusat panggilan dan aplikasi seluler. </font><font style="vertical-align: inherit;">Ada sekitar 80 orang di departemen TI dengan kompetensi yang sangat, sangat beragam.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang Zabbix dan arsitekturnya</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan sekarang saya akan mencoba untuk membuat catatan pribadi dan mengatakan dalam satu menit apa itu Zabbix (selanjutnya - "Zabbiks"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix memposisikan dirinya sebagai sistem pemantauan "out of the box" di tingkat perusahaan. </font><font style="vertical-align: inherit;">Ini memiliki banyak fitur penyederhanaan hidup: aturan eskalasi lanjutan, API untuk integrasi, pengelompokan, dan deteksi otomatis host dan metrik. </font><font style="vertical-align: inherit;">Di Zabbix ada yang disebut alat penskalaan - proksi. </font><font style="vertical-align: inherit;">Zabbix adalah sistem sumber terbuka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara singkat tentang arsitektur. </font><font style="vertical-align: inherit;">Kita dapat mengatakan bahwa itu terdiri dari tiga komponen:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oc/fn/xv/ocfnxvdx0gy8qi4055lipyifl1q.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server. </font><font style="vertical-align: inherit;">Itu ditulis dalam C. </font><font style="vertical-align: inherit;">Dengan pemrosesan yang agak rumit dan pengiriman informasi antar aliran. </font><font style="vertical-align: inherit;">Semua pemrosesan terjadi di dalamnya: dari menerima hingga menyimpan ke basis data.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua data disimpan dalam database. </font><font style="vertical-align: inherit;">Zabbix mendukung MySQL, PostreSQL, dan Oracle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antarmuka web ditulis dalam PHP. </font><font style="vertical-align: inherit;">Pada kebanyakan sistem, ia hadir dengan server Apache, tetapi bekerja lebih efisien dalam bundel nginx + php.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hari ini kami ingin menceritakan dari perusahaan kami satu kisah yang berkaitan dengan Zabbix ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kisah hidup perusahaan Intersvyaz. </font><font style="vertical-align: inherit;">Apa yang kita miliki dan apa yang dibutuhkan?</font></font></h3><br>
<img src="https://habrastorage.org/webt/d2/cr/rk/d2crrkodjpn2arv0aojibu6vsq4.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 atau 6 bulan lalu. Sekali sepulang kerja ... </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Misha, halo! Senang saya berhasil menangkap Anda - ada percakapan. Kami lagi memiliki masalah dengan pemantauan. Selama kecelakaan besar, semuanya melambat, dan tidak ada informasi tentang status jaringan. Sayangnya, ini bukan kali pertama diulang. Saya membutuhkan bantuan Anda. Mari kita buat pemantauan kita bekerja dalam keadaan apa pun! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tapi mari kita sinkronisasi dulu. Saya belum mencari di sana selama beberapa tahun. Sejauh yang saya ingat, kami menolak Nagios dan beralih ke Zabbix 8 tahun yang lalu. Dan sekarang kita tampaknya memiliki 6 server yang kuat dan sekitar selusin proksi. Apakah saya membingungkan sesuatu? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Hampir. 15 server, beberapa di antaranya adalah mesin virtual. Yang paling penting, ini tidak menyelamatkan kita pada saat kita sangat membutuhkannya. Seperti kecelakaan - server melambat dan tidak ada yang terlihat. Kami mencoba mengoptimalkan konfigurasi, tetapi ini tidak memberikan keuntungan kinerja yang optimal. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Begitu. Apakah Anda melihat sesuatu, apakah Anda menggali sesuatu dari diagnosis? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Hal pertama yang harus Anda tangani hanyalah database. </font><font style="vertical-align: inherit;">MySQL terus dimuat, mempertahankan metrik baru, dan ketika Zabbix mulai menghasilkan banyak acara, database masuk sendiri secara harfiah selama beberapa jam. </font><font style="vertical-align: inherit;">Saya sudah memberi tahu Anda tentang mengoptimalkan konfigurasi, tetapi secara harfiah tahun ini kami memperbarui perangkat keras: ada lebih dari seratus gigabytes memori di server dan disk array pada SSD RAID-ahs - tidak ada gunanya menumbuhkannya secara linear. </font><font style="vertical-align: inherit;">Apa yang kita lakukan? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Begitu. </font><font style="vertical-align: inherit;">Secara umum, MySQL adalah database LTP. </font><font style="vertical-align: inherit;">Tampaknya, itu tidak lagi cocok untuk menyimpan arsip metrik ukuran kita. </font><font style="vertical-align: inherit;">Mari kita cari tahu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ayo!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrasi Zabbix dan Clickhouse sebagai hasil dari hackathon</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah beberapa waktu, kami menerima data menarik: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2r/vp/of/2rvpofn2alwwhizhv4e7qrwhpsm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagian besar ruang dalam basis data kami ditempati oleh arsip metrik dan kurang dari 1% digunakan untuk konfigurasi, templat, dan pengaturan. </font><font style="vertical-align: inherit;">Pada saat itu, selama lebih dari setahun sekarang kami telah mengoperasikan solusi Big data berdasarkan Clickhouse. </font><font style="vertical-align: inherit;">Arah gerakan itu jelas bagi kami. </font><font style="vertical-align: inherit;">Di Hackathon musim semi kami, ia menulis integrasi Zabbix dengan Clickhouse untuk server dan frontend. </font><font style="vertical-align: inherit;">Pada saat itu, Zabbix sudah memiliki dukungan untuk ElasticSearch, dan kami memutuskan untuk membandingkannya.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bg/jv/hq/bgjvhq9lwget5l-hy1xt9zz2mvo.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bandingkan Clickhouse dan Elasticsearch</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sebagai perbandingan, kami menghasilkan beban yang sama dengan yang disediakan server Zabbix dan melihat bagaimana sistem akan berperilaku. Kami menulis data dalam batch 1000 baris, menggunakan CURL. Kami sebelumnya menyarankan bahwa Clickhouse akan lebih efektif untuk memuat profil yang Zabbix lakukan. Hasilnya bahkan melebihi harapan kami: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/iz/pj/zzizpjgv0rf9zjuuasv7mds7is8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah kondisi pengujian yang sama, Clickhouse menulis data tiga kali lebih banyak. Pada saat yang sama, kedua sistem mengkonsumsi sangat efisien (sejumlah kecil sumber daya) saat membaca data. Tetapi "Elastix" membutuhkan sejumlah besar prosesor saat merekam:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/iz/pj/zzizpjgv0rf9zjuuasv7mds7is8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara total, Clickhouse secara signifikan melebihi Elastix dalam konsumsi dan kecepatan prosesor. Pada saat yang sama, karena kompresi data, "Clickhouse" menggunakan 11 kali lebih sedikit pada hard disk dan melakukan sekitar 30 kali lebih sedikit operasi disk: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/0u/ce/yf0uceb3lvfa4e3mdwz1fsgufkw.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, bekerja dengan subsistem disk di "Clickhouse" sangat efektif. Di bawah basis, Anda dapat menggunakan disk SATA besar dan mendapatkan kecepatan tulis ratusan ribu baris per detik. Sistem "out of the box" mendukung sharding, replikasi, sangat mudah dikonfigurasi. Kami sangat senang dengan operasinya selama setahun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengoptimalkan sumber daya, Anda dapat menginstal "Clickhouse" di sebelah basis utama yang ada dan dengan demikian menghemat banyak waktu prosesor dan operasi disk. Kami mengeluarkan arsip metrik ke kluster "Clickhouse" yang ada:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/xr/p9/quxrp9ah4u-nhwlbkkcgynf2to0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membongkar basis data MySQL utama sehingga kami dapat menggabungkannya di mesin yang sama dengan server Zabbix dan meninggalkan server khusus untuk MySQL.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara kerja polling di Zabbix?</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 bulan lalu </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Nah, Anda bisa melupakan masalah dengan pangkalan? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pasti! Masalah lain yang perlu kita selesaikan adalah pengumpulan data yang lambat. Sekarang semua dari 15 proxy kami kelebihan beban dengan SNMP dan proses pemungutan suara. Dan tidak ada yang lain selain menyiapkan server baru dan baru. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hebat. Tapi pertama-tama katakan padaku bagaimana polling bekerja di Zabbix. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Singkatnya, ada 20 jenis metrik dan selusin cara untuk mendapatkannya. Zabbix dapat mengumpulkan data baik dalam mode "permintaan-respons", atau mengharapkan data baru melalui "Trapper Interface". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f1/dd/jc/f1ddjcw--iidqz7psmv82znkwk0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu dicatat bahwa dalam Zabbix asli metode ini (Trapper) adalah yang tercepat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada proksi untuk penyeimbangan beban:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/n3/2v/qln32vd8mjkz2xbe0bowbswrpsu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proxy dapat melakukan fungsi pengumpulan yang sama dengan server Zabbix, menerima tugas darinya dan mengirim metrik yang dikumpulkan melalui antarmuka Trapper. </font><font style="vertical-align: inherit;">Ini adalah metode penyeimbangan beban yang direkomendasikan secara resmi. </font><font style="vertical-align: inherit;">Juga, proksi berguna untuk memantau infrastruktur jarak jauh yang bekerja melalui NAT atau saluran lambat: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/uv/mh/bauvmh-9-mcmokuu7ldhtx59--0.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Semuanya jelas dengan arsitekturnya. </font><font style="vertical-align: inherit;">Kita harus melihat sumbernya ... </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa hari kemudian</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kisah tentang bagaimana nmap fping menang</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sepertinya saya menggali sesuatu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Katakan padaku! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya menemukan bahwa selama pemeriksaan ketersediaan, Zabbix melakukan pemeriksaan hingga 128 host sekaligus. Saya mencoba meningkatkan angka ini menjadi 500 dan menghapus interval antar paket dalam ping (ping) mereka - ini meningkatkan kinerja dengan faktor dua. Tapi saya ingin jumlah besar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dalam praktik saya, kadang-kadang saya harus memeriksa ketersediaan ribuan host, dan saya belum melihat sesuatu yang lebih cepat daripada nmap. Saya yakin ini adalah cara tercepat. Ayo kita coba! Anda perlu meningkatkan jumlah host secara signifikan dalam satu iterasi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Periksa lebih dari lima ratus? 600? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Setidaknya beberapa ribu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Baik. Hal terpenting yang ingin saya katakan: Saya menemukan bahwa sebagian besar pemungutan suara di Zabbix dilakukan secara serempak. Kita harus mengulanginya secara tidak sinkron. Kemudian, kami dapat secara dramatis meningkatkan jumlah metrik yang dikumpulkan oleh para pemberi suara, terutama jika kami menambah jumlah metrik dalam satu iterasi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hebat! Dan kapan? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Seperti biasa, kemarin. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami membandingkan kedua versi fping dan nmap:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qo/du/ii/qoduiid8hzk_wy8sxvgityvungo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada sejumlah besar host, nmap diharapkan hingga lima kali lebih efisien. </font><font style="vertical-align: inherit;">Karena nmap hanya memeriksa fakta ketersediaan dan waktu respons, kami mentransfer perhitungan kehilangan ke pemicu dan secara signifikan mengurangi interval pemeriksaan ketersediaan. </font><font style="vertical-align: inherit;">Kami menemukan jumlah host yang optimal untuk nmap di wilayah 4 ribu per iterasi. </font><font style="vertical-align: inherit;">Nmap memungkinkan kami mengurangi biaya CPU untuk pemeriksaan ketersediaan tiga kali dan mengurangi interval dari 120 detik menjadi 10.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimalisasi polling</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Lalu kami masuk untuk pollers. Kami terutama tertarik pada penghapusan SNMP dan agen. Di Zabbix, pemungutan suara dilakukan secara serempak dan langkah-langkah khusus diambil untuk meningkatkan efisiensi sistem. Dalam mode sinkron, ketidaktersediaan host menyebabkan degradasi polling yang signifikan. Ada seluruh sistem negara, ada proses khusus - yang disebut tidak dapat dijangkau-pollers yang hanya bekerja dengan host yang tidak dapat diakses: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3g/h1/fm/3gh1fmfnq3nqxkpwsow7j4h80ra.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah komentar yang menunjukkan matriks negara, semua kompleksitas sistem transisi yang diperlukan agar sistem tetap efektif. Selain itu, jajak pendapat sinkron itu sendiri agak lambat:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h7/0r/tm/h70rtmvjonmj3itlmq4wk44vpr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itulah sebabnya ribuan utas poller pada selusin proxy tidak dapat mengumpulkan jumlah data yang diperlukan untuk kami. Implementasi asinkron memecahkan tidak hanya masalah dengan jumlah utas, tetapi juga secara signifikan menyederhanakan sistem keadaan host yang tidak dapat diakses, karena untuk setiap nomor yang diperiksa dalam satu iterasi polling, waktu tunggu maksimum adalah 1 timeout: Selain </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/te/bj/retebjsm9vthvrjy7rmpobeiwqa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
itu, kami memodifikasi dan meningkatkan sistem polling untuk SNMP- pertanyaan. Faktanya adalah bahwa sebagian besar tidak dapat menanggapi beberapa permintaan SNMP secara bersamaan. Oleh karena itu, kami membuat mode hibrid ketika polling SNMP dari host yang sama melakukan secara asinkron: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mj/9a/sj/mj9asjfzaisviljstpkdjpvmnya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini dilakukan untuk seluruh bundel host. Mode ini pada akhirnya tidak lebih lambat dari sepenuhnya asinkron, karena polling satu setengah ratus nilai SNMP masih jauh lebih cepat dari 1 timeout.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eksperimen kami menunjukkan bahwa jumlah permintaan optimal dalam satu iterasi adalah sekitar 8 ribu dengan pemungutan suara SNMP. </font><font style="vertical-align: inherit;">Secara total, transisi ke mode asinkron memungkinkan untuk mempercepat kinerja pemungutan suara sebanyak 200 kali, beberapa ratus kali. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Optimalisasi polling yang diperoleh menunjukkan bahwa kami tidak hanya dapat menghilangkan semua proxy, tetapi juga mengurangi interval untuk banyak pemeriksaan, dan proxy tidak akan diperlukan sebagai cara untuk berbagi beban. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekitar tiga bulan lalu</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubah arsitektur - tambah beban!</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Baik, Max, sudah saatnya menjadi produktif? Saya membutuhkan server yang kuat dan insinyur yang baik. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, kami berencana. Sudah waktunya untuk turun pada 5.000 metrik per detik. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pagi setelah peningkatan </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Misha, kami memperbarui, tetapi memutar kembali di pagi hari ... Tebak kecepatan apa yang Anda raih? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ribuan 20 maksimum. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, 25! Sayangnya, kita berada di tempat kita mulai. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jadi? Apakah Anda mendapatkan diagnostik? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya tentu saja! Di sini, misalnya, atasan yang menarik: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6c/zv/6s/6czv6sdkoykmdkm0vn-sddnbbpw.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mari kita lihat. Saya melihat bahwa kami mencoba sejumlah besar jajak pendapat: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qb/a0/cl/qba0clfwpherpsufnk_7fbn5ioy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi pada saat yang sama kami tidak dapat memanfaatkan sistem bahkan di tengah jalan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sp/wv/8b/spwv8blrzyggfwo5ps-objpypak.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kinerja keseluruhan cukup kecil, sekitar 4 ribu metrik per detik: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tt/6o/zr/tt6ozrt2ortiof4kckeghltzrnq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah ada hal lain? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, salah satu dari polling: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p8/ny/y3/p8nyy3kb_ffjhsjynlpz4wjfh8w.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jelas terlihat di sini bahwa proses pemungutan suara sedang menunggu "semaphore". Ini adalah kunci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z7/ks/mh/z7ksmh8kes9yc23tm0vuyu5g8r8.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak jelas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Lihat, ini seperti situasi di mana sekelompok utas berusaha untuk bekerja dengan sumber daya yang hanya dapat bekerja satu per satu. Maka yang bisa mereka lakukan adalah membagikan sumber ini berdasarkan waktu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/in/ce/mo/incemofethgxpp3fwyabr8kstd4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan total produktivitas bekerja dengan sumber daya semacam itu dibatasi oleh kecepatan satu inti: Ada </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oq/oh/9f/oqoh9fqs9ppftn5mab3aivoo2nq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dua cara untuk menyelesaikan masalah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mutakhirkan setrika mesin, alihkan ke kernel yang lebih cepat:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/io/bd/zi/iobdziopu3g_vkfoengg2zhhcro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atau ubah arsitektur dan </font><font style="vertical-align: inherit;">, pada saat yang sama </font><font style="vertical-align: inherit;">, beban: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/sl/wt/nuslwtjkx-poqob5ciqyyfifq48.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ngomong-ngomong, kami akan menggunakan lebih sedikit core pada mesin uji daripada pada mesin pertarungan, tetapi mereka akan 1,5 kali lebih cepat dalam frekuensi per core! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Apakah itu jelas? </font><font style="vertical-align: inherit;">Perlu untuk melihat kode server.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jalur Data di Zabbix Server</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Untuk memahami, kami mulai menganalisis bagaimana data dikirimkan di dalam server Zabbix: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/iu/a2/v9iua26a6om3flgzj_vb3te0hak.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gambar keren, bukan? Mari kita lalui langkah demi langkah untuk sedikit banyak memperjelas. Ada aliran dan layanan yang bertanggung jawab untuk mengumpulkan data: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h3/m9/kt/h3m9ktuwhpgwe1g4mbqjiw8l_zs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka mentransfer metrik yang dikumpulkan melalui soket ke manajer Preprocessor, di mana mereka di-antri: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9d/ct/fv/9dctfvdiw2zaves1vn34gliuvmu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Preprocessor-manager â€mentransfer data ke pekerjanya yang menjalankan instruksi preprocessing dan mengembalikannya melalui soket yang sama: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ma/qd/ss/maqdssje-vzlzzpfzl0x2cuthwo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, preprocessor -Manager menyimpannya dalam cache riwayat:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/9q/vw/5r9qvwyriydt0pcroma7n-14fsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari sana, mereka diambil oleh sinkron riwayat yang menjalankan cukup banyak fungsi: misalnya, menghitung pemicu, mengisi cache nilai dan, yang paling penting, menyimpan metrik di toko riwayat. </font><font style="vertical-align: inherit;">Secara umum, prosesnya rumit dan sangat membingungkan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f7/o8/ih/f7o8ihzf_g5_2ecganu1t0zoss0.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hal pertama yang kami lihat adalah sebagian besar utas bersaing untuk apa yang disebut "cache konfigurasi" (area memori tempat semua konfigurasi server disimpan). </font><font style="vertical-align: inherit;">Terutama banyak kunci dibuat oleh aliran yang bertanggung jawab untuk pengumpulan data: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/oo/48/baoo48qthdg_pcp0ojgqh0de5us.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... karena konfigurasi menyimpan tidak hanya metrik dengan parameternya, tetapi juga antrian, dari mana para pemberi informasi mengambil informasi tentang apa yang harus dilakukan selanjutnya. </font><font style="vertical-align: inherit;">Ketika ada banyak poller, dan satu blok konfigurasi, sisanya menunggu permintaan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/zb/np/y5zbnpqumrszencyhaasflytwvm.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Poller tidak boleh konflik</font></font></h3><br>
<img src="https://habrastorage.org/webt/kw/11/4f/kw114ff5k91eqlycs-yg8p8bmem.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, hal pertama yang kami lakukan adalah membagi antrian menjadi 4 bagian dan memungkinkan para pemungut suara untuk memblokir antrian ini dengan aman, bagian-bagian ini pada saat yang sama: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/gi/xu/lagixuseh1aghovklgd6m3blkxu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini menghapus kompetisi untuk cache konfigurasi, dan kecepatan pollers meningkat secara signifikan. </font><font style="vertical-align: inherit;">Tapi kemudian kami dihadapkan dengan fakta bahwa manajer preprocessor mulai mengumpulkan antrian pekerjaan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/0c/4i/ui0c4i7aae8kqdvkdtorchzft-y.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manajer preprosesor harus dapat memprioritaskan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini terjadi ketika dia kurang produktivitas. </font><font style="vertical-align: inherit;">Kemudian yang bisa dia lakukan adalah mengumpulkan permintaan dari proses pengumpulan data dan menambahkan buffer mereka sampai dia memakan semua memori dan crash: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9y/iy/oz/9yiyozxavyibcw8pog3tidwy-xc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengatasi masalah ini, kami menambahkan soket kedua, yang dialokasikan khusus untuk pekerja: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rb/sz/25/rbsz25axpkn6a832h9k7otp9je4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian , preprocessor-manager mendapat kesempatan untuk memprioritaskan pekerjaannya dan jika buffer bertambah, tugasnya adalah memperlambat makan, memberi pekerja kesempatan untuk mengambil buffer ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/og/cg/qiogcgztt1an1ewlrear7oqxt7g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian kami menemukan bahwa salah satu alasan perlambatan adalah karena para pekerja sendiri bersaing untuk </font><font style="vertical-align: inherit;">sumber daya vital untuk pekerjaan mereka. </font><font style="vertical-align: inherit;">Kami mendaftarkan masalah ini dengan perbaikan bug, dan dalam versi baru Zabbix, masalah tersebut telah terpecahkan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yd/6q/lr/yd6qlrqamuxreroffkeracyrnim.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menambah jumlah soket - kami mendapatkan hasilnya</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih lanjut, manajer preprocessor sendiri menjadi tautan sempit, karena merupakan utas tunggal. </font><font style="vertical-align: inherit;">Itu bertumpu pada kecepatan inti, memberikan kecepatan maksimum sekitar 70 ribu metrik per detik: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uk/s1/2_/uks12_i65kx3ohfqdfmvedyqdqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, kami membuat empat, dengan empat set soket, pekerja: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/-u/ws/qt-uwsmlriplii491ao0we3jhg4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan ini memungkinkan kami untuk meningkatkan kecepatan hingga sekitar 130 ribu metrik: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/vp/cf/qlvpcfggoinhdxc4dfkniaz9po8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertumbuhan non-linearitas dijelaskan oleh fakta bahwa ada persaingan untuk cache. cerita. </font><font style="vertical-align: inherit;">Baginya, 4 manajer praprosesor dan penyelundup sejarah berkompetisi. </font><font style="vertical-align: inherit;">Pada titik ini, kami menerima sekitar 130 ribu metrik per detik pada mesin uji, menggunakannya sekitar 95% pada prosesor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/7l/mh/yo7lmhcfcdbhek5blp5xdz0osfy.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekitar 2,5 bulan lalu</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penolakan komunitas snmp meningkatkan NVP satu setengah kali</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Max, saya perlu mesin uji baru! Kami tidak lagi cocok dengan yang sekarang. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan sekarang apa? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sekarang - 130k NVP dan prosesor "rak". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Wow! Keren! Tunggu, saya punya dua pertanyaan. Menurut perhitungan saya, kebutuhan kita adalah di wilayah 15-20 ribu metrik per detik. Mengapa kita membutuhkan lebih banyak? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya ingin menyelesaikan pekerjaan sampai akhir. Saya ingin melihat seberapa banyak kita dapat keluar dari sistem ini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tapi ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tapi itu tidak berguna untuk bisnis. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Begitu. Dan pertanyaan kedua: apa yang kita miliki sekarang, dapatkah kita menghidupi diri sendiri, tanpa bantuan pengembang? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Aku tidak berpikir. Mengubah cache konfigurasi adalah masalah. Ini berurusan dengan perubahan di sebagian besar utas dan sulit untuk dipertahankan. Kemungkinan besar, mendukungnya akan sangat sulit. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Maka Anda membutuhkan beberapa alternatif. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ada opsi seperti itu. Kita dapat beralih ke core cepat, sambil meninggalkan sistem penguncian yang baru. Kami masih mendapatkan kinerja 60-80 ribu metrik. Dalam hal ini, kita dapat meninggalkan sisa kode. Clickhouse, polling asinkron akan bekerja. Dan itu akan mudah dipertahankan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hebat! Saya mengusulkan untuk memikirkan ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah mengoptimalkan sisi server, kami akhirnya dapat menjalankan kode baru menjadi produktif. </font><font style="vertical-align: inherit;">Kami mengabaikan sebagian perubahan demi beralih ke mesin dengan kernel cepat dan meminimalkan jumlah perubahan dalam kode. </font><font style="vertical-align: inherit;">Kami juga menyederhanakan konfigurasi dan, jika mungkin, mengabaikan makro dalam elemen data, karena mereka adalah sumber kunci tambahan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bk/v7/tp/bkv7tps-i9usalann4sbqpdbkqm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, penolakan makro komunitas snmp, yang sering ditemukan dalam dokumentasi dan contoh, dalam kasus kami memungkinkan kami untuk mempercepat NVP tambahan sekitar 1,5 kali. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah dua hari di produksi</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hapus sembulan riwayat kejadian</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Misha, kami menggunakan sistem selama dua hari, dan semuanya berfungsi. Tetapi hanya ketika semuanya bekerja! Kami telah merencanakan pekerjaan dengan transfer segmen jaringan yang cukup besar, dan sekali lagi dengan tangan kami memeriksa bahwa itu telah meningkat, bahwa itu tidak. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak mungkin! Kami memeriksa semuanya 10 kali. Server bahkan memproses aksesibilitas jaringan secara instan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, saya mengerti segalanya: server, pangkalan, atas, austat, log - semuanya cepat ... Tapi kami melihat antarmuka web, dan di sana kami memiliki prosesor "di rak" di server dan ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/un/p2/vjunp2evh3whasvpw4hwsipeshk.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Begitu. Ayo tonton webnya. Kami menemukan bahwa dalam situasi di mana terdapat sejumlah besar insiden aktif, sebagian besar widget operasional mulai bekerja sangat lambat:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/vw/kz/nzvwkzfbeg-4r1iue0y4178eg2q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alasannya adalah generasi sembulan dengan riwayat insiden yang dihasilkan untuk setiap item dalam daftar. </font><font style="vertical-align: inherit;">Oleh karena itu, kami menolak untuk menghasilkan windows ini (berkomentar 5 baris dalam kode), dan ini memecahkan masalah kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Waktu pemuatan widget, bahkan ketika sepenuhnya tidak dapat diakses, dikurangi dari beberapa menit menjadi dapat diterima selama 10-15 detik, dan riwayat masih dapat dilihat dengan mengklik waktu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/dc/4l/hudc4lsz_skbshg7jphleuprc4a.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah bekerja. </font><font style="vertical-align: inherit;">2 bulan lalu </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Misha, kamu mau pergi? </font><font style="vertical-align: inherit;">Kita harus bicara. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak akan. </font><font style="vertical-align: inherit;">Lagi sesuatu dengan Zabbix? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Oh tidak, santai! </font><font style="vertical-align: inherit;">Saya hanya ingin mengatakan: semuanya bekerja, terima kasih! </font><font style="vertical-align: inherit;">Bir denganku.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix efektif</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix adalah sistem dan fungsi yang cukup fleksibel dan kaya. </font><font style="vertical-align: inherit;">Ini dapat digunakan untuk instalasi kecil di luar kotak, tetapi dengan pertumbuhan kebutuhan itu harus dioptimalkan. </font><font style="vertical-align: inherit;">Untuk menyimpan arsip metrik yang besar, gunakan penyimpanan yang sesuai:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat menggunakan alat bawaan dalam bentuk integrasi dengan Elastixerch atau mengunggah riwayat ke file teks (tersedia dari versi keempat);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat memanfaatkan pengalaman dan integrasi kami dengan Clickhouse.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk secara drastis meningkatkan kecepatan pengumpulan metrik, kumpulkan secara tidak sinkron dan transfer melalui antarmuka trapper ke server Zabbix; </font><font style="vertical-align: inherit;">atau Anda dapat menggunakan patch untuk polling asinkron dari Zabbix itu sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix ditulis dalam bahasa C dan cukup efektif. </font><font style="vertical-align: inherit;">Solusi dari beberapa tempat arsitektur yang sempit memungkinkan untuk lebih meningkatkan produktivitasnya dan, dalam pengalaman kami, untuk menerima lebih dari 100 ribu metrik pada mesin prosesor tunggal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/db/d2/5rdbd2jcvr75sosfvfa6ziniwps.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patch Zabbix yang sama</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya ingin menambahkan beberapa poin. </font><font style="vertical-align: inherit;">Seluruh laporan saat ini, semua tes, angka diberikan untuk konfigurasi yang digunakan bersama kami. </font><font style="vertical-align: inherit;">Kami sekarang mengambil sekitar 20 ribu metrik per detik darinya. </font><font style="vertical-align: inherit;">Jika Anda mencoba memahami apakah ini akan berhasil untuk Anda - Anda dapat membandingkan. </font><font style="vertical-align: inherit;">Apa yang mereka bicarakan hari ini diposting di GitHub sebagai tambalan: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/miklert/zabbix Tambalan itu</font></font></a><br>
<br>
<img src="https://habrastorage.org/webt/xb/wd/y1/xbwdy18hq9dolceyxku_2wxsj4a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
meliputi:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">integrasi penuh dengan Clickhouse (baik server Zabbix dan frontend);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menyelesaikan masalah dengan manajer preprosesor;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">polling asinkron.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Patch ini kompatibel dengan semua versi 4, termasuk lts. </font><font style="vertical-align: inherit;">Kemungkinan besar, dengan perubahan minimal, ini akan berfungsi pada versi 3.4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terimakasih atas perhatiannya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertanyaan dari hadirin (selanjutnya - A): - Selamat siang! Tolong beritahu saya, apakah Anda memiliki rencana untuk interaksi intensif dengan tim Zabbix atau apakah mereka memiliki dengan Anda sehingga ini bukan patch, tetapi perilaku normal Zabbix? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, kami pasti akan melakukan bagian dari perubahan. Sesuatu akan terjadi, sesuatu akan tetap ada di tambalan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Terima kasih banyak atas laporannya! Katakan, tolong, setelah menerapkan tambalan, dukungan dari sisi Zabbix akan tetap dan bagaimana melanjutkan untuk meningkatkan ke versi yang lebih tinggi? Apakah mungkin untuk memperbarui Zabbix setelah tambalan Anda ke 4.2, 5.0? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Saya tidak bisa mengatakan tentang dukungan. Jika saya adalah dukungan teknis Zabbix, saya mungkin akan mengatakan tidak, karena ini adalah kode orang lain. Adapun basis kode 4.2, posisi kami adalah ini: "Kami akan pergi dengan waktu, dan kami akan diperbarui pada versi berikutnya." Karenanya, untuk beberapa waktu kami akan mengunggah tambalan ke versi yang diperbarui. Saya sudah mengatakan dalam laporan: jumlah perubahan dengan versi masih cukup kecil. Saya pikir transisi dari 3,4 ke 4 membawa kami, tampaknya, sekitar 15 menit. Sesuatu telah berubah di sana, tetapi tidak terlalu penting. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jadi Anda berencana untuk mempertahankan tambalan Anda dan Anda dapat dengan aman memproduksinya, di kemudian hari mendapatkan pembaruan dengan cara tertentu? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami sangat merekomendasikannya. Ini memecahkan banyak masalah bagi kami. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Sekali lagi, saya ingin menekankan bahwa perubahan yang tidak berhubungan dengan arsitektur dan tidak berhubungan dengan kunci, antrian - mereka adalah modular, mereka berada dalam modul yang terpisah. Bahkan dengan perubahan kecil mereka dapat dipelihara dengan mudah. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jika detailnya menarik, maka "Clickhouse" menggunakan perpustakaan sejarah yang disebut. Tidak terikat - ini adalah salinan dari dukungan Elastic, yang dapat dikonfigurasi. Polling hanya mengubah poller. Kami percaya ini akan bekerja untuk waktu yang lama. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Terima kasih banyak. Tapi katakan padaku, apakah ada dokumentasi perubahan yang dibuat? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r7/vv/h3/r7vvh3optatasclqsm9tjftkmja.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dokumentasi adalah tambalan. </font><font style="vertical-align: inherit;">Jelas, dengan diperkenalkannya "Clickhouse," dengan diperkenalkannya jenis-jenis poller baru, opsi-opsi konfigurasi baru muncul. </font><font style="vertical-align: inherit;">Tautan dari slide terakhir memiliki deskripsi singkat tentang cara menggunakannya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang mengganti fping dengan nmap</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Bagaimana Anda akhirnya mengimplementasikan ini? </font><font style="vertical-align: inherit;">Bisakah Anda memberikan contoh spesifik: apakah itu strappers dan skrip eksternal Anda? </font><font style="vertical-align: inherit;">Apa yang akhirnya memeriksa begitu banyak host dengan begitu cepat? </font><font style="vertical-align: inherit;">Bagaimana Anda mendapatkan host ini? </font><font style="vertical-align: inherit;">Apakah nmap perlu memberi mereka makan entah bagaimana, mendapatkannya dari suatu tempat, memasukkannya, memulai sesuatu? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Keren. Pertanyaan yang sangat benar! Intinya adalah ini. Kami memodifikasi pustaka (ping ICMP, bagian dari Zabbix) untuk pemeriksaan ICMP, yang menunjukkan jumlah paket - unit (1), dan kode mencoba menggunakan nmap. Artinya, ini adalah pekerjaan internal Zabbix, itu telah menjadi pekerjaan internal sang pinger. Karenanya, tidak diperlukan sinkronisasi atau penggunaan trapper. Ini dilakukan dengan sengaja untuk meninggalkan sistem yang koheren dan tidak terlibat dalam sinkronisasi dua sistem dasar: apa yang harus diperiksa, diisi melalui poller, dan jika isiannya rusak pada kita? .. Ini jauh lebih sederhana. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><b><font style="vertical-align: inherit;">Apakah</font></b><font style="vertical-align: inherit;"> itu berfungsi untuk proxy juga? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ya, tapi kami tidak memeriksanya. Kode polling sama di Zabbix dan server. Harus bekerja Saya tekankan lagi: kinerja sistem sedemikian rupa sehingga kita tidak perlu proxy.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCH:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jawaban yang benar untuk pertanyaan ini adalah: "Mengapa Anda memerlukan proxy dengan sistem seperti itu?" </font><font style="vertical-align: inherit;">Hanya karena NAT'a atau untuk memantau melalui saluran lambat beberapa ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan Anda menggunakan Zabbix sebagai alergen, jika saya mengerti dengan benar. </font><font style="vertical-align: inherit;">Atau grafik (di mana lapisan arsip) Anda pergi ke sistem lain, seperti Grafana? </font><font style="vertical-align: inherit;">Atau apakah Anda tidak menggunakan fungsi ini? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya akan tekankan sekali lagi: kami telah melakukan integrasi penuh. </font><font style="vertical-align: inherit;">Kami menuangkan histori menjadi "Clickhouse", tetapi pada saat yang sama mengubah frontend php. </font><font style="vertical-align: inherit;">Php-frontend pergi ke "Clickhouse" dan melakukan semua gambar dari sana. </font><font style="vertical-align: inherit;">Pada saat yang sama, jujur, kami memiliki bagian yang dibangun dari "Clickhouse" yang sama, dari data Zabbix yang sama, data dalam sistem tampilan grafik lainnya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Di "Grafan" juga.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana keputusan untuk mengalokasikan sumber daya dibuat?</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Bagikan sedikit dapur bagian dalam. </font><font style="vertical-align: inherit;">Bagaimana keputusan dibuat bahwa sumber daya harus dialokasikan untuk pemrosesan produk yang serius? </font><font style="vertical-align: inherit;">Ini, secara umum, risiko tertentu. </font><font style="vertical-align: inherit;">Dan tolong beri tahu saya, dalam konteks fakta bahwa Anda akan mendukung versi baru: bagaimana keputusan ini dibenarkan dari sudut pandang manajemen? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Rupanya, kami tidak menceritakan drama dengan baik. </font><font style="vertical-align: inherit;">Kami menemukan diri kami dalam situasi di mana sesuatu harus dilakukan, dan pada dasarnya pergi dua perintah paralel:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salah satunya terlibat dalam meluncurkan sistem pemantauan menggunakan metode baru: pemantauan sebagai layanan, serangkaian standar solusi sumber terbuka yang kami kombinasikan dan kemudian mencoba mengubah proses bisnis agar dapat bekerja dengan sistem pemantauan yang baru.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara paralel, kami memiliki programmer yang antusias yang melakukan ini (tentang dirinya sendiri). </font><font style="vertical-align: inherit;">Kebetulan dia menang.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dan berapa ukuran tim? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dia ada di depanmu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Itu, seperti biasa, dibutuhkan gairah? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya tidak tahu apa itu passionarian. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dalam hal ini, tampaknya, Anda. </font><font style="vertical-align: inherit;">Terima kasih banyak, kamu keren. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Terima kasih.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang tambalan untuk Zabbix</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Untuk sistem yang menggunakan proxy (misalnya, dalam beberapa sistem terdistribusi), apakah mungkin bagi keputusan Anda untuk beradaptasi dan menambal, katakanlah, poller, proxy, dan sebagian preprosesor Zabbix itu sendiri; dan interaksi mereka? Apakah mungkin untuk mengoptimalkan perkembangan yang ada untuk sistem dengan banyak proksi? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya tahu bahwa server Zabbix dirakit menggunakan proxy (ini mengkompilasi dan kode diperoleh). Kami tidak menguji ini pada produk. Saya tidak yakin tentang ini, tetapi, menurut pendapat saya, manajer preprosesor tidak digunakan dalam proksi. Tugas proxy adalah mengambil satu set metrik dari Zabbix, mengisinya (itu juga menulis konfigurasi, basis data lokal) dan mengembalikannya ke server Zabbix. Kemudian server itu sendiri akan melakukan preprocessing ketika menerimanya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketertarikan pada proxy dapat dimengerti. </font><font style="vertical-align: inherit;">Kami akan memverifikasi ini. </font><font style="vertical-align: inherit;">Ini adalah topik yang menarik. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Idenya adalah ini: jika Anda dapat menambal poller, mereka dapat ditambal ke proksi dan menambal interaksi dengan server, dan preprocessor dapat diadaptasi untuk keperluan ini hanya di server. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Saya pikir semuanya lebih sederhana. </font><font style="vertical-align: inherit;">Anda mengambil kode, menerapkan tambalan, lalu mengonfigurasinya sesuai kebutuhan - mengumpulkan server proxy (misalnya, dengan ODBC) dan mendistribusikan kode yang ditambal ke sistem. </font><font style="vertical-align: inherit;">Jika perlu - kumpulkan proxy, jika perlu - server. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Selain itu, Anda tidak perlu menambal transmisi proxy ke server, kemungkinan besar? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak, itu standar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Sebenarnya, salah satu ide tidak terdengar. </font><font style="vertical-align: inherit;">Kami selalu menjaga keseimbangan antara ledakan ide dan jumlah perubahan, kemudahan dukungan.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3yRt9jSwrlg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit iklan :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih untuk tetap bersama kami. Apakah Anda suka artikel kami? Ingin melihat materi yang lebih menarik? Dukung kami dengan melakukan pemesanan atau merekomendasikan kepada teman Anda </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS berbasis cloud untuk pengembang mulai $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analog unik dari server entry-level yang diciptakan oleh kami untuk Anda: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seluruh kebenaran tentang VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps mulai dari $ 19 atau cara membagi server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (opsi tersedia dengan RAID1 dan RAID10, hingga 24 core dan hingga 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 kali lebih murah di pusat data Equinix Tier IV di Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hanya kami yang memiliki </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV dari $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di Belanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - mulai dari $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca tentang</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cara Membangun Infrastruktur Bldg. </font><font style="vertical-align: inherit;">kelas c menggunakan server Dell R730xd E5-2650 v4 seharga 9.000 euro untuk satu sen?</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id486518/index.html">Seperti 20 tahun lalu</a></li>
<li><a href="../id486528/index.html">Ini adalah norma - 3: tipe peta normal</a></li>
<li><a href="../id486530/index.html">Arus utama. Pekerja Kehormatan. Novel biografi</a></li>
<li><a href="../id486532/index.html">Cadangan data menggunakan banyak FreeFileSync dan 7-zip</a></li>
<li><a href="../id486538/index.html">Bagaimana saya mengunggah soft skill online dan apa yang diberikannya kepada saya</a></li>
<li><a href="../id486542/index.html">Mengurai suara modem dial-up</a></li>
<li><a href="../id486544/index.html">Dua jam dan 3,5 dolar. Bagaimana saya membuat situs sederhana dengan visualisasi distribusi coronavirus</a></li>
<li><a href="../id486548/index.html">Fungsi rekursif primitif dan fungsi Ackerman</a></li>
<li><a href="../id486552/index.html">"Kode budaya: rahasia kelompok dan organisasi yang sangat sukses" - catatan dari buku</a></li>
<li><a href="../id486554/index.html">Slurm DevOps. Tiga hari pencelupan di DevOps. Dan kuliah oleh Anatoly Wasserman "Masalah Komputasi Sosialisme"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>