<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗄️ 🆚 😘 La lista de cambios en D 2.092. Préstamo Préstamo 🤰🏻 🙏🏽 🧑🏿‍🤝‍🧑🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Del traductor. Por lo general, no traduzco tales artículos, porque no veo nada interesante en ellos. Aquí, dos pequeñas pero importantes innovaciones:...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>La lista de cambios en D 2.092. Préstamo Préstamo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501808/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Del traductor. </font><font style="vertical-align: inherit;">Por lo general, no traduzco tales artículos, porque no veo nada interesante en ellos. </font><font style="vertical-align: inherit;">Aquí, dos pequeñas pero importantes innovaciones: soporte para la vinculación directa de bibliotecas C ++ y el sistema de propiedad `` prestado '' y préstamos de Rust (la segunda es la ingestión de DFA, la primera salió en GCC10 hace solo un par de días, y Nim también lo piensa así) con una descripción. </font><font style="vertical-align: inherit;">En realidad, no traduje ninguna lista tediosa, y los enlaces conducen al original. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La versión anterior de la lista 2.0.91.1 (inglés) </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dónde descargar</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2.092.0 salió con 15 cambios importantes y 44 correcciones de errores y mejoras. </font><font style="vertical-align: inherit;">Muchas gracias a los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47 colaboradores</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que hicieron posible este lanzamiento.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambios del compilador</font></font></h4><a name="habracut"></a><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los </font><b><font style="vertical-align: inherit;">modificadores de</font></b><font style="vertical-align: inherit;"> línea de comando </font><b><font style="vertical-align: inherit;">-revert = </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-transition = checkimports</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eliminados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soporte agregado para la codificación (cambio) de nombres ABI C ++ GNU</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los constructores y destructores para módulos que no son </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">externos (D)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> están marcados como obsoletos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violaciones DIP25 marcadas por defecto obsoletas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sistema de propiedad y préstamo de prototipos para punteros</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Añadido </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= -preview en la opción que</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> convierte a la clase de almacenamiento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const alcance</font></font></b></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parámetros </font><b><font style="vertical-align: inherit;">printf</font></b><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scanf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ahora se verifican para verificar el cumplimiento de los especificadores de formato</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La variable de entorno </font><b><font style="vertical-align: inherit;">SOURCE_DATE_EPOCH</font></b><font style="vertical-align: inherit;"> ahora </font><b><font style="vertical-align: inherit;">es</font></b><font style="vertical-align: inherit;"> compatible.</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambios de tiempo de ejecución</font></font></h4><br>
<ol>
<li> <b>TypeInfo_Class/TypeInfo_Interface.isBaseOf</b>  C#/Java <b>isAssignableFrom</b></li>
<li> <b>core.memory.pageSize</b>  <b>minimumPageSize</b></li>
</ol><br>
<h4> </h4><br>
<ol>
<li> <b>Date.isoWeekYear</b>  <b>Date.fromISOWeek</b>  <b>std.datetime.date</b></li>
<li> <b>std.xml</b>  </li>
<li>   <b>std.digest.digest</b> </li>
</ol><br>
<h4>   Dub</h4><br>
<ol>
<li>   </li>
<li>Dub lint    <b>--report-file</b></li>
</ol><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una lista completa de correcciones y mejoras (Esp.)</font></font></b></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nota: tengo patas, por lo tanto, no es posible configurar enlaces correctos dentro de la página desde la tabla de contenido para revelar los temas en el original, lo siento = (</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambios del compilador</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La línea de comando cambia </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-revert = import</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-transition = checkimports han</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sido eliminados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas teclas no hicieron nada, y durante algún tiempo se marcaron como obsoletas. </font><font style="vertical-align: inherit;">El compilador ya no los reconocerá.</font></font></li>
<li>   ()  C++ GNU ABI<br>
<br>
 GNU ABI   C++11  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> GCC 5.1</a>.     D  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">  C++</a>, DMD    UDA ( ) <b>gnuAbiTag</b>,   <b>core.attribute</b>      <b>object</b> (         ). ABI    ,     ,       ++ .  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">std::string</a>     C++11   (DMD  <b>-extern-std={c++11,c++14,c++17}</b>).<br>
<br>
  : <br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">extern</span>(C++):<font></font>
@gnuAbiTag(<span class="hljs-string">"tagOnStruct"</span>)
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MyStruct</span> {</span>}<font></font>
@gnuAbiTag(<span class="hljs-string">"Multiple"</span>, <span class="hljs-string">"Tags"</span>, <span class="hljs-string">"On"</span>, <span class="hljs-string">"Function"</span>)
<span class="hljs-function">MyStruct <span class="hljs-title">func</span><span class="hljs-params">()</span></span>;</code></pre><br>
      gnuAbiTag.     (  ). UDA        <b>-extern-std=c++11</b>.   (<b>-extern-std=c++98</b>) UDA . UDA    extern(C++)        .</li>
<li>    ,   <b>extern(D)</b>  .<br>
<br>
    (    )     ,   <b>extern(D)</b>,     .       ,    ,     /     , ,        <b> </b>   479,     <b> </b>    479,      .<br>
<br>
 ,      ,          .</li>
<li> DIP25    .<br>
<br>
DIP25    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">2.067.0</a>,    ,       -preview=dip25.          , , DIP1000.<br>
<br>
   , ,         <b>-preview=dip25</b>,          <b>-preview=dip25</b>.     (    ).<br>
<br>
DIP25   ,  <b>@ safe</b>       .     ,   <b>ref </b>  ,   <b>return </b>    ,   .<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Foo</span>
{</span>
    <span class="hljs-keyword">int</span> x;
    <span class="hljs-comment">// returning `this.x` escapes a reference to parameter `this`, perhaps annotate with `return`</span>
    <span class="hljs-function">ref <span class="hljs-keyword">int</span> <span class="hljs-title">method</span><span class="hljs-params">()</span> <span class="hljs-comment">/* return */</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.x; }<font></font>
}<font></font>
<span class="hljs-comment">// returning `v` escapes a reference to parameter `v`, perhaps annotate with `return`</span>
<span class="hljs-function">ref <span class="hljs-keyword">int</span> <span class="hljs-title">identity</span><span class="hljs-params">(<span class="hljs-comment">/* return */</span> ref <span class="hljs-keyword">int</span> v)</span> </span>{ <span class="hljs-keyword">return</span> v; }</code></pre><br>
    <b>return </b> .   DIP25   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>.</li>
<li>  <b>-preview=in</b>    <b>in</b>  <b>scope const</b>.<br>
<br>
      <b>const scope</b>,   <b>in </b>        .   , <b>in </b>       (.  inout )  .<br>
<br>
  <b>-preview=in</b>,    :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(in <span class="hljs-keyword">int</span> x)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> x)</span></span>;</code></pre><br>
  <b>-preview=in</b>,    :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(in <span class="hljs-keyword">int</span> x)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(scope <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> x)</span></span>;</code></pre></li>
<li> <b>printf</b>  <b>scanf</b>      <br>
<br>
  C99 7.19.6.1  printf  7.19.6.2  scanf.<br>
<br>
 printf   ,     . ,         .<br>
<br>
 scanf     .<br>
<br>
  :<br>
<br>
<ol>
<li> ,      </li>
<li> ,    </li>
<li>  </li>
<li> </li>
<li>   </li>
<li> —  ,    s</li>
<li> </li>
<li>     C99</li>
</ol><br>
 -,   .<br>
<br>
        .<br>
<br>
 ,     printf/scanf,    :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">printf</span>(<span class="hljs-string">"%k\n"</span>, value);  <span class="hljs-comment">// error: non-Standard format k</span>
<span class="hljs-keyword">const</span> format = <span class="hljs-string">"%k\n"</span>;
<span class="hljs-built_in">printf</span>(format.ptr, value);  <span class="hljs-comment">// no error</span></code></pre><br>
   —    . ,<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">string</span> s;
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%.*s\n"</span>, s.length, s.ptr);
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, s.<span class="hljs-keyword">sizeof</span>);<font></font>
ulong u;<font></font>
<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%*c\n"</span>, &amp;u);</code></pre><br>
  :<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">string</span> s;
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%.*s\n"</span>, cast(<span class="hljs-keyword">int</span>) s.length, s.ptr);
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%zd\n"</span>, s.<span class="hljs-keyword">sizeof</span>);<font></font>
ulong u;<font></font>
<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%llu%*c\n"</span>, &amp;u);</code></pre><br>
  printf  scanf       <b>pragma(printf)</b>    printf  <b>pragma(scanf)</b>    scanf.<br>
<br>
 ,     :<br>
<br>
<ol>
<li> <b>extern (C )</b>  <b>extern (C++)</b></li>
<li>     <b>const(char)*</b></li>
<li>    …  -v ,     <b>va_list </b> (    «v»  <b>printf  scanf</b>)</li>
</ol>         .<br>
<br>
   «v»-   .<br>
</li>
<li>    <b>SOURCE_DATE_EPOCH</b><br>
<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a>    SOURCE_DATE_EPOCH.    UNIX (  1970-01-01 00:00:00),   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"></a>.  DMD       __DATE__, __TIME__  __TIMESTAMP__ .</li>
</ol><br>
<br>
<h3>      </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sistema de propiedad / préstamo (también conocido como OB) para punteros garantiza que los punteros desreferenciados apunten a un objeto de memoria válido.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alcance del prototipo de sistema OB</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un prototipo del sistema OB, adaptado para D. Inicialmente, está destinado solo a punteros, y no a matrices dinámicas, referencias de clase, referencias o campos de puntero en agregados. </font><font style="vertical-align: inherit;">Agregar soporte de este tipo complicará la implementación, pero no cambia su esencia, por lo tanto, se pospone para más adelante. </font><font style="vertical-align: inherit;">Los objetos RAII pueden administrar de forma segura su propia memoria, por lo que no están cubiertos por OB. </font><font style="vertical-align: inherit;">Independientemente del método, ya sea que el puntero asigne memoria mediante GC o algún otro asignador, esto no es importante para el OB, no difieren y se procesan de manera idéntica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sistema OB está activo solo en funciones anotadas con el atributo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ live</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se aplica después del procesamiento semántico únicamente como un control de violación de las reglas de las sustancias orgánicas. </font><font style="vertical-align: inherit;">No se agrega nueva sintaxis. </font><font style="vertical-align: inherit;">No se realizan cambios en el código generado. </font><font style="vertical-align: inherit;">Si </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ vivos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funciones llaman funciones distintas de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ en vivo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se espera que estas llamadas funciones serán un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ LIVE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interfaz compatible, aunque no se ha probado. </font><font style="vertical-align: inherit;">Si </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funciones que </font><font style="vertical-align: inherit;">no son </font><b><font style="vertical-align: inherit;">@ live</font></b><font style="vertical-align: inherit;"> llaman a las funciones </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ live</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se espera que los argumentos pasados ​​sigan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> convenciones </font><b><font style="vertical-align: inherit;">@ live</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sistema OB detecta errores:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desreferenciar punteros que están en un estado no válido</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">más de un puntero activo a un objeto de memoria mutado.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No detectará intentos de desreferenciar un puntero nulo o, potencialmente, un puntero nulo. </font><font style="vertical-align: inherit;">Esto no funciona, ya que actualmente no existe un método para anotar un tipo como puntero no anulable.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El principio básico de OB</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El diseño OB se desprende del siguiente principio: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para cada objeto de memoria, puede haber exactamente un puntero mutante o varios punteros no mutantes (solo lectura).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diseño</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un puntero mutante único se llama el "propietario" del objeto de memoria. Posee de forma transitiva un objeto de memoria y todos los objetos en memoria accesibles desde él (es decir, la gráfica de objetos). Dado que es el único puntero a este objeto de memoria, puede administrar la memoria de manera segura (cambiar su forma, asignar, liberar y cambiar el tamaño) sin golpear el suelo debajo de los pies de cualquier otro puntero (mutante o no) que pueda estar en él (gráfico memoria) indicar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si hay varios punteros en un gráfico de objetos de memoria que son de solo lectura, entonces pueden leer de forma segura sin preocuparse por los cambios repentinos en el gráfico de objetos en la memoria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resto de los detalles de la tecnología se relacionan con cómo los punteros se vuelven de solo lectura y no válidos, y cómo se mantiene constantemente el Principio Central de OB. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Punteros rastreados</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Solo </font><font style="vertical-align: inherit;">se </font><font style="vertical-align: inherit;">rastrean los punteros que se declaran en la función </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ live</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , parámetros de función o variables locales. Las variables de otras funciones no se rastrean, incluso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ live</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ya que el análisis de las interacciones con otras funciones depende completamente solo de la firma de esta función, y no de sus componentes internos. Los parámetros que son </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">constantes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no se rastrean. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estados del</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
puntero Cada puntero se encuentra en uno de los siguientes estados: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indefinido</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El puntero está en un estado no válido. Desreferenciar tal puntero es un error. </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Propietario El</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
propietario es el único puntero a un gráfico de objetos en la memoria. Por lo general, un puntero: el propietario no tiene un atributo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alcance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si el puntero con el atributo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ámbito</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se </font><font style="vertical-align: inherit;">inicializa con una expresión que no se deriva del puntero rastreado, se convierte en el Propietario. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el puntero Propietario se asigna a otro puntero, el Propietario, el primero pasa al estado Indefinido. </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prestado</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un puntero prestado es un puntero que se convierte temporalmente en el único puntero a un gráfico de objetos de memoria. Él pasa a este estado mediante la asignación del puntero: el Propietario, mientras que el Propietario pasa al estado del Prestatario hasta que se complete el uso del puntero prestado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un puntero prestado debe tener un atributo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alcance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y ser un puntero a un objeto mutable. </font><font style="vertical-align: inherit;">
Solo </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lectura</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El propietario asigna el índice de solo </font><i><font style="vertical-align: inherit;">lectura</font></i><font style="vertical-align: inherit;"> . Mientras el puntero de solo lectura esté activo, solo se pueden asignar punteros de solo lectura desde este propietario. El puntero de solo lectura debe tener un atributo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alcance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y tampoco debe ser un puntero a un objeto mutable. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vidas</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La vida útil del indicador "Prestado" o "Solo lectura" comienza desde el momento en que se desreferencia por primera vez (y no desde el momento en que se inicializa o se le asigna un valor) y termina cuando el valor se desreferencia por última vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También se conoce como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vidas no léxicas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transiciones de estado para punteros</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Un puntero cambia su estado cuando se realiza una de estas operaciones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se le asigna memoria (por ejemplo, una variable local en la pila), que coloca el puntero en un estado indefinido</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicialización (considerada como asignación)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asignación: los punteros de origen y destino cambian de estado dependiendo de en qué estados se encuentren, así como de sus tipos y clases de almacenamiento</font></font></li>
<li>   <b>out</b> (    ),   ,   .</li>
<li>  <b>ref </b> ,          ,        .</li>
<li> </li>
<li>    ,      .</li>
<li>       - ()</li>
<li>  ,     ,   .</li>
<li>      ,     ,    </li>
<li>        ,     ,    </li>
<li>         ,       </li>
</ul><br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al ser un prototipo, hay muchos aspectos que aún no se han considerado, y no lo serán hasta que el prototipo demuestre que esta es una solución viable. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Errores</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Espere muchos errores. Por favor repórtelos a bugzilla y etiquételos con la palabra clave "ob". No es necesario informar otras restricciones que ya se enumeran aquí. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las referencias a clases y matrices asociativas no se rastrean.</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se supone que están controlados por el GC. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Préstamo y lectura de no propietarios Los</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
propietarios son monitoreados para detectar fugas, pero no otros indicadores. Los prestatarios se consideran propietarios si no se inicializan con un puntero.</font></font><br>
<br>
<pre><code class="cpp hljs">@<span class="hljs-function">live <span class="hljs-keyword">void</span> <span class="hljs-title">uhoh</span><span class="hljs-params">()</span>
</span>{<font></font>
    scope p = <span class="hljs-built_in">malloc</span>();  <span class="hljs-comment">// p is considered an Owner</span>
    scope <span class="hljs-keyword">const</span> pc = <span class="hljs-built_in">malloc</span>(); <span class="hljs-comment">// pc is not considered an Owner</span>
} <span class="hljs-comment">// dangling pointer pc is not detected on exit</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parecería que no tiene sentido marcar punteros como el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alcance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , quizás esto se pueda solucionar tratando esto como un error. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los punteros son leídos / escritos por funciones anidadas</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
.</font></font><br>
<br>
<pre><code class="cpp hljs">@<span class="hljs-function">live <span class="hljs-keyword">void</span> <span class="hljs-title">ohno</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">malloc</span>();<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sneaky</span><span class="hljs-params">()</span> </span>{ <span class="hljs-built_in">free</span>(p); }<font></font>
<font></font>
    sneaky();<font></font>
    <span class="hljs-built_in">free</span>(p);  <span class="hljs-comment">// double free not detected</span>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
análisis de </font><b><font style="vertical-align: inherit;">excepciones</font></b><font style="vertical-align: inherit;"> supone que no se lanzan excepciones.</font></font><br>
<br>
<pre><code class="cpp hljs">@<span class="hljs-function">live <span class="hljs-keyword">void</span> <span class="hljs-title">leaky</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">malloc</span>();<font></font>
    pitcher();  <span class="hljs-comment">// throws exception, p leaks</span>
    <span class="hljs-built_in">free</span>(p);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una solución es usar el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alcance (salir)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">@<span class="hljs-function">live <span class="hljs-keyword">void</span> <span class="hljs-title">waterTight</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">malloc</span>();<font></font>
    scope(<span class="hljs-built_in">exit</span>) <span class="hljs-built_in">free</span>(p);<font></font>
    pitcher();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
use objetos RAII o solo llame a funciones nothrow. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parámetros diferidos</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
No se tienen en cuenta. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Complejidad cuadrática El</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
análisis muestra la complejidad cuadrática; intente mantener </font><font style="vertical-align: inherit;">pequeñas las </font><font style="vertical-align: inherit;">funciones </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ live</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mezcla de diferentes grupos de memoria</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Combinación de diferentes </font><b><font style="vertical-align: inherit;">grupos de</font></b><font style="vertical-align: inherit;"> memoria:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span>* <span class="hljs-title">xmalloc</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">xfree</span><span class="hljs-params">(<span class="hljs-keyword">void</span>*)</span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span>* <span class="hljs-title">ymalloc</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">yfree</span><span class="hljs-params">(<span class="hljs-keyword">void</span>*)</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">auto</span> p = xmalloc(<span class="hljs-number">20</span>);<font></font>
yfree(p);  <span class="hljs-comment">// should call xfree() instead</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no detectado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto se puede evitar utilizando grupos específicos para un tipo particular:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">U* <span class="hljs-title">umalloc</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ufree</span><span class="hljs-params">(U*)</span></span>;<font></font>
<font></font>
<span class="hljs-function">V* <span class="hljs-title">vmalloc</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vfree</span><span class="hljs-params">(V*)</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">auto</span> p = umalloc();<font></font>
vfree(p);  <span class="hljs-comment">// type mismatch</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y posiblemente no permita conversiones implícitas a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void *</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funciones </font><b><font style="vertical-align: inherit;">@ live</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Argumentos de una función variable Los</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
argumentos de una función variable (por ejemplo, printf) se consideran consumidos. </font><font style="vertical-align: inherit;">Si bien esto es seguro, no parece ser muy práctico y probablemente requerirá una revisión.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambios de tiempo de ejecución</font></font></h4><br>
<ol>
<li> <b>TypeInfo_Class/TypeInfo_Interface.isBaseOf</b>  C#/Java <b>isAssignableFrom</b>.<br>
<br>
<b>TypeInfo_Class.isBaseOf</b>  true,        ,  ,   ,  .   <b>isBaseOf</b>,   <b>isAssignableFrom</b>,     ,   opAssign               D — . <b>TypeInfo_Interface.isBaseOf</b>    ,      <b>TypeInfo_Class</b>,  <b>TypeInfo_Interface</b>.</li>
<li> <b>core.memory.pageSize</b>  <b>minimumPageSize</b>.<br>
<br>
<b>pageSize </b>     .<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">import</span> core.memory : pageSize;<font></font>
ubyte[] buffer = <span class="hljs-keyword">new</span> ubyte[pageSize];</code></pre><br>
<b>minimumPageSize </b>      .<br>
<br>
   ,   .     ,     .      <b>pageSize</b>,     .<br>
<br>
  ,        , ,    : <b>ubyte[minimumPageSize]</b>.<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">import</span> core.memory : minimumPageSize;<font></font>
ubyte[minimumPageSize] buffer;</code></pre><br>
</li>
</ol><br>
<h4> </h4><br>
<ol>
<li> <b>Date.isoWeekYear</b>  <b>Date.fromISOWeek</b>  <b>std.datetime.date</b><br>
<br>
      ISO 8601   ,    Date and DateTime.<br>
<br>
    ISO   ,     . <b>Date.fromISOWeek(2020, 11, DayOfWeek.mon)</b>   <b>Date(2020, 3, 9).</b><br>
<br>
          ISO   ,    () <b>.isoWeekYear</b>     <b>Date </b>   ISO.      ,    <b>.isoWeekAndYear</b>     ,      .</li>
<li> <b>std.xml</b>  .<br>
<br>
 <b>std.xml</b>  .  ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">UndeaD</a>.   xml     dub- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">dxml</a>.</li>
<li>   <b>std.digest.digest</b> .<br>
<br>
    2.076.1     .    <b>std.digest</b>   .<br>
<br>
     <b>std.digest.digest</b>       2.101.</li>
</ol><br>
<h4>   Dub</h4><br>
<ol>
<li>   .<br>
<br>
      Posix   ,  <b>.dub</b>.   dub    (, <b>.swap.file.d</b>),    .      ,  dub  .        ,             dub.<br>
<br>
 ,            .</li>
<li>Dub lint    <b>--report-file</b>.<br>
<br>
Dub lint      --report-file: <b>dub lint --report-file report.json</b></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es501796/index.html">7 errores peligrosos que son fáciles de cometer en C # /. NET</a></li>
<li><a href="../es501798/index.html">C++/Qt: пора валить?.</a></li>
<li><a href="../es501800/index.html">Pequeña sesión de osinta sobre modernización y producción de sistemas de radiocomunicación para las Fuerzas Armadas de la Federación Rusa</a></li>
<li><a href="../es501804/index.html">Dardo. Todo lo que necesitas saber sobre las constantes.</a></li>
<li><a href="../es501806/index.html">ACS: problemas, soluciones y gestión de riesgos de seguridad</a></li>
<li><a href="../es501810/index.html">Disparadores 3D geniales en una computadora portátil antigua: una prueba de la plataforma de juegos en la nube GFN.RU</a></li>
<li><a href="../es501812/index.html">Python Telegram Pagination Bot</a></li>
<li><a href="../es501814/index.html">Cambios de COVID: historias de miembros de StartupDrive que han cambiado y se han fortalecido durante una pandemia</a></li>
<li><a href="../es501820/index.html">Integración de Netflow y soluciones de monitoreo SIEM</a></li>
<li><a href="../es501822/index.html">Ingeniero de tercera generación</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>