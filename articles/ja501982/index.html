<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👩🏻 💥 🦎 シェーダーをゲームエンジンからSubstance Painterに転送する方法 👩🏼‍🔧 👺 🛬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私の名前はタラスウレイスキーです。私はプラリウムハリコフのテクニカルアーティストです。モバイルデバイスでSurvival RPGのグラフィックを最適化するために、カスタムシェーダーを使用しました。それらには、他の一般的なシェーディング方法のテクスチャやマップとは異なる独自のテクスチャやマップの使用が...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>シェーダーをゲームエンジンからSubstance Painterに転送する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/501982/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の名前はタラスウレイスキーです。私はプラリウムハリコフのテクニカルアーティストです。</font><font style="vertical-align: inherit;">モバイルデバイスでSurvival RPGのグラフィックを最適化するために、カスタムシェーダーを使用しました。</font><font style="vertical-align: inherit;">それらには、他の一般的なシェーディング方法のテクスチャやマップとは異なる独自のテクスチャやマップの使用が含まれます。</font><font style="vertical-align: inherit;">その結果、3Dアーティストにとって、ゲーム内のアセット用にこれらのテクスチャを作成する方法は完全には明確になりません。</font><font style="vertical-align: inherit;">テクスチャリングの段階で3Dモデルがゲームエンジンでどのように表示されるかをすぐに確認するために、シェーダーをSubstance Painterに移動しました。</font><font style="vertical-align: inherit;">現時点では、Substance Painterには実質的にAPIマテリアルはありません。私はこのトピックを自分で調べたので、自分のアイデアを共有することにしました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tt/hi/z2/tthiz2dpzs2v-tdmzga9nskoeao.png"><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unityシェーダー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲームはマットキャップシェーディングを使用します。通常のdiffテクスチャに加えて、2つの事前に作成されたMatcapテクスチャもシェーダーに転送されます。それらは、それぞれ2つのマスクを使用して補間され、ぼかされます。その結果、Matcapテクスチャに拡散と偽のまぶしさが掛け合わされ、マテリアルに反射が見られます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wd/mt/fr/wdmtfrjwwe6gach03sv2-u31cya.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下の例は、Matcapがシェーダーグラフにどのように実装されているかを示しています。この場合、2つのMatcapテクスチャが1つにパックされ、チャネルに分割されます。つまり、チャネルRとGにそれぞれ金属と非金属があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gt/tn/x1/gttnx1bhczfa3fuqiwmgrqegdvk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのMatcapsは、例としてチェッカーによって補間されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/go/ro/ojgorowglvxcnfsbqns551jwz3e.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は、PBRシェーディングのように、金属と非金属の特定の類似性です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
素材に粗さや汚れを追加して、PBRシェーディングである種の粗さの類似物を作成したいと考えました。これには、テクスチャリング手法を使用しました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミップマッピング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">テクスチャのシーケンスは、最大1x1の解像度でいわゆるMIPピラミッドを作成します。</font><font style="vertical-align: inherit;">例：1×1、2×2、4×4、8×8、16×16、32×32、64×64、128×128。</font><font style="vertical-align: inherit;">これらの各テクスチャは、MIPレベルと呼ばれます。</font><font style="vertical-align: inherit;">マスクに基づいてピクセルごとにシェーダーにスカッフを実装するには、必要なMIPレベルを選択する必要があります。</font><font style="vertical-align: inherit;">マスクのピクセルが黒の場合、Matcapで最大MIPレベルが選択され、ピクセルの色が白の場合、MIPレベルは0になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r9/33/bw/r933bw4z7ja0uwi4o8uwoomrthe.gif"><br>
<br>
<img src="https://habrastorage.org/webt/7o/k7/n9/7ok7n9zj0oxq3ouidw_kwt9ezww.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、シェーダーを使用すると、反射とハイライトをシミュレートし、光の粗さや擦り傷を追加できます。</font><font style="vertical-align: inherit;">そして、これらすべてが、キューブマップを使用せず、モバイルデバイスのパフォーマンスを大幅に低下させる複雑な照明計算やその他の手法を使用しません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/yr/ur/gayrur5ty9hr3xdfl56duhlcgqi.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダーを作成するSubstance Painterの設定</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Substance Painterで使用可能なすべてのシェーダーはGLSLで記述されています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
具体的には、Substance Painterのシェーダーを作成するために、無料のVSコードを使用しています。構文の強調表示については、VSコード拡張のシェーダー言語サポートを使用することをお勧めします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fz/xo/iw/fzxoiwxrllvqgwvfammn5uuq7b8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Substance PainterのAPIに関する資料はほとんどないため、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘルプ/ドキュメント/シェーダーAPIに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある標準のドキュメント</font><font style="vertical-align: inherit;">は貴重です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/rw/yx/2trwyxswqga9eozdwbk4mmc1ztk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーの作成に役立つ2番目のものは、Substance Painterの標準シェーダーです。それらを見つけるには、... </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Allegorithmic / SubstancePainter / resources / shelf / allegorithmic / shadersに移動します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベースカラーを表示する最も単純な非点灯シェーダーを作成してみましょう。まず、拡張子が.glslのテキストファイルを作成し、そのような単純なシェーダーを記述します。おそらく、何も明確ではありませんが、Substance Painterのシェーダーの構造についてさらに詳しく説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/ck/rv/mkckrvh6j8r7fz7zh72sjfhylgg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいプロジェクトを作成し、シェーダーをシェルにドラッグします。</font><font style="vertical-align: inherit;">[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースをインポートする]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドロップダウンリストで、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'project_name'を</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選択します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a0/us/24/a0us24ykiapgfc-ioeuxt7mpckc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、すべての変更を更新できるようにするために必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウィンドウ/ビュー/シェーダー設定に移動</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、表示されるウィンドウで新しいシェーダーを選択します。検索を使用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9u/bt/6p/9ubt6padacui5ccb77bgpbywfcg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モデル全体が白で、ベース色を描くことができる場合は、すべてが正しく行われています。</font><font style="vertical-align: inherit;">これでプロジェクトを保存して、次のセクションに進むことができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/ig/wt/jzigwtwpb73uz6s8paesepkcqao.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モデルがピンクの場合、シェーダーにエラーがある可能性があります。これに関する通知はコンソールに表示されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Substance Painterでのシェーダーの作成</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前述のアンリットシェーダーを例として使用して、シェーダーの構造を考えます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/ck/rv/mkckrvh6j8r7fz7zh72sjfhylgg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーディングメソッドはシェーダーの基本的な部分であり、シェーダーなしでは機能しません。内部で説明するすべてのものを3Dモデルに表示できます。すべての最終的な計算は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diffuseShadingOutput（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を介して出力されます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3行目と4行目は、それぞれパラメーターと変数を作成します。パラメータは、ベースカラーチャネルを、ペイントされたテクスチャが格納される変数に関連付けます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘルプ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">はすべてのパラメータがスペルアウトされてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。ベースカラーの場合、例のようにすべてがスペルアウトされているはずです。 8行目は、3DモデルのUV座標でテクスチャを配置します。</font><font style="vertical-align: inherit;">ライブラリが最初の行に接続されているため、</font><font style="vertical-align: inherit;">ベースカラーの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">スパース仮想テクスチャ</font></a><font style="vertical-align: inherit;">システムが使用され</font><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lib-sparce.glsl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Matcapの多くの実装を見つけることができますが、その主なポイントは、モデルの法線がカメラに向けられ、テクスチャがx軸とy軸に沿って回転することです。法線をカメラに向かって回転させるには、ビューマトリックスまたは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マトリックスタイプ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">上記</font><font style="vertical-align: inherit;">の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">証明書に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記載されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b5/94/ox/b594oxz6c9doiz0sdm2jbzxt6ow.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、これらはベースカラーの場合と同じ宣言された名前です。次に、3Dモデルの法線を取得する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wg/os/4b/wgos4bygzxftd_sbadht0lqznhy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトルの4番目の要素としてゼロが必要です。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ビューマトリックスに法線ベクトルを乗算すると、法線がカメラに拡張されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/bt/c0/tybtc0ibyb9ybigfr5x-tse61ne.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行列を乗算するときは、因子の順序が重要であることを忘れないでください。乗算の順序を変更すると、結果が異なります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewNormal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">UV座標</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成</font><font style="vertical-align: inherit;">でき</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/94/ef/jn/94efjnpw9ingufg9ocbgfdxxnwq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マットキャップテクスチャを接続する時が来ました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/k3/k8/edk3k848a9wdmfa06dunpn8zrni.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、パラメーターはシェーダーインターフェイスにテクスチャフィールドを作成し、プロジェクトに「Matcap_mip」という名前のテクスチャがある場合、Substance Painterはそれを自動的に引き締めます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/q5/e0/ylq5e0hbag9jh4bpgj2ro2vot4e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何が起こったのか確認してみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/zb/iy/rezbiydl_fat8ornozz67bwjbs0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、Matcapのテクスチャは新しい座標で拡張され、出力でベースカラーと乗算されます。 Matcapテクスチャが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texture（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数によって拡張され、</font><font style="vertical-align: inherit;">Base colorが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">textureSparse（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数によって</font><font style="vertical-align: inherit;">拡張されるという事実に注目したいと思い</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。これは、シェーダーインターフェイスを介して指定されたテクスチャのタイプが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SamplerSparseに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できないためです</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l7/v1/rq/l7v1rqhspgrp92iuffebw2-jmua.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、2つのMatcapを混合するマスクを追加します。便宜上、2つのMatcap'aを1つのテクスチャに追加して、チャネルに分割します。その結果、2つのMatcapテクスチャがそれぞれチャネルRとGに配置されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のような結果になります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a-/nr/ih/a-nrih00ttqwnk6ewdv-pbhq9yo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。シェーダーにマスクを追加しましょう。原理はベースカラーの追加に似ています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tt/lv/jf/ttlvjfnodtzhu_qp_mpq-oqfpga.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータのbasecolor値をuser0で置き換えるだけで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ピクセルシェーダーでマスク値を取得し、マットキャップテクスチャを混合します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pa/42/sr/pa42srwn-29afh50di07sepap_w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、白黒であるため、マスクではRチャネルのみが使用されます。 2つのマットキャップチャネルは</font><font style="vertical-align: inherit;">、Unityの</font><font style="vertical-align: inherit;">lerp </font><font style="vertical-align: inherit;">のアナログで</font><font style="vertical-align: inherit;">ある</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mix（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を使用して</font><i><font style="vertical-align: inherit;">混合さ</font></i><font style="vertical-align: inherit;">れます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーを更新して、インターフェースにカスタムチャネルを追加しましょう。これを行うには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウィンドウ/ビュー/テクスチャセット設定に移動します</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、チャネルの見出しの近くのウィンドウで、プラスをクリックして、大きなリストからuser0を選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0t/v0/mo/0tv0mo6ovcvfztcawlrhbzrhzbs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャネルには、好きな名前を付けることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、このチャネルを描画して、2つのMatcapテクスチャがどのように混合されているかを確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/jq/nu/rijqnu1-0utez7t0babbdv11--s.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unityのシェーダーは、ハイポリモデルからベイクされたMatcapの法線マップも使用しました。同じことをSubstance Painterで試してみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
法線上のすべての操作を使用するには、適切な接続する必要がある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6f/zz/z3/6fzzz36x9epa7a34gew0hcq-fro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、私たちは、法線マップを接続します。サブスタンスペインタには2つあります。1つはベイク処理によって取得され、もう1つは描画できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/7q/86/hw7q86rpk52sdkyygjo32vufv5s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータに</font><font style="vertical-align: inherit;">応じて、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">channel_normal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、描画可能な法線マップであり、</font><i><font style="vertical-align: inherit;">texture_normal</font></i><font style="vertical-align: inherit;">はそれに従って描画</font><font style="vertical-align: inherit;">できると推測できます。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-焼き付けられた法線マップ。また、変数名</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texture_normalは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> APIに埋め込まれているため、自由に名前を付けることはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ピクセルシェーダーでカードを解凍します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yq/wx/sv/yqwxsvn2ohvouv-rwzui9blzp6q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、モデルの頂点にある法線マップと法線を混合します。これを行うには、上記で接続されたライブラリに、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normalBlend（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2y/r0/zs/2yr0zsobknqtlz7ooj_6xd4onsg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に2つの法線マップを混合し、次に法線法線を混合します。それらを混合する順序は実際には問題ではありませんが。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カメラの視線方向への法線の回転は次のようになります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yc/bl/mt/ycblmti7x5nhbfhdlx6yyrqyl4o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。何も変更できず、すべてが同じままです。次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gm/ny/za/gmnyza2j-simray-86frype0usa.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前述のように、この場合のミップマッピングは、PBRシェーディングの粗さカードのようなスカッフをシミュレートするために必要です。ただし、主な問題は、シェーダーインターフェイスから送信されるテクスチャに対してミップカードからのピラミッドが生成されないため、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glslのtextureLod（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">が機能しないことです。 Matcapのミキシングと同様に、逆の方法でユーザーチャネルを介してMatcapテクスチャを読み込むことができます。ただし、テクスチャの品質が大幅に低下し、奇妙なアーティファクトが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
代替ソリューションは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、MIPカードのピラミッド</font></a><font style="vertical-align: inherit;">を作成することです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手動で、Adobe Photoshopまたは他の同様のエディターで、MIPレベルを選択します。ピラミッドは非常に単純に構築されています。元のテクスチャのサイズから続行する必要があります-私の場合は256x256です。 384x256（256、256 + 256/2であるため384）のサイズのファイルを作成し、元のテクスチャを1ピクセルになるまで半分に減らします。削減されたテクスチャのすべてのバージョンは、元のテクスチャの右側に昇順で配置されます。次のように</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sg/h-/qw/sgh-qwq1kmwq_gh7hgkg1l8fnxq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なります。これで、マスクの各ピクセルの色に応じて、ピラミッド内の各テクスチャの座標を見つける関数の記述を開始できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も簡単な方法は、テクスチャごとに計算されるUV座標を配列に格納することです。配列のサイズは</font><i><font style="vertical-align: inherit;">log2（高さ）</font></i><font style="vertical-align: inherit;">として決定されます</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。元の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要なので、</font><font style="vertical-align: inherit;">それらを関数の引数に追加します。特定のピクセルで使用する配列要素を決定</font><font style="vertical-align: inherit;">するには、関数の引数に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">level</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hq/ox/um/hqoxumpnar903hkoghv3hgtfzr4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、元のテクスチャのUVを計算します。つまり、幅が128ピクセル余分にトリミングされます。これを行うには、x座標にbyを掛けます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ho/or/nh/hoornhxxr9w2yj_bgr8ckt9rdw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ピラミッドの残りのテクスチャを使用するには、パターンを見つける必要があります。テクスチャからピラミッドを作成したとき、テクスチャが以前のサイズから半分に縮小されるたびに気づくでしょう。つまり、テクスチャサイズが何倍減少するかは、2を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIPレベルの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累乗で決定でき</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9i/yk/6k/9iyk6k9udtbo2gyundt8erj8a0q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レベル、たとえば4を選択すると、テクスチャが16倍に減少します。なので</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">座標は0から1で決定されます。次に、サイズを正規化する必要があります。つまり、1をテクスチャの減少回数で除算します。たとえば、1を16で除算します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
取得したサイズ変数の値を使用して、特定の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIPレベルの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">座標を計算でき</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/we/cv/kh/wecvkhragapkffyxyussvrbgkes.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大き</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UVをされ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たテクスチャのサイズと同じように減少しました。 x座標では、テクスチャは常にbyだけシフトします。 y座標シフトは</font><font style="vertical-align: inherit;">、各</font><i><font style="vertical-align: inherit;">レベル</font></i><font style="vertical-align: inherit;">値の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイズ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数のすべての値の合計として定義でき</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。つまり、値が</font><i><font style="vertical-align: inherit;">level = 1の</font></i><font style="vertical-align: inherit;">場合、y座標のuvは0ピクセルシフトし、</font><i><font style="vertical-align: inherit;">level = 2の</font></i><font style="vertical-align: inherit;">場合</font><font style="vertical-align: inherit;">、シフトはテクスチャの高さの半分（128ピクセル）になります。</font><i><font style="vertical-align: inherit;">レベル= 3の</font></i><font style="vertical-align: inherit;">場合</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の場合、シフトは128 + 64ピクセルなどになります。すべてのシフトの合計は、サイクルを使用して取得できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nj/fl/wi/njflwi83bfg42lecjugixw2xrr8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、各反復で、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフセット</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">が追加され、テクスチャがy軸に沿って必要なピクセル数だけシフトされます。ステップバイステップアルゴリズムは次のようになります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/cd/ll/jccdllnuvqh288742jsx21jtbme.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。最後のステップは</font><font style="vertical-align: inherit;">、各ピクセルで</font><font style="vertical-align: inherit;">目的の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベル</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を選択するチャネルを表示すること</font><font style="vertical-align: inherit;">です。私たちはすでにこれを行っています、新しいことは何もありません。</font><i><font style="vertical-align: inherit;">MIPレベル</font></i><font style="vertical-align: inherit;">をテクスチャとして</font></font><br>
<br>
<img src="https://habrastorage.org/webt/no/sh/4d/nosh4drvum-rq3fif1mh2qdif_0.png"><br>
<br>
<img src="https://habrastorage.org/webt/vg/-5/w0/vg-5w0rym_gpaygfgzhtkubfxly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
選択するに</font><font style="vertical-align: inherit;">は、配列の長さにテクスチャを掛けます。これで、記述した方法で新しいUV座標を接続できます。</font><font style="vertical-align: inherit;">
これが配列のインデックスになるため、テクスチャをint型に変換することを忘れないでください。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/af/-h/1a/af-h1agpkidgfd7153wgsfgltaa.png"><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、前と同じように、Substance Painterでカスタムチャネルを追加する必要があります。次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qc/4p/h4/qc4ph4jzivfdrtqd5w4dqtn0ojw.gif"><br>
<br>
<img src="https://habrastorage.org/webt/mp/s4/1c/mps41cvu0dlu_kqkkv7qkrtmb5m.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーに欠けているのは、光源と、Shiftキーを押してそれを回転させる機能だけです。まず、この</font><font style="vertical-align: inherit;">ために、Shiftキーを押して回転角度を生成</font><font style="vertical-align: inherit;">する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回転行列が必要</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xy/g_/y1/xyg_y1vvg_rhtoxwuepokzrp9x0.png"><br>
<br>
<img src="https://habrastorage.org/webt/ny/17/df/ny17dfcnyibmvgvfx8pbphsxkom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
光源をランダムに配置し、位置に回転行列を掛けます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bo/gi/fp/bogifpq90um2ygho-bgv0zdvy7a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、shiftを押すと光源がy軸を中心に回転しますが、これまでのところ、これは光源の位置が格納されている単なるベクトルです。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">良いもの</font></a><font style="vertical-align: inherit;">があります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダーに指向性ライトを実装する方法。</font><font style="vertical-align: inherit;">私たちは彼に焦点を当てます。</font><font style="vertical-align: inherit;">光の方向とモデルの照明を決定することは私たちに残っています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ok/a4/df/oka4dfn33tv1t2meohooiu9fz2k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
影の色と光源の色は、パラメータによって設定されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mr/zs/km/mrzskmiirmqmddlhwwg59ab_mpm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
色パラメータは、上記で計算された照明に従って補間されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c4/ci/8h/c4ci8hm54ul19f-lg92oox2t7li.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはこのように判明します：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dp/rx/s9/dprxs9gy7_jaw4p3lu_ux7a9xbi.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのパラメータを使用して、物質ペインタのインタフェースを介して、シャドウの色や光源の色を調整することができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ws/o8/e3/wso8e3nnmdky15efibtajhj0rya.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プリセットを作成して構成する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーの準備ができたら、Matcapテクスチャとシェルフ設定のシェーダーをインポートする必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/w2/wh/hgw2wh4tdzd6i1l4hgcpi8iebpk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
未使用のチャネルをすべて削除してユーザーチャネルを追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hl/qs/xe/hlqsxepohrs1j0hbrlkeghgch5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャをエクスポートするため</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">プリセットは、カスタムチャネルを使用することを除いて、他のものと同じように見えます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zp/xf/7o/zpxf7oje5map2cl0gurvpustk7u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての設定のテンプレートを作成して、プロジェクトを作成すると、目的のシェーダーがすぐに割り当てられ、すべてのテクスチャチャネルが構成されるようにします。</font><font style="vertical-align: inherit;">これを行うには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File / SaveAsTemplateに移動</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して、テンプレートを保存します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pb/xn/aq/pbxnaqjvwraborjnospf8rglc10.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいプロジェクトを作成するときは、何も設定する必要はありません。目的のテンプレートを選択するだけです。</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/hh/xw/by/hhxwbyfzcemnynsqglcabzbgzto.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何を手に入れましたか</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクニカルアーティストは、特殊効果の作成、シーンのカスタマイズ、レンダリングプロセスの最適化を行うことができます。</font><font style="vertical-align: inherit;">また、Stormfall：Saga of Survivalの鎧と武器のモデルを、3Dアーティストが意図したとおりにしたかったのです。</font><font style="vertical-align: inherit;">その結果、Substance Painterの3Dモデルはゲームエンジンと同じように見えます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x_/ic/qr/x_icqrlq2s3_osfrps5c-0qttwo.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムシェーディングを使用したSubstance Painterの3Dモデル。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/7e/79/sg/7e79sgwszeyazecwzi18j2fhv4s.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムシェーディングを使用したUnityの3Dモデル。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事がお役に立てば幸いです。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja501970/index.html">RPGで良いダンジョンを作成するには何が必要ですか？</a></li>
<li><a href="../ja501972/index.html">IcedID-氷が銀行口座を焼くとき</a></li>
<li><a href="../ja501976/index.html">ソフトウェアのテストを学ぶ方法</a></li>
<li><a href="../ja501978/index.html">Prometheusヒストグラムはどのように機能しますか？</a></li>
<li><a href="../ja501980/index.html">1つのプロジェクトの歴史、またはアスタリスクとPhpに基づいて7年間のPBXを作成した方法</a></li>
<li><a href="../ja501984/index.html">検疫で何を確認しますか？テクノストリームからの厳選された資料（パート4）</a></li>
<li><a href="../ja501986/index.html">Apple AirPodsの信じられないほどの成功の秘密</a></li>
<li><a href="../ja501988/index.html">VKメッセージ画面はどのようにレンダリングされますか？</a></li>
<li><a href="../ja501990/index.html">便利な投稿：OpenShiftの2日目の問題を解決してオペレーターを作成する4つのイベント</a></li>
<li><a href="../ja501992/index.html">製品リリースを加速して安定させるためにテストを整理する方法。パート1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>