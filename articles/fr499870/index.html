<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👐🏿 🤽🏻 🧑🏽‍🤝‍🧑🏻 Pylint: un test détaillé de l'analyseur de code 🎅🏼 ❓ ♥️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque Luke a travaillé avec Flake8 et gardé un œil sur Pylint, il avait l'impression que 95% des erreurs générées par Pylint étaient fausses. D'autr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pylint: un test détaillé de l'analyseur de code</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/leader-id/blog/499870/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque Luke a travaillé avec Flake8 et gardé un œil sur Pylint, il avait l'impression que 95% des erreurs générées par Pylint étaient fausses. D'autres développeurs avaient une expérience différente en interaction avec ces analyseurs, alors Luke a décidé d'examiner la situation en détail et d'étudier son travail sur 11 mille lignes de son code. En outre, il a salué les avantages de Pylint, le considérant comme un ajout à Flake8. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/je/g5/rljeg5-o7_1uoatmk9_mez8dslm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luke ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luke Plant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - l'un des développeurs britanniques, sur l'article dont nous avons récemment rencontré l'analyse des analyseurs de code populaires. Les linters étudient le code, vous aident à trouver des bogues et le rendent stylistiquement cohérent avec les normes et le code que les développeurs de votre équipe écrivent. Les plus courants sont Pylint et Flake8. Nous sommes dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leader-ID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous les utilisons également, nous avons donc traduit avec plaisir son article. </font><font style="vertical-align: inherit;">Nous espérons que cela enrichira votre expérience avec ces outils.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paramètres initiaux et base de test</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cette expérience, j'ai pris une partie du code d'un de mes projets et lancé Pylint avec les paramètres de base. </font><font style="vertical-align: inherit;">Il a ensuite essayé d'analyser le résultat: quels avertissements étaient utiles et lesquels étaient faux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un peu d'aide sur le projet dont le code a été tiré:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une application régulière écrite en Django (c'est-à-dire à l'intérieur du même Python). </font><font style="vertical-align: inherit;">Django a ses propres particularités, et, en tant que framework, il a ses limites, mais vous permet d'écrire du code Python normal. </font><font style="vertical-align: inherit;">D'autres bibliothèques qui utilisent des modèles (fonctions de rappel ou modèles de conception de méthode de modèle) ont également certains de ses inconvénients en tant que cadre.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se compose de 22 000 lignes de code. </font><font style="vertical-align: inherit;">Environ 11 000 lignes ont transité par Pylint (9 000 si des lacunes ont été omises). </font><font style="vertical-align: inherit;">Cette partie du projet consistait principalement en vues et code de test.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour analyser le code de ce projet, j'ai déjà utilisé Flake8, ayant traité toutes les erreurs reçues. </font><font style="vertical-align: inherit;">Le but de cette expérience était d'évaluer les avantages de Pylint en complément de Flake8.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le projet a une bonne couverture de test du code, mais comme je suis son seul auteur, je n'ai pas eu l'occasion de recourir à la revue par les pairs.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'espère que cette analyse sera utile à d'autres développeurs pour décider d'utiliser Pylint dans la pile pour vérifier la qualité du code. </font><font style="vertical-align: inherit;">Je suppose que si vous utilisez déjà quelque chose comme Pylint, vous l'utiliserez systématiquement pour le contrôle de qualité nécessaire du code afin de minimiser les problèmes.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainsi, Pylint a émis 1650 réclamations sur mon code. </font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-dessous, j'ai regroupé tous les commentaires de l'analyseur par type et leur ai donné mes commentaires. </font><font style="vertical-align: inherit;">Si vous avez besoin d'une description détaillée de ces messages, consultez la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section appropriée de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la liste des fonctions Pylint.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bugs</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylint a trouvé exactement un bogue dans mon code. </font><font style="vertical-align: inherit;">Je considère un bogue comme une erreur qui se produit ou peut potentiellement se produire pendant le fonctionnement du programme. </font><font style="vertical-align: inherit;">Dans ce cas, j'ai utilisé des exceptions - </font></font><code>broad-except.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c'est </font><font style="vertical-align: inherit;">-à </font><font style="vertical-align: inherit;">-dire </font></font><code>except Exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pas seulement sauf, ce que Flake8 attrape. </font><font style="vertical-align: inherit;">Cela entraînerait un comportement d'exécution à quelques exceptions près. </font><font style="vertical-align: inherit;">Si cette erreur est apparue au moment de l'exécution (pas le fait qu'elle s'affiche), un comportement de code incorrect n'aurait pas de conséquences graves, cependant ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total: 1</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utile</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de cette erreur, Pylint en a trouvé quelques autres que j'ai classés comme utiles. </font><font style="vertical-align: inherit;">Le code n'est pas tombé d'eux, mais il pourrait y avoir des problèmes lors de la refactorisation et, en principe, des erreurs à l'avenir lors de l'extension de la liste des fonctionnalités et de la prise en charge du code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sept d'entre eux étaient </font></font><code>too-many-locals</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>too-many-branches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>too-many-local-variables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ils appartenaient à trois parties de mon code qui étaient mal structurées. </font><font style="vertical-align: inherit;">Ce serait bien de penser à la structure, et je suis sûr que je pourrais faire mieux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autres erreurs:</font></font><br>
<br>
<ul>
<li><code>unused-argument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 3 - l'un d'eux était vraiment un montant, et le code s'exécutait correctement de manière aléatoire. </font><font style="vertical-align: inherit;">Les deux autres arguments inutiles et inutilisés entraîneraient des problèmes à l'avenir si je les utilisais.</font></font></li>
<li><code>redefined-builtin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><code>dangerous-default-value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2 - pas de bugs, car je n'ai jamais utilisé les valeurs par défaut, mais ce serait bien de corriger ça juste au cas où. </font></font></li>
<li><code>stop-iteration-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1 - ici j'ai appris quelque chose de nouveau pour moi, je ne l'aurais jamais trouvé moi-même.</font></font></li>
<li><code>no-self-argument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 16</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modifications cosmétiques</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ferais moins attention à ces choses. </font><font style="vertical-align: inherit;">Ils sont soit insignifiants, soit improbables. </font><font style="vertical-align: inherit;">En revanche, leur correction ne sera pas superflue. </font><font style="vertical-align: inherit;">Certains d'entre eux sont stylistiques controversés. </font><font style="vertical-align: inherit;">J'ai parlé de bancs similaires dans d'autres sections, mais ceux qui sont répertoriés ici conviennent également à ce contexte. </font><font style="vertical-align: inherit;">En utilisant Pylint régulièrement, je corrigerais ces «défauts», mais dans la plupart des cas, je ne m'en inquiéterais pas. </font></font><br>
<br>
<code>invalid-name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 192 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agissait essentiellement de noms de variables à une seule lettre. </font><font style="vertical-align: inherit;">Utilisé dans les contextes où cela ne faisait pas peur, par exemple:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/94f/833/bf1/94f833bf1008d8403a0e44716852c587.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e43/9a2/75c/e439a275ceeb9508d0566015a7875e3b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup étaient dans le code de test:</font></font><br>
<br>
<ul>
<li><code>len-as-condition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 20</font></font></li>
<li><code>useless-object-inheritance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 16 (héritage Python 2)</font></font></li>
<li><code>no-else-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 11</font></font></li>
<li><code>no-else-raise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><code>bad-continuation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 6</font></font></li>
<li><code>redefined-builtin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 4</font></font></li>
<li><code>inconsistent-return-statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><code>consider-using-set-comprehension</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><code>chained-comparison</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TOTAL: 252</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inutile </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est à ce moment-là que j'ai eu raison d'écrire le code comme je l'ai écrit, même si à certains endroits cela semble inhabituel. </font><font style="vertical-align: inherit;">Et, à mon avis, il vaut mieux le laisser sous cette forme, même si certains ne seront pas d'accord ou préféreront un style d'écriture de code différent qui pourrait potentiellement éviter des problèmes.</font></font><br>
<br>
<ul>
<li><code>too-many-ancestors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 76</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étaient dans le code de test où j'ai utilisé de nombreuses classes d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impuretés</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour mettre des utilitaires ou des talons.</font></font><br>
<br>
<ul>
<li><code>unused-variable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 43</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a été trouvé presque tout le temps dans le code de test, où j'ai battu le record:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c7/206/1bd/2c72061bd4270ea1128d3ea63a26e18a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... et n'a utilisé aucun des éléments. </font><font style="vertical-align: inherit;">Il existe plusieurs façons d'empêcher Pylint de signaler des erreurs (par exemple, donner des noms </font></font><strong><code>unused</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Mais si vous le laissez sous la forme dans laquelle j'ai écrit, il sera lisible et les gens (y compris moi-même) pourront le comprendre et le soutenir.</font></font><br>
<br>
<ul>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 26</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sont des cas où j'ai attribué des noms appropriés dans le contexte, mais ceux qui ne respectaient pas les normes de dénomination Pylint. </font><font style="vertical-align: inherit;">Par exemple, db (il s'agit d'une abréviation courante pour base de données) et d'autres noms non standard, qui, à mon avis, étaient plus compréhensibles. </font><font style="vertical-align: inherit;">Mais vous n'êtes peut-être pas d'accord avec moi.</font></font><br>
<br>
<ul>
<li><strong><code>redefined-outer-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 16</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, un nom de variable est orthographié correctement pour les contextes internes et externes. </font><font style="vertical-align: inherit;">Et vous n'aurez jamais à utiliser un nom externe à partir d'un contexte interne.</font></font><br>
<br>
<ul>
<li><strong><code>too-few-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 14</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les exemples incluent des classes avec des données créées à l'aide d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attrs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , où il n'y a pas de méthodes publiques, et une classe qui implémente l'interface du dictionnaire, mais qui est nécessaire pour s'assurer que la méthode fonctionne correctement</font></font><strong><code>__getitem__</code></strong><br>
<br>
<ul>
<li><strong><code>no-self-use</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 12</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils sont apparus dans le code de test, où j'ai intentionnellement ajouté des méthodes à la classe de base sans paramètre </font></font><strong><code>self</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, car de cette façon, il était plus pratique de les importer et de les rendre disponibles pour le cas de test. </font><font style="vertical-align: inherit;">Certains d'entre eux ont même été intégrés dans des fonctions distinctes.</font></font><br>
<br>
<ul>
<li><strong><code>attribute-defined-outside-init</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 10</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ces cas, il y avait de bonnes raisons d'écrire le code tel quel. </font><font style="vertical-align: inherit;">Fondamentalement, ces erreurs se sont produites dans le code de test.</font></font><br>
<br>
<ul>
<li><strong><code>too-many-locals</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 6, </font></font><strong><code>too-many-return-statements</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 6, </font></font><strong><code>too-many-branches</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 2, </font></font><strong><code>too-many-statements</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 2</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, ces fonctionnalités étaient trop longues. </font><font style="vertical-align: inherit;">Mais en les regardant, je n'ai pas vu de bons moyens de les nettoyer et de les améliorer. </font><font style="vertical-align: inherit;">L'une des caractéristiques était simple, bien que longue. </font><font style="vertical-align: inherit;">Il avait une structure très claire et n'était pas écrit de façon tordue, et tout moyen de le réduire auquel je pouvais penser inclurait des couches inutiles de fonctions inutiles ou gênantes.</font></font><br>
<br>
<ul>
<li><strong><code>arguments-differ</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 6</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela est principalement dû à l'utilisation de * args et ** kwargs dans la méthode surchargée, ce qui vous permet de vous protéger contre les changements dans la signature des méthodes des bibliothèques tierces (mais dans certains cas, ce message peut indiquer de vrais bugs).</font></font><br>
<br>
<ul>
<li><strong><code>ungrouped-imports</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 4</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'utilise déjà isort pour importer </font></font><br>
<br>
<ul>
<li><strong><code>fixme</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 4</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, il y a plusieurs choses qui doivent être corrigées, mais pour le moment je ne veux pas les corriger. </font></font><br>
<br>
<ul>
<li><strong><code>duplicate-code</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 3</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, vous utilisez une petite quantité de code passe-partout, ce qui est simplement nécessaire, et lorsqu'il n'y a pas beaucoup de logique réelle dans le corps de la fonction, cet avertissement vole.</font></font><br>
<br>
<ul>
<li><strong><code>broad-except</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>abstract-method</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>redefined-builtin</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>too-many-lines</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai essayé de comprendre de quelle manière naturelle briser ce module, mais je n'ai pas pu. </font><font style="vertical-align: inherit;">C'est un exemple où vous pouvez voir que le linter est le mauvais outil. </font><font style="vertical-align: inherit;">Si j'ai un module avec 980 lignes de code, et j'ajoute 30 autres, je franchis la limite de 1000 lignes, et les notifications du linter ne m'aideront pas ici. </font><font style="vertical-align: inherit;">Si 980 lignes vont bien, alors pourquoi 1010 est-il mauvais? </font><font style="vertical-align: inherit;">Je ne veux pas refactoriser ce module, mais je veux que le linter ne produise pas d'erreurs. </font><font style="vertical-align: inherit;">La seule solution à ce moment que je vois est de faire en sorte que le linter soit silencieux, et cela contredit le but ultime.</font></font><br>
<br>
<ul>
<li><strong><code>pointless-statement</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>expression-not-assigned</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>cyclic-import</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons compris le cycle en déplaçant ses parties vers l'une des fonctions. </font><font style="vertical-align: inherit;">Je ne pouvais pas trouver de meilleure façon de structurer le code en fonction des restrictions.</font></font><br>
<br>
<ul>
<li><strong><code>unused-import</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai déjà ajouté </font></font><code># NOQA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lors de l'utilisation de Flake8 afin que cette erreur ne s'affiche pas.</font></font><br>
<br>
<ul>
<li><strong><code>too-many-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si dans ma classe de test il y a 35 tests au lieu de 20 réglementés, est-ce vraiment un problème? </font></font><br>
<br>
<ul>
<li><strong><code>too-many-arguments</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 243</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impossible de corriger</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette catégorie reflète les erreurs que je ne peux pas corriger même si je le souhaitais, en raison de restrictions externes, telles que la nécessité de renvoyer ou de transmettre des classes à une bibliothèque ou à un framework tiers qui doivent satisfaire certaines exigences.</font></font><br>
<br>
<ul>
<li><strong><code>unused-argument</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 21</font></font></li>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 13</font></font></li>
<li><strong><code>protected-access</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 3</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accès inclus aux "objets internes documentés", comme </font></font><code>sys._getframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans stdlib et Django </font></font><code>Model._meta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><strong><code>too-few-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 3</font></font></li>
<li><strong><code>too-many-arguments</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>wrong-import-position</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>attribute-defined-outside-init</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>too-many-ancestors</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 46</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faux messages</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des choses dans lesquelles Pylint a clairement tort. </font><font style="vertical-align: inherit;">Dans ce cas, ce ne sont pas des erreurs Pylint: le fait est que Python est dynamique, et Pylint essaie de découvrir des choses qui ne peuvent pas être faites parfaitement ou de manière fiable.</font></font><br>
<br>
<ul>
<li><strong><code>no-member</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 395</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Associé à plusieurs classes de base: de Django et celles que j'ai créées moi-même. </font><font style="vertical-align: inherit;">Pylint n'a pas pu détecter la variable en raison du dynamisme / métaprogrammation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreuses erreurs se sont produites en raison de la structure du code de test (j'ai utilisé un modèle de django-functest, qui dans certains cas pourrait être corrigé en ajoutant des classes de base supplémentaires en utilisant les méthodes "abstraites" qui appellent </font></font><strong><code>NotImplementedError</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ou, éventuellement, en renommant de nombreuses classes de test (I Je ne l'ai pas fait, car dans certains cas, ce serait déroutant).</font></font><br>
<br>
<ul>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 52</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problème est principalement dû au fait que Pylint a appliqué la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">règle de constante PEP8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , considérant que chaque nom de niveau supérieur défini avec </font></font><strong><code>=</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est une «constante». </font><font style="vertical-align: inherit;">Définir exactement ce que nous entendons par une constante est plus difficile qu'il n'y paraît, mais cela ne s'applique pas à certaines choses qui sont intrinsèquement constantes, par exemple les fonctions. </font><font style="vertical-align: inherit;">De plus, la règle ne doit pas être appliquée à des méthodes moins connues de création de fonctions, par exemple:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d3/945/0fd/4d39450fdda92751a828ba4344e309b5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certains exemples sont discutables en raison du manque de définition de ce qu'est une constante. </font><font style="vertical-align: inherit;">Par exemple, une instance d'une classe définie au niveau du module, qui peut ou non avoir un état mutable, doit-elle être considérée comme constante? </font><font style="vertical-align: inherit;">Par exemple, dans cette expression:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c56/a26/52f/c56a2652fd28c08feee8306c6c96a048.png"></div><br>
<ul>
<li><strong><code>no-self-use</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 23</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylint incorrectement déclaré La méthode pourrait être une fonction dans de nombreux cas où j'utilise l'héritage pour effectuer différentes implémentations, respectivement, je ne peux pas les convertir en fonctions.</font></font><br>
<br>
<ul>
<li><strong><code>protected-access</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 5</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pylint a incorrectement évalué qui était le «propriétaire» (le fragment de code actuel crée l'attribut protégé de l'objet et l'utilise localement, mais Pylint ne le voit pas).</font></font><br>
<br>
<ul>
<li><strong><code>no-name-in-module</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>import-error</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>pointless-statement</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette déclaration a effectivement produit le résultat:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/454/9c4/3ea/4549c43ea3cdb8f7910eaa2edce758cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je l'ai utilisé pour provoquer intentionnellement une erreur inhabituelle qui ne sera probablement pas trouvée par les tests. </font><font style="vertical-align: inherit;">Je ne blâme pas Pylint de ne pas le reconnaître ... </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 477</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne sommes pas encore arrivés, mais il est temps de regrouper nos résultats:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Bon" - Blocs "Bogues" et "Utilitaires" - ici Pylint a certainement aidé: 17.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Neutre» - «Changements cosmétiques» - un avantage mineur de Pylint, les erreurs ne causeront pas de dommages: 252.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Mauvais" - "Inutile", "Incapable de corriger", "Imprécisions" - où Pylint veut des changements dans le code, où ce n'est pas nécessaire. </font><font style="vertical-align: inherit;">Y compris lorsque les modifications ne peuvent pas être apportées en raison de dépendances externes ou lorsque Pylint a simplement incorrectement analysé le code: 766.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le rapport du bon au mauvais est très faible. </font><font style="vertical-align: inherit;">Si Pylint était mon collègue aidant à la révision du code, je le supplierais de partir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour supprimer les fausses notifications, vous pouvez noyer la classe d'erreur sortante (ce qui augmentera alors l'inutilité de l'utilisation de Pylint) ou ajouter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des commentaires spéciaux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au code. </font><font style="vertical-align: inherit;">Je ne veux pas faire ce dernier, car:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ça prend du temps!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'aime pas empiler les commentaires qui existent pour faire taire le linter.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ajouterai volontiers ces pseudo-commentaires quand il y aura un avantage certain du linter. </font><font style="vertical-align: inherit;">De plus, je suis soucieux des commentaires, donc ma coloration syntaxique les affiche de manière vivante: comme recommandé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans cet article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cependant, à certains endroits, j'ai déjà ajouté # commentaires </font></font><code>NOQA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à Muffle Flake8, mais avec eux pour une section, vous ne pouvez ajouter que cinq codes d'erreur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docstrings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les problèmes restants que Pylint a découverts manquaient de lignes de documentation. </font><font style="vertical-align: inherit;">Je les mets dans une catégorie distincte car:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ils sont très controversés, et vous pouvez avoir une politique complètement différente concernant de telles choses.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'ai pas eu le temps de les analyser tous.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, Pylint a découvert 620 dockstrings manquants (dans les modules, les fonctions, les méthodes de classe). </font><font style="vertical-align: inherit;">Mais dans de nombreux cas, j'avais raison. </font><font style="vertical-align: inherit;">Par exemple:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quand tout est clair d'après le nom. </font><font style="vertical-align: inherit;">Par exemple:</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quand une docstring est déjà définie - par exemple, si j'implémente l'interface du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">routeur de base de données de Django</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ajouter votre propre ligne dans ce cas peut être dangereux.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans d'autres cas, ces lignes de descriptions ne nuiraient pas à mon code. </font><font style="vertical-align: inherit;">Dans environ 15 à 30% des cas trouvés par Pylint, j'aurais pensé: "Oui, je dois ajouter une docstring ici, merci Pylint pour le rappel." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, je n'aime pas les outils qui permettent d'ajouter des cordons d'ancrage partout et partout, car je pense que dans ce cas, ils se révéleront mauvais. </font><font style="vertical-align: inherit;">Il vaut mieux ne pas les écrire du tout. </font><font style="vertical-align: inherit;">Une situation similaire avec de mauvais commentaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les lire est une perte de temps: ils ne disposent pas d'informations complémentaires ou contiennent des informations incorrectes,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ils aident à surligner inconsciemment les docstrings dans le texte, car ils contiennent des informations utiles (si vous les écrivez dans le cas). </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les avertissements concernant les lignes de documentation manquantes sont ennuyeux: pour les supprimer, vous devez ajouter des commentaires séparément, ce qui prend environ le même temps que l'ajout de l'ancrage lui-même. </font><font style="vertical-align: inherit;">De plus, tout cela crée du bruit visuel. </font><font style="vertical-align: inherit;">En conséquence, vous obtiendrez des lignes de documentation qui ne sont ni nécessaires ni utiles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je crois que mes hypothèses initiales sur l'inutilité de Pylint se sont avérées correctes (dans le contexte de la base de code pour laquelle j'utilise Flake8). Pour que je puisse l'utiliser, l'indicateur reflétant le nombre de faux positifs doit être inférieur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de créer du bruit visuel, un délai supplémentaire est nécessaire pour trier ou filtrer les fausses notifications, et je ne voudrais pas ajouter quoi que ce soit au projet. Les développeurs juniors seront plus humbles pour apporter des modifications afin de supprimer les commentaires de Pylint. Mais cela les conduira à casser le code de travail, à ne pas réaliser que Pylint est erroné, ou au fait que vous aurez donc beaucoup de refactoring pour que Pylint puisse comprendre votre code correctement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez Pylint dans un projet depuis le tout début ou dans un projet où il n'y a pas de dépendances externes, je pense que vous aurez une opinion différente et le nombre de fausses notifications sera moindre. </font><font style="vertical-align: inherit;">Cependant, cela peut entraîner des coûts de temps supplémentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre approche consiste à utiliser Pylint pour un nombre limité de types d'erreurs. </font><font style="vertical-align: inherit;">Cependant, il n'y en avait que quelques-unes, dont les réponses se sont avérées correctes ou extrêmement rarement fausses (en termes relatifs et absolus). </font><font style="vertical-align: inherit;">Parmi ceux - </font><font style="vertical-align: inherit;">ci sont: </font></font><code>dangerous-default-value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>stop-iteration-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>broad-exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>useless-object-inheritance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tout cas, j'espère que cet article vous a aidé lorsque vous envisagez d'utiliser Pylint ou en cas de litige avec des collègues.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499846/index.html">Quand la collecte séparée des ordures commencera à fonctionner et pourquoi la surveillance vidéo des sites pour les conteneurs à ordures est nécessaire</a></li>
<li><a href="../fr499850/index.html">Comment analyser les concurrents et mettre en place une stratégie digitale en 40 minutes</a></li>
<li><a href="../fr499852/index.html">Documentation en anglais pour Angular</a></li>
<li><a href="../fr499854/index.html">Apache Bigtop et le choix de la distribution Hadoop aujourd'hui</a></li>
<li><a href="../fr499858/index.html">Que faire le week-end: un aperçu de certains jeux de société pour ceux qui en ont assez des écrans bleus</a></li>
<li><a href="../fr499872/index.html">Modularité en Java 9</a></li>
<li><a href="../fr499874/index.html">Détection de toux sur Intel NUC</a></li>
<li><a href="../fr499876/index.html">Top 5 des livres classiques pour améliorer la littératie financière et préparer les premières étapes de l'échange</a></li>
<li><a href="../fr499878/index.html">La lutte pour des millisecondes. Comment choisir le serveur avec le moins de ping</a></li>
<li><a href="../fr499882/index.html">Comment nous sélectionnons les concepteurs et réalisons des entretiens techniques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>