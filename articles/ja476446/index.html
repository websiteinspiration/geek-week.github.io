<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏻 🔓 👞 Jiraプラグイン：成功した自転車発明のいくつかの例 👲🏼 📉 👎🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mail.ru Groupでは、アトラシアン製品、特にJiraの開発に多大な努力を傾けてきました。私たちの努力のおかげで、プラグインMyGroovy、JsIncluder、My Calendar、My ToDoなどがライトを目にしました。私たちは社内でこれらすべてのプラグインを開発し、積極的に使用し...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Jiraプラグイン：成功した自転車発明のいくつかの例</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/476446/"><img src="https://habrastorage.org/webt/zk/qc/ts/zkqcts9wiogkowchg77ul7e3xqi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mail.ru Groupでは、アトラシアン製品、特にJiraの開発に多大な努力を傾けてきました。私たちの努力のおかげで、プラグインMyGroovy、JsIncluder、My Calendar、My ToDoなど</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライトを目にしました</font><font style="vertical-align: inherit;">。私たちは社内でこれらすべてのプラグインを開発し、積極的に使用しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関係部署から新機能の導入依頼が多く寄せられています。これは新しいプラグインに変換されることもありますが、ほとんどの場合、既存のプラグインを使用してタスクを解決します。これは、ほとんどの日常的なタスクがプラグインで簡単にカバーされるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オフィスで小旅行を実施するには、交差する小旅行をチェックしてリクエストの作成を提供する必要がありました。</font><font style="vertical-align: inherit;">テスター向け-実装の責任者と一緒にテストの段階を追跡するメカニズムを作成します。</font><font style="vertical-align: inherit;">テクニカルサポートは、ナレッジベースに自動的にアクセスしたいと考えていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日は、プラグインを組み合わせることで、これらの問題をどうやって解決したかをお話しします。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ガイド」からのお願い </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツール：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私のカレンダー</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSインクルーダー</font></font><br>
</li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mail.ru Groupのオフィスには、ゲストに同意してAXOのタスクを設定する多くの「ガイド」がいます。</font><font style="vertical-align: inherit;">時には、いくつかの遠足が同時に行われることがあります-その後、いくつかのグループが同時にオフィスに行くか、1人のガイドが拒否され、彼はゲストと交渉しに行きます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h2><br>
<ol>
<li>   «» (      )          — 3 . :<br>
<br>
<ul>
<li>9:00-10:00<br>
</li>
<li>17:30-18:30<br>
</li>
<li>20:00-21:00<br>
</li>
</ul><br>
      ,       .         ( , ,       ).</li>
<li> ,      ,     .</li>
</ol><br>
<h2></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：必須フィールドをリクエスト作成画面に追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、日付タイプの「日付」フィールドとラジオボタンタイプの「ツアー時間」フィールドを作成して、3つのオプション（9：00-10：00; 17：30-18：30; 20：00-21：00）から1つの値を選択します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：カレンダーを作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいカレンダーを作る。 JQLを通じてエクスカーションを使用してプロジェクトに照準を合わせ、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イベントの開始を前に作成した「日付」フィールド</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">示し、前に作成した「エクスカーション時間」フィールドを表示に追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/dad/dc5/487/daddc5487b6b205cd687a872c1736694.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カレンダーを保存します。これでツアーをカレンダーに表示できるようになりました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b04/cbf/0f9/b04cbf0f948315ea51b06a240aad90c3.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ツアーの作成を制限し、カレンダーへのリンクを含むバナーを追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを実現するには、日付フィールドの変更を追跡するJSが必要です。</font><font style="vertical-align: inherit;">日付を選択したら、jql関数でそれを置き換えて、この日付のすべてのリクエストを取得する必要があります。次に、所要時間を確認し、これらのオプションを画面上で非表示にして、所要時間を選択できないようにします。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/602/4d2/f46/6024d2f46d629821518c82f42da7e6a5.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストがない</font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5c1/ed5/7b5/5c1ed57b57361925498de2f40666d8d9.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合午前9時と午後20時にリクエストが2回ある場合</font></font></i><br>
<br>
<pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>)</span>{
<span class="hljs-comment">/*
   :

    — customfield_19620
     — customfield_52500
     « »:
   9:00-10:00 — 47611
   17:30-18:30 — 47612
   20:00-21:00 — 47613
*/</span><font></font>
<font></font>
<span class="hljs-comment">/*
         .
         .
*/</span>
   $(<span class="hljs-string">"input[name=customfield_19620]"</span>).on(<span class="hljs-string">"click change"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
       <span class="hljs-keyword">var</span> idOptions = [];
       <span class="hljs-keyword">var</span> url = <span class="hljs-string">"/rest/api/latest/search"</span>;<font></font>
<font></font>
<span class="hljs-comment">/*
    «»  ,    .
*/</span>
       <span class="hljs-keyword">if</span> (!$(<span class="hljs-string">"#customfield_19620"</span>).val()) {<font></font>
           $(<span class="hljs-string">'input:radio[name=customfield_52500]'</span>).closest(<span class="hljs-string">'.group'</span>).hide();<font></font>
       }<font></font>
<span class="hljs-comment">/*
                jql ,        .
*/</span>
       <span class="hljs-keyword">else</span> {
           <span class="hljs-keyword">var</span> temp = $(<span class="hljs-string">"#customfield_19620"</span>).val();
           <span class="hljs-keyword">var</span> arrDate = temp.split(<span class="hljs-string">'.'</span>);
           <span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span> + arrDate[<span class="hljs-number">2</span>].trim() + <span class="hljs-string">"-"</span> + arrDate[<span class="hljs-number">1</span>].trim() + <span class="hljs-string">"-"</span> + arrDate[<span class="hljs-number">0</span>].trim();<font></font>
           $(<span class="hljs-string">'input:radio[name=customfield_52500][value="-1"]'</span>).parent().remove();<font></font>
           $(<span class="hljs-string">'input:radio[name=customfield_52500]'</span>).closest(<span class="hljs-string">'.group'</span>).show();<font></font>
           $(<span class="hljs-string">'input:radio[name=customfield_52500][value="47611"]'</span>).parent().show();<font></font>
           $(<span class="hljs-string">'input:radio[name=customfield_52500][value="47612"]'</span>).parent().show();<font></font>
           $(<span class="hljs-string">'input:radio[name=customfield_52500][value="47613"]'</span>).parent().show();
<span class="hljs-comment">/*
      jql.
*/</span>
           <span class="hljs-keyword">var</span> params = {
               <span class="hljs-attr">jql</span>: <span class="hljs-string">"issuetype = Events and cf[52500] is not EMPTY and cf[19620] = 20"</span> + result,
               <span class="hljs-attr">fields</span>: <span class="hljs-string">"customfield_52500"</span><font></font>
           };<font></font>
<span class="hljs-comment">/*
      JSON           .
*/</span>
           $.getJSON(url, params, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
               <span class="hljs-keyword">var</span> issues = data.issues
               <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; issues.length; i++) {<font></font>
                   idOptions.push(issues[i].fields.customfield_52500.id)<font></font>
               }<font></font>
               <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; idOptions.length; k++) {<font></font>
                   $(<span class="hljs-string">'input:radio[name=customfield_52500][value='</span> + idOptions[k] + <span class="hljs-string">']'</span>).parent().hide();<font></font>
               }<font></font>
           });<font></font>
       }<font></font>
   });<font></font>
<span class="hljs-comment">/*
        .
*/</span>
   $(<span class="hljs-string">'div.field-group:has(#customfield_19620)'</span>).last().before(<span class="hljs-string">`
       &lt;div id="bannerWithInfo" class="aui-message info"&gt;
           &lt;p class="title"&gt;
              
           &lt;/p&gt;
           &lt;p&gt;   &lt;/p&gt;
           &lt;p&gt;      &lt;/p&gt;
           &lt;p&gt;         &lt;/p&gt;
       &lt;p&gt;&lt;a href='https://jira.ru/secure/MailRuCalendar.jspa#calendars=492' target="_blank"&gt; &lt;/a&gt;&lt;/p&gt;
       &lt;/div&gt;
           `</span>);<font></font>
})(AJS.$);<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスターからのお願い</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツール：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私のグルーヴィー</font></font><br>
</li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエストでは、タスクを担当する従業員の指示でテスト段階の表示を構成する必要があります。</font><font style="vertical-align: inherit;">ステージがまだ完了していないか、ステージが完了している（およびそれを誰が実施したか）ことがわかります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリプト化されたフィールドタイプフィールドを構成して、テストの段階を表示し、ワークフローに関連付け、作成者の段階を担当する遷移に記録します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトフィールドタイプの「Progress」フィールドを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストの段階に対応するUserPickerタイプのフィールドを作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次の手順を定義し、同じ名前のUserPickerフィールドを作成します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">収集された基本情報</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカライズされた</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">収集されたログ</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレイした</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">責任者が見つかりました</font></font><br>
</li>
</ul><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">責任者が移行を記入するようにワークフローを構成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、「ローカライズされた」遷移は、「ローカライズされた」UserPickerフィールドにcurrentUserを書き込みます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトフィールドを使用して表示をカスタマイズします。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グルーヴィーなブロックを埋める：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> com.atlassian.jira.component.ComponentAccessor
<span class="hljs-keyword">import</span> com.atlassian.jira.config.properties.APKeys<font></font>
<font></font>
baseUrl = ComponentAccessor.getApplicationProperties().getString(APKeys.JIRA_BASEURL)<font></font>
colorApprove = <span class="hljs-string">"#D2F0C2"</span>
colorNotApprove = <span class="hljs-string">"#FDACAC"</span>
<span class="hljs-keyword">return</span> getHTMLApproval()<font></font>
<font></font>
def getHTMLApproval(){<font></font>
   def approval = getApproval()<font></font>
   def html = <span class="hljs-string">"&lt;table class='aui'&gt;"</span><font></font>
   approval.each{k,v-&gt;<font></font>
       html += <span class="hljs-string">""</span><span class="hljs-string">"&lt;tr&gt;
           &lt;td ${v?"</span>bgcolor=<span class="hljs-string">'${colorApprove}'</span><span class="hljs-string">":"</span>bgcolor=<span class="hljs-string">'${colorNotApprove}'</span><span class="hljs-string">"}&gt;${k}&lt;/td&gt;
                       &lt;td ${v?"</span>bgcolor=<span class="hljs-string">'${colorApprove}'</span><span class="hljs-string">":"</span>bgcolor=<span class="hljs-string">'${colorNotApprove}'</span><span class="hljs-string">"}&gt;${v?displayUser(v):"</span><span class="hljs-string">"}&lt;/td&gt;
                       &lt;/tr&gt;"</span><span class="hljs-string">""</span><font></font>
   }<font></font>
   html += <span class="hljs-string">"&lt;/table&gt;"</span>
   <span class="hljs-keyword">return</span> html<font></font>
}<font></font>
<font></font>
def displayUser(user){<font></font>
   <span class="hljs-string">"&lt;a href=${baseUrl}/secure/ViewProfile.jspa?name=${user.name}&gt;${user.displayName}&lt;/a&gt;"</span><font></font>
}<font></font>
<font></font>
def getApproval(){<font></font>
   def approval = [:] <span class="hljs-keyword">as</span> LinkedHashMap
   <span class="hljs-keyword">if</span> (issue.getIssueTypeId() == <span class="hljs-string">'10001'</span>){ <span class="hljs-comment">//  - </span>
       approval.put(<span class="hljs-string">"  "</span>, getCfValue(<span class="hljs-number">54407</span>))<font></font>
       approval.put(<span class="hljs-string">" "</span>, getCfValue(<span class="hljs-number">54409</span>))<font></font>
       approval.put(<span class="hljs-string">""</span>, getCfValue(<span class="hljs-number">54410</span>))<font></font>
       approval.put(<span class="hljs-string">" "</span>, getCfValue(<span class="hljs-number">54411</span>))<font></font>
       approval.put(<span class="hljs-string">""</span>, getCfValue(<span class="hljs-number">54408</span>))<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> approval<font></font>
}<font></font>
<font></font>
def getCfValue(id){<font></font>
   ComponentAccessor.customFieldManager.getCustomFieldObject(id).getValue(issue)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
速度ブロックで、$値を出力します。</font><font style="vertical-align: inherit;">次の結果が得られます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e97/47c/0fe/e9747c0fe4fa0077c378e049d5f5643c.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートリクエスト</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツール： </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSインクルーダー</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私のグルーヴィー</font></font><br>
</li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクニカルサポートには、Confluenceに関する独自の知識ベースがあります。</font><font style="vertical-align: inherit;">Jiraクエリで問題関連のナレッジベース記事を表示する機能が必要です。</font><font style="vertical-align: inherit;">データベースを最新の状態に保つためのメカニズムも必要です。記事が役に立たなかった場合は、Jiraのテクニカルライターに現在の記事の執筆を依頼する必要があります。</font><font style="vertical-align: inherit;">リクエストを閉じるときは、リクエストに関連する記事のみを残してください。</font><font style="vertical-align: inherit;">リンクはテクニカルサポートにのみ表示されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jira（カスケードタイプフィールド）で特定のタイプのアクセスを選択すると、クエリは、それに対応するConfluenceの記事をwikiマークアップの別のフィールドに表示する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正常に使用された場合、記事はチェックボックスマークを使用して関連として選択されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題を解決する際に、添付の記事に記載されていない場合は、現在のリクエストに関連付けられた「Documentation」タイプのタスクをJiraで作成する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：準備</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikiマークアップ付きのテキストフィールド（複数行）を作成します-リンク。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ「選択リスト（カスケード）」のフィールドを作成します-「コールタイプ」。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次の値を使用します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アカウント </font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハードウェア </font></font><br>
</li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confluenceの記事とJiraのクエリを関連付ける記事のラベルを準備します。</font></font><br>
<br>
<ul>
<li>    AD — officeit_jira_____ad<br>
</li>
<li>/   — officeit_jira____<br>
</li>
<li>    — officeit_jira____<br>
</li>
<li>     — officeit_jira_____<br>
</li>
<li>    — officeit_jira____<br>
</li>
<li>   — officeit_jira___<br>
</li>
<li>   — officeit_jira___<br>
</li>
<li>        — officeit_jira________<br>
</li>
<li>      — officeit_jira______<br>
</li>
<li> /  — officeit_jira____<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Confluenceで記事を作成し、ラベルを付ける必要があります。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワークフローの準備。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成時にアピールの種類が入力されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リンクは別の画面に追加され、トランジションの近くに配置されます（この例では、トランジションは「実際のリンクをチェック」と呼ばれます）。トランジションIDを記憶しています（jsを構成するために将来必要です）。</font></font></li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MyGroovyポストファンクション（リクエストに記事を追加）</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">/*
:

  — customfield_40001
Links — customfield_50001
*/</span><font></font>
<font></font>
<span class="hljs-comment">/*
 ,      .
*/</span><font></font>
<font></font>
def usr = <span class="hljs-string">"bot"</span>
def pas = <span class="hljs-string">"qwerty"</span>
def url = <span class="hljs-string">"https://confluence.ru"</span>
def browse = <span class="hljs-string">"/pages/viewpage.action?pageId="</span><font></font>
<font></font>
<span class="hljs-comment">/*
 
*/</span><font></font>
<font></font>
def updateCustomFieldValue(issue, Long customFieldId, newValue) {<font></font>
   def customField = ComponentAccessor.customFieldManager.getCustomFieldObject(customFieldId)<font></font>
   customField.updateValue(<span class="hljs-literal">null</span>, issue, <span class="hljs-keyword">new</span> ModifiedValue(customField.getValue(issue), newValue), <span class="hljs-keyword">new</span> DefaultIssueChangeHolder())
   <span class="hljs-keyword">return</span> issue<font></font>
}<font></font>
def getCustomFieldObject(Long fieldId) {<font></font>
   ComponentAccessor.customFieldManager.getCustomFieldObject(fieldId)<font></font>
}<font></font>
def parseText(text) {<font></font>
   def jsonSlurper = <span class="hljs-keyword">new</span> JsonSlurper()
   <span class="hljs-keyword">return</span> jsonSlurper.parseText(text)<font></font>
}<font></font>
def getCustomFieldValue(issue, Long fieldId) {<font></font>
   issue.getCustomFieldValue(ComponentAccessor.customFieldManager.getCustomFieldObject(fieldId))<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/*
 ,      .
*/</span><font></font>
<font></font>
def getLabelFromMap(<span class="hljs-built_in">String</span> main, <span class="hljs-built_in">String</span> sub){<font></font>
   def mapLabels = [<font></font>
           <span class="hljs-string">"ACCOUNT"</span>: [
                   <span class="hljs-string">"    AD"</span>        :[<span class="hljs-string">"officeit_jira_____ad"</span>],
                   <span class="hljs-string">"/  "</span>        :[<span class="hljs-string">"officeit_jira____"</span>],
                   <span class="hljs-string">"   "</span>        :[<span class="hljs-string">"officeit_jira____"</span>],
                   <span class="hljs-string">"    "</span>            :[<span class="hljs-string">"officeit_jira_____"</span>],
                   <span class="hljs-string">"   "</span>                :[<span class="hljs-string">"officeit_jira____"</span>]<font></font>
           ],<font></font>
           <span class="hljs-string">"HARDWARE"</span>: [
                   <span class="hljs-string">"  "</span>        :[<span class="hljs-string">"officeit_jira___"</span>],
                   <span class="hljs-string">"  "</span>                :[<span class="hljs-string">"officeit_jira___"</span>],
                   <span class="hljs-string">"       "</span>:[<span class="hljs-string">"officeit_jira________"</span>],
                   <span class="hljs-string">"     "</span>:[<span class="hljs-string">"officeit_jira______"</span>],
                   <span class="hljs-string">" / "</span>:[<span class="hljs-string">"officeit_jira____"</span>]<font></font>
           ]<font></font>
   ]<font></font>
   def labels = mapLabels[main][sub]<font></font>
   def result = <span class="hljs-string">""</span><font></font>
<font></font>
   <span class="hljs-keyword">if</span>(!labels){
       <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">for</span> (def i=<span class="hljs-number">0</span>;i&lt;labels.size;i++){
       <span class="hljs-keyword">if</span>(i&lt;labels.size<span class="hljs-number">-1</span>){<font></font>
           result += <span class="hljs-string">"\""</span> +labels[i]+ <span class="hljs-string">"\","</span>
       }<span class="hljs-keyword">else</span>{<font></font>
           result += <span class="hljs-string">"\""</span> +labels[i]+ <span class="hljs-string">"\""</span><font></font>
       }<font></font>
   }<font></font>
   result = URLEncoder.encode(result, <span class="hljs-string">"utf-8"</span>)
   <span class="hljs-keyword">return</span> result<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/*
   —  .
*/</span><font></font>
<font></font>
def wikiLinkFieldId = <span class="hljs-number">50001</span>L<font></font>
def requestTypeFieldValue = getCustomFieldValue(issue, <span class="hljs-number">40001</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span>(!requestTypeFieldValue){
   <span class="hljs-keyword">return</span> <span class="hljs-string">"required field is empty"</span><font></font>
}<font></font>
<font></font>
def mainType = requestTypeFieldValue.getAt(<span class="hljs-literal">null</span>).toString()<font></font>
def subType = requestTypeFieldValue.getAt(<span class="hljs-string">'1'</span>).toString()<font></font>
<font></font>
<span class="hljs-comment">/*
    ,       : [TEST    1 (    AD)|https://confluence.ru/pages/viewpage.action?pageId=500001].
*/</span><font></font>
<font></font>
<span class="hljs-built_in">String</span> labels = getLabelFromMap(mainType,subType)<font></font>
<font></font>
<span class="hljs-keyword">if</span>(labels==<span class="hljs-string">""</span>){
   <span class="hljs-keyword">return</span> <span class="hljs-string">"no avalible position on LabelMap"</span><font></font>
}<font></font>
<font></font>
def api = <span class="hljs-string">"/rest/api/content/search?cql=label%20in(${labels})"</span><font></font>
def URL = (url+api)<font></font>
<font></font>
def wikiString = <span class="hljs-string">""</span><font></font>
<font></font>
def resp = <span class="hljs-string">"curl -u ${usr}:${pas} -X GET ${URL}"</span>.execute().text<font></font>
def result = parseText(resp)<font></font>
def ids = result.results.id<font></font>
def title = result.results.title<font></font>
<font></font>
<span class="hljs-keyword">for</span> (def i=<span class="hljs-number">0</span>;i&lt;ids.size;i++){<font></font>
   wikiString += <span class="hljs-string">"[${title[i]}|${url+browse+ids[i]}]\n"</span><font></font>
}<font></font>
<font></font>
updateCustomFieldValue(issue,wikiLinkFieldId,wikiString)<font></font>
<span class="hljs-keyword">return</span> <span class="hljs-string">"Done"</span>
</code></pre><br>
<img src="https://habrastorage.org/getpro/habr/post_images/959/a98/eac/959a98eac782a2e53bf6a8c37d7b9a12.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：JSスクリプト</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">/*
:

 — Check actual Links
id  — 10
Links — customfield_50001
*/</span><font></font>
<font></font>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>)</span>{<font></font>
  <font></font>
   <span class="hljs-comment">/*
     ,    ,                .
   */</span><font></font>
  <font></font>
   <span class="hljs-keyword">var</span> buttonNewArticle = <span class="hljs-string">'  '</span>;
   <span class="hljs-keyword">var</span> buttonDeleteUnchecked = <span class="hljs-string">' '</span>;
   <span class="hljs-keyword">var</span> buttonNewArticleTitle = <span class="hljs-string">'      '</span>;
   <span class="hljs-keyword">var</span> buttonDeleteUncheckedTitle = <span class="hljs-string">'    .'</span>;
   <span class="hljs-keyword">var</span> avalibleTransitions = [<span class="hljs-number">10</span>];
   <span class="hljs-keyword">var</span> currentTransition = <span class="hljs-built_in">parseInt</span>(AJS.$(<span class="hljs-string">'.hidden input[name^="action"]'</span>).val());<font></font>
  <font></font>
   <span class="hljs-keyword">if</span>(avalibleTransitions.indexOf(currentTransition)==<span class="hljs-number">-1</span>){
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Error: transition '</span> + currentTransition + <span class="hljs-string">' is not avalible'</span>);
       <span class="hljs-keyword">return</span>;<font></font>
   }<font></font>
  <font></font>
   <span class="hljs-keyword">var</span> customFieldId = <span class="hljs-number">50001</span>;
   <span class="hljs-keyword">var</span> labelTxt = <span class="hljs-string">'  '</span>;
   <span class="hljs-keyword">var</span> idname = <span class="hljs-string">'cblist'</span>;
   <span class="hljs-keyword">var</span> checkboxCounter = <span class="hljs-string">'cbsq'</span>;
   <span class="hljs-keyword">var</span> text = <span class="hljs-string">'&lt;div class="field-group"&gt;&lt;label for="'</span>+idname+<span class="hljs-string">'"&gt;'</span> + labelTxt +<span class="hljs-string">'&lt;/label&gt;&lt;div id="'</span>+idname+<span class="hljs-string">'"&gt;&lt;/div&gt;&lt;/div&gt;'</span>
   AJS.$(<span class="hljs-string">'.field-group label[for^="customfield_'</span>+customFieldId+<span class="hljs-string">'"]'</span>).parent().hide();<font></font>
   AJS.$(<span class="hljs-string">'.field-group label[for^="comment"]'</span>).parent().hide();<font></font>
   $(<span class="hljs-string">'.jira-dialog-content div.form-body'</span>).prepend(text);<font></font>
  <font></font>
   <span class="hljs-comment">/*
      :
   */</span><font></font>
  <font></font>
   <span class="hljs-comment">/*
   renameButtonNeedNewArticle  renameButtonDeleteUnchecked —   « »           
   addCheckbox —     .
   */</span><font></font>
  <font></font>
   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayToString</span>(<span class="hljs-params">arrays</span>) </span>{
       <span class="hljs-keyword">return</span> arrays.join(<span class="hljs-string">'\n'</span>);<font></font>
   }<font></font>
  <font></font>
   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renameButtonNeedNewArticle</span>(<span class="hljs-params"></span>) </span>{<font></font>
       $(<span class="hljs-string">'#issue-workflow-transition-submit'</span>).val(buttonNewArticle);<font></font>
       $(<span class="hljs-string">'#issue-workflow-transition-submit'</span>).attr(<span class="hljs-string">"title"</span>,buttonNewArticleTitle);<font></font>
   }<font></font>
  <font></font>
   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renameButtonDeleteUnchecked</span>(<span class="hljs-params"></span>) </span>{<font></font>
       $(<span class="hljs-string">'#issue-workflow-transition-submit'</span>).val(buttonDeleteUnchecked);<font></font>
       $(<span class="hljs-string">'#issue-workflow-transition-submit'</span>).attr(<span class="hljs-string">"title"</span>,buttonDeleteUncheckedTitle);<font></font>
   }<font></font>
  <font></font>
   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addCheckbox</span>(<span class="hljs-params">array</span>) </span>{
       <span class="hljs-keyword">var</span> value = array.join(<span class="hljs-string">'|'</span>);
       <span class="hljs-keyword">var</span> name = array[<span class="hljs-number">0</span>].replace(<span class="hljs-string">'['</span>,<span class="hljs-string">''</span>);
       <span class="hljs-keyword">var</span> link = array[<span class="hljs-number">1</span>].replace(<span class="hljs-string">']'</span>,<span class="hljs-string">''</span>);
       <span class="hljs-keyword">var</span> container = $(<span class="hljs-string">'#'</span>+idname);
       <span class="hljs-keyword">var</span> inputs = container.find(<span class="hljs-string">'input'</span>);
       <span class="hljs-keyword">var</span> id = inputs.length+<span class="hljs-number">1</span>;<font></font>
       $(<span class="hljs-string">'&lt;input /&gt;'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'checkbox'</span>, <span class="hljs-attr">id</span>: checkboxCounter+id, <span class="hljs-attr">value</span>: value }).appendTo(container);<font></font>
       $(<span class="hljs-string">'&lt;label /&gt;'</span>, { <span class="hljs-attr">for</span>: checkboxCounter+id, <span class="hljs-attr">text</span>: <span class="hljs-string">' '</span>  }).appendTo(container);<font></font>
       $(<span class="hljs-string">'&lt;a /&gt;'</span>, { <span class="hljs-attr">href</span>: link, <span class="hljs-attr">text</span>: name,<span class="hljs-attr">target</span>: <span class="hljs-string">"_blank"</span> }).appendTo(container);<font></font>
       $(<span class="hljs-string">'&lt;br&gt;'</span>).appendTo(container);<font></font>
   }<font></font>
  <font></font>
   <span class="hljs-comment">/*
         ,   :
   */</span><font></font>
  <font></font>
   renameButtonNeedNewArticle();<font></font>
  <font></font>
   $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
       <span class="hljs-keyword">var</span> val = AJS.$(<span class="hljs-string">'#customfield_'</span>+customFieldId+<span class="hljs-string">''</span>).val();<font></font>
       AJS.$(<span class="hljs-string">'#customfield_'</span>+customFieldId+<span class="hljs-string">''</span>).val(<span class="hljs-string">''</span>);
       <span class="hljs-keyword">if</span>(val==<span class="hljs-string">""</span>){<span class="hljs-keyword">return</span>;}
       <span class="hljs-keyword">var</span> i = val.split(<span class="hljs-string">'\n'</span>);<font></font>
       i.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> index </span>) </span>{
           <span class="hljs-keyword">if</span>(index == <span class="hljs-string">""</span>){<span class="hljs-keyword">return</span>;}
           <span class="hljs-keyword">var</span> link = index.split(<span class="hljs-string">'|'</span>);<font></font>
           addCheckbox(link);<font></font>
       });<font></font>
   });<font></font>
  <font></font>
   <span class="hljs-comment">/*
            Links.
   */</span><font></font>
  <font></font>
   $(<span class="hljs-string">'#'</span>+idname+<span class="hljs-string">' input[type="checkbox"]'</span>).change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
       <span class="hljs-keyword">var</span> prevalue = [];<font></font>
       AJS.$(<span class="hljs-string">'#'</span>+idname+<span class="hljs-string">' input:checkbox:checked'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<font></font>
           prevalue.push(<span class="hljs-keyword">this</span>.value);<font></font>
       });<font></font>
       AJS.$(<span class="hljs-string">'#customfield_'</span>+customFieldId+<span class="hljs-string">''</span>).val(arrayToString(prevalue));
       <span class="hljs-keyword">if</span>(prevalue.length&lt;<span class="hljs-number">1</span>){<font></font>
           renameButtonNeedNewArticle();<font></font>
       }<span class="hljs-keyword">else</span>{<font></font>
           renameButtonDeleteUnchecked();<font></font>
       }<font></font>
   });<font></font>
})(AJS.$);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、JS処理前の遷移です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/662/deb/79f/662deb79f92137320bc5135130ccefdb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが処理後の遷移です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d4d/71e/c1f/d4d71ec1f7ccef66c8d659b2c250a6de.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、1つ以上の記事が選択された場合。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cdc/703/ef9/cdc703ef953ed3247eaa66b8c0cbb37f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移行が完了すると、[リンク]フィールドが新しい値で上書きされます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：MyGroovyポストファンクション（新しい記事のリクエストを作成する）[ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際のリンクの確認]遷移で、[リンク]フィールドに値がない場合に「ドキュメント」タイプのリクエストを作成するスクリプトを記述します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最終的に</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのソリューションは、主に既製のツールを積極的に使用したり、自動化する必要のあるタスクに直面している同僚の積極的な参加なしには現れませんでした。</font><font style="vertical-align: inherit;">多くの場合、興味深いタスクはすでに解決策の半分であることがわかります。次に、最も効率的、簡単かつ簡単に（エンドユーザーにとって）ニーズを満たすツールを選択するだけです。</font><font style="vertical-align: inherit;">さて、おそらく、あなたは提示されたプラグインをさらに良くすることができる質問と提案を持っています-コメントに書き込んでください。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476430/index.html">完璧な技術ポートフォリオを作成する方法</a></li>
<li><a href="../ja476434/index.html">放棄されたデバイス用のUSBドライバーの作成</a></li>
<li><a href="../ja476436/index.html">ロボットオペレーティングシステムに関するロボット開発者のロシアでの最初の会議からのレポート</a></li>
<li><a href="../ja476442/index.html">いくつかのスペースまたは周波数計のようなマイクロコントローラを与える</a></li>
<li><a href="../ja476444/index.html">量子コンピューティングの原理の解明</a></li>
<li><a href="../ja476448/index.html">ジャーニーゲームのサンドシェーダーの探索</a></li>
<li><a href="../ja476450/index.html">cPanelの概要-サイトの管理とホスティングのためのWebベースのコンソール</a></li>
<li><a href="../ja476452/index.html">Key-Valueストレージ、またはアプリケーションがより便利になった方法</a></li>
<li><a href="../ja476454/index.html">5Gの到来：2020年に新技術の導入を確実にする企業</a></li>
<li><a href="../ja476456/index.html">中国の社会的信用システムは、まず第一に、市民評価システムではなく、大規模なAPIです。</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>