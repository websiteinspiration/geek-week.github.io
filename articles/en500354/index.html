<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüé® üíÖ üë©‚Äçüç≥ A new way to track data in Google Tag Manager - Server-Side Tagging üëãüèª üßóüèº üòî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to tell you about a new feature from Google Tag Manager - Server-Side Tagging - tracking data on the server side. This function...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A new way to track data in Google Tag Manager - Server-Side Tagging</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500354/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this article I want to tell you about a new feature from Google Tag Manager - Server-Side Tagging - tracking data on the server side. </font><font style="vertical-align: inherit;">This functionality, according to its developers, allows you to hide business logic in server code, speed up site loading and improve user data protection by restricting access to third-party scripts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's take a closer look at how this works.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is the difference between Client-Side and Server-Side Tracking</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Most existing tag managers, analytical systems and advertising services collect data using the Client-Side Tracking method, that is, on the client side. </font><font style="vertical-align: inherit;">How it works? </font><font style="vertical-align: inherit;">There is a website or application that has a specific browser installed, and there is a third-party service, such as Google Analytics. </font><font style="vertical-align: inherit;">The browser sends the request directly to this service and, if necessary, receives a response. </font><font style="vertical-align: inherit;">That is, the interaction occurs between two parties: a browser and a third-party service.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/4b/us/ds4bus_mvjfd8q1sk52m_0ysszy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When tracking data on the server side (Server-Side Tracking), an intermediate point is added. </font><font style="vertical-align: inherit;">In the case of Google Tag Manager, it is a cloud server. </font><font style="vertical-align: inherit;">From the client side, the request goes first to the cloud server, then the server processes this request and sends it to a third-party system (Google Analytics). </font><font style="vertical-align: inherit;">That is, instead of the client‚Äôs browser, the request is made by the cloud server.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gc/la/ng/gclang-u_bcky4xgjvcn3r0hsbi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's take a closer look at the main advantages and disadvantages of both methods of data collection.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client Side Tracking</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is the most common way to collect data from a site. </font><font style="vertical-align: inherit;">Tracking on the side of the user‚Äôs browser allows you to receive data from cookies, URL parameters, referring sources, user device information, IP address, etc. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benefits</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is the standard that is used by all tag managers known to you and which most analysts are used to.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client-side tracking is easy to configure. </font><font style="vertical-align: inherit;">Many systems provide ready-made code fragments that you just need to copy and place on the pages of the site.</font></font></li>
<li> . ,   ,       Chrome      Google Tag Manager.</li>
<li>Client-Side Tracking,  ,   Server-Side Tracking,        .</li>
</ol><br>
<b></b><br>
<br>
<ol>
<li>         . ,          .</li>
<li>      ,     ,    .     ITP ‚Äî    Safari   ,     cookie    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data is less secure than with Server-Side Tracking. </font><font style="vertical-align: inherit;">So, you cannot transfer confidential information from the site in this way, for example, email and user phone numbers or margins.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server side tracking</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server-Side Tracking is an alternative to the usual client-side tracking method, which allows you to solve the problem with ad blockers, the transfer of confidential data and page loading speed. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benefits</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sending requests does not depend on the version or on the type of your browser. </font><font style="vertical-align: inherit;">All requests are processed on the server side, so ad blockers, ITP, ETP or an interrupted connection do not affect the quality of your data.</font></font></li>
<li>    ,  ,  c     Google Analytics  ,       ,  ,   .</li>
<li>Server-Side Tracking             ,         .</li>
<li>         .  ,    ,       .  Server-Side Tracking     .</li>
</ol><br>
<b></b><br>
<br>
<ol>
<li>          .</li>
<li>   .         .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Not suitable for collecting information from SPA or PWA pages.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Not all systems use tags that are available for server-side tracking.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The method is not convenient for collecting URL parameters. </font><font style="vertical-align: inherit;">They are much easier to collect on the client side, as this data appears in the browser.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's look at the benefits of Server-Side Tracking that the Google Tag Manager team has focused on.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GTM Server-Side Tracking: Claimed Benefits</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server-side tracking allows you to hide the business logic of your site interacting with third-party applications by moving it to the backend. That is, the user will not be able to access the information and logic that you use to transfer data. For example, you can send honest margins to GA and on the client side in the user's browser there will not even be such a variable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This method is safer in terms of data movement. The information that you want to send for analytics, for example, a segment from CRM, gender or something else related to the user, now does not need to be sent to the browser. Accordingly, this will not be available to other JS scripts in the browser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As it happened before: let's say you want to get the hash of the phone number or gender or user address in GA. </font><font style="vertical-align: inherit;">To send this information, you must make it available in the DataLayer. </font><font style="vertical-align: inherit;">And the information from the DataLayer is available to all JavaScript that loaded in the browser. </font><font style="vertical-align: inherit;">This is a common scope, there are no private variables, unlike Python, for example. </font><font style="vertical-align: inherit;">If you pass this information through the backend, then it is not available in the user's JavaScript browser environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to data security, among the advantages of Server-Side Tracking, the Google team also highlights the opportunity to increase the speed of loading the site.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to try Server-Side Tagging in Google Tag Manager</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unfortunately, there is no way to share with you instructions on how to configure server-side tracking, as this is a beta version with limited access. </font><font style="vertical-align: inherit;">To access it, you need to fill out and submit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a Whitelist form</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to Google </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After you get permission and instructions from Google, to configure Server-Side Tracking you will need:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Cloud Platform Account</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Access to your site‚Äôs domain name registrar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Access to publish content on your site, since the method requires the placement of a GTM container</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We at OWOX BI have already managed to test the new functionality. In a nutshell, how it works and what is the difference from standard tracking using Google Tag Manager. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How Client-Side Tracking Works</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : We have a website or application. We install the container on the GTM website and configure the tags in it. The container then sends the data to GA. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/3a/8y/ye3a8yyjt0wzvmhxaqecjovjns8.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How Server-Side Works</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : We have a website or application. Again, we are setting up a GTM web container with all the tags. Next, we set up the environment on a dedicated domain. Set up a container for this environment. And the request already leaves not directly from the browser through a web container, but through an intermediate link in the form of a cloud server: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/5a/mq/zu5amq-x80wajy58qkcwaraqhkm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the standard configuration of the Google Analytics resource, data begins to be collected into it:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hb/ji/hd/hbjihdhbtna5you9mb-kkqrd_we.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is an additional charge for using a cloud server, which depends on the number of users and requests on your site.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Should I use server-side tracking? </font><font style="vertical-align: inherit;">The answer to this question depends on what data you want to collect and for what purposes; </font><font style="vertical-align: inherit;">what is more important for you is the opportunity to save time and money or the ability to transfer sensitive data to the analytics system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the functionality is still in beta, switching to it completely and disabling regular tracking is not worth it (and it won‚Äôt work out). </font><font style="vertical-align: inherit;">However, you can now request access from the Google team to test Server-Side Tracking and decide if it will be useful for your business.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500342/index.html">What podcasts does the ‚ÄúCommittee‚Äù, ‚ÄúHabr‚Äù and Sports.ru have</a></li>
<li><a href="../en500344/index.html">Smart home on wheels ... Alice. Part 2. ZIGBEE</a></li>
<li><a href="../en500346/index.html">Problems with DNS in Kubernetes. Public post-mortem</a></li>
<li><a href="../en500348/index.html">COVID-19 pandemic through the eyes of a mathematician, or why the classic SEIRD model does not work</a></li>
<li><a href="../en500352/index.html">How to get an internship on Facebook and get an offer in London? Ask a Facebook Engineer a Question</a></li>
<li><a href="../en500356/index.html">Direct file transfer between devices via WebRTC</a></li>
<li><a href="../en500360/index.html">Best SQL Medium Difficulty Interviewing Questions</a></li>
<li><a href="../en500364/index.html">Expanding the school learning portal on Moodle and BigBlueButton</a></li>
<li><a href="../en500368/index.html">Generating predictable random sequences: a different approach to permutation</a></li>
<li><a href="../en500370/index.html">10 useful English-language podcasts for programmers worth subscribing to in 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>