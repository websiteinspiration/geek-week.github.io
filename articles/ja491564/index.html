<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♎️ 🐳 📋 Java 14：Record、より簡潔なinstanceof、jpackageラッパー、スイッチラムダとテキストブロック 👩🏿‍🔬 👨🏻‍⚕️ 🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD。今日は待望のJava 14のリリースです。LTSでなくても、十分な新機能があります。Java 14は数時間で利用可能になります-しかし、今すぐそれを知ることができます。
 
 
 
 Java 14では、コードを書くレベルでも、API、GC、その他の多くのエンジンフードレベルでも、十分な変更...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Java 14：Record、より簡潔なinstanceof、jpackageラッパー、スイッチラムダとテキストブロック</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491564/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD。</font><font style="vertical-align: inherit;">今日は待望のJava 14のリリースです。LTSでなくても、十分な新機能があります。</font><font style="vertical-align: inherit;">Java 14は数時間で利用可能になります-しかし、今すぐそれを知ることができます。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/us/u0/ae/usu0aephljxik4pjtyk6baaapyc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Java 14では、コードを書くレベルでも、API、GC、その他の多くのエンジンフードレベルでも、十分な変更が加えられています。</font><font style="vertical-align: inherit;">KotlinまたはPythonのスーパーチップについて知っていれば、心配する必要はありません。高い確率でJavaにすぐに表示されると確信できます。</font><font style="vertical-align: inherit;">いずれにしても、今日のリリースにはそれらのいくつかが含まれています。</font><font style="vertical-align: inherit;">しかし、まず最初に。</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Java 14では、次のイノベーションが待ち受けています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP305。instanceofでチェックされるオブジェクトへの参照を割り当てます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP343。packerjpackage（Incubator）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP345。G1のNUMAベースのメモリ割り当て。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP349。JFRを介したストリーミングイベント。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP352。不変のマップされたバイトバッファー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP358。NullPointerExceptionに関するヒント。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jep359。記録。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP361。ラムダを切り替えます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP362。SolarisおよびSPARCポートは非​​推奨になりました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP363。以前は非推奨としてマークされていたConcurent Mark Sweepガベージコレクターの削除。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP364。macOSでのZGCの移植。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP365。ZGCをWindowsに移植。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP366。ParallelScavenge+ SerialOld GCの組み合わせは非推奨になりました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP367。Pack200からツールとAPIを削除します（Java 11では非推奨としてマークされていました）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP368。テキストブロック。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP370。外部メモリアクセスAPI（インキュベーター）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それぞれの改善についてお話ししましょう。そのいくつかについては、後で詳しく説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP305。instanceofでチェックされたオブジェクトへの参照の割り当て</font></font></h2><br>
<img src="https://habrastorage.org/webt/7a/pm/o-/7apmo-a8gbn7oj4tqu-9-iv6vcq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
instanceofを使用してオブジェクトのタイプをチェックする状況を考えます。</font><font style="vertical-align: inherit;">ClassCastExceptionのリスクを冒すことなく、オブジェクトを必要なタイプに明示的にカスタマイズする場合は、まずオブジェクトが必要なタイプであることを確認する必要があります。</font></font><br>
<br>
<pre><code class="java hljs">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showNameIfToy</span><span class="hljs-params">(Object o)</span> </span>{
        <span class="hljs-keyword">if</span> (o <span class="hljs-keyword">instanceof</span> Toy) {  <span class="hljs-comment">//,    -  Toy</span>
            Toy t = (Toy) o;  <span class="hljs-comment">//  </span>
            System.out.println(<span class="hljs-string">"Toy's name: "</span> + t.getName());  <span class="hljs-comment">//-   </span><font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみにこの例では、常に発生します。a）目的のタイプのオブジェクトがあることを確認します。b）リンクを割り当てます。c）ロジックに基づいて、何かを行います。</font><font style="vertical-align: inherit;">オラクルでは、この特定の設計に特定の見事なコードが見られ、それを1ステップだけ減らすことにしました。</font><font style="vertical-align: inherit;">これで次のように書くことができます：</font></font><br>
<br>
<pre><code class="java hljs">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showNameIfToy</span><span class="hljs-params">(Object o)</span> </span>{
        <span class="hljs-keyword">if</span> (o <span class="hljs-keyword">instanceof</span> Toy t) {  <span class="hljs-comment">//      </span>
            System.out.println(<span class="hljs-string">"Toy's name: "</span> + t.getName());  <span class="hljs-comment">//     </span><font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてが本当に便利で便利な方法です。読者の皆さん、私はあなたの判断に任せます。</font><font style="vertical-align: inherit;">はい、確かに、この形式のこの構造は、おそらく、instanceofに関連する99％のケースで発生し、おそらく、単純化が根付くでしょう（またはそうでないかもしれません）。</font><font style="vertical-align: inherit;">時間がたてば分かる。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP343。jpackagePacker（インキュベーター）</font></font></h2><br>
<img src="https://habrastorage.org/webt/qy/hk/2d/qyhk2diseyyhq_rysnopvdiq1gk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たち、開発者は撃たれた男です、dzharnikのインストールで怖がることはありませんが、JVMをインストールするときに他の30億台のマシンにインストールされていることを知りたくない、Javaクロスプラットフォームについて知りたくないが、2を突破したいだけの単純なユーザーはどうでしょうか。 Windowsの場合は.exeファイルを数回実行します。または、ケシの場合は.appアプリケーションをアプリケーションフォルダーにドラッグアンドドロップし、スチームしませんか？</font><font style="vertical-align: inherit;">プログラマがすべての条件を作成して、エンドユーザーが使い慣れた「実行可能ファイル」にアプリケーションをパックする方法を教えてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oracleが問題を認識し、プラットフォームに適した形式でアプリケーションをすぐにパッケージ化するパッカーを作成することを決めたようです：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux：debおよびrpm </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macOS：pkgおよびdmg </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows：msiおよびexe </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のようになります。</font></font><br>
<br>
<pre><code class="bash hljs">$ jpackage --name myapp --input lib --main-jar main.jar --<span class="hljs-built_in">type</span> exe</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
--name </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
myapp- </font><font style="vertical-align: inherit;">アプリケーションの将来の名前</font><font style="vertical-align: inherit;">--input lib-jarアーカイブのソース</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
--main-jar main.jar-メインクラスを含むアーカイブの名前</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
--type </font><font style="vertical-align: inherit;">exe- </font><font style="vertical-align: inherit;">アプリケーションがパッケージ化されるタイプ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージ化後、myapp.exe（Windowsを使用している場合）をダブルクリックして、通常のWindowsアプリケーションとしてインストールできます。グラフィカルインターフェイスはJavaFXによって提供されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなアプリケーションをWindowsプラットフォームを使用して構築してみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ここからプロジェクトを見てみましょう：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">//github.com/promoscow/bouncer</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
GETリクエストを送信すると、「バウンス成功」とタイムスタンプのメッセージが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dzharnikを置く。 Gradleがあるので、それはbuild / libsフォルダーにあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/bz/eg/bfbzeg3ansxdehnqoudd76-fcbw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビルドフォルダーに移動し、必要な最小限のコマンドを入力します。</font></font><br>
<br>
<pre><code class="bash hljs">jpackage --name bouncer --input libs --main-jar bouncer.jar --<span class="hljs-built_in">type</span> exe</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、exe-shnikを取得しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/56/-k/nm/56-knmpxzinlb7nwtm3owmkn2pa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行可能ファイルを2回突くと、アプリケーションの通常のインストールが行われます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うわー！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a3/ck/jk/a3ckjkvq0hs7flr4towxmah19h4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションがインストールされ、翼の中で待っています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program Filesのbouncerフォルダーで、bouncer.exeを実行できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2k/y_/vc/2ky_vc98fu1a7msjhss9v_m59dk.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP345。G1のNUMA割り当てメモリ割り当て</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような問題があります-NUMA、Non-Uniform Memory Access、不均等なメモリアクセス。つまり、マルチセクションマシンのリモートソケットへのアクセスには、特にG1ガベージコレクターの場合、かなりの時間がかかる可能性があります。 Java 14では、この問題を次のように解決しようとしました</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。G1ヒープは、固定サイズの領域のセットとして編成されています。領域は通常、物理ページのコレクションですが、大きなページ（-XX：+ UseLargePagesを使用）を使用する場合、複数の領域で1つの物理ページを構成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JVMの初期化中に+ XX：+ UseNUMAパラメータを追加すると、領域は使用可能なNUMAノードの総数に均等に分散されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オラクルは、このアプローチは完全に柔軟性があるわけではありませんが、将来的には改善されると約束しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 349. JFRによるストリーミングイベント</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Javaには、JFR-Java Flight Recording-オンザフライでイベントを記録する機能があります。これにより、アプリケーションの実行中に約500種類のイベントを監視できます。</font><font style="vertical-align: inherit;">問題は、それらのほとんどがログでしか表示できないことです。</font><font style="vertical-align: inherit;">Oracleによって提供される改善点は、イベントに応答して呼び出されるラムダ関数などのハンドラーを実装することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは次のようになります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">try</span> (<span class="hljs-keyword">var</span> rs = <span class="hljs-keyword">new</span> RecordingStream()) {<font></font>
  rs.enable(<span class="hljs-string">"jdk.CPULoad"</span>).withPeriod(Duration.ofSeconds(<span class="hljs-number">1</span>));<font></font>
  rs.onEvent(<span class="hljs-string">"jdk.CPULoad"</span>, event -&gt; System.out.println(event.getFloat(<span class="hljs-string">"machineTotal"</span>)));<font></font>
  rs.start();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このイベントは毎秒、コンソールへのプロセッサー負荷を表示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/m_/bp/8bm_bpzyy8qacbkj7grka4oyr3c.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 358. NullPointerExceptionに関するヒント</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード内のエラーの検索を簡略化するように設計された、もう1つの明らかな便利さ。</font><font style="vertical-align: inherit;">建設を想像してみてください-惑星、惑星には多くの国があり、どの国にも多くの都市があります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Planet</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> List&lt;Country&gt; countries;
    <span class="hljs-comment">//...</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Country</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> List&lt;City&gt; cities;
    <span class="hljs-comment">//...</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">City</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-comment">//...</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地球上のすべての都市のハッシュコードを表示することにしました。</font></font><br>
<br>
<pre><code class="java hljs">planet.getCountries().forEach(c -&gt; c.getCities().forEach(city -&gt; city.hashCode()));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、彼らはフィールドの必須の初期化については考えていませんでした。</font><font style="vertical-align: inherit;">そして、ある時点でNullPointerExceptionが発生しました。</font></font><br>
<br>
<pre><code class="java hljs">Exception in thread <span class="hljs-string">"main"</span> java.lang.NullPointerException<font></font>
	at ru.xpendence.jep_358_nullpointerexception.Main.main(Main.java:<span class="hljs-number">19</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのフィールドにnullがありますか？</font><font style="vertical-align: inherit;">惑星？</font><font style="vertical-align: inherit;">国？</font><font style="vertical-align: inherit;">市???? </font><font style="vertical-align: inherit;">我々は知りません。</font><font style="vertical-align: inherit;">ブレークポイントを正しい行に置き、ため息をついて、ディベースします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Java 14では、NullPointerExceptionがより有益です。</font></font><br>
<br>
<pre><code class="java hljs">Exception in thread <span class="hljs-string">"main"</span> java.lang.NullPointerException: Cannot assign field <span class="hljs-string">"cities"</span> because <span class="hljs-string">"countries"</span> is <span class="hljs-keyword">null</span>
     at Main.main(Main.java:<span class="hljs-number">21</span>)<font></font>
     ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてすぐにすべてが明確になります。</font><font style="vertical-align: inherit;">国はnullです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP359。記録</font></font></h2><br>
<img src="https://habrastorage.org/webt/us/7z/al/us7zaleyxjn5obz6_8gaufbpdgu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oracleがリリースサイクルを6か月に変更したのも当然です。 IT業界の地殻変動は、そのようなリーダーでさえもより速く動くようにします。たとえば、KotlinとPythonが登場した時点でJavaの影響を受けている場合（とにかく、これがWikipediaでPythonについて述べていることです）、Javaはいわばそのフォロワーを調べています。 Pythonについては低くなりますが、Oracleの次の機能はKotlinで正確に確認されました。これは、Javaでは現在レコードと呼ばれるデータクラスに関するものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データクラスとは通常のPOJOを書いてみましょう：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Station</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> Coordinates coordinates;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> name;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Coordinates <span class="hljs-title">getCoordinates</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> coordinates;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCoordinates</span><span class="hljs-params">(Coordinates coordinates)</span> </span>{
        <span class="hljs-keyword">this</span>.coordinates = coordinates;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
        PlainStation that = (PlainStation) o;<font></font>
        <span class="hljs-keyword">return</span> Objects.equals(name, that.name) &amp;&amp;<font></font>
                Objects.equals(coordinates, that.coordinates);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Objects.hash(name, coordinates);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"PlainStation{"</span> +
                <span class="hljs-string">"name='"</span> + name + <span class="hljs-string">'\''</span> +
                <span class="hljs-string">", coordinates="</span> + coordinates +
                <span class="hljs-string">'}'</span>;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにすべてがあります-ゲッター、セッター、イコール、ハッシュコード、toString ...なんとかしてこの不名誉を取り除くために、善良な人々がロンボクを思い付きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetbrainsでは、この問題は、Kotlinのデータクラスを発明することで、より根本的な方法で一度に解決されました。</font><font style="vertical-align: inherit;">すべての標準メソッドを持つこのようなクラスは、次のようになります。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Station</span></span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> coordinates: Coordinates)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以上です。</font><font style="vertical-align: inherit;">オラクルでは、この設計を見て、まったく同じことをしたようですが、記録のみ：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> record <span class="hljs-title">RecordStation</span><span class="hljs-params">(String name, List&lt;Coordinates&gt; coordinates)</span> </span>{}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準のゲッター、セッター、イコール、ハッシュコード、toStringが含まれています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このタイプのクラスは、IDEA 2020.1ですでに作成できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POJOとの違いは何ですか？</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レコードはどのクラスからも継承できません。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの記述時にコンストラクターで宣言されたフィールドを除いて、レコードにはオブジェクトの他のフィールドを含めることはできません（そう、これはデフォルトのコンストラクターです）。</font><font style="vertical-align: inherit;">静的-できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドは暗黙的に最終です。</font><font style="vertical-align: inherit;">オブジェクトは暗黙的に最終です。</font><font style="vertical-align: inherit;">抽象的であることの不可能性のように、すべての結果を伴います。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、このような不変のデータクラスであり、複雑な論理アクションを目的としたものではなく、データ転送を目的としたものであることがわかりました。それがすべてです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 361.スイッチラムダ</font></font></h2><br>
<img src="https://habrastorage.org/webt/td/bv/sa/tdbvsa6l6cmnjqbaxukwjggnrtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oracleがスイッチをしっかりと採用しているようです。</font><font style="vertical-align: inherit;">現在のリリース以前は、かなりかさばったデザインで、次のように見えました。</font></font><br>
<br>
<pre><code class="java hljs">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">translateDayOfWeekOld</span><span class="hljs-params">(String dayOfWeek)</span> </span>{
        <span class="hljs-keyword">switch</span> (dayOfWeek) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"MONDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"TUESDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"WEDNESDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"THURSDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"FRIDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"SATURDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"SUNDAY"</span>:<font></font>
                System.out.println(<span class="hljs-string">""</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:<font></font>
                System.out.println(<span class="hljs-string">"Day of week not found, try again with today day of week"</span>);<font></font>
                String displayName = LocalDate.now().getDayOfWeek().name();<font></font>
                translateDayOfWeek(displayName);<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つの条件の処理には、ケース、アクション、ブレークの少なくとも3行が必要です。</font><font style="vertical-align: inherit;">スイッチの機能が強化されたので、上記の構成を次のように短縮できます。</font></font><br>
<br>
<pre><code class="java hljs">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">translateDayOfWeek</span><span class="hljs-params">(String dayOfWeek)</span> </span>{
        <span class="hljs-keyword">switch</span> (dayOfWeek) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"MONDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"TUESDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"WEDNESDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"THURSDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"FRIDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"SATURDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"SUNDAY"</span> -&gt; System.out.println(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">default</span> -&gt; {<font></font>
                System.out.println(<span class="hljs-string">"Day of week not found, try again with today day of week"</span>);<font></font>
                String displayName = LocalDate.now().getDayOfWeek().name();<font></font>
                translateDayOfWeek(displayName);<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同意し、非常にコンパクトでファッショナブルで、ラムダを使用します。</font><font style="vertical-align: inherit;">それだけの価値がありますか、あなたが決めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、古いルールに従って書かれたスイッチIDEA 2020.1は、新しい方法で書き直すことを慎重に提案しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6g/vc/-k/6gvc-klmcnwryt4hnukssulzaqe.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 362. SolarisおよびSPARCポートは非​​推奨になりました</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが簡単です。</font><font style="vertical-align: inherit;">Oracleは、SolarisおよびSPARCポートのサポートにリソースを費やす価値はないと判断し、解放された従業員は新機能の開発に切り替える必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP363。以前は非推奨としてマークされていたConcurent Mark Sweepガベージコレクターの削除</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CMSガベージコレクターの削除については、2年前の9番目のリリースで議論されました。</font><font style="vertical-align: inherit;">この間、ZGCとシェナンドーの2つのガベージコレクターが出てきました。</font><font style="vertical-align: inherit;">同時に、信頼できるOracleの貢献者の1人がCMSサポートに注意を払いませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、医者は遺体安置所に、そして遺体安置所に言いました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 364、365。macOSおよびWindowsでのZGCの移植</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、アプリケーションはLinuxプラットフォームに展開しますが、ローカル開発ではWindowsとMacを使用することがよくあります。</font><font style="vertical-align: inherit;">これらのニーズのために、Java 14はZGCガベージコレクターをこれら2つのプラットフォームに移植しました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP366。ParallelScavenge+ SerialOld GCの組み合わせが非推奨に</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
若いParallelScavengeがSerialOldと組み合わされている場合、ごくまれに使用されるガベージコレクター構成があります。</font><font style="vertical-align: inherit;">ParallelScavengeは並列であり、逆にSerialOldはそうでないため、これが行われる理由は明確ではありません。</font><font style="vertical-align: inherit;">この組み合わせを含めるには、タンバリンとの特別なダンスが必要であり、多くの血液開発者が必要です。</font><font style="vertical-align: inherit;">「Oracleはあなたのことを気にしている」ので、この構成は廃止されたものとしてマークされ、すぐにCMSガベージコレクターに送信されることを期待しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
兄弟たち、喜んでみましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP367。Pack200ツールとAPI（Java 11では非推奨としてマークされていた）の削除</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pack200、unpack200、およびAPI pack200の順番は、当然の休息です。</font><font style="vertical-align: inherit;">そしてその理由はこのパッカーの陳腐化です。</font><font style="vertical-align: inherit;">むかしむかし、インターネットがモデムであり、その速度が56kだったとき（ブーマーは覚えています）、JDKは何時間もポンプで排出されなければなりませんでした。</font><font style="vertical-align: inherit;">JDKをよりよく圧縮し、ダウンロード時間を短縮するパッカーが発明されました。</font><font style="vertical-align: inherit;">また、アプレットやクライアントアプリケーションを圧縮することもできます。</font><font style="vertical-align: inherit;">しかし、時間が経過し、現在の速度では、パッカーは関係ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のパッケージが削除されます：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
java.util.jar.Pack200 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
java.util.jar.Pack200.Packer </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
java.util.jar.Pack200.Unpacker </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
およびjdk.packモジュール。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP368。テキストブロック</font></font></h2><br>
<img src="https://habrastorage.org/webt/mr/g9/_v/mrg9_vzcquzspnav3ld9yl0ofcm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
かつて、Javaは（他の1.5の言語の中で）Pythonに影響を与えました。</font><font style="vertical-align: inherit;">Pythonは急速に人気を得ており、JavaおよびCのITチャートの他のリーダーと自信を持って推進しているので、それを覗いても何も問題はありません。</font><font style="vertical-align: inherit;">かつて、Java 9はpythonium Jupiterによく似たJShellを導入しました。</font><font style="vertical-align: inherit;">そして今、テキストブロックの時が来ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一行書く必要があるとき、一行書きます：</font></font><br>
<br>
<pre><code class="java hljs">String s = <span class="hljs-string">""</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フォーマットされた文字列を書き込む必要がある場合、次のように記述します。</font></font><br>
<pre><code class="java hljs">String oldHtml = <span class="hljs-string">"&lt;html&gt;\n\t&lt;body&gt;\n\t\t&lt;p&gt;Hi all!&lt;/p&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;"</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストは完全に読めません。</font><font style="vertical-align: inherit;">したがって、Java 14では問題が解決されています。</font><font style="vertical-align: inherit;">これで、三重引用符を使用して、任意のテキストを書き込むことができます。</font></font><br>
<br>
<pre><code class="java hljs">        String html = <span class="hljs-string">""</span><span class="hljs-string">"
                      &lt;html&gt;
                          &lt;body&gt;
                              &lt;p&gt;Hi all!&lt;/p&gt;
                          &lt;/body&gt;
                      &lt;/html&gt;
                      "</span><span class="hljs-string">""</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それははるかに便利で読みやすいです。</font><font style="vertical-align: inherit;">コードにテキストをコピーするだけで、タブやハイフンを気にする必要はありません。</font><font style="vertical-align: inherit;">美しさ！</font><font style="vertical-align: inherit;">ハイフンを使わずにテキストをそのようなテキストの別の行に転送するだけの場合は、新しいリテラル-バックスラッシュを使用できます。</font><font style="vertical-align: inherit;">この記号は、それに続く転移が転移ではないことを一般化しています。</font><font style="vertical-align: inherit;">例：</font></font><br>
<br>
<pre><code class="java hljs">        String text = <span class="hljs-string">""</span><span class="hljs-string">"
                    \
                 ,  , \
                     \
                   . \
                , ,  ! \
                  ; \
                    \
                   .
                "</span><span class="hljs-string">""</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論：</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">神々はあなたに黄金の日、黄金の夜を与え、そしてだらしない処女が注意深い目に固定されました。</font><font style="vertical-align: inherit;">遊んで、歌って、友達よ！</font><font style="vertical-align: inherit;">つかの間の夜を失う。</font><font style="vertical-align: inherit;">そしてあなたの不注意の喜び涙を通して私は笑います。</font></font></blockquote><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP370。外部メモリアクセスAPI（インキュベーター）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションがIgnite、mapDB、memcachedなどの外部メモリにアクセスすることがあります。これにアクセスするための既存のAPIは非常に機能していますが、Oracleはグローバルなものを求めていました。</font><font style="vertical-align: inherit;">したがって、MemorySegment、MemoryAddress、MemoryLayoutの抽象概念が登場しました。</font><font style="vertical-align: inherit;">機能はインキュベーターにあり、誰もがByteBuffer、Unsafe、およびJNIで満足できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は読者のことはわかりませんが、Java 9以降にOracleが切り替えた6か月のリリースサイクルが好きです。現在、Oracleは完全に安定したリリースをリリースするタスクを設定していません。彼らの開発とインキュベーターから何かをテストするため。</font><font style="vertical-align: inherit;">言語はより活気があり、変更可能になり、非常に大胆な革新と他の言語からの借用が登場し始めました。</font><font style="vertical-align: inherit;">はい、誰かがリリースのちらつきに追いついていませんが、私たちの職業は、我々が追いつくために必要があるようなものであるので、我々はそれをしたいかどうか、我々はJavaの14を満たして</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつものように、私は、コード例とgithubの上のプロジェクトを添付しています：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[こちらをクリック]</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja491554/index.html">Pythonを介してメッセージAPI Vkontakteの禁止をバイパスします</a></li>
<li><a href="../ja491556/index.html">Javaマイクロサービス：実践ガイド</a></li>
<li><a href="../ja491558/index.html">ロックイースターエッグをもっと見つけよう：神秘的なメッセージから、手を洗って宿題をするための電話まで</a></li>
<li><a href="../ja491560/index.html">端末を敵ではなくアシスタントにする方法は？</a></li>
<li><a href="../ja491562/index.html">FOSSニュースNo. 6-2020年3月2〜8日の無料およびオープンソースニュースのレビュー</a></li>
<li><a href="../ja491566/index.html">mlr3パッケージを使用したR言語での機械学習</a></li>
<li><a href="../ja491568/index.html">Debian 10を搭載したラップトップ上のSOCKSでルーターを構築する</a></li>
<li><a href="../ja491570/index.html">ICQがMail.Ruを購入した後、古代のユーザーを失った理由</a></li>
<li><a href="../ja491572/index.html">先週のフロントエンドの世界からの新鮮な食材のダイジェストNo. 405（2020年3月2日〜8日）</a></li>
<li><a href="../ja491574/index.html">先延ばしを管理するための簡単なトリック</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>