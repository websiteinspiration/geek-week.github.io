<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÄ üò¨ üèÇüèª C√≥mo Gatsby eludi√≥ Next.js ‚õëÔ∏è üëµüèº ‚õ≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El autor del art√≠culo, cuya traducci√≥n publicamos hoy, trabaja como programador en Antler. Esta compa√±√≠a es un generador global de startups. Hay d√≠as ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C√≥mo Gatsby eludi√≥ Next.js</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/500228/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El autor del art√≠culo, cuya traducci√≥n publicamos hoy, trabaja como programador en Antler. </font><font style="vertical-align: inherit;">Esta compa√±√≠a es un generador global de startups. </font><font style="vertical-align: inherit;">Hay d√≠as de demostraci√≥n en Antler varias veces al a√±o, que re√∫ne a muchos creadores e inversores de todo el mundo. </font><font style="vertical-align: inherit;">La situaci√≥n en torno a COVID-19 oblig√≥ a Antler a traducir sus eventos a un formato en l√≠nea.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/hq/r9/an/hqr9anmkfyicv4znlhi2ynk16rm.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La compa√±√≠a quer√≠a asegurarse de que los visitantes de sus eventos virtuales, sin distraerse con nada y sin quedarse atascados en ning√∫n lado, vieran lo m√°s importante. </font><font style="vertical-align: inherit;">A saber, las ideas de startups presentadas al p√∫blico, expresadas como los contenidos de las p√°ginas web. </font><font style="vertical-align: inherit;">Los d√≠as de demostraci√≥n virtual pueden ser de inter√©s para un p√∫blico bastante amplio. </font><font style="vertical-align: inherit;">Algunos miembros de esta audiencia pueden estar participando por primera vez en algo como esto. </font><font style="vertical-align: inherit;">Por lo tanto, la empresa tuvo que hacer todo de la mejor manera posible y proporcionar una carga de alta velocidad de p√°ginas que representan nuevas empresas. </font><font style="vertical-align: inherit;">Decidieron que este es el caso cuando una aplicaci√≥n web progresiva de alto rendimiento (PWA, Progressive Web App) puede ser √∫til. </font><font style="vertical-align: inherit;">El problema principal era encontrar la tecnolog√≠a adecuada para desarrollar PWA.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f54/6f9/1fa/f546f91fa52e40c139cc78fe26b1ad06.gif"></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øRepresentaci√≥n del servidor o generador de sitio est√°tico?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar, te presentar√© un poco al curso. Todos nuestros proyectos se basan en React y la biblioteca Material-UI. Como resultado, inicialmente decidimos no apartarnos de esta pila de tecnolog√≠a, lo que nos permitir√≠a garantizar una alta velocidad de desarrollo y hacer que el nuevo proyecto sea compatible con lo que ya tenemos. La diferencia clave entre este nuevo proyecto y nuestras otras aplicaciones React fue que la base de datos para ellos se cre√≥ utilizando la aplicaci√≥n create-react-y que se representaron completamente en el cliente (CSR, Representaci√≥n del lado del cliente). Esto, en particular, condujo al hecho de que cuando la aplicaci√≥n se carg√≥ inicialmente, los usuarios se vieron obligados a observar una pantalla en blanco mientras el c√≥digo JavaScript del proyecto se cargaba, procesaba y ejecutaba.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesit√°bamos un nivel de rendimiento intransigente. Por lo tanto, comenzamos a pensar en usar la representaci√≥n del lado del servidor (SSR, Representaci√≥n del lado del servidor) o un generador de sitio est√°tico (SSG, Generador de sitio est√°tico) para que la carga inicial de aplicaciones sea lo m√°s r√°pida posible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestros datos se almacenan en Cloud Firestore, y accedemos a ellos utilizando Algolia. Esto nos permite controlar, a nivel de campo de la base de datos, el acceso p√∫blico a los datos con claves API restringidas. Esto tambi√©n mejora el rendimiento de la consulta. Por experiencia, sabemos que las consultas de Algolia son m√°s r√°pidas de lo normal y que el SDK de JavaScript de Firestore comprimido tiene un tama√±o de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">86 KB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En el caso de Algolia, esto es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5 Kb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, quer√≠amos que los datos que proporcionamos a los clientes sean lo m√°s actualizados posible. Esto nos ayudar√≠a a corregir r√°pidamente datos err√≥neos que podr√≠an publicarse accidentalmente. Si bien la pr√°ctica est√°ndar de SSG prev√© la implementaci√≥n de solicitudes de datos relevantes durante el ensamblaje del proyecto, esper√°bamos que en nuestra base de datos los datos se escriban con bastante frecuencia. En particular, estamos hablando de la grabaci√≥n de datos iniciada por administradores que usan la interfaz de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firetable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y por iniciativa de los fundadores de los proyectos utilizando el portal web. Esto lleva a un montaje competitivo del proyecto. Adem√°s, debido a las caracter√≠sticas estructurales de nuestra base de datos, cambios menores pueden conducir a nuevas operaciones de ensamblaje de proyectos. Esto hace que nuestra l√≠nea de CI / CD sea extremadamente ineficiente. Por lo tanto, necesit√°bamos que las solicitudes para recibir datos del repositorio se ejecutaran cada vez que un usuario solicita que se cargue una p√°gina. Desafortunadamente, esto significaba que nuestra soluci√≥n no ser√≠a un ejemplo de un proyecto SSG "limpio".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, nuestra aplicaci√≥n fue creada sobre la base de Gatsby, ya que ya us√°bamos p√°ginas de aterrizaje creadas en Gatsby, y en una de ellas ya se usaba la biblioteca Material-UI. </font><font style="vertical-align: inherit;">La primera versi√≥n del proyecto form√≥ una p√°gina que, mientras se cargaban los datos, mostraba un "esqueleto". </font><font style="vertical-align: inherit;">Al mismo tiempo, la primera pintura contenta (FCP) fue en la regi√≥n de 1 segundo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d75/578/718/d7557871834d0d244f8501327d68810d.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar el "esqueleto" de la p√°gina con la posterior carga de datos</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
La soluci√≥n result√≥ ser interesante, pero ten√≠a sus inconvenientes, porque los datos para la salida de la p√°gina se descargaron por iniciativa del cliente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para ver el contenido de la p√°gina, los usuarios tendr√≠an que esperar la descarga de esta p√°gina y los datos que se muestran en ella, obtenidos a trav√©s de 4 solicitudes a Algolia.</font></font></li>
<li>    JS-    .   ,  React   ¬´¬ª      .         DOM.</li>
<li>         .  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, durante el largo fin de semana, decid√≠ experimentar con la versi√≥n SSR del proyecto creado con Next.js. Afortunadamente para m√≠, la documentaci√≥n de Material-UI ten√≠a un proyecto de ejemplo para Next.js. Por lo tanto, no necesitaba aprender todo este marco desde cero. Solo ten√≠a que mirar algunas partes del tutorial y la documentaci√≥n. Convert√≠ la aplicaci√≥n a un proyecto que se renderiz√≥ en el servidor. Cuando un usuario solicit√≥ una carga de p√°gina, el servidor ejecut√≥ las solicitudes de datos necesarios para llenar la p√°gina. Este paso nos permiti√≥ resolver los tres problemas anteriores. Aqu√≠ est√°n los resultados de la prueba para dos opciones de aplicaci√≥n.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b60/0da/cda/b600dacda702f25e97808ed9f762ff8c.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados de la b√∫squeda de aplicaciones con </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A la izquierda est√° Gatsby (SSG), a la derecha est√° Next.js (SSR) ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El FCP para la versi√≥n Next.js del proyecto fue aproximadamente 3 veces mayor que para su versi√≥n basada en Gatsby. La versi√≥n Gatsby del proyecto ten√≠a un √≠ndice de velocidad de 3.3 segundos, mientras que la versi√≥n Next.js ten√≠a 6.2 segundos. El tiempo hasta el primer byte (TTFB, Tiempo hasta el primer byte) fue de 2.56 segundos cuando se usa Next.js y de 10-20 ms cuando se usa Gatsby.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cabe se√±alar que la versi√≥n Next.js del sitio se implement√≥ en otro servicio (aqu√≠ utilizamos los servicios ZEIT Now y Firebase Hosting; esto tambi√©n podr√≠a afectar el aumento de TTFB). Pero, a pesar de esto, estaba claro que la transferencia de operaciones de carga de datos al servidor hac√≠a que el sitio pareciera m√°s lento, a pesar del hecho de que todos los materiales de la p√°gina se cargaron aproximadamente al mismo tiempo. El hecho es que en la versi√≥n Next.js del proyecto, el usuario por un tiempo solo ve una p√°gina en blanco.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e0/8a2/ab3/6e08a2ab3bcb4c06471cc92545848d8a.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Captura de pantalla que muestra la carga de dos versiones de una aplicaci√≥n. </font><font style="vertical-align: inherit;">La descarga no se complet√≥ al mismo tiempo. </font><font style="vertical-align: inherit;">Los registros se sincronizan en el momento en que presiona la tecla Intro.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Todo esto nos brinda una importante lecci√≥n del campo del desarrollo web: debe brindar a los usuarios comentarios visuales. </font><font style="vertical-align: inherit;">Un</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estudio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> encontr√≥ que las aplicaciones que usan pantallas esquel√©ticas parecen cargarse m√°s r√°pido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este resultado, adem√°s, no se corresponde con el estado de √°nimo que podr√≠a haber captado si ley√≥ art√≠culos sobre desarrollo web en los √∫ltimos a√±os. </font><font style="vertical-align: inherit;">Es decir, estamos hablando del hecho de que no hay nada de malo en usar los recursos del cliente, y que el SSR no es una soluci√≥n integral para los problemas de rendimiento.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendimiento de generaci√≥n de sitio est√°tico: comparaci√≥n de Gatsby y Next.js</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si bien los dos marcos en consideraci√≥n, Gatsby y Next.js, son conocidos, respectivamente, por su capacidad de generar sitios est√°ticos y representaci√≥n de servidores, el </font><font style="vertical-align: inherit;">soporte para SSG se mejor√≥ </font><font style="vertical-align: inherit;">en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js 9.3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo que lo convierte en un competidor de Gatsby. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el momento de escribir este art√≠culo, la capacidad de Next.js para generar sitios est√°ticos todav√≠a era muy reciente. Ella ten√≠a poco m√°s de un mes. Ella todav√≠a se informa en la primera p√°gina del proyecto. Ahora no hay muchas comparaciones de las capacidades de SSG de Gatsby y Next.js (o tal vez a√∫n no haya tales comparaciones). Como resultado, decid√≠ realizar mi propio experimento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regres√© la versi√≥n Gatsby del proyecto al estado en que se descargaron los datos en el cliente, y lo hice para que ambas versiones de la aplicaci√≥n tengan exactamente el mismo conjunto de caracter√≠sticas. Es decir, tuve que eliminar de qu√© son responsables los complementos de Gatsby: funciones de SEO, generaci√≥n de favicons, manifiesto de PWA. Para comparar exclusivamente paquetes de JavaScript creados por frameworks, no inclu√≠ im√°genes y otro contenido descargado de fuentes externas en los proyectos. Ambas versiones de la aplicaci√≥n se implementaron en la plataforma Firebase Hosting. Como referencia, se crearon dos versiones de la aplicaci√≥n basadas en Gatsby 2.20.9 y Next.js 9.3.4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejecut√© Lighthouse en mi computadora 6 veces para cada versi√≥n. Los resultados mostraron una ligera ventaja para Gatsby.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82a/522/059/82a522059afba13a70e62df76144b6e6.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valores promedio obtenidos despu√©s de 6 lanzamientos de Lighthouse para cada marco ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En t√©rminos de evaluaci√≥n general del rendimiento, la versi√≥n Next.js estaba solo ligeramente por detr√°s de la versi√≥n Gatsby. Lo mismo ocurre con FCP y Speed ‚Äã‚ÄãIndex. El Retardo de primer ingreso del primer potencial para la versi√≥n Next.js de la aplicaci√≥n es ligeramente mayor que para la versi√≥n Gatsby.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender mejor lo que est√° sucediendo, recurr√≠ a la pesta√±a Red de las herramientas para desarrolladores de Chrome. Al final result√≥ que, en la versi√≥n Next.js del proyecto, el n√∫mero de fragmentos en los que se divide el c√≥digo JavaScript es 3 m√°s que en la versi√≥n Gatsby (excluyendo los archivos de manifiesto), pero el c√≥digo comprimido es 20 KB m√°s peque√±o. ¬øPueden las solicitudes adicionales necesarias para descargar estos archivos superar los beneficios de un paquete m√°s peque√±o que perjudica el rendimiento?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27b/d84/d9a/27bd84d9aad10ae1f3421a0f829c3fa2.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la versi√≥n Gatsby del proyecto, se ejecutan 7 solicitudes para descargar 379 KB de datos. En la versi√≥n del proyecto Next.js: 12 solicitudes de descarga de 359 KB de datos ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si analiza el rendimiento de JavaScript, las herramientas del desarrollador dicen que la versi√≥n del proyecto Next.js necesita 300 ms adicionales para la primera representaci√≥n, y que esta versi√≥n pasa m√°s tiempo en la tarea Evaluar secuencia de comandos. En las herramientas del desarrollador, esta tarea incluso se marc√≥ como una "tarea larga".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24b/1be/11c/24b1be11c62fc6a1561a413555e53c0f.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lisis del rendimiento de diferentes opciones de proyecto utilizando la pesta√±a Rendimiento de las herramientas de desarrollador de Chrome ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
. Compar√© el c√≥digo del proyecto para averiguar si existen diferencias en su implementaci√≥n que pudieran afectar el rendimiento. Con la excepci√≥n de eliminar el c√≥digo innecesario y las correcciones asociadas con los tipos faltantes de TypeScript, la √∫nica diferencia fue la implementaci√≥n de un desplazamiento suave de la p√°gina cuando se mueve a sus partes individuales. Esta caracter√≠stica fue introducida previamente por un archivo</font></font><code>gatsby-browser.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y se movi√≥ a un</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> componente importado din√°micamente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Como resultado, este c√≥digo solo se ejecutar√≠a en un navegador. (Utilizamos el paquete npm de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desplazamiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suave</font><font style="vertical-align: inherit;">y, al importarlo, necesita un objeto</font></font><code>window</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) Este problema puede ser el culpable, pero no s√© c√≥mo se maneja en Next.js.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby es m√°s conveniente desde el punto de vista del desarrollador</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, decid√≠ optar por la versi√≥n Gatsby del proyecto. Adem√°s, aqu√≠ no tom√© en cuenta la ventaja de rendimiento muy peque√±a que mostr√≥ Gatsby en comparaci√≥n con el mecanismo Next.js SSG (¬øno me aferrar√© seriamente a la ventaja de 0.6 segundos?). El hecho es que en la versi√≥n Gatsby del proyecto muchas funciones PWA ya est√°n implementadas, y no vi el punto de tenerlas implementadas nuevamente en la versi√≥n Next.js de la aplicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando estaba creando la primera versi√≥n de Gatsby del proyecto, pude agregar r√°pidamente algunas caracter√≠sticas √∫tiles de PWA al proyecto. Por ejemplo, para agregar a cada p√°gina mis propias metaetiquetas necesarias para SEO, solo ten√≠a que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leer el manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para equipar el proyecto con un manifiesto PWA, solo necesitaba usar el </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">complemento</font></a><font style="vertical-align: inherit;"> apropiado</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para equipar el proyecto con favicons que admitieran todas las plataformas disponibles (y en este caso todav√≠a hay un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desastre terrible</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), ni siquiera tuve que hacer nada, ya que el soporte de favicon es parte del complemento responsable del manifiesto. ¬°Es muy c√≥modo!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementar las mismas caracter√≠sticas en la versi√≥n Next.js de la aplicaci√≥n requerir√≠a m√°s trabajo. Tendr√≠a que buscar manuales de capacitaci√≥n, todo tipo de "mejores pr√°cticas". Y el hecho de que tendr√≠a √©xito, de todos modos, no me dar√≠a ninguna ventaja. Despu√©s de todo, sin embargo, la versi√≥n Next.js del proyecto no difiere en un rendimiento m√°s alto que su versi√≥n Gatsby. Esta, adem√°s, fue la raz√≥n por la que decid√≠ simplemente deshabilitar las caracter√≠sticas correspondientes de la versi√≥n Gatsby del proyecto, compar√°ndola con la versi√≥n Next.js. La documentaci√≥n de Next.js es m√°s concisa que la documentaci√≥n de Gatsby (quiz√°s el hecho es que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√°s peque√±a que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Realmente me gusta el tutorial gamified Next.js. </font><font style="vertical-align: inherit;">Pero la documentaci√≥n m√°s extensa de Gatsby es m√°s valiosa con el desarrollo real de PWA, aunque a primera vista parece enorme.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/010/138/800/0101388008c84ce2dda5f6f8f522cf6d.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentaci√≥n de Gatsby</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es cierto, no puedo guardar silencio sobre las fortalezas de Next.js:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gracias al tutorial y la brevedad de la documentaci√≥n de Next.js, parece que este marco se puede aprender m√°s r√°pido que Gatsby.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sistema de carga de datos utilizado en Next.js se basa en funciones asincr√≥nicas y la API Fetch. </font><font style="vertical-align: inherit;">Como resultado, al desarrollar Next.js, el desarrollador no tiene la sensaci√≥n de que necesita aprender GraphQL para aprovechar al m√°ximo las capacidades del marco.</font></font></li>
<li> Next.js    TypeScript,      Gatsby        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a> (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>).     Next.js      ,     ,        ,        .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias al hecho de que Next.js ha mejorado la compatibilidad con SSG, este marco se ha convertido en una herramienta poderosa que permite, a nivel de cada p√°gina individual, elegir el m√©todo para trabajar con ella. </font><font style="vertical-align: inherit;">Puede ser SSR, SSG o CSR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, si pudiera generar esta aplicaci√≥n en una forma completamente est√°tica, Next.js me convendr√≠a mejor, ya que podr√≠a usar el Algolia JS-API est√°ndar y podr√≠a mantener el c√≥digo para cargar datos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el mismo archivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que y c√≥digo de componente. </font><font style="vertical-align: inherit;">Dado que Algolia no tiene una API GraphQL incorporada y no hay un complemento de Gatsby para Algolia, implementar dicho mecanismo en Gatsby requerir√≠a agregar este c√≥digo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a un nuevo archivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Y esto va en contra de la forma declarativa intuitiva de describir p√°ginas.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre formas adicionales de mejorar el rendimiento del proyecto</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de haber resuelto el problema de elegir un marco, se puede observar que hay formas adicionales de mejorar el rendimiento del proyecto que no est√°n relacionadas con el marco. </font><font style="vertical-align: inherit;">Estas mejoras pueden llevar la calificaci√≥n del proyecto Lighthouse a 100.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lista de correo de marzo de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algolia </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">,</font></a><font style="vertical-align: inherit;"> se recomienda agregar una pista </font></font><code>preconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para aumentar a√∫n m√°s la velocidad de ejecuci√≥n de consultas. </font><font style="vertical-align: inherit;">(Es cierto que, desafortunadamente, el fragmento de c√≥digo incorrecto aparece en el bolet√≠n. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ est√° el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥digo correcto).</font></font></li>
<li>    .   JS-  CSS-,  webpack- Gatsby.   Gatsby  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>   .  ,       ,   Netlify  Amazon S3. ,  Firebase Hosting,  ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilizamos im√°genes JPEG y PNG cargadas por creadores de inicio en la aplicaci√≥n. </font><font style="vertical-align: inherit;">No los comprimimos ni los optimizamos. </font><font style="vertical-align: inherit;">Mejorar este aspecto de nuestra aplicaci√≥n es todo un desaf√≠o y est√° m√°s all√° del alcance de este proyecto. </font><font style="vertical-align: inherit;">Adem√°s, ser√≠a genial si todas estas im√°genes se convirtieran al formato WebP. </font><font style="vertical-align: inherit;">Como resultado, tendr√≠amos que almacenar im√°genes usando solo un formato gr√°fico altamente eficiente. </font><font style="vertical-align: inherit;">Desafortunadamente, como con muchas otras caracter√≠sticas de PWA, el equipo de desarrollo de Safari WebKit es adictivo con el soporte de WebP. </font><font style="vertical-align: inherit;">Ahora es el √∫nico navegador importante que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no admite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> este formato.</font></font></li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si resumimos brevemente de qu√© est√°bamos hablando aqu√≠, entonces podemos decir lo siguiente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El resultado de la versi√≥n "esquel√©tica" de la p√°gina durante la carga de datos por parte del cliente crea al usuario una sensaci√≥n de funcionamiento m√°s r√°pido del sitio web que cuando el usuario mira una p√°gina en blanco mientras el servidor est√° cargando datos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La versi√≥n gatsby del sitio era solo un poco m√°s r√°pida que la versi√≥n Next.js. </font><font style="vertical-align: inherit;">Sin embargo, el sistema de complemento Gatsby y la documentaci√≥n del proyecto de alta calidad aumentan la usabilidad de este marco para el desarrollador.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øUtiliza generadores de sitios est√°ticos o sistemas de representaci√≥n del lado del servidor para acelerar sus proyectos?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es500216/index.html">Olvida el antropoceno: hemos entrado en la era sint√©tica</a></li>
<li><a href="../es500218/index.html">Modelo epidemiol√≥gico Covid-19</a></li>
<li><a href="../es500220/index.html">Discos de vinilo y casetes directamente en tu Android</a></li>
<li><a href="../es500222/index.html">Tel√©fonos inal√°mbricos de biplanos brit√°nicos de la Primera Guerra Mundial</a></li>
<li><a href="../es500224/index.html">Nariz electr√≥nica de bricolaje</a></li>
<li><a href="../es500232/index.html">Aprendizaje de Akka.NET: servidor de un simple juego en l√≠nea</a></li>
<li><a href="../es500234/index.html">¬øPor qu√© hice un proyecto de contabilidad de gastos personales para Git + JS?</a></li>
<li><a href="../es500238/index.html">Dime que te molesta</a></li>
<li><a href="../es500244/index.html">Fuera de la matriz</a></li>
<li><a href="../es500246/index.html">Protecci√≥n y pirater√≠a de la Xbox 360 (Parte 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>