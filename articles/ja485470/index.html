<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤳🏿 🤮 🤾 HighLoad ++、Andrey Gushchin（Zabbix）：高性能とネイティブのパーティション分割 🌝 👨🏽‍🏭 👨🏿‍🎨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ZabbixがTimescaleDBデータベースをバックエンドとしてどのように機能するかを見ていきます。最初から始める方法とPostgreSQLで移行する方法を示します。また、2つの構成のパフォーマンス比較テストも行います。
 
 
 
 HighLoad ++シベリア2019。トムスクホール。6月...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++、Andrey Gushchin（Zabbix）：高性能とネイティブのパーティション分割</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/485470/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZabbixがTimescaleDBデータベースをバックエンドとしてどのように機能するかを見ていきます。</font><font style="vertical-align: inherit;">最初から始める方法とPostgreSQLで移行する方法を示します。</font><font style="vertical-align: inherit;">また、2つの構成のパフォーマンス比較テストも行います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h4/jl/nw/h4jlnwupm_dewx7jasafurn-ibm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HighLoad ++シベリア2019。トムスクホール。</font><font style="vertical-align: inherit;">6月24日16時。</font><font style="vertical-align: inherit;">アブストラクトと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレゼンテーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次回のHighLoad ++カンファレンスは、2020年4月6日と7日にサンクトペテルブルクで開催されます。</font><font style="vertical-align: inherit;">詳細とチケットは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちら</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrey Gushchin（以下-AG）：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-私はZABBIXテクニカルサポートエンジニア（以下、「Zabbix」と呼びます）、トレーナーです。</font><font style="vertical-align: inherit;">私は6年以上テクニカルサポートに携わっており、パフォーマンスに直接直面しています。</font><font style="vertical-align: inherit;">今日は、通常のPostgreSQL 10と比較した場合のTimescaleDBのパフォーマンスについて説明します。また、いくつかの導入部分-それがどのように機能するかについても説明します。</font></font><a name="habracut"></a><br>
<br>
<h3>  :     </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、すべての監視システムで発生する特定のパフォーマンスの課題があります。最初のパフォーマンスの課題は、データの迅速な収集と処理です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jl/xr/hv/jlxrhv3huan1s0w4otmxoknifzy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
優れた監視システムは、すべてのデータを迅速かつタイムリーに受け取り、トリガー式に従って処理します。つまり、いくつかの基準に従って（異なるシステムでは異なります）処理し、このデータをデータベースに保存して、将来このデータを使用できるようにします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d5/vq/-l/d5vq-lgcwljaq50nc-zxfeugi3k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のパフォーマンスの課題は、履歴を保持することです。データベースに頻繁に保存し、一定期間に収集されたこれらのメトリックにすばやく簡単にアクセスできます。最も重要なのは、このデータを取得し、レポート、グラフ、トリガーで、いくつかのしきい値で、アラートなどに使用すると便利です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k2/1l/3g/k21l3gg3vmeayv-d8oqpatgssv8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目のパフォーマンスの課題は、ストーリーをクリアすることです。つまり、5年間（数か月または2か月でも）収集された詳細なメトリックを保存する必要がない日がある場合です。</font><font style="vertical-align: inherit;">ネットワークの一部のノードが削除されたか、一部のホストのメトリックがすでに古く、収集が停止されているため、メトリックは不要になりました。</font><font style="vertical-align: inherit;">データベースが大きくならないように、これらすべてをクリーンアップする必要があります。</font><font style="vertical-align: inherit;">一般に、履歴をクリアすることは、多くの場合、ストレージの深刻なテストです-多くの場合、パフォーマンスに影響します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシュの問題を解決する方法は？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbixについて具体的にお話します。 Zabbixでは、最初と2番目の呼び出しはキャッシュを使用して解決されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mg/2b/tb/mg2btblcs3cxvlnddc0yg6lwxrw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データの収集と処理-このすべてのデータを保存するためにRAMを使用します。次に、このデータについて詳しく説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、データベース側では、主なサンプル（グラフなど）に特定のキャッシュがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbixサーバー自体のキャッシュ：ConfigurationCache、ValueCache、HistoryCache、TrendsCacheがあります。それは何ですか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6j/4e/_a/6j4e_acyhx8ldzgjfziqhuzvwz0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ConfigurationCacheは、メトリック、ホスト、データアイテム、トリガーを格納するメインキャッシュです。</font><font style="vertical-align: inherit;">前処理を処理するために必要なすべてのもの、データを収集するホスト、収集するホスト、頻度。</font><font style="vertical-align: inherit;">これらはすべて、データベースにアクセスしたり、不要なクエリを作成したりしないように、ConfigurationCacheに格納されます。</font><font style="vertical-align: inherit;">サーバーの起動後、このキャッシュを更新（作成）し、定期的に更新します（構成設定によって異なります）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q1/zc/dg/q1zcdgan2c5rcep47ebef24xrn0.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbixでのキャッシュ。</font><font style="vertical-align: inherit;">データ収集</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでのスキームは非常に大きいです</font></font><br>
<br>
<img src="https://habrastorage.org/webt/88/mh/gd/88mhgd974zcj8eou8kghhodhwf0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font><font style="vertical-align: inherit;">スキーム</font><font style="vertical-align: inherit;">の主なものはこれらのアセンブラです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2y/co/f7/2ycof750qb71iooc2qiahs-5i9y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらはアセンブリプロセス自体であり、さまざまなタイプのアセンブリを担当するさまざまな「ポーラー」です。</font><font style="vertical-align: inherit;">さまざまなプロトコルに従ってicmp、ipmiを介してデータを収集し、すべてを前処理に転送します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HistoryCacheの前処理</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、計算されたデータ要素（Zabbixを知っている-知っている）、つまり計算されて集計されたデータ要素がある場合は、ValueCacheから直接取得します。記入方法については後でお伝えします。これらすべてのコレクターは、ConfigurationCacheを使用してジョブを取得し、前処理に渡します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b4/qb/mh/b4qbmhsqtxvrfli40n-espjba6c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、前処理ではConfigurationCacheを使用して前処理ステップを取得し、このデータをさまざまな方法で処理します。バージョン4.2以降、プロキシに送信されました。前処理自体がかなり難しい操作であるため、これは非常に便利です。また、非常に大きな「Zabbix」があり、多数のデータ要素と高い頻度の収集がある場合、これにより作業が大幅に容易になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、前処理を使用してこのデータを何らかの方法で処理した後、それをさらに処理するためにHistoryCacheに保存します。</font><font style="vertical-align: inherit;">これでデータ収集が終了します。</font><font style="vertical-align: inherit;">メインプロセスに移ります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">履歴同期操作</font></font></h3><br>
<img src="https://habrastorage.org/webt/40/yj/9-/40yj9-h-hgm5wcd2hu2ygt5uyp4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbixのメインプロセス（モノリシックアーキテクチャであるため）は、History syncerです。</font><font style="vertical-align: inherit;">これは、各データ要素、つまり各値のアトミック処理を具体的に処理するメインプロセスです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値が来ます（HistoryCacheから取得します）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration Syncerのチェック：計算のトリガーはありますか？計算します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
存在する場合-イベントを作成し、必要に応じて構成によってアラートを作成するためにエスカレーションを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">後続の処理、集約のためにトリガーを記録します。</font><font style="vertical-align: inherit;">最後の1時間などで集計すると、この値は履歴テーブルに移動しないようにValueCacheを記憶します。</font><font style="vertical-align: inherit;">したがって、ValueCacheには、トリガーや計算された要素などを計算するために必要なデータが入力されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、History syncerはすべてのデータをデータベースに書き込みます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースはそれらをディスクに書き込みます-ここで処理プロセスが終了します。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース。</font><font style="vertical-align: inherit;">キャッシング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DB側では、グラフやある種のイベントレポートを見たいときに、さまざまなキャッシュがあります。</font><font style="vertical-align: inherit;">しかし、このレポートの一部として、それらについては触れません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQLには、Innodb_buffer_poolがあり、これも構成可能なさまざまなキャッシュの束です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これらは主なものです：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shared_buffers;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effective_cache_size;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shared_pool。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/fw/7n/0z/fw7n0ziowm_jbvs--peokkswjdw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのデータベースについて、クエリによく必要なデータをメモリに保持できる特定のキャッシュがあることを挙げました。</font><font style="vertical-align: inherit;">そこで彼らはこのための独自の技術を持っています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースのパフォーマンスについて</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、Zabbixサーバーがデータを収集して記録するという競争環境があります。</font><font style="vertical-align: inherit;">再起動すると、履歴から読み取られてValueCacheなどに入力されます。</font><font style="vertical-align: inherit;">ここでは、Webインターフェースに基づいて構築されたZabbix-APIを使用するスクリプトとレポートを作成できます。</font><font style="vertical-align: inherit;">「Zabbiks」-APIはデータベースに含まれており、グラフ、レポート、またはイベントのリスト、最近の問題を受信するために必要なデータを受け取ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gr/to/vp/grtovpkr0x6kkytkg5bw2zllpqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、非常に人気のある視覚化ソリューションは、ユーザーが使用するGrafanaです。</font><font style="vertical-align: inherit;">"Zabbiks" -APIとデータベースの両方から直接入力できます。</font><font style="vertical-align: inherit;">また、データを取得するための競争も発生します。結果とテストの迅速な出力に対応するには、データベースをより細かく、より適切に調整する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/aj/ak/l-/ajakl-q1nyal8mce-xw4snwrgye.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">履歴をクリア。</font><font style="vertical-align: inherit;">Zabbixには家政婦がいる</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbixが使用する3番目の課題は、家政婦と話をクリアすることです。 Hauskiperはすべての設定に準拠しています。つまり、データ要素には、保存する量（日数）、保存する傾向、変更のダイナミクスなどが示されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オンザフライで計算するTrendCacheについては触れませんでした。データが到着し、1時間で集約します（基本的には過去1時間の数値です）。平均/最小量。これを1時間に1回、ダイナミクス（Trends）の変更のテーブルに書き込みます。 。 Hauskiperが起動し、通常の選択を使用してデータベースからデータを削除しますが、これは常に有効であるとは限りません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが効果がないことをどうやって理解するのですか？内部プロセスのパフォーマンスグラフで次の図を確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cw/au/u3/cwauu3n4dk0-u_nonnfzbf0og6g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
History syncerは常にビジーです（赤いグラフ）。そして、一番上に来る「赤い」チャート。これはHauskiperであり、指定したすべての行を削除するときにデータベースを起動して待機します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかのアイテムIDを取得します。最後の5000を削除する必要があります。もちろん、インデックスによって。しかし、通常、データセットは十分な大きさです。データベースはこれをディスクから読み取り、キャッシュに格納します。これは、データベースにとって非常に負荷の高い操作です。サイズによっては、特定のパフォーマンスの問題が発生する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単な方法でHauskiperを無効にすることができます-私たちは誰もが使い慣れたWebインターフェイスを持っています。管理全般の設定（「ハウスキーパー」の設定）では、内部の履歴と傾向の内部のハウスキーピングを無効にします。したがって、Hauskiperはこれを制御しなくなりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/si/jo/cpsijomx2kl2p1trw0it8ujvpga.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に何ができますか？</font><font style="vertical-align: inherit;">あなたはそれをオフにしました、あなたのスケジュールは横ばいになりました...この場合、さらに何が問題になる可能性がありますか？</font><font style="vertical-align: inherit;">何が役立ちますか？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パーティショニング（パーティショニング）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは通常、さまざまな方法でリストしたすべてのリレーショナルデータベースで構成されます。</font><font style="vertical-align: inherit;">MySQLには独自のテクノロジーがあります。</font><font style="vertical-align: inherit;">しかし、PostgreSQL 10とMySQLに関しては、全体的に非常によく似ています。</font><font style="vertical-align: inherit;">もちろん、すべてがどのように実装され、どのようにパフォーマンスに影響するかについては、多くの内部的な違いがあります。</font><font style="vertical-align: inherit;">ただし、一般に、新しいパーティションを作成すると、特定の問題が発生することもあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g3/ru/gs/g3rugs9kazu4fcyk70inqtrnrd4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定（1日で作成したデータの量）によって異なりますが、通常は最低1日-1パーティション/パーティションを設定し、「傾向」については、変化のダイナミクス-1か月/新しいパーティションを設定します。</font><font style="vertical-align: inherit;">非常に大規模な設定をしている場合、これは変わる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定のサイズについてすぐに考えてみましょう：1秒あたり最大5000個の新しい値（いわゆるnvps）-これは小さな「設定」と見なされます。</font><font style="vertical-align: inherit;">平均-1秒あたり5から25千の値。</font><font style="vertical-align: inherit;">上記はすべて、データベース自体の非常に慎重な構成を必要とする、すでに大規模で非常に大規模なインストールです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に大規模なインストールでは、1日-これは最適ではない可能性があります。</font><font style="vertical-align: inherit;">個人的には、1日あたり40ギガバイトのMySQLパーティションを確認しました（それ以上になる場合もあります）。</font><font style="vertical-align: inherit;">これは非常に大量のデータであり、問​​題が発生する可能性があります。</font><font style="vertical-align: inherit;">減らす必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜパーティション化するのですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パーティショニングがもたらすのは、誰もが知っているように、テーブルパーティショニングです。</font><font style="vertical-align: inherit;">多くの場合、これらはディスク上の複数のファイルとスパン要求です。</font><font style="vertical-align: inherit;">これが通常のパーティションの一部である場合、彼はより最適に1つのパーティションを選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nd/u2/6a/ndu26acwf_st_axq0rfws4t0yhu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特にZabbixの場合、範囲ごと、つまり範囲ごとに使用されます。つまり、タイムスタンプを使用します（数値は通常、時代の初めからの時間です）。</font><font style="vertical-align: inherit;">あなたは一日の始まり/一日の終わりを指定し、これはパーティションです。</font><font style="vertical-align: inherit;">したがって、2日前にデータを申請する場合、（大きなテーブルではなく）キャッシュに1つのファイルをアップロードして発行するだけでよいので、データベースからすべてがより速く選択されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n8/-5/h0/n8-5h0inf3gdrt6fv2jaqeguoxm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのデータベースは、挿入（単一の子テーブルへの挿入）も高速化します。</font><font style="vertical-align: inherit;">私は抽象的に話しますが、それも可能です。</font><font style="vertical-align: inherit;">パーティショニングはしばしば役立ちます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NoSQLのElasticsearch</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、3.4で、NoSQLのソリューションを実装しました。</font><font style="vertical-align: inherit;">Elasticsearchで書き込む機能が追加されました。</font><font style="vertical-align: inherit;">あなたはいくつかの別々のタイプを書くことができます：選択してください-数またはいくつかのサインを書いてください。</font><font style="vertical-align: inherit;">文字列テキストがあるので、Elasticsearchにログを書き込むことができます。したがって、WebインターフェイスもElasticsearchにアクセスします。</font><font style="vertical-align: inherit;">これは場合によっては正常に機能しますが、現時点では使用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/f_/kc/xqf_kcj7pttjfkqtvykodkhf1ne.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimescaleDB。</font><font style="vertical-align: inherit;">ハイパーテーブル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.4.2では、TimescaleDBのような1つのことに気づきました。</font><font style="vertical-align: inherit;">それは何ですか？</font><font style="vertical-align: inherit;">これはPostgresの拡張です。つまり、ネイティブのPostgreSQLインターフェースがあります。</font><font style="vertical-align: inherit;">さらに、この拡張機能を使用すると、timeseriesデータをより効率的に操作し、自動パーティション分割を行うことができます。</font><font style="vertical-align: inherit;">外観：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_q/nk/mz/_qnkmz4mbfzhveegk3d2hjzgafg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはハイパーテーブルです。タイムスケールにはそのような概念があります。</font><font style="vertical-align: inherit;">これは作成するハイパーテーブルであり、チャンクが含まれています。</font><font style="vertical-align: inherit;">チャンクはパーティションであり、私が間違っていなければ、これらは子テーブルです。</font><font style="vertical-align: inherit;">本当に効果的です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/un/gu/pk/ungupk6uffgezcunuoaa4tjkk0g.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimescaleDBとPostgreSQL</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TimescaleDBのメーカーが保証しているように、より正確なクエリ処理アルゴリズム、特にinsert'ovを使用しているため、データセット挿入のサイズが増加しても、ほぼ一定のパフォーマンスを得ることができます。</font><font style="vertical-align: inherit;">つまり、2億行の「Postgres」の後、通常の行は大幅に低下し始め、文字通り0にパフォーマンスが低下しますが、「Timescale」では、任意の量のデータで可能な限り効率的に挿入を挿入できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xo/zb/-o/xozb-o86ammklruo6wbmreoddga.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimescaleDBのインストール方法は？</font><font style="vertical-align: inherit;">すべてが簡単です！</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼はそれをドキュメンテーションに持っています、それは説明されています-それはあらゆるパッケージから配信できます...それはPostgresの公式パッケージに依存します。</font><font style="vertical-align: inherit;">手動でコンパイルできます。</font><font style="vertical-align: inherit;">たまたま、データベース用にコンパイルしなければなりませんでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vm/t8/ab/vmt8ab42ehsl-ne-cxb70skn9ik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbixでは、エクステンションをアクティブにするだけです。</font><font style="vertical-align: inherit;">PostgresでExtentionを使用したユーザーは、Extentionをアクティブ化し、使用するZabbixデータベース用に作成するだけだと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後のステップ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimescaleDB。</font><font style="vertical-align: inherit;">移行履歴テーブル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハイパーテーブルを作成する必要があります。これには特別な関数があります-ハイパーテーブルを作成します。その中で、最初のパラメーターは、このデータベースで必要な（ハイパーテーブルを作成する必要がある）テーブルを示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/p0/ja/rsp0ja0xplwviw9abiqvsody8zw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成するフィールド、およびchunk_time_interval（これは、チャンク（使用するパーティション）の間隔です</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。86,400 </font><font style="vertical-align: inherit;">は1日です</font><font style="vertical-align: inherit;">。migrate_dataパラメーター：trueを挿入すると、現在のすべてのデータが以前に作成されたチャンクに転送されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私自身使用されるmigrate_data-データベースのサイズに応じて、かなりの時間がかかります。テラバイトを超えました-作成に1時間以上かかりました。場合によっては、テスト時に、テキスト（history_text）および文字列（history_str）の履歴データを削除しました）、それに耐えられないように-彼らは私には本当に面白くなかった。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、db_extentionの最後の更新を行います。データベース、特にZabbixがdb_extentionとは何かを理解できるように、timescaledbを設定します。</font><font style="vertical-align: inherit;">彼はそれをアクティブ化し、TimescaleDBに必要な「機能」を使用して、データベースへの正しい構文とクエリを使用します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー構成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2台のサーバーを使用しました。</font><font style="vertical-align: inherit;">最初のサーバーは十分に小さい仮想マシンで、20プロセッサ、16ギガバイトのRAMです。</font><font style="vertical-align: inherit;">Postgres 10.8をセットアップしました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q_/h-/fe/q_h-fey52vutiin_dcat3zezb1g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オペレーティングシステムはDebian、ファイルシステムはxfsでした。</font><font style="vertical-align: inherit;">Zabbixが使用するものを除いて、この特定のデータベースを使用するための最小限の設定を行いました。</font><font style="vertical-align: inherit;">同じマシン上にZabbixサーバー、PostgreSQL、およびロードエージェントがありました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/jv/bu/vljvbuggjlj1vz5tvptvzsicauo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LoadableModuleを使用するアクティブエージェントを50個使用して、さまざまな結果をすばやく生成しました。</font><font style="vertical-align: inherit;">彼らは行、数字などを生成しました。</font><font style="vertical-align: inherit;">データベースに大量のデータが詰まっています。</font><font style="vertical-align: inherit;">当初、構成にはホストごとに5000のデータ要素が含まれており、ほぼ各データ要素にトリガーが含まれていたため、実際のセットアップでした。</font><font style="vertical-align: inherit;">場合によっては、使用するのに複数のトリガーがかかることさえあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/z0/os/9ez0os1zg6wv3k3d176svhoauqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更新間隔と負荷自体を調整して、50個のエージェント（追加）を使用するだけでなく、動的データ要素も使用して、更新間隔を4秒に短縮しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能試験。</font><font style="vertical-align: inherit;">PostgreSQL：36,000 NVP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の起動、私がこのハードウェアの純粋なPostreSQL 10で行った最初のセットアップ（1秒あたり35千の値）。一般に、画面に表示されているように、データの挿入には数分の1秒しかかかりません。SSD（200ギガバイト）はすべて問題なく高速です。唯一のことは、20 GBがすぐにいっぱいになることです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/er/oh/sterohufqkrwjzwicbau9fxyeg8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなチャートはもっとたくさんあるでしょう。これは、Zabbixサーバーの標準パフォーマンスダッシュボードです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2m/31/jy/2m31jys-j4bm3ocrwo7bqtp5ftu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のグラフは、1秒あたりの値の数（青、左上）、この場合は35千個の値です。これは（上部中央）ビルドプロセスの読み込みであり、これ（右上）は内部プロセスの読み込みです。履歴同期とハウスキーパーは、ここで十分な時間実行されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このグラフ（中央下）は、ValueCacheの使用-トリガーに対するValueCacheヒットの数（1秒あたり数千の値）を示しています。</font><font style="vertical-align: inherit;">別の重要なグラフは4番目（左下）です。これは、先ほど説明したHistoryCacheの使用法を示しています。これは、データベースに挿入する前のバッファーです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能試験。</font><font style="vertical-align: inherit;">PostgreSQL：5万人のNVP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、同じハードウェアで負荷を1秒あたり5万値に増やしました。</font><font style="vertical-align: inherit;">Hauskiperによってロードされたとき、計算では2〜3秒ですでに10千の値が記録されていました。</font><font style="vertical-align: inherit;">実際、これは次のスクリーンショットに示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z7/ml/st/z7mlstfkfw8weobkfvj83zxy4w4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「ハウスキーパー」はすでに作業を妨害し始めていますが、一般に、履歴シンカートラッパーの読み込みは60％のままです（3番目のグラフ、右上）。</font><font style="vertical-align: inherit;">「Hauskiper」の作業中にすでにHistoryCacheがアクティブにいっぱいになり始めます（左下）。</font><font style="vertical-align: inherit;">それは約半分のギガバイトで、20％で埋められていました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/-k/q4/mk-kq4jre2iwk-6fdt9xlejoaje.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能試験。</font><font style="vertical-align: inherit;">PostgreSQL：8万人のNVP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに1秒あたり8万個の値に増加：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7g/zj/jq/7gzjjqaa68jpj_9yltg7mhfvz0a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは約40万のデータ要素、28万のトリガーでした。ご覧のように、歴史的なシンカー（30個ありました）の読み込みの挿入は、すでにかなり高かったです。さらに、さまざまなパラメーターを増やしました。history-sinkers、cache ...このハードウェアでは、history-sinkersのロードが最大に増加し、ほぼ「シェルフに」到達しました。そのため、HistoryCacheが非常に高い負荷になりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/3z/ky/xd3zkydh5zu-vkewwstgk12qc-s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回はすべてのシステムパラメーター（方法プロセッサが使用され、RAM）、ディスク使用率が最大であることがわかりました-この仮想マシン上のこのハードウェアでこのディスクの最大容量を取得しました。 「Postgres」は非常にアクティブにデータをダンプするほどの強度で始まり、ディスクには書き込み、読み取りの時間がなくなりました...</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/3l/2z/d73l2zoa7tqmhkjoji9z4hx1poy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
128ギガバイトのRAMを搭載した48プロセッサを搭載した別のサーバーを使用しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-x/-b/9d/-x-b9dzzor5kwaba8sloo01yhk0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それも「鈍化」させました。Historysyncer（60個）をインストールし、許容できるパフォーマンスを達成しました。</font><font style="vertical-align: inherit;">実際、私たちは「棚上げ」状態ではありませんが、これはおそらく生産性の限界であり、すでに何かをする必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能試験。</font><font style="vertical-align: inherit;">TimescaleDB：8万NVP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の主な仕事はTimescaleDBを使用することでした。</font><font style="vertical-align: inherit;">失敗は各グラフに表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/2l/hb/zr2lhbdocfwqknn3sgd_4agzsus.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの失敗は単なるデータの移行です。</font><font style="vertical-align: inherit;">その後、「Zabbix」サーバーでは、ご覧のとおり、履歴シンカーのダウンロードプロファイルが大幅に変更されました。</font><font style="vertical-align: inherit;">データを挿入して使用するHistoryCacheを少なくできるのは、ほぼ3倍高速です。したがって、タイムリーにデータを受信できます。</font><font style="vertical-align: inherit;">繰り返しになりますが、毎秒80千の値はかなり高いレートです（もちろん、Yandexの場合はそうではありません）。</font><font style="vertical-align: inherit;">一般に、これは1台のサーバーを使用するかなり大規模なセットアップです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQLパフォーマンステスト：12万NVP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、データ要素の数の値を50万個に増やし、推定値を1秒あたり125千個</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cd/ay/e6/cdaye6egnxctvuobxadw6hf7bhw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
取得しました。次のグラフを取得しました：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ts/di/fg/tsdifgr_chfu20nox8il6o2dtha.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、これは動作する設定であり、かなり長い時間動作します。しかし、私は1.5テラバイトのディスクしか持っていなかったので、数日でそれを使いました。最も重要なこととして、同時に新しいTimescaleDBパーティションが作成され、これはパフォーマンスに関して完全に気付かれず、MySQLとは言えません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パーティションは通常、テーブルの一般的な挿入と操作をブロックし、サービスの低下につながる可能性があるため、夜間に作成されます。この場合、これは違います！主なタスクは、TimescaleDBの機能をテストすることでした。結果はそのような数字でした：1秒あたり12万の値。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コミュニティにも例があります：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/rn/m-/rzrnm-wfnbq8unwrcvozg8neccy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
男はまた、TimescaleDBをオンにし、io.weightを使用する際の負荷がプロセッサにかかりました。</font><font style="vertical-align: inherit;">また、TimescaleDBが含まれているため、内部プロセス要素の使用も減少しています。</font><font style="vertical-align: inherit;">そして、これらは通常のパンケーキディスク、つまり通常のディスク（SSDではない）上の通常の仮想マシンです！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスクパフォ​​ーマンスに依存するいくつかの小さなセットアップでは、TimescaleDBは、私にとっては非常に優れたソリューションです。</font><font style="vertical-align: inherit;">これにより、データベースのより高速なハードウェアに移行する前に、作業を継続できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
皆さんを私たちのイベントに招待します：カンファレンス-モスクワ、サミット-リガ。</font><font style="vertical-align: inherit;">電報、フォーラム、IRC-私たちのチャネルを使用してください。</font><font style="vertical-align: inherit;">ご不明な点がございましたら、カウンターまでお問い合わせください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聴衆の質問</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
聴衆からの質問（以下-A）：-TimescaleDBの設定が非常に簡単で、パフォーマンスが大幅に向上する場合は、おそらくPostgresでZabbixを設定するためのベストプラクティスとして使用する必要がありますか？そして、この決定の落とし穴と短所はありますか、それでも私がZabbixを自分で作ることに決めた場合、私は簡単にPostgresを取得してすぐにTimescaleを配置し、それを使用して問題を考えません？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5j/k8/og/5jk8ogejgbixfe_a0tfxzh8vbmw.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AH：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-はい、私はこれは良い推奨事項だと思います：TimescaleDB拡張機能でPostgresをすぐに使用してください。私が言ったように、この「機能」は実験的であるという事実にもかかわらず、多くの良いレビュー。しかし実際には、テストはこれが（TimescaleDBを使用した）優れたソリューションであることを示しており、進化すると思います！私たちはこの拡張がどのように発展しているかを監視しており、必要なものを修正します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発中であっても、私たちは彼らの有名な「機能」の1つに依存しました。そこでは、チャンクを少し違った方法で操作できます。しかし、彼らは次のリリースでそれを見つけ出し、このコードに依存する必要がなくなりました。多くのセットアップでこのソリューションを使用することをお勧めします。 MySQLを使用する場合...中規模の設定の場合、どのソリューションでも問題なく機能します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-コミュニティからの最新のグラフで、「ハウスキーパー」のグラフがありました：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xh/pg/0j/xhpg0jw0a7davjqyru9gqg7xnx8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
引き続き機能しました。 HauskiperはTimescaleDBで何をしますか？</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AG：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -今ははっきりとは言えません-コードを見て、さらに詳しく言います。 TimescaleDBクエリを使用してチャンクを削除するのではなく、何らかの形でそれを集約します。私はこの技術的な質問に答える準備ができていませんが。今日または明日、スタンドで説明します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -同様の質問があります-タイムスケールでの削除操作のパフォーマンスについてです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A（聴衆からの応答）：-テーブルからデータを削除するとき、削除によってそれを行う場合は、テーブルを通過する必要があります-削除、クリーン、将来の掃除のためにすべてにマークを付けます。タイムスケールでは、チャンクがあるため、ドロップできます。大まかに言えば、ビッグデータに含まれるファイルに「削除！」と言うだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイムスケールは、そのようなチャンクがなくなったことを単に理解しています。また、クエリプランナーに統合されているため、選択フックやその他の操作で条件をキャッチし、このチャンクがもはや存在しないことをすぐに理解します。「もうそこには行きません！」 （データなし）。それで全部です！つまり、テーブルスキャンはバイナリファイルの削除によって置き換えられるため、高速です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-すでに話題になっているのはSQLではありません。私が理解している限り、Zabbixは実際にデータを変更する必要はありませんが、これはすべてログのようなものです。データを変更できない専用のデータベースを使用することは可能ですが、同時に保存、蓄積、配布します-Clickhouse、何かカフカのようなものを言いましょう..カフカもログです！どういうわけかそれらを統合することは可能ですか？</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AH：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">・荷降ろしができます。バージョン3.4の特定の「機能」があります。すべての履歴ファイル、イベント、その他すべてをファイルに書き込むことができます。そして、それをあるプロセッサーによって他のデータベースに送ります。実際、データベースに直接やり直して直接書き込む人の多く。その場で、歴史的なシンカーはこれらすべてをファイルに書き込んだり、これらのファイルをローテーションしたりして、クリックハウスにこれを投げることができます。計画については申し上げられませんが、おそらく、NoSQLソリューション（「Clickhouse」など）のさらなるサポートは継続されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -一般に、postgresを完全に取り除くことができることがわかりますか？</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AH：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-もちろん、Zabbixで最も難しい部分は、最も問題を引き起こす履歴テーブルとイベントです。この場合、イベントを長期間保存せず、他の高速ストレージの傾向とともに履歴を保持していれば、通常は問題はありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -たとえば、クリックハウスに行った場合、すべてがどれだけ速く動作するかを評価できますか？</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AG：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -私はテストしませんでした。 Clickhouseには独自のインターフェースがあるので、少なくとも同じ数は非常に簡単に達成できると思いますが、確実には言えません。テストするほうがいい。それはすべて構成に依存します：所有しているホストの数など。挿入は1つですが、このデータを取得する必要があります-Grafanaなど。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-つまり、私たちは平等な戦いについて話しているのであって、これらの高速データベースの大きな利点について話しているのではないのですか？</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AG：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -統合すると、より正確なテストができると思います。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -古き良きRRDはどこに行きましたか？</font><font style="vertical-align: inherit;">なぜSQLデータベースに切り替えたのですか？</font><font style="vertical-align: inherit;">最初は、すべてのメトリックがRRDで収集されていました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AG：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -「Zabbix」RRDで、おそらく非常に古いバージョンで。</font><font style="vertical-align: inherit;">SQLデータベースは常に存在しています。これは古典的なアプローチです。</font><font style="vertical-align: inherit;">古典的なアプローチはMySQL、PostgreSQLです（これらはすでに長い間存在しています）。</font><font style="vertical-align: inherit;">SQLデータベースとRRDデータベースに共通のインターフェースがあり、ほとんど使用していません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a4/oi/25/a4oi25ls8s9shibkxhx1ckuxfqk.jpeg"><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/umRk94j5M8o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">広告のビット:)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつもご利用いただきありがとうございます。私たちの記事は好きですか？もっと面白い資料を見たいですか？私たちが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発した</font></font></a><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エントリーレベルサーバーのユニークなアナログで</font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">$ 4.99から</font></a><font style="vertical-align: inherit;">、注文またはお友達</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">への開発者向けクラウドベースVPSの開発者</font></a><font style="vertical-align: inherit;">への推奨によって私たちをサポートして</font><b><font style="vertical-align: inherit;">ください：</font></b></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS（KVM）E5-2697 v3（6コア）10GB DDR4 480GB SSD 1Gbpsの真実19ドルから、またはサーバーを分割する方法？</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（オプションは、RAID1およびRAID10、最大24コア、最大40GB DDR4で利用可能です）。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xdは、アムステルダムのEquinix Tier IVデータセンターで2倍安いですか？</font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">オランダでは</font></b><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">199ドルのIntel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV</font></a></b><font style="vertical-align: inherit;">が</font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">2つ</font></a></b><font style="vertical-align: inherit;">だけあり</font><b><font style="vertical-align: inherit;">ます！</font></b></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デルR420-2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB-$ 99から！</font></font></b></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">インフラストラクチャビルディングの構築方法</font></a><font style="vertical-align: inherit;">について</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">お</font></a><font style="vertical-align: inherit;">読みください</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Dell R730xd E5-2650 v4サーバーを使用するクラスcは、1ペニーで9,000ユーロかかりますか？</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja485458/index.html">榴弾砲マフラー</a></li>
<li><a href="../ja485460/index.html">壮大なiOSアプリケーション用の20のライブラリ</a></li>
<li><a href="../ja485462/index.html">eSIMの理解（+専門家へのインタビュー）</a></li>
<li><a href="../ja485464/index.html">私の最初のhtml5ゲーム、Alice Yandexからの受賞、モバイルアプリケーションへの受賞</a></li>
<li><a href="../ja485468/index.html">SwiftのiOSでWebソケットを操作するバリアント/ WebSocketを操作するためのマネージャーを書いた</a></li>
<li><a href="../ja485472/index.html">AMDに期待できる新機能は何ですか？</a></li>
<li><a href="../ja485476/index.html">トレンドと取引所での取引：テクニカル分析の4つの人気のある指標</a></li>
<li><a href="../ja485480/index.html">ポータブルカラムZ-poject Doublebeef-ロシア語のダブルモノ。テスト、分解、アップグレード</a></li>
<li><a href="../ja485482/index.html">Measurement Protocolを介してGoogleアナリティクスにデータを転送する際の3つの問題</a></li>
<li><a href="../ja485484/index.html">[Case Locomizer]ユーザー座標を使用して匿名のデータセットから実際に抽出できる知識</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>