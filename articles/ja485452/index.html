<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤘🏿 🔯 😂 RustがTechEmpower Frameworkベンチマークをリードする理由 🍓 💅🏼 🤫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="実は、ラストの内臓が何色なのか見たくありませんでした。Goで趣味のプロジェクトを手に取り、GitHubに行ってfasthttpの状態を確認しました。開発中ですか？まあ、少なくともサポートされていますか？成長した。TechEmpowerベンチマークでfasthttpがどこにあるかを調べました。私が見る...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>RustがTechEmpower Frameworkベンチマークをリードする理由</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485452/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実は、ラストの内臓が何色なのか見たくありませんでした。</font><font style="vertical-align: inherit;">Goで趣味のプロジェクトを手に取り、GitHubに行ってfasthttpの状態を確認しました。開発中ですか？</font><font style="vertical-align: inherit;">まあ、少なくともサポートされていますか？</font><font style="vertical-align: inherit;">成長した。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TechEmpower</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンチマークでfasthttpがどこにあるかを調べました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私が見ると、そこにあるfasthttpは、リーダーが成功したものの半分をほとんど示していません。</font><font style="vertical-align: inherit;">このような痛み。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで私は腕を組んで、床に頭をぶつけて（3回）、「ハレルヤ、本当にさびは真の神であり、私は以前は盲目でした！」と叫びました。</font><font style="vertical-align: inherit;">しかし、ハンドルが機能しなかったか、額が後悔したかのいずれかでした...代わりに、Goで記述されたテストとRustのactix-webテストのコードに入りました。</font><font style="vertical-align: inherit;">それを整理するために。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数時間後、私は気づきました：</font></font></p><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのTechEmpowerテストで、actix-web Rustフレームワークが1位にランクされる理由</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaがスクリプトを起動する方法。</font></font></li>
</ol><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、すべてを順番に説明します。</font></font></p><a name="habracut"></a><br>
<h2 id="chto-za-techempower-framework-benchmark"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TechEmpower Frameworkベンチマークとは何ですか？</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webフレームワークが、友人に「私は速い」とささやくようなことを考えているか、時には考えているかどうかを示している場合、それは確実にTechEmpowerフレームワークベンチマークに分類されます。</font><font style="vertical-align: inherit;">パフォーマンスを測定するために行く人気の場所。</font></font></p><br>
<p>   :  , ,            .    ,     .     ,     .</p><br>
<p>      plaintext, "Hello World!"   .        : , ,    .    .   plaintext    ,     .</p><br>
<p>,    ,      ().   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.      ,  /     http-,      ,   JSON-.</p><br>
<p>     ,   .     .    ,  ,     "" .</p><br>
<p>,       ,     : "      plaintext?!".  plaintext    ,         , actix-web    .       . .</p><br>
<p>  :     JavaScript.  ex4x. ,         Java.  Java runtime, JDBC.   JavaScript      Java .    —   Script  Java.    .</p><br>
<h2 id="kak-posmotret-kod-i-chto-tam-vnutri">      </h2><br>
<p>     GitHub.  —  ,   .    ,     GitHub.     300     ,     .    ,     .      ,       .   ,       .</p><br>
<p>  —     .           .    ,      .    ,   .  .    Rust.</p><br>
<p>   Rust      .     C, C++, D   Go   - ,     ,  ,      - ,     <del></del> Rust.   ,    ,    <del>  </del>   : ", ,    ?!"</p><br>
<p>    .</p><br>
<p>. ,    Rust  .  ,    ,     Rust,        .</p><br>
<p>     ,     .  .   ’      —    ,       .   .    . ,    :        20. , ,   . ,     crates.</p><br>
<h2 id="a-razve-delo-ne-v-samom-rust">      Rust?</h2><br>
<p>.     .</p><br>
<p>  Rust —  . , ,     .          .  —   ,   ,  .</p><br>
<p>   —  plaintext    .   actix-web, fasthttp          ,       Rust    .</p><br>
<p>  actix-web,  "": , ,  .  ,   —   .</p><br>
<p>   &nbsp;,    .</p><br>
<p>   ,     ,  (  )   actix      :</p><br>
<ol>
<li> (pipelined)   tokio-postgres;</li>
<li>     Rust    ,   Go;</li>
<li>  actix    ,     (simple query),     UPDATE.</li>
</ol><br>
<h2 id="chto-esche-za-konveyernyy-rezhim">    ?</h2><br>
<p>    tokio-postgres (     PostgreSQL),       :</p><br>
<pre><code class="plaintext hljs">Sequential                              Pipelined<font></font>
| Client         | PostgreSQL      |    | Client         | PostgreSQL      |<font></font>
|----------------|-----------------|    |----------------|-----------------|<font></font>
| send query 1   |                 |    | send query 1   |                 |<font></font>
|                | process query 1 |    | send query 2   | process query 1 |<font></font>
| receive rows 1 |                 |    | send query 3   | process query 2 |<font></font>
| send query 2   |                 |    | receive rows 1 | process query 3 |<font></font>
|                | process query 2 |    | receive rows 2 |                 |<font></font>
| receive rows 2 |                 |    | receive rows 3 |                 |<font></font>
| send query 3   |                 |<font></font>
|                | process query 3 |<font></font>
| receive rows 3 |                 |</code></pre><br>
<p>  pipelined ()     PostgreSQL,    ,  PostgreSQL  . ,             .</p><br>
<p>       (      ),      . ,     tokio-postgres,     .</p><br>
<p>   SQL-,   ,  PostgreSQL    (Parse, Bind, Execute  Sync),     ,         .</p><br>
<h2 id="a-pochemu-v-go-ne-tak">   Go  ?</h2><br>
<p>   Go       .     .</p><br>
<p>    SQL-  ,    ,             ,      ,    :</p><br>
<pre><code class="plaintext hljs">| Connection     | Connection 2   | Connection 3   | PostgreSQL      |<font></font>
|----------------|----------------|----------------|-----------------|<font></font>
| send query 1   |                |                |                 |<font></font>
|                | send query 2   |                | process query 1 |<font></font>
| receive rows 1 |                | send query 3   | process query 2 |<font></font>
|                | receive rows 2 |                | process query 3 |<font></font>
                 |                | receive rows 3 |                 |<font></font>
</code></pre><br>
<p> ,   ( )   .</p><br>
<p>         PostgreSQL   .</p><br>
<h2 id="a-pri-chyom-tut-voobsche-kolichestvo-soedineniy">      ?</h2><br>
<p>      PostgreSQL     .</p><br>
<p>        PostgreSQL      :</p><br>
<p><img src="https://habrastorage.org/webt/nj/rl/io/njrlior5dxzdovhnxrv4spx8q_w.png"></p><br>
<p><em>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   Percona</a>)</em></p><br>
<p>,         PostgreSQL  .</p><br>
<p> ,    —  "".       , ""   PostgreSQL  ,    .</p><br>
<p>         PostgreSQL,      pgbouncer    odyssey.</p><br>
<h2 id="tak-pochemu-actix-web-okazalsya-bystree">  actix-web  ?</h2><br>
<p>-  actix-web  .    "",    ,   .    (serde, yarde)  ,  .   ,   ,   PostgreSQL   ,   actix-web      .         PostgreSQL.</p><br>
<p>    —    PostgreSQL (.  ).</p><br>
<p>,     (tokio-postgres),       PostgreSQL     .  http-   SQL-        —   .   ,  ,  .   ,      .</p><br>
<p>    ,    PostgreSQL,       ?</p><br>
<p>.     .</p><br>
<h2 id="kogda-konveyernyy-rezhim-vryad-li-spaset-i-uzh-tochno-ne-sohranit">          </h2><br>
<p>,          PostgreSQL.</p><br>
<p>          ,    .    .</p><br>
<p>     PostgreSQL (,        ),  ,    ,    .</p><br>
<p>   PostgreSQL  ,     .   ,        ,  sql-,    http-.         .</p><br>
<p>    —     .    ,       http-.       http-   ,     ,      .    Rust ,   .  ,   Rust       .    , ,   .  Go   .   (generics), .</p><br>
<p> :  ,    ,   .      .            .               .</p><br>
<h2 id="est-v-kode-benchmarka-esche-chto-to-interesnoe">     - ?</h2><br>
<p>.</p><br>
<p>,     ,   .   ,    ,   .     ,          .</p><br>
<p> ( )    ,     :</p><br>
<pre><code class="rust hljs">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> worlds = <span class="hljs-built_in">Vec</span>::with_capacity(num);
    <span class="hljs-comment">//  num    PostgreSQL</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..num {
        <span class="hljs-keyword">let</span> w_id: <span class="hljs-built_in">i32</span> = <span class="hljs-keyword">self</span>.rng.gen_range(<span class="hljs-number">1</span>, <span class="hljs-number">10_001</span>);<font></font>
        worlds.push(<font></font>
            <span class="hljs-keyword">self</span>.cl<font></font>
                .query(&amp;<span class="hljs-keyword">self</span>.world, &amp;[&amp;w_id])<font></font>
                .into_future()<font></font>
                .map(<span class="hljs-keyword">move</span> |(row, _)| {
                    <span class="hljs-comment">// ...</span><font></font>
                }),<font></font>
        );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//    </span><font></font>
    stream::futures_unordered(worlds)<font></font>
            .collect()<font></font>
            .and_then(<span class="hljs-keyword">move</span> |worlds| {
                <span class="hljs-comment">// ...</span>
            })</code></pre><br>
<p>      . ,      PostgreSQL,       .   .   .  .</p><br>
<p> ? , -,   (   ,   18 )    async/await,    Rust .   futures <code>num</code> SQL-   "" — ,    .       :  PostgreSQL     SQL-,   . -    ,          http-    SQL- .</p><br>
<p> PostgreSQL   ,       ()  . ,      , .</p><br>
<p>,    (.    tokio-postgres)       http-.</p><br>
<p> ?</p><br>
<h2 id="ispolzovanie-uproschennogo-protokola-simple-query-dlya-paketnogo-obnovleniya">   (simple query)   </h2><br>
<p>       PostgreSQL     SQL-.  (Extended Query)      : Parse, Bind, Execute  Sync.    (Simple Query) ,            — Query.</p><br>
<p>       :      .  .   ,    SQL-         .</p><br>
<p> ,    actix-web,       ,    Simple Query.</p><br>
<p>       -      ,   . ,        ,   ,    .</p><br>
<p>,    ,   :</p><br>
<pre><code class="sql hljs"><span class="hljs-keyword">UPDATE</span> world <span class="hljs-keyword">SET</span> randomnumber = temp.randomnumber <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>) <span class="hljs-keyword">AS</span> temp(<span class="hljs-keyword">id</span>, randomnumber) <span class="hljs-keyword">WHERE</span> temp.id = world.id</code></pre><br>
<p> <code>(1, 2), (2, 3)</code> —   /   randomnumber.</p><br>
<p>   ,  (PREPARE)    .     — ,     (  ),   SQL injection ,      SQL      Simple Query.</p><br>
<p> Simple Query  .   : "   Simple Query ,      ".       . Simple Query    ,   PostgreSQL         .          .   SQL- (  )   .   ,      ,   Simple Query    .</p><br>
<p>   ,     SQL   ,      .    Simple Query.         .       PostgreSQL: pgx (  Go)     , JDBC —         .            .</p><br>
<h2 id="tak-pochemu-rust-lidiruet">  Rust ?</h2><br>
<p>,  ,  Rust.     actix-web —    "" .  , , rocket  iron,   .      actix-web    Rust   .    — &nbsp; .</p><br>
<p> ,   ""    actix-web,        TechEmpower —  ,     PostgreSQL:</p><br>
<ol>
<li>     PostgreSQL   -.      ,         .</li>
<li>    —    PostgreSQL.     .         (     ,   ).</li>
</ol><br>
<p>,   ,      ,     (  pgbouncer  odyssey).        .</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rustで登場した非同期/待機が非常に興味深いです。最近のactix-webのドラマは、Web開発におけるRustの人気に影響を与えます。</font><font style="vertical-align: inherit;">また、非同期/待機で処理した後にテスト結果がどのように変化するかも興味深いです。</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja485428/index.html">神秘的なLyXプログラム。パート5</a></li>
<li><a href="../ja485430/index.html">エンドツーエンドの暗号化を備えたシンプルなマルチユーザーテキストエディター</a></li>
<li><a href="../ja485438/index.html">React UIコンポーネントのテスト</a></li>
<li><a href="../ja485448/index.html">Arduinoを実行しているRDA5807の別のFMラジオ</a></li>
<li><a href="../ja485450/index.html">SObjectizer-5.7.0の新機能と次にこのプロジェクトを待っているものは何ですか？</a></li>
<li><a href="../ja485454/index.html">ユーザーリターンの概要：フックモデルのヒント</a></li>
<li><a href="../ja485458/index.html">榴弾砲マフラー</a></li>
<li><a href="../ja485460/index.html">壮大なiOSアプリケーション用の20のライブラリ</a></li>
<li><a href="../ja485462/index.html">eSIMの理解（+専門家へのインタビュー）</a></li>
<li><a href="../ja485464/index.html">私の最初のhtml5ゲーム、Alice Yandexからの受賞、モバイルアプリケーションへの受賞</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>