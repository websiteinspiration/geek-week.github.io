<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¶ üõ¨ üïµüèæ Hoher Speicherbedarf in Android - was tun? üóùÔ∏è üöπ üö£üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo liebe Leser. 
 
 Heute machen wir Sie auf ein wenig Material √ºber den kompetenten Einsatz von Speicher in Android aufmerksam . 
 
 
 
 Viel Spa√ü...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hoher Speicherbedarf in Android - was tun?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/497858/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo liebe Leser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heute machen wir Sie auf ein wenig Material √ºber den kompetenten Einsatz von Speicher in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android aufmerksam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/0y/g6/f40yg6u5swe9eljh-fifu43qxak.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viel Spa√ü beim Lesen!</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Artikel konzentriert sich auf die grundlegenden Techniken zum Verwalten der Speichernutzung in Anwendungen - z. B. Browsern, Bildbearbeitungsprogrammen und PDF-Viewern -, in denen gro√üe Speicheranforderungen gestellt werden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zun√§chst eine kleine Theorie</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die meisten Android-Apps laufen auf der Laufzeit ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ART</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), die die mittlerweile veraltete virtuelle Dalvik-Maschine ersetzt hat. </font><font style="vertical-align: inherit;">ART und Dalvik √§hneln der Java Virtual Machine (JVM), mit der sie √§hnliche Entwurfsprinzipien teilen. </font><font style="vertical-align: inherit;">Sie verwenden zwei separate Bereiche zum Speichern von Anwendungsdaten: den Stapel und den Heap. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stapelspeicher Der</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Stapelspeicher in Java wird zum Speichern lokaler Variablen (primitive Typen und Objektreferenzen) verwendet. </font><font style="vertical-align: inherit;">Jeder Java-Thread hat einen eigenen Stapel. </font><font style="vertical-align: inherit;">Der Stapelspeicher ist im Vergleich zum Heapspeicher relativ klein. </font><font style="vertical-align: inherit;">Die Java-Stapelgr√∂√üe von Dalvik betr√§gt normalerweise 32 KB f√ºr Java-Code und 1 MB f√ºr nativen Code (C ++ / JNI). </font><font style="vertical-align: inherit;">In ART ist ein einheitlicher Stapel f√ºr Java und C ++ erschienen, dessen Gr√∂√üe etwa 1 MB betr√§gt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Anwendung den gesamten Stapelspeicher bis zum Limit ausw√§hlt, wird ein Fehler ausgegeben </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">StackOverflowError</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Die wahrscheinlichsten Gr√ºnde, warum ein Stapellimit erreicht werden kann, sind entweder eine unendliche Rekursion oder ein zu tiefer Methodenaufruf. Verweise auf den Stapelspeicher erfolgen immer in der LIFO-Reihenfolge (last come - first serve). Bei jedem Aufruf einer Methode wird ein neuer Frame mit den lokalen Variablen dieser Methode auf den Stapel verschoben. Wenn die Methode abgeschlossen ist, wird der Frame vom Stapel entfernt und ein m√∂glicher resultierender Wert wird an den Stapel zur√ºckgesendet. Das erste Problem (unendliche Rekursion) ist ein Fehler, der leicht zu beheben ist. Das zweite Problem erfordert jedoch ein Refactoring, das darin besteht, rekursive Methodenaufrufe bereitzustellen und in eine Schleife umzuwandeln. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heapspeicher</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Heap-Speicher in Java wird von einer virtuellen Maschine zum Zuweisen von Objekten verwendet. </font><font style="vertical-align: inherit;">Immer wenn ein Objekt erstellt wird, geschieht dies auf dem Heap. </font><font style="vertical-align: inherit;">Virtuelle Maschinen wie JVM oder ART sammeln regelm√§√üig M√ºll, entfernen alle Objekte, auf die nicht mehr verwiesen wird, und geben so Speicher frei, um neue Objekte zuzuweisen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Benutzerfreundlichkeit zu gew√§hrleisten, begrenzt Android die Heap-Gr√∂√üen f√ºr jede laufende Anwendung streng. </font><font style="vertical-align: inherit;">Die Beschr√§nkung der Heap-Gr√∂√üe variiert von Ger√§t zu Ger√§t und h√§ngt davon ab, wie viel RAM sich auf diesem Ger√§t befindet. </font><font style="vertical-align: inherit;">Wenn Ihre Anwendung die maximale Heap-Gr√∂√üe erreicht und versucht, mehr Speicher zuzuweisen, wird ein Fehler generiert </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OutOfMemoryError</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die Anwendung wird beendet. </font><font style="vertical-align: inherit;">Schauen wir uns einige Beispiele an, um diese Situation zu vermeiden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heap-Speicheranalyse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das wichtigste Werkzeug f√ºr das </font><font style="vertical-align: inherit;">Verst√§ndnis Ged√§chtnisprobleme in Ihren Anwendungen und das </font><font style="vertical-align: inherit;">Verst√§ndnis , </font><font style="vertical-align: inherit;">wie Speicher verwendet wird , </font><font style="vertical-align: inherit;">ist die Speicher - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profiler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Android Studio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Tool visualisiert, wie viel Speicher Ihre Anwendung im Laufe der Zeit verbraucht. </font><font style="vertical-align: inherit;">Sie k√∂nnen Snapshots des Java-Heaps in einer laufenden Anwendung erstellen, die Speicherzuweisungsvorg√§nge aufzeichnen und den Heap oder diesen Speicherzuweisungsverlauf in einer leistungsstarken Benutzeroberfl√§che verfolgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine typische Speicherprofilersitzung sollte folgenderma√üen aussehen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir untersuchen die h√§ufigsten Speicherzuordnungen und Garbage Collector-Passagen, um m√∂gliche Leistungsprobleme zu identifizieren.</font></font></li>
<li>,      ,    ,  ,  ,    . ,        . ,  ,      <code>PdfActivity</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PSPDFKit</a>   .</li>
<li>           ,   .   ,          .        ‚Äì ,         ,      .</li>
</ul><br>
<h4> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moderne M√ºllsammler sind komplexe Werke technologischer Kunst, das Ergebnis langj√§hriger Forschung und Entwicklung, an der Hunderte von Menschen teilgenommen haben, von Akademikern bis zu professionellen Entwicklern. Sie m√ºssen jedoch weiterhin in Alarmbereitschaft sein, um Speicherverluste zu vermeiden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine beispielhafte L√∂sung zum Erkennen von Speicherlecks ist die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LeakCanary-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek </font><font style="vertical-align: inherit;">. Es werden automatisch Benachrichtigungen ausgegeben, wenn Sie sich in Ihrer Testassembly (Entwicklungsversion) befinden, und Sie erhalten die Leckverfolgungsrate in der Benutzeroberfl√§che dieses Programms. Sie k√∂nnen (und sollten) </font><font style="vertical-align: inherit;">es heute </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">integrieren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , zumal es nicht schwierig ist!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist besonders einfach, Speicherlecks zu provozieren, wenn Sie mit komplexen Lebenszyklen von Aktivit√§ten oder Fragmenten von Android arbeiten. </font><font style="vertical-align: inherit;">Dies geschieht h√§ufig an Stellen, an denen Entwickler </font><font style="vertical-align: inherit;">in der Hintergrundaufgabe oder in statischen Variablen </font><font style="vertical-align: inherit;">starke Verweise auf </font><font style="vertical-align: inherit;">UI- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontexte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder andere UI-spezifische Objekte haben. </font><font style="vertical-align: inherit;">Eine M√∂glichkeit, solche Verz√∂gerungen zu provozieren, besteht darin, das Ger√§t beim Testen Ihrer Anwendung aktiv zu verdrehen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie als Reaktion auf Ereignisse Speicher frei</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Android erfordert m√∂glicherweise, dass die Anwendung Speicher zuweist, oder erzwingt einfach das Beenden, wenn der Speicher freigegeben werden muss, um kritischere Aufgaben auszuf√ºhren. Bevor dies geschieht, k√∂nnen Sie auf dem System den gesamten Speicher bereitstellen, den Sie nicht ben√∂tigen. In Ihrer Aktivit√§t m√ºssen Sie eine Schnittstelle implementieren </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ComponentCallbacks2</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In diesem Fall wird Ihre Methode immer dann aufgerufen, wenn auf Ihrem System nicht gen√ºgend Arbeitsspeicher vorhanden ist </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">onTrimMemory()</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und Sie k√∂nnen Speicher freigeben oder Funktionen deaktivieren, die unter solchen Bedingungen mit Speichermangel nicht funktionieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solche R√ºckrufe werden also in der PSPDFKit-Anwendung behandelt. </font><font style="vertical-align: inherit;">Die PSPDFKit-Anwendung wurde mit der Berechnung der aktiven Speichernutzung f√ºr das Caching entwickelt, damit die Anwendung so reibungslos wie m√∂glich ausgef√ºhrt wird. </font><font style="vertical-align: inherit;">Zun√§chst ist nicht bekannt, wie viel Speicher auf dem Ger√§t verf√ºgbar ist. Daher passt sich PSPDFKit der Situation an und beschr√§nkt die Verwendung des Speichers, wenn Benachrichtigungen empfangen werden, dass nicht gen√ºgend Speicher vorhanden ist. </font><font style="vertical-align: inherit;">Daher funktionieren in PSPDFKit integrierte Anwendungen auch auf Low-Tech-Ger√§ten, jedoch mit reduzierter Leistung, da das Caching deaktiviert ist.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gro√üer Haufen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der Front-End-L√∂sungen zur Bew√§ltigung des hohen Speicherbedarfs besteht darin, eine gro√üe Menge Dalvik f√ºr Ihre Anwendung anzufordern. Dazu k√∂nnen Sie </font></font><code>android:largeHeap="true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem &lt;application&gt; -Tag in der Datei </font><font style="vertical-align: inherit;">hinzuf√ºgen </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Eigenschaft </font></font><code>largeHeap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf value festgelegt ist </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, erstellt Android alle Prozesse f√ºr Ihre Anwendung mit einem gro√üen Heap. Diese Einstellung ist nur f√ºr Anwendungen vorgesehen, die naturgem√§√ü ohne sie nicht funktionieren k√∂nnen, dh sie verwenden umfangreiche Ressourcen, die gleichzeitig in den Speicher passen m√ºssen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird dringend davon abgeraten, einen gro√üen Heap zu verwenden, wenn Sie nur die Obergrenze f√ºr eine m√∂gliche Speichernutzung erh√∂hen m√∂chten. </font><font style="vertical-align: inherit;">Die Speichernutzung sollte immer optimiert werden, da selbst ein gro√üer Stapel Ihrer Anwendung m√∂glicherweise nicht ausreicht, wenn Sie an einem schwachen Ger√§t mit kleinem Speicher arbeiten.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberpr√ºfen Sie, wie viel Speicher Ihre Anwendung verwenden kann</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es schadet nie zu √ºberpr√ºfen, wie gro√ü der Heap Ihrer Anwendung ist, und Ihren Code und die verf√ºgbaren Funktionen dynamisch an diese Speichergrenzen anzupassen. </font><font style="vertical-align: inherit;">Sie k√∂nnen die maximale Heap-Gr√∂√üe direkt zur Laufzeit mithilfe von Methoden </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">getMemoryClass()</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">getLargeMemoryClass()</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(wenn ein gro√üer Heap aktiviert ist) </font><font style="vertical-align: inherit;">√ºberpr√ºfen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Android unterst√ºtzt sogar Ger√§te mit nur 512 MB RAM. </font><font style="vertical-align: inherit;">Ignorieren Sie Low-Tech-Ger√§te nicht! </font><font style="vertical-align: inherit;">Mit der Methode</font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">isLowRamDevice()</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen √ºberpr√ºfen, ob Ihre Anwendung auf einem solchen Ger√§t ausgef√ºhrt wird, auf dem nicht gen√ºgend Speicher verf√ºgbar ist. </font><font style="vertical-align: inherit;">Das genaue Verhalten dieser Methode ist ger√§teabh√§ngig, gibt jedoch normalerweise auf Ger√§ten mit weniger als 1 GB RAM true zur√ºck. </font><font style="vertical-align: inherit;">Sie m√ºssen sicherstellen, dass Ihre Anwendung auf diesen Ger√§ten ordnungsgem√§√ü funktioniert, und alle Funktionen deaktivieren, die viel Speicherplatz auf ihnen verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lesen Sie </font><font style="vertical-align: inherit;">mehr dar√ºber , </font><font style="vertical-align: inherit;">wie Android funktioniert auf Ger√§ten mit einer geringen Menge an Speicher, k√∂nnen Sie lesen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">Weitere Optimierungstipps finden Sie hier.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie optimierte Datenstrukturen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In vielen F√§llen verwenden Anwendungen zu viel Speicher, weil sie nicht die am besten geeigneten Datenstrukturen verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Java-Sammlungen k√∂nnen keine effizienten primitiven Typen speichern und erfordern das Packen ihrer Schl√ºssel und Werte. Beispielsweise sollten </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HashMap</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit ganzzahligen Schl√ºsseln durch optimierte ersetzt werden </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SparseArray</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Letztendlich k√∂nnen Sie immer Raw-Arrays anstelle von Sammlungen verwenden. Dies ist eine gute Idee, wenn die Gr√∂√üe Ihrer Sammlung nicht ge√§ndert werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Andere Datenstrukturen, die hinsichtlich der Speichernutzung ineffizient sind, umfassen verschiedene Serialisierungen. Ja, XML- oder JSON-Formate sind in der Tat bequem zu verwenden. Sie k√∂nnen die Speichernutzung reduzieren, wenn Sie mit einem effizienteren Bin√§rformat arbeiten, z. B. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokollpuffern</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle diese Beispiele mit Datenstrukturen, die zum Speichern von Speicher optimiert wurden, sind nur Hinweise. </font><font style="vertical-align: inherit;">Wie beim Refactoring m√ºssen Sie zuerst die Ursache der Probleme finden und dann mit solchen Leistungsoptimierungen fortfahren.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verhindern Sie das Mischen des Speichers</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Virtuelle Java / Android-Maschinen weisen Objekte sehr schnell zu. </font><font style="vertical-align: inherit;">Die Speicherbereinigung ist auch sehr schnell. </font><font style="vertical-align: inherit;">Wenn Sie jedoch in kurzer Zeit eine gro√üe Anzahl von Objekten zuweisen, kann ein Problem auftreten, das als "Speicherabwanderung" bezeichnet wird. </font><font style="vertical-align: inherit;">In diesem Fall hat die virtuelle Maschine keine Zeit, Objekte in diesem Tempo zuzuweisen, und der Garbage Collector entsorgt sie, und die Anwendung wird langsamer und verbraucht in extremen F√§llen sogar den gesamten Speicher.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Hauptproblem auf Android-Gebiet in diesem Fall ist, dass wir nicht steuern, wann die Speicherbereinigung stattfinden wird. </font><font style="vertical-align: inherit;">Dies kann m√∂glicherweise zu Problemen f√ºhren: Beispielsweise arbeitet der Garbage Collector genau zu dem Zeitpunkt, zu dem sich die Animation auf dem Bildschirm entfaltet, und wir √ºberschreiten den Schwellenwert von 16 ms, wodurch eine reibungslose Anzeige der Frames gew√§hrleistet wird. </font><font style="vertical-align: inherit;">Daher ist es wichtig, eine √úberbelegung des Speichers im Code zu verhindern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel f√ºr eine Situation, die zu einer Speicherumwandlung f√ºhrt, ist die Zuweisung gro√üer Objekte, z. B. Malen innerhalb der </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">onDraw()</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√§sentationsmethode. </font><font style="vertical-align: inherit;">In diesem Fall werden viele Objekte schnell erstellt, und die Speicherbereinigung kann beginnen, was sich negativ auf die Leistung dieser Ansicht auswirken kann. </font><font style="vertical-align: inherit;">Wie oben erw√§hnt, sollten Sie die Speichernutzung immer √ºberwachen, um solche Situationen zu vermeiden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arbeitsspeicher (RAM) auf Mobilger√§ten kann eine sehr begrenzte Ressource sein. </font><font style="vertical-align: inherit;">Die Gew√§hrleistung einer effizienten Speichernutzung in der Anwendung ist besonders wichtig, wenn Ihre Anwendung mit relativ gro√üen Objekten arbeitet, z. B. Rastergrafiken (PDF-Viewer, Webbrowser, Bildbearbeitungsprogramme) oder gro√üen Mediendateien (Audio- oder Videobearbeitungsprogramme). </font><font style="vertical-align: inherit;">Wenn Sie diese Tipps befolgen, erfahren Sie, wie Sie hochwertige Anwendungen erstellen, die selbst auf den leistungsst√§rksten Ger√§ten auf einem akzeptablen Niveau funktionieren.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497838/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 507 (31.03.2020-06.04.2020)</a></li>
<li><a href="../de497840/index.html">SOC an einem entfernten Standort. Wor√ºber lohnt es sich nachzudenken?</a></li>
<li><a href="../de497842/index.html">Banana Pi R64 Der beste Router f√ºr OpenWrt oder nicht?</a></li>
<li><a href="../de497850/index.html">Wie habe ich einen Arcade-Automaten repariert?</a></li>
<li><a href="../de497856/index.html">Aufw√§rtswandler: DCM vs CCM. Oder warum nicht Angst haben, es selbst zu nehmen?</a></li>
<li><a href="../de497860/index.html">Generieren von Entwurfsmustern in ES6 + am Beispiel des Game of Thrones</a></li>
<li><a href="../de497862/index.html">Warum l√∂schen Sie nicht alle Elemente des Arrays, indem Sie es [] neu zuweisen?</a></li>
<li><a href="../de497864/index.html">(S) SDLC oder Wie man die Entwicklung sicherer macht. Teil 1</a></li>
<li><a href="../de497866/index.html">SIL-Code reinigen</a></li>
<li><a href="../de497870/index.html">Computerviren: eine Geschichte von harmlosen Hausspionen bis hin zu Bankkartendieben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>