<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¼â€ğŸ¤ âœ’ï¸ ğŸ‘¹ x86ã§ã®JVM HotSpotã§ã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã®åˆæœŸåŒ–ã¨æ“ä½œ ğŸ§” ğŸ§•ğŸ» ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã»ã¨ã‚“ã©ã™ã¹ã¦ã®Javaé–‹ç™ºè€…ã¯ã€Javaè¨€èªã§è¨˜è¿°ã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæœ€åˆã«JVMãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€æ¨™æº–åŒ–ã•ã‚ŒãŸå½¢å¼ã§ã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ ¼ç´ã•ã‚Œã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã€‚ãã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»®æƒ³ãƒã‚·ãƒ³å†…ã«å–å¾—ã—ãŸå¾Œã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒãã‚Œã‚‰ã«åˆ°é”ã™ã‚‹ã¾ã§ã€JVMã¯ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã«å«...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>x86ã§ã®JVM HotSpotã§ã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã®åˆæœŸåŒ–ã¨æ“ä½œ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469291/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã»ã¨ã‚“ã©ã™ã¹ã¦ã®Javaé–‹ç™ºè€…ã¯ã€Javaè¨€èªã§è¨˜è¿°ã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæœ€åˆã«JVMãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨™æº–åŒ–ã•ã‚ŒãŸå½¢å¼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æ ¼ç´ã•ã‚Œã‚‹ã“ã¨ã‚’çŸ¥ã£ã¦ã„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»®æƒ³ãƒã‚·ãƒ³å†…ã«å–å¾—ã—ãŸå¾Œã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒãã‚Œã‚‰ã«åˆ°é”ã™ã‚‹ã¾ã§ã€JVMã¯ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œã¦ã„ã‚‹ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è§£é‡ˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€OpenJDK JVM HotSpotã«é–¢ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã®æ¦‚è¦ã‚’èª¬æ˜ã—ã¾ã™ã€‚</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¨˜äº‹ã®å†…å®¹ï¼š</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç’°å¢ƒ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã®åˆæœŸåŒ–ã¨Javaã‚³ãƒ¼ãƒ‰ã¸ã®åˆ¶å¾¡è»¢é€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹</font></font></li>
</ul><br>
<h4 id="okruzhenie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç’°å¢ƒ</font></font></h4><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿé¨“ã§ã¯</font><font style="vertical-align: inherit;">ã€</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">autoconfæ§‹æˆã‚’</font></a><font style="vertical-align: inherit;">å«ã‚€æœ€æ–°ã®OpenJDK JDK12 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚’ä½¿ç”¨ã—</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font></a> </p><br>
<pre><code class="plaintext hljs">--enable-debug --with-native-debug-symbols=internal</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu 18.04 / gcc 7.4.0ã®å ´åˆã€‚ </font></font></p><br>
<p><code>--with-native-debug-symbols=internal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã¤ã¾ã‚Šã€JDKã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€debazhæ–‡å­—ãŒãƒã‚¤ãƒŠãƒªè‡ªä½“ã«å«ã¾ã‚Œã¾ã™ã€‚</font></font></p><br>
<p><code>--enable-debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -ãƒã‚¤ãƒŠãƒªã«è¿½åŠ ã®debaseã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹ã¨ã„ã†äº‹å®Ÿã€‚ </font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªç’°å¢ƒã§JDK 12ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ã¯è¤‡é›‘ãªãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">JDK11ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDK nã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã«ã¯JDK n-1ãŒå¿…è¦ã§ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€autoconfã«é€šçŸ¥ã™ã‚‹å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ‰‹å‹•ã§æä¾›ã™ã‚‹ã ã‘ã§æ¸ˆã¿ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™</font></font></p><br>
<pre><code class="plaintext hljs">bash configure --enable-debug --with-native-debug-symbols=internal &amp;&amp; make CONF=fastdebug images</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°‘ã—å¾…ã£ãŸå¾Œï¼ˆç§ã®ãƒ©ãƒƒãƒ—ãƒˆãƒƒãƒ—ã§ç´„10åˆ†ï¼‰ã€fastdebugã‚¢ã‚»ãƒ³ãƒ–ãƒªJDK 12ã‚’å–å¾—ã—ã¾ã™ã€‚</font></font></p><br>
<p>        jdk        openjdk-xx-dbg   ,  xx-  jdk,  fastdebug       gdb,       .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">ps()</a> â€”    Java-  gdb  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">pfl()</a> â€”      (      gdb).</p><br>
<div class="spoiler"><b class="spoiler_title"> ps()  pfl()</b><div class="spoiler_text"><p>    gdb-</p><br>
<pre><code class="plaintext hljs">#   java<font></font>
file /home/dmitrii/jdk12/build/linux-x86_64-server-fastdebug/images/jdk/bin/java<font></font>
<font></font>
#   SEGV-, HotSpot<font></font>
#  SEGV  .<font></font>
#, https://hg.openjdk.java.net/jdk/jdk12/file/06222165c35f/src/hotspot/cpu/x86/vm_version_x86.cpp#l361<font></font>
handle SIGSEGV nostop noprint<font></font>
<font></font>
set breakpoint pending on<font></font>
<font></font>
set pagination off<font></font>
<font></font>
#  ,  <font></font>
#   <font></font>
# java- public static void main(String args[])<font></font>
b PostJVMInit thread 2<font></font>
commands<font></font>
    #   ,<font></font>
    #   <font></font>
    set $buf = (char *) malloc(1000)<font></font>
<font></font>
    #       <font></font>
    #(   )<font></font>
    b *AbstractInterpreter::_entry_table[0] thread 2<font></font>
    commands<font></font>
        #      rbx.<font></font>
        #   Method*<font></font>
        set $mthd = ((Method *) $rbx)<font></font>
        #    $buf<font></font>
        call $mthd-&gt;name_and_sig_as_C_string($buf, 1000)<font></font>
        # ,  public static void main(String args)<font></font>
        if strcmp()("Main.main([Ljava/lang/String;)V", $buf) == 0<font></font>
            #   ,     <font></font>
            # ps/pfl       <font></font>
            #(    ps/pfl)<font></font>
            b InterpreterRuntime::build_method_counters(JavaThread*, Method*)<font></font>
            commands<font></font>
                #  ,   <font></font>
                #  <font></font>
                delete breakpoints<font></font>
                call ps()<font></font>
                call pfl()<font></font>
                c<font></font>
            end<font></font>
        end<font></font>
        c<font></font>
    end<font></font>
    c<font></font>
end<font></font>
<font></font>
r -cp /home/dmitrii/jdk12/ Main</code></pre><br>
<p>     :</p><br>
<pre><code class="plaintext hljs">"Executing ps"                                                                                                                                                                                                     <font></font>
 for thread: "main" #1 prio=5 os_prio=0 cpu=468,61ms elapsed=58,65s tid=0x00007ffff001b800 nid=0x5bfa runnable  [0x00007ffff7fd9000]                                                                               <font></font>
   java.lang.Thread.State: RUNNABLE                                                                                                                                                                                <font></font>
Thread: 0x00007ffff001b800  [0x5bfa] State: _running _has_called_back 0 _at_poll_safepoint 0                                                                                                                       <font></font>
   JavaThread state: _thread_in_Java                                                                                                                                                                               <font></font>
<font></font>
 1 - frame( sp=0x00007ffff7fd9920, unextended_sp=0x00007ffff7fd9920, fp=0x00007ffff7fd9968, pc=0x00007fffd828748b)                                                                                                 <font></font>
Main.main(Main.java:10)                                                                                                                                                                                            <font></font>
<font></font>
"Executing pfl"                                                                                                                                                                                                    <font></font>
 for thread: "main" #1 prio=5 os_prio=0 cpu=468,83ms elapsed=58,71s tid=0x00007ffff001b800 nid=0x5bfa runnable  [0x00007ffff7fd9000]                                                                               <font></font>
   java.lang.Thread.State: RUNNABLE                                                                                                                                                                                <font></font>
Thread: 0x00007ffff001b800  [0x5bfa] State: _running _has_called_back 0 _at_poll_safepoint 0<font></font>
   JavaThread state: _thread_in_Java<font></font>
<font></font>
[Describe stack layout]<font></font>
 0x00007ffff7fd99e0: 0x00007ffff7fd9b00 #2 entry frame<font></font>
                                        call_stub word fp - 0<font></font>
 0x00007ffff7fd99d8: 0x00007ffff7fd9c10 call_stub word fp - 1<font></font>
 0x00007ffff7fd99d0: 0x00007fffd8287160 call_stub word fp - 2<font></font>
 0x00007ffff7fd99c8: 0x00007fffbf1fb3e0 call_stub word fp - 3<font></font>
 0x00007ffff7fd99c0: 0x000000000000000a call_stub word fp - 4<font></font>
 0x00007ffff7fd99b8: 0x00007ffff7fd9ce8 call_stub word fp - 5<font></font>
 0x00007ffff7fd99b0: 0x00007ffff7fd9a80 call_stub word fp - 6<font></font>
 0x00007ffff7fd99a8: 0x00007ffff001b800 call_stub word fp - 7<font></font>
 0x00007ffff7fd99a0: 0x00007ffff7fd9b40 call_stub word fp - 8<font></font>
 0x00007ffff7fd9998: 0x00007ffff7fd9c00 call_stub word fp - 9<font></font>
 0x00007ffff7fd9990: 0x00007ffff7fd9a80 call_stub word fp - 10<font></font>
 0x00007ffff7fd9988: 0x00007ffff7fd9ce0 call_stub word fp - 11<font></font>
 0x00007ffff7fd9980: 0x00007fff00001fa0 call_stub word fp - 12<font></font>
 0x00007ffff7fd9978: 0x0000000716a122b8 sp for #2<font></font>
                                        locals for #1<font></font>
                                        unextended_sp for #2<font></font>
                                        local 0<font></font>
 0x00007ffff7fd9970: 0x00007fffd82719f3<font></font>
 0x00007ffff7fd9968: 0x00007ffff7fd99e0 #1 method Main.main([Ljava/lang/String;)V @ 0<font></font>
                                        - 1 locals 1 max stack<font></font>
 0x00007ffff7fd9960: 0x00007ffff7fd9978 interpreter_frame_sender_sp<font></font>
 0x00007ffff7fd9958: 0x0000000000000000 interpreter_frame_last_sp<font></font>
 0x00007ffff7fd9950: 0x00007fffbf1fb3e0 interpreter_frame_method<font></font>
 0x00007ffff7fd9948: 0x0000000716a11c40 interpreter_frame_mirror<font></font>
 0x00007ffff7fd9940: 0x0000000000000000 interpreter_frame_mdp<font></font>
 0x00007ffff7fd9938: 0x00007fffbf1fb5e8 interpreter_frame_cache<font></font>
 0x00007ffff7fd9930: 0x00007ffff7fd9978 interpreter_frame_locals<font></font>
 0x00007ffff7fd9928: 0x00007fffbf1fb3d0 interpreter_frame_bcp<font></font>
 0x00007ffff7fd9920: 0x00007ffff7fd9920 sp for #1<font></font>
                                        interpreter_frame_initial_sp<font></font>
                                        unextended_sp for #1</code></pre><br>
<p>  ,   <code>ps()</code>     ,   <code>pfl()</code> â€”   . </p></div></div><br>
<h4 id="zapusk-java-prilozheniya"> java </h4><br>
<p>      ,    ,     java-.       Java,  "   ":</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span></span>{ }<font></font>
}</code></pre><br>
<p>    ,      :</p><br>
<p><code>javac Main.java &amp;&amp; java Main</code></p><br>
<p>   ,     ,       java â€”  ,        JVM-.        </p><br>
<p><code>/home/dmitrii/jdk12/build/linux-x86_64-server-fastdebug/images/jdk/bin/java</code>.</p><br>
<p>        .          20        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">launcher/main.c</a>.</p><br>
<p>,         (char *argv[]), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     JDK_JAVA_OPTIONS</a>,      (,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>   Main-    )  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  JLI_Launch</a>    .</p><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">JLI_Launch</a>     java ,      :</p><br>
<pre><code class="plaintext hljs">$ ldd java<font></font>
        linux-vdso.so.1 (0x00007ffcc97ec000)<font></font>
        libjli.so =&gt; /home/dmitrii/jdk12/build/linux-x86_64-server-fastdebug/images/jdk/bin/./../lib/libjli.so (0x00007ff27518d000) // &lt;---------   <font></font>
        libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007ff274d9c000)<font></font>
        libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007ff274b7f000)<font></font>
        libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007ff27497b000)<font></font>
        libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007ff27475c000)<font></font>
        /lib64/ld-linux-x86-64.so.2 (0x00007ff27559f000)</code></pre><br>
<p>   <strong>libjli.so</strong>    .    launcher interface â€”  ,   java      ,     JLI_Launch.</p><br>
<div class="spoiler"><b class="spoiler_title">   </b><div class="spoiler_text"><pre><code class="plaintext hljs">$ objdump -T -j .text libjli.so <font></font>
<font></font>
libjli.so:     file format elf64-x86-64<font></font>
<font></font>
DYNAMIC SYMBOL TABLE:<font></font>
0000000000009280 g    DF .text  0000000000000038  Base        JLI_List_add<font></font>
0000000000003330 g    DF .text  00000000000001c3  Base        JLI_PreprocessArg<font></font>
0000000000008180 g    DF .text  0000000000000008  Base        JLI_GetStdArgs<font></font>
0000000000008190 g    DF .text  0000000000000008  Base        JLI_GetStdArgc<font></font>
0000000000007e50 g    DF .text  00000000000000b8  Base        JLI_ReportErrorMessage<font></font>
000000000000a400 g    DF .text  00000000000000df  Base        JLI_ManifestIterate<font></font>
0000000000002e70 g    DF .text  0000000000000049  Base        JLI_InitArgProcessing<font></font>
0000000000008000 g    DF .text  0000000000000011  Base        JLI_ReportExceptionDescription<font></font>
0000000000003500 g    DF .text  0000000000000074  Base        JLI_AddArgsFromEnvVar<font></font>
0000000000007f10 g    DF .text  00000000000000e9  Base        JLI_ReportErrorMessageSys<font></font>
0000000000005840 g    DF .text  00000000000000b8  Base        JLI_ReportMessage<font></font>
0000000000009140 g    DF .text  000000000000003a  Base        JLI_SetTraceLauncher<font></font>
0000000000009020 g    DF .text  000000000000000a  Base        JLI_MemFree<font></font>
0000000000008f90 g    DF .text  0000000000000026  Base        JLI_MemAlloc<font></font>
00000000000059c0 g    DF .text  0000000000002013  Base        JLI_Launch<font></font>
00000000000091c0 g    DF .text  000000000000003b  Base        JLI_List_new<font></font>
0000000000008ff0 g    DF .text  0000000000000026  Base        JLI_StringDup<font></font>
0000000000002ec0 g    DF .text  000000000000000c  Base        JLI_GetAppArgIndex</code></pre></div></div><br>
<p>   JLI_Launch       JVM  :</p><br>
<p><strong>I</strong>.   JVM HotSpot          VM.</p><br>
<p>  JVM HotSpot    libjvm.so.      libjvm.so  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      JNI_CreateJavaVM</a>.               .</p><br>
<p>,  libjvm.so    libjli.so </p><br>
<p><strong>II</strong>.  ,   .</p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">ParseArguments</a>  ,    .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> LaunchMode {               <span class="hljs-comment">// cf. sun.launcher.LauncherHelper</span>
    LM_UNKNOWN = <span class="hljs-number">0</span>,<font></font>
    LM_CLASS,<font></font>
    LM_JAR,<font></font>
    LM_MODULE,<font></font>
    LM_SOURCE<font></font>
};</code></pre><br>
<p>       <code>-DpropertyName=propertyValue</code>,  <code>-cp=/path</code>    <code>-Djava.class.path=/path</code>.   <code>SystemProperty</code>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>  JVM HotSpot    <code>java.lang.System::props</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a> ( JDK12   java.lang.System.props  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>). </p><br>
<p>     ,    JVM ( <code>--list-modules</code>,       launcher'e  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>).</p><br>
<p><strong>III</strong>.  primordial      VM</p><br>
<p>  -   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> JVM  main-</a> "just give it a try". </p><br>
<p> ,      ,   JVM    main-.   ,  (    Linux) pthread'  main-     .  main-thread'a   <code>ulimit -s</code>, ..            . Main-     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">MAP_GROWSDOWN</a>,   <code>MAP_GROWSDOWN</code>.  <code>MAP_GROWSDOWN</code>      ,     , .    <code>MAP_GROWSDOWN</code>    .   main-  <code>MAP_GROWSDOWN</code>  ,    <code>mmap</code>,   <code>MAP_FIXED</code>,         .      â€”     <code>rsp</code>     :  page-fault   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">guard </a>.      : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     </a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  guard-pages</a></p><br>
<p>,  ,              VM.  ,             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Threads::create_vm</a></p><br>
<p>       <del> </del> ,       .</p><br>
<h4 id="inicializaciya-intepretatora-i-peredacha-upravleniya-java-kodu">     java-</h4><br>
<p>    JVM HotSpot        .      - ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">DispatchTable</a>.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">jump</a>           , jvm   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>)      ,   .        ,   " dispatch", ,   (<code>xsub</code>, <code>xdiv</code>, etc,  <code>x</code> â€” <code>i</code>, <code>l</code>, <code>f</code>, <code>d</code>). ,    â€”    .</p><br>
<p>     (<code>invokestatic</code>, <code>invokevirtual</code>,  ..)           .       bytecode-     . </p><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>Threads::create_vm</code></a>   ,    :</p><br>
<p><strong>I</strong>.    </p><br>
<p>     ,     .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Bytecodes::initialize</a>       .     :</p><br>
<pre><code class="cpp hljs">  <span class="hljs-comment">//  Java bytecodes</span>
  <span class="hljs-comment">//  bytecode               bytecode name           format   wide f.   result tp  stk traps</span>
  def(_nop                 , <span class="hljs-string">"nop"</span>                 , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_VOID   ,  <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_aconst_null         , <span class="hljs-string">"aconst_null"</span>         , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_OBJECT ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_m1           , <span class="hljs-string">"iconst_m1"</span>           , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_0            , <span class="hljs-string">"iconst_0"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_1            , <span class="hljs-string">"iconst_1"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_2            , <span class="hljs-string">"iconst_2"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_3            , <span class="hljs-string">"iconst_3"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_4            , <span class="hljs-string">"iconst_4"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_iconst_5            , <span class="hljs-string">"iconst_5"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_lconst_0            , <span class="hljs-string">"lconst_0"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_LONG   ,  <span class="hljs-number">2</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_lconst_1            , <span class="hljs-string">"lconst_1"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_LONG   ,  <span class="hljs-number">2</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_fconst_0            , <span class="hljs-string">"fconst_0"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_FLOAT  ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_fconst_1            , <span class="hljs-string">"fconst_1"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_FLOAT  ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_fconst_2            , <span class="hljs-string">"fconst_2"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_FLOAT  ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_dconst_0            , <span class="hljs-string">"dconst_0"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_DOUBLE ,  <span class="hljs-number">2</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_dconst_1            , <span class="hljs-string">"dconst_1"</span>            , <span class="hljs-string">"b"</span>    , <span class="hljs-literal">NULL</span>    , T_DOUBLE ,  <span class="hljs-number">2</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_bipush              , <span class="hljs-string">"bipush"</span>              , <span class="hljs-string">"bc"</span>   , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_sipush              , <span class="hljs-string">"sipush"</span>              , <span class="hljs-string">"bcc"</span>  , <span class="hljs-literal">NULL</span>    , T_INT    ,  <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
  def(_ldc                 , <span class="hljs-string">"ldc"</span>                 , <span class="hljs-string">"bk"</span>   , <span class="hljs-literal">NULL</span>    , T_ILLEGAL,  <span class="hljs-number">1</span>, <span class="hljs-literal">true</span> );<font></font>
  def(_ldc_w               , <span class="hljs-string">"ldc_w"</span>               , <span class="hljs-string">"bkk"</span>  , <span class="hljs-literal">NULL</span>    , T_ILLEGAL,  <span class="hljs-number">1</span>, <span class="hljs-literal">true</span> );<font></font>
  def(_ldc2_w              , <span class="hljs-string">"ldc2_w"</span>              , <span class="hljs-string">"bkk"</span>  , <span class="hljs-literal">NULL</span>    , T_ILLEGAL,  <span class="hljs-number">2</span>, <span class="hljs-literal">true</span> );</code></pre><br>
<p>    ,       (  1 ,       <code>ConstantPool</code>,    ), ,   :</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">bool</span>            Bytecodes::_is_initialized = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*     Bytecodes::_name          [Bytecodes::number_of_codes];<font></font>
BasicType       Bytecodes::_result_type   [Bytecodes::number_of_codes];<font></font>
s_char          Bytecodes::_depth         [Bytecodes::number_of_codes];<font></font>
u_char          Bytecodes::_lengths       [Bytecodes::number_of_codes];<font></font>
Bytecodes::Code Bytecodes::_java_code     [Bytecodes::number_of_codes];<font></font>
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span>  Bytecodes::_flags         [(<span class="hljs-number">1</span>&lt;&lt;BitsPerByte)*<span class="hljs-number">2</span>];</code></pre><br>
<p>         </p><br>
<p><strong>II</strong>.   </p><br>
<p> ,     ,       .            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">CodeCache::initialize()</a>.         </p><br>
<pre><code class="cpp hljs"> CodeCacheExpansionSize = align_up(CodeCacheExpansionSize, os::vm_page_size());<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (SegmentedCodeCache) {
    <span class="hljs-comment">// Use multiple code heaps</span><font></font>
    initialize_heaps();<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Use a single code heap</span>
    FLAG_SET_ERGO(uintx, NonNMethodCodeHeapSize, <span class="hljs-number">0</span>);<font></font>
    FLAG_SET_ERGO(uintx, ProfiledCodeHeapSize, <span class="hljs-number">0</span>);<font></font>
    FLAG_SET_ERGO(uintx, NonProfiledCodeHeapSize, <span class="hljs-number">0</span>);<font></font>
    ReservedCodeSpace rs = reserve_heap_memory(ReservedCodeCacheSize);<font></font>
    add_heap(rs, <span class="hljs-string">"CodeCache"</span>, CodeBlobType::All);<font></font>
  } </code></pre><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>-XX:ReservedCodeCacheSize</code></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>-XX:SegmentedCodeCache</code></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>-XX:CodeCacheExpansionSize</code></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>-XX:NonNMethodCodeHeapSize</code></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>-XX:ProfiledCodeHeapSize</code></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>-XX:NonProfiledCodeHeapSize</code></a>.            .   ,       , ,    <code>SegmentedCodeCache</code>   (),     <code>&gt;= 240Mb</code>, <code>SegmentedCodeCache</code>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">CompilerConfig::set_tiered_flags</a>.</p><br>
<p>       <code>ReservedCodeCacheSize</code> .  ,  <code>SegmentedCodeCache</code>  ,      : JIT- ,  ,  ..</p><br>
<p><strong>III</strong>.   </p><br>
<p> ,       ,      .          .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a> â€”   .    ,            . </p><br>
<p>      :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">slow_signature_handler</a></li>
</ul><br>
<pre><code class="cpp hljs">  { <span class="hljs-function">CodeletMark <span class="hljs-title">cm</span><span class="hljs-params">(_masm, <span class="hljs-string">"slow signature handler"</span>)</span></span>;<font></font>
    AbstractInterpreter::_slow_signature_handler = generate_slow_signature_handler();<font></font>
  }<font></font>
</code></pre><br>
<p>signature handler        .      , ,      13  (   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>   )</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
</ul><br>
<pre><code class="cpp hljs"> { <span class="hljs-function">CodeletMark <span class="hljs-title">cm</span><span class="hljs-params">(_masm, <span class="hljs-string">"error exits"</span>)</span></span>;<font></font>
    _unimplemented_bytecode    = generate_error_exit(<span class="hljs-string">"unimplemented bytecode"</span>);<font></font>
    _illegal_bytecode_sequence = generate_error_exit(<span class="hljs-string">"illegal bytecode sequence - method not verified"</span>);<font></font>
  }</code></pre><br>
<p>VM    ,    ,              VM  .           .</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">return  </a></li>
</ul><br>
<p>       ,         return.</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">earlyret</a></li>
</ul><br>
<p>     .</p><br>
<ul>
<li><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></p><br>
</li>
<li><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a></p><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> method_entry(kind)                                              \
{ CodeletMark cm(_masm, <span class="hljs-meta-string">"method entry point (kind = "</span> #kind <span class="hljs-meta-string">")"</span>); \
Interpreter::_entry_table[Interpreter::kind] = generate_method_entry(Interpreter::kind); \
Interpreter::update_cds_entry_table(Interpreter::kind); \
}</span></code></pre><br>
<p>        .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> -</a>,  StackOverflow, stack-banging.     signature handler.</p><br>
</li>
<li><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a></p><br>
</li>
</ul><br>
<pre><code class="cpp hljs">  <span class="hljs-comment">// Bytecodes</span><font></font>
  set_entry_points_for_all_bytes();<font></font>
<font></font>
  <span class="hljs-comment">// installation of code in other places in the runtime</span>
  <span class="hljs-comment">// (ExcutableCodeManager calls not needed to copy the entries)</span>
  set_safepoints_for_all_bytes();</code></pre><br>
<p>    VM      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Operand Stack</a>,     HotSpot    .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> TosState {         <span class="hljs-comment">// describes the tos cache contents</span>
  btos = <span class="hljs-number">0</span>,             <span class="hljs-comment">// byte, bool tos cached</span>
  ztos = <span class="hljs-number">1</span>,             <span class="hljs-comment">// byte, bool tos cached</span>
  ctos = <span class="hljs-number">2</span>,             <span class="hljs-comment">// char tos cached</span>
  stos = <span class="hljs-number">3</span>,             <span class="hljs-comment">// short tos cached</span>
  itos = <span class="hljs-number">4</span>,             <span class="hljs-comment">// int tos cached</span>
  ltos = <span class="hljs-number">5</span>,             <span class="hljs-comment">// long tos cached</span>
  ftos = <span class="hljs-number">6</span>,             <span class="hljs-comment">// float tos cached</span>
  dtos = <span class="hljs-number">7</span>,             <span class="hljs-comment">// double tos cached</span>
  atos = <span class="hljs-number">8</span>,             <span class="hljs-comment">// object cached</span>
  vtos = <span class="hljs-number">9</span>,             <span class="hljs-comment">// tos not cached</span><font></font>
  number_of_states,<font></font>
  ilgl                  <span class="hljs-comment">// illegal state: should not occur</span>
};</code></pre><br>
<p>       <code>TosState</code>  ,         .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.      :</p><br>
<pre><code class="cpp hljs">
 <span class="hljs-comment">//                                    interpr. templates</span>
  <span class="hljs-comment">// Java spec bytecodes                ubcp|disp|clvm|iswd  in    out   generator             argument</span><font></font>
  def(Bytecodes::_nop                 , ____|____|____|____, vtos, vtos, nop                 ,  _           );<font></font>
  def(Bytecodes::_aconst_null         , ____|____|____|____, vtos, atos, aconst_null         ,  _           );<font></font>
  def(Bytecodes::_iconst_m1           , ____|____|____|____, vtos, itos, iconst              , <span class="hljs-number">-1</span>           );<font></font>
  def(Bytecodes::_iconst_0            , ____|____|____|____, vtos, itos, iconst              ,  <span class="hljs-number">0</span>           );<font></font>
  def(Bytecodes::_iconst_1            , ____|____|____|____, vtos, itos, iconst              ,  <span class="hljs-number">1</span>           );<font></font>
  def(Bytecodes::_iconst_2            , ____|____|____|____, vtos, itos, iconst              ,  <span class="hljs-number">2</span>           );<font></font>
  def(Bytecodes::_iconst_3            , ____|____|____|____, vtos, itos, iconst              ,  <span class="hljs-number">3</span>           );<font></font>
  def(Bytecodes::_iconst_4            , ____|____|____|____, vtos, itos, iconst              ,  <span class="hljs-number">4</span>           );<font></font>
  def(Bytecodes::_iconst_5            , ____|____|____|____, vtos, itos, iconst              ,  <span class="hljs-number">5</span>           );<font></font>
  def(Bytecodes::_lconst_0            , ____|____|____|____, vtos, ltos, lconst              ,  <span class="hljs-number">0</span>           );<font></font>
  def(Bytecodes::_lconst_1            , ____|____|____|____, vtos, ltos, lconst              ,  <span class="hljs-number">1</span>           );<font></font>
  def(Bytecodes::_fconst_0            , ____|____|____|____, vtos, ftos, fconst              ,  <span class="hljs-number">0</span>           );<font></font>
  def(Bytecodes::_fconst_1            , ____|____|____|____, vtos, ftos, fconst              ,  <span class="hljs-number">1</span>           );<font></font>
  def(Bytecodes::_fconst_2            , ____|____|____|____, vtos, ftos, fconst              ,  <span class="hljs-number">2</span>           );<font></font>
  def(Bytecodes::_dconst_0            , ____|____|____|____, vtos, dtos, dconst              ,  <span class="hljs-number">0</span>           );<font></font>
  def(Bytecodes::_dconst_1            , ____|____|____|____, vtos, dtos, dconst              ,  <span class="hljs-number">1</span>           );<font></font>
  def(Bytecodes::_bipush              , ubcp|____|____|____, vtos, itos, bipush              ,  _           );<font></font>
  def(Bytecodes::_sipush              , ubcp|____|____|____, vtos, itos, sipush              ,  _           );</code></pre><br>
<p>     <code>in</code>, <code>out</code>  <code>generator</code>.</p><br>
<p><code>in</code> â€”        <br>
<code>out</code> â€”        <br>
<code>generator</code> â€”     </p><br>
<p>         :</p><br>
<ol>
<li><p>     dispatch bit,     (no-op  x86)</p><br>
</li>
<li><p> <code>generator</code>,   </p><br>
</li>
<li><p>     dispatch bit,            <code>out</code>   ,    <code>in</code>   </p><br>
</li>
</ol><br>
<p>               .</p><br>
<p> HotSpot    ,    :</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TemplateInterpreterGenerator::set_entry_points</span><span class="hljs-params">(Bytecodes::Code code)</span> </span>{
  <span class="hljs-function">CodeletMark <span class="hljs-title">cm</span><span class="hljs-params">(_masm, Bytecodes::name(code), code)</span></span>;
  <span class="hljs-comment">// initialize entry points</span>
  assert(_unimplemented_bytecode    != <span class="hljs-literal">NULL</span>, <span class="hljs-string">"should have been generated before"</span>);<font></font>
  assert(_illegal_bytecode_sequence != <span class="hljs-literal">NULL</span>, <span class="hljs-string">"should have been generated before"</span>);<font></font>
  address bep = _illegal_bytecode_sequence;<font></font>
  address zep = _illegal_bytecode_sequence;<font></font>
  address cep = _illegal_bytecode_sequence;<font></font>
  address sep = _illegal_bytecode_sequence;<font></font>
  address aep = _illegal_bytecode_sequence;<font></font>
  address iep = _illegal_bytecode_sequence;<font></font>
  address lep = _illegal_bytecode_sequence;<font></font>
  address fep = _illegal_bytecode_sequence;<font></font>
  address dep = _illegal_bytecode_sequence;<font></font>
  address vep = _unimplemented_bytecode;<font></font>
  address wep = _unimplemented_bytecode;<font></font>
  <span class="hljs-comment">// code for short &amp; wide version of bytecode</span>
  <span class="hljs-keyword">if</span> (Bytecodes::is_defined(code)) {<font></font>
    Template* t = TemplateTable::template_for(code);<font></font>
    assert(t-&gt;is_valid(), <span class="hljs-string">"just checking"</span>);<font></font>
    set_short_entry_points(t, bep, cep, sep, aep, iep, lep, fep, dep, vep);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (Bytecodes::wide_is_defined(code)) {<font></font>
    Template* t = TemplateTable::template_for_wide(code);<font></font>
    assert(t-&gt;is_valid(), <span class="hljs-string">"just checking"</span>);<font></font>
    set_wide_entry_point(t, wep);<font></font>
  }<font></font>
  <span class="hljs-comment">// set entry points</span>
  <span class="hljs-function">EntryPoint <span class="hljs-title">entry</span><span class="hljs-params">(bep, zep, cep, sep, aep, iep, lep, fep, dep, vep)</span></span>;<font></font>
  Interpreter::_normal_table.set_entry(code, entry);<font></font>
  Interpreter::_wentry_point[code] = wep;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//...</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TemplateInterpreterGenerator::set_short_entry_points</span><span class="hljs-params">(Template* t, address&amp; bep, address&amp; cep, address&amp; sep, address&amp; aep, address&amp; iep, address&amp; lep, address&amp; fep, address&amp; dep, address&amp; vep)</span> </span>{<font></font>
  assert(t-&gt;is_valid(), <span class="hljs-string">"template must exist"</span>);
  <span class="hljs-keyword">switch</span> (t-&gt;tos_in()) {
    <span class="hljs-keyword">case</span> btos:
    <span class="hljs-keyword">case</span> ztos:
    <span class="hljs-keyword">case</span> ctos:
    <span class="hljs-keyword">case</span> stos:<font></font>
      ShouldNotReachHere();  <span class="hljs-comment">// btos/ctos/stos should use itos.</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> atos: vep = __ pc(); <span class="hljs-function">__ <span class="hljs-title">pop</span><span class="hljs-params">(atos)</span></span>; aep = __ pc(); generate_and_dispatch(t); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> itos: vep = __ pc(); <span class="hljs-function">__ <span class="hljs-title">pop</span><span class="hljs-params">(itos)</span></span>; iep = __ pc(); generate_and_dispatch(t); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> ltos: vep = __ pc(); <span class="hljs-function">__ <span class="hljs-title">pop</span><span class="hljs-params">(ltos)</span></span>; lep = __ pc(); generate_and_dispatch(t); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> ftos: vep = __ pc(); <span class="hljs-function">__ <span class="hljs-title">pop</span><span class="hljs-params">(ftos)</span></span>; fep = __ pc(); generate_and_dispatch(t); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> dtos: vep = __ pc(); <span class="hljs-function">__ <span class="hljs-title">pop</span><span class="hljs-params">(dtos)</span></span>; dep = __ pc(); generate_and_dispatch(t); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> vtos: set_vtos_entry_points(t, bep, cep, sep, aep, iep, lep, fep, dep, vep);     <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>  : ShouldNotReachHere();                                                 <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//...</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TemplateInterpreterGenerator::generate_and_dispatch</span><span class="hljs-params">(Template* t, TosState tos_out)</span> </span>{
  <span class="hljs-keyword">if</span> (PrintBytecodeHistogram)                                    histogram_bytecode(t);
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> PRODUCT</span>
  <span class="hljs-comment">// debugging code</span>
  <span class="hljs-keyword">if</span> (CountBytecodes || TraceBytecodes || StopInterpreterAt &gt; <span class="hljs-number">0</span>) count_bytecode();
  <span class="hljs-keyword">if</span> (PrintBytecodePairHistogram)                                histogram_bytecode_pair(t);
  <span class="hljs-keyword">if</span> (TraceBytecodes)                                            trace_bytecode(t);
  <span class="hljs-keyword">if</span> (StopInterpreterAt &gt; <span class="hljs-number">0</span>)                                     stop_interpreter_at();
  <span class="hljs-function">__ <span class="hljs-title">verify_FPU</span><span class="hljs-params">(<span class="hljs-number">1</span>, t-&gt;tos_in())</span></span>;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// !PRODUCT</span></span>
  <span class="hljs-keyword">int</span> step = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span> (!t-&gt;does_dispatch()) {<font></font>
    step = t-&gt;is_wide() ? Bytecodes::wide_length_for(t-&gt;bytecode()) : Bytecodes::length_for(t-&gt;bytecode());<font></font>
    <span class="hljs-keyword">if</span> (tos_out == ilgl) tos_out = t-&gt;tos_out();
    <span class="hljs-comment">// compute bytecode size</span>
    assert(step &gt; <span class="hljs-number">0</span>, <span class="hljs-string">"just checkin'"</span>);
    <span class="hljs-comment">// setup stuff for dispatching next bytecode</span>
    <span class="hljs-keyword">if</span> (ProfileInterpreter &amp;&amp; VerifyDataPointer<font></font>
        &amp;&amp; MethodData::bytecode_has_profile(t-&gt;bytecode())) {<font></font>
      <span class="hljs-function">__ <span class="hljs-title">verify_method_data_pointer</span><span class="hljs-params">()</span></span>;<font></font>
    }<font></font>
    <span class="hljs-function">__ <span class="hljs-title">dispatch_prolog</span><span class="hljs-params">(tos_out, step)</span></span>;<font></font>
  }<font></font>
  <span class="hljs-comment">// generate template</span><font></font>
  t-&gt;generate(_masm);<font></font>
  <span class="hljs-comment">// advance</span>
  <span class="hljs-keyword">if</span> (t-&gt;does_dispatch()) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> ASSERT</span>
    <span class="hljs-comment">// make sure execution doesn't go beyond this point if code is broken</span>
    <span class="hljs-function">__ <span class="hljs-title">should_not_reach_here</span><span class="hljs-params">()</span></span>;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// ASSERT</span></span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// dispatch to next bytecode</span><font></font>
    __ dispatch_epilog(tos_out, step);<font></font>
  }<font></font>
}</code></pre></div></div><br>
<p>    ,     .         JVM.       Java-    .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">JavaCalls</a>.     JVM  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  main</a>.</p><br>
<h4 id="primer"></h4><br>
<p> ,        ,     :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sum</span></span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span></span>{
        <span class="hljs-keyword">return</span> a + b;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span></span>{<font></font>
        Sum.sum(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<font></font>
    }<font></font>
}</code></pre><br>
<p>        <code>Sum.sum(II)</code>.</p><br>
<p>  2  <code>javac -c *.java</code>    ,      .<br>
 <code>Sum.sum</code>:</p><br>
<pre><code class="plaintext hljs">    descriptor: (II)I<font></font>
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC<font></font>
    Code:<font></font>
      stack=2, locals=2, args_size=2<font></font>
         0: iload_0<font></font>
         1: iload_1<font></font>
         2: iadd<font></font>
         3: ireturn<font></font>
      LineNumberTable:<font></font>
        line 3: 0</code></pre><br>
<p> Main.main</p><br>
<pre><code class="plaintext hljs">    descriptor: ([Ljava/lang/String;)V<font></font>
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC<font></font>
    Code:<font></font>
      stack=2, locals=1, args_size=1<font></font>
         0: iconst_2<font></font>
         1: iconst_3<font></font>
         2: invokestatic  #2                  // Method Sum.sum:(II)I<font></font>
         5: pop<font></font>
         6: return<font></font>
      LineNumberTable:<font></font>
        line 13: 0<font></font>
        line 14: 6</code></pre><br>
<p>  ,          â€”      .</p><br>
<p>  <code>invokestatic</code>'  x86   -   HotSpot    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></p><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TemplateTable::invokestatic</span><span class="hljs-params">(<span class="hljs-keyword">int</span> byte_no)</span> </span>{<font></font>
  transition(vtos, vtos);<font></font>
  assert(byte_no == f1_byte, <span class="hljs-string">"use this argument"</span>);<font></font>
  prepare_invoke(byte_no, rbx);  <span class="hljs-comment">// get f1 Method*</span>
  <span class="hljs-comment">// do the call</span>
  <span class="hljs-function">__ <span class="hljs-title">profile_call</span><span class="hljs-params">(rax)</span></span>;
  <span class="hljs-function">__ <span class="hljs-title">profile_arguments_type</span><span class="hljs-params">(rax, rbx, rbcp, <span class="hljs-literal">false</span>)</span></span>;
  <span class="hljs-function">__ <span class="hljs-title">jump_from_interpreted</span><span class="hljs-params">(rbx, rax)</span></span>;<font></font>
}</code></pre><br>
<p><code>byte_no == f1_byte</code> â€”   <code>ConstantPoolCache</code>,    , <code>rbx</code> â€” ,      <code>Method *</code>.      :  , ,      (<code>method_entry</code>    ). </p><br>
<p>  <code>prepare_invoke</code>.  ,     <code>invokestatic</code>    <code>ConstantPool</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>Constant_Methodref_Info</code></a>.   HotSpot    .  2      .. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>ConstantPoolCache</code></a>. <code>ConstantPoolCache</code>       ,    (,    <code>ConstantPoolCacheEntry</code>   ,      ).     <code>ConstantPoolCacheEntry</code> ,      (   0)        / .   ,         <code>ConstantPool</code>,        <code>ConstantPoolCache</code>      ( x86 Little Endian).</p><br>
<p>, ,  HotSpot    <code>prepare_invoke</code> â€”     <code>ConstantPoolCache</code>.  ,   ,     <code>ConstantPoolCacheEntry</code>   </p><br>
<pre><code class="cpp hljs">  <span class="hljs-function">__ <span class="hljs-title">get_cache_and_index_and_bytecode_at_bcp</span><span class="hljs-params">(Rcache, index, temp, byte_no, <span class="hljs-number">1</span>, index_size)</span></span>;
  <span class="hljs-function">__ <span class="hljs-title">cmpl</span><span class="hljs-params">(temp, code)</span></span>;  <span class="hljs-comment">// have we resolved this bytecode?</span>
  <span class="hljs-function">__ <span class="hljs-title">jcc</span><span class="hljs-params">(Assembler::equal, resolved)</span></span>;<font></font>
<font></font>
  <span class="hljs-comment">// resolve first time through</span><font></font>
  address entry = CAST_FROM_FN_PTR(address, InterpreterRuntime::resolve_from_cache);<font></font>
  <span class="hljs-function">__ <span class="hljs-title">movl</span><span class="hljs-params">(temp, code)</span></span>;
  <span class="hljs-function">__ <span class="hljs-title">call_VM</span><span class="hljs-params">(noreg, entry, temp)</span></span>;
  <span class="hljs-comment">// Update registers with resolved info</span>
  <span class="hljs-function">__ <span class="hljs-title">get_cache_and_index_at_bcp</span><span class="hljs-params">(Rcache, index, <span class="hljs-number">1</span>, index_size)</span></span>;
  <span class="hljs-function">__ <span class="hljs-title">bind</span><span class="hljs-params">(resolved)</span></span>;</code></pre><br>
<p> ,    <code>InterpreterRuntime::resolve_from_cache</code>. </p><br>
<p>      receiver'a   ,         .     (, ,  ,  <code>ConstantPoolCache</code>   <code>&lt;clinit&gt;</code>,      ). <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>      define class,    <code>EagerInitialization</code> ( ,      ,           :)).     HotSpot   ( CDS  )     . </p><br>
<p> ,         ,   <code>ConstantPoolCacheEntry</code>    .      <code>Method *</code>  <code>rbx</code>,   ,         . </p><br>
<p>      <code>Sum.sum(2, 3)</code>.      gdb-script <code>sum.gdb</code>:</p><br>
<pre><code class="plaintext hljs">#    java<font></font>
file /home/dmitrii/jdk12/build/linux-x86_64-server-fastdebug/images/jdk/bin/java<font></font>
<font></font>
# gdb    SEGV'<font></font>
#,   https://hg.openjdk.java.net/jdk/jdk12/file/06222165c35f/src/hotspot/cpu/x86/vm_version_x86.cpp#l361<font></font>
handle SIGSEGV nostop noprint<font></font>
<font></font>
#      <font></font>
set breakpoint pending on<font></font>
<font></font>
#    ,<font></font>
#   <font></font>
set pagination off<font></font>
<font></font>
#      main<font></font>
b PostJVMInit<font></font>
commands<font></font>
    #   ,<font></font>
    #   <font></font>
    set $buffer = malloc(1000)<font></font>
<font></font>
    #   .<font></font>
    #jmp      <font></font>
    # invokestatic<font></font>
    b *AbstractInterpreter::_entry_table[0] thread 2<font></font>
    commands<font></font>
        #     invokestatic,<font></font>
        # Method*   rbx<font></font>
        set $mthd = (Method *) $rbx<font></font>
        #    $buffer<font></font>
        call $mthd-&gt;name_and_sig_as_C_string($buffer, 1000)<font></font>
        if strcmp()($buffer, "Sum.sum(II)I") == 0<font></font>
            #  iload_0,    <font></font>
            b *TemplateInterpreter::_normal_table._table[vtos][26] thread 2<font></font>
            #  iload_1,   - int, <font></font>
            #  iload_0<font></font>
            b *TemplateInterpreter::_normal_table._table[itos][27] thread 2<font></font>
            #   iadd<font></font>
            b *TemplateInterpreter::_normal_table._table[itos][96] thread 2<font></font>
        end<font></font>
        c<font></font>
    end<font></font>
    c<font></font>
end<font></font>
<font></font>
r -cp . Main<font></font>
</code></pre><br>
<p>   <code>gdb -x sum.gdb</code>,       <code>Sum.sum</code></p><br>
<pre><code class="plaintext hljs">$453 = 0x7ffff7fdcdd0 "Sum.sum(II)I"</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é–‹ã</font></font><code>layout asm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generate_normal_entry</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã£ã¦</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ç”Ÿæˆã•</font></a><font style="vertical-align: inherit;">ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤º</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã•</font></a><font style="vertical-align: inherit;">ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯ã€ã‚¹ã‚¿ãƒƒã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãŒä½œæˆã•ã‚Œã€StackOverflowã€ã‚¹ã‚¿ãƒƒã‚¯ãƒãƒ³ã‚®ãƒ³ã‚°ãŒãƒã‚§ãƒƒã‚¯</font></font><code>iload_0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã‚Œã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒˆãƒƒãƒ—ãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ãªã„</font><font style="vertical-align: inherit;">æœ€åˆã®å‘½ä»¤</font><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãŒè¡Œã‚</font><font style="vertical-align: inherit;">ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚³ãƒ¼ãƒ‰ã®å½¢å¼ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font></p><br>
<pre><code class="plaintext hljs">0x7fffd828fa1f  mov    eax,DWORD PTR [r14] ;, iload_0                                                                                                                                    0x7fffd828fa22  movzx  ebx,BYTE PTR [r13+0x1] ;                                                                                                                                       0x7fffd828fa27  inc    r13 ; bcp (byte code pointer)                                                                                                                    0x7fffd828fa2a  movabs r10,0x7ffff717e8a0 ; DispatchTable                                                                                                                                 0x7fffd828fa34  jmp    QWORD PTR [r10+rbx*8] ;jump     </code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã®å¾Œã€ã‚¹ã‚¿ãƒƒã‚¯ã®æœ€ä¸Šä½ãŒã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸ</font></font><code>rax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ãŒæ¬¡ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«é€²ã‚€ã“ã¨ã‚’æ„å‘³ã—ã¾ã™</font></font></p><br>
<pre><code class="plaintext hljs">0x7fffd828fabe  push   rax ;                                                                                                                           <font></font>
;   ,     <font></font>
0x7fffd828fabf  mov    eax,DWORD PTR [r14-0x8]                                                                                                                                                               0x7fffd828fac3  movzx  ebx,BYTE PTR [r13+0x1]                                                                                                                                                                0x7fffd828fac8  inc    r13                                                                                                                                                                                   0x7fffd828facb  movabs r10,0x7ffff717e8a0                                                                                                                                                                     0x7fffd828fad5  jmp    QWORD PTR [r10+rbx*8]    </code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã¦ã€ä»Šã®æŒ‡ç¤ºè‡ªä½“</font></font><code>iadd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font></p><br>
<pre><code class="plaintext hljs">0x7fffd8292ba7  mov    edx,DWORD PTR [rsp] ; ,     iload_1                                                                                                                                    0x7fffd8292baa  add    rsp,0x8 ; rsp                                                                                                                               0x7fffd8292bae  add    eax,edx ;                                                                                                                        0x7fffd8292bb0  movzx  ebx,BYTE PTR [r13+0x1]                                                                                                                                                                 0x7fffd8292bb5  inc    r13                                                                                                                                                                                    0x7fffd8292bb8  movabs r10,0x7ffff717e8a0                                                                                                                                                                     0x7fffd8292bc2  jmp    QWORD PTR [r10+rbx*8] </code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ãªãŸãŒè¦‹ã‚Œã°</font></font><code>gdb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>edx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ ç®—ã‚’è¡Œã†ç›´å‰ã«ã€ã‚ãªãŸã¯æ°—ã¥ãã§ã—ã‚‡ã†</font></font></p><br>
<pre><code class="plaintext hljs">(gdb) p $eax<font></font>
$457 = 3<font></font>
(gdb) p $edx<font></font>
$458 = 2</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ã€ã“ã‚Œã‚‰ã¯ç§ãŸã¡ãŒé–¢æ•°ã«æ¸¡ã—ãŸã¾ã•ã«ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã§ã™</font></font><code>Sum.sum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469271/index.html">.NET Coreã¨Goãƒ‡ãƒ¼ã‚¿ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¨ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</a></li>
<li><a href="../ja469275/index.html">ç±³å›½ã®18ã®å¤§å­¦ã§ç§ãŒã—ãŸã“ã¨</a></li>
<li><a href="../ja469277/index.html">DevOpsã¨ã¯èª°ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja469287/index.html">ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ãƒãƒˆãƒ«ã‚´ãƒ¼ãƒ¬ãƒ ã€‚ã‚²ãƒ¼ãƒ ã‚’ãƒ‘ãƒ­ãƒœãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ã‚°ã«å¤‰ãˆã‚‹æ–¹æ³•</a></li>
<li><a href="../ja469289/index.html">å–å¼•æ‰€ã®è¨¼æ‹ é‡‘å–å¼•ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja469295/index.html">ã€Œã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒãƒ³ã®ç™ºè¦‹ã€ï¼šéŸ³æ¥½ã‚¸ãƒ£ãƒ³ãƒ«ã®æœ¨ã€GitHubã‚¤ãƒ™ãƒ³ãƒˆã®ã‚·ãƒ­ãƒ•ã‚©ãƒ³ã€è¡›æ˜Ÿæ”¾é€</a></li>
<li><a href="../ja469297/index.html">é‰„ä¼šè­°ã€‚SOM i.MX6ã€Aliceduinoã€Keras + STM32Cube.AI</a></li>
<li><a href="../ja469299/index.html">ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆãƒ“ãƒ¥ãƒ¼ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆã€ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯</a></li>
<li><a href="../ja469301/index.html">ã‚¢ã‚®ãƒªã‚¢ãƒ³ï¼šãƒªãƒ¼ãƒ³+ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«</a></li>
<li><a href="../ja469303/index.html">Andrei BelyaevãŒjug.msk.ruä¼šè­°ã§ã®Javaã§ã®åçœã«ã¤ã„ã¦</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>