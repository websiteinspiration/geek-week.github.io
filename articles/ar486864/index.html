<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐งค ๐ฆ ๐ฑ ุงูุชุฑุญูู ูู OpenVPN ุฅูู WireGuard ููุงูุถูุงู ุฅูู ุงูุดุจูุงุช ูู ุดุจูุฉ L2 ูุงุญุฏุฉ โค๏ธ ๐ถ๐ฝ ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃูุฏ ุฃู ุฃุดุงุฑู ุชุฌุฑุจุฉ ุฏูุฌ ุงูุดุจูุงุช ูู ุซูุงุซ ุดูู ุจุนูุฏุฉ ุฌุบุฑุงูููุง ุ ููู ูู ูููุง ูุชู ุงุณุชุฎุฏุงู ุฃุฌูุฒุฉ ุงูุชูุฌูู ูุน OpenWRT ูุจูุงุจุฉ ูู ุดุจูุฉ ูุงุญุฏุฉ ูุดุชุฑูุฉ. ุนูุฏ ุงุฎุชูุงุฑ ุท...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุงูุชุฑุญูู ูู OpenVPN ุฅูู WireGuard ููุงูุถูุงู ุฅูู ุงูุดุจูุงุช ูู ุดุจูุฉ L2 ูุงุญุฏุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486864/"><img src="https://habrastorage.org/webt/sk/lb/nc/sklbncaul8kfwr65yuroz8eteki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุฏ ุฃู ุฃุดุงุฑู ุชุฌุฑุจุฉ ุฏูุฌ ุงูุดุจูุงุช ูู ุซูุงุซ ุดูู ุจุนูุฏุฉ ุฌุบุฑุงูููุง ุ ููู ูู ูููุง ูุชู ุงุณุชุฎุฏุงู ุฃุฌูุฒุฉ ุงูุชูุฌูู ูุน OpenWRT ูุจูุงุจุฉ ูู ุดุจูุฉ ูุงุญุฏุฉ ูุดุชุฑูุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงุฎุชูุงุฑ ุทุฑููุฉ ููุฌูุน ุจูู ุงูุดุจูุงุช ุจูู L3 ูุชูุฌูู ุงูุดุจูุงุช ุงููุฑุนูุฉ ู L2 ูุน ุงูุฌุณูุฑ ุ ุนูุฏูุง ุชููู ุฌููุน ุนูุฏ ุงูุดุจูุฉ ุนูู ููุณ ุงูุดุจูุฉ ุงููุฑุนูุฉ ุ ูุงูุช ุงูุทุฑููุฉ ุงูุซุงููุฉ ููุถูุฉ ุ ูุงูุชู ูุงู ูู ุงูุตุนุจ ุชูููููุง ุ ูููู ุฅุนุทุงุก ุงููุฒูุฏ ูู ุงููุฑุต ุ ุญูุซ ุชู ุงูุชุฎุทูุท ููุดุจูุฉ ูุงุณุชุฎุฏุงู ุชูููุงุช ุดูุงูุฉ Wake-on-Lan ู DLNA.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃูู: ุงูุฎูููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุงุฎุชูุงุฑ OpenVPN ูู ุงูุจุฏุงูุฉ ูุจุฑูุชูููู ูุชูููุฐ ูุฐู ุงููููุฉ ุ ูุฃูู ุ ุฃููุงู ุ ููููู ุฅูุดุงุก ุฌูุงุฒ ููุฑ ูููู ุฅุถุงูุชู ุจุณูููุฉ ุฅูู ุงูุฌุณุฑ ุ ูุซุงูููุง ุ ูุฏุนู OpenVPN ุชุดุบูู ุจุฑูุชูููู TCP ุ ูุงูุฐู ูุงู ููููุง ุฃูุถูุง ุ ูุฃูู ูู ููู ูุฏู ุฃู ูู ุงูุดูู ุนููุงู IP ูุฎุตุต ุ ููู ุฃุชููู ูู ุงุณุชุฎุฏุงู STUN ุ ูุฃูู ูุณุจุจ ูุง ุญุธุฑ ูุฒูุฏ ุงูุฎุฏูุฉ ุงูุงุชุตุงูุงุช ุงููุงุฑุฏุฉ ุนุจุฑ UDP ูู ุดุจูุงุชูู ุ ุจูููุง ุณูุญ ูู TCP ุจุฅุนุงุฏุฉ ุชูุฌูู ูููุฐ ุฎุงุฏู VPN ุฅูู ูุคุฌุฑ VPS ุจุงุณุชุฎุฏุงู SSH. ูุนู ุ ูุฐุง ุงูููุฌ ูุนุทู ุนุจุฆูุง ูุจูุฑูุง ุ ูุฃู ุงูุจูุงูุงุช ูุชู ุชุดููุฑูุง ูุฑุชูู ุ ููููู ูู ุฃุฑุบุจ ูู ุฅุฏุฎุงู VPS ูู ุดุจูุชู ุงูุฎุงุตุฉ ุ ุญูุซ ูุงู ููุงู ุฎุทุฑ ูู ุณูุทุฑุฉ ุฃุทุฑุงู ุซุงูุซุฉ ุนูููุง ุ ูุจุงูุชุงูู ุูุงู ูุฌูุฏ ูุซู ูุฐุง ุงูุฌูุงุฒ ุนูู ุงูุดุจูุฉ ุงูููุฒููุฉ ุฃูุฑูุง ุบูุฑ ูุฑุบูุจ ููู ููุบุงูุฉ ุ ูุชูุฑุฑ ุงูุฏูุน ููุงุจู ุงูุฃูุงู ูุน ูุฌูุฏ ุญูู ูุจูุฑ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุนุงุฏุฉ ุชูุฌูู ุงููููุฐ ุนูู ุฌูุงุฒ ุงูุชูุฌูู ุงูุฐู ุชู ุงูุชุฎุทูุท ููุดุฑ ุงูุฎุงุฏู ุนููู ุ ุชู ุงุณุชุฎุฏุงู ุจุฑูุงูุฌ sshtunnel. ูู ุฃุตู ุงูุชูุงุตูู ุงูุฏูููุฉ ูุชููููู - ูุชู ุฐูู ุจุณูููุฉ ูุจูุฑุฉ ุ ูุฃูุงุญุธ ููุท ุฃู ูููุชูุง ูุงูุช ุฅุนุงุฏุฉ ุชูุฌูู ูููุฐ TCP 1194 ูู ุฌูุงุฒ ุงูุชูุฌูู ุฅูู VPS. ุจุนุฏ ุฐูู ุ ุชู ุชูููู ุฎุงุฏู OpenVPN ุนูู ุฌูุงุฒ tap0 ุ ูุงูุฐู ุงูุชูู ุจู ุงูุฃูุฑ ูู ุฌุณุฑ br-lan. ุจุนุฏ ุงูุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู ุงูุฐู ุฃูุดุฃุชู ููุชู ูู ุงูููุจููุชุฑ ุงููุญููู ุ ุฃุตุจุญ ูู ุงููุงุถุญ ุฃู ููุฑุฉ ุฅุนุงุฏุฉ ุชูุฌูู ุงููููุฐ ูุฏ ุขุชุช ุซูุงุฑูุง ูุฃุตุจุญ ุงูููุจููุชุฑ ุงููุญููู ุงูุฎุงุต ุจู ุนุถููุง ูู ุดุจูุฉ ุฌูุงุฒ ุงูุชูุฌูู ุ ุนูู ุงูุฑุบู ูู ุฃููู ูู ุฃูู ููุงู ูุนูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุธูุช ุงููุณุฃูุฉ ุตุบูุฑุฉ: ูุงู ูู ุงูุถุฑูุฑู ุชูุฒูุน ุนูุงููู IP ูู ุดูู ูุฎุชููุฉ ุจุญูุซ ูุง ุชุชุนุงุฑุถ ูุชูููู ุฃุฌูุฒุฉ ุงูุชูุฌูู ูุนููุงุก OpenVPN. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุชุญุฏูุฏ ุนูุงููู IP ููููุฌู ููุทุงูุงุช ุฎุงุฏู DHCP ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ูุทุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.80</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฎุงุฏู</font></font></li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.100</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ูุทุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.101</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.149</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุฌู ูู ุงูุดูุฉ ุฑูู 2</font></font></li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.150</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ูุทุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.151</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.10.199</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุฌู ูู ุงูุดูุฉ ุฑูู 3</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงู ูู ุงูุถุฑูุฑู ุฃูุถูุง ุชุนููู ูุฐู ุงูุนูุงููู ุฅูู ุฃุฌูุฒุฉ ุชูุฌูู ุงูุนููู ูุฎุงุฏู OpenVPN ุนู ุทุฑูู ุฅุถุงูุฉ ุงูุฃุณุทุฑ ุงูุชุงููุฉ ุฅูู ุชููููู:</font></font><br>
<br>
<pre><code class="plaintext hljs">ifconfig-pool-persist /etc/openvpn/ipp.txt 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุถุงูุฉ ุงูุฃุณุทุฑ ุงูุชุงููุฉ ุฅูู ููู /etc/openvpn/ipp.txt:</font></font><br>
<br>
<pre><code class="plaintext hljs">flat1_id 192.168.10.100<font></font>
flat2_id 192.168.10.150<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญูุซ flat1_id ู flat2_id ูู ุฃุณูุงุก ุงูุฃุฌูุฒุฉ ุงููุญุฏุฏุฉ ุนูุฏ ุฅูุดุงุก ุดูุงุฏุงุช ููุงุชุตุงู ุจู OpenVPN</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ุชู ุชูููู ุนููุงุก OpenVPN ุนูู ุฃุฌูุฒุฉ ุงูุชูุฌูู ุ ูุชูุช ุฅุถุงูุฉ ุฃุฌูุฒุฉ tap0 ุนูู ูููููุง ุฅูู ุฌุณุฑ br-lan. ูู ูุฐู ุงููุฑุญูุฉ ุ ุจุฏุง ุฃู ูู ุดูุก ูุงู ุนูู ูุง ูุฑุงู ุ ูุฃู ุงูุดุจูุงุช ุงูุซูุงุซ ุชุฑู ุจุนุถูุง ุงูุจุนุถ ูุชุนูู ููู. ููุน ุฐูู ุ ุงุชุถุญ ุฃููุง ููุณุช ุชูุงุตูู ููุชุนุฉ ููุบุงูุฉ: ูู ุจุนุถ ุงูุฃุญูุงู ูุง ุชุชููู ุงูุฃุฌูุฒุฉ ูู ุงูุญุตูู ุนูู ุนููุงู IP ูู ุฌูุงุฒ ุงูุชูุฌูู ุงูุฎุงุต ุจูุง ุ ูุน ุฌููุน ุงูุนูุงูุจ ุงููุชุฑุชุจุฉ ุนููู. ูุณุจุจ ูุง ุ ูู ููู ูุฏู ุฌูุงุฒ ุงูุชูุฌูู ูู ุฅุญุฏู ุงูุดูู ุงูููุช ููุฑุฏ ูู ุงูููุช ุงูููุงุณุจ ุนูู DHCPDISCOVER ููู ูุชูู ุงูุฌูุงุฒ ุนููุงูู. ุฃุฏุฑูุช ุฃููู ุจุญุงุฌุฉ ุฅูู ุชุตููุฉ ูุซู ูุฐู ุงูุทูุจุงุช ูู tap0 ุนูู ูู ูู ุฃุฌูุฒุฉ ุงูุชูุฌูู ุ ูููู ุ ููุง ุงุชุถุญ ุ ูุง ูููู ุฃู ุชุนูู iptables ูุน ุงูุฌูุงุฒ ุฅุฐุง ูุงู ุฌุฒุกูุง ูู ุงูุฌุณุฑ ููุฌุจ ุฃู ุชุฃุชู ebtables ุฅูู ูุณุงุนุฏุชู. ูุณูุก ุงูุญุธ ุ ูู ููู ูู ุจุฑูุงูุฌู ุงูุซุงุจุช ูุงุถุทุฑุฑุช ุฅูู ุฅุนุงุฏุฉ ุจูุงุก ุงูุตูุฑ ููู ุฌูุงุฒ.ุจุนุฏ ุงูููุงู ุจุฐูู ูุฅุถุงูุฉ ูุซู ูุฐู ุงูุฎุทูุท ุฅูู /etc/rc.local ููู ุฌูุงุฒ ุชูุฌูู ุ ุชู ุญู ุงููุดููุฉ:</font></font><br>
<br>
<pre><code class="bash hljs">ebtables -A INPUT --<span class="hljs-keyword">in</span>-interface tap0 --protocol ipv4 --ip-protocol udp --ip-destination-port 67:68 -j DROP<font></font>
ebtables -A INPUT --<span class="hljs-keyword">in</span>-interface tap0 --protocol ipv4 --ip-protocol udp --ip-source-port 67:68 -j DROP<font></font>
ebtables -A FORWARD --out-interface tap0 --protocol ipv4 --ip-protocol udp --ip-destination-port 67:68 -j DROP<font></font>
ebtables -A FORWARD --out-interface tap0 --protocol ipv4 --ip-protocol udp --ip-source-port 67:68 -j DROP<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุณุชูุฑ ูุฐุง ุงูุชูููู ููุฏุฉ ุซูุงุซ ุณููุงุช.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 2: ุชูุฏูู WireGuard</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุนูู ุงูุฅูุชุฑูุช ุ ุจุฏุฃูุง ูุชุญุฏุซูู ุฃูุซุฑ ูุฃูุซุฑ ุนู WireGuard ุ ูุนุฌุจูู ุจุจุณุงุทุฉ ุชููููู ุ ูุณุฑุนุฉ ุงูุฅุฑุณุงู ุงูุนุงููุฉ ุ ูุงูุฎูุงุถ ูุณุชูู ping ูุน ุฃูุงู ููุงุซู. ุฃูุถุญ ุงูุจุญุซ ุนู ูุนูููุงุช ุฅุถุงููุฉ ุนูู ุฃูู ูุง ูุฏุนู ุงูุนูู ูุนุถู ูู ุงูุฌุณุฑ ุฃู ุงูุนูู ูุน TCP ุ ููุง ุฌุนููู ุฃุนุชูุฏ ุฃูู ูุง ุชูุฌุฏ ุจุฏุงุฆู ูู OpenVPN ุจุงููุณุจุฉ ูู. ูุฐูู ุฃูุง ุชุฃุฎุฑ ุงูุชุนุฑู ุนูู WireGuard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุจุถุนุฉ ุฃูุงู ุ ูุจุดุฃู ุงูููุงุฑุฏ ุ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ูุฑุชุจุทุฉ ุจุชูููููุฌูุง ุงููุนูููุงุช ุ ุชููุถ ุงูุฃุฎุจุงุฑ ุจุฃู WireGuard ุณูุชู ุชุถูููู ุฃุฎูุฑูุง ูู Linux kernel ุ ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 5.6. ุฃุดุงุฏ ุงูููุงูุงุช ุงูุฅุฎุจุงุฑูุฉ ุ ููุง ูู ุงูุญุงู ุฏุงุฆูุง ุ WireGuard. ููุฏ ุงูุบูุณุช ูุฑุฉ ุฃุฎุฑู ูู ุงูุจุญุซ ุนู ุทุฑู ูุงุณุชุจุฏุงู OpenVPN ุงููุฏูู ุงูุฌูุฏ. ูุฐู ุงููุฑุฉ ูุงุฌูุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุงูููุงูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุชุญุฏุซุช ุนู ุจูุงุก ููู ุฅูุซุฑูุช ุนูู L3 ุจุงุณุชุฎุฏุงู GRE. ุฃุนุทุงูู ูุฐุง ุงูููุงู ุงูุฃูู. ุจูู ูู ุบูุฑ ุงููุงุถุญ ูุง ูุฌุจ ูุนูู ุจุจุฑูุชูููู UDP. ูุงุฏูู ุงูุจุญุซ ุฅูู ููุงูุงุช ุญูู ุงุณุชุฎุฏุงู socat ุจุงูุงุดุชุฑุงู ูุน ููู SSH ูุฅุนุงุฏุฉ ุชูุฌูู ูููุฐ UDP ุ ููุน ุฐูู ุ ููุฏ ูุงุญุธูุง ุฃู ูุฐุง ุงูููุฌ ูุนูู ููุท ูู ูุถุน ุงุชุตุงู ูุงุญุฏ ุ ุฃู ุฃู ุนูู ุงูุนุฏูุฏ ูู ุนููุงุก VPN ุณูููู ูุณุชุญูููุง. ุชูุตูุช ุฅูู ููุฑุฉ ุฑูุน ุฎุงุฏู VPN ุนูู VPS ุ ูุฅุนุฏุงุฏ GRE ููุนููุงุก ุ ูููู ููุง ุงุชุถุญ ุ ูุฅู GRE ูุง ูุฏุนู ุงูุชุดููุฑ ุ ุงูุฃูุฑ ุงูุฐู ุณูุคุฏู ุฅูู ุญูููุฉ ุฃูู ูู ุญุงูุฉ ูุตูู ุฃุทุฑุงู ุซุงูุซุฉ ุฅูู ุงูุฎุงุฏู ุ ูุฅู ุฌููุน ุญุฑูุฉ ุงููุฑูุฑ ุจูู ุดุจูุงุชู ูู ุฃูุฏููู ูุง ููุงุณุจูู ูู ุญูุซ ุงููุจุฏุฃ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฉ ุฃุฎุฑู ุ ุชู ุงุชุฎุงุฐ ุงููุฑุงุฑ ูุตุงูุญ ุงูุชุดููุฑ ุงูููุฑุท ุ ุจุงุณุชุฎุฏุงู VPN ุนุจุฑ VPN ููููุง ูููุฎุทุท ุงูุชุงูู:</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชูู ุงูุฃูู VPN: </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุฏู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุนููุงู ุฏุงุฎูู 192.168.30.1 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VPS </font><i><font style="vertical-align: inherit;">ุงูุนููู</font></i><font style="vertical-align: inherit;"> ูุน ุนููุงู ุฏุงุฎูู 192.168.30.2 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VPS </font><i><font style="vertical-align: inherit;">ุงูุนููู</font></i><font style="vertical-align: inherit;"> ูุน ุนููุงู ุฏุงุฎูู 192.168.30.3 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VPS </font><i><font style="vertical-align: inherit;">ุงูุนููู</font></i><font style="vertical-align: inherit;"> ูุน ุนููุงู ุฏุงุฎูู 192.168.30.3 </font><b><font style="vertical-align: inherit;">MK2</font></b><font style="vertical-align: inherit;"> ูู </font><i><font style="vertical-align: inherit;">ุนูู </font></i></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชูู ุงูุซุงูู VPN: </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุฏู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุนููุงู ุฎุงุฑุฌู 192.168.30.2 ูุฏุงุฎูู 192.168.31.1 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููู </font></font></i> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนููุงู 192.168.30.2 ููุฏูู IP ุฏุงุฎูู 192.168.31.2 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููู </font></font></i> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนููุงู 192.168.30.2 ููุฏูู IP ุฏุงุฎูู 192.168.31.3 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฎุงุฏู ุงูุชูุฌูู ูู ุงูุดูุฉ 1 ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 2 ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* ูุชู ูุดุฑ ุชููููุงุช ุงูุฌูุงุฒ ูู ุงูููุณุฏ ูู ููุงูุฉ ุงูููุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุฐุง ุ ูุจุฏุฃ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูู ุนูุฏ ุงูุดุจูุฉ 192.168.31.0/24 ุ ุญุงู ุงูููุช ููุงูุชูุงู ุฅูู ุฅุนุฏุงุฏ ููู GRE. ูุจู ุฐูู ุ ุญุชู ูุง ุชููุฏ ุงููุตูู ุฅูู ุฃุฌูุฒุฉ ุงูุชูุฌูู ุ ูุฌุฏุฑ ุฅุนุฏุงุฏ ุฃููุงู SSH ูุฅุนุงุฏุฉ ุชูุฌูู 22 ูููุฐูุง ุนูู VPS ุ ุจุญูุซ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุณูููู ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 2 ูุชุงุญูุง ุนูู ูููุฐ 10022nd VPS ุ ูุนูู ุงููููุฐ 11122th ุ ุณุชุชููุฑ VPS ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 3. ูู ุงูุฃูุถู ุชูููู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุจุงุณุชุฎุฏุงู ููุณ ููุงุฉ sshtunnel ุ ุญูุซ ุฅููุง ุณุชุณุชุนูุฏ ุงูููู ุฅุฐุง ุณูุท.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุชูููู ุงูููู ุ ููููู ุงูุงุชุตุงู ุจู SSH ูู ุฎูุงู ุงููููุฐ ุงููุนุงุฏ ุชูุฌููู:</font></font><br>
<br>
<pre><code class="bash hljs">ssh root@_VPS -p 10022</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูู ุจุชุนุทูู OpenVPN:</font></font><br>
<br>
<pre><code class="bash hljs">/etc/init.d/openvpn stop</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูู ุจุชูููู ููู GRE ุนูู ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 2:</font></font><br>
<br>
<pre><code class="bash hljs">ip link add grelan0 <span class="hljs-built_in">type</span> gretap remote 192.168.31.1 <span class="hljs-built_in">local</span> 192.168.31.2<font></font>
ip link <span class="hljs-built_in">set</span> grelan0 up
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุถุงูุฉ ุงููุงุฌูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุฅูู ุงูุฌุณุฑ:</font></font><br>
<br>
<pre><code class="bash hljs">brctl addif br-lan grelan0
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุจุฅุฌุฑุงุก ููุงุซู ุนูู ุฎุงุฏู ุงูููุฌู:</font></font><br>
<br>
<pre><code class="bash hljs">ip link add grelan0 <span class="hljs-built_in">type</span> gretap remote 192.168.31.2 <span class="hljs-built_in">local</span> 192.168.31.1<font></font>
ip link <span class="hljs-built_in">set</span> grelan0 up
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฐูู ุ ุฃุถู ุงููุงุฌูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุฅูู ุงูุฌุณุฑ:</font></font><br>
<br>
<pre><code class="bash hljs">brctl addif br-lan grelan0
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏุกูุง ูู ูุฐู ุงููุญุธุฉ ุ ุจุฏุฃุช ุงูุฃุตูุงุช ูู ุงูุงูุชูุงู ุฅูู ุงูุดุจูุฉ ุงูุฌุฏูุฏุฉ ุจูุฌุงุญ ุ ูุณุฃุดุนุฑ ุจุงุฑุชูุงุญ ุจุดุฑุจ ุงููููุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูู ุฃุฌู ุชูููู ููููุฉ ุนูู ุงูุดุจูุฉ ุนูู ุงูุทุฑู ุงูุขุฎุฑ ูู ุงูุณูู ุ ุฃุญุงูู ุงูุงุชุตุงู ุนุจุฑ SSH ุจุฃุญุฏ ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ูู ุงูุดูุฉ 2 ุ ูููู ูุชุฌูุฏ ุนููู ssh ุฏูู ุงููุทุงูุจุฉ ุจูููุฉ ูุฑูุฑ. </font><font style="vertical-align: inherit;">ุฃุญุงูู ุงูุงุชุตุงู ุจูุฐุง ุงูููุจููุชุฑ ุนุจุฑ telnet ุฅูู ุงููููุฐ 22 ูุฃุฑู ุฎุทูุง ูููู ูู ุฎูุงูู ููู ุฃูู ูุชู ุฅูุดุงุก ุงูุงุชุตุงู ุ ููุณุชุฌูุจ ุฎุงุฏู SSH ุ ูุณุจุจ ูุง ููุท ูุง ูุนุฑุถ ุนูู ุชุณุฌูู ุงูุฏุฎูู.</font></font><br>
<br>
<pre><code class="bash hljs">$ telnet 192.168.10.110 22<font></font>
SSH-2.0-OpenSSH_8.1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุญุงูู ุงูุงุชุตุงู ุจู ุนุจุฑ VNC ูุฑุคูุฉ ุดุงุดุฉ ุณูุฏุงุก. ุฃุคูุฏ ูููุณู ุฃูู ุฌูุงุฒ ููุจููุชุฑ ุจุนูุฏ ุ ูุฃูู ูููููู ุจุณูููุฉ ุงูุงุชุตุงู ุจุฌูุงุฒ ุงูุชูุฌูู ูู ูุฐู ุงูุดูุฉ ุนูู ุงูุนููุงู ุงูุฏุงุฎูู. ููุน ุฐูู ุ ูุฑุฑุช ุงูุงุชุตุงู ุจู SSH ููุฐุง ุงูููุจููุชุฑ ูู ุฎูุงู ุฌูุงุฒ ุชูุฌูู ูุฃูุง ููุฏูุด ูู ุฃู ุงูุงุชุตุงู ูุงุฌุญ ูุฃู ุงูููุจููุชุฑ ุงูุจุนูุฏ ูุนูู ุจุดูู ุตุญูุญ ุ ูููู ูุง ููููู ุฃูุถูุง ุงูุงุชุตุงู ุจุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููู ุจุฅุฒุงูุฉ ุฌูุงุฒ grelan0 ูู ุงูุฌุณุฑ ูุชุดุบูู OpenVPN ุนูู ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 2 ูุงูุชุฃูุฏ ูู ุนูู ุงูุดุจูุฉ ูุฑุฉ ุฃุฎุฑู ููุง ูู ูุชููุน ูุนุฏู ุงููุทุงุน ุงูุงุชุตุงูุงุช. ุนูุฏูุง ุฃููู ุจุงูุจุญุซ ุ ุฃุฌุฏ ุงูููุชุฏูุงุช ุญูุซ ูุดูู ุงููุงุณ ูู ููุณ ุงููุดุงูู ุ ุญูุซ ููุตุญูู ุจุฑูุน MTU. ููุน ุฐูู ุ ูู ุฃุชููู ูู ุฒูุงุฏุฉ MTU ูู VPN ุงููุณุชูู ุงูุฃูู (wg0): ูุน MTU ููู 1420 ุ ูุงูุฐู ูุชู ุชุนูููู ุชููุงุฆููุง ุ ุชุจุฏุฃ ูุชุฑุงุช ุงูุฑุงุญุฉ ุ ูููู ูู ููุณ ุงูููุช ุ ูุนูู ุงููุณุชูู ุงูุซุงูู ูู VPN wg1 ุงูุฐู ูุนูู ุนูู ุฑุฃุณ wg0 ุจุดูู ุตุญูุญ ูุน MTU 1600. ูุฐุง ูููู ููุชุซุจูุช ูุจูุบ MTU 1500 ูุฌูุงุฒ gretap ุ ุจุญูุซ ูููู ููุฐู ุงููุงุฌูุฉ ููุณ ูููุฉ MTU ูุซู ุฌุณุฑ br-lan ุงูุฐู ุชู ุงูุชุฎุทูุท ูุฅุถุงูุฉ gretap ููู. ููุง ุฃููููุง ุ ูููู ุงูุฌุณุฑ ุจุชุนููู MTU ูุณุงูู ุฃุตุบุฑ ุงูููู ุงููุชุงุญุฉ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ููุช ุจุชูููู ููุงุซู ุนูู ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 3 ุ ูุงููุฑู ุงููุญูุฏ ูู ุฃูู ุนูู ุฌูุงุฒ ุงูุชูุฌูู ุฃุถุงู ุงูุฎุงุฏู ูุงุฌูุฉ gretap ุซุงููุฉ ุจุงุณู grelan1 ุ ูุงูุชู ุชูุช ุฅุถุงูุชูุง ุฃูุถูุง ุฅูู ุฌุณุฑ br-lan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูุก ูุนูู. </font><font style="vertical-align: inherit;">ุงูุขู ููููู ูุถุน ูุฌููุนุฉ gretap ุนูุฏ ุจุฏุก ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุถุน ูุฐู ุงูุฎุทูุท ูู /etc/rc.local ุนูู ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 2:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip link add grelan0 type gretap remote 192.168.31.1 local 192.168.31.2<font></font>
ip link set dev grelan0 mtu 1500<font></font>
ip link set grelan0 up<font></font>
brctl addif br-lan grelan0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุช ุฅุถุงูุฉ ูุฐุง ุฅูู /etc/rc.local ุนูู ุฌูุงุฒ ุงูุชูุฌูู ูู ุงูุดูุฉ 3:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip link add grelan0 type gretap remote 192.168.31.1 local 192.168.31.3<font></font>
ip link set dev grelan0 mtu 1500<font></font>
ip link set grelan0 up<font></font>
brctl addif br-lan grelan0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูู ุฌูุงุฒ ุงูุชูุฌูู ุงูุฎุงุฏู:</font></font><br>
<br>
<pre><code class="plaintext hljs">ip link add grelan0 type gretap remote 192.168.31.2 local 192.168.31.1<font></font>
ip link set dev grelan0 mtu 1500<font></font>
ip link set grelan0 up<font></font>
brctl addif br-lan grelan0<font></font>
<font></font>
ip link add grelan1 type gretap remote 192.168.31.3 local 192.168.31.1<font></font>
ip link set dev grelan1 mtu 1500<font></font>
ip link set grelan1 up<font></font>
brctl addif br-lan grelan1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุฃุฌูุฒุฉ ุชูุฌูู ุงูุนููู ุ ูุฌุฏุช ุฃูู ูุณุจุจ ูุง ูู ูุชุตููุง ุจุงูุฎุงุฏู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูุงุชุตุงู ุจู SSH ุงูุฎุงุต ุจูู (ูุญุณู ุงูุญุธ ุ ููุช ูุณุจููุง ุจุชูููู sshtunnel ููุฐุง) ุ ุชู ุงูุชุดุงู ุฃู WireGuard ูุงู ูููู ุจุฅูุดุงุก ูุณุงุฑ ูููุทุฉ ุงูููุงูุฉ ูุณุจุจ ูุง ุ ููููู ูุงู ุบูุฑ ุตุญูุญ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุงููุณุจุฉ ุฅูู 192.168.30.2 ุ ุฃุดุงุฑ ุฌุฏูู ุงููุณุงุฑ ุฅูู ุงููุณุงุฑ ูู ุฎูุงู ูุงุฌูุฉ pppoe-wan ุ ุฃู ุนุจุฑ ุงูุฅูุชุฑูุช ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุงู ูุฌุจ ุชูุฌูู ุงููุณุงุฑ ุฅููู ูู ุฎูุงู ูุงุฌูุฉ wg0. </font><font style="vertical-align: inherit;">ุจุนุฏ ุญุฐู ูุฐุง ุงููุณุงุฑ ุ ุชูุช ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู. </font><font style="vertical-align: inherit;">ูู ุฃุฌุฏ ุชุนูููุงุช ูู ููุงู ูุง ุญูู ููููุฉ ุฌุนู WireGuard ูุง ููุดุฆ ูุฐู ุงููุณุงุฑุงุช. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุฃููู ุญุชู ุ ุงูููุฒุฉ ูู OpenWRT ุ ุฃู WireGuard ููุณูุง. </font><font style="vertical-align: inherit;">ูุนุฏู ุงูุงุถุทุฑุงุฑ ุฅูู ุงูุชุนุงูู ูุน ูุฐู ุงููุดููุฉ ููุชุฑุฉ ุทูููุฉ ุ ุฃุถูุช ุจุจุณุงุทุฉ ุฎุทูุง ุฅูู ุฌูุงุฒ ุงูุชูุฌูู ูุฐุง ุฅูู ุงููุต ุงูุจุฑูุฌู ุงูุฐู ูุญููู ุฌูุงุฒ ุถุจุท ุงูููุช ูุญุฐู ูุฐุง ุงููุณุงุฑ:</font></font><br>
<br>
<pre><code class="bash hljs">route del 192.168.30.2
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุฎุชุตุฑ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุญูู ุจุนุฏ ุฑูุถูุง ูุงููุงู ูู OpenVPN ุ ุญูุซ ุฃุญุชุงุฌ ุฃุญูุงููุง ุฅูู ุงูุงุชุตุงู ุจุดุจูุฉ ุฌุฏูุฏุฉ ูู ููุจููุชุฑ ูุญููู ุฃู ูุงุชู ุ ููู ุงููุณุชุญูู ุนููููุง ุฅุนุฏุงุฏ ุฌูุงุฒ gretap ุนูููุง ุ ูููู ุนูู ุงูุฑุบู ูู ุฐูู ุ ุญุตูุช ุนูู ููุฒุฉ ูู ุณุฑุนุฉ ููู ุงูุจูุงูุงุช ุจูู ุงูุดูู ูุนูู ุณุจูู ุงููุซุงู ุ ูุง ูุณุจุจ ุงุณุชุฎุฏุงู VNC ุงูุขู ุฃู ุฅุฒุนุงุฌ. </font><font style="vertical-align: inherit;">ุงูุฎูุถ Ping ููููุงู ุ ููููู ุฃุตุจุญ ุฃูุซุฑ ุงุณุชูุฑุงุฑูุง: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุงุณุชุฎุฏุงู OpenVPN:</font></font><br>
<br>
<pre><code class="plaintext hljs">[r0ck3r@desktop ~]$ ping -c 20 192.168.10.110<font></font>
PING 192.168.10.110 (192.168.10.110) 56(84) bytes of data.<font></font>
64 bytes from 192.168.10.110: icmp_seq=1 ttl=64 time=133 ms<font></font>
...<font></font>
64 bytes from 192.168.10.110: icmp_seq=20 ttl=64 time=125 ms<font></font>
<font></font>
--- 192.168.10.110 ping statistics ---<font></font>
20 packets transmitted, 20 received, 0% packet loss, time 19006ms<font></font>
rtt min/avg/max/mdev = 124.722/126.152/136.907/3.065 ms<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุงุณุชุฎุฏุงู WireGuard:</font></font><br>
<br>
<pre><code class="plaintext hljs">[r0ck3r@desktop ~]$ ping -c 20 192.168.10.110<font></font>
PING 192.168.10.110 (192.168.10.110) 56(84) bytes of data.<font></font>
64 bytes from 192.168.10.110: icmp_seq=1 ttl=64 time=124 ms<font></font>
...<font></font>
64 bytes from 192.168.10.110: icmp_seq=20 ttl=64 time=124 ms<font></font>
--- 192.168.10.110 ping statistics ---<font></font>
20 packets transmitted, 20 received, 0% packet loss, time 19003ms<font></font>
rtt min/avg/max/mdev = 123.954/124.423/126.708/0.675 ms<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุชุฃุซุฑ ุจุดูู ุฃูุจุฑ ุจู ping ุงูุนุงูู ูุจู VPS ุ ููู ูุง ููุฑุจ ูู 61.5 ูููู ุซุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ุฒุงุฏุช ุงูุณุฑุนุฉ ุจุดูู ููุญูุธ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุดูุฉ ูุฒูุฏุฉ ุจุฎุงุฏู ุฌูุงุฒ ุชูุฌูู ุ ูุฏู ุณุฑุนุฉ ุงุชุตุงู ุจุงูุฅูุชุฑูุช ุชุจูุบ 30 ููุฌุงุจุช / ุซุงููุฉ ุ ููู ุดูู ุฃุฎุฑู - 5 ููุฌุงุจุช / ุซุงููุฉ. </font><font style="vertical-align: inherit;">ูู ููุณ ุงูููุช ุ ุฃุซูุงุก ุงุณุชุฎุฏุงู OpenVPN ุ ูู ุฃุชููู ูู ุชุญููู ูุนุฏู ููู ุจูุงูุงุช ุจูู ุดุจูุงุช ุชุฒูุฏ ุนู 3.8 ููุฌุงุจุงูุช / ุซุงููุฉ ููููุง ูู iperf ุ ุจูููุง ูุงูุช WireGuard "ุจุถุฎูุง" ุฅูู ููุณ 5 ููุฌุงุจุช / ุซุงููุฉ.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู WireGuard ุนูู VPS</font></font></b><div class="spoiler_text"><code>[Interface]<br>
Address = 192.168.30.1/24<br>
ListenPort = 51820<br>
PrivateKey = &lt;___VPS&gt;<br>
<br>
[Peer]<br>
PublicKey = &lt;__VPN_1_&gt;<br>
AllowedIPs = 192.168.30.2/32<br>
<br>
[Peer]<br>
PublicKey = &lt;__VPN_2_2&gt;<br>
AllowedIPs = 192.168.30.3/32<br>
<br>
[Peer]<br>
PublicKey = &lt;__VPN_2_3&gt;<br>
AllowedIPs = 192.168.30.4/32</code><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู WireGuard ุนูู MS (ููุถุงู ุฅูู / etc / config / network)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#VPN   - <font></font>
config interface 'wg0'<font></font>
        option proto 'wireguard'<font></font>
        list addresses '192.168.30.2/24'<font></font>
        option private_key '__VPN_1_'<font></font>
        option auto '1'<font></font>
<font></font>
config wireguard_wg0<font></font>
        option public_key '__VPN_1_VPS'<font></font>
        option endpoint_port '51820'<font></font>
        option route_allowed_ips '1'<font></font>
        option persistent_keepalive '25'<font></font>
        list allowed_ips '192.168.30.0/24'<font></font>
        option endpoint_host 'IP__VPS'<font></font>
<font></font>
#VPN   - <font></font>
config interface 'wg1'<font></font>
        option proto 'wireguard'<font></font>
        option private_key '__VPN_2_'<font></font>
        option listen_port '51821'<font></font>
        list addresses '192.168.31.1/24'<font></font>
        option auto '1'<font></font>
        option mtu '1600'<font></font>
<font></font>
config wireguard_wg1<font></font>
        option public_key '__VPN_2_2'<font></font>
        list allowed_ips '192.168.31.2'<font></font>
<font></font>
config wireguard_wg1ip link add grelan0 type gretap remote 192.168.31.1 local 192.168.31.3<font></font>
        option public_key '__VPN_2_3'<font></font>
        list allowed_ips '192.168.31.3'<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู WireGuard ุนูู MK2 (ููุถุงู ุฅูู / etc / config / network)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#VPN   - <font></font>
config interface 'wg0'<font></font>
        option proto 'wireguard'<font></font>
        list addresses '192.168.30.3/24'<font></font>
        option private_key '__VPN_1_2'<font></font>
        option auto '1'<font></font>
<font></font>
config wireguard_wg0<font></font>
        option public_key '__VPN_1_VPS'<font></font>
        option endpoint_port '51820'<font></font>
        option persistent_keepalive '25'<font></font>
        list allowed_ips '192.168.30.0/24'<font></font>
        option endpoint_host 'IP__VPS'<font></font>
<font></font>
#VPN   - <font></font>
config interface 'wg1'<font></font>
        option proto 'wireguard'<font></font>
        option private_key '__VPN_2_2'<font></font>
        list addresses '192.168.31.2/24'<font></font>
        option auto '1'<font></font>
        option listen_port '51821'<font></font>
        option mtu '1600'<font></font>
<font></font>
config wireguard_wg1<font></font>
        option public_key '__VPN_2_'<font></font>
        option endpoint_host '192.168.30.2'<font></font>
        option endpoint_port '51821'<font></font>
        option persistent_keepalive '25'<font></font>
        list allowed_ips '192.168.31.0/24'<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู WireGuard ุนูู MK3 (ููุถุงู ุฅูู / etc / config / network)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#VPN   - <font></font>
config interface 'wg0'<font></font>
        option proto 'wireguard'<font></font>
        list addresses '192.168.30.4/24'<font></font>
        option private_key '__VPN_1_3'<font></font>
        option auto '1'<font></font>
<font></font>
config wireguard_wg0<font></font>
        option public_key '__VPN_1_VPS'<font></font>
        option endpoint_port '51820'<font></font>
        option persistent_keepalive '25'<font></font>
        list allowed_ips '192.168.30.0/24'<font></font>
        option endpoint_host 'IP__VPS'<font></font>
<font></font>
#VPN   - <font></font>
config interface 'wg1'<font></font>
        option proto 'wireguard'<font></font>
        option private_key '__VPN_2_3'<font></font>
        list addresses '192.168.31.3/24'<font></font>
        option auto '1'<font></font>
        option listen_port '51821'<font></font>
        option mtu '1600'<font></font>
<font></font>
config wireguard_wg1<font></font>
        option public_key '__VPN_2_'<font></font>
        option endpoint_host '192.168.30.2'<font></font>
        option endpoint_port '51821'<font></font>
        option persistent_keepalive '25'<font></font>
        list allowed_ips '192.168.31.0/24'<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุชููููุงุช ุงูููุตููุฉ ููุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุฎุงุตุฉ ูู ุงููุณุชูู ุงูุซุงูู ุ ุฃุญุฏุฏ ูููุฐ 51821 ูุนููุงุก WireGuard. ูู ุญูุซ ุงููุจุฏุฃ ุ ูุฐุง ููุณ ุถุฑูุฑููุง ุ ุญูุซ ุณูููู ุงูุนููู ุจุฅูุดุงุก ุงุชุตุงู ูู ุฃู ูููุฐ ูุฌุงูู ุบูุฑ ูููุฒ ุ ููููู ููุช ุจุฐูู ุญุชู ุฃุชููู ูู ุญุธุฑ ุฌููุน ุงูุงุชุตุงูุงุช ุงููุงุฑุฏุฉ ุนูู ูุงุฌูุงุช wg0 ูุฌููุน ุฃุฌูุฒุฉ ุงูุชูุฌูู ุ ุจุงุณุชุซูุงุก ุงุชุตุงูุงุช UDP ุงููุงุฑุฏุฉ ุฅูู ุงููููุฐ 51821. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุขูู ุฃู ุชููู ูุฐู ุงูููุงูุฉ ูููุฏุฉ ูุดุฎุต ูุง. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุถูุง ุ ุฃุฑูุฏ ูุดุงุฑูุฉ ุงููุต ุงูุฐู ูุฑุณู ุฅููู ุฅุดุนุงุฑ PUSH ุนูู ุงููุงุชู ุฅูู ุชุทุจูู WirePusher ุนูุฏูุง ูุธูุฑ ุฌูุงุฒ ุฌุฏูุฏ ุนูู ุดุจูุชู. </font><font style="vertical-align: inherit;">ุฅููู ุฑุงุจุท ุงููุต ุงูุจุฑูุฌู: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/r0ck3r/device_discover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุซ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููู ุฎุงุฏู OpenVPN ูุงูุนููุงุก</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุฏู OpenVPN</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">client-to-client<font></font>
<font></font>
ca /etc/openvpn/server/ca.crt<font></font>
cert /etc/openvpn/server/vpn-server.crt<font></font>
dh /etc/openvpn/server/dh.pem<font></font>
key /etc/openvpn/server/vpn-server.key<font></font>
<font></font>
dev tap<font></font>
ifconfig-pool-persist /etc/openvpn/ipp.txt 0<font></font>
keepalive 10 60<font></font>
proto tcp4<font></font>
server-bridge 192.168.10.1 255.255.255.0 192.168.10.80 192.168.10.254<font></font>
status /var/log/openvpn-status.log<font></font>
verb 3<font></font>
comp-lzo</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููู OpenVPN</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">client<font></font>
tls-client<font></font>
dev tap<font></font>
proto tcp<font></font>
remote VPS_IP 1194 # Change to your router's External IP<font></font>
resolv-retry infinite<font></font>
nobind<font></font>
<font></font>
ca client/ca.crt<font></font>
cert client/client.crt<font></font>
key client/client.key<font></font>
dh client/dh.pem<font></font>
<font></font>
comp-lzo<font></font>
persist-tun<font></font>
persist-key<font></font>
verb 3</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅูุดุงุก ุดูุงุฏุงุช ุชุณุชุฎุฏู easy-rsa</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar486864/">https://habr.com/ru/post/ar486864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar486844/index.html">ุชุทูุฑ ูุนุงูุฌุฉ Facebook webhook: ูู ุตูุฑ ุฅูู 25000 ูู ุงูุซุงููุฉ</a></li>
<li><a href="../ar486850/index.html">ููุนุฏ ูุญุฌูุฒ ุฌุฏูุฏ - ูุซู ููุฏู ูุจุณููุฉ</a></li>
<li><a href="../ar486858/index.html">ุฅูุดุงุก Viberbot ุงููุงูู. ุงูุฌุฒุก ุงูุซุงูู - ุงูุงุชุตุงู ุงูุฃูู ุฃู "ุงูุชุญููู_ุงูุจุฏุก"</a></li>
<li><a href="../ar486860/index.html">ATX12VO - ุชูุงูู ุทุฑููุฉ ุฌุฏูุฏุฉ</a></li>
<li><a href="../ar486862/index.html">5 ุฃุณุจุงุจ ุชุฌุนู ุชุตููู ุงูุญุฑูุฉ ูุณุงุนุฏู ุนูู ุงูุชูุงุตู ูุน ุงููุงุณ</a></li>
<li><a href="../ar486866/index.html">ูููุช ุงููุชุฒุงูู: ุงููุญุฑูุงุช ุงูุจููููุฌูุฉ ูู ุชูููููุฌูุง ุงููุงูู</a></li>
<li><a href="../ar486868/index.html">ููุงุฐุง ูููู ููุนู Slime Agile</a></li>
<li><a href="../ar486870/index.html">ููู ุฃุฎุฑุฌูุง ุงูุงุญุชูุงู ูู ุงูููุฎ</a></li>
<li><a href="../ar486872/index.html">ููููุณ ุฅุนุฏุงุฏ ููุญุฉ ุงูููุงุชูุญ</a></li>
<li><a href="../ar486874/index.html">Coronavirus 2019-nCoV: ุงูุฎูุงุถ ูุนุฏู ุงููููุงุช ูุงุฑุชูุงุน ูุนุฏู ุงููููุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>