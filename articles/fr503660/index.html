<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôâÔ∏è üå≤ üôèüèº Testez des projets sans douleur. Rapport Yandex üë©üèæ‚Äçü§ù‚Äçüë®üèº üïê üëéüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous, dans l'√©quipe Yandex.Maps pour iOS, cr√©ons des projets de test en utilisant un petit plugin pour CocoaPods et plusieurs classes d'utilitaires. L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Testez des projets sans douleur. Rapport Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/503660/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous, dans l'√©quipe Yandex.Maps pour iOS, cr√©ons des projets de test en utilisant un petit plugin pour CocoaPods et plusieurs classes d'utilitaires. </font><font style="vertical-align: inherit;">La cr√©ation d'un projet est rapide et fiable. </font><font style="vertical-align: inherit;">Mais peut-√™tre nous d√©range-t-on trop et ce n'est pas si difficile d'assembler un projet manuellement avec les param√®tres et les d√©pendances n√©cessaires? </font><font style="vertical-align: inherit;">Dans le rapport, je suis all√© du contraire: j'ai d'abord regard√© le processus manuel, puis le n√¥tre.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8iwkFkkV9es" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- D'abord, un peu d'histoire. </font><font style="vertical-align: inherit;">Yandex.Les cartes sont collect√©es pendant plus d'une minute. </font><font style="vertical-align: inherit;">Sur mon ordinateur, la cr√©ation de l'application prend un peu plus de trois minutes. </font><font style="vertical-align: inherit;">Nous d√©veloppons des projets de test afin de passer moins de temps sur chaque montage. </font><font style="vertical-align: inherit;">Nous avons suffisamment de modularit√©, et pour chaque module, nous faisons un projet de test. </font><font style="vertical-align: inherit;">Dans ce projet de test, des fonctionnalit√©s sont en cours de d√©veloppement.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cr√©ation d'un projet de test prend d√©sormais de 15 minutes √† une heure. Cela est d√ª au fait que le projet doit √™tre configur√©. Autrement dit, vous devez configurer la signature afin que nous puissions d√©velopper sur les m√™mes appareils que ceux auxquels nous sommes habitu√©s. Il est n√©cessaire de configurer les biblioth√®ques n√©cessaires. Dans le processus de d√©veloppement de la fonctionnalit√© elle-m√™me, nous revenons constamment et terminons le projet de test afin qu'il r√©ponde √† nos besoins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi avons-nous besoin de projets de test? Pour gagner du temps lors du montage. Plus le projet est petit, plus il est assembl√© rapidement, plus nous serons en mesure de lancer notre application sur l'appareil et plus il sera confortable pour nous de le d√©velopper. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/d_/rt/zhd_rt3d8t6ojvedwzffktuan7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que devrait contenir le projet de test? Nous devrions pouvoir lancer, d√©boguer notre application sur les m√™mes appareils sur lesquels nous sommes habitu√©s √† lancer et d√©boguer notre application principale.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le projet doit √™tre configur√© de mani√®re aussi similaire que possible au projet principal, de sorte que lors du transfert des fonctionnalit√©s du projet de test vers le projet principal, nous n'obtenions pas de surprise. </font><font style="vertical-align: inherit;">Ou du moins r√©duit le nombre de surprises re√ßues au minimum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons √©galement besoin d'un environnement minimal dans le projet de test, afin de ne pas perdre de temps √† cr√©er des fen√™tres d'interface utilisateur, √† configurer des biblioth√®ques, √† annuler l'appel pour ouvrir l'application √† la biblioth√®que qui traite des autorisations, etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CocoaPods app_spec</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toute mon histoire d'aujourd'hui sera construite autour de la fonctionnalit√© CocoaPods appel√©e app_spec. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/eb/xf/pkebxfc7kvhzsszibluqrljlkai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
App_spec est comme une sous-esp√®ce r√©guli√®re, seulement elle ne g√©n√®re pas un framework qui peut √™tre connect√©, mais une application qui peut √™tre lanc√©e sur l'appareil. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kj/67/dskj67urgk0wocvvue0rsaexelq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pr√™t √† l'emploi, CocoaPods nous permet de placer Info.plist et xcconfig dans app_spec. Cela nous permet d√©j√† de bien monter notre projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si nous allons √©crire d'√©normes dictionnaires dans chaque pods_spec, avec des valeurs pour Info.plist et xcconfig, alors nous d√©velopperons podspec nous-m√™mes et il ne sera pas pratique de les modifier. Si nous devons changer quelque chose, nous devons aller dans chaque fichier podspec et √©diter quelque chose avec des stylos. Dans tous les cas, cela n'est pas pratique.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/go/mf/t6gomf0wb3koti2mtcxnlsm36e8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour nous en d√©barrasser, nous avons cr√©√© un plugin local tr√®s simple pour CocoaPods. Il tient m√™me enti√®rement dans une diapositive. Et il fait la seule et unique chose: nous donne la permission DSL CocoaPods, qui cr√©e app_spec avec des valeurs d√©j√† bouch√©es dans Info.plist et xcconfig. Cela nous permet d√©j√† de configurer la signature, de configurer les choses importantes que nous voulons voir configur√©es dans notre projet de test. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/7h/7w/kk7h7w7bl013cgrbwntjge0jjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Question: comment transf√©rer le chemin d'acc√®s aux droits d'acc√®s, plus pr√©cis√©ment, o√π stocker les droits d'acc√®s afin que nous puissions coder en dur le chemin d'acc√®s dans les plug-ins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a deux fa√ßons. Ou indiquez le chemin d'un fichier qui se trouve simplement dans notre r√©f√©rentiel, par exemple, vers les droits du projet principal. Ou stockez dans le plugin un fichier de droits sp√©ciaux pour les projets de test. Et en utilisant le m√™me plugin, copiez-le sur notre developmentpod.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/xo/jr/37xojrk1orzo5d_2nj1eu1tconi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons choisi la premi√®re voie, et ici nous avons eu quelques difficult√©s. Le fait est que dans notre r√©f√©rentiel, les modules de d√©veloppement se trouvent dans diff√©rents sous-dossiers. Par cons√©quent, nous ne pouvons pas leur indiquer un chemin d'acc√®s relatif depuis le d√©veloppementpod vers le fichier de droits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de souligner ici que vous devez sp√©cifier un chemin relatif, car ce chemin reste dans pods_spec. Cela signifie qu'il participera au calcul du montant du ch√®que, qui est stock√© dans Podfile.lock. Et s'il existe un chemin absolu, cela affectera le montant du ch√®que. Cela signifie que le montant du ch√®que variera en fonction du dossier √† partir duquel $ pod installer, d'o√π vous avez le r√©f√©rentiel, sur quelle machine vous ex√©cutez $ pod install. En g√©n√©ral, cela conduit √† des conflits.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/ek/ng/loekngcf64nbbzuaaadwy3qmhl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, je vais montrer une autre petite extension du m√™me plugin, qui nous permet de calculer le chemin relatif vers ces droits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous connaissons le chemin relatif de notre plugin vers le fichier avec des droits, s'ils sont dans le m√™me r√©f√©rentiel. </font><font style="vertical-align: inherit;">Et aussi lors du lancement de $ pod install, nous connaissons le chemin vers notre developmentpod. </font><font style="vertical-align: inherit;">Toute la magie qui se trouve dans ce code est une ligne en surbrillance o√π nous comptons simplement le chemin relatif, connaissant ces deux chemins absolus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/yg/1l/yayg1ll82qeeq2xg28xnfrm4i2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, qu'avons-nous obtenu lorsque nous avions d√©j√† configur√© app_spec de cette mani√®re? </font><font style="vertical-align: inherit;">Nous pouvons ex√©cuter notre projet de test sur les m√™mes appareils imm√©diatement. </font><font style="vertical-align: inherit;">Nous avons obtenu une √©norme quantit√© de param√®tres, y compris les droits, dont nous avons besoin.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environnement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prochaine chose dont je veux parler est l'environnement, l'environnement minimum n√©cessaire dont nous avons besoin pour commencer √† √©crire du code tout de suite. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/f-/t2/uif-t2fox7l9twbo2isjpzcx_py.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, nous avons besoin de MapKit, d√©j√† configur√©, avec les cl√©s transf√©r√©es, avec renvoi d'appel dans le AccountManager. Ceci est notre biblioth√®que d'autorisation. Elle doit √©galement lancer des appels syst√®me, elle doit √©galement transf√©rer des cl√©s, notamment pour passer l'ouverture de l'application par r√©f√©rence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons √©galement besoin d'un √©cran de d√©marrage avec une carte et une pile de navigation, afin de pouvoir utiliser la m√™me pile de navigation que dans Maps, et il est plus facile de transf√©rer des fonctionnalit√©s du projet de test vers le projet principal. Et le point d'entr√©e pour que nous, sans r√©fl√©chir, puissions imm√©diatement commencer √† √©crire du code utile.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/l0/c_/jql0c_lfm6weosqqsvivxclmqro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans votre cas, cela pourrait √™tre, par exemple, la configuration du SDK Facebook, auquel vous devez √©galement transf√©rer des cl√©s; vos biblioth√®ques pour la connexion, dont vous aurez presque certainement besoin pour sauter le lien d'ouverture de l'application. Une sorte de contr√¥leur de d√©marrage Windows de d√©marrage et le m√™me point d'entr√©e pour ex√©cuter le script principal que vous souhaitez d√©velopper dans votre projet de test. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/6v/7o/7u6v7oxzg3dipiw2ztkcsub5ou8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment avons-nous fait cela? En cr√©ant un seul mod√®le AppDelegate. L√†, nous initialisons tous les environnements n√©cessaires, les biblioth√®ques. Nous renvoyons tous les appels n√©cessaires, transf√©rons les cl√©s n√©cessaires. En cr√©ant un projet de test, il nous reste √† cr√©er un nouveau AppDelegate pour le projet de test et √† h√©riter du mod√®le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous rempla√ßons la seule et unique m√©thode appel√©e apr√®s que le mod√®le AppDelegate a fait tout ce qui √©tait n√©cessaire. </font><font style="vertical-align: inherit;">Et l√†, nous avons d√©j√† le ViewController de d√©part et en plus nous pouvons ex√©cuter notre script, que nous voulons d√©boguer dans le projet de test.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtait / est devenu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment puis-je cr√©er un projet de test dans le front et comment le cr√©er en utilisant la m√©thode que j'ai d√©crite aujourd'hui? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ation d'un projet de test dans le front: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Nous allons dans Xcode, cr√©ons un nouveau projet (Fichier&gt; Nouveau projet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Saisissez le nom, de pr√©f√©rence sans erreur, signez le Bundle ID. Nous mettons en place ce projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Changez la version de Swift, changez la version cible. Nous essayons de tout ex√©cuter sur l'appareil, de modifier la signature, etc. C'est un processus plut√¥t morne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Ensuite, nous cr√©ons un podfile, y connectons les d√©pendances, installons des pods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Apr√®s cela, nous allons commencer √† configurer tr√®s fastidieusement et doucement notre AppDelegate, en transf√©rant √† travers les morceaux d'initialisation des biblioth√®ques dont nous avons besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cr√©ez un UIWindows de d√©marrage avec notre ViewController</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et seulement apr√®s cela, nous pouvons d√©marrer le code utile. </font><font style="vertical-align: inherit;">Proc√©dure assez d√©sagr√©able, d'accord. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment pouvons-nous cr√©er un projet de test en utilisant les meilleures pratiques que j'ai d√©crites dans le rapport d'aujourd'hui? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Nous cr√©ons sample_app_spec, en utilisant l'extension, pour CocoaPods, avec lequel nous avons commenc√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cr√©ez un AppDelegate et h√©ritez-le du mod√®le AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous pouvons commencer √† √©crire du code utile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cr√©ation d'un projet de test de cette mani√®re est beaucoup plus rapide et plus fiable. </font><font style="vertical-align: inherit;">Nous ne ferons certainement pas d'erreur dans la signature des param√®tres, nous ne ferons certainement pas d'erreur dans les param√®tres du projet. </font><font style="vertical-align: inherit;">Tout l'environnement n√©cessaire au d√©marrage des travaux nous approche imm√©diatement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela peut-il √™tre plus simple?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez poser une question - cela peut-il √™tre plus facile? Bien s√ªr. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/t_/ux/9et_uxcpepiyc5iavhfehkqen-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai identifi√© trois niveaux de difficult√©. Le premier est ce dont j'ai parl√© aujourd'hui, tout √† coup, lorsque nous cr√©ons un plug-in pour CocoaPods, qui peut r√©parer les chemins d'acc√®s aux droits, et un mod√®le AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me m√©thode est id√©ale dans le rapport des efforts au profit. Il ne contient que le plugin pour CocoaPods, qui √©tait le premier dans l'histoire d'aujourd'hui. Autrement dit, il remplace simplement les valeurs dans Info.plist et xcconfig. Cela rend d√©j√† la vie beaucoup plus facile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous n'avez pas besoin de votre fichier de droits dans vos applications de test, si vos applications de test sont assez diff√©rentes les unes des autres et n'ont pas besoin de composants communs, cette m√©thode vous convient parfaitement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisi√®me m√©thode est la plus simple, ne n√©cessite aucune pr√©paration. Commencez simplement √† utiliser app_spec. Le projet g√©n√©r√© √† partir de app_spec est cr√©√© dans le m√™me espace de travail que votre projet principal. Par cons√©quent, il h√©rite d√©j√†, par exemple, Swift, de la version cible et de tous les param√®tres que vous avez dans Workspace. Il vous sera beaucoup plus facile de commencer √† travailler avec lui. C'est tout, merci de votre attention. Aujourd'hui, je vais vous dire comment cr√©er des projets de test sans douleur, et comment nous cr√©ons des projets de test dans Yandex.Maps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- D'abord, un peu d'histoire. Yandex.Les cartes sont collect√©es pendant plus d'une minute. Sur mon ordinateur, la cr√©ation de l'application prend un peu plus de trois minutes. Nous d√©veloppons des projets de test afin de passer moins de temps sur chaque montage. Nous avons suffisamment de modularit√©, et pour chaque module, nous faisons un projet de test. Dans ce projet de test, des fonctionnalit√©s sont en cours de d√©veloppement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cr√©ation d'un projet de test prend d√©sormais de 15 minutes √† une heure. Cela est d√ª au fait que le projet doit √™tre configur√©. Autrement dit, vous devez configurer la signature afin que nous puissions d√©velopper sur les m√™mes appareils que ceux auxquels nous sommes habitu√©s. Il est n√©cessaire de configurer les biblioth√®ques n√©cessaires. Dans le processus de d√©veloppement de la fonctionnalit√© elle-m√™me, nous revenons constamment et terminons le projet de test afin qu'il r√©ponde √† nos besoins.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi avons-nous besoin de projets de test? Pour gagner du temps lors du montage. Plus le projet est petit, plus il est assembl√© rapidement, plus nous serons en mesure de lancer notre application sur l'appareil et plus il sera confortable pour nous de le d√©velopper. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/d_/rt/zhd_rt3d8t6ojvedwzffktuan7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que devrait contenir le projet de test? Nous devrions pouvoir lancer, d√©boguer notre application sur les m√™mes appareils sur lesquels nous sommes habitu√©s √† lancer et d√©boguer notre application principale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le projet doit √™tre configur√© de mani√®re aussi similaire que possible au projet principal, de sorte que lors du transfert des fonctionnalit√©s du projet de test vers le projet principal, nous n'obtenions pas de surprise. Ou du moins r√©duit le nombre de surprises re√ßues au minimum.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons √©galement besoin d'un environnement minimal dans le projet de test, afin de ne pas perdre de temps √† cr√©er des fen√™tres d'interface utilisateur, √† configurer des biblioth√®ques, √† annuler l'appel √† ouvrir l'application dans la biblioth√®que qui traite des autorisations, etc. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CocoaPods app_spec</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toute mon histoire d'aujourd'hui sera construite autour de la fonctionnalit√© CocoaPods appel√©e app_spec. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/eb/xf/pkebxfc7kvhzsszibluqrljlkai.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
App_spec est comme une sous-esp√®ce r√©guli√®re, seulement elle ne g√©n√®re pas un framework qui peut √™tre connect√©, mais une application qui peut √™tre lanc√©e sur l'appareil. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/kj/67/dskj67urgk0wocvvue0rsaexelq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pr√™t √† l'emploi, CocoaPods nous permet de placer Info.plist et xcconfig dans app_spec. Cela nous permet d√©j√† de bien monter notre projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si nous allons √©crire d'√©normes dictionnaires dans chaque pods_spec, avec des valeurs pour Info.plist et xcconfig, alors nous d√©velopperons podspec nous-m√™mes et il ne sera pas pratique de les modifier. Si nous devons changer quelque chose, nous devons aller dans chaque fichier podspec et √©diter quelque chose avec des stylos. Ou pas des stylos. Dans tous les cas, cela n'est pas pratique.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/go/mf/t6gomf0wb3koti2mtcxnlsm36e8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour nous en d√©barrasser, nous avons cr√©√© un plugin local tr√®s simple pour CocoaPods. Il tient m√™me enti√®rement dans une diapositive. Et il fait la seule et unique chose: nous donne la permission DSL CocoaPods, qui cr√©e app_spec avec des valeurs d√©j√† bouch√©es dans Info.plist et xcconfig. Cela nous permet d√©j√† de configurer la signature, de configurer les choses importantes que nous voulons voir configur√©es dans notre projet de test. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/7h/7w/kk7h7w7bl013cgrbwntjge0jjec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Question: comment transf√©rer le chemin d'acc√®s aux droits d'acc√®s, plus pr√©cis√©ment, o√π stocker les droits d'acc√®s afin que nous puissions coder en dur le chemin d'acc√®s dans les plug-ins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a deux fa√ßons. Ou indiquez le chemin d'un fichier qui se trouve simplement dans notre r√©f√©rentiel, par exemple, vers les droits du projet principal. Ou stockez dans le plugin un fichier de droits sp√©ciaux pour les projets de test. Et en utilisant le m√™me plugin, copiez-le sur notre developmentpod.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/37/xo/jr/37xojrk1orzo5d_2nj1eu1tconi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons choisi la premi√®re voie, et ici nous avons eu quelques difficult√©s. Le fait est que dans notre r√©f√©rentiel, les modules de d√©veloppement se trouvent dans diff√©rents sous-dossiers. Par cons√©quent, nous ne pouvons pas leur indiquer un chemin d'acc√®s relatif depuis le d√©veloppementpod vers le fichier de droits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de souligner ici que vous devez sp√©cifier un chemin relatif, car ce chemin reste dans pods_spec. Cela signifie qu'il participera au calcul du montant du ch√®que, qui est stock√© dans Podfile.lock. Et s'il existe un chemin absolu, cela affectera le montant du ch√®que. Cela signifie que le montant du ch√®que variera en fonction du dossier √† partir duquel $ pod installer, d'o√π vous avez le r√©f√©rentiel, sur quelle machine vous ex√©cutez $ pod install. En g√©n√©ral, cela conduit √† des conflits.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lo/ek/ng/loekngcf64nbbzuaaadwy3qmhl4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, je vais montrer une autre petite extension du m√™me plugin, qui nous permet de calculer le chemin relatif vers ces droits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous connaissons le chemin relatif de notre plugin vers le fichier avec des droits, s'ils sont dans le m√™me r√©f√©rentiel. </font><font style="vertical-align: inherit;">Et aussi lors du lancement de $ pod install, nous connaissons le chemin vers notre developmentpod. </font><font style="vertical-align: inherit;">Toute la magie qui se trouve dans ce code est une ligne en surbrillance o√π nous comptons simplement le chemin relatif, connaissant ces deux chemins absolus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/yg/1l/yayg1ll82qeeq2xg28xnfrm4i2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, qu'avons-nous obtenu lorsque nous avions d√©j√† configur√© app_spec de cette mani√®re? </font><font style="vertical-align: inherit;">Nous pouvons ex√©cuter notre projet de test sur les m√™mes appareils imm√©diatement. </font><font style="vertical-align: inherit;">Nous avons obtenu une √©norme quantit√© de param√®tres, y compris les droits, dont nous avons besoin.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environnement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prochaine chose dont je veux parler est l'environnement, l'environnement minimum n√©cessaire dont nous avons besoin pour commencer √† √©crire du code tout de suite. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/f-/t2/uif-t2fox7l9twbo2isjpzcx_py.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, nous avons besoin de MapKit, d√©j√† configur√©, avec les cl√©s transf√©r√©es, avec renvoi d'appel dans le AccountManager. Ceci est notre biblioth√®que d'autorisation. Elle doit √©galement lancer des appels syst√®me, elle doit √©galement transf√©rer des cl√©s, notamment pour passer l'ouverture de l'application par r√©f√©rence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons √©galement besoin d'un √©cran de d√©marrage avec une carte et une pile de navigation, afin de pouvoir utiliser la m√™me pile de navigation que dans Maps, et il est plus facile de transf√©rer des fonctionnalit√©s du projet de test vers le projet principal. Et le point d'entr√©e pour que nous, sans r√©fl√©chir, puissions imm√©diatement commencer √† √©crire du code utile.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/l0/c_/jql0c_lfm6weosqqsvivxclmqro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans votre cas, cela pourrait √™tre, par exemple, la configuration du SDK Facebook, auquel vous devez √©galement transf√©rer des cl√©s; vos biblioth√®ques pour la connexion, dont vous aurez presque certainement besoin pour sauter le lien d'ouverture de l'application. Une sorte de contr√¥leur de d√©marrage Windows de d√©marrage et le m√™me point d'entr√©e pour ex√©cuter le script principal que vous souhaitez d√©velopper dans votre projet de test. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7u/6v/7o/7u6v7oxzg3dipiw2ztkcsub5ou8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment avons-nous fait cela? En cr√©ant un seul mod√®le AppDelegate. L√†, nous initialisons tous les environnements n√©cessaires, les biblioth√®ques. Nous renvoyons tous les appels n√©cessaires, transf√©rons les cl√©s n√©cessaires. En cr√©ant un projet de test, il nous reste √† cr√©er un nouveau AppDelegate pour le projet de test et √† h√©riter du mod√®le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous rempla√ßons la seule et unique m√©thode appel√©e apr√®s que le mod√®le AppDelegate a fait tout ce qui √©tait n√©cessaire. </font><font style="vertical-align: inherit;">Et l√†, nous avons d√©j√† le ViewController de d√©part et en plus nous pouvons ex√©cuter notre script, que nous voulons d√©boguer dans le projet de test.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtait / est devenu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment puis-je cr√©er un projet de test dans le front et comment le cr√©er en utilisant la m√©thode que j'ai d√©crite aujourd'hui? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ation d'un projet de test dans le front: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Nous allons dans Xcode, cr√©ons un nouveau projet (Fichier&gt; Nouveau projet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Saisissez le nom, de pr√©f√©rence sans erreur, signez le Bundle ID. Nous mettons en place ce projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Changez la version de Swift, changez la version cible. Nous essayons de tout ex√©cuter sur l'appareil, de modifier la signature, etc. C'est un processus plut√¥t morne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Ensuite, nous cr√©ons un podfile, y connectons les d√©pendances, installons des pods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Apr√®s cela, nous allons commencer √† configurer tr√®s fastidieusement et doucement notre AppDelegate, en transf√©rant √† travers les morceaux d'initialisation des biblioth√®ques dont nous avons besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cr√©ez un UIWindows de d√©marrage avec notre ViewController</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et seulement apr√®s cela, nous pouvons d√©marrer le code utile. </font><font style="vertical-align: inherit;">Proc√©dure assez d√©sagr√©able, d'accord. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment pouvons-nous cr√©er un projet de test en utilisant les meilleures pratiques que j'ai d√©crites dans le rapport d'aujourd'hui? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Nous cr√©ons sample_app_spec, en utilisant l'extension, pour CocoaPods, avec lequel nous avons commenc√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Cr√©ez un AppDelegate et h√©ritez-le du mod√®le AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous pouvons commencer √† √©crire du code utile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cr√©ation d'un projet de test de cette mani√®re est beaucoup plus rapide et plus fiable. </font><font style="vertical-align: inherit;">Nous ne ferons certainement pas d'erreur dans la signature des param√®tres, nous ne ferons certainement pas d'erreur dans les param√®tres du projet. </font><font style="vertical-align: inherit;">Tout l'environnement n√©cessaire au d√©marrage des travaux nous approche imm√©diatement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela peut-il √™tre plus simple?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez poser une question - cela peut-il √™tre plus facile? Bien s√ªr. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/t_/ux/9et_uxcpepiyc5iavhfehkqen-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai identifi√© trois niveaux de difficult√©. Le premier est ce dont j'ai parl√© aujourd'hui, tout √† coup, lorsque nous cr√©ons un plug-in pour CocoaPods, qui peut r√©parer les chemins d'acc√®s aux droits, et un mod√®le AppDelegate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me m√©thode est id√©ale dans le rapport des efforts au profit. Il ne contient que le plugin pour CocoaPods, qui √©tait le premier dans l'histoire d'aujourd'hui. Autrement dit, il remplace simplement les valeurs dans Info.plist et xcconfig. Cela rend d√©j√† la vie beaucoup plus facile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous n'avez pas besoin de votre fichier de droits dans vos applications de test, si vos applications de test sont assez diff√©rentes les unes des autres et n'ont pas besoin de composants communs, cette m√©thode vous convient parfaitement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisi√®me m√©thode est la plus simple, ne n√©cessite aucune pr√©paration. </font><font style="vertical-align: inherit;">Commencez simplement √† utiliser app_spec. </font><font style="vertical-align: inherit;">Le projet g√©n√©r√© √† partir de app_spec est cr√©√© dans le m√™me espace de travail que votre projet principal. </font><font style="vertical-align: inherit;">Par cons√©quent, il h√©rite d√©j√† de la version Swift, de la version cible et de tous les param√®tres que vous avez dans Workspace. </font><font style="vertical-align: inherit;">Il vous sera beaucoup plus facile de commencer √† travailler avec lui. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci pour l'attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503642/index.html">Comment acc√©der √† LinkedIn, Facebook, Google dans la Silicon Valley</a></li>
<li><a href="../fr503650/index.html">VKCup 2020 Stage I. Un long chemin</a></li>
<li><a href="../fr503652/index.html">√âv√©nements num√©riques √† Moscou du 25 au 31 mai</a></li>
<li><a href="../fr503654/index.html">Service Web qui permet aux utilisateurs de maintenir ind√©pendamment une culture de communication en ligne</a></li>
<li><a href="../fr503656/index.html">L'algorithme de suppression de bande dans l'image comme outil pour am√©liorer la qualit√© de la reconstruction tomographique</a></li>
<li><a href="../fr503662/index.html">NOUVEAU - T√©l√©phone VoIP Snom D335</a></li>
<li><a href="../fr503666/index.html">Traduction de cours de d√©marrage et d'affaires de l'Universit√© de Stanford. Conf√©rence num√©ro 1. Comment d√©marrer une startup</a></li>
<li><a href="../fr503668/index.html">Circle Squared: Visual Evidence</a></li>
<li><a href="../fr503670/index.html">Mac OS ralentit-il? - Catalina v√©rifie tout code non sign√© sur Internet au d√©marrage</a></li>
<li><a href="../fr503672/index.html">De quel c√¥t√© √™tes-vous: pousser et tirer dans la configuration de l'√©tat souhait√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>