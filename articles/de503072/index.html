<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎟️ ➰ 😭 Nur ein weiteres Tool: Kennenlernen der Dienstkonfiguration mit Desired State Configuration  🖍️ 👦🏼 🗳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desired State Configuration (DSC) ist ein Tool zur Verwaltung der Serverkonfiguration. Damit können Sie den Server konfigurieren (Änderungen an der Re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Nur ein weiteres Tool: Kennenlernen der Dienstkonfiguration mit Desired State Configuration </h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/503072/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desired State Configuration (DSC) ist ein Tool zur Verwaltung der Serverkonfiguration. Damit können Sie den Server konfigurieren (Änderungen an der Registrierung vornehmen, Dateien kopieren, Komponenten installieren und entfernen), den aktuellen Status der Einstellungen überwachen und schnell zu den Grundeinstellungen zurückkehren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSC ist interessant für diejenigen, die den DevOps-Ansatz verfolgen. Dieses Tool passt gut zur Infrastruktur als Code-Paradigma: Entwickler können ihre Anforderungen zur Konfiguration hinzufügen und in das Versionskontrollsystem aufnehmen, und Teams können den Code ohne „manuelle“ Prozesse bereitstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammen mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stanislav Buldakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raiffeisenbank</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben unsere Erfahrungen mit der DSC-Engine kombiniert und in zwei Artikel unterteilt. </font><font style="vertical-align: inherit;">Im ersten Teil werden wir die Grundprinzipien der Arbeit analysieren und die Verwendungsmerkmale anhand praktischer Beispiele kennenlernen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Packen Sie die Box aus" mit der DSC-Engine, sehen Sie, welche Ressourcen standardmäßig vorhanden sind, und zeigen Sie, wo Sie zusätzliche Ressourcen erhalten.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns sehen, wie die Konfiguration in DSC beschrieben wird.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir werden lernen, wie der integrierte Agent Local Configuration Manager Konfigurationen auf dem Server anwendet, und zeigen, wie er mithilfe von Metakonfigurationen konfiguriert wird.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommen wir zu komplexeren Konfigurationsfällen: Teilkonfigurationen und Stub-Konfigurationen.</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/webt/6p/cb/my/6pcbmyoaiunjv7xpcgcckapk4ok.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSC ist ein leichter und schneller Motor. </font><font style="vertical-align: inherit;">Mit ihm können Sie beispielsweise .NET Framework 3.5 auf virtuellen Maschinen viel schneller installieren. </font><font style="vertical-align: inherit;">Folgendes hilft ihm dabei, den Dienstkonfigurationsprozess zu beschleunigen:</font></font><br>
<br>
<ul>
<li><b> « »   Windows   PowerShell.&nbsp;</b><br>
DSC     PowerShell      Windows Management Framework.  Linux  .  ,     PowerShell.&nbsp;</li>
<li><b>,       .&nbsp;</b><br>
 ,     ,   ,     .         DSC.&nbsp;</li>
<li><b>,            .</b> <br>
DSC          ,     .           .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurationen werden immer nacheinander ohne Bedingungen und Verzweigungen durchgeführt. </font><font style="vertical-align: inherit;">Daher sieht der DSC-Operationsalgorithmus kurz wie folgt aus:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local Configuration Manager (LCM)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies ist der integrierte Agent, der für das Anwenden von Konfigurationen auf den Server verantwortlich ist. </font><font style="vertical-align: inherit;">Wir sagen ihm, wie die deklarierten Konfigurationen funktionieren sollen und in welcher Reihenfolge.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn zusätzliche Ressourcen benötigt werden, installieren und verbinden Sie diese im Voraus.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In deklarativer Form schreiben wir die Konfigurationsreihenfolge.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir senden die Konfiguration im Format der MOF-Datei.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir senden die Konfiguration an den frisch bereitgestellten oder vorhandenen Zielserver.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCM erhält die Konfiguration (MOF-Datei) sowie Anweisungen zum Einrichten des LCM.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Konfiguration wird sofort von unserem Team übernommen.</font></font><br>
</li>
</ol><br>
<img src="https://habrastorage.org/webt/xi/-k/br/xi-kbrc_in9acfygcdn5a_o9fly.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein vereinfachtes Diagramm der DSC-Architektur. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden unsere Bekanntschaft mit dem Motor beginnen, indem wir die vordefinierten Ressourcen untersuchen. </font><font style="vertical-align: inherit;">Versuchen Sie als nächstes, die Konfiguration zu schreiben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSC-Ressourcen&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSC-Ressourcen sind eine Art Analogon zu PowerShell-Modulen. </font><font style="vertical-align: inherit;">Jeder Windows-Server verfügt bereits über einen vordefinierten Satz von DSC-Ressourcen, die sich im selben Verzeichnis wie die PowerShell-Module befinden. </font><font style="vertical-align: inherit;">Die Liste kann über das Cmdlet Get-DscResourse abgerufen werden. </font><font style="vertical-align: inherit;">So sieht diese Liste unter Windows 10 1809 aus:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; Get-DscResource | Sort-Object -Property Name | ft ImplementedAs, Name -a<font></font>
&nbsp;<font></font>
ImplementedAs Name<font></font>
------------- ----<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Archive<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Environment<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary File<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Group<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite GroupSet<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary Log<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Package<font></font>
&nbsp;&nbsp;&nbsp;PowerShell PackageManagement<font></font>
&nbsp;&nbsp;&nbsp;PowerShell PackageManagementSource<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite ProcessSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Registry<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Script<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Service<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite ServiceSet<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary SignatureValidation<font></font>
&nbsp;&nbsp;&nbsp;PowerShell User<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForAll<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForAny<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForSome<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsFeature<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite WindowsFeatureSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsOptionalFeature<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite WindowsOptionalFeatureSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsPackageCab<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsProcess</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Namen der Ressourcen geben einen Überblick darüber, womit sie arbeiten:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archiv - mit Ein- und Auspacken von Archiven;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umgebung - mit Umgebungsvariablen;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datei - mit Dateien;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gruppe - mit lokalen Benutzergruppen;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokoll - mit Protokollen;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket - mit Softwarepaketen;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrierung - mit Registrierungsschlüsseln und deren Status;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service - mit Services und deren Status;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzer - mit lokalen Benutzerkonten;</font></font><br>
</li>
<li>WindowsFeature —   Windows Server;<br>
</li>
<li>WindowsProcess —   Windows;<br>
</li>
<li>Script —&nbsp;   PowerShell-   .  3  : SetScript —  -, TestScript — ,      , GetScript —    .<br>
</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In den meisten Fällen reichen sofort einsatzbereite DSC-Ressourcen nicht aus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In diesem Fall können Sie Ihre eigenen Skripte für alles schreiben, was über das Standardmodul hinausgeht. Um das Rad nicht neu zu erfinden, können Sie DSC-Ressourcen verwenden, die von anderen Entwicklern geschrieben wurden. Zum Beispiel von hier </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/PowerShell/DscResources</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSGallery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
&nbsp;<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So installieren Sie zusätzliche Ressourcen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir verwenden das Cmdlet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install-Module</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Beim Installieren von Ressourcen werden einfach Ressourcendateien entlang eines der Pfade in der Umgebungsvariablen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ env: PSModulePath kopiert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Installierte Ressourcen werden beim Kompilieren nicht automatisch verbunden, daher werden wir sie später zusätzlich in der Konfiguration selbst verbinden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Ressource zu verwenden, müssen Sie sie lokal und auf dem Zielserver installieren. </font><font style="vertical-align: inherit;">In lokalen Infrastrukturen verbietet eine Sicherheitsrichtlinie normalerweise den Internetzugang für Server. </font><font style="vertical-align: inherit;">In diesem Fall kann der DSC-Server keine zusätzlichen Ressourcen aus externen Quellen laden. </font><font style="vertical-align: inherit;">Um Archive mit Modulen zu veröffentlichen, stellen wir ein lokales NuGet-Repository oder einen regulären Webserver bereit. </font><font style="vertical-align: inherit;">Sie können zusätzliche Ressourcen für den Webserver installieren, indem Sie das Modul in das Verzeichnis C: \ Programme \ WindowsPowerShell \ Modules \ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
entpacken. Genau das tut das Cmdlet Install-Module. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im zweiten Artikel werden wir uns den Unterschied zwischen den Einstellungen für den Push- und den Pull-Modus genauer ansehen.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfache Analyseanalyse</font></font></h2><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Konfiguration</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine einfache, konsistente Beschreibung dessen, was auf dem Server zu tun ist. </font><font style="vertical-align: inherit;">So sieht eine einfache DSC-Konfiguration aus:&nbsp;</font></font><br>
<br>
<pre><code class="powershell hljs">Configuration EnvironmentVariable_Path<font></font>
{<font></font>
<span class="hljs-keyword">param</span> ()
<span class="hljs-built_in">Import-DscResource</span> <span class="hljs-literal">-ModuleName</span> <span class="hljs-string">'PSDscResources'</span><font></font>
Node localhost<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; Environment CreatePathEnvironmentVariable<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name = <span class="hljs-string">'TestPathEnvironmentVariable'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value = <span class="hljs-string">'TestValue'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ensure = <span class="hljs-string">'Present'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Path = <span class="hljs-variable">$true</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Target = <span class="hljs-selector-tag">@</span>(<span class="hljs-string">'Process'</span>, <span class="hljs-string">'Machine'</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
EnvironmentVariable_Path <span class="hljs-literal">-OutputPath</span>:<span class="hljs-string">"C:\EnvironmentVariable_Path"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns für ihr Beispiel sehen, woraus die Konfiguration besteht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurationsblock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine spezielle Art von PowerShell-Funktion, die beschreibt, was wir erhalten möchten.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb des Blocks enthält:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Block </font><font style="vertical-align: inherit;">mit den </font><font style="vertical-align: inherit;">Parametern , </font><font style="vertical-align: inherit;">die intern verwendet werden können;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Block mit zusätzlichen PowerShell-Aufrufen. </font><font style="vertical-align: inherit;">Hier führen wir zu Beginn der Konfiguration immer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import-Resource aus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um zusätzliche Ressourcen zu verbinden.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blöcke mit Einstellungen für bestimmte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ Servername- </font><font style="vertical-align: inherit;">Server </font><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Innerhalb des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Knotenblocks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geben wir an, welche Ressourcen auf einem bestimmten Server konfiguriert werden sollen. </font><font style="vertical-align: inherit;">Im obigen Beispiel wird eine Umgebungsvariable mithilfe einer regulären Umgebungsressource erstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns die Syntax einer bestimmten Ressource mit dem Befehl Get-DscResource -Name Environment -Syntax genauer an:</font></font><br>
&nbsp;<br>
<pre><code class="powershell hljs">
<span class="hljs-built_in">PS</span> C:\windows\system32&gt; <span class="hljs-built_in">Get-DscResource</span> <span class="hljs-literal">-Name</span> Environment <span class="hljs-literal">-Syntax</span>
Environment [<span class="hljs-built_in">String</span>] <span class="hljs-comment">#ResourceName</span><font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Name = [<span class="hljs-built_in">string</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">DependsOn</span> = [<span class="hljs-built_in">string</span>[]]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Ensure</span> = [<span class="hljs-built_in">string</span>]{ <span class="hljs-type">Absent</span> | <span class="hljs-type">Present</span> }]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Path</span> = [<span class="hljs-built_in">bool</span>]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">PsDscRunAsCredential</span> = [<span class="hljs-type">PSCredential</span>]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Value</span> = [<span class="hljs-built_in">string</span>]]<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel:&nbsp;</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Der Name der Umgebungsvariablen.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DependsOn geben wir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Abhängigkeit von anderen Ressourcen an. </font><font style="vertical-align: inherit;">Es ist wichtig zu beachten, dass der Vorgang erst ausgeführt wird, wenn die hier angegebene Ressource abgeschlossen ist.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sicherstellen geben</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir die Konfigurationsbedingungen an. </font><font style="vertical-align: inherit;">Wenn eine solche Variable fehlt, werden wir sie erstellen. </font><font style="vertical-align: inherit;">Wenn es vorhanden ist, wird diese Ressource nicht konfiguriert.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pfad</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gibt an, ob die Umgebungsvariable einen Pfad enthält.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PsDscRunAsCredential wurden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anmeldeinformationen angegeben.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Der Wert der Umgebungsvariablen.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ziel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kann angegeben werden, auf wen die Konfiguration angewendet wird.</font></font><br>
</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So starten Sie die Kompilierung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir nennen die Konfiguration einfach beim Namen mit den notwendigen Parametern. </font><font style="vertical-align: inherit;">Das Ergebnis ist eine Mof-Datei, die von der DSC-Engine weiter zum Konfigurieren eines bestimmten Servers verwendet wird:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; EnvironmentVariable_Path -OutputPath:"C:\EnvironmentVariable_Path"<font></font>
&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Directory: C:\EnvironmentVariable_Path<font></font>
&nbsp;<font></font>
Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LastWriteTime &nbsp; &nbsp; &nbsp; &nbsp; Length Name<font></font>
----&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------------- &nbsp; &nbsp; &nbsp; &nbsp; ------ ----<font></font>
-a---- &nbsp; &nbsp; &nbsp; 25.02.2020 &nbsp; &nbsp; 14:05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2172 localhost.mof</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren Sie Local Configuration Manager</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der lokale Konfigurationsmanager ist für die Anwendung der Konfigurationen verantwortlich, die wir in mof-Dateien kompiliert haben. </font><font style="vertical-align: inherit;">Er überwacht die Erhaltung des in der Konfiguration definierten Zustands. </font><font style="vertical-align: inherit;">Wenn das System diesen Status verlässt, ruft LCM den Code in den Ressourcen auf, um den angegebenen Status wiederherzustellen.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sehen wir uns die Einstellungen des lokalen Konfigurationsmanagers über Get-DscLocalConfigurationManager an:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; Get-DscLocalConfigurationManager<font></font>
&nbsp;<font></font>
ActionAfterReboot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ContinueConfiguration<font></font>
AgentId&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1FB3A2EE-57C9-11EA-A204-58A023EF3A48<font></font>
AllowModuleOverWrite &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : False<font></font>
CertificateID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
ConfigurationDownloadManagers&nbsp; : {}<font></font>
ConfigurationID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
ConfigurationMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ApplyAndMonitor<font></font>
ConfigurationModeFrequencyMins : 15<font></font>
Credential &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
DebugMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {NONE}<font></font>
DownloadManagerCustomData&nbsp; &nbsp; &nbsp; :<font></font>
DownloadManagerName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
LCMCompatibleVersions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {1.0, 2.0}<font></font>
LCMState &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : Idle<font></font>
LCMStateDetail &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
LCMVersion &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 2.0<font></font>
StatusRetentionTimeInDays&nbsp; &nbsp; &nbsp; : 10<font></font>
SignatureValidationPolicy&nbsp; &nbsp; &nbsp; : NONE<font></font>
SignatureValidations &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
MaximumDownloadSizeMB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 500<font></font>
PartialConfigurations&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
RebootNodeIfNeeded &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : False<font></font>
RefreshFrequencyMins &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 30<font></font>
RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PUSH<font></font>
ReportManagers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
ResourceModuleManagers &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
PSComputerName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
</code></pre><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enthält den LCM-Betriebsmodus - Push oder Pull. </font><font style="vertical-align: inherit;">Wir werden im zweiten Artikel mehr über Modi sprechen.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zeigt den aktuellen Konfigurationsanwendungsmodus an. </font><font style="vertical-align: inherit;">In unserem Fall ist es ApplyAndMonitor - Änderungen anwenden und verfolgen. </font><font style="vertical-align: inherit;">ApplyOnly-Modi sind ebenfalls verfügbar (LCM verfolgt keine Konfigurationsänderungen) und ApplyAndAutocorrect-Modi (LCM verfolgt Änderungen nicht nur, sondern setzt sie auch auf die Basiskonfiguration zurück).</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RebootNodeIfNeeded</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - kann den Server nach Abschluss der Konfiguration neu </font><b><font style="vertical-align: inherit;">starten</font></b><font style="vertical-align: inherit;"> , falls erforderlich, um die Einstellungen zu übernehmen.&nbsp;</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationModeFrequencyMins</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Legt fest, wie oft LCM nach Konfigurationsänderungen sucht.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ändern Sie die LCM-Einstellungen in der Metakonfiguration. </font><font style="vertical-align: inherit;">Hier ist ihr Beispiel:</font></font><br>
&nbsp;<br>
<pre><code class="powershell hljs"><font></font>
Configuration LCMConfiguration<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;Node Localhost<font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LocalConfigurationManager<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeeded = <span class="hljs-variable">$True</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
LCMConfiguration</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleiches gilt für die neueste Version von WMF mit Kommentaren:</font></font><br>
<br>
<pre><code class="powershell hljs"><font></font>
&nbsp;<font></font>
[<span class="hljs-type">DSCLocalConfigurationManager</span>()]<font></font>
Configuration LCMConfiguration<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>[]]<span class="hljs-variable">$Server</span> = <span class="hljs-string">"localhost"</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  LCM:</span>
<span class="hljs-comment">#  ,  </span>
<span class="hljs-comment"># : PUSH</span>
<span class="hljs-comment">#    30 </span>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeded = <span class="hljs-variable">$True</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">'Push'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshFrequencyMins = <span class="hljs-number">30</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#   </span>
LCMConfiguration <span class="hljs-literal">-Server</span> <span class="hljs-string">"localhost"</span> <span class="hljs-literal">-OutputPath</span> <span class="hljs-string">"C:\DSC\MetaConfigurations\EnvironmentVariable_Path\"</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Features Metakonfiguration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Beim Schreiben einer Metakonfiguration verwenden wir dieselben Blöcke wie bei einer regulären DSC-Konfiguration. </font><font style="vertical-align: inherit;">Die Ausnahme ist der interne Block LocalConfigurationManager (v4) oder das Attribut DSCLocalConfigurationManager (v5) für einen bestimmten Server. </font><font style="vertical-align: inherit;">Sie beschreiben alle notwendigen Einstellungen.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Metakonfiguration wird ebenfalls in eine mof-Datei kompiliert. Zur Verwendung wird jedoch das Cmdlet Set-DSCLocalConfigurationManager und nicht Start-DSCConfiguration verwendet.</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; LCMConfiguration -OutputPath C:\EnvironmentVariable_Path\<font></font>
&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Directory: C:\EnvironmentVariable_Path<font></font>
&nbsp;<font></font>
Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LastWriteTime &nbsp; &nbsp; &nbsp; &nbsp; Length Name<font></font>
----&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------------- &nbsp; &nbsp; &nbsp; &nbsp; ------ ----<font></font>
-a---- &nbsp; &nbsp; &nbsp; 26.02.2020 &nbsp; &nbsp; 20:05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1016 Localhost.meta.mof<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
PS C:\windows\system32&gt; Set-DscLocalConfigurationManager -Path C:\EnvironmentVariable_Path\<font></font>
PS C:\windows\system32&gt; Get-DscLocalConfigurationManager<font></font>
&nbsp;<font></font>
…<font></font>
RebootNodeIfNeeded &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : True<font></font>
…</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Theoretisch hindert uns nichts daran, die Konfiguration von LCM und konventionellen Ressourcen in derselben Konfiguration zu kombinieren. </font><font style="vertical-align: inherit;">Der Einfachheit halber wird jedoch empfohlen, Rechtschreibung und Anwendung von Konfiguration und Metakonfiguration zu trennen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teilkonfigurationen&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teilkonfigurationen - mehrere Konfigurationen, die nacheinander ausgeführt werden. </font><font style="vertical-align: inherit;">Sie sind nützlich, wenn mehrere Teams am Service arbeiten. </font><font style="vertical-align: inherit;">Jeder der Befehle gibt die Einstellungen für seinen Teil des Dienstes an, und die Teilkonfiguration wendet dann alle Einstellungen nacheinander an. </font><font style="vertical-align: inherit;">In den LCM-Einstellungen geben wir </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teilkonfigurationen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in </font><b><font style="vertical-align: inherit;">PartialConfigurations an</font></b><font style="vertical-align: inherit;"> .&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Teilkonfigurationen müssen wir die einfache DSC-Logik berücksichtigen. </font><font style="vertical-align: inherit;">Die Engine erlaubt keine Verzweigung, daher werden zusätzliche Ressourcen benötigt, um verschiedene Bedingungen zu erfüllen. </font><font style="vertical-align: inherit;">Wir werden dies anhand einiger Beispiele analysieren.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, wir möchten die Konfiguration garantiert an den Server liefern und gemäß dem folgenden Algorithmus vorgehen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie zunächst, ob die erforderlichen Module auf dem Server installiert sind.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir führen die Konfiguration durch, die den Server in den gewünschten Zustand bringt.</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht eine Metakonfiguration mit mehreren aufeinander folgenden Konfigurationen aus:</font></font><br>
<br>
<pre><code class="powershell hljs">
<span class="hljs-comment">#   </span>
[<span class="hljs-type">DSCLocalConfigurationManager</span>()]<font></font>
configuration MetaPushConfig<font></font>
{<font></font>
<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">ValidateNotNullOrEmpty</span>()]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>] <span class="hljs-variable">$NodeName</span> = <span class="hljs-string">'localhost'</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$NodeName</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;	<font></font>
 <span class="hljs-comment">#      LCM,    </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PartialConfiguration ModulesDownloadConfig<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description = <span class="hljs-string">'Download and install modules'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode = <span class="hljs-string">'Push'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#        </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PartialConfiguration ServerOSConfig<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[PartialConfiguration]ModulesDownloadConfig"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description = <span class="hljs-string">'Configuration'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode = <span class="hljs-string">'Push'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#   LCM</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">'Push'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshFrequencyMins = <span class="hljs-number">30</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeded = <span class="hljs-variable">$true</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
&nbsp;<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  </span>
MetaPushConfig <span class="hljs-literal">-NodeName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-OutputPath</span> c:\DSC\MetaConfigurations<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#      </span>
<span class="hljs-variable">$cred</span> = (<span class="hljs-built_in">Get-Credential</span> <span class="hljs-literal">-UserName</span> Administrator <span class="hljs-literal">-Message</span> <span class="hljs-string">"Enter admin credentials"</span>)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  LCM   </span>
<span class="hljs-built_in">Set-DscLocalConfigurationManager</span> <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">"c:\DSC\MetaConfigurations"</span> <span class="hljs-literal">-Verbose</span> <span class="hljs-literal">-Force</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  </span>
<span class="hljs-built_in">Publish-DscConfiguration</span> c:\DSC\Configurations\ModulesDownloadConfig <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span>
<span class="hljs-built_in">Publish-DscConfiguration</span> c:\DSC\Configurations\ServerOSConfig <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#    </span>
<span class="hljs-built_in">Start-DscConfiguration</span> <span class="hljs-literal">-UseExisting</span> <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span> <span class="hljs-literal">-Verbose</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im ersten Teil der Konfiguration heißt es </font><font style="vertical-align: inherit;">: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herunterladen und installieren: Laden Sie die erforderlichen Ressourcen herunter und installieren Sie sie. </font><font style="vertical-align: inherit;">Der zweite Teil von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerOSConfig</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bringt den Server in den gewünschten Zustand. </font><font style="vertical-align: inherit;">Was sind die Nuancen der DSC-Unkompliziertheit hier:&nbsp;</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der erste Teil der Konfiguration anfänglich FALSE zurückgegeben und vollständig abgeschlossen hat, wechselt LCM nicht zur zweiten Konfiguration. </font><font style="vertical-align: inherit;">Gemäß der DSC-Logik müssen Sie zuerst den Server in den ersten beschriebenen Zustand bringen.&nbsp;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vorgehensweise: Führen Sie die Konfiguration zweimal aus oder automatisieren Sie den gesamten Prozess in einem Skript.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Server nach der Installation einer Komponente einen Neustart erfordert, wird die Konfiguration erst fortgesetzt, wenn wir den Server selbst neu starten. </font><font style="vertical-align: inherit;">Selbst wenn wir LCM mitteilen, dass RebootNodeIfNeeeded = $ True ist, wartet der Agent während der Konfiguration auf unsere Lösung. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Vorgehensweise</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
: Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xPendingReboot-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ressource wird </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">gerettet</font></a><font style="vertical-align: inherit;"> , die den Registrierungsschlüssel beim Neustart steuert. </font><font style="vertical-align: inherit;">Diese Ressource startet den Server für uns neu.</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine Beispielkonfiguration zum Herunterladen und Installieren von Ressourcen im Szenario „Bloody Enterprise“, wenn der Server keinen Internetzugang hat. </font><font style="vertical-align: inherit;">Es wird das Vorhandensein eines Webservers vorausgesetzt, auf dem vorab heruntergeladene Ressourcen über das http-Protokoll für alle verfügbar sind.</font></font><br>
<br>
<pre><code class="powershell hljs"><font></font>
Configuration ModulesDownloadConfig<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>[]]<span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#   </span>
&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Import-DscResource</span> <span class="hljs-literal">-ModuleName</span> <span class="hljs-string">"PSDesiredStateConfiguration"</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#  </span>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#  IE Security</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registry DisableIEESC<span class="hljs-literal">-Admin</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key = <span class="hljs-string">"HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueName = <span class="hljs-string">"IsInstalled"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueData = <span class="hljs-number">0</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueType = <span class="hljs-string">"DWORD"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registry DisableIEESC<span class="hljs-literal">-User</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key = <span class="hljs-string">"HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A8-37EF-4b3f-8CFC-4F3A74704073}"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueName = <span class="hljs-string">"IsInstalled"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueData = <span class="hljs-string">"0"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueType = <span class="hljs-string">"DWORD"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#    ,    </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File CreateDistribDir {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">"present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DestinationPath = <span class="hljs-string">"C:\Install\PSModules"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Type</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">"Directory"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   NetworkingDsc (&lt;a href="https://www.powershellgallery.com/packages/NetworkingDsc/8.0.0-preview0004"&gt;https://www.powershellgallery.com/packages/NetworkingDsc/8.0.0-preview0004&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script NetworkingDscDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/NetworkingDsc.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\NetworkingDsc"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;<span class="hljs-comment">#   NetworkingDsc  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackNetworkingDsc {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]NetworkingDscDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;<span class="hljs-comment">#   ComputerManagementDsc (&lt;a href="https://www.powershellgallery.com/packages/ComputerManagementDsc/8.2.1-preview0001"&gt;https://www.powershellgallery.com/packages/ComputerManagementDsc/8.2.1-preview0001&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script ComputerManagementDscDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/ComputerManagementDsc.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\ComputerManagementDsc"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   ComputerManagementDsc  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackComputerManagementDsc {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]ComputerManagementDscDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   xPendingReboot (&lt;a href="https://www.powershellgallery.com/packages/xPendingReboot/0.4.0.0"&gt;https://www.powershellgallery.com/packages/xPendingReboot/0.4.0.0&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script xPendingRebootDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/xPendingReboot.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\xPendingReboot"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   xPendingReboot  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackxPendingReboot {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]xPendingRebootDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über Sicherheit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das fette Minus von DSC am Boden ist das Fehlen von Run As Accounts. </font><font style="vertical-align: inherit;">Dieser Mechanismus speichert Konten sicher in Form von Benutzername + "Salt Hash des Passworts" und leitet sie an den Dienst weiter, der für die Authentifizierung verantwortlich ist. </font><font style="vertical-align: inherit;">Ohne diese Funktion kann DSC keine Konten für einen anderen Dienst verwalten. </font><font style="vertical-align: inherit;">Und wenn wir uns unter einem Konto mit besonderen Berechtigungen authentifizieren müssen, ist der Automatisierungsprozess sehr kompliziert. </font><font style="vertical-align: inherit;">Dies ist beispielsweise der Fall, wenn Sie den Server in die Domäne eingeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles zu unserer Verfügung:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anmeldeinformationen werden im Nur-Text-Format gespeichert.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verschlüsselte Anmeldeinformationen funktionieren nur auf dem PC, auf dem sie generiert wurden.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Praxis gibt es mehrere Lösungen.&nbsp;</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Azure Automation Run As Accounts</a>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Azure Automation State Configuration</a>.                     « »  Azure. ,  Run As   On-Premise    .    « »   ,   .<br>
</li>
<li>   DSC  -,          .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Stubs" sind gut, wenn die Vorhersagbarkeit des Serververhaltens sichergestellt werden muss. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In mehreren Fällen führen wir nach der Serverkonfiguration einen „Stub“ durch, wenn wir Folgendes verwendet haben:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neustart (xPendingReboot-Ressource)&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übertragung von Anmeldeinformationen&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">andere Ressourcen, die die Leistung des Servers in Bezug auf ungeplante Neustarts oder Sicherheit beeinträchtigen können.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie dazu Konfigurationen OHNE Blöcke, die die xPendingReboot-Ressource und Konfigurationen mit Anmeldeinformationen enthalten, und veröffentlichen Sie sie erneut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz gilt nur für das Push-Szenario, da Pull ziemlich einfach ist und keine sofortige Konfigurationsänderung impliziert. </font><font style="vertical-align: inherit;">Im nächsten Artikel von</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buldakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir werden uns die Einstellungen und Funktionen der Arbeit im Push- und Pull-Modus genauer ansehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Außerdem werden die Nuancen der DSC-Technologie und die Grenzen ihrer Anwendung am 28. Mai um 18.00 Uhr beim ersten Online-Treffen der DGTL Communications Raiffeisenbank-Community erörtert. </font><font style="vertical-align: inherit;">Während des Meetings werden wir darüber sprechen, wie Sie ELK- und Exchange-Freunde finden und was Microsoft Endpoint Manager in der Geräteverwaltung tun kann. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist die Registrierung für den Mitap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de503056/index.html">23. Mai Online-Pub: Holivarim über Wolken, JS und Handys</a></li>
<li><a href="../de503062/index.html">Реальная стоимость жизни в Кремниевой Долине для разработчика</a></li>
<li><a href="../de503064/index.html">IoT, wo Sie nicht gewartet haben (Teil 3). Erstellen eines Simulationsmodells</a></li>
<li><a href="../de503068/index.html">An der Schnittstelle von Technologie und Wirtschaft: IT-Verantwortliche eröffnen eine neue Universität in der Schweiz</a></li>
<li><a href="../de503070/index.html">Elektrischer Becher. Bau eines verrückten Elektrorollers / Elektrofahrrads</a></li>
<li><a href="../de503074/index.html">Details zum Provider-Paket für Flutter</a></li>
<li><a href="../de503082/index.html">Telegramm als NAS / FTP</a></li>
<li><a href="../de503084/index.html">Lightbend Academy Course Review - Reaktive Architektur</a></li>
<li><a href="../de503086/index.html">Sind Online-Transkriptionsdienste sicher und vertraulich?</a></li>
<li><a href="../de503088/index.html">Wie wir Fracht für Spediteure ausgewählt haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>