<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœ´ï¸ ğŸšª ğŸ¤› å°†Jenkinséƒ¨ç½²ä¸ºä»£ç  ğŸ’‚ğŸ¼ ğŸ–ï¸ ğŸ‘‚ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨æ„ perevã€‚ï¼šè¿™æ˜¯Preplyçš„å·¥ç¨‹åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« çš„ç¿»è¯‘ï¼Œå†…å®¹æ¶‰åŠå¦‚ä½•ä½¿ç”¨é…ç½®ä½œä¸ºè¯¸å¦‚Jenkinsè¿™æ ·çš„æµè¡ŒCI / CDå·¥å…·çš„ä»£ç ã€‚
 
 åœ¨æˆ‘ä»¬å…¬å¸ä¸­ï¼Œæˆ‘ä»¬å°è¯•éµå¾ªâ€œä¸€åˆ‡éƒ½åƒä»£ç â€çš„åšæ³•ï¼Œè¿™ä¸ä»…é€‚ç”¨äºåŸºç¡€ç»“æ„èµ„æºï¼Œè¿˜é€‚ç”¨äºç›‘è§†ï¼ŒJenkinså·¥ä½œç­‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨è¿™ç§åš...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>å°†Jenkinséƒ¨ç½²ä¸ºä»£ç </h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490756/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„ </font><font style="vertical-align: inherit;">perevã€‚ï¼š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preply</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><font style="vertical-align: inherit;">å·¥ç¨‹åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« çš„ç¿»è¯‘ï¼Œ</font><font style="vertical-align: inherit;">å†…å®¹æ¶‰åŠå¦‚ä½•ä½¿ç”¨é…ç½®ä½œä¸ºè¯¸å¦‚Jenkinsè¿™æ ·çš„æµè¡ŒCI / CDå·¥å…·çš„ä»£ç ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬å…¬å¸ä¸­ï¼Œæˆ‘ä»¬å°è¯•éµå¾ªâ€œä¸€åˆ‡éƒ½åƒä»£ç â€çš„åšæ³•ï¼Œè¿™ä¸ä»…é€‚ç”¨äºåŸºç¡€ç»“æ„èµ„æºï¼Œè¿˜é€‚ç”¨äºç›‘è§†ï¼ŒJenkinså·¥ä½œç­‰ã€‚</font><font style="vertical-align: inherit;">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨è¿™ç§åšæ³•æ¥éƒ¨ç½²å’Œæ”¯æŒJenkinsã€‚</font><font style="vertical-align: inherit;">è¿™ä¸ä»…é€‚ç”¨äºæœåŠ¡å™¨å’Œä»£ç†çš„åŸºç¡€ç»“æ„ï¼Œè€Œä¸”è¿˜é€‚ç”¨äºæ’ä»¶ï¼Œè®¿é—®ï¼Œå·¥ä½œä»¥åŠè®¸å¤šå…¶ä»–äº‹æƒ…ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å°è¯•æ‰¾åˆ°ä»¥ä¸‹é—®é¢˜çš„ç­”æ¡ˆï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬çš„è©¹é‡‘æ–¯ä¼šå˜å¾—æ›´ç¨³å®šå—ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥ç»å¸¸æ›´æ”¹æœåŠ¡å™¨å’Œä½œä¸šé…ç½®å—ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è©¹é‡‘æ–¯æ›´æ–°æ˜¯å¦ä»ç„¶ä»¤æˆ‘ä»¬æ„Ÿåˆ°ç—›è‹¦ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥æ§åˆ¶æ‰€æœ‰æ›´æ”¹å—ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœå‡ºç°fakapï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ¢å¤Jenkinså—ï¼Ÿ</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ub/1i/6p/ub1i6pul0mrqvafa5rywah8qml4.png" alt="å›¾ç‰‡"></div><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»‹ç»</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ï¼Œæåˆ°çŸ­è¯­â€œ DevOpså·¥å…·â€æ—¶é¦–å…ˆæƒ³åˆ°çš„æ˜¯CI / CDç³»ç»Ÿã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥ä½¿ç”¨Jenkinsï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æ¯å¤©è¦è¿è¡Œæ•°ç™¾ä¸ªä»»åŠ¡ï¼Œå› æ­¤éœ€è¦æ•°ä»¥ä¸‡è®¡çš„æ„å»ºã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬åœ¨Jenkinsä¸­ä½¿ç”¨çš„æŸäº›åŠŸèƒ½åœ¨å…¶ä»–CI / CDç³»ç»Ÿä¸­ä¸å¯ç”¨æˆ–åŠŸèƒ½æœ‰é™ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/et/s-/ey/ets-ey3e8urpayrksnz8rei9tci.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¸Œæœ›é€šè¿‡ä»£ç å®Œå…¨æ§åˆ¶Jenkinsï¼ŒåŒ…æ‹¬åŸºç¡€ç»“æ„ï¼Œé…ç½®ï¼Œä½œä¸šå’Œæ’ä»¶ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°è¯•åœ¨Kubernetesä¸­è¿è¡ŒJenkinsï¼Œä½†æ˜¯å®ƒä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œè€Œä¸”ç”±äºå…¶</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½“ç³»ç»“æ„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› æ­¤ä¸å®¹æ˜“æ‰©å±•</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/60/ss/t9/60sst9mxzbsp-0idvkzip2p11ti.png" alt="å›¾ç‰‡"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™å°†è¢«è®¨è®º</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkinsçš„åŸºç¡€æ¶æ„</font></font></h2><br>
<img src="https://habrastorage.org/webt/c1/yk/2c/c1yk2cvior_za5qtfs41ngouiwk.png" alt="å›¾ç‰‡" align="left" width="50%"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬ä½¿ç”¨AWSå¹¶ä½¿ç”¨Terraformå’Œå…¶ä»–å“ˆå¸Œå·¥å…·ï¼ˆä¾‹å¦‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Packer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vaultï¼‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®æ•´ä¸ªåŸºç¡€æ¶æ„</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬å°è¯•åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨Jenkinsï¼Œ</font><font style="vertical-align: inherit;">å¹¶ä¸”åœ¨æ‰©å±•</font></font><abbr title="æŒç»­æ‰¹é‡ç´¢èµ”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVC</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œèµ„æºå’Œè®¾è®¡æ¬ ä½³çš„ä½“ç³»ç»“æ„æ–¹é¢</font><font style="vertical-align: inherit;">é‡åˆ°äº†ä¸€äº›é—®é¢˜</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨å¸¸è§„çš„AWSèµ„æºï¼šEC2å®ä¾‹ï¼ŒSSLè¯ä¹¦ï¼Œå¹³è¡¡å™¨ï¼ŒCloudfrontç­‰ã€‚æ“ä½œç³»ç»Ÿæ˜ åƒï¼ˆ</font></font><abbr title="äºšé©¬é€Šæœºå™¨æ˜ åƒ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AMI</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ä½¿ç”¨Packerè¿›è¡Œé…ç½®ï¼ŒPackerä¸Terraformå’ŒVaultå®Œç¾é›†æˆã€‚</font></font><br>
<br>
<pre><code class="bash hljs">{
    <span class="hljs-string">"variables"</span>: {
        <span class="hljs-string">"aws_access_key"</span>: <span class="hljs-string">"{{vault `packer/aws_access_key_id` `key`}}"</span>,
        <span class="hljs-string">"aws_secret_key"</span>: <span class="hljs-string">"{{vault `packer/aws_secret_access_key` `key`}}"</span>,
        <span class="hljs-string">"aws_region"</span>: <span class="hljs-string">"{{vault `packer/aws_region` `key`}}"</span>,
        <span class="hljs-string">"vault_token"</span>: <span class="hljs-string">"{{env `VAULT_TOKEN`}}"</span><font></font>
    },<font></font>
    <span class="hljs-string">"builders"</span>: [{
        <span class="hljs-string">"access_key"</span>: <span class="hljs-string">"{{ user `aws_access_key` }}"</span>,
        <span class="hljs-string">"secret_key"</span>: <span class="hljs-string">"{{ user `aws_secret_key` }}"</span>,
        <span class="hljs-string">"region"</span>: <span class="hljs-string">"{{ user `aws_region` }}"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"amazon-ebs"</span>,
        <span class="hljs-string">"communicator"</span>: <span class="hljs-string">"ssh"</span>,
        <span class="hljs-string">"ssh_username"</span>: <span class="hljs-string">"ubuntu"</span>,
        <span class="hljs-string">"instance_type"</span>: <span class="hljs-string">"c5.xlarge"</span>,
        <span class="hljs-string">"security_group_id"</span>: <span class="hljs-string">"sg-12345"</span>,
        <span class="hljs-string">"iam_instance_profile"</span>: <span class="hljs-string">"packer-role-profile"</span>,
        <span class="hljs-string">"ami_name"</span>: <span class="hljs-string">"packer-jenkins-master-{{timestamp}}"</span>,
        <span class="hljs-string">"ami_description"</span>: <span class="hljs-string">"Jenkins master image"</span>,
        <span class="hljs-string">"launch_block_device_mappings"</span>: [{
            <span class="hljs-string">"device_name"</span>: <span class="hljs-string">"/dev/sda1"</span>,
            <span class="hljs-string">"volume_size"</span>: 50,
            <span class="hljs-string">"volume_type"</span>: <span class="hljs-string">"gp2"</span>,
            <span class="hljs-string">"delete_on_termination"</span>: <span class="hljs-literal">true</span><font></font>
        }],<font></font>
        <span class="hljs-string">"source_ami_filter"</span>: {
            <span class="hljs-string">"filters"</span>: {
                <span class="hljs-string">"virtualization-type"</span>: <span class="hljs-string">"hvm"</span>,
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"ubuntu/images/*ubuntu-bionic-18.04-amd64-server-*"</span>,
                <span class="hljs-string">"root-device-type"</span>: <span class="hljs-string">"ebs"</span><font></font>
            },<font></font>
            <span class="hljs-string">"owners"</span>: [<span class="hljs-string">"099720109477"</span>],
            <span class="hljs-string">"most_recent"</span>: <span class="hljs-literal">true</span><font></font>
        }<font></font>
    }],<font></font>
    <span class="hljs-string">"provisioners"</span>: [{
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"shell"</span>,
        <span class="hljs-string">"environment_vars"</span>: [<span class="hljs-string">"VAULT_TOKEN={{ user `vault_token` }}"</span>],
        <span class="hljs-string">"scripts"</span>: [<span class="hljs-string">"packer_bootstrap.sh"</span>]<font></font>
    }]<font></font>
}</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Packerä¸­OSæ˜ åƒçš„é…ç½®ç¤ºä¾‹</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ï¼Œè¯¥æ–‡ä»¶åˆ</font></font><code>packer_bootstrap.sh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…å«ä¸€ç»„å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ç”¨äºåœ¨æ˜ åƒä¸­å®‰è£…è½¯ä»¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…Dockerï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -composeå’Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">vaultenv</font></a><font style="vertical-align: inherit;">æˆ–Datadog-agentè¿›è¡Œç›‘è§†ã€‚å…³äºæ­¤å›¾åƒçš„åŸºç¡€æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Terraformï¼ŒCloudformationï¼ŒPulumiç”šè‡³Ansibleã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/db/8r/e5/db8re5y3_y58pzevkiyxtcpkpow.png"></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ªå¯èƒ½çš„Jenkins AWSåŸºç¡€è®¾æ–½ç¤ºä¾‹ï¼š</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç”¨æˆ·é€šè¿‡å†…éƒ¨å¹³è¡¡å™¨ç™»å½•Jenkinsï¼ŒGithubæŒ‚é’©é€šè¿‡å¤–éƒ¨å¹³è¡¡å™¨è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†Jenkinsä¸GitHubé›†æˆåœ¨ä¸€èµ·ï¼Œå› æ­¤å¿…é¡»å¯ä»¥ä»Internetè®¿é—®æŸäº›æœåŠ¡å™¨é“¾æ¥ã€‚</font><font style="vertical-align: inherit;">è¿™é‡Œæœ‰å¾ˆå¤šä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼ˆä¾‹å¦‚ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPåœ°å€</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">URL</font></a><font style="vertical-align: inherit;">æˆ–ä»¤ç‰Œç­‰</font><font style="vertical-align: inherit;">çš„ç™½åå•</font><font style="vertical-align: inherit;">ï¼‰ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç»“åˆä½¿ç”¨å…è®¸çš„URLå’Œä»¤ç‰ŒéªŒè¯ã€‚</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œåœ¨å®Œæˆæ“ä½œä¹‹åï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰å¸¦æœ‰ç»„è£…å¥½çš„OSæ˜ åƒçš„ç°æˆåŸºç¡€æ¶æ„ï¼Œå¹¶ä¸”å…·æœ‰ç›‘è§†å’Œè®¿é—®å…¬å¸æœºå¯†å­˜å‚¨çš„èƒ½åŠ›ã€‚</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬ä½¿ç”¨Dockerå®‰è£…JenkinsåŠå…¶æ’ä»¶</font></font></h2><br>
<img src="https://habrastorage.org/webt/jf/ky/dq/jfkydqsdjfx_fyk4431emwtyify.png" alt="å›¾ç‰‡" align="left" width="50%"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®‰è£…JenkinsåŠå…¶æ’ä»¶ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä¸€ç›´åœ¨æ›´æ–°æ’ä»¶æ–¹é¢é‡åˆ°é—®é¢˜ï¼Œå› æ­¤ä¸»è¦ç›®æ ‡æ˜¯åœ¨ä»£ç ä¸­æ¸…æ¥šåœ°æ˜¾ç¤ºå·²å®‰è£…çš„æ’ä»¶åŠå…¶ç‰ˆæœ¬ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡ŒDockerå°†ä¸ºæˆ‘ä»¬æä¾›å¸®åŠ©ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è·å–ç°æˆçš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¢„å®‰è£…Dockeræ˜ åƒ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å°†å…¶ç”¨ä½œæˆ‘ä»¬é…ç½®çš„åŸºç¡€ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">FROM jenkins/jenkins:2.215<font></font>
<font></font>
ENV CASC_JENKINS_CONFIG /jenkins_configs<font></font>
USER root<font></font>
<font></font>
<span class="hljs-comment">#   </span><font></font>
RUN apt update &amp;&amp; \<font></font>
    apt install -y python3 python3-pip &amp;&amp; \<font></font>
    pip3 install awscli jenkins-job-builder jjb-reactive-choice-param --no-cache-dir<font></font>
<font></font>
USER jenkins<font></font>
VOLUME /jenkins_configs<font></font>
VOLUME /var/jenkins_home<font></font>
<font></font>
<span class="hljs-comment">#  </span><font></font>
COPY plugins.txt /usr/share/jenkins/ref/<font></font>
RUN /usr/<span class="hljs-built_in">local</span>/bin/install-plugins.sh &lt; /usr/share/jenkins/ref/plugins.txt</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dockerfile</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨Dockeræ˜ åƒä¸­ï¼Œå®‰è£…äº†ä¸€äº›è½¯ä»¶åŒ…ï¼Œå¦‚Job Builderï¼Œæˆ‘å°†åœ¨åé¢è¿›è¡Œè®¨è®ºï¼Œè¿˜æ³¨å†Œäº†å­˜å‚¨åº“ï¼Œå¹¶å®‰è£…äº†æ–‡ä»¶ä¸­æŒ‡å®šçš„æ’ä»¶</font></font><code>plugins.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="java hljs">Jenkins.instance.pluginManager.plugins.each{<font></font>
  plugin -&gt;<font></font>
    println (<span class="hljs-string">"${plugin.getShortName()}:${plugin.getVersion()}"</span>)<font></font>
}</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯ä»¥é€šè¿‡å•å‡»é“¾æ¥</font></font><code>https://our-jenkins-url/script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å°†è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶ä¸­</font><font style="vertical-align: inherit;">æ¥è·å–Jenkinsä¸­å·²å®‰è£…æ’ä»¶çš„åˆ—è¡¨</font></font><code>plugins.txt</code></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã€‚æœ€åæ˜¯docker-composeçš„é…ç½®ï¼Œå®ƒå°†åœ¨Dockerä¸­è¿è¡ŒJenkinsã€‚</font></font><br>
<br>
<pre><code class="bash hljs">version: <span class="hljs-string">"3"</span><font></font>
services:<font></font>
  jenkins:<font></font>
    build: .<font></font>
    container_name: jenkins<font></font>
    restart: always<font></font>
    ports:<font></font>
      - <span class="hljs-string">"50000:50000"</span>
      - <span class="hljs-string">"8080:8080"</span><font></font>
    volumes:<font></font>
      - ./configs/:/jenkins_configs/:ro<font></font>
      - ./jenkins_home/:/var/jenkins_home/:rw<font></font>
    environment:<font></font>
      - VAULT_TOKEN<font></font>
      - GITHUB_TOKEN<font></font>
      - AWS_ACCESS_KEY_ID<font></font>
      - AWS_SECRET_ACCESS_KEY<font></font>
      - JAVA_OPTS=-Xms4G -Xmx8G -Xloggc:/var/jenkins_home/gc-%t.log -XX:NumberOfGCLogFiles=5 -XX:+UseGCLogFileRotation -XX:GCLogFileSize=20m -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintHeapAtGC -XX:+PrintGCCause -XX:+PrintTenuringDistribution -XX:+PrintReferenceGC -XX:+PrintAdaptiveSizePolicy -XX:+UseG1GC -XX:+ExplicitGCInvokesConcurrent -XX:+ParallelRefProcEnabled -XX:+UseStringDeduplication -XX:+UnlockExperimentalVMOptions -XX:G1NewSizePercent=20 -XX:+UnlockDiagnosticVMOptions -XX:G1SummarizeRSetStatsPeriod=1<font></font>
volumes:<font></font>
  configs:<font></font>
    driver: <span class="hljs-built_in">local</span><font></font>
  jenkins_home:<font></font>
    driver: <span class="hljs-built_in">local</span></code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬è¿˜ä½¿ç”¨vaultenvä¼ªé€ Vaultçš„æœºå¯†ï¼Œ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¯·æ³¨æ„ä¸€äº›Javaé€‰é¡¹å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œåƒåœ¾æ”¶é›†å’Œèµ„æºé™åˆ¶ã€‚</font><font style="vertical-align: inherit;">æ­¤</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ç« æ˜¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éå¸¸é…·çš„æœ‰å…³è°ƒæ•´è©¹é‡‘æ–¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°éƒ¨ç½²Jenkinsçš„å‰¯æœ¬ï¼Œå¹¶å°è¯•ä½¿ç”¨æ–°ç‰ˆæœ¬çš„æœåŠ¡å™¨å’Œæ’ä»¶ã€‚</font><font style="vertical-align: inherit;">å¾ˆèˆ’æœ</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†å…¨æ–°å®‰è£…çš„Jenkinså’Œæ’ä»¶ï¼Œå¯ä»¥è½»æ¾åœ¨äº§å“ä¸­å¯åŠ¨å®ƒã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬ä¸ºå¥¹æ·»åŠ æ›´å¤šé…ç½®ã€‚</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†Jenkinsé…ç½®ä¸ºä»£ç ï¼ˆJCaSCï¼‰æ’ä»¶ä»¥è¿›è¡ŒæœåŠ¡å™¨é…ç½®</font></font></h2><br>
<img src="https://habrastorage.org/webt/ox/01/av/ox01avpfumliyeoeakqiy_vlys4.png" alt="å›¾ç‰‡" align="left" width="50%"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šå¸¸ï¼Œæœ‰ä¸€ä¸ªåä¸ºJenkins Configuration as Codeï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JCasC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">çš„æ’ä»¶</font><font style="vertical-align: inherit;">ï¼Œå®ƒå…è®¸æ‚¨ä»¥äººç±»å¯è¯»çš„æ–‡æœ¬æ ¼å¼å­˜å‚¨æœåŠ¡å™¨é…ç½®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨æ­¤æ’ä»¶ï¼Œæ‚¨å¯ä»¥æè¿°å®‰å…¨æ€§é…ç½®ï¼Œè®¿é—®æƒé™ï¼Œæ’ä»¶è®¾ç½®ï¼Œä»£ç†ï¼Œé€‰é¡¹å¡ç­‰ç­‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥é…ç½®ä»¥YAMLæ ¼å¼è¡¨ç¤ºï¼Œåˆ†ä¸º5ä¸ªå—ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡­æ®ï¼ˆç³»ç»Ÿç§˜å¯†çš„æè¿°ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jenkinsï¼ˆæˆæƒå’Œäº‘è®¾ç½®ï¼Œå…¨å±€è®¾ç½®ï¼Œä»£ç†è¯´æ˜ï¼Œä¸€äº›å®‰å…¨è®¾ç½®å’Œé€‰é¡¹å¡ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰å…¨æ€§ï¼ˆå…¨å±€å®‰å…¨æ€§è®¾ç½®ï¼Œä¾‹å¦‚å…è®¸çš„è„šæœ¬ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å·¥å…·ï¼ˆç”¨äºé…ç½®gitï¼Œallureç­‰çš„å¤–éƒ¨å·¥å…·ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœªåˆ†ç±»ï¼ˆå…¶ä»–è®¾ç½®ï¼Œä¾‹å¦‚ä¸Slacké›†æˆï¼‰</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/1n/va/0h/1nva0huln0-n3ah5qupoiofepku.png" alt="å›¾ç‰‡" width="49%"><img src="https://habrastorage.org/webt/os/_m/vz/os_mvzpsvnq8fhkov_sxuayde2s.png" alt="å›¾ç‰‡" width="49%"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥æ’ä»¶æ”¯æŒä»ç°æœ‰çš„Jenkinså®‰è£…ä¸­å¯¼å…¥é…ç½®ï¼Œ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ­¤å¤–ï¼Œè¯¥æ’ä»¶è¿˜æä¾›äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹å„ç§ç§˜å¯†æä¾›ç¨‹åºçš„æ”¯æŒ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»…ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">credentials:<font></font>
  system:<font></font>
    domainCredentials:<font></font>
    - credentials:<font></font>
      - usernamePassword:<font></font>
          description: <span class="hljs-string">"AWS credentials"</span>
          id: <span class="hljs-string">"aws-creds"</span>
          password: <span class="hljs-variable">${AWS_SECRET_ACCESS_KEY}</span><font></font>
          scope: GLOBAL<font></font>
          username: <span class="hljs-variable">${AWS_ACCESS_KEY_ID}</span><font></font>
      - string:<font></font>
          description: <span class="hljs-string">"Vault token"</span>
          id: <span class="hljs-string">"vault-token"</span><font></font>
          scope: GLOBAL<font></font>
          secret: <span class="hljs-variable">${VAULT_TOKEN}</span>
      ...</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯ç§˜å¯†ï¼Œå¦‚ä½•æ‰èƒ½åŠ ä»¥è¯´æ˜ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘ä»¬è¿˜ä½¿ç”¨äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äºšé©¬é€Šçš„EC2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ’ä»¶</font><font style="vertical-align: inherit;">åœ¨AWSæé«˜å‰‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶æè¿°å…¶é…ç½®ã€‚</font><font style="vertical-align: inherit;">çŸ©é˜µæˆæƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ä»£ç é…ç½®ç”¨æˆ·è®¿é—®æƒé™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">jenkins:<font></font>
  authorizationStrategy:<font></font>
    projectMatrix:<font></font>
      permissions:<font></font>
      - <span class="hljs-string">"Overall/Administer:ivan.a@example.org"</span>
      - <span class="hljs-string">"Credentials/View:petr.d@example.org"</span><font></font>
      ...<font></font>
  clouds:<font></font>
  - amazonEC2:<font></font>
      cloudName: <span class="hljs-string">"AWS"</span>
      privateKey: <span class="hljs-variable">${EC2_PRIVATE_KEY}</span>
      region: <span class="hljs-string">"<span class="hljs-variable">${AWS_REGION}</span>"</span><font></font>
      templates:<font></font>
      - ami: <span class="hljs-string">"ami-12345678"</span><font></font>
        amiType:<font></font>
          unixData:<font></font>
            sshPort: <span class="hljs-string">"22"</span><font></font>
        connectionStrategy: PRIVATE_IP<font></font>
        deleteRootOnTermination: <span class="hljs-literal">true</span>
        description: <span class="hljs-string">"jenkins_agent"</span>
        idleTerminationMinutes: <span class="hljs-string">"20"</span>
        instanceCapStr: <span class="hljs-string">"100"</span><font></font>
        minimumNumberOfInstances: 0<font></font>
        mode: EXCLUSIVE<font></font>
        numExecutors: 1<font></font>
        remoteAdmin: <span class="hljs-string">"jenkins"</span>
        remoteFS: <span class="hljs-string">"/home/jenkins"</span>
        securityGroups: <span class="hljs-string">"sg-12345678"</span>
        subnetId: <span class="hljs-string">"subnet-12345678"</span>
        <span class="hljs-built_in">type</span>: C52xlarge<font></font>
        ...</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»£ç†å’Œè®¿é—®</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
çš„</font><i><font style="vertical-align: inherit;">æè¿°</font></i><font style="vertical-align: inherit;">è¯¥æ’ä»¶æ”¯æŒæˆ‘ä»¬ä½¿ç”¨çš„å…¶ä»–ä¸€äº›åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">å€ŸåŠ©äº•äº•æœ‰æ¡çš„Jenkinsæœ¬åœ°æµ‹è¯•æµç¨‹ï¼Œæ‚¨å¯ä»¥æœ‰æ•ˆåœ°å‘ç°å¹¶ä¿®å¤é”™è¯¯ï¼Œç„¶åå†å°†å…¶æ½œåœ¨åœ°çº³å…¥Jenkinsé”€å”®ã€‚</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨æˆ‘ä»¬æœ‰äº†æœåŠ¡å™¨çš„å¯é‡ç°é…ç½®ï¼Œå¯¹äºå°å‹æœåŠ¡å™¨ï¼ˆå³å·¥ä½œï¼‰ï¼Œæƒ…å†µä»ç„¶å¦‚æ­¤ã€‚</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†Job Builderç”¨äºè‡ªç”±å¼é¡¹ç›®</font></font></h2><br>
<img src="https://habrastorage.org/webt/jf/ky/dq/jfkydqsdjfx_fyk4431emwtyify.png" alt="å›¾ç‰‡" align="left" width="50%"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è©¹é‡‘æ–¯ï¼ˆJenkinsï¼‰ä¸­æœ‰å‡ ç§åˆ›å»ºè‡ªç”±å¼å·¥ä½œçš„æ–¹æ³•ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ç½‘ç»œç•Œé¢ï¼ˆæœ€ç®€å•çš„æ–¹æ³•ï¼Œç»§ç»­å‰è¿›ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›´æ¥ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST API</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Job DSL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–JJBåŒ…è£…å™¨ä¹‹</font><font style="vertical-align: inherit;">ç±»çš„æ’ä»¶</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkins Job Builder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆJJBï¼‰å…è®¸æ‚¨ä½¿ç”¨YAMLæˆ–JSONé…ç½®ä½œä¸šã€‚</font><font style="vertical-align: inherit;">è€Œä¸”éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºæ‚¨å¯ä»¥é…ç½®æ‰€æœ‰ä½œä¸šå¹¶å°†å…¶çŠ¶æ€å­˜å‚¨åœ¨æ¡ä»¶gitä¸­ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨JJBä¸ºCI / CDå·¥å…·æ„å»ºCI / CDæµç¨‹ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">.<font></font>
â”œâ”€â”€ config.ini<font></font>
â”œâ”€â”€ <span class="hljs-built_in">jobs</span><font></font>
â”‚   â”œâ”€â”€ Job1.yaml<font></font>
â”‚   | ...<font></font>
â”‚   â””â”€â”€ Job2.yaml<font></font>
â””â”€â”€ scripts<font></font>
    â”œâ”€â”€ job1.sh<font></font>
    | ...<font></font>
    â””â”€â”€ job2.sh</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯ï¼ˆç®€åŒ–çš„ï¼‰FSä¸Šä½œä¸šçš„é…ç½®ç»“æ„çš„å¤–è§‚</font></font></i><br>
<br>
<pre><code class="bash hljs">- job:<font></font>
    name: Job1<font></font>
    project-type: freestyle<font></font>
    auth-token: mytoken<font></font>
    disabled: <span class="hljs-literal">false</span>
    concurrent: <span class="hljs-literal">false</span><font></font>
    node: jenkins_agent<font></font>
    triggers:<font></font>
      - timed: <span class="hljs-string">'0 3 * * *'</span><font></font>
    builders:<font></font>
      - shell:<font></font>
          !include-raw: ../scripts/job1.sh</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™å°±æ˜¯æ–‡ä»¶ä¸­å·¥ä½œçš„å¤–è§‚</font></font><code>Job1.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè„šæœ¬ä¸­çš„æ­¥éª¤ï¼Œ</font></font><code>job1.sh</code></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> JJB </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®æ–‡ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹Ÿçœ‹èµ·æ¥å¾ˆç®€å•ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">$ cat config.ini<font></font>
[job_builder]<font></font>
ignore_cache=True<font></font>
exclude=<span class="hljs-built_in">jobs</span>/Job2<font></font>
<font></font>
[jenkins]<font></font>
url=https://jenkins.example.org<font></font>
user=some_user<font></font>
password=some_password<font></font>
<font></font>
$ jenkins-jobs --conf config.ini <span class="hljs-built_in">test</span> -r <span class="hljs-built_in">jobs</span>/<font></font>
$ jenkins-jobs --conf config.ini update -r <span class="hljs-built_in">jobs</span>/</code></pre><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥ä½¿ç”¨â€œæŒ‰</font></font><code>jenkins-jobs update</code></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è‡ªèº«â€ </font><i><font style="vertical-align: inherit;">å‘½ä»¤è½»æ¾å¯åŠ¨æ–°æ›´æ”¹çš„åº”ç”¨ç¨‹åºï¼Œ</font></i><font style="vertical-align: inherit;">ä¸ºå…¶åˆ›å»ºä»¤ç‰Œçš„ç”¨æˆ·å¿…é¡»å…·æœ‰åˆ›å»ºå’Œé…ç½®ä½œä¸šçš„é€‚å½“ç‰¹æƒã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬åªéœ€è¦åº”ç”¨ä¸€ä¸ªåˆå§‹åŒ–ä½œä¸šï¼ˆç§å­ä½œä¸šï¼‰ï¼Œå®ƒå°†ä½¿ç”¨Jenkinsä¸­çš„JJBåº”ç”¨æ›´æ”¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒJJBå¹¶ä¸æ˜¯â€œé“¶å¼¹â€ï¼Œå› ä¸ºä¸æ”¯æŒæŸäº›ä¸æ˜¯å¾ˆæµè¡Œçš„æ’ä»¶ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§éå¸¸çµæ´»çš„å·¥å…·ï¼Œç”¨äºåœ¨ä»£ç ä¸­å­˜å‚¨ä½œä¸šï¼ŒåŒ…æ‹¬</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¯æŒ</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜è¦</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æˆ‘ä»¬å·²ç»åˆ°äº†æœ¬æ–‡çš„ç»“å°¾ï¼Œæˆ‘æƒ³å›åˆ°å¼€å¤´ï¼Œå¹¶å›ç­”å¼€å¤´æå‡ºçš„é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥å¯¹æå‡ºçš„æ¯ä¸ªé—®é¢˜å›ç­”â€œæ˜¯â€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æ·±å…¥ç ”ç©¶è®¾ç½®æŸäº›æŠ€æœ¯æˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•æ­£ç¡®é…ç½®Jenkins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å¤æ‚æ€§</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬åªæ˜¯åˆ†äº«æˆ‘ä»¬çš„ç»éªŒï¼Œè¿™ä¹Ÿå¯èƒ½å¯¹æ‚¨æœ‰ç”¨ã€‚</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ–‡ç« ä¸­ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨â€œä½œä¸šâ€ä¸€è¯ï¼ˆè‹±æ–‡ï¼Œâ€œ Jobâ€ï¼Œâ€œ taskâ€ï¼‰ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œå¬èµ·æ¥æ¯”ä¸€èˆ¬CI / CDæˆ–Jenkinsä¸­çš„â€œä»»åŠ¡â€æ›´ç†Ÿæ‚‰ã€‚</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490742/index.html">æœºå™¨äººæŠ€æœ¯çš„æ–°æ—¶ä»£å·²ç»å¼€å§‹</a></li>
<li><a href="../zh-CN490746/index.html">Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ² Ğ¯Ğ½Ğ´ĞµĞºÑ.Ğ¢Ğ°ĞºÑĞ¸: ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ¿Ğ¾ÑÑ‚ Ğ½Ğ° ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½ÑƒÑ Ñ‚ĞµĞ¼Ñƒ</a></li>
<li><a href="../zh-CN490748/index.html">å¼€å‘äººå‘˜çš„ä»»åŠ¡ï¼Œæˆ–è€…æˆ‘ä»¬å¦‚ä½•åœ¨æ²¡æœ‰ä¾›åº”å•†çš„æƒ…å†µä¸‹æ‰«ææ‰‹æŒå¼æ‰«æä»ª</a></li>
<li><a href="../zh-CN490750/index.html">ç±³å“ˆä¼Šå°”ï¼ˆMikhail Salosinï¼‰ã€‚Golangèšä¼šã€‚åœ¨Watch +åº”ç”¨ç¨‹åºçš„åç«¯ä¸­ä½¿ç”¨Go</a></li>
<li><a href="../zh-CN490754/index.html">Visual Studioä»£ç ä»£ç ç¼–è¾‘å™¨ã€‚ä¸ºåˆå­¦è€…è®¾ç½®å’Œå®‰è£…æ’ä»¶çš„æœ€è¯¦ç»†æŒ‡å—</a></li>
<li><a href="../zh-CN490758/index.html">æ•°å­¦å®¶è¯æ˜äº†æ¹æµçš„æ™®éå®šå¾‹</a></li>
<li><a href="../zh-CN490760/index.html">å°„çº¿æŠ•å°„è§†è§‰æœç´¢ï¼ˆRCVSï¼‰ã€‚æŸ¥æ‰¾å‡ ä½•å½¢çŠ¶ç›¸ä¼¼çš„3Dæ¨¡å‹çš„ç®€å•å¿«é€Ÿç®—æ³•</a></li>
<li><a href="../zh-CN490762/index.html">å¦‚ä½•é¢„æµ‹æœºç¥¨ä»·æ ¼ï¼Ÿ</a></li>
<li><a href="../zh-CN490764/index.html">Grafanaï¼ŒInfluxDBï¼Œä¸¤ä¸ªæ ‡ç­¾å’Œä¸€ä¸ªé‡ã€‚æˆ–å¦‚ä½•è®¡ç®—å­ç»„çš„æ€»å’Œï¼Ÿ</a></li>
<li><a href="../zh-CN490766/index.html">å¦‚ä½•ç†è§£åˆå­¦è€…ï¼Œä¸ºæœŸæœ›çš„èŒä¸šé€‰æ‹©å“ªç§è¯­è¨€ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>