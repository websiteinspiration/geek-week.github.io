<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õµÔ∏è üíï ‚ôàÔ∏è 5 mejores pr√°cticas para usar ganchos React en producci√≥n ü•î üë©üèø‚Äçü§ù‚Äçüë®üèº ü§´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El autor del art√≠culo, cuya traducci√≥n publicamos hoy, dice que commercetools adopt√≥ los ganchos React a principios de 2019, en el momento en que apar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>5 mejores pr√°cticas para usar ganchos React en producci√≥n</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/494712/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El autor del art√≠culo, cuya traducci√≥n </font><font style="vertical-align: inherit;">publicamos </font><font style="vertical-align: inherit;">hoy, dice que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commercetools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adopt√≥ los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ganchos React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a principios de 2019, en el momento en que aparecieron en React 16.8.0. </font><font style="vertical-align: inherit;">Desde entonces, los programadores de la compa√±√≠a han estado procesando constantemente su c√≥digo, traduci√©ndolo en ganchos. </font><font style="vertical-align: inherit;">Los ganchos de reacci√≥n le permiten usar el estado del componente y otras caracter√≠sticas de reacci√≥n sin usar clases. </font><font style="vertical-align: inherit;">Al usar ganchos, puede, cuando trabaje con componentes funcionales, "conectarse" a los eventos del ciclo de vida del componente y responder a los cambios en su estado.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/dp/fq/jr/dpfqjrae_1gxg8w2fhzc6izgffa.jpeg"></a><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente sobre los resultados de implementar ganchos</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si en pocas palabras hablamos de lo que nos dieron los ganchos, resulta que ayudaron a simplificar la base del c√≥digo al extraer la l√≥gica de los componentes y facilitar la composici√≥n de diferentes capacidades. </font><font style="vertical-align: inherit;">Adem√°s, el uso de ganchos ha llevado al hecho de que hemos aprendido mucho. </font><font style="vertical-align: inherit;">Por ejemplo, c√≥mo estructurar mejor su c√≥digo a trav√©s de la mejora continua de la funcionalidad existente. </font><font style="vertical-align: inherit;">Estamos seguros de que aprenderemos muchas m√°s cosas interesantes mientras continuamos trabajando con los ganchos React.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortalezas de la implementaci√≥n del gancho</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es lo que nos dio la introducci√≥n de ganchos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejora de la legibilidad del c√≥digo. </font><font style="vertical-align: inherit;">Esto es posible gracias al uso de √°rboles de componentes m√°s peque√±os que antes. </font><font style="vertical-align: inherit;">La creaci√≥n de tales √°rboles de componentes se ve facilitada por nuestro deseo de abandonar las propiedades de representaci√≥n y los componentes de orden superior.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejora de las capacidades de depuraci√≥n de c√≥digo. </font><font style="vertical-align: inherit;">Tuvimos a nuestra disposici√≥n una representaci√≥n visual mejorada del c√≥digo e informaci√≥n adicional de depuraci√≥n proporcionada por las herramientas de desarrollador React.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejora de la modularidad del proyecto. </font><font style="vertical-align: inherit;">Debido a la naturaleza funcional de los ganchos, se ha simplificado el proceso de creaci√≥n y aplicaci√≥n de l√≥gica adecuada para uso repetido.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Separaci√≥n de responsabilidades. </font><font style="vertical-align: inherit;">Los componentes de reacci√≥n son responsables de la apariencia de los elementos de la interfaz, y los ganchos proporcionan acceso a la l√≥gica del programa encapsulado.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora queremos compartir nuestras recomendaciones sobre el uso de ganchos en la producci√≥n.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Recupere oportunamente los ganchos de los componentes y cree ganchos personalizados</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzar a usar ganchos en componentes funcionales es bastante f√°cil. </font><font style="vertical-align: inherit;">Por ejemplo, aplicamos r√°pidamente en alg√∫n lugar </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en alg√∫n lugar, </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y continuamos haciendo nuestro trabajo. </font><font style="vertical-align: inherit;">Sin embargo, este enfoque no permite aprovechar al m√°ximo todas las oportunidades que los ganchos son capaces de brindar. </font><font style="vertical-align: inherit;">Presentando </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en forma de un peque√±o </font></font><code>use&lt;StateName&gt;State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- en la forma </font></font><code>use&lt;EffectName&gt;Effect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pudimos lograr lo siguiente:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los componentes son m√°s peque√±os que con ganchos regulares.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los ganchos se pueden reutilizar en varios componentes.</font></font></li>
<li>,         React,  ,    . ,   <code>State&lt;StateName&gt;</code>   <code>State</code>.        <code>React.useState</code>,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recuperar ganchos tambi√©n contribuye al hecho de que la l√≥gica reutilizable y compartida es m√°s visible en varias partes de la aplicaci√≥n. La l√≥gica similar o duplicada es m√°s dif√≠cil de notar si solo usa ganchos integrados en el c√≥digo del componente. Los ganchos resultantes pueden ser peque√±os y contener muy poco c√≥digo </font></font><code>useToggleState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Por otro lado, los ganchos m√°s grandes, como </font></font><code>useProductFetcher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ahora pueden incluir m√°s funcionalidad. Ambos nos ayudaron a simplificar la base del c√≥digo al reducir el tama√±o de los componentes React.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente ejemplo crea un peque√±o gancho React dise√±ado para controlar la selecci√≥n de elementos. </font><font style="vertical-align: inherit;">Los beneficios de encapsular esta funcionalidad se hacen evidentes inmediatamente despu√©s de darse cuenta de la frecuencia con la que se usa dicha l√≥gica en la aplicaci√≥n. </font><font style="vertical-align: inherit;">Por ejemplo, para seleccionar un conjunto de pedidos de una lista.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-keyword">const</span> useSelection = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> [selected, select]<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, select] = useSelection()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Acerca de los beneficios de React.useDebugValue</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√°ndar </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">React.useDebugValue se</font></a><font style="vertical-align: inherit;"> refiere a las caracter√≠sticas poco conocidas de React. </font><font style="vertical-align: inherit;">Este enlace puede ayudar al desarrollador durante la depuraci√≥n del c√≥digo; puede ser √∫til para usarlo en enlaces dise√±ados para compartir. </font><font style="vertical-align: inherit;">Estos son ganchos de usuario que se utilizan en muchos componentes de la aplicaci√≥n. </font><font style="vertical-align: inherit;">Sin embargo, no se </font></font><code>useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomienda usarlo en todos los enlaces de usuario, ya que los enlaces integrados ya registran valores de depuraci√≥n est√°ndar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine crear un enlace personalizado dise√±ado para tomar una decisi√≥n sobre la necesidad de habilitar alguna funci√≥n de la aplicaci√≥n. </font><font style="vertical-align: inherit;">Los datos del estado de la aplicaci√≥n en los que se basa la decisi√≥n pueden provenir de diferentes fuentes. </font><font style="vertical-align: inherit;">Se pueden almacenar en un objeto de contexto React, cuyo acceso se organiza a trav√©s de √©l </font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ayudar al desarrollador en la depuraci√≥n, mientras trabaja con las herramientas de desarrollador React, puede ser √∫til conocer el nombre del indicador analizado ( </font></font><code>flagName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) y la variante del valor del indicador ( </font></font><code>flagVariation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">En este caso, usar un gancho peque√±o puede ayudarnos a </font></font><code>React.useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useFeatureToggle</span>(<span class="hljs-params">flagName, flagVariation = true</span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> flags = React.useContext(FlagsContext)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> isFeatureEnabled = getIsFeatureEnabled(flagName, flagVariation)(flags)<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;React.useDebugValue({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagName,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagVariation,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isEnabled</span>: isFeatureEnabled<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> isFeatureEnabled<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, trabajando con las herramientas del desarrollador React, podemos ver informaci√≥n sobre la opci√≥n del valor del indicador, sobre el nombre del indicador y si la funci√≥n que nos interesa est√° activada o no.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a37/b3d/78c/a37b3d78c562b28184abd5d5a8fe1c93.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajar con las herramientas de desarrollador React despu√©s de aplicar el enlace React.useDebugValue</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tenga en cuenta que en los casos en que los usuarios usan</font><i><font color="#999999"><font style="vertical-align: inherit;"> enlaces</font></font></i><font style="vertical-align: inherit;"> est√°ndar como</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font><code>React.useRef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dichos enlaces ya registran el estado correspondiente o los datos del objeto de referencia. </font><font style="vertical-align: inherit;">Como resultado, el uso de estructuras de vista aqu√≠</font></font><code>React.useDebugValue({ state })</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no es particularmente √∫til.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. La combinaci√≥n y composici√≥n de ganchos.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando comenzamos a implementar ganchos en nuestro trabajo y comenzamos a usar m√°s y m√°s ganchos en los componentes, r√°pidamente result√≥ que 5-10 ganchos podr√≠an estar presentes en el mismo componente. En este caso, se utilizaron ganchos de varios tipos. Por ejemplo, podr√≠amos usar 2-3 enlaces </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, luego un enlace </font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(por ejemplo, para obtener informaci√≥n sobre el usuario activo), un enlace </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y tambi√©n enlaces de otras bibliotecas, como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-router</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-intl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo anterior se repiti√≥ una y otra vez, como resultado, incluso los componentes muy peque√±os no eran tan compactos. Para evitar esto, comenzamos a extraer estos ganchos individuales en ganchos de usuario, cuyo dispositivo depend√≠a del componente o alguna capacidad de la aplicaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine un mecanismo de aplicaci√≥n destinado a crear un pedido. </font><font style="vertical-align: inherit;">Al desarrollar este mecanismo, se utilizaron muchos componentes, as√≠ como ganchos de varios tipos. </font><font style="vertical-align: inherit;">Estos ganchos se pueden combinar como un gancho personalizado, lo que aumenta la usabilidad de los componentes. </font><font style="vertical-align: inherit;">Aqu√≠ hay un ejemplo de combinaci√≥n de un conjunto de ganchos peque√±os en un gancho.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OrderCreate</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderCreater,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderFetcher,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applicationContext,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goToNextStep,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pendingOrder,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updatePendingChanges,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;revertPendingChanges<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} = useOrderCreate()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (<span class="hljs-comment">/** ...children */</span>)<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Comparaci√≥n de React.useReducer y React.useState</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo recurrimos </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como un gancho est√°ndar para trabajar con el estado de los componentes. Sin embargo, con el tiempo, el estado del componente puede necesitar ser complicado, lo que depende de los nuevos requisitos para el componente, como la presencia de varios valores en el estado. En ciertos casos, el uso </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede ayudar a evitar la necesidad de usar m√∫ltiples valores y simplificar la l√≥gica de actualizaci√≥n del estado. Imagine la gesti√≥n de estado al realizar solicitudes HTTP y recibir respuestas. Para hacer esto, es posible que deba trabajar con valores como </font></font><code>isLoading</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En cambio, el estado puede controlarse utilizando un reductor, teniendo a su disposici√≥n varias acciones para gestionar los cambios de estado. </font><font style="vertical-align: inherit;">Este enfoque, idealmente, alienta al desarrollador a percibir el estado de la interfaz en forma de m√°quina de estados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El reductor transmitido </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es similar a los reductores utilizados en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donde el sistema recibe el estado actual de la acci√≥n y debe devolver el siguiente estado. </font><font style="vertical-align: inherit;">La acci√≥n contiene informaci√≥n sobre su tipo, as√≠ como datos sobre la base de los cuales se forma el siguiente estado. </font><font style="vertical-align: inherit;">Aqu√≠ hay un ejemplo de un reductor simple dise√±ado para controlar cierto contador:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> reducer = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">switch</span> (action) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>: <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>: <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'reset'</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unexpected action'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este reductor puede probarse de forma aislada y luego usarse en el componente usando </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('increment')}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('decrement')}&gt;-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('reset')}&gt;reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ podemos aplicar lo que examinamos en las tres secciones anteriores, a saber, podemos extraer todo en </font></font><code>useCounterReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esto mejorar√° el c√≥digo al ocultar la informaci√≥n del tipo de acci√≥n de un componente que describe la apariencia de un elemento de interfaz. </font><font style="vertical-align: inherit;">Como resultado, esto ayudar√° a evitar la filtraci√≥n de detalles de implementaci√≥n en el componente y tambi√©n nos dar√° oportunidades adicionales para depurar el c√≥digo. </font><font style="vertical-align: inherit;">As√≠ se ver√° el gancho personalizado resultante y el componente que lo usa:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> CounterActionTypes = {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Increment</span>: <span class="hljs-string">'increment'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Decrement</span>: <span class="hljs-string">'decrement'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Reset</span>: <span class="hljs-string">'reset'</span>,<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> useCounterReducer = <span class="hljs-function">(<span class="hljs-params">initialState</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> increment = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Increment));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> decrement = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Decrement));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> reset = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Reset));<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decrement<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {count, increment} = useCounterReducer(<span class="hljs-number">0</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Implementaci√≥n gradual de ganchos</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primera vista, la idea de introducir ganchos gradualmente puede no parecer completamente l√≥gica, pero aqu√≠ sugiero que aquellos que piensan as√≠ simplemente sigan mi razonamiento. Con el tiempo, varios patrones encuentran aplicaci√≥n en la base de c√≥digo. En nuestro caso, estos patrones incluyen componentes de orden superior, propiedades de representaci√≥n y ahora ganchos. Al traducir un proyecto a un nuevo patr√≥n, los desarrolladores no buscan reescribir instant√°neamente todo el c√≥digo, lo que, en general, es casi imposible. Como resultado, debe desarrollar un plan para transferir el proyecto a React hooks, que no incluye cambios importantes en el c√≥digo. Esta tarea puede ser muy dif√≠cil, ya que realizar cambios en el c√≥digo generalmente conduce a un aumento en su tama√±o y complejidad. Al introducir ganchos, nos esforzamos por evitar esto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestra base de c√≥digo utiliza componentes basados ‚Äã‚Äãen clases y componentes funcionales. Independientemente de qu√© componente se utiliz√≥ en una situaci√≥n determinada, buscamos compartir la l√≥gica a trav√©s de los ganchos React. Primero, implementamos la l√≥gica en ganchos (o repetimos la implementaci√≥n existente de ciertos mecanismos en ellos), luego creamos peque√±os componentes de un orden superior, dentro de los cuales se usan estos ganchos. Despu√©s de eso, estos componentes de orden superior se utilizan para crear componentes basados ‚Äã‚Äãen clases. Como resultado, tenemos a nuestra disposici√≥n la l√≥gica ubicada en un solo lugar, que puede usarse en componentes de diversos tipos. Aqu√≠ hay un ejemplo de implementaci√≥n de la funcionalidad de enlace en componentes a trav√©s de componentes de orden superior.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> injectTracking = <span class="hljs-function">(<span class="hljs-params">propName = <span class="hljs-string">'tracking'</span></span>) =&gt;</span> <span class="hljs-function"><span class="hljs-params">WrappedComponent</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> WithTracking = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> tracking = useTracking();<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> trackingProp = {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[propName]: tracking,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} {<span class="hljs-attr">...trackingProp</span>} /&gt;</span></span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;WithTracking.displayName = wrapDisplayName(WrappedComponent, <span class="hljs-string">'withTracking'</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> WithTracking;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> injectTracking;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto muestra la implementaci√≥n de la funcionalidad de enlace </font></font><code>useTracking</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en un componente </font></font><code>WrappedComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esto, por cierto, nos permiti√≥, entre otras cosas, separar las tareas de implementar enlaces y reescribir pruebas en las partes antiguas del sistema. </font><font style="vertical-align: inherit;">Con este enfoque, todav√≠a tenemos a nuestra disposici√≥n mecanismos para usar ganchos en todas las partes de la base de c√≥digo.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay algunos ejemplos de c√≥mo el uso de ganchos React mejor√≥ nuestra base de c√≥digo. </font><font style="vertical-align: inherit;">Esperamos que los ganchos tambi√©n puedan beneficiar a su proyecto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øUtilizas ganchos React?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es494692/index.html">Inyecciones indoloras con agujas 4D</a></li>
<li><a href="../es494700/index.html">Escenarios de infecci√≥n en ciudades espec√≠ficas basadas en el conjunto de datos de movimiento de personas en toda Rusia</a></li>
<li><a href="../es494702/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 408 (23-29 de marzo de 2020)</a></li>
<li><a href="../es494704/index.html">CMI5 o Vida despu√©s de SCORM</a></li>
<li><a href="../es494710/index.html">Uso de formatos gr√°ficos modernos en proyectos web.</a></li>
<li><a href="../es494714/index.html">Sobre el impacto positivo de las fuentes variables en el rendimiento del proyecto web</a></li>
<li><a href="../es494716/index.html">Todo sobre la palabra clave autom√°tica en CSS</a></li>
<li><a href="../es494718/index.html">Noticias del mundo de OpenStreetMap No. 504 (10.03.2020-16.03.2020)</a></li>
<li><a href="../es494720/index.html">Mi hoja de trucos de pandas</a></li>
<li><a href="../es494722/index.html">La primera versi√≥n de vista previa de Microsoft PowerShell 7.1 para Windows, Linux y macOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>