<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💼 🚗 🌡️ SFMLゲームのリファクタリング 👩🏽‍🤝‍👨🏼 🤷🏿 👩🏽‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="では前の記事、私はSFMLライブラリを使用して、簡単なゲームを作成する方法について話しました。記事の最後に、プログラムコードをより正確な形式にする方法を説明し続けることを約束しました。だから、リファクタリングの時が来ました。
 
 まず、ゲームに必要なクラスを見つけました。ゲームリソースを操作するた...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SFMLゲームのリファクタリング</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480710/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前の記事、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私はSFMLライブラリを使用して、簡単なゲームを作成する方法について話しました。記事の最後に、プログラムコードをより正確な形式にする方法を説明し続けることを約束しました。だから、リファクタリングの時が来ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、ゲームに必要なクラスを見つけました。ゲームリソースを操作するためのクラス、Assetsが必要であることがわかりました。現在、ダウンロード可能なフォントしかありませんが、将来的には画像や音楽など、他のリソースも追加される可能性があります。このテンプレートはAssetsクラスに適しているため、クラスをシングルトンにしました。基礎は有名なシングルトンマイヤーズによって取られました。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、実際には、プログラムのロジックとその状態の格納を担当するゲームのクラスが必要です。 MVCのイデオロギーの観点から見ると、このクラスはモデルです。だから私はそれをGameModelと呼んだ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲームを視覚的に表示するには、画面のレンダリングを担当するクラスが必要です。イデオロギーでは、MVCはビューです。このクラスにGameRenderという名前を付け、SFMLライブラリの一部である抽象クラスDrawableから継承しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、私たちが必要とする最後のクラス-これはプレーヤーとの対話を担当するクラスです-これはコントローラーです。</font><font style="vertical-align: inherit;">ここで、MVCの古典的なイデオロギーでは、コントローラーは表現と直接対話してはならないということを言わなければなりません。</font><font style="vertical-align: inherit;">それはモデルにのみ作用し、ビューはモデルからデータを読み取るか、メッセージシステムの信号によってモデルから読み取ります。</font><font style="vertical-align: inherit;">しかし、この場合、このアプローチは私には幾分冗長に思えたので、コントローラーをビューに直接接続しました。</font><font style="vertical-align: inherit;">したがって、MVPのイデオロギーによれば、コントローラーはなく、プレゼンターがいると想定する方が正しいでしょう。</font><font style="vertical-align: inherit;">ただし、このクラスではGameControllerを呼び出しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、エキサイティングなことに取り掛かりましょう-コードをこれらのクラスに分散します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス資産</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SFML/Graphics.hpp&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Assets</span>
{</span>
<span class="hljs-keyword">public</span>:<font></font>
	sf::Font font;<font></font>
<span class="hljs-keyword">public</span>:
	<span class="hljs-function"><span class="hljs-keyword">static</span> Assets&amp; <span class="hljs-title">Instance</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">static</span> Assets s;
		<span class="hljs-keyword">return</span> s;<font></font>
	}<font></font>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Load</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span>:<font></font>
	Assets() {};<font></font>
	~Assets() {};<font></font>
	Assets(Assets <span class="hljs-keyword">const</span>&amp;) = <span class="hljs-keyword">delete</span>;<font></font>
	Assets&amp; <span class="hljs-keyword">operator</span>= (Assets <span class="hljs-keyword">const</span>&amp;) = <span class="hljs-keyword">delete</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私がクラスに追加したものから、これは、ロードされたフォントを格納するフォントクラスのメンバーの宣言と、それをロードするLoadメソッドです。</font><font style="vertical-align: inherit;">その他はすべてシングルトンマイヤーズの実装です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Loadメソッドも非常に単純です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Assets::Load</span><span class="hljs-params">()</span>
</span>{
	<span class="hljs-keyword">if</span> (!font.loadFromFile(<span class="hljs-string">"calibri.ttf"</span>)) <span class="hljs-keyword">throw</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
calibriフォントのロードを試み、失敗すると例外をスローします。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameModelクラス</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span><font></font>
<font></font>
<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Direction</span> {</span> Left = <span class="hljs-number">0</span>, Right = <span class="hljs-number">1</span>, Up = <span class="hljs-number">2</span>, Down = <span class="hljs-number">3</span> };<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameModel</span>
{</span>
<span class="hljs-keyword">public</span>:
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> SIZE = <span class="hljs-number">4</span>;			<span class="hljs-comment">//     </span>
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ARRAY_SIZE = SIZE * SIZE;	<span class="hljs-comment">//  </span>
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> FIELD_SIZE = <span class="hljs-number">500</span>;		<span class="hljs-comment">//     </span>
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> CELL_SIZE = <span class="hljs-number">120</span>;		<span class="hljs-comment">//    </span>
<span class="hljs-keyword">protected</span>:
	<span class="hljs-keyword">int</span> elements[ARRAY_SIZE];
	<span class="hljs-keyword">int</span> empty_index;
	<span class="hljs-keyword">bool</span> solved;
<span class="hljs-keyword">public</span>:<font></font>
	GameModel();<font></font>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Init</span><span class="hljs-params">()</span></span>;
	<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">Check</span><span class="hljs-params">()</span></span>;
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Move</span><span class="hljs-params">(Direction direction)</span></span>;
	<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">IsSolved</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> solved; }
	<span class="hljs-function"><span class="hljs-keyword">int</span>* <span class="hljs-title">Elements</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> elements; }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのロジックとすべてのゲームデータがクラスに配置されます。</font><font style="vertical-align: inherit;">原則として、クラスは外部環境からできるだけ独立している必要があります。そのため、画面への出力やユーザーの操作へのリンクを含めないでください。</font><font style="vertical-align: inherit;">開発時には、プレゼンテーションクラスまたはコントローラの実装が変更された場合でも、ゲームモデルは操作可能である必要があることに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、モデルのすべてのメソッドは以前の記事で説明されているため、ここでは繰り返しません。</font><font style="vertical-align: inherit;">私が言う唯一のことは、IsSolvedとElementsゲッターがプレゼンテーションクラスの必要性のためにモデルに追加されたことです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameRenderクラス</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SFML/Graphics.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"GameModel.h"</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameRender</span> :</span> <span class="hljs-keyword">public</span> sf::Drawable, <span class="hljs-keyword">public</span> sf::Transformable<font></font>
{<font></font>
	GameModel *m_game;<font></font>
	sf::RenderWindow m_window;<font></font>
	sf::Text m_text;<font></font>
<span class="hljs-keyword">public</span>:<font></font>
	GameRender(GameModel *game);<font></font>
	~GameRender();<font></font>
	<span class="hljs-function">sf::RenderWindow&amp; <span class="hljs-title">window</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_window; };
	<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">Init</span><span class="hljs-params">()</span></span>;
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Render</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span>:
	<span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(sf::RenderTarget&amp; target, sf::RenderStates states)</span> <span class="hljs-keyword">const</span></span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GameRenderクラスの目的は、ゲームウィンドウを表示し、プレイフィールドをレンダリングするためのすべてのデータをそれ自体でカプセル化することです。</font><font style="vertical-align: inherit;">ゲームモデルに接続するために、このビューのモデルオブジェクトへのポインターが転送され、コンストラクターに格納されます。</font><font style="vertical-align: inherit;">コンストラクターは、ゲームウィンドウを作成および初期化するInitメソッドも呼び出します。</font></font><br>
<br>
<pre><code class="cpp hljs">GameRender::GameRender(GameModel *game)<font></font>
{<font></font>
	m_game = game;<font></font>
	Init();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">GameRender::Init</span><span class="hljs-params">()</span>
</span>{<font></font>
	setPosition(<span class="hljs-number">50.f</span>, <span class="hljs-number">50.f</span>);
	<span class="hljs-comment">//    600  600    60   </span>
	m_window.create(sf::VideoMode(<span class="hljs-number">600</span>, <span class="hljs-number">600</span>), <span class="hljs-string">"15"</span>);<font></font>
	m_window.setFramerateLimit(<span class="hljs-number">60</span>);
	<span class="hljs-comment">//    </span>
	m_text = sf::Text(<span class="hljs-string">"F2 - New Game / Esc - Exit / Arrow Keys - Move Tile"</span>, Assets::Instance().font, <span class="hljs-number">20</span>);<font></font>
	m_text.setFillColor(sf::Color::Cyan);<font></font>
	m_text.setPosition(<span class="hljs-number">5.f</span>, <span class="hljs-number">5.f</span>);
	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Render（）メソッドは、ゲームコントローラーのメッセージ処理ループから呼び出され、ウィンドウとプレイフィールドの状態を描画します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GameRender::Render</span><span class="hljs-params">()</span>
</span>{<font></font>
	m_window.clear();<font></font>
	m_window.draw(*<span class="hljs-keyword">this</span>);<font></font>
	m_window.draw(m_text);<font></font>
	m_window.display();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GameRender::draw</span><span class="hljs-params">(sf::RenderTarget&amp; target, sf::RenderStates states)</span> <span class="hljs-keyword">const</span>
</span>{<font></font>
	states.transform *= getTransform();<font></font>
	sf::Color color = sf::Color(<span class="hljs-number">200</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>);<font></font>
<font></font>
	<span class="hljs-comment">//    </span>
	<span class="hljs-function">sf::RectangleShape <span class="hljs-title">shape</span><span class="hljs-params">(sf::Vector2f(GameModel::FIELD_SIZE, GameModel::FIELD_SIZE))</span></span>;<font></font>
	shape.setOutlineThickness(<span class="hljs-number">2.f</span>);<font></font>
	shape.setOutlineColor(color);<font></font>
	shape.setFillColor(sf::Color::Transparent);<font></font>
	target.draw(shape, states);<font></font>
<font></font>
	<span class="hljs-comment">//      </span>
	shape.setSize(sf::Vector2f(GameModel::CELL_SIZE - <span class="hljs-number">2</span>, GameModel::CELL_SIZE - <span class="hljs-number">2</span>));<font></font>
	shape.setOutlineThickness(<span class="hljs-number">2.f</span>);<font></font>
	shape.setOutlineColor(color);<font></font>
	shape.setFillColor(sf::Color::Transparent);<font></font>
<font></font>
	<span class="hljs-comment">//       </span>
	<span class="hljs-function">sf::Text <span class="hljs-title">text</span><span class="hljs-params">(<span class="hljs-string">""</span>, Assets::Instance().font, <span class="hljs-number">52</span>)</span></span>;<font></font>
<font></font>
	<span class="hljs-keyword">int</span> *elements = m_game-&gt;Elements();
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; GameModel::ARRAY_SIZE; i++)<font></font>
	{<font></font>
		shape.setOutlineColor(color);<font></font>
		text.setFillColor(color);<font></font>
		text.setString(<span class="hljs-built_in">std</span>::to_string(elements[i]));
		<span class="hljs-keyword">if</span> (m_game-&gt;IsSolved())<font></font>
		{<font></font>
			<span class="hljs-comment">//     </span><font></font>
			shape.setOutlineColor(sf::Color::Cyan);<font></font>
			text.setFillColor(sf::Color::Cyan);<font></font>
		}<font></font>
		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (elements[i] == i + <span class="hljs-number">1</span>)<font></font>
		{<font></font>
			<span class="hljs-comment">//       </span><font></font>
			text.setFillColor(sf::Color::Green);<font></font>
		}<font></font>
<font></font>
		<span class="hljs-comment">//   ,  </span>
		<span class="hljs-keyword">if</span> (elements[i] &gt; <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			<span class="hljs-comment">//     </span>
			<span class="hljs-function">sf::Vector2f <span class="hljs-title">position</span><span class="hljs-params">(i % GameModel::SIZE * GameModel::CELL_SIZE + <span class="hljs-number">10.f</span>,
				i / GameModel::SIZE * GameModel::CELL_SIZE + <span class="hljs-number">10.f</span>)</span></span>;<font></font>
			shape.setPosition(position);<font></font>
			<span class="hljs-comment">//    </span>
			text.setPosition(position.x + <span class="hljs-number">30.f</span> + (elements[i] &lt; <span class="hljs-number">10</span> ? <span class="hljs-number">15.f</span> : <span class="hljs-number">0.f</span>), position.y + <span class="hljs-number">25.f</span>);<font></font>
			target.draw(shape, states);<font></font>
			target.draw(text, states);<font></font>
		}<font></font>
	}<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameControllerクラス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲームで使用される最後のクラスはコントローラーです。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SFML/Graphics.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"GameRender.h"</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameController</span>
{</span><font></font>
	GameModel *m_game;<font></font>
	GameRender *m_render;<font></font>
<span class="hljs-keyword">public</span>:<font></font>
	GameController(GameModel *game, GameRender *render);<font></font>
	~GameController();<font></font>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Run</span><span class="hljs-params">()</span></span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラスは非常に単純で、ゲームを起動するメソッドが1つだけ含まれています-Run（）メソッドです。</font><font style="vertical-align: inherit;">コンストラクターでは、コントローラーがモデルクラスとゲームプレゼンテーションクラスのインスタンスへのポインターを受け入れて格納します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Run（）メソッドには、メインのゲームループ（メッセージの処理とプレゼンテーションクラスでのウィンドウレンダリングの呼び出し）が含まれています。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GameController::Run</span><span class="hljs-params">()</span>
</span>{<font></font>
	sf::Event event;<font></font>
	<span class="hljs-keyword">int</span> move_counter = <span class="hljs-number">0</span>;	<span class="hljs-comment">//      </span><font></font>
<font></font>
	<span class="hljs-keyword">while</span> (m_render-&gt;window().isOpen())<font></font>
	{<font></font>
		<span class="hljs-keyword">while</span> (m_render-&gt;window().pollEvent(event))<font></font>
		{<font></font>
			<span class="hljs-keyword">if</span> (event.type == sf::Event::Closed) m_render-&gt;window().close();
			<span class="hljs-keyword">if</span> (event.type == sf::Event::KeyPressed)<font></font>
			{<font></font>
				<span class="hljs-comment">//    -   </span>
				<span class="hljs-keyword">if</span> (event.key.code == sf::Keyboard::Escape) m_render-&gt;window().close();
				<span class="hljs-keyword">if</span> (event.key.code == sf::Keyboard::Left) m_game-&gt;Move(Direction::Left);
				<span class="hljs-keyword">if</span> (event.key.code == sf::Keyboard::Right) m_game-&gt;Move(Direction::Right);
				<span class="hljs-keyword">if</span> (event.key.code == sf::Keyboard::Up) m_game-&gt;Move(Direction::Up);
				<span class="hljs-keyword">if</span> (event.key.code == sf::Keyboard::Down) m_game-&gt;Move(Direction::Down);
				<span class="hljs-comment">//  </span>
				<span class="hljs-keyword">if</span> (event.key.code == sf::Keyboard::F2)<font></font>
				{<font></font>
					m_game-&gt;Init();<font></font>
					move_counter = <span class="hljs-number">100</span>;<font></font>
				}<font></font>
			}<font></font>
		}<font></font>
<font></font>
		<span class="hljs-comment">//     ,   </span>
		<span class="hljs-keyword">if</span> (move_counter-- &gt; <span class="hljs-number">0</span>) m_game-&gt;Move((Direction)(rand() % <span class="hljs-number">4</span>));<font></font>
<font></font>
		<span class="hljs-comment">//     </span><font></font>
		m_render-&gt;Render();<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後に、メイン（）関数は残ります</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"Assets.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"GameModel.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"GameRender.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"GameController.h"</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	Assets::Instance().Load();			<span class="hljs-comment">//  </span>
	GameModel game;					<span class="hljs-comment">//   </span>
	<span class="hljs-function">GameRender <span class="hljs-title">render</span><span class="hljs-params">(&amp;game)</span></span>;			<span class="hljs-comment">//  </span>
	<span class="hljs-function">GameController <span class="hljs-title">controller</span><span class="hljs-params">(&amp;game, &amp;render)</span></span>;	<span class="hljs-comment">//  </span>
	controller.Run();				<span class="hljs-comment">//  </span>
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクトを作成してゲームを開始するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、リファクタリングの後、コードをクラスに分割しました。クラスにはそれぞれ独自の機能目的があります。</font><font style="vertical-align: inherit;">ゲームの改善の場合、プログラムの個々の部分の内容を変更する方が簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、コード分解のルールを簡単に定式化しようと思います。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各クラスには1つの目的があります。</font><font style="vertical-align: inherit;">あなたは何でもできるスーパークラスを作る必要はありません、そうでなければあなた自身は将来的にそれに対処しません</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスを強調表示するときは、クラスが疎結合であることを確認してください。</font><font style="vertical-align: inherit;">クラスの実装が根本的に異なるものになる可能性があることを常に頭の中で想像してください。</font><font style="vertical-align: inherit;">ただし、これは他のプロジェクトクラスには影響しません。</font><font style="vertical-align: inherit;">インターフェイスを使用して、クラス間でやり取りします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要に応じてデザインパターンを使用します。</font><font style="vertical-align: inherit;">これにより、長年に渡って確立されたソリューションの実装における不必要な間違いを回避できます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのプログラムソースは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取得でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja480694/index.html">UXのアクセシビリティとユーザビリティの呼び出しをやめることはできますか？</a></li>
<li><a href="../ja480700/index.html">Chromeではconsole.log（）を完全に使用します</a></li>
<li><a href="../ja480702/index.html">人事、タレント、エキスパート、クリエイティブ：8回目のハブラセミナーはいかがでしたか</a></li>
<li><a href="../ja480704/index.html">サイト上でアダプティブコンテンツの読み込みを行います</a></li>
<li><a href="../ja480708/index.html">数十年が終わりに近づいています。Google Playで過去10年間に最もダウンロードされたアプリはどれですか。</a></li>
<li><a href="../ja480714/index.html">FFmpegにコーデックを追加する方法</a></li>
<li><a href="../ja480716/index.html">Matlab対 ジュリア対 パイソン</a></li>
<li><a href="../ja480718/index.html">コードレビューを成功させるための6つのヒント</a></li>
<li><a href="../ja480722/index.html">K8sのRedisオペレーターと、このデータベースのデータを分析するためのユーティリティの簡単な概要</a></li>
<li><a href="../ja480724/index.html">トランスコンパイルされた言語：コードからコードへの変換プロジェクト</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>