<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯИпя╕П ЁЯеи ЁЯЫая╕П PostgreSQL рд╕рдВрд╕реНрдХрд░рдг рдЙрдиреНрдирдпрди рдЕрднреНрдпрд╛рд╕ред рдПрдВрдбреНрд░реЗ рд╕рд╛рд▓рдирд┐рдХреЛрд╡ ЁЯС▓ЁЯП╜ ЁЯТк ЁЯЪ┤ЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореЗрд░рд╛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЖрдк рдЖрдВрджреНрд░реЗрдИ рд╕рд▓рдирд┐рдХреЛрд╡ рджреНрд╡рд╛рд░рд╛ 2018 рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХреЛ рдбрд┐рдХреЛрдб рдХрд░рдиреЗ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реЛрдВ, "рдкреЛрд╕реНрдЯрдЧреНрд░рд╛рд╕рдХреНрдпреВрдПрд▓ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдЕрднреНрдпрд╛рд╕"
 

рдЕрдзрд┐рдХрд╛рдВ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PostgreSQL рд╕рдВрд╕реНрдХрд░рдг рдЙрдиреНрдирдпрди рдЕрднреНрдпрд╛рд╕ред рдПрдВрдбреНрд░реЗ рд╕рд╛рд▓рдирд┐рдХреЛрд╡</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495262/"><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрд░рд╛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЖрдк рдЖрдВрджреНрд░реЗрдИ рд╕рд▓рдирд┐рдХреЛрд╡ рджреНрд╡рд╛рд░рд╛ 2018 рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХреЛ рдбрд┐рдХреЛрдб рдХрд░рдиреЗ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реЛрдВ, "рдкреЛрд╕реНрдЯрдЧреНрд░рд╛рд╕рдХреНрдпреВрдПрд▓ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдЕрднреНрдпрд╛рд╕"</font></font></strong></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдзрд┐рдХрд╛рдВрд╢ рднрд╛рдЧ рдХреЗ рд▓рд┐рдП, рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рд╢рд╛рд╕рдХ рдФрд░ рдбреАрдмреАрдП рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ (рдЖрд░рдбреАрдмреАрдПрдордПрд╕) рдХреЛ рдЖрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рдореБрдЦ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рд╕реЗ рдбрд░рддреЗ рд╣реИрдВ, рдЦрд╛рд╕рдХрд░ рдЕрдЧрд░ рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрдЪрд╛рд▓рди рдореЗрдВ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдХрд╛рдлреА рдЙрдЪреНрдЪ рднрд╛рд░ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░рдг рдХреБрдЫ рдбреЗрдЯрд╛рдмреЗрд╕ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рд╣реИ, рдЬреЛ рд╣рдореЗрд╢рд╛ рдРрд╕реЗ рдХрд╛рдо рдХреА рдпреЛрдЬрдирд╛ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реЛрддрд╛ рд╣реИред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЙрдиреНрдирдпрди рдореЗрдВ рдХрд╛рдлреА рд▓рдВрдмрд╛ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ рдФрд░ рдЕрдХреНрд╕рд░ рдРрд╕реЗ рд╕рдВрдЪрд╛рд▓рди рдореЗрдВ рдХрдо рдЕрдиреБрднрд╡ рд╡рд╛рд▓реЗ рдкреНрд░рд╢рд╛рд╕рдХреЛрдВ рдХреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рд╡рд╛рдкрд╕ рд▓реМрдЯрдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рддреИрдпрд╛рд░реА рдХреЗ рд╕реНрддрд░ рдкрд░ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рддреБрдЪреНрдЫ рддреНрд░реБрдЯрд┐рдпреЛрдВ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рдерд╛ред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛ рдПрдЧреНрд░реЗрдЯ рдореЗрдВ, рд╣рдордиреЗ рдЙрди рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдкреНрд░рдореБрдЦ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрдпреВрдПрд▓ рдЙрдиреНрдирдпрди рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдореЗрдВ рд╡реНрдпрд╛рдкрдХ рдЕрдиреБрднрд╡ рд╕рдВрдЪрд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рддреНрд░реБрдЯрд┐ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЬрдЧрд╣ рдирд╣реАрдВ рд╣реИред рдореИрдВ рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░реВрдВрдЧрд╛ рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдЕрдЧрд▓реЗ рдЪрд░рдгреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛: рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрдпреВрдПрд▓ рдЕрдкрдЧреНрд░реЗрдб рдХреА рддреИрдпрд╛рд░реА рдХреИрд╕реЗ рдХрд░реЗрдВ? рддреИрдпрд╛рд░реА рдХреЗ рд╕реНрддрд░ рдкрд░ рдХреНрдпрд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? рдЙрдиреНрдирдпрди рдХреЗ рд▓рд┐рдП рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреА рдпреЛрдЬрдирд╛ рдХреИрд╕реЗ рдмрдирд╛рдПрдВ? рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдкрд┐рдЫрд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рд╡рд╛рдкрд╕ рдЖрдП рдмрд┐рдирд╛, рдЕрдкрдЧреНрд░реЗрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдХреИрд╕реЗ рдкреВрд░рд╛ рдХрд░реЗрдВ? рдЙрдиреНрдирдпрди рдХреЗ рджреМрд░рд╛рди рдкреВрд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдХреЛ рдХреИрд╕реЗ рдХрдо рдпрд╛ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛рдП? PostgreSQL рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдореБрдЭреЗ рдХреМрди рд╕реЗ рдЪрд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? рдореИрдВ рджреЛ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп PostgreSQL рдирд╡реАрдиреАрдХрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ - pg_upgrad рдФрд░ pg_dump / pg_restore, рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рдзрд┐ рдХреЗ рдкреЗрд╢реЗрд╡рд░реЛрдВ рдФрд░ рд╡рд┐рдкрдХреНрд╖реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ рдФрд░ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рднреА рдЪрд░рдгреЛрдВ рдореЗрдВ рд╕рднреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ рдФрд░ рдЙрдирд╕реЗ рдХреИрд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд┐рдкреЛрд░реНрдЯ рд╢реБрд░реБрдЖрддреА рдФрд░ рдЙрди DBA рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛрдЧреА рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ PostgreSQL рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреИрд╕реЗ рдареАрдХ рд╕реЗ рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдФрд░ рдЕрдкрдЧреНрд░реЗрдб рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрднрд╡ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдиреНрдирдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред</font></font></p><br>
<p><img src="https://habrastorage.org/webt/qh/px/xd/qhpxxdul2aseoxu2_ohgojxftpu.png"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирдорд╕реНрдХрд╛рд░! </font><font style="vertical-align: inherit;">рдореИрдВ рдбреЗрдЯрд╛ рдПрдЧреНрд░реЗрдЯ рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рд╣рдо PostgreSQL рд╕рд░реНрд╡рд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдФрд░ PostgreSQL рдкрд░рд╛рдорд░реНрд╢ рд╕реЗрд╡рд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдмрджреНрдз рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ рдЕрднреНрдпрд╛рд╕ рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдмрд╣реБрдд рдХрдо рд▓реЛрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрдиреНрд╣реЛрдВрдиреЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╢реБрд░реВ рдХреА, рдЙрд╕ рд╕рдордп рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдФрд░ рдЕрднреА рднреА рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд┐рдкреЛрд░реНрдЯ рдореЗрдВ рддреАрди рднрд╛рдЧ рд╣реЛрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп рд╢рдмреНрджрд╛рд╡рд▓реА рдореЗрдВ рдЖрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓рд╛ рдПрдХ рдкрд░рд┐рдЪрдпрд╛рддреНрдордХ рд╣реИред </font><font style="vertical-align: inherit;">рджреВрд╕рд░рд╛ рдорд╛рдореВрд▓реА рдЕрдкрдбреЗрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рддреАрд╕рд░рд╛ рдПрдХ рдкреНрд░рдореБрдЦ рд╣реЛрдЧрд╛ред</font></font></p><br>
<p><img src="https://habrastorage.org/webt/yb/wk/bv/ybwkbvbiywdppdk19sky8vxd_vk.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд┐рдкреЛрд░реНрдЯ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЙрддреНрддрд░ рджреЗрдирд╛ рд╣реИред</font></font></p><br>
<ul>
<li>  ?   ,  Postgres    .     ,  - .            ,  .       ,    .    .</li>
<li>,       . </li>
<li> ,             ,   .</li>
<li>  ,   : ┬л         ?┬╗.   . </li>
<li>       ,          .     ,     production   .</li>
</ul><br>
<p>     ,         Postgres.</p><br>
<p><img src="https://habrastorage.org/webt/9n/6v/uo/9n6vuovta77udhortpo17qcbhqw.png"></p><br>
<p>    ,   ,    .  10        .   ,  ,    ,   тАУ   .</p><br>
<p><img src="https://habrastorage.org/webt/zz/ua/ku/zzuakuky0bgkb0_8pnyuxv56f3q.png"></p><br>
<p>  10-      .     ,  .   тАУ    ,   тАУ   . </p><br>
<p><img src="https://habrastorage.org/webt/o9/rg/d6/o9rgd6cwxfxj2ysv6rrnskysrt8.png"></p><br>
<p>    ?</p><br>
<p> .   ,    тАУ       .      9.6      ,  ,  ,    .    .   . </p><br>
<p> 10-     .   ,      .</p><br>
<p> .    .                ,   . </p><br>
<p>        .             . </p><br>
<p>     тАУ  ,     .  6.    .     ,        . . .    9.2.    ,   ,  9.2  .     9.2,     .</p><br>
<p>       :     .</p><br>
<p><img src="https://habrastorage.org/webt/mk/mj/fo/mkmjfozpligyczlzq19b4u7pudw.png"></p><br>
<p>  .   ,         ,       production :</p><br>
<ul>
<li>    release notes.     ? ,     release notes,   release notes    ,      .   ,    .   - .      ,              ,          .  ,         10- ,     -.   ,  ,   .</li>
<li>       ?  .  ,          .     release notes,      . ,      -  .  , Postgres      ,  ,  .         ,       Postgres,   .</li>
<li>    - ,        ,     ,        ,       production .</li>
<li> ,             тАУ  ,      .    тАФ  ,     ,          ,    .      .</li>
</ul><br>
<p> ,   ,  , .</p><br>
<p><img src="https://habrastorage.org/webt/ft/wd/sx/ftwdsxjongoxcwtzmofeol4flxs.png"></p><br>
<p>    .            .</p><br>
<p>   ,        .         ,      Postgres.     Postgres.</p><br>
<p>  :</p><br>
<ul>
<li>     PostgreSQL.    ,     -  ,   ,  , Postgres   .      .             .         ,   .  Ubuntu, ,       ,  .   start.conf.          .      .</li>
<li>    PostgreSQL  .      ,           ,  common-       .   .</li>
<li> тАУ checkpoint.    checkpoint?      ,        .         ,      ,    ,   .      ,  ,       , , 250 GB,         .         checkpoint,                 Postgres.</li>
<li>  ?    pgbouncer,             ,          .    pgbouncer,  pgbouncer    .  pgbouncerтАЩ    тАУ    ,      -       .       latency   . . .     ,      pgbouncer,     .     checkpoint,   pgbouncer,                .</li>
<li>   ,      .            .     ,      .</li>
<li> ,     extensions,    -  extensions.    тАУ          extensions    .   .       .     .      .     . </li>
<li>    (  ,     release notes)      release notes.         тАУ    -  . ,     9.6.1  9.6.6,   ,     release notes  9.6.2 тАУ 9.6.6.      - ,    ,       ,       .</li>
<li>    standby ,   ,          .     ,      14-  ,    2.3     .     .       ,     .    .</li>
</ul><br>
<p>   ,    release notes.</p><br>
<p><img src="https://habrastorage.org/webt/r7/po/fw/r7pofwu2d6pd3sfzov_zbnw-lsq.png"></p><br>
<p>      Postgres.org.    9.6.2.      ,         .</p><br>
<p>    ?        ,                 ,              .           ,                   .         .</p><br>
<p>         .       .  . , , release notes.   .</p><br>
<p><img src="https://habrastorage.org/webt/tp/fm/y4/tpfmy4cemzde9czdxxsr0pljldm.png"></p><br>
<p>    ,      .       . ,  ,     9.6.5.         9.6.1.     ,      .    -   .      ,   тАУ    .     тАУ   .</p><br>
<p>  ,     . . .    bash- ,         .     alter extension, update     .</p><br>
<p><img src="https://habrastorage.org/webt/r0/r8/ek/r0r8ekgtztzazijacgoii-0qpss.png"></p><br>
<p>   ?</p><br>
<ul>
<li> .     .   ,           ,           . </li>
<li>      . ,        ,        ,   release notes.</li>
<li>      . ,     - ,     .    .   .       . </li>
<li>   , . .        .   ,     checkpoint,         30   . </li>
</ul><br>
<p><img src="https://habrastorage.org/webt/ga/ph/cc/gaphcci6ovprvx85tkdq4ahzvve.png"></p><br>
<p>      тАУ   .</p><br>
<p>    .   ,    .       .</p><br>
<ul>
<li>Pg_dump  restore тАУ      .       ,      .     -    .</li>
<li>Pg_upgrade тАУ    ,   , ,  95 % ,      .      . </li>
<li>     .</li>
</ul><br>
<p>       .</p><br>
<p><img src="https://habrastorage.org/webt/nv/6c/6t/nv6c6tqljcr8ergpes79hmwrjrg.png"></p><br>
<p>   pg_dump      ?</p><br>
<ul>
<li>     .     ,     .   9.5,  ,   10.  Ubuntu   ,  RedHat     тАУ   Postgres.  ,        .</li>
<li>      locale,       .</li>
<li>   Postgres,  ,    ,  ,  ,         .</li>
<li>    ,            pg_dumop.       PostgreSQL.     ?   pg_dump    ,      ,   ,           .    ,             ,       .       .    PostgreSQL, . .  ,  .    ,    .</li>
<li>     .     pg_dump,         .         .    ,       .</li>
<li>        .               .</li>
<li>  ,       ,   ,        PostgreSQL.</li>
</ul><br>
<p>   ,   ,      ,  .</p><br>
<p><img src="https://habrastorage.org/webt/yg/wy/_z/ygwy_zlxpezpbldwtlfbzkfb_ce.png"></p><br>
<p>  pg_dump:</p><br>
<ul>
<li>      .   тАУ .      .</li>
<li>  .    .</li>
<li>   .   :   ,   ,   .    ,    .</li>
<li>      ,      ,              .     .</li>
<li>     .     ,      .       .    SSD-,  SSD-  .                ,     ,  .       .</li>
<li>    .    ,              .        ,   . ,   ,  .     ,          ,       .     .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/0_/qe/9o/0_qe9onjahbwmv3gajs4i5gdbus.png"></p><br>
<p>     ,  pg_upgrade.</p><br>
<ul>
<li>Pg_upgrade        .       , . . ,    .   .</li>
<li>        .       , ,     .</li>
<li>     PostgreSQL.         -,        .</li>
<li>    .      .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/j_/wo/jc/j_wojcl1m25krfsyc4qkq_fjmdo.png"></p><br>
<p> ,   pg_upgrade.        : ,         ,   .</p><br>
<p>,    pg_upgrade,       ,             ,            .    ,     ,         .      .</p><br>
<p>   ,     тАУ pg_upgrade  dump  restore ,   pg_dump, restore     ,       ,      ,      .   .</p><br>
<p>       .      ,       ,           8.4.  Postgres        .</p><br>
<p>    ,            (, 9.0  10)      -.       ,       ,       .      .      ,     .</p><br>
<p><img src="https://habrastorage.org/webt/7l/9t/6a/7l9t6aqjizxpby0hca5onk0d4ci.png"></p><br>
<p>    ,         production. . .      ,    тАУ      .</p><br>
<ul>
<li>     PostgreSQL.</li>
<li>     locace.   .</li>
<li> pg_upgrade.    ┬лcheck┬╗. Check   ,      .   ,     -    ,      ,   , ,                .       ,     .      ,         .</li>
<li>Pg_dumpall тАФ schema-only.     check   .       pg_dumpall тАУ schema-only,     .     ,       .    ,    ,  check      ,  dump .</li>
<li>   extensions   .    тАУ  PostGIS,   PostGIS    Postgres.  extension      Postgres,    Postgres.   changelog   тАУ      ,  pg_upgrade ,         .    dump restore .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/3g/4x/f7/3g4xf7lyqcnvv3hi-bs0fra4wj4.png"></p><br>
<p>  ,  ,   ,  .</p><br>
<ul>
<li><p>    locale,    pg_dumpall only, restore.</p><br>
</li>
<li><p>   .      ,  pgbouncer       , . .    ,   .</p><br>
</li>
<li><p>   checkpoints,          ,     .</p><br>
</li>
<li><p>     pg_upgrade.     ,      .               .      45 .       ,    45 ,    .        15 ,     .         .</p><br>
<p><img src="https://habrastorage.org/webt/et/sy/er/etsyeryqtvdimdjivvq0jx_lrjw.png"></p><br>
</li>
<li><p>   ,       .    hard links.        .</p><br>
<p><img src="https://habrastorage.org/webt/cs/eo/sc/cseoscbeymrk5pjlzwbj9grk_rm.png"></p><br>
</li>
<li><p>    PostgreSQL.        .          PostgreSQL?     .  , pg_upgrade    .</p><br>
</li>
<li><p>     .</p><br>
</li>
<li><p>        .            10 .      ,    .</p><br>
</li>
</ul><br>
<p>     :</p><br>
<ul>
<li><p> pg_upgrade     .    ,          :   ,  10     .</p><br>
</li>
<li><p>         ,       ,   .</p><br>
</li>
<li><p>   9.5     .    ,                .</p><br>
<p><img src="https://habrastorage.org/webt/gi/dm/uk/gidmuk_tnbcrxet3qoghxfvpkd4.png"></p><br>
</li>
<li><p>    .    .        ,    ,     .   ,    vacuumdb    1, 10 .         ,      .  -      .  - .    ,     ,     .</p><br>
</li>
<li><p>    .         ,     .      - .     ,     ,  .         ,  ,         .</p><br>
</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/kr/dh/y9/krdhy9toj4rsxvmlbokhhjaahno.png"></p><br>
<p>     .</p><br>
<p><img src="https://habrastorage.org/webt/o0/-v/_-/o0-v_-tammgsfm23g7spto9w080.png"></p><br>
<ul>
<li>Pg_upgrade   extensions.    ,   .</li>
<li>   release notes  .</li>
<li> ,   ,      extensions      тАУ alter extension EXTENSION_NAME update.  .    pg_stat_statements,   -     .    pg_upgrade,         pg_stat_statements.      .     .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/ri/50/6n/ri506n_tl93nkyy_m1-9gtrdtt4.png"></p><br>
<p>    тАУ   ?   :</p><br>
<ul>
<li>  -  - .</li>
<li>  ,     ,    ,    ,  ,  .      .  ,   ,           .</li>
<li>   ?     Postgres.       .     . ,  , , 10  .</li>
<li>          PostgreSQL.</li>
<li> pg_basebackup        .      .</li>
<li>     PostgreSQL.</li>
<li>   ,       rsync,       .   , ,  ,            .   rsync   ,   .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/fe/s_/_i/fes__isx8gdxhkejzomqabxytxc.png"></p><br>
<p>    .   :</p><br>
<ul>
<li>-,        PostgreSQL.</li>
<li>    .   .</li>
</ul><br>
<p>  9.4    .     .   ,    10   11        .</p><br>
<p>   ,   .  Slony-l, Londiste, Bucardo  . .   .</p><br>
<p><img src="https://habrastorage.org/webt/uy/yn/rd/uyynrdnjuv8_go1ttq3rsmsn2ns.png"></p><br>
<p>       ?</p><br>
<ul>
<li>    PostgreSQL.</li>
<li>-         Postgres    Postgres.</li>
<li>  ,  ,        .       .</li>
<li> ,        .    .    ,         Postgres.   ,     , . .     .    ,    .</li>
<li>      Postgres, ,     .</li>
<li>         Postgres,    . ,  ,    .     -  .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/8g/tv/of/8gtvofu-acouuounr5zfnjozen4.png"></p><br>
<p>     ?</p><br>
<ul>
<li>        ,      .  -  .</li>
<li> ,    .     . . . ,    .</li>
<li>     sequences,       -.</li>
<li>    DDL,    .   DDL  ,  ,  .          ,  .</li>
<li>     ,         ,  .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/2a/db/rv/2adbrv0193cxs8sglbod0f8jfnu.png"></p><br>
<p>   ,            .     pg_upgrade      ,      .</p><br>
<p>   ?  ,     3 TB,       2 SSD RAID  3 TB.    .         .</p><br>
<p>         .    .</p><br>
<p> ,    ,      99  - 9-  .    15 .       15    .  .        - .</p><br>
<p><img src="https://habrastorage.org/webt/bq/sl/ie/bqsliego7mt3nyx__tfzyrrlwb8.png"></p><br>
<p>     ,       pg_upgrade.      .         .</p><br>
<p>    .</p><br>
<p></p><br>
<p><em> !    pgbouncer     ,       , , ,    ,   .      ?</em></p><br>
<p>       ,        SSD  .         SSD   , . .     .       . , , ,  ,    .  ,     ,      .    ,      Postgres.      ,   .</p><br>
<p><em>   pg_worm  pg_hibernate,    ?</em></p><br>
<p> ,       ,      .</p><br>
<p><em>  !        pg_upgrade?</em></p><br>
<p> , .        ,   .       ,    .    ,     ,  -  ,    .        ,     ,    .        ,    .</p><br>
<p><em>  rsync -?</em></p><br>
<p>  rsync? Rsync     .  ,       ,   , , .    ?      pg_upgrate   .  ,  .     тАУ pg_start_backup.     rsync    .     -  ,    rsync   ,   .   ,          , ,  tablespace  HDD,  rsync  ,      .     тАУ  ,  .    ,         .  тАУ  pg_basebackup.</p><br>
<p><em>  !   ,     тАж</em></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдорд╛рдореВрд▓реА рдЕрдкрдбреЗрдЯ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi495248/index.html">рдЖрддреНрдо-рдЕрд▓рдЧрд╛рд╡ рдФрд░ рд╣рд╛рде рдзреЛрдиреЗ рдХреА рднреВрдорд┐рдХрд╛</a></li>
<li><a href="../hi495250/index.html">рдХреНрдпрд╛ рдЧреЗрдордкреИрдбреНрд╕ рдХрд╛ рднрд╡рд┐рд╖реНрдп рд╣реИ?</a></li>
<li><a href="../hi495254/index.html">рд▓рдХреНрд╖рд┐рдд рд╕рд╛рдЗрдмрд░рдмреИрдЯ, рд▓рд╛рд▓ рдЯреАрдо, рдкреЗрдВрдЯреЗрд╕реНрдЯ, рднреЗрджреНрдпрддрд╛ рд╕реНрдХреИрдирд┐рдВрдЧ рдХрд╛ рдЕрдиреБрдХрд░рдгред рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЛрдВ рдХреЗ рдкреЗрд╢реЗрд╡рд░реЛрдВ рдФрд░ рд╡рд┐рдкрдХреНрд╖</a></li>
<li><a href="../hi495256/index.html">рдореЗрд▓ рд╕рд░реНрд╡рд░ рдореЗрдВ рдкреЛрд░реНрдЯ рдФрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi495258/index.html">рдХреЛрд░реЛрдиреЛрд╡рд╛рдпрд░рд╕ рдХреЗ рдпреБрдЧ рдореЗрдВ рдЬреВрдо рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрдВрдкрдиреА рдХреИрд╕реЗ рдмрди рдЧрдИ</a></li>
<li><a href="../hi495266/index.html">рдкреБрдирд░реНрдЬрд╛рдЧрд░рдг рдИ-рд▓рд░реНрдирд┐рдВрдЧред рдХреНрдпреЛрдВ 2020 рдореЗрдВ рджреВрд░рд╕реНрде рд╢рд┐рдХреНрд╖рд╛ рдХреЗ рд╕рднреА рдлрд╛рдпрджреЗ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ</a></li>
<li><a href="../hi495268/index.html">рдпреВрдЖрдИ / рдпреВрдПрдХреНрд╕ рдХреЗрд╕: рдПрдпрд░рдкреЛрд░реНрдЯ рдкрд╛рд░реНрдХрд┐рдВрдЧ рдСрдЯреЛрдореЗрд╢рди</a></li>
<li><a href="../hi495272/index.html">рдПрд╕рдПрдирдИрдПрд╕ рдкреВрд░реНрдгрддрд╛ рд╕реЗ рдХреБрдЫ рд╣реА рдкрд┐рдХреНрд╕реЗрд▓ рджреВрд░ рдПрдореБрд▓реЗрдЯрд░</a></li>
<li><a href="../hi495274/index.html">рдорд╛рд░реНрдЧ рд▓реАрдХ рдХреЛ рдХреИрд╕реЗ рдареАрдХ рдХрд░реЗрдВ</a></li>
<li><a href="../hi495276/index.html">рдФрд░ рдкреНрд░рджрд░реНрд╢рди, рдпрд╛ рд╣рдо рдХреИрд╕реЗ Uptime рд╕рдВрд╕реНрдерд╛рди рдореЗрдВ рдкрд░рд┐рдЪрд╛рд▓рди рд╕реНрдерд┐рд░рддрд╛ рд▓реЗрдЦрд╛ рдкрд░реАрдХреНрд╖рд╛ рдЙрддреНрддреАрд░реНрдг рдХреА</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>