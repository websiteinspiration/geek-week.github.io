<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ½â€ğŸ¨ ğŸ§œğŸ¾ ğŸ˜¿ Raspberry Pi + CentOS = Wi-Fi Hotspotï¼ˆã¾ãŸã¯Red Hatã®Raspberry Routerï¼‰ ğŸ¥ ğŸ‘©ğŸ»â€ğŸš€ ğŸš–</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD 03/14/2020ï¼š
 Raspberry Pi + Fedoraï¼ˆaarch64ï¼‰= Wi-Fi Hotspotï¼ˆã¾ãŸã¯é’ã„å¸½å­ã®raspberry-blueãƒ«ãƒ¼ã‚¿ãƒ¼ï¼‰
 
 ã‚·ãƒ³ã‚°ãƒ«ãƒœãƒ¼ãƒ‰ã®Raspberry PCã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸWi-Fiã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã®ä½œæˆã«ã¤ã„ã¦ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Raspberry Pi + CentOS = Wi-Fi Hotspotï¼ˆã¾ãŸã¯Red Hatã®Raspberry Routerï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458994/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 03/14/2020ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi + Fedoraï¼ˆaarch64ï¼‰= Wi-Fi Hotspotï¼ˆã¾ãŸã¯é’ã„å¸½å­ã®raspberry-blueãƒ«ãƒ¼ã‚¿ãƒ¼ï¼‰</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚·ãƒ³ã‚°ãƒ«ãƒœãƒ¼ãƒ‰ã®Raspberry PCã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸWi-Fiã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã®ä½œæˆã«ã¤ã„ã¦ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã«è†¨å¤§ãªæƒ…å ±ãŒã‚ã‚Šã¾ã™ã€‚åŸå‰‡ã¨ã—ã¦ã€Raspberry-Raspbianã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ç”¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RPMãƒ™ãƒ¼ã‚¹ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’æ„›ç”¨ã—ã¦ã„ã‚‹ç§ã¯ã€ã“ã®å°ã•ãªå¥‡è·¡ã‚’ä¹—ã‚Šè¶Šãˆã¦ã€ãŠæ°—ã«å…¥ã‚Šã®CentOSã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€CentOSã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«åŸºã¥ã„ã¦ã€Raspberry Pi 3ãƒ¢ãƒ‡ãƒ«B +ã‹ã‚‰5GHz / AC Wi-Fiãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’è£½é€ ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ã„ãã¤ã‹ã®æ¨™æº–çš„ã§ã™ãŒã‚ã¾ã‚ŠçŸ¥ã‚‰ã‚Œã¦ã„ãªã„ãƒˆãƒªãƒƒã‚¯ãŒã‚ã‚Šã€ãŠã¾ã‘ã¨ã—ã¦ã€è¿½åŠ ã®Wi-Fiæ©Ÿå™¨ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã«æ¥ç¶šã—ã¦ã€è¤‡æ•°ã®ãƒ¢ãƒ¼ãƒ‰ï¼ˆ2.4 + 5GHzï¼‰ã§åŒæ™‚ã«å‹•ä½œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å›³ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/yb/fz/mpybfz6gzojqkaftnuljhpzx5da.png" alt="ç”»åƒ"><br>
<sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆç„¡æ–™ã‚¢ã‚¯ã‚»ã‚¹ã®ç”»åƒã®çµ„ã¿åˆã‚ã›ï¼‰</font></font></i></sub><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€éƒ¨ã®å®‡å®™é€Ÿåº¦ã¯æ©Ÿèƒ½ã—ãªã„ã“ã¨ã«ã™ãã«æ³¨æ„ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã¯ç„¡ç·šã§ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã‹ã‚‰æœ€å¤§100 Mbitã‚’æ¾ã‚Šå–ã‚Šã€ã“ã‚Œã¯ç§ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é€Ÿåº¦ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç†è«–ä¸Šã€Nã§ã•ãˆã€åŠåˆ†ã®ã‚®ã‚¬ãƒã‚¤ãƒˆã‚’å–å¾—ã§ãã‚‹ã®ã«ã€ãªãœã“ã®ã‚ˆã†ãªç·©æ…¢ãªACãŒå¿…è¦ãªã®ã§ã—ã‚‡ã†ã‹ã€‚</font><font style="vertical-align: inherit;">ã“ã®è³ªå•ã‚’ã—ãŸå ´åˆã¯ã€åº—ã«è¡Œã£ã¦ã€8ã¤ã®å¤–éƒ¨ã‚¢ãƒ³ãƒ†ãƒŠã‚’å‚™ãˆãŸå®Ÿéš›ã®ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’æ¢ã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.å¿…è¦ãªã‚‚ã®</font></font></h1><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿéš›ã«ã¯ã€å£å¾„è‡ªä½“ã®ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼è£½å“ã€ï¼šPi 3ãƒ¢ãƒ‡ãƒ«B +ï¼ˆåˆ‡æœ›ã•ã‚ŒãŸ5GHzã®é€Ÿåº¦ã¨ãƒãƒ£ãƒãƒ«ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ï¼‰ã€‚</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›ºä½“microSD&gt; = 4GB;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microSDãƒªãƒ¼ãƒ€ãƒ¼/ãƒ©ã‚¤ã‚¿ãƒ¼ã‚’å‚™ãˆãŸLinuxãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€‚</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linuxã«ãŠã‘ã‚‹ååˆ†ãªã‚¹ã‚­ãƒ«ã®å­˜åœ¨ã€è¨˜äº‹ã¯æº–å‚™ã•ã‚ŒãŸã‚ªã‚¿ã‚¯ã®ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberryã¨Linuxé–“ã®æœ‰ç·šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆeth0ï¼‰æ¥ç¶šã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§å‹•ä½œã™ã‚‹DHCPã‚µãƒ¼ãƒãƒ¼ã€ãŠã‚ˆã³ä¸¡æ–¹ã®ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã€‚</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã®ãƒã‚¤ãƒ³ãƒˆã«ã¤ã„ã¦ã®çŸ­ã„ã‚³ãƒ¡ãƒ³ãƒˆã€‚</font><font style="vertical-align: inherit;">ã€Œä½•ãŒæœ€åˆã«æ¥ãŸã®ã‹ã€åµã‹...ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹æ©Ÿå™¨ãŒãªã„å ´åˆã«Wi-Fiãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ</font><font style="vertical-align: inherit;">ã“ã®é¢ç™½ã„æ¼”ç¿’ã¯è¨˜äº‹ã®ç¯„å›²å¤–ã«ã—ã¦ã€RaspberryãŒæœ‰ç·šã§ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«æ¥ç¶šã•ã‚Œã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ãƒ©ã‚ºãƒ™ãƒªãƒ¼ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®è¿½åŠ ã®ãƒ†ãƒ¬ãƒ“ã¨ãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚¿ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. CentOSã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</font></font></h1><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã“ã®è¨˜äº‹ã®åŸ·ç­†æ™‚ç‚¹ã§ã¯ã€ãƒ‡ãƒã‚¤ã‚¹ã§å‹•ä½œã™ã‚‹CentOSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯32ãƒ“ãƒƒãƒˆã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒ¯ã‚¤ãƒ‰ã‚¦ã‚§ãƒ–ã®åºƒå¤§ãªã©ã“ã‹ã§ã€64ãƒ“ãƒƒãƒˆARMã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¸Šã§ã®ãã®ã‚ˆã†ãªOSã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ä½ä¸‹ã¯20ï¼…ç¨‹åº¦ã§ã‚ã‚‹ã¨ã„ã†æ„è¦‹ã«å‡ºãã‚ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã®ç‚¹ã¯ã‚³ãƒ¡ãƒ³ãƒˆã›ãšã«ãŠãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linuxã§ã¯ã€ã€Œ- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaspberryPI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><font style="vertical-align: inherit;">ã‚«ãƒ¼ãƒãƒ«</font><font style="vertical-align: inherit;">ã‚’</font><b><font style="vertical-align: inherit;">ä½¿ç”¨</font></b><font style="vertical-align: inherit;">ã—ã¦æœ€å°é™ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€</font><font style="vertical-align: inherit;">microSDã«æ›¸ãè¾¼ã¿</font><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># xzcat CentOS-Userland-7-armv7hl-RaspberryPI-Minimal-1810-sda.raw.xz | \<font></font>
  dd of=/dev/mmcblk0 bs=4M<font></font>
# sync<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹å‰ã«ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰SWAPãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã€ãƒ«ãƒ¼ãƒˆã‚’åˆ©ç”¨å¯èƒ½ãªãƒœãƒªãƒ¥ãƒ¼ãƒ å…¨ä½“ã«æ‹¡å¼µã—ã¦ã€SELinuxã‚’å‰Šé™¤ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å˜ç´”ã§ã™ã€‚Linuxã§ãƒ«ãƒ¼ãƒˆã®ã‚³ãƒ”ãƒ¼ã‚’ä½œæˆã—ã€æœ€åˆã®ï¼ˆ/ãƒ–ãƒ¼ãƒˆï¼‰ä»¥å¤–ã®ã™ã¹ã¦ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’microSDã‹ã‚‰å‰Šé™¤ã—ã€æ–°ã—ã„ãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ã€ãã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã‹ã‚‰è¿”ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ä¾‹ï¼ˆé‡å¤§ãªã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ï¼‰</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"># mount /dev/mmcblk0p3 /mnt<font></font>
# cd /mnt<font></font>
# tar cfz ~/pi.tgz . --no-selinux<font></font>
# cd<font></font>
# umount /mnt<font></font>
</code></pre><br>
<pre><code class="plaintext hljs"># parted /dev/mmcblk0<font></font>
<font></font>
(parted) unit s<font></font>
(parted) print free<font></font>
Model: SD SC16G (sd/mmc)<font></font>
Disk /dev/mmcblk0: 31116288s<font></font>
Sector size (logical/physical): 512B/512B<font></font>
Partition Table: msdos<font></font>
Disk Flags:<font></font>
<font></font>
Number  Start     End        Size       Type     File system     Flags<font></font>
        63s       2047s      1985s               Free Space<font></font>
 1      2048s     1370111s   1368064s   primary  fat32           boot, lba<font></font>
 2      1370112s  2369535s   999424s    primary  linux-swap(v1)<font></font>
 3      2369536s  5298175s   2928640s   primary  ext4<font></font>
        5298176s  31116287s  25818112s           Free Space<font></font>
<font></font>
(parted) rm 3<font></font>
(parted) rm 2<font></font>
<font></font>
(parted) print free<font></font>
Model: SD SC16G (sd/mmc)<font></font>
Disk /dev/mmcblk0: 31116288s<font></font>
Sector size (logical/physical): 512B/512B<font></font>
Partition Table: msdos<font></font>
Disk Flags:<font></font>
<font></font>
Number  Start     End        Size       Type     File system  Flags<font></font>
        63s       2047s      1985s               Free Space<font></font>
 1      2048s     1370111s   1368064s   primary  fat32        boot, lba<font></font>
        1370112s  31116287s  29746176s           Free Space<font></font>
<font></font>
(parted) mkpart<font></font>
Partition type?  primary/extended? primary<font></font>
File system type?  [ext2]? ext4<font></font>
Start? 1370112s<font></font>
End? 31116287s<font></font>
<font></font>
(parted) set<font></font>
Partition number? 2<font></font>
Flag to Invert? lba<font></font>
New state?  on/[off]? off<font></font>
<font></font>
(parted) print free<font></font>
Model: SD SC16G (sd/mmc)<font></font>
Disk /dev/mmcblk0: 31116288s<font></font>
Sector size (logical/physical): 512B/512B<font></font>
Partition Table: msdos<font></font>
Disk Flags:<font></font>
<font></font>
Number  Start     End        Size       Type     File system  Flags<font></font>
        63s       2047s      1985s               Free Space<font></font>
 1      2048s     1370111s   1368064s   primary  fat32        boot, lba<font></font>
 2      1370112s  31116287s  29746176s  primary  ext4<font></font>
<font></font>
(parted) quit<font></font>
</code></pre><br>
<pre><code class="plaintext hljs"># mkfs.ext4 /dev/mmcblk0p2 <font></font>
mke2fs 1.44.6 (5-Mar-2019)<font></font>
/dev/mmcblk0p2 contains a swap file system labelled '_swap'<font></font>
Proceed anyway? (y,N) y<font></font>
Discarding device blocks: done                            <font></font>
Creating filesystem with 3718272 4k blocks and 930240 inodes<font></font>
Filesystem UUID: 6a1a0694-8196-4724-a58d-edde1f189b31<font></font>
Superblock backups stored on blocks: <font></font>
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208<font></font>
<font></font>
Allocating group tables: done                            <font></font>
Writing inode tables: done                            <font></font>
Creating journal (16384 blocks): done<font></font>
Writing superblocks and filesystem accounting information: done   <font></font>
<font></font>
# mount /dev/mmcblk0p2 /mnt<font></font>
# tar xfz ~/pi.tgz -C /mnt --no-selinux<font></font>
</code></pre><br>
           .<br>
<br>
 SELinux  <b>/mnt/etc/selinux/config</b>:<br>
<br>
<pre><code class="plaintext hljs">SELINUX=disabled
</code></pre><br>
 <b>/mnt/etc/fstab</b>,        :  (/boot,  )   (  UUID,   ,    blkid  Linux-):<br>
<br>
<pre><code class="plaintext hljs">UUID=6a1a0694-8196-4724-a58d-edde1f189b31  /     ext4    defaults,noatime 0 0<font></font>
UUID=6938-F4F2                             /boot vfat    defaults,noatime 0 0<font></font>
</code></pre><br>
,    :     ,      ()    IPv6    :<br>
<br>
<pre><code class="plaintext hljs"># cd<font></font>
# umount /mnt<font></font>
# mount /dev/mmcblk0p1 /mnt<font></font>
</code></pre><br>
  <b>/mnt/cmdline.txt</b>    (   ):<br>
<br>
<pre><code class="plaintext hljs">root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait quiet ipv6.disable_ipv6=1
</code></pre><br>
:<br>
<br>
<pre><code class="plaintext hljs"># cd<font></font>
# umount /mnt<font></font>
# sync<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€ŒMalinkaã€ã§microSDã‚’å†é…ç½®ã—ã€å®Ÿè¡Œã—ã¦ã€sshï¼ˆroot / centosï¼‰çµŒç”±ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. CentOSã®æ§‹æˆ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®3ã¤ã®æºã‚‹ããªã„å‹•ãï¼š</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passwd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yum -y update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reboot</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><b><font style="vertical-align: inherit;">networkdã«</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç®¡ç†ã‚’æä¾›ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs"># yum install systemd-networkd<font></font>
# systemctl enable systemd-networkd<font></font>
# systemctl disable NetworkManager<font></font>
# chkconfig network off<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/eth0.network</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[Match]<font></font>
Name=eth0<font></font>
<font></font>
[Network]<font></font>
DHCP=ipv4<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã‚’å†èµ·å‹•ã™ã‚‹ã¨ã€å†ã³sshã‚’ä»‹ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¤‰æ›´å¯èƒ½ã§ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ä»¥å‰ã«Network Managerã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/resolv.conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒä½¿ç”¨ã•ã‚Œã‚‹</font><font style="vertical-align: inherit;">ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€è§£æ±ºã«å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€ãã®å†…å®¹ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemd-resolved</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯</font><font style="vertical-align: inherit;">ä½¿ç”¨</font><b><font style="vertical-align: inherit;">ã—</font></b><font style="vertical-align: inherit;">ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œä½™åˆ†ãªã€ã‚’å‰Šé™¤ã—ã€OSã®ãƒ­ãƒ¼ãƒ‰ã‚’ä¿®å¾©ãŠã‚ˆã³é«˜é€ŸåŒ–ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># systemctl set-default multi-user.target<font></font>
# yum remove GeoIP Network* aic* alsa* cloud-utils-growpart \<font></font>
  cronie* dhc* firewal* initscripts iwl* kexec* logrotate \<font></font>
  postfix rsyslog selinux-pol* teamd wpa_supplicant<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èª°ãŒ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cron</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’å¿…è¦</font><font style="vertical-align: inherit;">ã¨ã—ã¦ã„ã¦ã€</font><font style="vertical-align: inherit;">èª°ãŒ</font><font style="vertical-align: inherit;">çµ„ã¿è¾¼ã¿ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemdã‚¿ã‚¤ãƒãƒ¼ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¶ˆåŒ–ã—ãªãã¦ã‚‚</font><font style="vertical-align: inherit;">ã€ä¸è¶³ã—ã¦ã„ã‚‹ã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ã</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var / </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ã€</font><b><font style="vertical-align: inherit;">journalctl</font></b><font style="vertical-align: inherit;">ã‚’</font><b><font style="vertical-align: inherit;">èª¿ã¹</font></b><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ­ã‚°å±¥æ­´ãŒå¿…è¦ãªå ´åˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€æƒ…å ±ã¯ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•æ™‚ã‹ã‚‰ã®ã¿ä¿å­˜ã•ã‚Œã¾ã™ï¼‰ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># mkdir /var/log/journal<font></font>
# systemd-tmpfiles --create --prefix /var/log/journal<font></font>
# systemctl restart systemd-journald<font></font>
# vi /etc/systemd/journald.conf<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã‚‹IPv6ã®ä½¿ç”¨ã‚’ç„¡åŠ¹ã«ã™ã‚‹ï¼ˆå¿…è¦ãªå ´åˆï¼‰</font></font></b><div class="spoiler_text"><b>/etc/ssh/sshd_config</b>:<br>
<br>
<pre><code class="plaintext hljs">AddressFamily inet
</code></pre><br>
<b>/etc/sysconfig/chronyd</b>:<br>
<pre><code class="plaintext hljs">OPTIONS="-4"
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã®æ™‚é–“ã®é–¢é€£æ€§ã¯é‡è¦ãªã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã€Œã™ãã«ä½¿ãˆã‚‹ã€ã®ã§ã€å†èµ·å‹•æ™‚ã«æ™‚è¨ˆã®ç¾åœ¨ã®çŠ¶æ…‹ã‚’ä¿å­˜ã™ã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æ©Ÿèƒ½ãŒãªã„ãŸã‚ã€åŒæœŸãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ãŸã‚ã®éå¸¸ã«å„ªã‚ŒãŸé«˜é€Ÿãƒ‡ãƒ¼ãƒ¢ãƒ³</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-chrony-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ãŠã‚Šã€è‡ªå‹•çš„ã«èµ·å‹•ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">NTPã‚µãƒ¼ãƒãƒ¼ã‚’æ¬¡ã®ã‚µãƒ¼ãƒãƒ¼ã«å¤‰æ›´ã§ãã¾ã™ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/chrony.conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">server 0.ru.pool.ntp.org iburst<font></font>
server 1.ru.pool.ntp.org iburst<font></font>
server 2.ru.pool.ntp.org iburst<font></font>
server 3.ru.pool.ntp.org iburst<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒˆãƒªãƒƒã‚¯</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç§ãŸã¡ã®ç›®æ¨™ã¯5GHzå‘¨æ³¢æ•°ã§å‹•ä½œã™ã‚‹Wi-Fiãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ãªã®ã§ã€äº‹å‰ã«</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é©šãã«å‚™ãˆ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ƒyum info crda </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦ç´„ï¼š802.11ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¦åˆ¶æº–æ‹ ãƒ‡ãƒ¼ãƒ¢ãƒ³</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ‚ªæ„ã®ã‚ã‚‹è¨­è¨ˆã¯ã€ã¨ã‚Šã‚ã‘ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«é‡ç‚¹ã‚’ç½®ã„ã¦ãŠã‚Šã€5 GHzã®å‘¨æ³¢æ•°ã¨ã€Œå¤§ããªã€ç•ªå·ã®ãƒãƒ£ãƒãƒ«ã®ä½¿ç”¨ï¼ˆãƒ­ã‚·ã‚¢ã§ï¼‰ã‚’ã€Œç¦æ­¢ã€ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒˆãƒªãƒƒã‚¯ã¯ã€æœ¬åœŸ/éƒ½å¸‚ã®åå‰ã‚’ä½¿ç”¨ã›ãšã«ã€ã¤ã¾ã‚Šæ¬¡ã®ä»£ã‚ã‚Šã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã™ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># timedatectl set-timezone Europe/Moscow
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ¬ã‚¹ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># timedatectl set-timezone Etc/GMT-3
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã®æœ€å¾Œã®ä»•ä¸Šã’ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># hostnamectl set-hostname router
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/root/.bash_profile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">. . .<font></font>
<font></font>
# User specific environment and startup programs<font></font>
<font></font>
export PROMPT_COMMAND="echo -n $(($(&lt;/sys/class/thermal/thermal_zone0/temp) / 1000))\'C\ "<font></font>
export LANG=en_US.UTF-8<font></font>
export PATH=$PATH:$HOME/bin<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. CentOSã‚¢ãƒ‰ã‚ªãƒ³</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šè¨˜ã®ã™ã¹ã¦ã¯ã€Raspberry Piã«ã€Œãƒãƒ‹ãƒ©ã€CentOSã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®å®Œå…¨ãªæ‰‹é †ã¨è¦‹ãªã™ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">10ç§’æœªæº€ã§ï¼ˆå†ï¼‰èµ·å‹•ã—ã€15ãƒ¡ã‚¬ãƒã‚¤ãƒˆæœªæº€ã®RAMã¨1.5ã‚®ã‚¬ãƒã‚¤ãƒˆã®microSDã‚’ä½¿ç”¨ã™ã‚‹PCã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆå®Ÿéš›ã«ã¯ã€ä¸å®Œå…¨ãª/ãƒ–ãƒ¼ãƒˆã®ãŸã‚ã«1ã‚®ã‚¬ãƒã‚¤ãƒˆæœªæº€ã§ã™ãŒã€æœ€å¾Œã¾ã§æ­£ç›´ã«ãªã‚Šã¾ã™ï¼‰ï¼š</font></font><br>
<img src="https://habrastorage.org/webt/mu/0g/cf/mu0gcfyiokq0x_2dysrb1ieh0ke.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/xx/l3/_g/xxl3_gukovfw0zawwvvy8ua0dtw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wt/yc/-9/wtyc-9erdcdx-rvqnnjite7c9ru.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã®Wi-Fiã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã¯ã€æ¨™æº–ã®CentOSãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®æ©Ÿèƒ½ã‚’å°‘ã—æ‹¡å¼µã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãšã€å†…è”µWi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ï¼‰ã‚’ã€Œãƒãƒ³ãƒ—ã€ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¯è¨€ã†ï¼š</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry 3BãŠã‚ˆã³3B + </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã®</font><font style="vertical-align: inherit;">Wifi + </font><font style="vertical-align: inherit;">Raspberry PI 3B / 3B +ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€CentOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦é…å¸ƒã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã®è¨˜äº‹ã‚’ä½¿ç”¨ã—ã¦å•é¡Œã‚’ç†è§£ã—ã€ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’å…¥æ‰‹ã—ã¦Wi-Fiã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ãã¾ã™ã€‚</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã§ããªã„ã“ã¨ã¯ã€å€‹äººçš„ãªä½¿ç”¨ã‚’ç¦ã˜ã‚‰ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">CentOSã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³Wi-Fiãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ã€Broadcomé–‹ç™ºè€…ã®å¯¾å¿œã™ã‚‹ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ï¼ˆåŒã˜å«Œã„ãªãƒã‚¤ãƒŠãƒªBLOBãªã©ï¼‰ã«ç½®ãæ›ãˆã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã‚ˆã‚Šã€ç‰¹ã«ã€ACã‚’ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fiãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text">      :<br>
<br>
<pre><code class="plaintext hljs"># journalctl | grep $(basename $(readlink /sys/class/net/wlan0/device/driver))<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: F1 signature read @0x18000000=0x15264345<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: brcmf_fw_map_chip_to_name: using brcm/brcmfmac43455-sdio.bin for chip 0x004345(17221) rev 0x000006<font></font>
Jan 01 04:00:03 router kernel: usbcore: registered new interface driver brcmfmac<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: brcmf_c_preinit_dcmds: Firmware version = wl0: Mar  1 2015 07:29:38 version 7.45.18 (r538002) FWID 01-6a2c8ad4<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: brcmf_c_preinit_dcmds: CLM version = API: 12.2 Data: 7.14.8 Compiler: 1.24.9 ClmImport: 1.24.9 Creation: 2014-09-02 03:05:33 Inc Data: 7.17.1 Inc Compiler: 1.26.11 Inc ClmImport: 1.26.11 Creation: 2015-03-01 07:22:34 <font></font>
</code></pre><br>
,    7.45.18  01.03.2015,     : <b>43455</b> (brcmfmac43455-sdio.bin).<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   Raspbian</a>.      microSD      .        Linux    :<br>
<br>
<pre><code class="plaintext hljs"># wget https://downloads.raspberrypi.org/raspbian_lite_latest<font></font>
# unzip -p raspbian_lite_latest &gt; raspbian.img<font></font>
# fdisk -l raspbian.img<font></font>
Disk raspbian.img: 2 GiB, 2197815296 bytes, 4292608 sectors<font></font>
Units: sectors of 1 * 512 = 512 bytes<font></font>
Sector size (logical/physical): 512 bytes / 512 bytes<font></font>
I/O size (minimum/optimal): 512 bytes / 512 bytes<font></font>
Disklabel type: dos<font></font>
Disk identifier: 0x17869b7d<font></font>
<font></font>
Device        Boot  Start     End Sectors  Size Id Type<font></font>
raspbian.img1        8192  532480  524289  256M  c W95 FAT32 (LBA)<font></font>
raspbian.img2      540672 4292607 3751936  1.8G 83 Linux<font></font>
<font></font>
# mount -t ext4 -o loop,offset=$((540672 * 512)) raspbian.img /mnt<font></font>
# cp -fv /mnt/lib/firmware/brcm/*43455* ...<font></font>
'/mnt/lib/firmware/brcm/brcmfmac43455-sdio.bin' -&gt; ...<font></font>
'/mnt/lib/firmware/brcm/brcmfmac43455-sdio.clm_blob' -&gt; ...<font></font>
'/mnt/lib/firmware/brcm/brcmfmac43455-sdio.txt' -&gt; ...<font></font>
# umount /mnt<font></font>
</code></pre><br>
   Wi-Fi       Â«Â»   <b>/usr/lib/firmware/brcm/</b><br>
<br>
     :<br>
<br>
<pre><code class="plaintext hljs"># journalctl | grep $(basename $(readlink /sys/class/net/wlan0/device/driver))<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: F1 signature read @0x18000000=0x15264345<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: brcmf_fw_map_chip_to_name: using brcm/brcmfmac43455-sdio.bin for chip 0x004345(17221) rev 0x000006<font></font>
Jan 01 04:00:03 router kernel: usbcore: registered new interface driver brcmfmac<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: brcmf_c_preinit_dcmds: Firmware version = wl0: Feb 27 2018 03:15:32 version 7.45.154 (r684107 CY) FWID 01-4fbe0b04<font></font>
Jan 01 04:00:03 router kernel: brcmfmac: brcmf_c_preinit_dcmds: CLM version = API: 12.2 Data: 9.10.105 Compiler: 1.29.4 ClmImport: 1.36.3 Creation: 2018-03-09 18:56:28 <font></font>
</code></pre><br>
: 7.45.154  27.02.2018.<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã‚‚ã¡ã‚ã‚“EPELï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># cat &gt; /etc/yum.repos.d/epel.repo &lt;&lt; EOF<font></font>
[epel]<font></font>
name=Epel rebuild for armhfp<font></font>
baseurl=https://armv7.dev.centos.org/repodir/epel-pass-1/<font></font>
enabled=1<font></font>
gpgcheck=0<font></font>
EOF<font></font>
<font></font>
# yum clean all<font></font>
# rm -rfv /var/cache/yum<font></font>
# yum update<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆã¨ä»Šå¾Œã®èª²é¡Œ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šè¨˜ã§åˆæ„ã—ãŸã‚ˆã†ã«ã€ã€ŒMalinkaã€ã¯ã€Œãƒ¯ã‚¤ãƒ¤ãƒ¼ã€ã«ã‚ˆã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«æ¥ç¶šã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒã¾ã£ãŸãåŒã˜æ–¹æ³•ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹ã¨ã—ã¾ã™ã€‚ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã€DHCPã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦å‹•çš„ã«ç™ºè¡Œã•ã‚Œã¾ã™ï¼ˆMACã«ãƒªãƒ³ã‚¯ã§ãã¾ã™ï¼‰ã€‚ã“ã®å ´åˆã€ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã®æœ€çµ‚ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¾Œã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚±ãƒ¼ãƒ–ãƒ«ã‚’ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ã™ã‚‹ã ã‘ã§ååˆ†ã§ã€ã™ã¹ã¦ã®æº–å‚™ãŒæ•´ã„ã¾ã™ã€‚</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemd-networkd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨</font><b><font style="vertical-align: inherit;">ã—ãŸ</font></b><font style="vertical-align: inherit;">æ‰¿èª</font><font style="vertical-align: inherit;">ã¯åˆ¥ã®è¨˜äº‹ã®ãƒˆãƒ”ãƒƒã‚¯ã§ã‚ã‚Šã€ã“ã“ã§ã¯è€ƒæ…®ã—ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Raspberryã®Wi-Fiã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€çµ„ã¿è¾¼ã¿ã®ã‚¤ãƒ¼ã‚µãƒãƒƒãƒˆã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼ˆeth0ï¼‰ã¯å¤–éƒ¨ã«ã‚ã‚Šã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã¯é™çš„ã«ç•ªå·ã‚’ä»˜ã‘ã¾ã™ï¼ˆä¾‹ï¼š192.168.0.0/24ï¼‰ã€‚ Malinkaã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š192.168.0.1ã€‚å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆï¼‰ã¯DHCPã‚µãƒ¼ãƒãƒ¼ã‚’æ“ä½œã—ã¾ã™ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡ä¸€ãªå‘½åã®å•é¡Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰åãªã‚°ã‚¢ãƒ†ãƒãƒ©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -systemdãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šã«é–¢ã‚ã‚‹ã™ã¹ã¦ã®äººã‚’å¾…ã¤2ã¤ã®ãƒˆãƒ©ãƒ–ãƒ«ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸¦åˆ—ã‚«ã‚ªã‚¹ï¼ˆå™æƒ…çš„ãªä½™è«‡ï¼‰</font></font></b><div class="spoiler_text">     <b>systemd</b>  .  <b>systemd</b>     ,  ,      <strike></strike> ,            .<br>
<br>
   ,        systemd-   Â« Â»    LSB-.  ,     Â« Â»  ,     .<br>
</div></div><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wanã¨ã„ã†</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å®šæ•°åã®2ã¤ã®ä»®æƒ³ãƒ–ãƒªãƒƒã‚¸ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’ä½œæˆã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æœ€åˆã«Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ã€Œæ¥ç¶šã€ã—ã€2ç•ªç›®ã«ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã®eth0ã‚’æ¥ç¶šã—ã¾ã™ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/lan.netdev</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[NetDev]<font></font>
Name=lan<font></font>
Kind=bridge<font></font>
</code></pre> <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/lan.network</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[Match]<font></font>
Name=lan<font></font>
<font></font>
[Network]<font></font>
Address=192.168.0.1/24<font></font>
IPForward=yes<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/wan.netdev</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[NetDev]<font></font>
Name=wan<font></font>
Kind=bridge<font></font>
#MACAddress=xx:xx:xx:xx:xx:xx<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/wan.network</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[Match]<font></font>
Name=wan<font></font>
<font></font>
[Network]<font></font>
DHCP=ipv4<font></font>
IPForward=yes<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPForward = yes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®å ´åˆã€sysctlã‚’ä»‹ã—ãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã‚«ãƒ¼ãƒãƒ«ã«ãƒ’ãƒ³ãƒˆã‚’ä¸ãˆã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MACAddress =</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¡ãƒ³ãƒˆã‚’</font><b><font style="vertical-align: inherit;">å¤–ã—</font></b><font style="vertical-align: inherit;">ã€å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€eth0ã‚’æ¥ç¶šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã€Œå‡ä¸€æ€§ã®å•é¡Œã€ã‚’è¦šãˆã¦ã€ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®MACã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># cat /sys/class/net/eth0/address 
</code></pre> <br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/eth.networkã‚’</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä½œæˆã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">[Match]<font></font>
MACAddress=b8:27:eb:xx:xx:xx<font></font>
<font></font>
[Network]<font></font>
Bridge=wan<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥å‰ã®eth0æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã€ã€Œraspberryã€ã‚’å†èµ·å‹•ã—ã¦ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’å–å¾—ã—ã¾ã™ï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ãŠãã‚‰ãå¤‰æ›´ã•ã‚Œã¾ã™ï¼‰ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># rm -fv /etc/systemd/network/eth0.network<font></font>
# reboot<font></font>
</code></pre> <br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. DNSMASQ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wi-Fiã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã®è£½é€ ã«ã¤ã„ã¦ã¯ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dnsmasq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hostapdã®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¤ãƒ¼ãƒˆã‚«ãƒƒãƒ—ãƒ«ã«å‹ã‚‹ã‚‚ã®</font><font style="vertical-align: inherit;">ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ç§ã®è€ƒãˆã§ã¯ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èª°ã‚‚ãŒå¿˜ã‚ŒãŸã‚‰...</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">hostapd</a> â€”  ,   Wi-Fi  ( ,          <b>lan</b> Â«Â»),     .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">dnsmasq</a> â€”    :  IP-, DNS-,       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dnsmasqã‹ã‚‰å§‹ã‚ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># yum install dnsmasq
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/resolv.conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">nameserver 1.1.1.1<font></font>
nameserver 1.0.0.1<font></font>
nameserver 8.8.8.8<font></font>
nameserver 8.8.4.4<font></font>
nameserver 77.88.8.8<font></font>
nameserver 77.88.8.1<font></font>
domain router.local<font></font>
search router.local<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŠå¥½ã¿ã«åˆã‚ã›ã¦ç·¨é›†ã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å°é™ã®</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/dnsmasq.conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">domain-needed<font></font>
bogus-priv<font></font>
interface=lan<font></font>
bind-dynamic<font></font>
expand-hosts<font></font>
domain=#<font></font>
dhcp-range=192.168.0.100,192.168.0.199,255.255.255.0,24h<font></font>
conf-dir=/etc/dnsmasq.d<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã®ã€Œé­”æ³•ã€ã¯</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bind-dynamic</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™</font><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã¯ã€dnsmasqãƒ‡ãƒ¼ãƒ¢ãƒ³ã«ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface = lanãŒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚·ã‚¹ãƒ†ãƒ </font><b><font style="vertical-align: inherit;">ã«</font></b><font style="vertical-align: inherit;">è¡¨ç¤ºã•ã‚Œã‚‹ã®ã‚’å¾…æ©Ÿã—</font><font style="vertical-align: inherit;">ã€èµ·å‹•å¾Œã®èª‡ã‚Šã‚ã‚‹å­¤ç‹¬ã®æ”»æ’ƒã‹ã‚‰æ°—çµ¶ã—ãªã„ã‚ˆã†ã«</font><font style="vertical-align: inherit;">æŒ‡ç¤ºã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># systemctl enable dnsmasq<font></font>
# systemctl start dnsmasq; journalctl -f<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. HOSTAPD</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€é­”æ³•ã®hostapdæ§‹æˆã€‚</font><font style="vertical-align: inherit;">èª°ã‹ãŒã“ã®è¨˜äº‹ã‚’æ­£ç¢ºã«æ¢ã—ã¦ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹ã“ã¨ã¯é–“é•ã„ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hostapdã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å‰ã«ã€ã€Œå‡ä¸€æ€§ã®å•é¡Œã€ã«å¯¾å‡¦ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">çµ„ã¿è¾¼ã¿ã®wlan0 Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¯ã€è¿½åŠ ã®USB Wi-Fiæ©Ÿå™¨ã‚’æ¥ç¶šã™ã‚‹ã¨ãã«ã€åå‰ã‚’wlan1ã«ç°¡å˜ã«å¤‰æ›´ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®åå‰ã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚ï¼ˆãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ï¼‰ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã«ä¸€æ„ã®åå‰ã‚’ä»˜ã‘ã€MACã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãƒã‚¤ãƒ³ãƒ‰ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çµ„ã¿è¾¼ã¿ã®Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®å ´åˆã€ã“ã‚Œã¯ã¾ã wlan0ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># cat /sys/class/net/wlan0/address <font></font>
b8:27:eb:xx:xx:xx<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/wl0.linkã‚’</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä½œæˆã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">[Match]<font></font>
MACAddress=b8:27:eb:xx:xx:xx<font></font>
<font></font>
[Link]<font></font>
Name=wl0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã§ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wl0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒçµ„ã¿è¾¼ã¿Wi-Fiã§</font><font style="vertical-align: inherit;">ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¦‹ã‚‹ãŸã‚ã«ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã‚’å†èµ·å‹•ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># yum install hostapd wireless-tools
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/hostapd/hostapd.conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">ssid=rpi<font></font>
wpa_passphrase=1234567890<font></font>
<font></font>
channel=36<font></font>
<font></font>
country_code=US<font></font>
<font></font>
interface=wl0<font></font>
bridge=lan<font></font>
<font></font>
driver=nl80211<font></font>
<font></font>
auth_algs=1<font></font>
wpa=2<font></font>
wpa_key_mgmt=WPA-PSK<font></font>
rsn_pairwise=CCMP<font></font>
<font></font>
macaddr_acl=0<font></font>
<font></font>
hw_mode=a<font></font>
wmm_enabled=1<font></font>
<font></font>
# N<font></font>
ieee80211n=1<font></font>
require_ht=1<font></font>
ht_capab=[MAX-AMSDU-3839][HT40+][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40]<font></font>
<font></font>
# AC<font></font>
ieee80211ac=1<font></font>
require_vht=1<font></font>
ieee80211d=0<font></font>
ieee80211h=0<font></font>
vht_capab=[MAX-AMSDU-3839][SHORT-GI-80]<font></font>
vht_oper_chwidth=1<font></font>
vht_oper_centr_freq_seg0_idx=42<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GKChP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’1åˆ†é–“å¿˜ã‚Œãšã«ã€</font><font style="vertical-align: inherit;">å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ã€æ“ä½œæ€§ã‚’æ‰‹å‹•ã§ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># hostapd /etc/hostapd/hostapd.conf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hostapdã¯ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«èµ·å‹•ã—ã€ãã®çŠ¶æ…‹ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å¤‰æ›ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¨ãƒ©ãƒ¼ãŒãªã„å ´åˆã€ACãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã™ã§ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">hostapdã‚’åœæ­¢ã™ã‚‹ã«ã¯-Ctrl-Cã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•æ™‚ã«hostapdãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¨™æº–ã§å‹•ä½œã—ã¦ã„ã‚‹å ´åˆï¼ˆsystemctl enable hostapdï¼‰ã€æ¬¡ã®å†èµ·å‹•å¾Œã«ã€ã€Œ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wl0 interface not found</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã®è¨ºæ–­ã§ãƒ‡ãƒ¼ãƒ¢ãƒ³ã®ã€Œè¡€ä¸­ãƒ‡ãƒ¼ãƒ¢ãƒ³ã€ã‚’å–å¾—ã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã€Œä¸¦åˆ—ã‚«ã‚ªã‚¹ã€ã®çµæœã¨ã—ã¦ã€hostapdã¯ã‚«ãƒ¼ãƒãƒ«ãŒãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹ã‚ˆã‚Šã‚‚æ—©ãçµ‚äº†ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã¯éº»è–¬ã§ã„ã£ã±ã„ã§ã™ï¼šãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒé–‹å§‹ã™ã‚‹å‰ã®å¼·åˆ¶ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆæ•°åˆ†é–“ï¼‰ã‹ã‚‰ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å¤–è¦³ã‚’ç›£è¦–ã—ã€ãƒ›ã‚¹ãƒˆãƒ‘ãƒƒãƒ‰ã‚’ï¼ˆå†ï¼‰é–‹å§‹ã™ã‚‹åˆ¥ã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¾ã§ã€‚</font><font style="vertical-align: inherit;">ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‹ãªã‚Šæ©Ÿèƒ½ã—ã¦ã„ã¾ã™ãŒã€ã²ã©ãé†œã„ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç§ãŸã¡</font><font style="vertical-align: inherit;">ã¯ã€ã€Œç›®æ¨™ã€ã¨ã€Œ</font><s><font style="vertical-align: inherit;">ã‚¿ã‚¹ã‚¯</font></s><font style="vertical-align: inherit;">ã€ã€ã€Œä¾å­˜é–¢ä¿‚ã€ã‚’</font><font style="vertical-align: inherit;">å‚™ãˆ</font><font style="vertical-align: inherit;">ãŸç´ æ™´ã‚‰ã—ã„</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemdã®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ©ã‘ã‚’æ±‚ã‚ã¦ã„ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
é…å¸ƒã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’</font><b><font style="vertical-align: inherit;">/etc/systemd/system/hostapd.serviceã«</font></b><font style="vertical-align: inherit;">ã‚³ãƒ”ãƒ¼ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><s><font style="vertical-align: inherit;"></font></s><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs"># cp -fv /usr/lib/systemd/system/hostapd.service /etc/systemd/system
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ãã®å†…å®¹ã‚’æ¬¡ã®å½¢å¼ã«ã—ã¾ã™ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=Hostapd IEEE 802.11 AP, IEEE 802.1X/WPA/WPA2/EAP/RADIUS Authenticator<font></font>
After=sys-subsystem-net-devices-wl0.device<font></font>
BindsTo=sys-subsystem-net-devices-wl0.device<font></font>
<font></font>
[Service]<font></font>
Type=forking<font></font>
PIDFile=/run/hostapd.pid<font></font>
ExecStart=/usr/sbin/hostapd /etc/hostapd/hostapd.conf -P /run/hostapd.pid -B<font></font>
<font></font>
[Install]<font></font>
WantedBy=sys-subsystem-net-devices-wl0.device<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ›´æ–°ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®é­”æ³•ã¯ã€hostapdã‚’å‹•çš„ã«æ–°ã—ã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ-wl0ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨ãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒèµ·å‹•ã—ã€è¡¨ç¤ºã•ã‚Œãªããªã‚‹ã¨åœæ­¢ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãã‚Œã¯ã™ã¹ã¦ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã™-ã‚·ã‚¹ãƒ†ãƒ ã‚’å†èµ·å‹•ã™ã‚‹ã“ã¨ãªãã€‚</font><font style="vertical-align: inherit;">ç‰¹ã«ã“ã®æ‰‹æ³•ã¯ã€ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€USB Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã«æ¥ç¶šã™ã‚‹ã¨ãã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># systemctl enable hostapd<font></font>
# reboot<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. IPTABLES</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€ŒShta ???ã€</font><font style="vertical-align: inherit;">Â©ã¯ã„ã€ã¯ã„ï¼</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemdã¯</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚Šã¾ã›ã‚“</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">newfangledã®çµ„ã¿åˆã‚ã›ï¼ˆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firewalld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®å½¢å¼ï¼‰ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã‚‰ã¯</font><font style="vertical-align: inherit;">æœ€çµ‚çš„ã«åŒã˜ã“ã¨ã‚’è¡Œã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯å¤ãè‰¯ã</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iptables</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚ãã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€èµ·å‹•å¾Œã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ«ãƒ¼ãƒ«ã‚’ã‚«ãƒ¼ãƒãƒ«ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€å¸¸é§ã—ãŸã‚Šãƒªã‚½ãƒ¼ã‚¹ã‚’æ¶ˆè²»ã—ãŸã‚Šã™ã‚‹ã“ã¨ãªãé™ã‹ã«ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">Systemdã«ã¯ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆãª</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPMasquerade =ãŒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚Šã¾ã™ãŒã€ã‚¢ãƒ‰ãƒ¬ã‚¹å¤‰æ›ï¼ˆNATï¼‰ã¨ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã«iptablesã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"># yum install iptables-services<font></font>
# systemctl enable iptables ip6tables<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦iptablesè¨­å®šã‚’ä¿å­˜ã™ã‚‹ã“ã¨ã‚’å¥½ã¿ã¾ã™ï¼ˆä¾‹ï¼‰ï¼š</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Disable IPv6</span>
<span class="hljs-comment">#</span><font></font>
ip6tables --flush<font></font>
ip6tables --delete-chain<font></font>
<font></font>
ip6tables --policy INPUT   DROP<font></font>
ip6tables --policy FORWARD DROP<font></font>
ip6tables --policy OUTPUT  DROP<font></font>
<font></font>
ip6tables-save &gt; /etc/sysconfig/ip6tables<font></font>
systemctl restart ip6tables<font></font>
<font></font>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Cleaning</span>
<span class="hljs-comment">#</span><font></font>
iptables -F<font></font>
iptables -X<font></font>
iptables -t nat -F<font></font>
iptables -t nat -X<font></font>
iptables -t mangle -F<font></font>
iptables -t mangle -X<font></font>
iptables -P INPUT DROP<font></font>
iptables -P OUTPUT ACCEPT<font></font>
iptables -P FORWARD ACCEPT<font></font>
<font></font>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Loopback, lan</span>
<span class="hljs-comment">#</span><font></font>
iptables -A INPUT -i lo  -j ACCEPT<font></font>
iptables -A INPUT -i lan -j ACCEPT<font></font>
<font></font>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Ping, Established</span>
<span class="hljs-comment">#</span>
iptables -A INPUT -p icmp  --icmp-type <span class="hljs-built_in">echo</span>-request    -j ACCEPT<font></font>
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT<font></font>
<font></font>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># NAT</span>
<span class="hljs-comment">#</span><font></font>
iptables -t nat -A POSTROUTING -o wan -j MASQUERADE<font></font>
<font></font>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Saving</span>
<span class="hljs-comment">#</span><font></font>
iptables-save &gt; /etc/sysconfig/iptables<font></font>
systemctl restart iptables<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šè¨˜ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã€ŒMalinkaã€ã¨ã®æ–°ã—ã„æœ‰ç·šsshæ¥ç¶šã‚’ç¢ºç«‹ã§ããªããªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã†ã§ã™ã€ç§ãŸã¡ã¯Wi-Fiãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆçµŒç”±ã€ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚ç¾åœ¨ã¯ã€Œç„¡ç·šçµŒç”±ã€ã®ã¿ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚±ãƒ¼ãƒ–ãƒ«ã‚’ã‚¤ãƒ¼ã‚µãƒãƒƒãƒˆã«æ¥ç¶šã—ã¦ã‚µãƒ¼ãƒ•ã‚£ãƒ³ã‚’å§‹ã‚ã¾ã™ï¼</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.ãƒœãƒ¼ãƒŠã‚¹ï¼š+ 2.4 GHz</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šè¨˜ã®å›³é¢ã‹ã‚‰æœ€åˆã®ãƒ©ã‚ºãƒ™ãƒªãƒ¼ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’çµ„ã¿ç«‹ã¦ãŸã¨ãã€ç§ã®ãƒ•ã‚¡ãƒ¼ãƒ ã§ã€è¨­è¨ˆä¸Šã®åˆ¶é™ã®ãŸã‚ã«ã€Wi-FiãŒã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€ã‚’ã¾ã£ãŸãèªè­˜ã§ããªã„å¤šæ•°ã®ã‚¬ã‚¸ã‚§ãƒƒãƒˆã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚ 802.11b / g / nã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’å†æ§‹æˆã™ã‚‹ã“ã¨ã¯ã‚¹ãƒãƒ¼ãƒ„ãƒãƒ³ã‚‰ã—ã„ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãªãœãªã‚‰ã€ã“ã®å ´åˆã®ã€Œç„¡ç·šã€ã®æœ€å¤§é€Ÿåº¦ã¯40 Mbpsã‚’è¶…ãˆã¦ãŠã‚‰ãšã€ç§ã®ãŠæ°—ã«å…¥ã‚Šã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯ï¼ˆã‚±ãƒ¼ãƒ–ãƒ«çµŒç”±ã§ï¼‰100ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€ã“ã®å•é¡Œã®è§£æ±ºç­–ã¯ã™ã§ã«è€ƒæ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚2.4GHzã§å‹•ä½œã™ã‚‹2ã¤ç›®ã®Wi-Fiã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã¨2ã¤ç›®ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚æœ€å¯„ã‚Šã®å±‹å°ã§ã€ç§ã¯æœ€åˆã®ã‚‚ã®ã§ã¯ãªã2ç•ªç›®ã®USB Wi-Fiã®ã€Œå£ç¬›ã€ã‚’è³¼å…¥ã—ã¾ã—ãŸã€‚å£²ã‚Šæ‰‹ã¯ã€ãƒãƒƒãƒ—ã‚»ãƒƒãƒˆã€Linux ARMã‚³ã‚¢ã¨ã®äº’æ›æ€§ã€ãŠã‚ˆã³APãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹å¯èƒ½æ€§ã«ã¤ã„ã¦ã®è³ªå•ã«æ‚©ã¾ã•ã‚Œã¾ã—ãŸï¼ˆå½¼ã¯æœ€åˆã«å§‹ã‚ã¾ã—ãŸï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†…è”µã®Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨åŒæ§˜ã«ã€ã€Œå£ç¬›ã€ã‚’æ§‹æˆã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€åå‰ã‚’</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wl1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«å¤‰æ›´ã—</font><b><font style="vertical-align: inherit;">ã¾ã™</font></b><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># cat /sys/class/net/wlan0/address <font></font>
b0:6e:bf:xx:xx:xx<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/network/wl1.link</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[Match]<font></font>
MACAddress=b0:6e:bf:xx:xx:xx<font></font>
<font></font>
[Link]<font></font>
Name=wl1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–°ã—ã„Wi-Fiã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ç®¡ç†ã¯åˆ¥ã®hostapdãƒ‡ãƒ¼ãƒ¢ãƒ³ã«å§”è¨—ã—ã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯ã€ã‚·ã‚¹ãƒ†ãƒ å†…ã«å³å¯†ã«å®šç¾©ã•ã‚ŒãŸã€Œå£ç¬›ã€ã®å­˜åœ¨ã«å¿œã˜ã¦é–‹å§‹ãŠã‚ˆã³åœæ­¢ã—ã¾ã™ï¼šwl1ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/hostapd/hostapd2.conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">ssid=rpi2<font></font>
wpa_passphrase=1234567890<font></font>
<font></font>
#channel=1<font></font>
#channel=6<font></font>
channel=11<font></font>
<font></font>
interface=wl1<font></font>
bridge=lan<font></font>
<font></font>
driver=nl80211<font></font>
<font></font>
auth_algs=1<font></font>
wpa=2<font></font>
wpa_key_mgmt=WPA-PSK<font></font>
rsn_pairwise=CCMP<font></font>
<font></font>
macaddr_acl=0<font></font>
<font></font>
hw_mode=g<font></font>
wmm_enabled=1<font></font>
<font></font>
# N<font></font>
ieee80211n=1<font></font>
require_ht=1<font></font>
ht_capab=[HT40][SHORT-GI-20][SHORT-GI-40][DSSS_CCK-40]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯ã€USB Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®ãƒ¢ãƒ‡ãƒ«ã«ç›´æ¥ä¾å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€ç°¡å˜ãªã‚³ãƒ”ãƒ¼/è²¼ã‚Šä»˜ã‘ã§æ°—ãŒä»˜ãã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é…å¸ƒã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/system/hostapd2.serviceã«</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ”ãƒ¼ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># cp -fv /usr/lib/systemd/system/hostapd.service /etc/systemd/system/hostapd2.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ãã®å†…å®¹ã‚’æ¬¡ã®å½¢å¼ã«ã—ã¾ã™ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=Hostapd IEEE 802.11 AP, IEEE 802.1X/WPA/WPA2/EAP/RADIUS Authenticator<font></font>
After=sys-subsystem-net-devices-wl1.device<font></font>
BindsTo=sys-subsystem-net-devices-wl1.device<font></font>
<font></font>
[Service]<font></font>
Type=forking<font></font>
PIDFile=/run/hostapd2.pid<font></font>
ExecStart=/usr/sbin/hostapd /etc/hostapd/hostapd2.conf -P /run/hostapd2.pid -B<font></font>
<font></font>
[Install]<font></font>
WantedBy=sys-subsystem-net-devices-wl1.device<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–°ã—ã„hostapdã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># systemctl enable hostapd2
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã§å…¨éƒ¨ã§ã™ï¼</font><font style="vertical-align: inherit;">ã€Œã•ã•ã‚„ãã€ã¨ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ã€è‡ªä½“ã‚’æºã•ã¶ã£ã¦ã€å‘¨ã‚Šã®ç„¡ç·šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’è¦‹ã¦ãã ã•ã„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€USB Wi-Fiã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨Raspberryé›»æºã®å“è³ªã«ã¤ã„ã¦è­¦å‘Šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã€Œãƒ›ãƒƒãƒˆãƒ›ã‚¤ãƒƒã‚¹ãƒ«ã«ã€æ¥ç¶šã™ã‚‹ã¨ã€çŸ­æ™‚é–“ã®é›»æ°—çš„ãƒˆãƒ©ãƒ–ãƒ«ãŒåŸå› ã§ã€Œãƒ©ã‚ºãƒ™ãƒªãƒ¼ãŒãƒãƒ³ã‚°ã€ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja458984/index.html">å–å¼•æ‰€ã§å–å¼•ã™ã‚‹ãŸã‚ã®æœ€åˆã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ï¼š3ã¤ã®åˆæœŸã‚¹ãƒ†ãƒƒãƒ—</a></li>
<li><a href="../ja458986/index.html">PostgreSQLãƒ¬ã‚·ãƒ”ï¼šHTMLãŠã‚ˆã³URLã‹ã‚‰PDFãŠã‚ˆã³PSã¸ã®å¤‰æ›</a></li>
<li><a href="../ja458988/index.html">ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒªãƒ³ã‚°ã€ã¾ãŸã¯Surfaceã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã«ãªã‚‹ãŸã‚ã«çŸ¥ã£ã¦ãŠãã¹ãã“ã¨ã€‚ãƒ‘ãƒ¼ãƒˆ4.ãƒ¢ãƒ‡ãƒ«ã€æ³•ç·šã€ã‚¹ã‚¤ãƒ¼ãƒ—</a></li>
<li><a href="../ja458990/index.html">ã‚³ãƒ¼ãƒ‰å†…ã®ã‚³ãƒ¡ãƒ³ãƒˆã§ç†±å¿ƒã«åœæ­¢ã™ã‚‹</a></li>
<li><a href="../ja458992/index.html">Kerasã§ã®ãƒ€ãƒŸãƒ¼ã¨å®Ÿè£…ã¸ã®æ³¨æ„</a></li>
<li><a href="../ja458996/index.html">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹-ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è‹¦ã—ã‚ãªã„æ–¹æ³•</a></li>
<li><a href="../ja459000/index.html">Halo 2ã‚’æ”¹å–„ã—ã‚ˆã†ã¨ã—ãŸãŒã€ã»ã¨ã‚“ã©å°ç„¡ã—ã«ã•ã‚ŒãŸæ–¹æ³•</a></li>
<li><a href="../ja459002/index.html">HTTPSã®æ§‹æˆæ–¹æ³•-SSLæ§‹æˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒå½¹ç«‹ã¡ã¾ã™</a></li>
<li><a href="../ja459004/index.html">ã‚°ãƒ©ã‚¹ãƒ›ãƒƒãƒ‘ãƒ¼æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼šã»ã¼è¤‡é›‘</a></li>
<li><a href="../ja459012/index.html">æœ€åˆã‹ã‚‰Bitrix24ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>