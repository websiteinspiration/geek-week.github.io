<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏿 🥘 🌑 CなしのMVC：アプリケーションアーキテクチャのSwiftUIは何が変更されますか？ 🧝🏽 🧑🏼 ☃️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MVCは、iOSアプリケーションの作成に使用されるデザインパターンにおける長年の標準です。以前に作成されたiOSアプリケーションの構造は、どこにでも存在する1つの基本コンポーネントに基づいており、それはControllerと呼ばれます。SwiftUIはWWDC19で導入されましたが、そのようなコンポ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CなしのMVC：アプリケーションアーキテクチャのSwiftUIは何が変更されますか？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466591/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVCは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、iOSアプリケーションの作成に使用されるデザインパターンにおける長年の標準です。</font><font style="vertical-align: inherit;">以前に作成されたiOSアプリケーションの構造は、どこにでも存在する1つの基本コンポーネントに基づいており、それは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">SwiftUIはWWDC19で導入され</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ましたが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そのようなコンポーネントはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いわゆる</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大規模なビューコントローラー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の問題は、</font><font style="vertical-align: inherit;">SwiftUIで解決</font><i><font style="vertical-align: inherit;">する</font></i><font style="vertical-align: inherit;">必要があります。</font><font style="vertical-align: inherit;">したがって、コードを正しく分解するための新しい方法を見つける必要があります。</font><font style="vertical-align: inherit;">プラットフォームの現在の状態を見て、iOS13以降用に開発するときに使用できるパラダイムについて考えてみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/wy/ez/gzwyeztpfcnxaja_p5clixcftdg.png" alt="画像"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単方向および双方向アーキテクチャ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大企業が使用するアーキテクチャソリューションのほとんどは双方向です。これは、それらを互いの上にあるレイヤーと考えることができ、データを上下に転送して互いに通信できることを意味します。 MVC、Model-View-ViewModelなどのテンプレート、さらにはコーディネーターを備えたMVVMパターンの多くの実装も、双方向アーキテクチャーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
iOSプラットフォームで現在広く使用されている単方向データストリームの例は、Clean SwiftまたはViperアーキテクチャのVIP（Presentation-Interactive-Presenter）ループです。これらのアーキテクチャは、純粋に単方向ではありません。ルーターと実行可能ファイルはVIPループと双方向で通信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが観察できるもう1つのことは、MVCパターンとそれに基づいて構築された他のパターンがよりベースになっており、1つの画面に配置されていることです。</font><font style="vertical-align: inherit;">通常、アプリケーションのさまざまな部分と相互作用するサービスやモジュールなどを記述するための明確な構造はありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUIのデータフロー</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WWDCプレゼンテーションによると、SwiftUIのビューとモデル/状態を接続する要素は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindableObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコルに対応する特定のStoreクラス</font><b><font style="vertical-align: inherit;">でした</font></b><font style="vertical-align: inherit;">。明確な構造のないすべての状態のすべてのアプリケーションロジックを含む大規模なストアを備えたアプリケーションが存在しないことを願うだけです。 iOSコミュニティはかなり進んでいて、この方向でもっとうまくいくと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MVCとSwiftUIをビューとストアに並べて配置すると、ほぼ同じテンプレートが表示され、ビューコントローラーで発生したのと同様の問題が発生する可能性がありますが、VCの標準コードはありません自然に持っています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a7/ed/-p/a7ed-p_bzegs2_pwqs-ue7rl02o.png" alt="画像"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVCを配置してグラフに格納すると、次のようになります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見すると、CombineはSwiftUIで使用されるアーキテクチャパターンのように見えるかもしれません。</font><font style="vertical-align: inherit;">ただし、Combineは時間の経過とともに値を処理するためのツールにすぎません。</font><font style="vertical-align: inherit;">同様に、RxSwiftを使用するMVVMもMVVMであり、レイヤー間のリンクであり、さまざまな方法で実装されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣言型ユーザーインターフェイスの宣言型アーキテクチャ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SwiftUIは、</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣言型ユーザーインターフェース</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など、簡単に説明でき</font><b><i><font style="vertical-align: inherit;">ます</font></i></b><font style="vertical-align: inherit;">。枠を超えて考え、「</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣言的</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">という言葉に焦点を当てれば、もっと多くのことが達成できると思います</font><font style="vertical-align: inherit;">。最も高度な宣言型アーキテクチャの例は、フロントエンドアプリケーションを開発するときに見つかります。 ELM、Redux、Fluxなどの概念は、SwiftUIおよびCombineインフラストラクチャで簡単に使用できます。 Swiftには</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReSwift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などのいくつかの再実装がすでにありましたが</font><font style="vertical-align: inherit;">、これらの実装を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combineで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み合わせる必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/1_/_o/vu1__ofmdxaqfi8_1utroj2empe.png" alt="画像"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WWDC19からのSwiftUIのデータフローをわずかに変更</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は最初から依存関係なしでSwiftUIを試してみたいと思います。現在、ELMアーキテクチャの簡単な実装を使ってSwiftで実験しています。</font><font style="vertical-align: inherit;">このアーキテクチャは、AppleがWWDCで示した図とよりよく一致しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのアーキテクチャパターンを通じてアプリケーションを説明できます。</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アプリケーションで発生する可能性のあるすべてのイベントを説明するタイプです。</font><font style="vertical-align: inherit;">（単純なアプリケーションでは、これはいくつかの関連する値を持つ列挙型になる可能性があります。大規模なアプリケーションでは、アクションプロトコルに対応する多くの構造を使用できます。）</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（またはReduxのレデューサー）は、現在の状態とサブミットされたアクションを取り、変更された新しい状態を返す単純なクリーン関数です。</font><font style="vertical-align: inherit;">（これらの機能は副作用を引き起こさず、簡単に組み合わせることができます。）</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態は、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの状態を記述する型です。</font><font style="vertical-align: inherit;">（タスクの単純なリストでは配列を使用できます。）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの3つの要素はすべて宣言型であり、それぞれがパズルのテストおよび再利用が可能な小さな部分であり、アプリケーション全体を構成します。</font><font style="vertical-align: inherit;">状態はストアに格納され、ビューはそこから計算できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/pg/0c/gbpg0ch3s30altvwyoz3xm_swvm.png" alt="画像"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純なSwiftアプリケーションの状態、アクション、および更新。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非同期操作の場合、ReduxのミドルウェアオブジェクトやELMのコマンドなどを導入できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既知の任意のアーキテクチャを使用できます。既存のアプリケーションにSwiftUIを徐々に追加すると、これは信頼性が高く安全なアプローチになります。</font><font style="vertical-align: inherit;">新しいアプリケーションがSwiftUIのみを使用して実装されている場合は、よりオープンなアプローチを使用して別の方法を試すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
近い将来にSwiftUIを使用してアプリケーションを開発することを考えている場合は、いくつかの点に注意を払うことをお勧めします。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appleは、アプリケーションアーキテクチャに関する詳細なガイダンスを提供していません。つまり、プログラマーのコミュニティとして、私たちは革新と新しいアプローチの実装のための多くの機会を持っています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューコントローラーの後に残された穴を埋める必要があるため、さまざまなコードベースのはるかに広いスケールが確実に表示されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開いたままにし、ゼロから始めることを恐れないでください。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の実験は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレイグラウンドの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Swift </font><font style="vertical-align: inherit;">で見つけることができます</font><font style="vertical-align: inherit;">（比較として、同じアプリケーションであるUIKitとSwiftUIの実装と使用を示しています）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のステップ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが利用できる方法はたくさんありますが、私はようやくアプリケーション開発に対してはるかに機能的なアプローチを試してみたいと強く思っています。</font><font style="vertical-align: inherit;">コミュニティからいくつかの興味深い解決策を見ることができます。日常業務でSwiftUIを使用できる時間はまだかなりあるので、実験の時間はまだあり、私たちにプレッシャーはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単方向および機能的なアーキテクチャのこの実装について詳しく書く予定です。</font><font style="vertical-align: inherit;">すぐにこれを小さな実際のプロジェクトで使用できるようになることを願っています。このアプローチがどのように実行可能であり、大規模プロジェクトでパフォーマンスの問題があるかについて詳しく説明できます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja466579/index.html">テトリスのランダム化アルゴリズムの歴史</a></li>
<li><a href="../ja466581/index.html">量子ダーウィニズム：客観的現実を説明するアイデアが最初のテストに合格</a></li>
<li><a href="../ja466583/index.html">嘘発見器の簡単な歴史</a></li>
<li><a href="../ja466585/index.html">メッセージブローカーについて理解する。ActiveMQとKafkaを介してメッセージングのメカニズムを学ぶ。第3章カフカ</a></li>
<li><a href="../ja466587/index.html">複数行のサイトのCSS変数とカラーテーマ</a></li>
<li><a href="../ja466593/index.html">状況：ハイブリッドクラウドとIaaSの展望</a></li>
<li><a href="../ja466597/index.html">Mini AI Cup 4の2位の歴史：ペーパーIO</a></li>
<li><a href="../ja466599/index.html">音声認識を使用してキャプチャをバイパスする方法</a></li>
<li><a href="../ja466601/index.html">自己啓発の心理学の本：彼らは意味をなさないでしょうか？</a></li>
<li><a href="../ja466603/index.html">CSSフレームワークを比較するためのツール</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>