<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚öñÔ∏è üêâ üõåüèø Book ‚ÄúKubernetes Patterns: Native Cloud Application Development Patterns‚Äù üë©‚Äç‚úàÔ∏è üö≠ üßù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, habrozhiteli! 
 
 With the development of microservices and containers, approaches to the design, creation and launch of software have changed....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Book ‚ÄúKubernetes Patterns: Native Cloud Application Development Patterns‚Äù</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/490844/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/z1/xp/jr/z1xpjrbdjk7o8hr1ydymen7sxsm.jpeg" align="left" alt="image"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, habrozhiteli! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the development of microservices and containers, approaches to the design, creation and launch of software have changed. </font><font style="vertical-align: inherit;">Explore the new design patterns and principles that are required to implement Kubernetes cloud applications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This book is intended for developers who want to design and develop cloud-based applications for the Kubernetes platform. </font><font style="vertical-align: inherit;">The greatest benefit from it will be readers who are at least a little familiar with containers and want to rise to a new level. </font><font style="vertical-align: inherit;">Each design pattern is a description of the real problem, and the solution is supported and illustrated by specific code examples.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excerpt. </font><font style="vertical-align: inherit;">Sidecar Pattern</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Sidecar pattern (Trailer) is to define a container that extends the capabilities of an existing container without changing it. </font><font style="vertical-align: inherit;">This is one of the fundamental container patterns that allows you to create highly specialized containers that work closely with each other. </font><font style="vertical-align: inherit;">In this chapter you will learn everything related to the idea of ‚Äã‚Äãthe Sidecar pattern (Trailer). </font><font style="vertical-align: inherit;">And in chapters 16 and 17 you will get acquainted with specialized variants of this pattern - the Adapter and Ambassador patterns, respectively.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Containers is a popular packaging technology that allows developers and system administrators to create, deliver, and run applications in a unified way. A container represents the natural boundary of a functional unit with its runtime, release cycle, API, and the development team to which it belongs. A typical container acts like a process on Linux ‚Äî solves one problem, and does it well ‚Äî and is created under the assumption of the possibility of replacement and reuse. The latter is especially important because it allows you to quickly create applications using existing specialized containers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Currently, in order to send an HTTP request, you do not need to write a client library, just use the existing one. </font><font style="vertical-align: inherit;">Similarly, to maintain the website, you do not need to create a container with a web server, just use the existing one. </font><font style="vertical-align: inherit;">This approach allows developers not to reinvent the wheel and create an ecosystem with fewer containers of better quality for maintenance. </font><font style="vertical-align: inherit;">However, in order to be able to use highly specialized reusable containers, ways to expand their capabilities and means for organizing interactions between them are necessary. </font><font style="vertical-align: inherit;">The Sidecar pattern (Trailer) describes just such a way of organizing interactions when one container expands the capabilities of another, existing container.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decision</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In chapter 1, we saw how pods allow you to combine several containers into one block. Behind the scenes, at run time, under is also a container, but it starts as a paused (literally using the pause command) process in front of all the other containers in the hearth. It does nothing but store all of the Linux namespaces that application containers use to interact throughout the pod life cycle. In addition to this implementation detail, all the characteristics that the hearth abstraction provides are also of interest.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Under is such a fundamental primitive that it is present in many cloud platforms, albeit under different names, but always with similar capabilities. Under, as a deployment unit, imposes certain runtime restrictions on its containers. For example, all containers are deployed on one node and have a common life cycle. In addition, under allows its containers to use shared volumes and exchange data through a local network or using host interprocess communication tools. That is why users combine containers into pods. The Sidecar pattern (Trailer), sometimes also called Sidekick (Companion), describes the scenario of adding a container to the under to expand the capabilities of another container.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A typical example demonstrating this pattern is the HTTP server and the synchronization mechanism with the Git repository. The HTTP server container solves the problems associated with servicing files via HTTP and does not know how and where these files come from. Similarly, the only purpose of a container that synchronizes with Git is to synchronize data in the local file system with data on the Git server. He doesn't care what happens to the files after synchronization, his only task is to synchronize the contents of the local folder with the contents on the remote Git server. Listing 15.1 provides a pod definition with these two containers configured to use the volume for file sharing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listing 15.1. Sidecar Pattern Implementation (Trailer)</font></font><br>
<br>
<pre><code class="bash hljs">apiVersion: v1<font></font>
kind: Pod<font></font>
metadata:<font></font>
    name: web-app<font></font>
spec:<font></font>
    containers:<font></font>
    - name: app<font></font>
      image: docker.io/centos/httpd ‚ù∂<font></font>
      ports:<font></font>
      - containerPort: 80<font></font>
      volumeMounts:<font></font>
      - mountPath: /var/www/html ‚ù∏<font></font>
      name: git<font></font>
    - name: poll<font></font>
      image: axeclbr/git ‚ù∑<font></font>
      volumeMounts:<font></font>
      - mountPath: /var/lib/data ‚ù∏<font></font>
        name: git<font></font>
      env:<font></font>
      - name: GIT_REPO<font></font>
         value: https://github.com/mdn/beginner-html-site-scripted<font></font>
      <span class="hljs-built_in">command</span>:<font></font>
      - <span class="hljs-string">"sh"</span>
      - <span class="hljs-string">"-c"</span>
      - <span class="hljs-string">"git clone <span class="hljs-subst">$(GIT_REPO)</span> . &amp;&amp; watch -n 600 git pull"</span><font></font>
      workingDir: /var/lib/data<font></font>
volumes:<font></font>
- emptyDir: {}<font></font>
      name: git</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The main application container serving files over HTTP. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(2)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Auxiliary container (Trailer) acting in parallel and receiving data from the Git server. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(3) A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shared folder for exchanging data between the primary and secondary containers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This example shows how a synchronization container with Git adds content to be served by an HTTP server and keeps it up to date. </font><font style="vertical-align: inherit;">You can also say that both containers work in close cooperation and are equally important, but the Sidecar pattern (Trailer) assumes the presence of a main (main) and auxiliary container that expands collective behavior. </font><font style="vertical-align: inherit;">Usually the main one is listed first in the list of containers and represents the default container (which is launched by the kubectl exec command, for example).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This simple pattern, shown in fig. </font><font style="vertical-align: inherit;">15.1 ensures close cooperation of containers at runtime and at the same time allows sharing tasks that may belong to separate teams of developers using different programming languages, with different cycles of release of new versions, etc. It also promotes interchangeability and reuse of containers - in the sense that the HTTP server and the Git synchronization mechanism can be reused in other applications and with other settings, both independently and in conjunction with other containers.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/28/5g/wy/285gwyeypygwt7r2pkwue45p_7y.jpeg" alt="image"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Explanation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It has already been said above that container images are similar to classes, and containers are like objects in object-oriented programming (OOP). Continuing this analogy, we can compare the expansion of container capabilities with inheritance in OOP, and the joint work of several containers in the hearth with the reception of a composition in OOP. Both of these approaches allow code reuse, but inheritance defines a closer relationship and represents the ‚Äúis‚Äù relationship between containers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The composition in the hearth represents the ‚Äúhas‚Äù relationship - it is more flexible because it does not require the combination of containers during assembly, which makes it possible to change containers later in the hearth definition. But composition also implies the presence of several containers (processes) operating simultaneously, which must be checked for operability and restarted and which consume resources, as well as the main application container. The Sidecar pattern (Trailer) involves the creation of small auxiliary containers that consume minimal resources, but you decide whether to start a separate process or better combine all the tasks into a main container.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From another point of view, the composition of containers is similar to aspect-oriented programming, when using additional containers, orthogonal (independent) capabilities that are not related to the main container are added to the sub. </font><font style="vertical-align: inherit;">In recent months, the Sidecar pattern (Trailer) is gaining popularity, especially for solving network management tasks, monitoring services, where each service also comes in the form of auxiliary containers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬ªMore information about the book can be found on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the publisher‚Äôs website</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬ª </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contents</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬ª </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excerpt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
For Khabrozhiteley 25% discount on coupon - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Upon payment of the paper version of the book, an electronic book is sent by e-mail.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490832/index.html">Shoe marking: as we put into circulation 2 million marking codes ‚Äú1C‚Äù + ‚ÄúHonest Sign‚Äù</a></li>
<li><a href="../en490836/index.html">How to open comments and not drown in spam</a></li>
<li><a href="../en490838/index.html">WiFi 6 is here: what the market offers and why do we need this technology</a></li>
<li><a href="../en490840/index.html">Resource Planning. Part 4.1. Before you make a resource plan</a></li>
<li><a href="../en490842/index.html">GPT-2 in pictures (visualization of Transformer language models)</a></li>
<li><a href="../en490846/index.html">How we developed a website for the Kalashnikov Academy and became laureates of two competitions</a></li>
<li><a href="../en490850/index.html">Help the compiler help you</a></li>
<li><a href="../en490852/index.html">In detail about SpinLaunch - the most zealously kept secret in the space industry</a></li>
<li><a href="../en490854/index.html">Warehouse robots using AI to sort items are ready to go</a></li>
<li><a href="../en490856/index.html">Auto Dungeon Master</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>