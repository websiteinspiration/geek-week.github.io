<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏩 👰🏾 👩🏾‍🚒 Studying the behavior of users of the online store. Part 1 😜 🤦🏿 🍯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction
 Out of the whole variety of tasks, when I just started to work in the office, I chose research on user behavior on the store’s website. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Studying the behavior of users of the online store. Part 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506098/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Out of the whole variety of tasks, when I just started to work in the office, I chose research on user behavior on the store’s website. There is always a lot of data from using the online store, with us they are written in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clickhouse</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in several thematically divided tables. The order of recording per day is up to one billion lines. At the first stages, it was interesting to learn how to differentiate or vice versa to group different users into groups. Yes, there are absolutely banal signs, for example, a city, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useragent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , they allow you to define some groups of users who can still have common signs, for example, the average check for a person in the capital is greater. I wanted to go further.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The structure of one of the tables assumes the presence of events, that is, user actions are divided into identifiers. </font><font style="vertical-align: inherit;">These events are as simple as possible, for example, adding and removing goods from the basket, but, as it turned out, they contain a lot of useful things. </font><font style="vertical-align: inherit;">In addition, the history of orders is of interest. </font><font style="vertical-align: inherit;">If you aggregate the available information, add a little machine learning, then you can create quite useful and interesting products, both for users and for the store itself. </font><font style="vertical-align: inherit;">The idea is similar to recommendation systems, but you want to use it in a broader sense. </font><font style="vertical-align: inherit;">In the form of independent solutions, as will be the example later in the text, and in addition to existing services, it is especially good when the necessary statistics are present. </font><font style="vertical-align: inherit;">As a result, everything rests on the set goal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulation of the problem</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After examining most of the available data, real tasks appeared on the horizon. </font><font style="vertical-align: inherit;">One of them is especially close to me in my specialty (security and software protection of info-communications), which I chose.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is how the problem can be described: There are a certain number of external users of the site trying to engage in fraud, which becomes known after the fact. </font><font style="vertical-align: inherit;">The challenge is to identify such users and take action as early as possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The difficulty of detecting such users after the fact, with each subsequent order - decreases. </font><font style="vertical-align: inherit;">Formally, this is to look at a few metrics and make a decision. </font><font style="vertical-align: inherit;">My task is to push this bar of detection, at least after one order, and at best until the first order. </font><font style="vertical-align: inherit;">That is, at the stage when the first order is just placed.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The company already had a dataset about such users. </font><font style="vertical-align: inherit;">The amount of this set, relative to all users, is thousandths of one percent. </font><font style="vertical-align: inherit;">The binary classification problem with a strong class imbalance is clearly formed. </font><font style="vertical-align: inherit;">We will solve it.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Research part</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's time to go directly to the topic of research. I want to say right away that I wanted to study all the possible variations of the signs. In the final generation there were about 500 of them. Most of them were either completely useless or had a strong linear correlation. Therefore, at first there were reductions to 200 features, and later to 100. I would like to show the most interesting signs in the context - the ordinary user and the user we are looking for. First of all, interest is caused by such signs as price, movement of goods, frequency and speed of events, statistics of return of goods. All signs are scaled in the range [0: 1] and some are transformed by PowerTransformer. Also, after studying the statistics, artificial restrictions were introduced on the amount of the order for logical reasons,that the usefulness of financial acts at a certain threshold tends to 0, and the number of verified users is significantly reduced.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Signs:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum refund amount </font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/007/d09/6b1/007d096b12f35d922e1c939f5c206610.png" alt="Maximum refund amount"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the key features. </font><font style="vertical-align: inherit;">On it you can already filter out a lot of scammers, but there are two features. </font><font style="vertical-align: inherit;">The sign is aimed only at the post factum determination, and it also eliminates ordinary users, in terms of the number of users - this is not enough, but for an automatic scam search system - is unacceptable. </font><font style="vertical-align: inherit;">Also, it is worth saying that the spread in the amount of return from ordinary users is less than that of scammers.</font></font><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The maximum amount of goods added to the cart is </font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/b02/267/037/b022670378a5260cbc34a9cd39526cb1.png" alt="Maximum amount added to cart"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
also an interesting sign. </font><font style="vertical-align: inherit;">Firstly, it works both before and after ordering. </font><font style="vertical-align: inherit;">Secondly, a completely logical sign, a person puts in the basket about the amount that he can afford to buy. </font><font style="vertical-align: inherit;">This feature strongly correlates with the order amount and the refund amount. </font><font style="vertical-align: inherit;">The same trend is observed with the removal of goods from the basket.</font></font><br>
 </li>
<li>       <br>
<img src="https://habrastorage.org/getpro/habr/post_images/74b/ce6/b10/74bce6b101b81214bff3360774d0c73e.png" alt="Relative number of unique sessions when added to cart"><br>
 .   ,   «»   .    —     .     ,     –    .<br>
 </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the raw data, features based on shares and multiplications were created. </font><font style="vertical-align: inherit;">Pieces 5 of them turned out to be really useful. </font><font style="vertical-align: inherit;">These and other signs create a certain model of behavior of one user. </font><font style="vertical-align: inherit;">Of course, it does not clearly define a specific user, but this is not necessary. </font><font style="vertical-align: inherit;">Accordingly, such a set of statistics for the machine learning model with a certain probability will give a result for new or previously unrecognized users. </font><font style="vertical-align: inherit;">It is only necessary to do pre-processing, select parameters and train the model.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pretreatment</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All of the pre-processing included:</font></font><br>
 <br>
<ol>
<li>  ,     .     –  .     -  –    ,          .        1000 –   . </li>
<li>  () –       ,  . ,        ,       .    .</li>
<li>   –  <i>labelEncoder</i>,     <i>onehot</i>,       .</li>
<li>      .       .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the selection stage, my expectations regarding a strong linear correlation were confirmed. The correlation counting function removed more than half of the original features. Further importance was </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assessed</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> using </font><i><font style="vertical-align: inherit;">xgboost</font></i><font style="vertical-align: inherit;"> . The threshold at 0.004 left about 100 features. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was immediately clear that some of the “pure” users are not at all. It is well known that all users in the set of scammers are really scammers, but scammers are also present in the set of ordinary users. It turned out to determine a certain amount using errors of the first kind. That is, those users who fell into errors of the first kind were checked and some of them really turned out to be scammers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The expensive part is setting up </font><i><font style="vertical-align: inherit;">xgboost</font></i><font style="vertical-align: inherit;"> hyperparameters</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Several heuristics have reduced the number of options and the selection time using </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GridSearchCV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . And also the use of calculations on the video card ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gpu_hist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - accelerated this process by 10 times. Heuristics consisted in the fact that initially there were a run of several different boosting options, about 10. The best hyperparameters + - got into </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GridSearchCV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Due to class imbalance, parameters such as </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scale_pos_weight</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font><i><font style="vertical-align: inherit;">max_delta_step</font></i><font style="vertical-align: inherit;"> were configured</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Without them, boosting yielded about 10% worse results. </font><font style="vertical-align: inherit;">Plus, the given probabilities have become closer to the truth. </font><font style="vertical-align: inherit;">In addition, there was an attempt to balance the classes with sampling, but nothing good came of it - this is not the task. </font><font style="vertical-align: inherit;">In total, 1000 trees were needed at 0.05 learning speeds, depth up to 8, and several parameters to control complexity. </font><font style="vertical-align: inherit;">In addition to boosting, other algorithms were tested, but everything turned out to be worse (not surprising), although the time for selecting parameters and the time for cross-validation are much less needed.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learning and Interpretation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As an evaluation measure, the area under the completeness / accuracy curve was selected. It can be used for class imbalances. And </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f_beta</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with coefficients [0.5, 1]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first graph shows the dependence of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f_beta</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on the binarization threshold. On the second - the curve completeness \ accuracy. The area under the curve is 0.58. I didn’t “torment” myself with choosing a threshold, therefore, for the first combat test, the users found by the threshold of 0.1 were sent for manual verification. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/47f/517/e7b/47f517e7b13855806b3b47be0cbf4307.png" alt="metrics"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is not to say that cross-validation went as smoothly as possible. Still, this is not a competition, but a real challenge. Where there are features, in the form of frequent unpredictability of behavior and illogicality. At the same time, in the first tests, quite a few new scammers were found, plus the old ones were also caught.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shap</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> library, </font><i><font style="vertical-align: inherit;">you</font></i><font style="vertical-align: inherit;"> can interpret model prediction. </font><font style="vertical-align: inherit;">Interpretation of the results helps to understand how the algorithm works and almost always the interpretation is presented to the logic. </font><font style="vertical-align: inherit;">Let's take two examples: the regular user and the user we are looking for. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here on the graph is a regular user. </font><font style="vertical-align: inherit;">The maximum return amount is low, a small number of unique links from which the user comes, a certain type of payment, and the ratio of maximum return to maximum redemption is one to two. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/60e/eca/a52/60eecaa52cec502739b0d37aaacaa607.jpg" alt="not fraud"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a scammer. </font><font style="vertical-align: inherit;">The speed of the selection of goods, visits to the site less often than the average user and a low variation in the amount of return (the difference in the amount of discounts and without discounts).</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e9a/d9d/bd5/e9ad9dbd52c9c2d8165d3660491e1015.jpg" alt="fraud"> <br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adjustment of search based on feedback from experts</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was decided to give experts all the users found by the minimum threshold of the classifier in 0.1, in order to estimate in real conditions how many users can be found and how many mistakes to make. So I got interesting statistics. The graphs show relative values. All found users can be divided into three categories: scammers, suspicious users and ordinary users. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first graph shows the relative loss of users by category depending on the threshold of the classifier. The second chart is built according to this formula</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>u</mi><msub><mi>d</mi><mi>t</mi></msub><mi>r</mi><mi>u</mi><mi>e</mi><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>0.5</mn><mo>&amp;#x2217;</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>u</mi><msub><mi>d</mi><mi>m</mi></msub><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>f</mi><mi>r</mi><mi>a</mi><mi>u</mi><msub><mi>d</mi><mi>f</mi></msub><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.269ex" height="2.759ex" viewBox="0 -809.3 18629.5 1188" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-66" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-72" x="940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-61" x="1391" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-75" x="1921" y="0"></use><g transform="translate(2493,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-74" x="736" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-72" x="3369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-75" x="3821" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-65" x="4393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-2B" x="5082" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-28" x="6083" y="0"></use><g transform="translate(6472,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-35" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-2217" x="7974" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-66" x="8697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-72" x="9247" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-61" x="9699" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-75" x="10228" y="0"></use><g transform="translate(10801,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-6D" x="736" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-62" x="12042" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-29" x="12472" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-29" x="12861" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMAIN-2F" x="13251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-66" x="13751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-72" x="14302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-61" x="14753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-75" x="15283" y="0"></use><g transform="translate(15855,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-66" x="736" y="-219"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-61" x="16865" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-6C" x="17394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-73" x="17693" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/506098/&amp;usg=ALkJrhgVbFVZbx-iejl4hWXRgZaplh9gcg#MJMATHI-65" x="18162" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>u</mi><msub><mi>d</mi><mi>t</mi></msub><mi>r</mi><mi>u</mi><mi>e</mi><mo>+</mo><mo stretchy="false">(</mo><mn>0.5</mn><mo>∗</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>u</mi><msub><mi>d</mi><mi>m</mi></msub><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>f</mi><mi>r</mi><mi>a</mi><mi>u</mi><msub><mi>d</mi><mi>f</mi></msub><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">(fraud_true+ (0.5*fraud_mb))/fraud_false </script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
depending on the threshold of the classifier. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c9c/768/087/c9c7680872cc90daf686917e6c1ef9cf.png" alt="feedback"> <br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is clearly seen that the threshold can be shifted to 0.67. </font><font style="vertical-align: inherit;">For every three scammers found, there will be one normal user found. </font><font style="vertical-align: inherit;">There is much to strive for. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the fact that you still have to try:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To train the neuron on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keras</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , since the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MLPC</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sklearn</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gave similar results to boosting.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Once again, go through the database in search of features. </font><font style="vertical-align: inherit;">Or rather, ask colleagues to do this, maybe they can find interesting patterns in behavior.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the next part I will try to develop a topic with an analysis of user behavior, and further delve into the subtleties of this topic. </font><font style="vertical-align: inherit;">There are quite a few global tasks that this model can be superimposed on. </font><font style="vertical-align: inherit;">And the model itself, given many signs, is able to detect atypical behavior on the site. </font><font style="vertical-align: inherit;">Also, do not forget that you can find similar people and identify patterns of behavior.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en506066/index.html">Building a digital model of a successful securities trading strategy. Description. Evidence</a></li>
<li><a href="../en506082/index.html">Linux and WYSIWYG</a></li>
<li><a href="../en506086/index.html">Jurisprudence Artificial Intelligence</a></li>
<li><a href="../en506088/index.html">Explain to me how you figured out typing models for yourself - they are all blurry</a></li>
<li><a href="../en506096/index.html">Spine - a cross-platform game in the setting of cyberpunk from Banzai Games and Nekki</a></li>
<li><a href="../en506100/index.html">Modeling a two-dimensional Ising model in C ++ (using the OpenGL graphics package)</a></li>
<li><a href="../en506110/index.html">A view of space from a sublight rocket. Photo of a sublight object. Derivation of light aberration without Lorentz transformations</a></li>
<li><a href="../en506112/index.html">How to visualize daily spending on GCP cloud solutions</a></li>
<li><a href="../en506114/index.html">Who are you, an IT analyst?</a></li>
<li><a href="../en506122/index.html">486 - build, programs and benchmarks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>