<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåü üå•Ô∏è üôé Conseils d'utilisation de l'algorithme de r√©duction de la fonction d'onde ‚ôìÔ∏è ‚õΩÔ∏è üòÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R√©cemment, j'ai beaucoup exp√©riment√© la g√©n√©ration bas√©e sur des contraintes proc√©durales. En particulier, avec l'algorithme Wave Function Collapse (W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Conseils d'utilisation de l'algorithme de r√©duction de la fonction d'onde</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488336/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/556/757/f2f556757da50dae74a44909dca1e76d.png" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©cemment, j'ai beaucoup exp√©riment√© la g√©n√©ration bas√©e sur des contraintes proc√©durales. En particulier, avec l'algorithme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wave Function Collapse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WFC, wave function collapse). J'ai m√™me √©crit ma propre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioth√®que open source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><font style="vertical-align: inherit;">mon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actif d'unit√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WFC est un algorithme tr√®s flexible, en particulier avec les am√©liorations que j'ai d√©velopp√©es. Mais en m√™me temps, j'ai trouv√© difficile de cr√©er </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> niveaux </font><em><font style="vertical-align: inherit;">pratiques</font></em><font style="vertical-align: inherit;"> applicables aux jeux informatiques </font><font style="vertical-align: inherit;">avec son aide </font><font style="vertical-align: inherit;">. La principale difficult√© est que le WFC n'a pas de structure globale. Tout ce qu'il fait, c'est que la g√©n√©ration de sortie ressemble localement √† l'entr√©e, par exemple, en examinant les petits rectangles individuels de la sortie.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, je vais vous dire ce que j'ai appris et ce qui pourra √©lever les g√©n√©rateurs bas√©s sur des restrictions √† un nouveau niveau.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les bases</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est difficile d'utiliser WFC si vous ne savez pas comment cela fonctionne. Il s'agit d'un algorithme de g√©n√©ration proc√©durale </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bas√© sur des contraintes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui a fait l'objet de beaucoup d'attention r√©cemment. En fait, cela n'a pratiquement rien √† voir avec le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concept de physique quantique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en l'honneur duquel elle a √©t√© nomm√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WFC est facile √† configurer - vous donnez simplement √† l'algorithme un exemple de carte, apr√®s quoi il g√©n√®re de nouvelles cartes qui </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ressemblent</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† la carte d'origine en raison de l'utilisation r√©p√©t√©e de ses petits fragments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a deux types - avec un arrangement voisin ou avec une superposition d'√©l√©ments. Cela peut se faire en 2D ou 3D, et m√™me sur des grilles d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hexagones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in√©gales</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grilles. </font><font style="vertical-align: inherit;">La plupart de mes conseils s'appliquent quelle que soit la fa√ßon dont vous utilisez l'algorithme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous sugg√®re de </font><font style="vertical-align: inherit;">jouer avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette d√©mo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour avoir une id√©e sur l'algorithme, et de </font><font style="vertical-align: inherit;">lire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette introduction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traduction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur Habr√©] si vous √™tes int√©ress√© par les </font><font style="vertical-align: inherit;">d√©tails techniques.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conception de tuiles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme WFC est bas√© sur des tuiles. </font><font style="vertical-align: inherit;">En ce sens, sa qualit√© d√©pend des tuiles que vous lui transf√©rez pour le travail. </font><font style="vertical-align: inherit;">Je ne suis pas un artiste, donc je peux peu aider √† dessiner de beaux ensembles de tuiles (bien que vous puissiez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mais un bon ensemble de tuiles n√©cessite √©galement des connaissances techniques.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubes de marche</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marching cubes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un algorithme qui s√©lectionne les tuiles √† d√©finir selon que chaque sommet de la tuile est plein ou vide. </font><font style="vertical-align: inherit;">Voici la liste des tuiles utilis√©es pour la 2D.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/404/214/092/404214092cf2f31e96b3b6f2a267c622.svg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous construisez des tuiles de sorte que les coins noir et blanc correspondent toujours, alors les lignes rouges se connecteront toujours correctement. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous n'avons pas besoin de comprendre l'ensemble de l'algorithme, mais il convient de noter que l'id√©e de concevoir des tuiles en tenant compte uniquement de leur comportement dans les coins est une technique tr√®s puissante. </font><font style="vertical-align: inherit;">Il est utilis√© dans bon nombre des meilleurs ensembles de tuiles, car il garantit que les tuiles se connectent toujours bien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette technique est particuli√®rement puissante pour WFC. </font><font style="vertical-align: inherit;">C'est arriv√©, car si vous manquez quelques tuiles, WFC, cela n'aura pas d'importance. </font><font style="vertical-align: inherit;">Il contournera ce probl√®me et ne cr√©era jamais de configurations n√©cessitant des tuiles manquantes. </font><font style="vertical-align: inherit;">C'est tr√®s pratique pour la 3D, car il existe des dizaines de tuiles potentielles, et certaines d'entre elles ne sont n√©cessaires que dans des situations tr√®s difficiles. </font><font style="vertical-align: inherit;">Voir la section ¬´Fondation¬ª ci-dessous, dans laquelle j'utilise encore plus largement cette astuce. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conna√Ætre d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autres motifs de carreaux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √©galement √™tre utile </font><font style="vertical-align: inherit;">, mais Marching Cubes est le meilleur.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les chambres</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, il est plus facile de travailler avec de simples ensembles de tuiles. </font><font style="vertical-align: inherit;">Cette combinaison de 4 tuiles (une tuile est vide) g√©n√®re facilement des pi√®ces carr√©es.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dd0/bbb/376/dd0bbb3765876baac62417e760149058.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e76/245/14b/e7624514b5103da9afa5e4be2fce86c3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La taille des pi√®ces peut facilement √™tre modifi√©e en modifiant le poids de chaque carreau. </font><font style="vertical-align: inherit;">Apr√®s avoir ajout√© les carreaux de porte et de couloir, vous pouvez cr√©er la diversit√© caract√©ristique des plans d'√©tage des personnes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fondation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous travaillez avec WFC, il est int√©ressant d'exp√©rimenter avec des ensembles de tuiles. </font><font style="vertical-align: inherit;">Si vous mettez simplement une tuile, WFC cherche √† tirer le meilleur parti de l'espace restant. </font><font style="vertical-align: inherit;">Parfois, cela conduit √† des r√©sultats radicalement diff√©rents, comme on peut le voir sur l'image de Maxim Gumin:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4f/980/7b9/a4f9807b976fa295e85b9ae0d36d3918.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons utiliser ce comportement pour stimuler WFC √† g√©n√©rer de nombreuses structures reconnaissables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de ch√¢teau (inspir√© de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@greentecq</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1183359478734958593"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce document, j'ai utilis√© le jeu de tuiles suivant:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/852/df1/c0b852df1c18974c8114d48d3b7f3290.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces tuiles ont une propri√©t√© importante - toutes les tuiles √† la base ont une largeur non inf√©rieure √† celle du haut. </font><font style="vertical-align: inherit;">Cela signifie qu'il n'est pas possible de construire ces tuiles d'une mani√®re non prise en charge. </font><font style="vertical-align: inherit;">Le WFC r√©pond imm√©diatement √† cela et cr√©e des b√¢timents avec une bonne fondation.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fractal Split Approximation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En √©tudiant le sujet de la stimulation de certains comportements en choisissant le jeu de tuiles appropri√©, j'ai constat√© que si le jeu de tuiles se compose de routes droites et de branches, mais sans coins, alors vous pouvez obtenir une bonne approximation du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fractionnement r√©cursif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (sans la partie ¬´r√©cursive¬ª). </font><font style="vertical-align: inherit;">C'est assez bon pour les niveaux de grille.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grandes tuiles</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez ajouter WFC pour prendre en charge des tuiles qui sont plusieurs fois plus grandes qu'une tuile ordinaire. Par exemple, cela est pris en charge dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mon module compl√©mentaire Tessera</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les grandes tuiles peuvent √™tre utilis√©es de diff√©rentes mani√®res. Puisqu'ils s'√©tendent au-del√† des limites de la grille, vous pouvez les utiliser pour ajouter des courbes plus lisses et plus larges que ce qui est g√©n√©ralement possible lors de l'accrochage √† la grille. Ils sont √©galement parfaits pour les √©l√©ments d'un grand nombre de tuiles, ou simplement pour masquer que la g√©n√©ration est bas√©e sur des tuiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple √† apprendre d' </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Oscar Stalberg </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">du</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jeu </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Bad North</font></a><font style="vertical-align: inherit;"> . Oscar montre comment il a utilis√© de grandes tuiles pour ajouter des c√¥tes incurv√©es en douceur, de grandes maisons et la variabilit√© des falaises.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1131228226901172226"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limites</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la base, WFC est un algorithme bas√© sur des contraintes. </font><font style="vertical-align: inherit;">Cela signifie qu'il cherche √† g√©n√©rer des niveaux qui correspondent √† un ensemble sp√©cifique de crit√®res. </font><font style="vertical-align: inherit;">En WFC pur, il n'y a qu'un seul crit√®re - que les niveaux ressemblent localement √† un √©chantillon d'entr√©e. </font><font style="vertical-align: inherit;">Ci-dessous, je parlerai des am√©liorations WFC pour ajouter de nouveaux types de restrictions.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tuiles fixes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est tr√®s facile de corriger des tuiles individuelles avant de g√©n√©rer un niveau dans WFC. </font><font style="vertical-align: inherit;">Plus tard, ils s'int√®grent parfaitement au niveau g√©n√©r√©.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f0/df3/619/1f0df3619f947a7a71e72b389bc38e15.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant la g√©n√©ration</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93f/2c2/5be/93f2c25be4b716f62fa16b0b67c36a5b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s la g√©n√©ration</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cette technique peut √™tre utilis√©e de diff√©rentes mani√®res. </font><font style="vertical-align: inherit;">Voici quelques id√©es:</font></font><br>
<br>
<ul>
<li>      </li>
<li>  - ,   WFC    .</li>
<li>    ,    </li>
<li> /    WFC   </li>
</ul><br>
<br>
<h3> </h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chemins de limitation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (contrainte de chemin) - c'est ma propre contribution au WFC. Il s'agit d'une technique extr√™mement puissante, mais un article complet n√©cessitera tr√®s probablement un article s√©par√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette restriction </font><font style="vertical-align: inherit;">analyse </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">globalement</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> toutes les sorties g√©n√©r√©es et indique de force qu'un chemin doit passer entre les tuiles marqu√©es. Ou en d'autres termes, il indique √† un sous-ensemble de tuiles de former un seul </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">composant du graphique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En raison de sa nature globale, il compl√®te le comportement WFC habituel, qui ne prend en compte que les tuiles locales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d√©couvert que l'ajout de cette restriction affecte fortement l'apparence du niveau g√©n√©r√©. Sans cela, WFC g√©n√®re souvent plusieurs pi√®ces ou zones divis√©es qui semblent irr√©alistes et non cr√©√©es par des humains.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b88/353/c19/b88353c19a3ebc27db979150a3c30af2.png"></div><br>
<i>   </i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a91/928/346/a919283460b31c6c8b901609d9490ede.png"></div><br>
<i>   .       .</i><br>
<br>
<h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre situation o√π la limitation de chemin est appropri√©e est ... le trac√© de chemins. Par d√©faut, la restriction de chemin d'acc√®s garantit uniquement </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'il existe un</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> itin√©raire entre les tuiles. Cela ne garantit pas que le chemin sera aussi simple que possible. Par cons√©quent, dans le cas des rivi√®res et des routes, il dessine souvent des joints en forme de T dans des endroits facultatifs. L'astuce consiste soit √† retirer simplement toutes les tuiles des joints en T, soit √† leur donner un poids tr√®s faible, afin qu'elles ne soient s√©lectionn√©es qu'en cas d'absolue n√©cessit√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'adore utiliser des tuiles fixes pour fixer les points de terminaison d'un chemin. Pour cette raison, la restriction de chemin est requise pour ins√©rer des tuiles qui connectent le reste du chemin.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa0/448/f77/aa0448f778179d53dd4b9236fc33aa17.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les chemins g√©n√©r√©s en fixant les quatre coins comme points de terminaison des chemins</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si vous voulez exp√©rimenter avec des chemins, alors j'ai une petite d√©mo javascript qui est pr√©sent√©e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La diversit√©</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tuiles alternatives</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est tr√®s facile d'ajouter des options de tuile √† l'algorithme WFC. </font><font style="vertical-align: inherit;">Ajoutez simplement les tuiles √† la liste des tuiles possibles, en lui donnant les m√™mes connexions que la tuile qu'elle remplace. </font><font style="vertical-align: inherit;">Ou cela peut √™tre fait au stade du post-traitement, comme c'est g√©n√©ralement le cas dans d'autres styles de g√©n√©ration proc√©durale.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d7/b6c/43a/3d7b6c43a0be6522b6a2eac5d85dbd69.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux carreaux muraux, l'un d'eux avec une fen√™tre. </font><font style="vertical-align: inherit;">Ils sont compl√®tement interchangeables et ajoutent simplement de la variabilit√© √† la conception.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabilit√© des tuiles par niveau</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous mettez beaucoup d'efforts pour cr√©er une conception de jeu de tuiles, vous remarquerez que le caract√®re al√©atoire de WFC commence √† lui nuire. </font><font style="vertical-align: inherit;">Il utilise l'ensemble de tuiles, c'est-√†-dire que vous pouvez obtenir un niveau avec de la lave m√©lang√©e, de la neige et du d√©sert. </font><font style="vertical-align: inherit;">Cela semble souvent compl√®tement illogique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez restaurer l'int√©grit√© d'une mani√®re simple: d√©cidez √† l'avance √† quel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biome le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> niveau appartiendra, puis d√©sactivez toutes les tuiles qui ne conviennent pas √† ce biome. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bad North</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (encore) en est un excellent exemple. </font><font style="vertical-align: inherit;">√Ä certains niveaux, les rochers sont compl√®tement interdits, √† d'autres il y a beaucoup de v√©g√©tation, dans les troisi√®mes ruines et des cimeti√®res sont ajout√©s. </font><font style="vertical-align: inherit;">Cela donne √† chaque niveau un style unique sans avoir besoin d'un changement significatif dans le style de g√©n√©ration.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/556/757/f2f556757da50dae74a44909dca1e76d.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seulement environ 10% des √Æles ont des √©l√©ments de grottes, visibles dans le coin sup√©rieur droit.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabilit√© des tuiles dans la carte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le m√©lange de tuiles peut aller encore plus loin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez WFC pour g√©n√©rer une grande carte, elle commence √† sembler tr√®s uniforme. </font><font style="vertical-align: inherit;">C'est une autre cons√©quence du fait que l'algorithme est un solveur de </font><font style="vertical-align: inherit;">contraintes </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locales</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La meilleure solution √† ce probl√®me que j'ai vue dans le jeu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caves of Qud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans l'histoire des d√©veloppeurs sur la g√©n√©ration ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), ils disent qu'ils divisent la carte en diff√©rentes zones, puis d√©marrent WFC avec des param√®tres distincts pour les sous-ensembles de la carte. </font><font style="vertical-align: inherit;">Cela signifie que sur la carte, il peut y avoir une zone de ruines et une zone d'une ville dans laquelle des mod√®les et des tuiles compl√®tement diff√©rents sont utilis√©s.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b9/45f/762/1b945f762795751a1e66eaa0712110ab.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple de </font></font><em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">math√©matiques pour les d√©veloppeurs de jeux: g√©n√©ration de cartes bas√©es sur des tuiles √† l'aide de l'effondrement de la fonction d'onde dans ¬´Caves of Qud¬ª</font></font></a></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme WFC, comme toutes les techniques de g√©n√©ration bas√©es sur des contraintes, a pour principe de faire </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attention √† vos envies</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il est facile de personnaliser et d'obtenir de beaux r√©sultats, mais il peut √™tre tr√®s difficile de mettre en ≈ìuvre les d√©tails sp√©cifiques n√©cessaires √† votre jeu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'esp√®re que les techniques pr√©sent√©es par moi vous aideront √† apprivoiser ce monstre, mais au final, il est pr√©f√©rable de cr√©er un game design bas√© sur les forces de la g√©n√©ration proc√©durale, et de ne pas essayer de le forcer √† en cr√©er trop pour vous. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous recommande de jouer √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bad North</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caves of Qud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les deux jeux sont d'excellents exemples d'utilisation de WFC dans des conditions r√©elles, et les d√©veloppeurs ont bien pens√© √† l'utilisation optimale de l'algorithme dans leurs jeux.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488322/index.html">Gestes</a></li>
<li><a href="../fr488324/index.html">Fant√¥me de la console. Panasonic M2</a></li>
<li><a href="../fr488326/index.html">Amour ou licenciement</a></li>
<li><a href="../fr488330/index.html">Anglais avec George Karlin: nous analysons l'ing√©nieux stand-up sur les unit√©s phras√©ologiques</a></li>
<li><a href="../fr488332/index.html">Z√©ro, un, deux, Freddy viendra te chercher</a></li>
<li><a href="../fr488338/index.html">Stages Google: Zurich, Londres et Silicon Valley</a></li>
<li><a href="../fr488340/index.html">Profession: D√©veloppeur Backend</a></li>
<li><a href="../fr488342/index.html">Random Forest, la m√©thode des principaux composants et l'optimisation des hyperparam√®tres: un exemple de r√©solution du probl√®me de classification en Python</a></li>
<li><a href="../fr488346/index.html">Installation de ou-tools avec SCIP et GLPK dans un environnement virtuel Python 3.7 sous Linux</a></li>
<li><a href="../fr488348/index.html">Webinaire ¬´Les dix principaux d√©fis agiles et les moyens de les surmonter en une heure¬ª 17 f√©vrier √† 20 h, heure de Moscou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>