<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôéÔ∏è üõåüèæ üòÜ Writing Autotests Effectively - Subcutaneous tests üò© ‚ñ´Ô∏è üë®üèø‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's imagine a hypothetical sitauation (into which we regularly plunge). You have been assigned to a project to ‚Äúgash‚Äù automation. You are given a hu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Writing Autotests Effectively - Subcutaneous tests</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502154/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's imagine a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hypothetical</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sitauation (into which we regularly plunge). </font><font style="vertical-align: inherit;">You have been assigned to a project to ‚Äúgash‚Äù automation. </font><font style="vertical-align: inherit;">You are given a huge test plan with a large number (thousands of them!) Of ‚Äúmanual‚Äù tests, and they say that you need to do something, and right there. </font><font style="vertical-align: inherit;">And also, to quickly and stably. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It‚Äôs </font><font style="vertical-align: inherit;">too late to </font><font style="vertical-align: inherit;">write Unit tests, or even think about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the product code has long been written. </font><font style="vertical-align: inherit;">Your word, comrade autotester! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c6/l-/p9/c6l-p9jm_r8j9ix3dpkptsalx3i.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortunately, there is a small trick that will allow you to increase coverage and make the tests stable and fast - Subcutaneous tests (‚Äúsubcutaneous tests‚Äù), but first things first.</font></font><br>
<a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The essence of the problem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first conditional reflex of the automator is to take Selenium (well, either there, Selenide, or some other prodigy for UI tests). </font><font style="vertical-align: inherit;">This is such an industry standard, but there are many reasons why it doesn‚Äôt take off:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI tests are slow. </font><font style="vertical-align: inherit;">There is no escape from this. </font><font style="vertical-align: inherit;">They can be run in parallel, filed and done a little faster, but they will remain slow.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI tests are unstable. </font><font style="vertical-align: inherit;">Partly because they are slow. </font><font style="vertical-align: inherit;">And also because the Web browser and user interface were not created to be controlled by a computer (this trend is currently changing, but not the fact that this is good).</font></font></li>
<li>UI- ‚Äî        .    <i> </i>. (   , , ,   ¬´¬ª -      ,        ).</li>
<li> , , , UI-   . <b>  . </b>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">ID  XPath </a>.       ,   ¬´¬ª  -       -  .   ,      ,      ‚Äî  - ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone will say that some functionality simply cannot be tested otherwise. </font><font style="vertical-align: inherit;">I will say that if there is functionality that can be tested only by UI tests (with the exception of the UI logic itself), this can be a good sign of architectural problems in the product.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The only real plus of UI tests is that they allow you to ‚Äúthrow‚Äù more or less useful checks without the need to dive and study the code of the product itself. </font><font style="vertical-align: inherit;">Which is hardly a plus in the long run. </font><font style="vertical-align: inherit;">A more detailed explanation of why this can be heard in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this presentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternative solution</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a very simple case, let's consider an application consisting of a form where you can enter a valid username. </font><font style="vertical-align: inherit;">If you enter a user name that matches the rules - User will be created in the system and recorded in the Database. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ef/sx/qs/efsxqs-1l5hrlvozwlt78knzps8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The source code of the application can be found here: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/senpay/login-form</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">You were warned - in the application there are a lot of bugs and there are no fashionable tools and frameworks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you try to "throw" a check sheet for this application, you can get something like:</font></font><br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Number</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steps</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expected results</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Enter a valid user name </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Click the "Log in" button</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. A new user is created.</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Enter an empty user name </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Click the "Log in" button</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. The error message is given.</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Does it look simple? Simply! Can I write UI tests? Can. An example of the written tests (along with a full </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">three</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">level framework</font></a><font style="vertical-align: inherit;"> ) can be found in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoginFormTest.java</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> if you go to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uitests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> label in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git checkout uitests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginFormTest</span> </span>{<font></font>
<font></font>
    SelenideMainPage sut = SelenideMainPage.INSTANCE;<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APPLICATION_URL = <span class="hljs-string">"http://localhost:4567/index"</span>;<font></font>
<font></font>
    <span class="hljs-meta">@BeforeClass</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpClass</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> String[] args = {};<font></font>
        Main.main(args);<font></font>
        Configuration.browser = <span class="hljs-string">"firefox"</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{<font></font>
        open(APPLICATION_URL);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@After</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
        close();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldBeAbleToAddNewUser</span><span class="hljs-params">()</span> </span>{<font></font>
        sut.setUserName(<span class="hljs-string">"MyCoolNewUser"</span>);<font></font>
        sut.clickSubmit();<font></font>
        Assert.assertEquals(<span class="hljs-string">"Status: user MyCoolNewUser was created"</span>, sut.getStatus());<font></font>
        Assert.assertTrue(sut.getUsers().contains(<span class="hljs-string">"Name: MyCoolNewUser"</span>));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldNotBeAbleToAddEmptyUseName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> numberOfUsersBeforeTheTest = sut.getUsers().size();<font></font>
        sut.clickSubmit();<font></font>
        Assert.assertEquals(<span class="hljs-string">"Status: Login cannot be empty"</span>, sut.getStatus());<font></font>
        Assert.assertEquals(numberOfUsersBeforeTheTest, sut.getUsers().size());<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some metrics for this code:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Runtime: ~ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12 seconds</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (12 seconds 956 milliseconds the last time I ran these tests) </font></font><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code coverage</font></font></u><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Class: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100%</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Method: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">93.8% (30/32)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Line: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">97.4% (75/77 )</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Now let's assume that Functional AutoTests can be written at the level ‚Äúimmediately below‚Äù the UI. This technique is called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subcutaneous tests</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (‚Äúsubcutaneous tests‚Äù - tests that test immediately below the level of display logic) and was proposed by Martin Fowler quite a long time ago [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When people think of ‚Äúnon-UI‚Äù autotests, often they think immediately of REST / SOAP or its API. </font><font style="vertical-align: inherit;">But the API (Application Programming Interface) is a much broader concept, not necessarily affecting HTTP and other heavyweight protocols. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we pick a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">product</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> code </font><font style="vertical-align: inherit;">, we can find something interesting:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IUserRepository repository = <span class="hljs-keyword">new</span> InMemoryUserRepository();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UserService service = <span class="hljs-keyword">new</span> UserService(); {<font></font>
        service.setUserRepository(repository);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">getUsersList</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> getUsersList(<span class="hljs-string">"N/A"</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">addUser</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String username)</span> </span>{
        <span class="hljs-keyword">final</span> String status = service.addUser(username);
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; model = getUsersList(status);
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title">getUsersList</span><span class="hljs-params">(String status)</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; model = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<font></font>
        model.put(<span class="hljs-string">"status"</span>, status);<font></font>
        model.put(<span class="hljs-string">"users"</span>, service.getUserInfoList());
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When we click on a UI, one of these methods is called, or a new User object is added, or a list of already created User objects is returned. </font><font style="vertical-align: inherit;">What if we use these methods </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directly</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">After all, this is a real API! </font><font style="vertical-align: inherit;">And most importantly, REST and other APIs also work on the same principle - they call a certain method of "controller level". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using these methods directly, we can write a simpler and better test:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApplicationTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> UserApplication sut;<font></font>
<font></font>
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{<font></font>
       sut = <span class="hljs-keyword">new</span> UserApplication();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldBeAbleToAddNewUser</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; myCoolNewUser = sut.addUser(<span class="hljs-string">"MyCoolNewUser"</span>);<font></font>
        Assert.assertEquals(<span class="hljs-string">"user MyCoolNewUser was created"</span>, myCoolNewUser.get(<span class="hljs-string">"status"</span>));<font></font>
        Assert.assertTrue(((List) myCoolNewUser.get(<span class="hljs-string">"users"</span>)).contains(<span class="hljs-string">"Name: MyCoolNewUser"</span>));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldNotBeAbleToAddEmptyUseName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; usersBeforeTest = sut.getUsersList();
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> numberOfUsersBeforeTheTest = ((List) usersBeforeTest.get(<span class="hljs-string">"users"</span>)).size();
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; myCoolNewUser = sut.addUser(<span class="hljs-string">""</span>);<font></font>
        Assert.assertEquals(<span class="hljs-string">"Login cannot be empty"</span>, myCoolNewUser.get(<span class="hljs-string">"status"</span>));<font></font>
        Assert.assertEquals(numberOfUsersBeforeTheTest, ((List) myCoolNewUser.get(<span class="hljs-string">"users"</span>)).size());<font></font>
    }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This code is available under the label </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subctests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">git checkout subctests</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's try to collect metrics? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Time to execute: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ 21 milliseconds </font></font></b><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code coverage</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Class: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">77.8%</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Method: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78.1 (30/32)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Line: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78.7 (75/77)</font></font></b><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We lost a little coverage, but the speed of tests increased 600 times !!!</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How important / significant is the loss of coverage in this case? </font><font style="vertical-align: inherit;">Depends on the situation. </font><font style="vertical-align: inherit;">We lost a little glue code, which may be (or may not be) important (I recommend determining which code is lost as an exercise). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Does this loss of coverage justify the introduction of heavyweight testing at the UI level? </font><font style="vertical-align: inherit;">It also depends on the situation. </font><font style="vertical-align: inherit;">We can, for example:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add one UI test to check the glue code, or</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we do not expect frequent changes to the glue code - leave it without autotests, or</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we have some kind of ‚Äúmanual‚Äù testing, there is a great chance that problems with the glue code will be noticed by the tester, or</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Come up with something else (same Canary deployment)</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventually</font></font></h3><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Functional autotests are not required to be written at the UI or REST / SOAP API level. </font><font style="vertical-align: inherit;">The use of ‚ÄúSubcutaneous tests‚Äù in many situations will test the same functionality with greater speed and stability.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One of the disadvantages of the approach is a certain loss of coverage.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One way to avoid losing coverage is the ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feature Tests Model</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But even with the loss of coverage, the increase in speed and stability is significant.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An English version of the article is available </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502134/index.html">Enough to be afraid of subjectively beautiful decisions in the code - you are not robots</a></li>
<li><a href="../en502136/index.html">Data compression in Apache Ignite. Sberbank Experience</a></li>
<li><a href="../en502146/index.html">Online roundtable "I want to gamedev"</a></li>
<li><a href="../en502148/index.html">Using third-party components in storage using Qsan as an example</a></li>
<li><a href="../en502150/index.html">Scaling a high-load network with Nutanix: features and challenges with a personal case</a></li>
<li><a href="../en502156/index.html">Rambler v. NGINX Case: Criminal Risks of Digitalization Roundtable May 16</a></li>
<li><a href="../en502158/index.html">How to organize testing in order to accelerate and stabilize product releases. Part 2</a></li>
<li><a href="../en502160/index.html">Custom mobile app development is inexpensive: reality or illusion</a></li>
<li><a href="../en502166/index.html">Ghosts Windows 3.1</a></li>
<li><a href="../en502176/index.html">Go: JSON deserialization with incorrect typing, or how to work around API developer errors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>