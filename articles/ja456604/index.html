<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧒🏼 💪 ⚱️ 大規模なオンラインストアを自動化し、製品を自動的に照合する方法 ⚖️ 🤪 👍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事はビジネスよりも技術的ですが、ビジネスの観点からもいくつかの結論を導き出します。さまざまなソースからの商品の自動比較に最も注意が払われます。
 
 オンラインストアの作業は、かなり多数のコンポーネントで構成されています。そして、計画が何であれ、今すぐ利益を上げるか、成長して投資家を探すか、た...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>大規模なオンラインストアを自動化し、製品を自動的に照合する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456604/"><img src="https://habrastorage.org/webt/vm/sf/by/vmsfbyuh4sqwgsjidvjpzleydcu.jpeg" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事はビジネスよりも技術的ですが、ビジネスの観点からもいくつかの結論を導き出します。</font><font style="vertical-align: inherit;">さまざまなソースからの商品の自動比較に最も注意が払われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オンラインストアの作業は、かなり多数のコンポーネントで構成されています。</font><font style="vertical-align: inherit;">そして、計画が何であれ、今すぐ利益を上げるか、成長して投資家を探すか、たとえば関連分野を開発する場合は、少なくとも次の質問を閉じる必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロバイダーと協力します。</font><font style="vertical-align: inherit;">不要なものを販売するには、まず不要なものを購入する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ管理。</font><font style="vertical-align: inherit;">何人かが何十万もの異なった商品を売っている間、誰かは狭い専門化を持っています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小売価格管理。</font><font style="vertical-align: inherit;">ここでは、サプライヤーの価格、競合他社の価格、および手頃な価格の金融商品を考慮する必要があります。</font></font></li>
<li>  .  ,      ,      ,      .</li>
<li>.    ,   ,  (  ),     .</li>
<li>   . -,   ,   ,     .</li>
<li>.</li>
<li>    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちがお話しするお店は、専門性はあまりありませんが、化粧品からミニトラクターまですべて揃っています。</font><font style="vertical-align: inherit;">サプライヤーとの取り組み、競合他社の監視、カタログ管理と価格設定（卸売りと小売り）、卸売り顧客との連携について説明します。</font><font style="vertical-align: inherit;">倉庫のトピックについて少し触れます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかの技術的な解決策をよりよく理解するために、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ある時点で、可能であれば、私たち自身ではなく普遍的な技術的なことを行うことを決定したことを</font><font style="vertical-align: inherit;">知ることは不必要ではありません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、おそらく、いくつかの試みの後、新しいビジネスを開発することが出てくるでしょう。</font><font style="vertical-align: inherit;">それは、条件付きで、社内の新興企業であることがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、会社のインフラストラクチャの残りの部分が統合される、多かれ少なかれ普遍的な別のシステムを検討しています。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サプライヤーと協力して問題は何ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、それらはたくさんあります。</font><font style="vertical-align: inherit;">いくつか与えるだけです：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それ自体、多くのサプライヤーがあります。</font><font style="vertical-align: inherit;">約400人います。誰もが時間をかける必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サプライヤーからオファーを取得する単一の方法はありません。</font><font style="vertical-align: inherit;">誰かがスケジュールに従ってメールを送信し、誰かが要求に応じて、誰かがファイルホスティングにアップロードし、誰かがサイトに配置します。</font><font style="vertical-align: inherit;">スカイプ経由でファイルを送信するまで、多くの方法があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単一のデータ形式はありません。</font><font style="vertical-align: inherit;">私はこの主題についても絵を描きました（下の表、さまざまな形式を表しています）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サプライヤーとの共同作業を続けるために守らなければならない最低小売価格と最低卸売価格の概念があります。</font><font style="vertical-align: inherit;">多くの場合、独自の形式で提供されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各サプライヤーの命名法は異なります。</font><font style="vertical-align: inherit;">その結果、同じ製品の呼び方が異なり、簡単に比較できる一意のキーはありません。</font><font style="vertical-align: inherit;">したがって、比較することは困難です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サプライヤーへの注文システムは自動化されていません。</font><font style="vertical-align: inherit;">私たちは、Skype上の誰かから、あなたの個人アカウントの誰かから、注文リストを含むexelファイルを毎晩送信する誰かに注文します。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/84/x_/0c/84x_0cekqji4tmiu6j8fw3470ko.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの問題に対処する方法を学びました。</font><font style="vertical-align: inherit;">後者に加えて、後者の作業が進行中です。</font><font style="vertical-align: inherit;">ここで技術的な詳細がありますので、次のリストを検討してください。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データの収集</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのまま</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サプライヤーファイルは、さまざまなソースから手動で収集され、準備されました。</font><font style="vertical-align: inherit;">準備には、特定のテンプレートに従って名前を変更し、コンテンツを編集することが含まれます。</font><font style="vertical-align: inherit;">ファイルによっては、非標準の商品、在庫にない商品の削除、列の名前の変更、通貨の換算、1つの異なるタブからのデータの収集が必要でした。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どうやって</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、メールをチェックし、そこから添付ファイル付きの手紙を受け取る方法を学びました。次に、直接リンクとYandexおよびGoogleドライブへのリンクを使用して作業を自動化しました。これにより、サプライヤーの約75％からオファーを受け取るという問題が解決しました。また、オファーがより頻繁に更新されるのは、これらのチャネルを介して行われるため、自動化の実際の割合が高くなることにも気付きました。インスタントメッセンジャーの価格はまだいくつかあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ファイルを手動で処理する必要がなくなりました。これを行うために、使用する列とタブ、通貨と在庫状況、納期、およびサプライヤーの作業スケジュールの決定方法を指定できるサプライヤープロファイルを入力しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは柔軟に判明しました。当然、最初はすべてを考慮していませんでしたが、すべてのプロバイダーが異なるファイル形式を持っていることを考えると、400プロバイダーすべての処理を構成するのに十分な柔軟性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイル形式については、xls、xlsx、csv、xml（yml）を理解しています。私たちの場合、これで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはまた、レコードをフィルタリングする方法を理解しました。ストップワードのリストを作成し、サプライヤーのオファーに含まれている場合は処理しません。技術的な詳細は次のとおりです。小さなリストでは、より優れた「真正面から」、さらに大きなリストでは高速のブルームフィルターを使用できます。私たちは彼と実験し、すべてを現状のまま残しました。なぜなら、リストには私たちよりも1桁大きいゲインが感じられるからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの重要なことは、サプライヤーの作業スケジュールです。当社のサプライヤーは、異なるスケジュールで作業します。さらに、彼らは週末が一致しない異なる国に所在しています。また、配達時間は通常、営業日数または数字の範囲として示されます。小売価格と卸売価格を設定するとき、クライアントに商品を配達できる時間を何らかの形で評価する必要があります。これを行うために、構成可能なカレンダーを作成しました。各プロバイダーの設定で、どのカレンダーを使用するかを指定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カテゴリーとメーカーに応じて割引とマージンの設定をしなければなりませんでした。サプライヤはすべてのパートナーに共通のファイルを持っていますが、一部のパートナーとの割引契約があります。これにより、必要に応じてVATを追加または差し引くことができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、割引とマージンのルールを設定すると、次のトピックに進みます。</font><font style="vertical-align: inherit;">結局のところ、それらを使用する前に、それがどのような種類の製品であるかを知る必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マッピングの仕組み</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
異なるサプライヤーから同じ製品を呼び出して、何を処理する必要があるかを理解するための小さな例：</font></font><br>
<blockquote> LG LCD 22MP48D-P <br>
21.5" LG 22MP48D-P Black (16:9, 1920x1080, IPS, 60 ,  DVI+D-Sub (VGA)) <br>
COMP —   —  LG 22MP48D-P <br>
 22"  LG  LG 22MP48D-P (21.5", , IPS LED 5ms 16:9 DVI  250cd 1920x1080 D-Sub FHD) 22MP48D-P<br>
 LG 22" LG 22MP48D-P Glossy-Black (IPS, LED, 1920x1080, 5 ms, 178°/178°, 250 cd/m, 100M:1 ,+DVI)  <br>
 LCD LG  LCD 22" IPS 22MP48D-P LG 22MP48D-P<br>
LG  21.5" LG 22MP48D-P gl.Black IPS, 1920x1080, 5ms, 250 cd/m2, 1000:1 (Mega DCR), D-Sub, DVI-D (HDCP), vesa 22MP48D-P.ARUZ<br>
LG  LG 22MP48D-P Black 22MP48D-P.ARUZ<br>
 LG 22MP48D-P 22MP48D-P<br>
 LG 22MP48D-P Glossy-Black 22MP48D-P<br>
 21.5" LG Flatron 22MP48D-P gl.Black (IPS, 1920x1080, 16:9, 178/178, 250cd/m2, 1000:1, 5ms, D-Sub, DVI-D) (22MP48D-P) 22MP48D-P<br>
 22" LG 22MP48D-P <br>
LG 22MP48D-P IPS DVI <br>
LG LG 21.5" 22MP48D-P IPS LED, 1920x1080, 5ms, 250cd/m2, 5Mln:1, 178°/178°, D-Sub, DVI, Tilt, VESA, Glossy Black 22MP48D-P<br>
LG 21.5" 22MP48D-P (16:9, IPS, VGA, DVI) 22MP48D-P<br>
 21.5`` LG 22MP48D-P Black <br>
LG  21.5" LG 22MP48D-P Glossy-Black (IPS, LED, 1920x1080, 5 ms, 178°/178°, 250 cd/m, 100M:1 ,+DVI) 22MP48D-P<br>
LG  LCD 21.5'' [16:9] 19201080(FHD) IPS, nonGLARE, 250cd/m2, H178°/V178°, 1000:1, 16.7M Color, 5ms, VGA, DVI, Tilt, 2Y, Black OK 22MP48D-P<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LCD LG 21.5 "22MP48D-Pブラック{IPS LED 1920x1080 5ms 16：9 250cd 178°/ 178°DVI D-Sub} 22MP48D-P.ARUZ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDS_Monitors LG LG 22" LCD 22MP48D 22MP48D-P </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
21.5 "16x9 LGモニターLG 21.5" 22MP48D-PブラックIPS LED 5ms 16：9 DVIマット250cd 1920x1080 D-Sub FHD 2.7kg 22MP48D-P.ARUZ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モニター21.5 "LG 22MP48D-P [ブラック]; 5ms; 1920x1080、DVI、IPS</font></font></blockquote> <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのまま</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比較には1C（サードパーティの有料モジュール）が含まれます。</font><font style="vertical-align: inherit;">利便性・スピード・正確性は、このレベルで6万人が利用できる6万点の商品をカタログ化することができました。</font><font style="vertical-align: inherit;">つまり、毎日、古くなり、サプライヤーのオファーからなくなり、新しいものと同じ数のマッチした商品が作成されました。</font><font style="vertical-align: inherit;">約-カタログサイズの0.5％、つまり </font><font style="vertical-align: inherit;">300製品。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それがどのようになったか：アプローチの一般的な説明</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し高いですが、一致させる必要があるものの例を示しました。マッチングのトピックを調べたところ、ElasticSearchがマッチングのタスクに人気があることには少し驚きました。私の意見では、概念的な制限があると思います。テクノロジースタックについては、データストレージにMS SQL Serverを使用していますが、比較は独自のインフラストラクチャで機能します。多くのデータがあり、迅速に処理する必要があるため、特定のタスク用に最適化されたデータ構造を使用し、必要なくディスクやデータベースにアクセスしないようにしますその他の遅いシステム。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、比較問題は多くの方法で解決することができます、そして、明らかに、それらのどれも絶対的な正確さを与えません。したがって、主なアイデアは、これらの方法を組み合わせて、精度と速度でランク付けし、速度を考慮して精度の高い順に適用することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各アルゴリズムの実行計画（退化したケースについての予約がある）は、次の一般的なシーケンスで簡単に表すことができます：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トークン化。ソース行を意味のある独立した部分に分割します。これは一度だけ実行でき、さらにすべてのアルゴリズムで使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トークンの正規化。良い方法では、自然言語の単語を一般的な数と用法に合わせる必要があり、「ABC15MX」（これはキリル文字です）などの識別子をラテン語に変換する必要があります。そして、すべてを同じレジスタに持ってきます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トークンの分類。各部分の意味を理解しようとしています。たとえば、カテゴリ、メーカー、色などを選択できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マッチの最適な候補を検索します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
元のラインと最良の候補が同じ製品を示す可能性の推定。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のすべてのアルゴリズムに共通する最初の2つのポイントから、即興が始まります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トークン化ここではそれだけを行い、スペース、スラッシュなどの特殊文字に従って行を部分に分割します。時間の経過に伴う文字セットは重要であることが判明しましたが、アルゴリズム自体には複雑なものは使用していません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、トークンを正規化する必要があります。小文字に変換します。すべてを主格の場合に導くのではなく、単純にエンディングを切り捨てます。小さな辞書もあり、トークンを英語に翻訳しています。特に、ロシア語の単語が同じ方法で英語に翻訳されるという意味で、翻訳は類義語から私たちを救います。翻訳に失敗した場合は、ラテン語のアルファベットと同様にキリル文字を変更します。 （判明しましたので、それはまったく不必要ではありません。たとえば、「SamsungU43NU7100U」の行のような汚いトリックを期待していない場合でも、キリル文字Eはかなり会うことができます）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j2/wv/2s/j2wv2spiz0vsmlp2iycrtnu8y4w.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トークンの分類。カテゴリ、メーカー、モデル、記事、EAN、色を強調表示できます。データが構造化されているディレクトリがあります。取引プラットフォームが提供する競合他社に関するデータがあります。それらを処理する場合、可能な場合はデータを構造化します。すべてのソースで1回だけ発生するエラーやタイプミス（メーカーや色など）を修正できます。メーカーや色はそれぞれ考慮しません。その結果、可能なメーカー、モデル、記事、色の大きな辞書があり、トークンの分類はOの辞書検索にすぎません（1）。理論的には、カテゴリのオープンリストとある種のスマート分類アルゴリズムを使用できますが、基本的なアプローチは適切に機能し、カテゴリ化はボトルネックにはなりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サプライヤがすでに構造化されたデータを提供している場合があることに注意してください。たとえば、記事がテーブルの別のセルにある場合や、サプライヤが卸売り販売で小売りを割引し、小売価格がyml（xml）形式で取得できる場合があります。</font><font style="vertical-align: inherit;">次に、データ構造を保存し、非構造化データからのみ、トークンをヒューリスティックにカテゴリーに分類します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、使用するアルゴリズムとその順序について説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全一致とほぼ完全一致</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も単純なケース。行はトークンに分割され、それらを1つの形式に導きました。次に、トークンの順序に影響されないハッシュ関数を考え出しました。さらに、ハッシュで照合することにより、すべてのデータをメモリに保持できるため、百万のキーを持つ辞書あたり16メガバイトを確保できます。実際には、このアルゴリズムは単純な文字列比較よりも優れています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハッシュに関しては、「exclusive or」の使用はそれ自体を示唆しており、次のような関数です：</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">long</span> <span class="hljs-title">GetLongHashCode</span>(<span class="hljs-params">IEnumerable&lt;<span class="hljs-keyword">string</span>&gt; tokens</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">long</span> hash = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> token <span class="hljs-keyword">in</span> tokens.Distinct())<font></font>
    {<font></font>
        hash ^= GetLongHashCode(token);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> hash;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この段階で最も興味深いのは、1行のハッシュを取得することです。実際には、32ビットは小さく、多くの衝突が発生することがわかりました。また、関数のソースコードをフレームワークから取得して戻り値の型を変更するだけでなく、個々の行の衝突が少なくなりますが、「排他的論理和」の後でも競合が発生するため、独自に記述しました。実際、それらは単に入力データから非線形性フレームワークから関数に追加されました。それは間違いなく優れていました。衝突を伴う新機能により、数百万のレコードで一度だけ会って、記録され、より良い時間まで延期されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、単語の順序とその形式を考慮せずに一致を探しています。このような検索はO（1）で機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながらまれですが、「ABC 42 Type 16」と「ABC 16 Type 42」のように発生します。これらは2つの異なる製品です。</font><font style="vertical-align: inherit;">私たちはそのようなことを扱うことも学びましたが、それについては後で詳しく説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人間が確認した製品のマッチング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動で照合される製品があります（ほとんどの場合、これらは自動的に照合されますが、手動でチェックされた製品です）。</font><font style="vertical-align: inherit;">実際、この場合も同じことを行っていますが、一致するハッシュのディクショナリを追加しただけです。この検索で​​は、アルゴリズムの時間の複雑さは変わりませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動で一致した行はデータベースにあるだけです。万が一に備えて、このような生データにより、将来ハッシュアルゴリズムを変更し、すべてを再計算して何も失うことがなくなります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性マッピング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の2つのアルゴリズムは高速で正確ですが、十分ではありません。次に、属性マッチングを適用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前は、データを正規化されたトークンの形式で既に提示し、それらをカテゴリに分類していました。この章では、トークンカテゴリ属性を呼び出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も信頼できる属性はEAN（https://ru.wikipedia.org/wiki/European_Article_Number）です。 EANマッチは、同じ製品であることをほぼ100％保証します。ただし、1つの製品のEANが異なる可能性があるため、EANの不一致は何も言いません。すべては問題ありませんが、データではEANはまれであるため、エラーレベルでの比較への影響があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事は信頼性が低くなります。</font><font style="vertical-align: inherit;">奇妙なことは、多くの場合、サプライヤーの構造化データから直接発生しますが、いずれにしても、この段階ではそれを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の段階と同じように、ここでは辞書（O（1）を検索）を使用し、（メーカー+モデル+記事）からのハッシュをキーとして使用します。</font><font style="vertical-align: inherit;">ハッシュを使用すると、メモリ内のすべての操作を実行できます。</font><font style="vertical-align: inherit;">この場合、色も考慮に入れます。一致するか存在しない場合は、商品が一致したと考えます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最も一致するものを検索</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでの手順は単純で、高速で、かなり信頼性がありましたが、残念ながら、それらは比較の半分未満しかカバーしていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最良の一致の検索では、単純なアイデアがあります。レアトークンの一致は大きな重みを持ち、頻繁なトークンの一致は小さいです。数字を含むトークンは、文字トークンよりも価値があります。同じ順序で一致するトークンは、再配置されたトークンよりも高く評価されます。長いマッチは短いマッチよりも優れています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今では、これらすべてを同時に考慮に入れ、数百万レコードのディレクトリのメモリに収まる高速なデータ構造を考え出す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
辞書の辞書の形でカタログを提示するというアイデアを思いつきました。最初のレベルでは、キーは製造元からのハッシュになります（カタログ内のデータは構造化されており、製造元はわかっています）、値は辞書です。今第2レベル。 2番目のレベルのキーはトークンからのハッシュになります。値は、このトークンが見つかったカタログのIDアイテムのリストです。この場合、トークンの組み合わせを含めて、カタログに表示される順序で使用します。トークンの数、長さなどに応じて、組み合わせとして何を使用し、何を使用しないかを決定します。これは、速度、精度、および必要なメモリ間の妥協点です。この図では、ハッシュも正規化もせずに、この構造を単純化しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kl/wu/k8/klwuk8-3nkyfo8db2schr5nt2mk.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各製品で平均20のトークンが使用されている場合、同封の辞書の値を含むリストでは、製品へのリンクが平均20回発生します。トークンはカタログにある商品の20倍以下です。おおよそ、100万レコードのカタログに必要なメモリを計算できます：2000万キー、各4バイト、2000万製品ID、各4バイト、ディクショナリとリストを整理するためのオーバーヘッド（順序は同じですが、リストとディクショナリのサイズが事前にはわかりませんが、外出中に増加し、2を掛けます）。合計-480メガバイト。実際には、商品のトークンがもう少し多くなり、100万の商品のカタログごとに最大800メガバイトが必要になります。許容範囲ですが、最新のIronの機能を使用すると、このサイズの100を超えるディレクトリを同時にメモリに格納できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アルゴリズムに戻ります。照合する必要のある文字列があれば、製造元を決定し（分類アルゴリズムがあります）、カタログの商品と同じアルゴリズムを使用してトークンを取得できます。ここで私はトークンの組み合わせを含めることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、すべてが比較的簡単です。トークンごとに、それが見つかったすべての製品をすばやく見つけ、以前に話し合ったすべての長さ、頻度、数字または特殊文字の存在を考慮に入れて、各一致の重みを推定し、見つかったすべての候補の「類似性」を評価できます。実際には、ここにも最適化があります。すべての候補を検討するわけではありません。最初に、重みが大きいトークンの一致の小さなリストを作成し、重みが低いトークンの一致をすべての製品に適用するのではなく、このリストにのみ適用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最良の一致を選択し、分類されたことが判明したトークンの偶然を見て、比較スコアを検討します。さらに、2つのしきい値P1とP2、P1 &lt;P2があります。評価がしきい値P2を超えることが判明した場合-人間の参加は必要ありません。すべてが自動的に行われます。 2つの値の間の場合-比較を手動で表示することを提案します。その前に、価格設定に参加しません。 P1未満の場合-そのような製品はカタログにない可能性が高いため、何も返品しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「ABC 42 Type 16」と「ABC 16 Type 42」の行に戻ります。</font><font style="vertical-align: inherit;">ソリューションは驚くほど簡単です-複数の製品が同じハッシュを持つ場合、ハッシュでそれらを照合しません。</font><font style="vertical-align: inherit;">そして最後のアルゴリズムはトークンの順序を考慮に入れます。</font><font style="vertical-align: inherit;">理論的には、サプライヤの価格表のこのようなラインは、16と42の数字がまったく発生しない任意の値と一致させることはできません。</font><font style="vertical-align: inherit;">実際、そのようなニーズに遭遇することはありませんでした。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スピードと正確さ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さあ、すべてのスピードについて。辞書を直線的に準備するのに必要な時間は、カタログのサイズによって異なります。比較に直接必要な時間は、比較される商品の数に直線的に依存します。検索に関係するすべてのデータ構造は、作成後に変更されません。これにより、マッチングの段階でマルチスレッドを使用する機会が得られます。 100万件のレコードのカタログの準備作業には、約40〜80秒かかります。比較は毎秒20〜40千レコードの速度で機能し、ディレクトリのサイズには依存しません。ただし、結果を保存する必要があります。選択したアプローチは、通常、大容量の場合に有益ですが、12のレコードを持つファイルは、極端に長くなります。したがって、キャッシュを使用して、15分ごとに検索構造を再カウントします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確かに、比較用のデータはどこかで読み取る必要があり（ほとんどの場合、これはExcelファイルです）、一致する文はどこかに保存する必要があり、これにも時間がかかります。</font><font style="vertical-align: inherit;">したがって、合計数は1秒あたり2〜4000レコードです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
精度を評価するために、さまざまなカテゴリのさまざまなサプライヤの約20,000の手動検証された比較のテストスイートを準備しました。</font><font style="vertical-align: inherit;">各変更後、アルゴリズムはこのデータでテストされました。</font><font style="vertical-align: inherit;">結果は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">商品がカタログにあり、正しく比較された-84％</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">製品はカタログにありますが、一致していません。手動一致が必要です-16％</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">商品がカタログにあり、誤って比較された-0.2％</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">製品はカタログになく、プログラムはそれを正しく識別した-98.5％</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">製品はカタログにありませんが、プログラムは製品の1つと一致させました-1.5％</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
製品が一致した場合の80％のケースでは、手動による確認は必要ありません（比較は自動的に確認されます）。このような自動確認されたオファーの0.1％はエラーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、0.1％の誤差が多いことがわかりました。一致する100万のレコードの場合、これは誤って一致する1000のレコードです。そして、バイヤーはまさにそのような記録を最もよく見つけるので、これはたくさんです。さて、このトラクターからヘッドライトの価格でトラクターを注文しない方法。ただし、この1000のエラーは100万の提案の作業の開始時にあり、徐々に修正されました。この問題を解決する不審な価格の検疫は後で発生しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比較に関連しないエラーの別のカテゴリがあります;これらは私たちのサプライヤーの誤った価格です。</font><font style="vertical-align: inherit;">これが、部分的に価格を考慮に入れていない理由の1つです。</font><font style="vertical-align: inherit;">価格という形で追加の情報があるので、それを使用して、自分の間違いだけでなく他の間違いも判断しようとすることにしました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間違った価格を検索する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは私たちが積極的に実験している部分です。ベーシック版は、ケースの値段での販売は出来ませんが、いい感じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各製品について、許容できるサプライヤー価格の境界を見つけます。入手可能なデータに応じて、この製品のサプライヤーの価格、競合他社の価格、このカテゴリーのこのメーカーの商品のサプライヤーの価格を考慮します。国境内に収まらない価格は検疫され、すべてのアルゴリズムで無視されます。手動で、このような不審な価格を通常としてマークできます。その後、この製品についてこれを記憶し、許容可能な価格の境界を再計算します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、最大許容価格と最小許容価格を計算するための直接アルゴリズムは絶えず変更されています。誤検知の数と検出された誤った価格の数の間の妥協点を探しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算には中央値を使用し（平均は最悪の結果をもたらす）、まだ分布形式を分析していません。</font><font style="vertical-align: inherit;">分布形式の分析は、アルゴリズムを改善できるように思える場所です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースを操作する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以上のことから、サプライヤと競合他社に関するデータを頻繁に、そして多くの方法で更新しており、データベースの操作がボトルネックになる可能性があると結論付けることができます。</font><font style="vertical-align: inherit;">原則として、当初はこれに注意を向け、最大のパフォーマンスを達成しようとしました。</font><font style="vertical-align: inherit;">多数のレコードを処理する場合、次のことを行います。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業しているテーブルからインデックスを削除します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このテーブルで全文索引を無効にする</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の条件のすべてのレコードを削除する（たとえば、現在処理中の特定のサプライヤーのすべてのオファー）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BULK COPYで新しいレコードを挿入する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックスを再作成する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文索引を有効にする</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一括コピーは1秒あたり10〜4千レコードの速度で動作するため、このような大きな広がりが見られないままですが、許容範囲です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レコードの削除には、挿入とほぼ同じ時間がかかります。</font><font style="vertical-align: inherit;">それでも、インデックスを再作成するにはしばらく時間がかかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、ディレクトリごとに個別のデータベースがあります。</font><font style="vertical-align: inherit;">オンザフライで作成します。</font><font style="vertical-align: inherit;">次に、なぜ複数のカタログがあるのか​​を説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目録の問題は何ですか</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それらもたくさんあります。</font><font style="vertical-align: inherit;">次にリストします：</font></font><br>
<br>
<ul>
<li>   400      .       .</li>
<li>   ,       ,     .          .</li>
<li>        ,   .  ,    ,    .</li>
<li>     ,      .        .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつかのディレクトリが必要です。</font><font style="vertical-align: inherit;">私たち自身の1つは、私たち自身で実行し、もう1つは、アグリゲーターカタログ、apiによって更新します。</font><font style="vertical-align: inherit;">2番目のカタログの意味は、アグリゲータープラットフォームが独自のカタログでのみ機能し、したがって、その命名法でオファーを受け入れることです。</font><font style="vertical-align: inherit;">これは、比較が必要であることが判明した別の場所です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比較が行われるのと同じ場所にディレクトリを維持することが論理的で正しいと考えました。</font><font style="vertical-align: inherit;">そのため、ディレクトリを管理しているユーザーに、サプライヤが持っているものを伝えることができますが、ディレクトリではわかりません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カタログの保管方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは詳細な特性のないカタログについてであり、特性は別の大きな物語であり、それについてもう一度です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的なプロパティとして、以下を選択しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メーカー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カテゴリー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダーコード</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イーン</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、外部ソースからカタログを取得するためのapiを作成し、次に、エントリの作成、編集、削除の利便性に取り組みました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索の仕組み</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、カタログを管理することの便利さは、カタログまたはサプライヤーのオファーで製品を素早く見つけることができることであり、微妙な違いがあります。たとえば、「LG 21.5」22MP48D-P（16：9、IPS、VGA、DVI）22MP48D-Pの行を「2MP48」で検索できるようにする必要があります。「</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボックスからのフルテキストSQLサーバー検索は、方法がわからないため、適切ではありません。 LIKE '％2MP48％'での検索は遅すぎます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのソリューションはかなり標準的です。N-gramを使用します。より正確には、</font><font style="vertical-align: inherit;">Trigram </font><font style="vertical-align: inherit;">を使用します。すでに全文索引を作成し、</font><font style="vertical-align: inherit;">Trigram </font><font style="vertical-align: inherit;">を使用して全文検索を実行しています。それを非常に合理的に使用しているとは思えませんこの場合の場所ですが、そのようなソリューションの速度が上がりました。要求に応じて、50ミリ秒から500ミリ秒、時には300万レコードの配列で最大1秒まで機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明すると、「LG 21.5」22MP48D-P（16：9、IPS、VGA、DVI）22MP48D-Pは「lg2 g21 215 152 522 22m 2mp mp4 p48 48d 8dp dp1 p16 169 69i 9ip ips psv svg vga gad adv dvi vi2 i22」は、フルテキストインデックスに参加する別のフィールドに格納されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、トリグラムはまだ役に立ちます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい製品を作成する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、カタログ内の製品はサプライヤーの提案により作成されています。つまり、サプライヤーが「LGモニターLCD 21.5」[16：9] 1920x1080（FHD）IPS、nonGLARE、250cd / m2、H178°/ V178°、1000：1、16.7Mカラー、 5ミリ秒、VGA、DVI、チルト、2年、ブラックOK 22MP48D-P」、120ドルの価格で、5〜10ユニットの在庫があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
商品を作成するときは、まず、そのような商品がカタログにまだ作成されていないことを確認する必要があります。この問題は4つの段階で解決されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、カタログに製品がある場合、サプライヤーの提案がこの製品に自動的に一致する可能性が非常に高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、新製品を作成するためのフォームをユーザーに表示する前に、トライグラムによる検索を実行し、最も関連性の高い結果を表示します。 （技術的には、これはCONTAINSTABLEを使用して行われます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つ目は、新製品のフィールドに入力するときに、類似の既存製品を表示します。これは2つの問題を解決します。重複を避け、名前のスタイルを維持するのに役立ちます。同様の製品をモデルとして使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、第4に、行をトークンに分割し、それらを正規化し、ハッシュをカウントしたことを覚えておいてください。同じことを行い、同じハッシュで商品を作成させません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この段階で、私たちはユーザーを支援しようとします。</font><font style="vertical-align: inherit;">価格表にある行により、メーカー、カテゴリ、商品、EAN、商品の色を特定します。</font><font style="vertical-align: inherit;">最初に、トークン（カテゴリに分類できます）を使用して、それがうまくいかなければ、トライグラムによって最も類似した製品を見つけます。</font><font style="vertical-align: inherit;">そして、十分に類似している場合は、製造元とカテゴリを入力します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
製品の編集はほとんど同じように機能しますが、すべてが適用できるわけではありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">価格の設定方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクはこれです。実際には、数量と販売のマージンのバランスを維持し、最大の利益を達成します。</font><font style="vertical-align: inherit;">店舗の仕事の他のすべての側面もこれに関連していますが、価格設定の段階で何が起こるかが最も大きな影響を与えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少なくとも、サプライヤーや競合他社からのオファーに関する情報が必要です。</font><font style="vertical-align: inherit;">また、ローンと分割払いという金融商品だけでなく、小売価格と卸売価格の最小値と配送費用も検討する価値があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">競合他社の価格を収集します</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず第一に、私たちは私たち自身の価格の多くのプロファイルを持っています。小売にはプロファイルがあり、卸売顧客にはいくつかあります。これらはすべて、システムで作成および構成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、各プロファイルの競合他社は異なります。小売-他の小売店、卸売販売-同じサプライヤー。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてはサプライヤーにとって明確ですが、小売の場合、競合他社のデータをいくつかの方法で収集します。まず、一部のアグリゲーターは、サイトにあるすべての商品のすべての価格に関する情報を提供します。私たちの命名法では、製品を一致させることができるため、自動的に機能します。現時点ではこれでほぼ十分です。次に、競合他社のパーサーがあります。それらはまだ自動化されておらず、コンソールアプリケーションの形で存在するため（クラッシュする場合があります）、めったに使用しません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロフィールをカスタマイズする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロファイルでは、サプライヤー、カテゴリー、メーカー、サプライヤーからの商品の価格に応じて、さまざまな範囲のマージンを設定する機会があります。</font><font style="vertical-align: inherit;">どのカテゴリまたはメーカーのどのサプライヤーと協力しているか、どの競合他社とは関係なく、どの競合他社を考慮しているかを示すことは依然として可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、金融商品を設定し、どの分割払いが利用可能か、銀行がいくらになるかを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、すでにマージンのマージンの範囲内で、私たちは独自の価格を形成し、そもそも同じバランスを維持し、2番目に倉庫の商品の売り上げを高めようとしています。</font><font style="vertical-align: inherit;">これは一言で言えばそうですが、実際、そこで何が起こっているのかを簡単な言葉で説明することは想定していません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何が起こっていないかをお話しします。</font><font style="vertical-align: inherit;">残念ながら、需要を予測し、倉庫に商品を保管するコストを考慮する方法はまだわかっていません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サードパーティシステムとの統合</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビジネスの観点からは重要ですが、技術的な観点からは興味がありません。</font><font style="vertical-align: inherit;">簡単に言えば、サードパーティのシステム（インクリメンタルシステムを含む。つまり、前回の交換以降に何が変更されたかを理解している）にデータを送信でき、メーリングリストを実行できると言います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ニュースレターはカスタマイズ可能なので、（それだけでなく）オファーを卸売り顧客に配信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
卸売顧客と連携するもう1つの方法は、b2bポータルです。</font><font style="vertical-align: inherit;">それはまだ活発に開発中で、文字通り1か月で動作します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アカウント、ログの変更</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
技術的な観点から興味深いものではないもう1つの質問。</font><font style="vertical-align: inherit;">各ユーザーはアカウントを持っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、次のことが言えます。ORMを使用する場合、ORMには変更追跡メカニズムが組み込まれています。</font><font style="vertical-align: inherit;">その中に入ると（そして私たちの場合はEF Coreであり、そこにはAPIさえあります）、ほぼ2行でログを取得できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更履歴については、インターフェースを作成し、システム設定で誰が何を変更したか、特定の製品を誰が編集または比較したかなどを追跡できるようになりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ログによると、統計を考慮することができます。これは私たちが行っていることです。</font><font style="vertical-align: inherit;">誰が作成または編集した製品の数、手動で確認された比較の数、および拒否された製品の数を知っているため、各変更を確認できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムの一般的な構造について少し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アカウントとカタログに依存しないもの用に1つのデータベース、ログ用に1つのデータベース、各ディレクトリ用に1つのデータベースがあります。これにより、ディレクトリクエリが容易になり、データ分析が容易になり、コードがより理解しやすくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ところで、ロギングシステムは自己記述型であり、1つのリクエストまたは1つの重いタスクに関連するログをグループ化する必要があり、さらにそれらを分析するための基本的な機能が必要です。既製のソリューションでは、これは困難であることがわかりました。さらに、これはサポートする必要がある別の依存関係です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WebインターフェイスはASP.NET Coreとブートストラップで作成され、重い操作はWindowsサービスによって実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の意見では、このプロジェクトにメリットをもたらしたもう1つの機能は、データの読み取りと書き込みのモデルが異なることです。本格的なQRSは実装していませんが、そこからコンセプトの1つを採用しました。リポジトリを介してデータベースに書き込みますが、記録に使用されるオブジェクトはupdate / create / deleteメソッドを離れることはありません。一括更新は、一括コピーによって行われます。読み取り用に別のモデルとデータアクセスの別のレイヤーが作成されたため、特定の瞬間に必要なものだけを読み取ります。 ORMを使用できると同時に、大量のクエリを回避できること、不確定な時間でのデータベースへのアクセス（遅延読み込みの場合など）、N + 1の問題があることがわかりました。また、DTOとして読み取るためのモデルも使用しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主要な依存関係のうち、ASP.NET Core、いくつかのサードパーティnugetパッケージ、およびMS SQL Serverがあります。</font><font style="vertical-align: inherit;">可能ですが、多くのサードパーティシステムに依存しないようにしています。</font><font style="vertical-align: inherit;">ローカルでプロジェクトを完全に展開するには、SQL Serverをインストールし、バージョン管理システムからソースコードを取得して、プロジェクトをビルドします。</font><font style="vertical-align: inherit;">必要なデータベースは自動的に作成されますが、他に必要なものはありません。</font><font style="vertical-align: inherit;">構成の1行または2行を変更する必要がある場合があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しなかったもの</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだプロジェクト知識システムを作成していません。</font><font style="vertical-align: inherit;">Wikiやヒントを適切に配置したいと考えています。</font><font style="vertical-align: inherit;">彼らは悪くないシンプルな直感的なインターフェースを作りませんでしたが、準備ができていない人にとっては少し混乱しています。</font><font style="vertical-align: inherit;">これまでのところCI / CDは計画のみ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
商品の細かな特徴は扱っていませんでした。</font><font style="vertical-align: inherit;">予定もしていますが、具体的な締め切りはまだありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/9t/jo/dm9tjobx0gdp9te5pb_uatrndli.jpeg" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事業概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
活発な開発の開始から運用開始まで、2人が7か月間プロジェクトに取り組みました。最初は、自由時間でプロトタイプを作りました。最も難しい統合は、既存のシステムに与えられました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが生産している3か月間、卸売り顧客が利用できる商品の数は7万個から23万個に増え、サイト上の商品の数は6万個から14万個に増えました。機能、写真、製品説明が必要なため、サイトは常に遅れています。 3か月前の4万件ではなく、10万6千件のオファーをアグリゲーターでアンロードします。カタログで作業する人数は変わっていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは425のサプライヤーと協力しており、この数は3か月でほぼ倍増しています。 1000を超える競合他社の価格を追跡しています。まあ、それを追跡するとき-解析のためのシステムがありますが、ほとんどの場合、定期的に提供する人から既製のデータを取得します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、売上についてはお伝えできません。私自身には信頼できるデータがありません。需要は季節的であり、前月と直接比較することは不可能です。そして、1年の間に、すべての要因からのシステムの影響を強調することができなくなりました。非常に、非常に条件付きで、プラスまたはマイナス1キロ、カタログの成長、より柔軟で競争力のある価格、および関連する売上高の増加が、開発と実装にすでに貢献しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の結果-特定の店舗のインフラストラクチャーとは本質的に関係のないプロジェクトがあり、それを利用して公共サービスを提供することができます。それは最初から考え出されたものであり、この計画はほとんどうまくいった。残念ながら、箱入りのソリューションは失敗しました。登録できるサービスとしてプロジェクトを提供するには、[同意する]チェックボックスをオンにします。これは、クライアントに適応せずに「現状のまま」機能します。インターフェースを再設計し、柔軟性を追加して、Wikiを作成する必要があります。また、インフラストラクチャを簡単にスケーラブルにして、単一障害点を排除します。現在、信頼性を確保するために、定期的なバックアップのみを行っています。エンタープライズソリューションとして、私たちはビジネスの問題を解決する準備ができていると思います。中小企業はビジネスを見つけることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、私たちはすでに最も基本的な機能を持つサードパーティのクライアントを1人集めました。</font><font style="vertical-align: inherit;">彼らは商品を比較するためのツールを必要としており、活発な開発に関連する不便はそれらを怖がらせませんでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z7/7-/uo/z77-uo8184l_r3fbdrginrvtyik.png" alt="画像"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja456592/index.html">英語の「時代」の発達における認知の歪み、または誰が私たちを妨害するかが私たちを助けます</a></li>
<li><a href="../ja456594/index.html">Webpackツリーの振とうと再エクスポートで2分</a></li>
<li><a href="../ja456596/index.html">微生物相。テストはどのように機能しますか？</a></li>
<li><a href="../ja456600/index.html">Nginxレシピ：captchaによるLDAP認証</a></li>
<li><a href="../ja456602/index.html">iOSアプリケーションで自動更新サブスクリプションを実装するためのガイド</a></li>
<li><a href="../ja456606/index.html">OpenStreetMap No. 464の世界からのニュース（2019/04/04-2019/06/10）</a></li>
<li><a href="../ja456608/index.html">チェリャビンスクのサウスブリッジとクベルネテスのバイトリックス</a></li>
<li><a href="../ja456610/index.html">押したり、承認したりしないでください</a></li>
<li><a href="../ja456612/index.html">1つのサーバーで複数の本番プロジェクトを公開する数百の方法の1つ</a></li>
<li><a href="../ja456614/index.html">疫病物語：イノセンスフレームのレンダリング方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>