<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêüèª üöº ‚ùå Zabbix 5.0, ou Quoi de neuf avec le serveur de mod√®les par IPMI üîë üëáüèø ‚û°Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous devez mettre l'√©quipement sous surveillance, et dans votre syst√®me Zabbix pr√©f√©r√©, il n'y a pas de mod√®le pr√™t √† l'emploi pour ce type d'√©quipeme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zabbix 5.0, ou Quoi de neuf avec le serveur de mod√®les par IPMI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/498052/"><img src="https://habrastorage.org/webt/qb/2s/vv/qb2svvvulvembgowfo16hune6kq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez mettre l'√©quipement sous surveillance, et dans votre syst√®me Zabbix pr√©f√©r√©, il n'y a pas de mod√®le pr√™t √† l'emploi pour ce type d'√©quipement. </font><font style="vertical-align: inherit;">Situation famili√®re? </font><font style="vertical-align: inherit;">Chacun en sort √† sa mani√®re. </font><font style="vertical-align: inherit;">Un administrateur recherche une solution sur Internet. </font><font style="vertical-align: inherit;">Le second d√©veloppe son propre. </font><font style="vertical-align: inherit;">Et certains abandonneront cette t√¢che. </font><font style="vertical-align: inherit;">Maintenant, l'√©quipe Zabbix avec chaque nouvelle version √©largit l'ensemble des mod√®les pr√©d√©finis dans le syst√®me. </font><font style="vertical-align: inherit;">Par exemple, dans la prochaine version 5.0, un nouveau mod√®le universel de surveillance des serveurs via IPMI appara√Ætra - Template Server by IPMI. </font><font style="vertical-align: inherit;">Des coll√®gues ont demand√© de l'aide pour d√©boguer ses travaux sur l'√©quipement de divers fabricants. </font><font style="vertical-align: inherit;">Pour nous, c'est toujours une occasion unique d'organiser un essai routier pour de nouvelles fonctionnalit√©s. </font><font style="vertical-align: inherit;">Nous partageons les r√©sultats.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä quoi ressemble le nouveau mod√®le? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de surveiller votre serveur √† l'aide de ce mod√®le, vous devez cr√©er un ¬´h√¥te¬ª dans le syst√®me avec une surveillance configur√©e via IPMI et y attacher un mod√®le de serveur par mod√®le IPMI (Fig. 1). Il n'y aura pas de description d√©taill√©e de cette op√©ration: des instructions d√©taill√©es sont dans la documentation officielle de Zabbix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. 1. Template Server Template par IPMI</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eab/b66/5ae/eabb665aebebd1dcbb76251f4fd6bf30.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenez compte des principes de ce mod√®le et de sa structure. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La base du mod√®le est l'utilitaire ipmitool. Il vous permet d'obtenir les statistiques n√©cessaires de l'√©quipement via IPMI. L'utilisation de la fonctionnalit√© de cet utilitaire et l'obtention de toutes les donn√©es n√©cessaires sont d√©sormais disponibles pour l'utilisateur via l'interface Web √† l'aide du type d'√©l√©ment de donn√©es de l'agent IPMI et de la cl√© sp√©ciale ipmi.get. Cela n'a √©t√© possible que gr√¢ce √† l'apparition de la cl√© ipmi.get dans la nouvelle version. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le mod√®le Template Server by IPMI, l'√©l√©ment de donn√©es Item Get IPMI sensor est responsable de l'organisation de la collecte d'informations √† l'aide de cette nouvelle fonctionnalit√© (Fig. 2). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. 2. √âl√©ment Obtenir l'√©l√©ment Capteurs IPMI</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d1/c93/42f/3d1c9342fdfcc52a10728b7f7217e737.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la suite du fonctionnement de l'√©l√©ment de donn√©es Capteurs Item Get IPMI, des informations sur l'√©tat de l'√©quipement dans un format JSON structur√© apparaissent dans le syst√®me Zabbix (Fig. 3). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. </font><font style="vertical-align: inherit;">3. Un exemple du r√©sultat de l'√©l√©ment d'op√©ration Obtenir les capteurs IPMI</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3dd/7a2/614/3dd7a26140cff08a6c94c1e43439f47a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de l'√©l√©ment de donn√©es √âl√©ment Obtenir les capteurs IPMI, le mod√®le comporte √©galement deux r√®gles de d√©tection de d√©tection de capteurs discrets (Fig. 4) et D√©couverte de capteurs de seuil (Fig. 5). </font><font style="vertical-align: inherit;">Ces r√®gles de d√©couverte utilisent le JSON r√©sultant de l'op√©ration de l'√©l√©ment de donn√©es Capteurs d'√©l√©ment IPMI pour cr√©er automatiquement de nouveaux √©l√©ments de donn√©es et d√©clencheurs. </font><font style="vertical-align: inherit;">Ceci est clairement visible dans les figures ci-dessous dans la section Article ma√Ætre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. </font><font style="vertical-align: inherit;">4. R√®gle de d√©couverte de capteurs discrets</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a09/50e/c78/a0950ec78ae4ae2bb7bac56b5fcc7a6c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. </font><font style="vertical-align: inherit;">5. R√®gle de d√©couverte des capteurs de seuil</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d9/f2d/f0b/5d9f2df0b22d287f153c5ec934f538a1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi le mod√®le utilise-t-il deux r√®gles de d√©tection, et non une? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La d√©couverte de capteurs discrets permet la cr√©ation automatique d'√©l√©ments de donn√©es de type cha√Æne dans leurs valeurs. Et la r√®gle de d√©tection La d√©couverte des capteurs de seuil vous permet de cr√©er automatiquement des √©l√©ments de donn√©es de type "nombre" dans leurs valeurs. De plus, cette r√®gle peut former jusqu'√† 6 d√©clencheurs pour chaque √©l√©ment de donn√©es (figure 6). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les valeurs des conditions de d√©clenchement sont extraites de JSON, c'est-√†-dire de l'appareil lui-m√™me. Des d√©clencheurs sont cr√©√©s pour 6 seuils: inf√©rieur dangereux, inf√©rieur critique, inf√©rieur non critique, sup√©rieur non critique, sup√©rieur critique, sup√©rieur dangereux. Si une valeur pour un seuil est manquante dans JSON, aucun d√©clencheur n'est cr√©√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un d√©clencheur √©duqu√©, le seuil peut √™tre red√©fini au niveau Zabbix. </font><font style="vertical-align: inherit;">Cependant, √† notre avis, la fa√ßon la plus logique de changer un d√©clencheur est de le convertir au niveau de l'√©quipement. </font><font style="vertical-align: inherit;">La proc√©dure √† suivre est g√©n√©ralement indiqu√©e dans les instructions de l'appareil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. </font><font style="vertical-align: inherit;">6. 6 d√©clencheurs prototypes de r√®gles de d√©tection D√©couverte de capteurs de seuil</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/772/26b/190/77226b1904a38f64c3721c6709df9463.png"></div><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous exploitons et allons.</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pour tester le mod√®le Template Server par IPMI, nous avons s√©lectionn√© des serveurs de trois fabricants: IBM, HP et Huawei. </font><font style="vertical-align: inherit;">Quelques minutes apr√®s la connexion, les r√©sultats indiqu√©s dans le tableau ont √©t√© obtenus aupr√®s d'eux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tableau 1. Serveur de mod√®les par r√©sultats de test IPMI</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fabricant d'√©quipement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mod√®le d'√©quipement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre d'√©l√©ments de donn√©es cr√©√©s automatiquement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de d√©clencheurs cr√©√©s automatiquement</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HP</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProLiant DL360 G5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vingt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1288H V5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">175</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ibm</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syst√®me x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">139</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les √©quipements ont r√©ussi √† se mettre au contr√¥le en utilisant un nouveau mod√®le et une nouvelle cl√© ipmi.key. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart des donn√©es que nous avons pu obtenir de l'√©quipement Huawei, et surtout de HP. </font><font style="vertical-align: inherit;">La raison en est la diff√©rence dans le mat√©riel des appareils et n'est pas li√©e √† la qualit√© de travail du nouveau mod√®le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les captures d'√©cran ci-dessous, vous pouvez voir les √©l√©ments de donn√©es et les d√©clencheurs cr√©√©s automatiquement par le mod√®le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. </font><font style="vertical-align: inherit;">7. √âl√©ments de donn√©es cr√©√©s automatiquement par le mod√®le</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/caa/6d2/1b6/caa6d21b6c1a76171143301767da2610.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure. </font><font style="vertical-align: inherit;">8. D√©clencheurs cr√©√©s automatiquement par le mod√®le.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f38/9fd/19b/f389fd19b353ee63f4bbee48995ad923.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* * * </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Template Server par IPMI s'est av√©r√© √™tre le meilleur. Il s'est av√©r√© √™tre facile √† utiliser et, surtout, ¬´universel¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mod√®le Template Server par IPMI sera inclus dans la liste des mod√®les de base de Zabbix version 5.0. Pour notre part, nous soutenons fortement cette approche du constructeur. M√™me si les sp√©cialistes sont oblig√©s de cr√©er leurs propres mod√®les sp√©cialis√©s, nous recommandons de prendre comme base les approches d√©finies par le fabricant lui-m√™me et observ√©es dans Template Server par IPMI. Tout d'abord, utilisez la d√©tection automatique des √©l√©ments √† l'aide de l'√©l√©ment principal. Et deuxi√®mement, appliquez la d√©tection de d√©clenchement automatique √† l'aide de l'√©l√©ment ma√Ætre dans les cas o√π cela est possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien et attendons avec impatience la sortie de Zabbix 5.0 bient√¥t!</font></font><br>
<br>
<i>:  ,    ¬´ ¬ª</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498036/index.html">Mark Andriessen: Il est temps de cr√©er pour nous-m√™mes (il est temps de construire)</a></li>
<li><a href="../fr498038/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 411 (13-19 avril 2020)</a></li>
<li><a href="../fr498042/index.html">Analyser, pas valider</a></li>
<li><a href="../fr498046/index.html">Les chercheurs d√©veloppent une approche pour r√©duire les biais dans les ensembles de donn√©es de vision par ordinateur</a></li>
<li><a href="../fr498050/index.html">La culture comme base pour faire √©voluer l'√©quipe x2 chaque ann√©e. √Ä propos des erreurs d'embauche et de la culture</a></li>
<li><a href="../fr498054/index.html">Battez le fil d'actualit√© Dragon: assurez-vous de vivre une bonne vie</a></li>
<li><a href="../fr498056/index.html">√âv√©nements num√©riques √† Moscou du 20 au 26 avril</a></li>
<li><a href="../fr498060/index.html">Approche de r√©glage industriel de PostgreSQL: exp√©riences de base de donn√©es Nikolay Samokhvalov</a></li>
<li><a href="../fr498062/index.html">S√©minaires hebdomadaires IBM - avril 2020</a></li>
<li><a href="../fr498064/index.html">√âmulateur de march√© classique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>