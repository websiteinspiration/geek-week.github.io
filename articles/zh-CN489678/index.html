<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏻 👼🏿 🔓 坚不可摧的内存，坚不可摧的进程 🧙🏻 🤲🏼 👩🏼‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="看了最近（1，2，3）与被赋予什么困难“空间”的处理器，我不由自主地想，如果“价格”为稳定的铁是如此之高，也许这是值得考虑一步，而另一方面，制作“软件”特殊因素具有抗性？但不是应用程序软件，而是它的执行环境：编译器，OS。是否有可能在任何时候使程序的执行中断，重启系统并从相同（或几乎相同）的位置继续...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>坚不可摧的内存，坚不可摧的进程</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489678/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fb/yl/uv/fbyluvlcmc7ubmta2h4tr4ppz74.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
看了最近（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）与被赋予什么困难“空间”的处理器，我不由自主地想，如果“价格”为稳定的铁是如此之高，也许这是值得考虑一步，而另一方面，制作“软件”特殊因素具有抗性？</font><font style="vertical-align: inherit;">但不是应用程序软件，而是它的执行环境：编译器，OS。</font><font style="vertical-align: inherit;">是否有可能在任何时候使程序的执行中断，重启系统并从相同（或几乎相同）的位置继续运行。</font><font style="vertical-align: inherit;">最后，进入</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">休眠状态</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">辐射效应</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
几乎所有从太空飞来的东西都能够破坏微电路的运行，这仅仅是“它”带来的能量的问题。即使光子具有伽玛射线的波长，它也可以克服几厘米的铝并使离子电离，甚至引起</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">核光电效应</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。电子无法穿透任何密集的障碍物，但是如果电子加速得更厉害，则在制动时它将发出伽马量子，并随之而来。鉴于自由中子的半衰期约为10分钟，因此稀有（非常快）的中子会从太阳到达我们。但是，任何事物的原子核都会飞过并且也有能力做事。中微子可能不会以这种方式出现。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
怎么不记得小猪和他在一起：“当你很小的时候，很难勇敢。” </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
宇宙辐射进入半导体的后果可能不同。</font><font style="vertical-align: inherit;">这是原子的电离，违反了晶格和核反应。</font><font style="vertical-align: inherit;">在此</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述了</font><font style="vertical-align: inherit;">当Si（30）转变为P（31）并实现所需的半导体性能时，原子反应堆</font><font style="vertical-align: inherit;">中用</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">热</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中子</font><font style="vertical-align: inherit;">掺杂的硅</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">值得一提的是，我们不应该重复提及以下精彩文章，</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有些影响具有短期影响，而没有长期影响。</font><font style="vertical-align: inherit;">它们可能导致可以通过硬件或软件修复的错误。</font><font style="vertical-align: inherit;">在最坏的情况下，重新启动会有所帮助。</font></font></li>
<li>     ,     .        -  .</li>
<li>            .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，如果类型2和类型3的影响能够被阻止，则会导致微电路逐渐退化。例如，如果在</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超标量</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理器中“烧毁”了（甚至4个）加法器</font><font style="vertical-align: inherit;">之一</font><font style="vertical-align: inherit;">，则您可以（至少在推测上并不困难）物理上禁用伤者的电源，而使用其余三个加法器，那么向外的性能只会明显下降。同样，如果内部池寄存器之一被损坏，则可能被标记为“总是忙”，并且将无法参与操作计划。内存单元可能不可用。 ……但是，如果某种无法弥补的事情恶化了，您将不得不提高冷藏储备。如果他是。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“顺便说一句，保持冷储备并不能保护微电路免受剂量累积的影响，甚至无法保护栅极绝缘体中电荷的累积。</font><font style="vertical-align: inherit;">此外，已知微电路，其中在没有电源的情况下剂量降低甚至比在没有电源的情况下更严重。</font><font style="vertical-align: inherit;">但是所有导致硬故障的单一影响都需要包括芯片。</font><font style="vertical-align: inherit;">关闭电源后，可能会有偏置效应，但它们对数字逻辑并不重要。” </font><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非理智学</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，有两个因素</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任何时候都可能会发生故障，可以通过重新启动来解决</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统将逐渐退化（故障序列），大部分工作将在部分退化的条件下发生</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您如何度过这一切？由于在整个功能块的层次结构中都具有保留/投票三倍的功能。三联本身并不是万能的灵丹妙药，有必要了解其中一个组件发生故障时哪个结果正确。然后，可以重新启动发生故障的组件，并使其与两名工人一起工作。但是在发生故障的情况下，当无法使组件处于工作状态时，只有冷储备（如果有）会有所帮助。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
即使故障看起来并不严重，也可能导致严重的问题。假设我们有三台同步工作的计算机，其中一台（假设是上面提到的）加法器之一发生故障。从一直保持运行状态的计算机的角度来看，这不是问题，但是对于整个系统来说，这是一个问题。受影响的计算机将开始系统性地延迟，并且将需要进行认真的工作才能进行总体同步。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个例子，从单台计算机的角度来看，导致某个范围（甚至一页）变得不可用的内存故障并不是至关重要的。诊断后，操作系统无需使用该范围即可解决此问题。但是从特洛伊木马系统的角度来看，这是一场灾难。现在，如果出现故障（通过重新启动可以解决），我们将需要使故障计算机进入与其余任何计算机相同的状态，但这是不可能的，因为在其他计算机上，此范围有效并且可能已使用。原则上，可以在所有三台计算机上禁止此范围，但是，不依次启动所有计算机就可以做到这一点并不明显。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当上层木马程序的系统与可以适应逐步降级的单台计算机相比，可靠性较低时，这是一个自相矛盾的情况。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值得一提的是称为</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lock-step</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的方法</font><font style="vertical-align: inherit;">，当两个内核以一个或两个时钟周期的偏移执行同一任务时，然后比较结果。</font><font style="vertical-align: inherit;">如果它们不相等，则将重新执行某些代码。</font><font style="vertical-align: inherit;">如果内存或常规缓存中有错误，则此方法不起作用，但是它具有自己的保护。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
还有一种</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使编译器重复执行部分命令并比较结果。</font><font style="vertical-align: inherit;">锁步的这种软版本。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这两种方法（感谢</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非理智学</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个提示）-尝试检测故障并尝试用“少量鲜血”修复它，而无需重新启动。</font><font style="vertical-align: inherit;">我们将更可能考虑出现严重故障或非严重故障而不可避免地需要重新启动的情况。</font><font style="vertical-align: inherit;">如何确保无需付出任何特殊努力的程序就可以随时中断，然后继续进行而不会造成重大损失。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如何教硬件和操作系统以适应逐渐退化是另一个讨论的主题。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
稳定/持久记忆的概念本身并不新鲜，因此备受尊敬的Dmitry Zavalishin（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扎伐林新</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提出了他的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久记忆的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念</font><font style="vertical-align: inherit;">。在他手中，这产生了一个完整的持久化</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phantom OS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，实际上是一个具有相应开销的虚拟机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
也许，随着时间的流逝，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MRAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FRAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技术将逐渐成熟</font><font style="vertical-align: inherit;">……尽管它们</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">还很</font></a><font style="vertical-align: inherit;">原始。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R-36M</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">火箭</font><font style="vertical-align: inherit;">（15L579？）的</font><font style="vertical-align: inherit;">机载计算机，还有一个传说</font><font style="vertical-align: inherit;">，它在近距离核爆炸后能够通过放射性云发射。在铁氧体磁芯上施加的记忆不受辐射的影响。这种存储器的记录周期约为</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微秒单位。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此在火箭飞行几分米的时间内，有一个物理上的机会来维护处理器的上下文-寄存器和标志的内容。</font><font style="vertical-align: inherit;">在安全的环境中醒来后，处理器继续工作。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
听起来很可信。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有一些缺点：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前的休眠方式不适合。</font><font style="vertical-align: inherit;">这需要一些努力和时间。</font><font style="vertical-align: inherit;">我们正在努力保护自己免受突然失败的影响。</font><font style="vertical-align: inherit;">在此故障之后，处理器在物理上至少能够执行某些操作并不明显。</font><font style="vertical-align: inherit;">同样，在15L579中，系统在故障开始之前会收到警告，并有时间进行防范。</font></font></li>
<li> “”      —    ,    ,    —   .      ,    ()   ,    .</li>
<li>     ,   ,     .        —   -.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，崩溃恢复本质上是与异常处理相对应的。</font><font style="vertical-align: inherit;">实际上，故障本身在大多数情况下是从硬件中断开始的。</font><font style="vertical-align: inherit;">区别在于，异常之后，我们可以继续工作，在这种情况下，我们首先需要还原工作上下文-操作系统内核的内存和状态。</font><font style="vertical-align: inherit;">但是最后一部分看起来是一样的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，它应该从应用程序程序员的角度看。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统内核之外的外观</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于从故障中恢复类似于从引发异常中恢复，因此使用它看起来可能类似。</font><font style="vertical-align: inherit;">例如，在C ++中，我们从std :: exception继承std :: greater_error类，将其捕获在常规try / catch块中并组织处理。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，作者更喜欢</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setjmp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">longjmp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（SJLJ）</font><font style="vertical-align: inherit;">的语义，</font><font style="vertical-align: inherit;">因为：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这很简洁，只需调用模拟setjmp（＆buf）并从同一位置恢复工作</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甚至不需要“＆buf”，只需调用存储当前状态的系统函数</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了C ++外，还有其他很棒的语言，不是到处都有异常处理，但是到处都有对系统函数的调用</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无需修改语言，因为我们原本打算尽可能采取侵入性的行动</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一次，SJLJ </font><font style="vertical-align: inherit;">由于性能较差而在异常处理中</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迷失</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DWARF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技术</font><font style="vertical-align: inherit;">（严格来说，矮级只是记录信息的一种格式），性能在这里并不是很重要。</font><font style="vertical-align: inherit;">在任何情况下，维持国家都不是一件容易的事；必须以负责任的态度来对待它。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作系统内核内部的外观</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
需要保存什么，流程执行的上下文由什么组成？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于处于用户模式的每个线程-具有必要寄存器的当前“ jmp_buf”，这意味着OS必须在保存数据之前停止调用进程的所有线程</font></font></li>
<li>  ,      —   .         (:   ),      (ex:   ).</li>
<li>      .        (ex:   ),   (ex:  TCP ).          .</li>
<li>  ,     .      ,       </li>
<li> .        ,     .   ,       —  . ..           .<br>
<br>
 ,       ,           .           .</li>
<li>,          .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从虚拟内存到物理代码的转换不需要信息，反之亦然；重新启动后，该信息将由自己重新创建，可能以其他方式重新创建。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
至于使用文件系统。在文件系统中，有事务系统。如果应用程序需要精确的事务行为，则应将流程上下文的保存与文件系统事务的确认同步。另一方面，例如，对于记录文本日志，使用常规文件系统是合乎逻辑的，这里的事务性很奇怪。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在上述所有问题中，最大的问题是由内存内容的保存引起的；与之相比，其他所有内容的数量都微不足道。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行时</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该库缓冲内存分配，以较大的块从系统中请求它们，然后自行分发。</font><font style="vertical-align: inherit;">因此，创建/删除段相对较少。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是程序与内存连续工作，从本质上讲，内存子系统通常是计算的瓶颈。</font><font style="vertical-align: inherit;">而所有可以简化我们生活的就是对已修改页面的标志的硬件支持。</font><font style="vertical-align: inherit;">预计在状态保存之间，不会出现太多修改的页面。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基于此，将来我们将处理内存的内容。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存内存内容</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所需的行为接近数据库-DBMS可以随时“下降”，但是所做的工作将一直持续到最后一次提交为止。这是通过维护事务日志来实现的，提交记录将使对该事务所做的所有更改合法化，该日志将进入该日志。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，由于“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务性内存</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”一词很忙，因此我们将引入另一个“不可破坏的内存”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从旁可以看到实现这种不可破坏的内存的两种方法：方法</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们称其为“朴实无华”。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主要思想是，事务中所有更改的数据都应放在RAM中。那些。在操作期间，交换机制不会将任何内容保存到磁盘，但是在提交期间，所有更改的页面都将保存到交换文件中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有关所选段及其与交换文件中位置的关系的信息将写入日志。在操作期间，此信息将在提交期间进行累积和记录。重新启动时，系统可以重新创建段。交换机制将能够拉起它们，被中断的程序将神奇地接收其数据。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，在这种模式下，例如，不可能分配</font><font style="vertical-align: inherit;">大于可用内存</font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">callocth</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顺便说</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一下，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">mallocth</font></a><font style="vertical-align: inherit;">是可能的）。但是，无论如何这都不是一个好主意。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
即使这样的机制仅适用于声明自己是“不可破坏的”进程，所有这些进程的当前事务所占用的内存量也不能超过物理可用空间。交换机制实际上停止了交换，而变成了用于存储最近交易的机制。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有这些都对应用程序开发人员施加了一定的约束，可能导致磁盘上的负载不均衡，通常这并不是我们想要的，但是它可以在嵌入式系统中工作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此选项的主要缺点是，在提交过程中发生致命错误（仅写入部分页面），导致相应进程进入不稳定状态，此后必须将其停止。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事实证明某种形式的50％不可侵犯性。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项二</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，“影子” </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要充当事务管理器，您需要成为事务管理器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们定义实体：</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font><b><font style="vertical-align: inherit;">文件</font></b><font style="vertical-align: inherit;">包含数据页面，因此大小是页面大小的倍数。</font><font style="vertical-align: inherit;">我们说文件，我们指的是该部分，因为 </font><font style="vertical-align: inherit;">固定大小可提高系统稳定性。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分页</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><b><font style="vertical-align: inherit;">页面分配器</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">必须选择一个页面，不仅用于用户数据，而且还必须例如记录记录分配器本身的状态。</font><font style="vertical-align: inherit;">以及上面提到的所有内容。</font></font></li>
<li><b> </b>.    ,        .     ,    , <br>
<i>(= ,  )</i>.</li>
<li><b> </b>.  —     <br>
<ul>
<li>ID </li>
<li> </li>
<li>    ( )</li>
<li>ID     .</li>
</ul><br>
   -   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">TLB</a>, ..     .<br>
<br>
          ( )     .             .            , ex:   (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Buddy Allocator</a>)       .<br>
<br>
    ,      .             .</li>
<li><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> </b>.                  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">COW</a> (copy on write)   .    ,        .    COW,    -  ,             .           .<br>
<br>
  —     -  ,           “<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">dirty</a>”.             .</li>
<li>  ().              .<br>
<br>
 :           ,        .<br>
<br>
<u> </u>.    ,            .                .     ,     ,       .       .       ,      ?   ,    .<br>
<br>
        ,        .<br>
<br>
            — <i>(=  ,  ,   ,   )</i>.<br>
<br>
       <br>
<i>(=,  )</i>.      .<br>
<br>
       .      ,     .      ,  ,      ,    .<br>
<br>
           ,      .     ,       .       .<br>
<br>
     —             .       ,  ,         ,         ,    .<br>
    ,     ,      .<br>
<br>
        .</li>
<li><b> </b>.  ,      ,    —           .        <u> ,        </u>?<br>
<br>
     —             .        ,      .  ,        .         ,     ..         .<br>
<br>
  — ,    SSD      !   ,     SSD  (       “” )      .<br>
<br>
 ,         . <br>
<br>
   —      .   ,     .       ,         .         (    ).<br>
<br>
   ,   ,     ,     . ,   ,    .   ,     ,   ,            .  ,    —            .           .</li>
<li><b>Checkpoint</b>. <br>
<br>
,       ,        ,  ,    .    —    .      ,          .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">checkpoint</a>.           .<br>
<br>
 . <u></u>.  -      checkpoint- .   .<br>
<br>
,             .            -  . <br>
<br>
    checkpoint-.               ,    /  .<br>
<br>
-,        -   /,     .       ,   ( ...).       .<br>
<br>
<u></u>.              .   .     ,        .    —  ,      checkpoint.</li>
</ol><br>
<h4>     </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遗憾的是，没有在空间条件下能够完全抵抗长期运行的存储设备。铁氧体磁芯具有抗辐射性，但由于焊接接头数量众多，它们也有其自身的特殊问题。加上低容量，低速度和高制造复杂性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，您必须能够可靠地写入和读取该数据。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一个明显的候选人是闪存。最初，由于有效写入周期的数量较少，Flash并不是很可靠，因此开发了特殊的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来使用它</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前面提到过，三重用于处理不可靠的元素，这里使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">RAID1就</font></a><font style="vertical-align: inherit;">足够了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为 </font><font style="vertical-align: inherit;">如果由于控制值而导致记录失败，则可以知道两页中的哪一页被错误地写入，因此必须将其覆盖。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，现在我们手上有了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一词的所有四个字母</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">自然</font><font style="vertical-align: inherit;">实现</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原子性，</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致性，</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隔离性。</font><font style="vertical-align: inherit;">如果不考虑共享内存的情况。</font><font style="vertical-align: inherit;">目前，我们尚未考虑。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久性，这是我们在提交后释放进程而没有等待将其内存中的所有数据物理记录到磁盘的唯一尝试作弊的时间。</font><font style="vertical-align: inherit;">在最坏的情况下，这将导致回滚到先前的事务。</font><font style="vertical-align: inherit;">目前尚不清楚这对性能和耐用性有多重要。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚苯乙烯</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">只是一个简短的说明。</font><font style="vertical-align: inherit;">我们没有回滚事务处理机制，回滚只能是一个致命错误。</font><font style="vertical-align: inherit;">从技术上（似乎），很容易实现事务回滚程序，就像longjmp一样。</font><font style="vertical-align: inherit;">但这是longjmp的高级版本，因为 </font><font style="vertical-align: inherit;">完全恢复“ setjmp”时进程的内部状态，避免内存泄漏，不仅允许从下至上的过渡... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">也许可以将</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenLink Virtouso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DBMS服务器</font><font style="vertical-align: inherit;">（也可以作为免费软件</font><font style="vertical-align: inherit;">获得）视为事务管理器的原型</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">感谢Valery Shunkov（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非理智学</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和Anton Bondarev（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阿邦达列夫</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）进行有意义且非常有用的讨论。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPPPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安娜·鲁萨科娃</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Anna Rusakova）的</font></a><font style="vertical-align: inherit;">插图</font><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN489666/index.html">C ++中的重载。第二部分 操作员超载</a></li>
<li><a href="../zh-CN489668/index.html">Kubernetes中的CPU限制和激进节流</a></li>
<li><a href="../zh-CN489672/index.html">我们复兴了六足动物。第二部分</a></li>
<li><a href="../zh-CN489674/index.html">Angular：NGRX的清晰介绍</a></li>
<li><a href="../zh-CN489676/index.html">我们使用Nuxt.js，GraphQL，Strapi和Stripe克隆了食品配送服务。第1/7部分</a></li>
<li><a href="../zh-CN489682/index.html">Chrome扩展程序中的跨域读取阻止（CORB）</a></li>
<li><a href="../zh-CN489684/index.html">这是常态-4：使用法线贴图解决问题</a></li>
<li><a href="../zh-CN489688/index.html">OData + RxJava + Retrofit 2适用于Android应用程序</a></li>
<li><a href="../zh-CN489692/index.html">将RabbitMQ与MonsterMQ结合使用第3部分</a></li>
<li><a href="../zh-CN489696/index.html">生物声学如何帮助探索动物界</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>