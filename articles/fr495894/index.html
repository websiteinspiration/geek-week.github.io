<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèΩ üéÖüèæ üî¶ Javascript Performance Measurement üë©üèø‚Äçü§ù‚Äçüë©üèæ üõ†Ô∏è üèâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mesurer le temps n√©cessaire √† l'ex√©cution d'une fonction est un bon moyen de prouver qu'une impl√©mentation d'un m√©canisme est plus productive qu'une a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Javascript Performance Measurement</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495894/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesurer le temps n√©cessaire √† l'ex√©cution d'une fonction est un bon moyen de prouver qu'une impl√©mentation d'un m√©canisme est plus productive qu'une autre. Cela vous permet de vous assurer que les performances de la fonction n'ont pas souffert apr√®s certaines modifications apport√©es au code. Il permet √©galement de rechercher les goulots d'√©tranglement des performances des applications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si un projet Web a des performances √©lev√©es, cela contribue √† sa perception positive par les utilisateurs. Et si les utilisateurs ont aim√© travailler avec la ressource, ils ont la propri√©t√© de revenir. Par exemple, dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'√©tude a montr√© que 88% des clients en ligne sont moins susceptibles de revenir aux ressources qu'ils rencontrent en cas d'inconv√©nient. Ces inconv√©nients peuvent √™tre caus√©s par des probl√®mes de performances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est pourquoi les outils pour aider √† trouver les goulots d'√©tranglement des performances et mesurer les r√©sultats des am√©liorations apport√©es au code sont importants dans le d√©veloppement Web. Ces outils sont particuli√®rement pertinents dans le d√©veloppement JavaScript. Il est important de savoir que chaque ligne de code JavaScript peut potentiellement bloquer le DOM, car JavaScript est un langage √† thread unique. </font><font style="vertical-align: inherit;">
Dans cet article, je parlerai de la fa√ßon de mesurer les performances des fonctions et de ce qu'il faut faire avec les r√©sultats de mesure.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/by/of/jl/byofjlhqvkjueyjzh-cyymte_qg.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous pensez que certains calculs sont trop lourds √† effectuer dans le thread principal, vous pouvez alors d√©cider de les d√©placer vers un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">technicien de service</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou un travailleur Web.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thode Performance.now ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interface </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> donne acc√®s √† une valeur de type </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOMHighResTimeStamp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> via une m√©thode </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cette m√©thode renvoie un horodatage indiquant le temps en millisecondes qui s'est √©coul√© depuis que le document a commenc√© √† exister. </font><font style="vertical-align: inherit;">De plus, la pr√©cision de cet indicateur est d'environ 5 microsecondes (fractions de milliseconde). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de mesurer les performances d'un fragment de code √† l'aide de la m√©thode </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous devez effectuer deux mesures de temps, enregistrer les r√©sultats de ces mesures dans des variables, puis soustraire les r√©sultats de la premi√®re des r√©sultats de la deuxi√®me mesure:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> t0 = performance.now();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++)&nbsp;<font></font>
{<font></font>
&nbsp;&nbsp;<span class="hljs-comment">// - </span><font></font>
}<font></font>
<span class="hljs-keyword">const</span> t1 = performance.now();
<span class="hljs-built_in">console</span>.log(t1 - t0, <span class="hljs-string">'milliseconds'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Chrome, apr√®s avoir ex√©cut√© ce code, vous pouvez obtenir quelque chose comme ceci:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.6350000001020817</span> <span class="hljs-string">"milliseconds"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Firefox, comme ceci:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">1</span> milliseconds
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, les r√©sultats de mesure obtenus dans diff√©rents navigateurs sont tr√®s diff√©rents. </font><font style="vertical-align: inherit;">Le fait est que dans Firefox 60, la pr√©cision des r√©sultats renvoy√©s par l'API Performance est r√©duite. </font><font style="vertical-align: inherit;">Nous en parlerons davantage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interface Performance a bien plus de capacit√©s que de simplement renvoyer un certain horodatage. </font><font style="vertical-align: inherit;">Ceux - </font><font style="vertical-align: inherit;">ci comprennent la </font><font style="vertical-align: inherit;">mesure de </font><font style="vertical-align: inherit;">diff√©rents aspects de la </font><font style="vertical-align: inherit;">performance repr√©sent√©e par ces extensions de cette interface comme la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Timeline Performance</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> API </font><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navigation Timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Timing utilisateur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchronisation des </font><font style="vertical-align: inherit;">ressources</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mat√©riel pour en savoir plus sur ces API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, nous parlons de mesurer la performance des fonctions, nous avons donc suffisamment d'opportunit√©s que la m√©thode donne</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Date.now () et performance.now ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez penser que vous pouvez utiliser la m√©thode pour mesurer les performances </font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">C'est en effet possible, mais cette approche pr√©sente des inconv√©nients. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©thode </font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">renvoie le temps en millisecondes qui s'est √©coul√© depuis l'√®re Unix (1970-01-01T00: 00: 00Z) et d√©pend de l'horloge syst√®me. </font><font style="vertical-align: inherit;">Cela signifie non seulement que cette m√©thode n'est pas aussi pr√©cise que </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais qu'elle </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">renvoie </font><font style="vertical-align: inherit;">en revanche des </font><font style="vertical-align: inherit;">valeurs qui, dans certaines conditions, peuvent √™tre bas√©es sur des indicateurs d'horloge incorrects. </font><font style="vertical-align: inherit;">Voici ce que Rich Gentlekor, un programmeur li√© au moteur WebKit, dit: ¬´Peut-√™tre que les programmeurs sont moins susceptibles de penser que les lectures retourn√©es lors de l'acc√®s</font></font><code>Date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en fonction de l'heure du syst√®me, il est absolument impossible d'appeler id√©al pour surveiller des applications r√©elles. </font><font style="vertical-align: inherit;">La plupart des syst√®mes ont un d√©mon qui synchronise r√©guli√®rement l'heure. </font><font style="vertical-align: inherit;">L'ajustement de l'horloge syst√®me pendant quelques millisecondes toutes les 15-20 minutes est une chose courante. </font><font style="vertical-align: inherit;">Avec une telle fr√©quence, des r√©glages d'horloge d'environ 1% des intervalles de 10 secondes seront inexacts. ¬ª</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thode Console.time ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mesure du temps √† l'aide de cette API est extr√™mement simple. </font><font style="vertical-align: inherit;">Assez, avant le code dont vous devez √©valuer les performances, appelez la m√©thode </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et apr√®s ce code - la m√©thode </font></font><code>console.timeEnd()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dans ce cas, l'une et les autres m√©thodes doivent passer le m√™me argument de cha√Æne. </font><font style="vertical-align: inherit;">Sur une seule page, jusqu'√† 10 000 de ces minuteries peuvent √™tre utilis√©es simultan√©ment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pr√©cision des mesures de temps effectu√©es √† l'aide de cette API est la m√™me que lors de l'utilisation de l'API Performance, mais la pr√©cision qui sera atteinte dans chaque situation sp√©cifique d√©pend du navigateur.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) {
&nbsp;&nbsp;<span class="hljs-comment">// - </span><font></font>
}<font></font>
<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir ex√©cut√© ce code, le syst√®me affichera automatiquement des informations sur le temps √©coul√© sur la console. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Chrome, cela ressemblera √† ceci:</font></font><br>
<br>
<pre><code class="javascript hljs">test: <span class="hljs-number">0.766845703125</span>ms
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Firefox, comme ceci:</font></font><br>
<br>
<pre><code class="javascript hljs">test: <span class="hljs-number">2</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, tout ici est tr√®s similaire √† ce que nous avons vu en travaillant </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La force de la m√©thode </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est sa facilit√© d'utilisation. </font><font style="vertical-align: inherit;">√Ä savoir, nous parlons du fait que son application ne n√©cessite pas la d√©claration de variables auxiliaires et de trouver la diff√©rence entre les indicateurs qui y sont enregistr√©s.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√©cision de temps r√©duite</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous, √† l'aide des outils d√©crits ci-dessus, avez mesur√© les performances de votre code dans diff√©rents navigateurs, vous pouvez alors pr√™ter attention au fait que les r√©sultats de mesure peuvent varier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raison en est que les navigateurs essaient de prot√©ger les utilisateurs contre les attaques </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temporelles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et contre les m√©canismes d'identification des navigateurs ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">empreinte digitale du navigateur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Si les r√©sultats de la mesure du temps s'av√®rent trop pr√©cis, cela peut donner aux attaquants la possibilit√©, par exemple, d'identifier les utilisateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Firefox 60, comme d√©j√† mentionn√©, la pr√©cision des r√©sultats de mesure du temps est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©duite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour cela, d√©finissez la </font></font><code>privacy.reduceTimerPrecision</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur de </font><font style="vertical-align: inherit;">la propri√©t√© </font><font style="vertical-align: inherit;">sur 2 ms.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelque chose √† garder √† l'esprit lors des tests de performances</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous disposez d√©sormais d'outils pour mesurer les performances des fonctions JavaScript. </font><font style="vertical-align: inherit;">Mais avant de vous lancer dans les affaires, vous devez consid√©rer certaines des fonctionnalit√©s dont nous allons parler maintenant.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Diviser pour mieux r√©gner</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons qu'en filtrant certaines donn√©es, vous fassiez attention au lent fonctionnement de l'application. Mais vous ne savez pas exactement o√π se situe le goulot d'√©tranglement des performances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu de sp√©culer sur quelle partie du code est lente, il serait pr√©f√©rable de d√©couvrir en utilisant les m√©thodes ci-dessus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de voir l'image g√©n√©rale de ce qui se passe, vous devez d'abord utiliser </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>console.timeEnd()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©valuer les performances d'un bloc de code, ce qui, vraisemblablement, a un mauvais effet sur les performances. Ensuite, vous devez regarder la vitesse des diff√©rentes parties de ce bloc. Si l'un d'eux semble nettement plus lent que les autres, vous devez y porter une attention particuli√®re et savoir comment l'analyser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moins il y a de code entre les appels √† des m√©thodes qui mesurent le temps, plus la probabilit√© que quelque chose qui n'est pas pertinent √† la situation probl√©matique soit mesur√©e est faible.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçTenez compte du comportement des fonctions avec diff√©rentes valeurs d'entr√©e</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les applications r√©elles, les donn√©es re√ßues √† l'entr√©e d'une fonction particuli√®re peuvent √™tre tr√®s diff√©rentes. </font><font style="vertical-align: inherit;">Si vous mesurez les performances d'une fonction √† laquelle un ensemble de donn√©es s√©lectionn√© au hasard a √©t√© transmis, cela ne fournira aucune information pr√©cieuse pouvant clarifier ce qui se passe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fonctions lors de la recherche de performances doivent √™tre appel√©es avec des donn√©es d'entr√©e qui ressemblent autant que possible aux vraies.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Ex√©cuter plusieurs fois les fonctions</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous ayez une fonction qui it√®re sur un tableau. </font><font style="vertical-align: inherit;">Elle effectue certains calculs en utilisant chaque √©l√©ment du tableau, puis retourne un nouveau tableau avec les r√©sultats des calculs. </font><font style="vertical-align: inherit;">En pensant √† l'optimisation de cette fonction, vous voulez savoir ce qui fonctionne plus rapidement dans votre situation - une boucle </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou une boucle r√©guli√®re </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici deux options pour cette fonctionnalit√©:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testForEach</span>(<span class="hljs-params">x</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test-forEach'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> res = [];<font></font>
&nbsp;&nbsp;x.forEach(<span class="hljs-function">(<span class="hljs-params">value, index</span>) =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.push(value / <span class="hljs-number">1.2</span> * <span class="hljs-number">0.1</span>);<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test-forEach'</span>)
&nbsp;&nbsp;<span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testFor</span>(<span class="hljs-params">x</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test-for'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> res = [];
&nbsp;&nbsp;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; x.length; i ++) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.push(x[i] / <span class="hljs-number">1.2</span> * <span class="hljs-number">0.1</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test-for'</span>)
&nbsp;&nbsp;<span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testez les fonctions:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> x = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">100000</span>).fill(<span class="hljs-built_in">Math</span>.random());<font></font>
testForEach(x);<font></font>
testFor(x);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir ex√©cut√© le code, nous obtenons les r√©sultats suivants:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">27</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">3</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le cycle semblait </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√™tre beaucoup plus lent que le cycle </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Apr√®s tout, les r√©sultats des tests indiquent exactement cela? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, apr√®s un seul test, il est trop t√¥t pour tirer de telles conclusions. </font><font style="vertical-align: inherit;">Essayons d'appeler les fonctions deux fois:</font></font><br>
<br>
<pre><code class="javascript hljs">testForEach(x);<font></font>
testForEach(x);<font></font>
testFor(x);<font></font>
testFor(x);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtenons ce qui suit:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">13</span>ms - timer ended<font></font>
test-forEach: <span class="hljs-number">2</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">1</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">3</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'av√®re que la fonction dans laquelle elle est utilis√©e </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, appel√©e la deuxi√®me fois, est aussi rapide que celle dans laquelle elle est utilis√©e </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mais, √©tant donn√© que la premi√®re </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonction appelle, la fonction fonctionne beaucoup plus lentement, cela ne vaut peut-√™tre pas la peine de l'utiliser.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçTester les performances dans diff√©rents navigateurs</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests ci-dessus ont √©t√© effectu√©s dans Firefox. </font><font style="vertical-align: inherit;">Mais que faire si vous les ex√©cutez dans Chrome? </font><font style="vertical-align: inherit;">Les r√©sultats seront compl√®tement diff√©rents:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">6.156005859375</span>ms<font></font>
test-forEach: <span class="hljs-number">8.01416015625</span>ms<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">4.371337890625</span>ms<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">4.31298828125</span>ms
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fait est que les navigateurs Chrome et Firefox sont bas√©s sur diff√©rents moteurs JavaScript qui impl√©mentent diff√©rentes optimisations de performances. </font><font style="vertical-align: inherit;">Il est tr√®s utile de conna√Ætre ces diff√©rences. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, Firefox a une meilleure optimisation </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec une entr√©e similaire. </font><font style="vertical-align: inherit;">Et le cycle </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est plus rapide que </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans Chrome et Firefox. </font><font style="vertical-align: inherit;">Par cons√©quent, il vaut probablement mieux s'attarder sur la variante de la fonction c </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'un bon exemple, d√©montrant l'importance de mesurer les performances dans diff√©rents navigateurs. </font><font style="vertical-align: inherit;">Si vous √©valuez les performances de certains codes uniquement dans Chrome, vous pouvez conclure que le cycle </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, par rapport au cycle </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n'est pas si mauvais.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Appliquer des limites artificielles aux ressources syst√®me</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les valeurs obtenues dans nos exp√©riences ne semblent pas particuli√®rement grandes. </font><font style="vertical-align: inherit;">Mais sachez que les ordinateurs utilis√©s pour le d√©veloppement sont g√©n√©ralement beaucoup plus rapides que, par exemple, le t√©l√©phone mobile moyen qu'ils utilisent pour naviguer sur le Web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de vous mettre √† la place d'un utilisateur qui ne poss√®de pas l'appareil le plus rapide, utilisez les capacit√©s du navigateur pour limiter artificiellement les ressources syst√®me. </font><font style="vertical-align: inherit;">Par exemple - pour r√©duire les performances du processeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec cette approche, 10 ou 50 millisecondes peuvent facilement se transformer en 500.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Mesurer les performances relatives</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les mesures de performances d√©pendent g√©n√©ralement non seulement du mat√©riel, mais √©galement de la charge actuelle du processeur et de la charge de travail du thread principal de l'application JavaScript. </font><font style="vertical-align: inherit;">Par cons√©quent, essayez de vous baser sur des indicateurs relatifs caract√©risant le changement de performances, car les indicateurs absolus obtenus lors de l'analyse du m√™me fragment de code √† diff√©rents moments peuvent varier consid√©rablement.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous avons examin√© certaines API JavaScript con√ßues pour mesurer les performances. </font><font style="vertical-align: inherit;">Nous avons expliqu√© comment les utiliser pour analyser du code r√©el. </font><font style="vertical-align: inherit;">Je crois que pour effectuer des mesures simples, il est plus facile √† utiliser </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai le sentiment que de nombreux d√©veloppeurs front-end ne pr√™tent pas assez d'attention √† la mesure des performances de leurs projets. </font><font style="vertical-align: inherit;">Et ils doivent surveiller en permanence les indicateurs pertinents, car la productivit√© affecte la r√©ussite et la rentabilit√© des projets. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chers lecteurs! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous surveillez constamment la performance de vos projets, veuillez nous dire comment vous le faites.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495858/index.html">√Ä distance et auto-isolement: une exp√©rience spatiale pour aider les terriens</a></li>
<li><a href="../fr495884/index.html">Pr√©diction de s√©ries chronologiques √† l'aide de r√©seaux de neurones r√©currents</a></li>
<li><a href="../fr495888/index.html">PyCon Russie a ouvert CFP pour les futurs conf√©renciers. Formulaires de participation et sujets attendus</a></li>
<li><a href="../fr495890/index.html">Configuration d'un ensemble Nginx / LetsEncrypt dans Docker Swarm</a></li>
<li><a href="../fr495892/index.html">Savez-vous vraiment ce que sont les tableaux?</a></li>
<li><a href="../fr495896/index.html">Package Use-sound: Effets sonores dans les applications React</a></li>
<li><a href="../fr495898/index.html">Un guide pratique pour g√©rer les fuites de m√©moire dans Node.js</a></li>
<li><a href="../fr495902/index.html">CAPTCHA: tuer la conversion</a></li>
<li><a href="../fr495904/index.html">Peut-on pr√©voir une √©pid√©mie?</a></li>
<li><a href="../fr495908/index.html">Le chemin de la r√©compense</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>