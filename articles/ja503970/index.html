<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🔬 🕷️ 🍭 PuppetConf2016。システム管理者向けのKubernetes。パート1 🐂 👩‍🎓 🤞🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私はコンピューターを扱うシステム管理者です。今日は、Kubernetesについてお話します。システム管理者がこのアプリケーションで解決できる問題を考慮して、このトピックをさらに掘り下げ、アプリケーションが機能するための新しい抽象化のセットの助けを借りて、この世界に適合しているように見えるPuppet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PuppetConf2016。システム管理者向けのKubernetes。パート1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/503970/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私はコンピューターを扱うシステム管理者です。今日は、Kubernetesについてお話します。システム管理者がこのアプリケーションで解決できる問題を考慮して、このトピックをさらに掘り下げ、アプリケーションが機能するための新しい抽象化のセットの助けを借りて、この世界に適合しているように見えるPuppet操作のいくつかの側面に触れます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5、6年前の記事「コンピューターとしてのデータセンター」のLuis Andre BarrosoとUrs Hoeslは、データセンターを1つの巨大なコンピューターとして捉えるべきだと提案しました。データセンターが個別のマシンで構成されているという事実から抽象化し、それを1つの論理エンティティと見なす必要があります。このアイデアを実際に使用するとすぐに、分散システムの構築と分散コンピューティングの原則をデータセンターに適用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w9/q7/sg/w9q7sgxchzl3fuuhlrymsv4xcsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データセンターをコンピューターとして扱うには、オペレーティングシステムが必要です。別のコンピューターで使用するものと非常によく似ていますが、別のマシンにアクセスしたりカーネルにアクセスしたりする必要がないため、別のインターフェースが必要です。それでは、データセンターを大きなコンピューターと考えてみましょう。今日、SSHを使用して任意のマシンを制御する機能を奪われていると思われる場合の対処方法を説明します。ログインできなくなります。これがないとシステムを制御することは不可能だと信じている人もいますが、Kubernetesでどれだけのことができるかを説明します。まず、Kubernetesを分散プラットフォームを構築するためのフレームワークと考える必要があります。</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/wf/d2/5c/wfd25cjupilzhtu1ndkpci11cfs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、Kubernetesをダウンロードした後に、システムで実行したいすべての機能を提供するユーザーインターフェースが表示されるという意味ではありません。いいえ、これはインフラストラクチャの実行に必要なツールを作成するための基盤にすぎません。 Let's Encrypt Certificate Authorityを使用して統合を作成し、Kubernetesをフレームワークとして使用してアプリケーションの証明書プロセスを自動化する方法を紹介します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/ty/g3/oltyg3s-gtbgticzc-omgefrq04.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの人が、Kubernetesが何に適しているかを正確に尋ねます。私はPuppet Labsで長年働いており、これがコンピューターにインストールされて、これまでにないAPIをシステムに提供することを確認しました。 Pashpetは、BashやYAMLスクリプトなどの代わりに、シェルスクリプトなしでプログラムを使用してマシンと対話できるDSLユーザーを提供しました。 Kubernetesの違いは、「鉄」のレベルの上にあるということです。このシステムの自動化と抽象化ではなく、インフラストラクチャとアプリケーションの間の関係や契約に焦点を当てましょう。これは、ノードから取得しようとしています。 Kubernetesでは、アプリケーションをマシンに割り当てません。「ノードマニフェスト」などはありません。スケジューラは個々のノードを単にデータセンターのリソースと見なし、1つの大きなコンピューターを表します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
質問：「KubernetesはOpenStack、VMware、Bare Metal、クラウドで実行できますか？」意味がありません。正しい質問は次のとおりです。「Kubernetesエージェントを実行してこれらのリソースを取得できますか？」そして答えは「はい」になります。このアプリケーションの操作は、選択したプラットフォームから完全に独立しているためです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/an/km/hl/ankmhlzzmnaitmix8t0hppm8idi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesはプラットフォームに依存しません。 KubernetesはPuppetと同じように宣言型です。したがって、使用するアプリケーションをレポートします-この例ではnginxです。これは、デベロッパーであるデベロッパーと、コンテナイメージを作成する手段としてのKubernetesとの間の契約です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はFedExクーリエ会社との類似性を使用したいのです。それらを荷馬車全体にドラッグして、すべてを並べ替えて、本来あるべき場所に送信するまで待つことはできません。彼らはルールを持っている：あなたの物を箱に詰めなさい。あなたがそうしたら、彼らはあなたの箱を送り、それがその目的地にいつ到着するかを知ることができるでしょう。 「箱がないと、システムで作業できません。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、コンテナを操作する場合、Python、Java、またはその他の何かを持っていることを議論しても意味がありません。すべての依存関係を取得してコンテナに配置するだけです。多くの人が、インフラストラクチャ全体の問題を解決しているようだとコンテナについて語っています。ただし、問題は、人々がコンテナを実際の2つの異なるものとして認識しないことです。最初のものはパッケージ形式のアイデア、2番目はコンテナランタイムのアイデアです。これらは、必ずしも同じツールを必要としない2つの異なるものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
存在するもののどれがコンテナを作成しましたか？そして、誰がPuppetを使用してコンテナを構築するのでしょうか？そうです、私もこれに同意しません！次のように言うことができます。パペット会議に参加しています。同意する必要があります！」 Puppetでコンテナーを作成するという考えに同意しない理由は、これです。イメージを作成するために必要なものが、prodプロセスを開始するために必要なものと異なるため、それが必要かどうかはわかりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それをソフトウェアパイプラインの構築と考えて、このDockerfileを見てみましょう。これらのファイルを見たことのない人から目を離さないでください。このファイルは、Ruby on Railsアプリケーション（Railsフレームワークを備えたRubyアプリケーション）を作成する方法を示しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/ra/3r/f3ra3rkhngjp08t7beuyoeihc7i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「FROM ruby​​ 2.3.1」と表示され、おそらくオペレーティングシステム全体がコンテナに挿入されます。この場合は、基本的なalpine-linux Rubyイメージです。 UbuntuまたはRed Hatのイメージをこれらのコンテナーに埋め込む理由を誰かが知っていますか？ほとんどの人は依存関係が何であるかを知らず、無計画なアプローチを使用して、OS全体をコンテナーに詰め込み、依存関係がどこかにあることを確認します。したがって、これをビルドした後は、一度だけ実行する必要があります。これが誤解の原因です。これが機能しない場合は、機能するまでコード行を変更してください。確認してください！これらのファイルを使いこなす必要はありません。目的は、すべての依存関係を持つアプリケーションのオフライン表現を構築することです。これは、出発点としてUbuntuから使用する松葉杖です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションを作成して起動したばかりの場合は、静的リンクのようなものを使用します。ホストへの依存関係はなく、コンテナには単一行のDockerファイルのバイナリがあり、基本的なイメージはありません。実際、これは私たちが慣れ親しんでいることの単なる移り変わりです。このアセンブリの外観をご覧ください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/pr/uq/jfpruqpgtrrrwwchkadl34kxn_y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前にこのファイルを作成しましたが、通常はインターネット全体を構築する試みのようです。ローカルのインターネットがRubyを処理できるかどうかわからないので、私はこのアセンブリを少し恐れています。何が起こったのか見てください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/1i/a6/jo1ia6qqo37wr63tazkn-yco38e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この1ギグのボリュームはいかがですか？さらに、ソースファイル、つまりアプリケーション自体は、たとえば100 KBしか占有できません。では、どのようにして1ギガバイトを獲得したのでしょうか。これは、スタンドアロンアプリケーションの構築に非効率的なツールを使用しているためです。これらはすべて、コンピューター上で実行し、外部環境からロードされた動的ライブラリーを使用するように設計されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、携帯電話で行うことを実行します。ユーザーとインフラストラクチャの間で契約が結ばれているアプリケーションのポータブルバージョンです。そのような契約を結ぶとすぐに、システムが何をすべきかを正確に伝えることができ、何をすべきかを気にしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特別に作成されたアプリケーションはありません。 「私たちは特別なアプリケーションを持っています！」と言う会社に出くわしました。私はこう言います：「それが何をしているのかを考えてみましょう：開始し、ポートにバインドし、トラフィックを受信し、データを使って何かを行います。ここには特別なことは何もないので、知っています！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、コンテナーに配置したサンプルを取り、それをAPIサーバーに送信します。次に、これをマシンで機能するものに変換する必要があります。ただし、マシンからリソースを収集するには、いくつかのものをインストールする必要があります。Dockerファイルのコンテナーランタイム、必要なすべてを実行するためにウィザードと通信する方法を理解しているエージェント、アプリケーションが動作を開始するためのシステム応答。このエージェントは単に監視しているだけです-30秒の間隔、繰り返しのチェックなどはありません。彼は単に「私のために仕事があるなら、私に知らせてください、そして私は始めて、プロセスの状態を常にあなたに通知します」と言って単に観察し、それであなたはそれがうまくいくことを知るでしょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2q/s1/dq/2qs1dq2ks5exprh4iljfwyiyydu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
車でこれを行うとすぐに、スケジューラが必要になります。スケジューラは何人使用しますか？あなたはすべて手を上げなければなりません！ 「シングルコアプロセッサ以上のノートパソコンを持っているのは誰ですか？」という質問への回答と同じです。実際、プランナーについて質問すると、ほとんどの人は手を挙げません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マシンでプロセスを開始するとき、使用するプロセッサを選択する必要があります。これは誰が機能しますか？そうです、コア。次に、プランナーとは何かを皆さんに説明します。これを行う最も速い方法は、テトリスをプレイすることです。最初に説明するのは自動展開です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/qu/bb/onqubbexwsv2hscesmqhfvanli4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完全自動展開を使用した人は何人ですか。明らかに、それが私たち全員がここにいる理由だと思います。だから、ボタンを押すと、ブロックが上から落ち始め、今ではビールを飲むことができます。しかし、左側と右側で何が起こっているかに注意してください。プロセッサーとメモリーがゴミに変わります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9c/gc/nd/9cgcndnl9ybdbg7t5fdhjei0930.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ほとんどの人がコンピュータリソースの5％以下しか使用しないために起こります。あなたはプロセスを自動化しますが、莫大なお金を失います。私はクラウドプロバイダーとして働いており、膨大なリソースを持っていますが、人々が同様の方法でお金を使うのはひどいことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スケジューラーを使用する場合、テトリスと同様に、フィールドを制御し、各ブロックを制御して、適切な場所に誘導します。つまり、マシンのリソースを最適な方法で使用します。 Kubernetesはこのためにいくつかのアルゴリズムを使用します。主なアルゴリズムはBin Packingと呼ばれ、同じ「テトリス」がそれを理解するのに役立ちます。 Kubernetesはさまざまな形やサイズのワークロードを受け取ります。私たちの仕事は、最適な方法でマシンにそれをパックすることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの目標は、作業が進むにつれて利用可能になるすべてのリソースを再利用することです。すべてのワークロードが同じというわけではないため、同じボックスに入れるのは困難です。しかし、Kubernetesでは、ワークロードの「一部」が表示されると（または、類推を続けると、テトリスブロック）、いつでも配置して実行できる適切なクラスターがあります。また、他のバッチ処理と同様に、タスクが完了した後、以前に使用されていたすべてのリソースを取得して、将来のタスクに使用できるようにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはゲームではなく現実の世界に住んでいるため、何年も前に開発されたソリューションがあります。それからあなたはシステム管理者になり、雇用主はあなたの生産を見せ、あなたは彼らの配備が十分ではないことに気づきます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2u/h_/hs/2uh_hsyrdmkfnkg5pnes9jlopr4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マシンの一部にクラスターマネージャーをインストールして、特定のリソースを管理させることができます。この特定のケースでは、Kubernetesを使用できます。これにより、前進するとテトリスの空のスペースが埋められます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
業界で働く人に手を挙げてもらいましょう。はい、これは給与と呼ばれる古典です。あなたの会社にいくつかの問題があるとします。 1つ目は、すべてがJavaまたはCOBOLで記述されていることです。通常、これに対応できる人は誰もいません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
企業でよく発生する2番目の問題は、Oracle DBMSです。これはそのようなもので、ソフトウェアの背面にあり、「何も自動化しないでください！」と言っています。ソフトウェアを自動化すると、コストが増加します。したがって、自動化はありません。コンサルティングエコシステムを推進しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、このような状況では、Kubernetesを使用してこれらの問題を簡単に解決できるかどうかを尋ねられます。私は「いいえ」と答えます。テトリスで負けるのと同じような状況では、何の助けにもなりません。スケジューラを使用するなど、他のことを行う必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、ワークロードを正常に理解するスケジューラーができたので、すべてをボックスに入れるだけで、スケジューラーが作業を開始します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/yz/ei/rgyzeivhzivkgknoock70b7rcym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesの主要なエンティティについて話しましょう。まず、これらはポッドポッドであり、コンテナのコレクションです。ほとんどの場合、アプリケーションは複数のコンポーネントで構成されています。 Javaスクリプトなしで記述されたアプリケーションを自分でアタッチできますが、nginxを使用してTLSを完了し、アプリケーションのバックグラウンドでプロキシを使用することもできます。これらはハードコードされた依存関係であるため、相互に接続する必要があります。疎結合の依存関係は、独自にスケーリングするデータベースです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/ca/zh/e4cazhfmbeim5egpejksnv42ce8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目に重要なことは、Kubernetesクラスターで発生するプロセスのマネージャーであるレプリケーションコントローラーです。囲炉裏の複数のインスタンスを作成し、その状態を監視できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセスを開始したいという場合、それはクラスター内のどこかで常に機能することを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目の重要な要素は、サービスである一連の共同ハースです。配備は、アプリケーションが機能する場所、IPアドレスなど、目的の状態の動的な決定に基づいているため、何らかのサービスが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4番目の要素はボリュームリポジトリです。これは、囲炉裏のコンテナで使用可能なディレクトリとして表示できます。 Kubernetesには、このストアの作成方法と格納内容を決定するさまざまなタイプのボリュームがあります。ボリュームの概念はDockerにも存在していましたが、問題はそこにあるストレージが特定の炉に限定されていることでした。ボリュームが存在しなくなるとすぐに、ボリュームはそれとともに消えました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesが作成するストレージは、コンテナに限定されません。囲炉裏内に配置された任意またはすべてのコンテナをサポートします。 Kubernetes Volumeの主な利点は、ポッドが同時に使用できるさまざまなタイプのストレージをサポートすることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテナとは何かを見てみましょう。これは、すべての依存関係を持つアプリケーションがパックされたイメージ形式、およびランタイム環境の主な構成であり、このアプリケーションがどのように機能するかを示しています。これらは2つの異なる要素ですが、特にルートファイルシステムは、特定のシステムの多くの構成ファイルを含む圧縮されたTarball tarファイルとして、このものに好きなようにパックできます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/lg/9w/edlg9wz2ttlinfb3udleerb0id0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、皆さんがおなじみのプロセスである配布を実行できます。ここではRPMまたは別のリポジトリシステムが使用されます。これらすべてのものを取り出して、リポジトリーに入れます。このプロセスは、イメージから作成されたコンテナーに対してのみ、OSパッケージで行う処理と非常に似ています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pe/4p/dg/pe4pdggvudbe3l5ufp5l6gei6pc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポッドを使用すると、論理アプリケーションが必要とするすべてのものを作成できます。論理アプリケーションは、同じシステムプロファイル内で複数のアプリケーションを管理するためのツールです。サブは、1つ以上のコンテナーとストレージ、共通の名前空間、およびサブごとに1つのIPアドレスを含むリソースパッケージです。ボールトはコンテナ間で分散できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/rw/cf/htrwcfvuetyk6vhgqjh6zgsjeoe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、炉床の設計は仮想マシンに似ています。これにより、アプリケーションがアトミックユニットとして開始および停止することが保証されます。次のスライドは、レプリケーションコントローラの外観を示しています。この宣言をサーバーに送信して、「Fooアプリケーションの1つのレプリカを機能させたい！」どのマシンで実行する必要がありますが、実行できます。次に、レプリカの数を3に増やし</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ta/qe/ld/taqeldbd6scvq7oyst2ff3dooyu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。いずれかのマシンに障害が発生した場合、システムはどのようなアクションを期待しますか？この場合、複製コントローラーはシステムの現在の状態を望ましい状態にして、コンテナーの下の3番目の非稼働マシンから2番目のマシンに移動します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/d7/_i/oyd7_i1a1dvfpllkj_s7hek_37e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロセスを掘り下げて指示する必要はありません-コントローラーに作業を委託することで、インフラストラクチャの現在の状態の変化を常に監視し、システムが機能していることを確認する決定を行うことにより、アプリケーションが適切に保証されることを確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのことは時代を先取りしている-あなたはただシステムに「これら3つのマシンを動かしたい！」と言って、これがあなたのコントロールが終わるところです。このアプローチは、将来の決定に影響を与えるために現在起こっていることを本当に管理する必要がある場合、スクリプトや純粋な自動化とは大きく異なります。状況に適切に対応するために着信情報を受信する機能なしに、これらすべてを成文化することはできません。上記のアプローチは、この機会を提供します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスの構成ファイルの概念である構成をどのように想像しますか？コンテナに関しては多くの人がこの問題について沈黙していますが、それでも設定が必要です。どこにも消えません！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesはまた、マネージャとNodsノード間で暗号化されたデータを保存および転送するために使用されるシークレットの概念を使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppetを実行する理由はないため、コンテナーで実行することはありません。 Puppetを使用して構成ファイルを生成できますが、ランタイムを使用してそれを配布できるため、それをKubernetisに保存する必要があります。それがどのように見えるか見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/i3/f3/vvi3f3c-8dhftpdedfe23me1xbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、ファイルからシークレットを作成し、Kubernetes APIサーバーに保存します。この部分を、eRBテンプレートと非表示のデータを使用してシークレットの内容を入力するPuppetなどのパーツで置き換えたと想像できます。誰が行うかは関係ありませんが、とにかく行うことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シークレットを配置すると、「このシークレットを使用したい！」というデプロイメントを作成するためのリンクとして使用できます。この場合、Kubernetesは次のことを行います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/um/nu/cmumnufkw4ffxmhcggn2ppulcva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppetがマシン上にコピーを作成するのと同じように、ポッドを作成し、シークレットからデータを取得して一時ファイルシステムに配置し、コンテナーとして提示します。これは、アプリケーションのライフサイクルに従い、アプリケーションが停止すると、設定がアプリケーションとともに消えます。 10,000個のアプリケーションインスタンスが必要な場合は、10,000個未満の一時ファイルシステムを作成して注入する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスを使用すると、これらの要素をすべてクラスターで実行し、別のエンドポイントと同期できます。実際、サービスは単一の炉床として機能する炉床のグループです。永続的なIPアドレスとポートを含み、DNSへの統合を提供し、負荷分散を使用し、ファームウェアが変更されると更新されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8t/cr/co/8tcrcolf5hrgnqfcrdf3nzkdr2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Kubernetesの概念的なコンポーネントのコラボレーションを見てみましょう。私たちは互いに相互作用しなければならないレゴブロックと構成を持っています。クラスタでデータベースを実行する場合は、実際にKubernetesで実行できます。多くの場合、コンテナー内でステートフルアプリケーションを実行できないと言われていますが、これは完全に間違っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハイパーバイザーがどのように機能するかを考えると、ハイパーバイザーがあなたとほぼ同じことを実行していることがわかります。仮想マシンを作成すると、スケジューラーはそれをハイパーバイザーに移動し、ストレージを接続します。ハイパーバイザーからのローカルストレージを使用する場合がありますが、コンテナーが同じことを行えない理由はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、コンテナの問題は、ほとんどの人がアプリケーションに提供する必要のあるファイルパスの明示的なリストを持つことに慣れていないことです。ほとんどの人は、データウェアハウスに必要なデバイスとファイルを正確に伝えることができません。彼らはすべてをコンテナに詰め込み、その結果、何も良いことはありません。したがって、コンテナーが状態保存アプリケーションを実行できないとは思わないでください。これは非常にうまく実行できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bj/hm/ve/bjhmvetwbvkbjbqirup-xb_ya-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スライドには、Ruby-on-Railsの例が示されています。アプリケーションを使用する前に、データベースを移行する必要があります。プログラムのライブデモに取り掛かりましょう。デプロイメントを実行するために、MY_SQLを使用すると、画面に多くのデータが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dp/ai/or/dpaioryaowiq9c4yevmvd9uqkqg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システム管理者は多くのことを理解する必要があるため、このすべてを紹介します。このデプロイでは、アプリケーションのメタデータの一部を調整していますが、主に灰色で強調表示します。mysqlアプリケーションのコピーを1つ開始し、mysqlコンテナーバージョン5.6.32を使用したいと思います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/kr/ev/qvkrev67_otmvqqvdhtiha07mec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、Kubernetesからシークレットをリンクとして選択していることに注意してください。この場合は、環境変数として挿入します。後で、ファイルシステムに挿入した別のケースを紹介します。したがって、構成でシークレットを「ベイク」する必要はありません。次の重要な行はリソースブロックです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/b4/jt/hmb4jtgyd1dupdt4dfoapzcppli.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブロックのサイズがわかるまでテトリスをプレイできません。</font><font style="vertical-align: inherit;">多くの人は、このプロセスにリソース制限を使用せずに展開を開始します。</font><font style="vertical-align: inherit;">その結果、RAMが完全に詰まり、サーバー全体が「スタック」されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
22:09分</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もうすぐ続く...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HlAXp0-M6SY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">広告のビット:)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつもご利用いただきありがとうございます。私たちの記事は好きですか？もっと面白い資料を見たいですか？注文やお友達に推薦することにより、私たちをサポートしています、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 4.99からご開発者向けクラウドVPS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたのための私達によって発明されたエントリーレベルのサーバのユニークなアナログ：</font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS（KVM）E5-2697 v3の（6つのコア）10ギガバイトDDR4 480ギガバイトSSDの1Gbpsについて全体の真実19ドルから、またはサーバーを分割する方法？</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（オプションは、RAID1およびRAID10、最大24コア、最大40GB DDR4で利用可能です）。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xdは、アムステルダムのEquinix Tier IVデータセンターで2倍安いですか？</font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">オランダでは、</font></b><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">199ドルから、インテルTetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV</font></a></b><font style="vertical-align: inherit;">を</font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">2台</font></a></b><font style="vertical-align: inherit;">だけ持ってい</font><b><font style="vertical-align: inherit;">ます！</font></b></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デルR420-2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB-$ 99から！</font></font></b></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">インフラストラクチャビルディングの構築方法</font></a><font style="vertical-align: inherit;">について</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">お</font></a><font style="vertical-align: inherit;">読みください</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Dell R730xd E5-2650 v4サーバーを使用するクラスcは、1ペニーで9,000ユーロかかりますか？</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503960/index.html">Linuxソートが文字列をソートする方法</a></li>
<li><a href="../ja503962/index.html">自動運転-車での誇大宣伝、しかしデータセンターネットワークサービスの必要性</a></li>
<li><a href="../ja503964/index.html">データストア-CRUD（Create Read Update Delete）</a></li>
<li><a href="../ja503966/index.html">ソーシャルモニタリングアプリはごみ収集車トラッカーから作成されました</a></li>
<li><a href="../ja503968/index.html">ロボットを正確に動かすには？Studuinoプラットフォームロボット工学の概要と機能</a></li>
<li><a href="../ja503972/index.html">4つのソーシャルネットワークでのストリーミングテストと最適なオプションの選択</a></li>
<li><a href="../ja503980/index.html">「即席」によるリモートサイトの温度監視</a></li>
<li><a href="../ja503982/index.html">オークとフレームワークについて</a></li>
<li><a href="../ja503988/index.html">「渦巻く光」がどのように光ネットワークに入ったのか</a></li>
<li><a href="../ja503990/index.html">普通のプログラマーが開発者になりすまして業界に不名誉を与えるということにうんざりしています。彼らは世界を悪化させる</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>