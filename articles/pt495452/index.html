<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‚ğŸ½ ğŸ¤š âš«ï¸ Como preparar um site para aumentar a carga ğŸï¸ ğŸ‘©ğŸ¼â€ğŸ”¬ ğŸ’¡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somente os preguiÃ§osos nÃ£o obtiveram seus conhecimentos da prateleira distante e nÃ£o previram a vida "online" - tÃ£o forÃ§ada quanto o regime de auto-is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como preparar um site para aumentar a carga</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/495452/"><img src="https://habrastorage.org/webt/59/b1/yu/59b1yu2sysdvr-db4ct_uu7dhtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somente os preguiÃ§osos nÃ£o obtiveram seus conhecimentos da prateleira distante e nÃ£o previram a vida "online" - tÃ£o forÃ§ada quanto o regime de auto-isolamento. Mas o trÃ¡fego jÃ¡ comeÃ§ou a crescer e, levando em conta as â€œfÃ©riasâ€, os recursos que oferecem entrega de mercadorias, serviÃ§os de educaÃ§Ã£o on-line e, principalmente, entretenimento on-line, podem nÃ£o estar prontos para o fluxo de visitantes na nova realidade antes do final de abril. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base em nossos 12 anos de experiÃªncia em suporte tÃ©cnico a projetos da Web e administraÃ§Ã£o remota de servidores, preparamos uma espÃ©cie de "manual de treinamento": o que vale a pena conferir e o que vocÃª precisa cuidar se quiser ter certeza de que seu site irÃ¡ lidar com qualquer carga. Bem, quase qualquer um. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EntÃ£o, aqui estÃ£o 10 pontos crÃ­ticos para a vida ativa do seu projeto da web nos prÃ³ximos dias e semanas:</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Monitore sua infraestrutura</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Antes de tudo, vocÃª deve saber o que estÃ¡ acontecendo com seu site. </font><font style="vertical-align: inherit;">Se vocÃª souber como lidar com Prometheus / Grafana, use-os. </font><font style="vertical-align: inherit;">Mas se nÃ£o houver experiÃªncia em interagir com eles, isso nÃ£o Ã© um problema: vocÃª pode usar qualquer serviÃ§o como o datadog - vocÃª pode instalÃ¡-lo o mais rÃ¡pido possÃ­vel. </font><font style="vertical-align: inherit;">Ainda complicado? </font><font style="vertical-align: inherit;">- Preste atenÃ§Ã£o ao Pingdom ou Site24x7: estes nÃ£o sÃ£o serviÃ§os de monitoramento completos, mas sÃ£o adequados pelo menos para garantir que seu site esteja acessÃ­vel e para saber quando estÃ¡ perto de cair.</font></font><br>
 <br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lembre-se: vocÃª sÃ³ pode controlar o que pode medir. </font><font style="vertical-align: inherit;">Afinal, se vocÃª nÃ£o sabe o que estÃ¡ acontecendo dentro do seu sistema e, especialmente, onde isso estÃ¡ acontecendo, vocÃª nÃ£o poderÃ¡ corrigi-lo se algo acontecer lÃ¡.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitas opÃ§Ãµes para o que pode dar errado quando o trÃ¡fego se acumula:</font></font><br>
<br>
<ul>
<li>   .</li>
<li>    .</li>
<li>   \.</li>
<li>      \\.</li>
</ul> <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Prepare-se para escalar:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
depois de ver que atingiu 80% do limite de recursos, Ã© necessÃ¡rio comeÃ§ar a escalar imediatamente. Porque se vocÃª esperar 100%, o site cairÃ¡. E vocÃª precisarÃ¡ de algum tempo para restaurar o projeto. Sem mencionar que tudo Ã© muito nervoso ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vocÃª precisa agir rapidamente, pois caso contrÃ¡rio vocÃª perderÃ¡ visitantes e possivelmente cometerÃ¡ ainda mais erros no modo "chef, tudo estÃ¡ perdido, queimar". Portanto, quando vocÃª atingir a marca de 80% do limite de recursos, reduza para 40%. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repita se necessÃ¡rio (c) </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) NÃ£o se esqueÃ§a de monitorar o desempenho do HDD e a largura de banda do canal</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã‰ muito mais difÃ­cil entender o que acontece quando o sistema Ã© "burro" devido a alta carga de disco ou limitaÃ§Ãµes de largura de banda. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Monitore o desempenho de seus bancos de dados,</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
especialmente se vocÃª usar bancos de dados em nuvem. RDS, Cloud SQL, MongoDB Atlas e outros serviÃ§os sÃ£o gerenciados usando tecnologias de nuvem, mas eles tÃªm seus prÃ³prios limites e devem ser monitorados para aumentar a escala no tempo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Quando seu banco de dados cria uma grande carga na CPU - verifique o uso de Ã­ndices, isso realmente ajuda</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A introduÃ§Ã£o da indexaÃ§Ã£o reduz fantasticamente a carga no processador. Suponha que a CPU do seu banco de dados seja 90% usada. VocÃª provavelmente vai querer escalar ao meio para lidar com a carga dupla. Mas se a maioria das suas consultas nÃ£o for indexada, a introduÃ§Ã£o da indexaÃ§Ã£o poderÃ¡ reduzir a carga da CPU em 10 vezes. A anÃ¡lise do uso de Ã­ndices vale o esforÃ§o! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6) Fique de olho nas contas dos serviÃ§os dos provedores de nuvem</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã‰ fÃ¡cil esquecÃª-lo quando vocÃª tem problemas de tempo. Portanto, defina alertas no seu sistema de faturamento para receber notificaÃ§Ãµes de possÃ­veis excedentes de custos. A largura do canal Ã© o que Ã© especialmente caro. Se nÃ£o for possÃ­vel transferir conteÃºdo para a CDN ou para empresas de hospedagem que fornecem grandes volumes de trÃ¡fego de maneira barata, como like100tb.com ou leaseweb, prepare-se para custos sÃ©rios. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7) Evite o estado em sua aplicaÃ§Ã£o</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de ser possÃ­vel escalar os recursos do processador ou da RAM na nuvem, ainda existem limites que nÃ£o podem ser ultrapassados. Desse ponto de vista, se vocÃª quiser escalar horizontalmente, adicionando novas instÃ¢ncias do mesmo aplicativo, ele deverÃ¡ estar pronto para esse desenvolvimento de eventos. E quando vocÃª tiver vÃ¡rias instÃ¢ncias do mesmo aplicativo, as solicitaÃ§Ãµes do usuÃ¡rio serÃ£o distribuÃ­das entre vÃ¡rios servidores e, como resultado, vocÃª nÃ£o poderÃ¡ armazenar dados em um disco local. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8) Considere mudar para a nuvem se o site estiver em uma hospedagem dedicada</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nessa situaÃ§Ã£o, vocÃª nÃ£o pode escalar facilmente: a adiÃ§Ã£o de servidores levarÃ¡ um certo tempo - levarÃ¡ algumas horas a alguns dias para disponibilizar novos servidores. AlÃ©m disso, vocÃª costuma pagar mensalmente, nÃ£o a cada hora. Em geral, vocÃª obviamente nÃ£o deseja esperar horas, ou mesmo dias, se o site "mentir". Ã‰ muito mais fÃ¡cil escalar na nuvem. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9) "Aperte" a infraestrutura</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
HÃ¡ vÃ¡rias coisas bÃ¡sicas que sÃ£o desativadas por padrÃ£o e devem ser otimizadas - no nÃ­vel do sistema operacional, da rede, do gerenciador de aplicativos e do prÃ³prio aplicativo. E isso pode reduzir significativamente o consumo de recursos. Google sua configuraÃ§Ã£o de pilha de tecnologia e siga as diretrizes bÃ¡sicas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10) Prepare-se para iniciar a versÃ£o em cache</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de todos os seus esforÃ§os, com um aumento de cem vezes no trÃ¡fego, vocÃª "se deitarÃ¡". </font><font style="vertical-align: inherit;">Leva tempo para escalar. </font><font style="vertical-align: inherit;">Portanto, prepare-se para usar a versÃ£o em cache estÃ¡tica. </font><font style="vertical-align: inherit;">Para isso, o cache Cloudfront / Cloudflare, o cache CDN, o cache nginx ou qualquer outro Ã© Ãºtil. </font><font style="vertical-align: inherit;">Apenas verifique se vocÃª tem a oportunidade, se precisar.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt495438/index.html">Linguagem R para usuÃ¡rios do Excel (curso em vÃ­deo gratuito)</a></li>
<li><a href="../pt495440/index.html">Os servidores na Holanda estÃ£o quase no fim: talvez nÃ£o seja possÃ­vel atender a novos pedidos, o VPS e a Internet terminarÃ£o?</a></li>
<li><a href="../pt495446/index.html">Antigravidade nÃ£o Ã© o que vocÃª pensou</a></li>
<li><a href="../pt495448/index.html">Mitaps on-line para toda a semana nas costas, front, QA, PM, DevOps e um pouco sobre robÃ´s, a partir de 3 de abril</a></li>
<li><a href="../pt495450/index.html">Depurando aplicativos Golang muito carregados ou como procuramos um problema no Kubernetes que nÃ£o estava lÃ¡</a></li>
<li><a href="../pt495454/index.html">Breve introduÃ§Ã£o ao BPF e eBPF</a></li>
<li><a href="../pt495456/index.html">RevisÃ£o de 14 plugins novos para o Figma que ajudarÃ£o a aumentar a produtividade enquanto todos nÃ³s</a></li>
<li><a href="../pt495458/index.html">Como escrever cÃ³digo quando crianÃ§as correm ao seu redor e perguntar: "Para que vocÃª trabalha?"</a></li>
<li><a href="../pt495460/index.html">Uma bolha de gÃ¡s 22.000 vezes o tamanho da Terra explodiu em Urano</a></li>
<li><a href="../pt495462/index.html">.NET Core: x86_64 intrÃ­nseco em mÃ¡quinas virtuais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>