<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏽 🤚 ⚫️ Como preparar um site para aumentar a carga 🏝️ 👩🏼‍🔬 💡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somente os preguiçosos não obtiveram seus conhecimentos da prateleira distante e não previram a vida "online" - tão forçada quanto o regime de auto-is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como preparar um site para aumentar a carga</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/495452/"><img src="https://habrastorage.org/webt/59/b1/yu/59b1yu2sysdvr-db4ct_uu7dhtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somente os preguiçosos não obtiveram seus conhecimentos da prateleira distante e não previram a vida "online" - tão forçada quanto o regime de auto-isolamento. Mas o tráfego já começou a crescer e, levando em conta as “férias”, os recursos que oferecem entrega de mercadorias, serviços de educação on-line e, principalmente, entretenimento on-line, podem não estar prontos para o fluxo de visitantes na nova realidade antes do final de abril. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base em nossos 12 anos de experiência em suporte técnico a projetos da Web e administração remota de servidores, preparamos uma espécie de "manual de treinamento": o que vale a pena conferir e o que você precisa cuidar se quiser ter certeza de que seu site irá lidar com qualquer carga. Bem, quase qualquer um. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então, aqui estão 10 pontos críticos para a vida ativa do seu projeto da web nos próximos dias e semanas:</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Monitore sua infraestrutura</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Antes de tudo, você deve saber o que está acontecendo com seu site. </font><font style="vertical-align: inherit;">Se você souber como lidar com Prometheus / Grafana, use-os. </font><font style="vertical-align: inherit;">Mas se não houver experiência em interagir com eles, isso não é um problema: você pode usar qualquer serviço como o datadog - você pode instalá-lo o mais rápido possível. </font><font style="vertical-align: inherit;">Ainda complicado? </font><font style="vertical-align: inherit;">- Preste atenção ao Pingdom ou Site24x7: estes não são serviços de monitoramento completos, mas são adequados pelo menos para garantir que seu site esteja acessível e para saber quando está perto de cair.</font></font><br>
 <br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lembre-se: você só pode controlar o que pode medir. </font><font style="vertical-align: inherit;">Afinal, se você não sabe o que está acontecendo dentro do seu sistema e, especialmente, onde isso está acontecendo, você não poderá corrigi-lo se algo acontecer lá.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitas opções para o que pode dar errado quando o tráfego se acumula:</font></font><br>
<br>
<ul>
<li>   .</li>
<li>    .</li>
<li>   \.</li>
<li>      \\.</li>
</ul> <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Prepare-se para escalar:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
depois de ver que atingiu 80% do limite de recursos, é necessário começar a escalar imediatamente. Porque se você esperar 100%, o site cairá. E você precisará de algum tempo para restaurar o projeto. Sem mencionar que tudo é muito nervoso ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
você precisa agir rapidamente, pois caso contrário você perderá visitantes e possivelmente cometerá ainda mais erros no modo "chef, tudo está perdido, queimar". Portanto, quando você atingir a marca de 80% do limite de recursos, reduza para 40%. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repita se necessário (c) </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Não se esqueça de monitorar o desempenho do HDD e a largura de banda do canal</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É muito mais difícil entender o que acontece quando o sistema é "burro" devido a alta carga de disco ou limitações de largura de banda. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Monitore o desempenho de seus bancos de dados,</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
especialmente se você usar bancos de dados em nuvem. RDS, Cloud SQL, MongoDB Atlas e outros serviços são gerenciados usando tecnologias de nuvem, mas eles têm seus próprios limites e devem ser monitorados para aumentar a escala no tempo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Quando seu banco de dados cria uma grande carga na CPU - verifique o uso de índices, isso realmente ajuda</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A introdução da indexação reduz fantasticamente a carga no processador. Suponha que a CPU do seu banco de dados seja 90% usada. Você provavelmente vai querer escalar ao meio para lidar com a carga dupla. Mas se a maioria das suas consultas não for indexada, a introdução da indexação poderá reduzir a carga da CPU em 10 vezes. A análise do uso de índices vale o esforço! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6) Fique de olho nas contas dos serviços dos provedores de nuvem</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É fácil esquecê-lo quando você tem problemas de tempo. Portanto, defina alertas no seu sistema de faturamento para receber notificações de possíveis excedentes de custos. A largura do canal é o que é especialmente caro. Se não for possível transferir conteúdo para a CDN ou para empresas de hospedagem que fornecem grandes volumes de tráfego de maneira barata, como like100tb.com ou leaseweb, prepare-se para custos sérios. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7) Evite o estado em sua aplicação</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de ser possível escalar os recursos do processador ou da RAM na nuvem, ainda existem limites que não podem ser ultrapassados. Desse ponto de vista, se você quiser escalar horizontalmente, adicionando novas instâncias do mesmo aplicativo, ele deverá estar pronto para esse desenvolvimento de eventos. E quando você tiver várias instâncias do mesmo aplicativo, as solicitações do usuário serão distribuídas entre vários servidores e, como resultado, você não poderá armazenar dados em um disco local. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8) Considere mudar para a nuvem se o site estiver em uma hospedagem dedicada</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nessa situação, você não pode escalar facilmente: a adição de servidores levará um certo tempo - levará algumas horas a alguns dias para disponibilizar novos servidores. Além disso, você costuma pagar mensalmente, não a cada hora. Em geral, você obviamente não deseja esperar horas, ou mesmo dias, se o site "mentir". É muito mais fácil escalar na nuvem. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9) "Aperte" a infraestrutura</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Há várias coisas básicas que são desativadas por padrão e devem ser otimizadas - no nível do sistema operacional, da rede, do gerenciador de aplicativos e do próprio aplicativo. E isso pode reduzir significativamente o consumo de recursos. Google sua configuração de pilha de tecnologia e siga as diretrizes básicas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10) Prepare-se para iniciar a versão em cache</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de todos os seus esforços, com um aumento de cem vezes no tráfego, você "se deitará". </font><font style="vertical-align: inherit;">Leva tempo para escalar. </font><font style="vertical-align: inherit;">Portanto, prepare-se para usar a versão em cache estática. </font><font style="vertical-align: inherit;">Para isso, o cache Cloudfront / Cloudflare, o cache CDN, o cache nginx ou qualquer outro é útil. </font><font style="vertical-align: inherit;">Apenas verifique se você tem a oportunidade, se precisar.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt495438/index.html">Linguagem R para usuários do Excel (curso em vídeo gratuito)</a></li>
<li><a href="../pt495440/index.html">Os servidores na Holanda estão quase no fim: talvez não seja possível atender a novos pedidos, o VPS e a Internet terminarão?</a></li>
<li><a href="../pt495446/index.html">Antigravidade não é o que você pensou</a></li>
<li><a href="../pt495448/index.html">Mitaps on-line para toda a semana nas costas, front, QA, PM, DevOps e um pouco sobre robôs, a partir de 3 de abril</a></li>
<li><a href="../pt495450/index.html">Depurando aplicativos Golang muito carregados ou como procuramos um problema no Kubernetes que não estava lá</a></li>
<li><a href="../pt495454/index.html">Breve introdução ao BPF e eBPF</a></li>
<li><a href="../pt495456/index.html">Revisão de 14 plugins novos para o Figma que ajudarão a aumentar a produtividade enquanto todos nós</a></li>
<li><a href="../pt495458/index.html">Como escrever código quando crianças correm ao seu redor e perguntar: "Para que você trabalha?"</a></li>
<li><a href="../pt495460/index.html">Uma bolha de gás 22.000 vezes o tamanho da Terra explodiu em Urano</a></li>
<li><a href="../pt495462/index.html">.NET Core: x86_64 intrínseco em máquinas virtuais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>