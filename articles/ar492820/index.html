<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅ ๐ต๏ธ ๐ฆ ุตุงูู ุงูููุงุฉ: ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ูู ุทูุจ ูู ูุตุงุฏุฑ ูุฎุชููุฉ โ๏ธ ๐ โ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=".Net Core ูุญุชูู ุนูู ุขููุฉ ุฑุจุท ูููุฐุฌ ูุฏูุฌุฉ ุ ูุงูุชู ูุง ุชุณูุญ ููุท ุจูุจูู ูุนููุงุช ุงูุฅุฏุฎุงู ูู ูุญุฏุงุช ุงูุชุญูู ุ ูููู ุฃูุถูุง ูุชููู ุงููุงุฆูุงุช ุนูู ุงูููุฑ ูุน ุงูุญููู ุงููุน...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุตุงูู ุงูููุงุฉ: ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ูู ุทูุจ ูู ูุตุงุฏุฑ ูุฎุชููุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492820/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.Net Core ูุญุชูู ุนูู ุขููุฉ ุฑุจุท ูููุฐุฌ ูุฏูุฌุฉ ุ ูุงูุชู ูุง ุชุณูุญ ููุท ุจูุจูู ูุนููุงุช ุงูุฅุฏุฎุงู ูู ูุญุฏุงุช ุงูุชุญูู ุ ูููู ุฃูุถูุง ูุชููู ุงููุงุฆูุงุช ุนูู ุงูููุฑ ูุน ุงูุญููู ุงููุนุจุฃุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุณูุญ ูู ุจุชุถููู ุฌููุน ุนูููุงุช ุงููุญุต ุงููุงุฒูุฉ ูู ูุซู ูุฐุง ุงููุงุฆู ุจุงุณุชุฎุฏุงู ุงูุชุญูู ูู ุตุญุฉ ุงููููุฐุฌ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุง ููู ุงูุจูุงูุงุช ุงููุทููุจุฉ ุญุชู ุชุนูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุ ููุง ุชุฃุชู ุฅูููุง ูู Query ุฃู Body ููุท. </font><font style="vertical-align: inherit;">ูุฌุจ ุงุณุชูุงู ุจุนุถ ุงูุจูุงูุงุช ูู ุงูุฑุคูุณ (ูู ุญุงูุชู ูุงู ููุงู json ูู base64) ุ ูุฌุจ ุฃู ุชููู ุจุนุถ ุงูุจูุงูุงุช ูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ ุฃู ActionRoute ุฅุฐุง ููุช ุชุณุชุฎุฏู REST. </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ุฑุจุท ุงูุฎุงุต ุจู ููุญุตูู ุนูู ุงูุจูุงูุงุช ูู ููุงู. </font><font style="vertical-align: inherit;">ุตุญูุญ ุ ููุงู ูุดููุฉ: ุฅุฐุง ูุฑุฑุช ุนุฏู ูุณุฑ ุงูุชุบููู ูุชููุฆุฉ ุงููููุฐุฌ ูู ุฎูุงู ุงูููุดุฆ ุ ูุณูุชุนูู ุนููู ุงูุดุงูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุณู ูููุฃุฌูุงู ุงููุงุฏูุฉ ุ ูุฑุฑุช ุฃู ุฃูุชุจ ุดูุฆูุง ูุซู ุชุนูููุงุช ุงุณุชุฎุฏุงู ุงูุชุฌููุฏ ูุงูุดุงูุงููุฉ ูุนูุง.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุฏู ูุญุฏุฉ ุงูุชุญูู ุงููููุฐุฌูุฉ ูุซู ูุฐุง:</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">HttpGet</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetSomeData</span>(<span class="hljs-params">[FromQuery[IncomeData someData</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> moreData = GetFromHeaderAndDecode(<span class="hljs-string">"X-Property"</span>);
    <span class="hljs-keyword">if</span> (moreData.Id == <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">400</span>, <span class="hljs-string">"Nginx doesnt know your id"</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">var</span> externalData = GetFromExternalService(<span class="hljs-string">"http://myservice.com/MoreData"</span>);
    <span class="hljs-keyword">if</span> (externalData == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">500</span>, <span class="hljs-string">"Cant connect to external service"</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">var</span> finalData = <span class="hljs-keyword">new</span> FinalData(someData, moreData, externalData);
    <span class="hljs-keyword">return</span> _myService.Handle(finalData);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุงููุดุงูู ุงูุชุงููุฉ:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูุทูุฎ ููุทู ุงูุชุญูู ุจูุงุณุทุฉ ูุงุฆู ุงูุทูุจ ุ ูุฃุณููุจ ุงูุทูุจ ูู ุงูุฑุฃุณ ุ ูุฃุณููุจ ุงูุทูุจ ูู ุงูุฎุฏูุฉ ุ ูุฃุณููุจ ุงูุชุญูู. </font><font style="vertical-align: inherit;">ููุชุฃูุฏ ูู ุฃู ุงููุญุต ุงูุถุฑูุฑู ููุฌูุฏ ุจุงูุชุฃููุฏ ุ ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุชุญููู ูุงูู!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูุทุฑููุฉ ุงูุชุญูู ุงููุฌุงูุฑุฉ ููุณ ุงูุฑูุฒ ุจุงูุถุจุท. </font><font style="vertical-align: inherit;">ุจุฑูุฌุฉ ุงููุณุฎ ูุงููุตู ูู ุงููุฌูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ูููู ููุงู ุนุฏุฏ ุฃูุจุฑ ุจูุซูุฑ ูู ุนูููุงุช ุงูุชุญูู ููุง ูู ุนููู ูู ุงููุซุงู ุ ููุชูุฌุฉ ูุฐูู ุ ูุชู ุฅุฎูุงุก ุงูุฎุท ุงูููู ุงููุญูุฏ - ุงุณุชุฏุนุงุก ุฃุณููุจ ูุนุงูุฌุฉ ููุทู ุงูุฃุนูุงู - ูู ูููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </font><font style="vertical-align: inherit;">ูุฑุคูุชู ูููู ูุง ูุญุฏุซ ููุง ุจุดูู ุนุงู ูุชุทูุจ ุจุนุถ ุงูุฌูุฏ.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุจุท ูุฎุตุต (ุงููุถุน ุงูุณูู)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุญู ุฌุฒุก ูู ุงููุดููุฉ ุนู ุทุฑูู ุชูููุฐ ูุนุงูุฌ ุงูุฎุงุต ุจู ูู ุฎุท ุฃูุงุจูุจ ูุนุงูุฌุฉ ุงูุทูุจ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูู ุฃููุงู ุจุชุตุญูุญ ูุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจูุง ุนู ุทุฑูู ุชูุฑูุฑ ุงููุงุฆู ุงูููุงุฆู ุฅูู ุงูุทุฑููุฉ ุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ุชุจุฏู ุฃูุถู ุจูุซูุฑ ุ ุฃููุณ ูุฐููุ</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">HttpGet</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetSomeData</span>(<span class="hljs-params">[FromQuery]FinalData finalData</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> _myService.Handle(finalData);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก ุงูุฑุงุจุท ุงูุฎุงุต ุจู ูููุน MoreData.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MoreDataBinder</span> : <span class="hljs-title">IModelBinder</span><font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Task <span class="hljs-title">BindModelAsync</span>(<span class="hljs-params">ModelBindingContext bindingContext</span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> moreData = GetFromHeaderAndDecode(bindingContext.HttpContext.Request.Headers);
        <span class="hljs-keyword">if</span> (moreData != <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
            bindingContext.Result = ModelBindingResult.Success(moreData);<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
    }<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> MoreData <span class="hljs-title">GetFromHeaderAndDecode</span>(<span class="hljs-params">IHeaderDictionary headers</span>)</span> { ... }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ุณูุตูุญ ูููุฐุฌ FinalData ุนู ุทุฑูู ุฅุถุงูุฉ ุฑุงุจุท ุงูููุซู ุฅูู ุงููููุน ููุงู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FinalData</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> SomeDataNumber { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> SomeDataText { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
<font></font>
    [<span class="hljs-meta">ModelBinder(BinderType = typeof(MoreDataBinder))</span>]
    <span class="hljs-keyword">public</span> MoreData MoreData { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูู ุฃูุถู ุจุงููุนู ุ ููู ุงูุจูุงุณูุฑ ุฒุงุฏุช: ุงูุขู ุนููู ุฃู ุชุนุฑู ุฃู ูุฏููุง ูุนุงูุฌ ุฎุงุต ูุชูุถูุญ ุฐูู ูู ุฌููุน ุงูููุฏููุงุช. </font><font style="vertical-align: inherit;">ููููุง ูุงุจูุฉ ููุญู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุดุงุก BinderProvider ุงูุฎุงุต ุจู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MoreDataBinderProvider</span> : <span class="hljs-title">IModelBinderProvider</span><font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IModelBinder <span class="hljs-title">GetBinder</span>(<span class="hljs-params">ModelBinderProviderContext context</span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> modelType = context.Metadata.UnderlyingOrModelType;
        <span class="hljs-keyword">if</span> (modelType == <span class="hljs-keyword">typeof</span>(MoreData))<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BinderTypeModelBinder(<span class="hljs-keyword">typeof</span>(MoreDataBinder));<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุจุชุณุฌููู ูู ุจุฏุก ุงูุชุดุบูู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span><font></font>
{<font></font>
    services.AddControllers();<font></font>
    services.AddMvc(options =&gt;<font></font>
    {<font></font>
        options.ModelBinderProviders.Insert(<span class="hljs-number">0</span>, <span class="hljs-keyword">new</span> MoreDataBinderProvider());<font></font>
     });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงุณุชุฏุนุงุก ุงููููุฑ ููู ูุงุฆู ูููุฐุฌ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุงุณุชููู ูุฒูุฏูุง ุงูููุน ุงููุทููุจ ุ ูุณูู ูุนูุฏ ุงูููุซู ุงููุทููุจ. </font><font style="vertical-align: inherit;">ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุณูุนูู ุงูููุซู ุงูุงูุชุฑุงุถู. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูููุง ุญุฏุฏูุง ููุน MoreData ุ ุณูุชู ุฃุฎุฐูุง ููู ุชุดููุฑูุง ูู ุงูุฑุฃุณ ููู ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุณูุงุช ุฎุงุตุฉ ูู ุงูููุงุฐุฌ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุจุท ูุฎุตุต (ุงููุถุน ุงูุตุนุจ)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ุฑุงุฆุน ุ ูููู ููุงู ุดูุก ูุงุญุฏ ูููู: ููู ูุนูู ุงูุณุญุฑ ุ ูุฌุจ ุฃู ูููู ููููุฐุฌูุง ุฎุตุงุฆุต ุนุงูุฉ ูุน ูุฌููุนุฉ. </font><font style="vertical-align: inherit;">ูููู ูุงุฐุง ุนู ุงูุชุบูููุ </font><font style="vertical-align: inherit;">ูุงุฐุง ูู ููุช ุฃุฑุบุจ ูู ููู ุจูุงูุงุช ุงูุทูุจ ุฅูู ุฃูุงูู ูุฎุชููุฉ ูู ุงูุณุญุงุจุฉ ูุฃุนูู ุฃูู ูู ูุชู ุชุบููุฑูุง ููุงูุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู ุงููุดููุฉ ูู ุฃู ุงูููุซู ุงูุงูุชุฑุงุถู ูุง ูุนูู ูุน ุงูููุงุฐุฌ ุงูุชู ูุง ุชุญุชูู ุนูู ูููุดุฆ ุงูุชุฑุงุถู. </font><font style="vertical-align: inherit;">ูููู ูุง ุงูุฐู ูููุนูุง ูู ูุชุงุจุฉ ุฃุนูุงููุง ุงูุฎุงุตุฉุ</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุณุชุฎุฏู ุงูุฎุฏูุฉ ุงูุชู ูุชุจุช ุนููุง ูุฐุง ุงูุฑูุฒ REST ุ ููุชู ุฅุฑุณุงู ุงููุนููุงุช ููุท ูู ุฎูุงู Query and Body ุ ููุชู ุงุณุชุฎุฏุงู ููุนูู ููุท ูู ุงูุงุณุชุนูุงูุงุช - Get </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 and Post. </font><font style="vertical-align: inherit;">ููููุง ูุฐูู ุ ูู ุญุงูุฉ REST API ุ ุณูููู ููุทู ุงููุนุงูุฌุฉ ูุฎุชูููุง ููููุงู.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุนุงู ุ ุณุชุจูู ุงูุดูุฑุฉ ุฏูู ุชุบููุฑ ุ ููุท ุงูููุซู ุงูุฎุงุต ุจูุง ูุญุชุงุฌ ุฅูู ุงูุชูููุญ ุจุญูุซ ููุดุฆ ูุงุฆููุง ููููุฃ ุญูููู ุงูุฎุงุตุฉ. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ุณุฃุนุทู ุฃุฌุฒุงุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุน ุงูุชุนูููุงุช ุ ุบูุฑ ุงูููุชููู - ูู ููุงูุฉ ุงูููุงูุฉ ุชุญุช ุงููุทุฉ ุ ูุชู ุณุฑุฏ ุงููุงุฆูุฉ ุจุงููุงูู ูููุฆุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุฏุนูุง ูุญุฏุฏ ูุง ุฅุฐุง ูุงูุช MoreData ูู ุงูุฎุงุตูุฉ ุงููุญูุฏุฉ ูููุฆุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุฉ ุจูุนู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ุงููุงุฆู ุจููุณู (ูุฑุญุจูุง ุ Activator) ุ ูุฅุฐุง ูู ููู ูุฐูู ุ ูุณูููู JsonConvert ุจุงูููุงู ุจุงููููุฉ ุจุดูู ูุซุงูู ุ ูุณูููู ููุท ุจุณุญุจ ุงูุจูุงูุงุช ุงููุงุฒูุฉ ุฅูู ููุงู ุงูุฅูุงูุฉ.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">NeedActivator</span>(<span class="hljs-params">IReflect modelType</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> propFlags = BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance;
    <span class="hljs-keyword">var</span> properties = modelType.GetProperties(propFlags);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> properties.Select(p =&gt; p.Name).Distinct().Count() == <span class="hljs-number">1</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุดุงุก ูุงุฆู ูู ุฎูุงู JsonConvert ุฃูุฑ ุจุณูุท ุ ููุงุณุชุนูุงูุงุช ูุน Body:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">object</span>? GetModelFromBody(ModelBindingContext bindingContext, Type modelType)<font></font>
{<font></font>
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> StreamReader(bindingContext.HttpContext.Request.Body);
    <span class="hljs-keyword">var</span> jsonString = reader.ReadToEnd();
    <span class="hljs-keyword">var</span> data = JsonConvert.DeserializeObject(jsonString, modelType);
    <span class="hljs-keyword">return</span> data;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุน ุงูุงุณุชุนูุงู ูุงู ุนูู ุงูุงุณุชููุงุก. </font><font style="vertical-align: inherit;">ุณุฃููู ุณุนูุฏูุง ุฅุฐุง ูุงู ุจุฅููุงู ุดุฎุต ูุง ุงูุชุฑุงุญ ุญู ุฃูุซุฑ ุฌูุงููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุชูุฑูุฑ ุตููู ุ ูุชู ุงูุญุตูู ุนูู ุงูุนุฏูุฏ ูู ุงููุนููุงุช ุจููุณ ุงูุงุณู. </font><font style="vertical-align: inherit;">ูุณุงุนุฏ ุงูุฅุฑุณุงู ุฅูู ููุน ูุณุทุญ ุ ููู ุงูุชุณูุณู ูุถุน ุนูุงูุงุช ุงูุชุจุงุณ ุฅุถุงููุฉ ุนูู ุงูุตููู [] ุ ุงูุฐู ูุฌุจ ุฅุฒุงูุชู ูุฏูููุง.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">object</span>? GetModelFromQuery(ModelBindingContext bindingContext, Type modelType)<font></font>
{<font></font>
    <span class="hljs-keyword">var</span> valuesDictionary = QueryHelpers.ParseQuery(bindingContext.HttpContext.Request.QueryString.Value);
    <span class="hljs-keyword">var</span> jsonDictionary = valuesDictionary.ToDictionary(pair =&gt; pair.Key, pair =&gt; pair.Value.Count &lt; <span class="hljs-number">2</span> ? pair.Value.ToString() : <span class="hljs-string">$"[<span class="hljs-subst">{pair.Value}</span>]"</span>);<font></font>
<font></font>
    <span class="hljs-keyword">var</span> jsonStr = JsonConvert.SerializeObject(jsonDictionary).Replace(<span class="hljs-string">"\"["</span>, <span class="hljs-string">"["</span>).Replace(<span class="hljs-string">"]\""</span>, <span class="hljs-string">"]"</span>);
    <span class="hljs-keyword">var</span> data = JsonConvert.DeserializeObject(jsonStr, modelType);
    <span class="hljs-keyword">return</span> data;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ุนูุฏ ุฅูุดุงุก ุงููุงุฆู ุ ูู ุงูุถุฑูุฑู ูุชุงุจุฉ ุจูุงูุงุชูุง ูู ููุชููุงุชู ุงูุฎุงุตุฉ. </font><font style="vertical-align: inherit;">ุญูู ูุฐู ุงูุดุงูุงููุฉ ุงูุชู ุชุญุฏุซุช ุนููุง ูู ุจุฏุงูุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ููุฏ ูุฌุฏุช ูุฐุง ุงูุญู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ุฌุฒูู ุงูุดูุฑ ูููุคูู.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ForceSetValue</span>(<span class="hljs-params">PropertyInfo propertyInfo, <span class="hljs-keyword">object</span> obj, <span class="hljs-keyword">object</span> <span class="hljs-keyword">value</span></span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> propName = <span class="hljs-string">$"&lt;<span class="hljs-subst">{propertyInfo.Name}</span>&gt;k__BackingField"</span>;
    <span class="hljs-keyword">var</span> propFlags = BindingFlags.Instance | BindingFlags.NonPublic;<font></font>
            <font></font>
    obj.GetType().GetField(propName, propFlags)?.SetValue(obj, <span class="hljs-keyword">value</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ูุฏูุฌ ูุฐู ุงูุทุฑู ูู ููุงููุฉ ูุงุญุฏุฉ:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> Task <span class="hljs-title">BindModelAsync</span>(<span class="hljs-params">ModelBindingContext bindingContext</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> moreData = GetFromHeaderAndDecode(bindingContext.HttpContext.Request.Headers);
    <span class="hljs-keyword">if</span> (moreData == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> modelType = bindingContext.ModelMetadata.UnderlyingOrModelType;
    <span class="hljs-keyword">if</span> (NeedActivator(modelType))<font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> data = Activator.CreateInstance(modelType, moreData);<font></font>
        bindingContext.Result = ModelBindingResult.Success(data);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> model = bindingContext.HttpContext.Request.Method == <span class="hljs-string">"GET"</span><font></font>
                            ? GetModelFromQuery(bindingContext, modelType)<font></font>
                            : GetModelFromBody(bindingContext, modelType);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (model <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"  "</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> ignoreCase = StringComparison.InvariantCultureIgnoreCase;
    <span class="hljs-keyword">var</span> dataProperty = modelType.GetProperties()<font></font>
                            .FirstOrDefault(p =&gt; p.Name.Equals(<span class="hljs-keyword">typeof</span>(T).Name, ignoreCase));<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (dataProperty != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        ForceSetValue(dataProperty, model, moreData);<font></font>
    }<font></font>
<font></font>
    bindingContext.Result = ModelBindingResult.Success(model);<font></font>
    <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจูู ุฅุตูุงุญ BinderProvider ุจุญูุซ ูุณุชุฌูุจ ูุฃู ูุฆุงุช ูุน ุงูุฎุงุตูุฉ ุงููุทููุจุฉ:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MoreDataBinderProvider</span> : <span class="hljs-title">IModelBinderProvider</span><font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IModelBinder <span class="hljs-title">GetBinder</span>(<span class="hljs-params">ModelBinderProviderContext context</span>)</span><font></font>
    {<font></font>
       <span class="hljs-keyword">var</span> modelType = context.Metadata.UnderlyingOrModelType;
       <span class="hljs-keyword">if</span> (HasDataProperty(modelType))<font></font>
       {<font></font>
           <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BinderTypeModelBinder(<span class="hljs-keyword">typeof</span>(PrivateDataBinder&lt;MoreData&gt;));<font></font>
       }<font></font>
       <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">HasDataProperty</span>(<span class="hljs-params">IReflect modelType</span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> propFlags = BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance;
        <span class="hljs-keyword">var</span> properties = modelType.GetProperties(propFlags);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> properties.Select(p =&gt; p.Name) .Contains(<span class="hljs-keyword">nameof</span>(MoreData));<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดุฆ. </font><font style="vertical-align: inherit;">ุชุจูู ุฃู Binder ุฃูุซุฑ ุชุนููุฏูุง ููููุงู ูู ุงููุถุน ุงูุณูู ุ ูููู ูููููุง ุงูุขู ุฑุจุท ุงูุฎุตุงุฆุต "ุงูุฎุงุฑุฌูุฉ" ูู ุฌููุน ุทุฑู ุฌููุน ูุญุฏุงุช ุงูุชุญูู ุฏูู ุจุฐู ุฌููุฏ ุฅุถุงููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุณูุจูุงุช:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุญุฏุฏ ูููุดุฆ ุงููุงุฆูุงุช ุฐุงุช ุงูุญููู ุงูุฎุงุตุฉ ุงูุณูุฉ [JsonConstrustor]. </font><font style="vertical-align: inherit;">ููู ูุฐุง ูุชูุงุณุจ ุชูุงููุง ูุน ููุทู ุงููููุฐุฌ ููุง ูุชุฏุงุฎู ูุน ุฅุฏุฑุงูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุงู ูุง ุ ูุฏ ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู MoreData ูููุณ ูู ุงูุฑุฃุณ. </font><font style="vertical-align: inherit;">ูููู ูุชู ุงูุชุนุงูู ูุน ูุฐุง ูู ุฎูุงู ุฅูุดุงุก ูุฆุฉ ูููุตูุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ุจููุฉ ุงููุฑูู ุนูู ุนูู ุจูุฌูุฏ ุงูุณุญุฑ. </font><font style="vertical-align: inherit;">ููู ุงููุซุงุฆู ุณุชููุฐ ุงูุจุดุฑูุฉ.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฆูุฉ ูุงููุฉ ูู ุงูููุซู ุงููุงุชุฌ ููุง:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุฎุงุต MoreDataBinder.cs</font></font></b><div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PrivateDataBinder</span>&lt;T&gt; : <span class="hljs-title">IModelBinder</span><font></font>
    {<font></font>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span><span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="bindingContext"&gt;</span><span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> Task <span class="hljs-title">BindModelAsync</span>(<span class="hljs-params">ModelBindingContext bindingContext</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> moreData = GetFromHeaderAndDecode(bindingContext.HttpContext.Request.Headers);
            <span class="hljs-keyword">if</span> (moreData == <span class="hljs-literal">null</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">var</span> modelType = bindingContext.ModelMetadata.UnderlyingOrModelType;
            <span class="hljs-keyword">if</span> (NeedActivator(modelType))<font></font>
            {<font></font>
                <span class="hljs-keyword">var</span> data = Activator.CreateInstance(modelType, moreData);<font></font>
                bindingContext.Result = ModelBindingResult.Success(data);<font></font>
<font></font>
                <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">var</span> model = bindingContext.HttpContext.Request.Method == <span class="hljs-string">"GET"</span><font></font>
                            ? GetModelFromQuery(bindingContext, modelType)<font></font>
                            : GetModelFromBody(bindingContext, modelType);<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (model <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"  "</span>);<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">var</span> ignoreCase = StringComparison.InvariantCultureIgnoreCase;
            <span class="hljs-keyword">var</span> dataProperty = modelType.GetProperties()<font></font>
                                        .FirstOrDefault(p =&gt; p.Name.Equals(<span class="hljs-keyword">typeof</span>(T).Name, ignoreCase));<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (dataProperty != <span class="hljs-literal">null</span>)<font></font>
            {<font></font>
                ForceSetValue(dataProperty, model, moreData);<font></font>
            }<font></font>
<font></font>
            bindingContext.Result = ModelBindingResult.Success(model);<font></font>
<font></font>
            <span class="hljs-keyword">return</span> Task.CompletedTask;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">object</span>? GetModelFromQuery(ModelBindingContext bindingContext,<font></font>
                                                 Type modelType)<font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> valuesDictionary = QueryHelpers.ParseQuery(bindingContext.HttpContext.Request.QueryString.Value);<font></font>
<font></font>
            <span class="hljs-keyword">var</span> jsonDictionary = valuesDictionary.ToDictionary(pair =&gt; pair.Key, pair =&gt; pair.Value.Count &lt; <span class="hljs-number">2</span> ? pair.Value.ToString() : <span class="hljs-string">$"[<span class="hljs-subst">{pair.Value}</span>]"</span>);<font></font>
<font></font>
            <span class="hljs-keyword">var</span> jsonStr = JsonConvert.SerializeObject(jsonDictionary)<font></font>
                                     .Replace(<span class="hljs-string">"\"["</span>, <span class="hljs-string">"["</span>)<font></font>
                                     .Replace(<span class="hljs-string">"]\""</span>, <span class="hljs-string">"]"</span>);<font></font>
<font></font>
            <span class="hljs-keyword">var</span> data = JsonConvert.DeserializeObject(jsonStr, modelType);<font></font>
<font></font>
            <span class="hljs-keyword">return</span> data;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">object</span>? GetModelFromBody(ModelBindingContext bindingContext,<font></font>
                                                Type modelType)<font></font>
        {<font></font>
            <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> StreamReader(bindingContext.HttpContext.Request.Body);
            <span class="hljs-keyword">var</span> jsonString = reader.ReadToEnd();
            <span class="hljs-keyword">var</span> data = JsonConvert.DeserializeObject(jsonString, modelType);<font></font>
<font></font>
            <span class="hljs-keyword">return</span> data;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">NeedActivator</span>(<span class="hljs-params">IReflect modelType</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> propFlags = BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance;
            <span class="hljs-keyword">var</span> properties = modelType.GetProperties(propFlags);<font></font>
<font></font>
            <span class="hljs-keyword">return</span> properties.Select(p =&gt; p.Name).Distinct().Count() == <span class="hljs-number">1</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ForceSetValue</span>(<span class="hljs-params">PropertyInfo propertyInfo, <span class="hljs-keyword">object</span> obj, <span class="hljs-keyword">object</span> <span class="hljs-keyword">value</span></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> propName = <span class="hljs-string">$"&lt;<span class="hljs-subst">{propertyInfo.Name}</span>&gt;k__BackingField"</span>;
            <span class="hljs-keyword">var</span> propFlags = BindingFlags.Instance | BindingFlags.NonPublic;<font></font>
            <font></font>
            obj.GetType().GetField(propName, propFlags)?.SetValue(obj, <span class="hljs-keyword">value</span>);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> T <span class="hljs-title">GetFromHeaderAndDecode</span>(<span class="hljs-params">IHeaderDictionary headers</span>)</span> { <span class="hljs-keyword">return</span> (T)Activator.CreateInstance(<span class="hljs-keyword">typeof</span>(T), <span class="hljs-keyword">new</span> <span class="hljs-keyword">object</span>[] { <span class="hljs-string">"ok"</span> }); }<font></font>
    }<font></font>
</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar492806/index.html">ููููุฉ ุฑุจุท ุงูุชูุงุนู ุจุชุญููู ุงูุฏุฎู ูู ุฃูุนุงุจ ูุชุทุจููุงุช ุงูุฌูุงู</a></li>
<li><a href="../ar492808/index.html">ูุณุชุดุนุฑ ููุถุน ููุชุงุญ ุถูุก ุงูุทูุงุฑุฆ</a></li>
<li><a href="../ar492810/index.html">[COVID-19] ูููุชู ูู ุชุณููู ุงูุฐุฑูุฉ</a></li>
<li><a href="../ar492812/index.html">ูุญุงููุฉ ุชุดุบูู ุดุจูุงุช GAN ูู OpenVINO</a></li>
<li><a href="../ar492816/index.html">ูุตุงุฆุญ ูุญูู IntelliJ IDEA: 4. ุชุฒุงูู ููุดุงุฑูุฉ ุงูุฅุนุฏุงุฏุงุช</a></li>
<li><a href="../ar492822/index.html">ูุทูุฑู CSS - ููุงุฐุง ูุญุชุงุฌูู ุงูุนุงููุ</a></li>
<li><a href="../ar492828/index.html">ููููุฉ ุงูุจูุงุก ูู ุนุงูู ูุบูู</a></li>
<li><a href="../ar492830/index.html">SameSite = Lax ุงูุชุฑุงุถููุง - ุจุงููุนู ูู Chrome 80 ูุณุชูุฑ (ูุฅู ูู ููู ูุชุงุญูุง ููุฌููุน ุจุนุฏ)</a></li>
<li><a href="../ar492832/index.html">ุจูุงุจุฉ ุฅูุชุฑูุช ุงูุฃุดูุงุก ููุจุฑูุชููููุงุช ุงูุตูุงุนูุฉ ุงููุงุฆูุฉ ุนูู i.MX6 ู Linux</a></li>
<li><a href="../ar492834/index.html">ูุง ูู ุงููุดุชุฑู ุจูู LVM ู matryoshkaุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>